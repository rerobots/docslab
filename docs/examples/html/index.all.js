/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["docslab"] = factory();
	else
		root["docslab"] = factory();
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@xterm/addon-attach/lib/addon-attach.js":
/*!**************************************************************!*\
  !*** ./node_modules/@xterm/addon-attach/lib/addon-attach.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("!function(e,t){ true?module.exports=t():0}(self,(()=>(()=>{\"use strict\";var e={};return(()=>{var t=e;function s(e,t,s){return e.addEventListener(t,s),{dispose:()=>{s&&e.removeEventListener(t,s)}}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.AttachAddon=void 0,t.AttachAddon=class{constructor(e,t){this._disposables=[],this._socket=e,this._socket.binaryType=\"arraybuffer\",this._bidirectional=!(t&&!1===t.bidirectional)}activate(e){this._disposables.push(s(this._socket,\"message\",(t=>{const s=t.data;e.write(\"string\"==typeof s?s:new Uint8Array(s))}))),this._bidirectional&&(this._disposables.push(e.onData((e=>this._sendData(e)))),this._disposables.push(e.onBinary((e=>this._sendBinary(e))))),this._disposables.push(s(this._socket,\"close\",(()=>this.dispose()))),this._disposables.push(s(this._socket,\"error\",(()=>this.dispose())))}dispose(){for(const e of this._disposables)e.dispose()}_sendData(e){this._checkOpenSocket()&&this._socket.send(e)}_sendBinary(e){if(!this._checkOpenSocket())return;const t=new Uint8Array(e.length);for(let s=0;s<e.length;++s)t[s]=255&e.charCodeAt(s);this._socket.send(t)}_checkOpenSocket(){switch(this._socket.readyState){case WebSocket.OPEN:return!0;case WebSocket.CONNECTING:throw new Error(\"Attach addon was loaded before socket was open\");case WebSocket.CLOSING:return console.warn(\"Attach addon socket is closing\"),!1;case WebSocket.CLOSED:throw new Error(\"Attach addon socket is closed\");default:throw new Error(\"Unexpected socket state\")}}}})(),e})()));\n//# sourceMappingURL=addon-attach.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHh0ZXJtL2FkZG9uLWF0dGFjaC9saWIvYWRkb24tYXR0YWNoLmpzIiwibWFwcGluZ3MiOiJBQUFBLGVBQWUsS0FBaUQsb0JBQW9CLENBQXFILENBQUMsaUJBQWlCLGFBQWEsU0FBUyxZQUFZLFFBQVEsa0JBQWtCLGdDQUFnQyxhQUFhLGdDQUFnQyxzQ0FBc0MsU0FBUywyQ0FBMkMsaUJBQWlCLHlIQUF5SCxZQUFZLHFEQUFxRCxlQUFlLGdEQUFnRCwyUkFBMlIsVUFBVSw2Q0FBNkMsYUFBYSw4Q0FBOEMsZUFBZSxtQ0FBbUMsaUNBQWlDLFlBQVksV0FBVyw2QkFBNkIscUJBQXFCLG1CQUFtQixnQ0FBZ0MsNkJBQTZCLDRGQUE0RixnRkFBZ0YsdUVBQXVFLHNEQUFzRCxNQUFNO0FBQ2huRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvQHh0ZXJtL2FkZG9uLWF0dGFjaC9saWIvYWRkb24tYXR0YWNoLmpzP2UzZDUiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5BdHRhY2hBZGRvbj10KCk6ZS5BdHRhY2hBZGRvbj10KCl9KHNlbGYsKCgpPT4oKCk9PntcInVzZSBzdHJpY3RcIjt2YXIgZT17fTtyZXR1cm4oKCk9Pnt2YXIgdD1lO2Z1bmN0aW9uIHMoZSx0LHMpe3JldHVybiBlLmFkZEV2ZW50TGlzdGVuZXIodCxzKSx7ZGlzcG9zZTooKT0+e3MmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LHMpfX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5BdHRhY2hBZGRvbj12b2lkIDAsdC5BdHRhY2hBZGRvbj1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX2Rpc3Bvc2FibGVzPVtdLHRoaXMuX3NvY2tldD1lLHRoaXMuX3NvY2tldC5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIix0aGlzLl9iaWRpcmVjdGlvbmFsPSEodCYmITE9PT10LmJpZGlyZWN0aW9uYWwpfWFjdGl2YXRlKGUpe3RoaXMuX2Rpc3Bvc2FibGVzLnB1c2gocyh0aGlzLl9zb2NrZXQsXCJtZXNzYWdlXCIsKHQ9Pntjb25zdCBzPXQuZGF0YTtlLndyaXRlKFwic3RyaW5nXCI9PXR5cGVvZiBzP3M6bmV3IFVpbnQ4QXJyYXkocykpfSkpKSx0aGlzLl9iaWRpcmVjdGlvbmFsJiYodGhpcy5fZGlzcG9zYWJsZXMucHVzaChlLm9uRGF0YSgoZT0+dGhpcy5fc2VuZERhdGEoZSkpKSksdGhpcy5fZGlzcG9zYWJsZXMucHVzaChlLm9uQmluYXJ5KChlPT50aGlzLl9zZW5kQmluYXJ5KGUpKSkpKSx0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKHModGhpcy5fc29ja2V0LFwiY2xvc2VcIiwoKCk9PnRoaXMuZGlzcG9zZSgpKSkpLHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2gocyh0aGlzLl9zb2NrZXQsXCJlcnJvclwiLCgoKT0+dGhpcy5kaXNwb3NlKCkpKSl9ZGlzcG9zZSgpe2Zvcihjb25zdCBlIG9mIHRoaXMuX2Rpc3Bvc2FibGVzKWUuZGlzcG9zZSgpfV9zZW5kRGF0YShlKXt0aGlzLl9jaGVja09wZW5Tb2NrZXQoKSYmdGhpcy5fc29ja2V0LnNlbmQoZSl9X3NlbmRCaW5hcnkoZSl7aWYoIXRoaXMuX2NoZWNrT3BlblNvY2tldCgpKXJldHVybjtjb25zdCB0PW5ldyBVaW50OEFycmF5KGUubGVuZ3RoKTtmb3IobGV0IHM9MDtzPGUubGVuZ3RoOysrcyl0W3NdPTI1NSZlLmNoYXJDb2RlQXQocyk7dGhpcy5fc29ja2V0LnNlbmQodCl9X2NoZWNrT3BlblNvY2tldCgpe3N3aXRjaCh0aGlzLl9zb2NrZXQucmVhZHlTdGF0ZSl7Y2FzZSBXZWJTb2NrZXQuT1BFTjpyZXR1cm4hMDtjYXNlIFdlYlNvY2tldC5DT05ORUNUSU5HOnRocm93IG5ldyBFcnJvcihcIkF0dGFjaCBhZGRvbiB3YXMgbG9hZGVkIGJlZm9yZSBzb2NrZXQgd2FzIG9wZW5cIik7Y2FzZSBXZWJTb2NrZXQuQ0xPU0lORzpyZXR1cm4gY29uc29sZS53YXJuKFwiQXR0YWNoIGFkZG9uIHNvY2tldCBpcyBjbG9zaW5nXCIpLCExO2Nhc2UgV2ViU29ja2V0LkNMT1NFRDp0aHJvdyBuZXcgRXJyb3IoXCJBdHRhY2ggYWRkb24gc29ja2V0IGlzIGNsb3NlZFwiKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgc29ja2V0IHN0YXRlXCIpfX19fSkoKSxlfSkoKSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRkb24tYXR0YWNoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@xterm/addon-attach/lib/addon-attach.js\n");

/***/ }),

/***/ "./node_modules/@xterm/addon-fit/lib/addon-fit.js":
/*!********************************************************!*\
  !*** ./node_modules/@xterm/addon-fit/lib/addon-fit.js ***!
  \********************************************************/
/***/ ((module) => {

eval("!function(e,t){ true?module.exports=t():0}(self,(()=>(()=>{\"use strict\";var e={};return(()=>{var t=e;Object.defineProperty(t,\"__esModule\",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(e){this._terminal=e}dispose(){}fit(){const e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;const t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const e=this._terminal._core,t=e._renderService.dimensions;if(0===t.css.cell.width||0===t.css.cell.height)return;const r=0===this._terminal.options.scrollback?0:e.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(i.getPropertyValue(\"height\")),s=Math.max(0,parseInt(i.getPropertyValue(\"width\"))),n=window.getComputedStyle(this._terminal.element),l=o-(parseInt(n.getPropertyValue(\"padding-top\"))+parseInt(n.getPropertyValue(\"padding-bottom\"))),a=s-(parseInt(n.getPropertyValue(\"padding-right\"))+parseInt(n.getPropertyValue(\"padding-left\")))-r;return{cols:Math.max(2,Math.floor(a/t.css.cell.width)),rows:Math.max(1,Math.floor(l/t.css.cell.height))}}}})(),e})()));\n//# sourceMappingURL=addon-fit.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHh0ZXJtL2FkZG9uLWZpdC9saWIvYWRkb24tZml0LmpzIiwibWFwcGluZ3MiOiJBQUFBLGVBQWUsS0FBaUQsb0JBQW9CLENBQStHLENBQUMsaUJBQWlCLGFBQWEsU0FBUyxZQUFZLFFBQVEsc0NBQXNDLFNBQVMscUNBQXFDLFlBQVksaUJBQWlCLFdBQVcsTUFBTSxpQ0FBaUMsNERBQTRELDZCQUE2Qiw0SEFBNEgsb0JBQW9CLDBCQUEwQix5RUFBeUUsMkRBQTJELHNEQUFzRCw2ZEFBNmQsT0FBTyxvR0FBb0csTUFBTTtBQUM3NkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL0B4dGVybS9hZGRvbi1maXQvbGliL2FkZG9uLWZpdC5qcz9jZmIyIl0sInNvdXJjZXNDb250ZW50IjpbIiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuRml0QWRkb249dCgpOmUuRml0QWRkb249dCgpfShzZWxmLCgoKT0+KCgpPT57XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e307cmV0dXJuKCgpPT57dmFyIHQ9ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkZpdEFkZG9uPXZvaWQgMCx0LkZpdEFkZG9uPWNsYXNze2FjdGl2YXRlKGUpe3RoaXMuX3Rlcm1pbmFsPWV9ZGlzcG9zZSgpe31maXQoKXtjb25zdCBlPXRoaXMucHJvcG9zZURpbWVuc2lvbnMoKTtpZighZXx8IXRoaXMuX3Rlcm1pbmFsfHxpc05hTihlLmNvbHMpfHxpc05hTihlLnJvd3MpKXJldHVybjtjb25zdCB0PXRoaXMuX3Rlcm1pbmFsLl9jb3JlO3RoaXMuX3Rlcm1pbmFsLnJvd3M9PT1lLnJvd3MmJnRoaXMuX3Rlcm1pbmFsLmNvbHM9PT1lLmNvbHN8fCh0Ll9yZW5kZXJTZXJ2aWNlLmNsZWFyKCksdGhpcy5fdGVybWluYWwucmVzaXplKGUuY29scyxlLnJvd3MpKX1wcm9wb3NlRGltZW5zaW9ucygpe2lmKCF0aGlzLl90ZXJtaW5hbClyZXR1cm47aWYoIXRoaXMuX3Rlcm1pbmFsLmVsZW1lbnR8fCF0aGlzLl90ZXJtaW5hbC5lbGVtZW50LnBhcmVudEVsZW1lbnQpcmV0dXJuO2NvbnN0IGU9dGhpcy5fdGVybWluYWwuX2NvcmUsdD1lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnM7aWYoMD09PXQuY3NzLmNlbGwud2lkdGh8fDA9PT10LmNzcy5jZWxsLmhlaWdodClyZXR1cm47Y29uc3Qgcj0wPT09dGhpcy5fdGVybWluYWwub3B0aW9ucy5zY3JvbGxiYWNrPzA6ZS52aWV3cG9ydC5zY3JvbGxCYXJXaWR0aCxpPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQucGFyZW50RWxlbWVudCksbz1wYXJzZUludChpLmdldFByb3BlcnR5VmFsdWUoXCJoZWlnaHRcIikpLHM9TWF0aC5tYXgoMCxwYXJzZUludChpLmdldFByb3BlcnR5VmFsdWUoXCJ3aWR0aFwiKSkpLG49d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudCksbD1vLShwYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoXCJwYWRkaW5nLXRvcFwiKSkrcGFyc2VJbnQobi5nZXRQcm9wZXJ0eVZhbHVlKFwicGFkZGluZy1ib3R0b21cIikpKSxhPXMtKHBhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZShcInBhZGRpbmctcmlnaHRcIikpK3BhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZShcInBhZGRpbmctbGVmdFwiKSkpLXI7cmV0dXJue2NvbHM6TWF0aC5tYXgoMixNYXRoLmZsb29yKGEvdC5jc3MuY2VsbC53aWR0aCkpLHJvd3M6TWF0aC5tYXgoMSxNYXRoLmZsb29yKGwvdC5jc3MuY2VsbC5oZWlnaHQpKX19fX0pKCksZX0pKCkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkZG9uLWZpdC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@xterm/addon-fit/lib/addon-fit.js\n");

/***/ }),

/***/ "./node_modules/@xterm/xterm/lib/xterm.js":
/*!************************************************!*\
  !*** ./node_modules/@xterm/xterm/lib/xterm.js ***!
  \************************************************/
/***/ ((module) => {

eval("!function(e,t){if(true)module.exports=t();else { var s, i; }}(globalThis,(()=>(()=>{\"use strict\";var e={4567:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.AccessibilityManager=void 0;const n=i(9042),o=i(9924),a=i(844),h=i(4725),c=i(2585),l=i(3656);let d=t.AccessibilityManager=class extends a.Disposable{constructor(e,t,i,s){super(),this._terminal=e,this._coreBrowserService=i,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce=\"\",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement(\"div\"),this._accessibilityContainer.classList.add(\"xterm-accessibility\"),this._rowContainer=this._coreBrowserService.mainDocument.createElement(\"div\"),this._rowContainer.setAttribute(\"role\",\"list\"),this._rowContainer.classList.add(\"xterm-accessibility-tree\"),this._rowElements=[];for(let e=0;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);if(this._topBoundaryFocusListener=e=>this._handleBoundaryFocus(e,0),this._bottomBoundaryFocusListener=e=>this._handleBoundaryFocus(e,1),this._rowElements[0].addEventListener(\"focus\",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener(\"focus\",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement(\"div\"),this._liveRegion.classList.add(\"live-region\"),this._liveRegion.setAttribute(\"aria-live\",\"assertive\"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new o.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error(\"Cannot enable accessibility before Terminal.open\");this._terminal.element.insertAdjacentElement(\"afterbegin\",this._accessibilityContainer),this.register(this._terminal.onResize((e=>this._handleResize(e.rows)))),this.register(this._terminal.onRender((e=>this._refreshRows(e.start,e.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((e=>this._handleChar(e)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(\"\\n\")))),this.register(this._terminal.onA11yTab((e=>this._handleTab(e)))),this.register(this._terminal.onKey((e=>this._handleKey(e.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,l.addDisposableDomListener)(document,\"selectionchange\",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,a.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(\" \")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,\"\\n\"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=n.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent=\"\",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),/\\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const i=this._terminal.buffer,s=i.lines.length.toString();for(let r=e;r<=t;r++){const e=i.lines.get(i.ydisp+r),t=[],n=e?.translateToString(!0,void 0,void 0,t)||\"\",o=(i.ydisp+r+1).toString(),a=this._rowElements[r];a&&(0===n.length?(a.innerText=\" \",this._rowColumns.set(a,[0,1])):(a.textContent=n,this._rowColumns.set(a,t)),a.setAttribute(\"aria-posinset\",o),a.setAttribute(\"aria-setsize\",s))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce=\"\")}_handleBoundaryFocus(e,t){const i=e.target,s=this._rowElements[0===t?1:this._rowElements.length-2];if(i.getAttribute(\"aria-posinset\")===(0===t?\"1\":`${this._terminal.buffer.lines.length}`))return;if(e.relatedTarget!==s)return;let r,n;if(0===t?(r=i,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(r=this._rowElements.shift(),n=i,this._rowContainer.removeChild(r)),r.removeEventListener(\"focus\",this._topBoundaryFocusListener),n.removeEventListener(\"focus\",this._bottomBoundaryFocusListener),0===t){const e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement(\"afterbegin\",e)}else{const e=this._createAccessibilityTreeNode();this._rowElements.push(e),this._rowContainer.appendChild(e)}this._rowElements[0].addEventListener(\"focus\",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener(\"focus\",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(0===this._rowElements.length)return;const e=document.getSelection();if(!e)return;if(e.isCollapsed)return void(this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection());if(!e.anchorNode||!e.focusNode)return void console.error(\"anchorNode and/or focusNode are null\");let t={node:e.anchorNode,offset:e.anchorOffset},i={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(i.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===i.node&&t.offset>i.offset)&&([t,i]=[i,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;const s=this._rowElements.slice(-1)[0];if(i.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(i={node:s,offset:s.textContent?.length??0}),!this._rowContainer.contains(i.node))return;const r=({node:e,offset:t})=>{const i=e instanceof Text?e.parentNode:e;let s=parseInt(i?.getAttribute(\"aria-posinset\"),10)-1;if(isNaN(s))return console.warn(\"row is invalid. Race condition?\"),null;const r=this._rowColumns.get(i);if(!r)return console.warn(\"columns is null. Race condition?\"),null;let n=t<r.length?r[t]:r.slice(-1)[0]+1;return n>=this._terminal.cols&&(++s,n=0),{row:s,column:n}},n=r(t),o=r(i);if(n&&o){if(n.row>o.row||n.row===o.row&&n.column>=o.column)throw new Error(\"invalid range\");this._terminal.select(n.column,n.row,(o.row-n.row)*this._terminal.cols-n.column+o.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener(\"focus\",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener(\"focus\",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement(\"div\");return e.setAttribute(\"role\",\"listitem\"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};t.AccessibilityManager=d=s([r(1,c.IInstantiationService),r(2,h.ICoreBrowserService),r(3,h.IRenderService)],d)},3614:(e,t)=>{function i(e){return e.replace(/\\r?\\n/g,\"\\r\")}function s(e,t){return t?\"\u001b[200~\"+e+\"\u001b[201~\":e}function r(e,t,r,n){e=s(e=i(e),r.decPrivateModes.bracketedPasteMode&&!0!==n.rawOptions.ignoreBracketedPasteMode),r.triggerDataEvent(e,!0),t.value=\"\"}function n(e,t,i){const s=i.getBoundingClientRect(),r=e.clientX-s.left-10,n=e.clientY-s.top-10;t.style.width=\"20px\",t.style.height=\"20px\",t.style.left=`${r}px`,t.style.top=`${n}px`,t.style.zIndex=\"1000\",t.focus()}Object.defineProperty(t,\"__esModule\",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=i,t.bracketTextForPaste=s,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData(\"text/plain\",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,i,s){e.stopPropagation(),e.clipboardData&&r(e.clipboardData.getData(\"text/plain\"),t,i,s)},t.paste=r,t.moveTextAreaUnderMouseCursor=n,t.rightClickHandler=function(e,t,i,s,r){n(e,t,i),r&&s.rightClickSelect(e),t.value=s.selectionText,t.select()}},7239:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ColorContrastCache=void 0;const s=i(1505);t.ColorContrastCache=class{constructor(){this._color=new s.TwoKeyMap,this._css=new s.TwoKeyMap}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}}},3656:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,s){e.addEventListener(t,i,s);let r=!1;return{dispose:()=>{r||(r=!0,e.removeEventListener(t,i,s))}}}},3551:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.Linkifier=void 0;const n=i(3656),o=i(8460),a=i(844),h=i(2585),c=i(4725);let l=t.Linkifier=class extends a.Disposable{get currentLink(){return this._currentLink}constructor(e,t,i,s,r){super(),this._element=e,this._mouseService=t,this._renderService=i,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,a.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,a.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,n.addDisposableDomListener)(this._element,\"mouseleave\",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,n.addDisposableDomListener)(this._element,\"mousemove\",this._handleMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,\"mousedown\",this._handleMouseDown.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,\"mouseup\",this._handleMouseUp.bind(this)))}_handleMouseMove(e){this._lastMouseEvent=e;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const i=e.composedPath();for(let e=0;e<i.length;e++){const t=i[e];if(t.classList.contains(\"xterm\"))break;if(t.classList.contains(\"xterm-hover\"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){this._activeProviderReplies&&t||(this._activeProviderReplies?.forEach((e=>{e?.forEach((e=>{e.link.dispose&&e.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=e.y);let i=!1;for(const[s,r]of this._linkProviderService.linkProviders.entries())if(t){const t=this._activeProviderReplies?.get(s);t&&(i=this._checkLinkProviderResult(s,e,i))}else r.provideLinks(e.y,(t=>{if(this._isMouseOut)return;const r=t?.map((e=>({link:e})));this._activeProviderReplies?.set(s,r),i=this._checkLinkProviderResult(s,e,i),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)}))}_removeIntersectingLinks(e,t){const i=new Set;for(let s=0;s<t.size;s++){const r=t.get(s);if(r)for(let t=0;t<r.length;t++){const s=r[t],n=s.link.range.start.y<e?0:s.link.range.start.x,o=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x;for(let e=n;e<=o;e++){if(i.has(e)){r.splice(t--,1);break}i.add(e)}}}}_checkLinkProviderResult(e,t,i){if(!this._activeProviderReplies)return i;const s=this._activeProviderReplies.get(e);let r=!1;for(let t=0;t<e;t++)this._activeProviderReplies.has(t)&&!this._activeProviderReplies.get(t)||(r=!0);if(!r&&s){const e=s.find((e=>this._linkAtPosition(e.link,t)));e&&(i=!0,this._handleNewLink(e))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!i)for(let e=0;e<this._activeProviderReplies.size;e++){const s=this._activeProviderReplies.get(e)?.find((e=>this._linkAtPosition(e.link,t)));if(s){i=!0,this._handleNewLink(s);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._lastMouseEvent)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:e=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==e&&(this._currentLink.state.decorations.pointerCursor=e,this._currentLink.state.isHovered&&this._element.classList.toggle(\"xterm-cursor-pointer\",e))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:t=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((e=>{if(!this._currentLink)return;const t=0===e.start?0:e.start+1+this._bufferService.buffer.ydisp,i=this._bufferService.buffer.ydisp+1+e.end;if(this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i&&(this._clearCurrentLink(t,i),this._lastMouseEvent)){const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._askForLink(e,!1)}}))))}_linkHover(e,t,i){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add(\"xterm-cursor-pointer\")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){const i=e.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-s-1,i.end.x,i.end.y-s-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(e,t,i){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove(\"xterm-cursor-pointer\")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){const i=e.range.start.y*this._bufferService.cols+e.range.start.x,s=e.range.end.y*this._bufferService.cols+e.range.end.x,r=t.y*this._bufferService.cols+t.x;return i<=r&&r<=s}_positionFromMouseEvent(e,t,i){const s=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,s,r){return{x1:e,y1:t,x2:i,y2:s,cols:this._bufferService.cols,fg:r}}};t.Linkifier=l=s([r(1,c.IMouseService),r(2,c.IRenderService),r(3,h.IBufferService),r(4,c.ILinkProviderService)],l)},9042:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel=\"Terminal input\",t.tooMuchOutput=\"Too much output to announce, navigate to rows manually to read\"},3730:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.OscLinkProvider=void 0;const n=i(511),o=i(2585);let a=t.OscLinkProvider=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){const i=this._bufferService.buffer.lines.get(e-1);if(!i)return void t(void 0);const s=[],r=this._optionsService.rawOptions.linkHandler,o=new n.CellData,a=i.getTrimmedLength();let c=-1,l=-1,d=!1;for(let t=0;t<a;t++)if(-1!==l||i.hasContent(t)){if(i.loadCell(t,o),o.hasExtendedAttrs()&&o.extended.urlId){if(-1===l){l=t,c=o.extended.urlId;continue}d=o.extended.urlId!==c}else-1!==l&&(d=!0);if(d||-1!==l&&t===a-1){const i=this._oscLinkService.getLinkData(c)?.uri;if(i){const n={start:{x:l+1,y:e},end:{x:t+(d||t!==a-1?0:1),y:e}};let o=!1;if(!r?.allowNonHttpProtocols)try{const e=new URL(i);[\"http:\",\"https:\"].includes(e.protocol)||(o=!0)}catch(e){o=!0}o||s.push({text:i,range:n,activate:(e,t)=>r?r.activate(e,t,n):h(0,t),hover:(e,t)=>r?.hover?.(e,t,n),leave:(e,t)=>r?.leave?.(e,t,n)})}d=!1,o.hasExtendedAttrs()&&o.extended.urlId?(l=t,c=o.extended.urlId):(l=-1,c=-1)}}t(s)}};function h(e,t){if(confirm(`Do you want to navigate to ${t}?\\n\\nWARNING: This link could potentially be dangerous`)){const e=window.open();if(e){try{e.opener=null}catch{}e.location.href=t}else console.warn(\"Opening link blocked as opener could not be cleared\")}}t.OscLinkProvider=a=s([r(0,o.IBufferService),r(1,o.IOptionsService),r(2,o.IOscLinkService)],a)},6193:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}}},3236:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Terminal=void 0;const s=i(3614),r=i(3656),n=i(3551),o=i(9042),a=i(3730),h=i(1680),c=i(3107),l=i(5744),d=i(2950),_=i(1296),u=i(428),f=i(4269),v=i(5114),p=i(8934),g=i(3230),m=i(9312),S=i(4725),C=i(6731),b=i(8055),w=i(8969),y=i(8460),E=i(844),k=i(6114),L=i(8437),D=i(2584),R=i(7399),x=i(5941),A=i(9074),B=i(2585),T=i(5435),M=i(4567),O=i(779);class P extends w.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(e={}){super(e),this.browser=k,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new E.MutableDisposable),this._onCursorMove=this.register(new y.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new y.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new y.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new y.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new y.EventEmitter),this._onBlur=this.register(new y.EventEmitter),this._onA11yCharEmitter=this.register(new y.EventEmitter),this._onA11yTabEmitter=this.register(new y.EventEmitter),this._onWillOpen=this.register(new y.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(O.LinkProviderService),this._instantiationService.setService(S.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((e,t)=>this.refresh(e,t)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((e=>this._reportWindowsOptions(e)))),this.register(this._inputHandler.onColor((e=>this._handleColorEvent(e)))),this.register((0,y.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,y.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,y.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,y.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((e=>this._afterResize(e.cols,e.rows)))),this.register((0,E.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(e){if(this._themeService)for(const t of e){let e,i=\"\";switch(t.index){case 256:e=\"foreground\",i=\"10\";break;case 257:e=\"background\",i=\"11\";break;case 258:e=\"cursor\",i=\"12\";break;default:e=\"ansi\",i=\"4;\"+t.index}switch(t.type){case 0:const s=b.color.toColorRGB(\"ansi\"===e?this._themeService.colors.ansi[t.index]:this._themeService.colors[e]);this.coreService.triggerDataEvent(`${D.C0.ESC}]${i};${(0,x.toRgbString)(s)}${D.C1_ESCAPED.ST}`);break;case 1:if(\"ansi\"===e)this._themeService.modifyColors((e=>e.ansi[t.index]=b.channels.toColor(...t.color)));else{const i=e;this._themeService.modifyColors((e=>e[i]=b.channels.toColor(...t.color)))}break;case 2:this._themeService.restoreColor(t.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(M.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D.C0.ESC+\"[I\"),this.element.classList.add(\"focus\"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value=\"\",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D.C0.ESC+\"[O\"),this.element.classList.remove(\"focus\"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;const i=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=t.getWidth(i),n=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+\"px\",this.textarea.style.top=o+\"px\",this.textarea.style.width=n+\"px\",this.textarea.style.height=s+\"px\",this.textarea.style.lineHeight=s+\"px\",this.textarea.style.zIndex=\"-5\"}_initGlobal(){this._bindKeys(),this.register((0,r.addDisposableDomListener)(this.element,\"copy\",(e=>{this.hasSelection()&&(0,s.copyHandler)(e,this._selectionService)})));const e=e=>(0,s.handlePasteEvent)(e,this.textarea,this.coreService,this.optionsService);this.register((0,r.addDisposableDomListener)(this.textarea,\"paste\",e)),this.register((0,r.addDisposableDomListener)(this.element,\"paste\",e)),k.isFirefox?this.register((0,r.addDisposableDomListener)(this.element,\"mousedown\",(e=>{2===e.button&&(0,s.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,r.addDisposableDomListener)(this.element,\"contextmenu\",(e=>{(0,s.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),k.isLinux&&this.register((0,r.addDisposableDomListener)(this.element,\"auxclick\",(e=>{1===e.button&&(0,s.moveTextAreaUnderMouseCursor)(e,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,r.addDisposableDomListener)(this.textarea,\"keyup\",(e=>this._keyUp(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,\"keydown\",(e=>this._keyDown(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,\"keypress\",(e=>this._keyPress(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,\"compositionstart\",(()=>this._compositionHelper.compositionstart()))),this.register((0,r.addDisposableDomListener)(this.textarea,\"compositionupdate\",(e=>this._compositionHelper.compositionupdate(e)))),this.register((0,r.addDisposableDomListener)(this.textarea,\"compositionend\",(()=>this._compositionHelper.compositionend()))),this.register((0,r.addDisposableDomListener)(this.textarea,\"input\",(e=>this._inputEvent(e)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(e){if(!e)throw new Error(\"Terminal requires a parent element.\");if(e.isConnected||this._logService.debug(\"Terminal.open was called on an element that was not attached to the DOM\"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement(\"div\"),this.element.dir=\"ltr\",this.element.classList.add(\"terminal\"),this.element.classList.add(\"xterm\"),e.appendChild(this.element);const t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement(\"div\"),this._viewportElement.classList.add(\"xterm-viewport\"),t.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement(\"div\"),this._viewportScrollArea.classList.add(\"xterm-scroll-area\"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement(\"div\"),this.screenElement.classList.add(\"xterm-screen\"),this.register((0,r.addDisposableDomListener)(this.screenElement,\"mousemove\",(e=>this.updateCursorStyle(e)))),this._helperContainer=this._document.createElement(\"div\"),this._helperContainer.classList.add(\"xterm-helpers\"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement),this.textarea=this._document.createElement(\"textarea\"),this.textarea.classList.add(\"xterm-helper-textarea\"),this.textarea.setAttribute(\"aria-label\",o.promptLabel),k.isChromeOS||this.textarea.setAttribute(\"aria-multiline\",\"false\"),this.textarea.setAttribute(\"autocorrect\",\"off\"),this.textarea.setAttribute(\"autocapitalize\",\"off\"),this.textarea.setAttribute(\"spellcheck\",\"false\"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(v.CoreBrowserService,this.textarea,e.ownerDocument.defaultView??window,this._document??\"undefined\"!=typeof window?window.document:null)),this._instantiationService.setService(S.ICoreBrowserService,this._coreBrowserService),this.register((0,r.addDisposableDomListener)(this.textarea,\"focus\",(e=>this._handleTextAreaFocus(e)))),this.register((0,r.addDisposableDomListener)(this.textarea,\"blur\",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(S.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(C.ThemeService),this._instantiationService.setService(S.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(S.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(g.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(S.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((e=>this._onRender.fire(e)))),this.onResize((e=>this._renderService.resize(e.cols,e.rows))),this._compositionView=this._document.createElement(\"div\"),this._compositionView.classList.add(\"composition-view\"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(p.MouseService),this._instantiationService.setService(S.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(n.Linkifier,this.screenElement)),this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(h.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((e=>this.scrollLines(e.amount,e.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(S.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((e=>this.scrollLines(e.amount,e.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((e=>this._renderService.handleSelectionChanged(e.start,e.end,e.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((e=>{this.textarea.value=e,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((e=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,r.addDisposableDomListener)(this._viewportElement,\"scroll\",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,r.addDisposableDomListener)(this.element,\"mousedown\",(e=>this._selectionService.handleMouseDown(e)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add(\"enable-mouse-events\")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(M.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange(\"screenReaderMode\",(e=>this._handleScreenReaderModeOptionChange(e)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange(\"overviewRulerWidth\",(e=>{!this._overviewRulerRenderer&&e&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const e=this,t=this.element;function i(t){const i=e._mouseService.getMouseReportCoords(t,e.screenElement);if(!i)return!1;let s,r;switch(t.overrideType||t.type){case\"mousemove\":r=32,void 0===t.buttons?(s=3,void 0!==t.button&&(s=t.button<3?t.button:3)):s=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case\"mouseup\":r=0,s=t.button<3?t.button:3;break;case\"mousedown\":r=1,s=t.button<3?t.button:3;break;case\"wheel\":if(e._customWheelEventHandler&&!1===e._customWheelEventHandler(t))return!1;if(0===e.viewport.getLinesScrolled(t))return!1;r=t.deltaY<0?0:1,s=4;break;default:return!1}return!(void 0===r||void 0===s||s>4)&&e.coreMouseService.triggerMouseEvent({col:i.col,row:i.row,x:i.x,y:i.y,button:s,action:r,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}const s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},n={mouseup:e=>(i(e),e.buttons||(this._document.removeEventListener(\"mouseup\",s.mouseup),s.mousedrag&&this._document.removeEventListener(\"mousemove\",s.mousedrag)),this.cancel(e)),wheel:e=>(i(e),this.cancel(e,!0)),mousedrag:e=>{e.buttons&&i(e)},mousemove:e=>{e.buttons||i(e)}};this.register(this.coreMouseService.onProtocolChange((e=>{e?(\"debug\"===this.optionsService.rawOptions.logLevel&&this._logService.debug(\"Binding to mouse events:\",this.coreMouseService.explainEvents(e)),this.element.classList.add(\"enable-mouse-events\"),this._selectionService.disable()):(this._logService.debug(\"Unbinding from mouse events.\"),this.element.classList.remove(\"enable-mouse-events\"),this._selectionService.enable()),8&e?s.mousemove||(t.addEventListener(\"mousemove\",n.mousemove),s.mousemove=n.mousemove):(t.removeEventListener(\"mousemove\",s.mousemove),s.mousemove=null),16&e?s.wheel||(t.addEventListener(\"wheel\",n.wheel,{passive:!1}),s.wheel=n.wheel):(t.removeEventListener(\"wheel\",s.wheel),s.wheel=null),2&e?s.mouseup||(s.mouseup=n.mouseup):(this._document.removeEventListener(\"mouseup\",s.mouseup),s.mouseup=null),4&e?s.mousedrag||(s.mousedrag=n.mousedrag):(this._document.removeEventListener(\"mousemove\",s.mousedrag),s.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,r.addDisposableDomListener)(t,\"mousedown\",(e=>{if(e.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(e))return i(e),s.mouseup&&this._document.addEventListener(\"mouseup\",s.mouseup),s.mousedrag&&this._document.addEventListener(\"mousemove\",s.mousedrag),this.cancel(e)}))),this.register((0,r.addDisposableDomListener)(t,\"wheel\",(e=>{if(!s.wheel){if(this._customWheelEventHandler&&!1===this._customWheelEventHandler(e))return!1;if(!this.buffer.hasScrollback){const t=this.viewport.getLinesScrolled(e);if(0===t)return;const i=D.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?\"O\":\"[\")+(e.deltaY<0?\"A\":\"B\");let s=\"\";for(let e=0;e<Math.abs(t);e++)s+=i;return this.coreService.triggerDataEvent(s,!0),this.cancel(e,!0)}return this.viewport.handleWheel(e)?this.cancel(e):void 0}}),{passive:!1})),this.register((0,r.addDisposableDomListener)(t,\"touchstart\",(e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(e),this.cancel(e)}),{passive:!0})),this.register((0,r.addDisposableDomListener)(t,\"touchmove\",(e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(e)?void 0:this.cancel(e)}),{passive:!1}))}refresh(e,t){this._renderService?.refreshRows(e,t)}updateCursorStyle(e){this._selectionService?.shouldColumnSelect(e)?this.element.classList.add(\"column-select\"):this.element.classList.remove(\"column-select\")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t,i=0){1===i?(super.scrollLines(e,t,i),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(e)}paste(e){(0,s.paste)(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error(\"Terminal must be opened first\");const t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error(\"Terminal must be opened first\");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:\"\"}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(e,t){this._selectionService?.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;const t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;t||\"Dead\"!==e.key&&\"AltGraph\"!==e.key||(this._unprocessedDeadKey=!0);const i=(0,R.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===i.type||2===i.type){const t=this.rows-1;return this.scrollLines(2===i.type?-t:t),this.cancel(e,!0)}return 1===i.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(i.key!==D.C0.ETX&&i.key!==D.C0.CR||(this.textarea.value=\"\"),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey?this.cancel(e,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(e,t){const i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState(\"AltGraph\");return\"keypress\"===t.type?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(e){if(e.data&&\"insertText\"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){e!==this.cols||t!==this.rows?super.resize(e,t):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(e,t){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const e=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains(\"focus\")?this.coreService.triggerDataEvent(D.C0.ESC+\"[I\"):this.coreService.triggerDataEvent(D.C0.ESC+\"[O\")}_reportWindowsOptions(e){if(this._renderService)switch(e){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const e=this._renderService.dimensions.css.canvas.width.toFixed(0),t=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${D.C0.ESC}[4;${t};${e}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const i=this._renderService.dimensions.css.cell.width.toFixed(0),s=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${D.C0.ESC}[6;${s};${i}t`)}}cancel(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1}}t.Terminal=P},9924:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(e,t=1e3){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;const s=Date.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){const e=s-this._lastRefreshMs,t=this._debounceThresholdMS-e;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),t)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}}},1680:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.Viewport=void 0;const n=i(3656),o=i(4725),a=i(8460),h=i(844),c=i(2585);let l=t.Viewport=class extends h.Disposable{constructor(e,t,i,s,r,o,h,c){super(),this._viewportElement=e,this._scrollArea=t,this._bufferService=i,this._optionsService=s,this._charSizeService=r,this._renderService=o,this._coreBrowserService=h,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new a.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,n.addDisposableDomListener)(this._viewportElement,\"scroll\",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((e=>this._activeBuffer=e.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((e=>this._renderDimensions=e))),this._handleThemeChange(c.colors),this.register(c.onChangeColors((e=>this._handleThemeChange(e)))),this.register(this._optionsService.onSpecificOptionChange(\"scrollback\",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(e){if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+\"px\")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,t){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&i<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const t=this._getPixelsScrolled(e);return 0!==t&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}scrollLines(e){if(0!==e)if(this._optionsService.rawOptions.smoothScrollDuration){const t=e*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!1})}_getPixelsScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(e,t){let i,s=\"\";const r=[],n=t??this._bufferService.buffer.lines.length,o=this._bufferService.buffer.lines;for(let t=e;t<n;t++){const e=o.get(t);if(!e)continue;const n=o.get(t+1)?.isWrapped;if(s+=e.translateToString(!n),!n||t===o.length-1){const e=document.createElement(\"div\");e.textContent=s,r.push(e),s.length>0&&(i=e),s=\"\"}}return{bufferElements:r,cursorElement:i}}getLinesScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(e,t){const i=this._optionsService.rawOptions.fastScrollModifier;return\"alt\"===i&&t.altKey||\"ctrl\"===i&&t.ctrlKey||\"shift\"===i&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}};t.Viewport=l=s([r(2,c.IBufferService),r(3,c.IOptionsService),r(4,o.ICharSizeService),r(5,o.IRenderService),r(6,o.ICoreBrowserService),r(7,o.IThemeService)],l)},3107:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferDecorationRenderer=void 0;const n=i(4725),o=i(844),a=i(2585);let h=t.BufferDecorationRenderer=class extends o.Disposable{constructor(e,t,i,s,r){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=i,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement(\"div\"),this._container.classList.add(\"xterm-decoration-container\"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((e=>this._removeDecoration(e)))),this.register((0,o.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){const t=this._coreBrowserService.mainDocument.createElement(\"div\");t.classList.add(\"xterm-decoration\"),t.classList.toggle(\"xterm-decoration-top-layer\",\"top\"===e?.options?.layer),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+\"px\",t.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+\"px\",t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const i=e.options.x??0;return i&&i>this._bufferService.cols&&(t.style.display=\"none\"),this._refreshXPosition(e,t),t}_refreshStyle(e){const t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display=\"none\",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose((()=>{this._decorationElements.delete(e),i.remove()}))),i.style.top=t*this._renderService.dimensions.css.cell.height+\"px\",i.style.display=this._altBufferIsActive?\"none\":\"block\",e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){if(!t)return;const i=e.options.x??0;\"right\"===(e.options.anchor||\"left\")?t.style.right=i?i*this._renderService.dimensions.css.cell.width+\"px\":\"\":t.style.left=i?i*this._renderService.dimensions.css.cell.width+\"px\":\"\"}_removeDecoration(e){this._decorationElements.get(e)?.remove(),this._decorationElements.delete(e),e.dispose()}};t.BufferDecorationRenderer=h=s([r(1,a.IBufferService),r(2,n.ICoreBrowserService),r(3,a.IDecorationService),r(4,n.IRenderService)],h)},5871:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(const t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(t,e.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||\"full\"]&&t<=e.endBufferLine+this._linePadding[i||\"full\"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}}},5744:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.OverviewRulerRenderer=void 0;const n=i(5871),o=i(4725),a=i(844),h=i(2585),c={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0};let _=t.OverviewRulerRenderer=class extends a.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(e,t,i,s,r,o,h){super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=s,this._renderService=r,this._optionsService=o,this._coreBrowserService=h,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement(\"canvas\"),this._canvas.classList.add(\"xterm-decoration-overview-ruler\"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const c=this._canvas.getContext(\"2d\");if(!c)throw new Error(\"Ctx cannot be null\");this._ctx=c,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,a.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?\"none\":\"block\"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange(\"overviewRulerWidth\",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=e,l.center=t,l.right=e,this._refreshDrawHeightConstants(),d.full=0,d.left=0,d.center=l.left,d.right=l.left+l.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowserService.dpr);const e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);c.left=t,c.center=t,c.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1;const e=this._colorZoneStore.zones;for(const t of e)\"full\"!==t.position&&this._renderColorZone(t);for(const t of e)\"full\"===t.position&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(d[e.position||\"full\"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-c[e.position||\"full\"]/2),l[e.position||\"full\"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[e.position||\"full\"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};t.OverviewRulerRenderer=_=s([r(2,h.IBufferService),r(3,h.IDecorationService),r(4,o.IRenderService),r(5,h.IOptionsService),r(6,o.ICoreBrowserService)],_)},2950:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CompositionHelper=void 0;const n=i(4725),o=i(2585),a=i(2584);let h=t.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(e,t,i,s,r,n){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=s,this._coreService=r,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=\"\"}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent=\"\",this._dataAlreadySent=\"\",this._compositionView.classList.add(\"active\")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(e){if(this._compositionView.classList.remove(\"active\"),this._isComposing=!1,e){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let t;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,t=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),t.length>0&&this._coreService.triggerDataEvent(t,!0)}}),0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const e=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const t=this._textarea.value,i=t.replace(e,\"\");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${a.C0.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}}),0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,s=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=s+\"px\",this._compositionView.style.top=i+\"px\",this._compositionView.style.height=t+\"px\",this._compositionView.style.lineHeight=t+\"px\",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+\"px\";const r=this._compositionView.getBoundingClientRect();this._textarea.style.left=s+\"px\",this._textarea.style.top=i+\"px\",this._textarea.style.width=Math.max(r.width,1)+\"px\",this._textarea.style.height=Math.max(r.height,1)+\"px\",this._textarea.style.lineHeight=r.height+\"px\"}e||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};t.CompositionHelper=h=s([r(2,o.IBufferService),r(3,o.IOptionsService),r(4,o.ICoreService),r(5,n.IRenderService)],h)},9806:(e,t)=>{function i(e,t,i){const s=i.getBoundingClientRect(),r=e.getComputedStyle(i),n=parseInt(r.getPropertyValue(\"padding-left\")),o=parseInt(r.getPropertyValue(\"padding-top\"));return[t.clientX-s.left-n,t.clientY-s.top-o]}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=i,t.getCoords=function(e,t,s,r,n,o,a,h,c){if(!o)return;const l=i(e,t,s);return l?(l[0]=Math.ceil((l[0]+(c?a/2:0))/a),l[1]=Math.ceil(l[1]/h),l[0]=Math.min(Math.max(l[0],1),r+(c?1:0)),l[1]=Math.min(Math.max(l[1],1),n),l):void 0}},9504:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.moveToCellSequence=void 0;const s=i(2584);function r(e,t,i,s){const r=e-n(e,i),a=t-n(t,i),l=Math.abs(r-a)-function(e,t,i){let s=0;const r=e-n(e,i),a=t-n(t,i);for(let n=0;n<Math.abs(r-a);n++){const a=\"A\"===o(e,t)?-1:1,h=i.buffer.lines.get(r+a*n);h?.isWrapped&&s++}return s}(e,t,i);return c(l,h(o(e,t),s))}function n(e,t){let i=0,s=t.buffer.lines.get(e),r=s?.isWrapped;for(;r&&e>=0&&e<t.rows;)i++,s=t.buffer.lines.get(--e),r=s?.isWrapped;return i}function o(e,t){return e>t?\"A\":\"B\"}function a(e,t,i,s,r,n){let o=e,a=t,h=\"\";for(;o!==i||a!==s;)o+=r?1:-1,r&&o>n.cols-1?(h+=n.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!r&&o<0&&(h+=n.buffer.translateBufferLineToString(a,!1,0,e+1),o=n.cols-1,e=o,a--);return h+n.buffer.translateBufferLineToString(a,!1,e,o)}function h(e,t){const i=t?\"O\":\"[\";return s.C0.ESC+i+e}function c(e,t){e=Math.floor(e);let i=\"\";for(let s=0;s<e;s++)i+=t;return i}t.moveToCellSequence=function(e,t,i,s){const o=i.buffer.x,l=i.buffer.y;if(!i.buffer.hasScrollback)return function(e,t,i,s,o,l){return 0===r(t,s,o,l).length?\"\":c(a(e,t,e,t-n(t,o),!1,o).length,h(\"D\",l))}(o,l,0,t,i,s)+r(l,t,i,s)+function(e,t,i,s,o,l){let d;d=r(t,s,o,l).length>0?s-n(s,o):t;const _=s,u=function(e,t,i,s,o,a){let h;return h=r(i,s,o,a).length>0?s-n(s,o):t,e<i&&h<=s||e>=i&&h<s?\"C\":\"D\"}(e,t,i,s,o,l);return c(a(e,d,i,_,\"C\"===u,o).length,h(u,l))}(o,l,e,t,i,s);let d;if(l===t)return d=o>e?\"D\":\"C\",c(Math.abs(o-e),h(d,s));d=l>t?\"D\":\"C\";const _=Math.abs(l-t);return c(function(e,t){return t.cols-e}(l>t?e:o,i)+(_-1)*i.cols+1+((l>t?o:e)-1),h(d,s))}},1296:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.DomRenderer=void 0;const n=i(3787),o=i(2550),a=i(2223),h=i(6171),c=i(6052),l=i(4725),d=i(8055),_=i(8460),u=i(844),f=i(2585),v=\"xterm-dom-renderer-owner-\",p=\"xterm-rows\",g=\"xterm-fg-\",m=\"xterm-bg-\",S=\"xterm-focus\",C=\"xterm-selection\";let b=1,w=t.DomRenderer=class extends u.Disposable{constructor(e,t,i,s,r,a,l,d,f,g,m,S,w){super(),this._terminal=e,this._document=t,this._element=i,this._screenElement=s,this._viewportElement=r,this._helperContainer=a,this._linkifier2=l,this._charSizeService=f,this._optionsService=g,this._bufferService=m,this._coreBrowserService=S,this._themeService=w,this._terminalClass=b++,this._rowElements=[],this._selectionRenderModel=(0,c.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=this._document.createElement(\"div\"),this._rowContainer.classList.add(p),this._rowContainer.style.lineHeight=\"normal\",this._rowContainer.setAttribute(\"aria-hidden\",\"true\"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement(\"div\"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute(\"aria-hidden\",\"true\"),this.dimensions=(0,h.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((e=>this._injectCss(e)))),this._injectCss(this._themeService.colors),this._rowFactory=d.createInstance(n.DomRendererRowFactory,document),this._element.classList.add(v+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((e=>this._handleLinkHover(e)))),this.register(this._linkifier2.onHideLinkUnderline((e=>this._handleLinkLeave(e)))),this.register((0,u.toDisposable)((()=>{this._element.classList.remove(v+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new o.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const e of this._rowElements)e.style.width=`${this.dimensions.css.canvas.width}px`,e.style.height=`${this.dimensions.css.cell.height}px`,e.style.lineHeight=`${this.dimensions.css.cell.height}px`,e.style.overflow=\"hidden\";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement(\"style\"),this._screenElement.appendChild(this._dimensionsStyleElement));const t=`${this._terminalSelector} .${p} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement(\"style\"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${p} { color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${p} .xterm-dim { color: ${d.color.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const i=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;t+=`@keyframes ${i} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${r} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(const[i,s]of e.ansi.entries())t+=`${this._terminalSelector} .${g}${i} { color: ${s.css}; }${this._terminalSelector} .${g}${i}.xterm-dim { color: ${d.color.multiplyOpacity(s,.5).css}; }${this._terminalSelector} .${m}${i} { background-color: ${s.css}; }`;t+=`${this._terminalSelector} .${g}${a.INVERTED_DEFAULT_COLOR} { color: ${d.color.opaque(e.background).css}; }${this._terminalSelector} .${g}${a.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${d.color.multiplyOpacity(d.color.opaque(e.background),.5).css}; }${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR} { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){const e=this.dimensions.css.cell.width-this._widthCache.get(\"W\",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let e=this._rowElements.length;e<=t;e++){const e=this._document.createElement(\"div\");this._rowContainer.appendChild(e),this._rowElements.push(e)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(S),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(S),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t)return;this._selectionRenderModel.update(this._terminal,e,t,i);const s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,n=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow;if(n>=this._bufferService.rows||o<0)return;const a=this._document.createDocumentFragment();if(i){const i=e[0]>t[0];a.appendChild(this._createSelectionElement(n,i?t[0]:e[0],i?e[0]:t[0],o-n+1))}else{const i=s===n?e[0]:0,h=n===r?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(n,i,h));const c=o-n-1;if(a.appendChild(this._createSelectionElement(n+1,0,this._bufferService.cols,c)),n!==o){const e=r===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,e))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,i,s=1){const r=this._document.createElement(\"div\"),n=t*this.dimensions.css.cell.width;let o=this.dimensions.css.cell.width*(i-t);return n+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-n),r.style.height=s*this.dimensions.css.cell.height+\"px\",r.style.top=e*this.dimensions.css.cell.height+\"px\",r.style.left=`${n}px`,r.style.width=`${o}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const e of this._rowElements)e.replaceChildren()}renderRows(e,t){const i=this._bufferService.buffer,s=i.ybase+i.y,r=Math.min(i.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let h=e;h<=t;h++){const e=h+i.ydisp,t=this._rowElements[h],c=i.lines.get(e);if(!t||!c)break;t.replaceChildren(...this._rowFactory.createRow(c,e,e===s,o,a,r,n,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${v}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,s,r,n){i<0&&(e=0),s<0&&(t=0);const o=this._bufferService.rows-1;i=Math.max(Math.min(i,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);const a=this._bufferService.buffer,h=a.ybase+a.y,c=Math.min(a.x,r-1),l=this._optionsService.rawOptions.cursorBlink,d=this._optionsService.rawOptions.cursorStyle,_=this._optionsService.rawOptions.cursorInactiveStyle;for(let o=i;o<=s;++o){const u=o+a.ydisp,f=this._rowElements[o],v=a.lines.get(u);if(!f||!v)break;f.replaceChildren(...this._rowFactory.createRow(v,u,u===h,d,_,c,l,this.dimensions.css.cell.width,this._widthCache,n?o===i?e:0:-1,n?(o===s?t:r)-1:-1))}}};t.DomRenderer=w=s([r(7,f.IInstantiationService),r(8,l.ICharSizeService),r(9,f.IOptionsService),r(10,f.IBufferService),r(11,l.ICoreBrowserService),r(12,l.IThemeService)],w)},3787:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.DomRendererRowFactory=void 0;const n=i(2223),o=i(643),a=i(511),h=i(2585),c=i(8055),l=i(4725),d=i(4269),_=i(6171),u=i(3734);let f=t.DomRendererRowFactory=class{constructor(e,t,i,s,r,n,o){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=s,this._coreService=r,this._decorationService=n,this._themeService=o,this._workCell=new a.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,s,r,a,h,l,_,f,p){const g=[],m=this._characterJoinerService.getJoinedCharacters(t),S=this._themeService.colors;let C,b=e.getNoBgTrimmedLength();i&&b<a+1&&(b=a+1);let w=0,y=\"\",E=0,k=0,L=0,D=!1,R=0,x=!1,A=0;const B=[],T=-1!==f&&-1!==p;for(let M=0;M<b;M++){e.loadCell(M,this._workCell);let b=this._workCell.getWidth();if(0===b)continue;let O=!1,P=M,I=this._workCell;if(m.length>0&&M===m[0][0]){O=!0;const t=m.shift();I=new d.JoinedCellData(this._workCell,e.translateToString(!0,t[0],t[1]),t[1]-t[0]),P=t[1]-1,b=I.getWidth()}const H=this._isCellInSelection(M,t),F=i&&M===a,W=T&&M>=f&&M<=p;let U=!1;this._decorationService.forEachDecorationAtCell(M,t,void 0,(e=>{U=!0}));let N=I.getChars()||o.WHITESPACE_CELL_CHAR;if(\" \"===N&&(I.isUnderline()||I.isOverline())&&(N=\" \"),A=b*l-_.get(N,I.isBold(),I.isItalic()),C){if(w&&(H&&x||!H&&!x&&I.bg===E)&&(H&&x&&S.selectionForeground||I.fg===k)&&I.extended.ext===L&&W===D&&A===R&&!F&&!O&&!U){I.isInvisible()?y+=o.WHITESPACE_CELL_CHAR:y+=N,w++;continue}w&&(C.textContent=y),C=this._document.createElement(\"span\"),w=0,y=\"\"}else C=this._document.createElement(\"span\");if(E=I.bg,k=I.fg,L=I.extended.ext,D=W,R=A,x=H,O&&a>=M&&a<=P&&(a=M),!this._coreService.isCursorHidden&&F&&this._coreService.isCursorInitialized)if(B.push(\"xterm-cursor\"),this._coreBrowserService.isFocused)h&&B.push(\"xterm-cursor-blink\"),B.push(\"bar\"===s?\"xterm-cursor-bar\":\"underline\"===s?\"xterm-cursor-underline\":\"xterm-cursor-block\");else if(r)switch(r){case\"outline\":B.push(\"xterm-cursor-outline\");break;case\"block\":B.push(\"xterm-cursor-block\");break;case\"bar\":B.push(\"xterm-cursor-bar\");break;case\"underline\":B.push(\"xterm-cursor-underline\")}if(I.isBold()&&B.push(\"xterm-bold\"),I.isItalic()&&B.push(\"xterm-italic\"),I.isDim()&&B.push(\"xterm-dim\"),y=I.isInvisible()?o.WHITESPACE_CELL_CHAR:I.getChars()||o.WHITESPACE_CELL_CHAR,I.isUnderline()&&(B.push(`xterm-underline-${I.extended.underlineStyle}`),\" \"===y&&(y=\" \"),!I.isUnderlineColorDefault()))if(I.isUnderlineColorRGB())C.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(I.getUnderlineColor()).join(\",\")})`;else{let e=I.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&I.isBold()&&e<8&&(e+=8),C.style.textDecorationColor=S.ansi[e].css}I.isOverline()&&(B.push(\"xterm-overline\"),\" \"===y&&(y=\" \")),I.isStrikethrough()&&B.push(\"xterm-strikethrough\"),W&&(C.style.textDecoration=\"underline\");let $=I.getFgColor(),j=I.getFgColorMode(),z=I.getBgColor(),K=I.getBgColorMode();const q=!!I.isInverse();if(q){const e=$;$=z,z=e;const t=j;j=K,K=t}let V,G,X,J=!1;switch(this._decorationService.forEachDecorationAtCell(M,t,void 0,(e=>{\"top\"!==e.options.layer&&J||(e.backgroundColorRGB&&(K=50331648,z=e.backgroundColorRGB.rgba>>8&16777215,V=e.backgroundColorRGB),e.foregroundColorRGB&&(j=50331648,$=e.foregroundColorRGB.rgba>>8&16777215,G=e.foregroundColorRGB),J=\"top\"===e.options.layer)})),!J&&H&&(V=this._coreBrowserService.isFocused?S.selectionBackgroundOpaque:S.selectionInactiveBackgroundOpaque,z=V.rgba>>8&16777215,K=50331648,J=!0,S.selectionForeground&&(j=50331648,$=S.selectionForeground.rgba>>8&16777215,G=S.selectionForeground)),J&&B.push(\"xterm-decoration-top\"),K){case 16777216:case 33554432:X=S.ansi[z],B.push(`xterm-bg-${z}`);break;case 50331648:X=c.channels.toColor(z>>16,z>>8&255,255&z),this._addStyle(C,`background-color:#${v((z>>>0).toString(16),\"0\",6)}`);break;default:q?(X=S.foreground,B.push(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)):X=S.background}switch(V||I.isDim()&&(V=c.color.multiplyOpacity(X,.5)),j){case 16777216:case 33554432:I.isBold()&&$<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&($+=8),this._applyMinimumContrast(C,X,S.ansi[$],I,V,void 0)||B.push(`xterm-fg-${$}`);break;case 50331648:const e=c.channels.toColor($>>16&255,$>>8&255,255&$);this._applyMinimumContrast(C,X,e,I,V,G)||this._addStyle(C,`color:#${v($.toString(16),\"0\",6)}`);break;default:this._applyMinimumContrast(C,X,S.foreground,I,V,G)||q&&B.push(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)}B.length&&(C.className=B.join(\" \"),B.length=0),F||O||U?C.textContent=y:w++,A!==this.defaultSpacing&&(C.style.letterSpacing=`${A}px`),g.push(C),M=P}return C&&w&&(C.textContent=y),g}_applyMinimumContrast(e,t,i,s,r,n){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,_.treatGlyphAsBackgroundColor)(s.getCode()))return!1;const o=this._getContrastCache(s);let a;if(r||n||(a=o.getColor(t.rgba,i.rgba)),void 0===a){const e=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);a=c.color.ensureContrastRatio(r||t,n||i,e),o.setColor((r||t).rgba,(n||i).rgba,a??null)}return!!a&&(this._addStyle(e,`color:${a.css}`),!0)}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute(\"style\",`${e.getAttribute(\"style\")||\"\"}${t};`)}_isCellInSelection(e,t){const i=this._selectionStart,s=this._selectionEnd;return!(!i||!s)&&(this._columnSelectMode?i[0]<=s[0]?e>=i[0]&&t>=i[1]&&e<s[0]&&t<=s[1]:e<i[0]&&t>=i[1]&&e>=s[0]&&t<=s[1]:t>i[1]&&t<s[1]||i[1]===s[1]&&t===i[1]&&e>=i[0]&&e<s[0]||i[1]<s[1]&&t===s[1]&&e<s[0]||i[1]<s[1]&&t===i[1]&&e>=i[0])}};function v(e,t,i){for(;e.length<i;)e=t+e;return e}t.DomRendererRowFactory=f=s([r(1,l.ICharacterJoinerService),r(2,h.IOptionsService),r(3,l.ICoreBrowserService),r(4,h.ICoreService),r(5,h.IDecorationService),r(6,l.IThemeService)],f)},2550:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.WidthCache=void 0,t.WidthCache=class{constructor(e,t){this._flat=new Float32Array(256),this._font=\"\",this._fontSize=0,this._weight=\"normal\",this._weightBold=\"bold\",this._measureElements=[],this._container=e.createElement(\"div\"),this._container.classList.add(\"xterm-width-cache-measure-container\"),this._container.setAttribute(\"aria-hidden\",\"true\"),this._container.style.whiteSpace=\"pre\",this._container.style.fontKerning=\"none\";const i=e.createElement(\"span\");i.classList.add(\"xterm-char-measure-element\");const s=e.createElement(\"span\");s.classList.add(\"xterm-char-measure-element\"),s.style.fontWeight=\"bold\";const r=e.createElement(\"span\");r.classList.add(\"xterm-char-measure-element\"),r.style.fontStyle=\"italic\";const n=e.createElement(\"span\");n.classList.add(\"xterm-char-measure-element\"),n.style.fontWeight=\"bold\",n.style.fontStyle=\"italic\",this._measureElements=[i,s,r,n],this._container.appendChild(i),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(n),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,s){e===this._font&&t===this._fontSize&&i===this._weight&&s===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(e,t,i){let s=0;if(!t&&!i&&1===e.length&&(s=e.charCodeAt(0))<256){if(-9999!==this._flat[s])return this._flat[s];const t=this._measure(e,0);return t>0&&(this._flat[s]=t),t}let r=e;t&&(r+=\"B\"),i&&(r+=\"I\");let n=this._holey.get(r);if(void 0===n){let s=0;t&&(s|=1),i&&(s|=2),n=this._measure(e,s),n>0&&this._holey.set(r,n)}return n}_measure(e,t){const i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}}},2223:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const s=i(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=s.isFirefox||s.isLegacyEdge?\"bottom\":\"ideographic\"},6171:(e,t)=>{function i(e){return 57508<=e&&e<=57558}function s(e){return e>=128512&&e<=128591||e>=127744&&e<=128511||e>=128640&&e<=128767||e>=9728&&e<=9983||e>=9984&&e<=10175||e>=65024&&e<=65039||e>=129280&&e<=129535||e>=127462&&e<=127487}Object.defineProperty(t,\"__esModule\",{value:!0}),t.computeNextVariantOffset=t.createRenderDimensions=t.treatGlyphAsBackgroundColor=t.allowRescaling=t.isEmoji=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error(\"value must not be falsy\");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.isEmoji=s,t.allowRescaling=function(e,t,r,n){return 1===t&&r>Math.ceil(1.5*n)&&void 0!==e&&e>255&&!s(e)&&!i(e)&&!function(e){return 57344<=e&&e<=63743}(e)},t.treatGlyphAsBackgroundColor=function(e){return i(e)||function(e){return 9472<=e&&e<=9631}(e)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},t.computeNextVariantOffset=function(e,t,i=0){return(e-(2*Math.round(t)-i))%(2*Math.round(t))}},6052:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.createSelectionRenderModel=void 0;class i{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,s=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1])return void this.clear();const r=e.buffers.active.ydisp,n=t[1]-r,o=i[1]-r,a=Math.max(n,0),h=Math.min(o,e.rows-1);a>=e.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=n,this.viewportEndRow=o,this.viewportCappedStartRow=a,this.viewportCappedEndRow=h,this.startCol=t[0],this.endCol=i[0])}isCellSelected(e,t,i){return!!this.hasSelection&&(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol)}}t.createSelectionRenderModel=function(){return new i}},456:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CharSizeService=void 0;const n=i(2585),o=i(8460),a=i(844);let h=t.CharSizeService=class extends a.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new d(this._optionsService))}catch{this._measureStrategy=this.register(new l(e,t,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange([\"fontFamily\",\"fontSize\"],(()=>this.measure())))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};t.CharSizeService=h=s([r(2,n.IOptionsService)],h);class c extends a.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){void 0!==e&&e>0&&void 0!==t&&t>0&&(this._result.width=e,this._result.height=t)}}class l extends c{constructor(e,t,i){super(),this._document=e,this._parentElement=t,this._optionsService=i,this._measureElement=this._document.createElement(\"span\"),this._measureElement.classList.add(\"xterm-char-measure-element\"),this._measureElement.textContent=\"W\".repeat(32),this._measureElement.setAttribute(\"aria-hidden\",\"true\"),this._measureElement.style.whiteSpace=\"pre\",this._measureElement.style.fontKerning=\"none\",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class d extends c{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext(\"2d\");const t=this._ctx.measureText(\"W\");if(!(\"width\"in t&&\"fontBoundingBoxAscent\"in t&&\"fontBoundingBoxDescent\"in t))throw new Error(\"Required font metrics not supported\")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const e=this._ctx.measureText(\"W\");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}}},4269:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const n=i(3734),o=i(643),a=i(511),h=i(2585);class c extends n.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData=\"\",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error(\"not implemented\")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=c;let l=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const i=[],s=t.translateToString(!0);let r=0,n=0,a=0,h=t.getFg(0),c=t.getBg(0);for(let e=0;e<t.getTrimmedLength();e++)if(t.loadCell(e,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==h||this._workCell.bg!==c){if(e-r>1){const e=this._getJoinedRanges(s,a,n,t,r);for(let t=0;t<e.length;t++)i.push(e[t])}r=e,a=n,h=this._workCell.fg,c=this._workCell.bg}n+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-r>1){const e=this._getJoinedRanges(s,a,n,t,r);for(let t=0;t<e.length;t++)i.push(e[t])}return i}_getJoinedRanges(t,i,s,r,n){const o=t.substring(i,s);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(e){console.error(e)}for(let t=1;t<this._characterJoiners.length;t++)try{const i=this._characterJoiners[t].handler(o);for(let t=0;t<i.length;t++)e._mergeRanges(a,i[t])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,r,n),a}_stringRangesToCellRanges(e,t,i){let s=0,r=!1,n=0,a=e[s];if(a){for(let h=i;h<this._bufferService.cols;h++){const i=t.getWidth(h),c=t.getString(h).length||o.WHITESPACE_CELL_CHAR.length;if(0!==i){if(!r&&a[0]<=n&&(a[0]=h,r=!0),a[1]<=n){if(a[1]=h,a=e[++s],!a)break;a[0]<=n?(a[0]=h,r=!0):r=!1}n+=c}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let s=0;s<e.length;s++){const r=e[s];if(i){if(t[1]<=r[0])return e[s-1][1]=t[1],e;if(t[1]<=r[1])return e[s-1][1]=Math.max(t[1],r[1]),e.splice(s,1),e;e.splice(s,1),s--}else{if(t[1]<=r[0])return e.splice(s,0,t),e;if(t[1]<=r[1])return r[0]=Math.min(t[0],r[0]),e;t[0]<r[1]&&(r[0]=Math.min(t[0],r[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=l=s([r(0,h.IBufferService)],l)},5114:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CoreBrowserService=void 0;const s=i(844),r=i(8460),n=i(3656);class o extends s.Disposable{constructor(e,t,i){super(),this._textarea=e,this._window=t,this.mainDocument=i,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new a(this._window),this._onDprChange=this.register(new r.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new r.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((e=>this._screenDprMonitor.setWindow(e)))),this.register((0,r.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener(\"focus\",(()=>this._isFocused=!0)),this._textarea.addEventListener(\"blur\",(()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}t.CoreBrowserService=o;class a extends s.Disposable{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this.register(new s.MutableDisposable),this._onDprChange=this.register(new r.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,s.toDisposable)((()=>this.clearListener())))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,n.addDisposableDomListener)(this._parentWindow,\"resize\",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.LinkProviderService=void 0;const s=i(844);class r extends s.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,s.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{const t=this.linkProviders.indexOf(e);-1!==t&&this.linkProviders.splice(t,1)}}}}t.LinkProviderService=r},8934:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.MouseService=void 0;const n=i(4725),o=i(9806);let a=t.MouseService=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,s,r){return(0,o.getCoords)(window,e,t,i,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(e,t){const i=(0,o.getCoordsRelativeToElement)(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};t.MouseService=a=s([r(0,n.IRenderService),r(1,n.ICharSizeService)],a)},3230:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.RenderService=void 0;const n=i(6193),o=i(4725),a=i(8460),h=i(844),c=i(7226),l=i(2585);let d=t.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,i,s,r,o,l,d){super(),this._rowCount=e,this._charSizeService=s,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new c.DebouncedIdleTask,this._observerDisposable=this.register(new h.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new a.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new a.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new a.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new a.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new n.RenderDebouncer(((e,t)=>this._renderRows(e,t)),l),this.register(this._renderDebouncer),this.register(l.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(o.onResize((()=>this._fullRefresh()))),this.register(o.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(i.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(r.onDecorationRegistered((()=>this._fullRefresh()))),this.register(r.onDecorationRemoved((()=>this._fullRefresh()))),this.register(i.onMultipleOptionChange([\"customGlyphs\",\"drawBoldTextInBrightColors\",\"letterSpacing\",\"lineHeight\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"fontWeightBold\",\"minimumContrastRatio\",\"rescaleOverlappingGlyphs\"],(()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()}))),this.register(i.onMultipleOptionChange([\"cursorBlink\",\"cursorStyle\"],(()=>this.refreshRows(o.buffer.y,o.buffer.y,!0)))),this.register(d.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(l.window,t),this.register(l.onWindowChange((e=>this._registerIntersectionObserver(e,t))))}_registerIntersectionObserver(e,t){if(\"IntersectionObserver\"in e){const i=new e.IntersectionObserver((e=>this._handleIntersectionChange(e[e.length-1])),{threshold:0});i.observe(t),this._observerDisposable.value=(0,h.toDisposable)((()=>i.disconnect()))}}_handleIntersectionChange(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){this._isPaused?this._needsFullRefresh=!0:(i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw((e=>this.refreshRows(e.start,e.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(e,t))):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,t,i){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,this._renderer.value?.handleSelectionChanged(e,t,i)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};t.RenderService=d=s([r(2,l.IOptionsService),r(3,o.ICharSizeService),r(4,l.IDecorationService),r(5,l.IBufferService),r(6,o.ICoreBrowserService),r(7,o.IThemeService)],d)},9312:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.SelectionService=void 0;const n=i(9806),o=i(9504),a=i(456),h=i(4725),c=i(8460),l=i(844),d=i(6114),_=i(4841),u=i(511),f=i(2585),v=String.fromCharCode(160),p=new RegExp(v,\"g\");let g=t.SelectionService=class extends l.Disposable{constructor(e,t,i,s,r,n,o,h,d){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=s,this._coreService=r,this._mouseService=n,this._optionsService=o,this._renderService=h,this._coreBrowserService=d,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=e=>this._handleMouseMove(e),this._mouseUpListener=e=>this._handleMouseUp(e),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((e=>this._handleTrim(e))),this.register(this._bufferService.buffers.onBufferActivate((e=>this._handleBufferActivate(e)))),this.enable(),this._model=new a.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])}get selectionText(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return\"\";const i=this._bufferService.buffer,s=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return\"\";const r=e[0]<t[0]?e[0]:t[0],n=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){const e=i.translateBufferLineToString(o,!0,r,n);s.push(e)}}else{const r=e[1]===t[1]?t[0]:void 0;s.push(i.translateBufferLineToString(e[1],!0,e[0],r));for(let r=e[1]+1;r<=t[1]-1;r++){const e=i.lines.get(r),t=i.translateBufferLineToString(r,!0);e?.isWrapped?s[s.length-1]+=t:s.push(t)}if(e[1]!==t[1]){const e=i.lines.get(t[1]),r=i.translateBufferLineToString(t[1],!0,0,t[0]);e&&e.isWrapped?s[s.length-1]+=r:s.push(r)}}return s.map((e=>e.replace(p,\" \"))).join(d.isWindows?\"\\r\\n\":\"\\n\")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),d.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(e){const t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!!(i&&s&&t)&&this._areCoordsInSelection(t,i,s)}isCellInSelection(e,t){const i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!(!i||!s)&&this._areCoordsInSelection([e,t],i,s)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){const i=this._linkifier.currentLink?.link?.range;if(i)return this._model.selectionStart=[i.start.x-1,i.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(i,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const s=this._getMouseBufferCoords(e);return!!s&&(this._selectWordAt(s,t),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){const t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=(0,n.getCoordsRelativeToElement)(this._coreBrowserService.window,e,this._screenElement)[1];const i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-50),50),t/=50,t/Math.abs(t)+Math.round(14*t))}shouldForceSelection(e){return d.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):1===e.detail?this._handleSingleClick(e):2===e.detail?this._handleDoubleClick(e):3===e.detail&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener(\"mousemove\",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener(\"mouseup\",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener(\"mousemove\",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener(\"mouseup\",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){const t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;const t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){const e=i.lines.get(this._model.selectionEnd[1]);e&&0===e.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){const t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const t=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(t&&void 0!==t[0]&&void 0!==t[1]){const e=(0,o.moveToCellSequence)(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(e,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);i?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,i)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim((e=>this._handleTrim(e)))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let s=0;t>=s;s++){const r=e.loadCell(s,this._workCell).getChars().length;0===this._workCell.getWidth()?i--:r>1&&t!==s&&(i+=r-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,s=!0){if(e[0]>=this._bufferService.cols)return;const r=this._bufferService.buffer,n=r.lines.get(e[1]);if(!n)return;const o=r.translateBufferLineToString(e[1],!1);let a=this._convertViewportColToCharacterIndex(n,e[0]),h=a;const c=e[0]-a;let l=0,d=0,_=0,u=0;if(\" \"===o.charAt(a)){for(;a>0&&\" \"===o.charAt(a-1);)a--;for(;h<o.length&&\" \"===o.charAt(h+1);)h++}else{let t=e[0],i=e[0];0===n.getWidth(t)&&(l++,t--),2===n.getWidth(i)&&(d++,i++);const s=n.getString(i).length;for(s>1&&(u+=s-1,h+=s-1);t>0&&a>0&&!this._isCharWordSeparator(n.loadCell(t-1,this._workCell));){n.loadCell(t-1,this._workCell);const e=this._workCell.getChars().length;0===this._workCell.getWidth()?(l++,t--):e>1&&(_+=e-1,a-=e-1),a--,t--}for(;i<n.length&&h+1<o.length&&!this._isCharWordSeparator(n.loadCell(i+1,this._workCell));){n.loadCell(i+1,this._workCell);const e=this._workCell.getChars().length;2===this._workCell.getWidth()?(d++,i++):e>1&&(u+=e-1,h+=e-1),h++,i++}}h++;let f=a+c-l+_,v=Math.min(this._bufferService.cols,h-a+l+d-_-u);if(t||\"\"!==o.slice(a,h).trim()){if(i&&0===f&&32!==n.getCodePoint(0)){const t=r.lines.get(e[1]-1);if(t&&n.isWrapped&&32!==t.getCodePoint(this._bufferService.cols-1)){const t=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(t){const e=this._bufferService.cols-t.start;f-=e,v+=e}}}if(s&&f+v===this._bufferService.cols&&32!==n.getCodePoint(this._bufferService.cols-1)){const t=r.lines.get(e[1]+1);if(t?.isWrapped&&32!==t.getCodePoint(0)){const t=this._getWordAt([0,e[1]+1],!1,!1,!0);t&&(v+=t.length)}}return{start:f,length:v}}}_selectWordAt(e,t){const i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){const t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){const t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(i,this._bufferService.cols)}};t.SelectionService=g=s([r(3,f.IBufferService),r(4,f.ICoreService),r(5,h.IMouseService),r(6,f.IOptionsService),r(7,h.IRenderService),r(8,h.ICoreBrowserService)],g)},4725:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ILinkProviderService=t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;const s=i(8343);t.ICharSizeService=(0,s.createDecorator)(\"CharSizeService\"),t.ICoreBrowserService=(0,s.createDecorator)(\"CoreBrowserService\"),t.IMouseService=(0,s.createDecorator)(\"MouseService\"),t.IRenderService=(0,s.createDecorator)(\"RenderService\"),t.ISelectionService=(0,s.createDecorator)(\"SelectionService\"),t.ICharacterJoinerService=(0,s.createDecorator)(\"CharacterJoinerService\"),t.IThemeService=(0,s.createDecorator)(\"ThemeService\"),t.ILinkProviderService=(0,s.createDecorator)(\"LinkProviderService\")},6731:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;const n=i(7239),o=i(8055),a=i(8460),h=i(844),c=i(2585),l=o.css.toColor(\"#ffffff\"),d=o.css.toColor(\"#000000\"),_=o.css.toColor(\"#ffffff\"),u=o.css.toColor(\"#000000\"),f={css:\"rgba(255, 255, 255, 0.3)\",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const e=[o.css.toColor(\"#2e3436\"),o.css.toColor(\"#cc0000\"),o.css.toColor(\"#4e9a06\"),o.css.toColor(\"#c4a000\"),o.css.toColor(\"#3465a4\"),o.css.toColor(\"#75507b\"),o.css.toColor(\"#06989a\"),o.css.toColor(\"#d3d7cf\"),o.css.toColor(\"#555753\"),o.css.toColor(\"#ef2929\"),o.css.toColor(\"#8ae234\"),o.css.toColor(\"#fce94f\"),o.css.toColor(\"#729fcf\"),o.css.toColor(\"#ad7fa8\"),o.css.toColor(\"#34e2e2\"),o.css.toColor(\"#eeeeec\")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){const s=t[i/36%6|0],r=t[i/6%6|0],n=t[i%6];e.push({css:o.channels.toCss(s,r,n),rgba:o.channels.toRgba(s,r,n)})}for(let t=0;t<24;t++){const i=8+10*t;e.push({css:o.channels.toCss(i,i,i),rgba:o.channels.toRgba(i,i,i)})}return e})());let v=t.ThemeService=class extends h.Disposable{get colors(){return this._colors}constructor(e){super(),this._optionsService=e,this._contrastCache=new n.ColorContrastCache,this._halfContrastCache=new n.ColorContrastCache,this._onChangeColors=this.register(new a.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:d,cursor:_,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:o.color.blend(d,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:o.color.blend(d,f),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange(\"minimumContrastRatio\",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange(\"theme\",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(e={}){const i=this._colors;if(i.foreground=p(e.foreground,l),i.background=p(e.background,d),i.cursor=p(e.cursor,_),i.cursorAccent=p(e.cursorAccent,u),i.selectionBackgroundTransparent=p(e.selectionBackground,f),i.selectionBackgroundOpaque=o.color.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=p(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=o.color.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?p(e.selectionForeground,o.NULL_COLOR):void 0,i.selectionForeground===o.NULL_COLOR&&(i.selectionForeground=void 0),o.color.isOpaque(i.selectionBackgroundTransparent)){const e=.3;i.selectionBackgroundTransparent=o.color.opacity(i.selectionBackgroundTransparent,e)}if(o.color.isOpaque(i.selectionInactiveBackgroundTransparent)){const e=.3;i.selectionInactiveBackgroundTransparent=o.color.opacity(i.selectionInactiveBackgroundTransparent,e)}if(i.ansi=t.DEFAULT_ANSI_COLORS.slice(),i.ansi[0]=p(e.black,t.DEFAULT_ANSI_COLORS[0]),i.ansi[1]=p(e.red,t.DEFAULT_ANSI_COLORS[1]),i.ansi[2]=p(e.green,t.DEFAULT_ANSI_COLORS[2]),i.ansi[3]=p(e.yellow,t.DEFAULT_ANSI_COLORS[3]),i.ansi[4]=p(e.blue,t.DEFAULT_ANSI_COLORS[4]),i.ansi[5]=p(e.magenta,t.DEFAULT_ANSI_COLORS[5]),i.ansi[6]=p(e.cyan,t.DEFAULT_ANSI_COLORS[6]),i.ansi[7]=p(e.white,t.DEFAULT_ANSI_COLORS[7]),i.ansi[8]=p(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),i.ansi[9]=p(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),i.ansi[10]=p(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),i.ansi[11]=p(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),i.ansi[12]=p(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),i.ansi[13]=p(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),i.ansi[14]=p(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),i.ansi[15]=p(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),e.extendedAnsi){const s=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let r=0;r<s;r++)i.ansi[r+16]=p(e.extendedAnsi[r],t.DEFAULT_ANSI_COLORS[r+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(void 0!==e)switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}else for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e]}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function p(e,t){if(void 0!==e)try{return o.css.toColor(e)}catch{}return t}t.ThemeService=v=s([r(0,c.IOptionsService)],v)},6349:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CircularList=void 0;const s=i(8460),r=i(844);class n extends r.Disposable{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this.register(new s.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new s.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new s.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;const t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error(\"Can only recycle when the buffer is full\");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let i=e;i<this._length-t;i++)this._array[this._getCyclicIndex(i)]=this._array[this._getCyclicIndex(i+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let t=this._length-1;t>=e;t--)this._array[this._getCyclicIndex(t+i.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<i.length;t++)this._array[this._getCyclicIndex(e+t)]=i[t];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){const e=this._length+i.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error(\"start argument out of range\");if(e+i<0)throw new Error(\"Cannot shift elements in list beyond index 0\");if(i>0){for(let s=t-1;s>=0;s--)this.set(e+s+i,this.get(e+s));const s=e+t+i-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<t;s++)this.set(e+s+i,this.get(e+s))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}}t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.clone=void 0,t.clone=function e(t,i=5){if(\"object\"!=typeof t)return t;const s=Array.isArray(t)?[]:{};for(const r in t)s[r]=i<=1?t[r]:t[r]&&e(t[r],i-1);return s}},8055:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;let i=0,s=0,r=0,n=0;var o,a,h,c,l;function d(e){const t=e.toString(16);return t.length<2?\"0\"+t:t}function _(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:\"#00000000\",rgba:0},function(e){e.toCss=function(e,t,i,s){return void 0!==s?`#${d(e)}${d(t)}${d(i)}${d(s)}`:`#${d(e)}${d(t)}${d(i)}`},e.toRgba=function(e,t,i,s=255){return(e<<24|t<<16|i<<8|s)>>>0},e.toColor=function(t,i,s,r){return{css:e.toCss(t,i,s,r),rgba:e.toRgba(t,i,s,r)}}}(o||(t.channels=o={})),function(e){function t(e,t){return n=Math.round(255*t),[i,s,r]=l.toChannels(e.rgba),{css:o.toCss(i,s,r,n),rgba:o.toRgba(i,s,r,n)}}e.blend=function(e,t){if(n=(255&t.rgba)/255,1===n)return{css:t.css,rgba:t.rgba};const a=t.rgba>>24&255,h=t.rgba>>16&255,c=t.rgba>>8&255,l=e.rgba>>24&255,d=e.rgba>>16&255,_=e.rgba>>8&255;return i=l+Math.round((a-l)*n),s=d+Math.round((h-d)*n),r=_+Math.round((c-_)*n),{css:o.toCss(i,s,r),rgba:o.toRgba(i,s,r)}},e.isOpaque=function(e){return 255==(255&e.rgba)},e.ensureContrastRatio=function(e,t,i){const s=l.ensureContrastRatio(e.rgba,t.rgba,i);if(s)return o.toColor(s>>24&255,s>>16&255,s>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[i,s,r]=l.toChannels(t),{css:o.toCss(i,s,r),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return n=255&e.rgba,t(e,n*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(a||(t.color=a={})),function(e){let t,a;try{const e=document.createElement(\"canvas\");e.width=1,e.height=1;const i=e.getContext(\"2d\",{willReadFrequently:!0});i&&(t=i,t.globalCompositeOperation=\"copy\",a=t.createLinearGradient(0,0,1,1))}catch{}e.toColor=function(e){if(e.match(/#[\\da-f]{3,8}/i))switch(e.length){case 4:return i=parseInt(e.slice(1,2).repeat(2),16),s=parseInt(e.slice(2,3).repeat(2),16),r=parseInt(e.slice(3,4).repeat(2),16),o.toColor(i,s,r);case 5:return i=parseInt(e.slice(1,2).repeat(2),16),s=parseInt(e.slice(2,3).repeat(2),16),r=parseInt(e.slice(3,4).repeat(2),16),n=parseInt(e.slice(4,5).repeat(2),16),o.toColor(i,s,r,n);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const h=e.match(/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(,\\s*(0|1|\\d?\\.(\\d+))\\s*)?\\)/);if(h)return i=parseInt(h[1]),s=parseInt(h[2]),r=parseInt(h[3]),n=Math.round(255*(void 0===h[5]?1:parseFloat(h[5]))),o.toColor(i,s,r,n);if(!t||!a)throw new Error(\"css.toColor: Unsupported css format\");if(t.fillStyle=a,t.fillStyle=e,\"string\"!=typeof t.fillStyle)throw new Error(\"css.toColor: Unsupported css format\");if(t.fillRect(0,0,1,1),[i,s,r,n]=t.getImageData(0,0,1,1).data,255!==n)throw new Error(\"css.toColor: Unsupported css format\");return{rgba:o.toRgba(i,s,r,n),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,i){const s=e/255,r=t/255,n=i/255;return.2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(c||(t.rgb=c={})),function(e){function t(e,t,i){const s=e>>24&255,r=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,h=t>>8&255,l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));for(;l<i&&(o>0||a>0||h>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),h-=Math.max(0,Math.ceil(.1*h)),l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));return(o<<24|a<<16|h<<8|255)>>>0}function a(e,t,i){const s=e>>24&255,r=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,h=t>>8&255,l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));for(;l<i&&(o<255||a<255||h<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),h=Math.min(255,h+Math.ceil(.1*(255-h))),l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));return(o<<24|a<<16|h<<8|255)>>>0}e.blend=function(e,t){if(n=(255&t)/255,1===n)return t;const a=t>>24&255,h=t>>16&255,c=t>>8&255,l=e>>24&255,d=e>>16&255,_=e>>8&255;return i=l+Math.round((a-l)*n),s=d+Math.round((h-d)*n),r=_+Math.round((c-_)*n),o.toRgba(i,s,r)},e.ensureContrastRatio=function(e,i,s){const r=c.relativeLuminance(e>>8),n=c.relativeLuminance(i>>8);if(_(r,n)<s){if(n<r){const n=t(e,i,s),o=_(r,c.relativeLuminance(n>>8));if(o<s){const t=a(e,i,s);return o>_(r,c.relativeLuminance(t>>8))?n:t}return n}const o=a(e,i,s),h=_(r,c.relativeLuminance(o>>8));if(h<s){const n=t(e,i,s);return h>_(r,c.relativeLuminance(n>>8))?o:n}return o}},e.reduceLuminance=t,e.increaseLuminance=a,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}}(l||(t.rgba=l={})),t.toPaddedHex=d,t.contrastRatio=_},8969:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CoreTerminal=void 0;const s=i(844),r=i(2585),n=i(4348),o=i(7866),a=i(744),h=i(7302),c=i(6975),l=i(8460),d=i(1753),_=i(1480),u=i(7994),f=i(9282),v=i(5435),p=i(5981),g=i(2660);let m=!1;class S extends s.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event((e=>{this._onScrollApi?.fire(e.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(const t in e)this.optionsService.options[t]=e[t]}constructor(e){super(),this._windowsWrappingHeuristics=this.register(new s.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new h.OptionsService(e)),this._instantiationService.setService(r.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(a.BufferService)),this._instantiationService.setService(r.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(r.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(r.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(r.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(r.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(r.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(g.OscLinkService),this._instantiationService.setService(r.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new v.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange([\"windowsMode\",\"windowsPty\"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new p.WriteBuffer(((e,t)=>this._inputHandler.parse(e,t)))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=r.LogLevelEnum.WARN&&!m&&(this._logService.warn(\"writeSync is unreliable and will be removed soon.\"),m=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,a.MINIMUM_COLS),t=Math.max(t,a.MINIMUM_ROWS),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t,i){this._bufferService.scrollLines(e,t,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){const t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1;const t=this.optionsService.rawOptions.windowsPty;t&&void 0!==t.buildNumber&&void 0!==t.buildNumber?e=!!(\"conpty\"===t.backend&&t.buildNumber<21376):this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const e=[];e.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:\"H\"},(()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,s.toDisposable)((()=>{for(const t of e)t.dispose()}))}}}t.CoreTerminal=S},8460:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.runAndSubscribe=t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let e=0;e<this._listeners.length;e++)i.push(this._listeners[e]);for(let s=0;s<i.length;s++)i[s].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e((e=>t.fire(e)))},t.runAndSubscribe=function(e,t){return t(void 0),e((e=>t(e)))}},5435:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;const n=i(2584),o=i(7116),a=i(2015),h=i(844),c=i(482),l=i(8437),d=i(8460),_=i(643),u=i(511),f=i(3734),v=i(2585),p=i(1480),g=i(6242),m=i(6351),S=i(5941),C={\"(\":0,\")\":1,\"*\":2,\"+\":3,\"-\":1,\".\":2},b=131072;function w(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var y;!function(e){e[e.GET_WIN_SIZE_PIXELS=0]=\"GET_WIN_SIZE_PIXELS\",e[e.GET_CELL_SIZE_PIXELS=1]=\"GET_CELL_SIZE_PIXELS\"}(y||(t.WindowsOptionsReportType=y={}));let E=0;class k extends h.Disposable{getAttrData(){return this._curAttrData}constructor(e,t,i,s,r,h,_,f,v=new a.EscapeSequenceParser){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=s,this._optionsService=r,this._oscLinkService=h,this._coreMouseService=_,this._unicodeService=f,this._parser=v,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle=\"\",this._iconName=\"\",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new L(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((e=>this._activeBuffer=e.activeBuffer))),this._parser.setCsiHandlerFallback(((e,t)=>{this._logService.debug(\"Unknown CSI code: \",{identifier:this._parser.identToString(e),params:t.toArray()})})),this._parser.setEscHandlerFallback((e=>{this._logService.debug(\"Unknown ESC code: \",{identifier:this._parser.identToString(e)})})),this._parser.setExecuteHandlerFallback((e=>{this._logService.debug(\"Unknown EXECUTE code: \",{code:e})})),this._parser.setOscHandlerFallback(((e,t,i)=>{this._logService.debug(\"Unknown OSC code: \",{identifier:e,action:t,data:i})})),this._parser.setDcsHandlerFallback(((e,t,i)=>{\"HOOK\"===t&&(i=i.toArray()),this._logService.debug(\"Unknown DCS code: \",{identifier:this._parser.identToString(e),action:t,payload:i})})),this._parser.setPrintHandler(((e,t,i)=>this.print(e,t,i))),this._parser.registerCsiHandler({final:\"@\"},(e=>this.insertChars(e))),this._parser.registerCsiHandler({intermediates:\" \",final:\"@\"},(e=>this.scrollLeft(e))),this._parser.registerCsiHandler({final:\"A\"},(e=>this.cursorUp(e))),this._parser.registerCsiHandler({intermediates:\" \",final:\"A\"},(e=>this.scrollRight(e))),this._parser.registerCsiHandler({final:\"B\"},(e=>this.cursorDown(e))),this._parser.registerCsiHandler({final:\"C\"},(e=>this.cursorForward(e))),this._parser.registerCsiHandler({final:\"D\"},(e=>this.cursorBackward(e))),this._parser.registerCsiHandler({final:\"E\"},(e=>this.cursorNextLine(e))),this._parser.registerCsiHandler({final:\"F\"},(e=>this.cursorPrecedingLine(e))),this._parser.registerCsiHandler({final:\"G\"},(e=>this.cursorCharAbsolute(e))),this._parser.registerCsiHandler({final:\"H\"},(e=>this.cursorPosition(e))),this._parser.registerCsiHandler({final:\"I\"},(e=>this.cursorForwardTab(e))),this._parser.registerCsiHandler({final:\"J\"},(e=>this.eraseInDisplay(e,!1))),this._parser.registerCsiHandler({prefix:\"?\",final:\"J\"},(e=>this.eraseInDisplay(e,!0))),this._parser.registerCsiHandler({final:\"K\"},(e=>this.eraseInLine(e,!1))),this._parser.registerCsiHandler({prefix:\"?\",final:\"K\"},(e=>this.eraseInLine(e,!0))),this._parser.registerCsiHandler({final:\"L\"},(e=>this.insertLines(e))),this._parser.registerCsiHandler({final:\"M\"},(e=>this.deleteLines(e))),this._parser.registerCsiHandler({final:\"P\"},(e=>this.deleteChars(e))),this._parser.registerCsiHandler({final:\"S\"},(e=>this.scrollUp(e))),this._parser.registerCsiHandler({final:\"T\"},(e=>this.scrollDown(e))),this._parser.registerCsiHandler({final:\"X\"},(e=>this.eraseChars(e))),this._parser.registerCsiHandler({final:\"Z\"},(e=>this.cursorBackwardTab(e))),this._parser.registerCsiHandler({final:\"`\"},(e=>this.charPosAbsolute(e))),this._parser.registerCsiHandler({final:\"a\"},(e=>this.hPositionRelative(e))),this._parser.registerCsiHandler({final:\"b\"},(e=>this.repeatPrecedingCharacter(e))),this._parser.registerCsiHandler({final:\"c\"},(e=>this.sendDeviceAttributesPrimary(e))),this._parser.registerCsiHandler({prefix:\">\",final:\"c\"},(e=>this.sendDeviceAttributesSecondary(e))),this._parser.registerCsiHandler({final:\"d\"},(e=>this.linePosAbsolute(e))),this._parser.registerCsiHandler({final:\"e\"},(e=>this.vPositionRelative(e))),this._parser.registerCsiHandler({final:\"f\"},(e=>this.hVPosition(e))),this._parser.registerCsiHandler({final:\"g\"},(e=>this.tabClear(e))),this._parser.registerCsiHandler({final:\"h\"},(e=>this.setMode(e))),this._parser.registerCsiHandler({prefix:\"?\",final:\"h\"},(e=>this.setModePrivate(e))),this._parser.registerCsiHandler({final:\"l\"},(e=>this.resetMode(e))),this._parser.registerCsiHandler({prefix:\"?\",final:\"l\"},(e=>this.resetModePrivate(e))),this._parser.registerCsiHandler({final:\"m\"},(e=>this.charAttributes(e))),this._parser.registerCsiHandler({final:\"n\"},(e=>this.deviceStatus(e))),this._parser.registerCsiHandler({prefix:\"?\",final:\"n\"},(e=>this.deviceStatusPrivate(e))),this._parser.registerCsiHandler({intermediates:\"!\",final:\"p\"},(e=>this.softReset(e))),this._parser.registerCsiHandler({intermediates:\" \",final:\"q\"},(e=>this.setCursorStyle(e))),this._parser.registerCsiHandler({final:\"r\"},(e=>this.setScrollRegion(e))),this._parser.registerCsiHandler({final:\"s\"},(e=>this.saveCursor(e))),this._parser.registerCsiHandler({final:\"t\"},(e=>this.windowOptions(e))),this._parser.registerCsiHandler({final:\"u\"},(e=>this.restoreCursor(e))),this._parser.registerCsiHandler({intermediates:\"'\",final:\"}\"},(e=>this.insertColumns(e))),this._parser.registerCsiHandler({intermediates:\"'\",final:\"~\"},(e=>this.deleteColumns(e))),this._parser.registerCsiHandler({intermediates:'\"',final:\"q\"},(e=>this.selectProtected(e))),this._parser.registerCsiHandler({intermediates:\"$\",final:\"p\"},(e=>this.requestMode(e,!0))),this._parser.registerCsiHandler({prefix:\"?\",intermediates:\"$\",final:\"p\"},(e=>this.requestMode(e,!1))),this._parser.setExecuteHandler(n.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(n.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(n.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(n.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(n.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(n.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(n.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(n.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(n.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new g.OscHandler((e=>(this.setTitle(e),this.setIconName(e),!0)))),this._parser.registerOscHandler(1,new g.OscHandler((e=>this.setIconName(e)))),this._parser.registerOscHandler(2,new g.OscHandler((e=>this.setTitle(e)))),this._parser.registerOscHandler(4,new g.OscHandler((e=>this.setOrReportIndexedColor(e)))),this._parser.registerOscHandler(8,new g.OscHandler((e=>this.setHyperlink(e)))),this._parser.registerOscHandler(10,new g.OscHandler((e=>this.setOrReportFgColor(e)))),this._parser.registerOscHandler(11,new g.OscHandler((e=>this.setOrReportBgColor(e)))),this._parser.registerOscHandler(12,new g.OscHandler((e=>this.setOrReportCursorColor(e)))),this._parser.registerOscHandler(104,new g.OscHandler((e=>this.restoreIndexedColor(e)))),this._parser.registerOscHandler(110,new g.OscHandler((e=>this.restoreFgColor(e)))),this._parser.registerOscHandler(111,new g.OscHandler((e=>this.restoreBgColor(e)))),this._parser.registerOscHandler(112,new g.OscHandler((e=>this.restoreCursorColor(e)))),this._parser.registerEscHandler({final:\"7\"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:\"8\"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:\"D\"},(()=>this.index())),this._parser.registerEscHandler({final:\"E\"},(()=>this.nextLine())),this._parser.registerEscHandler({final:\"H\"},(()=>this.tabSet())),this._parser.registerEscHandler({final:\"M\"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:\"=\"},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:\">\"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:\"c\"},(()=>this.fullReset())),this._parser.registerEscHandler({final:\"n\"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:\"o\"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:\"|\"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:\"}\"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:\"~\"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:\"%\",final:\"@\"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:\"%\",final:\"G\"},(()=>this.selectDefaultCharset()));for(const e in o.CHARSETS)this._parser.registerEscHandler({intermediates:\"(\",final:e},(()=>this.selectCharset(\"(\"+e))),this._parser.registerEscHandler({intermediates:\")\",final:e},(()=>this.selectCharset(\")\"+e))),this._parser.registerEscHandler({intermediates:\"*\",final:e},(()=>this.selectCharset(\"*\"+e))),this._parser.registerEscHandler({intermediates:\"+\",final:e},(()=>this.selectCharset(\"+\"+e))),this._parser.registerEscHandler({intermediates:\"-\",final:e},(()=>this.selectCharset(\"-\"+e))),this._parser.registerEscHandler({intermediates:\".\",final:e},(()=>this.selectCharset(\".\"+e))),this._parser.registerEscHandler({intermediates:\"/\",final:e},(()=>this.selectCharset(\"/\"+e)));this._parser.registerEscHandler({intermediates:\"#\",final:\"8\"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((e=>(this._logService.error(\"Parsing error: \",e),e))),this._parser.registerDcsHandler({intermediates:\"$\",final:\"q\"},new m.DcsHandler(((e,t)=>this.requestStatusString(e,t))))}_preserveStack(e,t,i,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=s}_logSlowResolvingAsync(e){this._logService.logLevel<=v.LogLevelEnum.WARN&&Promise.race([e,new Promise(((e,t)=>setTimeout((()=>t(\"#SLOW_TIMEOUT\")),5e3)))]).catch((e=>{if(\"#SLOW_TIMEOUT\"!==e)throw e;console.warn(\"async parser handler taking longer than 5000 ms\")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,s=this._activeBuffer.x,r=this._activeBuffer.y,n=0;const o=this._parseStack.paused;if(o){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>b&&(n=this._parseStack.position+b)}if(this._logService.logLevel<=v.LogLevelEnum.DEBUG&&this._logService.debug(\"parsing data\"+(\"string\"==typeof e?` \"${e}\"`:` \"${Array.prototype.map.call(e,(e=>String.fromCharCode(e))).join(\"\")}\"`),\"string\"==typeof e?e.split(\"\").map((e=>e.charCodeAt(0))):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(e.length,b))),o||this._dirtyRowTracker.clearRange(),e.length>b)for(let t=n;t<e.length;t+=b){const n=t+b<e.length?t+b:e.length,o=\"string\"==typeof e?this._stringDecoder.decode(e.substring(t,n),this._parseBuffer):this._utf8Decoder.decode(e.subarray(t,n),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,o))return this._preserveStack(s,r,o,t),this._logSlowResolvingAsync(i),i}else if(!o){const t=\"string\"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,t))return this._preserveStack(s,r,t,0),this._logSlowResolvingAsync(i),i}this._activeBuffer.x===s&&this._activeBuffer.y===r||this._onCursorMove.fire();const a=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),h=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);h<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(h,this._bufferService.rows-1),Math.min(a,this._bufferService.rows-1))}print(e,t,i){let s,r;const n=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,h=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,u=this._curAttrData;let f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&2===f.getWidth(this._activeBuffer.x-1)&&f.setCellFromCodepoint(this._activeBuffer.x-1,0,1,u);let v=this._parser.precedingJoinState;for(let g=t;g<i;++g){if(s=e[g],s<127&&n){const e=n[String.fromCharCode(s)];e&&(s=e.charCodeAt(0))}const t=this._unicodeService.charProperties(s,v);r=p.UnicodeService.extractWidth(t);const i=p.UnicodeService.extractShouldJoin(t),m=i?p.UnicodeService.extractWidth(v):0;if(v=t,o&&this._onA11yChar.fire((0,c.stringFromCodePoint)(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-m>a)if(h){const e=f;let t=this._activeBuffer.x-m;for(this._activeBuffer.x=m,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),m>0&&f instanceof l.BufferLine&&f.copyCellsFrom(e,t,0,m,!1);t<a;)e.setCellFromCodepoint(t++,0,1,u)}else if(this._activeBuffer.x=a-1,2===r)continue;if(i&&this._activeBuffer.x){const e=f.getWidth(this._activeBuffer.x-1)?1:2;f.addCodepointToCell(this._activeBuffer.x-e,s,r);for(let e=r-m;--e>=0;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,u)}else if(d&&(f.insertCells(this._activeBuffer.x,r-m,this._activeBuffer.getNullCell(u)),2===f.getWidth(a-1)&&f.setCellFromCodepoint(a-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,u)),f.setCellFromCodepoint(this._activeBuffer.x++,s,r,u),r>0)for(;--r;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,u)}this._parser.precedingJoinState=v,this._activeBuffer.x<a&&i-t>0&&0===f.getWidth(this._activeBuffer.x)&&!f.hasContent(this._activeBuffer.x)&&f.setCellFromCodepoint(this._activeBuffer.x,0,1,u),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return\"t\"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,(e=>!w(e.params[0],this._optionsService.rawOptions.windowOptions)||t(e)))}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new m.DcsHandler(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new g.OscHandler(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){const t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){const t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){const t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){const t=e.params[0];return 1===t&&(this._curAttrData.bg|=536870912),2!==t&&0!==t||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,s=!1,r=!1){const n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(n.isWrapped=!1)}_resetBufferLine(e,t=!1){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){let i;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 3:const e=this._activeBuffer.lines.length-this._bufferService.rows;e>0&&(this._activeBuffer.lines.trimStart(e),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-e,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-e,0),this._onScroll.fire(0))}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;t--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y;let s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){const t=this._parser.precedingJoinState;if(!t)return!0;const i=e.params[0]||1,s=p.UnicodeService.extractWidth(t),r=this._activeBuffer.x-s,n=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),o=new Uint32Array(n.length*i);let a=0;for(let e=0;e<n.length;){const t=n.codePointAt(e)||0;o[a++]=t,e+=t>65535?2:1}let h=a;for(let e=1;e<i;++e)o.copyWithin(h,0,a),h+=a;return this.print(o,0,h),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is(\"xterm\")||this._is(\"rxvt-unicode\")||this._is(\"screen\")?this._coreService.triggerDataEvent(n.C0.ESC+\"[?1;2c\"):this._is(\"linux\")&&this._coreService.triggerDataEvent(n.C0.ESC+\"[?6c\")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is(\"xterm\")?this._coreService.triggerDataEvent(n.C0.ESC+\"[>0;276;0c\"):this._is(\"rxvt-unicode\")?this._coreService.triggerDataEvent(n.C0.ESC+\"[>85;95;0c\"):this._is(\"linux\")?this._coreService.triggerDataEvent(e.params[0]+\"c\"):this._is(\"screen\")&&this._coreService.triggerDataEvent(n.C0.ESC+\"[>83;40003;0c\")),!0}_is(e){return 0===(this._optionsService.rawOptions.termName+\"\").indexOf(e)}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug(\"Serial port requested application keypad.\"),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol=\"X10\";break;case 1e3:this._coreMouseService.activeProtocol=\"VT200\";break;case 1002:this._coreMouseService.activeProtocol=\"DRAG\";break;case 1003:this._coreMouseService.activeProtocol=\"ANY\";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug(\"DECSET 1005 not supported (see #2507)\");break;case 1006:this._coreMouseService.activeEncoding=\"SGR\";break;case 1015:this._logService.debug(\"DECSET 1015 not supported (see #2507)\");break;case 1016:this._coreMouseService.activeEncoding=\"SGR_PIXELS\";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug(\"Switching back to normal keypad.\"),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol=\"NONE\";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug(\"DECRST 1005 not supported (see #2507)\");break;case 1006:case 1016:this._coreMouseService.activeEncoding=\"DEFAULT\";break;case 1015:this._logService.debug(\"DECRST 1015 not supported (see #2507)\");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(e,t){const i=this._coreService.decPrivateModes,{activeProtocol:s,activeEncoding:r}=this._coreMouseService,o=this._coreService,{buffers:a,cols:h}=this._bufferService,{active:c,alt:l}=a,d=this._optionsService.rawOptions,_=e=>e?1:2,u=e.params[0];return f=u,v=t?2===u?4:4===u?_(o.modes.insertMode):12===u?3:20===u?_(d.convertEol):0:1===u?_(i.applicationCursorKeys):3===u?d.windowOptions.setWinLines?80===h?2:132===h?1:0:0:6===u?_(i.origin):7===u?_(i.wraparound):8===u?3:9===u?_(\"X10\"===s):12===u?_(d.cursorBlink):25===u?_(!o.isCursorHidden):45===u?_(i.reverseWraparound):66===u?_(i.applicationKeypad):67===u?4:1e3===u?_(\"VT200\"===s):1002===u?_(\"DRAG\"===s):1003===u?_(\"ANY\"===s):1004===u?_(i.sendFocus):1005===u?4:1006===u?_(\"SGR\"===r):1015===u?4:1016===u?_(\"SGR_PIXELS\"===r):1048===u?1:47===u||1047===u||1049===u?_(c===l):2004===u?_(i.bracketedPasteMode):0,o.triggerDataEvent(`${n.C0.ESC}[${t?\"\":\"?\"}${f};${v}$y`),!0;var f,v}_updateAttrColor(e,t,i,s,r){return 2===t?(e|=50331648,e&=-16777216,e|=f.AttributeData.fromColorRGB([i,s,r])):5===t&&(e&=-50331904,e|=33554432|255&i),e}_extractColor(e,t,i){const s=[0,0,-1,0,0,0];let r=0,n=0;do{if(s[n+r]=e.params[t+n],e.hasSubParams(t+n)){const i=e.getSubParams(t+n);let o=0;do{5===s[1]&&(r=1),s[n+o+1+r]=i[o]}while(++o<i.length&&o+n+1+r<s.length);break}if(5===s[1]&&n+r>=2||2===s[1]&&n+r>=5)break;s[1]&&(r=1)}while(++n+t<e.length&&n+r<s.length);for(let e=2;e<s.length;++e)-1===s[e]&&(s[e]=0);switch(s[0]){case 38:i.fg=this._updateAttrColor(i.fg,s[1],s[3],s[4],s[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,s[1],s[3],s[4],s[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,s[1],s[3],s[4],s[5])}return n}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=l.DEFAULT_ATTR_DATA.fg,e.bg=l.DEFAULT_ATTR_DATA.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(1===e.length&&0===e.params[0])return this._processSGR0(this._curAttrData),!0;const t=e.length;let i;const s=this._curAttrData;for(let r=0;r<t;r++)i=e.params[r],i>=30&&i<=37?(s.fg&=-50331904,s.fg|=16777216|i-30):i>=40&&i<=47?(s.bg&=-50331904,s.bg|=16777216|i-40):i>=90&&i<=97?(s.fg&=-50331904,s.fg|=16777224|i-90):i>=100&&i<=107?(s.bg&=-50331904,s.bg|=16777224|i-100):0===i?this._processSGR0(s):1===i?s.fg|=134217728:3===i?s.bg|=67108864:4===i?(s.fg|=268435456,this._processUnderline(e.hasSubParams(r)?e.getSubParams(r)[0]:1,s)):5===i?s.fg|=536870912:7===i?s.fg|=67108864:8===i?s.fg|=1073741824:9===i?s.fg|=2147483648:2===i?s.bg|=134217728:21===i?this._processUnderline(2,s):22===i?(s.fg&=-134217729,s.bg&=-134217729):23===i?s.bg&=-67108865:24===i?(s.fg&=-268435457,this._processUnderline(0,s)):25===i?s.fg&=-536870913:27===i?s.fg&=-67108865:28===i?s.fg&=-1073741825:29===i?s.fg&=2147483647:39===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):49===i?(s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?r+=this._extractColor(e,r,s):53===i?s.bg|=1073741824:55===i?s.bg&=-1073741825:59===i?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):100===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug(\"Unknown SGR attribute: %d.\",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);break;case 6:const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[${e};${t}R`)}return!0}deviceStatusPrivate(e){if(6===e.params[0]){const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[?${e};${t}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){const t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle=\"block\";break;case 3:case 4:this._optionsService.options.cursorStyle=\"underline\";break;case 5:case 6:this._optionsService.options.cursorStyle=\"bar\"}const i=t%2==1;return this._optionsService.options.cursorBlink=i,!0}setScrollRegion(e){const t=e.params[0]||1;let i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||0===i)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!w(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;const t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(y.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(y.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){const t=[],i=e.split(\";\");for(;i.length>1;){const e=i.shift(),s=i.shift();if(/^\\d+$/.exec(e)){const i=parseInt(e);if(D(i))if(\"?\"===s)t.push({type:0,index:i});else{const e=(0,S.parseColor)(s);e&&t.push({type:1,index:i,color:e})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){const t=e.split(\";\");return!(t.length<2)&&(t[1]?this._createHyperlink(t[0],t[1]):!t[0]&&this._finishHyperlink())}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();const i=e.split(\":\");let s;const r=i.findIndex((e=>e.startsWith(\"id=\")));return-1!==r&&(s=i[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){const i=e.split(\";\");for(let e=0;e<i.length&&!(t>=this._specialColors.length);++e,++t)if(\"?\"===i[e])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{const s=(0,S.parseColor)(i[e]);s&&this._onColor.fire([{type:1,index:this._specialColors[t],color:s}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;const t=[],i=e.split(\";\");for(let e=0;e<i.length;++e)if(/^\\d+$/.exec(i[e])){const s=parseInt(i[e]);D(s)&&t.push({type:2,index:s})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug(\"Serial port requested application keypad.\"),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug(\"Switching back to normal keypad.\"),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(e){return 2!==e.length?(this.selectDefaultCharset(),!0):(\"/\"===e[0]||this._charsetService.setgCharset(C[e[0]],o.CHARSETS[e[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){const e=new u.CellData;e.content=1<<22|\"E\".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){const i=this._activeBuffer.ybase+this._activeBuffer.y+t,s=this._activeBuffer.lines.get(i);s&&(s.fill(e),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){const i=this._bufferService.buffer,s=this._optionsService.rawOptions;return(e=>(this._coreService.triggerDataEvent(`${n.C0.ESC}${e}${n.C0.ESC}\\\\`),!0))('\"q'===e?`P1$r${this._curAttrData.isProtected()?1:0}\"q`:'\"p'===e?'P1$r61;1\"p':\"r\"===e?`P1$r${i.scrollTop+1};${i.scrollBottom+1}r`:\"m\"===e?\"P1$r0m\":\" q\"===e?`P1$r${{block:2,underline:4,bar:6}[s.cursorStyle]-(s.cursorBlink?1:0)} q`:\"P0$r\")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}}t.InputHandler=k;let L=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(E=e,e=t,t=E),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function D(e){return 0<=e&&e<256}L=s([r(0,v.IBufferService)],L)},844:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},1505:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,s,r,n){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(s,r,n)}get(e,t,i,s){return this._data.get(e,t)?.get(i,s)}clear(){this._data.clear()}}},6114:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode=\"undefined\"!=typeof process&&\"title\"in process;const i=t.isNode?\"node\":navigator.userAgent,s=t.isNode?\"node\":navigator.platform;t.isFirefox=i.includes(\"Firefox\"),t.isLegacyEdge=i.includes(\"Edge\"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\\/(\\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=[\"Macintosh\",\"MacIntel\",\"MacPPC\",\"Mac68K\"].includes(s),t.isIpad=\"iPad\"===s,t.isIphone=\"iPhone\"===s,t.isWindows=[\"Windows\",\"Win16\",\"Win32\",\"WinCE\"].includes(s),t.isLinux=s.indexOf(\"Linux\")>=0,t.isChromeOS=/\\bCrOS\\b/.test(i)},6106:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.SortedList=void 0;let i=0;t.SortedList=class{constructor(e){this._getKey=e,this._array=[]}clear(){this._array.length=0}insert(e){0!==this._array.length?(i=this._search(this._getKey(e)),this._array.splice(i,0,e)):this._array.push(e)}delete(e){if(0===this._array.length)return!1;const t=this._getKey(e);if(void 0===t)return!1;if(i=this._search(t),-1===i)return!1;if(this._getKey(this._array[i])!==t)return!1;do{if(this._array[i]===e)return this._array.splice(i,1),!0}while(++i<this._array.length&&this._getKey(this._array[i])===t);return!1}*getKeyIterator(e){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{yield this._array[i]}while(++i<this._array.length&&this._getKey(this._array[i])===e)}forEachByKey(e,t){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{t(this._array[i])}while(++i<this._array.length&&this._getKey(this._array[i])===e)}values(){return[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let s=t+i>>1;const r=this._getKey(this._array[s]);if(r>e)i=s-1;else{if(!(r<e)){for(;s>0&&this._getKey(this._array[s-1])===e;)s--;return s}t=s+1}}return t}}},7226:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const s=i(6114);class r{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,s=e.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),r=e.timeRemaining(),1.5*i>r)return s-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-t))}ms`),void this._start();s=r}this.clear()}}class n extends r{_requestCallback(e){return setTimeout((()=>e(this._createDeadline(16))))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!s.isNode&&\"requestIdleCallback\"in window?class extends r{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},9282:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.updateWindowsModeWrappedState=void 0;const s=i(643);t.updateWindowsModeWrappedState=function(e){const t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),i=t?.get(e.cols-1),r=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);r&&i&&(r.isWrapped=i[s.CHAR_DATA_CODE_INDEX]!==s.NULL_CELL_CODE&&i[s.CHAR_DATA_CODE_INDEX]!==s.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new s}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return 50331648==(50331648&this.fg)}isBgRGB(){return 50331648==(50331648&this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return 0==(50331648&this.fg)}isBgDefault(){return 0==(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}t.AttributeData=i;class s{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){const e=(3758096384&this._ext)>>29;return e<0?4294967288^e:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new s(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=s},9092:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Buffer=t.MAX_BUFFER_SIZE=void 0;const s=i(6349),r=i(7226),n=i(3734),o=i(8437),a=i(4634),h=i(511),c=i(643),l=i(4863),d=i(7116);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=h.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=h.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new r.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const i=e+this._optionsService.rawOptions.scrollback;return i>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:i}fillViewportRows(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA);let s=0;const r=this._getCorrectBufferLength(t);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<e)for(let t=0;t<this.lines.length;t++)s+=+this.lines.get(t).resize(e,i);let n=0;if(this._rows<t)for(let s=this._rows;s<t;s++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new o.BufferLine(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,i)));else for(let e=this._rows;e>t;e--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){const e=this.lines.length-r;e>0&&(this.lines.trimStart(e),this.ybase=Math.max(this.ybase-e,0),this.ydisp=Math.max(this.ydisp-e,0),this.savedY=Math.max(this.savedY-e,0)),this.lines.maxLength=r}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),n&&(this.y+=n),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let t=0;t<this.lines.length;t++)s+=+this.lines.get(t).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&\"conpty\"===e.backend&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const i=(0,a.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(i.length>0){const s=(0,a.reflowLargerCreateNewLayout)(this.lines,i);(0,a.reflowLargerApplyNewLayout)(this.lines,s.layout),this._reflowLargerAdjustViewport(e,t,s.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){const s=this.getNullCell(o.DEFAULT_ATTR_DATA);let r=i;for(;r-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA),s=[];let r=0;for(let n=this.lines.length-1;n>=0;n--){let h=this.lines.get(n);if(!h||!h.isWrapped&&h.getTrimmedLength()<=e)continue;const c=[h];for(;h.isWrapped&&n>0;)h=this.lines.get(--n),c.unshift(h);const l=this.ybase+this.y;if(l>=n&&l<n+c.length)continue;const d=c[c.length-1].getTrimmedLength(),_=(0,a.reflowSmallerGetNewLineLengths)(c,this._cols,e),u=_.length-c.length;let f;f=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+u):Math.max(0,this.lines.length-this.lines.maxLength+u);const v=[];for(let e=0;e<u;e++){const e=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);v.push(e)}v.length>0&&(s.push({start:n+c.length+r,newLines:v}),r+=v.length),c.push(...v);let p=_.length-1,g=_[p];0===g&&(p--,g=_[p]);let m=c.length-u-1,S=d;for(;m>=0;){const e=Math.min(S,g);if(void 0===c[p])break;if(c[p].copyCellsFrom(c[m],S-e,g-e,e,!0),g-=e,0===g&&(p--,g=_[p]),S-=e,0===S){m--;const e=Math.max(m,0);S=(0,a.getWrappedLineTrimmedLength)(c,e,this._cols)}}for(let t=0;t<c.length;t++)_[t]<e&&c[t].setCell(_[t],i);let C=u-f;for(;C-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+r)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+u,this.ybase+t-1)}if(s.length>0){const e=[],t=[];for(let e=0;e<this.lines.length;e++)t.push(this.lines.get(e));const i=this.lines.length;let n=i-1,o=0,a=s[o];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+r);let h=0;for(let c=Math.min(this.lines.maxLength-1,i+r-1);c>=0;c--)if(a&&a.start>n+h){for(let e=a.newLines.length-1;e>=0;e--)this.lines.set(c--,a.newLines[e]);c++,e.push({index:n+1,amount:a.newLines.length}),h+=a.newLines.length,a=s[++o]}else this.lines.set(c,t[n--]);let c=0;for(let t=e.length-1;t>=0;t--)e[t].index+=c,this.lines.onInsertEmitter.fire(e[t]),c+=e[t].amount;const l=Math.max(0,i+r-this.lines.maxLength);l>0&&this.lines.onTrimEmitter.fire(l)}}translateBufferLineToString(e,t,i=0,s){const r=this.lines.get(e);return r?r.translateToString(t,i,s):\"\"}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new l.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim((e=>{t.line-=e,t.line<0&&t.dispose()}))),t.register(this.lines.onInsert((e=>{t.line>=e.index&&(t.line+=e.amount)}))),t.register(this.lines.onDelete((e=>{t.line>=e.index&&t.line<e.index+e.amount&&t.dispose(),t.line>e.index&&(t.line-=e.amount)}))),t.register(t.onDispose((()=>this._removeMarker(t)))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;const s=i(3734),r=i(511),n=i(643),o=i(482);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);let a=0;class h{constructor(e,t,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const s=t||r.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]);for(let t=0;t<e;++t)this.setCell(t,s);this.length=e}get(e){const t=this._data[3*e+0],i=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:i?(0,o.stringFromCodePoint)(i):\"\",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):i]}set(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,o.stringFromCodePoint)(2097151&t):\"\"}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,t){return a=3*e,t.content=this._data[a+0],t.fg=this._data[a+1],t.bg=this._data[a+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t}setCell(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg}setCellFromCodepoint(e,t,i,s){268435456&s.bg&&(this._extendedAttrs[e]=s.extended),this._data[3*e+0]=t|i<<22,this._data[3*e+1]=s.fg,this._data[3*e+2]=s.bg}addCodepointToCell(e,t,i){let s=this._data[3*e+0];2097152&s?this._combined[e]+=(0,o.stringFromCodePoint)(t):2097151&s?(this._combined[e]=(0,o.stringFromCodePoint)(2097151&s)+(0,o.stringFromCodePoint)(t),s&=-2097152,s|=2097152):s=t|1<<22,i&&(s&=-12582913,s|=i<<22),this._data[3*e+0]=s}insertCells(e,t,i){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length-e){const s=new r.CellData;for(let i=this.length-e-t-1;i>=0;--i)this.setCell(e+t+i,this.loadCell(e+i,s));for(let s=0;s<t;++s)this.setCell(e+s,i)}else for(let t=e;t<this.length;++t)this.setCell(t,i);2===this.getWidth(this.length-1)&&this.setCellFromCodepoint(this.length-1,0,1,i)}deleteCells(e,t,i){if(e%=this.length,t<this.length-e){const s=new r.CellData;for(let i=0;i<this.length-e-t;++i)this.setCell(e+i,this.loadCell(e+t+i,s));for(let e=this.length-t;e<this.length;++e)this.setCell(e,i)}else for(let t=e;t<this.length;++t)this.setCell(t,i);e&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodepoint(e,0,1,i)}replaceCells(e,t,i,s=!1){if(s)for(e&&2===this.getWidth(e-1)&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length&&2===this.getWidth(t-1)&&!this.isProtected(t)&&this.setCellFromCodepoint(t,0,1,i);e<t&&e<this.length;)this.isProtected(e)||this.setCell(e,i),e++;else for(e&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodepoint(t,0,1,i);e<t&&e<this.length;)this.setCell(e++,i)}resize(e,t){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const e=new Uint32Array(i);e.set(this._data),this._data=e}for(let i=this.length;i<e;++i)this.setCell(i,t)}else{this._data=this._data.subarray(0,i);const t=Object.keys(this._combined);for(let i=0;i<t.length;i++){const s=parseInt(t[i],10);s>=e&&delete this._combined[s]}const s=Object.keys(this._extendedAttrs);for(let t=0;t<s.length;t++){const i=parseInt(s[t],10);i>=e&&delete this._extendedAttrs[i]}}return this.length=e,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,t=!1){if(t)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const t in e._combined)this._combined[t]=e._combined[t];this._extendedAttrs={};for(const t in e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped}clone(){const e=new h(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const t in this._combined)e._combined[t]=this._combined[t];for(const t in this._extendedAttrs)e._extendedAttrs[t]=this._extendedAttrs[t];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,t,i,s,r){const n=e._data;if(r)for(let r=s-1;r>=0;r--){for(let e=0;e<3;e++)this._data[3*(i+r)+e]=n[3*(t+r)+e];268435456&n[3*(t+r)+2]&&(this._extendedAttrs[i+r]=e._extendedAttrs[t+r])}else for(let r=0;r<s;r++){for(let e=0;e<3;e++)this._data[3*(i+r)+e]=n[3*(t+r)+e];268435456&n[3*(t+r)+2]&&(this._extendedAttrs[i+r]=e._extendedAttrs[t+r])}const o=Object.keys(e._combined);for(let s=0;s<o.length;s++){const r=parseInt(o[s],10);r>=t&&(this._combined[r-t+i]=e._combined[r])}}translateToString(e,t,i,s){t=t??0,i=i??this.length,e&&(i=Math.min(i,this.getTrimmedLength())),s&&(s.length=0);let r=\"\";for(;t<i;){const e=this._data[3*t+0],i=2097151&e,a=2097152&e?this._combined[t]:i?(0,o.stringFromCodePoint)(i):n.WHITESPACE_CELL_CHAR;if(r+=a,s)for(let e=0;e<a.length;++e)s.push(t);t+=e>>22||1}return s&&s.push(t),r}}t.BufferLine=h},4841:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function i(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();const s=!e[t].hasContent(i-1)&&1===e[t].getWidth(i-1),r=2===e[t+1].getWidth(0);return s&&r?i-1:i}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,s,r,n){const o=[];for(let a=0;a<e.length-1;a++){let h=a,c=e.get(++h);if(!c.isWrapped)continue;const l=[e.get(a)];for(;h<e.length&&c.isWrapped;)l.push(c),c=e.get(++h);if(r>=a&&r<h){a+=l.length-1;continue}let d=0,_=i(l,d,t),u=1,f=0;for(;u<l.length;){const e=i(l,u,t),r=e-f,o=s-_,a=Math.min(r,o);l[d].copyCellsFrom(l[u],f,_,a,!1),_+=a,_===s&&(d++,_=0),f+=a,f===e&&(u++,f=0),0===_&&0!==d&&2===l[d-1].getWidth(s-1)&&(l[d].copyCellsFrom(l[d-1],s-1,_++,1,!1),l[d-1].setCell(s-1,n))}l[d].replaceCells(_,s,n);let v=0;for(let e=l.length-1;e>0&&(e>d||0===l[e].getTrimmedLength());e--)v++;v>0&&(o.push(a+l.length-v),o.push(v)),a+=l.length-1}return o},t.reflowLargerCreateNewLayout=function(e,t){const i=[];let s=0,r=t[s],n=0;for(let o=0;o<e.length;o++)if(r===o){const i=t[++s];e.onDeleteEmitter.fire({index:o-n,amount:i}),o+=i-1,n+=i,r=t[++s]}else i.push(o);return{layout:i,countRemoved:n}},t.reflowLargerApplyNewLayout=function(e,t){const i=[];for(let s=0;s<t.length;s++)i.push(e.get(t[s]));for(let t=0;t<i.length;t++)e.set(t,i[t]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,s){const r=[],n=e.map(((s,r)=>i(e,r,t))).reduce(((e,t)=>e+t));let o=0,a=0,h=0;for(;h<n;){if(n-h<s){r.push(n-h);break}o+=s;const c=i(e,a,t);o>c&&(o-=c,a++);const l=2===e[a].getWidth(o-1);l&&o--;const d=l?s-1:s;r.push(d),h+=d}return r},t.getWrappedLineTrimmedLength=i},5295:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferSet=void 0;const s=i(8460),r=i(844),n=i(9092);class o extends r.Disposable{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this.register(new s.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange(\"scrollback\",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange(\"tabStopWidth\",(()=>this.setupTabStops())))}reset(){this._normal=new n.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}}t.BufferSet=o},511:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CellData=void 0;const s=i(482),r=i(643),n=i(3734);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=\"\"}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,s.stringFromCodePoint)(2097151&this.content):\"\"}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[r.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[r.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[r.CHAR_DATA_CHAR_INDEX].length){const i=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const s=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(i-55296)+s-56320+65536|e[r.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[r.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[r.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[r.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR=\"\",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=\" \",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Marker=void 0;const s=i(8460),r=i(844);class n{get id(){return this._id}constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,r.disposeArray)(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}}t.Marker=n,n._nextId=1},7116:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={\"`\":\"◆\",a:\"▒\",b:\"␉\",c:\"␌\",d:\"␍\",e:\"␊\",f:\"°\",g:\"±\",h:\"␤\",i:\"␋\",j:\"┘\",k:\"┐\",l:\"┌\",m:\"└\",n:\"┼\",o:\"⎺\",p:\"⎻\",q:\"─\",r:\"⎼\",s:\"⎽\",t:\"├\",u:\"┤\",v:\"┴\",w:\"┬\",x:\"│\",y:\"≤\",z:\"≥\",\"{\":\"π\",\"|\":\"≠\",\"}\":\"£\",\"~\":\"·\"},t.CHARSETS.A={\"#\":\"£\"},t.CHARSETS.B=void 0,t.CHARSETS[4]={\"#\":\"£\",\"@\":\"¾\",\"[\":\"ij\",\"\\\\\":\"½\",\"]\":\"|\",\"{\":\"¨\",\"|\":\"f\",\"}\":\"¼\",\"~\":\"´\"},t.CHARSETS.C=t.CHARSETS[5]={\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"é\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS.R={\"#\":\"£\",\"@\":\"à\",\"[\":\"°\",\"\\\\\":\"ç\",\"]\":\"§\",\"{\":\"é\",\"|\":\"ù\",\"}\":\"è\",\"~\":\"¨\"},t.CHARSETS.Q={\"@\":\"à\",\"[\":\"â\",\"\\\\\":\"ç\",\"]\":\"ê\",\"^\":\"î\",\"`\":\"ô\",\"{\":\"é\",\"|\":\"ù\",\"}\":\"è\",\"~\":\"û\"},t.CHARSETS.K={\"@\":\"§\",\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Ü\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"ü\",\"~\":\"ß\"},t.CHARSETS.Y={\"#\":\"£\",\"@\":\"§\",\"[\":\"°\",\"\\\\\":\"ç\",\"]\":\"é\",\"`\":\"ù\",\"{\":\"à\",\"|\":\"ò\",\"}\":\"è\",\"~\":\"ì\"},t.CHARSETS.E=t.CHARSETS[6]={\"@\":\"Ä\",\"[\":\"Æ\",\"\\\\\":\"Ø\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"ä\",\"{\":\"æ\",\"|\":\"ø\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS.Z={\"#\":\"£\",\"@\":\"§\",\"[\":\"¡\",\"\\\\\":\"Ñ\",\"]\":\"¿\",\"{\":\"°\",\"|\":\"ñ\",\"}\":\"ç\"},t.CHARSETS.H=t.CHARSETS[7]={\"@\":\"É\",\"[\":\"Ä\",\"\\\\\":\"Ö\",\"]\":\"Å\",\"^\":\"Ü\",\"`\":\"é\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"å\",\"~\":\"ü\"},t.CHARSETS[\"=\"]={\"#\":\"ù\",\"@\":\"à\",\"[\":\"é\",\"\\\\\":\"ç\",\"]\":\"ê\",\"^\":\"î\",_:\"è\",\"`\":\"ô\",\"{\":\"ä\",\"|\":\"ö\",\"}\":\"ü\",\"~\":\"û\"}},2584:(e,t)=>{var i,s,r;Object.defineProperty(t,\"__esModule\",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL=\"\\0\",e.SOH=\"\u0001\",e.STX=\"\u0002\",e.ETX=\"\u0003\",e.EOT=\"\u0004\",e.ENQ=\"\u0005\",e.ACK=\"\u0006\",e.BEL=\"\u0007\",e.BS=\"\\b\",e.HT=\"\\t\",e.LF=\"\\n\",e.VT=\"\\v\",e.FF=\"\\f\",e.CR=\"\\r\",e.SO=\"\u000e\",e.SI=\"\u000f\",e.DLE=\"\u0010\",e.DC1=\"\u0011\",e.DC2=\"\u0012\",e.DC3=\"\u0013\",e.DC4=\"\u0014\",e.NAK=\"\u0015\",e.SYN=\"\u0016\",e.ETB=\"\u0017\",e.CAN=\"\u0018\",e.EM=\"\u0019\",e.SUB=\"\u001a\",e.ESC=\"\u001b\",e.FS=\"\u001c\",e.GS=\"\u001d\",e.RS=\"\u001e\",e.US=\"\u001f\",e.SP=\" \",e.DEL=\"\"}(i||(t.C0=i={})),function(e){e.PAD=\"\",e.HOP=\"\",e.BPH=\"\",e.NBH=\"\",e.IND=\"\",e.NEL=\"\",e.SSA=\"\",e.ESA=\"\",e.HTS=\"\",e.HTJ=\"\",e.VTS=\"\",e.PLD=\"\",e.PLU=\"\",e.RI=\"\",e.SS2=\"\",e.SS3=\"\",e.DCS=\"\",e.PU1=\"\",e.PU2=\"\",e.STS=\"\",e.CCH=\"\",e.MW=\"\",e.SPA=\"\",e.EPA=\"\",e.SOS=\"\",e.SGCI=\"\",e.SCI=\"\",e.CSI=\"\",e.ST=\"\",e.OSC=\"\",e.PM=\"\",e.APC=\"\"}(s||(t.C1=s={})),function(e){e.ST=`${i.ESC}\\\\`}(r||(t.C1_ESCAPED=r={}))},7399:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.evaluateKeyboardEvent=void 0;const s=i(2584),r={48:[\"0\",\")\"],49:[\"1\",\"!\"],50:[\"2\",\"@\"],51:[\"3\",\"#\"],52:[\"4\",\"$\"],53:[\"5\",\"%\"],54:[\"6\",\"^\"],55:[\"7\",\"&\"],56:[\"8\",\"*\"],57:[\"9\",\"(\"],186:[\";\",\":\"],187:[\"=\",\"+\"],188:[\",\",\"<\"],189:[\"-\",\"_\"],190:[\".\",\">\"],191:[\"/\",\"?\"],192:[\"`\",\"~\"],219:[\"[\",\"{\"],220:[\"\\\\\",\"|\"],221:[\"]\",\"}\"],222:[\"'\",'\"']};t.evaluateKeyboardEvent=function(e,t,i,n){const o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:\"UIKeyInputUpArrow\"===e.key?o.key=t?s.C0.ESC+\"OA\":s.C0.ESC+\"[A\":\"UIKeyInputLeftArrow\"===e.key?o.key=t?s.C0.ESC+\"OD\":s.C0.ESC+\"[D\":\"UIKeyInputRightArrow\"===e.key?o.key=t?s.C0.ESC+\"OC\":s.C0.ESC+\"[C\":\"UIKeyInputDownArrow\"===e.key&&(o.key=t?s.C0.ESC+\"OB\":s.C0.ESC+\"[B\");break;case 8:o.key=e.ctrlKey?\"\\b\":s.C0.DEL,e.altKey&&(o.key=s.C0.ESC+o.key);break;case 9:if(e.shiftKey){o.key=s.C0.ESC+\"[Z\";break}o.key=s.C0.HT,o.cancel=!0;break;case 13:o.key=e.altKey?s.C0.ESC+s.C0.CR:s.C0.CR,o.cancel=!0;break;case 27:o.key=s.C0.ESC,e.altKey&&(o.key=s.C0.ESC+s.C0.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?(o.key=s.C0.ESC+\"[1;\"+(a+1)+\"D\",o.key===s.C0.ESC+\"[1;3D\"&&(o.key=s.C0.ESC+(i?\"b\":\"[1;5D\"))):o.key=t?s.C0.ESC+\"OD\":s.C0.ESC+\"[D\";break;case 39:if(e.metaKey)break;a?(o.key=s.C0.ESC+\"[1;\"+(a+1)+\"C\",o.key===s.C0.ESC+\"[1;3C\"&&(o.key=s.C0.ESC+(i?\"f\":\"[1;5C\"))):o.key=t?s.C0.ESC+\"OC\":s.C0.ESC+\"[C\";break;case 38:if(e.metaKey)break;a?(o.key=s.C0.ESC+\"[1;\"+(a+1)+\"A\",i||o.key!==s.C0.ESC+\"[1;3A\"||(o.key=s.C0.ESC+\"[1;5A\")):o.key=t?s.C0.ESC+\"OA\":s.C0.ESC+\"[A\";break;case 40:if(e.metaKey)break;a?(o.key=s.C0.ESC+\"[1;\"+(a+1)+\"B\",i||o.key!==s.C0.ESC+\"[1;3B\"||(o.key=s.C0.ESC+\"[1;5B\")):o.key=t?s.C0.ESC+\"OB\":s.C0.ESC+\"[B\";break;case 45:e.shiftKey||e.ctrlKey||(o.key=s.C0.ESC+\"[2~\");break;case 46:o.key=a?s.C0.ESC+\"[3;\"+(a+1)+\"~\":s.C0.ESC+\"[3~\";break;case 36:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"H\":t?s.C0.ESC+\"OH\":s.C0.ESC+\"[H\";break;case 35:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"F\":t?s.C0.ESC+\"OF\":s.C0.ESC+\"[F\";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=s.C0.ESC+\"[5;\"+(a+1)+\"~\":o.key=s.C0.ESC+\"[5~\";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=s.C0.ESC+\"[6;\"+(a+1)+\"~\":o.key=s.C0.ESC+\"[6~\";break;case 112:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"P\":s.C0.ESC+\"OP\";break;case 113:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"Q\":s.C0.ESC+\"OQ\";break;case 114:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"R\":s.C0.ESC+\"OR\";break;case 115:o.key=a?s.C0.ESC+\"[1;\"+(a+1)+\"S\":s.C0.ESC+\"OS\";break;case 116:o.key=a?s.C0.ESC+\"[15;\"+(a+1)+\"~\":s.C0.ESC+\"[15~\";break;case 117:o.key=a?s.C0.ESC+\"[17;\"+(a+1)+\"~\":s.C0.ESC+\"[17~\";break;case 118:o.key=a?s.C0.ESC+\"[18;\"+(a+1)+\"~\":s.C0.ESC+\"[18~\";break;case 119:o.key=a?s.C0.ESC+\"[19;\"+(a+1)+\"~\":s.C0.ESC+\"[19~\";break;case 120:o.key=a?s.C0.ESC+\"[20;\"+(a+1)+\"~\":s.C0.ESC+\"[20~\";break;case 121:o.key=a?s.C0.ESC+\"[21;\"+(a+1)+\"~\":s.C0.ESC+\"[21~\";break;case 122:o.key=a?s.C0.ESC+\"[23;\"+(a+1)+\"~\":s.C0.ESC+\"[23~\";break;case 123:o.key=a?s.C0.ESC+\"[24;\"+(a+1)+\"~\":s.C0.ESC+\"[24~\";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(i&&!n||!e.altKey||e.metaKey)!i||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?o.key=e.key:e.key&&e.ctrlKey&&(\"_\"===e.key&&(o.key=s.C0.US),\"@\"===e.key&&(o.key=s.C0.NUL)):65===e.keyCode&&(o.type=1);else{const t=r[e.keyCode],i=t?.[e.shiftKey?1:0];if(i)o.key=s.C0.ESC+i;else if(e.keyCode>=65&&e.keyCode<=90){const t=e.ctrlKey?e.keyCode-64:e.keyCode+32;let i=String.fromCharCode(t);e.shiftKey&&(i=i.toUpperCase()),o.key=s.C0.ESC+i}else if(32===e.keyCode)o.key=s.C0.ESC+(e.ctrlKey?s.C0.NUL:\" \");else if(\"Dead\"===e.key&&e.code.startsWith(\"Key\")){let t=e.code.slice(3,4);e.shiftKey||(t=t.toLowerCase()),o.key=s.C0.ESC+t,o.cancel=!0}}else e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?o.key=s.C0.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?o.key=s.C0.DEL:219===e.keyCode?o.key=s.C0.ESC:220===e.keyCode?o.key=s.C0.FS:221===e.keyCode&&(o.key=s.C0.GS)}return o}},482:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let s=\"\";for(let r=t;r<i;++r){let t=e[r];t>65535?(t-=65536,s+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):s+=String.fromCharCode(t)}return s},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let s=0,r=0;if(this._interim){const i=e.charCodeAt(r++);56320<=i&&i<=57343?t[s++]=1024*(this._interim-55296)+i-56320+65536:(t[s++]=this._interim,t[s++]=i),this._interim=0}for(let n=r;n<i;++n){const r=e.charCodeAt(n);if(55296<=r&&r<=56319){if(++n>=i)return this._interim=r,s;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[s++]=1024*(r-55296)+o-56320+65536:(t[s++]=r,t[s++]=o)}else 65279!==r&&(t[s++]=r)}return s}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let s,r,n,o,a=0,h=0,c=0;if(this.interim[0]){let s=!1,r=this.interim[0];r&=192==(224&r)?31:224==(240&r)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)r<<=6,r|=n;const h=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,l=h-o;for(;c<l;){if(c>=i)return 0;if(n=e[c++],128!=(192&n)){c--,s=!0;break}this.interim[o++]=n,r<<=6,r|=63&n}s||(2===h?r<128?c--:t[a++]=r:3===h?r<2048||r>=55296&&r<=57343||65279===r||(t[a++]=r):r<65536||r>1114111||(t[a++]=r)),this.interim.fill(0)}const l=i-4;let d=c;for(;d<i;){for(;!(!(d<l)||128&(s=e[d])||128&(r=e[d+1])||128&(n=e[d+2])||128&(o=e[d+3]));)t[a++]=s,t[a++]=r,t[a++]=n,t[a++]=o,d+=4;if(s=e[d++],s<128)t[a++]=s;else if(192==(224&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(h=(31&s)<<6|63&r,h<128){d--;continue}t[a++]=h}else if(224==(240&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(h=(15&s)<<12|(63&r)<<6|63&n,h<2048||h>=55296&&h<=57343||65279===h)continue;t[a++]=h}else if(240==(248&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,this.interim[2]=n,a;if(o=e[d++],128!=(192&o)){d--;continue}if(h=(7&s)<<18|(63&r)<<12|(63&n)<<6|63&o,h<65536||h>1114111)continue;t[a++]=h}}return a}}},225:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.UnicodeV6=void 0;const s=i(1480),r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],n=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let o;t.UnicodeV6=class{constructor(){if(this.version=\"6\",!o){o=new Uint8Array(65536),o.fill(1),o[0]=0,o.fill(0,1,32),o.fill(0,127,160),o.fill(2,4352,4448),o[9001]=2,o[9002]=2,o.fill(2,11904,42192),o[12351]=1,o.fill(2,44032,55204),o.fill(2,63744,64256),o.fill(2,65040,65050),o.fill(2,65072,65136),o.fill(2,65280,65377),o.fill(2,65504,65511);for(let e=0;e<r.length;++e)o.fill(0,r[e][0],r[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?o[e]:function(e,t){let i,s=0,r=t.length-1;if(e<t[0][0]||e>t[r][1])return!1;for(;r>=s;)if(i=s+r>>1,e>t[i][1])s=i+1;else{if(!(e<t[i][0]))return!0;r=i-1}return!1}(e,n)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let i=this.wcwidth(e),r=0===i&&0!==t;if(r){const e=s.UnicodeService.extractWidth(t);0===e?r=!1:e>i&&(i=e)}return s.UnicodeService.createPropertyValue(0,i,r)}}},5981:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.WriteBuffer=void 0;const s=i(8460),r=i(844);class n extends r.Disposable{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(void 0!==t&&this._syncCalls>t)return void(this._syncCalls=0);if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>5e7)throw new Error(\"write data discarded, use flow control to avoid losing data\");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){const i=e||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],s=this._action(e,t);if(s){const e=e=>Date.now()-i>=12?setTimeout((()=>this._innerWrite(0,e))):this._innerWrite(i,e);return void s.catch((e=>(queueMicrotask((()=>{throw e})),Promise.resolve(!1)))).then(e)}const r=this._callbacks[this._bufferOffset];if(r&&r(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=n},5941:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.toRgbString=t.parseColor=void 0;const i=/^([\\da-f])\\/([\\da-f])\\/([\\da-f])$|^([\\da-f]{2})\\/([\\da-f]{2})\\/([\\da-f]{2})$|^([\\da-f]{3})\\/([\\da-f]{3})\\/([\\da-f]{3})$|^([\\da-f]{4})\\/([\\da-f]{4})\\/([\\da-f]{4})$/,s=/^[\\da-f]+$/;function r(e,t){const i=e.toString(16),s=i.length<2?\"0\"+i:i;switch(t){case 4:return i[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}t.parseColor=function(e){if(!e)return;let t=e.toLowerCase();if(0===t.indexOf(\"rgb:\")){t=t.slice(4);const e=i.exec(t);if(e){const t=e[1]?15:e[4]?255:e[7]?4095:65535;return[Math.round(parseInt(e[1]||e[4]||e[7]||e[10],16)/t*255),Math.round(parseInt(e[2]||e[5]||e[8]||e[11],16)/t*255),Math.round(parseInt(e[3]||e[6]||e[9]||e[12],16)/t*255)]}}else if(0===t.indexOf(\"#\")&&(t=t.slice(1),s.exec(t)&&[3,6,9,12].includes(t.length))){const e=t.length/3,i=[0,0,0];for(let s=0;s<3;++s){const r=parseInt(t.slice(e*s,e*s+e),16);i[s]=1===e?r<<4:2===e?r:3===e?r>>4:r>>8}return i}},t.toRgbString=function(e,t=16){const[i,s,n]=e;return`rgb:${r(i,t)}/${r(s,t)}/${r(n,t)}`}},5770:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.DcsHandler=t.DcsParser=void 0;const s=i(482),r=i(8742),n=i(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||o,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(t);else this._handlerFb(this._ident,\"HOOK\",t)}put(e,t,i){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i);else this._handlerFb(this._ident,\"PUT\",(0,s.utf32ToString)(e,t,i))}unhook(e,t=!0){if(this._active.length){let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;s>=0&&(i=this._active[s].unhook(e),!0!==i);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,\"UNHOOK\",e);this._active=o,this._ident=0}};const a=new r.Params;a.addParam(0),t.DcsHandler=class{constructor(e){this._handler=e,this._data=\"\",this._params=a,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():a,this._data=\"\",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,s.utf32ToString)(e,t,i),this._data.length>n.PAYLOAD_LIMIT&&(this._data=\"\",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then((e=>(this._params=a,this._data=\"\",this._hitLimit=!1,e)));return this._params=a,this._data=\"\",this._hitLimit=!1,t}}},2015:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;const s=i(844),r=i(8742),n=i(6242),o=i(6351);class a{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,s){this.table[t<<8|e]=i<<4|s}addMany(e,t,i,s){for(let r=0;r<e.length;r++)this.table[t<<8|e[r]]=i<<4|s}}t.TransitionTable=a;const h=160;t.VT500_TRANSITION_TABLE=function(){const e=new a(4095),t=Array.apply(null,Array(256)).map(((e,t)=>t)),i=(e,i)=>t.slice(e,i),s=i(32,127),r=i(0,24);r.push(25),r.push.apply(r,i(28,32));const n=i(0,14);let o;for(o in e.setDefault(1,0),e.addMany(s,0,2,0),n)e.addMany([24,26,153,154],o,3,0),e.addMany(i(128,144),o,3,0),e.addMany(i(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(r,0,3,0),e.addMany(r,1,3,1),e.add(127,1,0,1),e.addMany(r,8,0,8),e.addMany(r,3,3,3),e.add(127,3,0,3),e.addMany(r,4,3,4),e.add(127,4,0,4),e.addMany(r,6,3,6),e.addMany(r,5,3,5),e.add(127,5,0,5),e.addMany(r,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(s,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(s,7,0,7),e.addMany(r,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(r,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(r,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(r,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(r,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(r,13,13,13),e.addMany(s,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(h,0,2,0),e.add(h,8,5,8),e.add(h,6,0,6),e.add(h,11,0,11),e.add(h,13,13,13),e}();class c extends s.Disposable{constructor(e=t.VT500_TRANSITION_TABLE){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new r.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,t,i)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,s.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:\"\\\\\"},(()=>!0))}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error(\"only one byte as prefix supported\");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error(\"prefix must be in range 0x3c .. 0x3f\")}if(e.intermediates){if(e.intermediates.length>2)throw new Error(\"only two bytes as intermediates are supported\");for(let t=0;t<e.intermediates.length;++t){const s=e.intermediates.charCodeAt(t);if(32>s||s>47)throw new Error(\"intermediate must be in range 0x20 .. 0x2f\");i<<=8,i|=s}}if(1!==e.final.length)throw new Error(\"final must be a single byte\");const s=e.final.charCodeAt(0);if(t[0]>s||s>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=s,i}identToString(e){const t=[];for(;e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join(\"\")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){const i=this._identifier(e,[48,126]);void 0===this._escHandlers[i]&&(this._escHandlers[i]=[]);const s=this._escHandlers[i];return s.push(t),{dispose:()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){const i=this._identifier(e);void 0===this._csiHandlers[i]&&(this._csiHandlers[i]=[]);const s=this._csiHandlers[i];return s.push(t),{dispose:()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,s,r){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(e,t,i){let s,r=0,n=0,o=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,o=this._parseStack.chunkPos+1;else{if(void 0===i||1===this._parseStack.state)throw this._parseStack.state=1,new Error(\"improper continuation due to previous async handler, giving up parsing\");const t=this._parseStack.handlers;let n=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===i&&n>-1)for(;n>=0&&(s=t[n](this._params),!0!==s);n--)if(s instanceof Promise)return this._parseStack.handlerPos=n,s;this._parseStack.handlers=[];break;case 4:if(!1===i&&n>-1)for(;n>=0&&(s=t[n](),!0!==s);n--)if(s instanceof Promise)return this._parseStack.handlerPos=n,s;this._parseStack.handlers=[];break;case 6:if(r=e[this._parseStack.chunkPos],s=this._dcsParser.unhook(24!==r&&26!==r,i),s)return s;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(r=e[this._parseStack.chunkPos],s=this._oscParser.end(24!==r&&26!==r,i),s)return s;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,o=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let i=o;i<t;++i){switch(r=e[i],n=this._transitions.table[this.currentState<<8|(r<160?r:h)],n>>4){case 2:for(let s=i+1;;++s){if(s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}}break;case 3:this._executeHandlers[r]?this._executeHandlers[r]():this._executeHandlerFb(r),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:i,code:r,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const o=this._csiHandlers[this._collect<<8|r];let a=o?o.length-1:-1;for(;a>=0&&(s=o[a](this._params),!0!==s);a--)if(s instanceof Promise)return this._preserveStack(3,o,a,n,i),s;a<0&&this._csiHandlerFb(this._collect<<8|r,this._params),this.precedingJoinState=0;break;case 8:do{switch(r){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(r-48)}}while(++i<t&&(r=e[i])>47&&r<60);i--;break;case 9:this._collect<<=8,this._collect|=r;break;case 10:const c=this._escHandlers[this._collect<<8|r];let l=c?c.length-1:-1;for(;l>=0&&(s=c[l](),!0!==s);l--)if(s instanceof Promise)return this._preserveStack(4,c,l,n,i),s;l<0&&this._escHandlerFb(this._collect<<8|r),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|r,this._params);break;case 13:for(let s=i+1;;++s)if(s>=t||24===(r=e[s])||26===r||27===r||r>127&&r<h){this._dcsParser.put(e,i,s),i=s-1;break}break;case 14:if(s=this._dcsParser.unhook(24!==r&&26!==r),s)return this._preserveStack(6,[],0,n,i),s;27===r&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let s=i+1;;s++)if(s>=t||(r=e[s])<32||r>127&&r<h){this._oscParser.put(e,i,s),i=s-1;break}break;case 6:if(s=this._oscParser.end(24!==r&&26!==r),s)return this._preserveStack(5,[],0,n,i),s;27===r&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&n}}}t.EscapeSequenceParser=c},6242:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.OscHandler=t.OscParser=void 0;const s=i(5770),r=i(482),n=[];t.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(2===this._state)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,\"START\")}_put(e,t,i){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i);else this._handlerFb(this._id,\"PUT\",(0,r.utf32ToString)(e,t,i))}start(){this.reset(),this._state=1}put(e,t,i){if(3!==this._state){if(1===this._state)for(;t<i;){const i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;s>=0&&(i=this._active[s].end(e),!0!==i);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}else this._handlerFb(this._id,\"END\",e);this._active=n,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(e){this._handler=e,this._data=\"\",this._hitLimit=!1}start(){this._data=\"\",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,r.utf32ToString)(e,t,i),this._data.length>s.PAYLOAD_LIMIT&&(this._data=\"\",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then((e=>(this._data=\"\",this._hitLimit=!1,e)));return this._data=\"\",this._hitLimit=!1,t}}},8742:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.Params=void 0;const i=2147483647;class s{static fromArray(e){const t=new s;if(!e.length)return t;for(let i=Array.isArray(e[0])?1:0;i<e.length;++i){const s=e[i];if(Array.isArray(s))for(let e=0;e<s.length;++e)t.addSubParam(s[e]);else t.addParam(s)}return t}constructor(e=32,t=32){if(this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error(\"maxSubParamsLength must not be greater than 256\");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const e=new s(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){const e=[];for(let t=0;t<this.length;++t){e.push(this.params[t]);const i=this._subParamsIdx[t]>>8,s=255&this._subParamsIdx[t];s-i>0&&e.push(Array.prototype.slice.call(this._subParams,i,s))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error(\"values lesser than -1 are not allowed\");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>i?i:e}}addSubParam(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error(\"values lesser than -1 are not allowed\");this._subParams[this._subParamsLength++]=e>i?i:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0}getSubParams(e){const t=this._subParamsIdx[e]>>8,i=255&this._subParamsIdx[e];return i-t>0?this._subParams.subarray(t,i):null}getSubParamsAll(){const e={};for(let t=0;t<this.length;++t){const i=this._subParamsIdx[t]>>8,s=255&this._subParamsIdx[t];s-i>0&&(e[t]=this._subParams.slice(i,s))}return e}addDigit(e){let t;if(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const s=this._digitIsSub?this._subParams:this.params,r=s[t-1];s[t-1]=~r?Math.min(10*r+e,i):e}}t.Params=s},5741:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){const i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(-1===t)throw new Error(\"Could not dispose an addon that has not been loaded\");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}}},8771:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferApiView=void 0;const s=i(3785),r=i(511);t.BufferApiView=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){const t=this._buffer.lines.get(e);if(t)return new s.BufferLineApiView(t)}getNullCell(){return new r.CellData}}},3785:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferLineApiView=void 0;const s=i(511);t.BufferLineApiView=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new s.CellData)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}}},8285:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferNamespaceApi=void 0;const s=i(8771),r=i(8460),n=i(844);class o extends n.Disposable{constructor(e){super(),this._core=e,this._onBufferChange=this.register(new r.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new s.BufferApiView(this._core.buffers.normal,\"normal\"),this._alternate=new s.BufferApiView(this._core.buffers.alt,\"alternate\"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error(\"Active buffer is neither normal nor alternate\")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,(e=>t(e.toArray())))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,((e,i)=>t(e,i.toArray())))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}}},7090:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}}},744:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;const n=i(8460),o=i(844),a=i(5295),h=i(2585);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let c=t.BufferService=class extends o.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new a.BufferSet(e,this))}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){const i=this.buffer;let s;s=this._cachedBlankLine,s&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=i.getBlankLine(e,t),this._cachedBlankLine=s),s.isWrapped=t;const r=i.ybase+i.scrollTop,n=i.ybase+i.scrollBottom;if(0===i.scrollTop){const e=i.lines.isFull;n===i.lines.length-1?e?i.lines.recycle().copyFrom(s):i.lines.push(s.clone()):i.lines.splice(n+1,0,s.clone()),e?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const e=n-r+1;i.lines.shiftElements(r+1,e-1,-1),i.lines.set(n,s.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t,i){const s=this.buffer;if(e<0){if(0===s.ydisp)return;this.isUserScrolling=!0}else e+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);const r=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+e,s.ybase),0),r!==s.ydisp&&(t||this._onScroll.fire(s.ydisp))}};t.BufferService=c=s([r(0,h.IOptionsService)],c)},7994:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}}},1753:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CoreMouseService=void 0;const n=i(2585),o=i(8460),a=i(844),h={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>32!==e.action},DRAG:{events:23,restrict:e=>32!==e.action||3!==e.button},ANY:{events:31,restrict:e=>!0}};function c(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(i|=64,i|=e.action):(i|=3&e.button,4&e.button&&(i|=64),8&e.button&&(i|=128),32===e.action?i|=32:0!==e.action||t||(i|=3)),i}const l=String.fromCharCode,d={DEFAULT:e=>{const t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?\"\":`\u001b[M${l(t[0])}${l(t[1])}${l(t[2])}`},SGR:e=>{const t=0===e.action&&4!==e.button?\"m\":\"M\";return`\u001b[<${c(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{const t=0===e.action&&4!==e.button?\"m\":\"M\";return`\u001b[<${c(e,!0)};${e.x};${e.y}${t}`}};let _=t.CoreMouseService=class extends a.Disposable{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol=\"\",this._activeEncoding=\"\",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const e of Object.keys(h))this.addProtocol(e,h[e]);for(const e of Object.keys(d))this.addEncoding(e,d[e]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol \"${e}\"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding \"${e}\"`);this._activeEncoding=e}reset(){this.activeProtocol=\"NONE\",this.activeEncoding=\"DEFAULT\",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._equalEvents(this._lastEvent,e,\"SGR_PIXELS\"===this._activeEncoding))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;const t=this._encodings[this._activeEncoding](e);return t&&(\"DEFAULT\"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x)return!1;if(e.y!==t.y)return!1}else{if(e.col!==t.col)return!1;if(e.row!==t.row)return!1}return e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift}};t.CoreMouseService=_=s([r(0,n.IBufferService),r(1,n.ICoreService)],_)},6975:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.CoreService=void 0;const n=i(1439),o=i(8460),a=i(844),h=i(2585),c=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=t.CoreService=class extends a.Disposable{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(l)}reset(){this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(l)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;const i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data \"${e}\"`,(()=>e.split(\"\").map((e=>e.charCodeAt(0))))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary \"${e}\"`,(()=>e.split(\"\").map((e=>e.charCodeAt(0))))),this._onBinary.fire(e))}};t.CoreService=d=s([r(0,h.IBufferService),r(1,h.ILogService),r(2,h.IOptionsService)],d)},9074:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.DecorationService=void 0;const s=i(8055),r=i(8460),n=i(844),o=i(6106);let a=0,h=0;class c extends n.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new o.SortedList((e=>e?.marker.line)),this._onDecorationRegistered=this.register(new r.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new r.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)((()=>this.reset())))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new l(e);if(t){const e=t.marker.onDispose((()=>t.dispose()));t.onDispose((()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),e.dispose())})),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){let s=0,r=0;for(const n of this._decorations.getKeyIterator(t))s=n.options.x??0,r=s+(n.options.width??1),e>=s&&e<r&&(!i||(n.options.layer??\"bottom\")===i)&&(yield n)}forEachDecorationAtCell(e,t,i,s){this._decorations.forEachByKey(t,(t=>{a=t.options.x??0,h=a+(t.options.width??1),e>=a&&e<h&&(!i||(t.options.layer??\"bottom\")===i)&&s(t)}))}}t.DecorationService=c;class l extends n.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=s.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=s.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new r.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new r.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position=\"full\")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;const s=i(2585),r=i(8343);class n{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(const[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=n,t.InstantiationService=class{constructor(){this._services=new n,this._services.set(s.IInstantiationService,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){const i=(0,r.getServiceDependencies)(e).sort(((e,t)=>e.index-t.index)),s=[];for(const t of i){const i=this._services.get(t.id);if(!i)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);s.push(i)}const n=i.length>0?i[0].index:t.length;if(t.length!==n)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${n+1} conflicts with ${t.length} static arguments`);return new e(...[...t,...s])}}},7866:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=i(844),o=i(2585),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let h,c=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange(\"logLevel\",(()=>this._updateLogLevel()))),h=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)\"function\"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?\"\":\"xterm.js: \")+t,...i)}trace(e,...t){this._logLevel<=o.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,e,t)}debug(e,...t){this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,e,t)}info(e,...t){this._logLevel<=o.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,e,t)}warn(e,...t){this._logLevel<=o.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,e,t)}error(e,...t){this._logLevel<=o.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,e,t)}};t.LogService=c=s([r(0,o.IOptionsService)],c),t.setTraceLogger=function(e){h=e},t.traceCall=function(e,t,i){if(\"function\"!=typeof i.value)throw new Error(\"not supported\");const s=i.value;i.value=function(...e){if(h.logLevel!==o.LogLevelEnum.TRACE)return s.apply(this,e);h.trace(`GlyphRenderer#${s.name}(${e.map((e=>JSON.stringify(e))).join(\", \")})`);const t=s.apply(this,e);return h.trace(`GlyphRenderer#${s.name} return`,t),t}}},7302:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;const s=i(8460),r=i(844),n=i(6114);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:\"block\",cursorWidth:1,cursorInactiveStyle:\"outline\",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:\"alt\",fastScrollSensitivity:5,fontFamily:\"courier-new, courier, monospace\",fontSize:15,fontWeight:\"normal\",fontWeightBold:\"bold\",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:\"info\",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:n.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:\" ()[]{}',\\\"`\",altClickMovesCursor:!0,convertEol:!1,termName:\"xterm\",cancelEvents:!1,overviewRulerWidth:0};const o=[\"normal\",\"bold\",\"100\",\"200\",\"300\",\"400\",\"500\",\"600\",\"700\",\"800\",\"900\"];class a extends r.Disposable{constructor(e){super(),this._onOptionChange=this.register(new s.EventEmitter),this.onOptionChange=this._onOptionChange.event;const i={...t.DEFAULT_OPTIONS};for(const t in e)if(t in i)try{const s=e[t];i[t]=this._sanitizeAndValidateOption(t,s)}catch(e){console.error(e)}this.rawOptions=i,this.options={...i},this._setupOptions(),this.register((0,r.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(e,t){return this.onOptionChange((i=>{i===e&&t(this.rawOptions[e])}))}onMultipleOptionChange(e,t){return this.onOptionChange((i=>{-1!==e.indexOf(i)&&t()}))}_setupOptions(){const e=e=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key \"${e}\"`);return this.rawOptions[e]},i=(e,i)=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key \"${e}\"`);i=this._sanitizeAndValidateOption(e,i),this.rawOptions[e]!==i&&(this.rawOptions[e]=i,this._onOptionChange.fire(e))};for(const t in this.rawOptions){const s={get:e.bind(this,t),set:i.bind(this,t)};Object.defineProperty(this.options,t,s)}}_sanitizeAndValidateOption(e,i){switch(e){case\"cursorStyle\":if(i||(i=t.DEFAULT_OPTIONS[e]),!function(e){return\"block\"===e||\"underline\"===e||\"bar\"===e}(i))throw new Error(`\"${i}\" is not a valid value for ${e}`);break;case\"wordSeparator\":i||(i=t.DEFAULT_OPTIONS[e]);break;case\"fontWeight\":case\"fontWeightBold\":if(\"number\"==typeof i&&1<=i&&i<=1e3)break;i=o.includes(i)?i:t.DEFAULT_OPTIONS[e];break;case\"cursorWidth\":i=Math.floor(i);case\"lineHeight\":case\"tabStopWidth\":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case\"minimumContrastRatio\":i=Math.max(1,Math.min(21,Math.round(10*i)/10));break;case\"scrollback\":if((i=Math.min(i,4294967295))<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case\"fastScrollSensitivity\":case\"scrollSensitivity\":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case\"rows\":case\"cols\":if(!i&&0!==i)throw new Error(`${e} must be numeric, value: ${i}`);break;case\"windowsPty\":i=i??{}}return i}}t.OptionsService=a},2660:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.OscLinkService=void 0;const n=i(2585);let o=t.OscLinkService=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){const t=this._bufferService.buffer;if(void 0===e.id){const i=t.addMarker(t.ybase+t.y),s={data:e,id:this._nextId++,lines:[i]};return i.onDispose((()=>this._removeMarkerFromLink(s,i))),this._dataByLinkId.set(s.id,s),s.id}const i=e,s=this._getEntryIdKey(i),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,t.ybase+t.y),r.id;const n=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[n]};return n.onDispose((()=>this._removeMarkerFromLink(o,n))),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){const i=this._dataByLinkId.get(e);if(i&&i.lines.every((e=>e.line!==t))){const e=this._bufferService.buffer.addMarker(t);i.lines.push(e),e.onDispose((()=>this._removeMarkerFromLink(i,e)))}}getLinkData(e){return this._dataByLinkId.get(e)?.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){const i=e.lines.indexOf(t);-1!==i&&(e.lines.splice(i,1),0===e.lines.length&&(void 0!==e.data.id&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};t.OscLinkService=o=s([r(0,n.IBufferService)],o)},8343:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const i=\"di$target\",s=\"di$dependencies\";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[s]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const r=function(e,t,n){if(3!==arguments.length)throw new Error(\"@IServiceName-decorator can only be used to decorate a parameter\");!function(e,t,r){t[i]===t?t[s].push({id:e,index:r}):(t[s]=[{id:e,index:r}],t[i]=t)}(r,e,n)};return r.toString=()=>e,t.serviceRegistry.set(e,r),r}},2585:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const s=i(8343);var r;t.IBufferService=(0,s.createDecorator)(\"BufferService\"),t.ICoreMouseService=(0,s.createDecorator)(\"CoreMouseService\"),t.ICoreService=(0,s.createDecorator)(\"CoreService\"),t.ICharsetService=(0,s.createDecorator)(\"CharsetService\"),t.IInstantiationService=(0,s.createDecorator)(\"InstantiationService\"),function(e){e[e.TRACE=0]=\"TRACE\",e[e.DEBUG=1]=\"DEBUG\",e[e.INFO=2]=\"INFO\",e[e.WARN=3]=\"WARN\",e[e.ERROR=4]=\"ERROR\",e[e.OFF=5]=\"OFF\"}(r||(t.LogLevelEnum=r={})),t.ILogService=(0,s.createDecorator)(\"LogService\"),t.IOptionsService=(0,s.createDecorator)(\"OptionsService\"),t.IOscLinkService=(0,s.createDecorator)(\"OscLinkService\"),t.IUnicodeService=(0,s.createDecorator)(\"UnicodeService\"),t.IDecorationService=(0,s.createDecorator)(\"DecorationService\")},1480:(e,t,i)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.UnicodeService=void 0;const s=i(8460),r=i(225);class n{static extractShouldJoin(e){return 0!=(1&e)}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,t,i=!1){return(16777215&e)<<3|(3&t)<<1|(i?1:0)}constructor(){this._providers=Object.create(null),this._active=\"\",this._onChange=new s.EventEmitter,this.onChange=this._onChange.event;const e=new r.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version \"${e}\"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0,i=0;const s=e.length;for(let r=0;r<s;++r){let o=e.charCodeAt(r);if(55296<=o&&o<=56319){if(++r>=s)return t+this.wcwidth(o);const i=e.charCodeAt(r);56320<=i&&i<=57343?o=1024*(o-55296)+i-56320+65536:t+=this.wcwidth(i)}const a=this.charProperties(o,i);let h=n.extractWidth(a);n.extractShouldJoin(a)&&(h-=n.extractWidth(i)),t+=h,i=a}return t}charProperties(e,t){return this._activeProvider.charProperties(e,t)}}t.UnicodeService=n}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,i),n.exports}var s={};return(()=>{var e=s;Object.defineProperty(e,\"__esModule\",{value:!0}),e.Terminal=void 0;const t=i(9042),r=i(3236),n=i(844),o=i(5741),a=i(8285),h=i(7975),c=i(7090),l=[\"cols\",\"rows\"];class d extends n.Disposable{constructor(e){super(),this._core=this.register(new r.Terminal(e)),this._addonManager=this.register(new o.AddonManager),this._publicOptions={...this._core.options};const t=e=>this._core.options[e],i=(e,t)=>{this._checkReadonlyOptions(e),this._core.options[e]=t};for(const e in this._core.options){const s={get:t.bind(this,e),set:i.bind(this,e)};Object.defineProperty(this._publicOptions,e,s)}}_checkReadonlyOptions(e){if(l.includes(e))throw new Error(`Option \"${e}\" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error(\"You must set the allowProposedApi option to true to use proposed API\")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const e=this._core.coreService.decPrivateModes;let t=\"none\";switch(this._core.coreMouseService.activeProtocol){case\"X10\":t=\"x10\";break;case\"VT200\":t=\"vt200\";break;case\"DRAG\":t=\"drag\";break;case\"ANY\":t=\"any\"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(const t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(\"\\r\\n\",t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return t}_verifyIntegers(...e){for(const t of e)if(t===1/0||isNaN(t)||t%1!=0)throw new Error(\"This API only accepts integers\")}_verifyPositiveIntegers(...e){for(const t of e)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error(\"This API only accepts positive integers\")}}e.Terminal=d})(),s})()));\n//# sourceMappingURL=xterm.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL2xpYi94dGVybS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxlQUFlLEdBQUcsSUFBaUQsb0JBQW9CLEtBQUssYUFBaUksQ0FBQyx1QkFBdUIsYUFBYSxPQUFPLHFCQUFxQiwrQ0FBK0MsbUZBQW1GLDZGQUE2RiwwQkFBMEIsS0FBSyxvREFBb0QsOENBQThDLHFDQUFxQyxxQkFBcUIsV0FBVyxzQ0FBc0MsU0FBUyxnQ0FBZ0MsaUVBQWlFLHdEQUF3RCxxQkFBcUIsNmhCQUE2aEIsWUFBWSxzQkFBc0Isa0hBQWtILGswQkFBazBCLDY5QkFBNjlCLGlFQUFpRSxJQUFJLGNBQWMsWUFBWSxJQUFJLDBCQUEwQixlQUFlLDRRQUE0USxtQkFBbUIsNERBQTRELGNBQWMsNEJBQTRCLFFBQVEseUNBQXlDLGtCQUFrQiwyREFBMkQsaUJBQWlCLDBEQUEwRCxZQUFZLEtBQUssS0FBSyxxSUFBcUksaUxBQWlMLDJCQUEyQixzQkFBc0IsaUhBQWlILDBCQUEwQix5RUFBeUUsbURBQW1ELG1DQUFtQyxVQUFVLDhCQUE4QixRQUFRLHFSQUFxUiw0Q0FBNEMsc0ZBQXNGLEtBQUssNENBQTRDLDREQUE0RCw2VUFBNlUseUJBQXlCLHVDQUF1QyxnQ0FBZ0MsYUFBYSx5R0FBeUcsaUdBQWlHLE9BQU8sd0NBQXdDLElBQUksdUNBQXVDLGlRQUFpUSxpREFBaUQsOENBQThDLHVDQUF1QyxpSEFBaUgsdUNBQXVDLDhDQUE4QyxVQUFVLGdCQUFnQixJQUFJLHlDQUF5QyxzREFBc0Qsd0VBQXdFLGdDQUFnQyxtRUFBbUUsdUNBQXVDLDBDQUEwQyxnQkFBZ0IsZUFBZSxTQUFTLG1GQUFtRiwyRkFBMkYsaUJBQWlCLDZHQUE2Ryw2Q0FBNkMsc0JBQXNCLGtIQUFrSCxLQUFLLDJCQUEyQix5REFBeUQsd0lBQXdJLCtCQUErQixtRUFBbUUsdUZBQXVGLHlCQUF5QixtREFBbUQsNENBQTRDLGdEQUFnRCw0RkFBNEYsWUFBWSxzQkFBc0Isc0RBQXNELHlCQUF5QixrQkFBa0IsK0NBQStDLE1BQU0sOEdBQThHLGNBQWMsY0FBYyxnQ0FBZ0MsZ0JBQWdCLCtCQUErQixvQkFBb0IsaUlBQWlJLGtCQUFrQiw2RUFBNkUsMkRBQTJELEVBQUUsbUJBQW1CLEVBQUUsb0NBQW9DLHNDQUFzQyxTQUFTLG1PQUFtTywwRkFBMEYsc0NBQXNDLG9GQUFvRixvRkFBb0Ysc0VBQXNFLGdCQUFnQixzQ0FBc0MsU0FBUyw4QkFBOEIsZ0JBQWdCLDJCQUEyQixjQUFjLHNEQUFzRCxjQUFjLHFCQUFxQixZQUFZLDBCQUEwQixnQkFBZ0IsdUJBQXVCLGNBQWMsNEJBQTRCLFFBQVEsd0NBQXdDLGNBQWMsc0NBQXNDLFNBQVMsaUZBQWlGLDBCQUEwQixTQUFTLE9BQU8sYUFBYSwwQ0FBMEMsc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLHFCQUFxQix1REFBdUQsNkNBQTZDLGtCQUFrQix5QkFBeUIsdUJBQXVCLDJpQkFBMmlCLGlFQUFpRSxxREFBcUQsNkNBQTZDLGtGQUFrRiw2Q0FBNkMsOFRBQThULG9CQUFvQix1QkFBdUIseUVBQXlFLGFBQWEsb0JBQW9CLHlCQUF5QixZQUFZLFdBQVcsS0FBSyxhQUFhLHVDQUF1Qyw4Q0FBOEMsZ0lBQWdJLGdCQUFnQiw2SEFBNkgscUhBQXFILGlCQUFpQiwyRUFBMkUsZ0JBQWdCLGlDQUFpQyxHQUFHLDZEQUE2RCxTQUFTLHlFQUF5RSw0Q0FBNEMsNENBQTRDLDZCQUE2QiwyQkFBMkIscUJBQXFCLE9BQU8sSUFBSSxnT0FBZ08sR0FBRyw4QkFBOEIsZ0JBQWdCLFlBQVksU0FBUyxLQUFLLGlCQUFpQixpQkFBaUIsV0FBVyxLQUFLLGdJQUFnSSxZQUFZLEtBQUssS0FBSyxhQUFhLGdCQUFnQixNQUFNLFlBQVksZ0NBQWdDLHlDQUF5QywyQ0FBMkMsU0FBUyxZQUFZLElBQUksb0ZBQW9GLFVBQVUsb0RBQW9ELGlDQUFpQyxxR0FBcUcsbUNBQW1DLEtBQUssc0ZBQXNGLE1BQU0sNEJBQTRCLE9BQU8sU0FBUyxtQkFBbUIsc0NBQXNDLGtCQUFrQiw2QkFBNkIseUVBQXlFLDJKQUEySix1QkFBdUIsd1JBQXdSLGtCQUFrQixnQ0FBZ0MsNEZBQTRGLGlGQUFpRixhQUFhLGdKQUFnSixjQUFjLGlGQUFpRiw2Q0FBNkMsZUFBZSxvRUFBb0Usb09BQW9PLFlBQVksZ0VBQWdFLHlNQUF5TSxvRkFBb0YsNkJBQTZCLDRHQUE0Ryx1SUFBdUksNEZBQTRGLDJCQUEyQixLQUFLLGtCQUFrQixxUUFBcVEseUJBQXlCLDBJQUEwSSxnRUFBZ0Usa0JBQWtCLHdRQUF3USxxQkFBcUIsMkpBQTJKLGtCQUFrQiwrQkFBK0IsMkVBQTJFLFlBQVksZ0RBQWdELHFDQUFxQyxPQUFPLDBEQUEwRCxrSEFBa0gsY0FBYyxzQ0FBc0MsU0FBUyx1SkFBdUosc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLDJCQUEyQix5QkFBeUIsOEJBQThCLG1CQUFtQixvRUFBb0Usa0JBQWtCLGtEQUFrRCw0QkFBNEIsaUdBQWlHLG1CQUFtQixZQUFZLElBQUksZ0NBQWdDLDJEQUEyRCxXQUFXLHVCQUF1QixTQUFTLHVCQUF1QixtQkFBbUIsdUJBQXVCLGlEQUFpRCxNQUFNLFNBQVMsT0FBTyxVQUFVLE1BQU0sMkJBQTJCLFNBQVMsaUNBQWlDLG1CQUFtQixnREFBZ0QsU0FBUyxLQUFLLFdBQVcsd0hBQXdILEVBQUUsa0ZBQWtGLE9BQU8sZ0JBQWdCLHlDQUF5QyxFQUFFLDBEQUEwRCxzQkFBc0IsTUFBTSxJQUFJLGNBQWMsT0FBTyxrQkFBa0IsMEVBQTBFLCtGQUErRixjQUFjLHNDQUFzQyxTQUFTLG1EQUFtRCxpQkFBaUIsNEVBQTRFLFVBQVUsK0hBQStILHNCQUFzQiwwTEFBMEwsZUFBZSxtVUFBbVUsZ0JBQWdCLCtJQUErSSw2RUFBNkUsZ0dBQWdHLHVCQUF1QiwyQ0FBMkMsNEJBQTRCLGdCQUFnQixzQ0FBc0MsU0FBUyxvQkFBb0IsbVVBQW1VLCtCQUErQixjQUFjLDJCQUEyQixhQUFhLDBCQUEwQixpQkFBaUIscUNBQXFDLGdCQUFnQixvQ0FBb0MsaUJBQWlCLDhCQUE4QixnQkFBZ0IsRUFBRSxrM0VBQWszRSx1RkFBdUYsSUFBSSxxQkFBcUIsd0NBQXdDLFdBQVcsZ0JBQWdCLCtCQUErQixNQUFNLCtCQUErQixNQUFNLDJCQUEyQixNQUFNLHNCQUFzQixVQUFVLGVBQWUsbUhBQW1ILHFDQUFxQyxTQUFTLEdBQUcsR0FBRyxFQUFFLHFCQUFxQixFQUFFLGdCQUFnQixHQUFHLE1BQU0sMEdBQTBHLEtBQUssVUFBVSwwRUFBMEUsTUFBTSxrREFBa0QsU0FBUyxrREFBa0QsYUFBYSwyQkFBMkIsUUFBUSxvQ0FBb0MsaUJBQWlCLEVBQUUsdUNBQXVDLHVNQUF1TSx3QkFBd0IseUtBQXlLLE9BQU8sNkJBQTZCLHNCQUFzQix5TkFBeU4sZ0JBQWdCLHFIQUFxSCxtRUFBbUUsYUFBYSxnUkFBZ1Isd01BQXdNLGNBQWMsdUZBQXVGLGlFQUFpRSxJQUFJLHdGQUF3RixvT0FBb08sb0lBQW9JLGlGQUFpRixzSEFBc0gseUZBQXlGLHFGQUFxRixJQUFJLFlBQVksdzFCQUF3MUIsUUFBUSw2REFBNkQsc1ZBQXNWLGlXQUFpVyxnREFBZ0QsbW1HQUFtbUcsSUFBSSxvQ0FBb0MsT0FBTyw0Y0FBNGMsNERBQTRELGc4QkFBZzhCLG1FQUFtRSw0Q0FBNEMsZ0VBQWdFLCsvQkFBKy9CLHFPQUFxTyxtR0FBbUcsa0JBQWtCLCtLQUErSyxZQUFZLDRCQUE0QixjQUFjLGdFQUFnRSxlQUFlLFFBQVEsK0JBQStCLHlJQUF5SSxNQUFNLDBDQUEwQyxNQUFNLDRDQUE0QyxNQUFNLHVGQUF1RiwrQ0FBK0MscUJBQXFCLE1BQU0saUJBQWlCLDRFQUE0RSwrRkFBK0YsRUFBRSxTQUFTLHNEQUFzRCxJQUFJLCtOQUErTixnQkFBZ0IsZUFBZSxrQkFBa0IsMERBQTBELDhqQkFBOGpCLFdBQVcsaVRBQWlULDhJQUE4SSxnU0FBZ1MsZ0VBQWdFLGFBQWEsaUZBQWlGLCtCQUErQiwwQ0FBMEMsZ0JBQWdCLHVHQUF1RyxTQUFTLFlBQVksY0FBYyxTQUFTLGlFQUFpRSwyREFBMkQsR0FBRyxXQUFXLG9FQUFvRSx1R0FBdUcsR0FBRyxXQUFXLG1FQUFtRSw2R0FBNkcsR0FBRyxXQUFXLEdBQUcsYUFBYSxzQ0FBc0MscUJBQXFCLHlJQUF5SSxjQUFjLDBIQUEwSCxxQkFBcUIsMkZBQTJGLFNBQVMsa0VBQWtFLCtCQUErQiw4QkFBOEIsaUNBQWlDLGdDQUFnQyx3QkFBd0IseURBQXlELDJCQUEyQixrRkFBa0YsaURBQWlELHFDQUFxQyw2QkFBNkIsa0ZBQWtGLHdFQUF3RSxjQUFjLDJCQUEyQixrQkFBa0IsZ0VBQWdFLHNCQUFzQixxREFBcUQsZUFBZSxvRUFBb0UsY0FBYywyQ0FBMkMsZUFBZSxzRUFBc0UsdUJBQXVCLHNFQUFzRSxPQUFPLHNGQUFzRixNQUFNLG9GQUFvRixpQkFBaUIseUNBQXlDLFlBQVksb0NBQW9DLGlCQUFpQix5Q0FBeUMsWUFBWSwwSEFBMEgsbUVBQW1FLGtKQUFrSixxRUFBcUUsOElBQThJLHFEQUFxRCxvQkFBb0IsMkRBQTJELGdYQUFnWCxxQkFBcUIsMExBQTBMLHdCQUF3Qiw0S0FBNEssMERBQTBELFVBQVUsb0dBQW9HLHNEQUFzRCxzRUFBc0UsYUFBYSxNQUFNLDBEQUEwRCw2RUFBNkUsMENBQTBDLHFEQUFxRCxLQUFLLHdDQUF3QyxVQUFVLG9JQUFvSSxpQkFBaUIsc0hBQXNILGVBQWUsNEhBQTRILGtDQUFrQyw0QkFBNEIsZUFBZSxpRUFBaUUsU0FBUyxZQUFZLDJJQUEySSxrQkFBa0IsbUVBQW1FLFFBQVEsNkNBQTZDLGlNQUFpTSxZQUFZLFlBQVksMEVBQTBFLHFCQUFxQixvQ0FBb0Msc0RBQXNELFFBQVEsd0RBQXdELG9DQUFvQyw2S0FBNkssb0JBQW9CLHlDQUF5QyxlQUFlLDRJQUE0SSx5QkFBeUIsaUNBQWlDLHFMQUFxTCxxQ0FBcUMsU0FBUyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsSUFBSSxNQUFNLGtMQUFrTCxxQ0FBcUMsU0FBUyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsS0FBSyxZQUFZLGtGQUFrRixhQUFhLGNBQWMsc0NBQXNDLFNBQVMseURBQXlELHFCQUFxQiw2R0FBNkcsVUFBVSw2REFBNkQsZUFBZSxvTUFBb00sbUJBQW1CLCtGQUErRiwyQ0FBMkMsNERBQTRELG1GQUFtRixzSEFBc0gsTUFBTSxnQkFBZ0Isa0ZBQWtGLDZFQUE2RSxzRUFBc0Usc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLG9CQUFvQix1REFBdUQsNENBQTRDLDZCQUE2QiwwZkFBMGYsZ0NBQWdDLHkwQkFBeTBCLHNCQUFzQiw2REFBNkQsUUFBUSwwUkFBMFIsWUFBWSw2SkFBNkosb0pBQW9KLGdCQUFnQixtQ0FBbUMsME9BQTBPLHNKQUFzSix5SUFBeUksZ0VBQWdFLHlJQUF5SSxxQkFBcUIsZ0xBQWdMLHdQQUF3UCxpQkFBaUIsa0dBQWtHLDJHQUEyRyxnQ0FBZ0MsRUFBRSxnR0FBZ0csaUNBQWlDLGdDQUFnQyxFQUFFLGdCQUFnQixxR0FBcUcsb0NBQW9DLGtRQUFrUSx1QkFBdUIsNk5BQTZOLDBCQUEwQix3R0FBd0csbUJBQW1CLHlFQUF5RSxnSUFBZ0ksZUFBZSxtQ0FBbUMsZ2tCQUFna0IsZUFBZSxrRUFBa0UsaUNBQWlDLHVYQUF1WCxzQ0FBc0MsZ0NBQWdDLEVBQUUsc0JBQXNCLHFDQUFxQyw0Q0FBNEMseUtBQXlLLHVCQUF1QixXQUFXLDJGQUEyRixZQUFZLElBQUksS0FBSyxpQkFBaUIsZUFBZSw4QkFBOEIsa0RBQWtELHNDQUFzQyxrREFBa0QsT0FBTyxrQ0FBa0Msb0JBQW9CLHFDQUFxQyw0Q0FBNEMsa1NBQWtTLDBCQUEwQiwyREFBMkQsd09BQXdPLG9CQUFvQixvQ0FBb0MsbUJBQW1CLDRDQUE0QyxpSEFBaUgsK0pBQStKLHNCQUFzQiwrQ0FBK0MsbUZBQW1GLDZGQUE2RiwwQkFBMEIsS0FBSyxvREFBb0QsOENBQThDLHFDQUFxQyxxQkFBcUIsV0FBVyxzQ0FBc0MsU0FBUyxvQ0FBb0MsbUNBQW1DLDREQUE0RCx1QkFBdUIsNGdCQUE0Z0IsZ0RBQWdELHFKQUFxSixxRkFBcUYsZ09BQWdPLDBEQUEwRCxJQUFJLGdCQUFnQixrR0FBa0cseURBQXlELElBQUksd0JBQXdCLDZFQUE2RSwyQkFBMkIscUJBQXFCLHlFQUF5RSxrQkFBa0IsbUVBQW1FLGdJQUFnSSwrRUFBK0UsNE9BQTRPLCtDQUErQyxJQUFJLHVCQUF1Qiw2RkFBNkYsaUJBQWlCLCtEQUErRCxrSEFBa0gsS0FBSyxzQ0FBc0MsNEhBQTRILDhDQUE4Qyx3SkFBd0osaUNBQWlDLGFBQWEsdUJBQXVCLG9MQUFvTCxxQkFBcUIsMkZBQTJGLHFJQUFxSSxjQUFjLHNDQUFzQyxTQUFTLGlEQUFpRCxjQUFjLDBFQUEwRSxnQ0FBZ0MsWUFBWSw0RkFBNEYsUUFBUSwyQ0FBMkMsaUJBQWlCLG1DQUFtQyxvSUFBb0ksb0RBQW9ELHNJQUFzSSx1WkFBdVosa0JBQWtCLHNKQUFzSixnRkFBZ0YsY0FBYyxvQkFBb0IseUJBQXlCLGdEQUFnRCwyQkFBMkIsMEdBQTBHLG9CQUFvQiw4RkFBOEYsc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLGlDQUFpQyxnREFBZ0QsK0JBQStCLElBQUksK0JBQStCLElBQUksZ0NBQWdDLHlEQUF5RCxhQUFhLDBEQUEwRCwyQkFBMkIsaWpCQUFpakIsc0NBQXNDLDRDQUE0QyxzS0FBc0ssdUJBQXVCLElBQUksK0JBQStCLG1NQUFtTSxpQ0FBaUMseUpBQXlKLHVHQUF1RyxxREFBcUQsb0pBQW9KLElBQUksb0NBQW9DLGlEQUFpRCxpS0FBaUssMk5BQTJOLHdCQUF3QiwyRUFBMkUscUpBQXFKLDhCQUE4QixrREFBa0QsMElBQTBJLDhCQUE4QiwyQkFBMkIsaUNBQWlDLHNZQUFzWSw4RUFBOEUsMkJBQTJCLDRCQUE0QixZQUFZLHlHQUF5RyxpQ0FBaUMsK0pBQStKLHNCQUFzQiwySkFBMkoseUZBQXlGLHNCQUFzQixtQ0FBbUMsK0RBQStELCtEQUErRCw0REFBNEQsb0JBQW9CLDRXQUE0VyxtQkFBbUIsbU9BQW1PLHVEQUF1RCxNQUFNLHlKQUF5SixzQkFBc0IsK0NBQStDLG1GQUFtRiw2RkFBNkYsMEJBQTBCLEtBQUssb0RBQW9ELDhDQUE4QyxxQ0FBcUMscUJBQXFCLFdBQVcsc0NBQXNDLFNBQVMsNkJBQTZCLG9DQUFvQyxnQ0FBZ0Msa0JBQWtCLHlCQUF5Qix5QkFBeUIsOE1BQThNLGNBQWMsMEJBQTBCLG1CQUFtQiw2TEFBNkwscUJBQXFCLDJGQUEyRiwwREFBMEQsS0FBSyxpQkFBaUIsOEJBQThCLFdBQVcsa0RBQWtELDRCQUE0QiwyREFBMkQsOEJBQThCLDhEQUE4RCx3QkFBd0IsNEVBQTRFLFNBQVMseUVBQXlFLCtDQUErQywrQkFBK0IsTUFBTSxvT0FBb08sS0FBSyxLQUFLLDhCQUE4QixzR0FBc0csMENBQTBDLDRCQUE0Qiw2QkFBNkIsaUJBQWlCLHVCQUF1QiwrQ0FBK0MsMklBQTJJLFNBQVMsNEVBQTRFLEtBQUssNkJBQTZCLHNCQUFzQixrREFBa0QsMlBBQTJQLDRVQUE0VSxzREFBc0QseU5BQXlOLDZEQUE2RCxvSEFBb0gsY0FBYyxrQkFBa0IsdUpBQXVKLDZDQUE2QyxzQ0FBc0MsU0FBUyx5SEFBeUgsYUFBYSxpQkFBaUIsMkpBQTJKLGdCQUFnQixzQ0FBc0MsU0FBUyw4QkFBOEIsZ0JBQWdCLG9CQUFvQiw0REFBNEQsUUFBUSw0QkFBNEIsWUFBWSxnQkFBZ0IsS0FBSyxzREFBc0Qsa0JBQWtCLFNBQVMsUUFBUSx3QkFBd0IsZ0JBQWdCLCtDQUErQyxLQUFLLGtCQUFrQiw4Q0FBOEMsU0FBUyxnQkFBZ0IsbUJBQW1CLHdCQUF3QixpQkFBaUIsS0FBSyxhQUFhLDJLQUEySyx3REFBd0QsZ0JBQWdCLGtCQUFrQixvQkFBb0IsZ0JBQWdCLGdCQUFnQixTQUFTLFlBQVksSUFBSSxTQUFTLFNBQVMsdUNBQXVDLGdDQUFnQyx3REFBd0QsMEVBQTBFLCtDQUErQyxNQUFNLGlDQUFpQyxrQ0FBa0MsTUFBTSxxRUFBcUUsY0FBYyw2Q0FBNkMsY0FBYyxNQUFNLHNEQUFzRCxjQUFjLHNCQUFzQix1QkFBdUIsZ0JBQWdCLGtEQUFrRCxzQkFBc0IsK0NBQStDLG1GQUFtRiw2RkFBNkYsMEJBQTBCLEtBQUssb0RBQW9ELDhDQUE4QyxxQ0FBcUMscUJBQXFCLFdBQVcsc0NBQXNDLFNBQVMsdUJBQXVCLHNOQUFzTixtREFBbUQsdUNBQXVDLG1pREFBbWlELHNOQUFzTiw4U0FBOFMsb0JBQW9CLHFDQUFxQyx5K0JBQXkrQixrREFBa0QsaUNBQWlDLHNCQUFzQixnQ0FBZ0MsMEJBQTBCLGdDQUFnQyw4QkFBOEIsaUtBQWlLLFdBQVcsd0JBQXdCLEdBQUcsR0FBRyxPQUFPLHVCQUF1QixjQUFjLHFCQUFxQixFQUFFLHVKQUF1SixpQ0FBaUMsd0NBQXdDLGtDQUFrQyxJQUFJLGNBQWMsa0pBQWtKLFNBQVMsd0JBQXdCLEdBQUcsS0FBSyxTQUFTLG1CQUFtQixlQUFlLDZDQUE2QyxhQUFhLHlDQUF5QyxJQUFJLG9CQUFvQixpQkFBaUIsRUFBRSxNQUFNLHdCQUF3QixHQUFHLEdBQUcsYUFBYSxTQUFTLCtDQUErQyxRQUFRLHdCQUF3Qix3QkFBd0IsZUFBZSw2Q0FBNkMsRUFBRSx3QkFBd0Isa0JBQWtCLGVBQWUsaURBQWlELEVBQUUsd0JBQXdCLG9CQUFvQixvQkFBb0IsRUFBRSwyQkFBMkIsb0JBQW9CLGlCQUFpQixvQkFBb0IsbUJBQW1CLG9CQUFvQixFQUFFLGlCQUFpQixLQUFLLE9BQU8sK0JBQStCLG1CQUFtQixLQUFLLE9BQU8sb0JBQW9CLG1CQUFtQixLQUFLLE1BQU0sb0JBQW9CLGdCQUFnQixTQUFTLHVCQUF1QixPQUFPLDRCQUE0QixTQUFTLGlCQUFpQixRQUFRLHdCQUF3QixHQUFHLEVBQUUsR0FBRyxHQUFHLDBEQUEwRCxhQUFhLEdBQUcsc0JBQXNCLEVBQUUsd0JBQXdCLEdBQUcsRUFBRSxHQUFHLEdBQUcsb0RBQW9ELGFBQWEsR0FBRyxzQkFBc0IsRUFBRSx3QkFBd0IsR0FBRyxFQUFFLEdBQUcsR0FBRyxzREFBc0QsYUFBYSxHQUFHLHNCQUFzQixFQUFFLHdCQUF3QixHQUFHLEdBQUcsbUNBQW1DLG9CQUFvQixlQUFlLFNBQVMscUJBQXFCLEVBQUUsd0JBQXdCLEdBQUcsR0FBRyw0REFBNEQsb0JBQW9CLGNBQWMsWUFBWSxTQUFTLG9CQUFvQixZQUFZLEVBQUUsd0JBQXdCLEdBQUcsR0FBRyxxQ0FBcUMscUJBQXFCLGVBQWUsc0JBQXNCLEVBQUUsd0JBQXdCLEdBQUcsR0FBRyxpQ0FBaUMsY0FBYyw0Q0FBNEMsU0FBUyxjQUFjLE9BQU8sRUFBRSx3QkFBd0IsR0FBRyxHQUFHLHVDQUF1QyxxQkFBcUIsZUFBZSw0QkFBNEIsMEJBQTBCLFFBQVEsd0JBQXdCLEdBQUcsS0FBSyxvQkFBb0IsUUFBUSxTQUFTLFlBQVksc0JBQXNCLEVBQUUsdUJBQXVCLFVBQVUsR0FBRyxNQUFNLG9CQUFvQixvQkFBb0Isa0NBQWtDLEVBQUUsd0JBQXdCLEdBQUcsR0FBRyxNQUFNLG9CQUFvQixvQkFBb0IsMENBQTBDLEVBQUUsd0NBQXdDLHdCQUF3QixHQUFHLEVBQUUsRUFBRSxLQUFLLFNBQVMsU0FBUyxFQUFFLHdCQUF3QixHQUFHLEVBQUUsRUFBRSxFQUFFLGFBQWEsU0FBUyxxQ0FBcUMsRUFBRSx3QkFBd0IsR0FBRyxFQUFFLEVBQUUsS0FBSyxvQkFBb0IsU0FBUyxFQUFFLE1BQU0sd0JBQXdCLEdBQUcsRUFBRSxFQUFFLDRCQUE0QixTQUFTLG9DQUFvQyxFQUFFLHdCQUF3QixHQUFHLEVBQUUsRUFBRSx5QkFBeUIsYUFBYSxTQUFTLGdFQUFnRSxFQUFFLHdCQUF3QixHQUFHLEVBQUUsRUFBRSw0QkFBNEIsb0JBQW9CLG9CQUFvQix3Q0FBd0MscUJBQXFCLHVFQUF1RSwwQ0FBMEMsRUFBRSxzQ0FBc0MsK0JBQStCLDRFQUE0RSx5QkFBeUIsbUNBQW1DLEtBQUssS0FBSyw0Q0FBNEMsNERBQTRELEtBQUssMkJBQTJCLHlEQUF5RCxrQkFBa0Isa05BQWtOLHdCQUF3Qiw0RUFBNEUsYUFBYSxxRkFBcUYsY0FBYywrR0FBK0csOEJBQThCLHlKQUF5Six3REFBd0Qsc01BQXNNLDJDQUEyQyxnREFBZ0QsTUFBTSxrQkFBa0IsNkVBQTZFLEtBQUssMkRBQTJELG1EQUFtRCxjQUFjLHdGQUF3Riw0Q0FBNEMsb0RBQW9ELHdDQUF3QyxtQ0FBbUMsK0VBQStFLDJDQUEyQyw2TUFBNk0sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLG9CQUFvQix3QkFBd0Isc1NBQXNTLFFBQVEscURBQXFELGdCQUFnQiw4T0FBOE8sWUFBWSxLQUFLLEtBQUssMERBQTBELGdCQUFnQiwySEFBMkgsd0JBQXdCLFVBQVUsRUFBRSxFQUFFLG9CQUFvQixFQUFFLG9CQUFvQixzREFBc0Qsb0JBQW9CLHNEQUFzRCwrQkFBK0Isc0JBQXNCLG1DQUFtQywrRkFBK0YsdU5BQXVOLFlBQVksS0FBSyxLQUFLLDBEQUEwRCxnQkFBZ0IseUpBQXlKLDRLQUE0SyxzQkFBc0IsK0NBQStDLG1GQUFtRiw2RkFBNkYsMEJBQTBCLEtBQUssb0RBQW9ELDhDQUE4QyxxQ0FBcUMscUJBQXFCLFdBQVcsc0NBQXNDLFNBQVMsaUNBQWlDLDhGQUE4RixvQ0FBb0MsMkJBQTJCLG1QQUFtUCw4QkFBOEIscUVBQXFFLGlDQUFpQyw2RkFBNkYsaUNBQWlDLGtCQUFrQiwyQ0FBMkMsNEJBQTRCLFlBQVksSUFBSSxLQUFLLDZCQUE2QixnQ0FBZ0Msa0JBQWtCLDhCQUE4Qiw0QkFBNEIsS0FBSyxrQkFBa0IsMkdBQTJHLGdFQUFnRSxTQUFTLGdFQUFnRSxLQUFLLEdBQUcsMkNBQTJDLGlHQUFpRyx1SEFBdUgsbURBQW1ELFNBQVMscUVBQXFFLDRDQUE0QywrVUFBK1Usb0JBQW9CLDZDQUE2QyxNQUFNLHlDQUF5QyxNQUFNLHFDQUFxQyxNQUFNLGlEQUFpRCxrT0FBa08sMEJBQTBCLGdIQUFnSCw0REFBNEQsR0FBRyxLQUFLLDRCQUE0Qiw4SEFBOEgsdUpBQXVKLGdGQUFnRix3QkFBd0IsTUFBTSxVQUFVLFFBQVEsVUFBVSxRQUFRLGVBQWUsdUVBQXVFLDRQQUE0UCxnU0FBZ1MsMkRBQTJELEVBQUUsR0FBRyxNQUFNLCtGQUErRiw4QkFBOEIsR0FBRyxNQUFNLDZDQUE2Qyx5QkFBeUIsbUJBQW1CLDBEQUEwRCx5TEFBeUwsRUFBRSxHQUFHLE1BQU0sbUVBQW1FLG9FQUFvRSx3QkFBd0IsR0FBRyxNQUFNLGtGQUFrRix5QkFBeUIsR0FBRyw4SEFBOEgsRUFBRSxtQkFBbUIsaUNBQWlDLG1DQUFtQyxxSEFBcUgsa0NBQWtDLE1BQU0sbURBQW1ELDZFQUE2RSx1RkFBdUYsc0NBQXNDLE1BQU0sT0FBTyxxQkFBcUIscUdBQXFHLGVBQWUsMEJBQTBCLDRCQUE0QixFQUFFLEdBQUcsR0FBRyx3QkFBd0Isa0RBQWtELDZPQUE2TyxrQkFBa0IsS0FBSyxXQUFXLE9BQU8sU0FBUyxxTEFBcUwsY0FBYyxzQ0FBc0MsU0FBUyx5Q0FBeUMsaUJBQWlCLHNYQUFzWCxnQ0FBZ0MsOENBQThDLGdDQUFnQyx3RUFBd0UsZ0NBQWdDLHlFQUF5RSxnQ0FBZ0MsMlNBQTJTLFVBQVUsMkVBQTJFLFFBQVEsMkNBQTJDLGlCQUFpQiwyTkFBMk4sZUFBZSxpREFBaUQsRUFBRSwrQ0FBK0MsRUFBRSwrQ0FBK0MsRUFBRSwrQ0FBK0MsRUFBRSxnQkFBZ0IsV0FBVyxRQUFRLGtEQUFrRCw4Q0FBOEMsMkJBQTJCLGdDQUFnQyxRQUFRLHdCQUF3Qix5QkFBeUIsZUFBZSxRQUFRLG1FQUFtRSxTQUFTLGNBQWMsaUNBQWlDLHFEQUFxRCxnQkFBZ0Isc0NBQXNDLFNBQVMsZ0VBQWdFLGdCQUFnQixpSEFBaUgsY0FBYyxjQUFjLDBCQUEwQixjQUFjLDZLQUE2SyxzQ0FBc0MsU0FBUyxnTkFBZ04saURBQWlELFNBQVMsK0RBQStELDBCQUEwQixnREFBZ0QsZ0ZBQWdGLDBCQUEwQixJQUFJLDJDQUEyQyx5QkFBeUIsd0JBQXdCLElBQUkscUNBQXFDLE9BQU8sS0FBSyxRQUFRLGlCQUFpQixPQUFPLGtCQUFrQixTQUFTLFFBQVEsaUJBQWlCLE9BQU8saUJBQWlCLE9BQU8saUNBQWlDLDhDQUE4QyxpREFBaUQsY0FBYyxzQ0FBc0MsU0FBUyxzQ0FBc0MsUUFBUSxjQUFjLGFBQWEsUUFBUSx3T0FBd08sbUJBQW1CLHVHQUF1Ryx3RkFBd0YsdU5BQXVOLHNCQUFzQiwybUJBQTJtQix3Q0FBd0MsY0FBYyxhQUFhLHNDQUFzQyxTQUFTLGlEQUFpRCxlQUFlLDRFQUE0RSxpQkFBaUIsMEdBQTBHLDBCQUEwQixvSkFBb0osd0JBQXdCLHVIQUF1SCx3QkFBd0IsMERBQTBELHlEQUF5RCxpUkFBaVIsNkVBQTZFLHlEQUF5RCxxTEFBcUwsMEJBQTBCLDZCQUE2QixnREFBZ0QscURBQXFELGNBQWMsMlBBQTJQLHFCQUFxQiwrQ0FBK0MsbUZBQW1GLDZGQUE2RiwwQkFBMEIsS0FBSyxvREFBb0QsOENBQThDLHFDQUFxQyxxQkFBcUIsV0FBVyxzQ0FBc0MsU0FBUywyQkFBMkIsbUNBQW1DLG1EQUFtRCxtQkFBbUIsbUNBQW1DLG1CQUFtQixzS0FBc0ssSUFBSSxpRUFBaUUsTUFBTSxxRUFBcUUsMkdBQTJHLFVBQVUsd0NBQXdDLHdIQUF3SCxrREFBa0QsNkJBQTZCLGNBQWMsa0NBQWtDLGtCQUFrQixxQkFBcUIsZ0ZBQWdGLGtCQUFrQixtQkFBbUIseWJBQXliLFVBQVUsK0hBQStILHlDQUF5Qyw4SEFBOEgsa0JBQWtCLGVBQWUsaUhBQWlILG1DQUFtQyxvSUFBb0ksVUFBVSxrQkFBa0IseUNBQXlDLEtBQUssMkNBQTJDLEVBQUUsbUNBQW1DLHFHQUFxRyxzQkFBc0IsK0NBQStDLG1GQUFtRiw2RkFBNkYsMEJBQTBCLEtBQUssb0RBQW9ELDhDQUE4QyxxQ0FBcUMscUJBQXFCLFdBQVcsc0NBQXNDLFNBQVMsbURBQW1ELDRDQUE0QyxnQ0FBZ0MsbUJBQW1CLHdHQUF3RyxhQUFhLGVBQWUsV0FBVyxtQkFBbUIsV0FBVyx5QkFBeUIsVUFBVSxlQUFlLG1CQUFtQixtQ0FBbUMsZ0JBQWdCLGdFQUFnRSxtQkFBbUIsdUNBQXVDLGVBQWUsNEdBQTRHLFlBQVksU0FBUyw0Q0FBNEMsMkNBQTJDLGNBQWMsWUFBWSxnQ0FBZ0MscUZBQXFGLFNBQVMsdUJBQXVCLDhDQUE4QyxnREFBZ0QsNkJBQTZCLHFDQUFxQywwQ0FBMEMsWUFBWSx1QkFBdUIsbUVBQW1FLGlEQUFpRCxVQUFVLHlDQUF5QyxZQUFZLFdBQVcsaUJBQWlCLGdEQUFnRCxtRUFBbUUsaUNBQWlDLHlDQUF5QyxZQUFZLFdBQVcsaUJBQWlCLFNBQVMsNEJBQTRCLHlCQUF5QixTQUFTLElBQUksdUNBQXVDLFNBQVMsaUJBQWlCLFlBQVksZ0NBQWdDLFFBQVEsNkNBQTZDLFlBQVksV0FBVywyQkFBMkIsU0FBUyxpQkFBaUIsK0NBQStDLGlDQUFpQyx3QkFBd0IsTUFBTSxZQUFZLDJCQUEyQixLQUFLLDZFQUE2RSxVQUFVLHVDQUF1Qyw0QkFBNEIsMkJBQTJCLE1BQU0sb0NBQW9DLHlCQUF5QixTQUFTLFlBQVksV0FBVyxLQUFLLGFBQWEsTUFBTSxzQ0FBc0MsbUVBQW1FLGtCQUFrQixLQUFLLHVDQUF1QyxnREFBZ0QsNENBQTRDLDZDQUE2Qyx3REFBd0QsZ0JBQWdCLHNDQUFzQyxTQUFTLDhCQUE4QixtQ0FBbUMsNkJBQTZCLG1CQUFtQixrb0JBQWtvQixhQUFhLG9CQUFvQixjQUFjLDJFQUEyRSxVQUFVLG9DQUFvQyxnQkFBZ0Isa01BQWtNLHVCQUF1Qiw2QkFBNkIsZUFBZSxxYUFBcWEsYUFBYSxvRkFBb0YsMkJBQTJCLGtJQUFrSSwwQkFBMEIsbUpBQW1KLGFBQWEsb1BBQW9QLG9DQUFvQyx5RUFBeUUsZ0JBQWdCLDZMQUE2TCxlQUFlLHNDQUFzQyxTQUFTLCtCQUErQixlQUFlLDZCQUE2QixjQUFjLG1HQUFtRyx3QkFBd0IsbUNBQW1DLGFBQWEsc0NBQXNDLDBDQUEwQyx3QkFBd0Isc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLHdCQUF3QiwwQkFBMEIsMkJBQTJCLGlCQUFpQiw4Q0FBOEMscUJBQXFCLHdLQUF3SywwQkFBMEIscURBQXFELG1OQUFtTixnTEFBZ0wsc0VBQXNFLHNCQUFzQiwrQ0FBK0MsbUZBQW1GLDZGQUE2RiwwQkFBMEIsS0FBSyxvREFBb0QsOENBQThDLHFDQUFxQyxxQkFBcUIsV0FBVyxzQ0FBc0MsU0FBUyx5QkFBeUIsaUVBQWlFLGlEQUFpRCxpQkFBaUIsdUNBQXVDLDZCQUE2QixnWUFBZ1ksNENBQTRDLHV2Q0FBdXZDLGtFQUFrRSxvVEFBb1QsbUNBQW1DLCtCQUErQix1RkFBdUYsWUFBWSxFQUFFLHNGQUFzRiw2QkFBNkIsZ1RBQWdULHNCQUFzQixrSUFBa0ksaUJBQWlCLGtZQUFrWSxjQUFjLHVCQUF1QixjQUFjLG1DQUFtQyxZQUFZLDRDQUE0Qyx3QkFBd0Isd0ZBQXdGLHNCQUFzQixxT0FBcU8sY0FBYyw2QkFBNkIsZUFBZSxnTEFBZ0wsc0JBQXNCLG1EQUFtRCxlQUFlLDhFQUE4RSxvQkFBb0IsdUZBQXVGLCtCQUErQixpSkFBaUosa0JBQWtCLDRLQUE0Syx3QkFBd0IsOENBQThDLGFBQWEsbUNBQW1DLGNBQWMsb0NBQW9DLDhCQUE4QixvSkFBb0osbUJBQW1CLHlDQUF5QyxRQUFRLGdDQUFnQyx3S0FBd0ssc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLDRCQUE0QixzSkFBc0osb0RBQW9ELCtCQUErQixrOUJBQWs5Qix5Q0FBeUMsK1RBQStULGlDQUFpQyxJQUFJLFFBQVEsc0JBQXNCLFVBQVUsdUNBQXVDLFNBQVMsaUJBQWlCLHFCQUFxQix1Q0FBdUMsbUJBQW1CLHFDQUFxQyxtQkFBbUIsd0VBQXdFLDBDQUEwQyxvQkFBb0Isd0VBQXdFLG1CQUFtQix3Q0FBd0Msa0NBQWtDLHdCQUF3QixrREFBa0QsZUFBZSxRQUFRLEtBQUssZ0RBQWdELFdBQVcsS0FBSyxnQ0FBZ0Msc0RBQXNELGlCQUFpQixVQUFVLEtBQUssNkRBQTZELHdDQUF3QyxnQkFBZ0IsMEVBQTBFLDJDQUEyQyxrRUFBa0UsaUJBQWlCLDRHQUE0RyxXQUFXLHNPQUFzTyxXQUFXLCtEQUErRCx1SEFBdUgsRUFBRSx1QkFBdUIsd0dBQXdHLHFEQUFxRCx1QkFBdUIsd0VBQXdFLHVEQUF1RCw2QkFBNkIsb0pBQW9KLHlCQUF5QixpREFBaUQsc0xBQXNMLHNDQUFzQyx3RUFBd0UsWUFBWSwrRUFBK0UsaUJBQWlCLDBPQUEwTyxlQUFlLDBDQUEwQyx5QkFBeUIsaUhBQWlILG1FQUFtRSw4QkFBOEIsaUdBQWlHLHlEQUF5RCxzR0FBc0csd0JBQXdCLGtHQUFrRyxtQkFBbUIsMEZBQTBGLG1CQUFtQix3Q0FBd0Msb0JBQW9CLCtRQUErUSx5QkFBeUIsd1RBQXdULDRCQUE0Qix5VUFBeVUsMkJBQTJCLHFGQUFxRixzQkFBc0IsNE5BQTROLGdDQUFnQyw0RUFBNEUsNEhBQTRILHNCQUFzQiw4REFBOEQsc0JBQXNCLHNDQUFzQywwREFBMEQsc0JBQXNCLDJGQUEyRixvQkFBb0IsbUVBQW1FLGdHQUFnRyxpSEFBaUgsNGRBQTRkLG1DQUFtQywrQ0FBK0MsaURBQWlELG9JQUFvSSw0RkFBNEYsY0FBYyxpRkFBaUYsaUNBQWlDLHFEQUFxRCxFQUFFLG1DQUFtQyw4VEFBOFQsa0JBQWtCLDZDQUE2Qyx3SUFBd0ksd0VBQXdFLDJHQUEyRyxvQ0FBb0MsNEhBQTRILDJDQUEyQyx5Q0FBeUMsK0JBQStCLDhHQUE4RywrUkFBK1IsOEJBQThCLHlHQUF5Ryx5QkFBeUIsNEhBQTRILHlDQUF5QyxRQUFRLFlBQVksS0FBSyxLQUFLLHVEQUF1RCx1REFBdUQsU0FBUyxvQkFBb0IscUxBQXFMLG9CQUFvQixvSEFBb0gsMEJBQTBCLHlDQUF5Qyx1REFBdUQsYUFBYSwrQ0FBK0MsMkRBQTJELGVBQWUsb0JBQW9CLHNCQUFzQixLQUFLLHlCQUF5QixLQUFLLEtBQUssZ0NBQWdDLEtBQUssS0FBSyxrQkFBa0IsMERBQTBELDhCQUE4Qix5QkFBeUIscUVBQXFFLEVBQUUsK0JBQStCLHlDQUF5QyxxRUFBcUUsS0FBSyxxRkFBcUYsRUFBRSwrQkFBK0IseUNBQXlDLHNFQUFzRSxJQUFJLCtEQUErRCxnQ0FBZ0MscUNBQXFDLDRCQUE0QixvRUFBb0Usc0VBQXNFLE1BQU0seUNBQXlDLFlBQVksdUZBQXVGLDRCQUE0Qix5Q0FBeUMsNkNBQTZDLGtCQUFrQixPQUFPLG1CQUFtQixtQkFBbUIsNkJBQTZCLE1BQU0sS0FBSyxVQUFVLDBDQUEwQyxxRkFBcUYsbUJBQW1CLDhCQUE4QixNQUFNLFdBQVcsS0FBSyxVQUFVLHVDQUF1QyxrREFBa0QsMENBQTBDLHdDQUF3QyxnR0FBZ0csd0JBQXdCLGdHQUFnRyxpQkFBaUIsZ0VBQWdFLE9BQU8sY0FBYyxNQUFNLHdDQUF3QywySkFBMkosbUtBQW1LLGdCQUFnQixzQ0FBc0MsU0FBUyx3S0FBd0ssZ0JBQWdCLDhlQUE4ZSxzQkFBc0IsK0NBQStDLG1GQUFtRiw2RkFBNkYsMEJBQTBCLEtBQUssb0RBQW9ELDhDQUE4QyxxQ0FBcUMscUJBQXFCLFdBQVcsc0NBQXNDLFNBQVMsOENBQThDLHNLQUFzSyxnREFBZ0QsMENBQTBDLG1iQUFtYixZQUFZLE1BQU0sS0FBSywwQ0FBMEMsUUFBUSwwREFBMEQsRUFBRSxZQUFZLEtBQUssS0FBSyxlQUFlLFFBQVEsMERBQTBELEVBQUUsU0FBUyxLQUFLLGdEQUFnRCxhQUFhLG9CQUFvQixlQUFlLGlQQUFpUCx3V0FBd1csd1VBQXdVLGNBQWMsRUFBRSxxQkFBcUIsc3JCQUFzckIsV0FBVyxxRkFBcUYsK0RBQStELFdBQVcscUdBQXFHLGsxQkFBazFCLHlEQUF5RCxZQUFZLElBQUksa0VBQWtFLCtIQUErSCxnQkFBZ0IsNkRBQTZELGlCQUFpQix3QkFBd0IsZ0VBQWdFLE1BQU0sZ0VBQWdFLE1BQU0sd0RBQXdELE1BQU0seURBQXlELGlCQUFpQixrQ0FBa0MscURBQXFELGdCQUFnQix1REFBdUQsdUJBQXVCLHFCQUFxQixtSUFBbUksZ0JBQWdCLGtCQUFrQix3QkFBd0IsT0FBTyxTQUFTLCtDQUErQyxnQkFBZ0Isc0NBQXNDLFNBQVMsd0JBQXdCLHlCQUF5Qiw2QkFBNkIsZUFBZSw2WEFBNlgsZ0JBQWdCLHVCQUF1QixpQkFBaUIsOEJBQThCLHFCQUFxQixZQUFZLDBCQUEwQiw4Q0FBOEMsbURBQW1ELGFBQWEsb0JBQW9CLGNBQWMseUNBQXlDLElBQUksMEJBQTBCLGVBQWUsT0FBTyw0Q0FBNEMsU0FBUyx1Q0FBdUMsUUFBUSxpTEFBaUwsVUFBVSw4RkFBOEYsd0lBQXdJLGFBQWEsc0NBQXNDLE1BQU0sMkRBQTJELGlCQUFpQixNQUFNLFlBQVksaUJBQWlCLGdGQUFnRiwyQ0FBMkMsaUJBQWlCLEVBQUUseUJBQXlCLEtBQUssdUZBQXVGLFlBQVksV0FBVyxnREFBZ0Qsd0NBQXdDLHdCQUF3Qix5Q0FBeUMsOENBQThDLDRFQUE0RSw0QkFBNEIsYUFBYSxnR0FBZ0cscUJBQXFCLFlBQVksdUVBQXVFLHlFQUF5RSxRQUFRLGNBQWMsS0FBSyxrQ0FBa0MsMkJBQTJCLDJCQUEyQiw2QkFBNkIsOERBQThELGlCQUFpQixJQUFJLG1DQUFtQyxtQkFBbUIsNENBQTRDLGlCQUFpQixjQUFjLHNDQUFzQyxTQUFTLDJDQUEyQywrQkFBK0IsK0JBQStCLGtEQUFrRCxVQUFVLGNBQWMsc0NBQXNDLFNBQVMsMEZBQTBGLG9CQUFvQixjQUFjLGNBQWMsdUJBQXVCLDBCQUEwQixnQkFBZ0IsMkNBQTJDLGNBQWMsdUJBQXVCLGFBQWEsMEJBQTBCLHNCQUFzQixLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLE1BQU0sS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsZ0NBQWdDLCtCQUErQiw2QkFBNkIsT0FBTyw4Q0FBOEMsb0JBQW9CLGVBQWUsZ0JBQWdCLHlEQUF5RCw2Q0FBNkMsc0JBQXNCLG1DQUFtQyx1QkFBdUIsMEdBQTBHLGdGQUFnRix5Q0FBeUMsd0JBQXdCLHlCQUF5Qix1Q0FBdUMsK0NBQStDLG9EQUFvRCxzQkFBc0IseUJBQXlCLCtCQUErQiwyQkFBMkIsNkNBQTZDLGlDQUFpQywwQkFBMEIscURBQXFELGlCQUFpQixlQUFlLFFBQVEsSUFBSSx5Q0FBeUMscUJBQXFCLDJCQUEyQixzQkFBc0IsRUFBRSw2RUFBNkUsT0FBTyxzQkFBc0IscUJBQXFCLElBQUkscUJBQXFCLGlKQUFpSix5TEFBeUwsY0FBYyxpREFBaUQsY0FBYyx3Q0FBd0MsK0JBQStCLElBQUksWUFBWSxJQUFJLFlBQVksSUFBSSxtQ0FBbUMsdUlBQXVJLGlFQUFpRSxtSEFBbUgsNkhBQTZILE9BQU8sK0JBQStCLGVBQWUsZUFBZSxrQkFBa0IsOEJBQThCLDJLQUEySyxnQ0FBZ0MsbUNBQW1DLHdCQUF3QixlQUFlLGVBQWUsa0JBQWtCLHlDQUF5QyxvR0FBb0csS0FBSyxxQkFBcUIsMkpBQTJKLGlDQUFpQyxrQkFBa0IseUNBQXlDLG9HQUFvRyxLQUFLLDJCQUEyQixzTEFBc0wsaUNBQWlDLHNCQUFzQixnQ0FBZ0MsNEVBQTRFLCtGQUErRix1Q0FBdUMsOERBQThELGFBQWEsUUFBUSxrREFBa0QsUUFBUSxpQkFBaUIsNENBQTRDLFNBQVMsa0RBQWtELFFBQVEsaUJBQWlCLDRDQUE0QyxVQUFVLG9FQUFvRSw0Q0FBNEMsZ0JBQWdCLHFDQUFxQyxnQkFBZ0Isc0NBQXNDLFNBQVMsd0JBQXdCLDBKQUEwSixTQUFTLDZCQUE2QixlQUFlLHlHQUF5RyxvQ0FBb0MsNEJBQTRCLFdBQVcsZ0NBQWdDLFdBQVcsZ0NBQWdDLGNBQWMsbUNBQW1DLGNBQWMsbUNBQW1DLGVBQWUscURBQXFELGVBQWUsaXdGQUFpd0YscUJBQXFCLG1EQUFtRCxrSEFBa0gsbURBQW1ELHFCQUFxQixtREFBbUQsa0hBQWtILHNMQUFzTCxXQUFXLDZCQUE2QixlQUFlLHVLQUF1SyxjQUFjLHVDQUF1QyxZQUFZLGdIQUFnSCxlQUFlLGdDQUFnQyxtQkFBbUIsdUNBQXVDLGVBQWUsa0NBQWtDLGNBQWMsb0RBQW9ELGlCQUFpQixvRkFBb0YsZ0JBQWdCLDJDQUEyQywyQkFBMkIsd0JBQXdCLGtEQUFrRCx3QkFBd0Isa0RBQWtELHdCQUF3QixrREFBa0Qsd0JBQXdCLGtEQUFrRCxTQUFTLHFDQUFxQyxRQUFRLDJJQUEySSxnQ0FBZ0MsU0FBUyxrREFBa0QsdU9BQXVPLG1DQUFtQywyQ0FBMkMsV0FBVyx3SEFBd0gsVUFBVSxzSUFBc0ksNkJBQTZCLEtBQUssaUJBQWlCLGNBQWMsc0NBQXNDLFNBQVMsOEVBQThFLGNBQWMscUNBQXFDLFlBQVksOERBQThELGFBQWEsK0JBQStCLHlCQUF5Qix1RUFBdUUsZUFBZSxVQUFVLFdBQVcsWUFBWSx5QkFBeUIsK0JBQStCLFlBQVksV0FBVywwQkFBMEIsVUFBVSx3Q0FBd0MsaUJBQWlCLDZDQUE2Qyw4QkFBOEIseUJBQXlCLGlDQUFpQywrQkFBK0Isc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLG1EQUFtRCwySkFBMkosb0NBQW9DLFVBQVUsZ0JBQWdCLGlDQUFpQyxVQUFVLDRCQUE0Qiw2QkFBNkIsZ0NBQWdDLGtDQUFrQywwQkFBMEIsMEJBQTBCLDRCQUE0QixpQ0FBaUMsNkJBQTZCLGdDQUFnQyw4QkFBOEIsaUNBQWlDLG1DQUFtQyxzQ0FBc0Msb0NBQW9DLGtDQUFrQyxxQ0FBcUMsK0JBQStCLDhCQUE4Qiw0QkFBNEIsMkJBQTJCLDhCQUE4QixTQUFTLE1BQU0sYUFBYSxvR0FBb0csb0NBQW9DLEdBQUcsUUFBUSw2QkFBNkIsY0FBYyx5QkFBeUIsMERBQTBELGsyREFBazJELG1FQUFtRSw4U0FBOFMsNkNBQTZDLDREQUE0RCxFQUFFLDJDQUEyQyw2Q0FBNkMseUNBQXlDLEVBQUUsK0NBQStDLGlEQUFpRCxPQUFPLEVBQUUsaURBQWlELDZDQUE2Qyw2QkFBNkIsRUFBRSxpREFBaUQseUVBQXlFLDREQUE0RCxFQUFFLCtGQUErRixVQUFVLDREQUE0RCw0QkFBNEIsMkRBQTJELFVBQVUseURBQXlELDRCQUE0Qiw0REFBNEQsVUFBVSwyREFBMkQsVUFBVSw4REFBOEQsVUFBVSwrREFBK0QsVUFBVSwrREFBK0QsVUFBVSxvRUFBb0UsVUFBVSxtRUFBbUUsVUFBVSwrREFBK0QsVUFBVSxpRUFBaUUsVUFBVSxrRUFBa0UscUJBQXFCLGtFQUFrRSxVQUFVLCtEQUErRCxxQkFBcUIsK0RBQStELFVBQVUsNERBQTRELFVBQVUsNERBQTRELFVBQVUsNERBQTRELFVBQVUseURBQXlELFVBQVUsMkRBQTJELFVBQVUsMkRBQTJELFVBQVUsa0VBQWtFLFVBQVUsZ0VBQWdFLFVBQVUsa0VBQWtFLFVBQVUseUVBQXlFLFVBQVUsNEVBQTRFLHFCQUFxQiw4RUFBOEUsVUFBVSxnRUFBZ0UsVUFBVSxrRUFBa0UsVUFBVSwyREFBMkQsVUFBVSx5REFBeUQsVUFBVSx3REFBd0QscUJBQXFCLCtEQUErRCxVQUFVLDBEQUEwRCxxQkFBcUIsaUVBQWlFLFVBQVUsK0RBQStELFVBQVUsNkRBQTZELHFCQUFxQixvRUFBb0UsNEJBQTRCLDBEQUEwRCw0QkFBNEIsK0RBQStELFVBQVUsZ0VBQWdFLFVBQVUsMkRBQTJELFVBQVUsOERBQThELFVBQVUsOERBQThELDBCQUEwQixFQUFFLDhEQUE4RCw0QkFBNEIsOERBQThELDRCQUE0QixnRUFBZ0UsNEJBQTRCLCtEQUErRCx1Q0FBdUMsb3lEQUFveUQsVUFBVSwyREFBMkQsVUFBVSw4REFBOEQsVUFBVSxzREFBc0QsVUFBVSx5REFBeUQsVUFBVSx1REFBdUQsVUFBVSw2REFBNkQsVUFBVSxzRUFBc0UsVUFBVSxrRUFBa0UsVUFBVSwwREFBMEQsVUFBVSwyREFBMkQsVUFBVSwyREFBMkQsVUFBVSwyREFBMkQsUUFBUSxFQUFFLDJEQUEyRCxVQUFVLDJEQUEyRCw0QkFBNEIscUVBQXFFLDRCQUE0QixvQ0FBb0MsMkRBQTJELDBCQUEwQixtRUFBbUUsMEJBQTBCLG1FQUFtRSwwQkFBMEIsbUVBQW1FLDBCQUEwQixtRUFBbUUsMEJBQTBCLG1FQUFtRSwwQkFBMEIsbUVBQW1FLDBCQUEwQixrQ0FBa0MsaUNBQWlDLDRCQUE0QiwwSkFBMEosNEJBQTRCLDJEQUEyRCx3QkFBd0Isd0pBQXdKLDBCQUEwQiw0SUFBNEksK0JBQStCLGdFQUFnRSxHQUFHLG9CQUFvQix3Q0FBd0MsV0FBVyx3REFBd0QsZ0NBQWdDLE1BQU0sb0hBQW9ILHVJQUF1SSxtSEFBbUgsRUFBRSxRQUFRLGlFQUFpRSxzUEFBc1AsV0FBVyxNQUFNLGtMQUFrTCxrSEFBa0gsWUFBWSx5SEFBeUgsa0hBQWtILDhFQUE4RSx3TUFBd00sMklBQTJJLGFBQWEsUUFBUSwyTkFBMk4sa0ZBQWtGLGdMQUFnTCxzQ0FBc0MsWUFBWSxJQUFJLEtBQUssb0JBQW9CLGtDQUFrQyx1QkFBdUIsaURBQWlELG1DQUFtQyxxRkFBcUYsb09BQW9PLFVBQVUsNkJBQTZCLGdnQkFBZ2dCLElBQUksbUNBQW1DLGdEQUFnRCw0QkFBNEIsK0NBQStDLGlEQUFpRCxjQUFjLE9BQU8sc0RBQXNELDJPQUEyTyxJQUFJLHNEQUFzRCxxUEFBcVAsd0JBQXdCLGdNQUFnTSx3QkFBd0IsOERBQThELHdCQUF3Qiw0Q0FBNEMsd0JBQXdCLDhEQUE4RCxPQUFPLHFDQUFxQyxXQUFXLDZtQkFBNm1CLGlCQUFpQixpQ0FBaUMsWUFBWSx3SUFBd0ksZ0dBQWdHLG9PQUFvTyxnS0FBZ0ssb0ZBQW9GLDhGQUE4RixpQ0FBaUMsTUFBTSwyREFBMkQsNkJBQTZCLDRKQUE0SixXQUFXLDRDQUE0QyxVQUFVLDRDQUE0Qyw4Q0FBOEMsa1dBQWtXLGdCQUFnQix5U0FBeVMsaUJBQWlCLHNGQUFzRixZQUFZLDBEQUEwRCxxR0FBcUcsY0FBYyw2REFBNkQsaUdBQWlHLGlCQUFpQiw2Q0FBNkMsa0JBQWtCLGdEQUFnRCxrQkFBa0Isb0RBQW9ELHVCQUF1QixrREFBa0Qsc0JBQXNCLG1FQUFtRSxrQkFBa0IsK0VBQStFLG1CQUFtQixtRUFBbUUscUJBQXFCLDZDQUE2QyxtQkFBbUIsbUVBQW1FLHFCQUFxQiw2Q0FBNkMsY0FBYyxpQ0FBaUMsWUFBWSxvQkFBb0Isb0dBQW9HLEtBQUssb0JBQW9CLDJEQUEyRCxxQkFBcUIsS0FBSyxJQUFJLG9EQUFvRCxTQUFTLHFCQUFxQiwyREFBMkQscUJBQXFCLEtBQUssSUFBSSxvREFBb0QsU0FBUyxtQkFBbUIsb0JBQW9CLG9HQUFvRyxvQ0FBb0MsaUVBQWlFLGdHQUFnRyx5QkFBeUIsaUVBQWlFLHdKQUF3Six1QkFBdUIsTUFBTSxtRUFBbUUsMktBQTJLLDJCQUEyQiwrQkFBK0IsbUNBQW1DLE1BQU0saU9BQWlPLElBQUksNEJBQTRCLG1DQUFtQyxNQUFNLDJFQUEyRSxJQUFJLDRCQUE0QixtQ0FBbUMsTUFBTSx3RUFBd0Usb01BQW9NLFNBQVMsb0JBQW9CLG1FQUFtRSw4SEFBOEgsTUFBTSxtRkFBbUYsTUFBTSxxRkFBcUYsZ0VBQWdFLGVBQWUsdUJBQXVCLHFCQUFxQixvSEFBb0gsNktBQTZLLEtBQUssSUFBSSxvSUFBb0ksNEhBQTRILGVBQWUsdUJBQXVCLHFCQUFxQixvSEFBb0gsc0RBQXNELE1BQU0seUhBQXlILElBQUksa0lBQWtJLDRIQUE0SCxlQUFlLHVCQUF1QixvRkFBb0YsOEtBQThLLGVBQWUsdUJBQXVCLG9GQUFvRiw4S0FBOEssWUFBWSxxQkFBcUIsS0FBSyxJQUFJLDZPQUE2Tyw2R0FBNkcsY0FBYyxxQkFBcUIsS0FBSyxJQUFJLDJPQUEyTyw2R0FBNkcsY0FBYyxvSEFBb0gsdUJBQXVCLHVDQUF1QyxtQ0FBbUMsS0FBSyxpRUFBaUUsd0ZBQXdGLDZHQUE2RyxlQUFlLG9IQUFvSCx1QkFBdUIsdUNBQXVDLG1DQUFtQyxLQUFLLGlFQUFpRSx3RkFBd0YsNkdBQTZHLGlCQUFpQixvSEFBb0gsdUJBQXVCLHVDQUF1QyxtQ0FBbUMsS0FBSyxpRUFBaUUsMkdBQTJHLDZHQUE2RyxpQkFBaUIsb0hBQW9ILHVCQUF1Qix1Q0FBdUMsbUNBQW1DLEtBQUssaUVBQWlFLDJHQUEyRyw2R0FBNkcsY0FBYyx1QkFBdUIsb0ZBQW9GLHNNQUFzTSw0QkFBNEIsd0NBQXdDLGVBQWUsNE1BQTRNLFFBQVEsWUFBWSxXQUFXLEVBQUUsNEJBQTRCLHdCQUF3QixRQUFRLFlBQVksSUFBSSw2QkFBNkIsNEJBQTRCLCtCQUErQix3SUFBd0ksZ0ZBQWdGLGlDQUFpQywwRkFBMEYsSUFBSSxnRkFBZ0YsR0FBRyxpSkFBaUosTUFBTSxTQUFTLE9BQU8sb0VBQW9FLFdBQVcsWUFBWSxXQUFXLHdCQUF3Qiw2Q0FBNkMsTUFBTSxtREFBbUQsU0FBUyxrQkFBa0IsWUFBWSxXQUFXLHdCQUF3QixrRUFBa0UsTUFBTSwrTkFBK04sTUFBTSx5SkFBeUosTUFBTSx3RUFBd0UsTUFBTSx1REFBdUQsTUFBTSxvREFBb0QsTUFBTSwrREFBK0QsTUFBTSx1S0FBdUssTUFBTSxtREFBbUQsTUFBTSx1REFBdUQsTUFBTSx1REFBdUQsTUFBTSxzREFBc0QsTUFBTSx5RkFBeUYsTUFBTSwwRUFBMEUsTUFBTSxzREFBc0QsTUFBTSwwRUFBMEUsTUFBTSw2REFBNkQsTUFBTSw0Q0FBNEMsTUFBTSw0QkFBNEIsTUFBTSw0QkFBNEIsa09BQWtPLE1BQU0sa0VBQWtFLFNBQVMsYUFBYSxZQUFZLFdBQVcsd0JBQXdCLDZDQUE2QyxNQUFNLG1EQUFtRCxTQUFTLG9CQUFvQixZQUFZLFdBQVcsd0JBQXdCLGtFQUFrRSxNQUFNLHdKQUF3SixNQUFNLHdFQUF3RSxNQUFNLHVEQUF1RCxNQUFNLG9EQUFvRCxNQUFNLCtEQUErRCxNQUFNLDhKQUE4SixNQUFNLGlGQUFpRixNQUFNLHlEQUF5RCxNQUFNLDBFQUEwRSxNQUFNLG9FQUFvRSxNQUFNLDBFQUEwRSxNQUFNLDRDQUE0QyxNQUFNLCtCQUErQixNQUFNLG1RQUFtUSxNQUFNLGtFQUFrRSxTQUFTLGlCQUFpQiwyQ0FBMkMsa0NBQWtDLDZDQUE2QyxpQkFBaUIsc0JBQXNCLGVBQWUsOERBQThELHduQkFBd25CLFNBQVMsR0FBRyxTQUFTLEVBQUUsR0FBRyxFQUFFLEVBQUUsUUFBUSxRQUFRLDRCQUE0QiwySEFBMkgscUJBQXFCLHVCQUF1QixZQUFZLEdBQUcsNkNBQTZDLDRCQUE0QixRQUFRLEdBQUcsZ0NBQWdDLHNDQUFzQyxNQUFNLDRDQUE0QyxZQUFZLG9DQUFvQyxZQUFZLFdBQVcsd0JBQXdCLGFBQWEsNkRBQTZELE1BQU0sNkRBQTZELE1BQU0scUlBQXFJLFNBQVMsdUJBQXVCLHlJQUF5SSxnQkFBZ0IsMEtBQTBLLGtCQUFrQixnRkFBZ0YsaUJBQWlCLE1BQU0sMEJBQTBCLFlBQVksSUFBSSxtdENBQW10QyxTQUFTLGdCQUFnQixvQkFBb0IsNkNBQTZDLFNBQVMsTUFBTSxNQUFNLCtEQUErRCxzQ0FBc0MsU0FBUyxHQUFHLEdBQUcsRUFBRSxFQUFFLElBQUksU0FBUyx1QkFBdUIsb0JBQW9CLHdEQUF3RCxzQ0FBc0MsU0FBUyxJQUFJLEdBQUcsRUFBRSxFQUFFLElBQUksU0FBUyxhQUFhLGlrQkFBaWtCLGtCQUFrQix1QkFBdUIsVUFBVSwrREFBK0QsTUFBTSxtRUFBbUUsTUFBTSw2REFBNkQsZUFBZSxxREFBcUQsbUJBQW1CLHVCQUF1QixNQUFNLHNNQUFzTSxpQkFBaUIsMEVBQTBFLGlDQUFpQyxvQkFBb0IsK0VBQStFLE1BQU0seUVBQXlFLE1BQU0sbUVBQW1FLFNBQVMsR0FBRyxFQUFFLDBCQUEwQixFQUFFLHlCQUF5QixJQUFJLE1BQU0sNFBBQTRQLE1BQU0sdUxBQXVMLFNBQVMsY0FBYyxzVEFBc1QsaUJBQWlCLCthQUErYSxZQUFZLDBEQUEwRCxlQUFlLDJCQUEyQiwyQkFBMkIsdUJBQXVCLEdBQUcsS0FBSyxXQUFXLEVBQUUsOEJBQThCLG9CQUFvQixvQkFBb0IsMkJBQTJCLGVBQWUsRUFBRSxLQUFLLDRCQUE0QixXQUFXLHVCQUF1QixJQUFJLDBDQUEwQyxnQkFBZ0Isa0JBQWtCLEdBQUcsNEZBQTRGLHNCQUFzQixrREFBa0QscUJBQXFCLE1BQU0sOENBQThDLDBLQUEwSyxXQUFXLHdDQUF3QyxtQkFBbUIsOElBQThJLDhCQUE4QixrQkFBa0IsR0FBRyxZQUFZLDZDQUE2QywyQ0FBMkMsb0NBQW9DLEdBQUcsS0FBSywrQkFBK0Isd0JBQXdCLDRDQUE0QyxHQUFHLFNBQVMsc0JBQXNCLDBDQUEwQyxzQkFBc0IsMENBQTBDLDBCQUEwQiwwQ0FBMEMsdUJBQXVCLGtDQUFrQyxPQUFPLE1BQU0sdUJBQXVCLEdBQUcsWUFBWSxXQUFXLDJCQUEyQix1QkFBdUIsY0FBYyxlQUFlLEVBQUUsMENBQTBDLGtCQUFrQiw0QkFBNEIsaUJBQWlCLE1BQU0sa0JBQWtCLDRCQUE0QixpQkFBaUIsTUFBTSxzQkFBc0IsNEJBQTRCLGlCQUFpQixNQUFNLFdBQVcsOENBQThDLHdCQUF3Qix5S0FBeUssb0JBQW9CLGdLQUFnSyx1QkFBdUIsa0dBQWtHLGlCQUFpQixvSkFBb0osUUFBUSxxVEFBcVQsU0FBUywyREFBMkQsZUFBZSwrRUFBK0UscUVBQXFFLGdVQUFnVSxtREFBbUQsU0FBUyxZQUFZLDJEQUEyRCxRQUFRLHNHQUFzRyxpQkFBaUIsMklBQTJJLGFBQWEsNENBQTRDLHlCQUF5Qix1QkFBdUIsMkdBQTJHLFlBQVksMkJBQTJCLEtBQUssMEZBQTBGLDhCQUE4QixvRUFBb0UseUJBQXlCLHFFQUFxRSxpREFBaUQsU0FBUyxFQUFFLEVBQUUsRUFBRSxTQUFTLDBCQUEwQixvQ0FBb0MscUJBQXFCLG9CQUFvQixlQUFlLEVBQUUsaUJBQWlCLHFDQUFxQywwQkFBMEIscUNBQXFDLFdBQVcsb0JBQW9CLDJDQUEyQyxpQkFBaUIsWUFBWSxlQUFlLHdDQUF3QyxhQUFhLDhFQUE4RSxhQUFhLG1EQUFtRCxvQkFBb0IseUVBQXlFLGVBQWUsb0RBQW9ELGNBQWMsbUJBQW1CLCtCQUErQixhQUFhLGNBQWMsNkJBQTZCLFdBQVcsc0NBQXNDLFNBQVMsdUhBQXVILGNBQWMseUNBQXlDLFVBQVUsb0JBQW9CLDZDQUE2QywyQkFBMkIsWUFBWSxtQ0FBbUMsY0FBYyxxQ0FBcUMsdUNBQXVDLDJCQUEyQixjQUFjLG9CQUFvQixZQUFZLDJDQUEyQyxhQUFhLDBFQUEwRSxRQUFRLGtCQUFrQixVQUFVLCtEQUErRCw0QkFBNEIsT0FBTyxXQUFXLDBEQUEwRCxPQUFPLG1CQUFtQixjQUFjLHNDQUFzQyxTQUFTLGtDQUFrQyxRQUFRLGNBQWMsY0FBYyxXQUFXLGdDQUFnQyxxQkFBcUIsU0FBUyw2Q0FBNkMsUUFBUSxlQUFlLGlDQUFpQyxjQUFjLGlCQUFpQixlQUFlLDhFQUE4RSxhQUFhLHFDQUFxQyxRQUFRLHFCQUFxQixjQUFjLHNDQUFzQyxTQUFTLGtNQUFrTSxpRkFBaUYsc0pBQXNKLHdCQUF3QixrQ0FBa0MsNkNBQTZDLHdPQUF3TyxjQUFjLHNDQUFzQyxTQUFTLHNCQUFzQixRQUFRLG1CQUFtQixlQUFlLDhCQUE4QixRQUFRLHFCQUFxQixVQUFVLHVHQUF1RyxVQUFVLG1DQUFtQyx3QkFBd0IsdUJBQXVCLHFDQUFxQyw2Q0FBNkMsR0FBRyx3REFBd0QsZ0VBQWdFLFNBQVMsbUJBQW1CLGtIQUFrSCxxQkFBcUIsZ0VBQWdFLGtCQUFrQixrSEFBa0gsa0JBQWtCLGdFQUFnRSxTQUFTLGdDQUFnQyxXQUFXLCtCQUErQixLQUFLLEtBQUssRUFBRSxhQUFhLHFDQUFxQyxhQUFhLEtBQUssV0FBVyxLQUFLLHdDQUF3QyxLQUFLLFNBQVMsT0FBTyxXQUFXLGdCQUFnQixzQ0FBc0MsU0FBUyxpRUFBaUUsZ0JBQWdCLFFBQVEsY0FBYyx5QkFBeUIsV0FBVyxrQ0FBa0MsUUFBUSxLQUFLLDJCQUEyQixtQ0FBbUMsYUFBYSxRQUFRLHdIQUF3SCxTQUFTLHlGQUF5RixZQUFZLDBCQUEwQixvQ0FBb0MsS0FBSywyQkFBMkIsRUFBRSxrTUFBa00sMEJBQTBCLHdCQUF3QixJQUFJLGNBQWMsa0JBQWtCLG9CQUFvQixxREFBcUQsbUJBQW1CLGdCQUFnQixtQkFBbUIscUJBQXFCLE9BQU8sNkNBQTZDLGdHQUFnRyxvQkFBb0IsOEJBQThCLG1CQUFtQix1QkFBdUIsNkJBQTZCLGNBQWMsZ0NBQWdDLE9BQU8sMkNBQTJDLFFBQVEsc0JBQXNCLGdCQUFnQixzQ0FBc0MsU0FBUyx5Q0FBeUMsZUFBZSw0Q0FBNEMsMkhBQTJILHNIQUFzSCxjQUFjLHNDQUFzQyxTQUFTLHlDQUF5QyxRQUFRLGNBQWMsd0NBQXdDLHFCQUFxQixtQ0FBbUMsdUJBQXVCLDRDQUE0QyxRQUFRLGNBQWMsb0VBQW9FLFlBQVksd0JBQXdCLFNBQVMseUJBQXlCLGNBQWMscUZBQXFGLFVBQVUseUJBQXlCLGNBQWMsMEJBQTBCLFdBQVcsd0JBQXdCLFFBQVEseUJBQXlCLGtCQUFrQiwwQkFBMEIsY0FBYyx5QkFBeUIsYUFBYSwwQkFBMEIsaUJBQWlCLHdCQUF3QixpQkFBaUIsd0JBQXdCLFVBQVUsb0NBQW9DLFVBQVUsb0NBQW9DLGNBQWMsa0VBQWtFLGNBQWMsa0VBQWtFLGNBQWMsNkJBQTZCLGNBQWMsNkJBQTZCLHFCQUFxQixnQ0FBZ0MsYUFBYSx5QkFBeUIsK0NBQStDLHNDQUFzQyxrQkFBa0IsYUFBYSx5QkFBeUIsK0NBQStDLHNDQUFzQyxrQkFBa0IsbUJBQW1CLHlCQUF5QixpQkFBaUIsK0RBQStELG9CQUFvQixrR0FBa0csb0VBQW9FLDJEQUEyRCxpQ0FBaUMseUJBQXlCLHdCQUF3QixvSEFBb0gsc0JBQXNCLHlIQUF5SCwwQkFBMEIsZ0xBQWdMLDBCQUEwQixzSEFBc0gsb0JBQW9CLDRFQUE0RSw0QkFBNEIsNkNBQTZDLGtCQUFrQixRQUFRLFVBQVUsMEVBQTBFLFdBQVcsWUFBWSxxQkFBcUIsK0NBQStDLHNCQUFzQixpREFBaUQscUJBQXFCLDBCQUEwQixzQkFBc0IsMkNBQTJDLFlBQVksbUJBQW1CLGFBQWEsY0FBYyw2QkFBNkIsbUNBQW1DLDBCQUEwQiw4QkFBOEIsaURBQWlELHFCQUFxQixvREFBb0QsUUFBUSxvQ0FBb0MsVUFBVSxpREFBaUQsa0JBQWtCLGdCQUFnQixzQ0FBc0MsU0FBUyxvQ0FBb0MsOEZBQThGLDRDQUE0QyxtQkFBbUIsMkhBQTJILCtvQkFBK29CLGVBQWUsaU1BQWlNLHFCQUFxQiwyT0FBMk8sa0JBQWtCLHdFQUF3RSxvQkFBb0IsNERBQTRELHlCQUF5QixxQ0FBcUMsMEJBQTBCLDJCQUEyQixpQ0FBaUMscURBQXFELCtDQUErQyxvQkFBb0IsMEJBQTBCLG9DQUFvQyxpQkFBaUIsS0FBSyxJQUFJLHdDQUF3QyxRQUFRLHlMQUF5TCxZQUFZLDhDQUE4QyxRQUFRLHdDQUF3Qyx5RUFBeUUsNEJBQTRCLG9CQUFvQixzQ0FBc0MsUUFBUSxxQ0FBcUMsSUFBSSxtWUFBbVksMEJBQTBCLElBQUkseUhBQXlILDJCQUEyQiw0QkFBNEIsb0tBQW9LLDhIQUE4SCw2RkFBNkYsb0JBQW9CLHNDQUFzQyx3TEFBd0wsd0JBQXdCLFNBQVMscUZBQXFGLFFBQVEsS0FBSyw4Q0FBOEMsb0ZBQW9GLFNBQVMsdUJBQXVCLG1EQUFtRCwwSkFBMEosYUFBYSxnRkFBZ0YsbUJBQW1CLDRIQUE0SCxlQUFlLHdEQUF3RCw0R0FBNEcsbUNBQW1DLDhDQUE4QyxRQUFRLEtBQUssT0FBTyxzSkFBc0osc0NBQXNDLG9CQUFvQixtREFBbUQsUUFBUSw4QkFBOEIsS0FBSyxLQUFLLHdCQUF3QixzREFBc0QsWUFBWSxLQUFLLGlCQUFpQixvQ0FBb0MsMEJBQTBCLCtCQUErQixvSEFBb0gsTUFBTSw4SUFBOEksV0FBVyxZQUFZLElBQUksS0FBSyxrREFBa0QsVUFBVSxxQkFBcUIsOEJBQThCLDRCQUE0Qix3QkFBd0Isb0JBQW9CLHVCQUF1QixLQUFLLEtBQUssRUFBRSxzQkFBc0IsdUJBQXVCLDhFQUE4RSxJQUFJLHNCQUFzQixxREFBcUQsWUFBWSxXQUFXLGlDQUFpQyxVQUFVLEtBQUssT0FBTyx5TUFBeU0sbURBQW1ELGVBQWUsZ0JBQWdCLFlBQVksb0JBQW9CLDhCQUE4QiwwQkFBMEIscUJBQXFCLHFFQUFxRSxRQUFRLGlEQUFpRCxLQUFLLHVCQUF1Qiw4QkFBOEIsS0FBSyxzQ0FBc0MsWUFBWSxtQ0FBbUMsZ0NBQWdDLDhCQUE4QixRQUFRLHFCQUFxQixLQUFLLHVFQUF1RSw2Q0FBNkMsdUNBQXVDLHVDQUF1QywwQkFBMEIsdUNBQXVDLDBCQUEwQixZQUFZLEtBQUssaUNBQWlDLEtBQUssS0FBSyxxREFBcUQsS0FBSyxPQUFPLGdCQUFnQixpQkFBaUIsNERBQTRELE1BQU0sYUFBYSxnRUFBZ0UsWUFBWSx3QkFBd0IscUJBQXFCLEVBQUUsMENBQTBDLFlBQVksd0JBQXdCLDhCQUE4QixFQUFFLDBDQUEwQyxnQkFBZ0Isb0JBQW9CLFlBQVksc0JBQXNCLHFGQUFxRixvQkFBb0Isa0JBQWtCLG9CQUFvQixZQUFZLHNCQUFzQix5REFBeUQsb0JBQW9CLGFBQWEsd0JBQXdCLDhEQUE4RCxnQ0FBZ0Msd0NBQXdDLG9DQUFvQyx3Q0FBd0MseUZBQXlGLDJEQUEyRCxpQkFBaUIsbUVBQW1FLGdCQUFnQixzQ0FBc0MsU0FBUywwQ0FBMEMsMkNBQTJDLHVEQUF1RCxRQUFRLFFBQVEsc0JBQXNCLGtDQUFrQyx1QkFBdUIsaUNBQWlDLDRGQUE0RixZQUFZLElBQUksc0JBQXNCLGNBQWMsT0FBTyxzQ0FBc0MsbUtBQW1LLFNBQVMsNFBBQTRQLFlBQVksNkJBQTZCLFlBQVksa0NBQWtDLFNBQVMseUJBQXlCLFNBQVMseUJBQXlCLGNBQWMsaUNBQWlDLGdCQUFnQiwwQkFBMEIsb0ZBQW9GLGNBQWMsaUNBQWlDLGFBQWEsMEJBQTBCLHFGQUFxRixlQUFlLG1DQUFtQyxjQUFjLDZMQUE2TCxhQUFhLG9MQUFvTCw4QkFBOEIsNEhBQTRILDBCQUEwQix3QkFBd0IsME9BQTBPLG1CQUFtQixtR0FBbUcsdUJBQXVCLDRCQUE0QixLQUFLLDZDQUE2QyxZQUFZLElBQUksd0JBQXdCLGlCQUFpQixjQUFjLHNCQUFzQixpRkFBaUYsbUJBQW1CLG1DQUFtQyx1QkFBdUIsWUFBWSxrQkFBa0IsNkNBQTZDLHdCQUF3QixjQUFjLHNCQUFzQixpQkFBaUIsY0FBYyxzQkFBc0IsNklBQTZJLHlCQUF5QixpTUFBaU0sbUJBQW1CLDRDQUE0QyxtSkFBbUosbUJBQW1CLHFCQUFxQixZQUFZLDZFQUE2RSxZQUFZLGtCQUFrQix1RkFBdUYsS0FBSywyQkFBMkIsK0JBQStCLHNCQUFzQixJQUFJLHNCQUFzQixLQUFLLG9DQUFvQyxvQ0FBb0MsWUFBWSxXQUFXLEtBQUssMEJBQTBCLCtCQUErQix5Q0FBeUMsWUFBWSxXQUFXLEtBQUssMEJBQTBCLHFDQUFxQyx3REFBd0QsZ0JBQWdCLHVEQUF1RCwyQ0FBMkMsd0NBQXdDLFNBQVMsYUFBYSxpQkFBaUIsY0FBYywyQ0FBMkMsS0FBSyxpQkFBaUIsd0JBQXdCLFlBQVksY0FBYyx1QkFBdUIsWUFBWSwwSEFBMEgsNERBQTRELHVCQUF1QiwyRUFBMkUsMkJBQTJCLFFBQVEsaUJBQWlCLHlEQUF5RCwrREFBK0QsOEVBQThFLG9DQUFvQyxtQkFBbUIsd0JBQXdCLEtBQUssa0VBQWtFLFNBQVMsdUJBQXVCLHdCQUF3QixLQUFLLDhGQUE4RixTQUFTLHlCQUF5QixnQkFBZ0IsbUJBQW1CLEtBQUssS0FBSyxZQUFZLElBQUksdUNBQXVDLHlFQUF5RSxpQkFBaUIsSUFBSSxLQUFLLFlBQVksSUFBSSx1Q0FBdUMseUVBQXlFLGlDQUFpQyxZQUFZLFdBQVcsS0FBSywwQkFBMEIsOENBQThDLDJCQUEyQixtRkFBbUYsU0FBUyxLQUFLLElBQUksRUFBRSwwSEFBMEgsc0JBQXNCLFdBQVcsY0FBYyxZQUFZLHVCQUF1QixlQUFlLGNBQWMsc0NBQXNDLFNBQVMseURBQXlELDBEQUEwRCxRQUFRLElBQUksUUFBUSw0QkFBNEIsVUFBVSxJQUFJLFVBQVUsSUFBSSxvREFBb0QsY0FBYyxrQkFBa0IsaURBQWlELCtFQUErRSxrQkFBa0Isc0NBQXNDLFNBQVMscU5BQXFOLFdBQVcsWUFBWSxhQUFhLEtBQUsscUJBQXFCLHlCQUF5QixtQkFBbUIsS0FBSyx3QkFBd0Isd0JBQXdCLGNBQWMsY0FBYyxTQUFTLDJCQUEyQixLQUFLLFdBQVcsRUFBRSw2Q0FBNkMsc0xBQXNMLHlCQUF5QixRQUFRLHFCQUFxQix3Q0FBd0MsUUFBUSxvREFBb0QsU0FBUyw2Q0FBNkMsV0FBVyxtQkFBbUIsWUFBWSxXQUFXLGNBQWMsZUFBZSx3QkFBd0IsbUJBQW1CLHVCQUF1QixlQUFlLE9BQU8seUJBQXlCLDRDQUE0QyxXQUFXLFlBQVksV0FBVyx3QkFBd0IsWUFBWSxXQUFXLGtCQUFrQixrQkFBa0Isa0RBQWtELDJEQUEyRCxnQkFBZ0IsS0FBSyxJQUFJLEVBQUUsVUFBVSxZQUFZLE1BQU0sS0FBSyxpQkFBaUIsZ0JBQWdCLCtCQUErQixPQUFPLGdCQUFnQixlQUFlLFNBQVMsaUNBQWlDLGdCQUFnQixzQ0FBc0MsU0FBUyxxQkFBcUIsbUNBQW1DLDZCQUE2QixpQkFBaUIsa2FBQWthLFFBQVEsd09BQXdPLG1EQUFtRCx1QkFBdUIsVUFBVSxpQkFBaUIsYUFBYSwwQkFBMEIsYUFBYSxvQkFBb0IsdUJBQXVCLHFNQUFxTSxtREFBbUQsR0FBRyxxQkFBcUIsK0tBQStLLG1EQUFtRCxHQUFHLFlBQVkscUVBQXFFLGlCQUFpQiwwREFBMEQsY0FBYyxlQUFlLHNDQUFzQyxTQUFTLG9CQUFvQixrQ0FBa0MsZ0NBQWdDLGNBQWMsOEdBQThHLHVCQUF1QixjQUFjLDhCQUE4QixhQUFhLDRCQUE0QixXQUFXLHdCQUF3QixXQUFXLHNIQUFzSCxVQUFVLHVHQUF1RyxtQkFBbUIsNENBQTRDLFNBQVMsMkNBQTJDLDhDQUE4QyxnREFBZ0QsdUJBQXVCLGdEQUFnRCxpR0FBaUcsVUFBVSx5RkFBeUYscUdBQXFHLGdCQUFnQixnRUFBZ0UsYUFBYSxhQUFhLHNDQUFzQyxTQUFTLG9rQkFBb2tCLGdCQUFnQixzQ0FBc0MsU0FBUyxrQkFBa0IseUJBQXlCLFFBQVEsU0FBUyxnQkFBZ0IsZUFBZSxnS0FBZ0ssVUFBVSwySUFBMkksWUFBWSxvQ0FBb0MsdUJBQXVCLGNBQWMsc0NBQXNDLFNBQVMsbURBQW1ELCtDQUErQyxzS0FBc0ssZ0JBQWdCLGNBQWMsZUFBZSxRQUFRLG9DQUFvQyw0Q0FBNEMsZ0JBQWdCLGNBQWMsNkJBQTZCLDJDQUEyQyxnQkFBZ0IsY0FBYyxlQUFlLDJDQUEyQyxnQkFBZ0IsY0FBYyxlQUFlLG1EQUFtRCxnQkFBZ0IsY0FBYyxlQUFlLG1DQUFtQyxnQkFBZ0IsY0FBYyxlQUFlLG1EQUFtRCxnQkFBZ0IsY0FBYyw2QkFBNkIsbURBQW1ELGdCQUFnQixjQUFjLGVBQWUsMkNBQTJDLGdCQUFnQixNQUFNLDZCQUE2QixtREFBbUQsZ0JBQWdCLGNBQWMsa0JBQWtCLGlFQUFpRSxnQkFBZ0IsZUFBZSxjQUFjLFVBQVUsc0NBQXNDLFNBQVMsNENBQTRDLDZVQUE2VSxjQUFjLGVBQWUsNlRBQTZULGNBQWMsZUFBZSxRQUFRLE1BQU0sSUFBSSxzQkFBc0IsR0FBRyxnQkFBZ0Isc0NBQXNDLFNBQVMsaUNBQWlDLG1CQUFtQix5SUFBeUksc0dBQXNHLDZCQUE2QixrQkFBa0IsMENBQTBDLFNBQVMsNEJBQTRCLG1FQUFtRSxrQkFBa0IsaVJBQWlSLE1BQU0sc0VBQXNFLE1BQU0sc0JBQXNCLG9CQUFvQixNQUFNLDBCQUEwQixNQUFNLDREQUE0RCxNQUFNLHVFQUF1RSxNQUFNLDJCQUEyQixzQkFBc0IsaUNBQWlDLGdDQUFnQywyQ0FBMkMsTUFBTSwyQkFBMkIsc0JBQXNCLGlDQUFpQyxnQ0FBZ0MsMkNBQTJDLE1BQU0sMkJBQTJCLHNCQUFzQixvQ0FBb0MseUJBQXlCLDBDQUEwQyxNQUFNLDJCQUEyQixzQkFBc0Isb0NBQW9DLHlCQUF5QiwwQ0FBMEMsTUFBTSxzREFBc0QsTUFBTSw2QkFBNkIsMkJBQTJCLE1BQU0sNkJBQTZCLDBDQUEwQyxNQUFNLDZCQUE2QiwwQ0FBMEMsTUFBTSx5REFBeUQsaUNBQWlDLE1BQU0seURBQXlELGlDQUFpQyxNQUFNLDhCQUE4QiwwQkFBMEIsTUFBTSw4QkFBOEIsMEJBQTBCLE1BQU0sOEJBQThCLDBCQUEwQixNQUFNLDhCQUE4QiwwQkFBMEIsTUFBTSwrQkFBK0IsNEJBQTRCLE1BQU0sK0JBQStCLDRCQUE0QixNQUFNLCtCQUErQiw0QkFBNEIsTUFBTSwrQkFBK0IsNEJBQTRCLE1BQU0sK0JBQStCLDRCQUE0QixNQUFNLCtCQUErQiw0QkFBNEIsTUFBTSwrQkFBK0IsNEJBQTRCLE1BQU0sK0JBQStCLDRCQUE0QixNQUFNLHNVQUFzVSxLQUFLLDJDQUEyQyxzQkFBc0Isc0NBQXNDLDRDQUE0Qyw2QkFBNkIsaURBQWlELCtEQUErRCxrREFBa0Qsd0JBQXdCLDhEQUE4RCw0U0FBNFMsVUFBVSxhQUFhLHNDQUFzQyxTQUFTLCtHQUErRyxzSEFBc0gsNENBQTRDLFNBQVMsWUFBWSxJQUFJLEtBQUssV0FBVyxxSEFBcUgsU0FBUyx1QkFBdUIsY0FBYyxnQkFBZ0IsUUFBUSxnQkFBZ0IsWUFBWSxpQkFBaUIsZUFBZSxZQUFZLGtCQUFrQiwwQkFBMEIsbUhBQW1ILFlBQVksSUFBSSxLQUFLLHdCQUF3Qix1QkFBdUIsbUNBQW1DLHdCQUF3QiwyRUFBMkUsMkJBQTJCLFVBQVUscUJBQXFCLGNBQWMsK0JBQStCLFFBQVEscUJBQXFCLFlBQVksaUJBQWlCLGVBQWUsd0JBQXdCLG9CQUFvQiwyQkFBMkIscUNBQXFDLFVBQVUsS0FBSyw4QkFBOEIsWUFBWSwwRUFBMEUsS0FBSyxJQUFJLEVBQUUsaUJBQWlCLDBCQUEwQixTQUFTLE1BQU0sa0NBQWtDLDBJQUEwSSxZQUFZLFFBQVEsS0FBSyxJQUFJLEVBQUUsS0FBSyx3RUFBd0UsMENBQTBDLDJCQUEyQixzQkFBc0IsbUNBQW1DLDBCQUEwQixJQUFJLFNBQVMsMkJBQTJCLElBQUksU0FBUyxTQUFTLHNCQUFzQixtQ0FBbUMsMEJBQTBCLElBQUksU0FBUyxxREFBcUQsMEJBQTBCLElBQUksU0FBUyw4RUFBOEUsU0FBUyxzQkFBc0IsbUNBQW1DLDBCQUEwQixJQUFJLFNBQVMscURBQXFELDBCQUEwQixJQUFJLFNBQVMsdUVBQXVFLDBCQUEwQixJQUFJLFNBQVMscUVBQXFFLFVBQVUsV0FBVyxlQUFlLHNDQUFzQyxTQUFTLHFCQUFxQiw0dkRBQTR2RCxNQUFNLGtCQUFrQixjQUFjLHdCQUF3Qix1UkFBdVIsWUFBWSxXQUFXLGlDQUFpQyxXQUFXLGlEQUFpRCx1QkFBdUIsaUNBQWlDLEtBQUssS0FBSyw2QkFBNkIsS0FBSyx5QkFBeUIsTUFBTSxTQUFTLHVEQUF1RCxvQkFBb0IscUNBQXFDLE1BQU0seUNBQXlDLHNCQUFzQixxREFBcUQsZ0JBQWdCLHNDQUFzQyxTQUFTLHVCQUF1Qix5QkFBeUIsNkJBQTZCLGVBQWUsMFFBQTBRLGtCQUFrQixzQkFBc0IsZUFBZSxnRUFBZ0UsbUlBQW1JLE1BQU0sMkJBQTJCLDRCQUE0QixFQUFFLGdCQUFnQixnQ0FBZ0MsT0FBTywyRkFBMkYsV0FBVyx3R0FBd0csOEJBQThCLDhLQUE4SyxxQ0FBcUMsOEVBQThFLHNCQUFzQixzQkFBc0IsS0FBSyw0Q0FBNEMsRUFBRSxrRUFBa0UsTUFBTSwwRkFBMEYsOENBQThDLFFBQVEsa0NBQWtDLDRDQUE0QyxrRkFBa0Ysb1hBQW9YLGdCQUFnQixjQUFjLHNDQUFzQyxTQUFTLG9DQUFvQyxxREFBcUQsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLG1CQUFtQixnQkFBZ0IsNENBQTRDLFVBQVUsbUJBQW1CLGdCQUFnQiwrQkFBK0Isb0JBQW9CLHlCQUF5QixhQUFhLHNCQUFzQiwwQkFBMEIsYUFBYSxrQkFBa0IsTUFBTSx5Q0FBeUMsOEtBQThLLHFGQUFxRiw2QkFBNkIsWUFBWSxJQUFJLEtBQUssd0NBQXdDLHdDQUF3QyxVQUFVLGdDQUFnQyxlQUFlLGFBQWEsT0FBTyxHQUFHLE9BQU8sR0FBRyxPQUFPLEdBQUcsY0FBYyxzQ0FBc0MsU0FBUyw2Q0FBNkMsZ0JBQWdCLHNDQUFzQyxTQUFTLGtDQUFrQyx3Q0FBd0Msa0JBQWtCLGNBQWMsc0ZBQXNGLGNBQWMseUNBQXlDLFVBQVUseURBQXlELGdCQUFnQixxQkFBcUIsbURBQW1ELDBCQUEwQixrQkFBa0IsYUFBYSxxQkFBcUIsd0JBQXdCLGdCQUFnQiw0Q0FBNEMsc0JBQXNCLGtCQUFrQixRQUFRLHFHQUFxRyxLQUFLLCtCQUErQixtREFBbUQsVUFBVSxvSEFBb0gsS0FBSyw0QkFBNEIsMkNBQTJDLFdBQVcsdURBQXVELEtBQUssK0JBQStCLG1FQUFtRSxlQUFlLHdCQUF3QixzQ0FBc0Msc0hBQXNILEtBQUssMkNBQTJDLGlIQUFpSCxJQUFJLEtBQUssS0FBSyw4SUFBOEksNkNBQTZDLCtCQUErQixxQkFBcUIsaUNBQWlDLGVBQWUsK0RBQStELFFBQVEsaUZBQWlGLFdBQVcsOEhBQThILFVBQVUsU0FBUyx1QkFBdUIsa0pBQWtKLDBEQUEwRCxnQkFBZ0Isc0NBQXNDLFNBQVMsMkVBQTJFLDZDQUE2QyxRQUFRLGVBQWUsNkJBQTZCLGdCQUFnQix3QkFBd0IsYUFBYSwwQkFBMEIsaUJBQWlCLFlBQVksV0FBVyxrQ0FBa0Msb0JBQW9CLFlBQVksb0NBQW9DLCtHQUErRyxvQ0FBb0MsZ0JBQWdCLE1BQU0sK1BBQStQLGl5REFBaXlELEdBQUcsNkJBQTZCLHdDQUF3Qyw4Q0FBOEMseURBQXlELHNMQUFzTCw2QkFBNkIsNkJBQTZCLHlCQUF5QixnT0FBZ08sc0hBQXNILG1LQUFtSyxXQUFXLFdBQVcsMEJBQTBCLFFBQVEsYUFBYSwwRUFBMEUsa0dBQWtHLG9CQUFvQiw2RkFBNkYsWUFBWSx5QkFBeUIsS0FBSyxzQ0FBc0MsNEVBQTRFLFlBQVkscUVBQXFFLDhCQUE4Qiw0REFBNEQsTUFBTSxLQUFLLEtBQUssR0FBRyxvQkFBb0IsaUJBQWlCLFdBQVcsS0FBSyxFQUFFLDBDQUEwQyw0QkFBNEIsbUJBQW1CLHFCQUFxQixvQkFBb0Isd0NBQXdDLHdCQUF3QixxQ0FBcUMseURBQXlELDZCQUE2QixrQkFBa0IsYUFBYSxxQkFBcUIsd0JBQXdCLG1CQUFtQix3R0FBd0cseUJBQXlCLHFCQUFxQix1QkFBdUIseUNBQXlDLHVCQUF1QixzRkFBc0YsNkJBQTZCLHlCQUF5Qix3QkFBd0IsNEJBQTRCLHlEQUF5RCw2QkFBNkIsa0JBQWtCLGFBQWEscUJBQXFCLHdCQUF3QixtQkFBbUIsc0ZBQXNGLHlCQUF5QixxQkFBcUIsd0JBQXdCLDhEQUE4RCxtQkFBbUIsa0RBQWtELHlCQUF5QixzQ0FBc0Msd0JBQXdCLDRDQUE0QyxtQkFBbUIsZ0NBQWdDLHlCQUF5QixzQ0FBc0MsbUJBQW1CLHFCQUFxQixvQkFBb0Isd0NBQXdDLFFBQVEsZ1FBQWdRLDBCQUEwQiw2SUFBNkksYUFBYSxrQkFBa0IsK0dBQStHLEtBQUssNkpBQTZKLGtDQUFrQyxvQ0FBb0MsK0JBQStCLDRCQUE0QixvQ0FBb0MsbUVBQW1FLDZCQUE2QixNQUFNLDRCQUE0Qix3QkFBd0IsbUVBQW1FLDZCQUE2QixNQUFNLCtGQUErRix1R0FBdUcsTUFBTSw0RkFBNEYsdUdBQXVHLGtJQUFrSSxZQUFZLElBQUksS0FBSyxnRkFBZ0Ysc0JBQXNCLEtBQUssa0NBQWtDLGdDQUFnQyxNQUFNLG9DQUFvQyxnQ0FBZ0MsTUFBTSxvQ0FBb0MsZ0NBQWdDLE1BQU0sb0NBQW9DLGdDQUFnQyxPQUFPLE1BQU0sK0dBQStHLE1BQU0sYUFBYSw4QkFBOEIsb0dBQW9HLGVBQWUsTUFBTSxxREFBcUQsc0JBQXNCLEtBQUssb0NBQW9DLG9FQUFvRSxtRkFBbUYsTUFBTSxVQUFVLFVBQVUsaUNBQWlDLE1BQU0scUNBQXFDLE1BQU0scUNBQXFDLGdDQUFnQyxJQUFJLE1BQU0sMENBQTBDLE1BQU0sc0RBQXNELHNCQUFzQixLQUFLLHdCQUF3QixvRUFBb0Usc0VBQXNFLE1BQU0sc0VBQXNFLE1BQU0sOERBQThELE1BQU0sdUJBQXVCLHdEQUF3RCxpQ0FBaUMsTUFBTSxNQUFNLCtGQUErRix1R0FBdUcsTUFBTSwrQkFBK0IsTUFBTSxzQkFBc0Isc0NBQXNDLGlDQUFpQyxNQUFNLE1BQU0sMkZBQTJGLHVHQUF1Ryx5QkFBeUIseUJBQXlCLGdCQUFnQixzQ0FBc0MsU0FBUyxrQ0FBa0MsOEJBQThCLGtCQUFrQixjQUFjLGtHQUFrRyxjQUFjLHlDQUF5QyxxQkFBcUIsbURBQW1ELDBCQUEwQixrQkFBa0IsYUFBYSxxQkFBcUIsd0JBQXdCLGdCQUFnQiw0Q0FBNEMsc0JBQXNCLGtCQUFrQixVQUFVLHlEQUF5RCxnQkFBZ0IsUUFBUSxpR0FBaUcsS0FBSyw0QkFBNEIsK0RBQStELFNBQVMsZ0dBQWdHLEtBQUssNEJBQTRCLHVDQUF1QyxZQUFZLHVEQUF1RCxLQUFLLCtCQUErQixnRUFBZ0UsUUFBUSwyQkFBMkIsV0FBVyxvQkFBb0Isd0JBQXdCLElBQUksRUFBRSxlQUFlLFdBQVcsNEJBQTRCLE1BQU0seUNBQXlDLHNEQUFzRCwwQ0FBMEMsWUFBWSxvQkFBb0IsMEVBQTBFLHNDQUFzQyxzSEFBc0gsS0FBSyx3Q0FBd0MsaUhBQWlILElBQUksS0FBSyxLQUFLLDJJQUEySSx1Q0FBdUMsMkNBQTJDLG9CQUFvQixlQUFlLGdEQUFnRCxRQUFRLGdDQUFnQyxXQUFXLDhIQUE4SCxPQUFPLFNBQVMsdUJBQXVCLHNIQUFzSCwyQ0FBMkMsY0FBYyxzQ0FBc0MsU0FBUyxrQkFBa0IsbUJBQW1CLFFBQVEsb0JBQW9CLGNBQWMsc0JBQXNCLGtDQUFrQyxXQUFXLEtBQUssYUFBYSxnQ0FBZ0MsV0FBVyx3QkFBd0IsbUJBQW1CLFNBQVMsdUJBQXVCLHVIQUF1SCwrTUFBK00sUUFBUSxzREFBc0Qsc1JBQXNSLFVBQVUsV0FBVyxZQUFZLGNBQWMsS0FBSyx1QkFBdUIsNkRBQTZELCtEQUErRCxTQUFTLFFBQVEseUdBQXlHLFlBQVkseUVBQXlFLEtBQUssaUVBQWlFLG1IQUFtSCxlQUFlLGtJQUFrSSxLQUFLLGlFQUFpRSxzRkFBc0YsZ0JBQWdCLCtEQUErRCxnQkFBZ0IsNkRBQTZELGdEQUFnRCxrQkFBa0IsV0FBVyxZQUFZLGNBQWMsS0FBSyw2REFBNkQseUNBQXlDLFNBQVMsWUFBWSxNQUFNLCtIQUErSCw4REFBOEQsZ0NBQWdDLFdBQVcsY0FBYyxzQ0FBc0MsU0FBUyw2Q0FBNkMsY0FBYyxnQkFBZ0IsVUFBVSxnQ0FBZ0MsS0FBSyx1Q0FBdUMsZUFBZSxTQUFTLDRDQUE0Qyw4RUFBOEUsd0JBQXdCLHVCQUF1QixTQUFTLFlBQVksc0JBQXNCLDRCQUE0QixJQUFJLE1BQU0saUZBQWlGLHVFQUF1RSxnQkFBZ0Isc0NBQXNDLFNBQVMseUJBQXlCLHlCQUF5QixzQkFBc0IsaUJBQWlCLDJCQUEyQixRQUFRLDJCQUEyQixjQUFjLHNCQUFzQixjQUFjLHNCQUFzQixnQkFBZ0IsMEJBQTBCLFlBQVksMEJBQTBCLGFBQWEsaUNBQWlDLFdBQVcsa0NBQWtDLHVDQUF1QyxjQUFjLHdCQUF3QixnQkFBZ0Isc0NBQXNDLFNBQVMsNkJBQTZCLGVBQWUsMEJBQTBCLGVBQWUsYUFBYSxnQkFBZ0IsNEJBQTRCLGFBQWEseUJBQXlCLGFBQWEsNEdBQTRHLHlCQUF5Qiw2Q0FBNkMsZ0JBQWdCLHNDQUFzQyxTQUFTLDhCQUE4QixtQ0FBbUMsNkJBQTZCLGVBQWUsMFZBQTBWLGFBQWEsNEVBQTRFLDRFQUE0RSxpRUFBaUUsYUFBYSxvREFBb0QsZ0JBQWdCLHFEQUFxRCx1QkFBdUIsY0FBYyxzQ0FBc0MsU0FBUyx1Q0FBdUMsZUFBZSxhQUFhLHdCQUF3Qiw0REFBNEQsbUJBQW1CLG9DQUFvQyx3QkFBd0Isa0VBQWtFLG1CQUFtQixvQ0FBb0Msd0JBQXdCLDBDQUEwQyxtQkFBbUIsb0NBQW9DLHdCQUF3QiwwQ0FBMEMsbUJBQW1CLHNDQUFzQyxjQUFjLHNDQUFzQyxTQUFTLHlDQUF5QyxlQUFlLGFBQWEsWUFBWSxzQ0FBc0MsZUFBZSwwQ0FBMEMsb0JBQW9CLCtDQUErQyxxQkFBcUIsNENBQTRDLHFCQUFxQiwrQ0FBK0MsbUZBQW1GLDZGQUE2RiwwQkFBMEIsS0FBSyxvREFBb0QsOENBQThDLHFDQUFxQyxxQkFBcUIsV0FBVyxzQ0FBc0MsU0FBUyx1REFBdUQsNkNBQTZDLGtDQUFrQyxpREFBaUQsYUFBYSwyQkFBMkIsZUFBZSw0V0FBNFcsWUFBWSxzRUFBc0UsY0FBYyxFQUFFLFFBQVEsNkNBQTZDLGVBQWUsb0JBQW9CLE1BQU0scUpBQXFKLHFEQUFxRCxvQkFBb0IsdUJBQXVCLGlOQUFpTixLQUFLLGNBQWMsMkRBQTJELHFFQUFxRSxtQkFBbUIsb0JBQW9CLFFBQVEsc0JBQXNCLHdCQUF3QixtREFBbUQsZ0JBQWdCLGlHQUFpRyxnREFBZ0QsY0FBYyxzQ0FBc0MsU0FBUyxpREFBaUQsY0FBYyxnQ0FBZ0MsUUFBUSxvREFBb0QsYUFBYSw2Q0FBNkMsaUJBQWlCLHdEQUF3RCxzQkFBc0IsK0NBQStDLG1GQUFtRiw2RkFBNkYsMEJBQTBCLEtBQUssb0RBQW9ELDhDQUE4QyxxQ0FBcUMscUJBQXFCLFdBQVcsc0NBQXNDLFNBQVMsNEJBQTRCLHNDQUFzQyxNQUFNLHlCQUF5QixNQUFNLG9GQUFvRixRQUFRLG9DQUFvQyxPQUFPLGtEQUFrRCxNQUFNLDJCQUEyQixnQkFBZ0IsOENBQThDLCtJQUErSSwrQkFBK0IsWUFBWSx1Q0FBdUMsNkNBQTZDLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFNBQVMsMkNBQTJDLFlBQVksU0FBUyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLGdCQUFnQiwyQ0FBMkMsWUFBWSxTQUFTLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLElBQUksb0RBQW9ELGlCQUFpQixvRUFBb0UsbUJBQW1CLGtMQUFrTCx1REFBdUQsdURBQXVELGFBQWEsaUJBQWlCLHFCQUFxQixpQkFBaUIscUJBQXFCLHFCQUFxQiw0QkFBNEIsMkJBQTJCLHdEQUF3RCxzQkFBc0IsNERBQTRELEVBQUUsSUFBSSw4RUFBOEUscUJBQXFCLDRCQUE0QixzQkFBc0IsNERBQTRELEVBQUUsSUFBSSx1QkFBdUIsUUFBUSw4RUFBOEUscUJBQXFCLCtGQUErRix3Q0FBd0Msd0NBQXdDLHVEQUF1RCxxSUFBcUksK0RBQStELGlEQUFpRCxtSkFBbUosaUJBQWlCLE9BQU8sa0VBQWtFLG9CQUFvQixNQUFNLHNCQUFzQixzQkFBc0IsS0FBSywwQkFBMEIsMEJBQTBCLHFHQUFxRyxzRUFBc0Usc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLHVCQUF1Qiw4REFBOEQsY0FBYyxtQkFBbUIsOEhBQThILEVBQUUsK0NBQStDLG1CQUFtQix5akJBQXlqQixRQUFRLDhEQUE4RCx5QkFBeUIsdURBQXVELG1DQUFtQyxrTEFBa0wsRUFBRSxxRUFBcUUsc0JBQXNCLHlGQUF5RixFQUFFLDBFQUEwRSx1RkFBdUYsZ0JBQWdCLHNDQUFzQyxTQUFTLDZCQUE2Qiw2Q0FBNkMsWUFBWSw2QkFBNkIsa0JBQWtCLGtDQUFrQyxjQUFjLHlXQUF5VyxzQkFBc0IsOEJBQThCLGlCQUFpQixNQUFNLDhDQUE4QyxrQkFBa0IsZ0ZBQWdGLG9FQUFvRSxTQUFTLFFBQVEsc0RBQXNELDBCQUEwQiw2QkFBNkIsWUFBWSx5SkFBeUosaUNBQWlDLHNDQUFzQyxpR0FBaUcsSUFBSSxzQkFBc0IsNkJBQTZCLGlCQUFpQix3QkFBd0IseUJBQXlCLDZKQUE2Six5QkFBeUIsNkpBQTZKLGVBQWUsK1lBQStZLFVBQVUseUNBQXlDLGdCQUFnQixzQ0FBc0MsU0FBUyxvREFBb0QsMEJBQTBCLFFBQVEsa0JBQWtCLHNCQUFzQixpQ0FBaUMsU0FBUyw2QkFBNkIsZ0NBQWdDLFdBQVcsZ0RBQWdELE9BQU8sNEJBQTRCLE9BQU8sNkJBQTZCLG1EQUFtRCxjQUFjLHNFQUFzRSxnQkFBZ0Isd0JBQXdCLGNBQWMsNkJBQTZCLHVCQUF1Qiw0RUFBNEUsa0JBQWtCLGlDQUFpQywwQ0FBMEMsUUFBUSw2QkFBNkIsS0FBSyxJQUFJLFVBQVUsdUNBQXVDLGdGQUFnRixRQUFRLGNBQWMsS0FBSyxpQkFBaUIsVUFBVSxtQkFBbUIsK0JBQStCLHNCQUFzQiwrQ0FBK0MsbUZBQW1GLDZGQUE2RiwwQkFBMEIsS0FBSyxvREFBb0QsOENBQThDLHFDQUFxQyxxQkFBcUIsV0FBVyxzQ0FBc0MsU0FBUyxtREFBbUQsNEJBQTRCLDJKQUEySixnREFBZ0QsZUFBZSxzQkFBc0IsZUFBZSxtTUFBbU0sa0JBQWtCLDJEQUEyRCwyQkFBMkIsWUFBWSxXQUFXLDJDQUEyQyxZQUFZLDZHQUE2RyxjQUFjLHVKQUF1SixjQUFjLHVKQUF1SixhQUFhLHNKQUFzSixhQUFhLHNKQUFzSixjQUFjLDJKQUEySiwwRUFBMEUsSUFBSSw2QkFBNkIsK0RBQStELGdCQUFnQix1QkFBdUIsNERBQTRELHlCQUF5QixPQUFPLEdBQUcseUNBQXlDLElBQUksd0JBQXdCLGdDQUFnQyxRQUFRLGVBQWUsZ0JBQWdCLHNDQUFzQyxTQUFTLDRDQUE0QyxtQ0FBbUMsbUJBQW1CLDJwQkFBMnBCLDJFQUEyRSw2QkFBNkIsdUJBQXVCLG1HQUFtRyxnRkFBZ0YsNkJBQTZCLGVBQWUsOEdBQThHLFNBQVMsc0JBQXNCLCtCQUErQixhQUFhLDBDQUEwQyxTQUFTLGlCQUFpQixnQ0FBZ0MsS0FBSyw2REFBNkQsdUVBQXVFLElBQUksNEJBQTRCLGdDQUFnQyw2QkFBNkIsR0FBRyw0QkFBNEIsZ0NBQWdDLHVCQUF1QixHQUFHLGdCQUFnQixZQUFZLG9FQUFvRSxFQUFFLElBQUksMEJBQTBCLFdBQVcsb0VBQW9FLEVBQUUsSUFBSSxvSEFBb0gsZ0NBQWdDLFNBQVMsdUNBQXVDLHlDQUF5QyxnQ0FBZ0MsVUFBVSw4REFBOEQsOENBQThDLHdCQUF3QixFQUFFLDZCQUE2QixFQUFFLEdBQUcsTUFBTSxnREFBZ0QsTUFBTSxnRkFBZ0YsdUNBQXVDLE1BQU0sa0NBQWtDLDhEQUE4RCxHQUFHLGdDQUFnQyxFQUFFLEdBQUcsTUFBTSwwRUFBMEUsTUFBTSxvRUFBb0UsR0FBRyxnQ0FBZ0MsRUFBRSxHQUFHLE1BQU0sK0VBQStFLEdBQUcsNENBQTRDLEVBQUUsR0FBRyxNQUFNLHNEQUFzRCxHQUFHLDBCQUEwQixFQUFFLEdBQUcsTUFBTSx5QkFBeUIsVUFBVSxtQkFBbUIsc0JBQXNCLCtDQUErQyxtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMscUNBQXFDLHFCQUFxQixXQUFXLHNDQUFzQyxTQUFTLDBCQUEwQixnQkFBZ0IsNkJBQTZCLGVBQWUsNEZBQTRGLGdCQUFnQixtQ0FBbUMsa0JBQWtCLG9DQUFvQyxvQ0FBb0MsOEZBQThGLGdFQUFnRSxzREFBc0Qsb0NBQW9DLCtEQUErRCwrSEFBK0gsbUJBQW1CLGtDQUFrQyxzQ0FBc0MsZ0RBQWdELG9FQUFvRSxlQUFlLHVDQUF1QyxrQkFBa0IsU0FBUyxPQUFPLEVBQUUsTUFBTSxFQUFFLDJCQUEyQiwyQkFBMkIsNElBQTRJLGdEQUFnRCxjQUFjLHNDQUFzQyxTQUFTLHNFQUFzRSx3Q0FBd0MsK0RBQStELGdCQUFnQiwrQkFBK0IsNERBQTRELHdCQUF3Qiw0R0FBNEcsaUJBQWlCLG9CQUFvQixhQUFhLFVBQVUsYUFBYSxVQUFVLFNBQVMsc0RBQXNELGdCQUFnQixzQ0FBc0MsU0FBUywrTUFBK00sZ0JBQWdCLE1BQU0sc1RBQXNULHNIQUFzSCx3QkFBd0IsbVNBQW1TLGdCQUFnQixzQ0FBc0MsU0FBUywwQkFBMEIseUJBQXlCLFFBQVEsNEJBQTRCLGdCQUFnQix1QkFBdUIsY0FBYywwQkFBMEIsWUFBWSxxQ0FBcUMsdUNBQXVDLGNBQWMseUhBQXlILHdCQUF3QiwrREFBK0QsVUFBVSx5QkFBeUIsZUFBZSxvQ0FBb0Msb0JBQW9CLG9CQUFvQixxQkFBcUIsbUVBQW1FLEVBQUUsSUFBSSw4RUFBOEUsWUFBWSw2QkFBNkIsV0FBVyx1Q0FBdUMsc0JBQXNCLFlBQVksaUJBQWlCLFlBQVksSUFBSSxLQUFLLHNCQUFzQix1QkFBdUIsbUNBQW1DLHdCQUF3QixxRUFBcUUsaUNBQWlDLHdCQUF3Qix3REFBd0QsU0FBUyxvQkFBb0IsaURBQWlELG9CQUFvQixNQUFNLGNBQWMsV0FBVywrQkFBK0IsWUFBWSxZQUFZLG9EQUFvRCxTQUFTLFlBQVksUUFBUSxzQ0FBc0MsU0FBUyxvQkFBb0IsNkZBQTZGLDZCQUE2QixlQUFlLDhIQUE4SCx1QkFBdUIsMkNBQTJDLHVEQUF1RCxtQ0FBbUMsU0FBUyx1Q0FBdUMsZ0RBQWdELHlCQUF5Qiw0Q0FBNEMsRUFBRSx1Q0FBdUMsb0JBQW9CLGtKQUFrSixhQUFhLHlCQUF5QixlQUFlLDJCQUEyQixtQkFBbUIsK0JBQStCLGFBQWEseUJBQXlCLFlBQVksd0JBQXdCLGlCQUFpQiw2QkFBNkIsZUFBZSwyQkFBMkIsZUFBZSwyQkFBMkIsZUFBZSwyQkFBMkIsd0JBQXdCLG9DQUFvQyxvQkFBb0IsZ0NBQWdDLG9CQUFvQixnQ0FBZ0MsY0FBYywwQkFBMEIsYUFBYSw2RUFBNkUsY0FBYyw2REFBNkQsZUFBZSwyQkFBMkIsV0FBVyx1QkFBdUIsV0FBVyx1QkFBdUIsYUFBYSxxR0FBcUcsY0FBYyxtREFBbUQsWUFBWSwrQ0FBK0MsYUFBYSxtREFBbUQsa0JBQWtCLE1BQU0sc0JBQXNCLE1BQU0sb0JBQW9CLE1BQU0sa0JBQWtCLE9BQU8sZ1VBQWdVLGNBQWMsMkJBQTJCLGVBQWUsNkNBQTZDLE9BQU8sa0JBQWtCLFFBQVEsbUJBQW1CLGNBQWMsc0JBQXNCLFlBQVksaURBQWlELFFBQVEsbUJBQW1CLCtCQUErQiwwQ0FBMEMsaUNBQWlDLDRDQUE0Qyx3QkFBd0IsMENBQTBDLDJCQUEyQixzRUFBc0UsNkJBQTZCLGlFQUFpRSxvQkFBb0IsNERBQTRELHNCQUFzQiw2SEFBNkgsZUFBZSxpQ0FBaUMsY0FBYyxxREFBcUQsZUFBZSxpQ0FBaUMsdUJBQXVCLHlDQUF5QyxpQkFBaUIsNEJBQTRCLFlBQVksdUJBQXVCLGlCQUFpQixzREFBc0QsVUFBVSxnQkFBZ0IsZUFBZSxrREFBa0QsZUFBZSxrREFBa0QsY0FBYyx5QkFBeUIsaUJBQWlCLDRCQUE0QixnQkFBZ0IsbURBQW1ELFFBQVEsbUJBQW1CLFdBQVcsc0JBQXNCLGFBQWEsK0NBQStDLFNBQVMsb0JBQW9CLGFBQWEsa0RBQWtELFFBQVEsbUJBQW1CLG9CQUFvQiwrQkFBK0IsYUFBYSxxQ0FBcUMscUJBQXFCLFNBQVMsc0JBQXNCLGdHQUFnRyw4QkFBOEIsb0hBQW9ILGFBQWEsTUFBTTtBQUMvNzBSIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vbGliL3h0ZXJtLmpzPzgxMjIiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKGUsdCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9dCgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSx0KTtlbHNle3ZhciBpPXQoKTtmb3IodmFyIHMgaW4gaSkoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0czplKVtzXT1pW3NdfX0oZ2xvYmFsVGhpcywoKCk9PigoKT0+e1widXNlIHN0cmljdFwiO3ZhciBlPXs0NTY3OmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxvPW48Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbz1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihvPShuPDM/cihvKTpuPjM/cih0LGksbyk6cih0LGkpKXx8byk7cmV0dXJuIG4+MyYmbyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxvKSxvfSxyPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQWNjZXNzaWJpbGl0eU1hbmFnZXI9dm9pZCAwO2NvbnN0IG49aSg5MDQyKSxvPWkoOTkyNCksYT1pKDg0NCksaD1pKDQ3MjUpLGM9aSgyNTg1KSxsPWkoMzY1Nik7bGV0IGQ9dC5BY2Nlc3NpYmlsaXR5TWFuYWdlcj1jbGFzcyBleHRlbmRzIGEuRGlzcG9zYWJsZXtjb25zdHJ1Y3RvcihlLHQsaSxzKXtzdXBlcigpLHRoaXMuX3Rlcm1pbmFsPWUsdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlPWksdGhpcy5fcmVuZGVyU2VydmljZT1zLHRoaXMuX3Jvd0NvbHVtbnM9bmV3IFdlYWtNYXAsdGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudD0wLHRoaXMuX2NoYXJzVG9Db25zdW1lPVtdLHRoaXMuX2NoYXJzVG9Bbm5vdW5jZT1cIlwiLHRoaXMuX2FjY2Vzc2liaWxpdHlDb250YWluZXI9dGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLm1haW5Eb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX2FjY2Vzc2liaWxpdHlDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInh0ZXJtLWFjY2Vzc2liaWxpdHlcIiksdGhpcy5fcm93Q29udGFpbmVyPXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5tYWluRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9yb3dDb250YWluZXIuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwibGlzdFwiKSx0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInh0ZXJtLWFjY2Vzc2liaWxpdHktdHJlZVwiKSx0aGlzLl9yb3dFbGVtZW50cz1bXTtmb3IobGV0IGU9MDtlPHRoaXMuX3Rlcm1pbmFsLnJvd3M7ZSsrKXRoaXMuX3Jvd0VsZW1lbnRzW2VdPXRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpLHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yb3dFbGVtZW50c1tlXSk7aWYodGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyPWU9PnRoaXMuX2hhbmRsZUJvdW5kYXJ5Rm9jdXMoZSwwKSx0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXI9ZT0+dGhpcy5faGFuZGxlQm91bmRhcnlGb2N1cyhlLDEpLHRoaXMuX3Jvd0VsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksdGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoLTFdLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCksdGhpcy5fYWNjZXNzaWJpbGl0eUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yb3dDb250YWluZXIpLHRoaXMuX2xpdmVSZWdpb249dGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLm1haW5Eb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX2xpdmVSZWdpb24uY2xhc3NMaXN0LmFkZChcImxpdmUtcmVnaW9uXCIpLHRoaXMuX2xpdmVSZWdpb24uc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsXCJhc3NlcnRpdmVcIiksdGhpcy5fYWNjZXNzaWJpbGl0eUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9saXZlUmVnaW9uKSx0aGlzLl9saXZlUmVnaW9uRGVib3VuY2VyPXRoaXMucmVnaXN0ZXIobmV3IG8uVGltZUJhc2VkRGVib3VuY2VyKHRoaXMuX3JlbmRlclJvd3MuYmluZCh0aGlzKSkpLCF0aGlzLl90ZXJtaW5hbC5lbGVtZW50KXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBlbmFibGUgYWNjZXNzaWJpbGl0eSBiZWZvcmUgVGVybWluYWwub3BlblwiKTt0aGlzLl90ZXJtaW5hbC5lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIix0aGlzLl9hY2Nlc3NpYmlsaXR5Q29udGFpbmVyKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uUmVzaXplKChlPT50aGlzLl9oYW5kbGVSZXNpemUoZS5yb3dzKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uUmVuZGVyKChlPT50aGlzLl9yZWZyZXNoUm93cyhlLnN0YXJ0LGUuZW5kKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uU2Nyb2xsKCgoKT0+dGhpcy5fcmVmcmVzaFJvd3MoKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uQTExeUNoYXIoKGU9PnRoaXMuX2hhbmRsZUNoYXIoZSkpKSksdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbkxpbmVGZWVkKCgoKT0+dGhpcy5faGFuZGxlQ2hhcihcIlxcblwiKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uQTExeVRhYigoZT0+dGhpcy5faGFuZGxlVGFiKGUpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25LZXkoKGU9PnRoaXMuX2hhbmRsZUtleShlLmtleSkpKSksdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbkJsdXIoKCgpPT50aGlzLl9jbGVhckxpdmVSZWdpb24oKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKCgoKT0+dGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKSksdGhpcy5yZWdpc3RlcigoMCxsLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikoZG9jdW1lbnQsXCJzZWxlY3Rpb25jaGFuZ2VcIiwoKCk9PnRoaXMuX2hhbmRsZVNlbGVjdGlvbkNoYW5nZSgpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLm9uRHByQ2hhbmdlKCgoKT0+dGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKSksdGhpcy5fcmVmcmVzaFJvd3MoKSx0aGlzLnJlZ2lzdGVyKCgwLGEudG9EaXNwb3NhYmxlKSgoKCk9Pnt0aGlzLl9hY2Nlc3NpYmlsaXR5Q29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aD0wfSkpKX1faGFuZGxlVGFiKGUpe2ZvcihsZXQgdD0wO3Q8ZTt0KyspdGhpcy5faGFuZGxlQ2hhcihcIiBcIil9X2hhbmRsZUNoYXIoZSl7dGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudDwyMSYmKHRoaXMuX2NoYXJzVG9Db25zdW1lLmxlbmd0aD4wP3RoaXMuX2NoYXJzVG9Db25zdW1lLnNoaWZ0KCkhPT1lJiYodGhpcy5fY2hhcnNUb0Fubm91bmNlKz1lKTp0aGlzLl9jaGFyc1RvQW5ub3VuY2UrPWUsXCJcXG5cIj09PWUmJih0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50KyssMjE9PT10aGlzLl9saXZlUmVnaW9uTGluZUNvdW50JiYodGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCs9bi50b29NdWNoT3V0cHV0KSkpfV9jbGVhckxpdmVSZWdpb24oKXt0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50PVwiXCIsdGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudD0wfV9oYW5kbGVLZXkoZSl7dGhpcy5fY2xlYXJMaXZlUmVnaW9uKCksL1xccHtDb250cm9sfS91LnRlc3QoZSl8fHRoaXMuX2NoYXJzVG9Db25zdW1lLnB1c2goZSl9X3JlZnJlc2hSb3dzKGUsdCl7dGhpcy5fbGl2ZVJlZ2lvbkRlYm91bmNlci5yZWZyZXNoKGUsdCx0aGlzLl90ZXJtaW5hbC5yb3dzKX1fcmVuZGVyUm93cyhlLHQpe2NvbnN0IGk9dGhpcy5fdGVybWluYWwuYnVmZmVyLHM9aS5saW5lcy5sZW5ndGgudG9TdHJpbmcoKTtmb3IobGV0IHI9ZTtyPD10O3IrKyl7Y29uc3QgZT1pLmxpbmVzLmdldChpLnlkaXNwK3IpLHQ9W10sbj1lPy50cmFuc2xhdGVUb1N0cmluZyghMCx2b2lkIDAsdm9pZCAwLHQpfHxcIlwiLG89KGkueWRpc3ArcisxKS50b1N0cmluZygpLGE9dGhpcy5fcm93RWxlbWVudHNbcl07YSYmKDA9PT1uLmxlbmd0aD8oYS5pbm5lclRleHQ9XCLCoFwiLHRoaXMuX3Jvd0NvbHVtbnMuc2V0KGEsWzAsMV0pKTooYS50ZXh0Q29udGVudD1uLHRoaXMuX3Jvd0NvbHVtbnMuc2V0KGEsdCkpLGEuc2V0QXR0cmlidXRlKFwiYXJpYS1wb3NpbnNldFwiLG8pLGEuc2V0QXR0cmlidXRlKFwiYXJpYS1zZXRzaXplXCIscykpfXRoaXMuX2Fubm91bmNlQ2hhcmFjdGVycygpfV9hbm5vdW5jZUNoYXJhY3RlcnMoKXswIT09dGhpcy5fY2hhcnNUb0Fubm91bmNlLmxlbmd0aCYmKHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQrPXRoaXMuX2NoYXJzVG9Bbm5vdW5jZSx0aGlzLl9jaGFyc1RvQW5ub3VuY2U9XCJcIil9X2hhbmRsZUJvdW5kYXJ5Rm9jdXMoZSx0KXtjb25zdCBpPWUudGFyZ2V0LHM9dGhpcy5fcm93RWxlbWVudHNbMD09PXQ/MTp0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMl07aWYoaS5nZXRBdHRyaWJ1dGUoXCJhcmlhLXBvc2luc2V0XCIpPT09KDA9PT10P1wiMVwiOmAke3RoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5saW5lcy5sZW5ndGh9YCkpcmV0dXJuO2lmKGUucmVsYXRlZFRhcmdldCE9PXMpcmV0dXJuO2xldCByLG47aWYoMD09PXQ/KHI9aSxuPXRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpLHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZChuKSk6KHI9dGhpcy5fcm93RWxlbWVudHMuc2hpZnQoKSxuPWksdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHIpKSxyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpLDA9PT10KXtjb25zdCBlPXRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO3RoaXMuX3Jvd0VsZW1lbnRzLnVuc2hpZnQoZSksdGhpcy5fcm93Q29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIixlKX1lbHNle2NvbnN0IGU9dGhpcy5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCk7dGhpcy5fcm93RWxlbWVudHMucHVzaChlKSx0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQoZSl9dGhpcy5fcm93RWxlbWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKSx0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKSx0aGlzLl90ZXJtaW5hbC5zY3JvbGxMaW5lcygwPT09dD8tMToxKSx0aGlzLl9yb3dFbGVtZW50c1swPT09dD8xOnRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aC0yXS5mb2N1cygpLGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfV9oYW5kbGVTZWxlY3Rpb25DaGFuZ2UoKXtpZigwPT09dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoKXJldHVybjtjb25zdCBlPWRvY3VtZW50LmdldFNlbGVjdGlvbigpO2lmKCFlKXJldHVybjtpZihlLmlzQ29sbGFwc2VkKXJldHVybiB2b2lkKHRoaXMuX3Jvd0NvbnRhaW5lci5jb250YWlucyhlLmFuY2hvck5vZGUpJiZ0aGlzLl90ZXJtaW5hbC5jbGVhclNlbGVjdGlvbigpKTtpZighZS5hbmNob3JOb2RlfHwhZS5mb2N1c05vZGUpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcImFuY2hvck5vZGUgYW5kL29yIGZvY3VzTm9kZSBhcmUgbnVsbFwiKTtsZXQgdD17bm9kZTplLmFuY2hvck5vZGUsb2Zmc2V0OmUuYW5jaG9yT2Zmc2V0fSxpPXtub2RlOmUuZm9jdXNOb2RlLG9mZnNldDplLmZvY3VzT2Zmc2V0fTtpZigodC5ub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGkubm9kZSkmTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9QUkVDRURJTkd8fHQubm9kZT09PWkubm9kZSYmdC5vZmZzZXQ+aS5vZmZzZXQpJiYoW3QsaV09W2ksdF0pLHQubm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLl9yb3dFbGVtZW50c1swXSkmKE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fQ09OVEFJTkVEX0JZfE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fRk9MTE9XSU5HKSYmKHQ9e25vZGU6dGhpcy5fcm93RWxlbWVudHNbMF0uY2hpbGROb2Rlc1swXSxvZmZzZXQ6MH0pLCF0aGlzLl9yb3dDb250YWluZXIuY29udGFpbnModC5ub2RlKSlyZXR1cm47Y29uc3Qgcz10aGlzLl9yb3dFbGVtZW50cy5zbGljZSgtMSlbMF07aWYoaS5ub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHMpJihOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0NPTlRBSU5FRF9CWXxOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX1BSRUNFRElORykmJihpPXtub2RlOnMsb2Zmc2V0OnMudGV4dENvbnRlbnQ/Lmxlbmd0aD8/MH0pLCF0aGlzLl9yb3dDb250YWluZXIuY29udGFpbnMoaS5ub2RlKSlyZXR1cm47Y29uc3Qgcj0oe25vZGU6ZSxvZmZzZXQ6dH0pPT57Y29uc3QgaT1lIGluc3RhbmNlb2YgVGV4dD9lLnBhcmVudE5vZGU6ZTtsZXQgcz1wYXJzZUludChpPy5nZXRBdHRyaWJ1dGUoXCJhcmlhLXBvc2luc2V0XCIpLDEwKS0xO2lmKGlzTmFOKHMpKXJldHVybiBjb25zb2xlLndhcm4oXCJyb3cgaXMgaW52YWxpZC4gUmFjZSBjb25kaXRpb24/XCIpLG51bGw7Y29uc3Qgcj10aGlzLl9yb3dDb2x1bW5zLmdldChpKTtpZighcilyZXR1cm4gY29uc29sZS53YXJuKFwiY29sdW1ucyBpcyBudWxsLiBSYWNlIGNvbmRpdGlvbj9cIiksbnVsbDtsZXQgbj10PHIubGVuZ3RoP3JbdF06ci5zbGljZSgtMSlbMF0rMTtyZXR1cm4gbj49dGhpcy5fdGVybWluYWwuY29scyYmKCsrcyxuPTApLHtyb3c6cyxjb2x1bW46bn19LG49cih0KSxvPXIoaSk7aWYobiYmbyl7aWYobi5yb3c+by5yb3d8fG4ucm93PT09by5yb3cmJm4uY29sdW1uPj1vLmNvbHVtbil0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHJhbmdlXCIpO3RoaXMuX3Rlcm1pbmFsLnNlbGVjdChuLmNvbHVtbixuLnJvdywoby5yb3ctbi5yb3cpKnRoaXMuX3Rlcm1pbmFsLmNvbHMtbi5jb2x1bW4rby5jb2x1bW4pfX1faGFuZGxlUmVzaXplKGUpe3RoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aC0xXS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpO2ZvcihsZXQgZT10aGlzLl9yb3dDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoO2U8dGhpcy5fdGVybWluYWwucm93cztlKyspdGhpcy5fcm93RWxlbWVudHNbZV09dGhpcy5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCksdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzW2VdKTtmb3IoO3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aD5lOyl0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fcm93RWxlbWVudHMucG9wKCkpO3RoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aC0xXS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpLHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpfV9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKXtjb25zdCBlPXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5tYWluRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJsaXN0aXRlbVwiKSxlLnRhYkluZGV4PS0xLHRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKGUpLGV9X3JlZnJlc2hSb3dzRGltZW5zaW9ucygpe2lmKHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHQpe3RoaXMuX2FjY2Vzc2liaWxpdHlDb250YWluZXIuc3R5bGUud2lkdGg9YCR7dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jYW52YXMud2lkdGh9cHhgLHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCE9PXRoaXMuX3Rlcm1pbmFsLnJvd3MmJnRoaXMuX2hhbmRsZVJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5yb3dzKTtmb3IobGV0IGU9MDtlPHRoaXMuX3Rlcm1pbmFsLnJvd3M7ZSsrKXRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKHRoaXMuX3Jvd0VsZW1lbnRzW2VdKX19X3JlZnJlc2hSb3dEaW1lbnNpb25zKGUpe2Uuc3R5bGUuaGVpZ2h0PWAke3RoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHR9cHhgfX07dC5BY2Nlc3NpYmlsaXR5TWFuYWdlcj1kPXMoW3IoMSxjLklJbnN0YW50aWF0aW9uU2VydmljZSkscigyLGguSUNvcmVCcm93c2VyU2VydmljZSkscigzLGguSVJlbmRlclNlcnZpY2UpXSxkKX0sMzYxNDooZSx0KT0+e2Z1bmN0aW9uIGkoZSl7cmV0dXJuIGUucmVwbGFjZSgvXFxyP1xcbi9nLFwiXFxyXCIpfWZ1bmN0aW9uIHMoZSx0KXtyZXR1cm4gdD9cIlx1MDAxYlsyMDB+XCIrZStcIlx1MDAxYlsyMDF+XCI6ZX1mdW5jdGlvbiByKGUsdCxyLG4pe2U9cyhlPWkoZSksci5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlJiYhMCE9PW4ucmF3T3B0aW9ucy5pZ25vcmVCcmFja2V0ZWRQYXN0ZU1vZGUpLHIudHJpZ2dlckRhdGFFdmVudChlLCEwKSx0LnZhbHVlPVwiXCJ9ZnVuY3Rpb24gbihlLHQsaSl7Y29uc3Qgcz1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHI9ZS5jbGllbnRYLXMubGVmdC0xMCxuPWUuY2xpZW50WS1zLnRvcC0xMDt0LnN0eWxlLndpZHRoPVwiMjBweFwiLHQuc3R5bGUuaGVpZ2h0PVwiMjBweFwiLHQuc3R5bGUubGVmdD1gJHtyfXB4YCx0LnN0eWxlLnRvcD1gJHtufXB4YCx0LnN0eWxlLnpJbmRleD1cIjEwMDBcIix0LmZvY3VzKCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5yaWdodENsaWNrSGFuZGxlcj10Lm1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3I9dC5wYXN0ZT10LmhhbmRsZVBhc3RlRXZlbnQ9dC5jb3B5SGFuZGxlcj10LmJyYWNrZXRUZXh0Rm9yUGFzdGU9dC5wcmVwYXJlVGV4dEZvclRlcm1pbmFsPXZvaWQgMCx0LnByZXBhcmVUZXh0Rm9yVGVybWluYWw9aSx0LmJyYWNrZXRUZXh0Rm9yUGFzdGU9cyx0LmNvcHlIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7ZS5jbGlwYm9hcmREYXRhJiZlLmNsaXBib2FyZERhdGEuc2V0RGF0YShcInRleHQvcGxhaW5cIix0LnNlbGVjdGlvblRleHQpLGUucHJldmVudERlZmF1bHQoKX0sdC5oYW5kbGVQYXN0ZUV2ZW50PWZ1bmN0aW9uKGUsdCxpLHMpe2Uuc3RvcFByb3BhZ2F0aW9uKCksZS5jbGlwYm9hcmREYXRhJiZyKGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSx0LGkscyl9LHQucGFzdGU9cix0Lm1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3I9bix0LnJpZ2h0Q2xpY2tIYW5kbGVyPWZ1bmN0aW9uKGUsdCxpLHMscil7bihlLHQsaSksciYmcy5yaWdodENsaWNrU2VsZWN0KGUpLHQudmFsdWU9cy5zZWxlY3Rpb25UZXh0LHQuc2VsZWN0KCl9fSw3MjM5OihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNvbG9yQ29udHJhc3RDYWNoZT12b2lkIDA7Y29uc3Qgcz1pKDE1MDUpO3QuQ29sb3JDb250cmFzdENhY2hlPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5fY29sb3I9bmV3IHMuVHdvS2V5TWFwLHRoaXMuX2Nzcz1uZXcgcy5Ud29LZXlNYXB9c2V0Q3NzKGUsdCxpKXt0aGlzLl9jc3Muc2V0KGUsdCxpKX1nZXRDc3MoZSx0KXtyZXR1cm4gdGhpcy5fY3NzLmdldChlLHQpfXNldENvbG9yKGUsdCxpKXt0aGlzLl9jb2xvci5zZXQoZSx0LGkpfWdldENvbG9yKGUsdCl7cmV0dXJuIHRoaXMuX2NvbG9yLmdldChlLHQpfWNsZWFyKCl7dGhpcy5fY29sb3IuY2xlYXIoKSx0aGlzLl9jc3MuY2xlYXIoKX19fSwzNjU2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXI9dm9pZCAwLHQuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCxpLHMpe2UuYWRkRXZlbnRMaXN0ZW5lcih0LGkscyk7bGV0IHI9ITE7cmV0dXJue2Rpc3Bvc2U6KCk9PntyfHwocj0hMCxlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxpLHMpKX19fX0sMzU1MTpmdW5jdGlvbihlLHQsaSl7dmFyIHM9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQsaSxzKXt2YXIgcixuPWFyZ3VtZW50cy5sZW5ndGgsbz1uPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW89UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobz0objwzP3Iobyk6bj4zP3IodCxpLG8pOnIodCxpKSl8fG8pO3JldHVybiBuPjMmJm8mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbyksb30scj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkxpbmtpZmllcj12b2lkIDA7Y29uc3Qgbj1pKDM2NTYpLG89aSg4NDYwKSxhPWkoODQ0KSxoPWkoMjU4NSksYz1pKDQ3MjUpO2xldCBsPXQuTGlua2lmaWVyPWNsYXNzIGV4dGVuZHMgYS5EaXNwb3NhYmxle2dldCBjdXJyZW50TGluaygpe3JldHVybiB0aGlzLl9jdXJyZW50TGlua31jb25zdHJ1Y3RvcihlLHQsaSxzLHIpe3N1cGVyKCksdGhpcy5fZWxlbWVudD1lLHRoaXMuX21vdXNlU2VydmljZT10LHRoaXMuX3JlbmRlclNlcnZpY2U9aSx0aGlzLl9idWZmZXJTZXJ2aWNlPXMsdGhpcy5fbGlua1Byb3ZpZGVyU2VydmljZT1yLHRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzPVtdLHRoaXMuX2lzTW91c2VPdXQ9ITAsdGhpcy5fd2FzUmVzaXplZD0hMSx0aGlzLl9hY3RpdmVMaW5lPS0xLHRoaXMuX29uU2hvd0xpbmtVbmRlcmxpbmU9dGhpcy5yZWdpc3RlcihuZXcgby5FdmVudEVtaXR0ZXIpLHRoaXMub25TaG93TGlua1VuZGVybGluZT10aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lLmV2ZW50LHRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmU9dGhpcy5yZWdpc3RlcihuZXcgby5FdmVudEVtaXR0ZXIpLHRoaXMub25IaWRlTGlua1VuZGVybGluZT10aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lLmV2ZW50LHRoaXMucmVnaXN0ZXIoKDAsYS5nZXREaXNwb3NlQXJyYXlEaXNwb3NhYmxlKSh0aGlzLl9saW5rQ2FjaGVEaXNwb3NhYmxlcykpLHRoaXMucmVnaXN0ZXIoKDAsYS50b0Rpc3Bvc2FibGUpKCgoKT0+e3RoaXMuX2xhc3RNb3VzZUV2ZW50PXZvaWQgMCx0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXM/LmNsZWFyKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5vblJlc2l6ZSgoKCk9Pnt0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCksdGhpcy5fd2FzUmVzaXplZD0hMH0pKSksdGhpcy5yZWdpc3RlcigoMCxuLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCxcIm1vdXNlbGVhdmVcIiwoKCk9Pnt0aGlzLl9pc01vdXNlT3V0PSEwLHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKX0pKSksdGhpcy5yZWdpc3RlcigoMCxuLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCxcIm1vdXNlbW92ZVwiLHRoaXMuX2hhbmRsZU1vdXNlTW92ZS5iaW5kKHRoaXMpKSksdGhpcy5yZWdpc3RlcigoMCxuLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCxcIm1vdXNlZG93blwiLHRoaXMuX2hhbmRsZU1vdXNlRG93bi5iaW5kKHRoaXMpKSksdGhpcy5yZWdpc3RlcigoMCxuLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCxcIm1vdXNldXBcIix0aGlzLl9oYW5kbGVNb3VzZVVwLmJpbmQodGhpcykpKX1faGFuZGxlTW91c2VNb3ZlKGUpe3RoaXMuX2xhc3RNb3VzZUV2ZW50PWU7Y29uc3QgdD10aGlzLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KGUsdGhpcy5fZWxlbWVudCx0aGlzLl9tb3VzZVNlcnZpY2UpO2lmKCF0KXJldHVybjt0aGlzLl9pc01vdXNlT3V0PSExO2NvbnN0IGk9ZS5jb21wb3NlZFBhdGgoKTtmb3IobGV0IGU9MDtlPGkubGVuZ3RoO2UrKyl7Y29uc3QgdD1pW2VdO2lmKHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwieHRlcm1cIikpYnJlYWs7aWYodC5jbGFzc0xpc3QuY29udGFpbnMoXCJ4dGVybS1ob3ZlclwiKSlyZXR1cm59dGhpcy5fbGFzdEJ1ZmZlckNlbGwmJnQueD09PXRoaXMuX2xhc3RCdWZmZXJDZWxsLngmJnQueT09PXRoaXMuX2xhc3RCdWZmZXJDZWxsLnl8fCh0aGlzLl9oYW5kbGVIb3Zlcih0KSx0aGlzLl9sYXN0QnVmZmVyQ2VsbD10KX1faGFuZGxlSG92ZXIoZSl7aWYodGhpcy5fYWN0aXZlTGluZSE9PWUueXx8dGhpcy5fd2FzUmVzaXplZClyZXR1cm4gdGhpcy5fY2xlYXJDdXJyZW50TGluaygpLHRoaXMuX2Fza0ZvckxpbmsoZSwhMSksdm9pZCh0aGlzLl93YXNSZXNpemVkPSExKTt0aGlzLl9jdXJyZW50TGluayYmdGhpcy5fbGlua0F0UG9zaXRpb24odGhpcy5fY3VycmVudExpbmsubGluayxlKXx8KHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKSx0aGlzLl9hc2tGb3JMaW5rKGUsITApKX1fYXNrRm9yTGluayhlLHQpe3RoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyYmdHx8KHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcz8uZm9yRWFjaCgoZT0+e2U/LmZvckVhY2goKGU9PntlLmxpbmsuZGlzcG9zZSYmZS5saW5rLmRpc3Bvc2UoKX0pKX0pKSx0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXM9bmV3IE1hcCx0aGlzLl9hY3RpdmVMaW5lPWUueSk7bGV0IGk9ITE7Zm9yKGNvbnN0W3Mscl1vZiB0aGlzLl9saW5rUHJvdmlkZXJTZXJ2aWNlLmxpbmtQcm92aWRlcnMuZW50cmllcygpKWlmKHQpe2NvbnN0IHQ9dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzPy5nZXQocyk7dCYmKGk9dGhpcy5fY2hlY2tMaW5rUHJvdmlkZXJSZXN1bHQocyxlLGkpKX1lbHNlIHIucHJvdmlkZUxpbmtzKGUueSwodD0+e2lmKHRoaXMuX2lzTW91c2VPdXQpcmV0dXJuO2NvbnN0IHI9dD8ubWFwKChlPT4oe2xpbms6ZX0pKSk7dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzPy5zZXQocyxyKSxpPXRoaXMuX2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0KHMsZSxpKSx0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXM/LnNpemU9PT10aGlzLl9saW5rUHJvdmlkZXJTZXJ2aWNlLmxpbmtQcm92aWRlcnMubGVuZ3RoJiZ0aGlzLl9yZW1vdmVJbnRlcnNlY3RpbmdMaW5rcyhlLnksdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKX0pKX1fcmVtb3ZlSW50ZXJzZWN0aW5nTGlua3MoZSx0KXtjb25zdCBpPW5ldyBTZXQ7Zm9yKGxldCBzPTA7czx0LnNpemU7cysrKXtjb25zdCByPXQuZ2V0KHMpO2lmKHIpZm9yKGxldCB0PTA7dDxyLmxlbmd0aDt0Kyspe2NvbnN0IHM9clt0XSxuPXMubGluay5yYW5nZS5zdGFydC55PGU/MDpzLmxpbmsucmFuZ2Uuc3RhcnQueCxvPXMubGluay5yYW5nZS5lbmQueT5lP3RoaXMuX2J1ZmZlclNlcnZpY2UuY29sczpzLmxpbmsucmFuZ2UuZW5kLng7Zm9yKGxldCBlPW47ZTw9bztlKyspe2lmKGkuaGFzKGUpKXtyLnNwbGljZSh0LS0sMSk7YnJlYWt9aS5hZGQoZSl9fX19X2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0KGUsdCxpKXtpZighdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKXJldHVybiBpO2NvbnN0IHM9dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmdldChlKTtsZXQgcj0hMTtmb3IobGV0IHQ9MDt0PGU7dCsrKXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5oYXModCkmJiF0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuZ2V0KHQpfHwocj0hMCk7aWYoIXImJnMpe2NvbnN0IGU9cy5maW5kKChlPT50aGlzLl9saW5rQXRQb3NpdGlvbihlLmxpbmssdCkpKTtlJiYoaT0hMCx0aGlzLl9oYW5kbGVOZXdMaW5rKGUpKX1pZih0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuc2l6ZT09PXRoaXMuX2xpbmtQcm92aWRlclNlcnZpY2UubGlua1Byb3ZpZGVycy5sZW5ndGgmJiFpKWZvcihsZXQgZT0wO2U8dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLnNpemU7ZSsrKXtjb25zdCBzPXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5nZXQoZSk/LmZpbmQoKGU9PnRoaXMuX2xpbmtBdFBvc2l0aW9uKGUubGluayx0KSkpO2lmKHMpe2k9ITAsdGhpcy5faGFuZGxlTmV3TGluayhzKTticmVha319cmV0dXJuIGl9X2hhbmRsZU1vdXNlRG93bigpe3RoaXMuX21vdXNlRG93bkxpbms9dGhpcy5fY3VycmVudExpbmt9X2hhbmRsZU1vdXNlVXAoZSl7aWYoIXRoaXMuX2N1cnJlbnRMaW5rKXJldHVybjtjb25zdCB0PXRoaXMuX3Bvc2l0aW9uRnJvbU1vdXNlRXZlbnQoZSx0aGlzLl9lbGVtZW50LHRoaXMuX21vdXNlU2VydmljZSk7dCYmdGhpcy5fbW91c2VEb3duTGluaz09PXRoaXMuX2N1cnJlbnRMaW5rJiZ0aGlzLl9saW5rQXRQb3NpdGlvbih0aGlzLl9jdXJyZW50TGluay5saW5rLHQpJiZ0aGlzLl9jdXJyZW50TGluay5saW5rLmFjdGl2YXRlKGUsdGhpcy5fY3VycmVudExpbmsubGluay50ZXh0KX1fY2xlYXJDdXJyZW50TGluayhlLHQpe3RoaXMuX2N1cnJlbnRMaW5rJiZ0aGlzLl9sYXN0TW91c2VFdmVudCYmKCFlfHwhdHx8dGhpcy5fY3VycmVudExpbmsubGluay5yYW5nZS5zdGFydC55Pj1lJiZ0aGlzLl9jdXJyZW50TGluay5saW5rLnJhbmdlLmVuZC55PD10KSYmKHRoaXMuX2xpbmtMZWF2ZSh0aGlzLl9lbGVtZW50LHRoaXMuX2N1cnJlbnRMaW5rLmxpbmssdGhpcy5fbGFzdE1vdXNlRXZlbnQpLHRoaXMuX2N1cnJlbnRMaW5rPXZvaWQgMCwoMCxhLmRpc3Bvc2VBcnJheSkodGhpcy5fbGlua0NhY2hlRGlzcG9zYWJsZXMpKX1faGFuZGxlTmV3TGluayhlKXtpZighdGhpcy5fbGFzdE1vdXNlRXZlbnQpcmV0dXJuO2NvbnN0IHQ9dGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudCh0aGlzLl9sYXN0TW91c2VFdmVudCx0aGlzLl9lbGVtZW50LHRoaXMuX21vdXNlU2VydmljZSk7dCYmdGhpcy5fbGlua0F0UG9zaXRpb24oZS5saW5rLHQpJiYodGhpcy5fY3VycmVudExpbms9ZSx0aGlzLl9jdXJyZW50TGluay5zdGF0ZT17ZGVjb3JhdGlvbnM6e3VuZGVybGluZTp2b2lkIDA9PT1lLmxpbmsuZGVjb3JhdGlvbnN8fGUubGluay5kZWNvcmF0aW9ucy51bmRlcmxpbmUscG9pbnRlckN1cnNvcjp2b2lkIDA9PT1lLmxpbmsuZGVjb3JhdGlvbnN8fGUubGluay5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yfSxpc0hvdmVyZWQ6ITB9LHRoaXMuX2xpbmtIb3Zlcih0aGlzLl9lbGVtZW50LGUubGluayx0aGlzLl9sYXN0TW91c2VFdmVudCksZS5saW5rLmRlY29yYXRpb25zPXt9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUubGluay5kZWNvcmF0aW9ucyx7cG9pbnRlckN1cnNvcjp7Z2V0OigpPT50aGlzLl9jdXJyZW50TGluaz8uc3RhdGU/LmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3Isc2V0OmU9Pnt0aGlzLl9jdXJyZW50TGluaz8uc3RhdGUmJnRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3IhPT1lJiYodGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvcj1lLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmlzSG92ZXJlZCYmdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwieHRlcm0tY3Vyc29yLXBvaW50ZXJcIixlKSl9fSx1bmRlcmxpbmU6e2dldDooKT0+dGhpcy5fY3VycmVudExpbms/LnN0YXRlPy5kZWNvcmF0aW9ucy51bmRlcmxpbmUsc2V0OnQ9Pnt0aGlzLl9jdXJyZW50TGluaz8uc3RhdGUmJnRoaXMuX2N1cnJlbnRMaW5rPy5zdGF0ZT8uZGVjb3JhdGlvbnMudW5kZXJsaW5lIT09dCYmKHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZT10LHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmlzSG92ZXJlZCYmdGhpcy5fZmlyZVVuZGVybGluZUV2ZW50KGUubGluayx0KSl9fX0pLHRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzLnB1c2godGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UoKGU9PntpZighdGhpcy5fY3VycmVudExpbmspcmV0dXJuO2NvbnN0IHQ9MD09PWUuc3RhcnQ/MDplLnN0YXJ0KzErdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsaT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCsxK2UuZW5kO2lmKHRoaXMuX2N1cnJlbnRMaW5rLmxpbmsucmFuZ2Uuc3RhcnQueT49dCYmdGhpcy5fY3VycmVudExpbmsubGluay5yYW5nZS5lbmQueTw9aSYmKHRoaXMuX2NsZWFyQ3VycmVudExpbmsodCxpKSx0aGlzLl9sYXN0TW91c2VFdmVudCkpe2NvbnN0IGU9dGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudCh0aGlzLl9sYXN0TW91c2VFdmVudCx0aGlzLl9lbGVtZW50LHRoaXMuX21vdXNlU2VydmljZSk7ZSYmdGhpcy5fYXNrRm9yTGluayhlLCExKX19KSkpKX1fbGlua0hvdmVyKGUsdCxpKXt0aGlzLl9jdXJyZW50TGluaz8uc3RhdGUmJih0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQ9ITAsdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMudW5kZXJsaW5lJiZ0aGlzLl9maXJlVW5kZXJsaW5lRXZlbnQodCwhMCksdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvciYmZS5jbGFzc0xpc3QuYWRkKFwieHRlcm0tY3Vyc29yLXBvaW50ZXJcIikpLHQuaG92ZXImJnQuaG92ZXIoaSx0LnRleHQpfV9maXJlVW5kZXJsaW5lRXZlbnQoZSx0KXtjb25zdCBpPWUucmFuZ2Uscz10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxyPXRoaXMuX2NyZWF0ZUxpbmtVbmRlcmxpbmVFdmVudChpLnN0YXJ0LngtMSxpLnN0YXJ0Lnktcy0xLGkuZW5kLngsaS5lbmQueS1zLTEsdm9pZCAwKTsodD90aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lOnRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmUpLmZpcmUocil9X2xpbmtMZWF2ZShlLHQsaSl7dGhpcy5fY3VycmVudExpbms/LnN0YXRlJiYodGhpcy5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkPSExLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZSYmdGhpcy5fZmlyZVVuZGVybGluZUV2ZW50KHQsITEpLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3ImJmUuY2xhc3NMaXN0LnJlbW92ZShcInh0ZXJtLWN1cnNvci1wb2ludGVyXCIpKSx0LmxlYXZlJiZ0LmxlYXZlKGksdC50ZXh0KX1fbGlua0F0UG9zaXRpb24oZSx0KXtjb25zdCBpPWUucmFuZ2Uuc3RhcnQueSp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMrZS5yYW5nZS5zdGFydC54LHM9ZS5yYW5nZS5lbmQueSp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMrZS5yYW5nZS5lbmQueCxyPXQueSp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMrdC54O3JldHVybiBpPD1yJiZyPD1zfV9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KGUsdCxpKXtjb25zdCBzPWkuZ2V0Q29vcmRzKGUsdCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtpZihzKXJldHVybnt4OnNbMF0seTpzWzFdK3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwfX1fY3JlYXRlTGlua1VuZGVybGluZUV2ZW50KGUsdCxpLHMscil7cmV0dXJue3gxOmUseTE6dCx4MjppLHkyOnMsY29sczp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsZmc6cn19fTt0LkxpbmtpZmllcj1sPXMoW3IoMSxjLklNb3VzZVNlcnZpY2UpLHIoMixjLklSZW5kZXJTZXJ2aWNlKSxyKDMsaC5JQnVmZmVyU2VydmljZSkscig0LGMuSUxpbmtQcm92aWRlclNlcnZpY2UpXSxsKX0sOTA0MjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudG9vTXVjaE91dHB1dD10LnByb21wdExhYmVsPXZvaWQgMCx0LnByb21wdExhYmVsPVwiVGVybWluYWwgaW5wdXRcIix0LnRvb011Y2hPdXRwdXQ9XCJUb28gbXVjaCBvdXRwdXQgdG8gYW5ub3VuY2UsIG5hdmlnYXRlIHRvIHJvd3MgbWFudWFsbHkgdG8gcmVhZFwifSwzNzMwOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxvPW48Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbz1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihvPShuPDM/cihvKTpuPjM/cih0LGksbyk6cih0LGkpKXx8byk7cmV0dXJuIG4+MyYmbyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxvKSxvfSxyPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuT3NjTGlua1Byb3ZpZGVyPXZvaWQgMDtjb25zdCBuPWkoNTExKSxvPWkoMjU4NSk7bGV0IGE9dC5Pc2NMaW5rUHJvdmlkZXI9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9vcHRpb25zU2VydmljZT10LHRoaXMuX29zY0xpbmtTZXJ2aWNlPWl9cHJvdmlkZUxpbmtzKGUsdCl7Y29uc3QgaT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoZS0xKTtpZighaSlyZXR1cm4gdm9pZCB0KHZvaWQgMCk7Y29uc3Qgcz1bXSxyPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGlua0hhbmRsZXIsbz1uZXcgbi5DZWxsRGF0YSxhPWkuZ2V0VHJpbW1lZExlbmd0aCgpO2xldCBjPS0xLGw9LTEsZD0hMTtmb3IobGV0IHQ9MDt0PGE7dCsrKWlmKC0xIT09bHx8aS5oYXNDb250ZW50KHQpKXtpZihpLmxvYWRDZWxsKHQsbyksby5oYXNFeHRlbmRlZEF0dHJzKCkmJm8uZXh0ZW5kZWQudXJsSWQpe2lmKC0xPT09bCl7bD10LGM9by5leHRlbmRlZC51cmxJZDtjb250aW51ZX1kPW8uZXh0ZW5kZWQudXJsSWQhPT1jfWVsc2UtMSE9PWwmJihkPSEwKTtpZihkfHwtMSE9PWwmJnQ9PT1hLTEpe2NvbnN0IGk9dGhpcy5fb3NjTGlua1NlcnZpY2UuZ2V0TGlua0RhdGEoYyk/LnVyaTtpZihpKXtjb25zdCBuPXtzdGFydDp7eDpsKzEseTplfSxlbmQ6e3g6dCsoZHx8dCE9PWEtMT8wOjEpLHk6ZX19O2xldCBvPSExO2lmKCFyPy5hbGxvd05vbkh0dHBQcm90b2NvbHMpdHJ5e2NvbnN0IGU9bmV3IFVSTChpKTtbXCJodHRwOlwiLFwiaHR0cHM6XCJdLmluY2x1ZGVzKGUucHJvdG9jb2wpfHwobz0hMCl9Y2F0Y2goZSl7bz0hMH1vfHxzLnB1c2goe3RleHQ6aSxyYW5nZTpuLGFjdGl2YXRlOihlLHQpPT5yP3IuYWN0aXZhdGUoZSx0LG4pOmgoMCx0KSxob3ZlcjooZSx0KT0+cj8uaG92ZXI/LihlLHQsbiksbGVhdmU6KGUsdCk9PnI/LmxlYXZlPy4oZSx0LG4pfSl9ZD0hMSxvLmhhc0V4dGVuZGVkQXR0cnMoKSYmby5leHRlbmRlZC51cmxJZD8obD10LGM9by5leHRlbmRlZC51cmxJZCk6KGw9LTEsYz0tMSl9fXQocyl9fTtmdW5jdGlvbiBoKGUsdCl7aWYoY29uZmlybShgRG8geW91IHdhbnQgdG8gbmF2aWdhdGUgdG8gJHt0fT9cXG5cXG5XQVJOSU5HOiBUaGlzIGxpbmsgY291bGQgcG90ZW50aWFsbHkgYmUgZGFuZ2Vyb3VzYCkpe2NvbnN0IGU9d2luZG93Lm9wZW4oKTtpZihlKXt0cnl7ZS5vcGVuZXI9bnVsbH1jYXRjaHt9ZS5sb2NhdGlvbi5ocmVmPXR9ZWxzZSBjb25zb2xlLndhcm4oXCJPcGVuaW5nIGxpbmsgYmxvY2tlZCBhcyBvcGVuZXIgY291bGQgbm90IGJlIGNsZWFyZWRcIil9fXQuT3NjTGlua1Byb3ZpZGVyPWE9cyhbcigwLG8uSUJ1ZmZlclNlcnZpY2UpLHIoMSxvLklPcHRpb25zU2VydmljZSkscigyLG8uSU9zY0xpbmtTZXJ2aWNlKV0sYSl9LDYxOTM6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlJlbmRlckRlYm91bmNlcj12b2lkIDAsdC5SZW5kZXJEZWJvdW5jZXI9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9yZW5kZXJDYWxsYmFjaz1lLHRoaXMuX2NvcmVCcm93c2VyU2VydmljZT10LHRoaXMuX3JlZnJlc2hDYWxsYmFja3M9W119ZGlzcG9zZSgpe3RoaXMuX2FuaW1hdGlvbkZyYW1lJiYodGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLndpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSksdGhpcy5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwKX1hZGRSZWZyZXNoQ2FsbGJhY2soZSl7cmV0dXJuIHRoaXMuX3JlZnJlc2hDYWxsYmFja3MucHVzaChlKSx0aGlzLl9hbmltYXRpb25GcmFtZXx8KHRoaXMuX2FuaW1hdGlvbkZyYW1lPXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgoKT0+dGhpcy5faW5uZXJSZWZyZXNoKCkpKSksdGhpcy5fYW5pbWF0aW9uRnJhbWV9cmVmcmVzaChlLHQsaSl7dGhpcy5fcm93Q291bnQ9aSxlPXZvaWQgMCE9PWU/ZTowLHQ9dm9pZCAwIT09dD90OnRoaXMuX3Jvd0NvdW50LTEsdGhpcy5fcm93U3RhcnQ9dm9pZCAwIT09dGhpcy5fcm93U3RhcnQ/TWF0aC5taW4odGhpcy5fcm93U3RhcnQsZSk6ZSx0aGlzLl9yb3dFbmQ9dm9pZCAwIT09dGhpcy5fcm93RW5kP01hdGgubWF4KHRoaXMuX3Jvd0VuZCx0KTp0LHRoaXMuX2FuaW1hdGlvbkZyYW1lfHwodGhpcy5fYW5pbWF0aW9uRnJhbWU9dGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCgpPT50aGlzLl9pbm5lclJlZnJlc2goKSkpKX1faW5uZXJSZWZyZXNoKCl7aWYodGhpcy5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwLHZvaWQgMD09PXRoaXMuX3Jvd1N0YXJ0fHx2b2lkIDA9PT10aGlzLl9yb3dFbmR8fHZvaWQgMD09PXRoaXMuX3Jvd0NvdW50KXJldHVybiB2b2lkIHRoaXMuX3J1blJlZnJlc2hDYWxsYmFja3MoKTtjb25zdCBlPU1hdGgubWF4KHRoaXMuX3Jvd1N0YXJ0LDApLHQ9TWF0aC5taW4odGhpcy5fcm93RW5kLHRoaXMuX3Jvd0NvdW50LTEpO3RoaXMuX3Jvd1N0YXJ0PXZvaWQgMCx0aGlzLl9yb3dFbmQ9dm9pZCAwLHRoaXMuX3JlbmRlckNhbGxiYWNrKGUsdCksdGhpcy5fcnVuUmVmcmVzaENhbGxiYWNrcygpfV9ydW5SZWZyZXNoQ2FsbGJhY2tzKCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcmVmcmVzaENhbGxiYWNrcyllKDApO3RoaXMuX3JlZnJlc2hDYWxsYmFja3M9W119fX0sMzIzNjooZSx0LGkpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5UZXJtaW5hbD12b2lkIDA7Y29uc3Qgcz1pKDM2MTQpLHI9aSgzNjU2KSxuPWkoMzU1MSksbz1pKDkwNDIpLGE9aSgzNzMwKSxoPWkoMTY4MCksYz1pKDMxMDcpLGw9aSg1NzQ0KSxkPWkoMjk1MCksXz1pKDEyOTYpLHU9aSg0MjgpLGY9aSg0MjY5KSx2PWkoNTExNCkscD1pKDg5MzQpLGc9aSgzMjMwKSxtPWkoOTMxMiksUz1pKDQ3MjUpLEM9aSg2NzMxKSxiPWkoODA1NSksdz1pKDg5NjkpLHk9aSg4NDYwKSxFPWkoODQ0KSxrPWkoNjExNCksTD1pKDg0MzcpLEQ9aSgyNTg0KSxSPWkoNzM5OSkseD1pKDU5NDEpLEE9aSg5MDc0KSxCPWkoMjU4NSksVD1pKDU0MzUpLE09aSg0NTY3KSxPPWkoNzc5KTtjbGFzcyBQIGV4dGVuZHMgdy5Db3JlVGVybWluYWx7Z2V0IG9uRm9jdXMoKXtyZXR1cm4gdGhpcy5fb25Gb2N1cy5ldmVudH1nZXQgb25CbHVyKCl7cmV0dXJuIHRoaXMuX29uQmx1ci5ldmVudH1nZXQgb25BMTF5Q2hhcigpe3JldHVybiB0aGlzLl9vbkExMXlDaGFyRW1pdHRlci5ldmVudH1nZXQgb25BMTF5VGFiKCl7cmV0dXJuIHRoaXMuX29uQTExeVRhYkVtaXR0ZXIuZXZlbnR9Z2V0IG9uV2lsbE9wZW4oKXtyZXR1cm4gdGhpcy5fb25XaWxsT3Blbi5ldmVudH1jb25zdHJ1Y3RvcihlPXt9KXtzdXBlcihlKSx0aGlzLmJyb3dzZXI9ayx0aGlzLl9rZXlEb3duSGFuZGxlZD0hMSx0aGlzLl9rZXlEb3duU2Vlbj0hMSx0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITEsdGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSExLHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyPXRoaXMucmVnaXN0ZXIobmV3IEUuTXV0YWJsZURpc3Bvc2FibGUpLHRoaXMuX29uQ3Vyc29yTW92ZT10aGlzLnJlZ2lzdGVyKG5ldyB5LkV2ZW50RW1pdHRlciksdGhpcy5vbkN1cnNvck1vdmU9dGhpcy5fb25DdXJzb3JNb3ZlLmV2ZW50LHRoaXMuX29uS2V5PXRoaXMucmVnaXN0ZXIobmV3IHkuRXZlbnRFbWl0dGVyKSx0aGlzLm9uS2V5PXRoaXMuX29uS2V5LmV2ZW50LHRoaXMuX29uUmVuZGVyPXRoaXMucmVnaXN0ZXIobmV3IHkuRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVuZGVyPXRoaXMuX29uUmVuZGVyLmV2ZW50LHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlPXRoaXMucmVnaXN0ZXIobmV3IHkuRXZlbnRFbWl0dGVyKSx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlPXRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmV2ZW50LHRoaXMuX29uVGl0bGVDaGFuZ2U9dGhpcy5yZWdpc3RlcihuZXcgeS5FdmVudEVtaXR0ZXIpLHRoaXMub25UaXRsZUNoYW5nZT10aGlzLl9vblRpdGxlQ2hhbmdlLmV2ZW50LHRoaXMuX29uQmVsbD10aGlzLnJlZ2lzdGVyKG5ldyB5LkV2ZW50RW1pdHRlciksdGhpcy5vbkJlbGw9dGhpcy5fb25CZWxsLmV2ZW50LHRoaXMuX29uRm9jdXM9dGhpcy5yZWdpc3RlcihuZXcgeS5FdmVudEVtaXR0ZXIpLHRoaXMuX29uQmx1cj10aGlzLnJlZ2lzdGVyKG5ldyB5LkV2ZW50RW1pdHRlciksdGhpcy5fb25BMTF5Q2hhckVtaXR0ZXI9dGhpcy5yZWdpc3RlcihuZXcgeS5FdmVudEVtaXR0ZXIpLHRoaXMuX29uQTExeVRhYkVtaXR0ZXI9dGhpcy5yZWdpc3RlcihuZXcgeS5FdmVudEVtaXR0ZXIpLHRoaXMuX29uV2lsbE9wZW49dGhpcy5yZWdpc3RlcihuZXcgeS5FdmVudEVtaXR0ZXIpLHRoaXMuX3NldHVwKCksdGhpcy5fZGVjb3JhdGlvblNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQS5EZWNvcmF0aW9uU2VydmljZSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShCLklEZWNvcmF0aW9uU2VydmljZSx0aGlzLl9kZWNvcmF0aW9uU2VydmljZSksdGhpcy5fbGlua1Byb3ZpZGVyU2VydmljZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShPLkxpbmtQcm92aWRlclNlcnZpY2UpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoUy5JTGlua1Byb3ZpZGVyU2VydmljZSx0aGlzLl9saW5rUHJvdmlkZXJTZXJ2aWNlKSx0aGlzLl9saW5rUHJvdmlkZXJTZXJ2aWNlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGEuT3NjTGlua1Byb3ZpZGVyKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0QmVsbCgoKCk9PnRoaXMuX29uQmVsbC5maXJlKCkpKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0UmVmcmVzaFJvd3MoKChlLHQpPT50aGlzLnJlZnJlc2goZSx0KSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblJlcXVlc3RTZW5kRm9jdXMoKCgpPT50aGlzLl9yZXBvcnRGb2N1cygpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFJlc2V0KCgoKT0+dGhpcy5yZXNldCgpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0KChlPT50aGlzLl9yZXBvcnRXaW5kb3dzT3B0aW9ucyhlKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vbkNvbG9yKChlPT50aGlzLl9oYW5kbGVDb2xvckV2ZW50KGUpKSkpLHRoaXMucmVnaXN0ZXIoKDAseS5mb3J3YXJkRXZlbnQpKHRoaXMuX2lucHV0SGFuZGxlci5vbkN1cnNvck1vdmUsdGhpcy5fb25DdXJzb3JNb3ZlKSksdGhpcy5yZWdpc3RlcigoMCx5LmZvcndhcmRFdmVudCkodGhpcy5faW5wdXRIYW5kbGVyLm9uVGl0bGVDaGFuZ2UsdGhpcy5fb25UaXRsZUNoYW5nZSkpLHRoaXMucmVnaXN0ZXIoKDAseS5mb3J3YXJkRXZlbnQpKHRoaXMuX2lucHV0SGFuZGxlci5vbkExMXlDaGFyLHRoaXMuX29uQTExeUNoYXJFbWl0dGVyKSksdGhpcy5yZWdpc3RlcigoMCx5LmZvcndhcmRFdmVudCkodGhpcy5faW5wdXRIYW5kbGVyLm9uQTExeVRhYix0aGlzLl9vbkExMXlUYWJFbWl0dGVyKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9idWZmZXJTZXJ2aWNlLm9uUmVzaXplKChlPT50aGlzLl9hZnRlclJlc2l6ZShlLmNvbHMsZS5yb3dzKSkpKSx0aGlzLnJlZ2lzdGVyKCgwLEUudG9EaXNwb3NhYmxlKSgoKCk9Pnt0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI9dm9pZCAwLHRoaXMuZWxlbWVudD8ucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KX0pKSl9X2hhbmRsZUNvbG9yRXZlbnQoZSl7aWYodGhpcy5fdGhlbWVTZXJ2aWNlKWZvcihjb25zdCB0IG9mIGUpe2xldCBlLGk9XCJcIjtzd2l0Y2godC5pbmRleCl7Y2FzZSAyNTY6ZT1cImZvcmVncm91bmRcIixpPVwiMTBcIjticmVhaztjYXNlIDI1NzplPVwiYmFja2dyb3VuZFwiLGk9XCIxMVwiO2JyZWFrO2Nhc2UgMjU4OmU9XCJjdXJzb3JcIixpPVwiMTJcIjticmVhaztkZWZhdWx0OmU9XCJhbnNpXCIsaT1cIjQ7XCIrdC5pbmRleH1zd2l0Y2godC50eXBlKXtjYXNlIDA6Y29uc3Qgcz1iLmNvbG9yLnRvQ29sb3JSR0IoXCJhbnNpXCI9PT1lP3RoaXMuX3RoZW1lU2VydmljZS5jb2xvcnMuYW5zaVt0LmluZGV4XTp0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzW2VdKTt0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7RC5DMC5FU0N9XSR7aX07JHsoMCx4LnRvUmdiU3RyaW5nKShzKX0ke0QuQzFfRVNDQVBFRC5TVH1gKTticmVhaztjYXNlIDE6aWYoXCJhbnNpXCI9PT1lKXRoaXMuX3RoZW1lU2VydmljZS5tb2RpZnlDb2xvcnMoKGU9PmUuYW5zaVt0LmluZGV4XT1iLmNoYW5uZWxzLnRvQ29sb3IoLi4udC5jb2xvcikpKTtlbHNle2NvbnN0IGk9ZTt0aGlzLl90aGVtZVNlcnZpY2UubW9kaWZ5Q29sb3JzKChlPT5lW2ldPWIuY2hhbm5lbHMudG9Db2xvciguLi50LmNvbG9yKSkpfWJyZWFrO2Nhc2UgMjp0aGlzLl90aGVtZVNlcnZpY2UucmVzdG9yZUNvbG9yKHQuaW5kZXgpfX19X3NldHVwKCl7c3VwZXIuX3NldHVwKCksdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyPXZvaWQgMH1nZXQgYnVmZmVyKCl7cmV0dXJuIHRoaXMuYnVmZmVycy5hY3RpdmV9Zm9jdXMoKXt0aGlzLnRleHRhcmVhJiZ0aGlzLnRleHRhcmVhLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSl9X2hhbmRsZVNjcmVlblJlYWRlck1vZGVPcHRpb25DaGFuZ2UoZSl7ZT8hdGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIudmFsdWUmJnRoaXMuX3JlbmRlclNlcnZpY2UmJih0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlci52YWx1ZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShNLkFjY2Vzc2liaWxpdHlNYW5hZ2VyLHRoaXMpKTp0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlci5jbGVhcigpfV9oYW5kbGVUZXh0QXJlYUZvY3VzKGUpe3RoaXMuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cyYmdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEQuQzAuRVNDK1wiW0lcIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb2N1c1wiKSx0aGlzLl9zaG93Q3Vyc29yKCksdGhpcy5fb25Gb2N1cy5maXJlKCl9Ymx1cigpe3JldHVybiB0aGlzLnRleHRhcmVhPy5ibHVyKCl9X2hhbmRsZVRleHRBcmVhQmx1cigpe3RoaXMudGV4dGFyZWEudmFsdWU9XCJcIix0aGlzLnJlZnJlc2godGhpcy5idWZmZXIueSx0aGlzLmJ1ZmZlci55KSx0aGlzLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXMmJnRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChELkMwLkVTQytcIltPXCIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9jdXNcIiksdGhpcy5fb25CbHVyLmZpcmUoKX1fc3luY1RleHRBcmVhKCl7aWYoIXRoaXMudGV4dGFyZWF8fCF0aGlzLmJ1ZmZlci5pc0N1cnNvckluVmlld3BvcnR8fHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmlzQ29tcG9zaW5nfHwhdGhpcy5fcmVuZGVyU2VydmljZSlyZXR1cm47Y29uc3QgZT10aGlzLmJ1ZmZlci55YmFzZSt0aGlzLmJ1ZmZlci55LHQ9dGhpcy5idWZmZXIubGluZXMuZ2V0KGUpO2lmKCF0KXJldHVybjtjb25zdCBpPU1hdGgubWluKHRoaXMuYnVmZmVyLngsdGhpcy5jb2xzLTEpLHM9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodCxyPXQuZ2V0V2lkdGgoaSksbj10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGgqcixvPXRoaXMuYnVmZmVyLnkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodCxhPWkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoO3RoaXMudGV4dGFyZWEuc3R5bGUubGVmdD1hK1wicHhcIix0aGlzLnRleHRhcmVhLnN0eWxlLnRvcD1vK1wicHhcIix0aGlzLnRleHRhcmVhLnN0eWxlLndpZHRoPW4rXCJweFwiLHRoaXMudGV4dGFyZWEuc3R5bGUuaGVpZ2h0PXMrXCJweFwiLHRoaXMudGV4dGFyZWEuc3R5bGUubGluZUhlaWdodD1zK1wicHhcIix0aGlzLnRleHRhcmVhLnN0eWxlLnpJbmRleD1cIi01XCJ9X2luaXRHbG9iYWwoKXt0aGlzLl9iaW5kS2V5cygpLHRoaXMucmVnaXN0ZXIoKDAsci5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCxcImNvcHlcIiwoZT0+e3RoaXMuaGFzU2VsZWN0aW9uKCkmJigwLHMuY29weUhhbmRsZXIpKGUsdGhpcy5fc2VsZWN0aW9uU2VydmljZSl9KSkpO2NvbnN0IGU9ZT0+KDAscy5oYW5kbGVQYXN0ZUV2ZW50KShlLHRoaXMudGV4dGFyZWEsdGhpcy5jb3JlU2VydmljZSx0aGlzLm9wdGlvbnNTZXJ2aWNlKTt0aGlzLnJlZ2lzdGVyKCgwLHIuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLFwicGFzdGVcIixlKSksdGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LFwicGFzdGVcIixlKSksay5pc0ZpcmVmb3g/dGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LFwibW91c2Vkb3duXCIsKGU9PnsyPT09ZS5idXR0b24mJigwLHMucmlnaHRDbGlja0hhbmRsZXIpKGUsdGhpcy50ZXh0YXJlYSx0aGlzLnNjcmVlbkVsZW1lbnQsdGhpcy5fc2VsZWN0aW9uU2VydmljZSx0aGlzLm9wdGlvbnMucmlnaHRDbGlja1NlbGVjdHNXb3JkKX0pKSk6dGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LFwiY29udGV4dG1lbnVcIiwoZT0+eygwLHMucmlnaHRDbGlja0hhbmRsZXIpKGUsdGhpcy50ZXh0YXJlYSx0aGlzLnNjcmVlbkVsZW1lbnQsdGhpcy5fc2VsZWN0aW9uU2VydmljZSx0aGlzLm9wdGlvbnMucmlnaHRDbGlja1NlbGVjdHNXb3JkKX0pKSksay5pc0xpbnV4JiZ0aGlzLnJlZ2lzdGVyKCgwLHIuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsXCJhdXhjbGlja1wiLChlPT57MT09PWUuYnV0dG9uJiYoMCxzLm1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IpKGUsdGhpcy50ZXh0YXJlYSx0aGlzLnNjcmVlbkVsZW1lbnQpfSkpKX1fYmluZEtleXMoKXt0aGlzLnJlZ2lzdGVyKCgwLHIuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLFwia2V5dXBcIiwoZT0+dGhpcy5fa2V5VXAoZSkpLCEwKSksdGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSxcImtleWRvd25cIiwoZT0+dGhpcy5fa2V5RG93bihlKSksITApKSx0aGlzLnJlZ2lzdGVyKCgwLHIuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLFwia2V5cHJlc3NcIiwoZT0+dGhpcy5fa2V5UHJlc3MoZSkpLCEwKSksdGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSxcImNvbXBvc2l0aW9uc3RhcnRcIiwoKCk9PnRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmNvbXBvc2l0aW9uc3RhcnQoKSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHIuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLFwiY29tcG9zaXRpb251cGRhdGVcIiwoZT0+dGhpcy5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb251cGRhdGUoZSkpKSksdGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSxcImNvbXBvc2l0aW9uZW5kXCIsKCgpPT50aGlzLl9jb21wb3NpdGlvbkhlbHBlci5jb21wb3NpdGlvbmVuZCgpKSkpLHRoaXMucmVnaXN0ZXIoKDAsci5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsXCJpbnB1dFwiLChlPT50aGlzLl9pbnB1dEV2ZW50KGUpKSwhMCkpLHRoaXMucmVnaXN0ZXIodGhpcy5vblJlbmRlcigoKCk9PnRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoKSkpKX1vcGVuKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcihcIlRlcm1pbmFsIHJlcXVpcmVzIGEgcGFyZW50IGVsZW1lbnQuXCIpO2lmKGUuaXNDb25uZWN0ZWR8fHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoXCJUZXJtaW5hbC5vcGVuIHdhcyBjYWxsZWQgb24gYW4gZWxlbWVudCB0aGF0IHdhcyBub3QgYXR0YWNoZWQgdG8gdGhlIERPTVwiKSx0aGlzLmVsZW1lbnQ/Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcmJnRoaXMuX2NvcmVCcm93c2VyU2VydmljZSlyZXR1cm4gdm9pZCh0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyE9PXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS53aW5kb3cmJih0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93PXRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSk7dGhpcy5fZG9jdW1lbnQ9ZS5vd25lckRvY3VtZW50LHRoaXMub3B0aW9ucy5kb2N1bWVudE92ZXJyaWRlJiZ0aGlzLm9wdGlvbnMuZG9jdW1lbnRPdmVycmlkZSBpbnN0YW5jZW9mIERvY3VtZW50JiYodGhpcy5fZG9jdW1lbnQ9dGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRvY3VtZW50T3ZlcnJpZGUpLHRoaXMuZWxlbWVudD10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuZWxlbWVudC5kaXI9XCJsdHJcIix0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRlcm1pbmFsXCIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwieHRlcm1cIiksZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO2NvbnN0IHQ9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3RoaXMuX3ZpZXdwb3J0RWxlbWVudD10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwieHRlcm0tdmlld3BvcnRcIiksdC5hcHBlbmRDaGlsZCh0aGlzLl92aWV3cG9ydEVsZW1lbnQpLHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYT10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYS5jbGFzc0xpc3QuYWRkKFwieHRlcm0tc2Nyb2xsLWFyZWFcIiksdGhpcy5fdmlld3BvcnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYSksdGhpcy5zY3JlZW5FbGVtZW50PXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5zY3JlZW5FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ4dGVybS1zY3JlZW5cIiksdGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5zY3JlZW5FbGVtZW50LFwibW91c2Vtb3ZlXCIsKGU9PnRoaXMudXBkYXRlQ3Vyc29yU3R5bGUoZSkpKSksdGhpcy5faGVscGVyQ29udGFpbmVyPXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5faGVscGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ4dGVybS1oZWxwZXJzXCIpLHRoaXMuc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9oZWxwZXJDb250YWluZXIpLHQuYXBwZW5kQ2hpbGQodGhpcy5zY3JlZW5FbGVtZW50KSx0aGlzLnRleHRhcmVhPXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKSx0aGlzLnRleHRhcmVhLmNsYXNzTGlzdC5hZGQoXCJ4dGVybS1oZWxwZXItdGV4dGFyZWFcIiksdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsby5wcm9tcHRMYWJlbCksay5pc0Nocm9tZU9TfHx0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZShcImFyaWEtbXVsdGlsaW5lXCIsXCJmYWxzZVwiKSx0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIsXCJvZmZcIiksdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoXCJhdXRvY2FwaXRhbGl6ZVwiLFwib2ZmXCIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKFwic3BlbGxjaGVja1wiLFwiZmFsc2VcIiksdGhpcy50ZXh0YXJlYS50YWJJbmRleD0wLHRoaXMuX2NvcmVCcm93c2VyU2VydmljZT10aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKHYuQ29yZUJyb3dzZXJTZXJ2aWNlLHRoaXMudGV4dGFyZWEsZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Pz93aW5kb3csdGhpcy5fZG9jdW1lbnQ/P1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93LmRvY3VtZW50Om51bGwpKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKFMuSUNvcmVCcm93c2VyU2VydmljZSx0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UpLHRoaXMucmVnaXN0ZXIoKDAsci5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsXCJmb2N1c1wiLChlPT50aGlzLl9oYW5kbGVUZXh0QXJlYUZvY3VzKGUpKSkpLHRoaXMucmVnaXN0ZXIoKDAsci5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsXCJibHVyXCIsKCgpPT50aGlzLl9oYW5kbGVUZXh0QXJlYUJsdXIoKSkpKSx0aGlzLl9oZWxwZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50ZXh0YXJlYSksdGhpcy5fY2hhclNpemVTZXJ2aWNlPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKHUuQ2hhclNpemVTZXJ2aWNlLHRoaXMuX2RvY3VtZW50LHRoaXMuX2hlbHBlckNvbnRhaW5lciksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShTLklDaGFyU2l6ZVNlcnZpY2UsdGhpcy5fY2hhclNpemVTZXJ2aWNlKSx0aGlzLl90aGVtZVNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQy5UaGVtZVNlcnZpY2UpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoUy5JVGhlbWVTZXJ2aWNlLHRoaXMuX3RoZW1lU2VydmljZSksdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShmLkNoYXJhY3RlckpvaW5lclNlcnZpY2UpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoUy5JQ2hhcmFjdGVySm9pbmVyU2VydmljZSx0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKSx0aGlzLl9yZW5kZXJTZXJ2aWNlPXRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoZy5SZW5kZXJTZXJ2aWNlLHRoaXMucm93cyx0aGlzLnNjcmVlbkVsZW1lbnQpKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKFMuSVJlbmRlclNlcnZpY2UsdGhpcy5fcmVuZGVyU2VydmljZSksdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSgoZT0+dGhpcy5fb25SZW5kZXIuZmlyZShlKSkpKSx0aGlzLm9uUmVzaXplKChlPT50aGlzLl9yZW5kZXJTZXJ2aWNlLnJlc2l6ZShlLmNvbHMsZS5yb3dzKSkpLHRoaXMuX2NvbXBvc2l0aW9uVmlldz10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QuYWRkKFwiY29tcG9zaXRpb24tdmlld1wiKSx0aGlzLl9jb21wb3NpdGlvbkhlbHBlcj10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShkLkNvbXBvc2l0aW9uSGVscGVyLHRoaXMudGV4dGFyZWEsdGhpcy5fY29tcG9zaXRpb25WaWV3KSx0aGlzLl9oZWxwZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY29tcG9zaXRpb25WaWV3KSx0aGlzLl9tb3VzZVNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UocC5Nb3VzZVNlcnZpY2UpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoUy5JTW91c2VTZXJ2aWNlLHRoaXMuX21vdXNlU2VydmljZSksdGhpcy5saW5raWZpZXI9dGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShuLkxpbmtpZmllcix0aGlzLnNjcmVlbkVsZW1lbnQpKSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodCk7dHJ5e3RoaXMuX29uV2lsbE9wZW4uZmlyZSh0aGlzLmVsZW1lbnQpfWNhdGNoe310aGlzLl9yZW5kZXJTZXJ2aWNlLmhhc1JlbmRlcmVyKCl8fHRoaXMuX3JlbmRlclNlcnZpY2Uuc2V0UmVuZGVyZXIodGhpcy5fY3JlYXRlUmVuZGVyZXIoKSksdGhpcy52aWV3cG9ydD10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShoLlZpZXdwb3J0LHRoaXMuX3ZpZXdwb3J0RWxlbWVudCx0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEpLHRoaXMudmlld3BvcnQub25SZXF1ZXN0U2Nyb2xsTGluZXMoKGU9PnRoaXMuc2Nyb2xsTGluZXMoZS5hbW91bnQsZS5zdXBwcmVzc1Njcm9sbEV2ZW50LDEpKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0U3luY1Njcm9sbEJhcigoKCk9PnRoaXMudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMudmlld3BvcnQpLHRoaXMucmVnaXN0ZXIodGhpcy5vbkN1cnNvck1vdmUoKCgpPT57dGhpcy5fcmVuZGVyU2VydmljZS5oYW5kbGVDdXJzb3JNb3ZlKCksdGhpcy5fc3luY1RleHRBcmVhKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vblJlc2l6ZSgoKCk9PnRoaXMuX3JlbmRlclNlcnZpY2UuaGFuZGxlUmVzaXplKHRoaXMuY29scyx0aGlzLnJvd3MpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vbkJsdXIoKCgpPT50aGlzLl9yZW5kZXJTZXJ2aWNlLmhhbmRsZUJsdXIoKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25Gb2N1cygoKCk9PnRoaXMuX3JlbmRlclNlcnZpY2UuaGFuZGxlRm9jdXMoKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKCgoKT0+dGhpcy52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpKSkpLHRoaXMuX3NlbGVjdGlvblNlcnZpY2U9dGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShtLlNlbGVjdGlvblNlcnZpY2UsdGhpcy5lbGVtZW50LHRoaXMuc2NyZWVuRWxlbWVudCx0aGlzLmxpbmtpZmllcikpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoUy5JU2VsZWN0aW9uU2VydmljZSx0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25SZXF1ZXN0U2Nyb2xsTGluZXMoKGU9PnRoaXMuc2Nyb2xsTGluZXMoZS5hbW91bnQsZS5zdXBwcmVzc1Njcm9sbEV2ZW50KSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25TZWxlY3Rpb25DaGFuZ2UoKCgpPT50aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCkpKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uUmVxdWVzdFJlZHJhdygoZT0+dGhpcy5fcmVuZGVyU2VydmljZS5oYW5kbGVTZWxlY3Rpb25DaGFuZ2VkKGUuc3RhcnQsZS5lbmQsZS5jb2x1bW5TZWxlY3RNb2RlKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25MaW51eE1vdXNlU2VsZWN0aW9uKChlPT57dGhpcy50ZXh0YXJlYS52YWx1ZT1lLHRoaXMudGV4dGFyZWEuZm9jdXMoKSx0aGlzLnRleHRhcmVhLnNlbGVjdCgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX29uU2Nyb2xsLmV2ZW50KChlPT57dGhpcy52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpLHRoaXMuX3NlbGVjdGlvblNlcnZpY2UucmVmcmVzaCgpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHIuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl92aWV3cG9ydEVsZW1lbnQsXCJzY3JvbGxcIiwoKCk9PnRoaXMuX3NlbGVjdGlvblNlcnZpY2UucmVmcmVzaCgpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoYy5CdWZmZXJEZWNvcmF0aW9uUmVuZGVyZXIsdGhpcy5zY3JlZW5FbGVtZW50KSksdGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LFwibW91c2Vkb3duXCIsKGU9PnRoaXMuX3NlbGVjdGlvblNlcnZpY2UuaGFuZGxlTW91c2VEb3duKGUpKSkpLHRoaXMuY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZT8odGhpcy5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlbmFibGUtbW91c2UtZXZlbnRzXCIpKTp0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmVuYWJsZSgpLHRoaXMub3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlJiYodGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIudmFsdWU9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTS5BY2Nlc3NpYmlsaXR5TWFuYWdlcix0aGlzKSksdGhpcy5yZWdpc3Rlcih0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uU3BlY2lmaWNPcHRpb25DaGFuZ2UoXCJzY3JlZW5SZWFkZXJNb2RlXCIsKGU9PnRoaXMuX2hhbmRsZVNjcmVlblJlYWRlck1vZGVPcHRpb25DaGFuZ2UoZSkpKSksdGhpcy5vcHRpb25zLm92ZXJ2aWV3UnVsZXJXaWR0aCYmKHRoaXMuX292ZXJ2aWV3UnVsZXJSZW5kZXJlcj10aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGwuT3ZlcnZpZXdSdWxlclJlbmRlcmVyLHRoaXMuX3ZpZXdwb3J0RWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQpKSksdGhpcy5vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKFwib3ZlcnZpZXdSdWxlcldpZHRoXCIsKGU9PnshdGhpcy5fb3ZlcnZpZXdSdWxlclJlbmRlcmVyJiZlJiZ0aGlzLl92aWV3cG9ydEVsZW1lbnQmJnRoaXMuc2NyZWVuRWxlbWVudCYmKHRoaXMuX292ZXJ2aWV3UnVsZXJSZW5kZXJlcj10aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGwuT3ZlcnZpZXdSdWxlclJlbmRlcmVyLHRoaXMuX3ZpZXdwb3J0RWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQpKSl9KSksdGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKSx0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksdGhpcy5faW5pdEdsb2JhbCgpLHRoaXMuYmluZE1vdXNlKCl9X2NyZWF0ZVJlbmRlcmVyKCl7cmV0dXJuIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKF8uRG9tUmVuZGVyZXIsdGhpcyx0aGlzLl9kb2N1bWVudCx0aGlzLmVsZW1lbnQsdGhpcy5zY3JlZW5FbGVtZW50LHRoaXMuX3ZpZXdwb3J0RWxlbWVudCx0aGlzLl9oZWxwZXJDb250YWluZXIsdGhpcy5saW5raWZpZXIpfWJpbmRNb3VzZSgpe2NvbnN0IGU9dGhpcyx0PXRoaXMuZWxlbWVudDtmdW5jdGlvbiBpKHQpe2NvbnN0IGk9ZS5fbW91c2VTZXJ2aWNlLmdldE1vdXNlUmVwb3J0Q29vcmRzKHQsZS5zY3JlZW5FbGVtZW50KTtpZighaSlyZXR1cm4hMTtsZXQgcyxyO3N3aXRjaCh0Lm92ZXJyaWRlVHlwZXx8dC50eXBlKXtjYXNlXCJtb3VzZW1vdmVcIjpyPTMyLHZvaWQgMD09PXQuYnV0dG9ucz8ocz0zLHZvaWQgMCE9PXQuYnV0dG9uJiYocz10LmJ1dHRvbjwzP3QuYnV0dG9uOjMpKTpzPTEmdC5idXR0b25zPzA6NCZ0LmJ1dHRvbnM/MToyJnQuYnV0dG9ucz8yOjM7YnJlYWs7Y2FzZVwibW91c2V1cFwiOnI9MCxzPXQuYnV0dG9uPDM/dC5idXR0b246MzticmVhaztjYXNlXCJtb3VzZWRvd25cIjpyPTEscz10LmJ1dHRvbjwzP3QuYnV0dG9uOjM7YnJlYWs7Y2FzZVwid2hlZWxcIjppZihlLl9jdXN0b21XaGVlbEV2ZW50SGFuZGxlciYmITE9PT1lLl9jdXN0b21XaGVlbEV2ZW50SGFuZGxlcih0KSlyZXR1cm4hMTtpZigwPT09ZS52aWV3cG9ydC5nZXRMaW5lc1Njcm9sbGVkKHQpKXJldHVybiExO3I9dC5kZWx0YVk8MD8wOjEscz00O2JyZWFrO2RlZmF1bHQ6cmV0dXJuITF9cmV0dXJuISh2b2lkIDA9PT1yfHx2b2lkIDA9PT1zfHxzPjQpJiZlLmNvcmVNb3VzZVNlcnZpY2UudHJpZ2dlck1vdXNlRXZlbnQoe2NvbDppLmNvbCxyb3c6aS5yb3cseDppLngseTppLnksYnV0dG9uOnMsYWN0aW9uOnIsY3RybDp0LmN0cmxLZXksYWx0OnQuYWx0S2V5LHNoaWZ0OnQuc2hpZnRLZXl9KX1jb25zdCBzPXttb3VzZXVwOm51bGwsd2hlZWw6bnVsbCxtb3VzZWRyYWc6bnVsbCxtb3VzZW1vdmU6bnVsbH0sbj17bW91c2V1cDplPT4oaShlKSxlLmJ1dHRvbnN8fCh0aGlzLl9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHMubW91c2V1cCkscy5tb3VzZWRyYWcmJnRoaXMuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixzLm1vdXNlZHJhZykpLHRoaXMuY2FuY2VsKGUpKSx3aGVlbDplPT4oaShlKSx0aGlzLmNhbmNlbChlLCEwKSksbW91c2VkcmFnOmU9PntlLmJ1dHRvbnMmJmkoZSl9LG1vdXNlbW92ZTplPT57ZS5idXR0b25zfHxpKGUpfX07dGhpcy5yZWdpc3Rlcih0aGlzLmNvcmVNb3VzZVNlcnZpY2Uub25Qcm90b2NvbENoYW5nZSgoZT0+e2U/KFwiZGVidWdcIj09PXRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sb2dMZXZlbCYmdGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcIkJpbmRpbmcgdG8gbW91c2UgZXZlbnRzOlwiLHRoaXMuY29yZU1vdXNlU2VydmljZS5leHBsYWluRXZlbnRzKGUpKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImVuYWJsZS1tb3VzZS1ldmVudHNcIiksdGhpcy5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCkpOih0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKFwiVW5iaW5kaW5nIGZyb20gbW91c2UgZXZlbnRzLlwiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImVuYWJsZS1tb3VzZS1ldmVudHNcIiksdGhpcy5fc2VsZWN0aW9uU2VydmljZS5lbmFibGUoKSksOCZlP3MubW91c2Vtb3ZlfHwodC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsbi5tb3VzZW1vdmUpLHMubW91c2Vtb3ZlPW4ubW91c2Vtb3ZlKToodC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIscy5tb3VzZW1vdmUpLHMubW91c2Vtb3ZlPW51bGwpLDE2JmU/cy53aGVlbHx8KHQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsbi53aGVlbCx7cGFzc2l2ZTohMX0pLHMud2hlZWw9bi53aGVlbCk6KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIscy53aGVlbCkscy53aGVlbD1udWxsKSwyJmU/cy5tb3VzZXVwfHwocy5tb3VzZXVwPW4ubW91c2V1cCk6KHRoaXMuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIscy5tb3VzZXVwKSxzLm1vdXNldXA9bnVsbCksNCZlP3MubW91c2VkcmFnfHwocy5tb3VzZWRyYWc9bi5tb3VzZWRyYWcpOih0aGlzLl9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIscy5tb3VzZWRyYWcpLHMubW91c2VkcmFnPW51bGwpfSkpKSx0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9dGhpcy5jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sLHRoaXMucmVnaXN0ZXIoKDAsci5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHQsXCJtb3VzZWRvd25cIiwoZT0+e2lmKGUucHJldmVudERlZmF1bHQoKSx0aGlzLmZvY3VzKCksdGhpcy5jb3JlTW91c2VTZXJ2aWNlLmFyZU1vdXNlRXZlbnRzQWN0aXZlJiYhdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zaG91bGRGb3JjZVNlbGVjdGlvbihlKSlyZXR1cm4gaShlKSxzLm1vdXNldXAmJnRoaXMuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIscy5tb3VzZXVwKSxzLm1vdXNlZHJhZyYmdGhpcy5fZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHMubW91c2VkcmFnKSx0aGlzLmNhbmNlbChlKX0pKSksdGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodCxcIndoZWVsXCIsKGU9PntpZighcy53aGVlbCl7aWYodGhpcy5fY3VzdG9tV2hlZWxFdmVudEhhbmRsZXImJiExPT09dGhpcy5fY3VzdG9tV2hlZWxFdmVudEhhbmRsZXIoZSkpcmV0dXJuITE7aWYoIXRoaXMuYnVmZmVyLmhhc1Njcm9sbGJhY2spe2NvbnN0IHQ9dGhpcy52aWV3cG9ydC5nZXRMaW5lc1Njcm9sbGVkKGUpO2lmKDA9PT10KXJldHVybjtjb25zdCBpPUQuQzAuRVNDKyh0aGlzLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXM/XCJPXCI6XCJbXCIpKyhlLmRlbHRhWTwwP1wiQVwiOlwiQlwiKTtsZXQgcz1cIlwiO2ZvcihsZXQgZT0wO2U8TWF0aC5hYnModCk7ZSsrKXMrPWk7cmV0dXJuIHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLCEwKSx0aGlzLmNhbmNlbChlLCEwKX1yZXR1cm4gdGhpcy52aWV3cG9ydC5oYW5kbGVXaGVlbChlKT90aGlzLmNhbmNlbChlKTp2b2lkIDB9fSkse3Bhc3NpdmU6ITF9KSksdGhpcy5yZWdpc3RlcigoMCxyLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodCxcInRvdWNoc3RhcnRcIiwoZT0+e2lmKCF0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmUpcmV0dXJuIHRoaXMudmlld3BvcnQuaGFuZGxlVG91Y2hTdGFydChlKSx0aGlzLmNhbmNlbChlKX0pLHtwYXNzaXZlOiEwfSkpLHRoaXMucmVnaXN0ZXIoKDAsci5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHQsXCJ0b3VjaG1vdmVcIiwoZT0+e2lmKCF0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmUpcmV0dXJuIHRoaXMudmlld3BvcnQuaGFuZGxlVG91Y2hNb3ZlKGUpP3ZvaWQgMDp0aGlzLmNhbmNlbChlKX0pLHtwYXNzaXZlOiExfSkpfXJlZnJlc2goZSx0KXt0aGlzLl9yZW5kZXJTZXJ2aWNlPy5yZWZyZXNoUm93cyhlLHQpfXVwZGF0ZUN1cnNvclN0eWxlKGUpe3RoaXMuX3NlbGVjdGlvblNlcnZpY2U/LnNob3VsZENvbHVtblNlbGVjdChlKT90aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNvbHVtbi1zZWxlY3RcIik6dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJjb2x1bW4tc2VsZWN0XCIpfV9zaG93Q3Vyc29yKCl7dGhpcy5jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkfHwodGhpcy5jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkPSEwLHRoaXMucmVmcmVzaCh0aGlzLmJ1ZmZlci55LHRoaXMuYnVmZmVyLnkpKX1zY3JvbGxMaW5lcyhlLHQsaT0wKXsxPT09aT8oc3VwZXIuc2Nyb2xsTGluZXMoZSx0LGkpLHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKSk6dGhpcy52aWV3cG9ydD8uc2Nyb2xsTGluZXMoZSl9cGFzdGUoZSl7KDAscy5wYXN0ZSkoZSx0aGlzLnRleHRhcmVhLHRoaXMuY29yZVNlcnZpY2UsdGhpcy5vcHRpb25zU2VydmljZSl9YXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpe3RoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcj1lfWF0dGFjaEN1c3RvbVdoZWVsRXZlbnRIYW5kbGVyKGUpe3RoaXMuX2N1c3RvbVdoZWVsRXZlbnRIYW5kbGVyPWV9cmVnaXN0ZXJMaW5rUHJvdmlkZXIoZSl7cmV0dXJuIHRoaXMuX2xpbmtQcm92aWRlclNlcnZpY2UucmVnaXN0ZXJMaW5rUHJvdmlkZXIoZSl9cmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoZSl7aWYoIXRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UpdGhyb3cgbmV3IEVycm9yKFwiVGVybWluYWwgbXVzdCBiZSBvcGVuZWQgZmlyc3RcIik7Y29uc3QgdD10aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLnJlZ2lzdGVyKGUpO3JldHVybiB0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksdH1kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGUpe2lmKCF0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKXRocm93IG5ldyBFcnJvcihcIlRlcm1pbmFsIG11c3QgYmUgb3BlbmVkIGZpcnN0XCIpO3RoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UuZGVyZWdpc3RlcihlKSYmdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpfWdldCBtYXJrZXJzKCl7cmV0dXJuIHRoaXMuYnVmZmVyLm1hcmtlcnN9cmVnaXN0ZXJNYXJrZXIoZSl7cmV0dXJuIHRoaXMuYnVmZmVyLmFkZE1hcmtlcih0aGlzLmJ1ZmZlci55YmFzZSt0aGlzLmJ1ZmZlci55K2UpfXJlZ2lzdGVyRGVjb3JhdGlvbihlKXtyZXR1cm4gdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UucmVnaXN0ZXJEZWNvcmF0aW9uKGUpfWhhc1NlbGVjdGlvbigpe3JldHVybiEhdGhpcy5fc2VsZWN0aW9uU2VydmljZSYmdGhpcy5fc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb259c2VsZWN0KGUsdCxpKXt0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNldFNlbGVjdGlvbihlLHQsaSl9Z2V0U2VsZWN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvblNlcnZpY2U/dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0OlwiXCJ9Z2V0U2VsZWN0aW9uUG9zaXRpb24oKXtpZih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlJiZ0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmhhc1NlbGVjdGlvbilyZXR1cm57c3RhcnQ6e3g6dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25TdGFydFswXSx5OnRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uU3RhcnRbMV19LGVuZDp7eDp0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvbkVuZFswXSx5OnRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uRW5kWzFdfX19Y2xlYXJTZWxlY3Rpb24oKXt0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlPy5jbGVhclNlbGVjdGlvbigpfXNlbGVjdEFsbCgpe3RoaXMuX3NlbGVjdGlvblNlcnZpY2U/LnNlbGVjdEFsbCgpfXNlbGVjdExpbmVzKGUsdCl7dGhpcy5fc2VsZWN0aW9uU2VydmljZT8uc2VsZWN0TGluZXMoZSx0KX1fa2V5RG93bihlKXtpZih0aGlzLl9rZXlEb3duSGFuZGxlZD0hMSx0aGlzLl9rZXlEb3duU2Vlbj0hMCx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXImJiExPT09dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpKXJldHVybiExO2NvbnN0IHQ9dGhpcy5icm93c2VyLmlzTWFjJiZ0aGlzLm9wdGlvbnMubWFjT3B0aW9uSXNNZXRhJiZlLmFsdEtleTtpZighdCYmIXRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmtleWRvd24oZSkpcmV0dXJuIHRoaXMub3B0aW9ucy5zY3JvbGxPblVzZXJJbnB1dCYmdGhpcy5idWZmZXIueWJhc2UhPT10aGlzLmJ1ZmZlci55ZGlzcCYmdGhpcy5zY3JvbGxUb0JvdHRvbSgpLCExO3R8fFwiRGVhZFwiIT09ZS5rZXkmJlwiQWx0R3JhcGhcIiE9PWUua2V5fHwodGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSEwKTtjb25zdCBpPSgwLFIuZXZhbHVhdGVLZXlib2FyZEV2ZW50KShlLHRoaXMuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyx0aGlzLmJyb3dzZXIuaXNNYWMsdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSk7aWYodGhpcy51cGRhdGVDdXJzb3JTdHlsZShlKSwzPT09aS50eXBlfHwyPT09aS50eXBlKXtjb25zdCB0PXRoaXMucm93cy0xO3JldHVybiB0aGlzLnNjcm9sbExpbmVzKDI9PT1pLnR5cGU/LXQ6dCksdGhpcy5jYW5jZWwoZSwhMCl9cmV0dXJuIDE9PT1pLnR5cGUmJnRoaXMuc2VsZWN0QWxsKCksISF0aGlzLl9pc1RoaXJkTGV2ZWxTaGlmdCh0aGlzLmJyb3dzZXIsZSl8fChpLmNhbmNlbCYmdGhpcy5jYW5jZWwoZSwhMCksIWkua2V5fHwhIShlLmtleSYmIWUuY3RybEtleSYmIWUuYWx0S2V5JiYhZS5tZXRhS2V5JiYxPT09ZS5rZXkubGVuZ3RoJiZlLmtleS5jaGFyQ29kZUF0KDApPj02NSYmZS5rZXkuY2hhckNvZGVBdCgwKTw9OTApfHwodGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5Pyh0aGlzLl91bnByb2Nlc3NlZERlYWRLZXk9ITEsITApOihpLmtleSE9PUQuQzAuRVRYJiZpLmtleSE9PUQuQzAuQ1J8fCh0aGlzLnRleHRhcmVhLnZhbHVlPVwiXCIpLHRoaXMuX29uS2V5LmZpcmUoe2tleTppLmtleSxkb21FdmVudDplfSksdGhpcy5fc2hvd0N1cnNvcigpLHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpLmtleSwhMCksIXRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlfHxlLmFsdEtleXx8ZS5jdHJsS2V5P3RoaXMuY2FuY2VsKGUsITApOnZvaWQodGhpcy5fa2V5RG93bkhhbmRsZWQ9ITApKSkpfV9pc1RoaXJkTGV2ZWxTaGlmdChlLHQpe2NvbnN0IGk9ZS5pc01hYyYmIXRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEmJnQuYWx0S2V5JiYhdC5jdHJsS2V5JiYhdC5tZXRhS2V5fHxlLmlzV2luZG93cyYmdC5hbHRLZXkmJnQuY3RybEtleSYmIXQubWV0YUtleXx8ZS5pc1dpbmRvd3MmJnQuZ2V0TW9kaWZpZXJTdGF0ZShcIkFsdEdyYXBoXCIpO3JldHVyblwia2V5cHJlc3NcIj09PXQudHlwZT9pOmkmJighdC5rZXlDb2RlfHx0LmtleUNvZGU+NDcpfV9rZXlVcChlKXt0aGlzLl9rZXlEb3duU2Vlbj0hMSx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXImJiExPT09dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpfHwoZnVuY3Rpb24oZSl7cmV0dXJuIDE2PT09ZS5rZXlDb2RlfHwxNz09PWUua2V5Q29kZXx8MTg9PT1lLmtleUNvZGV9KGUpfHx0aGlzLmZvY3VzKCksdGhpcy51cGRhdGVDdXJzb3JTdHlsZShlKSx0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITEpfV9rZXlQcmVzcyhlKXtsZXQgdDtpZih0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITEsdGhpcy5fa2V5RG93bkhhbmRsZWQpcmV0dXJuITE7aWYodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyJiYhMT09PXRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihlKSlyZXR1cm4hMTtpZih0aGlzLmNhbmNlbChlKSxlLmNoYXJDb2RlKXQ9ZS5jaGFyQ29kZTtlbHNlIGlmKG51bGw9PT1lLndoaWNofHx2b2lkIDA9PT1lLndoaWNoKXQ9ZS5rZXlDb2RlO2Vsc2V7aWYoMD09PWUud2hpY2h8fDA9PT1lLmNoYXJDb2RlKXJldHVybiExO3Q9ZS53aGljaH1yZXR1cm4hKCF0fHwoZS5hbHRLZXl8fGUuY3RybEtleXx8ZS5tZXRhS2V5KSYmIXRoaXMuX2lzVGhpcmRMZXZlbFNoaWZ0KHRoaXMuYnJvd3NlcixlKXx8KHQ9U3RyaW5nLmZyb21DaGFyQ29kZSh0KSx0aGlzLl9vbktleS5maXJlKHtrZXk6dCxkb21FdmVudDplfSksdGhpcy5fc2hvd0N1cnNvcigpLHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh0LCEwKSx0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITAsdGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSExLDApKX1faW5wdXRFdmVudChlKXtpZihlLmRhdGEmJlwiaW5zZXJ0VGV4dFwiPT09ZS5pbnB1dFR5cGUmJighZS5jb21wb3NlZHx8IXRoaXMuX2tleURvd25TZWVuKSYmIXRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlKXtpZih0aGlzLl9rZXlQcmVzc0hhbmRsZWQpcmV0dXJuITE7dGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSExO2NvbnN0IHQ9ZS5kYXRhO3JldHVybiB0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodCwhMCksdGhpcy5jYW5jZWwoZSksITB9cmV0dXJuITF9cmVzaXplKGUsdCl7ZSE9PXRoaXMuY29sc3x8dCE9PXRoaXMucm93cz9zdXBlci5yZXNpemUoZSx0KTp0aGlzLl9jaGFyU2l6ZVNlcnZpY2UmJiF0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplJiZ0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpfV9hZnRlclJlc2l6ZShlLHQpe3RoaXMuX2NoYXJTaXplU2VydmljZT8ubWVhc3VyZSgpLHRoaXMudmlld3BvcnQ/LnN5bmNTY3JvbGxBcmVhKCEwKX1jbGVhcigpe2lmKDAhPT10aGlzLmJ1ZmZlci55YmFzZXx8MCE9PXRoaXMuYnVmZmVyLnkpe3RoaXMuYnVmZmVyLmNsZWFyQWxsTWFya2VycygpLHRoaXMuYnVmZmVyLmxpbmVzLnNldCgwLHRoaXMuYnVmZmVyLmxpbmVzLmdldCh0aGlzLmJ1ZmZlci55YmFzZSt0aGlzLmJ1ZmZlci55KSksdGhpcy5idWZmZXIubGluZXMubGVuZ3RoPTEsdGhpcy5idWZmZXIueWRpc3A9MCx0aGlzLmJ1ZmZlci55YmFzZT0wLHRoaXMuYnVmZmVyLnk9MDtmb3IobGV0IGU9MTtlPHRoaXMucm93cztlKyspdGhpcy5idWZmZXIubGluZXMucHVzaCh0aGlzLmJ1ZmZlci5nZXRCbGFua0xpbmUoTC5ERUZBVUxUX0FUVFJfREFUQSkpO3RoaXMuX29uU2Nyb2xsLmZpcmUoe3Bvc2l0aW9uOnRoaXMuYnVmZmVyLnlkaXNwLHNvdXJjZTowfSksdGhpcy52aWV3cG9ydD8ucmVzZXQoKSx0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSl9fXJlc2V0KCl7dGhpcy5vcHRpb25zLnJvd3M9dGhpcy5yb3dzLHRoaXMub3B0aW9ucy5jb2xzPXRoaXMuY29scztjb25zdCBlPXRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcjt0aGlzLl9zZXR1cCgpLHN1cGVyLnJlc2V0KCksdGhpcy5fc2VsZWN0aW9uU2VydmljZT8ucmVzZXQoKSx0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5yZXNldCgpLHRoaXMudmlld3BvcnQ/LnJlc2V0KCksdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyPWUsdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpfWNsZWFyVGV4dHVyZUF0bGFzKCl7dGhpcy5fcmVuZGVyU2VydmljZT8uY2xlYXJUZXh0dXJlQXRsYXMoKX1fcmVwb3J0Rm9jdXMoKXt0aGlzLmVsZW1lbnQ/LmNsYXNzTGlzdC5jb250YWlucyhcImZvY3VzXCIpP3RoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChELkMwLkVTQytcIltJXCIpOnRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChELkMwLkVTQytcIltPXCIpfV9yZXBvcnRXaW5kb3dzT3B0aW9ucyhlKXtpZih0aGlzLl9yZW5kZXJTZXJ2aWNlKXN3aXRjaChlKXtjYXNlIFQuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlLkdFVF9XSU5fU0laRV9QSVhFTFM6Y29uc3QgZT10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aC50b0ZpeGVkKDApLHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jYW52YXMuaGVpZ2h0LnRvRml4ZWQoMCk7dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0QuQzAuRVNDfVs0OyR7dH07JHtlfXRgKTticmVhaztjYXNlIFQuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlLkdFVF9DRUxMX1NJWkVfUElYRUxTOmNvbnN0IGk9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoLnRvRml4ZWQoMCkscz10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0LnRvRml4ZWQoMCk7dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0QuQzAuRVNDfVs2OyR7c307JHtpfXRgKX19Y2FuY2VsKGUsdCl7aWYodGhpcy5vcHRpb25zLmNhbmNlbEV2ZW50c3x8dClyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksITF9fXQuVGVybWluYWw9UH0sOTkyNDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuVGltZUJhc2VkRGVib3VuY2VyPXZvaWQgMCx0LlRpbWVCYXNlZERlYm91bmNlcj1jbGFzc3tjb25zdHJ1Y3RvcihlLHQ9MWUzKXt0aGlzLl9yZW5kZXJDYWxsYmFjaz1lLHRoaXMuX2RlYm91bmNlVGhyZXNob2xkTVM9dCx0aGlzLl9sYXN0UmVmcmVzaE1zPTAsdGhpcy5fYWRkaXRpb25hbFJlZnJlc2hSZXF1ZXN0ZWQ9ITF9ZGlzcG9zZSgpe3RoaXMuX3JlZnJlc2hUaW1lb3V0SUQmJmNsZWFyVGltZW91dCh0aGlzLl9yZWZyZXNoVGltZW91dElEKX1yZWZyZXNoKGUsdCxpKXt0aGlzLl9yb3dDb3VudD1pLGU9dm9pZCAwIT09ZT9lOjAsdD12b2lkIDAhPT10P3Q6dGhpcy5fcm93Q291bnQtMSx0aGlzLl9yb3dTdGFydD12b2lkIDAhPT10aGlzLl9yb3dTdGFydD9NYXRoLm1pbih0aGlzLl9yb3dTdGFydCxlKTplLHRoaXMuX3Jvd0VuZD12b2lkIDAhPT10aGlzLl9yb3dFbmQ/TWF0aC5tYXgodGhpcy5fcm93RW5kLHQpOnQ7Y29uc3Qgcz1EYXRlLm5vdygpO2lmKHMtdGhpcy5fbGFzdFJlZnJlc2hNcz49dGhpcy5fZGVib3VuY2VUaHJlc2hvbGRNUyl0aGlzLl9sYXN0UmVmcmVzaE1zPXMsdGhpcy5faW5uZXJSZWZyZXNoKCk7ZWxzZSBpZighdGhpcy5fYWRkaXRpb25hbFJlZnJlc2hSZXF1ZXN0ZWQpe2NvbnN0IGU9cy10aGlzLl9sYXN0UmVmcmVzaE1zLHQ9dGhpcy5fZGVib3VuY2VUaHJlc2hvbGRNUy1lO3RoaXMuX2FkZGl0aW9uYWxSZWZyZXNoUmVxdWVzdGVkPSEwLHRoaXMuX3JlZnJlc2hUaW1lb3V0SUQ9d2luZG93LnNldFRpbWVvdXQoKCgpPT57dGhpcy5fbGFzdFJlZnJlc2hNcz1EYXRlLm5vdygpLHRoaXMuX2lubmVyUmVmcmVzaCgpLHRoaXMuX2FkZGl0aW9uYWxSZWZyZXNoUmVxdWVzdGVkPSExLHRoaXMuX3JlZnJlc2hUaW1lb3V0SUQ9dm9pZCAwfSksdCl9fV9pbm5lclJlZnJlc2goKXtpZih2b2lkIDA9PT10aGlzLl9yb3dTdGFydHx8dm9pZCAwPT09dGhpcy5fcm93RW5kfHx2b2lkIDA9PT10aGlzLl9yb3dDb3VudClyZXR1cm47Y29uc3QgZT1NYXRoLm1heCh0aGlzLl9yb3dTdGFydCwwKSx0PU1hdGgubWluKHRoaXMuX3Jvd0VuZCx0aGlzLl9yb3dDb3VudC0xKTt0aGlzLl9yb3dTdGFydD12b2lkIDAsdGhpcy5fcm93RW5kPXZvaWQgMCx0aGlzLl9yZW5kZXJDYWxsYmFjayhlLHQpfX19LDE2ODA6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbj1hcmd1bWVudHMubGVuZ3RoLG89bjwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlvPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG89KG48Mz9yKG8pOm4+Mz9yKHQsaSxvKTpyKHQsaSkpfHxvKTtyZXR1cm4gbj4zJiZvJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG8pLG99LHI9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5WaWV3cG9ydD12b2lkIDA7Y29uc3Qgbj1pKDM2NTYpLG89aSg0NzI1KSxhPWkoODQ2MCksaD1pKDg0NCksYz1pKDI1ODUpO2xldCBsPXQuVmlld3BvcnQ9Y2xhc3MgZXh0ZW5kcyBoLkRpc3Bvc2FibGV7Y29uc3RydWN0b3IoZSx0LGkscyxyLG8saCxjKXtzdXBlcigpLHRoaXMuX3ZpZXdwb3J0RWxlbWVudD1lLHRoaXMuX3Njcm9sbEFyZWE9dCx0aGlzLl9idWZmZXJTZXJ2aWNlPWksdGhpcy5fb3B0aW9uc1NlcnZpY2U9cyx0aGlzLl9jaGFyU2l6ZVNlcnZpY2U9cix0aGlzLl9yZW5kZXJTZXJ2aWNlPW8sdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlPWgsdGhpcy5zY3JvbGxCYXJXaWR0aD0wLHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQ9MCx0aGlzLl9jdXJyZW50RGV2aWNlQ2VsbEhlaWdodD0wLHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aD0wLHRoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0PTAsdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0PTAsdGhpcy5fbGFzdFRvdWNoWT0wLHRoaXMuX2xhc3RTY3JvbGxUb3A9MCx0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGw9MCx0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9bnVsbCx0aGlzLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQ9ITEsdGhpcy5fc21vb3RoU2Nyb2xsU3RhdGU9e3N0YXJ0VGltZTowLG9yaWdpbjotMSx0YXJnZXQ6LTF9LHRoaXMuX29uUmVxdWVzdFNjcm9sbExpbmVzPXRoaXMucmVnaXN0ZXIobmV3IGEuRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVxdWVzdFNjcm9sbExpbmVzPXRoaXMuX29uUmVxdWVzdFNjcm9sbExpbmVzLmV2ZW50LHRoaXMuc2Nyb2xsQmFyV2lkdGg9dGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldFdpZHRoLXRoaXMuX3Njcm9sbEFyZWEub2Zmc2V0V2lkdGh8fDE1LHRoaXMucmVnaXN0ZXIoKDAsbi5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCxcInNjcm9sbFwiLHRoaXMuX2hhbmRsZVNjcm9sbC5iaW5kKHRoaXMpKSksdGhpcy5fYWN0aXZlQnVmZmVyPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGU9PnRoaXMuX2FjdGl2ZUJ1ZmZlcj1lLmFjdGl2ZUJ1ZmZlcikpKSx0aGlzLl9yZW5kZXJEaW1lbnNpb25zPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucyx0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKChlPT50aGlzLl9yZW5kZXJEaW1lbnNpb25zPWUpKSksdGhpcy5faGFuZGxlVGhlbWVDaGFuZ2UoYy5jb2xvcnMpLHRoaXMucmVnaXN0ZXIoYy5vbkNoYW5nZUNvbG9ycygoZT0+dGhpcy5faGFuZGxlVGhlbWVDaGFuZ2UoZSkpKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKFwic2Nyb2xsYmFja1wiLCgoKT0+dGhpcy5zeW5jU2Nyb2xsQXJlYSgpKSkpLHNldFRpbWVvdXQoKCgpPT50aGlzLnN5bmNTY3JvbGxBcmVhKCkpKX1faGFuZGxlVGhlbWVDaGFuZ2UoZSl7dGhpcy5fdmlld3BvcnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcj1lLmJhY2tncm91bmQuY3NzfXJlc2V0KCl7dGhpcy5fY3VycmVudFJvd0hlaWdodD0wLHRoaXMuX2N1cnJlbnREZXZpY2VDZWxsSGVpZ2h0PTAsdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoPTAsdGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ9MCx0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQ9MCx0aGlzLl9sYXN0VG91Y2hZPTAsdGhpcy5fbGFzdFNjcm9sbFRvcD0wLHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgoKT0+dGhpcy5zeW5jU2Nyb2xsQXJlYSgpKSl9X3JlZnJlc2goZSl7aWYoZSlyZXR1cm4gdGhpcy5faW5uZXJSZWZyZXNoKCksdm9pZChudWxsIT09dGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lJiZ0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSkpO251bGw9PT10aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUmJih0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9dGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCgpPT50aGlzLl9pbm5lclJlZnJlc2goKSkpKX1faW5uZXJSZWZyZXNoKCl7aWYodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodD4wKXt0aGlzLl9jdXJyZW50Um93SGVpZ2h0PXRoaXMuX3JlbmRlckRpbWVuc2lvbnMuZGV2aWNlLmNlbGwuaGVpZ2h0L3RoaXMuX2NvcmVCcm93c2VyU2VydmljZS5kcHIsdGhpcy5fY3VycmVudERldmljZUNlbGxIZWlnaHQ9dGhpcy5fcmVuZGVyRGltZW5zaW9ucy5kZXZpY2UuY2VsbC5oZWlnaHQsdGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ9dGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldEhlaWdodDtjb25zdCBlPU1hdGgucm91bmQodGhpcy5fY3VycmVudFJvd0hlaWdodCp0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGgpKyh0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodC10aGlzLl9yZW5kZXJEaW1lbnNpb25zLmNzcy5jYW52YXMuaGVpZ2h0KTt0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQhPT1lJiYodGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0PWUsdGhpcy5fc2Nyb2xsQXJlYS5zdHlsZS5oZWlnaHQ9dGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0K1wicHhcIil9Y29uc3QgZT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCp0aGlzLl9jdXJyZW50Um93SGVpZ2h0O3RoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AhPT1lJiYodGhpcy5faWdub3JlTmV4dFNjcm9sbEV2ZW50PSEwLHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3A9ZSksdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPW51bGx9c3luY1Njcm9sbEFyZWEoZT0hMSl7aWYodGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoIT09dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoKXJldHVybiB0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGg9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoLHZvaWQgdGhpcy5fcmVmcmVzaChlKTt0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodD09PXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2FudmFzLmhlaWdodCYmdGhpcy5fbGFzdFNjcm9sbFRvcD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci55ZGlzcCp0aGlzLl9jdXJyZW50Um93SGVpZ2h0JiZ0aGlzLl9yZW5kZXJEaW1lbnNpb25zLmRldmljZS5jZWxsLmhlaWdodD09PXRoaXMuX2N1cnJlbnREZXZpY2VDZWxsSGVpZ2h0fHx0aGlzLl9yZWZyZXNoKGUpfV9oYW5kbGVTY3JvbGwoZSl7aWYodGhpcy5fbGFzdFNjcm9sbFRvcD10aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wLCF0aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0UGFyZW50KXJldHVybjtpZih0aGlzLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQpcmV0dXJuIHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudD0hMSx2b2lkIHRoaXMuX29uUmVxdWVzdFNjcm9sbExpbmVzLmZpcmUoe2Ftb3VudDowLHN1cHByZXNzU2Nyb2xsRXZlbnQ6ITB9KTtjb25zdCB0PU1hdGgucm91bmQodGhpcy5fbGFzdFNjcm9sbFRvcC90aGlzLl9jdXJyZW50Um93SGVpZ2h0KS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDt0aGlzLl9vblJlcXVlc3RTY3JvbGxMaW5lcy5maXJlKHthbW91bnQ6dCxzdXBwcmVzc1Njcm9sbEV2ZW50OiEwfSl9X3Ntb290aFNjcm9sbCgpe2lmKHRoaXMuX2lzRGlzcG9zZWR8fC0xPT09dGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUub3JpZ2lufHwtMT09PXRoaXMuX3Ntb290aFNjcm9sbFN0YXRlLnRhcmdldClyZXR1cm47Y29uc3QgZT10aGlzLl9zbW9vdGhTY3JvbGxQZXJjZW50KCk7dGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcD10aGlzLl9zbW9vdGhTY3JvbGxTdGF0ZS5vcmlnaW4rTWF0aC5yb3VuZChlKih0aGlzLl9zbW9vdGhTY3JvbGxTdGF0ZS50YXJnZXQtdGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUub3JpZ2luKSksZTwxP3RoaXMuX2NvcmVCcm93c2VyU2VydmljZS53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgoKT0+dGhpcy5fc21vb3RoU2Nyb2xsKCkpKTp0aGlzLl9jbGVhclNtb290aFNjcm9sbFN0YXRlKCl9X3Ntb290aFNjcm9sbFBlcmNlbnQoKXtyZXR1cm4gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zbW9vdGhTY3JvbGxEdXJhdGlvbiYmdGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUuc3RhcnRUaW1lP01hdGgubWF4KE1hdGgubWluKChEYXRlLm5vdygpLXRoaXMuX3Ntb290aFNjcm9sbFN0YXRlLnN0YXJ0VGltZSkvdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zbW9vdGhTY3JvbGxEdXJhdGlvbiwxKSwwKToxfV9jbGVhclNtb290aFNjcm9sbFN0YXRlKCl7dGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUuc3RhcnRUaW1lPTAsdGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUub3JpZ2luPS0xLHRoaXMuX3Ntb290aFNjcm9sbFN0YXRlLnRhcmdldD0tMX1fYnViYmxlU2Nyb2xsKGUsdCl7Y29uc3QgaT10aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wK3RoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0O3JldHVybiEodDwwJiYwIT09dGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcHx8dD4wJiZpPHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCl8fChlLmNhbmNlbGFibGUmJmUucHJldmVudERlZmF1bHQoKSwhMSl9aGFuZGxlV2hlZWwoZSl7Y29uc3QgdD10aGlzLl9nZXRQaXhlbHNTY3JvbGxlZChlKTtyZXR1cm4gMCE9PXQmJih0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNtb290aFNjcm9sbER1cmF0aW9uPyh0aGlzLl9zbW9vdGhTY3JvbGxTdGF0ZS5zdGFydFRpbWU9RGF0ZS5ub3coKSx0aGlzLl9zbW9vdGhTY3JvbGxQZXJjZW50KCk8MT8odGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUub3JpZ2luPXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AsLTE9PT10aGlzLl9zbW9vdGhTY3JvbGxTdGF0ZS50YXJnZXQ/dGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUudGFyZ2V0PXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3ArdDp0aGlzLl9zbW9vdGhTY3JvbGxTdGF0ZS50YXJnZXQrPXQsdGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUudGFyZ2V0PU1hdGgubWF4KE1hdGgubWluKHRoaXMuX3Ntb290aFNjcm9sbFN0YXRlLnRhcmdldCx0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KSwwKSx0aGlzLl9zbW9vdGhTY3JvbGwoKSk6dGhpcy5fY2xlYXJTbW9vdGhTY3JvbGxTdGF0ZSgpKTp0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wKz10LHRoaXMuX2J1YmJsZVNjcm9sbChlLHQpKX1zY3JvbGxMaW5lcyhlKXtpZigwIT09ZSlpZih0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNtb290aFNjcm9sbER1cmF0aW9uKXtjb25zdCB0PWUqdGhpcy5fY3VycmVudFJvd0hlaWdodDt0aGlzLl9zbW9vdGhTY3JvbGxTdGF0ZS5zdGFydFRpbWU9RGF0ZS5ub3coKSx0aGlzLl9zbW9vdGhTY3JvbGxQZXJjZW50KCk8MT8odGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUub3JpZ2luPXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AsdGhpcy5fc21vb3RoU2Nyb2xsU3RhdGUudGFyZ2V0PXRoaXMuX3Ntb290aFNjcm9sbFN0YXRlLm9yaWdpbit0LHRoaXMuX3Ntb290aFNjcm9sbFN0YXRlLnRhcmdldD1NYXRoLm1heChNYXRoLm1pbih0aGlzLl9zbW9vdGhTY3JvbGxTdGF0ZS50YXJnZXQsdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbEhlaWdodCksMCksdGhpcy5fc21vb3RoU2Nyb2xsKCkpOnRoaXMuX2NsZWFyU21vb3RoU2Nyb2xsU3RhdGUoKX1lbHNlIHRoaXMuX29uUmVxdWVzdFNjcm9sbExpbmVzLmZpcmUoe2Ftb3VudDplLHN1cHByZXNzU2Nyb2xsRXZlbnQ6ITF9KX1fZ2V0UGl4ZWxzU2Nyb2xsZWQoZSl7aWYoMD09PWUuZGVsdGFZfHxlLnNoaWZ0S2V5KXJldHVybiAwO2xldCB0PXRoaXMuX2FwcGx5U2Nyb2xsTW9kaWZpZXIoZS5kZWx0YVksZSk7cmV0dXJuIGUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfTElORT90Kj10aGlzLl9jdXJyZW50Um93SGVpZ2h0OmUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSYmKHQqPXRoaXMuX2N1cnJlbnRSb3dIZWlnaHQqdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSx0fWdldEJ1ZmZlckVsZW1lbnRzKGUsdCl7bGV0IGkscz1cIlwiO2NvbnN0IHI9W10sbj10Pz90aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgsbz10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcztmb3IobGV0IHQ9ZTt0PG47dCsrKXtjb25zdCBlPW8uZ2V0KHQpO2lmKCFlKWNvbnRpbnVlO2NvbnN0IG49by5nZXQodCsxKT8uaXNXcmFwcGVkO2lmKHMrPWUudHJhbnNsYXRlVG9TdHJpbmcoIW4pLCFufHx0PT09by5sZW5ndGgtMSl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UudGV4dENvbnRlbnQ9cyxyLnB1c2goZSkscy5sZW5ndGg+MCYmKGk9ZSkscz1cIlwifX1yZXR1cm57YnVmZmVyRWxlbWVudHM6cixjdXJzb3JFbGVtZW50Oml9fWdldExpbmVzU2Nyb2xsZWQoZSl7aWYoMD09PWUuZGVsdGFZfHxlLnNoaWZ0S2V5KXJldHVybiAwO2xldCB0PXRoaXMuX2FwcGx5U2Nyb2xsTW9kaWZpZXIoZS5kZWx0YVksZSk7cmV0dXJuIGUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUElYRUw/KHQvPXRoaXMuX2N1cnJlbnRSb3dIZWlnaHQrMCx0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwrPXQsdD1NYXRoLmZsb29yKE1hdGguYWJzKHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCkpKih0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGw+MD8xOi0xKSx0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwlPTEpOmUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSYmKHQqPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdH1fYXBwbHlTY3JvbGxNb2RpZmllcihlLHQpe2NvbnN0IGk9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mYXN0U2Nyb2xsTW9kaWZpZXI7cmV0dXJuXCJhbHRcIj09PWkmJnQuYWx0S2V5fHxcImN0cmxcIj09PWkmJnQuY3RybEtleXx8XCJzaGlmdFwiPT09aSYmdC5zaGlmdEtleT9lKnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZmFzdFNjcm9sbFNlbnNpdGl2aXR5KnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHk6ZSp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcm9sbFNlbnNpdGl2aXR5fWhhbmRsZVRvdWNoU3RhcnQoZSl7dGhpcy5fbGFzdFRvdWNoWT1lLnRvdWNoZXNbMF0ucGFnZVl9aGFuZGxlVG91Y2hNb3ZlKGUpe2NvbnN0IHQ9dGhpcy5fbGFzdFRvdWNoWS1lLnRvdWNoZXNbMF0ucGFnZVk7cmV0dXJuIHRoaXMuX2xhc3RUb3VjaFk9ZS50b3VjaGVzWzBdLnBhZ2VZLDAhPT10JiYodGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCs9dCx0aGlzLl9idWJibGVTY3JvbGwoZSx0KSl9fTt0LlZpZXdwb3J0PWw9cyhbcigyLGMuSUJ1ZmZlclNlcnZpY2UpLHIoMyxjLklPcHRpb25zU2VydmljZSkscig0LG8uSUNoYXJTaXplU2VydmljZSkscig1LG8uSVJlbmRlclNlcnZpY2UpLHIoNixvLklDb3JlQnJvd3NlclNlcnZpY2UpLHIoNyxvLklUaGVtZVNlcnZpY2UpXSxsKX0sMzEwNzpmdW5jdGlvbihlLHQsaSl7dmFyIHM9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQsaSxzKXt2YXIgcixuPWFyZ3VtZW50cy5sZW5ndGgsbz1uPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW89UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobz0objwzP3Iobyk6bj4zP3IodCxpLG8pOnIodCxpKSl8fG8pO3JldHVybiBuPjMmJm8mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbyksb30scj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcj12b2lkIDA7Y29uc3Qgbj1pKDQ3MjUpLG89aSg4NDQpLGE9aSgyNTg1KTtsZXQgaD10LkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcj1jbGFzcyBleHRlbmRzIG8uRGlzcG9zYWJsZXtjb25zdHJ1Y3RvcihlLHQsaSxzLHIpe3N1cGVyKCksdGhpcy5fc2NyZWVuRWxlbWVudD1lLHRoaXMuX2J1ZmZlclNlcnZpY2U9dCx0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2U9aSx0aGlzLl9kZWNvcmF0aW9uU2VydmljZT1zLHRoaXMuX3JlbmRlclNlcnZpY2U9cix0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHM9bmV3IE1hcCx0aGlzLl9hbHRCdWZmZXJJc0FjdGl2ZT0hMSx0aGlzLl9kaW1lbnNpb25zQ2hhbmdlZD0hMSx0aGlzLl9jb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZChcInh0ZXJtLWRlY29yYXRpb24tY29udGFpbmVyXCIpLHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY29udGFpbmVyKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKCgoKT0+dGhpcy5fZG9SZWZyZXNoRGVjb3JhdGlvbnMoKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKCgoKT0+e3RoaXMuX2RpbWVuc2lvbnNDaGFuZ2VkPSEwLHRoaXMuX3F1ZXVlUmVmcmVzaCgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5vbkRwckNoYW5nZSgoKCk9PnRoaXMuX3F1ZXVlUmVmcmVzaCgpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKCgpPT57dGhpcy5fYWx0QnVmZmVySXNBY3RpdmU9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI9PT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWx0fSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKCgpPT50aGlzLl9xdWV1ZVJlZnJlc2goKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlbW92ZWQoKGU9PnRoaXMuX3JlbW92ZURlY29yYXRpb24oZSkpKSksdGhpcy5yZWdpc3RlcigoMCxvLnRvRGlzcG9zYWJsZSkoKCgpPT57dGhpcy5fY29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5jbGVhcigpfSkpKX1fcXVldWVSZWZyZXNoKCl7dm9pZCAwPT09dGhpcy5fYW5pbWF0aW9uRnJhbWUmJih0aGlzLl9hbmltYXRpb25GcmFtZT10aGlzLl9yZW5kZXJTZXJ2aWNlLmFkZFJlZnJlc2hDYWxsYmFjaygoKCk9Pnt0aGlzLl9kb1JlZnJlc2hEZWNvcmF0aW9ucygpLHRoaXMuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMH0pKSl9X2RvUmVmcmVzaERlY29yYXRpb25zKCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZGVjb3JhdGlvbnMpdGhpcy5fcmVuZGVyRGVjb3JhdGlvbihlKTt0aGlzLl9kaW1lbnNpb25zQ2hhbmdlZD0hMX1fcmVuZGVyRGVjb3JhdGlvbihlKXt0aGlzLl9yZWZyZXNoU3R5bGUoZSksdGhpcy5fZGltZW5zaW9uc0NoYW5nZWQmJnRoaXMuX3JlZnJlc2hYUG9zaXRpb24oZSl9X2NyZWF0ZUVsZW1lbnQoZSl7Y29uc3QgdD10aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UubWFpbkRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc0xpc3QuYWRkKFwieHRlcm0tZGVjb3JhdGlvblwiKSx0LmNsYXNzTGlzdC50b2dnbGUoXCJ4dGVybS1kZWNvcmF0aW9uLXRvcC1sYXllclwiLFwidG9wXCI9PT1lPy5vcHRpb25zPy5sYXllciksdC5zdHlsZS53aWR0aD1gJHtNYXRoLnJvdW5kKChlLm9wdGlvbnMud2lkdGh8fDEpKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aCl9cHhgLHQuc3R5bGUuaGVpZ2h0PShlLm9wdGlvbnMuaGVpZ2h0fHwxKSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0K1wicHhcIix0LnN0eWxlLnRvcD0oZS5tYXJrZXIubGluZS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLnlkaXNwKSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0K1wicHhcIix0LnN0eWxlLmxpbmVIZWlnaHQ9YCR7dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodH1weGA7Y29uc3QgaT1lLm9wdGlvbnMueD8/MDtyZXR1cm4gaSYmaT50aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMmJih0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXMuX3JlZnJlc2hYUG9zaXRpb24oZSx0KSx0fV9yZWZyZXNoU3R5bGUoZSl7Y29uc3QgdD1lLm1hcmtlci5saW5lLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUueWRpc3A7aWYodDwwfHx0Pj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpZS5lbGVtZW50JiYoZS5lbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZS5vblJlbmRlckVtaXR0ZXIuZmlyZShlLmVsZW1lbnQpKTtlbHNle2xldCBpPXRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5nZXQoZSk7aXx8KGk9dGhpcy5fY3JlYXRlRWxlbWVudChlKSxlLmVsZW1lbnQ9aSx0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuc2V0KGUsaSksdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGkpLGUub25EaXNwb3NlKCgoKT0+e3RoaXMuX2RlY29yYXRpb25FbGVtZW50cy5kZWxldGUoZSksaS5yZW1vdmUoKX0pKSksaS5zdHlsZS50b3A9dCp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0K1wicHhcIixpLnN0eWxlLmRpc3BsYXk9dGhpcy5fYWx0QnVmZmVySXNBY3RpdmU/XCJub25lXCI6XCJibG9ja1wiLGUub25SZW5kZXJFbWl0dGVyLmZpcmUoaSl9fV9yZWZyZXNoWFBvc2l0aW9uKGUsdD1lLmVsZW1lbnQpe2lmKCF0KXJldHVybjtjb25zdCBpPWUub3B0aW9ucy54Pz8wO1wicmlnaHRcIj09PShlLm9wdGlvbnMuYW5jaG9yfHxcImxlZnRcIik/dC5zdHlsZS5yaWdodD1pP2kqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoK1wicHhcIjpcIlwiOnQuc3R5bGUubGVmdD1pP2kqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoK1wicHhcIjpcIlwifV9yZW1vdmVEZWNvcmF0aW9uKGUpe3RoaXMuX2RlY29yYXRpb25FbGVtZW50cy5nZXQoZSk/LnJlbW92ZSgpLHRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5kZWxldGUoZSksZS5kaXNwb3NlKCl9fTt0LkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcj1oPXMoW3IoMSxhLklCdWZmZXJTZXJ2aWNlKSxyKDIsbi5JQ29yZUJyb3dzZXJTZXJ2aWNlKSxyKDMsYS5JRGVjb3JhdGlvblNlcnZpY2UpLHIoNCxuLklSZW5kZXJTZXJ2aWNlKV0saCl9LDU4NzE6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNvbG9yWm9uZVN0b3JlPXZvaWQgMCx0LkNvbG9yWm9uZVN0b3JlPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5fem9uZXM9W10sdGhpcy5fem9uZVBvb2w9W10sdGhpcy5fem9uZVBvb2xJbmRleD0wLHRoaXMuX2xpbmVQYWRkaW5nPXtmdWxsOjAsbGVmdDowLGNlbnRlcjowLHJpZ2h0OjB9fWdldCB6b25lcygpe3JldHVybiB0aGlzLl96b25lUG9vbC5sZW5ndGg9TWF0aC5taW4odGhpcy5fem9uZVBvb2wubGVuZ3RoLHRoaXMuX3pvbmVzLmxlbmd0aCksdGhpcy5fem9uZXN9Y2xlYXIoKXt0aGlzLl96b25lcy5sZW5ndGg9MCx0aGlzLl96b25lUG9vbEluZGV4PTB9YWRkRGVjb3JhdGlvbihlKXtpZihlLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMpe2Zvcihjb25zdCB0IG9mIHRoaXMuX3pvbmVzKWlmKHQuY29sb3I9PT1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMuY29sb3ImJnQucG9zaXRpb249PT1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24pe2lmKHRoaXMuX2xpbmVJbnRlcnNlY3RzWm9uZSh0LGUubWFya2VyLmxpbmUpKXJldHVybjtpZih0aGlzLl9saW5lQWRqYWNlbnRUb1pvbmUodCxlLm1hcmtlci5saW5lLGUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbikpcmV0dXJuIHZvaWQgdGhpcy5fYWRkTGluZVRvWm9uZSh0LGUubWFya2VyLmxpbmUpfWlmKHRoaXMuX3pvbmVQb29sSW5kZXg8dGhpcy5fem9uZVBvb2wubGVuZ3RoKXJldHVybiB0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4XS5jb2xvcj1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMuY29sb3IsdGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleF0ucG9zaXRpb249ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uLHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLnN0YXJ0QnVmZmVyTGluZT1lLm1hcmtlci5saW5lLHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLmVuZEJ1ZmZlckxpbmU9ZS5tYXJrZXIubGluZSx2b2lkIHRoaXMuX3pvbmVzLnB1c2godGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleCsrXSk7dGhpcy5fem9uZXMucHVzaCh7Y29sb3I6ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLmNvbG9yLHBvc2l0aW9uOmUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbixzdGFydEJ1ZmZlckxpbmU6ZS5tYXJrZXIubGluZSxlbmRCdWZmZXJMaW5lOmUubWFya2VyLmxpbmV9KSx0aGlzLl96b25lUG9vbC5wdXNoKHRoaXMuX3pvbmVzW3RoaXMuX3pvbmVzLmxlbmd0aC0xXSksdGhpcy5fem9uZVBvb2xJbmRleCsrfX1zZXRQYWRkaW5nKGUpe3RoaXMuX2xpbmVQYWRkaW5nPWV9X2xpbmVJbnRlcnNlY3RzWm9uZShlLHQpe3JldHVybiB0Pj1lLnN0YXJ0QnVmZmVyTGluZSYmdDw9ZS5lbmRCdWZmZXJMaW5lfV9saW5lQWRqYWNlbnRUb1pvbmUoZSx0LGkpe3JldHVybiB0Pj1lLnN0YXJ0QnVmZmVyTGluZS10aGlzLl9saW5lUGFkZGluZ1tpfHxcImZ1bGxcIl0mJnQ8PWUuZW5kQnVmZmVyTGluZSt0aGlzLl9saW5lUGFkZGluZ1tpfHxcImZ1bGxcIl19X2FkZExpbmVUb1pvbmUoZSx0KXtlLnN0YXJ0QnVmZmVyTGluZT1NYXRoLm1pbihlLnN0YXJ0QnVmZmVyTGluZSx0KSxlLmVuZEJ1ZmZlckxpbmU9TWF0aC5tYXgoZS5lbmRCdWZmZXJMaW5lLHQpfX19LDU3NDQ6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbj1hcmd1bWVudHMubGVuZ3RoLG89bjwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlvPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG89KG48Mz9yKG8pOm4+Mz9yKHQsaSxvKTpyKHQsaSkpfHxvKTtyZXR1cm4gbj4zJiZvJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG8pLG99LHI9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5PdmVydmlld1J1bGVyUmVuZGVyZXI9dm9pZCAwO2NvbnN0IG49aSg1ODcxKSxvPWkoNDcyNSksYT1pKDg0NCksaD1pKDI1ODUpLGM9e2Z1bGw6MCxsZWZ0OjAsY2VudGVyOjAscmlnaHQ6MH0sbD17ZnVsbDowLGxlZnQ6MCxjZW50ZXI6MCxyaWdodDowfSxkPXtmdWxsOjAsbGVmdDowLGNlbnRlcjowLHJpZ2h0OjB9O2xldCBfPXQuT3ZlcnZpZXdSdWxlclJlbmRlcmVyPWNsYXNzIGV4dGVuZHMgYS5EaXNwb3NhYmxle2dldCBfd2lkdGgoKXtyZXR1cm4gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5vdmVydmlld1J1bGVyV2lkdGh8fDB9Y29uc3RydWN0b3IoZSx0LGkscyxyLG8saCl7c3VwZXIoKSx0aGlzLl92aWV3cG9ydEVsZW1lbnQ9ZSx0aGlzLl9zY3JlZW5FbGVtZW50PXQsdGhpcy5fYnVmZmVyU2VydmljZT1pLHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlPXMsdGhpcy5fcmVuZGVyU2VydmljZT1yLHRoaXMuX29wdGlvbnNTZXJ2aWNlPW8sdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlPWgsdGhpcy5fY29sb3Jab25lU3RvcmU9bmV3IG4uQ29sb3Jab25lU3RvcmUsdGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucz0hMCx0aGlzLl9zaG91bGRVcGRhdGVBbmNob3I9ITAsdGhpcy5fbGFzdEtub3duQnVmZmVyTGVuZ3RoPTAsdGhpcy5fY2FudmFzPXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5tYWluRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSx0aGlzLl9jYW52YXMuY2xhc3NMaXN0LmFkZChcInh0ZXJtLWRlY29yYXRpb24tb3ZlcnZpZXctcnVsZXJcIiksdGhpcy5fcmVmcmVzaENhbnZhc0RpbWVuc2lvbnMoKSx0aGlzLl92aWV3cG9ydEVsZW1lbnQucGFyZW50RWxlbWVudD8uaW5zZXJ0QmVmb3JlKHRoaXMuX2NhbnZhcyx0aGlzLl92aWV3cG9ydEVsZW1lbnQpO2NvbnN0IGM9dGhpcy5fY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtpZighYyl0aHJvdyBuZXcgRXJyb3IoXCJDdHggY2Fubm90IGJlIG51bGxcIik7dGhpcy5fY3R4PWMsdGhpcy5fcmVnaXN0ZXJEZWNvcmF0aW9uTGlzdGVuZXJzKCksdGhpcy5fcmVnaXN0ZXJCdWZmZXJDaGFuZ2VMaXN0ZW5lcnMoKSx0aGlzLl9yZWdpc3RlckRpbWVuc2lvbkNoYW5nZUxpc3RlbmVycygpLHRoaXMucmVnaXN0ZXIoKDAsYS50b0Rpc3Bvc2FibGUpKCgoKT0+e3RoaXMuX2NhbnZhcz8ucmVtb3ZlKCl9KSkpfV9yZWdpc3RlckRlY29yYXRpb25MaXN0ZW5lcnMoKXt0aGlzLnJlZ2lzdGVyKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKCgpPT50aGlzLl9xdWV1ZVJlZnJlc2godm9pZCAwLCEwKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlbW92ZWQoKCgpPT50aGlzLl9xdWV1ZVJlZnJlc2godm9pZCAwLCEwKSkpKX1fcmVnaXN0ZXJCdWZmZXJDaGFuZ2VMaXN0ZW5lcnMoKXt0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKCgoKT0+dGhpcy5fcXVldWVSZWZyZXNoKCkpKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoKCk9Pnt0aGlzLl9jYW52YXMuc3R5bGUuZGlzcGxheT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcj09PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hbHQ/XCJub25lXCI6XCJibG9ja1wifSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2Uub25TY3JvbGwoKCgpPT57dGhpcy5fbGFzdEtub3duQnVmZmVyTGVuZ3RoIT09dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm5vcm1hbC5saW5lcy5sZW5ndGgmJih0aGlzLl9yZWZyZXNoRHJhd0hlaWdodENvbnN0YW50cygpLHRoaXMuX3JlZnJlc2hDb2xvclpvbmVQYWRkaW5nKCkpfSkpKX1fcmVnaXN0ZXJEaW1lbnNpb25DaGFuZ2VMaXN0ZW5lcnMoKXt0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXIoKCgpPT57dGhpcy5fY29udGFpbmVySGVpZ2h0JiZ0aGlzLl9jb250YWluZXJIZWlnaHQ9PT10aGlzLl9zY3JlZW5FbGVtZW50LmNsaWVudEhlaWdodHx8KHRoaXMuX3F1ZXVlUmVmcmVzaCghMCksdGhpcy5fY29udGFpbmVySGVpZ2h0PXRoaXMuX3NjcmVlbkVsZW1lbnQuY2xpZW50SGVpZ2h0KX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKFwib3ZlcnZpZXdSdWxlcldpZHRoXCIsKCgpPT50aGlzLl9xdWV1ZVJlZnJlc2goITApKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLm9uRHByQ2hhbmdlKCgoKT0+dGhpcy5fcXVldWVSZWZyZXNoKCEwKSkpKSx0aGlzLl9xdWV1ZVJlZnJlc2goITApfV9yZWZyZXNoRHJhd0NvbnN0YW50cygpe2NvbnN0IGU9TWF0aC5mbG9vcih0aGlzLl9jYW52YXMud2lkdGgvMyksdD1NYXRoLmNlaWwodGhpcy5fY2FudmFzLndpZHRoLzMpO2wuZnVsbD10aGlzLl9jYW52YXMud2lkdGgsbC5sZWZ0PWUsbC5jZW50ZXI9dCxsLnJpZ2h0PWUsdGhpcy5fcmVmcmVzaERyYXdIZWlnaHRDb25zdGFudHMoKSxkLmZ1bGw9MCxkLmxlZnQ9MCxkLmNlbnRlcj1sLmxlZnQsZC5yaWdodD1sLmxlZnQrbC5jZW50ZXJ9X3JlZnJlc2hEcmF3SGVpZ2h0Q29uc3RhbnRzKCl7Yy5mdWxsPU1hdGgucm91bmQoMip0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuZHByKTtjb25zdCBlPXRoaXMuX2NhbnZhcy5oZWlnaHQvdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoLHQ9TWF0aC5yb3VuZChNYXRoLm1heChNYXRoLm1pbihlLDEyKSw2KSp0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuZHByKTtjLmxlZnQ9dCxjLmNlbnRlcj10LGMucmlnaHQ9dH1fcmVmcmVzaENvbG9yWm9uZVBhZGRpbmcoKXt0aGlzLl9jb2xvclpvbmVTdG9yZS5zZXRQYWRkaW5nKHtmdWxsOk1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgvKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqYy5mdWxsKSxsZWZ0Ok1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgvKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqYy5sZWZ0KSxjZW50ZXI6TWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aC8odGhpcy5fY2FudmFzLmhlaWdodC0xKSpjLmNlbnRlcikscmlnaHQ6TWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aC8odGhpcy5fY2FudmFzLmhlaWdodC0xKSpjLnJpZ2h0KX0pLHRoaXMuX2xhc3RLbm93bkJ1ZmZlckxlbmd0aD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMubm9ybWFsLmxpbmVzLmxlbmd0aH1fcmVmcmVzaENhbnZhc0RpbWVuc2lvbnMoKXt0aGlzLl9jYW52YXMuc3R5bGUud2lkdGg9YCR7dGhpcy5fd2lkdGh9cHhgLHRoaXMuX2NhbnZhcy53aWR0aD1NYXRoLnJvdW5kKHRoaXMuX3dpZHRoKnRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5kcHIpLHRoaXMuX2NhbnZhcy5zdHlsZS5oZWlnaHQ9YCR7dGhpcy5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHR9cHhgLHRoaXMuX2NhbnZhcy5oZWlnaHQ9TWF0aC5yb3VuZCh0aGlzLl9zY3JlZW5FbGVtZW50LmNsaWVudEhlaWdodCp0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuZHByKSx0aGlzLl9yZWZyZXNoRHJhd0NvbnN0YW50cygpLHRoaXMuX3JlZnJlc2hDb2xvclpvbmVQYWRkaW5nKCl9X3JlZnJlc2hEZWNvcmF0aW9ucygpe3RoaXMuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnMmJnRoaXMuX3JlZnJlc2hDYW52YXNEaW1lbnNpb25zKCksdGhpcy5fY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5fY2FudmFzLndpZHRoLHRoaXMuX2NhbnZhcy5oZWlnaHQpLHRoaXMuX2NvbG9yWm9uZVN0b3JlLmNsZWFyKCk7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZGVjb3JhdGlvbnMpdGhpcy5fY29sb3Jab25lU3RvcmUuYWRkRGVjb3JhdGlvbihlKTt0aGlzLl9jdHgubGluZVdpZHRoPTE7Y29uc3QgZT10aGlzLl9jb2xvclpvbmVTdG9yZS56b25lcztmb3IoY29uc3QgdCBvZiBlKVwiZnVsbFwiIT09dC5wb3NpdGlvbiYmdGhpcy5fcmVuZGVyQ29sb3Jab25lKHQpO2Zvcihjb25zdCB0IG9mIGUpXCJmdWxsXCI9PT10LnBvc2l0aW9uJiZ0aGlzLl9yZW5kZXJDb2xvclpvbmUodCk7dGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucz0hMSx0aGlzLl9zaG91bGRVcGRhdGVBbmNob3I9ITF9X3JlbmRlckNvbG9yWm9uZShlKXt0aGlzLl9jdHguZmlsbFN0eWxlPWUuY29sb3IsdGhpcy5fY3R4LmZpbGxSZWN0KGRbZS5wb3NpdGlvbnx8XCJmdWxsXCJdLE1hdGgucm91bmQoKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqKGUuc3RhcnRCdWZmZXJMaW5lL3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUubGluZXMubGVuZ3RoKS1jW2UucG9zaXRpb258fFwiZnVsbFwiXS8yKSxsW2UucG9zaXRpb258fFwiZnVsbFwiXSxNYXRoLnJvdW5kKCh0aGlzLl9jYW52YXMuaGVpZ2h0LTEpKigoZS5lbmRCdWZmZXJMaW5lLWUuc3RhcnRCdWZmZXJMaW5lKS90aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aCkrY1tlLnBvc2l0aW9ufHxcImZ1bGxcIl0pKX1fcXVldWVSZWZyZXNoKGUsdCl7dGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucz1lfHx0aGlzLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zLHRoaXMuX3Nob3VsZFVwZGF0ZUFuY2hvcj10fHx0aGlzLl9zaG91bGRVcGRhdGVBbmNob3Isdm9pZCAwPT09dGhpcy5fYW5pbWF0aW9uRnJhbWUmJih0aGlzLl9hbmltYXRpb25GcmFtZT10aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9Pnt0aGlzLl9yZWZyZXNoRGVjb3JhdGlvbnMoKSx0aGlzLl9hbmltYXRpb25GcmFtZT12b2lkIDB9KSkpfX07dC5PdmVydmlld1J1bGVyUmVuZGVyZXI9Xz1zKFtyKDIsaC5JQnVmZmVyU2VydmljZSkscigzLGguSURlY29yYXRpb25TZXJ2aWNlKSxyKDQsby5JUmVuZGVyU2VydmljZSkscig1LGguSU9wdGlvbnNTZXJ2aWNlKSxyKDYsby5JQ29yZUJyb3dzZXJTZXJ2aWNlKV0sXyl9LDI5NTA6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbj1hcmd1bWVudHMubGVuZ3RoLG89bjwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlvPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG89KG48Mz9yKG8pOm4+Mz9yKHQsaSxvKTpyKHQsaSkpfHxvKTtyZXR1cm4gbj4zJiZvJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG8pLG99LHI9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5Db21wb3NpdGlvbkhlbHBlcj12b2lkIDA7Y29uc3Qgbj1pKDQ3MjUpLG89aSgyNTg1KSxhPWkoMjU4NCk7bGV0IGg9dC5Db21wb3NpdGlvbkhlbHBlcj1jbGFzc3tnZXQgaXNDb21wb3NpbmcoKXtyZXR1cm4gdGhpcy5faXNDb21wb3Npbmd9Y29uc3RydWN0b3IoZSx0LGkscyxyLG4pe3RoaXMuX3RleHRhcmVhPWUsdGhpcy5fY29tcG9zaXRpb25WaWV3PXQsdGhpcy5fYnVmZmVyU2VydmljZT1pLHRoaXMuX29wdGlvbnNTZXJ2aWNlPXMsdGhpcy5fY29yZVNlcnZpY2U9cix0aGlzLl9yZW5kZXJTZXJ2aWNlPW4sdGhpcy5faXNDb21wb3Npbmc9ITEsdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb249ITEsdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbj17c3RhcnQ6MCxlbmQ6MH0sdGhpcy5fZGF0YUFscmVhZHlTZW50PVwiXCJ9Y29tcG9zaXRpb25zdGFydCgpe3RoaXMuX2lzQ29tcG9zaW5nPSEwLHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQ9dGhpcy5fdGV4dGFyZWEudmFsdWUubGVuZ3RoLHRoaXMuX2NvbXBvc2l0aW9uVmlldy50ZXh0Q29udGVudD1cIlwiLHRoaXMuX2RhdGFBbHJlYWR5U2VudD1cIlwiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpfWNvbXBvc2l0aW9udXBkYXRlKGUpe3RoaXMuX2NvbXBvc2l0aW9uVmlldy50ZXh0Q29udGVudD1lLmRhdGEsdGhpcy51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKCksc2V0VGltZW91dCgoKCk9Pnt0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZD10aGlzLl90ZXh0YXJlYS52YWx1ZS5sZW5ndGh9KSwwKX1jb21wb3NpdGlvbmVuZCgpe3RoaXMuX2ZpbmFsaXplQ29tcG9zaXRpb24oITApfWtleWRvd24oZSl7aWYodGhpcy5faXNDb21wb3Npbmd8fHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uKXtpZigyMjk9PT1lLmtleUNvZGUpcmV0dXJuITE7aWYoMTY9PT1lLmtleUNvZGV8fDE3PT09ZS5rZXlDb2RlfHwxOD09PWUua2V5Q29kZSlyZXR1cm4hMTt0aGlzLl9maW5hbGl6ZUNvbXBvc2l0aW9uKCExKX1yZXR1cm4gMjI5IT09ZS5rZXlDb2RlfHwodGhpcy5faGFuZGxlQW55VGV4dGFyZWFDaGFuZ2VzKCksITEpfV9maW5hbGl6ZUNvbXBvc2l0aW9uKGUpe2lmKHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpLHRoaXMuX2lzQ29tcG9zaW5nPSExLGUpe2NvbnN0IGU9e3N0YXJ0OnRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQsZW5kOnRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kfTt0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbj0hMCxzZXRUaW1lb3V0KCgoKT0+e2lmKHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uKXtsZXQgdDt0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbj0hMSxlLnN0YXJ0Kz10aGlzLl9kYXRhQWxyZWFkeVNlbnQubGVuZ3RoLHQ9dGhpcy5faXNDb21wb3Npbmc/dGhpcy5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKGUuc3RhcnQsZS5lbmQpOnRoaXMuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyhlLnN0YXJ0KSx0Lmxlbmd0aD4wJiZ0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHQsITApfX0pLDApfWVsc2V7dGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb249ITE7Y29uc3QgZT10aGlzLl90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcodGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCx0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZCk7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChlLCEwKX19X2hhbmRsZUFueVRleHRhcmVhQ2hhbmdlcygpe2NvbnN0IGU9dGhpcy5fdGV4dGFyZWEudmFsdWU7c2V0VGltZW91dCgoKCk9PntpZighdGhpcy5faXNDb21wb3Npbmcpe2NvbnN0IHQ9dGhpcy5fdGV4dGFyZWEudmFsdWUsaT10LnJlcGxhY2UoZSxcIlwiKTt0aGlzLl9kYXRhQWxyZWFkeVNlbnQ9aSx0Lmxlbmd0aD5lLmxlbmd0aD90aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGksITApOnQubGVuZ3RoPGUubGVuZ3RoP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7YS5DMC5ERUx9YCwhMCk6dC5sZW5ndGg9PT1lLmxlbmd0aCYmdCE9PWUmJnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodCwhMCl9fSksMCl9dXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cyhlKXtpZih0aGlzLl9pc0NvbXBvc2luZyl7aWYodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuaXNDdXJzb3JJblZpZXdwb3J0KXtjb25zdCBlPU1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpLHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodCxpPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodCxzPWUqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoO3RoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5sZWZ0PXMrXCJweFwiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS50b3A9aStcInB4XCIsdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmhlaWdodD10K1wicHhcIix0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGluZUhlaWdodD10K1wicHhcIix0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udEZhbWlseT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHksdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmZvbnRTaXplPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemUrXCJweFwiO2NvbnN0IHI9dGhpcy5fY29tcG9zaXRpb25WaWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RoaXMuX3RleHRhcmVhLnN0eWxlLmxlZnQ9cytcInB4XCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUudG9wPWkrXCJweFwiLHRoaXMuX3RleHRhcmVhLnN0eWxlLndpZHRoPU1hdGgubWF4KHIud2lkdGgsMSkrXCJweFwiLHRoaXMuX3RleHRhcmVhLnN0eWxlLmhlaWdodD1NYXRoLm1heChyLmhlaWdodCwxKStcInB4XCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUubGluZUhlaWdodD1yLmhlaWdodCtcInB4XCJ9ZXx8c2V0VGltZW91dCgoKCk9PnRoaXMudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cyghMCkpLDApfX19O3QuQ29tcG9zaXRpb25IZWxwZXI9aD1zKFtyKDIsby5JQnVmZmVyU2VydmljZSkscigzLG8uSU9wdGlvbnNTZXJ2aWNlKSxyKDQsby5JQ29yZVNlcnZpY2UpLHIoNSxuLklSZW5kZXJTZXJ2aWNlKV0saCl9LDk4MDY6KGUsdCk9PntmdW5jdGlvbiBpKGUsdCxpKXtjb25zdCBzPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscj1lLmdldENvbXB1dGVkU3R5bGUoaSksbj1wYXJzZUludChyLmdldFByb3BlcnR5VmFsdWUoXCJwYWRkaW5nLWxlZnRcIikpLG89cGFyc2VJbnQoci5nZXRQcm9wZXJ0eVZhbHVlKFwicGFkZGluZy10b3BcIikpO3JldHVyblt0LmNsaWVudFgtcy5sZWZ0LW4sdC5jbGllbnRZLXMudG9wLW9dfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZ2V0Q29vcmRzPXQuZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQ9dm9pZCAwLHQuZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQ9aSx0LmdldENvb3Jkcz1mdW5jdGlvbihlLHQscyxyLG4sbyxhLGgsYyl7aWYoIW8pcmV0dXJuO2NvbnN0IGw9aShlLHQscyk7cmV0dXJuIGw/KGxbMF09TWF0aC5jZWlsKChsWzBdKyhjP2EvMjowKSkvYSksbFsxXT1NYXRoLmNlaWwobFsxXS9oKSxsWzBdPU1hdGgubWluKE1hdGgubWF4KGxbMF0sMSkscisoYz8xOjApKSxsWzFdPU1hdGgubWluKE1hdGgubWF4KGxbMV0sMSksbiksbCk6dm9pZCAwfX0sOTUwNDooZSx0LGkpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5tb3ZlVG9DZWxsU2VxdWVuY2U9dm9pZCAwO2NvbnN0IHM9aSgyNTg0KTtmdW5jdGlvbiByKGUsdCxpLHMpe2NvbnN0IHI9ZS1uKGUsaSksYT10LW4odCxpKSxsPU1hdGguYWJzKHItYSktZnVuY3Rpb24oZSx0LGkpe2xldCBzPTA7Y29uc3Qgcj1lLW4oZSxpKSxhPXQtbih0LGkpO2ZvcihsZXQgbj0wO248TWF0aC5hYnMoci1hKTtuKyspe2NvbnN0IGE9XCJBXCI9PT1vKGUsdCk/LTE6MSxoPWkuYnVmZmVyLmxpbmVzLmdldChyK2Eqbik7aD8uaXNXcmFwcGVkJiZzKyt9cmV0dXJuIHN9KGUsdCxpKTtyZXR1cm4gYyhsLGgobyhlLHQpLHMpKX1mdW5jdGlvbiBuKGUsdCl7bGV0IGk9MCxzPXQuYnVmZmVyLmxpbmVzLmdldChlKSxyPXM/LmlzV3JhcHBlZDtmb3IoO3ImJmU+PTAmJmU8dC5yb3dzOylpKysscz10LmJ1ZmZlci5saW5lcy5nZXQoLS1lKSxyPXM/LmlzV3JhcHBlZDtyZXR1cm4gaX1mdW5jdGlvbiBvKGUsdCl7cmV0dXJuIGU+dD9cIkFcIjpcIkJcIn1mdW5jdGlvbiBhKGUsdCxpLHMscixuKXtsZXQgbz1lLGE9dCxoPVwiXCI7Zm9yKDtvIT09aXx8YSE9PXM7KW8rPXI/MTotMSxyJiZvPm4uY29scy0xPyhoKz1uLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoYSwhMSxlLG8pLG89MCxlPTAsYSsrKTohciYmbzwwJiYoaCs9bi5idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGEsITEsMCxlKzEpLG89bi5jb2xzLTEsZT1vLGEtLSk7cmV0dXJuIGgrbi5idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGEsITEsZSxvKX1mdW5jdGlvbiBoKGUsdCl7Y29uc3QgaT10P1wiT1wiOlwiW1wiO3JldHVybiBzLkMwLkVTQytpK2V9ZnVuY3Rpb24gYyhlLHQpe2U9TWF0aC5mbG9vcihlKTtsZXQgaT1cIlwiO2ZvcihsZXQgcz0wO3M8ZTtzKyspaSs9dDtyZXR1cm4gaX10Lm1vdmVUb0NlbGxTZXF1ZW5jZT1mdW5jdGlvbihlLHQsaSxzKXtjb25zdCBvPWkuYnVmZmVyLngsbD1pLmJ1ZmZlci55O2lmKCFpLmJ1ZmZlci5oYXNTY3JvbGxiYWNrKXJldHVybiBmdW5jdGlvbihlLHQsaSxzLG8sbCl7cmV0dXJuIDA9PT1yKHQscyxvLGwpLmxlbmd0aD9cIlwiOmMoYShlLHQsZSx0LW4odCxvKSwhMSxvKS5sZW5ndGgsaChcIkRcIixsKSl9KG8sbCwwLHQsaSxzKStyKGwsdCxpLHMpK2Z1bmN0aW9uKGUsdCxpLHMsbyxsKXtsZXQgZDtkPXIodCxzLG8sbCkubGVuZ3RoPjA/cy1uKHMsbyk6dDtjb25zdCBfPXMsdT1mdW5jdGlvbihlLHQsaSxzLG8sYSl7bGV0IGg7cmV0dXJuIGg9cihpLHMsbyxhKS5sZW5ndGg+MD9zLW4ocyxvKTp0LGU8aSYmaDw9c3x8ZT49aSYmaDxzP1wiQ1wiOlwiRFwifShlLHQsaSxzLG8sbCk7cmV0dXJuIGMoYShlLGQsaSxfLFwiQ1wiPT09dSxvKS5sZW5ndGgsaCh1LGwpKX0obyxsLGUsdCxpLHMpO2xldCBkO2lmKGw9PT10KXJldHVybiBkPW8+ZT9cIkRcIjpcIkNcIixjKE1hdGguYWJzKG8tZSksaChkLHMpKTtkPWw+dD9cIkRcIjpcIkNcIjtjb25zdCBfPU1hdGguYWJzKGwtdCk7cmV0dXJuIGMoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5jb2xzLWV9KGw+dD9lOm8saSkrKF8tMSkqaS5jb2xzKzErKChsPnQ/bzplKS0xKSxoKGQscykpfX0sMTI5NjpmdW5jdGlvbihlLHQsaSl7dmFyIHM9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQsaSxzKXt2YXIgcixuPWFyZ3VtZW50cy5sZW5ndGgsbz1uPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW89UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobz0objwzP3Iobyk6bj4zP3IodCxpLG8pOnIodCxpKSl8fG8pO3JldHVybiBuPjMmJm8mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbyksb30scj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkRvbVJlbmRlcmVyPXZvaWQgMDtjb25zdCBuPWkoMzc4Nyksbz1pKDI1NTApLGE9aSgyMjIzKSxoPWkoNjE3MSksYz1pKDYwNTIpLGw9aSg0NzI1KSxkPWkoODA1NSksXz1pKDg0NjApLHU9aSg4NDQpLGY9aSgyNTg1KSx2PVwieHRlcm0tZG9tLXJlbmRlcmVyLW93bmVyLVwiLHA9XCJ4dGVybS1yb3dzXCIsZz1cInh0ZXJtLWZnLVwiLG09XCJ4dGVybS1iZy1cIixTPVwieHRlcm0tZm9jdXNcIixDPVwieHRlcm0tc2VsZWN0aW9uXCI7bGV0IGI9MSx3PXQuRG9tUmVuZGVyZXI9Y2xhc3MgZXh0ZW5kcyB1LkRpc3Bvc2FibGV7Y29uc3RydWN0b3IoZSx0LGkscyxyLGEsbCxkLGYsZyxtLFMsdyl7c3VwZXIoKSx0aGlzLl90ZXJtaW5hbD1lLHRoaXMuX2RvY3VtZW50PXQsdGhpcy5fZWxlbWVudD1pLHRoaXMuX3NjcmVlbkVsZW1lbnQ9cyx0aGlzLl92aWV3cG9ydEVsZW1lbnQ9cix0aGlzLl9oZWxwZXJDb250YWluZXI9YSx0aGlzLl9saW5raWZpZXIyPWwsdGhpcy5fY2hhclNpemVTZXJ2aWNlPWYsdGhpcy5fb3B0aW9uc1NlcnZpY2U9Zyx0aGlzLl9idWZmZXJTZXJ2aWNlPW0sdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlPVMsdGhpcy5fdGhlbWVTZXJ2aWNlPXcsdGhpcy5fdGVybWluYWxDbGFzcz1iKyssdGhpcy5fcm93RWxlbWVudHM9W10sdGhpcy5fc2VsZWN0aW9uUmVuZGVyTW9kZWw9KDAsYy5jcmVhdGVTZWxlY3Rpb25SZW5kZXJNb2RlbCkoKSx0aGlzLm9uUmVxdWVzdFJlZHJhdz10aGlzLnJlZ2lzdGVyKG5ldyBfLkV2ZW50RW1pdHRlcikuZXZlbnQsdGhpcy5fcm93Q29udGFpbmVyPXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQocCksdGhpcy5fcm93Q29udGFpbmVyLnN0eWxlLmxpbmVIZWlnaHQ9XCJub3JtYWxcIix0aGlzLl9yb3dDb250YWluZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIixcInRydWVcIiksdGhpcy5fcmVmcmVzaFJvd0VsZW1lbnRzKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpLHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lcj10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKEMpLHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKSx0aGlzLmRpbWVuc2lvbnM9KDAsaC5jcmVhdGVSZW5kZXJEaW1lbnNpb25zKSgpLHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKCgoKT0+dGhpcy5faGFuZGxlT3B0aW9uc0NoYW5nZWQoKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3RoZW1lU2VydmljZS5vbkNoYW5nZUNvbG9ycygoZT0+dGhpcy5faW5qZWN0Q3NzKGUpKSkpLHRoaXMuX2luamVjdENzcyh0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzKSx0aGlzLl9yb3dGYWN0b3J5PWQuY3JlYXRlSW5zdGFuY2Uobi5Eb21SZW5kZXJlclJvd0ZhY3RvcnksZG9jdW1lbnQpLHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCh2K3RoaXMuX3Rlcm1pbmFsQ2xhc3MpLHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fcm93Q29udGFpbmVyKSx0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lciksdGhpcy5yZWdpc3Rlcih0aGlzLl9saW5raWZpZXIyLm9uU2hvd0xpbmtVbmRlcmxpbmUoKGU9PnRoaXMuX2hhbmRsZUxpbmtIb3ZlcihlKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2xpbmtpZmllcjIub25IaWRlTGlua1VuZGVybGluZSgoZT0+dGhpcy5faGFuZGxlTGlua0xlYXZlKGUpKSkpLHRoaXMucmVnaXN0ZXIoKDAsdS50b0Rpc3Bvc2FibGUpKCgoKT0+e3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh2K3RoaXMuX3Rlcm1pbmFsQ2xhc3MpLHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmUoKSx0aGlzLl9zZWxlY3Rpb25Db250YWluZXIucmVtb3ZlKCksdGhpcy5fd2lkdGhDYWNoZS5kaXNwb3NlKCksdGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQucmVtb3ZlKCksdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudC5yZW1vdmUoKX0pKSksdGhpcy5fd2lkdGhDYWNoZT1uZXcgby5XaWR0aENhY2hlKHRoaXMuX2RvY3VtZW50LHRoaXMuX2hlbHBlckNvbnRhaW5lciksdGhpcy5fd2lkdGhDYWNoZS5zZXRGb250KHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFdlaWdodCx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHRCb2xkKSx0aGlzLl9zZXREZWZhdWx0U3BhY2luZygpfV91cGRhdGVEaW1lbnNpb25zKCl7Y29uc3QgZT10aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuZHByO3RoaXMuZGltZW5zaW9ucy5kZXZpY2UuY2hhci53aWR0aD10aGlzLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGgqZSx0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNoYXIuaGVpZ2h0PU1hdGguY2VpbCh0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0KmUpLHRoaXMuZGltZW5zaW9ucy5kZXZpY2UuY2VsbC53aWR0aD10aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNoYXIud2lkdGgrTWF0aC5yb3VuZCh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxldHRlclNwYWNpbmcpLHRoaXMuZGltZW5zaW9ucy5kZXZpY2UuY2VsbC5oZWlnaHQ9TWF0aC5mbG9vcih0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNoYXIuaGVpZ2h0KnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGluZUhlaWdodCksdGhpcy5kaW1lbnNpb25zLmRldmljZS5jaGFyLmxlZnQ9MCx0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNoYXIudG9wPTAsdGhpcy5kaW1lbnNpb25zLmRldmljZS5jYW52YXMud2lkdGg9dGhpcy5kaW1lbnNpb25zLmRldmljZS5jZWxsLndpZHRoKnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNhbnZhcy5oZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmRldmljZS5jZWxsLmhlaWdodCp0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsdGhpcy5kaW1lbnNpb25zLmNzcy5jYW52YXMud2lkdGg9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNhbnZhcy53aWR0aC9lKSx0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHQ9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNhbnZhcy5oZWlnaHQvZSksdGhpcy5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoPXRoaXMuZGltZW5zaW9ucy5jc3MuY2FudmFzLndpZHRoL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5jc3MuY2FudmFzLmhlaWdodC90aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcm93RWxlbWVudHMpZS5zdHlsZS53aWR0aD1gJHt0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aH1weGAsZS5zdHlsZS5oZWlnaHQ9YCR7dGhpcy5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodH1weGAsZS5zdHlsZS5saW5lSGVpZ2h0PWAke3RoaXMuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHR9cHhgLGUuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIjt0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50fHwodGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudD10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksdGhpcy5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50KSk7Y29uc3QgdD1gJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtwfSBzcGFuIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBoZWlnaHQ6IDEwMCU7IHZlcnRpY2FsLWFsaWduOiB0b3A7fWA7dGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudC50ZXh0Q29udGVudD10LHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQ9dGhpcy5fdmlld3BvcnRFbGVtZW50LnN0eWxlLmhlaWdodCx0aGlzLl9zY3JlZW5FbGVtZW50LnN0eWxlLndpZHRoPWAke3RoaXMuZGltZW5zaW9ucy5jc3MuY2FudmFzLndpZHRofXB4YCx0aGlzLl9zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodD1gJHt0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHR9cHhgfV9pbmplY3RDc3MoZSl7dGhpcy5fdGhlbWVTdHlsZUVsZW1lbnR8fCh0aGlzLl90aGVtZVN0eWxlRWxlbWVudD10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksdGhpcy5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl90aGVtZVN0eWxlRWxlbWVudCkpO2xldCB0PWAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke3B9IHsgY29sb3I6ICR7ZS5mb3JlZ3JvdW5kLmNzc307IGZvbnQtZmFtaWx5OiAke3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseX07IGZvbnQtc2l6ZTogJHt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplfXB4OyBmb250LWtlcm5pbmc6IG5vbmU7IHdoaXRlLXNwYWNlOiBwcmV9YDt0Kz1gJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtwfSAueHRlcm0tZGltIHsgY29sb3I6ICR7ZC5jb2xvci5tdWx0aXBseU9wYWNpdHkoZS5mb3JlZ3JvdW5kLC41KS5jc3N9O31gLHQrPWAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IHNwYW46bm90KC54dGVybS1ib2xkKSB7IGZvbnQtd2VpZ2h0OiAke3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFdlaWdodH07fSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbi54dGVybS1ib2xkIHsgZm9udC13ZWlnaHQ6ICR7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0Qm9sZH07fSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbi54dGVybS1pdGFsaWMgeyBmb250LXN0eWxlOiBpdGFsaWM7fWA7Y29uc3QgaT1gYmxpbmtfdW5kZXJsaW5lXyR7dGhpcy5fdGVybWluYWxDbGFzc31gLHM9YGJsaW5rX2Jhcl8ke3RoaXMuX3Rlcm1pbmFsQ2xhc3N9YCxyPWBibGlua19ibG9ja18ke3RoaXMuX3Rlcm1pbmFsQ2xhc3N9YDt0Kz1gQGtleWZyYW1lcyAke2l9IHsgNTAlIHsgIGJvcmRlci1ib3R0b20tc3R5bGU6IGhpZGRlbjsgfX1gLHQrPWBAa2V5ZnJhbWVzICR7c30geyA1MCUgeyAgYm94LXNoYWRvdzogbm9uZTsgfX1gLHQrPWBAa2V5ZnJhbWVzICR7cn0geyAwJSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAke2UuY3Vyc29yLmNzc307ICBjb2xvcjogJHtlLmN1cnNvckFjY2VudC5jc3N9OyB9IDUwJSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0OyAgY29sb3I6ICR7ZS5jdXJzb3IuY3NzfTsgfX1gLHQrPWAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke3B9LiR7U30gLnh0ZXJtLWN1cnNvci54dGVybS1jdXJzb3ItYmxpbmsueHRlcm0tY3Vyc29yLXVuZGVybGluZSB7IGFuaW1hdGlvbjogJHtpfSAxcyBzdGVwLWVuZCBpbmZpbml0ZTt9JHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtwfS4ke1N9IC54dGVybS1jdXJzb3IueHRlcm0tY3Vyc29yLWJsaW5rLnh0ZXJtLWN1cnNvci1iYXIgeyBhbmltYXRpb246ICR7c30gMXMgc3RlcC1lbmQgaW5maW5pdGU7fSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7cH0uJHtTfSAueHRlcm0tY3Vyc29yLnh0ZXJtLWN1cnNvci1ibGluay54dGVybS1jdXJzb3ItYmxvY2sgeyBhbmltYXRpb246ICR7cn0gMXMgc3RlcC1lbmQgaW5maW5pdGU7fSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7cH0gLnh0ZXJtLWN1cnNvci54dGVybS1jdXJzb3ItYmxvY2sgeyBiYWNrZ3JvdW5kLWNvbG9yOiAke2UuY3Vyc29yLmNzc307IGNvbG9yOiAke2UuY3Vyc29yQWNjZW50LmNzc307fSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7cH0gLnh0ZXJtLWN1cnNvci54dGVybS1jdXJzb3ItYmxvY2s6bm90KC54dGVybS1jdXJzb3ItYmxpbmspIHsgYmFja2dyb3VuZC1jb2xvcjogJHtlLmN1cnNvci5jc3N9ICFpbXBvcnRhbnQ7IGNvbG9yOiAke2UuY3Vyc29yQWNjZW50LmNzc30gIWltcG9ydGFudDt9JHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtwfSAueHRlcm0tY3Vyc29yLnh0ZXJtLWN1cnNvci1vdXRsaW5lIHsgb3V0bGluZTogMXB4IHNvbGlkICR7ZS5jdXJzb3IuY3NzfTsgb3V0bGluZS1vZmZzZXQ6IC0xcHg7fSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7cH0gLnh0ZXJtLWN1cnNvci54dGVybS1jdXJzb3ItYmFyIHsgYm94LXNoYWRvdzogJHt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvcldpZHRofXB4IDAgMCAke2UuY3Vyc29yLmNzc30gaW5zZXQ7fSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7cH0gLnh0ZXJtLWN1cnNvci54dGVybS1jdXJzb3ItdW5kZXJsaW5lIHsgYm9yZGVyLWJvdHRvbTogMXB4ICR7ZS5jdXJzb3IuY3NzfTsgYm9yZGVyLWJvdHRvbS1zdHlsZTogc29saWQ7IGhlaWdodDogY2FsYygxMDAlIC0gMXB4KTt9YCx0Kz1gJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtDfSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB6LWluZGV4OiAxOyBwb2ludGVyLWV2ZW50czogbm9uZTt9JHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfS5mb2N1cyAuJHtDfSBkaXYgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGJhY2tncm91bmQtY29sb3I6ICR7ZS5zZWxlY3Rpb25CYWNrZ3JvdW5kT3BhcXVlLmNzc307fSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Q30gZGl2IHsgcG9zaXRpb246IGFic29sdXRlOyBiYWNrZ3JvdW5kLWNvbG9yOiAke2Uuc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kT3BhcXVlLmNzc307fWA7Zm9yKGNvbnN0W2ksc11vZiBlLmFuc2kuZW50cmllcygpKXQrPWAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke2d9JHtpfSB7IGNvbG9yOiAke3MuY3NzfTsgfSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Z30ke2l9Lnh0ZXJtLWRpbSB7IGNvbG9yOiAke2QuY29sb3IubXVsdGlwbHlPcGFjaXR5KHMsLjUpLmNzc307IH0ke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke219JHtpfSB7IGJhY2tncm91bmQtY29sb3I6ICR7cy5jc3N9OyB9YDt0Kz1gJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtnfSR7YS5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SfSB7IGNvbG9yOiAke2QuY29sb3Iub3BhcXVlKGUuYmFja2dyb3VuZCkuY3NzfTsgfSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Z30ke2EuSU5WRVJURURfREVGQVVMVF9DT0xPUn0ueHRlcm0tZGltIHsgY29sb3I6ICR7ZC5jb2xvci5tdWx0aXBseU9wYWNpdHkoZC5jb2xvci5vcGFxdWUoZS5iYWNrZ3JvdW5kKSwuNSkuY3NzfTsgfSR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7bX0ke2EuSU5WRVJURURfREVGQVVMVF9DT0xPUn0geyBiYWNrZ3JvdW5kLWNvbG9yOiAke2UuZm9yZWdyb3VuZC5jc3N9OyB9YCx0aGlzLl90aGVtZVN0eWxlRWxlbWVudC50ZXh0Q29udGVudD10fV9zZXREZWZhdWx0U3BhY2luZygpe2NvbnN0IGU9dGhpcy5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoLXRoaXMuX3dpZHRoQ2FjaGUuZ2V0KFwiV1wiLCExLCExKTt0aGlzLl9yb3dDb250YWluZXIuc3R5bGUubGV0dGVyU3BhY2luZz1gJHtlfXB4YCx0aGlzLl9yb3dGYWN0b3J5LmRlZmF1bHRTcGFjaW5nPWV9aGFuZGxlRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpe3RoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKSx0aGlzLl93aWR0aENhY2hlLmNsZWFyKCksdGhpcy5fc2V0RGVmYXVsdFNwYWNpbmcoKX1fcmVmcmVzaFJvd0VsZW1lbnRzKGUsdCl7Zm9yKGxldCBlPXRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aDtlPD10O2UrKyl7Y29uc3QgZT10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChlKSx0aGlzLl9yb3dFbGVtZW50cy5wdXNoKGUpfWZvcig7dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoPnQ7KXRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9yb3dFbGVtZW50cy5wb3AoKSl9aGFuZGxlUmVzaXplKGUsdCl7dGhpcy5fcmVmcmVzaFJvd0VsZW1lbnRzKGUsdCksdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpLHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZCh0aGlzLl9zZWxlY3Rpb25SZW5kZXJNb2RlbC5zZWxlY3Rpb25TdGFydCx0aGlzLl9zZWxlY3Rpb25SZW5kZXJNb2RlbC5zZWxlY3Rpb25FbmQsdGhpcy5fc2VsZWN0aW9uUmVuZGVyTW9kZWwuY29sdW1uU2VsZWN0TW9kZSl9aGFuZGxlQ2hhclNpemVDaGFuZ2VkKCl7dGhpcy5fdXBkYXRlRGltZW5zaW9ucygpLHRoaXMuX3dpZHRoQ2FjaGUuY2xlYXIoKSx0aGlzLl9zZXREZWZhdWx0U3BhY2luZygpfWhhbmRsZUJsdXIoKXt0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShTKSx0aGlzLnJlbmRlclJvd3MoMCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSl9aGFuZGxlRm9jdXMoKXt0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZChTKSx0aGlzLnJlbmRlclJvd3ModGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KX1oYW5kbGVTZWxlY3Rpb25DaGFuZ2VkKGUsdCxpKXtpZih0aGlzLl9zZWxlY3Rpb25Db250YWluZXIucmVwbGFjZUNoaWxkcmVuKCksdGhpcy5fcm93RmFjdG9yeS5oYW5kbGVTZWxlY3Rpb25DaGFuZ2VkKGUsdCxpKSx0aGlzLnJlbmRlclJvd3MoMCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksIWV8fCF0KXJldHVybjt0aGlzLl9zZWxlY3Rpb25SZW5kZXJNb2RlbC51cGRhdGUodGhpcy5fdGVybWluYWwsZSx0LGkpO2NvbnN0IHM9dGhpcy5fc2VsZWN0aW9uUmVuZGVyTW9kZWwudmlld3BvcnRTdGFydFJvdyxyPXRoaXMuX3NlbGVjdGlvblJlbmRlck1vZGVsLnZpZXdwb3J0RW5kUm93LG49dGhpcy5fc2VsZWN0aW9uUmVuZGVyTW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyxvPXRoaXMuX3NlbGVjdGlvblJlbmRlck1vZGVsLnZpZXdwb3J0Q2FwcGVkRW5kUm93O2lmKG4+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c3x8bzwwKXJldHVybjtjb25zdCBhPXRoaXMuX2RvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihpKXtjb25zdCBpPWVbMF0+dFswXTthLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQobixpP3RbMF06ZVswXSxpP2VbMF06dFswXSxvLW4rMSkpfWVsc2V7Y29uc3QgaT1zPT09bj9lWzBdOjAsaD1uPT09cj90WzBdOnRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczthLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQobixpLGgpKTtjb25zdCBjPW8tbi0xO2lmKGEuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudChuKzEsMCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsYykpLG4hPT1vKXtjb25zdCBlPXI9PT1vP3RbMF06dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO2EuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudChvLDAsZSkpfX10aGlzLl9zZWxlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoYSl9X2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQoZSx0LGkscz0xKXtjb25zdCByPXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbj10KnRoaXMuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aDtsZXQgbz10aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGgqKGktdCk7cmV0dXJuIG4rbz50aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aCYmKG89dGhpcy5kaW1lbnNpb25zLmNzcy5jYW52YXMud2lkdGgtbiksci5zdHlsZS5oZWlnaHQ9cyp0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0K1wicHhcIixyLnN0eWxlLnRvcD1lKnRoaXMuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHQrXCJweFwiLHIuc3R5bGUubGVmdD1gJHtufXB4YCxyLnN0eWxlLndpZHRoPWAke299cHhgLHJ9aGFuZGxlQ3Vyc29yTW92ZSgpe31faGFuZGxlT3B0aW9uc0NoYW5nZWQoKXt0aGlzLl91cGRhdGVEaW1lbnNpb25zKCksdGhpcy5faW5qZWN0Q3NzKHRoaXMuX3RoZW1lU2VydmljZS5jb2xvcnMpLHRoaXMuX3dpZHRoQ2FjaGUuc2V0Rm9udCh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHksdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250U2l6ZSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHQsdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0Qm9sZCksdGhpcy5fc2V0RGVmYXVsdFNwYWNpbmcoKX1jbGVhcigpe2Zvcihjb25zdCBlIG9mIHRoaXMuX3Jvd0VsZW1lbnRzKWUucmVwbGFjZUNoaWxkcmVuKCl9cmVuZGVyUm93cyhlLHQpe2NvbnN0IGk9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIscz1pLnliYXNlK2kueSxyPU1hdGgubWluKGkueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSksbj10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvckJsaW5rLG89dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZSxhPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29ySW5hY3RpdmVTdHlsZTtmb3IobGV0IGg9ZTtoPD10O2grKyl7Y29uc3QgZT1oK2kueWRpc3AsdD10aGlzLl9yb3dFbGVtZW50c1toXSxjPWkubGluZXMuZ2V0KGUpO2lmKCF0fHwhYylicmVhazt0LnJlcGxhY2VDaGlsZHJlbiguLi50aGlzLl9yb3dGYWN0b3J5LmNyZWF0ZVJvdyhjLGUsZT09PXMsbyxhLHIsbix0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGgsdGhpcy5fd2lkdGhDYWNoZSwtMSwtMSkpfX1nZXQgX3Rlcm1pbmFsU2VsZWN0b3IoKXtyZXR1cm5gLiR7dn0ke3RoaXMuX3Rlcm1pbmFsQ2xhc3N9YH1faGFuZGxlTGlua0hvdmVyKGUpe3RoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSxlLngyLGUueTEsZS55MixlLmNvbHMsITApfV9oYW5kbGVMaW5rTGVhdmUoZSl7dGhpcy5fc2V0Q2VsbFVuZGVybGluZShlLngxLGUueDIsZS55MSxlLnkyLGUuY29scywhMSl9X3NldENlbGxVbmRlcmxpbmUoZSx0LGkscyxyLG4pe2k8MCYmKGU9MCksczwwJiYodD0wKTtjb25zdCBvPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xO2k9TWF0aC5tYXgoTWF0aC5taW4oaSxvKSwwKSxzPU1hdGgubWF4KE1hdGgubWluKHMsbyksMCkscj1NYXRoLm1pbihyLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7Y29uc3QgYT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcixoPWEueWJhc2UrYS55LGM9TWF0aC5taW4oYS54LHItMSksbD10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvckJsaW5rLGQ9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZSxfPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29ySW5hY3RpdmVTdHlsZTtmb3IobGV0IG89aTtvPD1zOysrbyl7Y29uc3QgdT1vK2EueWRpc3AsZj10aGlzLl9yb3dFbGVtZW50c1tvXSx2PWEubGluZXMuZ2V0KHUpO2lmKCFmfHwhdilicmVhaztmLnJlcGxhY2VDaGlsZHJlbiguLi50aGlzLl9yb3dGYWN0b3J5LmNyZWF0ZVJvdyh2LHUsdT09PWgsZCxfLGMsbCx0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGgsdGhpcy5fd2lkdGhDYWNoZSxuP289PT1pP2U6MDotMSxuPyhvPT09cz90OnIpLTE6LTEpKX19fTt0LkRvbVJlbmRlcmVyPXc9cyhbcig3LGYuSUluc3RhbnRpYXRpb25TZXJ2aWNlKSxyKDgsbC5JQ2hhclNpemVTZXJ2aWNlKSxyKDksZi5JT3B0aW9uc1NlcnZpY2UpLHIoMTAsZi5JQnVmZmVyU2VydmljZSkscigxMSxsLklDb3JlQnJvd3NlclNlcnZpY2UpLHIoMTIsbC5JVGhlbWVTZXJ2aWNlKV0sdyl9LDM3ODc6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbj1hcmd1bWVudHMubGVuZ3RoLG89bjwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlvPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG89KG48Mz9yKG8pOm4+Mz9yKHQsaSxvKTpyKHQsaSkpfHxvKTtyZXR1cm4gbj4zJiZvJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG8pLG99LHI9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5Eb21SZW5kZXJlclJvd0ZhY3Rvcnk9dm9pZCAwO2NvbnN0IG49aSgyMjIzKSxvPWkoNjQzKSxhPWkoNTExKSxoPWkoMjU4NSksYz1pKDgwNTUpLGw9aSg0NzI1KSxkPWkoNDI2OSksXz1pKDYxNzEpLHU9aSgzNzM0KTtsZXQgZj10LkRvbVJlbmRlcmVyUm93RmFjdG9yeT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSxzLHIsbixvKXt0aGlzLl9kb2N1bWVudD1lLHRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2U9dCx0aGlzLl9vcHRpb25zU2VydmljZT1pLHRoaXMuX2NvcmVCcm93c2VyU2VydmljZT1zLHRoaXMuX2NvcmVTZXJ2aWNlPXIsdGhpcy5fZGVjb3JhdGlvblNlcnZpY2U9bix0aGlzLl90aGVtZVNlcnZpY2U9byx0aGlzLl93b3JrQ2VsbD1uZXcgYS5DZWxsRGF0YSx0aGlzLl9jb2x1bW5TZWxlY3RNb2RlPSExLHRoaXMuZGVmYXVsdFNwYWNpbmc9MH1oYW5kbGVTZWxlY3Rpb25DaGFuZ2VkKGUsdCxpKXt0aGlzLl9zZWxlY3Rpb25TdGFydD1lLHRoaXMuX3NlbGVjdGlvbkVuZD10LHRoaXMuX2NvbHVtblNlbGVjdE1vZGU9aX1jcmVhdGVSb3coZSx0LGkscyxyLGEsaCxsLF8sZixwKXtjb25zdCBnPVtdLG09dGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5nZXRKb2luZWRDaGFyYWN0ZXJzKHQpLFM9dGhpcy5fdGhlbWVTZXJ2aWNlLmNvbG9ycztsZXQgQyxiPWUuZ2V0Tm9CZ1RyaW1tZWRMZW5ndGgoKTtpJiZiPGErMSYmKGI9YSsxKTtsZXQgdz0wLHk9XCJcIixFPTAsaz0wLEw9MCxEPSExLFI9MCx4PSExLEE9MDtjb25zdCBCPVtdLFQ9LTEhPT1mJiYtMSE9PXA7Zm9yKGxldCBNPTA7TTxiO00rKyl7ZS5sb2FkQ2VsbChNLHRoaXMuX3dvcmtDZWxsKTtsZXQgYj10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpO2lmKDA9PT1iKWNvbnRpbnVlO2xldCBPPSExLFA9TSxJPXRoaXMuX3dvcmtDZWxsO2lmKG0ubGVuZ3RoPjAmJk09PT1tWzBdWzBdKXtPPSEwO2NvbnN0IHQ9bS5zaGlmdCgpO0k9bmV3IGQuSm9pbmVkQ2VsbERhdGEodGhpcy5fd29ya0NlbGwsZS50cmFuc2xhdGVUb1N0cmluZyghMCx0WzBdLHRbMV0pLHRbMV0tdFswXSksUD10WzFdLTEsYj1JLmdldFdpZHRoKCl9Y29uc3QgSD10aGlzLl9pc0NlbGxJblNlbGVjdGlvbihNLHQpLEY9aSYmTT09PWEsVz1UJiZNPj1mJiZNPD1wO2xldCBVPSExO3RoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmZvckVhY2hEZWNvcmF0aW9uQXRDZWxsKE0sdCx2b2lkIDAsKGU9PntVPSEwfSkpO2xldCBOPUkuZ2V0Q2hhcnMoKXx8by5XSElURVNQQUNFX0NFTExfQ0hBUjtpZihcIiBcIj09PU4mJihJLmlzVW5kZXJsaW5lKCl8fEkuaXNPdmVybGluZSgpKSYmKE49XCLCoFwiKSxBPWIqbC1fLmdldChOLEkuaXNCb2xkKCksSS5pc0l0YWxpYygpKSxDKXtpZih3JiYoSCYmeHx8IUgmJiF4JiZJLmJnPT09RSkmJihIJiZ4JiZTLnNlbGVjdGlvbkZvcmVncm91bmR8fEkuZmc9PT1rKSYmSS5leHRlbmRlZC5leHQ9PT1MJiZXPT09RCYmQT09PVImJiFGJiYhTyYmIVUpe0kuaXNJbnZpc2libGUoKT95Kz1vLldISVRFU1BBQ0VfQ0VMTF9DSEFSOnkrPU4sdysrO2NvbnRpbnVlfXcmJihDLnRleHRDb250ZW50PXkpLEM9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdz0wLHk9XCJcIn1lbHNlIEM9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7aWYoRT1JLmJnLGs9SS5mZyxMPUkuZXh0ZW5kZWQuZXh0LEQ9VyxSPUEseD1ILE8mJmE+PU0mJmE8PVAmJihhPU0pLCF0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbiYmRiYmdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZClpZihCLnB1c2goXCJ4dGVybS1jdXJzb3JcIiksdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLmlzRm9jdXNlZCloJiZCLnB1c2goXCJ4dGVybS1jdXJzb3ItYmxpbmtcIiksQi5wdXNoKFwiYmFyXCI9PT1zP1wieHRlcm0tY3Vyc29yLWJhclwiOlwidW5kZXJsaW5lXCI9PT1zP1wieHRlcm0tY3Vyc29yLXVuZGVybGluZVwiOlwieHRlcm0tY3Vyc29yLWJsb2NrXCIpO2Vsc2UgaWYocilzd2l0Y2gocil7Y2FzZVwib3V0bGluZVwiOkIucHVzaChcInh0ZXJtLWN1cnNvci1vdXRsaW5lXCIpO2JyZWFrO2Nhc2VcImJsb2NrXCI6Qi5wdXNoKFwieHRlcm0tY3Vyc29yLWJsb2NrXCIpO2JyZWFrO2Nhc2VcImJhclwiOkIucHVzaChcInh0ZXJtLWN1cnNvci1iYXJcIik7YnJlYWs7Y2FzZVwidW5kZXJsaW5lXCI6Qi5wdXNoKFwieHRlcm0tY3Vyc29yLXVuZGVybGluZVwiKX1pZihJLmlzQm9sZCgpJiZCLnB1c2goXCJ4dGVybS1ib2xkXCIpLEkuaXNJdGFsaWMoKSYmQi5wdXNoKFwieHRlcm0taXRhbGljXCIpLEkuaXNEaW0oKSYmQi5wdXNoKFwieHRlcm0tZGltXCIpLHk9SS5pc0ludmlzaWJsZSgpP28uV0hJVEVTUEFDRV9DRUxMX0NIQVI6SS5nZXRDaGFycygpfHxvLldISVRFU1BBQ0VfQ0VMTF9DSEFSLEkuaXNVbmRlcmxpbmUoKSYmKEIucHVzaChgeHRlcm0tdW5kZXJsaW5lLSR7SS5leHRlbmRlZC51bmRlcmxpbmVTdHlsZX1gKSxcIiBcIj09PXkmJih5PVwiwqBcIiksIUkuaXNVbmRlcmxpbmVDb2xvckRlZmF1bHQoKSkpaWYoSS5pc1VuZGVybGluZUNvbG9yUkdCKCkpQy5zdHlsZS50ZXh0RGVjb3JhdGlvbkNvbG9yPWByZ2IoJHt1LkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihJLmdldFVuZGVybGluZUNvbG9yKCkpLmpvaW4oXCIsXCIpfSlgO2Vsc2V7bGV0IGU9SS5nZXRVbmRlcmxpbmVDb2xvcigpO3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJkkuaXNCb2xkKCkmJmU8OCYmKGUrPTgpLEMuc3R5bGUudGV4dERlY29yYXRpb25Db2xvcj1TLmFuc2lbZV0uY3NzfUkuaXNPdmVybGluZSgpJiYoQi5wdXNoKFwieHRlcm0tb3ZlcmxpbmVcIiksXCIgXCI9PT15JiYoeT1cIsKgXCIpKSxJLmlzU3RyaWtldGhyb3VnaCgpJiZCLnB1c2goXCJ4dGVybS1zdHJpa2V0aHJvdWdoXCIpLFcmJihDLnN0eWxlLnRleHREZWNvcmF0aW9uPVwidW5kZXJsaW5lXCIpO2xldCAkPUkuZ2V0RmdDb2xvcigpLGo9SS5nZXRGZ0NvbG9yTW9kZSgpLHo9SS5nZXRCZ0NvbG9yKCksSz1JLmdldEJnQ29sb3JNb2RlKCk7Y29uc3QgcT0hIUkuaXNJbnZlcnNlKCk7aWYocSl7Y29uc3QgZT0kOyQ9eix6PWU7Y29uc3QgdD1qO2o9SyxLPXR9bGV0IFYsRyxYLEo9ITE7c3dpdGNoKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmZvckVhY2hEZWNvcmF0aW9uQXRDZWxsKE0sdCx2b2lkIDAsKGU9PntcInRvcFwiIT09ZS5vcHRpb25zLmxheWVyJiZKfHwoZS5iYWNrZ3JvdW5kQ29sb3JSR0ImJihLPTUwMzMxNjQ4LHo9ZS5iYWNrZ3JvdW5kQ29sb3JSR0IucmdiYT4+OCYxNjc3NzIxNSxWPWUuYmFja2dyb3VuZENvbG9yUkdCKSxlLmZvcmVncm91bmRDb2xvclJHQiYmKGo9NTAzMzE2NDgsJD1lLmZvcmVncm91bmRDb2xvclJHQi5yZ2JhPj44JjE2Nzc3MjE1LEc9ZS5mb3JlZ3JvdW5kQ29sb3JSR0IpLEo9XCJ0b3BcIj09PWUub3B0aW9ucy5sYXllcil9KSksIUomJkgmJihWPXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQ/Uy5zZWxlY3Rpb25CYWNrZ3JvdW5kT3BhcXVlOlMuc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kT3BhcXVlLHo9Vi5yZ2JhPj44JjE2Nzc3MjE1LEs9NTAzMzE2NDgsSj0hMCxTLnNlbGVjdGlvbkZvcmVncm91bmQmJihqPTUwMzMxNjQ4LCQ9Uy5zZWxlY3Rpb25Gb3JlZ3JvdW5kLnJnYmE+PjgmMTY3NzcyMTUsRz1TLnNlbGVjdGlvbkZvcmVncm91bmQpKSxKJiZCLnB1c2goXCJ4dGVybS1kZWNvcmF0aW9uLXRvcFwiKSxLKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6WD1TLmFuc2lbel0sQi5wdXNoKGB4dGVybS1iZy0ke3p9YCk7YnJlYWs7Y2FzZSA1MDMzMTY0ODpYPWMuY2hhbm5lbHMudG9Db2xvcih6Pj4xNix6Pj44JjI1NSwyNTUmeiksdGhpcy5fYWRkU3R5bGUoQyxgYmFja2dyb3VuZC1jb2xvcjojJHt2KCh6Pj4+MCkudG9TdHJpbmcoMTYpLFwiMFwiLDYpfWApO2JyZWFrO2RlZmF1bHQ6cT8oWD1TLmZvcmVncm91bmQsQi5wdXNoKGB4dGVybS1iZy0ke24uSU5WRVJURURfREVGQVVMVF9DT0xPUn1gKSk6WD1TLmJhY2tncm91bmR9c3dpdGNoKFZ8fEkuaXNEaW0oKSYmKFY9Yy5jb2xvci5tdWx0aXBseU9wYWNpdHkoWCwuNSkpLGope2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpJLmlzQm9sZCgpJiYkPDgmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJigkKz04KSx0aGlzLl9hcHBseU1pbmltdW1Db250cmFzdChDLFgsUy5hbnNpWyRdLEksVix2b2lkIDApfHxCLnB1c2goYHh0ZXJtLWZnLSR7JH1gKTticmVhaztjYXNlIDUwMzMxNjQ4OmNvbnN0IGU9Yy5jaGFubmVscy50b0NvbG9yKCQ+PjE2JjI1NSwkPj44JjI1NSwyNTUmJCk7dGhpcy5fYXBwbHlNaW5pbXVtQ29udHJhc3QoQyxYLGUsSSxWLEcpfHx0aGlzLl9hZGRTdHlsZShDLGBjb2xvcjojJHt2KCQudG9TdHJpbmcoMTYpLFwiMFwiLDYpfWApO2JyZWFrO2RlZmF1bHQ6dGhpcy5fYXBwbHlNaW5pbXVtQ29udHJhc3QoQyxYLFMuZm9yZWdyb3VuZCxJLFYsRyl8fHEmJkIucHVzaChgeHRlcm0tZmctJHtuLklOVkVSVEVEX0RFRkFVTFRfQ09MT1J9YCl9Qi5sZW5ndGgmJihDLmNsYXNzTmFtZT1CLmpvaW4oXCIgXCIpLEIubGVuZ3RoPTApLEZ8fE98fFU/Qy50ZXh0Q29udGVudD15OncrKyxBIT09dGhpcy5kZWZhdWx0U3BhY2luZyYmKEMuc3R5bGUubGV0dGVyU3BhY2luZz1gJHtBfXB4YCksZy5wdXNoKEMpLE09UH1yZXR1cm4gQyYmdyYmKEMudGV4dENvbnRlbnQ9eSksZ31fYXBwbHlNaW5pbXVtQ29udHJhc3QoZSx0LGkscyxyLG4pe2lmKDE9PT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvfHwoMCxfLnRyZWF0R2x5cGhBc0JhY2tncm91bmRDb2xvcikocy5nZXRDb2RlKCkpKXJldHVybiExO2NvbnN0IG89dGhpcy5fZ2V0Q29udHJhc3RDYWNoZShzKTtsZXQgYTtpZihyfHxufHwoYT1vLmdldENvbG9yKHQucmdiYSxpLnJnYmEpKSx2b2lkIDA9PT1hKXtjb25zdCBlPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8vKHMuaXNEaW0oKT8yOjEpO2E9Yy5jb2xvci5lbnN1cmVDb250cmFzdFJhdGlvKHJ8fHQsbnx8aSxlKSxvLnNldENvbG9yKChyfHx0KS5yZ2JhLChufHxpKS5yZ2JhLGE/P251bGwpfXJldHVybiEhYSYmKHRoaXMuX2FkZFN0eWxlKGUsYGNvbG9yOiR7YS5jc3N9YCksITApfV9nZXRDb250cmFzdENhY2hlKGUpe3JldHVybiBlLmlzRGltKCk/dGhpcy5fdGhlbWVTZXJ2aWNlLmNvbG9ycy5oYWxmQ29udHJhc3RDYWNoZTp0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzLmNvbnRyYXN0Q2FjaGV9X2FkZFN0eWxlKGUsdCl7ZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGAke2UuZ2V0QXR0cmlidXRlKFwic3R5bGVcIil8fFwiXCJ9JHt0fTtgKX1faXNDZWxsSW5TZWxlY3Rpb24oZSx0KXtjb25zdCBpPXRoaXMuX3NlbGVjdGlvblN0YXJ0LHM9dGhpcy5fc2VsZWN0aW9uRW5kO3JldHVybiEoIWl8fCFzKSYmKHRoaXMuX2NvbHVtblNlbGVjdE1vZGU/aVswXTw9c1swXT9lPj1pWzBdJiZ0Pj1pWzFdJiZlPHNbMF0mJnQ8PXNbMV06ZTxpWzBdJiZ0Pj1pWzFdJiZlPj1zWzBdJiZ0PD1zWzFdOnQ+aVsxXSYmdDxzWzFdfHxpWzFdPT09c1sxXSYmdD09PWlbMV0mJmU+PWlbMF0mJmU8c1swXXx8aVsxXTxzWzFdJiZ0PT09c1sxXSYmZTxzWzBdfHxpWzFdPHNbMV0mJnQ9PT1pWzFdJiZlPj1pWzBdKX19O2Z1bmN0aW9uIHYoZSx0LGkpe2Zvcig7ZS5sZW5ndGg8aTspZT10K2U7cmV0dXJuIGV9dC5Eb21SZW5kZXJlclJvd0ZhY3Rvcnk9Zj1zKFtyKDEsbC5JQ2hhcmFjdGVySm9pbmVyU2VydmljZSkscigyLGguSU9wdGlvbnNTZXJ2aWNlKSxyKDMsbC5JQ29yZUJyb3dzZXJTZXJ2aWNlKSxyKDQsaC5JQ29yZVNlcnZpY2UpLHIoNSxoLklEZWNvcmF0aW9uU2VydmljZSkscig2LGwuSVRoZW1lU2VydmljZSldLGYpfSwyNTUwOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5XaWR0aENhY2hlPXZvaWQgMCx0LldpZHRoQ2FjaGU9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9mbGF0PW5ldyBGbG9hdDMyQXJyYXkoMjU2KSx0aGlzLl9mb250PVwiXCIsdGhpcy5fZm9udFNpemU9MCx0aGlzLl93ZWlnaHQ9XCJub3JtYWxcIix0aGlzLl93ZWlnaHRCb2xkPVwiYm9sZFwiLHRoaXMuX21lYXN1cmVFbGVtZW50cz1bXSx0aGlzLl9jb250YWluZXI9ZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwieHRlcm0td2lkdGgtY2FjaGUtbWVhc3VyZS1jb250YWluZXJcIiksdGhpcy5fY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLHRoaXMuX2NvbnRhaW5lci5zdHlsZS53aGl0ZVNwYWNlPVwicHJlXCIsdGhpcy5fY29udGFpbmVyLnN0eWxlLmZvbnRLZXJuaW5nPVwibm9uZVwiO2NvbnN0IGk9ZS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtpLmNsYXNzTGlzdC5hZGQoXCJ4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudFwiKTtjb25zdCBzPWUuY3JlYXRlRWxlbWVudChcInNwYW5cIik7cy5jbGFzc0xpc3QuYWRkKFwieHRlcm0tY2hhci1tZWFzdXJlLWVsZW1lbnRcIikscy5zdHlsZS5mb250V2VpZ2h0PVwiYm9sZFwiO2NvbnN0IHI9ZS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtyLmNsYXNzTGlzdC5hZGQoXCJ4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudFwiKSxyLnN0eWxlLmZvbnRTdHlsZT1cIml0YWxpY1wiO2NvbnN0IG49ZS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtuLmNsYXNzTGlzdC5hZGQoXCJ4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudFwiKSxuLnN0eWxlLmZvbnRXZWlnaHQ9XCJib2xkXCIsbi5zdHlsZS5mb250U3R5bGU9XCJpdGFsaWNcIix0aGlzLl9tZWFzdXJlRWxlbWVudHM9W2kscyxyLG5dLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChpKSx0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQocyksdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHIpLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChuKSx0LmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lciksdGhpcy5jbGVhcigpfWRpc3Bvc2UoKXt0aGlzLl9jb250YWluZXIucmVtb3ZlKCksdGhpcy5fbWVhc3VyZUVsZW1lbnRzLmxlbmd0aD0wLHRoaXMuX2hvbGV5PXZvaWQgMH1jbGVhcigpe3RoaXMuX2ZsYXQuZmlsbCgtOTk5OSksdGhpcy5faG9sZXk9bmV3IE1hcH1zZXRGb250KGUsdCxpLHMpe2U9PT10aGlzLl9mb250JiZ0PT09dGhpcy5fZm9udFNpemUmJmk9PT10aGlzLl93ZWlnaHQmJnM9PT10aGlzLl93ZWlnaHRCb2xkfHwodGhpcy5fZm9udD1lLHRoaXMuX2ZvbnRTaXplPXQsdGhpcy5fd2VpZ2h0PWksdGhpcy5fd2VpZ2h0Qm9sZD1zLHRoaXMuX2NvbnRhaW5lci5zdHlsZS5mb250RmFtaWx5PXRoaXMuX2ZvbnQsdGhpcy5fY29udGFpbmVyLnN0eWxlLmZvbnRTaXplPWAke3RoaXMuX2ZvbnRTaXplfXB4YCx0aGlzLl9tZWFzdXJlRWxlbWVudHNbMF0uc3R5bGUuZm9udFdlaWdodD1gJHtpfWAsdGhpcy5fbWVhc3VyZUVsZW1lbnRzWzFdLnN0eWxlLmZvbnRXZWlnaHQ9YCR7c31gLHRoaXMuX21lYXN1cmVFbGVtZW50c1syXS5zdHlsZS5mb250V2VpZ2h0PWAke2l9YCx0aGlzLl9tZWFzdXJlRWxlbWVudHNbM10uc3R5bGUuZm9udFdlaWdodD1gJHtzfWAsdGhpcy5jbGVhcigpKX1nZXQoZSx0LGkpe2xldCBzPTA7aWYoIXQmJiFpJiYxPT09ZS5sZW5ndGgmJihzPWUuY2hhckNvZGVBdCgwKSk8MjU2KXtpZigtOTk5OSE9PXRoaXMuX2ZsYXRbc10pcmV0dXJuIHRoaXMuX2ZsYXRbc107Y29uc3QgdD10aGlzLl9tZWFzdXJlKGUsMCk7cmV0dXJuIHQ+MCYmKHRoaXMuX2ZsYXRbc109dCksdH1sZXQgcj1lO3QmJihyKz1cIkJcIiksaSYmKHIrPVwiSVwiKTtsZXQgbj10aGlzLl9ob2xleS5nZXQocik7aWYodm9pZCAwPT09bil7bGV0IHM9MDt0JiYoc3w9MSksaSYmKHN8PTIpLG49dGhpcy5fbWVhc3VyZShlLHMpLG4+MCYmdGhpcy5faG9sZXkuc2V0KHIsbil9cmV0dXJuIG59X21lYXN1cmUoZSx0KXtjb25zdCBpPXRoaXMuX21lYXN1cmVFbGVtZW50c1t0XTtyZXR1cm4gaS50ZXh0Q29udGVudD1lLnJlcGVhdCgzMiksaS5vZmZzZXRXaWR0aC8zMn19fSwyMjIzOihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlRFWFRfQkFTRUxJTkU9dC5ESU1fT1BBQ0lUWT10LklOVkVSVEVEX0RFRkFVTFRfQ09MT1I9dm9pZCAwO2NvbnN0IHM9aSg2MTE0KTt0LklOVkVSVEVEX0RFRkFVTFRfQ09MT1I9MjU3LHQuRElNX09QQUNJVFk9LjUsdC5URVhUX0JBU0VMSU5FPXMuaXNGaXJlZm94fHxzLmlzTGVnYWN5RWRnZT9cImJvdHRvbVwiOlwiaWRlb2dyYXBoaWNcIn0sNjE3MTooZSx0KT0+e2Z1bmN0aW9uIGkoZSl7cmV0dXJuIDU3NTA4PD1lJiZlPD01NzU1OH1mdW5jdGlvbiBzKGUpe3JldHVybiBlPj0xMjg1MTImJmU8PTEyODU5MXx8ZT49MTI3NzQ0JiZlPD0xMjg1MTF8fGU+PTEyODY0MCYmZTw9MTI4NzY3fHxlPj05NzI4JiZlPD05OTgzfHxlPj05OTg0JiZlPD0xMDE3NXx8ZT49NjUwMjQmJmU8PTY1MDM5fHxlPj0xMjkyODAmJmU8PTEyOTUzNXx8ZT49MTI3NDYyJiZlPD0xMjc0ODd9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5jb21wdXRlTmV4dFZhcmlhbnRPZmZzZXQ9dC5jcmVhdGVSZW5kZXJEaW1lbnNpb25zPXQudHJlYXRHbHlwaEFzQmFja2dyb3VuZENvbG9yPXQuYWxsb3dSZXNjYWxpbmc9dC5pc0Vtb2ppPXQuaXNSZXN0cmljdGVkUG93ZXJsaW5lR2x5cGg9dC5pc1Bvd2VybGluZUdseXBoPXQudGhyb3dJZkZhbHN5PXZvaWQgMCx0LnRocm93SWZGYWxzeT1mdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJ2YWx1ZSBtdXN0IG5vdCBiZSBmYWxzeVwiKTtyZXR1cm4gZX0sdC5pc1Bvd2VybGluZUdseXBoPWksdC5pc1Jlc3RyaWN0ZWRQb3dlcmxpbmVHbHlwaD1mdW5jdGlvbihlKXtyZXR1cm4gNTc1MjA8PWUmJmU8PTU3NTI3fSx0LmlzRW1vamk9cyx0LmFsbG93UmVzY2FsaW5nPWZ1bmN0aW9uKGUsdCxyLG4pe3JldHVybiAxPT09dCYmcj5NYXRoLmNlaWwoMS41Km4pJiZ2b2lkIDAhPT1lJiZlPjI1NSYmIXMoZSkmJiFpKGUpJiYhZnVuY3Rpb24oZSl7cmV0dXJuIDU3MzQ0PD1lJiZlPD02Mzc0M30oZSl9LHQudHJlYXRHbHlwaEFzQmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfHxmdW5jdGlvbihlKXtyZXR1cm4gOTQ3Mjw9ZSYmZTw9OTYzMX0oZSl9LHQuY3JlYXRlUmVuZGVyRGltZW5zaW9ucz1mdW5jdGlvbigpe3JldHVybntjc3M6e2NhbnZhczp7d2lkdGg6MCxoZWlnaHQ6MH0sY2VsbDp7d2lkdGg6MCxoZWlnaHQ6MH19LGRldmljZTp7Y2FudmFzOnt3aWR0aDowLGhlaWdodDowfSxjZWxsOnt3aWR0aDowLGhlaWdodDowfSxjaGFyOnt3aWR0aDowLGhlaWdodDowLGxlZnQ6MCx0b3A6MH19fX0sdC5jb21wdXRlTmV4dFZhcmlhbnRPZmZzZXQ9ZnVuY3Rpb24oZSx0LGk9MCl7cmV0dXJuKGUtKDIqTWF0aC5yb3VuZCh0KS1pKSklKDIqTWF0aC5yb3VuZCh0KSl9fSw2MDUyOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5jcmVhdGVTZWxlY3Rpb25SZW5kZXJNb2RlbD12b2lkIDA7Y2xhc3MgaXtjb25zdHJ1Y3Rvcigpe3RoaXMuY2xlYXIoKX1jbGVhcigpe3RoaXMuaGFzU2VsZWN0aW9uPSExLHRoaXMuY29sdW1uU2VsZWN0TW9kZT0hMSx0aGlzLnZpZXdwb3J0U3RhcnRSb3c9MCx0aGlzLnZpZXdwb3J0RW5kUm93PTAsdGhpcy52aWV3cG9ydENhcHBlZFN0YXJ0Um93PTAsdGhpcy52aWV3cG9ydENhcHBlZEVuZFJvdz0wLHRoaXMuc3RhcnRDb2w9MCx0aGlzLmVuZENvbD0wLHRoaXMuc2VsZWN0aW9uU3RhcnQ9dm9pZCAwLHRoaXMuc2VsZWN0aW9uRW5kPXZvaWQgMH11cGRhdGUoZSx0LGkscz0hMSl7aWYodGhpcy5zZWxlY3Rpb25TdGFydD10LHRoaXMuc2VsZWN0aW9uRW5kPWksIXR8fCFpfHx0WzBdPT09aVswXSYmdFsxXT09PWlbMV0pcmV0dXJuIHZvaWQgdGhpcy5jbGVhcigpO2NvbnN0IHI9ZS5idWZmZXJzLmFjdGl2ZS55ZGlzcCxuPXRbMV0tcixvPWlbMV0tcixhPU1hdGgubWF4KG4sMCksaD1NYXRoLm1pbihvLGUucm93cy0xKTthPj1lLnJvd3N8fGg8MD90aGlzLmNsZWFyKCk6KHRoaXMuaGFzU2VsZWN0aW9uPSEwLHRoaXMuY29sdW1uU2VsZWN0TW9kZT1zLHRoaXMudmlld3BvcnRTdGFydFJvdz1uLHRoaXMudmlld3BvcnRFbmRSb3c9byx0aGlzLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3c9YSx0aGlzLnZpZXdwb3J0Q2FwcGVkRW5kUm93PWgsdGhpcy5zdGFydENvbD10WzBdLHRoaXMuZW5kQ29sPWlbMF0pfWlzQ2VsbFNlbGVjdGVkKGUsdCxpKXtyZXR1cm4hIXRoaXMuaGFzU2VsZWN0aW9uJiYoaS09ZS5idWZmZXIuYWN0aXZlLnZpZXdwb3J0WSx0aGlzLmNvbHVtblNlbGVjdE1vZGU/dGhpcy5zdGFydENvbDw9dGhpcy5lbmRDb2w/dD49dGhpcy5zdGFydENvbCYmaT49dGhpcy52aWV3cG9ydENhcHBlZFN0YXJ0Um93JiZ0PHRoaXMuZW5kQ29sJiZpPD10aGlzLnZpZXdwb3J0Q2FwcGVkRW5kUm93OnQ8dGhpcy5zdGFydENvbCYmaT49dGhpcy52aWV3cG9ydENhcHBlZFN0YXJ0Um93JiZ0Pj10aGlzLmVuZENvbCYmaTw9dGhpcy52aWV3cG9ydENhcHBlZEVuZFJvdzppPnRoaXMudmlld3BvcnRTdGFydFJvdyYmaTx0aGlzLnZpZXdwb3J0RW5kUm93fHx0aGlzLnZpZXdwb3J0U3RhcnRSb3c9PT10aGlzLnZpZXdwb3J0RW5kUm93JiZpPT09dGhpcy52aWV3cG9ydFN0YXJ0Um93JiZ0Pj10aGlzLnN0YXJ0Q29sJiZ0PHRoaXMuZW5kQ29sfHx0aGlzLnZpZXdwb3J0U3RhcnRSb3c8dGhpcy52aWV3cG9ydEVuZFJvdyYmaT09PXRoaXMudmlld3BvcnRFbmRSb3cmJnQ8dGhpcy5lbmRDb2x8fHRoaXMudmlld3BvcnRTdGFydFJvdzx0aGlzLnZpZXdwb3J0RW5kUm93JiZpPT09dGhpcy52aWV3cG9ydFN0YXJ0Um93JiZ0Pj10aGlzLnN0YXJ0Q29sKX19dC5jcmVhdGVTZWxlY3Rpb25SZW5kZXJNb2RlbD1mdW5jdGlvbigpe3JldHVybiBuZXcgaX19LDQ1NjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuU2VsZWN0aW9uTW9kZWw9dm9pZCAwLHQuU2VsZWN0aW9uTW9kZWw9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuaXNTZWxlY3RBbGxBY3RpdmU9ITEsdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aD0wfWNsZWFyU2VsZWN0aW9uKCl7dGhpcy5zZWxlY3Rpb25TdGFydD12b2lkIDAsdGhpcy5zZWxlY3Rpb25FbmQ9dm9pZCAwLHRoaXMuaXNTZWxlY3RBbGxBY3RpdmU9ITEsdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aD0wfWdldCBmaW5hbFNlbGVjdGlvblN0YXJ0KCl7cmV0dXJuIHRoaXMuaXNTZWxlY3RBbGxBY3RpdmU/WzAsMF06dGhpcy5zZWxlY3Rpb25FbmQmJnRoaXMuc2VsZWN0aW9uU3RhcnQmJnRoaXMuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKT90aGlzLnNlbGVjdGlvbkVuZDp0aGlzLnNlbGVjdGlvblN0YXJ0fWdldCBmaW5hbFNlbGVjdGlvbkVuZCgpe2lmKHRoaXMuaXNTZWxlY3RBbGxBY3RpdmUpcmV0dXJuW3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSt0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMV07aWYodGhpcy5zZWxlY3Rpb25TdGFydCl7aWYoIXRoaXMuc2VsZWN0aW9uRW5kfHx0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkpe2NvbnN0IGU9dGhpcy5zZWxlY3Rpb25TdGFydFswXSt0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoO3JldHVybiBlPnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scz9lJXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scz09MD9bdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0rTWF0aC5mbG9vcihlL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyktMV06W2UldGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0rTWF0aC5mbG9vcihlL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyldOltlLHRoaXMuc2VsZWN0aW9uU3RhcnRbMV1dfWlmKHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGgmJnRoaXMuc2VsZWN0aW9uRW5kWzFdPT09dGhpcy5zZWxlY3Rpb25TdGFydFsxXSl7Y29uc3QgZT10aGlzLnNlbGVjdGlvblN0YXJ0WzBdK3RoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGg7cmV0dXJuIGU+dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzP1tlJXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLnNlbGVjdGlvblN0YXJ0WzFdK01hdGguZmxvb3IoZS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpXTpbTWF0aC5tYXgoZSx0aGlzLnNlbGVjdGlvbkVuZFswXSksdGhpcy5zZWxlY3Rpb25FbmRbMV1dfXJldHVybiB0aGlzLnNlbGVjdGlvbkVuZH19YXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKXtjb25zdCBlPXRoaXMuc2VsZWN0aW9uU3RhcnQsdD10aGlzLnNlbGVjdGlvbkVuZDtyZXR1cm4hKCFlfHwhdCkmJihlWzFdPnRbMV18fGVbMV09PT10WzFdJiZlWzBdPnRbMF0pfWhhbmRsZVRyaW0oZSl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uU3RhcnQmJih0aGlzLnNlbGVjdGlvblN0YXJ0WzFdLT1lKSx0aGlzLnNlbGVjdGlvbkVuZCYmKHRoaXMuc2VsZWN0aW9uRW5kWzFdLT1lKSx0aGlzLnNlbGVjdGlvbkVuZCYmdGhpcy5zZWxlY3Rpb25FbmRbMV08MD8odGhpcy5jbGVhclNlbGVjdGlvbigpLCEwKToodGhpcy5zZWxlY3Rpb25TdGFydCYmdGhpcy5zZWxlY3Rpb25TdGFydFsxXTwwJiYodGhpcy5zZWxlY3Rpb25TdGFydFsxXT0wKSwhMSl9fX0sNDI4OmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxvPW48Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbz1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihvPShuPDM/cihvKTpuPjM/cih0LGksbyk6cih0LGkpKXx8byk7cmV0dXJuIG4+MyYmbyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxvKSxvfSxyPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ2hhclNpemVTZXJ2aWNlPXZvaWQgMDtjb25zdCBuPWkoMjU4NSksbz1pKDg0NjApLGE9aSg4NDQpO2xldCBoPXQuQ2hhclNpemVTZXJ2aWNlPWNsYXNzIGV4dGVuZHMgYS5EaXNwb3NhYmxle2dldCBoYXNWYWxpZFNpemUoKXtyZXR1cm4gdGhpcy53aWR0aD4wJiZ0aGlzLmhlaWdodD4wfWNvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigpLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWksdGhpcy53aWR0aD0wLHRoaXMuaGVpZ2h0PTAsdGhpcy5fb25DaGFyU2l6ZUNoYW5nZT10aGlzLnJlZ2lzdGVyKG5ldyBvLkV2ZW50RW1pdHRlciksdGhpcy5vbkNoYXJTaXplQ2hhbmdlPXRoaXMuX29uQ2hhclNpemVDaGFuZ2UuZXZlbnQ7dHJ5e3RoaXMuX21lYXN1cmVTdHJhdGVneT10aGlzLnJlZ2lzdGVyKG5ldyBkKHRoaXMuX29wdGlvbnNTZXJ2aWNlKSl9Y2F0Y2h7dGhpcy5fbWVhc3VyZVN0cmF0ZWd5PXRoaXMucmVnaXN0ZXIobmV3IGwoZSx0LHRoaXMuX29wdGlvbnNTZXJ2aWNlKSl9dGhpcy5yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vbk11bHRpcGxlT3B0aW9uQ2hhbmdlKFtcImZvbnRGYW1pbHlcIixcImZvbnRTaXplXCJdLCgoKT0+dGhpcy5tZWFzdXJlKCkpKSl9bWVhc3VyZSgpe2NvbnN0IGU9dGhpcy5fbWVhc3VyZVN0cmF0ZWd5Lm1lYXN1cmUoKTtlLndpZHRoPT09dGhpcy53aWR0aCYmZS5oZWlnaHQ9PT10aGlzLmhlaWdodHx8KHRoaXMud2lkdGg9ZS53aWR0aCx0aGlzLmhlaWdodD1lLmhlaWdodCx0aGlzLl9vbkNoYXJTaXplQ2hhbmdlLmZpcmUoKSl9fTt0LkNoYXJTaXplU2VydmljZT1oPXMoW3IoMixuLklPcHRpb25zU2VydmljZSldLGgpO2NsYXNzIGMgZXh0ZW5kcyBhLkRpc3Bvc2FibGV7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX3Jlc3VsdD17d2lkdGg6MCxoZWlnaHQ6MH19X3ZhbGlkYXRlQW5kU2V0KGUsdCl7dm9pZCAwIT09ZSYmZT4wJiZ2b2lkIDAhPT10JiZ0PjAmJih0aGlzLl9yZXN1bHQud2lkdGg9ZSx0aGlzLl9yZXN1bHQuaGVpZ2h0PXQpfX1jbGFzcyBsIGV4dGVuZHMgY3tjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoKSx0aGlzLl9kb2N1bWVudD1lLHRoaXMuX3BhcmVudEVsZW1lbnQ9dCx0aGlzLl9vcHRpb25zU2VydmljZT1pLHRoaXMuX21lYXN1cmVFbGVtZW50PXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuX21lYXN1cmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudFwiKSx0aGlzLl9tZWFzdXJlRWxlbWVudC50ZXh0Q29udGVudD1cIldcIi5yZXBlYXQoMzIpLHRoaXMuX21lYXN1cmVFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLndoaXRlU3BhY2U9XCJwcmVcIix0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250S2VybmluZz1cIm5vbmVcIix0aGlzLl9wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX21lYXN1cmVFbGVtZW50KX1tZWFzdXJlKCl7cmV0dXJuIHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnRGYW1pbHk9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250RmFtaWx5LHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnRTaXplPWAke3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemV9cHhgLHRoaXMuX3ZhbGlkYXRlQW5kU2V0KE51bWJlcih0aGlzLl9tZWFzdXJlRWxlbWVudC5vZmZzZXRXaWR0aCkvMzIsTnVtYmVyKHRoaXMuX21lYXN1cmVFbGVtZW50Lm9mZnNldEhlaWdodCkpLHRoaXMuX3Jlc3VsdH19Y2xhc3MgZCBleHRlbmRzIGN7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl9vcHRpb25zU2VydmljZT1lLHRoaXMuX2NhbnZhcz1uZXcgT2Zmc2NyZWVuQ2FudmFzKDEwMCwxMDApLHRoaXMuX2N0eD10aGlzLl9jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO2NvbnN0IHQ9dGhpcy5fY3R4Lm1lYXN1cmVUZXh0KFwiV1wiKTtpZighKFwid2lkdGhcImluIHQmJlwiZm9udEJvdW5kaW5nQm94QXNjZW50XCJpbiB0JiZcImZvbnRCb3VuZGluZ0JveERlc2NlbnRcImluIHQpKXRocm93IG5ldyBFcnJvcihcIlJlcXVpcmVkIGZvbnQgbWV0cmljcyBub3Qgc3VwcG9ydGVkXCIpfW1lYXN1cmUoKXt0aGlzLl9jdHguZm9udD1gJHt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplfXB4ICR7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250RmFtaWx5fWA7Y29uc3QgZT10aGlzLl9jdHgubWVhc3VyZVRleHQoXCJXXCIpO3JldHVybiB0aGlzLl92YWxpZGF0ZUFuZFNldChlLndpZHRoLGUuZm9udEJvdW5kaW5nQm94QXNjZW50K2UuZm9udEJvdW5kaW5nQm94RGVzY2VudCksdGhpcy5fcmVzdWx0fX19LDQyNjk6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbj1hcmd1bWVudHMubGVuZ3RoLG89bjwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlvPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG89KG48Mz9yKG8pOm4+Mz9yKHQsaSxvKTpyKHQsaSkpfHxvKTtyZXR1cm4gbj4zJiZvJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG8pLG99LHI9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5DaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPXQuSm9pbmVkQ2VsbERhdGE9dm9pZCAwO2NvbnN0IG49aSgzNzM0KSxvPWkoNjQzKSxhPWkoNTExKSxoPWkoMjU4NSk7Y2xhc3MgYyBleHRlbmRzIG4uQXR0cmlidXRlRGF0YXtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoKSx0aGlzLmNvbnRlbnQ9MCx0aGlzLmNvbWJpbmVkRGF0YT1cIlwiLHRoaXMuZmc9ZS5mZyx0aGlzLmJnPWUuYmcsdGhpcy5jb21iaW5lZERhdGE9dCx0aGlzLl93aWR0aD1pfWlzQ29tYmluZWQoKXtyZXR1cm4gMjA5NzE1Mn1nZXRXaWR0aCgpe3JldHVybiB0aGlzLl93aWR0aH1nZXRDaGFycygpe3JldHVybiB0aGlzLmNvbWJpbmVkRGF0YX1nZXRDb2RlKCl7cmV0dXJuIDIwOTcxNTF9c2V0RnJvbUNoYXJEYXRhKGUpe3Rocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKX1nZXRBc0NoYXJEYXRhKCl7cmV0dXJuW3RoaXMuZmcsdGhpcy5nZXRDaGFycygpLHRoaXMuZ2V0V2lkdGgoKSx0aGlzLmdldENvZGUoKV19fXQuSm9pbmVkQ2VsbERhdGE9YztsZXQgbD10LkNoYXJhY3RlckpvaW5lclNlcnZpY2U9Y2xhc3MgZXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5fY2hhcmFjdGVySm9pbmVycz1bXSx0aGlzLl9uZXh0Q2hhcmFjdGVySm9pbmVySWQ9MCx0aGlzLl93b3JrQ2VsbD1uZXcgYS5DZWxsRGF0YX1yZWdpc3RlcihlKXtjb25zdCB0PXtpZDp0aGlzLl9uZXh0Q2hhcmFjdGVySm9pbmVySWQrKyxoYW5kbGVyOmV9O3JldHVybiB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLnB1c2godCksdC5pZH1kZXJlZ2lzdGVyKGUpe2ZvcihsZXQgdD0wO3Q8dGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGg7dCsrKWlmKHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbdF0uaWQ9PT1lKXJldHVybiB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLnNwbGljZSh0LDEpLCEwO3JldHVybiExfWdldEpvaW5lZENoYXJhY3RlcnMoZSl7aWYoMD09PXRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoKXJldHVybltdO2NvbnN0IHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KGUpO2lmKCF0fHwwPT09dC5sZW5ndGgpcmV0dXJuW107Y29uc3QgaT1bXSxzPXQudHJhbnNsYXRlVG9TdHJpbmcoITApO2xldCByPTAsbj0wLGE9MCxoPXQuZ2V0RmcoMCksYz10LmdldEJnKDApO2ZvcihsZXQgZT0wO2U8dC5nZXRUcmltbWVkTGVuZ3RoKCk7ZSsrKWlmKHQubG9hZENlbGwoZSx0aGlzLl93b3JrQ2VsbCksMCE9PXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkpe2lmKHRoaXMuX3dvcmtDZWxsLmZnIT09aHx8dGhpcy5fd29ya0NlbGwuYmchPT1jKXtpZihlLXI+MSl7Y29uc3QgZT10aGlzLl9nZXRKb2luZWRSYW5nZXMocyxhLG4sdCxyKTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKylpLnB1c2goZVt0XSl9cj1lLGE9bixoPXRoaXMuX3dvcmtDZWxsLmZnLGM9dGhpcy5fd29ya0NlbGwuYmd9bis9dGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGh8fG8uV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RofWlmKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy1yPjEpe2NvbnN0IGU9dGhpcy5fZ2V0Sm9pbmVkUmFuZ2VzKHMsYSxuLHQscik7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0KyspaS5wdXNoKGVbdF0pfXJldHVybiBpfV9nZXRKb2luZWRSYW5nZXModCxpLHMscixuKXtjb25zdCBvPXQuc3Vic3RyaW5nKGkscyk7bGV0IGE9W107dHJ5e2E9dGhpcy5fY2hhcmFjdGVySm9pbmVyc1swXS5oYW5kbGVyKG8pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9Zm9yKGxldCB0PTE7dDx0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aDt0KyspdHJ5e2NvbnN0IGk9dGhpcy5fY2hhcmFjdGVySm9pbmVyc1t0XS5oYW5kbGVyKG8pO2ZvcihsZXQgdD0wO3Q8aS5sZW5ndGg7dCsrKWUuX21lcmdlUmFuZ2VzKGEsaVt0XSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKX1yZXR1cm4gdGhpcy5fc3RyaW5nUmFuZ2VzVG9DZWxsUmFuZ2VzKGEscixuKSxhfV9zdHJpbmdSYW5nZXNUb0NlbGxSYW5nZXMoZSx0LGkpe2xldCBzPTAscj0hMSxuPTAsYT1lW3NdO2lmKGEpe2ZvcihsZXQgaD1pO2g8dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO2grKyl7Y29uc3QgaT10LmdldFdpZHRoKGgpLGM9dC5nZXRTdHJpbmcoaCkubGVuZ3RofHxvLldISVRFU1BBQ0VfQ0VMTF9DSEFSLmxlbmd0aDtpZigwIT09aSl7aWYoIXImJmFbMF08PW4mJihhWzBdPWgscj0hMCksYVsxXTw9bil7aWYoYVsxXT1oLGE9ZVsrK3NdLCFhKWJyZWFrO2FbMF08PW4/KGFbMF09aCxyPSEwKTpyPSExfW4rPWN9fWEmJihhWzFdPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyl9fXN0YXRpYyBfbWVyZ2VSYW5nZXMoZSx0KXtsZXQgaT0hMTtmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKyl7Y29uc3Qgcj1lW3NdO2lmKGkpe2lmKHRbMV08PXJbMF0pcmV0dXJuIGVbcy0xXVsxXT10WzFdLGU7aWYodFsxXTw9clsxXSlyZXR1cm4gZVtzLTFdWzFdPU1hdGgubWF4KHRbMV0sclsxXSksZS5zcGxpY2UocywxKSxlO2Uuc3BsaWNlKHMsMSkscy0tfWVsc2V7aWYodFsxXTw9clswXSlyZXR1cm4gZS5zcGxpY2UocywwLHQpLGU7aWYodFsxXTw9clsxXSlyZXR1cm4gclswXT1NYXRoLm1pbih0WzBdLHJbMF0pLGU7dFswXTxyWzFdJiYoclswXT1NYXRoLm1pbih0WzBdLHJbMF0pLGk9ITApfX1yZXR1cm4gaT9lW2UubGVuZ3RoLTFdWzFdPXRbMV06ZS5wdXNoKHQpLGV9fTt0LkNoYXJhY3RlckpvaW5lclNlcnZpY2U9bD1zKFtyKDAsaC5JQnVmZmVyU2VydmljZSldLGwpfSw1MTE0OihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNvcmVCcm93c2VyU2VydmljZT12b2lkIDA7Y29uc3Qgcz1pKDg0NCkscj1pKDg0NjApLG49aSgzNjU2KTtjbGFzcyBvIGV4dGVuZHMgcy5EaXNwb3NhYmxle2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigpLHRoaXMuX3RleHRhcmVhPWUsdGhpcy5fd2luZG93PXQsdGhpcy5tYWluRG9jdW1lbnQ9aSx0aGlzLl9pc0ZvY3VzZWQ9ITEsdGhpcy5fY2FjaGVkSXNGb2N1c2VkPXZvaWQgMCx0aGlzLl9zY3JlZW5EcHJNb25pdG9yPW5ldyBhKHRoaXMuX3dpbmRvdyksdGhpcy5fb25EcHJDaGFuZ2U9dGhpcy5yZWdpc3RlcihuZXcgci5FdmVudEVtaXR0ZXIpLHRoaXMub25EcHJDaGFuZ2U9dGhpcy5fb25EcHJDaGFuZ2UuZXZlbnQsdGhpcy5fb25XaW5kb3dDaGFuZ2U9dGhpcy5yZWdpc3RlcihuZXcgci5FdmVudEVtaXR0ZXIpLHRoaXMub25XaW5kb3dDaGFuZ2U9dGhpcy5fb25XaW5kb3dDaGFuZ2UuZXZlbnQsdGhpcy5yZWdpc3Rlcih0aGlzLm9uV2luZG93Q2hhbmdlKChlPT50aGlzLl9zY3JlZW5EcHJNb25pdG9yLnNldFdpbmRvdyhlKSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHIuZm9yd2FyZEV2ZW50KSh0aGlzLl9zY3JlZW5EcHJNb25pdG9yLm9uRHByQ2hhbmdlLHRoaXMuX29uRHByQ2hhbmdlKSksdGhpcy5fdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsKCgpPT50aGlzLl9pc0ZvY3VzZWQ9ITApKSx0aGlzLl90ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCgoKT0+dGhpcy5faXNGb2N1c2VkPSExKSl9Z2V0IHdpbmRvdygpe3JldHVybiB0aGlzLl93aW5kb3d9c2V0IHdpbmRvdyhlKXt0aGlzLl93aW5kb3chPT1lJiYodGhpcy5fd2luZG93PWUsdGhpcy5fb25XaW5kb3dDaGFuZ2UuZmlyZSh0aGlzLl93aW5kb3cpKX1nZXQgZHByKCl7cmV0dXJuIHRoaXMud2luZG93LmRldmljZVBpeGVsUmF0aW99Z2V0IGlzRm9jdXNlZCgpe3JldHVybiB2b2lkIDA9PT10aGlzLl9jYWNoZWRJc0ZvY3VzZWQmJih0aGlzLl9jYWNoZWRJc0ZvY3VzZWQ9dGhpcy5faXNGb2N1c2VkJiZ0aGlzLl90ZXh0YXJlYS5vd25lckRvY3VtZW50Lmhhc0ZvY3VzKCkscXVldWVNaWNyb3Rhc2soKCgpPT50aGlzLl9jYWNoZWRJc0ZvY3VzZWQ9dm9pZCAwKSkpLHRoaXMuX2NhY2hlZElzRm9jdXNlZH19dC5Db3JlQnJvd3NlclNlcnZpY2U9bztjbGFzcyBhIGV4dGVuZHMgcy5EaXNwb3NhYmxle2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5fcGFyZW50V2luZG93PWUsdGhpcy5fd2luZG93UmVzaXplTGlzdGVuZXI9dGhpcy5yZWdpc3RlcihuZXcgcy5NdXRhYmxlRGlzcG9zYWJsZSksdGhpcy5fb25EcHJDaGFuZ2U9dGhpcy5yZWdpc3RlcihuZXcgci5FdmVudEVtaXR0ZXIpLHRoaXMub25EcHJDaGFuZ2U9dGhpcy5fb25EcHJDaGFuZ2UuZXZlbnQsdGhpcy5fb3V0ZXJMaXN0ZW5lcj0oKT0+dGhpcy5fc2V0RHByQW5kRmlyZUlmRGlmZmVycygpLHRoaXMuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvPXRoaXMuX3BhcmVudFdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuX3VwZGF0ZURwcigpLHRoaXMuX3NldFdpbmRvd1Jlc2l6ZUxpc3RlbmVyKCksdGhpcy5yZWdpc3RlcigoMCxzLnRvRGlzcG9zYWJsZSkoKCgpPT50aGlzLmNsZWFyTGlzdGVuZXIoKSkpKX1zZXRXaW5kb3coZSl7dGhpcy5fcGFyZW50V2luZG93PWUsdGhpcy5fc2V0V2luZG93UmVzaXplTGlzdGVuZXIoKSx0aGlzLl9zZXREcHJBbmRGaXJlSWZEaWZmZXJzKCl9X3NldFdpbmRvd1Jlc2l6ZUxpc3RlbmVyKCl7dGhpcy5fd2luZG93UmVzaXplTGlzdGVuZXIudmFsdWU9KDAsbi5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuX3BhcmVudFdpbmRvdyxcInJlc2l6ZVwiLCgoKT0+dGhpcy5fc2V0RHByQW5kRmlyZUlmRGlmZmVycygpKSl9X3NldERwckFuZEZpcmVJZkRpZmZlcnMoKXt0aGlzLl9wYXJlbnRXaW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyE9PXRoaXMuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvJiZ0aGlzLl9vbkRwckNoYW5nZS5maXJlKHRoaXMuX3BhcmVudFdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLl91cGRhdGVEcHIoKX1fdXBkYXRlRHByKCl7dGhpcy5fb3V0ZXJMaXN0ZW5lciYmKHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdD8ucmVtb3ZlTGlzdGVuZXIodGhpcy5fb3V0ZXJMaXN0ZW5lciksdGhpcy5fY3VycmVudERldmljZVBpeGVsUmF0aW89dGhpcy5fcGFyZW50V2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0PXRoaXMuX3BhcmVudFdpbmRvdy5tYXRjaE1lZGlhKGBzY3JlZW4gYW5kIChyZXNvbHV0aW9uOiAke3RoaXMuX3BhcmVudFdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfWRwcHgpYCksdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LmFkZExpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpKX1jbGVhckxpc3RlbmVyKCl7dGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0JiZ0aGlzLl9vdXRlckxpc3RlbmVyJiYodGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LnJlbW92ZUxpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpLHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdD12b2lkIDAsdGhpcy5fb3V0ZXJMaXN0ZW5lcj12b2lkIDApfX19LDc3OTooZSx0LGkpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5MaW5rUHJvdmlkZXJTZXJ2aWNlPXZvaWQgMDtjb25zdCBzPWkoODQ0KTtjbGFzcyByIGV4dGVuZHMgcy5EaXNwb3NhYmxle2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmxpbmtQcm92aWRlcnM9W10sdGhpcy5yZWdpc3RlcigoMCxzLnRvRGlzcG9zYWJsZSkoKCgpPT50aGlzLmxpbmtQcm92aWRlcnMubGVuZ3RoPTApKSl9cmVnaXN0ZXJMaW5rUHJvdmlkZXIoZSl7cmV0dXJuIHRoaXMubGlua1Byb3ZpZGVycy5wdXNoKGUpLHtkaXNwb3NlOigpPT57Y29uc3QgdD10aGlzLmxpbmtQcm92aWRlcnMuaW5kZXhPZihlKTstMSE9PXQmJnRoaXMubGlua1Byb3ZpZGVycy5zcGxpY2UodCwxKX19fX10LkxpbmtQcm92aWRlclNlcnZpY2U9cn0sODkzNDpmdW5jdGlvbihlLHQsaSl7dmFyIHM9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQsaSxzKXt2YXIgcixuPWFyZ3VtZW50cy5sZW5ndGgsbz1uPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW89UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobz0objwzP3Iobyk6bj4zP3IodCxpLG8pOnIodCxpKSl8fG8pO3JldHVybiBuPjMmJm8mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbyksb30scj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lk1vdXNlU2VydmljZT12b2lkIDA7Y29uc3Qgbj1pKDQ3MjUpLG89aSg5ODA2KTtsZXQgYT10Lk1vdXNlU2VydmljZT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3JlbmRlclNlcnZpY2U9ZSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2U9dH1nZXRDb29yZHMoZSx0LGkscyxyKXtyZXR1cm4oMCxvLmdldENvb3Jkcykod2luZG93LGUsdCxpLHMsdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSx0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGgsdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodCxyKX1nZXRNb3VzZVJlcG9ydENvb3JkcyhlLHQpe2NvbnN0IGk9KDAsby5nZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudCkod2luZG93LGUsdCk7aWYodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSlyZXR1cm4gaVswXT1NYXRoLm1pbihNYXRoLm1heChpWzBdLDApLHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2FudmFzLndpZHRoLTEpLGlbMV09TWF0aC5taW4oTWF0aC5tYXgoaVsxXSwwKSx0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHQtMSkse2NvbDpNYXRoLmZsb29yKGlbMF0vdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoKSxyb3c6TWF0aC5mbG9vcihpWzFdL3RoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHQpLHg6TWF0aC5mbG9vcihpWzBdKSx5Ok1hdGguZmxvb3IoaVsxXSl9fX07dC5Nb3VzZVNlcnZpY2U9YT1zKFtyKDAsbi5JUmVuZGVyU2VydmljZSkscigxLG4uSUNoYXJTaXplU2VydmljZSldLGEpfSwzMjMwOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxvPW48Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbz1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihvPShuPDM/cihvKTpuPjM/cih0LGksbyk6cih0LGkpKXx8byk7cmV0dXJuIG4+MyYmbyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxvKSxvfSxyPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuUmVuZGVyU2VydmljZT12b2lkIDA7Y29uc3Qgbj1pKDYxOTMpLG89aSg0NzI1KSxhPWkoODQ2MCksaD1pKDg0NCksYz1pKDcyMjYpLGw9aSgyNTg1KTtsZXQgZD10LlJlbmRlclNlcnZpY2U9Y2xhc3MgZXh0ZW5kcyBoLkRpc3Bvc2FibGV7Z2V0IGRpbWVuc2lvbnMoKXtyZXR1cm4gdGhpcy5fcmVuZGVyZXIudmFsdWUuZGltZW5zaW9uc31jb25zdHJ1Y3RvcihlLHQsaSxzLHIsbyxsLGQpe3N1cGVyKCksdGhpcy5fcm93Q291bnQ9ZSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2U9cyx0aGlzLl9yZW5kZXJlcj10aGlzLnJlZ2lzdGVyKG5ldyBoLk11dGFibGVEaXNwb3NhYmxlKSx0aGlzLl9wYXVzZWRSZXNpemVUYXNrPW5ldyBjLkRlYm91bmNlZElkbGVUYXNrLHRoaXMuX29ic2VydmVyRGlzcG9zYWJsZT10aGlzLnJlZ2lzdGVyKG5ldyBoLk11dGFibGVEaXNwb3NhYmxlKSx0aGlzLl9pc1BhdXNlZD0hMSx0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoPSExLHRoaXMuX2lzTmV4dFJlbmRlclJlZHJhd09ubHk9ITAsdGhpcy5fbmVlZHNTZWxlY3Rpb25SZWZyZXNoPSExLHRoaXMuX2NhbnZhc1dpZHRoPTAsdGhpcy5fY2FudmFzSGVpZ2h0PTAsdGhpcy5fc2VsZWN0aW9uU3RhdGU9e3N0YXJ0OnZvaWQgMCxlbmQ6dm9pZCAwLGNvbHVtblNlbGVjdE1vZGU6ITF9LHRoaXMuX29uRGltZW5zaW9uc0NoYW5nZT10aGlzLnJlZ2lzdGVyKG5ldyBhLkV2ZW50RW1pdHRlciksdGhpcy5vbkRpbWVuc2lvbnNDaGFuZ2U9dGhpcy5fb25EaW1lbnNpb25zQ2hhbmdlLmV2ZW50LHRoaXMuX29uUmVuZGVyZWRWaWV3cG9ydENoYW5nZT10aGlzLnJlZ2lzdGVyKG5ldyBhLkV2ZW50RW1pdHRlciksdGhpcy5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2U9dGhpcy5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlLmV2ZW50LHRoaXMuX29uUmVuZGVyPXRoaXMucmVnaXN0ZXIobmV3IGEuRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVuZGVyPXRoaXMuX29uUmVuZGVyLmV2ZW50LHRoaXMuX29uUmVmcmVzaFJlcXVlc3Q9dGhpcy5yZWdpc3RlcihuZXcgYS5FdmVudEVtaXR0ZXIpLHRoaXMub25SZWZyZXNoUmVxdWVzdD10aGlzLl9vblJlZnJlc2hSZXF1ZXN0LmV2ZW50LHRoaXMuX3JlbmRlckRlYm91bmNlcj1uZXcgbi5SZW5kZXJEZWJvdW5jZXIoKChlLHQpPT50aGlzLl9yZW5kZXJSb3dzKGUsdCkpLGwpLHRoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyRGVib3VuY2VyKSx0aGlzLnJlZ2lzdGVyKGwub25EcHJDaGFuZ2UoKCgpPT50aGlzLmhhbmRsZURldmljZVBpeGVsUmF0aW9DaGFuZ2UoKSkpKSx0aGlzLnJlZ2lzdGVyKG8ub25SZXNpemUoKCgpPT50aGlzLl9mdWxsUmVmcmVzaCgpKSkpLHRoaXMucmVnaXN0ZXIoby5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKCgpPT50aGlzLl9yZW5kZXJlci52YWx1ZT8uY2xlYXIoKSkpKSx0aGlzLnJlZ2lzdGVyKGkub25PcHRpb25DaGFuZ2UoKCgpPT50aGlzLl9oYW5kbGVPcHRpb25zQ2hhbmdlZCgpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fY2hhclNpemVTZXJ2aWNlLm9uQ2hhclNpemVDaGFuZ2UoKCgpPT50aGlzLmhhbmRsZUNoYXJTaXplQ2hhbmdlZCgpKSkpLHRoaXMucmVnaXN0ZXIoci5vbkRlY29yYXRpb25SZWdpc3RlcmVkKCgoKT0+dGhpcy5fZnVsbFJlZnJlc2goKSkpKSx0aGlzLnJlZ2lzdGVyKHIub25EZWNvcmF0aW9uUmVtb3ZlZCgoKCk9PnRoaXMuX2Z1bGxSZWZyZXNoKCkpKSksdGhpcy5yZWdpc3RlcihpLm9uTXVsdGlwbGVPcHRpb25DaGFuZ2UoW1wiY3VzdG9tR2x5cGhzXCIsXCJkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9yc1wiLFwibGV0dGVyU3BhY2luZ1wiLFwibGluZUhlaWdodFwiLFwiZm9udEZhbWlseVwiLFwiZm9udFNpemVcIixcImZvbnRXZWlnaHRcIixcImZvbnRXZWlnaHRCb2xkXCIsXCJtaW5pbXVtQ29udHJhc3RSYXRpb1wiLFwicmVzY2FsZU92ZXJsYXBwaW5nR2x5cGhzXCJdLCgoKT0+e3RoaXMuY2xlYXIoKSx0aGlzLmhhbmRsZVJlc2l6ZShvLmNvbHMsby5yb3dzKSx0aGlzLl9mdWxsUmVmcmVzaCgpfSkpKSx0aGlzLnJlZ2lzdGVyKGkub25NdWx0aXBsZU9wdGlvbkNoYW5nZShbXCJjdXJzb3JCbGlua1wiLFwiY3Vyc29yU3R5bGVcIl0sKCgpPT50aGlzLnJlZnJlc2hSb3dzKG8uYnVmZmVyLnksby5idWZmZXIueSwhMCkpKSksdGhpcy5yZWdpc3RlcihkLm9uQ2hhbmdlQ29sb3JzKCgoKT0+dGhpcy5fZnVsbFJlZnJlc2goKSkpKSx0aGlzLl9yZWdpc3RlckludGVyc2VjdGlvbk9ic2VydmVyKGwud2luZG93LHQpLHRoaXMucmVnaXN0ZXIobC5vbldpbmRvd0NoYW5nZSgoZT0+dGhpcy5fcmVnaXN0ZXJJbnRlcnNlY3Rpb25PYnNlcnZlcihlLHQpKSkpfV9yZWdpc3RlckludGVyc2VjdGlvbk9ic2VydmVyKGUsdCl7aWYoXCJJbnRlcnNlY3Rpb25PYnNlcnZlclwiaW4gZSl7Y29uc3QgaT1uZXcgZS5JbnRlcnNlY3Rpb25PYnNlcnZlcigoZT0+dGhpcy5faGFuZGxlSW50ZXJzZWN0aW9uQ2hhbmdlKGVbZS5sZW5ndGgtMV0pKSx7dGhyZXNob2xkOjB9KTtpLm9ic2VydmUodCksdGhpcy5fb2JzZXJ2ZXJEaXNwb3NhYmxlLnZhbHVlPSgwLGgudG9EaXNwb3NhYmxlKSgoKCk9PmkuZGlzY29ubmVjdCgpKSl9fV9oYW5kbGVJbnRlcnNlY3Rpb25DaGFuZ2UoZSl7dGhpcy5faXNQYXVzZWQ9dm9pZCAwPT09ZS5pc0ludGVyc2VjdGluZz8wPT09ZS5pbnRlcnNlY3Rpb25SYXRpbzohZS5pc0ludGVyc2VjdGluZyx0aGlzLl9pc1BhdXNlZHx8dGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZXx8dGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKSwhdGhpcy5faXNQYXVzZWQmJnRoaXMuX25lZWRzRnVsbFJlZnJlc2gmJih0aGlzLl9wYXVzZWRSZXNpemVUYXNrLmZsdXNoKCksdGhpcy5yZWZyZXNoUm93cygwLHRoaXMuX3Jvd0NvdW50LTEpLHRoaXMuX25lZWRzRnVsbFJlZnJlc2g9ITEpfXJlZnJlc2hSb3dzKGUsdCxpPSExKXt0aGlzLl9pc1BhdXNlZD90aGlzLl9uZWVkc0Z1bGxSZWZyZXNoPSEwOihpfHwodGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seT0hMSksdGhpcy5fcmVuZGVyRGVib3VuY2VyLnJlZnJlc2goZSx0LHRoaXMuX3Jvd0NvdW50KSl9X3JlbmRlclJvd3MoZSx0KXt0aGlzLl9yZW5kZXJlci52YWx1ZSYmKGU9TWF0aC5taW4oZSx0aGlzLl9yb3dDb3VudC0xKSx0PU1hdGgubWluKHQsdGhpcy5fcm93Q291bnQtMSksdGhpcy5fcmVuZGVyZXIudmFsdWUucmVuZGVyUm93cyhlLHQpLHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaCYmKHRoaXMuX3JlbmRlcmVyLnZhbHVlLmhhbmRsZVNlbGVjdGlvbkNoYW5nZWQodGhpcy5fc2VsZWN0aW9uU3RhdGUuc3RhcnQsdGhpcy5fc2VsZWN0aW9uU3RhdGUuZW5kLHRoaXMuX3NlbGVjdGlvblN0YXRlLmNvbHVtblNlbGVjdE1vZGUpLHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaD0hMSksdGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seXx8dGhpcy5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlLmZpcmUoe3N0YXJ0OmUsZW5kOnR9KSx0aGlzLl9vblJlbmRlci5maXJlKHtzdGFydDplLGVuZDp0fSksdGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seT0hMCl9cmVzaXplKGUsdCl7dGhpcy5fcm93Q291bnQ9dCx0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKX1faGFuZGxlT3B0aW9uc0NoYW5nZWQoKXt0aGlzLl9yZW5kZXJlci52YWx1ZSYmKHRoaXMucmVmcmVzaFJvd3MoMCx0aGlzLl9yb3dDb3VudC0xKSx0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKSl9X2ZpcmVPbkNhbnZhc1Jlc2l6ZSgpe3RoaXMuX3JlbmRlcmVyLnZhbHVlJiYodGhpcy5fcmVuZGVyZXIudmFsdWUuZGltZW5zaW9ucy5jc3MuY2FudmFzLndpZHRoPT09dGhpcy5fY2FudmFzV2lkdGgmJnRoaXMuX3JlbmRlcmVyLnZhbHVlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHQ9PT10aGlzLl9jYW52YXNIZWlnaHR8fHRoaXMuX29uRGltZW5zaW9uc0NoYW5nZS5maXJlKHRoaXMuX3JlbmRlcmVyLnZhbHVlLmRpbWVuc2lvbnMpKX1oYXNSZW5kZXJlcigpe3JldHVybiEhdGhpcy5fcmVuZGVyZXIudmFsdWV9c2V0UmVuZGVyZXIoZSl7dGhpcy5fcmVuZGVyZXIudmFsdWU9ZSx0aGlzLl9yZW5kZXJlci52YWx1ZSYmKHRoaXMuX3JlbmRlcmVyLnZhbHVlLm9uUmVxdWVzdFJlZHJhdygoZT0+dGhpcy5yZWZyZXNoUm93cyhlLnN0YXJ0LGUuZW5kLCEwKSkpLHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaD0hMCx0aGlzLl9mdWxsUmVmcmVzaCgpKX1hZGRSZWZyZXNoQ2FsbGJhY2soZSl7cmV0dXJuIHRoaXMuX3JlbmRlckRlYm91bmNlci5hZGRSZWZyZXNoQ2FsbGJhY2soZSl9X2Z1bGxSZWZyZXNoKCl7dGhpcy5faXNQYXVzZWQ/dGhpcy5fbmVlZHNGdWxsUmVmcmVzaD0hMDp0aGlzLnJlZnJlc2hSb3dzKDAsdGhpcy5fcm93Q291bnQtMSl9Y2xlYXJUZXh0dXJlQXRsYXMoKXt0aGlzLl9yZW5kZXJlci52YWx1ZSYmKHRoaXMuX3JlbmRlcmVyLnZhbHVlLmNsZWFyVGV4dHVyZUF0bGFzPy4oKSx0aGlzLl9mdWxsUmVmcmVzaCgpKX1oYW5kbGVEZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCl7dGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKSx0aGlzLl9yZW5kZXJlci52YWx1ZSYmKHRoaXMuX3JlbmRlcmVyLnZhbHVlLmhhbmRsZURldmljZVBpeGVsUmF0aW9DaGFuZ2UoKSx0aGlzLnJlZnJlc2hSb3dzKDAsdGhpcy5fcm93Q291bnQtMSkpfWhhbmRsZVJlc2l6ZShlLHQpe3RoaXMuX3JlbmRlcmVyLnZhbHVlJiYodGhpcy5faXNQYXVzZWQ/dGhpcy5fcGF1c2VkUmVzaXplVGFzay5zZXQoKCgpPT50aGlzLl9yZW5kZXJlci52YWx1ZT8uaGFuZGxlUmVzaXplKGUsdCkpKTp0aGlzLl9yZW5kZXJlci52YWx1ZS5oYW5kbGVSZXNpemUoZSx0KSx0aGlzLl9mdWxsUmVmcmVzaCgpKX1oYW5kbGVDaGFyU2l6ZUNoYW5nZWQoKXt0aGlzLl9yZW5kZXJlci52YWx1ZT8uaGFuZGxlQ2hhclNpemVDaGFuZ2VkKCl9aGFuZGxlQmx1cigpe3RoaXMuX3JlbmRlcmVyLnZhbHVlPy5oYW5kbGVCbHVyKCl9aGFuZGxlRm9jdXMoKXt0aGlzLl9yZW5kZXJlci52YWx1ZT8uaGFuZGxlRm9jdXMoKX1oYW5kbGVTZWxlY3Rpb25DaGFuZ2VkKGUsdCxpKXt0aGlzLl9zZWxlY3Rpb25TdGF0ZS5zdGFydD1lLHRoaXMuX3NlbGVjdGlvblN0YXRlLmVuZD10LHRoaXMuX3NlbGVjdGlvblN0YXRlLmNvbHVtblNlbGVjdE1vZGU9aSx0aGlzLl9yZW5kZXJlci52YWx1ZT8uaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZChlLHQsaSl9aGFuZGxlQ3Vyc29yTW92ZSgpe3RoaXMuX3JlbmRlcmVyLnZhbHVlPy5oYW5kbGVDdXJzb3JNb3ZlKCl9Y2xlYXIoKXt0aGlzLl9yZW5kZXJlci52YWx1ZT8uY2xlYXIoKX19O3QuUmVuZGVyU2VydmljZT1kPXMoW3IoMixsLklPcHRpb25zU2VydmljZSkscigzLG8uSUNoYXJTaXplU2VydmljZSkscig0LGwuSURlY29yYXRpb25TZXJ2aWNlKSxyKDUsbC5JQnVmZmVyU2VydmljZSkscig2LG8uSUNvcmVCcm93c2VyU2VydmljZSkscig3LG8uSVRoZW1lU2VydmljZSldLGQpfSw5MzEyOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxvPW48Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbz1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihvPShuPDM/cihvKTpuPjM/cih0LGksbyk6cih0LGkpKXx8byk7cmV0dXJuIG4+MyYmbyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxvKSxvfSxyPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuU2VsZWN0aW9uU2VydmljZT12b2lkIDA7Y29uc3Qgbj1pKDk4MDYpLG89aSg5NTA0KSxhPWkoNDU2KSxoPWkoNDcyNSksYz1pKDg0NjApLGw9aSg4NDQpLGQ9aSg2MTE0KSxfPWkoNDg0MSksdT1pKDUxMSksZj1pKDI1ODUpLHY9U3RyaW5nLmZyb21DaGFyQ29kZSgxNjApLHA9bmV3IFJlZ0V4cCh2LFwiZ1wiKTtsZXQgZz10LlNlbGVjdGlvblNlcnZpY2U9Y2xhc3MgZXh0ZW5kcyBsLkRpc3Bvc2FibGV7Y29uc3RydWN0b3IoZSx0LGkscyxyLG4sbyxoLGQpe3N1cGVyKCksdGhpcy5fZWxlbWVudD1lLHRoaXMuX3NjcmVlbkVsZW1lbnQ9dCx0aGlzLl9saW5raWZpZXI9aSx0aGlzLl9idWZmZXJTZXJ2aWNlPXMsdGhpcy5fY29yZVNlcnZpY2U9cix0aGlzLl9tb3VzZVNlcnZpY2U9bix0aGlzLl9vcHRpb25zU2VydmljZT1vLHRoaXMuX3JlbmRlclNlcnZpY2U9aCx0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2U9ZCx0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PTAsdGhpcy5fZW5hYmxlZD0hMCx0aGlzLl93b3JrQ2VsbD1uZXcgdS5DZWxsRGF0YSx0aGlzLl9tb3VzZURvd25UaW1lU3RhbXA9MCx0aGlzLl9vbGRIYXNTZWxlY3Rpb249ITEsdGhpcy5fb2xkU2VsZWN0aW9uU3RhcnQ9dm9pZCAwLHRoaXMuX29sZFNlbGVjdGlvbkVuZD12b2lkIDAsdGhpcy5fb25MaW51eE1vdXNlU2VsZWN0aW9uPXRoaXMucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSx0aGlzLm9uTGludXhNb3VzZVNlbGVjdGlvbj10aGlzLl9vbkxpbnV4TW91c2VTZWxlY3Rpb24uZXZlbnQsdGhpcy5fb25SZWRyYXdSZXF1ZXN0PXRoaXMucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVxdWVzdFJlZHJhdz10aGlzLl9vblJlZHJhd1JlcXVlc3QuZXZlbnQsdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2U9dGhpcy5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLHRoaXMub25TZWxlY3Rpb25DaGFuZ2U9dGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnQsdGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXM9dGhpcy5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLHRoaXMub25SZXF1ZXN0U2Nyb2xsTGluZXM9dGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZXZlbnQsdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXI9ZT0+dGhpcy5faGFuZGxlTW91c2VNb3ZlKGUpLHRoaXMuX21vdXNlVXBMaXN0ZW5lcj1lPT50aGlzLl9oYW5kbGVNb3VzZVVwKGUpLHRoaXMuX2NvcmVTZXJ2aWNlLm9uVXNlcklucHV0KCgoKT0+e3RoaXMuaGFzU2VsZWN0aW9uJiZ0aGlzLmNsZWFyU2VsZWN0aW9uKCl9KSksdGhpcy5fdHJpbUxpc3RlbmVyPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLm9uVHJpbSgoZT0+dGhpcy5faGFuZGxlVHJpbShlKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGU9PnRoaXMuX2hhbmRsZUJ1ZmZlckFjdGl2YXRlKGUpKSkpLHRoaXMuZW5hYmxlKCksdGhpcy5fbW9kZWw9bmV3IGEuU2VsZWN0aW9uTW9kZWwodGhpcy5fYnVmZmVyU2VydmljZSksdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZT0wLHRoaXMucmVnaXN0ZXIoKDAsbC50b0Rpc3Bvc2FibGUpKCgoKT0+e3RoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpfSkpKX1yZXNldCgpe3RoaXMuY2xlYXJTZWxlY3Rpb24oKX1kaXNhYmxlKCl7dGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMuX2VuYWJsZWQ9ITF9ZW5hYmxlKCl7dGhpcy5fZW5hYmxlZD0hMH1nZXQgc2VsZWN0aW9uU3RhcnQoKXtyZXR1cm4gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydH1nZXQgc2VsZWN0aW9uRW5kKCl7cmV0dXJuIHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kfWdldCBoYXNTZWxlY3Rpb24oKXtjb25zdCBlPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsdD10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtyZXR1cm4hKCFlfHwhdHx8ZVswXT09PXRbMF0mJmVbMV09PT10WzFdKX1nZXQgc2VsZWN0aW9uVGV4dCgpe2NvbnN0IGU9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCx0PXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO2lmKCFlfHwhdClyZXR1cm5cIlwiO2NvbnN0IGk9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIscz1bXTtpZigzPT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSl7aWYoZVswXT09PXRbMF0pcmV0dXJuXCJcIjtjb25zdCByPWVbMF08dFswXT9lWzBdOnRbMF0sbj1lWzBdPHRbMF0/dFswXTplWzBdO2ZvcihsZXQgbz1lWzFdO288PXRbMV07bysrKXtjb25zdCBlPWkudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKG8sITAscixuKTtzLnB1c2goZSl9fWVsc2V7Y29uc3Qgcj1lWzFdPT09dFsxXT90WzBdOnZvaWQgMDtzLnB1c2goaS50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoZVsxXSwhMCxlWzBdLHIpKTtmb3IobGV0IHI9ZVsxXSsxO3I8PXRbMV0tMTtyKyspe2NvbnN0IGU9aS5saW5lcy5nZXQociksdD1pLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhyLCEwKTtlPy5pc1dyYXBwZWQ/c1tzLmxlbmd0aC0xXSs9dDpzLnB1c2godCl9aWYoZVsxXSE9PXRbMV0pe2NvbnN0IGU9aS5saW5lcy5nZXQodFsxXSkscj1pLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyh0WzFdLCEwLDAsdFswXSk7ZSYmZS5pc1dyYXBwZWQ/c1tzLmxlbmd0aC0xXSs9cjpzLnB1c2gocil9fXJldHVybiBzLm1hcCgoZT0+ZS5yZXBsYWNlKHAsXCIgXCIpKSkuam9pbihkLmlzV2luZG93cz9cIlxcclxcblwiOlwiXFxuXCIpfWNsZWFyU2VsZWN0aW9uKCl7dGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKSx0aGlzLnJlZnJlc2goKSx0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCl9cmVmcmVzaChlKXt0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWV8fCh0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9dGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCgpPT50aGlzLl9yZWZyZXNoKCkpKSksZC5pc0xpbnV4JiZlJiZ0aGlzLnNlbGVjdGlvblRleHQubGVuZ3RoJiZ0aGlzLl9vbkxpbnV4TW91c2VTZWxlY3Rpb24uZmlyZSh0aGlzLnNlbGVjdGlvblRleHQpfV9yZWZyZXNoKCl7dGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPXZvaWQgMCx0aGlzLl9vblJlZHJhd1JlcXVlc3QuZmlyZSh7c3RhcnQ6dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCxlbmQ6dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQsY29sdW1uU2VsZWN0TW9kZTozPT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZX0pfV9pc0NsaWNrSW5TZWxlY3Rpb24oZSl7Y29uc3QgdD10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKSxpPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQscz10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtyZXR1cm4hIShpJiZzJiZ0KSYmdGhpcy5fYXJlQ29vcmRzSW5TZWxlY3Rpb24odCxpLHMpfWlzQ2VsbEluU2VsZWN0aW9uKGUsdCl7Y29uc3QgaT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LHM9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7cmV0dXJuISghaXx8IXMpJiZ0aGlzLl9hcmVDb29yZHNJblNlbGVjdGlvbihbZSx0XSxpLHMpfV9hcmVDb29yZHNJblNlbGVjdGlvbihlLHQsaSl7cmV0dXJuIGVbMV0+dFsxXSYmZVsxXTxpWzFdfHx0WzFdPT09aVsxXSYmZVsxXT09PXRbMV0mJmVbMF0+PXRbMF0mJmVbMF08aVswXXx8dFsxXTxpWzFdJiZlWzFdPT09aVsxXSYmZVswXTxpWzBdfHx0WzFdPGlbMV0mJmVbMV09PT10WzFdJiZlWzBdPj10WzBdfV9zZWxlY3RXb3JkQXRDdXJzb3IoZSx0KXtjb25zdCBpPXRoaXMuX2xpbmtpZmllci5jdXJyZW50TGluaz8ubGluaz8ucmFuZ2U7aWYoaSlyZXR1cm4gdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9W2kuc3RhcnQueC0xLGkuc3RhcnQueS0xXSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD0oMCxfLmdldFJhbmdlTGVuZ3RoKShpLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXZvaWQgMCwhMDtjb25zdCBzPXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpO3JldHVybiEhcyYmKHRoaXMuX3NlbGVjdFdvcmRBdChzLHQpLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD12b2lkIDAsITApfXNlbGVjdEFsbCgpe3RoaXMuX21vZGVsLmlzU2VsZWN0QWxsQWN0aXZlPSEwLHRoaXMucmVmcmVzaCgpLHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKX1zZWxlY3RMaW5lcyhlLHQpe3RoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCksZT1NYXRoLm1heChlLDApLHQ9TWF0aC5taW4odCx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgtMSksdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9WzAsZV0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPVt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdF0sdGhpcy5yZWZyZXNoKCksdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfV9oYW5kbGVUcmltKGUpe3RoaXMuX21vZGVsLmhhbmRsZVRyaW0oZSkmJnRoaXMucmVmcmVzaCgpfV9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKXtjb25zdCB0PXRoaXMuX21vdXNlU2VydmljZS5nZXRDb29yZHMoZSx0aGlzLl9zY3JlZW5FbGVtZW50LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsITApO2lmKHQpcmV0dXJuIHRbMF0tLSx0WzFdLS0sdFsxXSs9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsdH1fZ2V0TW91c2VFdmVudFNjcm9sbEFtb3VudChlKXtsZXQgdD0oMCxuLmdldENvb3Jkc1JlbGF0aXZlVG9FbGVtZW50KSh0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LGUsdGhpcy5fc2NyZWVuRWxlbWVudClbMV07Y29uc3QgaT10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHQ7cmV0dXJuIHQ+PTAmJnQ8PWk/MDoodD5pJiYodC09aSksdD1NYXRoLm1pbihNYXRoLm1heCh0LC01MCksNTApLHQvPTUwLHQvTWF0aC5hYnModCkrTWF0aC5yb3VuZCgxNCp0KSl9c2hvdWxkRm9yY2VTZWxlY3Rpb24oZSl7cmV0dXJuIGQuaXNNYWM/ZS5hbHRLZXkmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb246ZS5zaGlmdEtleX1oYW5kbGVNb3VzZURvd24oZSl7aWYodGhpcy5fbW91c2VEb3duVGltZVN0YW1wPWUudGltZVN0YW1wLCgyIT09ZS5idXR0b258fCF0aGlzLmhhc1NlbGVjdGlvbikmJjA9PT1lLmJ1dHRvbil7aWYoIXRoaXMuX2VuYWJsZWQpe2lmKCF0aGlzLnNob3VsZEZvcmNlU2VsZWN0aW9uKGUpKXJldHVybjtlLnN0b3BQcm9wYWdhdGlvbigpfWUucHJldmVudERlZmF1bHQoKSx0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PTAsdGhpcy5fZW5hYmxlZCYmZS5zaGlmdEtleT90aGlzLl9oYW5kbGVJbmNyZW1lbnRhbENsaWNrKGUpOjE9PT1lLmRldGFpbD90aGlzLl9oYW5kbGVTaW5nbGVDbGljayhlKToyPT09ZS5kZXRhaWw/dGhpcy5faGFuZGxlRG91YmxlQ2xpY2soZSk6Mz09PWUuZGV0YWlsJiZ0aGlzLl9oYW5kbGVUcmlwbGVDbGljayhlKSx0aGlzLl9hZGRNb3VzZURvd25MaXN0ZW5lcnMoKSx0aGlzLnJlZnJlc2goITApfX1fYWRkTW91c2VEb3duTGlzdGVuZXJzKCl7dGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50JiYodGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciksdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5fbW91c2VVcExpc3RlbmVyKSksdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXI9dGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLndpbmRvdy5zZXRJbnRlcnZhbCgoKCk9PnRoaXMuX2RyYWdTY3JvbGwoKSksNTApfV9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKXt0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQmJih0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKSx0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLl9tb3VzZVVwTGlzdGVuZXIpKSx0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIpLHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyPXZvaWQgMH1faGFuZGxlSW5jcmVtZW50YWxDbGljayhlKXt0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCYmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKSl9X2hhbmRsZVNpbmdsZUNsaWNrKGUpe2lmKHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPTAsdGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmU9ITEsdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZT10aGlzLnNob3VsZENvbHVtblNlbGVjdChlKT8zOjAsdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSksIXRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0KXJldHVybjt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dm9pZCAwO2NvbnN0IHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzFdKTt0JiZ0Lmxlbmd0aCE9PXRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdJiYwPT09dC5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSkmJnRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKyt9X2hhbmRsZURvdWJsZUNsaWNrKGUpe3RoaXMuX3NlbGVjdFdvcmRBdEN1cnNvcihlLCEwKSYmKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGU9MSl9X2hhbmRsZVRyaXBsZUNsaWNrKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSk7dCYmKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGU9Mix0aGlzLl9zZWxlY3RMaW5lQXQodFsxXSkpfXNob3VsZENvbHVtblNlbGVjdChlKXtyZXR1cm4gZS5hbHRLZXkmJiEoZC5pc01hYyYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5tYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbil9X2hhbmRsZU1vdXNlTW92ZShlKXtpZihlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydClyZXR1cm47Y29uc3QgdD10aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ/W3RoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV1dOm51bGw7aWYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpLCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQpcmV0dXJuIHZvaWQgdGhpcy5yZWZyZXNoKCEwKTsyPT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZT90aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV08dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMV0/dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPTA6dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczoxPT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSYmdGhpcy5fc2VsZWN0VG9Xb3JkQXQodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKSx0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PXRoaXMuX2dldE1vdXNlRXZlbnRTY3JvbGxBbW91bnQoZSksMyE9PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUmJih0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PjA/dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczp0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PDAmJih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09MCkpO2NvbnN0IGk9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7aWYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdPGkubGluZXMubGVuZ3RoKXtjb25zdCBlPWkubGluZXMuZ2V0KHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXSk7ZSYmMD09PWUuaGFzV2lkdGgodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdKSYmdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyYmdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdKyt9dCYmdFswXT09PXRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSYmdFsxXT09PXRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXXx8dGhpcy5yZWZyZXNoKCEwKX1fZHJhZ1Njcm9sbCgpe2lmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCYmdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQmJnRoaXMuX2RyYWdTY3JvbGxBbW91bnQpe3RoaXMuX29uUmVxdWVzdFNjcm9sbExpbmVzLmZpcmUoe2Ftb3VudDp0aGlzLl9kcmFnU2Nyb2xsQW1vdW50LHN1cHByZXNzU2Nyb2xsRXZlbnQ6ITF9KTtjb25zdCBlPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO3RoaXMuX2RyYWdTY3JvbGxBbW91bnQ+MD8oMyE9PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUmJih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV09TWF0aC5taW4oZS55ZGlzcCt0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsZS5saW5lcy5sZW5ndGgtMSkpOigzIT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSYmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT0wKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV09ZS55ZGlzcCksdGhpcy5yZWZyZXNoKCl9fV9oYW5kbGVNb3VzZVVwKGUpe2NvbnN0IHQ9ZS50aW1lU3RhbXAtdGhpcy5fbW91c2VEb3duVGltZVN0YW1wO2lmKHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpLHRoaXMuc2VsZWN0aW9uVGV4dC5sZW5ndGg8PTEmJnQ8NTAwJiZlLmFsdEtleSYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5hbHRDbGlja01vdmVzQ3Vyc29yKXtpZih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZT09PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKXtjb25zdCB0PXRoaXMuX21vdXNlU2VydmljZS5nZXRDb29yZHMoZSx0aGlzLl9lbGVtZW50LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsITEpO2lmKHQmJnZvaWQgMCE9PXRbMF0mJnZvaWQgMCE9PXRbMV0pe2NvbnN0IGU9KDAsby5tb3ZlVG9DZWxsU2VxdWVuY2UpKHRbMF0tMSx0WzFdLTEsdGhpcy5fYnVmZmVyU2VydmljZSx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzKTt0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGUsITApfX19ZWxzZSB0aGlzLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQoKX1fZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkKCl7Y29uc3QgZT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LHQ9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQsaT0hKCFlfHwhdHx8ZVswXT09PXRbMF0mJmVbMV09PT10WzFdKTtpP2UmJnQmJih0aGlzLl9vbGRTZWxlY3Rpb25TdGFydCYmdGhpcy5fb2xkU2VsZWN0aW9uRW5kJiZlWzBdPT09dGhpcy5fb2xkU2VsZWN0aW9uU3RhcnRbMF0mJmVbMV09PT10aGlzLl9vbGRTZWxlY3Rpb25TdGFydFsxXSYmdFswXT09PXRoaXMuX29sZFNlbGVjdGlvbkVuZFswXSYmdFsxXT09PXRoaXMuX29sZFNlbGVjdGlvbkVuZFsxXXx8dGhpcy5fZmlyZU9uU2VsZWN0aW9uQ2hhbmdlKGUsdCxpKSk6dGhpcy5fb2xkSGFzU2VsZWN0aW9uJiZ0aGlzLl9maXJlT25TZWxlY3Rpb25DaGFuZ2UoZSx0LGkpfV9maXJlT25TZWxlY3Rpb25DaGFuZ2UoZSx0LGkpe3RoaXMuX29sZFNlbGVjdGlvblN0YXJ0PWUsdGhpcy5fb2xkU2VsZWN0aW9uRW5kPXQsdGhpcy5fb2xkSGFzU2VsZWN0aW9uPWksdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfV9oYW5kbGVCdWZmZXJBY3RpdmF0ZShlKXt0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5fdHJpbUxpc3RlbmVyLmRpc3Bvc2UoKSx0aGlzLl90cmltTGlzdGVuZXI9ZS5hY3RpdmVCdWZmZXIubGluZXMub25UcmltKChlPT50aGlzLl9oYW5kbGVUcmltKGUpKSl9X2NvbnZlcnRWaWV3cG9ydENvbFRvQ2hhcmFjdGVySW5kZXgoZSx0KXtsZXQgaT10O2ZvcihsZXQgcz0wO3Q+PXM7cysrKXtjb25zdCByPWUubG9hZENlbGwocyx0aGlzLl93b3JrQ2VsbCkuZ2V0Q2hhcnMoKS5sZW5ndGg7MD09PXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCk/aS0tOnI+MSYmdCE9PXMmJihpKz1yLTEpfXJldHVybiBpfXNldFNlbGVjdGlvbihlLHQsaSl7dGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydD1bZSx0XSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD1pLHRoaXMucmVmcmVzaCgpLHRoaXMuX2ZpcmVFdmVudElmU2VsZWN0aW9uQ2hhbmdlZCgpfXJpZ2h0Q2xpY2tTZWxlY3QoZSl7dGhpcy5faXNDbGlja0luU2VsZWN0aW9uKGUpfHwodGhpcy5fc2VsZWN0V29yZEF0Q3Vyc29yKGUsITEpJiZ0aGlzLnJlZnJlc2goITApLHRoaXMuX2ZpcmVFdmVudElmU2VsZWN0aW9uQ2hhbmdlZCgpKX1fZ2V0V29yZEF0KGUsdCxpPSEwLHM9ITApe2lmKGVbMF0+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scylyZXR1cm47Y29uc3Qgcj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcixuPXIubGluZXMuZ2V0KGVbMV0pO2lmKCFuKXJldHVybjtjb25zdCBvPXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGVbMV0sITEpO2xldCBhPXRoaXMuX2NvbnZlcnRWaWV3cG9ydENvbFRvQ2hhcmFjdGVySW5kZXgobixlWzBdKSxoPWE7Y29uc3QgYz1lWzBdLWE7bGV0IGw9MCxkPTAsXz0wLHU9MDtpZihcIiBcIj09PW8uY2hhckF0KGEpKXtmb3IoO2E+MCYmXCIgXCI9PT1vLmNoYXJBdChhLTEpOylhLS07Zm9yKDtoPG8ubGVuZ3RoJiZcIiBcIj09PW8uY2hhckF0KGgrMSk7KWgrK31lbHNle2xldCB0PWVbMF0saT1lWzBdOzA9PT1uLmdldFdpZHRoKHQpJiYobCsrLHQtLSksMj09PW4uZ2V0V2lkdGgoaSkmJihkKyssaSsrKTtjb25zdCBzPW4uZ2V0U3RyaW5nKGkpLmxlbmd0aDtmb3Iocz4xJiYodSs9cy0xLGgrPXMtMSk7dD4wJiZhPjAmJiF0aGlzLl9pc0NoYXJXb3JkU2VwYXJhdG9yKG4ubG9hZENlbGwodC0xLHRoaXMuX3dvcmtDZWxsKSk7KXtuLmxvYWRDZWxsKHQtMSx0aGlzLl93b3JrQ2VsbCk7Y29uc3QgZT10aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aDswPT09dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKT8obCsrLHQtLSk6ZT4xJiYoXys9ZS0xLGEtPWUtMSksYS0tLHQtLX1mb3IoO2k8bi5sZW5ndGgmJmgrMTxvLmxlbmd0aCYmIXRoaXMuX2lzQ2hhcldvcmRTZXBhcmF0b3Iobi5sb2FkQ2VsbChpKzEsdGhpcy5fd29ya0NlbGwpKTspe24ubG9hZENlbGwoaSsxLHRoaXMuX3dvcmtDZWxsKTtjb25zdCBlPXRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoOzI9PT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpPyhkKyssaSsrKTplPjEmJih1Kz1lLTEsaCs9ZS0xKSxoKyssaSsrfX1oKys7bGV0IGY9YStjLWwrXyx2PU1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxoLWErbCtkLV8tdSk7aWYodHx8XCJcIiE9PW8uc2xpY2UoYSxoKS50cmltKCkpe2lmKGkmJjA9PT1mJiYzMiE9PW4uZ2V0Q29kZVBvaW50KDApKXtjb25zdCB0PXIubGluZXMuZ2V0KGVbMV0tMSk7aWYodCYmbi5pc1dyYXBwZWQmJjMyIT09dC5nZXRDb2RlUG9pbnQodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpKXtjb25zdCB0PXRoaXMuX2dldFdvcmRBdChbdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEsZVsxXS0xXSwhMSwhMCwhMSk7aWYodCl7Y29uc3QgZT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtdC5zdGFydDtmLT1lLHYrPWV9fX1pZihzJiZmK3Y9PT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMmJjMyIT09bi5nZXRDb2RlUG9pbnQodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpKXtjb25zdCB0PXIubGluZXMuZ2V0KGVbMV0rMSk7aWYodD8uaXNXcmFwcGVkJiYzMiE9PXQuZ2V0Q29kZVBvaW50KDApKXtjb25zdCB0PXRoaXMuX2dldFdvcmRBdChbMCxlWzFdKzFdLCExLCExLCEwKTt0JiYodis9dC5sZW5ndGgpfX1yZXR1cm57c3RhcnQ6ZixsZW5ndGg6dn19fV9zZWxlY3RXb3JkQXQoZSx0KXtjb25zdCBpPXRoaXMuX2dldFdvcmRBdChlLHQpO2lmKGkpe2Zvcig7aS5zdGFydDwwOylpLnN0YXJ0Kz10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsZVsxXS0tO3RoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0PVtpLnN0YXJ0LGVbMV1dLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPWkubGVuZ3RofX1fc2VsZWN0VG9Xb3JkQXQoZSl7Y29uc3QgdD10aGlzLl9nZXRXb3JkQXQoZSwhMCk7aWYodCl7bGV0IGk9ZVsxXTtmb3IoO3Quc3RhcnQ8MDspdC5zdGFydCs9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGktLTtpZighdGhpcy5fbW9kZWwuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKSlmb3IoO3Quc3RhcnQrdC5sZW5ndGg+dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOyl0Lmxlbmd0aC09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGkrKzt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9W3RoaXMuX21vZGVsLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCk/dC5zdGFydDp0LnN0YXJ0K3QubGVuZ3RoLGldfX1faXNDaGFyV29yZFNlcGFyYXRvcihlKXtyZXR1cm4gMCE9PWUuZ2V0V2lkdGgoKSYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53b3JkU2VwYXJhdG9yLmluZGV4T2YoZS5nZXRDaGFycygpKT49MH1fc2VsZWN0TGluZUF0KGUpe2NvbnN0IHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0V3JhcHBlZFJhbmdlRm9yTGluZShlKSxpPXtzdGFydDp7eDowLHk6dC5maXJzdH0sZW5kOnt4OnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xLHk6dC5sYXN0fX07dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9WzAsdC5maXJzdF0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXZvaWQgMCx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD0oMCxfLmdldFJhbmdlTGVuZ3RoKShpLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyl9fTt0LlNlbGVjdGlvblNlcnZpY2U9Zz1zKFtyKDMsZi5JQnVmZmVyU2VydmljZSkscig0LGYuSUNvcmVTZXJ2aWNlKSxyKDUsaC5JTW91c2VTZXJ2aWNlKSxyKDYsZi5JT3B0aW9uc1NlcnZpY2UpLHIoNyxoLklSZW5kZXJTZXJ2aWNlKSxyKDgsaC5JQ29yZUJyb3dzZXJTZXJ2aWNlKV0sZyl9LDQ3MjU6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuSUxpbmtQcm92aWRlclNlcnZpY2U9dC5JVGhlbWVTZXJ2aWNlPXQuSUNoYXJhY3RlckpvaW5lclNlcnZpY2U9dC5JU2VsZWN0aW9uU2VydmljZT10LklSZW5kZXJTZXJ2aWNlPXQuSU1vdXNlU2VydmljZT10LklDb3JlQnJvd3NlclNlcnZpY2U9dC5JQ2hhclNpemVTZXJ2aWNlPXZvaWQgMDtjb25zdCBzPWkoODM0Myk7dC5JQ2hhclNpemVTZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIkNoYXJTaXplU2VydmljZVwiKSx0LklDb3JlQnJvd3NlclNlcnZpY2U9KDAscy5jcmVhdGVEZWNvcmF0b3IpKFwiQ29yZUJyb3dzZXJTZXJ2aWNlXCIpLHQuSU1vdXNlU2VydmljZT0oMCxzLmNyZWF0ZURlY29yYXRvcikoXCJNb3VzZVNlcnZpY2VcIiksdC5JUmVuZGVyU2VydmljZT0oMCxzLmNyZWF0ZURlY29yYXRvcikoXCJSZW5kZXJTZXJ2aWNlXCIpLHQuSVNlbGVjdGlvblNlcnZpY2U9KDAscy5jcmVhdGVEZWNvcmF0b3IpKFwiU2VsZWN0aW9uU2VydmljZVwiKSx0LklDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIkNoYXJhY3RlckpvaW5lclNlcnZpY2VcIiksdC5JVGhlbWVTZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIlRoZW1lU2VydmljZVwiKSx0LklMaW5rUHJvdmlkZXJTZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIkxpbmtQcm92aWRlclNlcnZpY2VcIil9LDY3MzE6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbj1hcmd1bWVudHMubGVuZ3RoLG89bjwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlvPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG89KG48Mz9yKG8pOm4+Mz9yKHQsaSxvKTpyKHQsaSkpfHxvKTtyZXR1cm4gbj4zJiZvJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG8pLG99LHI9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5UaGVtZVNlcnZpY2U9dC5ERUZBVUxUX0FOU0lfQ09MT1JTPXZvaWQgMDtjb25zdCBuPWkoNzIzOSksbz1pKDgwNTUpLGE9aSg4NDYwKSxoPWkoODQ0KSxjPWkoMjU4NSksbD1vLmNzcy50b0NvbG9yKFwiI2ZmZmZmZlwiKSxkPW8uY3NzLnRvQ29sb3IoXCIjMDAwMDAwXCIpLF89by5jc3MudG9Db2xvcihcIiNmZmZmZmZcIiksdT1vLmNzcy50b0NvbG9yKFwiIzAwMDAwMFwiKSxmPXtjc3M6XCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMylcIixyZ2JhOjQyOTQ5NjcxMTd9O3QuREVGQVVMVF9BTlNJX0NPTE9SUz1PYmplY3QuZnJlZXplKCgoKT0+e2NvbnN0IGU9W28uY3NzLnRvQ29sb3IoXCIjMmUzNDM2XCIpLG8uY3NzLnRvQ29sb3IoXCIjY2MwMDAwXCIpLG8uY3NzLnRvQ29sb3IoXCIjNGU5YTA2XCIpLG8uY3NzLnRvQ29sb3IoXCIjYzRhMDAwXCIpLG8uY3NzLnRvQ29sb3IoXCIjMzQ2NWE0XCIpLG8uY3NzLnRvQ29sb3IoXCIjNzU1MDdiXCIpLG8uY3NzLnRvQ29sb3IoXCIjMDY5ODlhXCIpLG8uY3NzLnRvQ29sb3IoXCIjZDNkN2NmXCIpLG8uY3NzLnRvQ29sb3IoXCIjNTU1NzUzXCIpLG8uY3NzLnRvQ29sb3IoXCIjZWYyOTI5XCIpLG8uY3NzLnRvQ29sb3IoXCIjOGFlMjM0XCIpLG8uY3NzLnRvQ29sb3IoXCIjZmNlOTRmXCIpLG8uY3NzLnRvQ29sb3IoXCIjNzI5ZmNmXCIpLG8uY3NzLnRvQ29sb3IoXCIjYWQ3ZmE4XCIpLG8uY3NzLnRvQ29sb3IoXCIjMzRlMmUyXCIpLG8uY3NzLnRvQ29sb3IoXCIjZWVlZWVjXCIpXSx0PVswLDk1LDEzNSwxNzUsMjE1LDI1NV07Zm9yKGxldCBpPTA7aTwyMTY7aSsrKXtjb25zdCBzPXRbaS8zNiU2fDBdLHI9dFtpLzYlNnwwXSxuPXRbaSU2XTtlLnB1c2goe2NzczpvLmNoYW5uZWxzLnRvQ3NzKHMscixuKSxyZ2JhOm8uY2hhbm5lbHMudG9SZ2JhKHMscixuKX0pfWZvcihsZXQgdD0wO3Q8MjQ7dCsrKXtjb25zdCBpPTgrMTAqdDtlLnB1c2goe2NzczpvLmNoYW5uZWxzLnRvQ3NzKGksaSxpKSxyZ2JhOm8uY2hhbm5lbHMudG9SZ2JhKGksaSxpKX0pfXJldHVybiBlfSkoKSk7bGV0IHY9dC5UaGVtZVNlcnZpY2U9Y2xhc3MgZXh0ZW5kcyBoLkRpc3Bvc2FibGV7Z2V0IGNvbG9ycygpe3JldHVybiB0aGlzLl9jb2xvcnN9Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl9vcHRpb25zU2VydmljZT1lLHRoaXMuX2NvbnRyYXN0Q2FjaGU9bmV3IG4uQ29sb3JDb250cmFzdENhY2hlLHRoaXMuX2hhbGZDb250cmFzdENhY2hlPW5ldyBuLkNvbG9yQ29udHJhc3RDYWNoZSx0aGlzLl9vbkNoYW5nZUNvbG9ycz10aGlzLnJlZ2lzdGVyKG5ldyBhLkV2ZW50RW1pdHRlciksdGhpcy5vbkNoYW5nZUNvbG9ycz10aGlzLl9vbkNoYW5nZUNvbG9ycy5ldmVudCx0aGlzLl9jb2xvcnM9e2ZvcmVncm91bmQ6bCxiYWNrZ3JvdW5kOmQsY3Vyc29yOl8sY3Vyc29yQWNjZW50OnUsc2VsZWN0aW9uRm9yZWdyb3VuZDp2b2lkIDAsc2VsZWN0aW9uQmFja2dyb3VuZFRyYW5zcGFyZW50OmYsc2VsZWN0aW9uQmFja2dyb3VuZE9wYXF1ZTpvLmNvbG9yLmJsZW5kKGQsZiksc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kVHJhbnNwYXJlbnQ6ZixzZWxlY3Rpb25JbmFjdGl2ZUJhY2tncm91bmRPcGFxdWU6by5jb2xvci5ibGVuZChkLGYpLGFuc2k6dC5ERUZBVUxUX0FOU0lfQ09MT1JTLnNsaWNlKCksY29udHJhc3RDYWNoZTp0aGlzLl9jb250cmFzdENhY2hlLGhhbGZDb250cmFzdENhY2hlOnRoaXMuX2hhbGZDb250cmFzdENhY2hlfSx0aGlzLl91cGRhdGVSZXN0b3JlQ29sb3JzKCksdGhpcy5fc2V0VGhlbWUodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50aGVtZSksdGhpcy5yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKFwibWluaW11bUNvbnRyYXN0UmF0aW9cIiwoKCk9PnRoaXMuX2NvbnRyYXN0Q2FjaGUuY2xlYXIoKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uU3BlY2lmaWNPcHRpb25DaGFuZ2UoXCJ0aGVtZVwiLCgoKT0+dGhpcy5fc2V0VGhlbWUodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50aGVtZSkpKSl9X3NldFRoZW1lKGU9e30pe2NvbnN0IGk9dGhpcy5fY29sb3JzO2lmKGkuZm9yZWdyb3VuZD1wKGUuZm9yZWdyb3VuZCxsKSxpLmJhY2tncm91bmQ9cChlLmJhY2tncm91bmQsZCksaS5jdXJzb3I9cChlLmN1cnNvcixfKSxpLmN1cnNvckFjY2VudD1wKGUuY3Vyc29yQWNjZW50LHUpLGkuc2VsZWN0aW9uQmFja2dyb3VuZFRyYW5zcGFyZW50PXAoZS5zZWxlY3Rpb25CYWNrZ3JvdW5kLGYpLGkuc2VsZWN0aW9uQmFja2dyb3VuZE9wYXF1ZT1vLmNvbG9yLmJsZW5kKGkuYmFja2dyb3VuZCxpLnNlbGVjdGlvbkJhY2tncm91bmRUcmFuc3BhcmVudCksaS5zZWxlY3Rpb25JbmFjdGl2ZUJhY2tncm91bmRUcmFuc3BhcmVudD1wKGUuc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kLGkuc2VsZWN0aW9uQmFja2dyb3VuZFRyYW5zcGFyZW50KSxpLnNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZE9wYXF1ZT1vLmNvbG9yLmJsZW5kKGkuYmFja2dyb3VuZCxpLnNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZFRyYW5zcGFyZW50KSxpLnNlbGVjdGlvbkZvcmVncm91bmQ9ZS5zZWxlY3Rpb25Gb3JlZ3JvdW5kP3AoZS5zZWxlY3Rpb25Gb3JlZ3JvdW5kLG8uTlVMTF9DT0xPUik6dm9pZCAwLGkuc2VsZWN0aW9uRm9yZWdyb3VuZD09PW8uTlVMTF9DT0xPUiYmKGkuc2VsZWN0aW9uRm9yZWdyb3VuZD12b2lkIDApLG8uY29sb3IuaXNPcGFxdWUoaS5zZWxlY3Rpb25CYWNrZ3JvdW5kVHJhbnNwYXJlbnQpKXtjb25zdCBlPS4zO2kuc2VsZWN0aW9uQmFja2dyb3VuZFRyYW5zcGFyZW50PW8uY29sb3Iub3BhY2l0eShpLnNlbGVjdGlvbkJhY2tncm91bmRUcmFuc3BhcmVudCxlKX1pZihvLmNvbG9yLmlzT3BhcXVlKGkuc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kVHJhbnNwYXJlbnQpKXtjb25zdCBlPS4zO2kuc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kVHJhbnNwYXJlbnQ9by5jb2xvci5vcGFjaXR5KGkuc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kVHJhbnNwYXJlbnQsZSl9aWYoaS5hbnNpPXQuREVGQVVMVF9BTlNJX0NPTE9SUy5zbGljZSgpLGkuYW5zaVswXT1wKGUuYmxhY2ssdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzBdKSxpLmFuc2lbMV09cChlLnJlZCx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMV0pLGkuYW5zaVsyXT1wKGUuZ3JlZW4sdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzJdKSxpLmFuc2lbM109cChlLnllbGxvdyx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbM10pLGkuYW5zaVs0XT1wKGUuYmx1ZSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbNF0pLGkuYW5zaVs1XT1wKGUubWFnZW50YSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbNV0pLGkuYW5zaVs2XT1wKGUuY3lhbix0LkRFRkFVTFRfQU5TSV9DT0xPUlNbNl0pLGkuYW5zaVs3XT1wKGUud2hpdGUsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzddKSxpLmFuc2lbOF09cChlLmJyaWdodEJsYWNrLHQuREVGQVVMVF9BTlNJX0NPTE9SU1s4XSksaS5hbnNpWzldPXAoZS5icmlnaHRSZWQsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzldKSxpLmFuc2lbMTBdPXAoZS5icmlnaHRHcmVlbix0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTBdKSxpLmFuc2lbMTFdPXAoZS5icmlnaHRZZWxsb3csdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzExXSksaS5hbnNpWzEyXT1wKGUuYnJpZ2h0Qmx1ZSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTJdKSxpLmFuc2lbMTNdPXAoZS5icmlnaHRNYWdlbnRhLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxM10pLGkuYW5zaVsxNF09cChlLmJyaWdodEN5YW4sdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzE0XSksaS5hbnNpWzE1XT1wKGUuYnJpZ2h0V2hpdGUsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzE1XSksZS5leHRlbmRlZEFuc2kpe2NvbnN0IHM9TWF0aC5taW4oaS5hbnNpLmxlbmd0aC0xNixlLmV4dGVuZGVkQW5zaS5sZW5ndGgpO2ZvcihsZXQgcj0wO3I8cztyKyspaS5hbnNpW3IrMTZdPXAoZS5leHRlbmRlZEFuc2lbcl0sdC5ERUZBVUxUX0FOU0lfQ09MT1JTW3IrMTZdKX10aGlzLl9jb250cmFzdENhY2hlLmNsZWFyKCksdGhpcy5faGFsZkNvbnRyYXN0Q2FjaGUuY2xlYXIoKSx0aGlzLl91cGRhdGVSZXN0b3JlQ29sb3JzKCksdGhpcy5fb25DaGFuZ2VDb2xvcnMuZmlyZSh0aGlzLmNvbG9ycyl9cmVzdG9yZUNvbG9yKGUpe3RoaXMuX3Jlc3RvcmVDb2xvcihlKSx0aGlzLl9vbkNoYW5nZUNvbG9ycy5maXJlKHRoaXMuY29sb3JzKX1fcmVzdG9yZUNvbG9yKGUpe2lmKHZvaWQgMCE9PWUpc3dpdGNoKGUpe2Nhc2UgMjU2OnRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kPXRoaXMuX3Jlc3RvcmVDb2xvcnMuZm9yZWdyb3VuZDticmVhaztjYXNlIDI1Nzp0aGlzLl9jb2xvcnMuYmFja2dyb3VuZD10aGlzLl9yZXN0b3JlQ29sb3JzLmJhY2tncm91bmQ7YnJlYWs7Y2FzZSAyNTg6dGhpcy5fY29sb3JzLmN1cnNvcj10aGlzLl9yZXN0b3JlQ29sb3JzLmN1cnNvcjticmVhaztkZWZhdWx0OnRoaXMuX2NvbG9ycy5hbnNpW2VdPXRoaXMuX3Jlc3RvcmVDb2xvcnMuYW5zaVtlXX1lbHNlIGZvcihsZXQgZT0wO2U8dGhpcy5fcmVzdG9yZUNvbG9ycy5hbnNpLmxlbmd0aDsrK2UpdGhpcy5fY29sb3JzLmFuc2lbZV09dGhpcy5fcmVzdG9yZUNvbG9ycy5hbnNpW2VdfW1vZGlmeUNvbG9ycyhlKXtlKHRoaXMuX2NvbG9ycyksdGhpcy5fb25DaGFuZ2VDb2xvcnMuZmlyZSh0aGlzLmNvbG9ycyl9X3VwZGF0ZVJlc3RvcmVDb2xvcnMoKXt0aGlzLl9yZXN0b3JlQ29sb3JzPXtmb3JlZ3JvdW5kOnRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLGJhY2tncm91bmQ6dGhpcy5fY29sb3JzLmJhY2tncm91bmQsY3Vyc29yOnRoaXMuX2NvbG9ycy5jdXJzb3IsYW5zaTp0aGlzLl9jb2xvcnMuYW5zaS5zbGljZSgpfX19O2Z1bmN0aW9uIHAoZSx0KXtpZih2b2lkIDAhPT1lKXRyeXtyZXR1cm4gby5jc3MudG9Db2xvcihlKX1jYXRjaHt9cmV0dXJuIHR9dC5UaGVtZVNlcnZpY2U9dj1zKFtyKDAsYy5JT3B0aW9uc1NlcnZpY2UpXSx2KX0sNjM0OTooZSx0LGkpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5DaXJjdWxhckxpc3Q9dm9pZCAwO2NvbnN0IHM9aSg4NDYwKSxyPWkoODQ0KTtjbGFzcyBuIGV4dGVuZHMgci5EaXNwb3NhYmxle2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5fbWF4TGVuZ3RoPWUsdGhpcy5vbkRlbGV0ZUVtaXR0ZXI9dGhpcy5yZWdpc3RlcihuZXcgcy5FdmVudEVtaXR0ZXIpLHRoaXMub25EZWxldGU9dGhpcy5vbkRlbGV0ZUVtaXR0ZXIuZXZlbnQsdGhpcy5vbkluc2VydEVtaXR0ZXI9dGhpcy5yZWdpc3RlcihuZXcgcy5FdmVudEVtaXR0ZXIpLHRoaXMub25JbnNlcnQ9dGhpcy5vbkluc2VydEVtaXR0ZXIuZXZlbnQsdGhpcy5vblRyaW1FbWl0dGVyPXRoaXMucmVnaXN0ZXIobmV3IHMuRXZlbnRFbWl0dGVyKSx0aGlzLm9uVHJpbT10aGlzLm9uVHJpbUVtaXR0ZXIuZXZlbnQsdGhpcy5fYXJyYXk9bmV3IEFycmF5KHRoaXMuX21heExlbmd0aCksdGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX2xlbmd0aD0wfWdldCBtYXhMZW5ndGgoKXtyZXR1cm4gdGhpcy5fbWF4TGVuZ3RofXNldCBtYXhMZW5ndGgoZSl7aWYodGhpcy5fbWF4TGVuZ3RoPT09ZSlyZXR1cm47Y29uc3QgdD1uZXcgQXJyYXkoZSk7Zm9yKGxldCBpPTA7aTxNYXRoLm1pbihlLHRoaXMubGVuZ3RoKTtpKyspdFtpXT10aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpKV07dGhpcy5fYXJyYXk9dCx0aGlzLl9tYXhMZW5ndGg9ZSx0aGlzLl9zdGFydEluZGV4PTB9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLl9sZW5ndGh9c2V0IGxlbmd0aChlKXtpZihlPnRoaXMuX2xlbmd0aClmb3IobGV0IHQ9dGhpcy5fbGVuZ3RoO3Q8ZTt0KyspdGhpcy5fYXJyYXlbdF09dm9pZCAwO3RoaXMuX2xlbmd0aD1lfWdldChlKXtyZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoZSldfXNldChlLHQpe3RoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGUpXT10fXB1c2goZSl7dGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoKV09ZSx0aGlzLl9sZW5ndGg9PT10aGlzLl9tYXhMZW5ndGg/KHRoaXMuX3N0YXJ0SW5kZXg9Kyt0aGlzLl9zdGFydEluZGV4JXRoaXMuX21heExlbmd0aCx0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKSk6dGhpcy5fbGVuZ3RoKyt9cmVjeWNsZSgpe2lmKHRoaXMuX2xlbmd0aCE9PXRoaXMuX21heExlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJDYW4gb25seSByZWN5Y2xlIHdoZW4gdGhlIGJ1ZmZlciBpcyBmdWxsXCIpO3JldHVybiB0aGlzLl9zdGFydEluZGV4PSsrdGhpcy5fc3RhcnRJbmRleCV0aGlzLl9tYXhMZW5ndGgsdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSksdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoLTEpXX1nZXQgaXNGdWxsKCl7cmV0dXJuIHRoaXMuX2xlbmd0aD09PXRoaXMuX21heExlbmd0aH1wb3AoKXtyZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoLS0tMSldfXNwbGljZShlLHQsLi4uaSl7aWYodCl7Zm9yKGxldCBpPWU7aTx0aGlzLl9sZW5ndGgtdDtpKyspdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSldPXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkrdCldO3RoaXMuX2xlbmd0aC09dCx0aGlzLm9uRGVsZXRlRW1pdHRlci5maXJlKHtpbmRleDplLGFtb3VudDp0fSl9Zm9yKGxldCB0PXRoaXMuX2xlbmd0aC0xO3Q+PWU7dC0tKXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHQraS5sZW5ndGgpXT10aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0KV07Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0KyspdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoZSt0KV09aVt0XTtpZihpLmxlbmd0aCYmdGhpcy5vbkluc2VydEVtaXR0ZXIuZmlyZSh7aW5kZXg6ZSxhbW91bnQ6aS5sZW5ndGh9KSx0aGlzLl9sZW5ndGgraS5sZW5ndGg+dGhpcy5fbWF4TGVuZ3RoKXtjb25zdCBlPXRoaXMuX2xlbmd0aCtpLmxlbmd0aC10aGlzLl9tYXhMZW5ndGg7dGhpcy5fc3RhcnRJbmRleCs9ZSx0aGlzLl9sZW5ndGg9dGhpcy5fbWF4TGVuZ3RoLHRoaXMub25UcmltRW1pdHRlci5maXJlKGUpfWVsc2UgdGhpcy5fbGVuZ3RoKz1pLmxlbmd0aH10cmltU3RhcnQoZSl7ZT50aGlzLl9sZW5ndGgmJihlPXRoaXMuX2xlbmd0aCksdGhpcy5fc3RhcnRJbmRleCs9ZSx0aGlzLl9sZW5ndGgtPWUsdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoZSl9c2hpZnRFbGVtZW50cyhlLHQsaSl7aWYoISh0PD0wKSl7aWYoZTwwfHxlPj10aGlzLl9sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwic3RhcnQgYXJndW1lbnQgb3V0IG9mIHJhbmdlXCIpO2lmKGUraTwwKXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzaGlmdCBlbGVtZW50cyBpbiBsaXN0IGJleW9uZCBpbmRleCAwXCIpO2lmKGk+MCl7Zm9yKGxldCBzPXQtMTtzPj0wO3MtLSl0aGlzLnNldChlK3MraSx0aGlzLmdldChlK3MpKTtjb25zdCBzPWUrdCtpLXRoaXMuX2xlbmd0aDtpZihzPjApZm9yKHRoaXMuX2xlbmd0aCs9czt0aGlzLl9sZW5ndGg+dGhpcy5fbWF4TGVuZ3RoOyl0aGlzLl9sZW5ndGgtLSx0aGlzLl9zdGFydEluZGV4KyssdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSl9ZWxzZSBmb3IobGV0IHM9MDtzPHQ7cysrKXRoaXMuc2V0KGUrcytpLHRoaXMuZ2V0KGUrcykpfX1fZ2V0Q3ljbGljSW5kZXgoZSl7cmV0dXJuKHRoaXMuX3N0YXJ0SW5kZXgrZSkldGhpcy5fbWF4TGVuZ3RofX10LkNpcmN1bGFyTGlzdD1ufSwxNDM5OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5jbG9uZT12b2lkIDAsdC5jbG9uZT1mdW5jdGlvbiBlKHQsaT01KXtpZihcIm9iamVjdFwiIT10eXBlb2YgdClyZXR1cm4gdDtjb25zdCBzPUFycmF5LmlzQXJyYXkodCk/W106e307Zm9yKGNvbnN0IHIgaW4gdClzW3JdPWk8PTE/dFtyXTp0W3JdJiZlKHRbcl0saS0xKTtyZXR1cm4gc319LDgwNTU6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmNvbnRyYXN0UmF0aW89dC50b1BhZGRlZEhleD10LnJnYmE9dC5yZ2I9dC5jc3M9dC5jb2xvcj10LmNoYW5uZWxzPXQuTlVMTF9DT0xPUj12b2lkIDA7bGV0IGk9MCxzPTAscj0wLG49MDt2YXIgbyxhLGgsYyxsO2Z1bmN0aW9uIGQoZSl7Y29uc3QgdD1lLnRvU3RyaW5nKDE2KTtyZXR1cm4gdC5sZW5ndGg8Mj9cIjBcIit0OnR9ZnVuY3Rpb24gXyhlLHQpe3JldHVybiBlPHQ/KHQrLjA1KS8oZSsuMDUpOihlKy4wNSkvKHQrLjA1KX10Lk5VTExfQ09MT1I9e2NzczpcIiMwMDAwMDAwMFwiLHJnYmE6MH0sZnVuY3Rpb24oZSl7ZS50b0Nzcz1mdW5jdGlvbihlLHQsaSxzKXtyZXR1cm4gdm9pZCAwIT09cz9gIyR7ZChlKX0ke2QodCl9JHtkKGkpfSR7ZChzKX1gOmAjJHtkKGUpfSR7ZCh0KX0ke2QoaSl9YH0sZS50b1JnYmE9ZnVuY3Rpb24oZSx0LGkscz0yNTUpe3JldHVybihlPDwyNHx0PDwxNnxpPDw4fHMpPj4+MH0sZS50b0NvbG9yPWZ1bmN0aW9uKHQsaSxzLHIpe3JldHVybntjc3M6ZS50b0Nzcyh0LGkscyxyKSxyZ2JhOmUudG9SZ2JhKHQsaSxzLHIpfX19KG98fCh0LmNoYW5uZWxzPW89e30pKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7cmV0dXJuIG49TWF0aC5yb3VuZCgyNTUqdCksW2kscyxyXT1sLnRvQ2hhbm5lbHMoZS5yZ2JhKSx7Y3NzOm8udG9Dc3MoaSxzLHIsbikscmdiYTpvLnRvUmdiYShpLHMscixuKX19ZS5ibGVuZD1mdW5jdGlvbihlLHQpe2lmKG49KDI1NSZ0LnJnYmEpLzI1NSwxPT09bilyZXR1cm57Y3NzOnQuY3NzLHJnYmE6dC5yZ2JhfTtjb25zdCBhPXQucmdiYT4+MjQmMjU1LGg9dC5yZ2JhPj4xNiYyNTUsYz10LnJnYmE+PjgmMjU1LGw9ZS5yZ2JhPj4yNCYyNTUsZD1lLnJnYmE+PjE2JjI1NSxfPWUucmdiYT4+OCYyNTU7cmV0dXJuIGk9bCtNYXRoLnJvdW5kKChhLWwpKm4pLHM9ZCtNYXRoLnJvdW5kKChoLWQpKm4pLHI9XytNYXRoLnJvdW5kKChjLV8pKm4pLHtjc3M6by50b0NzcyhpLHMscikscmdiYTpvLnRvUmdiYShpLHMscil9fSxlLmlzT3BhcXVlPWZ1bmN0aW9uKGUpe3JldHVybiAyNTU9PSgyNTUmZS5yZ2JhKX0sZS5lbnN1cmVDb250cmFzdFJhdGlvPWZ1bmN0aW9uKGUsdCxpKXtjb25zdCBzPWwuZW5zdXJlQ29udHJhc3RSYXRpbyhlLnJnYmEsdC5yZ2JhLGkpO2lmKHMpcmV0dXJuIG8udG9Db2xvcihzPj4yNCYyNTUscz4+MTYmMjU1LHM+PjgmMjU1KX0sZS5vcGFxdWU9ZnVuY3Rpb24oZSl7Y29uc3QgdD0oMjU1fGUucmdiYSk+Pj4wO3JldHVybltpLHMscl09bC50b0NoYW5uZWxzKHQpLHtjc3M6by50b0NzcyhpLHMscikscmdiYTp0fX0sZS5vcGFjaXR5PXQsZS5tdWx0aXBseU9wYWNpdHk9ZnVuY3Rpb24oZSxpKXtyZXR1cm4gbj0yNTUmZS5yZ2JhLHQoZSxuKmkvMjU1KX0sZS50b0NvbG9yUkdCPWZ1bmN0aW9uKGUpe3JldHVybltlLnJnYmE+PjI0JjI1NSxlLnJnYmE+PjE2JjI1NSxlLnJnYmE+PjgmMjU1XX19KGF8fCh0LmNvbG9yPWE9e30pKSxmdW5jdGlvbihlKXtsZXQgdCxhO3RyeXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7ZS53aWR0aD0xLGUuaGVpZ2h0PTE7Y29uc3QgaT1lLmdldENvbnRleHQoXCIyZFwiLHt3aWxsUmVhZEZyZXF1ZW50bHk6ITB9KTtpJiYodD1pLHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwiY29weVwiLGE9dC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLDAsMSwxKSl9Y2F0Y2h7fWUudG9Db2xvcj1mdW5jdGlvbihlKXtpZihlLm1hdGNoKC8jW1xcZGEtZl17Myw4fS9pKSlzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgNDpyZXR1cm4gaT1wYXJzZUludChlLnNsaWNlKDEsMikucmVwZWF0KDIpLDE2KSxzPXBhcnNlSW50KGUuc2xpY2UoMiwzKS5yZXBlYXQoMiksMTYpLHI9cGFyc2VJbnQoZS5zbGljZSgzLDQpLnJlcGVhdCgyKSwxNiksby50b0NvbG9yKGkscyxyKTtjYXNlIDU6cmV0dXJuIGk9cGFyc2VJbnQoZS5zbGljZSgxLDIpLnJlcGVhdCgyKSwxNikscz1wYXJzZUludChlLnNsaWNlKDIsMykucmVwZWF0KDIpLDE2KSxyPXBhcnNlSW50KGUuc2xpY2UoMyw0KS5yZXBlYXQoMiksMTYpLG49cGFyc2VJbnQoZS5zbGljZSg0LDUpLnJlcGVhdCgyKSwxNiksby50b0NvbG9yKGkscyxyLG4pO2Nhc2UgNzpyZXR1cm57Y3NzOmUscmdiYToocGFyc2VJbnQoZS5zbGljZSgxKSwxNik8PDh8MjU1KT4+PjB9O2Nhc2UgOTpyZXR1cm57Y3NzOmUscmdiYTpwYXJzZUludChlLnNsaWNlKDEpLDE2KT4+PjB9fWNvbnN0IGg9ZS5tYXRjaCgvcmdiYT9cXChcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKigsXFxzKigwfDF8XFxkP1xcLihcXGQrKSlcXHMqKT9cXCkvKTtpZihoKXJldHVybiBpPXBhcnNlSW50KGhbMV0pLHM9cGFyc2VJbnQoaFsyXSkscj1wYXJzZUludChoWzNdKSxuPU1hdGgucm91bmQoMjU1Kih2b2lkIDA9PT1oWzVdPzE6cGFyc2VGbG9hdChoWzVdKSkpLG8udG9Db2xvcihpLHMscixuKTtpZighdHx8IWEpdGhyb3cgbmV3IEVycm9yKFwiY3NzLnRvQ29sb3I6IFVuc3VwcG9ydGVkIGNzcyBmb3JtYXRcIik7aWYodC5maWxsU3R5bGU9YSx0LmZpbGxTdHlsZT1lLFwic3RyaW5nXCIhPXR5cGVvZiB0LmZpbGxTdHlsZSl0aHJvdyBuZXcgRXJyb3IoXCJjc3MudG9Db2xvcjogVW5zdXBwb3J0ZWQgY3NzIGZvcm1hdFwiKTtpZih0LmZpbGxSZWN0KDAsMCwxLDEpLFtpLHMscixuXT10LmdldEltYWdlRGF0YSgwLDAsMSwxKS5kYXRhLDI1NSE9PW4pdGhyb3cgbmV3IEVycm9yKFwiY3NzLnRvQ29sb3I6IFVuc3VwcG9ydGVkIGNzcyBmb3JtYXRcIik7cmV0dXJue3JnYmE6by50b1JnYmEoaSxzLHIsbiksY3NzOmV9fX0oaHx8KHQuY3NzPWg9e30pKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxpKXtjb25zdCBzPWUvMjU1LHI9dC8yNTUsbj1pLzI1NTtyZXR1cm4uMjEyNiooczw9LjAzOTI4P3MvMTIuOTI6TWF0aC5wb3coKHMrLjA1NSkvMS4wNTUsMi40KSkrLjcxNTIqKHI8PS4wMzkyOD9yLzEyLjkyOk1hdGgucG93KChyKy4wNTUpLzEuMDU1LDIuNCkpKy4wNzIyKihuPD0uMDM5Mjg/bi8xMi45MjpNYXRoLnBvdygobisuMDU1KS8xLjA1NSwyLjQpKX1lLnJlbGF0aXZlTHVtaW5hbmNlPWZ1bmN0aW9uKGUpe3JldHVybiB0KGU+PjE2JjI1NSxlPj44JjI1NSwyNTUmZSl9LGUucmVsYXRpdmVMdW1pbmFuY2UyPXR9KGN8fCh0LnJnYj1jPXt9KSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQsaSl7Y29uc3Qgcz1lPj4yNCYyNTUscj1lPj4xNiYyNTUsbj1lPj44JjI1NTtsZXQgbz10Pj4yNCYyNTUsYT10Pj4xNiYyNTUsaD10Pj44JjI1NSxsPV8oYy5yZWxhdGl2ZUx1bWluYW5jZTIobyxhLGgpLGMucmVsYXRpdmVMdW1pbmFuY2UyKHMscixuKSk7Zm9yKDtsPGkmJihvPjB8fGE+MHx8aD4wKTspby09TWF0aC5tYXgoMCxNYXRoLmNlaWwoLjEqbykpLGEtPU1hdGgubWF4KDAsTWF0aC5jZWlsKC4xKmEpKSxoLT1NYXRoLm1heCgwLE1hdGguY2VpbCguMSpoKSksbD1fKGMucmVsYXRpdmVMdW1pbmFuY2UyKG8sYSxoKSxjLnJlbGF0aXZlTHVtaW5hbmNlMihzLHIsbikpO3JldHVybihvPDwyNHxhPDwxNnxoPDw4fDI1NSk+Pj4wfWZ1bmN0aW9uIGEoZSx0LGkpe2NvbnN0IHM9ZT4+MjQmMjU1LHI9ZT4+MTYmMjU1LG49ZT4+OCYyNTU7bGV0IG89dD4+MjQmMjU1LGE9dD4+MTYmMjU1LGg9dD4+OCYyNTUsbD1fKGMucmVsYXRpdmVMdW1pbmFuY2UyKG8sYSxoKSxjLnJlbGF0aXZlTHVtaW5hbmNlMihzLHIsbikpO2Zvcig7bDxpJiYobzwyNTV8fGE8MjU1fHxoPDI1NSk7KW89TWF0aC5taW4oMjU1LG8rTWF0aC5jZWlsKC4xKigyNTUtbykpKSxhPU1hdGgubWluKDI1NSxhK01hdGguY2VpbCguMSooMjU1LWEpKSksaD1NYXRoLm1pbigyNTUsaCtNYXRoLmNlaWwoLjEqKDI1NS1oKSkpLGw9XyhjLnJlbGF0aXZlTHVtaW5hbmNlMihvLGEsaCksYy5yZWxhdGl2ZUx1bWluYW5jZTIocyxyLG4pKTtyZXR1cm4obzw8MjR8YTw8MTZ8aDw8OHwyNTUpPj4+MH1lLmJsZW5kPWZ1bmN0aW9uKGUsdCl7aWYobj0oMjU1JnQpLzI1NSwxPT09bilyZXR1cm4gdDtjb25zdCBhPXQ+PjI0JjI1NSxoPXQ+PjE2JjI1NSxjPXQ+PjgmMjU1LGw9ZT4+MjQmMjU1LGQ9ZT4+MTYmMjU1LF89ZT4+OCYyNTU7cmV0dXJuIGk9bCtNYXRoLnJvdW5kKChhLWwpKm4pLHM9ZCtNYXRoLnJvdW5kKChoLWQpKm4pLHI9XytNYXRoLnJvdW5kKChjLV8pKm4pLG8udG9SZ2JhKGkscyxyKX0sZS5lbnN1cmVDb250cmFzdFJhdGlvPWZ1bmN0aW9uKGUsaSxzKXtjb25zdCByPWMucmVsYXRpdmVMdW1pbmFuY2UoZT4+OCksbj1jLnJlbGF0aXZlTHVtaW5hbmNlKGk+PjgpO2lmKF8ocixuKTxzKXtpZihuPHIpe2NvbnN0IG49dChlLGkscyksbz1fKHIsYy5yZWxhdGl2ZUx1bWluYW5jZShuPj44KSk7aWYobzxzKXtjb25zdCB0PWEoZSxpLHMpO3JldHVybiBvPl8ocixjLnJlbGF0aXZlTHVtaW5hbmNlKHQ+PjgpKT9uOnR9cmV0dXJuIG59Y29uc3Qgbz1hKGUsaSxzKSxoPV8ocixjLnJlbGF0aXZlTHVtaW5hbmNlKG8+PjgpKTtpZihoPHMpe2NvbnN0IG49dChlLGkscyk7cmV0dXJuIGg+XyhyLGMucmVsYXRpdmVMdW1pbmFuY2Uobj4+OCkpP286bn1yZXR1cm4gb319LGUucmVkdWNlTHVtaW5hbmNlPXQsZS5pbmNyZWFzZUx1bWluYW5jZT1hLGUudG9DaGFubmVscz1mdW5jdGlvbihlKXtyZXR1cm5bZT4+MjQmMjU1LGU+PjE2JjI1NSxlPj44JjI1NSwyNTUmZV19fShsfHwodC5yZ2JhPWw9e30pKSx0LnRvUGFkZGVkSGV4PWQsdC5jb250cmFzdFJhdGlvPV99LDg5Njk6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ29yZVRlcm1pbmFsPXZvaWQgMDtjb25zdCBzPWkoODQ0KSxyPWkoMjU4NSksbj1pKDQzNDgpLG89aSg3ODY2KSxhPWkoNzQ0KSxoPWkoNzMwMiksYz1pKDY5NzUpLGw9aSg4NDYwKSxkPWkoMTc1MyksXz1pKDE0ODApLHU9aSg3OTk0KSxmPWkoOTI4Miksdj1pKDU0MzUpLHA9aSg1OTgxKSxnPWkoMjY2MCk7bGV0IG09ITE7Y2xhc3MgUyBleHRlbmRzIHMuRGlzcG9zYWJsZXtnZXQgb25TY3JvbGwoKXtyZXR1cm4gdGhpcy5fb25TY3JvbGxBcGl8fCh0aGlzLl9vblNjcm9sbEFwaT10aGlzLnJlZ2lzdGVyKG5ldyBsLkV2ZW50RW1pdHRlciksdGhpcy5fb25TY3JvbGwuZXZlbnQoKGU9Pnt0aGlzLl9vblNjcm9sbEFwaT8uZmlyZShlLnBvc2l0aW9uKX0pKSksdGhpcy5fb25TY3JvbGxBcGkuZXZlbnR9Z2V0IGNvbHMoKXtyZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzfWdldCByb3dzKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c31nZXQgYnVmZmVycygpe3JldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnN9Z2V0IG9wdGlvbnMoKXtyZXR1cm4gdGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zfXNldCBvcHRpb25zKGUpe2Zvcihjb25zdCB0IGluIGUpdGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zW3RdPWVbdF19Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl93aW5kb3dzV3JhcHBpbmdIZXVyaXN0aWNzPXRoaXMucmVnaXN0ZXIobmV3IHMuTXV0YWJsZURpc3Bvc2FibGUpLHRoaXMuX29uQmluYXJ5PXRoaXMucmVnaXN0ZXIobmV3IGwuRXZlbnRFbWl0dGVyKSx0aGlzLm9uQmluYXJ5PXRoaXMuX29uQmluYXJ5LmV2ZW50LHRoaXMuX29uRGF0YT10aGlzLnJlZ2lzdGVyKG5ldyBsLkV2ZW50RW1pdHRlciksdGhpcy5vbkRhdGE9dGhpcy5fb25EYXRhLmV2ZW50LHRoaXMuX29uTGluZUZlZWQ9dGhpcy5yZWdpc3RlcihuZXcgbC5FdmVudEVtaXR0ZXIpLHRoaXMub25MaW5lRmVlZD10aGlzLl9vbkxpbmVGZWVkLmV2ZW50LHRoaXMuX29uUmVzaXplPXRoaXMucmVnaXN0ZXIobmV3IGwuRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVzaXplPXRoaXMuX29uUmVzaXplLmV2ZW50LHRoaXMuX29uV3JpdGVQYXJzZWQ9dGhpcy5yZWdpc3RlcihuZXcgbC5FdmVudEVtaXR0ZXIpLHRoaXMub25Xcml0ZVBhcnNlZD10aGlzLl9vbldyaXRlUGFyc2VkLmV2ZW50LHRoaXMuX29uU2Nyb2xsPXRoaXMucmVnaXN0ZXIobmV3IGwuRXZlbnRFbWl0dGVyKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZT1uZXcgbi5JbnN0YW50aWF0aW9uU2VydmljZSx0aGlzLm9wdGlvbnNTZXJ2aWNlPXRoaXMucmVnaXN0ZXIobmV3IGguT3B0aW9uc1NlcnZpY2UoZSkpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoci5JT3B0aW9uc1NlcnZpY2UsdGhpcy5vcHRpb25zU2VydmljZSksdGhpcy5fYnVmZmVyU2VydmljZT10aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGEuQnVmZmVyU2VydmljZSkpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoci5JQnVmZmVyU2VydmljZSx0aGlzLl9idWZmZXJTZXJ2aWNlKSx0aGlzLl9sb2dTZXJ2aWNlPXRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2Uoby5Mb2dTZXJ2aWNlKSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShyLklMb2dTZXJ2aWNlLHRoaXMuX2xvZ1NlcnZpY2UpLHRoaXMuY29yZVNlcnZpY2U9dGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShjLkNvcmVTZXJ2aWNlKSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShyLklDb3JlU2VydmljZSx0aGlzLmNvcmVTZXJ2aWNlKSx0aGlzLmNvcmVNb3VzZVNlcnZpY2U9dGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShkLkNvcmVNb3VzZVNlcnZpY2UpKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKHIuSUNvcmVNb3VzZVNlcnZpY2UsdGhpcy5jb3JlTW91c2VTZXJ2aWNlKSx0aGlzLnVuaWNvZGVTZXJ2aWNlPXRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoXy5Vbmljb2RlU2VydmljZSkpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoci5JVW5pY29kZVNlcnZpY2UsdGhpcy51bmljb2RlU2VydmljZSksdGhpcy5fY2hhcnNldFNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UodS5DaGFyc2V0U2VydmljZSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShyLklDaGFyc2V0U2VydmljZSx0aGlzLl9jaGFyc2V0U2VydmljZSksdGhpcy5fb3NjTGlua1NlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoZy5Pc2NMaW5rU2VydmljZSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShyLklPc2NMaW5rU2VydmljZSx0aGlzLl9vc2NMaW5rU2VydmljZSksdGhpcy5faW5wdXRIYW5kbGVyPXRoaXMucmVnaXN0ZXIobmV3IHYuSW5wdXRIYW5kbGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UsdGhpcy5fY2hhcnNldFNlcnZpY2UsdGhpcy5jb3JlU2VydmljZSx0aGlzLl9sb2dTZXJ2aWNlLHRoaXMub3B0aW9uc1NlcnZpY2UsdGhpcy5fb3NjTGlua1NlcnZpY2UsdGhpcy5jb3JlTW91c2VTZXJ2aWNlLHRoaXMudW5pY29kZVNlcnZpY2UpKSx0aGlzLnJlZ2lzdGVyKCgwLGwuZm9yd2FyZEV2ZW50KSh0aGlzLl9pbnB1dEhhbmRsZXIub25MaW5lRmVlZCx0aGlzLl9vbkxpbmVGZWVkKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIpLHRoaXMucmVnaXN0ZXIoKDAsbC5mb3J3YXJkRXZlbnQpKHRoaXMuX2J1ZmZlclNlcnZpY2Uub25SZXNpemUsdGhpcy5fb25SZXNpemUpKSx0aGlzLnJlZ2lzdGVyKCgwLGwuZm9yd2FyZEV2ZW50KSh0aGlzLmNvcmVTZXJ2aWNlLm9uRGF0YSx0aGlzLl9vbkRhdGEpKSx0aGlzLnJlZ2lzdGVyKCgwLGwuZm9yd2FyZEV2ZW50KSh0aGlzLmNvcmVTZXJ2aWNlLm9uQmluYXJ5LHRoaXMuX29uQmluYXJ5KSksdGhpcy5yZWdpc3Rlcih0aGlzLmNvcmVTZXJ2aWNlLm9uUmVxdWVzdFNjcm9sbFRvQm90dG9tKCgoKT0+dGhpcy5zY3JvbGxUb0JvdHRvbSgpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5jb3JlU2VydmljZS5vblVzZXJJbnB1dCgoKCk9PnRoaXMuX3dyaXRlQnVmZmVyLmhhbmRsZVVzZXJJbnB1dCgpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vcHRpb25zU2VydmljZS5vbk11bHRpcGxlT3B0aW9uQ2hhbmdlKFtcIndpbmRvd3NNb2RlXCIsXCJ3aW5kb3dzUHR5XCJdLCgoKT0+dGhpcy5faGFuZGxlV2luZG93c1B0eU9wdGlvbkNoYW5nZSgpKSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5vblNjcm9sbCgoZT0+e3RoaXMuX29uU2Nyb2xsLmZpcmUoe3Bvc2l0aW9uOnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLHNvdXJjZTowfSksdGhpcy5faW5wdXRIYW5kbGVyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20pfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblNjcm9sbCgoZT0+e3RoaXMuX29uU2Nyb2xsLmZpcmUoe3Bvc2l0aW9uOnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLHNvdXJjZTowfSksdGhpcy5faW5wdXRIYW5kbGVyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20pfSkpKSx0aGlzLl93cml0ZUJ1ZmZlcj10aGlzLnJlZ2lzdGVyKG5ldyBwLldyaXRlQnVmZmVyKCgoZSx0KT0+dGhpcy5faW5wdXRIYW5kbGVyLnBhcnNlKGUsdCkpKSksdGhpcy5yZWdpc3RlcigoMCxsLmZvcndhcmRFdmVudCkodGhpcy5fd3JpdGVCdWZmZXIub25Xcml0ZVBhcnNlZCx0aGlzLl9vbldyaXRlUGFyc2VkKSl9d3JpdGUoZSx0KXt0aGlzLl93cml0ZUJ1ZmZlci53cml0ZShlLHQpfXdyaXRlU3luYyhlLHQpe3RoaXMuX2xvZ1NlcnZpY2UubG9nTGV2ZWw8PXIuTG9nTGV2ZWxFbnVtLldBUk4mJiFtJiYodGhpcy5fbG9nU2VydmljZS53YXJuKFwid3JpdGVTeW5jIGlzIHVucmVsaWFibGUgYW5kIHdpbGwgYmUgcmVtb3ZlZCBzb29uLlwiKSxtPSEwKSx0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN5bmMoZSx0KX1pbnB1dChlLHQ9ITApe3RoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChlLHQpfXJlc2l6ZShlLHQpe2lzTmFOKGUpfHxpc05hTih0KXx8KGU9TWF0aC5tYXgoZSxhLk1JTklNVU1fQ09MUyksdD1NYXRoLm1heCh0LGEuTUlOSU1VTV9ST1dTKSx0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZShlLHQpKX1zY3JvbGwoZSx0PSExKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbChlLHQpfXNjcm9sbExpbmVzKGUsdCxpKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbExpbmVzKGUsdCxpKX1zY3JvbGxQYWdlcyhlKXt0aGlzLnNjcm9sbExpbmVzKGUqKHRoaXMucm93cy0xKSl9c2Nyb2xsVG9Ub3AoKXt0aGlzLnNjcm9sbExpbmVzKC10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCl9c2Nyb2xsVG9Cb3R0b20oKXt0aGlzLnNjcm9sbExpbmVzKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKX1zY3JvbGxUb0xpbmUoZSl7Y29uc3QgdD1lLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwOzAhPT10JiZ0aGlzLnNjcm9sbExpbmVzKHQpfXJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJFc2NIYW5kbGVyKGUsdCl9cmVnaXN0ZXJEY3NIYW5kbGVyKGUsdCl7cmV0dXJuIHRoaXMuX2lucHV0SGFuZGxlci5yZWdpc3RlckRjc0hhbmRsZXIoZSx0KX1yZWdpc3RlckNzaUhhbmRsZXIoZSx0KXtyZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLHQpfXJlZ2lzdGVyT3NjSGFuZGxlcihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJPc2NIYW5kbGVyKGUsdCl9X3NldHVwKCl7dGhpcy5faGFuZGxlV2luZG93c1B0eU9wdGlvbkNoYW5nZSgpfXJlc2V0KCl7dGhpcy5faW5wdXRIYW5kbGVyLnJlc2V0KCksdGhpcy5fYnVmZmVyU2VydmljZS5yZXNldCgpLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnJlc2V0KCksdGhpcy5jb3JlU2VydmljZS5yZXNldCgpLHRoaXMuY29yZU1vdXNlU2VydmljZS5yZXNldCgpfV9oYW5kbGVXaW5kb3dzUHR5T3B0aW9uQ2hhbmdlKCl7bGV0IGU9ITE7Y29uc3QgdD10aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c1B0eTt0JiZ2b2lkIDAhPT10LmJ1aWxkTnVtYmVyJiZ2b2lkIDAhPT10LmJ1aWxkTnVtYmVyP2U9ISEoXCJjb25wdHlcIj09PXQuYmFja2VuZCYmdC5idWlsZE51bWJlcjwyMTM3Nik6dGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlJiYoZT0hMCksZT90aGlzLl9lbmFibGVXaW5kb3dzV3JhcHBpbmdIZXVyaXN0aWNzKCk6dGhpcy5fd2luZG93c1dyYXBwaW5nSGV1cmlzdGljcy5jbGVhcigpfV9lbmFibGVXaW5kb3dzV3JhcHBpbmdIZXVyaXN0aWNzKCl7aWYoIXRoaXMuX3dpbmRvd3NXcmFwcGluZ0hldXJpc3RpY3MudmFsdWUpe2NvbnN0IGU9W107ZS5wdXNoKHRoaXMub25MaW5lRmVlZChmLnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlLmJpbmQobnVsbCx0aGlzLl9idWZmZXJTZXJ2aWNlKSkpLGUucHVzaCh0aGlzLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJIXCJ9LCgoKT0+KCgwLGYudXBkYXRlV2luZG93c01vZGVXcmFwcGVkU3RhdGUpKHRoaXMuX2J1ZmZlclNlcnZpY2UpLCExKSkpKSx0aGlzLl93aW5kb3dzV3JhcHBpbmdIZXVyaXN0aWNzLnZhbHVlPSgwLHMudG9EaXNwb3NhYmxlKSgoKCk9Pntmb3IoY29uc3QgdCBvZiBlKXQuZGlzcG9zZSgpfSkpfX19dC5Db3JlVGVybWluYWw9U30sODQ2MDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQucnVuQW5kU3Vic2NyaWJlPXQuZm9yd2FyZEV2ZW50PXQuRXZlbnRFbWl0dGVyPXZvaWQgMCx0LkV2ZW50RW1pdHRlcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuX2xpc3RlbmVycz1bXSx0aGlzLl9kaXNwb3NlZD0hMX1nZXQgZXZlbnQoKXtyZXR1cm4gdGhpcy5fZXZlbnR8fCh0aGlzLl9ldmVudD1lPT4odGhpcy5fbGlzdGVuZXJzLnB1c2goZSkse2Rpc3Bvc2U6KCk9PntpZighdGhpcy5fZGlzcG9zZWQpZm9yKGxldCB0PTA7dDx0aGlzLl9saXN0ZW5lcnMubGVuZ3RoO3QrKylpZih0aGlzLl9saXN0ZW5lcnNbdF09PT1lKXJldHVybiB2b2lkIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UodCwxKX19KSksdGhpcy5fZXZlbnR9ZmlyZShlLHQpe2NvbnN0IGk9W107Zm9yKGxldCBlPTA7ZTx0aGlzLl9saXN0ZW5lcnMubGVuZ3RoO2UrKylpLnB1c2godGhpcy5fbGlzdGVuZXJzW2VdKTtmb3IobGV0IHM9MDtzPGkubGVuZ3RoO3MrKylpW3NdLmNhbGwodm9pZCAwLGUsdCl9ZGlzcG9zZSgpe3RoaXMuY2xlYXJMaXN0ZW5lcnMoKSx0aGlzLl9kaXNwb3NlZD0hMH1jbGVhckxpc3RlbmVycygpe3RoaXMuX2xpc3RlbmVycyYmKHRoaXMuX2xpc3RlbmVycy5sZW5ndGg9MCl9fSx0LmZvcndhcmRFdmVudD1mdW5jdGlvbihlLHQpe3JldHVybiBlKChlPT50LmZpcmUoZSkpKX0sdC5ydW5BbmRTdWJzY3JpYmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCh2b2lkIDApLGUoKGU9PnQoZSkpKX19LDU0MzU6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbj1hcmd1bWVudHMubGVuZ3RoLG89bjwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlvPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG89KG48Mz9yKG8pOm4+Mz9yKHQsaSxvKTpyKHQsaSkpfHxvKTtyZXR1cm4gbj4zJiZvJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG8pLG99LHI9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5JbnB1dEhhbmRsZXI9dC5XaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGU9dm9pZCAwO2NvbnN0IG49aSgyNTg0KSxvPWkoNzExNiksYT1pKDIwMTUpLGg9aSg4NDQpLGM9aSg0ODIpLGw9aSg4NDM3KSxkPWkoODQ2MCksXz1pKDY0MyksdT1pKDUxMSksZj1pKDM3MzQpLHY9aSgyNTg1KSxwPWkoMTQ4MCksZz1pKDYyNDIpLG09aSg2MzUxKSxTPWkoNTk0MSksQz17XCIoXCI6MCxcIilcIjoxLFwiKlwiOjIsXCIrXCI6MyxcIi1cIjoxLFwiLlwiOjJ9LGI9MTMxMDcyO2Z1bmN0aW9uIHcoZSx0KXtpZihlPjI0KXJldHVybiB0LnNldFdpbkxpbmVzfHwhMTtzd2l0Y2goZSl7Y2FzZSAxOnJldHVybiEhdC5yZXN0b3JlV2luO2Nhc2UgMjpyZXR1cm4hIXQubWluaW1pemVXaW47Y2FzZSAzOnJldHVybiEhdC5zZXRXaW5Qb3NpdGlvbjtjYXNlIDQ6cmV0dXJuISF0LnNldFdpblNpemVQaXhlbHM7Y2FzZSA1OnJldHVybiEhdC5yYWlzZVdpbjtjYXNlIDY6cmV0dXJuISF0Lmxvd2VyV2luO2Nhc2UgNzpyZXR1cm4hIXQucmVmcmVzaFdpbjtjYXNlIDg6cmV0dXJuISF0LnNldFdpblNpemVDaGFycztjYXNlIDk6cmV0dXJuISF0Lm1heGltaXplV2luO2Nhc2UgMTA6cmV0dXJuISF0LmZ1bGxzY3JlZW5XaW47Y2FzZSAxMTpyZXR1cm4hIXQuZ2V0V2luU3RhdGU7Y2FzZSAxMzpyZXR1cm4hIXQuZ2V0V2luUG9zaXRpb247Y2FzZSAxNDpyZXR1cm4hIXQuZ2V0V2luU2l6ZVBpeGVscztjYXNlIDE1OnJldHVybiEhdC5nZXRTY3JlZW5TaXplUGl4ZWxzO2Nhc2UgMTY6cmV0dXJuISF0LmdldENlbGxTaXplUGl4ZWxzO2Nhc2UgMTg6cmV0dXJuISF0LmdldFdpblNpemVDaGFycztjYXNlIDE5OnJldHVybiEhdC5nZXRTY3JlZW5TaXplQ2hhcnM7Y2FzZSAyMDpyZXR1cm4hIXQuZ2V0SWNvblRpdGxlO2Nhc2UgMjE6cmV0dXJuISF0LmdldFdpblRpdGxlO2Nhc2UgMjI6cmV0dXJuISF0LnB1c2hUaXRsZTtjYXNlIDIzOnJldHVybiEhdC5wb3BUaXRsZTtjYXNlIDI0OnJldHVybiEhdC5zZXRXaW5MaW5lc31yZXR1cm4hMX12YXIgeTshZnVuY3Rpb24oZSl7ZVtlLkdFVF9XSU5fU0laRV9QSVhFTFM9MF09XCJHRVRfV0lOX1NJWkVfUElYRUxTXCIsZVtlLkdFVF9DRUxMX1NJWkVfUElYRUxTPTFdPVwiR0VUX0NFTExfU0laRV9QSVhFTFNcIn0oeXx8KHQuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlPXk9e30pKTtsZXQgRT0wO2NsYXNzIGsgZXh0ZW5kcyBoLkRpc3Bvc2FibGV7Z2V0QXR0ckRhdGEoKXtyZXR1cm4gdGhpcy5fY3VyQXR0ckRhdGF9Y29uc3RydWN0b3IoZSx0LGkscyxyLGgsXyxmLHY9bmV3IGEuRXNjYXBlU2VxdWVuY2VQYXJzZXIpe3N1cGVyKCksdGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuX2NoYXJzZXRTZXJ2aWNlPXQsdGhpcy5fY29yZVNlcnZpY2U9aSx0aGlzLl9sb2dTZXJ2aWNlPXMsdGhpcy5fb3B0aW9uc1NlcnZpY2U9cix0aGlzLl9vc2NMaW5rU2VydmljZT1oLHRoaXMuX2NvcmVNb3VzZVNlcnZpY2U9Xyx0aGlzLl91bmljb2RlU2VydmljZT1mLHRoaXMuX3BhcnNlcj12LHRoaXMuX3BhcnNlQnVmZmVyPW5ldyBVaW50MzJBcnJheSg0MDk2KSx0aGlzLl9zdHJpbmdEZWNvZGVyPW5ldyBjLlN0cmluZ1RvVXRmMzIsdGhpcy5fdXRmOERlY29kZXI9bmV3IGMuVXRmOFRvVXRmMzIsdGhpcy5fd29ya0NlbGw9bmV3IHUuQ2VsbERhdGEsdGhpcy5fd2luZG93VGl0bGU9XCJcIix0aGlzLl9pY29uTmFtZT1cIlwiLHRoaXMuX3dpbmRvd1RpdGxlU3RhY2s9W10sdGhpcy5faWNvbk5hbWVTdGFjaz1bXSx0aGlzLl9jdXJBdHRyRGF0YT1sLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCksdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsPWwuREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKSx0aGlzLl9vblJlcXVlc3RCZWxsPXRoaXMucmVnaXN0ZXIobmV3IGQuRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVxdWVzdEJlbGw9dGhpcy5fb25SZXF1ZXN0QmVsbC5ldmVudCx0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cz10aGlzLnJlZ2lzdGVyKG5ldyBkLkV2ZW50RW1pdHRlciksdGhpcy5vblJlcXVlc3RSZWZyZXNoUm93cz10aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5ldmVudCx0aGlzLl9vblJlcXVlc3RSZXNldD10aGlzLnJlZ2lzdGVyKG5ldyBkLkV2ZW50RW1pdHRlciksdGhpcy5vblJlcXVlc3RSZXNldD10aGlzLl9vblJlcXVlc3RSZXNldC5ldmVudCx0aGlzLl9vblJlcXVlc3RTZW5kRm9jdXM9dGhpcy5yZWdpc3RlcihuZXcgZC5FdmVudEVtaXR0ZXIpLHRoaXMub25SZXF1ZXN0U2VuZEZvY3VzPXRoaXMuX29uUmVxdWVzdFNlbmRGb2N1cy5ldmVudCx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyPXRoaXMucmVnaXN0ZXIobmV3IGQuRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVxdWVzdFN5bmNTY3JvbGxCYXI9dGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5ldmVudCx0aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydD10aGlzLnJlZ2lzdGVyKG5ldyBkLkV2ZW50RW1pdHRlciksdGhpcy5vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydD10aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydC5ldmVudCx0aGlzLl9vbkExMXlDaGFyPXRoaXMucmVnaXN0ZXIobmV3IGQuRXZlbnRFbWl0dGVyKSx0aGlzLm9uQTExeUNoYXI9dGhpcy5fb25BMTF5Q2hhci5ldmVudCx0aGlzLl9vbkExMXlUYWI9dGhpcy5yZWdpc3RlcihuZXcgZC5FdmVudEVtaXR0ZXIpLHRoaXMub25BMTF5VGFiPXRoaXMuX29uQTExeVRhYi5ldmVudCx0aGlzLl9vbkN1cnNvck1vdmU9dGhpcy5yZWdpc3RlcihuZXcgZC5FdmVudEVtaXR0ZXIpLHRoaXMub25DdXJzb3JNb3ZlPXRoaXMuX29uQ3Vyc29yTW92ZS5ldmVudCx0aGlzLl9vbkxpbmVGZWVkPXRoaXMucmVnaXN0ZXIobmV3IGQuRXZlbnRFbWl0dGVyKSx0aGlzLm9uTGluZUZlZWQ9dGhpcy5fb25MaW5lRmVlZC5ldmVudCx0aGlzLl9vblNjcm9sbD10aGlzLnJlZ2lzdGVyKG5ldyBkLkV2ZW50RW1pdHRlciksdGhpcy5vblNjcm9sbD10aGlzLl9vblNjcm9sbC5ldmVudCx0aGlzLl9vblRpdGxlQ2hhbmdlPXRoaXMucmVnaXN0ZXIobmV3IGQuRXZlbnRFbWl0dGVyKSx0aGlzLm9uVGl0bGVDaGFuZ2U9dGhpcy5fb25UaXRsZUNoYW5nZS5ldmVudCx0aGlzLl9vbkNvbG9yPXRoaXMucmVnaXN0ZXIobmV3IGQuRXZlbnRFbWl0dGVyKSx0aGlzLm9uQ29sb3I9dGhpcy5fb25Db2xvci5ldmVudCx0aGlzLl9wYXJzZVN0YWNrPXtwYXVzZWQ6ITEsY3Vyc29yU3RhcnRYOjAsY3Vyc29yU3RhcnRZOjAsZGVjb2RlZExlbmd0aDowLHBvc2l0aW9uOjB9LHRoaXMuX3NwZWNpYWxDb2xvcnM9WzI1NiwyNTcsMjU4XSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3BhcnNlciksdGhpcy5fZGlydHlSb3dUcmFja2VyPW5ldyBMKHRoaXMuX2J1ZmZlclNlcnZpY2UpLHRoaXMuX2FjdGl2ZUJ1ZmZlcj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcix0aGlzLnJlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChlPT50aGlzLl9hY3RpdmVCdWZmZXI9ZS5hY3RpdmVCdWZmZXIpKSksdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXJGYWxsYmFjaygoKGUsdCk9Pnt0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKFwiVW5rbm93biBDU0kgY29kZTogXCIse2lkZW50aWZpZXI6dGhpcy5fcGFyc2VyLmlkZW50VG9TdHJpbmcoZSkscGFyYW1zOnQudG9BcnJheSgpfSl9KSksdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXJGYWxsYmFjaygoZT0+e3RoaXMuX2xvZ1NlcnZpY2UuZGVidWcoXCJVbmtub3duIEVTQyBjb2RlOiBcIix7aWRlbnRpZmllcjp0aGlzLl9wYXJzZXIuaWRlbnRUb1N0cmluZyhlKX0pfSkpLHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlckZhbGxiYWNrKChlPT57dGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcIlVua25vd24gRVhFQ1VURSBjb2RlOiBcIix7Y29kZTplfSl9KSksdGhpcy5fcGFyc2VyLnNldE9zY0hhbmRsZXJGYWxsYmFjaygoKGUsdCxpKT0+e3RoaXMuX2xvZ1NlcnZpY2UuZGVidWcoXCJVbmtub3duIE9TQyBjb2RlOiBcIix7aWRlbnRpZmllcjplLGFjdGlvbjp0LGRhdGE6aX0pfSkpLHRoaXMuX3BhcnNlci5zZXREY3NIYW5kbGVyRmFsbGJhY2soKChlLHQsaSk9PntcIkhPT0tcIj09PXQmJihpPWkudG9BcnJheSgpKSx0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKFwiVW5rbm93biBEQ1MgY29kZTogXCIse2lkZW50aWZpZXI6dGhpcy5fcGFyc2VyLmlkZW50VG9TdHJpbmcoZSksYWN0aW9uOnQscGF5bG9hZDppfSl9KSksdGhpcy5fcGFyc2VyLnNldFByaW50SGFuZGxlcigoKGUsdCxpKT0+dGhpcy5wcmludChlLHQsaSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDpcIkBcIn0sKGU9PnRoaXMuaW5zZXJ0Q2hhcnMoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOlwiIFwiLGZpbmFsOlwiQFwifSwoZT0+dGhpcy5zY3JvbGxMZWZ0KGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJBXCJ9LChlPT50aGlzLmN1cnNvclVwKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczpcIiBcIixmaW5hbDpcIkFcIn0sKGU9PnRoaXMuc2Nyb2xsUmlnaHQoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDpcIkJcIn0sKGU9PnRoaXMuY3Vyc29yRG93bihlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiQ1wifSwoZT0+dGhpcy5jdXJzb3JGb3J3YXJkKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJEXCJ9LChlPT50aGlzLmN1cnNvckJhY2t3YXJkKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJFXCJ9LChlPT50aGlzLmN1cnNvck5leHRMaW5lKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJGXCJ9LChlPT50aGlzLmN1cnNvclByZWNlZGluZ0xpbmUoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDpcIkdcIn0sKGU9PnRoaXMuY3Vyc29yQ2hhckFic29sdXRlKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJIXCJ9LChlPT50aGlzLmN1cnNvclBvc2l0aW9uKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJJXCJ9LChlPT50aGlzLmN1cnNvckZvcndhcmRUYWIoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDpcIkpcIn0sKGU9PnRoaXMuZXJhc2VJbkRpc3BsYXkoZSwhMSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6XCI/XCIsZmluYWw6XCJKXCJ9LChlPT50aGlzLmVyYXNlSW5EaXNwbGF5KGUsITApKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJLXCJ9LChlPT50aGlzLmVyYXNlSW5MaW5lKGUsITEpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OlwiP1wiLGZpbmFsOlwiS1wifSwoZT0+dGhpcy5lcmFzZUluTGluZShlLCEwKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiTFwifSwoZT0+dGhpcy5pbnNlcnRMaW5lcyhlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiTVwifSwoZT0+dGhpcy5kZWxldGVMaW5lcyhlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiUFwifSwoZT0+dGhpcy5kZWxldGVDaGFycyhlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiU1wifSwoZT0+dGhpcy5zY3JvbGxVcChlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiVFwifSwoZT0+dGhpcy5zY3JvbGxEb3duKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJYXCJ9LChlPT50aGlzLmVyYXNlQ2hhcnMoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDpcIlpcIn0sKGU9PnRoaXMuY3Vyc29yQmFja3dhcmRUYWIoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDpcImBcIn0sKGU9PnRoaXMuY2hhclBvc0Fic29sdXRlKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJhXCJ9LChlPT50aGlzLmhQb3NpdGlvblJlbGF0aXZlKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJiXCJ9LChlPT50aGlzLnJlcGVhdFByZWNlZGluZ0NoYXJhY3RlcihlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiY1wifSwoZT0+dGhpcy5zZW5kRGV2aWNlQXR0cmlidXRlc1ByaW1hcnkoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6XCI+XCIsZmluYWw6XCJjXCJ9LChlPT50aGlzLnNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5KGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJkXCJ9LChlPT50aGlzLmxpbmVQb3NBYnNvbHV0ZShlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiZVwifSwoZT0+dGhpcy52UG9zaXRpb25SZWxhdGl2ZShlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiZlwifSwoZT0+dGhpcy5oVlBvc2l0aW9uKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJnXCJ9LChlPT50aGlzLnRhYkNsZWFyKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJoXCJ9LChlPT50aGlzLnNldE1vZGUoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6XCI/XCIsZmluYWw6XCJoXCJ9LChlPT50aGlzLnNldE1vZGVQcml2YXRlKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJsXCJ9LChlPT50aGlzLnJlc2V0TW9kZShlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe3ByZWZpeDpcIj9cIixmaW5hbDpcImxcIn0sKGU9PnRoaXMucmVzZXRNb2RlUHJpdmF0ZShlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwibVwifSwoZT0+dGhpcy5jaGFyQXR0cmlidXRlcyhlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiblwifSwoZT0+dGhpcy5kZXZpY2VTdGF0dXMoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6XCI/XCIsZmluYWw6XCJuXCJ9LChlPT50aGlzLmRldmljZVN0YXR1c1ByaXZhdGUoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOlwiIVwiLGZpbmFsOlwicFwifSwoZT0+dGhpcy5zb2Z0UmVzZXQoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOlwiIFwiLGZpbmFsOlwicVwifSwoZT0+dGhpcy5zZXRDdXJzb3JTdHlsZShlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwiclwifSwoZT0+dGhpcy5zZXRTY3JvbGxSZWdpb24oZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDpcInNcIn0sKGU9PnRoaXMuc2F2ZUN1cnNvcihlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOlwidFwifSwoZT0+dGhpcy53aW5kb3dPcHRpb25zKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6XCJ1XCJ9LChlPT50aGlzLnJlc3RvcmVDdXJzb3IoZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOlwiJ1wiLGZpbmFsOlwifVwifSwoZT0+dGhpcy5pbnNlcnRDb2x1bW5zKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczpcIidcIixmaW5hbDpcIn5cIn0sKGU9PnRoaXMuZGVsZXRlQ29sdW1ucyhlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6J1wiJyxmaW5hbDpcInFcIn0sKGU9PnRoaXMuc2VsZWN0UHJvdGVjdGVkKGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczpcIiRcIixmaW5hbDpcInBcIn0sKGU9PnRoaXMucmVxdWVzdE1vZGUoZSwhMCkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6XCI/XCIsaW50ZXJtZWRpYXRlczpcIiRcIixmaW5hbDpcInBcIn0sKGU9PnRoaXMucmVxdWVzdE1vZGUoZSwhMSkpKSx0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIobi5DMC5CRUwsKCgpPT50aGlzLmJlbGwoKSkpLHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihuLkMwLkxGLCgoKT0+dGhpcy5saW5lRmVlZCgpKSksdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKG4uQzAuVlQsKCgpPT50aGlzLmxpbmVGZWVkKCkpKSx0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIobi5DMC5GRiwoKCk9PnRoaXMubGluZUZlZWQoKSkpLHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihuLkMwLkNSLCgoKT0+dGhpcy5jYXJyaWFnZVJldHVybigpKSksdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKG4uQzAuQlMsKCgpPT50aGlzLmJhY2tzcGFjZSgpKSksdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKG4uQzAuSFQsKCgpPT50aGlzLnRhYigpKSksdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKG4uQzAuU08sKCgpPT50aGlzLnNoaWZ0T3V0KCkpKSx0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIobi5DMC5TSSwoKCk9PnRoaXMuc2hpZnRJbigpKSksdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKG4uQzEuSU5ELCgoKT0+dGhpcy5pbmRleCgpKSksdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKG4uQzEuTkVMLCgoKT0+dGhpcy5uZXh0TGluZSgpKSksdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKG4uQzEuSFRTLCgoKT0+dGhpcy50YWJTZXQoKSkpLHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMCxuZXcgZy5Pc2NIYW5kbGVyKChlPT4odGhpcy5zZXRUaXRsZShlKSx0aGlzLnNldEljb25OYW1lKGUpLCEwKSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEsbmV3IGcuT3NjSGFuZGxlcigoZT0+dGhpcy5zZXRJY29uTmFtZShlKSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDIsbmV3IGcuT3NjSGFuZGxlcigoZT0+dGhpcy5zZXRUaXRsZShlKSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDQsbmV3IGcuT3NjSGFuZGxlcigoZT0+dGhpcy5zZXRPclJlcG9ydEluZGV4ZWRDb2xvcihlKSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDgsbmV3IGcuT3NjSGFuZGxlcigoZT0+dGhpcy5zZXRIeXBlcmxpbmsoZSkpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMCxuZXcgZy5Pc2NIYW5kbGVyKChlPT50aGlzLnNldE9yUmVwb3J0RmdDb2xvcihlKSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExLG5ldyBnLk9zY0hhbmRsZXIoKGU9PnRoaXMuc2V0T3JSZXBvcnRCZ0NvbG9yKGUpKSkpLHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTIsbmV3IGcuT3NjSGFuZGxlcigoZT0+dGhpcy5zZXRPclJlcG9ydEN1cnNvckNvbG9yKGUpKSkpLHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTA0LG5ldyBnLk9zY0hhbmRsZXIoKGU9PnRoaXMucmVzdG9yZUluZGV4ZWRDb2xvcihlKSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExMCxuZXcgZy5Pc2NIYW5kbGVyKChlPT50aGlzLnJlc3RvcmVGZ0NvbG9yKGUpKSkpLHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTExLG5ldyBnLk9zY0hhbmRsZXIoKGU9PnRoaXMucmVzdG9yZUJnQ29sb3IoZSkpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMTIsbmV3IGcuT3NjSGFuZGxlcigoZT0+dGhpcy5yZXN0b3JlQ3Vyc29yQ29sb3IoZSkpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6XCI3XCJ9LCgoKT0+dGhpcy5zYXZlQ3Vyc29yKCkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDpcIjhcIn0sKCgpPT50aGlzLnJlc3RvcmVDdXJzb3IoKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOlwiRFwifSwoKCk9PnRoaXMuaW5kZXgoKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOlwiRVwifSwoKCk9PnRoaXMubmV4dExpbmUoKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOlwiSFwifSwoKCk9PnRoaXMudGFiU2V0KCkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDpcIk1cIn0sKCgpPT50aGlzLnJldmVyc2VJbmRleCgpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6XCI9XCJ9LCgoKT0+dGhpcy5rZXlwYWRBcHBsaWNhdGlvbk1vZGUoKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOlwiPlwifSwoKCk9PnRoaXMua2V5cGFkTnVtZXJpY01vZGUoKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOlwiY1wifSwoKCk9PnRoaXMuZnVsbFJlc2V0KCkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDpcIm5cIn0sKCgpPT50aGlzLnNldGdMZXZlbCgyKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOlwib1wifSwoKCk9PnRoaXMuc2V0Z0xldmVsKDMpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6XCJ8XCJ9LCgoKT0+dGhpcy5zZXRnTGV2ZWwoMykpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDpcIn1cIn0sKCgpPT50aGlzLnNldGdMZXZlbCgyKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOlwiflwifSwoKCk9PnRoaXMuc2V0Z0xldmVsKDEpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczpcIiVcIixmaW5hbDpcIkBcIn0sKCgpPT50aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOlwiJVwiLGZpbmFsOlwiR1wifSwoKCk9PnRoaXMuc2VsZWN0RGVmYXVsdENoYXJzZXQoKSkpO2Zvcihjb25zdCBlIGluIG8uQ0hBUlNFVFMpdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczpcIihcIixmaW5hbDplfSwoKCk9PnRoaXMuc2VsZWN0Q2hhcnNldChcIihcIitlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6XCIpXCIsZmluYWw6ZX0sKCgpPT50aGlzLnNlbGVjdENoYXJzZXQoXCIpXCIrZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOlwiKlwiLGZpbmFsOmV9LCgoKT0+dGhpcy5zZWxlY3RDaGFyc2V0KFwiKlwiK2UpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczpcIitcIixmaW5hbDplfSwoKCk9PnRoaXMuc2VsZWN0Q2hhcnNldChcIitcIitlKSkpLHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6XCItXCIsZmluYWw6ZX0sKCgpPT50aGlzLnNlbGVjdENoYXJzZXQoXCItXCIrZSkpKSx0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOlwiLlwiLGZpbmFsOmV9LCgoKT0+dGhpcy5zZWxlY3RDaGFyc2V0KFwiLlwiK2UpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczpcIi9cIixmaW5hbDplfSwoKCk9PnRoaXMuc2VsZWN0Q2hhcnNldChcIi9cIitlKSkpO3RoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6XCIjXCIsZmluYWw6XCI4XCJ9LCgoKT0+dGhpcy5zY3JlZW5BbGlnbm1lbnRQYXR0ZXJuKCkpKSx0aGlzLl9wYXJzZXIuc2V0RXJyb3JIYW5kbGVyKChlPT4odGhpcy5fbG9nU2VydmljZS5lcnJvcihcIlBhcnNpbmcgZXJyb3I6IFwiLGUpLGUpKSksdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRGNzSGFuZGxlcih7aW50ZXJtZWRpYXRlczpcIiRcIixmaW5hbDpcInFcIn0sbmV3IG0uRGNzSGFuZGxlcigoKGUsdCk9PnRoaXMucmVxdWVzdFN0YXR1c1N0cmluZyhlLHQpKSkpfV9wcmVzZXJ2ZVN0YWNrKGUsdCxpLHMpe3RoaXMuX3BhcnNlU3RhY2sucGF1c2VkPSEwLHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRYPWUsdGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFk9dCx0aGlzLl9wYXJzZVN0YWNrLmRlY29kZWRMZW5ndGg9aSx0aGlzLl9wYXJzZVN0YWNrLnBvc2l0aW9uPXN9X2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhlKXt0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsPD12LkxvZ0xldmVsRW51bS5XQVJOJiZQcm9taXNlLnJhY2UoW2UsbmV3IFByb21pc2UoKChlLHQpPT5zZXRUaW1lb3V0KCgoKT0+dChcIiNTTE9XX1RJTUVPVVRcIikpLDVlMykpKV0pLmNhdGNoKChlPT57aWYoXCIjU0xPV19USU1FT1VUXCIhPT1lKXRocm93IGU7Y29uc29sZS53YXJuKFwiYXN5bmMgcGFyc2VyIGhhbmRsZXIgdGFraW5nIGxvbmdlciB0aGFuIDUwMDAgbXNcIil9KSl9X2dldEN1cnJlbnRMaW5rSWQoKXtyZXR1cm4gdGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQudXJsSWR9cGFyc2UoZSx0KXtsZXQgaSxzPXRoaXMuX2FjdGl2ZUJ1ZmZlci54LHI9dGhpcy5fYWN0aXZlQnVmZmVyLnksbj0wO2NvbnN0IG89dGhpcy5fcGFyc2VTdGFjay5wYXVzZWQ7aWYobyl7aWYoaT10aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsdGhpcy5fcGFyc2VTdGFjay5kZWNvZGVkTGVuZ3RoLHQpKXJldHVybiB0aGlzLl9sb2dTbG93UmVzb2x2aW5nQXN5bmMoaSksaTtzPXRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRYLHI9dGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFksdGhpcy5fcGFyc2VTdGFjay5wYXVzZWQ9ITEsZS5sZW5ndGg+YiYmKG49dGhpcy5fcGFyc2VTdGFjay5wb3NpdGlvbitiKX1pZih0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsPD12LkxvZ0xldmVsRW51bS5ERUJVRyYmdGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcInBhcnNpbmcgZGF0YVwiKyhcInN0cmluZ1wiPT10eXBlb2YgZT9gIFwiJHtlfVwiYDpgIFwiJHtBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZSwoZT0+U3RyaW5nLmZyb21DaGFyQ29kZShlKSkpLmpvaW4oXCJcIil9XCJgKSxcInN0cmluZ1wiPT10eXBlb2YgZT9lLnNwbGl0KFwiXCIpLm1hcCgoZT0+ZS5jaGFyQ29kZUF0KDApKSk6ZSksdGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoPGUubGVuZ3RoJiZ0aGlzLl9wYXJzZUJ1ZmZlci5sZW5ndGg8YiYmKHRoaXMuX3BhcnNlQnVmZmVyPW5ldyBVaW50MzJBcnJheShNYXRoLm1pbihlLmxlbmd0aCxiKSkpLG98fHRoaXMuX2RpcnR5Um93VHJhY2tlci5jbGVhclJhbmdlKCksZS5sZW5ndGg+Yilmb3IobGV0IHQ9bjt0PGUubGVuZ3RoO3QrPWIpe2NvbnN0IG49dCtiPGUubGVuZ3RoP3QrYjplLmxlbmd0aCxvPVwic3RyaW5nXCI9PXR5cGVvZiBlP3RoaXMuX3N0cmluZ0RlY29kZXIuZGVjb2RlKGUuc3Vic3RyaW5nKHQsbiksdGhpcy5fcGFyc2VCdWZmZXIpOnRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZShlLnN1YmFycmF5KHQsbiksdGhpcy5fcGFyc2VCdWZmZXIpO2lmKGk9dGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLG8pKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKHMscixvLHQpLHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhpKSxpfWVsc2UgaWYoIW8pe2NvbnN0IHQ9XCJzdHJpbmdcIj09dHlwZW9mIGU/dGhpcy5fc3RyaW5nRGVjb2Rlci5kZWNvZGUoZSx0aGlzLl9wYXJzZUJ1ZmZlcik6dGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKGUsdGhpcy5fcGFyc2VCdWZmZXIpO2lmKGk9dGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLHQpKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKHMscix0LDApLHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhpKSxpfXRoaXMuX2FjdGl2ZUJ1ZmZlci54PT09cyYmdGhpcy5fYWN0aXZlQnVmZmVyLnk9PT1yfHx0aGlzLl9vbkN1cnNvck1vdmUuZmlyZSgpO2NvbnN0IGE9dGhpcy5fZGlydHlSb3dUcmFja2VyLmVuZCsodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UtdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApLGg9dGhpcy5fZGlydHlSb3dUcmFja2VyLnN0YXJ0Kyh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCk7aDx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MmJnRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUoTWF0aC5taW4oaCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksTWF0aC5taW4oYSx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSkpfXByaW50KGUsdCxpKXtsZXQgcyxyO2NvbnN0IG49dGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldCxvPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSxhPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxoPXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy53cmFwYXJvdW5kLGQ9dGhpcy5fY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZSx1PXRoaXMuX2N1ckF0dHJEYXRhO2xldCBmPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTt0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9hY3RpdmVCdWZmZXIueCYmaS10PjAmJjI9PT1mLmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEpJiZmLnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEsMCwxLHUpO2xldCB2PXRoaXMuX3BhcnNlci5wcmVjZWRpbmdKb2luU3RhdGU7Zm9yKGxldCBnPXQ7ZzxpOysrZyl7aWYocz1lW2ddLHM8MTI3JiZuKXtjb25zdCBlPW5bU3RyaW5nLmZyb21DaGFyQ29kZShzKV07ZSYmKHM9ZS5jaGFyQ29kZUF0KDApKX1jb25zdCB0PXRoaXMuX3VuaWNvZGVTZXJ2aWNlLmNoYXJQcm9wZXJ0aWVzKHMsdik7cj1wLlVuaWNvZGVTZXJ2aWNlLmV4dHJhY3RXaWR0aCh0KTtjb25zdCBpPXAuVW5pY29kZVNlcnZpY2UuZXh0cmFjdFNob3VsZEpvaW4odCksbT1pP3AuVW5pY29kZVNlcnZpY2UuZXh0cmFjdFdpZHRoKHYpOjA7aWYodj10LG8mJnRoaXMuX29uQTExeUNoYXIuZmlyZSgoMCxjLnN0cmluZ0Zyb21Db2RlUG9pbnQpKHMpKSx0aGlzLl9nZXRDdXJyZW50TGlua0lkKCkmJnRoaXMuX29zY0xpbmtTZXJ2aWNlLmFkZExpbmVUb0xpbmsodGhpcy5fZ2V0Q3VycmVudExpbmtJZCgpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSksdGhpcy5fYWN0aXZlQnVmZmVyLngrci1tPmEpaWYoaCl7Y29uc3QgZT1mO2xldCB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci54LW07Zm9yKHRoaXMuX2FjdGl2ZUJ1ZmZlci54PW0sdGhpcy5fYWN0aXZlQnVmZmVyLnkrKyx0aGlzLl9hY3RpdmVCdWZmZXIueT09PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20rMT8odGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCksITApKToodGhpcy5fYWN0aXZlQnVmZmVyLnk+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSkuaXNXcmFwcGVkPSEwKSxmPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KSxtPjAmJmYgaW5zdGFuY2VvZiBsLkJ1ZmZlckxpbmUmJmYuY29weUNlbGxzRnJvbShlLHQsMCxtLCExKTt0PGE7KWUuc2V0Q2VsbEZyb21Db2RlcG9pbnQodCsrLDAsMSx1KX1lbHNlIGlmKHRoaXMuX2FjdGl2ZUJ1ZmZlci54PWEtMSwyPT09ciljb250aW51ZTtpZihpJiZ0aGlzLl9hY3RpdmVCdWZmZXIueCl7Y29uc3QgZT1mLmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEpPzE6MjtmLmFkZENvZGVwb2ludFRvQ2VsbCh0aGlzLl9hY3RpdmVCdWZmZXIueC1lLHMscik7Zm9yKGxldCBlPXItbTstLWU+PTA7KWYuc2V0Q2VsbEZyb21Db2RlcG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngrKywwLDAsdSl9ZWxzZSBpZihkJiYoZi5pbnNlcnRDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCxyLW0sdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHUpKSwyPT09Zi5nZXRXaWR0aChhLTEpJiZmLnNldENlbGxGcm9tQ29kZXBvaW50KGEtMSxfLk5VTExfQ0VMTF9DT0RFLF8uTlVMTF9DRUxMX1dJRFRILHUpKSxmLnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KysscyxyLHUpLHI+MClmb3IoOy0tcjspZi5zZXRDZWxsRnJvbUNvZGVwb2ludCh0aGlzLl9hY3RpdmVCdWZmZXIueCsrLDAsMCx1KX10aGlzLl9wYXJzZXIucHJlY2VkaW5nSm9pblN0YXRlPXYsdGhpcy5fYWN0aXZlQnVmZmVyLng8YSYmaS10PjAmJjA9PT1mLmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSYmIWYuaGFzQ29udGVudCh0aGlzLl9hY3RpdmVCdWZmZXIueCkmJmYuc2V0Q2VsbEZyb21Db2RlcG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngsMCwxLHUpLHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpfXJlZ2lzdGVyQ3NpSGFuZGxlcihlLHQpe3JldHVyblwidFwiIT09ZS5maW5hbHx8ZS5wcmVmaXh8fGUuaW50ZXJtZWRpYXRlcz90aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGUsdCk6dGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLChlPT4hdyhlLnBhcmFtc1swXSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMpfHx0KGUpKSl9cmVnaXN0ZXJEY3NIYW5kbGVyKGUsdCl7cmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3RlckRjc0hhbmRsZXIoZSxuZXcgbS5EY3NIYW5kbGVyKHQpKX1yZWdpc3RlckVzY0hhbmRsZXIoZSx0KXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpfXJlZ2lzdGVyT3NjSGFuZGxlcihlLHQpe3JldHVybiB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKGUsbmV3IGcuT3NjSGFuZGxlcih0KSl9YmVsbCgpe3JldHVybiB0aGlzLl9vblJlcXVlc3RCZWxsLmZpcmUoKSwhMH1saW5lRmVlZCgpe3JldHVybiB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmNvbnZlcnRFb2wmJih0aGlzLl9hY3RpdmVCdWZmZXIueD0wKSx0aGlzLl9hY3RpdmVCdWZmZXIueSsrLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSsxPyh0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpOnRoaXMuX2FjdGl2ZUJ1ZmZlci55Pj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M/dGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTE6dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpLmlzV3JhcHBlZD0hMSx0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzJiZ0aGlzLl9hY3RpdmVCdWZmZXIueC0tLHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpLHRoaXMuX29uTGluZUZlZWQuZmlyZSgpLCEwfWNhcnJpYWdlUmV0dXJuKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9YmFja3NwYWNlKCl7aWYoIXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZClyZXR1cm4gdGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9hY3RpdmVCdWZmZXIueD4wJiZ0aGlzLl9hY3RpdmVCdWZmZXIueC0tLCEwO2lmKHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksdGhpcy5fYWN0aXZlQnVmZmVyLng+MCl0aGlzLl9hY3RpdmVCdWZmZXIueC0tO2Vsc2UgaWYoMD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci54JiZ0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wJiZ0aGlzLl9hY3RpdmVCdWZmZXIueTw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSYmdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpPy5pc1dyYXBwZWQpe3RoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KS5pc1dyYXBwZWQ9ITEsdGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMTtjb25zdCBlPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTtlLmhhc1dpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSYmIWUuaGFzQ29udGVudCh0aGlzLl9hY3RpdmVCdWZmZXIueCkmJnRoaXMuX2FjdGl2ZUJ1ZmZlci54LS19cmV0dXJuIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksITB9dGFiKCl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLng+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scylyZXR1cm4hMDtjb25zdCBlPXRoaXMuX2FjdGl2ZUJ1ZmZlci54O3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGUmJnRoaXMuX29uQTExeVRhYi5maXJlKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LWUpLCEwfXNoaWZ0T3V0KCl7cmV0dXJuIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgxKSwhMH1zaGlmdEluKCl7cmV0dXJuIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgwKSwhMH1fcmVzdHJpY3RDdXJzb3IoZT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSl7dGhpcy5fYWN0aXZlQnVmZmVyLng9TWF0aC5taW4oZSxNYXRoLm1heCgwLHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSksdGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj9NYXRoLm1pbih0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLE1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnkpKTpNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSxNYXRoLm1heCgwLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSksdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSl9X3NldEN1cnNvcihlLHQpe3RoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW4/KHRoaXMuX2FjdGl2ZUJ1ZmZlci54PWUsdGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCt0KToodGhpcy5fYWN0aXZlQnVmZmVyLng9ZSx0aGlzLl9hY3RpdmVCdWZmZXIueT10KSx0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpfV9tb3ZlQ3Vyc29yKGUsdCl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9zZXRDdXJzb3IodGhpcy5fYWN0aXZlQnVmZmVyLngrZSx0aGlzLl9hY3RpdmVCdWZmZXIueSt0KX1jdXJzb3JVcChlKXtjb25zdCB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55LXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7cmV0dXJuIHQ+PTA/dGhpcy5fbW92ZUN1cnNvcigwLC1NYXRoLm1pbih0LGUucGFyYW1zWzBdfHwxKSk6dGhpcy5fbW92ZUN1cnNvcigwLC0oZS5wYXJhbXNbMF18fDEpKSwhMH1jdXJzb3JEb3duKGUpe2NvbnN0IHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbS10aGlzLl9hY3RpdmVCdWZmZXIueTtyZXR1cm4gdD49MD90aGlzLl9tb3ZlQ3Vyc29yKDAsTWF0aC5taW4odCxlLnBhcmFtc1swXXx8MSkpOnRoaXMuX21vdmVDdXJzb3IoMCxlLnBhcmFtc1swXXx8MSksITB9Y3Vyc29yRm9yd2FyZChlKXtyZXR1cm4gdGhpcy5fbW92ZUN1cnNvcihlLnBhcmFtc1swXXx8MSwwKSwhMH1jdXJzb3JCYWNrd2FyZChlKXtyZXR1cm4gdGhpcy5fbW92ZUN1cnNvcigtKGUucGFyYW1zWzBdfHwxKSwwKSwhMH1jdXJzb3JOZXh0TGluZShlKXtyZXR1cm4gdGhpcy5jdXJzb3JEb3duKGUpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9Y3Vyc29yUHJlY2VkaW5nTGluZShlKXtyZXR1cm4gdGhpcy5jdXJzb3JVcChlKSx0aGlzLl9hY3RpdmVCdWZmZXIueD0wLCEwfWN1cnNvckNoYXJBYnNvbHV0ZShlKXtyZXR1cm4gdGhpcy5fc2V0Q3Vyc29yKChlLnBhcmFtc1swXXx8MSktMSx0aGlzLl9hY3RpdmVCdWZmZXIueSksITB9Y3Vyc29yUG9zaXRpb24oZSl7cmV0dXJuIHRoaXMuX3NldEN1cnNvcihlLmxlbmd0aD49Mj8oZS5wYXJhbXNbMV18fDEpLTE6MCwoZS5wYXJhbXNbMF18fDEpLTEpLCEwfWNoYXJQb3NBYnNvbHV0ZShlKXtyZXR1cm4gdGhpcy5fc2V0Q3Vyc29yKChlLnBhcmFtc1swXXx8MSktMSx0aGlzLl9hY3RpdmVCdWZmZXIueSksITB9aFBvc2l0aW9uUmVsYXRpdmUoZSl7cmV0dXJuIHRoaXMuX21vdmVDdXJzb3IoZS5wYXJhbXNbMF18fDEsMCksITB9bGluZVBvc0Fic29sdXRlKGUpe3JldHVybiB0aGlzLl9zZXRDdXJzb3IodGhpcy5fYWN0aXZlQnVmZmVyLngsKGUucGFyYW1zWzBdfHwxKS0xKSwhMH12UG9zaXRpb25SZWxhdGl2ZShlKXtyZXR1cm4gdGhpcy5fbW92ZUN1cnNvcigwLGUucGFyYW1zWzBdfHwxKSwhMH1oVlBvc2l0aW9uKGUpe3JldHVybiB0aGlzLmN1cnNvclBvc2l0aW9uKGUpLCEwfXRhYkNsZWFyKGUpe2NvbnN0IHQ9ZS5wYXJhbXNbMF07cmV0dXJuIDA9PT10P2RlbGV0ZSB0aGlzLl9hY3RpdmVCdWZmZXIudGFic1t0aGlzLl9hY3RpdmVCdWZmZXIueF06Mz09PXQmJih0aGlzLl9hY3RpdmVCdWZmZXIudGFicz17fSksITB9Y3Vyc29yRm9yd2FyZFRhYihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKXJldHVybiEwO2xldCB0PWUucGFyYW1zWzBdfHwxO2Zvcig7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKTtyZXR1cm4hMH1jdXJzb3JCYWNrd2FyZFRhYihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKXJldHVybiEwO2xldCB0PWUucGFyYW1zWzBdfHwxO2Zvcig7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIucHJldlN0b3AoKTtyZXR1cm4hMH1zZWxlY3RQcm90ZWN0ZWQoZSl7Y29uc3QgdD1lLnBhcmFtc1swXTtyZXR1cm4gMT09PXQmJih0aGlzLl9jdXJBdHRyRGF0YS5iZ3w9NTM2ODcwOTEyKSwyIT09dCYmMCE9PXR8fCh0aGlzLl9jdXJBdHRyRGF0YS5iZyY9LTUzNjg3MDkxMyksITB9X2VyYXNlSW5CdWZmZXJMaW5lKGUsdCxpLHM9ITEscj0hMSl7Y29uc3Qgbj10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStlKTtuLnJlcGxhY2VDZWxscyh0LGksdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkscikscyYmKG4uaXNXcmFwcGVkPSExKX1fcmVzZXRCdWZmZXJMaW5lKGUsdD0hMSl7Y29uc3QgaT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStlKTtpJiYoaS5maWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHQpLHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmNsZWFyTWFya2Vycyh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrZSksaS5pc1dyYXBwZWQ9ITEpfWVyYXNlSW5EaXNwbGF5KGUsdD0hMSl7bGV0IGk7c3dpdGNoKHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksZS5wYXJhbXNbMF0pe2Nhc2UgMDpmb3IoaT10aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KGkpLHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKGkrKyx0aGlzLl9hY3RpdmVCdWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsMD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci54LHQpO2k8dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO2krKyl0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaSx0KTt0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KGkpO2JyZWFrO2Nhc2UgMTpmb3IoaT10aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KGkpLHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKGksMCx0aGlzLl9hY3RpdmVCdWZmZXIueCsxLCEwLHQpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54KzE+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQoaSsxKS5pc1dyYXBwZWQ9ITEpO2ktLTspdGhpcy5fcmVzZXRCdWZmZXJMaW5lKGksdCk7dGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSgwKTticmVhaztjYXNlIDI6Zm9yKGk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkoaS0xKTtpLS07KXRoaXMuX3Jlc2V0QnVmZmVyTGluZShpLHQpO3RoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkoMCk7YnJlYWs7Y2FzZSAzOmNvbnN0IGU9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmxlbmd0aC10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7ZT4wJiYodGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnRyaW1TdGFydChlKSx0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2U9TWF0aC5tYXgodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLWUsMCksdGhpcy5fYWN0aXZlQnVmZmVyLnlkaXNwPU1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci55ZGlzcC1lLDApLHRoaXMuX29uU2Nyb2xsLmZpcmUoMCkpfXJldHVybiEwfWVyYXNlSW5MaW5lKGUsdD0hMSl7c3dpdGNoKHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksZS5wYXJhbXNbMF0pe2Nhc2UgMDp0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9hY3RpdmVCdWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsMD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci54LHQpO2JyZWFrO2Nhc2UgMTp0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9hY3RpdmVCdWZmZXIueSwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci54KzEsITEsdCk7YnJlYWs7Y2FzZSAyOnRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2FjdGl2ZUJ1ZmZlci55LDAsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCEwLHQpfXJldHVybiB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSwhMH1pbnNlcnRMaW5lcyhlKXt0aGlzLl9yZXN0cmljdEN1cnNvcigpO2xldCB0PWUucGFyYW1zWzBdfHwxO2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Y29uc3QgaT10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkscz10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMS10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLHI9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTErdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLXMrMTtmb3IoO3QtLTspdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShyLTEsMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShpLDAsdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtyZXR1cm4gdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9ZGVsZXRlTGluZXMoZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtsZXQgdD1lLnBhcmFtc1swXXx8MTtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO2NvbnN0IGk9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55O2xldCBzO2ZvcihzPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xLXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20scz10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSt0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Utczt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UoaSwxKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHMsMCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH1pbnNlcnRDaGFycyhlKXt0aGlzLl9yZXN0cmljdEN1cnNvcigpO2NvbnN0IHQ9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpO3JldHVybiB0JiYodC5pbnNlcnRDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCxlLnBhcmFtc1swXXx8MSx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSksdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSkpLCEwfWRlbGV0ZUNoYXJzKGUpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7Y29uc3QgdD10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSk7cmV0dXJuIHQmJih0LmRlbGV0ZUNlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LGUucGFyYW1zWzBdfHwxLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKSx0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSksITB9c2Nyb2xsVXAoZSl7bGV0IHQ9ZS5wYXJhbXNbMF18fDE7Zm9yKDt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7cmV0dXJuIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfXNjcm9sbERvd24oZSl7bGV0IHQ9ZS5wYXJhbXNbMF18fDE7Zm9yKDt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20sMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUobC5ERUZBVUxUX0FUVFJfREFUQSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSwhMH1zY3JvbGxMZWZ0KGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Y29uc3QgdD1lLnBhcmFtc1swXXx8MTtmb3IobGV0IGU9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtlPD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOysrZSl7Y29uc3QgaT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStlKTtpLmRlbGV0ZUNlbGxzKDAsdCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfXNjcm9sbFJpZ2h0KGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Y29uc3QgdD1lLnBhcmFtc1swXXx8MTtmb3IobGV0IGU9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtlPD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOysrZSl7Y29uc3QgaT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStlKTtpLmluc2VydENlbGxzKDAsdCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfWluc2VydENvbHVtbnMoZSl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDtjb25zdCB0PWUucGFyYW1zWzBdfHwxO2ZvcihsZXQgZT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO2U8PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b207KytlKXtjb25zdCBpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK2UpO2kuaW5zZXJ0Q2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsdCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfWRlbGV0ZUNvbHVtbnMoZSl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDtjb25zdCB0PWUucGFyYW1zWzBdfHwxO2ZvcihsZXQgZT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO2U8PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b207KytlKXtjb25zdCBpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK2UpO2kuZGVsZXRlQ2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsdCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfWVyYXNlQ2hhcnMoZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtjb25zdCB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTtyZXR1cm4gdCYmKHQucmVwbGFjZUNlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyhlLnBhcmFtc1swXXx8MSksdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpLHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpKSwhMH1yZXBlYXRQcmVjZWRpbmdDaGFyYWN0ZXIoZSl7Y29uc3QgdD10aGlzLl9wYXJzZXIucHJlY2VkaW5nSm9pblN0YXRlO2lmKCF0KXJldHVybiEwO2NvbnN0IGk9ZS5wYXJhbXNbMF18fDEscz1wLlVuaWNvZGVTZXJ2aWNlLmV4dHJhY3RXaWR0aCh0KSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci54LXMsbj10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSkuZ2V0U3RyaW5nKHIpLG89bmV3IFVpbnQzMkFycmF5KG4ubGVuZ3RoKmkpO2xldCBhPTA7Zm9yKGxldCBlPTA7ZTxuLmxlbmd0aDspe2NvbnN0IHQ9bi5jb2RlUG9pbnRBdChlKXx8MDtvW2ErK109dCxlKz10PjY1NTM1PzI6MX1sZXQgaD1hO2ZvcihsZXQgZT0xO2U8aTsrK2Upby5jb3B5V2l0aGluKGgsMCxhKSxoKz1hO3JldHVybiB0aGlzLnByaW50KG8sMCxoKSwhMH1zZW5kRGV2aWNlQXR0cmlidXRlc1ByaW1hcnkoZSl7cmV0dXJuIGUucGFyYW1zWzBdPjB8fCh0aGlzLl9pcyhcInh0ZXJtXCIpfHx0aGlzLl9pcyhcInJ4dnQtdW5pY29kZVwiKXx8dGhpcy5faXMoXCJzY3JlZW5cIik/dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChuLkMwLkVTQytcIls/MTsyY1wiKTp0aGlzLl9pcyhcImxpbnV4XCIpJiZ0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KG4uQzAuRVNDK1wiWz82Y1wiKSksITB9c2VuZERldmljZUF0dHJpYnV0ZXNTZWNvbmRhcnkoZSl7cmV0dXJuIGUucGFyYW1zWzBdPjB8fCh0aGlzLl9pcyhcInh0ZXJtXCIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQobi5DMC5FU0MrXCJbPjA7Mjc2OzBjXCIpOnRoaXMuX2lzKFwicnh2dC11bmljb2RlXCIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQobi5DMC5FU0MrXCJbPjg1Ozk1OzBjXCIpOnRoaXMuX2lzKFwibGludXhcIik/dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChlLnBhcmFtc1swXStcImNcIik6dGhpcy5faXMoXCJzY3JlZW5cIikmJnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQobi5DMC5FU0MrXCJbPjgzOzQwMDAzOzBjXCIpKSwhMH1faXMoZSl7cmV0dXJuIDA9PT0odGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50ZXJtTmFtZStcIlwiKS5pbmRleE9mKGUpfXNldE1vZGUoZSl7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspc3dpdGNoKGUucGFyYW1zW3RdKXtjYXNlIDQ6dGhpcy5fY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZT0hMDticmVhaztjYXNlIDIwOnRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY29udmVydEVvbD0hMH1yZXR1cm4hMH1zZXRNb2RlUHJpdmF0ZShlKXtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKylzd2l0Y2goZS5wYXJhbXNbdF0pe2Nhc2UgMTp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzPSEwO2JyZWFrO2Nhc2UgMjp0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgwLG8uREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgxLG8uREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgyLG8uREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgzLG8uREVGQVVMVF9DSEFSU0VUKTticmVhaztjYXNlIDM6dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dPcHRpb25zLnNldFdpbkxpbmVzJiYodGhpcy5fYnVmZmVyU2VydmljZS5yZXNpemUoMTMyLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpKTticmVhaztjYXNlIDY6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj0hMCx0aGlzLl9zZXRDdXJzb3IoMCwwKTticmVhaztjYXNlIDc6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQ9ITA7YnJlYWs7Y2FzZSAxMjp0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rPSEwO2JyZWFrO2Nhc2UgNDU6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kPSEwO2JyZWFrO2Nhc2UgNjY6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcIlNlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuXCIpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZD0hMCx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDk6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbD1cIlgxMFwiO2JyZWFrO2Nhc2UgMWUzOnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9XCJWVDIwMFwiO2JyZWFrO2Nhc2UgMTAwMjp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPVwiRFJBR1wiO2JyZWFrO2Nhc2UgMTAwMzp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPVwiQU5ZXCI7YnJlYWs7Y2FzZSAxMDA0OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXM9ITAsdGhpcy5fb25SZXF1ZXN0U2VuZEZvY3VzLmZpcmUoKTticmVhaztjYXNlIDEwMDU6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcIkRFQ1NFVCAxMDA1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNylcIik7YnJlYWs7Y2FzZSAxMDA2OnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2Rpbmc9XCJTR1JcIjticmVhaztjYXNlIDEwMTU6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcIkRFQ1NFVCAxMDE1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNylcIik7YnJlYWs7Y2FzZSAxMDE2OnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2Rpbmc9XCJTR1JfUElYRUxTXCI7YnJlYWs7Y2FzZSAyNTp0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbj0hMTticmVhaztjYXNlIDEwNDg6dGhpcy5zYXZlQ3Vyc29yKCk7YnJlYWs7Y2FzZSAxMDQ5OnRoaXMuc2F2ZUN1cnNvcigpO2Nhc2UgNDc6Y2FzZSAxMDQ3OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmF0ZUFsdEJ1ZmZlcih0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQ9ITAsdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZmlyZSgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDIwMDQ6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZT0hMH1yZXR1cm4hMH1yZXNldE1vZGUoZSl7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspc3dpdGNoKGUucGFyYW1zW3RdKXtjYXNlIDQ6dGhpcy5fY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZT0hMTticmVhaztjYXNlIDIwOnRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY29udmVydEVvbD0hMX1yZXR1cm4hMH1yZXNldE1vZGVQcml2YXRlKGUpe2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKXN3aXRjaChlLnBhcmFtc1t0XSl7Y2FzZSAxOnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXM9ITE7YnJlYWs7Y2FzZSAzOnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93T3B0aW9ucy5zZXRXaW5MaW5lcyYmKHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKDgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpKTticmVhaztjYXNlIDY6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj0hMSx0aGlzLl9zZXRDdXJzb3IoMCwwKTticmVhaztjYXNlIDc6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQ9ITE7YnJlYWs7Y2FzZSAxMjp0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rPSExO2JyZWFrO2Nhc2UgNDU6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kPSExO2JyZWFrO2Nhc2UgNjY6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcIlN3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuXCIpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZD0hMSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDk6Y2FzZSAxZTM6Y2FzZSAxMDAyOmNhc2UgMTAwMzp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPVwiTk9ORVwiO2JyZWFrO2Nhc2UgMTAwNDp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzPSExO2JyZWFrO2Nhc2UgMTAwNTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKFwiREVDUlNUIDEwMDUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KVwiKTticmVhaztjYXNlIDEwMDY6Y2FzZSAxMDE2OnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2Rpbmc9XCJERUZBVUxUXCI7YnJlYWs7Y2FzZSAxMDE1OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoXCJERUNSU1QgMTAxNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpXCIpO2JyZWFrO2Nhc2UgMjU6dGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW49ITA7YnJlYWs7Y2FzZSAxMDQ4OnRoaXMucmVzdG9yZUN1cnNvcigpO2JyZWFrO2Nhc2UgMTA0OTpjYXNlIDQ3OmNhc2UgMTA0Nzp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZhdGVOb3JtYWxCdWZmZXIoKSwxMDQ5PT09ZS5wYXJhbXNbdF0mJnRoaXMucmVzdG9yZUN1cnNvcigpLHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQ9ITAsdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZmlyZSgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDIwMDQ6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZT0hMX1yZXR1cm4hMH1yZXF1ZXN0TW9kZShlLHQpe2NvbnN0IGk9dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLHthY3RpdmVQcm90b2NvbDpzLGFjdGl2ZUVuY29kaW5nOnJ9PXRoaXMuX2NvcmVNb3VzZVNlcnZpY2Usbz10aGlzLl9jb3JlU2VydmljZSx7YnVmZmVyczphLGNvbHM6aH09dGhpcy5fYnVmZmVyU2VydmljZSx7YWN0aXZlOmMsYWx0Omx9PWEsZD10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLF89ZT0+ZT8xOjIsdT1lLnBhcmFtc1swXTtyZXR1cm4gZj11LHY9dD8yPT09dT80OjQ9PT11P18oby5tb2Rlcy5pbnNlcnRNb2RlKToxMj09PXU/MzoyMD09PXU/XyhkLmNvbnZlcnRFb2wpOjA6MT09PXU/XyhpLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyk6Mz09PXU/ZC53aW5kb3dPcHRpb25zLnNldFdpbkxpbmVzPzgwPT09aD8yOjEzMj09PWg/MTowOjA6Nj09PXU/XyhpLm9yaWdpbik6Nz09PXU/XyhpLndyYXBhcm91bmQpOjg9PT11PzM6OT09PXU/XyhcIlgxMFwiPT09cyk6MTI9PT11P18oZC5jdXJzb3JCbGluayk6MjU9PT11P18oIW8uaXNDdXJzb3JIaWRkZW4pOjQ1PT09dT9fKGkucmV2ZXJzZVdyYXBhcm91bmQpOjY2PT09dT9fKGkuYXBwbGljYXRpb25LZXlwYWQpOjY3PT09dT80OjFlMz09PXU/XyhcIlZUMjAwXCI9PT1zKToxMDAyPT09dT9fKFwiRFJBR1wiPT09cyk6MTAwMz09PXU/XyhcIkFOWVwiPT09cyk6MTAwND09PXU/XyhpLnNlbmRGb2N1cyk6MTAwNT09PXU/NDoxMDA2PT09dT9fKFwiU0dSXCI9PT1yKToxMDE1PT09dT80OjEwMTY9PT11P18oXCJTR1JfUElYRUxTXCI9PT1yKToxMDQ4PT09dT8xOjQ3PT09dXx8MTA0Nz09PXV8fDEwNDk9PT11P18oYz09PWwpOjIwMDQ9PT11P18oaS5icmFja2V0ZWRQYXN0ZU1vZGUpOjAsby50cmlnZ2VyRGF0YUV2ZW50KGAke24uQzAuRVNDfVske3Q/XCJcIjpcIj9cIn0ke2Z9OyR7dn0keWApLCEwO3ZhciBmLHZ9X3VwZGF0ZUF0dHJDb2xvcihlLHQsaSxzLHIpe3JldHVybiAyPT09dD8oZXw9NTAzMzE2NDgsZSY9LTE2Nzc3MjE2LGV8PWYuQXR0cmlidXRlRGF0YS5mcm9tQ29sb3JSR0IoW2kscyxyXSkpOjU9PT10JiYoZSY9LTUwMzMxOTA0LGV8PTMzNTU0NDMyfDI1NSZpKSxlfV9leHRyYWN0Q29sb3IoZSx0LGkpe2NvbnN0IHM9WzAsMCwtMSwwLDAsMF07bGV0IHI9MCxuPTA7ZG97aWYoc1tuK3JdPWUucGFyYW1zW3Qrbl0sZS5oYXNTdWJQYXJhbXModCtuKSl7Y29uc3QgaT1lLmdldFN1YlBhcmFtcyh0K24pO2xldCBvPTA7ZG97NT09PXNbMV0mJihyPTEpLHNbbitvKzErcl09aVtvXX13aGlsZSgrK288aS5sZW5ndGgmJm8rbisxK3I8cy5sZW5ndGgpO2JyZWFrfWlmKDU9PT1zWzFdJiZuK3I+PTJ8fDI9PT1zWzFdJiZuK3I+PTUpYnJlYWs7c1sxXSYmKHI9MSl9d2hpbGUoKytuK3Q8ZS5sZW5ndGgmJm4rcjxzLmxlbmd0aCk7Zm9yKGxldCBlPTI7ZTxzLmxlbmd0aDsrK2UpLTE9PT1zW2VdJiYoc1tlXT0wKTtzd2l0Y2goc1swXSl7Y2FzZSAzODppLmZnPXRoaXMuX3VwZGF0ZUF0dHJDb2xvcihpLmZnLHNbMV0sc1szXSxzWzRdLHNbNV0pO2JyZWFrO2Nhc2UgNDg6aS5iZz10aGlzLl91cGRhdGVBdHRyQ29sb3IoaS5iZyxzWzFdLHNbM10sc1s0XSxzWzVdKTticmVhaztjYXNlIDU4OmkuZXh0ZW5kZWQ9aS5leHRlbmRlZC5jbG9uZSgpLGkuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I9dGhpcy5fdXBkYXRlQXR0ckNvbG9yKGkuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3Isc1sxXSxzWzNdLHNbNF0sc1s1XSl9cmV0dXJuIG59X3Byb2Nlc3NVbmRlcmxpbmUoZSx0KXt0LmV4dGVuZGVkPXQuZXh0ZW5kZWQuY2xvbmUoKSwoIX5lfHxlPjUpJiYoZT0xKSx0LmV4dGVuZGVkLnVuZGVybGluZVN0eWxlPWUsdC5mZ3w9MjY4NDM1NDU2LDA9PT1lJiYodC5mZyY9LTI2ODQzNTQ1NyksdC51cGRhdGVFeHRlbmRlZCgpfV9wcm9jZXNzU0dSMChlKXtlLmZnPWwuREVGQVVMVF9BVFRSX0RBVEEuZmcsZS5iZz1sLkRFRkFVTFRfQVRUUl9EQVRBLmJnLGUuZXh0ZW5kZWQ9ZS5leHRlbmRlZC5jbG9uZSgpLGUuZXh0ZW5kZWQudW5kZXJsaW5lU3R5bGU9MCxlLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yJj0tNjcxMDg4NjQsZS51cGRhdGVFeHRlbmRlZCgpfWNoYXJBdHRyaWJ1dGVzKGUpe2lmKDE9PT1lLmxlbmd0aCYmMD09PWUucGFyYW1zWzBdKXJldHVybiB0aGlzLl9wcm9jZXNzU0dSMCh0aGlzLl9jdXJBdHRyRGF0YSksITA7Y29uc3QgdD1lLmxlbmd0aDtsZXQgaTtjb25zdCBzPXRoaXMuX2N1ckF0dHJEYXRhO2ZvcihsZXQgcj0wO3I8dDtyKyspaT1lLnBhcmFtc1tyXSxpPj0zMCYmaTw9Mzc/KHMuZmcmPS01MDMzMTkwNCxzLmZnfD0xNjc3NzIxNnxpLTMwKTppPj00MCYmaTw9NDc/KHMuYmcmPS01MDMzMTkwNCxzLmJnfD0xNjc3NzIxNnxpLTQwKTppPj05MCYmaTw9OTc/KHMuZmcmPS01MDMzMTkwNCxzLmZnfD0xNjc3NzIyNHxpLTkwKTppPj0xMDAmJmk8PTEwNz8ocy5iZyY9LTUwMzMxOTA0LHMuYmd8PTE2Nzc3MjI0fGktMTAwKTowPT09aT90aGlzLl9wcm9jZXNzU0dSMChzKToxPT09aT9zLmZnfD0xMzQyMTc3Mjg6Mz09PWk/cy5iZ3w9NjcxMDg4NjQ6ND09PWk/KHMuZmd8PTI2ODQzNTQ1Nix0aGlzLl9wcm9jZXNzVW5kZXJsaW5lKGUuaGFzU3ViUGFyYW1zKHIpP2UuZ2V0U3ViUGFyYW1zKHIpWzBdOjEscykpOjU9PT1pP3MuZmd8PTUzNjg3MDkxMjo3PT09aT9zLmZnfD02NzEwODg2NDo4PT09aT9zLmZnfD0xMDczNzQxODI0Ojk9PT1pP3MuZmd8PTIxNDc0ODM2NDg6Mj09PWk/cy5iZ3w9MTM0MjE3NzI4OjIxPT09aT90aGlzLl9wcm9jZXNzVW5kZXJsaW5lKDIscyk6MjI9PT1pPyhzLmZnJj0tMTM0MjE3NzI5LHMuYmcmPS0xMzQyMTc3MjkpOjIzPT09aT9zLmJnJj0tNjcxMDg4NjU6MjQ9PT1pPyhzLmZnJj0tMjY4NDM1NDU3LHRoaXMuX3Byb2Nlc3NVbmRlcmxpbmUoMCxzKSk6MjU9PT1pP3MuZmcmPS01MzY4NzA5MTM6Mjc9PT1pP3MuZmcmPS02NzEwODg2NToyOD09PWk/cy5mZyY9LTEwNzM3NDE4MjU6Mjk9PT1pP3MuZmcmPTIxNDc0ODM2NDc6Mzk9PT1pPyhzLmZnJj0tNjcxMDg4NjQscy5mZ3w9MTY3NzcyMTUmbC5ERUZBVUxUX0FUVFJfREFUQS5mZyk6NDk9PT1pPyhzLmJnJj0tNjcxMDg4NjQscy5iZ3w9MTY3NzcyMTUmbC5ERUZBVUxUX0FUVFJfREFUQS5iZyk6Mzg9PT1pfHw0OD09PWl8fDU4PT09aT9yKz10aGlzLl9leHRyYWN0Q29sb3IoZSxyLHMpOjUzPT09aT9zLmJnfD0xMDczNzQxODI0OjU1PT09aT9zLmJnJj0tMTA3Mzc0MTgyNTo1OT09PWk/KHMuZXh0ZW5kZWQ9cy5leHRlbmRlZC5jbG9uZSgpLHMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I9LTEscy51cGRhdGVFeHRlbmRlZCgpKToxMDA9PT1pPyhzLmZnJj0tNjcxMDg4NjQscy5mZ3w9MTY3NzcyMTUmbC5ERUZBVUxUX0FUVFJfREFUQS5mZyxzLmJnJj0tNjcxMDg4NjQscy5iZ3w9MTY3NzcyMTUmbC5ERUZBVUxUX0FUVFJfREFUQS5iZyk6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcIlVua25vd24gU0dSIGF0dHJpYnV0ZTogJWQuXCIsaSk7cmV0dXJuITB9ZGV2aWNlU3RhdHVzKGUpe3N3aXRjaChlLnBhcmFtc1swXSl7Y2FzZSA1OnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7bi5DMC5FU0N9WzBuYCk7YnJlYWs7Y2FzZSA2OmNvbnN0IGU9dGhpcy5fYWN0aXZlQnVmZmVyLnkrMSx0PXRoaXMuX2FjdGl2ZUJ1ZmZlci54KzE7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtuLkMwLkVTQ31bJHtlfTske3R9UmApfXJldHVybiEwfWRldmljZVN0YXR1c1ByaXZhdGUoZSl7aWYoNj09PWUucGFyYW1zWzBdKXtjb25zdCBlPXRoaXMuX2FjdGl2ZUJ1ZmZlci55KzEsdD10aGlzLl9hY3RpdmVCdWZmZXIueCsxO3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7bi5DMC5FU0N9Wz8ke2V9OyR7dH1SYCl9cmV0dXJuITB9c29mdFJlc2V0KGUpe3JldHVybiB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbj0hMSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKSx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wPTAsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbT10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSx0aGlzLl9jdXJBdHRyRGF0YT1sLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCksdGhpcy5fY29yZVNlcnZpY2UucmVzZXQoKSx0aGlzLl9jaGFyc2V0U2VydmljZS5yZXNldCgpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFg9MCx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRZPXRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZz10aGlzLl9jdXJBdHRyRGF0YS5mZyx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZz10aGlzLl9jdXJBdHRyRGF0YS5iZyx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDaGFyc2V0PXRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQsdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj0hMSwhMH1zZXRDdXJzb3JTdHlsZShlKXtjb25zdCB0PWUucGFyYW1zWzBdfHwxO3N3aXRjaCh0KXtjYXNlIDE6Y2FzZSAyOnRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU9XCJibG9ja1wiO2JyZWFrO2Nhc2UgMzpjYXNlIDQ6dGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZT1cInVuZGVybGluZVwiO2JyZWFrO2Nhc2UgNTpjYXNlIDY6dGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZT1cImJhclwifWNvbnN0IGk9dCUyPT0xO3JldHVybiB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rPWksITB9c2V0U2Nyb2xsUmVnaW9uKGUpe2NvbnN0IHQ9ZS5wYXJhbXNbMF18fDE7bGV0IGk7cmV0dXJuKGUubGVuZ3RoPDJ8fChpPWUucGFyYW1zWzFdKT50aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N8fDA9PT1pKSYmKGk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSxpPnQmJih0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wPXQtMSx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tPWktMSx0aGlzLl9zZXRDdXJzb3IoMCwwKSksITB9d2luZG93T3B0aW9ucyhlKXtpZighdyhlLnBhcmFtc1swXSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMpKXJldHVybiEwO2NvbnN0IHQ9ZS5sZW5ndGg+MT9lLnBhcmFtc1sxXTowO3N3aXRjaChlLnBhcmFtc1swXSl7Y2FzZSAxNDoyIT09dCYmdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZmlyZSh5LkdFVF9XSU5fU0laRV9QSVhFTFMpO2JyZWFrO2Nhc2UgMTY6dGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZmlyZSh5LkdFVF9DRUxMX1NJWkVfUElYRUxTKTticmVhaztjYXNlIDE4OnRoaXMuX2J1ZmZlclNlcnZpY2UmJnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7bi5DMC5FU0N9Wzg7JHt0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N9OyR7dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzfXRgKTticmVhaztjYXNlIDIyOjAhPT10JiYyIT09dHx8KHRoaXMuX3dpbmRvd1RpdGxlU3RhY2sucHVzaCh0aGlzLl93aW5kb3dUaXRsZSksdGhpcy5fd2luZG93VGl0bGVTdGFjay5sZW5ndGg+MTAmJnRoaXMuX3dpbmRvd1RpdGxlU3RhY2suc2hpZnQoKSksMCE9PXQmJjEhPT10fHwodGhpcy5faWNvbk5hbWVTdGFjay5wdXNoKHRoaXMuX2ljb25OYW1lKSx0aGlzLl9pY29uTmFtZVN0YWNrLmxlbmd0aD4xMCYmdGhpcy5faWNvbk5hbWVTdGFjay5zaGlmdCgpKTticmVhaztjYXNlIDIzOjAhPT10JiYyIT09dHx8dGhpcy5fd2luZG93VGl0bGVTdGFjay5sZW5ndGgmJnRoaXMuc2V0VGl0bGUodGhpcy5fd2luZG93VGl0bGVTdGFjay5wb3AoKSksMCE9PXQmJjEhPT10fHx0aGlzLl9pY29uTmFtZVN0YWNrLmxlbmd0aCYmdGhpcy5zZXRJY29uTmFtZSh0aGlzLl9pY29uTmFtZVN0YWNrLnBvcCgpKX1yZXR1cm4hMH1zYXZlQ3Vyc29yKGUpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRYPXRoaXMuX2FjdGl2ZUJ1ZmZlci54LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFk9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnPXRoaXMuX2N1ckF0dHJEYXRhLmZnLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnPXRoaXMuX2N1ckF0dHJEYXRhLmJnLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQ9dGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldCwhMH1yZXN0b3JlQ3Vyc29yKGUpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRYfHwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PU1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFktdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLDApLHRoaXMuX2N1ckF0dHJEYXRhLmZnPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnLHRoaXMuX2N1ckF0dHJEYXRhLmJnPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ9dGhpcy5fc2F2ZWRDaGFyc2V0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQmJih0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQpLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksITB9c2V0VGl0bGUoZSl7cmV0dXJuIHRoaXMuX3dpbmRvd1RpdGxlPWUsdGhpcy5fb25UaXRsZUNoYW5nZS5maXJlKGUpLCEwfXNldEljb25OYW1lKGUpe3JldHVybiB0aGlzLl9pY29uTmFtZT1lLCEwfXNldE9yUmVwb3J0SW5kZXhlZENvbG9yKGUpe2NvbnN0IHQ9W10saT1lLnNwbGl0KFwiO1wiKTtmb3IoO2kubGVuZ3RoPjE7KXtjb25zdCBlPWkuc2hpZnQoKSxzPWkuc2hpZnQoKTtpZigvXlxcZCskLy5leGVjKGUpKXtjb25zdCBpPXBhcnNlSW50KGUpO2lmKEQoaSkpaWYoXCI/XCI9PT1zKXQucHVzaCh7dHlwZTowLGluZGV4Oml9KTtlbHNle2NvbnN0IGU9KDAsUy5wYXJzZUNvbG9yKShzKTtlJiZ0LnB1c2goe3R5cGU6MSxpbmRleDppLGNvbG9yOmV9KX19fXJldHVybiB0Lmxlbmd0aCYmdGhpcy5fb25Db2xvci5maXJlKHQpLCEwfXNldEh5cGVybGluayhlKXtjb25zdCB0PWUuc3BsaXQoXCI7XCIpO3JldHVybiEodC5sZW5ndGg8MikmJih0WzFdP3RoaXMuX2NyZWF0ZUh5cGVybGluayh0WzBdLHRbMV0pOiF0WzBdJiZ0aGlzLl9maW5pc2hIeXBlcmxpbmsoKSl9X2NyZWF0ZUh5cGVybGluayhlLHQpe3RoaXMuX2dldEN1cnJlbnRMaW5rSWQoKSYmdGhpcy5fZmluaXNoSHlwZXJsaW5rKCk7Y29uc3QgaT1lLnNwbGl0KFwiOlwiKTtsZXQgcztjb25zdCByPWkuZmluZEluZGV4KChlPT5lLnN0YXJ0c1dpdGgoXCJpZD1cIikpKTtyZXR1cm4tMSE9PXImJihzPWlbcl0uc2xpY2UoMyl8fHZvaWQgMCksdGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQ9dGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQuY2xvbmUoKSx0aGlzLl9jdXJBdHRyRGF0YS5leHRlbmRlZC51cmxJZD10aGlzLl9vc2NMaW5rU2VydmljZS5yZWdpc3Rlckxpbmsoe2lkOnMsdXJpOnR9KSx0aGlzLl9jdXJBdHRyRGF0YS51cGRhdGVFeHRlbmRlZCgpLCEwfV9maW5pc2hIeXBlcmxpbmsoKXtyZXR1cm4gdGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQ9dGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQuY2xvbmUoKSx0aGlzLl9jdXJBdHRyRGF0YS5leHRlbmRlZC51cmxJZD0wLHRoaXMuX2N1ckF0dHJEYXRhLnVwZGF0ZUV4dGVuZGVkKCksITB9X3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGUsdCl7Y29uc3QgaT1lLnNwbGl0KFwiO1wiKTtmb3IobGV0IGU9MDtlPGkubGVuZ3RoJiYhKHQ+PXRoaXMuX3NwZWNpYWxDb2xvcnMubGVuZ3RoKTsrK2UsKyt0KWlmKFwiP1wiPT09aVtlXSl0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjAsaW5kZXg6dGhpcy5fc3BlY2lhbENvbG9yc1t0XX1dKTtlbHNle2NvbnN0IHM9KDAsUy5wYXJzZUNvbG9yKShpW2VdKTtzJiZ0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjEsaW5kZXg6dGhpcy5fc3BlY2lhbENvbG9yc1t0XSxjb2xvcjpzfV0pfXJldHVybiEwfXNldE9yUmVwb3J0RmdDb2xvcihlKXtyZXR1cm4gdGhpcy5fc2V0T3JSZXBvcnRTcGVjaWFsQ29sb3IoZSwwKX1zZXRPclJlcG9ydEJnQ29sb3IoZSl7cmV0dXJuIHRoaXMuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGUsMSl9c2V0T3JSZXBvcnRDdXJzb3JDb2xvcihlKXtyZXR1cm4gdGhpcy5fc2V0T3JSZXBvcnRTcGVjaWFsQ29sb3IoZSwyKX1yZXN0b3JlSW5kZXhlZENvbG9yKGUpe2lmKCFlKXJldHVybiB0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjJ9XSksITA7Y29uc3QgdD1bXSxpPWUuc3BsaXQoXCI7XCIpO2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7KytlKWlmKC9eXFxkKyQvLmV4ZWMoaVtlXSkpe2NvbnN0IHM9cGFyc2VJbnQoaVtlXSk7RChzKSYmdC5wdXNoKHt0eXBlOjIsaW5kZXg6c30pfXJldHVybiB0Lmxlbmd0aCYmdGhpcy5fb25Db2xvci5maXJlKHQpLCEwfXJlc3RvcmVGZ0NvbG9yKGUpe3JldHVybiB0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjIsaW5kZXg6MjU2fV0pLCEwfXJlc3RvcmVCZ0NvbG9yKGUpe3JldHVybiB0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjIsaW5kZXg6MjU3fV0pLCEwfXJlc3RvcmVDdXJzb3JDb2xvcihlKXtyZXR1cm4gdGhpcy5fb25Db2xvci5maXJlKFt7dHlwZToyLGluZGV4OjI1OH1dKSwhMH1uZXh0TGluZSgpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD0wLHRoaXMuaW5kZXgoKSwhMH1rZXlwYWRBcHBsaWNhdGlvbk1vZGUoKXtyZXR1cm4gdGhpcy5fbG9nU2VydmljZS5kZWJ1ZyhcIlNlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuXCIpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZD0hMCx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKSwhMH1rZXlwYWROdW1lcmljTW9kZSgpe3JldHVybiB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKFwiU3dpdGNoaW5nIGJhY2sgdG8gbm9ybWFsIGtleXBhZC5cIiksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkPSExLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpLCEwfXNlbGVjdERlZmF1bHRDaGFyc2V0KCl7cmV0dXJuIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgwKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgwLG8uREVGQVVMVF9DSEFSU0VUKSwhMH1zZWxlY3RDaGFyc2V0KGUpe3JldHVybiAyIT09ZS5sZW5ndGg/KHRoaXMuc2VsZWN0RGVmYXVsdENoYXJzZXQoKSwhMCk6KFwiL1wiPT09ZVswXXx8dGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoQ1tlWzBdXSxvLkNIQVJTRVRTW2VbMV1dfHxvLkRFRkFVTFRfQ0hBUlNFVCksITApfWluZGV4KCl7cmV0dXJuIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksdGhpcy5fYWN0aXZlQnVmZmVyLnkrKyx0aGlzLl9hY3RpdmVCdWZmZXIueT09PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20rMT8odGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTp0aGlzLl9hY3RpdmVCdWZmZXIueT49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzJiYodGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksITB9dGFiU2V0KCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci50YWJzW3RoaXMuX2FjdGl2ZUJ1ZmZlci54XT0hMCwhMH1yZXZlcnNlSW5kZXgoKXtpZih0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCl7Y29uc3QgZT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNoaWZ0RWxlbWVudHModGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55LGUsMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKSx0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKX1lbHNlIHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS0sdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtyZXR1cm4hMH1mdWxsUmVzZXQoKXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlc2V0KCksdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpLCEwfXJlc2V0KCl7dGhpcy5fY3VyQXR0ckRhdGE9bC5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbD1sLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCl9X2VyYXNlQXR0ckRhdGEoKXtyZXR1cm4gdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsLmJnJj0tNjcxMDg4NjQsdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsLmJnfD02NzEwODg2MyZ0aGlzLl9jdXJBdHRyRGF0YS5iZyx0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWx9c2V0Z0xldmVsKGUpe3JldHVybiB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwoZSksITB9c2NyZWVuQWxpZ25tZW50UGF0dGVybigpe2NvbnN0IGU9bmV3IHUuQ2VsbERhdGE7ZS5jb250ZW50PTE8PDIyfFwiRVwiLmNoYXJDb2RlQXQoMCksZS5mZz10aGlzLl9jdXJBdHRyRGF0YS5mZyxlLmJnPXRoaXMuX2N1ckF0dHJEYXRhLmJnLHRoaXMuX3NldEN1cnNvcigwLDApO2ZvcihsZXQgdD0wO3Q8dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOysrdCl7Y29uc3QgaT10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkrdCxzPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQoaSk7cyYmKHMuZmlsbChlKSxzLmlzV3JhcHBlZD0hMSl9cmV0dXJuIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrQWxsRGlydHkoKSx0aGlzLl9zZXRDdXJzb3IoMCwwKSwhMH1yZXF1ZXN0U3RhdHVzU3RyaW5nKGUsdCl7Y29uc3QgaT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcixzPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnM7cmV0dXJuKGU9Pih0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke24uQzAuRVNDfSR7ZX0ke24uQzAuRVNDfVxcXFxgKSwhMCkpKCdcInEnPT09ZT9gUDEkciR7dGhpcy5fY3VyQXR0ckRhdGEuaXNQcm90ZWN0ZWQoKT8xOjB9XCJxYDonXCJwJz09PWU/J1AxJHI2MTsxXCJwJzpcInJcIj09PWU/YFAxJHIke2kuc2Nyb2xsVG9wKzF9OyR7aS5zY3JvbGxCb3R0b20rMX1yYDpcIm1cIj09PWU/XCJQMSRyMG1cIjpcIiBxXCI9PT1lP2BQMSRyJHt7YmxvY2s6Mix1bmRlcmxpbmU6NCxiYXI6Nn1bcy5jdXJzb3JTdHlsZV0tKHMuY3Vyc29yQmxpbms/MTowKX0gcWA6XCJQMCRyXCIpfW1hcmtSYW5nZURpcnR5KGUsdCl7dGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtSYW5nZURpcnR5KGUsdCl9fXQuSW5wdXRIYW5kbGVyPWs7bGV0IEw9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuY2xlYXJSYW5nZSgpfWNsZWFyUmFuZ2UoKXt0aGlzLnN0YXJ0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksdGhpcy5lbmQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueX1tYXJrRGlydHkoZSl7ZTx0aGlzLnN0YXJ0P3RoaXMuc3RhcnQ9ZTplPnRoaXMuZW5kJiYodGhpcy5lbmQ9ZSl9bWFya1JhbmdlRGlydHkoZSx0KXtlPnQmJihFPWUsZT10LHQ9RSksZTx0aGlzLnN0YXJ0JiYodGhpcy5zdGFydD1lKSx0PnRoaXMuZW5kJiYodGhpcy5lbmQ9dCl9bWFya0FsbERpcnR5KCl7dGhpcy5tYXJrUmFuZ2VEaXJ0eSgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKX19O2Z1bmN0aW9uIEQoZSl7cmV0dXJuIDA8PWUmJmU8MjU2fUw9cyhbcigwLHYuSUJ1ZmZlclNlcnZpY2UpXSxMKX0sODQ0OihlLHQpPT57ZnVuY3Rpb24gaShlKXtmb3IoY29uc3QgdCBvZiBlKXQuZGlzcG9zZSgpO2UubGVuZ3RoPTB9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5nZXREaXNwb3NlQXJyYXlEaXNwb3NhYmxlPXQuZGlzcG9zZUFycmF5PXQudG9EaXNwb3NhYmxlPXQuTXV0YWJsZURpc3Bvc2FibGU9dC5EaXNwb3NhYmxlPXZvaWQgMCx0LkRpc3Bvc2FibGU9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLl9kaXNwb3NhYmxlcz1bXSx0aGlzLl9pc0Rpc3Bvc2VkPSExfWRpc3Bvc2UoKXt0aGlzLl9pc0Rpc3Bvc2VkPSEwO2Zvcihjb25zdCBlIG9mIHRoaXMuX2Rpc3Bvc2FibGVzKWUuZGlzcG9zZSgpO3RoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aD0wfXJlZ2lzdGVyKGUpe3JldHVybiB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGUpLGV9dW5yZWdpc3RlcihlKXtjb25zdCB0PXRoaXMuX2Rpc3Bvc2FibGVzLmluZGV4T2YoZSk7LTEhPT10JiZ0aGlzLl9kaXNwb3NhYmxlcy5zcGxpY2UodCwxKX19LHQuTXV0YWJsZURpc3Bvc2FibGU9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLl9pc0Rpc3Bvc2VkPSExfWdldCB2YWx1ZSgpe3JldHVybiB0aGlzLl9pc0Rpc3Bvc2VkP3ZvaWQgMDp0aGlzLl92YWx1ZX1zZXQgdmFsdWUoZSl7dGhpcy5faXNEaXNwb3NlZHx8ZT09PXRoaXMuX3ZhbHVlfHwodGhpcy5fdmFsdWU/LmRpc3Bvc2UoKSx0aGlzLl92YWx1ZT1lKX1jbGVhcigpe3RoaXMudmFsdWU9dm9pZCAwfWRpc3Bvc2UoKXt0aGlzLl9pc0Rpc3Bvc2VkPSEwLHRoaXMuX3ZhbHVlPy5kaXNwb3NlKCksdGhpcy5fdmFsdWU9dm9pZCAwfX0sdC50b0Rpc3Bvc2FibGU9ZnVuY3Rpb24oZSl7cmV0dXJue2Rpc3Bvc2U6ZX19LHQuZGlzcG9zZUFycmF5PWksdC5nZXREaXNwb3NlQXJyYXlEaXNwb3NhYmxlPWZ1bmN0aW9uKGUpe3JldHVybntkaXNwb3NlOigpPT5pKGUpfX19LDE1MDU6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkZvdXJLZXlNYXA9dC5Ud29LZXlNYXA9dm9pZCAwO2NsYXNzIGl7Y29uc3RydWN0b3IoKXt0aGlzLl9kYXRhPXt9fXNldChlLHQsaSl7dGhpcy5fZGF0YVtlXXx8KHRoaXMuX2RhdGFbZV09e30pLHRoaXMuX2RhdGFbZV1bdF09aX1nZXQoZSx0KXtyZXR1cm4gdGhpcy5fZGF0YVtlXT90aGlzLl9kYXRhW2VdW3RdOnZvaWQgMH1jbGVhcigpe3RoaXMuX2RhdGE9e319fXQuVHdvS2V5TWFwPWksdC5Gb3VyS2V5TWFwPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5fZGF0YT1uZXcgaX1zZXQoZSx0LHMscixuKXt0aGlzLl9kYXRhLmdldChlLHQpfHx0aGlzLl9kYXRhLnNldChlLHQsbmV3IGkpLHRoaXMuX2RhdGEuZ2V0KGUsdCkuc2V0KHMscixuKX1nZXQoZSx0LGkscyl7cmV0dXJuIHRoaXMuX2RhdGEuZ2V0KGUsdCk/LmdldChpLHMpfWNsZWFyKCl7dGhpcy5fZGF0YS5jbGVhcigpfX19LDYxMTQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmlzQ2hyb21lT1M9dC5pc0xpbnV4PXQuaXNXaW5kb3dzPXQuaXNJcGhvbmU9dC5pc0lwYWQ9dC5pc01hYz10LmdldFNhZmFyaVZlcnNpb249dC5pc1NhZmFyaT10LmlzTGVnYWN5RWRnZT10LmlzRmlyZWZveD10LmlzTm9kZT12b2lkIDAsdC5pc05vZGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHByb2Nlc3MmJlwidGl0bGVcImluIHByb2Nlc3M7Y29uc3QgaT10LmlzTm9kZT9cIm5vZGVcIjpuYXZpZ2F0b3IudXNlckFnZW50LHM9dC5pc05vZGU/XCJub2RlXCI6bmF2aWdhdG9yLnBsYXRmb3JtO3QuaXNGaXJlZm94PWkuaW5jbHVkZXMoXCJGaXJlZm94XCIpLHQuaXNMZWdhY3lFZGdlPWkuaW5jbHVkZXMoXCJFZGdlXCIpLHQuaXNTYWZhcmk9L14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChpKSx0LmdldFNhZmFyaVZlcnNpb249ZnVuY3Rpb24oKXtpZighdC5pc1NhZmFyaSlyZXR1cm4gMDtjb25zdCBlPWkubWF0Y2goL1ZlcnNpb25cXC8oXFxkKykvKTtyZXR1cm4gbnVsbD09PWV8fGUubGVuZ3RoPDI/MDpwYXJzZUludChlWzFdKX0sdC5pc01hYz1bXCJNYWNpbnRvc2hcIixcIk1hY0ludGVsXCIsXCJNYWNQUENcIixcIk1hYzY4S1wiXS5pbmNsdWRlcyhzKSx0LmlzSXBhZD1cImlQYWRcIj09PXMsdC5pc0lwaG9uZT1cImlQaG9uZVwiPT09cyx0LmlzV2luZG93cz1bXCJXaW5kb3dzXCIsXCJXaW4xNlwiLFwiV2luMzJcIixcIldpbkNFXCJdLmluY2x1ZGVzKHMpLHQuaXNMaW51eD1zLmluZGV4T2YoXCJMaW51eFwiKT49MCx0LmlzQ2hyb21lT1M9L1xcYkNyT1NcXGIvLnRlc3QoaSl9LDYxMDY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlNvcnRlZExpc3Q9dm9pZCAwO2xldCBpPTA7dC5Tb3J0ZWRMaXN0PWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuX2dldEtleT1lLHRoaXMuX2FycmF5PVtdfWNsZWFyKCl7dGhpcy5fYXJyYXkubGVuZ3RoPTB9aW5zZXJ0KGUpezAhPT10aGlzLl9hcnJheS5sZW5ndGg/KGk9dGhpcy5fc2VhcmNoKHRoaXMuX2dldEtleShlKSksdGhpcy5fYXJyYXkuc3BsaWNlKGksMCxlKSk6dGhpcy5fYXJyYXkucHVzaChlKX1kZWxldGUoZSl7aWYoMD09PXRoaXMuX2FycmF5Lmxlbmd0aClyZXR1cm4hMTtjb25zdCB0PXRoaXMuX2dldEtleShlKTtpZih2b2lkIDA9PT10KXJldHVybiExO2lmKGk9dGhpcy5fc2VhcmNoKHQpLC0xPT09aSlyZXR1cm4hMTtpZih0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbaV0pIT09dClyZXR1cm4hMTtkb3tpZih0aGlzLl9hcnJheVtpXT09PWUpcmV0dXJuIHRoaXMuX2FycmF5LnNwbGljZShpLDEpLCEwfXdoaWxlKCsraTx0aGlzLl9hcnJheS5sZW5ndGgmJnRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpXSk9PT10KTtyZXR1cm4hMX0qZ2V0S2V5SXRlcmF0b3IoZSl7aWYoMCE9PXRoaXMuX2FycmF5Lmxlbmd0aCYmKGk9dGhpcy5fc2VhcmNoKGUpLCEoaTwwfHxpPj10aGlzLl9hcnJheS5sZW5ndGgpJiZ0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbaV0pPT09ZSkpZG97eWllbGQgdGhpcy5fYXJyYXlbaV19d2hpbGUoKytpPHRoaXMuX2FycmF5Lmxlbmd0aCYmdGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ldKT09PWUpfWZvckVhY2hCeUtleShlLHQpe2lmKDAhPT10aGlzLl9hcnJheS5sZW5ndGgmJihpPXRoaXMuX3NlYXJjaChlKSwhKGk8MHx8aT49dGhpcy5fYXJyYXkubGVuZ3RoKSYmdGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ldKT09PWUpKWRve3QodGhpcy5fYXJyYXlbaV0pfXdoaWxlKCsraTx0aGlzLl9hcnJheS5sZW5ndGgmJnRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpXSk9PT1lKX12YWx1ZXMoKXtyZXR1cm5bLi4udGhpcy5fYXJyYXldLnZhbHVlcygpfV9zZWFyY2goZSl7bGV0IHQ9MCxpPXRoaXMuX2FycmF5Lmxlbmd0aC0xO2Zvcig7aT49dDspe2xldCBzPXQraT4+MTtjb25zdCByPXRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtzXSk7aWYocj5lKWk9cy0xO2Vsc2V7aWYoIShyPGUpKXtmb3IoO3M+MCYmdGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W3MtMV0pPT09ZTspcy0tO3JldHVybiBzfXQ9cysxfX1yZXR1cm4gdH19fSw3MjI2OihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkRlYm91bmNlZElkbGVUYXNrPXQuSWRsZVRhc2tRdWV1ZT10LlByaW9yaXR5VGFza1F1ZXVlPXZvaWQgMDtjb25zdCBzPWkoNjExNCk7Y2xhc3Mgcntjb25zdHJ1Y3Rvcigpe3RoaXMuX3Rhc2tzPVtdLHRoaXMuX2k9MH1lbnF1ZXVlKGUpe3RoaXMuX3Rhc2tzLnB1c2goZSksdGhpcy5fc3RhcnQoKX1mbHVzaCgpe2Zvcig7dGhpcy5faTx0aGlzLl90YXNrcy5sZW5ndGg7KXRoaXMuX3Rhc2tzW3RoaXMuX2ldKCl8fHRoaXMuX2krKzt0aGlzLmNsZWFyKCl9Y2xlYXIoKXt0aGlzLl9pZGxlQ2FsbGJhY2smJih0aGlzLl9jYW5jZWxDYWxsYmFjayh0aGlzLl9pZGxlQ2FsbGJhY2spLHRoaXMuX2lkbGVDYWxsYmFjaz12b2lkIDApLHRoaXMuX2k9MCx0aGlzLl90YXNrcy5sZW5ndGg9MH1fc3RhcnQoKXt0aGlzLl9pZGxlQ2FsbGJhY2t8fCh0aGlzLl9pZGxlQ2FsbGJhY2s9dGhpcy5fcmVxdWVzdENhbGxiYWNrKHRoaXMuX3Byb2Nlc3MuYmluZCh0aGlzKSkpfV9wcm9jZXNzKGUpe3RoaXMuX2lkbGVDYWxsYmFjaz12b2lkIDA7bGV0IHQ9MCxpPTAscz1lLnRpbWVSZW1haW5pbmcoKSxyPTA7Zm9yKDt0aGlzLl9pPHRoaXMuX3Rhc2tzLmxlbmd0aDspe2lmKHQ9RGF0ZS5ub3coKSx0aGlzLl90YXNrc1t0aGlzLl9pXSgpfHx0aGlzLl9pKyssdD1NYXRoLm1heCgxLERhdGUubm93KCktdCksaT1NYXRoLm1heCh0LGkpLHI9ZS50aW1lUmVtYWluaW5nKCksMS41Kmk+cilyZXR1cm4gcy10PC0yMCYmY29uc29sZS53YXJuKGB0YXNrIHF1ZXVlIGV4Y2VlZGVkIGFsbG90dGVkIGRlYWRsaW5lIGJ5ICR7TWF0aC5hYnMoTWF0aC5yb3VuZChzLXQpKX1tc2ApLHZvaWQgdGhpcy5fc3RhcnQoKTtzPXJ9dGhpcy5jbGVhcigpfX1jbGFzcyBuIGV4dGVuZHMgcntfcmVxdWVzdENhbGxiYWNrKGUpe3JldHVybiBzZXRUaW1lb3V0KCgoKT0+ZSh0aGlzLl9jcmVhdGVEZWFkbGluZSgxNikpKSl9X2NhbmNlbENhbGxiYWNrKGUpe2NsZWFyVGltZW91dChlKX1fY3JlYXRlRGVhZGxpbmUoZSl7Y29uc3QgdD1EYXRlLm5vdygpK2U7cmV0dXJue3RpbWVSZW1haW5pbmc6KCk9Pk1hdGgubWF4KDAsdC1EYXRlLm5vdygpKX19fXQuUHJpb3JpdHlUYXNrUXVldWU9bix0LklkbGVUYXNrUXVldWU9IXMuaXNOb2RlJiZcInJlcXVlc3RJZGxlQ2FsbGJhY2tcImluIHdpbmRvdz9jbGFzcyBleHRlbmRzIHJ7X3JlcXVlc3RDYWxsYmFjayhlKXtyZXR1cm4gcmVxdWVzdElkbGVDYWxsYmFjayhlKX1fY2FuY2VsQ2FsbGJhY2soZSl7Y2FuY2VsSWRsZUNhbGxiYWNrKGUpfX06bix0LkRlYm91bmNlZElkbGVUYXNrPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5fcXVldWU9bmV3IHQuSWRsZVRhc2tRdWV1ZX1zZXQoZSl7dGhpcy5fcXVldWUuY2xlYXIoKSx0aGlzLl9xdWV1ZS5lbnF1ZXVlKGUpfWZsdXNoKCl7dGhpcy5fcXVldWUuZmx1c2goKX19fSw5MjgyOihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlPXZvaWQgMDtjb25zdCBzPWkoNjQzKTt0LnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5idWZmZXIubGluZXMuZ2V0KGUuYnVmZmVyLnliYXNlK2UuYnVmZmVyLnktMSksaT10Py5nZXQoZS5jb2xzLTEpLHI9ZS5idWZmZXIubGluZXMuZ2V0KGUuYnVmZmVyLnliYXNlK2UuYnVmZmVyLnkpO3ImJmkmJihyLmlzV3JhcHBlZD1pW3MuQ0hBUl9EQVRBX0NPREVfSU5ERVhdIT09cy5OVUxMX0NFTExfQ09ERSYmaVtzLkNIQVJfREFUQV9DT0RFX0lOREVYXSE9PXMuV0hJVEVTUEFDRV9DRUxMX0NPREUpfX0sMzczNDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuRXh0ZW5kZWRBdHRycz10LkF0dHJpYnV0ZURhdGE9dm9pZCAwO2NsYXNzIGl7Y29uc3RydWN0b3IoKXt0aGlzLmZnPTAsdGhpcy5iZz0wLHRoaXMuZXh0ZW5kZWQ9bmV3IHN9c3RhdGljIHRvQ29sb3JSR0IoZSl7cmV0dXJuW2U+Pj4xNiYyNTUsZT4+PjgmMjU1LDI1NSZlXX1zdGF0aWMgZnJvbUNvbG9yUkdCKGUpe3JldHVybigyNTUmZVswXSk8PDE2fCgyNTUmZVsxXSk8PDh8MjU1JmVbMl19Y2xvbmUoKXtjb25zdCBlPW5ldyBpO3JldHVybiBlLmZnPXRoaXMuZmcsZS5iZz10aGlzLmJnLGUuZXh0ZW5kZWQ9dGhpcy5leHRlbmRlZC5jbG9uZSgpLGV9aXNJbnZlcnNlKCl7cmV0dXJuIDY3MTA4ODY0JnRoaXMuZmd9aXNCb2xkKCl7cmV0dXJuIDEzNDIxNzcyOCZ0aGlzLmZnfWlzVW5kZXJsaW5lKCl7cmV0dXJuIHRoaXMuaGFzRXh0ZW5kZWRBdHRycygpJiYwIT09dGhpcy5leHRlbmRlZC51bmRlcmxpbmVTdHlsZT8xOjI2ODQzNTQ1NiZ0aGlzLmZnfWlzQmxpbmsoKXtyZXR1cm4gNTM2ODcwOTEyJnRoaXMuZmd9aXNJbnZpc2libGUoKXtyZXR1cm4gMTA3Mzc0MTgyNCZ0aGlzLmZnfWlzSXRhbGljKCl7cmV0dXJuIDY3MTA4ODY0JnRoaXMuYmd9aXNEaW0oKXtyZXR1cm4gMTM0MjE3NzI4JnRoaXMuYmd9aXNTdHJpa2V0aHJvdWdoKCl7cmV0dXJuIDIxNDc0ODM2NDgmdGhpcy5mZ31pc1Byb3RlY3RlZCgpe3JldHVybiA1MzY4NzA5MTImdGhpcy5iZ31pc092ZXJsaW5lKCl7cmV0dXJuIDEwNzM3NDE4MjQmdGhpcy5iZ31nZXRGZ0NvbG9yTW9kZSgpe3JldHVybiA1MDMzMTY0OCZ0aGlzLmZnfWdldEJnQ29sb3JNb2RlKCl7cmV0dXJuIDUwMzMxNjQ4JnRoaXMuYmd9aXNGZ1JHQigpe3JldHVybiA1MDMzMTY0OD09KDUwMzMxNjQ4JnRoaXMuZmcpfWlzQmdSR0IoKXtyZXR1cm4gNTAzMzE2NDg9PSg1MDMzMTY0OCZ0aGlzLmJnKX1pc0ZnUGFsZXR0ZSgpe3JldHVybiAxNjc3NzIxNj09KDUwMzMxNjQ4JnRoaXMuZmcpfHwzMzU1NDQzMj09KDUwMzMxNjQ4JnRoaXMuZmcpfWlzQmdQYWxldHRlKCl7cmV0dXJuIDE2Nzc3MjE2PT0oNTAzMzE2NDgmdGhpcy5iZyl8fDMzNTU0NDMyPT0oNTAzMzE2NDgmdGhpcy5iZyl9aXNGZ0RlZmF1bHQoKXtyZXR1cm4gMD09KDUwMzMxNjQ4JnRoaXMuZmcpfWlzQmdEZWZhdWx0KCl7cmV0dXJuIDA9PSg1MDMzMTY0OCZ0aGlzLmJnKX1pc0F0dHJpYnV0ZURlZmF1bHQoKXtyZXR1cm4gMD09PXRoaXMuZmcmJjA9PT10aGlzLmJnfWdldEZnQ29sb3IoKXtzd2l0Y2goNTAzMzE2NDgmdGhpcy5mZyl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOnJldHVybiAyNTUmdGhpcy5mZztjYXNlIDUwMzMxNjQ4OnJldHVybiAxNjc3NzIxNSZ0aGlzLmZnO2RlZmF1bHQ6cmV0dXJuLTF9fWdldEJnQ29sb3IoKXtzd2l0Y2goNTAzMzE2NDgmdGhpcy5iZyl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOnJldHVybiAyNTUmdGhpcy5iZztjYXNlIDUwMzMxNjQ4OnJldHVybiAxNjc3NzIxNSZ0aGlzLmJnO2RlZmF1bHQ6cmV0dXJuLTF9fWhhc0V4dGVuZGVkQXR0cnMoKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmd9dXBkYXRlRXh0ZW5kZWQoKXt0aGlzLmV4dGVuZGVkLmlzRW1wdHkoKT90aGlzLmJnJj0tMjY4NDM1NDU3OnRoaXMuYmd8PTI2ODQzNTQ1Nn1nZXRVbmRlcmxpbmVDb2xvcigpe2lmKDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcilzd2l0Y2goNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcil7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOnJldHVybiAyNTUmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcjtjYXNlIDUwMzMxNjQ4OnJldHVybiAxNjc3NzIxNSZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yO2RlZmF1bHQ6cmV0dXJuIHRoaXMuZ2V0RmdDb2xvcigpfXJldHVybiB0aGlzLmdldEZnQ29sb3IoKX1nZXRVbmRlcmxpbmVDb2xvck1vZGUoKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPzUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I6dGhpcy5nZXRGZ0NvbG9yTW9kZSgpfWlzVW5kZXJsaW5lQ29sb3JSR0IoKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPzUwMzMxNjQ4PT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcik6dGhpcy5pc0ZnUkdCKCl9aXNVbmRlcmxpbmVDb2xvclBhbGV0dGUoKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPzE2Nzc3MjE2PT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcil8fDMzNTU0NDMyPT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcik6dGhpcy5pc0ZnUGFsZXR0ZSgpfWlzVW5kZXJsaW5lQ29sb3JEZWZhdWx0KCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj8wPT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcik6dGhpcy5pc0ZnRGVmYXVsdCgpfWdldFVuZGVybGluZVN0eWxlKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmZnPzI2ODQzNTQ1NiZ0aGlzLmJnP3RoaXMuZXh0ZW5kZWQudW5kZXJsaW5lU3R5bGU6MTowfWdldFVuZGVybGluZVZhcmlhbnRPZmZzZXQoKXtyZXR1cm4gdGhpcy5leHRlbmRlZC51bmRlcmxpbmVWYXJpYW50T2Zmc2V0fX10LkF0dHJpYnV0ZURhdGE9aTtjbGFzcyBze2dldCBleHQoKXtyZXR1cm4gdGhpcy5fdXJsSWQ/LTQ2OTc2MjA0OSZ0aGlzLl9leHR8dGhpcy51bmRlcmxpbmVTdHlsZTw8MjY6dGhpcy5fZXh0fXNldCBleHQoZSl7dGhpcy5fZXh0PWV9Z2V0IHVuZGVybGluZVN0eWxlKCl7cmV0dXJuIHRoaXMuX3VybElkPzU6KDQ2OTc2MjA0OCZ0aGlzLl9leHQpPj4yNn1zZXQgdW5kZXJsaW5lU3R5bGUoZSl7dGhpcy5fZXh0Jj0tNDY5NzYyMDQ5LHRoaXMuX2V4dHw9ZTw8MjYmNDY5NzYyMDQ4fWdldCB1bmRlcmxpbmVDb2xvcigpe3JldHVybiA2NzEwODg2MyZ0aGlzLl9leHR9c2V0IHVuZGVybGluZUNvbG9yKGUpe3RoaXMuX2V4dCY9LTY3MTA4ODY0LHRoaXMuX2V4dHw9NjcxMDg4NjMmZX1nZXQgdXJsSWQoKXtyZXR1cm4gdGhpcy5fdXJsSWR9c2V0IHVybElkKGUpe3RoaXMuX3VybElkPWV9Z2V0IHVuZGVybGluZVZhcmlhbnRPZmZzZXQoKXtjb25zdCBlPSgzNzU4MDk2Mzg0JnRoaXMuX2V4dCk+PjI5O3JldHVybiBlPDA/NDI5NDk2NzI4OF5lOmV9c2V0IHVuZGVybGluZVZhcmlhbnRPZmZzZXQoZSl7dGhpcy5fZXh0Jj01MzY4NzA5MTEsdGhpcy5fZXh0fD1lPDwyOSYzNzU4MDk2Mzg0fWNvbnN0cnVjdG9yKGU9MCx0PTApe3RoaXMuX2V4dD0wLHRoaXMuX3VybElkPTAsdGhpcy5fZXh0PWUsdGhpcy5fdXJsSWQ9dH1jbG9uZSgpe3JldHVybiBuZXcgcyh0aGlzLl9leHQsdGhpcy5fdXJsSWQpfWlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMudW5kZXJsaW5lU3R5bGUmJjA9PT10aGlzLl91cmxJZH19dC5FeHRlbmRlZEF0dHJzPXN9LDkwOTI6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQnVmZmVyPXQuTUFYX0JVRkZFUl9TSVpFPXZvaWQgMDtjb25zdCBzPWkoNjM0OSkscj1pKDcyMjYpLG49aSgzNzM0KSxvPWkoODQzNyksYT1pKDQ2MzQpLGg9aSg1MTEpLGM9aSg2NDMpLGw9aSg0ODYzKSxkPWkoNzExNik7dC5NQVhfQlVGRkVSX1NJWkU9NDI5NDk2NzI5NSx0LkJ1ZmZlcj1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5faGFzU2Nyb2xsYmFjaz1lLHRoaXMuX29wdGlvbnNTZXJ2aWNlPXQsdGhpcy5fYnVmZmVyU2VydmljZT1pLHRoaXMueWRpc3A9MCx0aGlzLnliYXNlPTAsdGhpcy55PTAsdGhpcy54PTAsdGhpcy50YWJzPXt9LHRoaXMuc2F2ZWRZPTAsdGhpcy5zYXZlZFg9MCx0aGlzLnNhdmVkQ3VyQXR0ckRhdGE9by5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHRoaXMuc2F2ZWRDaGFyc2V0PWQuREVGQVVMVF9DSEFSU0VULHRoaXMubWFya2Vycz1bXSx0aGlzLl9udWxsQ2VsbD1oLkNlbGxEYXRhLmZyb21DaGFyRGF0YShbMCxjLk5VTExfQ0VMTF9DSEFSLGMuTlVMTF9DRUxMX1dJRFRILGMuTlVMTF9DRUxMX0NPREVdKSx0aGlzLl93aGl0ZXNwYWNlQ2VsbD1oLkNlbGxEYXRhLmZyb21DaGFyRGF0YShbMCxjLldISVRFU1BBQ0VfQ0VMTF9DSEFSLGMuV0hJVEVTUEFDRV9DRUxMX1dJRFRILGMuV0hJVEVTUEFDRV9DRUxMX0NPREVdKSx0aGlzLl9pc0NsZWFyaW5nPSExLHRoaXMuX21lbW9yeUNsZWFudXBRdWV1ZT1uZXcgci5JZGxlVGFza1F1ZXVlLHRoaXMuX21lbW9yeUNsZWFudXBQb3NpdGlvbj0wLHRoaXMuX2NvbHM9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX3Jvd3M9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLHRoaXMubGluZXM9bmV3IHMuQ2lyY3VsYXJMaXN0KHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodGhpcy5fcm93cykpLHRoaXMuc2Nyb2xsVG9wPTAsdGhpcy5zY3JvbGxCb3R0b209dGhpcy5fcm93cy0xLHRoaXMuc2V0dXBUYWJTdG9wcygpfWdldE51bGxDZWxsKGUpe3JldHVybiBlPyh0aGlzLl9udWxsQ2VsbC5mZz1lLmZnLHRoaXMuX251bGxDZWxsLmJnPWUuYmcsdGhpcy5fbnVsbENlbGwuZXh0ZW5kZWQ9ZS5leHRlbmRlZCk6KHRoaXMuX251bGxDZWxsLmZnPTAsdGhpcy5fbnVsbENlbGwuYmc9MCx0aGlzLl9udWxsQ2VsbC5leHRlbmRlZD1uZXcgbi5FeHRlbmRlZEF0dHJzKSx0aGlzLl9udWxsQ2VsbH1nZXRXaGl0ZXNwYWNlQ2VsbChlKXtyZXR1cm4gZT8odGhpcy5fd2hpdGVzcGFjZUNlbGwuZmc9ZS5mZyx0aGlzLl93aGl0ZXNwYWNlQ2VsbC5iZz1lLmJnLHRoaXMuX3doaXRlc3BhY2VDZWxsLmV4dGVuZGVkPWUuZXh0ZW5kZWQpOih0aGlzLl93aGl0ZXNwYWNlQ2VsbC5mZz0wLHRoaXMuX3doaXRlc3BhY2VDZWxsLmJnPTAsdGhpcy5fd2hpdGVzcGFjZUNlbGwuZXh0ZW5kZWQ9bmV3IG4uRXh0ZW5kZWRBdHRycyksdGhpcy5fd2hpdGVzcGFjZUNlbGx9Z2V0QmxhbmtMaW5lKGUsdCl7cmV0dXJuIG5ldyBvLkJ1ZmZlckxpbmUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuZ2V0TnVsbENlbGwoZSksdCl9Z2V0IGhhc1Njcm9sbGJhY2soKXtyZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayYmdGhpcy5saW5lcy5tYXhMZW5ndGg+dGhpcy5fcm93c31nZXQgaXNDdXJzb3JJblZpZXdwb3J0KCl7Y29uc3QgZT10aGlzLnliYXNlK3RoaXMueS10aGlzLnlkaXNwO3JldHVybiBlPj0wJiZlPHRoaXMuX3Jvd3N9X2dldENvcnJlY3RCdWZmZXJMZW5ndGgoZSl7aWYoIXRoaXMuX2hhc1Njcm9sbGJhY2spcmV0dXJuIGU7Y29uc3QgaT1lK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2Nyb2xsYmFjaztyZXR1cm4gaT50Lk1BWF9CVUZGRVJfU0laRT90Lk1BWF9CVUZGRVJfU0laRTppfWZpbGxWaWV3cG9ydFJvd3MoZSl7aWYoMD09PXRoaXMubGluZXMubGVuZ3RoKXt2b2lkIDA9PT1lJiYoZT1vLkRFRkFVTFRfQVRUUl9EQVRBKTtsZXQgdD10aGlzLl9yb3dzO2Zvcig7dC0tOyl0aGlzLmxpbmVzLnB1c2godGhpcy5nZXRCbGFua0xpbmUoZSkpfX1jbGVhcigpe3RoaXMueWRpc3A9MCx0aGlzLnliYXNlPTAsdGhpcy55PTAsdGhpcy54PTAsdGhpcy5saW5lcz1uZXcgcy5DaXJjdWxhckxpc3QodGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0aGlzLl9yb3dzKSksdGhpcy5zY3JvbGxUb3A9MCx0aGlzLnNjcm9sbEJvdHRvbT10aGlzLl9yb3dzLTEsdGhpcy5zZXR1cFRhYlN0b3BzKCl9cmVzaXplKGUsdCl7Y29uc3QgaT10aGlzLmdldE51bGxDZWxsKG8uREVGQVVMVF9BVFRSX0RBVEEpO2xldCBzPTA7Y29uc3Qgcj10aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHQpO2lmKHI+dGhpcy5saW5lcy5tYXhMZW5ndGgmJih0aGlzLmxpbmVzLm1heExlbmd0aD1yKSx0aGlzLmxpbmVzLmxlbmd0aD4wKXtpZih0aGlzLl9jb2xzPGUpZm9yKGxldCB0PTA7dDx0aGlzLmxpbmVzLmxlbmd0aDt0Kyspcys9K3RoaXMubGluZXMuZ2V0KHQpLnJlc2l6ZShlLGkpO2xldCBuPTA7aWYodGhpcy5fcm93czx0KWZvcihsZXQgcz10aGlzLl9yb3dzO3M8dDtzKyspdGhpcy5saW5lcy5sZW5ndGg8dCt0aGlzLnliYXNlJiYodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZXx8dm9pZCAwIT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzUHR5LmJhY2tlbmR8fHZvaWQgMCE9PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c1B0eS5idWlsZE51bWJlcj90aGlzLmxpbmVzLnB1c2gobmV3IG8uQnVmZmVyTGluZShlLGkpKTp0aGlzLnliYXNlPjAmJnRoaXMubGluZXMubGVuZ3RoPD10aGlzLnliYXNlK3RoaXMueStuKzE/KHRoaXMueWJhc2UtLSxuKyssdGhpcy55ZGlzcD4wJiZ0aGlzLnlkaXNwLS0pOnRoaXMubGluZXMucHVzaChuZXcgby5CdWZmZXJMaW5lKGUsaSkpKTtlbHNlIGZvcihsZXQgZT10aGlzLl9yb3dzO2U+dDtlLS0pdGhpcy5saW5lcy5sZW5ndGg+dCt0aGlzLnliYXNlJiYodGhpcy5saW5lcy5sZW5ndGg+dGhpcy55YmFzZSt0aGlzLnkrMT90aGlzLmxpbmVzLnBvcCgpOih0aGlzLnliYXNlKyssdGhpcy55ZGlzcCsrKSk7aWYocjx0aGlzLmxpbmVzLm1heExlbmd0aCl7Y29uc3QgZT10aGlzLmxpbmVzLmxlbmd0aC1yO2U+MCYmKHRoaXMubGluZXMudHJpbVN0YXJ0KGUpLHRoaXMueWJhc2U9TWF0aC5tYXgodGhpcy55YmFzZS1lLDApLHRoaXMueWRpc3A9TWF0aC5tYXgodGhpcy55ZGlzcC1lLDApLHRoaXMuc2F2ZWRZPU1hdGgubWF4KHRoaXMuc2F2ZWRZLWUsMCkpLHRoaXMubGluZXMubWF4TGVuZ3RoPXJ9dGhpcy54PU1hdGgubWluKHRoaXMueCxlLTEpLHRoaXMueT1NYXRoLm1pbih0aGlzLnksdC0xKSxuJiYodGhpcy55Kz1uKSx0aGlzLnNhdmVkWD1NYXRoLm1pbih0aGlzLnNhdmVkWCxlLTEpLHRoaXMuc2Nyb2xsVG9wPTB9aWYodGhpcy5zY3JvbGxCb3R0b209dC0xLHRoaXMuX2lzUmVmbG93RW5hYmxlZCYmKHRoaXMuX3JlZmxvdyhlLHQpLHRoaXMuX2NvbHM+ZSkpZm9yKGxldCB0PTA7dDx0aGlzLmxpbmVzLmxlbmd0aDt0Kyspcys9K3RoaXMubGluZXMuZ2V0KHQpLnJlc2l6ZShlLGkpO3RoaXMuX2NvbHM9ZSx0aGlzLl9yb3dzPXQsdGhpcy5fbWVtb3J5Q2xlYW51cFF1ZXVlLmNsZWFyKCkscz4uMSp0aGlzLmxpbmVzLmxlbmd0aCYmKHRoaXMuX21lbW9yeUNsZWFudXBQb3NpdGlvbj0wLHRoaXMuX21lbW9yeUNsZWFudXBRdWV1ZS5lbnF1ZXVlKCgoKT0+dGhpcy5fYmF0Y2hlZE1lbW9yeUNsZWFudXAoKSkpKX1fYmF0Y2hlZE1lbW9yeUNsZWFudXAoKXtsZXQgZT0hMDt0aGlzLl9tZW1vcnlDbGVhbnVwUG9zaXRpb24+PXRoaXMubGluZXMubGVuZ3RoJiYodGhpcy5fbWVtb3J5Q2xlYW51cFBvc2l0aW9uPTAsZT0hMSk7bGV0IHQ9MDtmb3IoO3RoaXMuX21lbW9yeUNsZWFudXBQb3NpdGlvbjx0aGlzLmxpbmVzLmxlbmd0aDspaWYodCs9dGhpcy5saW5lcy5nZXQodGhpcy5fbWVtb3J5Q2xlYW51cFBvc2l0aW9uKyspLmNsZWFudXBNZW1vcnkoKSx0PjEwMClyZXR1cm4hMDtyZXR1cm4gZX1nZXQgX2lzUmVmbG93RW5hYmxlZCgpe2NvbnN0IGU9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzUHR5O3JldHVybiBlJiZlLmJ1aWxkTnVtYmVyP3RoaXMuX2hhc1Njcm9sbGJhY2smJlwiY29ucHR5XCI9PT1lLmJhY2tlbmQmJmUuYnVpbGROdW1iZXI+PTIxMzc2OnRoaXMuX2hhc1Njcm9sbGJhY2smJiF0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlfV9yZWZsb3coZSx0KXt0aGlzLl9jb2xzIT09ZSYmKGU+dGhpcy5fY29scz90aGlzLl9yZWZsb3dMYXJnZXIoZSx0KTp0aGlzLl9yZWZsb3dTbWFsbGVyKGUsdCkpfV9yZWZsb3dMYXJnZXIoZSx0KXtjb25zdCBpPSgwLGEucmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZSkodGhpcy5saW5lcyx0aGlzLl9jb2xzLGUsdGhpcy55YmFzZSt0aGlzLnksdGhpcy5nZXROdWxsQ2VsbChvLkRFRkFVTFRfQVRUUl9EQVRBKSk7aWYoaS5sZW5ndGg+MCl7Y29uc3Qgcz0oMCxhLnJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dCkodGhpcy5saW5lcyxpKTsoMCxhLnJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0KSh0aGlzLmxpbmVzLHMubGF5b3V0KSx0aGlzLl9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydChlLHQscy5jb3VudFJlbW92ZWQpfX1fcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQoZSx0LGkpe2NvbnN0IHM9dGhpcy5nZXROdWxsQ2VsbChvLkRFRkFVTFRfQVRUUl9EQVRBKTtsZXQgcj1pO2Zvcig7ci0tID4wOykwPT09dGhpcy55YmFzZT8odGhpcy55PjAmJnRoaXMueS0tLHRoaXMubGluZXMubGVuZ3RoPHQmJnRoaXMubGluZXMucHVzaChuZXcgby5CdWZmZXJMaW5lKGUscykpKToodGhpcy55ZGlzcD09PXRoaXMueWJhc2UmJnRoaXMueWRpc3AtLSx0aGlzLnliYXNlLS0pO3RoaXMuc2F2ZWRZPU1hdGgubWF4KHRoaXMuc2F2ZWRZLWksMCl9X3JlZmxvd1NtYWxsZXIoZSx0KXtjb25zdCBpPXRoaXMuZ2V0TnVsbENlbGwoby5ERUZBVUxUX0FUVFJfREFUQSkscz1bXTtsZXQgcj0wO2ZvcihsZXQgbj10aGlzLmxpbmVzLmxlbmd0aC0xO24+PTA7bi0tKXtsZXQgaD10aGlzLmxpbmVzLmdldChuKTtpZighaHx8IWguaXNXcmFwcGVkJiZoLmdldFRyaW1tZWRMZW5ndGgoKTw9ZSljb250aW51ZTtjb25zdCBjPVtoXTtmb3IoO2guaXNXcmFwcGVkJiZuPjA7KWg9dGhpcy5saW5lcy5nZXQoLS1uKSxjLnVuc2hpZnQoaCk7Y29uc3QgbD10aGlzLnliYXNlK3RoaXMueTtpZihsPj1uJiZsPG4rYy5sZW5ndGgpY29udGludWU7Y29uc3QgZD1jW2MubGVuZ3RoLTFdLmdldFRyaW1tZWRMZW5ndGgoKSxfPSgwLGEucmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzKShjLHRoaXMuX2NvbHMsZSksdT1fLmxlbmd0aC1jLmxlbmd0aDtsZXQgZjtmPTA9PT10aGlzLnliYXNlJiZ0aGlzLnkhPT10aGlzLmxpbmVzLmxlbmd0aC0xP01hdGgubWF4KDAsdGhpcy55LXRoaXMubGluZXMubWF4TGVuZ3RoK3UpOk1hdGgubWF4KDAsdGhpcy5saW5lcy5sZW5ndGgtdGhpcy5saW5lcy5tYXhMZW5ndGgrdSk7Y29uc3Qgdj1bXTtmb3IobGV0IGU9MDtlPHU7ZSsrKXtjb25zdCBlPXRoaXMuZ2V0QmxhbmtMaW5lKG8uREVGQVVMVF9BVFRSX0RBVEEsITApO3YucHVzaChlKX12Lmxlbmd0aD4wJiYocy5wdXNoKHtzdGFydDpuK2MubGVuZ3RoK3IsbmV3TGluZXM6dn0pLHIrPXYubGVuZ3RoKSxjLnB1c2goLi4udik7bGV0IHA9Xy5sZW5ndGgtMSxnPV9bcF07MD09PWcmJihwLS0sZz1fW3BdKTtsZXQgbT1jLmxlbmd0aC11LTEsUz1kO2Zvcig7bT49MDspe2NvbnN0IGU9TWF0aC5taW4oUyxnKTtpZih2b2lkIDA9PT1jW3BdKWJyZWFrO2lmKGNbcF0uY29weUNlbGxzRnJvbShjW21dLFMtZSxnLWUsZSwhMCksZy09ZSwwPT09ZyYmKHAtLSxnPV9bcF0pLFMtPWUsMD09PVMpe20tLTtjb25zdCBlPU1hdGgubWF4KG0sMCk7Uz0oMCxhLmdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCkoYyxlLHRoaXMuX2NvbHMpfX1mb3IobGV0IHQ9MDt0PGMubGVuZ3RoO3QrKylfW3RdPGUmJmNbdF0uc2V0Q2VsbChfW3RdLGkpO2xldCBDPXUtZjtmb3IoO0MtLSA+MDspMD09PXRoaXMueWJhc2U/dGhpcy55PHQtMT8odGhpcy55KyssdGhpcy5saW5lcy5wb3AoKSk6KHRoaXMueWJhc2UrKyx0aGlzLnlkaXNwKyspOnRoaXMueWJhc2U8TWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGgsdGhpcy5saW5lcy5sZW5ndGgrciktdCYmKHRoaXMueWJhc2U9PT10aGlzLnlkaXNwJiZ0aGlzLnlkaXNwKyssdGhpcy55YmFzZSsrKTt0aGlzLnNhdmVkWT1NYXRoLm1pbih0aGlzLnNhdmVkWSt1LHRoaXMueWJhc2UrdC0xKX1pZihzLmxlbmd0aD4wKXtjb25zdCBlPVtdLHQ9W107Zm9yKGxldCBlPTA7ZTx0aGlzLmxpbmVzLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMubGluZXMuZ2V0KGUpKTtjb25zdCBpPXRoaXMubGluZXMubGVuZ3RoO2xldCBuPWktMSxvPTAsYT1zW29dO3RoaXMubGluZXMubGVuZ3RoPU1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLHRoaXMubGluZXMubGVuZ3RoK3IpO2xldCBoPTA7Zm9yKGxldCBjPU1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLTEsaStyLTEpO2M+PTA7Yy0tKWlmKGEmJmEuc3RhcnQ+bitoKXtmb3IobGV0IGU9YS5uZXdMaW5lcy5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLmxpbmVzLnNldChjLS0sYS5uZXdMaW5lc1tlXSk7YysrLGUucHVzaCh7aW5kZXg6bisxLGFtb3VudDphLm5ld0xpbmVzLmxlbmd0aH0pLGgrPWEubmV3TGluZXMubGVuZ3RoLGE9c1srK29dfWVsc2UgdGhpcy5saW5lcy5zZXQoYyx0W24tLV0pO2xldCBjPTA7Zm9yKGxldCB0PWUubGVuZ3RoLTE7dD49MDt0LS0pZVt0XS5pbmRleCs9Yyx0aGlzLmxpbmVzLm9uSW5zZXJ0RW1pdHRlci5maXJlKGVbdF0pLGMrPWVbdF0uYW1vdW50O2NvbnN0IGw9TWF0aC5tYXgoMCxpK3ItdGhpcy5saW5lcy5tYXhMZW5ndGgpO2w+MCYmdGhpcy5saW5lcy5vblRyaW1FbWl0dGVyLmZpcmUobCl9fXRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhlLHQsaT0wLHMpe2NvbnN0IHI9dGhpcy5saW5lcy5nZXQoZSk7cmV0dXJuIHI/ci50cmFuc2xhdGVUb1N0cmluZyh0LGkscyk6XCJcIn1nZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKGUpe2xldCB0PWUsaT1lO2Zvcig7dD4wJiZ0aGlzLmxpbmVzLmdldCh0KS5pc1dyYXBwZWQ7KXQtLTtmb3IoO2krMTx0aGlzLmxpbmVzLmxlbmd0aCYmdGhpcy5saW5lcy5nZXQoaSsxKS5pc1dyYXBwZWQ7KWkrKztyZXR1cm57Zmlyc3Q6dCxsYXN0Oml9fXNldHVwVGFiU3RvcHMoZSl7Zm9yKG51bGwhPWU/dGhpcy50YWJzW2VdfHwoZT10aGlzLnByZXZTdG9wKGUpKToodGhpcy50YWJzPXt9LGU9MCk7ZTx0aGlzLl9jb2xzO2UrPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMudGFiU3RvcFdpZHRoKXRoaXMudGFic1tlXT0hMH1wcmV2U3RvcChlKXtmb3IobnVsbD09ZSYmKGU9dGhpcy54KTshdGhpcy50YWJzWy0tZV0mJmU+MDspO3JldHVybiBlPj10aGlzLl9jb2xzP3RoaXMuX2NvbHMtMTplPDA/MDplfW5leHRTdG9wKGUpe2ZvcihudWxsPT1lJiYoZT10aGlzLngpOyF0aGlzLnRhYnNbKytlXSYmZTx0aGlzLl9jb2xzOyk7cmV0dXJuIGU+PXRoaXMuX2NvbHM/dGhpcy5fY29scy0xOmU8MD8wOmV9Y2xlYXJNYXJrZXJzKGUpe3RoaXMuX2lzQ2xlYXJpbmc9ITA7Zm9yKGxldCB0PTA7dDx0aGlzLm1hcmtlcnMubGVuZ3RoO3QrKyl0aGlzLm1hcmtlcnNbdF0ubGluZT09PWUmJih0aGlzLm1hcmtlcnNbdF0uZGlzcG9zZSgpLHRoaXMubWFya2Vycy5zcGxpY2UodC0tLDEpKTt0aGlzLl9pc0NsZWFyaW5nPSExfWNsZWFyQWxsTWFya2Vycygpe3RoaXMuX2lzQ2xlYXJpbmc9ITA7Zm9yKGxldCBlPTA7ZTx0aGlzLm1hcmtlcnMubGVuZ3RoO2UrKyl0aGlzLm1hcmtlcnNbZV0uZGlzcG9zZSgpLHRoaXMubWFya2Vycy5zcGxpY2UoZS0tLDEpO3RoaXMuX2lzQ2xlYXJpbmc9ITF9YWRkTWFya2VyKGUpe2NvbnN0IHQ9bmV3IGwuTWFya2VyKGUpO3JldHVybiB0aGlzLm1hcmtlcnMucHVzaCh0KSx0LnJlZ2lzdGVyKHRoaXMubGluZXMub25UcmltKChlPT57dC5saW5lLT1lLHQubGluZTwwJiZ0LmRpc3Bvc2UoKX0pKSksdC5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uSW5zZXJ0KChlPT57dC5saW5lPj1lLmluZGV4JiYodC5saW5lKz1lLmFtb3VudCl9KSkpLHQucmVnaXN0ZXIodGhpcy5saW5lcy5vbkRlbGV0ZSgoZT0+e3QubGluZT49ZS5pbmRleCYmdC5saW5lPGUuaW5kZXgrZS5hbW91bnQmJnQuZGlzcG9zZSgpLHQubGluZT5lLmluZGV4JiYodC5saW5lLT1lLmFtb3VudCl9KSkpLHQucmVnaXN0ZXIodC5vbkRpc3Bvc2UoKCgpPT50aGlzLl9yZW1vdmVNYXJrZXIodCkpKSksdH1fcmVtb3ZlTWFya2VyKGUpe3RoaXMuX2lzQ2xlYXJpbmd8fHRoaXMubWFya2Vycy5zcGxpY2UodGhpcy5tYXJrZXJzLmluZGV4T2YoZSksMSl9fX0sODQzNzooZSx0LGkpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5CdWZmZXJMaW5lPXQuREVGQVVMVF9BVFRSX0RBVEE9dm9pZCAwO2NvbnN0IHM9aSgzNzM0KSxyPWkoNTExKSxuPWkoNjQzKSxvPWkoNDgyKTt0LkRFRkFVTFRfQVRUUl9EQVRBPU9iamVjdC5mcmVlemUobmV3IHMuQXR0cmlidXRlRGF0YSk7bGV0IGE9MDtjbGFzcyBoe2NvbnN0cnVjdG9yKGUsdCxpPSExKXt0aGlzLmlzV3JhcHBlZD1pLHRoaXMuX2NvbWJpbmVkPXt9LHRoaXMuX2V4dGVuZGVkQXR0cnM9e30sdGhpcy5fZGF0YT1uZXcgVWludDMyQXJyYXkoMyplKTtjb25zdCBzPXR8fHIuQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLG4uTlVMTF9DRUxMX0NIQVIsbi5OVUxMX0NFTExfV0lEVEgsbi5OVUxMX0NFTExfQ09ERV0pO2ZvcihsZXQgdD0wO3Q8ZTsrK3QpdGhpcy5zZXRDZWxsKHQscyk7dGhpcy5sZW5ndGg9ZX1nZXQoZSl7Y29uc3QgdD10aGlzLl9kYXRhWzMqZSswXSxpPTIwOTcxNTEmdDtyZXR1cm5bdGhpcy5fZGF0YVszKmUrMV0sMjA5NzE1MiZ0P3RoaXMuX2NvbWJpbmVkW2VdOmk/KDAsby5zdHJpbmdGcm9tQ29kZVBvaW50KShpKTpcIlwiLHQ+PjIyLDIwOTcxNTImdD90aGlzLl9jb21iaW5lZFtlXS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2VdLmxlbmd0aC0xKTppXX1zZXQoZSx0KXt0aGlzLl9kYXRhWzMqZSsxXT10W24uQ0hBUl9EQVRBX0FUVFJfSU5ERVhdLHRbbi5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoPjE/KHRoaXMuX2NvbWJpbmVkW2VdPXRbMV0sdGhpcy5fZGF0YVszKmUrMF09MjA5NzE1MnxlfHRbbi5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMik6dGhpcy5fZGF0YVszKmUrMF09dFtuLkNIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApfHRbbi5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMn1nZXRXaWR0aChlKXtyZXR1cm4gdGhpcy5fZGF0YVszKmUrMF0+PjIyfWhhc1dpZHRoKGUpe3JldHVybiAxMjU4MjkxMiZ0aGlzLl9kYXRhWzMqZSswXX1nZXRGZyhlKXtyZXR1cm4gdGhpcy5fZGF0YVszKmUrMV19Z2V0QmcoZSl7cmV0dXJuIHRoaXMuX2RhdGFbMyplKzJdfWhhc0NvbnRlbnQoZSl7cmV0dXJuIDQxOTQzMDMmdGhpcy5fZGF0YVszKmUrMF19Z2V0Q29kZVBvaW50KGUpe2NvbnN0IHQ9dGhpcy5fZGF0YVszKmUrMF07cmV0dXJuIDIwOTcxNTImdD90aGlzLl9jb21iaW5lZFtlXS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2VdLmxlbmd0aC0xKToyMDk3MTUxJnR9aXNDb21iaW5lZChlKXtyZXR1cm4gMjA5NzE1MiZ0aGlzLl9kYXRhWzMqZSswXX1nZXRTdHJpbmcoZSl7Y29uc3QgdD10aGlzLl9kYXRhWzMqZSswXTtyZXR1cm4gMjA5NzE1MiZ0P3RoaXMuX2NvbWJpbmVkW2VdOjIwOTcxNTEmdD8oMCxvLnN0cmluZ0Zyb21Db2RlUG9pbnQpKDIwOTcxNTEmdCk6XCJcIn1pc1Byb3RlY3RlZChlKXtyZXR1cm4gNTM2ODcwOTEyJnRoaXMuX2RhdGFbMyplKzJdfWxvYWRDZWxsKGUsdCl7cmV0dXJuIGE9MyplLHQuY29udGVudD10aGlzLl9kYXRhW2ErMF0sdC5mZz10aGlzLl9kYXRhW2ErMV0sdC5iZz10aGlzLl9kYXRhW2ErMl0sMjA5NzE1MiZ0LmNvbnRlbnQmJih0LmNvbWJpbmVkRGF0YT10aGlzLl9jb21iaW5lZFtlXSksMjY4NDM1NDU2JnQuYmcmJih0LmV4dGVuZGVkPXRoaXMuX2V4dGVuZGVkQXR0cnNbZV0pLHR9c2V0Q2VsbChlLHQpezIwOTcxNTImdC5jb250ZW50JiYodGhpcy5fY29tYmluZWRbZV09dC5jb21iaW5lZERhdGEpLDI2ODQzNTQ1NiZ0LmJnJiYodGhpcy5fZXh0ZW5kZWRBdHRyc1tlXT10LmV4dGVuZGVkKSx0aGlzLl9kYXRhWzMqZSswXT10LmNvbnRlbnQsdGhpcy5fZGF0YVszKmUrMV09dC5mZyx0aGlzLl9kYXRhWzMqZSsyXT10LmJnfXNldENlbGxGcm9tQ29kZXBvaW50KGUsdCxpLHMpezI2ODQzNTQ1NiZzLmJnJiYodGhpcy5fZXh0ZW5kZWRBdHRyc1tlXT1zLmV4dGVuZGVkKSx0aGlzLl9kYXRhWzMqZSswXT10fGk8PDIyLHRoaXMuX2RhdGFbMyplKzFdPXMuZmcsdGhpcy5fZGF0YVszKmUrMl09cy5iZ31hZGRDb2RlcG9pbnRUb0NlbGwoZSx0LGkpe2xldCBzPXRoaXMuX2RhdGFbMyplKzBdOzIwOTcxNTImcz90aGlzLl9jb21iaW5lZFtlXSs9KDAsby5zdHJpbmdGcm9tQ29kZVBvaW50KSh0KToyMDk3MTUxJnM/KHRoaXMuX2NvbWJpbmVkW2VdPSgwLG8uc3RyaW5nRnJvbUNvZGVQb2ludCkoMjA5NzE1MSZzKSsoMCxvLnN0cmluZ0Zyb21Db2RlUG9pbnQpKHQpLHMmPS0yMDk3MTUyLHN8PTIwOTcxNTIpOnM9dHwxPDwyMixpJiYocyY9LTEyNTgyOTEzLHN8PWk8PDIyKSx0aGlzLl9kYXRhWzMqZSswXT1zfWluc2VydENlbGxzKGUsdCxpKXtpZigoZSU9dGhpcy5sZW5ndGgpJiYyPT09dGhpcy5nZXRXaWR0aChlLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KGUtMSwwLDEsaSksdDx0aGlzLmxlbmd0aC1lKXtjb25zdCBzPW5ldyByLkNlbGxEYXRhO2ZvcihsZXQgaT10aGlzLmxlbmd0aC1lLXQtMTtpPj0wOy0taSl0aGlzLnNldENlbGwoZSt0K2ksdGhpcy5sb2FkQ2VsbChlK2kscykpO2ZvcihsZXQgcz0wO3M8dDsrK3MpdGhpcy5zZXRDZWxsKGUrcyxpKX1lbHNlIGZvcihsZXQgdD1lO3Q8dGhpcy5sZW5ndGg7Kyt0KXRoaXMuc2V0Q2VsbCh0LGkpOzI9PT10aGlzLmdldFdpZHRoKHRoaXMubGVuZ3RoLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMubGVuZ3RoLTEsMCwxLGkpfWRlbGV0ZUNlbGxzKGUsdCxpKXtpZihlJT10aGlzLmxlbmd0aCx0PHRoaXMubGVuZ3RoLWUpe2NvbnN0IHM9bmV3IHIuQ2VsbERhdGE7Zm9yKGxldCBpPTA7aTx0aGlzLmxlbmd0aC1lLXQ7KytpKXRoaXMuc2V0Q2VsbChlK2ksdGhpcy5sb2FkQ2VsbChlK3QraSxzKSk7Zm9yKGxldCBlPXRoaXMubGVuZ3RoLXQ7ZTx0aGlzLmxlbmd0aDsrK2UpdGhpcy5zZXRDZWxsKGUsaSl9ZWxzZSBmb3IobGV0IHQ9ZTt0PHRoaXMubGVuZ3RoOysrdCl0aGlzLnNldENlbGwodCxpKTtlJiYyPT09dGhpcy5nZXRXaWR0aChlLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KGUtMSwwLDEsaSksMCE9PXRoaXMuZ2V0V2lkdGgoZSl8fHRoaXMuaGFzQ29udGVudChlKXx8dGhpcy5zZXRDZWxsRnJvbUNvZGVwb2ludChlLDAsMSxpKX1yZXBsYWNlQ2VsbHMoZSx0LGkscz0hMSl7aWYocylmb3IoZSYmMj09PXRoaXMuZ2V0V2lkdGgoZS0xKSYmIXRoaXMuaXNQcm90ZWN0ZWQoZS0xKSYmdGhpcy5zZXRDZWxsRnJvbUNvZGVwb2ludChlLTEsMCwxLGkpLHQ8dGhpcy5sZW5ndGgmJjI9PT10aGlzLmdldFdpZHRoKHQtMSkmJiF0aGlzLmlzUHJvdGVjdGVkKHQpJiZ0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KHQsMCwxLGkpO2U8dCYmZTx0aGlzLmxlbmd0aDspdGhpcy5pc1Byb3RlY3RlZChlKXx8dGhpcy5zZXRDZWxsKGUsaSksZSsrO2Vsc2UgZm9yKGUmJjI9PT10aGlzLmdldFdpZHRoKGUtMSkmJnRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQoZS0xLDAsMSxpKSx0PHRoaXMubGVuZ3RoJiYyPT09dGhpcy5nZXRXaWR0aCh0LTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZXBvaW50KHQsMCwxLGkpO2U8dCYmZTx0aGlzLmxlbmd0aDspdGhpcy5zZXRDZWxsKGUrKyxpKX1yZXNpemUoZSx0KXtpZihlPT09dGhpcy5sZW5ndGgpcmV0dXJuIDQqdGhpcy5fZGF0YS5sZW5ndGgqMjx0aGlzLl9kYXRhLmJ1ZmZlci5ieXRlTGVuZ3RoO2NvbnN0IGk9MyplO2lmKGU+dGhpcy5sZW5ndGgpe2lmKHRoaXMuX2RhdGEuYnVmZmVyLmJ5dGVMZW5ndGg+PTQqaSl0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhLmJ1ZmZlciwwLGkpO2Vsc2V7Y29uc3QgZT1uZXcgVWludDMyQXJyYXkoaSk7ZS5zZXQodGhpcy5fZGF0YSksdGhpcy5fZGF0YT1lfWZvcihsZXQgaT10aGlzLmxlbmd0aDtpPGU7KytpKXRoaXMuc2V0Q2VsbChpLHQpfWVsc2V7dGhpcy5fZGF0YT10aGlzLl9kYXRhLnN1YmFycmF5KDAsaSk7Y29uc3QgdD1PYmplY3Qua2V5cyh0aGlzLl9jb21iaW5lZCk7Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe2NvbnN0IHM9cGFyc2VJbnQodFtpXSwxMCk7cz49ZSYmZGVsZXRlIHRoaXMuX2NvbWJpbmVkW3NdfWNvbnN0IHM9T2JqZWN0LmtleXModGhpcy5fZXh0ZW5kZWRBdHRycyk7Zm9yKGxldCB0PTA7dDxzLmxlbmd0aDt0Kyspe2NvbnN0IGk9cGFyc2VJbnQoc1t0XSwxMCk7aT49ZSYmZGVsZXRlIHRoaXMuX2V4dGVuZGVkQXR0cnNbaV19fXJldHVybiB0aGlzLmxlbmd0aD1lLDQqaSoyPHRoaXMuX2RhdGEuYnVmZmVyLmJ5dGVMZW5ndGh9Y2xlYW51cE1lbW9yeSgpe2lmKDQqdGhpcy5fZGF0YS5sZW5ndGgqMjx0aGlzLl9kYXRhLmJ1ZmZlci5ieXRlTGVuZ3RoKXtjb25zdCBlPW5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhLmxlbmd0aCk7cmV0dXJuIGUuc2V0KHRoaXMuX2RhdGEpLHRoaXMuX2RhdGE9ZSwxfXJldHVybiAwfWZpbGwoZSx0PSExKXtpZih0KWZvcihsZXQgdD0wO3Q8dGhpcy5sZW5ndGg7Kyt0KXRoaXMuaXNQcm90ZWN0ZWQodCl8fHRoaXMuc2V0Q2VsbCh0LGUpO2Vsc2V7dGhpcy5fY29tYmluZWQ9e30sdGhpcy5fZXh0ZW5kZWRBdHRycz17fTtmb3IobGV0IHQ9MDt0PHRoaXMubGVuZ3RoOysrdCl0aGlzLnNldENlbGwodCxlKX19Y29weUZyb20oZSl7dGhpcy5sZW5ndGghPT1lLmxlbmd0aD90aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheShlLl9kYXRhKTp0aGlzLl9kYXRhLnNldChlLl9kYXRhKSx0aGlzLmxlbmd0aD1lLmxlbmd0aCx0aGlzLl9jb21iaW5lZD17fTtmb3IoY29uc3QgdCBpbiBlLl9jb21iaW5lZCl0aGlzLl9jb21iaW5lZFt0XT1lLl9jb21iaW5lZFt0XTt0aGlzLl9leHRlbmRlZEF0dHJzPXt9O2Zvcihjb25zdCB0IGluIGUuX2V4dGVuZGVkQXR0cnMpdGhpcy5fZXh0ZW5kZWRBdHRyc1t0XT1lLl9leHRlbmRlZEF0dHJzW3RdO3RoaXMuaXNXcmFwcGVkPWUuaXNXcmFwcGVkfWNsb25lKCl7Y29uc3QgZT1uZXcgaCgwKTtlLl9kYXRhPW5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhKSxlLmxlbmd0aD10aGlzLmxlbmd0aDtmb3IoY29uc3QgdCBpbiB0aGlzLl9jb21iaW5lZCllLl9jb21iaW5lZFt0XT10aGlzLl9jb21iaW5lZFt0XTtmb3IoY29uc3QgdCBpbiB0aGlzLl9leHRlbmRlZEF0dHJzKWUuX2V4dGVuZGVkQXR0cnNbdF09dGhpcy5fZXh0ZW5kZWRBdHRyc1t0XTtyZXR1cm4gZS5pc1dyYXBwZWQ9dGhpcy5pc1dyYXBwZWQsZX1nZXRUcmltbWVkTGVuZ3RoKCl7Zm9yKGxldCBlPXRoaXMubGVuZ3RoLTE7ZT49MDstLWUpaWYoNDE5NDMwMyZ0aGlzLl9kYXRhWzMqZSswXSlyZXR1cm4gZSsodGhpcy5fZGF0YVszKmUrMF0+PjIyKTtyZXR1cm4gMH1nZXROb0JnVHJpbW1lZExlbmd0aCgpe2ZvcihsZXQgZT10aGlzLmxlbmd0aC0xO2U+PTA7LS1lKWlmKDQxOTQzMDMmdGhpcy5fZGF0YVszKmUrMF18fDUwMzMxNjQ4JnRoaXMuX2RhdGFbMyplKzJdKXJldHVybiBlKyh0aGlzLl9kYXRhWzMqZSswXT4+MjIpO3JldHVybiAwfWNvcHlDZWxsc0Zyb20oZSx0LGkscyxyKXtjb25zdCBuPWUuX2RhdGE7aWYocilmb3IobGV0IHI9cy0xO3I+PTA7ci0tKXtmb3IobGV0IGU9MDtlPDM7ZSsrKXRoaXMuX2RhdGFbMyooaStyKStlXT1uWzMqKHQrcikrZV07MjY4NDM1NDU2Jm5bMyoodCtyKSsyXSYmKHRoaXMuX2V4dGVuZGVkQXR0cnNbaStyXT1lLl9leHRlbmRlZEF0dHJzW3Qrcl0pfWVsc2UgZm9yKGxldCByPTA7cjxzO3IrKyl7Zm9yKGxldCBlPTA7ZTwzO2UrKyl0aGlzLl9kYXRhWzMqKGkrcikrZV09blszKih0K3IpK2VdOzI2ODQzNTQ1NiZuWzMqKHQrcikrMl0mJih0aGlzLl9leHRlbmRlZEF0dHJzW2krcl09ZS5fZXh0ZW5kZWRBdHRyc1t0K3JdKX1jb25zdCBvPU9iamVjdC5rZXlzKGUuX2NvbWJpbmVkKTtmb3IobGV0IHM9MDtzPG8ubGVuZ3RoO3MrKyl7Y29uc3Qgcj1wYXJzZUludChvW3NdLDEwKTtyPj10JiYodGhpcy5fY29tYmluZWRbci10K2ldPWUuX2NvbWJpbmVkW3JdKX19dHJhbnNsYXRlVG9TdHJpbmcoZSx0LGkscyl7dD10Pz8wLGk9aT8/dGhpcy5sZW5ndGgsZSYmKGk9TWF0aC5taW4oaSx0aGlzLmdldFRyaW1tZWRMZW5ndGgoKSkpLHMmJihzLmxlbmd0aD0wKTtsZXQgcj1cIlwiO2Zvcig7dDxpOyl7Y29uc3QgZT10aGlzLl9kYXRhWzMqdCswXSxpPTIwOTcxNTEmZSxhPTIwOTcxNTImZT90aGlzLl9jb21iaW5lZFt0XTppPygwLG8uc3RyaW5nRnJvbUNvZGVQb2ludCkoaSk6bi5XSElURVNQQUNFX0NFTExfQ0hBUjtpZihyKz1hLHMpZm9yKGxldCBlPTA7ZTxhLmxlbmd0aDsrK2Upcy5wdXNoKHQpO3QrPWU+PjIyfHwxfXJldHVybiBzJiZzLnB1c2godCkscn19dC5CdWZmZXJMaW5lPWh9LDQ4NDE6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmdldFJhbmdlTGVuZ3RoPXZvaWQgMCx0LmdldFJhbmdlTGVuZ3RoPWZ1bmN0aW9uKGUsdCl7aWYoZS5zdGFydC55PmUuZW5kLnkpdGhyb3cgbmV3IEVycm9yKGBCdWZmZXIgcmFuZ2UgZW5kICgke2UuZW5kLnh9LCAke2UuZW5kLnl9KSBjYW5ub3QgYmUgYmVmb3JlIHN0YXJ0ICgke2Uuc3RhcnQueH0sICR7ZS5zdGFydC55fSlgKTtyZXR1cm4gdCooZS5lbmQueS1lLnN0YXJ0LnkpKyhlLmVuZC54LWUuc3RhcnQueCsxKX19LDQ2MzQ6KGUsdCk9PntmdW5jdGlvbiBpKGUsdCxpKXtpZih0PT09ZS5sZW5ndGgtMSlyZXR1cm4gZVt0XS5nZXRUcmltbWVkTGVuZ3RoKCk7Y29uc3Qgcz0hZVt0XS5oYXNDb250ZW50KGktMSkmJjE9PT1lW3RdLmdldFdpZHRoKGktMSkscj0yPT09ZVt0KzFdLmdldFdpZHRoKDApO3JldHVybiBzJiZyP2ktMTppfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoPXQucmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzPXQucmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQ9dC5yZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQ9dC5yZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlPXZvaWQgMCx0LnJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmU9ZnVuY3Rpb24oZSx0LHMscixuKXtjb25zdCBvPVtdO2ZvcihsZXQgYT0wO2E8ZS5sZW5ndGgtMTthKyspe2xldCBoPWEsYz1lLmdldCgrK2gpO2lmKCFjLmlzV3JhcHBlZCljb250aW51ZTtjb25zdCBsPVtlLmdldChhKV07Zm9yKDtoPGUubGVuZ3RoJiZjLmlzV3JhcHBlZDspbC5wdXNoKGMpLGM9ZS5nZXQoKytoKTtpZihyPj1hJiZyPGgpe2ErPWwubGVuZ3RoLTE7Y29udGludWV9bGV0IGQ9MCxfPWkobCxkLHQpLHU9MSxmPTA7Zm9yKDt1PGwubGVuZ3RoOyl7Y29uc3QgZT1pKGwsdSx0KSxyPWUtZixvPXMtXyxhPU1hdGgubWluKHIsbyk7bFtkXS5jb3B5Q2VsbHNGcm9tKGxbdV0sZixfLGEsITEpLF8rPWEsXz09PXMmJihkKyssXz0wKSxmKz1hLGY9PT1lJiYodSsrLGY9MCksMD09PV8mJjAhPT1kJiYyPT09bFtkLTFdLmdldFdpZHRoKHMtMSkmJihsW2RdLmNvcHlDZWxsc0Zyb20obFtkLTFdLHMtMSxfKyssMSwhMSksbFtkLTFdLnNldENlbGwocy0xLG4pKX1sW2RdLnJlcGxhY2VDZWxscyhfLHMsbik7bGV0IHY9MDtmb3IobGV0IGU9bC5sZW5ndGgtMTtlPjAmJihlPmR8fDA9PT1sW2VdLmdldFRyaW1tZWRMZW5ndGgoKSk7ZS0tKXYrKzt2PjAmJihvLnB1c2goYStsLmxlbmd0aC12KSxvLnB1c2godikpLGErPWwubGVuZ3RoLTF9cmV0dXJuIG99LHQucmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0PWZ1bmN0aW9uKGUsdCl7Y29uc3QgaT1bXTtsZXQgcz0wLHI9dFtzXSxuPTA7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKyspaWYocj09PW8pe2NvbnN0IGk9dFsrK3NdO2Uub25EZWxldGVFbWl0dGVyLmZpcmUoe2luZGV4Om8tbixhbW91bnQ6aX0pLG8rPWktMSxuKz1pLHI9dFsrK3NdfWVsc2UgaS5wdXNoKG8pO3JldHVybntsYXlvdXQ6aSxjb3VudFJlbW92ZWQ6bn19LHQucmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQ9ZnVuY3Rpb24oZSx0KXtjb25zdCBpPVtdO2ZvcihsZXQgcz0wO3M8dC5sZW5ndGg7cysrKWkucHVzaChlLmdldCh0W3NdKSk7Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0KyspZS5zZXQodCxpW3RdKTtlLmxlbmd0aD10Lmxlbmd0aH0sdC5yZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHM9ZnVuY3Rpb24oZSx0LHMpe2NvbnN0IHI9W10sbj1lLm1hcCgoKHMscik9PmkoZSxyLHQpKSkucmVkdWNlKCgoZSx0KT0+ZSt0KSk7bGV0IG89MCxhPTAsaD0wO2Zvcig7aDxuOyl7aWYobi1oPHMpe3IucHVzaChuLWgpO2JyZWFrfW8rPXM7Y29uc3QgYz1pKGUsYSx0KTtvPmMmJihvLT1jLGErKyk7Y29uc3QgbD0yPT09ZVthXS5nZXRXaWR0aChvLTEpO2wmJm8tLTtjb25zdCBkPWw/cy0xOnM7ci5wdXNoKGQpLGgrPWR9cmV0dXJuIHJ9LHQuZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoPWl9LDUyOTU6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQnVmZmVyU2V0PXZvaWQgMDtjb25zdCBzPWkoODQ2MCkscj1pKDg0NCksbj1pKDkwOTIpO2NsYXNzIG8gZXh0ZW5kcyByLkRpc3Bvc2FibGV7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWUsdGhpcy5fYnVmZmVyU2VydmljZT10LHRoaXMuX29uQnVmZmVyQWN0aXZhdGU9dGhpcy5yZWdpc3RlcihuZXcgcy5FdmVudEVtaXR0ZXIpLHRoaXMub25CdWZmZXJBY3RpdmF0ZT10aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmV2ZW50LHRoaXMucmVzZXQoKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uU3BlY2lmaWNPcHRpb25DaGFuZ2UoXCJzY3JvbGxiYWNrXCIsKCgpPT50aGlzLnJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uU3BlY2lmaWNPcHRpb25DaGFuZ2UoXCJ0YWJTdG9wV2lkdGhcIiwoKCk9PnRoaXMuc2V0dXBUYWJTdG9wcygpKSkpfXJlc2V0KCl7dGhpcy5fbm9ybWFsPW5ldyBuLkJ1ZmZlcighMCx0aGlzLl9vcHRpb25zU2VydmljZSx0aGlzLl9idWZmZXJTZXJ2aWNlKSx0aGlzLl9ub3JtYWwuZmlsbFZpZXdwb3J0Um93cygpLHRoaXMuX2FsdD1uZXcgbi5CdWZmZXIoITEsdGhpcy5fb3B0aW9uc1NlcnZpY2UsdGhpcy5fYnVmZmVyU2VydmljZSksdGhpcy5fYWN0aXZlQnVmZmVyPXRoaXMuX25vcm1hbCx0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe2FjdGl2ZUJ1ZmZlcjp0aGlzLl9ub3JtYWwsaW5hY3RpdmVCdWZmZXI6dGhpcy5fYWx0fSksdGhpcy5zZXR1cFRhYlN0b3BzKCl9Z2V0IGFsdCgpe3JldHVybiB0aGlzLl9hbHR9Z2V0IGFjdGl2ZSgpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXJ9Z2V0IG5vcm1hbCgpe3JldHVybiB0aGlzLl9ub3JtYWx9YWN0aXZhdGVOb3JtYWxCdWZmZXIoKXt0aGlzLl9hY3RpdmVCdWZmZXIhPT10aGlzLl9ub3JtYWwmJih0aGlzLl9ub3JtYWwueD10aGlzLl9hbHQueCx0aGlzLl9ub3JtYWwueT10aGlzLl9hbHQueSx0aGlzLl9hbHQuY2xlYXJBbGxNYXJrZXJzKCksdGhpcy5fYWx0LmNsZWFyKCksdGhpcy5fYWN0aXZlQnVmZmVyPXRoaXMuX25vcm1hbCx0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe2FjdGl2ZUJ1ZmZlcjp0aGlzLl9ub3JtYWwsaW5hY3RpdmVCdWZmZXI6dGhpcy5fYWx0fSkpfWFjdGl2YXRlQWx0QnVmZmVyKGUpe3RoaXMuX2FjdGl2ZUJ1ZmZlciE9PXRoaXMuX2FsdCYmKHRoaXMuX2FsdC5maWxsVmlld3BvcnRSb3dzKGUpLHRoaXMuX2FsdC54PXRoaXMuX25vcm1hbC54LHRoaXMuX2FsdC55PXRoaXMuX25vcm1hbC55LHRoaXMuX2FjdGl2ZUJ1ZmZlcj10aGlzLl9hbHQsdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHthY3RpdmVCdWZmZXI6dGhpcy5fYWx0LGluYWN0aXZlQnVmZmVyOnRoaXMuX25vcm1hbH0pKX1yZXNpemUoZSx0KXt0aGlzLl9ub3JtYWwucmVzaXplKGUsdCksdGhpcy5fYWx0LnJlc2l6ZShlLHQpLHRoaXMuc2V0dXBUYWJTdG9wcyhlKX1zZXR1cFRhYlN0b3BzKGUpe3RoaXMuX25vcm1hbC5zZXR1cFRhYlN0b3BzKGUpLHRoaXMuX2FsdC5zZXR1cFRhYlN0b3BzKGUpfX10LkJ1ZmZlclNldD1vfSw1MTE6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ2VsbERhdGE9dm9pZCAwO2NvbnN0IHM9aSg0ODIpLHI9aSg2NDMpLG49aSgzNzM0KTtjbGFzcyBvIGV4dGVuZHMgbi5BdHRyaWJ1dGVEYXRhe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmNvbnRlbnQ9MCx0aGlzLmZnPTAsdGhpcy5iZz0wLHRoaXMuZXh0ZW5kZWQ9bmV3IG4uRXh0ZW5kZWRBdHRycyx0aGlzLmNvbWJpbmVkRGF0YT1cIlwifXN0YXRpYyBmcm9tQ2hhckRhdGEoZSl7Y29uc3QgdD1uZXcgbztyZXR1cm4gdC5zZXRGcm9tQ2hhckRhdGEoZSksdH1pc0NvbWJpbmVkKCl7cmV0dXJuIDIwOTcxNTImdGhpcy5jb250ZW50fWdldFdpZHRoKCl7cmV0dXJuIHRoaXMuY29udGVudD4+MjJ9Z2V0Q2hhcnMoKXtyZXR1cm4gMjA5NzE1MiZ0aGlzLmNvbnRlbnQ/dGhpcy5jb21iaW5lZERhdGE6MjA5NzE1MSZ0aGlzLmNvbnRlbnQ/KDAscy5zdHJpbmdGcm9tQ29kZVBvaW50KSgyMDk3MTUxJnRoaXMuY29udGVudCk6XCJcIn1nZXRDb2RlKCl7cmV0dXJuIHRoaXMuaXNDb21iaW5lZCgpP3RoaXMuY29tYmluZWREYXRhLmNoYXJDb2RlQXQodGhpcy5jb21iaW5lZERhdGEubGVuZ3RoLTEpOjIwOTcxNTEmdGhpcy5jb250ZW50fXNldEZyb21DaGFyRGF0YShlKXt0aGlzLmZnPWVbci5DSEFSX0RBVEFfQVRUUl9JTkRFWF0sdGhpcy5iZz0wO2xldCB0PSExO2lmKGVbci5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoPjIpdD0hMDtlbHNlIGlmKDI9PT1lW3IuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aCl7Y29uc3QgaT1lW3IuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCk7aWYoNTUyOTY8PWkmJmk8PTU2MzE5KXtjb25zdCBzPWVbci5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgxKTs1NjMyMDw9cyYmczw9NTczNDM/dGhpcy5jb250ZW50PTEwMjQqKGktNTUyOTYpK3MtNTYzMjArNjU1MzZ8ZVtyLkNIQVJfREFUQV9XSURUSF9JTkRFWF08PDIyOnQ9ITB9ZWxzZSB0PSEwfWVsc2UgdGhpcy5jb250ZW50PWVbci5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKXxlW3IuQ0hBUl9EQVRBX1dJRFRIX0lOREVYXTw8MjI7dCYmKHRoaXMuY29tYmluZWREYXRhPWVbci5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0sdGhpcy5jb250ZW50PTIwOTcxNTJ8ZVtyLkNIQVJfREFUQV9XSURUSF9JTkRFWF08PDIyKX1nZXRBc0NoYXJEYXRhKCl7cmV0dXJuW3RoaXMuZmcsdGhpcy5nZXRDaGFycygpLHRoaXMuZ2V0V2lkdGgoKSx0aGlzLmdldENvZGUoKV19fXQuQ2VsbERhdGE9b30sNjQzOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5XSElURVNQQUNFX0NFTExfQ09ERT10LldISVRFU1BBQ0VfQ0VMTF9XSURUSD10LldISVRFU1BBQ0VfQ0VMTF9DSEFSPXQuTlVMTF9DRUxMX0NPREU9dC5OVUxMX0NFTExfV0lEVEg9dC5OVUxMX0NFTExfQ0hBUj10LkNIQVJfREFUQV9DT0RFX0lOREVYPXQuQ0hBUl9EQVRBX1dJRFRIX0lOREVYPXQuQ0hBUl9EQVRBX0NIQVJfSU5ERVg9dC5DSEFSX0RBVEFfQVRUUl9JTkRFWD10LkRFRkFVTFRfRVhUPXQuREVGQVVMVF9BVFRSPXQuREVGQVVMVF9DT0xPUj12b2lkIDAsdC5ERUZBVUxUX0NPTE9SPTAsdC5ERUZBVUxUX0FUVFI9MjU2fHQuREVGQVVMVF9DT0xPUjw8OSx0LkRFRkFVTFRfRVhUPTAsdC5DSEFSX0RBVEFfQVRUUl9JTkRFWD0wLHQuQ0hBUl9EQVRBX0NIQVJfSU5ERVg9MSx0LkNIQVJfREFUQV9XSURUSF9JTkRFWD0yLHQuQ0hBUl9EQVRBX0NPREVfSU5ERVg9Myx0Lk5VTExfQ0VMTF9DSEFSPVwiXCIsdC5OVUxMX0NFTExfV0lEVEg9MSx0Lk5VTExfQ0VMTF9DT0RFPTAsdC5XSElURVNQQUNFX0NFTExfQ0hBUj1cIiBcIix0LldISVRFU1BBQ0VfQ0VMTF9XSURUSD0xLHQuV0hJVEVTUEFDRV9DRUxMX0NPREU9MzJ9LDQ4NjM6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuTWFya2VyPXZvaWQgMDtjb25zdCBzPWkoODQ2MCkscj1pKDg0NCk7Y2xhc3MgbntnZXQgaWQoKXtyZXR1cm4gdGhpcy5faWR9Y29uc3RydWN0b3IoZSl7dGhpcy5saW5lPWUsdGhpcy5pc0Rpc3Bvc2VkPSExLHRoaXMuX2Rpc3Bvc2FibGVzPVtdLHRoaXMuX2lkPW4uX25leHRJZCsrLHRoaXMuX29uRGlzcG9zZT10aGlzLnJlZ2lzdGVyKG5ldyBzLkV2ZW50RW1pdHRlciksdGhpcy5vbkRpc3Bvc2U9dGhpcy5fb25EaXNwb3NlLmV2ZW50fWRpc3Bvc2UoKXt0aGlzLmlzRGlzcG9zZWR8fCh0aGlzLmlzRGlzcG9zZWQ9ITAsdGhpcy5saW5lPS0xLHRoaXMuX29uRGlzcG9zZS5maXJlKCksKDAsci5kaXNwb3NlQXJyYXkpKHRoaXMuX2Rpc3Bvc2FibGVzKSx0aGlzLl9kaXNwb3NhYmxlcy5sZW5ndGg9MCl9cmVnaXN0ZXIoZSl7cmV0dXJuIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZSksZX19dC5NYXJrZXI9bixuLl9uZXh0SWQ9MX0sNzExNjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuREVGQVVMVF9DSEFSU0VUPXQuQ0hBUlNFVFM9dm9pZCAwLHQuQ0hBUlNFVFM9e30sdC5ERUZBVUxUX0NIQVJTRVQ9dC5DSEFSU0VUUy5CLHQuQ0hBUlNFVFNbMF09e1wiYFwiOlwi4peGXCIsYTpcIuKWklwiLGI6XCLikIlcIixjOlwi4pCMXCIsZDpcIuKQjVwiLGU6XCLikIpcIixmOlwiwrBcIixnOlwiwrFcIixoOlwi4pCkXCIsaTpcIuKQi1wiLGo6XCLilJhcIixrOlwi4pSQXCIsbDpcIuKUjFwiLG06XCLilJRcIixuOlwi4pS8XCIsbzpcIuKOulwiLHA6XCLijrtcIixxOlwi4pSAXCIscjpcIuKOvFwiLHM6XCLijr1cIix0Olwi4pScXCIsdTpcIuKUpFwiLHY6XCLilLRcIix3Olwi4pSsXCIseDpcIuKUglwiLHk6XCLiiaRcIix6Olwi4omlXCIsXCJ7XCI6XCLPgFwiLFwifFwiOlwi4omgXCIsXCJ9XCI6XCLCo1wiLFwiflwiOlwiwrdcIn0sdC5DSEFSU0VUUy5BPXtcIiNcIjpcIsKjXCJ9LHQuQ0hBUlNFVFMuQj12b2lkIDAsdC5DSEFSU0VUU1s0XT17XCIjXCI6XCLCo1wiLFwiQFwiOlwiwr5cIixcIltcIjpcImlqXCIsXCJcXFxcXCI6XCLCvVwiLFwiXVwiOlwifFwiLFwie1wiOlwiwqhcIixcInxcIjpcImZcIixcIn1cIjpcIsK8XCIsXCJ+XCI6XCLCtFwifSx0LkNIQVJTRVRTLkM9dC5DSEFSU0VUU1s1XT17XCJbXCI6XCLDhFwiLFwiXFxcXFwiOlwiw5ZcIixcIl1cIjpcIsOFXCIsXCJeXCI6XCLDnFwiLFwiYFwiOlwiw6lcIixcIntcIjpcIsOkXCIsXCJ8XCI6XCLDtlwiLFwifVwiOlwiw6VcIixcIn5cIjpcIsO8XCJ9LHQuQ0hBUlNFVFMuUj17XCIjXCI6XCLCo1wiLFwiQFwiOlwiw6BcIixcIltcIjpcIsKwXCIsXCJcXFxcXCI6XCLDp1wiLFwiXVwiOlwiwqdcIixcIntcIjpcIsOpXCIsXCJ8XCI6XCLDuVwiLFwifVwiOlwiw6hcIixcIn5cIjpcIsKoXCJ9LHQuQ0hBUlNFVFMuUT17XCJAXCI6XCLDoFwiLFwiW1wiOlwiw6JcIixcIlxcXFxcIjpcIsOnXCIsXCJdXCI6XCLDqlwiLFwiXlwiOlwiw65cIixcImBcIjpcIsO0XCIsXCJ7XCI6XCLDqVwiLFwifFwiOlwiw7lcIixcIn1cIjpcIsOoXCIsXCJ+XCI6XCLDu1wifSx0LkNIQVJTRVRTLks9e1wiQFwiOlwiwqdcIixcIltcIjpcIsOEXCIsXCJcXFxcXCI6XCLDllwiLFwiXVwiOlwiw5xcIixcIntcIjpcIsOkXCIsXCJ8XCI6XCLDtlwiLFwifVwiOlwiw7xcIixcIn5cIjpcIsOfXCJ9LHQuQ0hBUlNFVFMuWT17XCIjXCI6XCLCo1wiLFwiQFwiOlwiwqdcIixcIltcIjpcIsKwXCIsXCJcXFxcXCI6XCLDp1wiLFwiXVwiOlwiw6lcIixcImBcIjpcIsO5XCIsXCJ7XCI6XCLDoFwiLFwifFwiOlwiw7JcIixcIn1cIjpcIsOoXCIsXCJ+XCI6XCLDrFwifSx0LkNIQVJTRVRTLkU9dC5DSEFSU0VUU1s2XT17XCJAXCI6XCLDhFwiLFwiW1wiOlwiw4ZcIixcIlxcXFxcIjpcIsOYXCIsXCJdXCI6XCLDhVwiLFwiXlwiOlwiw5xcIixcImBcIjpcIsOkXCIsXCJ7XCI6XCLDplwiLFwifFwiOlwiw7hcIixcIn1cIjpcIsOlXCIsXCJ+XCI6XCLDvFwifSx0LkNIQVJTRVRTLlo9e1wiI1wiOlwiwqNcIixcIkBcIjpcIsKnXCIsXCJbXCI6XCLCoVwiLFwiXFxcXFwiOlwiw5FcIixcIl1cIjpcIsK/XCIsXCJ7XCI6XCLCsFwiLFwifFwiOlwiw7FcIixcIn1cIjpcIsOnXCJ9LHQuQ0hBUlNFVFMuSD10LkNIQVJTRVRTWzddPXtcIkBcIjpcIsOJXCIsXCJbXCI6XCLDhFwiLFwiXFxcXFwiOlwiw5ZcIixcIl1cIjpcIsOFXCIsXCJeXCI6XCLDnFwiLFwiYFwiOlwiw6lcIixcIntcIjpcIsOkXCIsXCJ8XCI6XCLDtlwiLFwifVwiOlwiw6VcIixcIn5cIjpcIsO8XCJ9LHQuQ0hBUlNFVFNbXCI9XCJdPXtcIiNcIjpcIsO5XCIsXCJAXCI6XCLDoFwiLFwiW1wiOlwiw6lcIixcIlxcXFxcIjpcIsOnXCIsXCJdXCI6XCLDqlwiLFwiXlwiOlwiw65cIixfOlwiw6hcIixcImBcIjpcIsO0XCIsXCJ7XCI6XCLDpFwiLFwifFwiOlwiw7ZcIixcIn1cIjpcIsO8XCIsXCJ+XCI6XCLDu1wifX0sMjU4NDooZSx0KT0+e3ZhciBpLHMscjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkMxX0VTQ0FQRUQ9dC5DMT10LkMwPXZvaWQgMCxmdW5jdGlvbihlKXtlLk5VTD1cIlxcMFwiLGUuU09IPVwiXHUwMDAxXCIsZS5TVFg9XCJcdTAwMDJcIixlLkVUWD1cIlx1MDAwM1wiLGUuRU9UPVwiXHUwMDA0XCIsZS5FTlE9XCJcdTAwMDVcIixlLkFDSz1cIlx1MDAwNlwiLGUuQkVMPVwiXHUwMDA3XCIsZS5CUz1cIlxcYlwiLGUuSFQ9XCJcXHRcIixlLkxGPVwiXFxuXCIsZS5WVD1cIlxcdlwiLGUuRkY9XCJcXGZcIixlLkNSPVwiXFxyXCIsZS5TTz1cIlx1MDAwZVwiLGUuU0k9XCJcdTAwMGZcIixlLkRMRT1cIlx1MDAxMFwiLGUuREMxPVwiXHUwMDExXCIsZS5EQzI9XCJcdTAwMTJcIixlLkRDMz1cIlx1MDAxM1wiLGUuREM0PVwiXHUwMDE0XCIsZS5OQUs9XCJcdTAwMTVcIixlLlNZTj1cIlx1MDAxNlwiLGUuRVRCPVwiXHUwMDE3XCIsZS5DQU49XCJcdTAwMThcIixlLkVNPVwiXHUwMDE5XCIsZS5TVUI9XCJcdTAwMWFcIixlLkVTQz1cIlx1MDAxYlwiLGUuRlM9XCJcdTAwMWNcIixlLkdTPVwiXHUwMDFkXCIsZS5SUz1cIlx1MDAxZVwiLGUuVVM9XCJcdTAwMWZcIixlLlNQPVwiIFwiLGUuREVMPVwif1wifShpfHwodC5DMD1pPXt9KSksZnVuY3Rpb24oZSl7ZS5QQUQ9XCLCgFwiLGUuSE9QPVwiwoFcIixlLkJQSD1cIsKCXCIsZS5OQkg9XCLCg1wiLGUuSU5EPVwiwoRcIixlLk5FTD1cIsKFXCIsZS5TU0E9XCLChlwiLGUuRVNBPVwiwodcIixlLkhUUz1cIsKIXCIsZS5IVEo9XCLCiVwiLGUuVlRTPVwiwopcIixlLlBMRD1cIsKLXCIsZS5QTFU9XCLCjFwiLGUuUkk9XCLCjVwiLGUuU1MyPVwiwo5cIixlLlNTMz1cIsKPXCIsZS5EQ1M9XCLCkFwiLGUuUFUxPVwiwpFcIixlLlBVMj1cIsKSXCIsZS5TVFM9XCLCk1wiLGUuQ0NIPVwiwpRcIixlLk1XPVwiwpVcIixlLlNQQT1cIsKWXCIsZS5FUEE9XCLCl1wiLGUuU09TPVwiwphcIixlLlNHQ0k9XCLCmVwiLGUuU0NJPVwiwppcIixlLkNTST1cIsKbXCIsZS5TVD1cIsKcXCIsZS5PU0M9XCLCnVwiLGUuUE09XCLCnlwiLGUuQVBDPVwiwp9cIn0oc3x8KHQuQzE9cz17fSkpLGZ1bmN0aW9uKGUpe2UuU1Q9YCR7aS5FU0N9XFxcXGB9KHJ8fCh0LkMxX0VTQ0FQRUQ9cj17fSkpfSw3Mzk5OihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmV2YWx1YXRlS2V5Ym9hcmRFdmVudD12b2lkIDA7Y29uc3Qgcz1pKDI1ODQpLHI9ezQ4OltcIjBcIixcIilcIl0sNDk6W1wiMVwiLFwiIVwiXSw1MDpbXCIyXCIsXCJAXCJdLDUxOltcIjNcIixcIiNcIl0sNTI6W1wiNFwiLFwiJFwiXSw1MzpbXCI1XCIsXCIlXCJdLDU0OltcIjZcIixcIl5cIl0sNTU6W1wiN1wiLFwiJlwiXSw1NjpbXCI4XCIsXCIqXCJdLDU3OltcIjlcIixcIihcIl0sMTg2OltcIjtcIixcIjpcIl0sMTg3OltcIj1cIixcIitcIl0sMTg4OltcIixcIixcIjxcIl0sMTg5OltcIi1cIixcIl9cIl0sMTkwOltcIi5cIixcIj5cIl0sMTkxOltcIi9cIixcIj9cIl0sMTkyOltcImBcIixcIn5cIl0sMjE5OltcIltcIixcIntcIl0sMjIwOltcIlxcXFxcIixcInxcIl0sMjIxOltcIl1cIixcIn1cIl0sMjIyOltcIidcIiwnXCInXX07dC5ldmFsdWF0ZUtleWJvYXJkRXZlbnQ9ZnVuY3Rpb24oZSx0LGksbil7Y29uc3Qgbz17dHlwZTowLGNhbmNlbDohMSxrZXk6dm9pZCAwfSxhPShlLnNoaWZ0S2V5PzE6MCl8KGUuYWx0S2V5PzI6MCl8KGUuY3RybEtleT80OjApfChlLm1ldGFLZXk/ODowKTtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDA6XCJVSUtleUlucHV0VXBBcnJvd1wiPT09ZS5rZXk/by5rZXk9dD9zLkMwLkVTQytcIk9BXCI6cy5DMC5FU0MrXCJbQVwiOlwiVUlLZXlJbnB1dExlZnRBcnJvd1wiPT09ZS5rZXk/by5rZXk9dD9zLkMwLkVTQytcIk9EXCI6cy5DMC5FU0MrXCJbRFwiOlwiVUlLZXlJbnB1dFJpZ2h0QXJyb3dcIj09PWUua2V5P28ua2V5PXQ/cy5DMC5FU0MrXCJPQ1wiOnMuQzAuRVNDK1wiW0NcIjpcIlVJS2V5SW5wdXREb3duQXJyb3dcIj09PWUua2V5JiYoby5rZXk9dD9zLkMwLkVTQytcIk9CXCI6cy5DMC5FU0MrXCJbQlwiKTticmVhaztjYXNlIDg6by5rZXk9ZS5jdHJsS2V5P1wiXFxiXCI6cy5DMC5ERUwsZS5hbHRLZXkmJihvLmtleT1zLkMwLkVTQytvLmtleSk7YnJlYWs7Y2FzZSA5OmlmKGUuc2hpZnRLZXkpe28ua2V5PXMuQzAuRVNDK1wiW1pcIjticmVha31vLmtleT1zLkMwLkhULG8uY2FuY2VsPSEwO2JyZWFrO2Nhc2UgMTM6by5rZXk9ZS5hbHRLZXk/cy5DMC5FU0Mrcy5DMC5DUjpzLkMwLkNSLG8uY2FuY2VsPSEwO2JyZWFrO2Nhc2UgMjc6by5rZXk9cy5DMC5FU0MsZS5hbHRLZXkmJihvLmtleT1zLkMwLkVTQytzLkMwLkVTQyksby5jYW5jZWw9ITA7YnJlYWs7Y2FzZSAzNzppZihlLm1ldGFLZXkpYnJlYWs7YT8oby5rZXk9cy5DMC5FU0MrXCJbMTtcIisoYSsxKStcIkRcIixvLmtleT09PXMuQzAuRVNDK1wiWzE7M0RcIiYmKG8ua2V5PXMuQzAuRVNDKyhpP1wiYlwiOlwiWzE7NURcIikpKTpvLmtleT10P3MuQzAuRVNDK1wiT0RcIjpzLkMwLkVTQytcIltEXCI7YnJlYWs7Y2FzZSAzOTppZihlLm1ldGFLZXkpYnJlYWs7YT8oby5rZXk9cy5DMC5FU0MrXCJbMTtcIisoYSsxKStcIkNcIixvLmtleT09PXMuQzAuRVNDK1wiWzE7M0NcIiYmKG8ua2V5PXMuQzAuRVNDKyhpP1wiZlwiOlwiWzE7NUNcIikpKTpvLmtleT10P3MuQzAuRVNDK1wiT0NcIjpzLkMwLkVTQytcIltDXCI7YnJlYWs7Y2FzZSAzODppZihlLm1ldGFLZXkpYnJlYWs7YT8oby5rZXk9cy5DMC5FU0MrXCJbMTtcIisoYSsxKStcIkFcIixpfHxvLmtleSE9PXMuQzAuRVNDK1wiWzE7M0FcInx8KG8ua2V5PXMuQzAuRVNDK1wiWzE7NUFcIikpOm8ua2V5PXQ/cy5DMC5FU0MrXCJPQVwiOnMuQzAuRVNDK1wiW0FcIjticmVhaztjYXNlIDQwOmlmKGUubWV0YUtleSlicmVhazthPyhvLmtleT1zLkMwLkVTQytcIlsxO1wiKyhhKzEpK1wiQlwiLGl8fG8ua2V5IT09cy5DMC5FU0MrXCJbMTszQlwifHwoby5rZXk9cy5DMC5FU0MrXCJbMTs1QlwiKSk6by5rZXk9dD9zLkMwLkVTQytcIk9CXCI6cy5DMC5FU0MrXCJbQlwiO2JyZWFrO2Nhc2UgNDU6ZS5zaGlmdEtleXx8ZS5jdHJsS2V5fHwoby5rZXk9cy5DMC5FU0MrXCJbMn5cIik7YnJlYWs7Y2FzZSA0NjpvLmtleT1hP3MuQzAuRVNDK1wiWzM7XCIrKGErMSkrXCJ+XCI6cy5DMC5FU0MrXCJbM35cIjticmVhaztjYXNlIDM2Om8ua2V5PWE/cy5DMC5FU0MrXCJbMTtcIisoYSsxKStcIkhcIjp0P3MuQzAuRVNDK1wiT0hcIjpzLkMwLkVTQytcIltIXCI7YnJlYWs7Y2FzZSAzNTpvLmtleT1hP3MuQzAuRVNDK1wiWzE7XCIrKGErMSkrXCJGXCI6dD9zLkMwLkVTQytcIk9GXCI6cy5DMC5FU0MrXCJbRlwiO2JyZWFrO2Nhc2UgMzM6ZS5zaGlmdEtleT9vLnR5cGU9MjplLmN0cmxLZXk/by5rZXk9cy5DMC5FU0MrXCJbNTtcIisoYSsxKStcIn5cIjpvLmtleT1zLkMwLkVTQytcIls1flwiO2JyZWFrO2Nhc2UgMzQ6ZS5zaGlmdEtleT9vLnR5cGU9MzplLmN0cmxLZXk/by5rZXk9cy5DMC5FU0MrXCJbNjtcIisoYSsxKStcIn5cIjpvLmtleT1zLkMwLkVTQytcIls2flwiO2JyZWFrO2Nhc2UgMTEyOm8ua2V5PWE/cy5DMC5FU0MrXCJbMTtcIisoYSsxKStcIlBcIjpzLkMwLkVTQytcIk9QXCI7YnJlYWs7Y2FzZSAxMTM6by5rZXk9YT9zLkMwLkVTQytcIlsxO1wiKyhhKzEpK1wiUVwiOnMuQzAuRVNDK1wiT1FcIjticmVhaztjYXNlIDExNDpvLmtleT1hP3MuQzAuRVNDK1wiWzE7XCIrKGErMSkrXCJSXCI6cy5DMC5FU0MrXCJPUlwiO2JyZWFrO2Nhc2UgMTE1Om8ua2V5PWE/cy5DMC5FU0MrXCJbMTtcIisoYSsxKStcIlNcIjpzLkMwLkVTQytcIk9TXCI7YnJlYWs7Y2FzZSAxMTY6by5rZXk9YT9zLkMwLkVTQytcIlsxNTtcIisoYSsxKStcIn5cIjpzLkMwLkVTQytcIlsxNX5cIjticmVhaztjYXNlIDExNzpvLmtleT1hP3MuQzAuRVNDK1wiWzE3O1wiKyhhKzEpK1wiflwiOnMuQzAuRVNDK1wiWzE3flwiO2JyZWFrO2Nhc2UgMTE4Om8ua2V5PWE/cy5DMC5FU0MrXCJbMTg7XCIrKGErMSkrXCJ+XCI6cy5DMC5FU0MrXCJbMTh+XCI7YnJlYWs7Y2FzZSAxMTk6by5rZXk9YT9zLkMwLkVTQytcIlsxOTtcIisoYSsxKStcIn5cIjpzLkMwLkVTQytcIlsxOX5cIjticmVhaztjYXNlIDEyMDpvLmtleT1hP3MuQzAuRVNDK1wiWzIwO1wiKyhhKzEpK1wiflwiOnMuQzAuRVNDK1wiWzIwflwiO2JyZWFrO2Nhc2UgMTIxOm8ua2V5PWE/cy5DMC5FU0MrXCJbMjE7XCIrKGErMSkrXCJ+XCI6cy5DMC5FU0MrXCJbMjF+XCI7YnJlYWs7Y2FzZSAxMjI6by5rZXk9YT9zLkMwLkVTQytcIlsyMztcIisoYSsxKStcIn5cIjpzLkMwLkVTQytcIlsyM35cIjticmVhaztjYXNlIDEyMzpvLmtleT1hP3MuQzAuRVNDK1wiWzI0O1wiKyhhKzEpK1wiflwiOnMuQzAuRVNDK1wiWzI0flwiO2JyZWFrO2RlZmF1bHQ6aWYoIWUuY3RybEtleXx8ZS5zaGlmdEtleXx8ZS5hbHRLZXl8fGUubWV0YUtleSlpZihpJiYhbnx8IWUuYWx0S2V5fHxlLm1ldGFLZXkpIWl8fGUuYWx0S2V5fHxlLmN0cmxLZXl8fGUuc2hpZnRLZXl8fCFlLm1ldGFLZXk/ZS5rZXkmJiFlLmN0cmxLZXkmJiFlLmFsdEtleSYmIWUubWV0YUtleSYmZS5rZXlDb2RlPj00OCYmMT09PWUua2V5Lmxlbmd0aD9vLmtleT1lLmtleTplLmtleSYmZS5jdHJsS2V5JiYoXCJfXCI9PT1lLmtleSYmKG8ua2V5PXMuQzAuVVMpLFwiQFwiPT09ZS5rZXkmJihvLmtleT1zLkMwLk5VTCkpOjY1PT09ZS5rZXlDb2RlJiYoby50eXBlPTEpO2Vsc2V7Y29uc3QgdD1yW2Uua2V5Q29kZV0saT10Py5bZS5zaGlmdEtleT8xOjBdO2lmKGkpby5rZXk9cy5DMC5FU0MraTtlbHNlIGlmKGUua2V5Q29kZT49NjUmJmUua2V5Q29kZTw9OTApe2NvbnN0IHQ9ZS5jdHJsS2V5P2Uua2V5Q29kZS02NDplLmtleUNvZGUrMzI7bGV0IGk9U3RyaW5nLmZyb21DaGFyQ29kZSh0KTtlLnNoaWZ0S2V5JiYoaT1pLnRvVXBwZXJDYXNlKCkpLG8ua2V5PXMuQzAuRVNDK2l9ZWxzZSBpZigzMj09PWUua2V5Q29kZSlvLmtleT1zLkMwLkVTQysoZS5jdHJsS2V5P3MuQzAuTlVMOlwiIFwiKTtlbHNlIGlmKFwiRGVhZFwiPT09ZS5rZXkmJmUuY29kZS5zdGFydHNXaXRoKFwiS2V5XCIpKXtsZXQgdD1lLmNvZGUuc2xpY2UoMyw0KTtlLnNoaWZ0S2V5fHwodD10LnRvTG93ZXJDYXNlKCkpLG8ua2V5PXMuQzAuRVNDK3Qsby5jYW5jZWw9ITB9fWVsc2UgZS5rZXlDb2RlPj02NSYmZS5rZXlDb2RlPD05MD9vLmtleT1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZS02NCk6MzI9PT1lLmtleUNvZGU/by5rZXk9cy5DMC5OVUw6ZS5rZXlDb2RlPj01MSYmZS5rZXlDb2RlPD01NT9vLmtleT1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZS01MSsyNyk6NTY9PT1lLmtleUNvZGU/by5rZXk9cy5DMC5ERUw6MjE5PT09ZS5rZXlDb2RlP28ua2V5PXMuQzAuRVNDOjIyMD09PWUua2V5Q29kZT9vLmtleT1zLkMwLkZTOjIyMT09PWUua2V5Q29kZSYmKG8ua2V5PXMuQzAuR1MpfXJldHVybiBvfX0sNDgyOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5VdGY4VG9VdGYzMj10LlN0cmluZ1RvVXRmMzI9dC51dGYzMlRvU3RyaW5nPXQuc3RyaW5nRnJvbUNvZGVQb2ludD12b2lkIDAsdC5zdHJpbmdGcm9tQ29kZVBvaW50PWZ1bmN0aW9uKGUpe3JldHVybiBlPjY1NTM1PyhlLT02NTUzNixTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhlPj4xMCkpK1N0cmluZy5mcm9tQ2hhckNvZGUoZSUxMDI0KzU2MzIwKSk6U3RyaW5nLmZyb21DaGFyQ29kZShlKX0sdC51dGYzMlRvU3RyaW5nPWZ1bmN0aW9uKGUsdD0wLGk9ZS5sZW5ndGgpe2xldCBzPVwiXCI7Zm9yKGxldCByPXQ7cjxpOysrcil7bGV0IHQ9ZVtyXTt0PjY1NTM1Pyh0LT02NTUzNixzKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2Kyh0Pj4xMCkpK1N0cmluZy5mcm9tQ2hhckNvZGUodCUxMDI0KzU2MzIwKSk6cys9U3RyaW5nLmZyb21DaGFyQ29kZSh0KX1yZXR1cm4gc30sdC5TdHJpbmdUb1V0ZjMyPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5faW50ZXJpbT0wfWNsZWFyKCl7dGhpcy5faW50ZXJpbT0wfWRlY29kZShlLHQpe2NvbnN0IGk9ZS5sZW5ndGg7aWYoIWkpcmV0dXJuIDA7bGV0IHM9MCxyPTA7aWYodGhpcy5faW50ZXJpbSl7Y29uc3QgaT1lLmNoYXJDb2RlQXQocisrKTs1NjMyMDw9aSYmaTw9NTczNDM/dFtzKytdPTEwMjQqKHRoaXMuX2ludGVyaW0tNTUyOTYpK2ktNTYzMjArNjU1MzY6KHRbcysrXT10aGlzLl9pbnRlcmltLHRbcysrXT1pKSx0aGlzLl9pbnRlcmltPTB9Zm9yKGxldCBuPXI7bjxpOysrbil7Y29uc3Qgcj1lLmNoYXJDb2RlQXQobik7aWYoNTUyOTY8PXImJnI8PTU2MzE5KXtpZigrK24+PWkpcmV0dXJuIHRoaXMuX2ludGVyaW09cixzO2NvbnN0IG89ZS5jaGFyQ29kZUF0KG4pOzU2MzIwPD1vJiZvPD01NzM0Mz90W3MrK109MTAyNCooci01NTI5Nikrby01NjMyMCs2NTUzNjoodFtzKytdPXIsdFtzKytdPW8pfWVsc2UgNjUyNzkhPT1yJiYodFtzKytdPXIpfXJldHVybiBzfX0sdC5VdGY4VG9VdGYzMj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuaW50ZXJpbT1uZXcgVWludDhBcnJheSgzKX1jbGVhcigpe3RoaXMuaW50ZXJpbS5maWxsKDApfWRlY29kZShlLHQpe2NvbnN0IGk9ZS5sZW5ndGg7aWYoIWkpcmV0dXJuIDA7bGV0IHMscixuLG8sYT0wLGg9MCxjPTA7aWYodGhpcy5pbnRlcmltWzBdKXtsZXQgcz0hMSxyPXRoaXMuaW50ZXJpbVswXTtyJj0xOTI9PSgyMjQmcik/MzE6MjI0PT0oMjQwJnIpPzE1Ojc7bGV0IG4sbz0wO2Zvcig7KG49NjMmdGhpcy5pbnRlcmltWysrb10pJiZvPDQ7KXI8PD02LHJ8PW47Y29uc3QgaD0xOTI9PSgyMjQmdGhpcy5pbnRlcmltWzBdKT8yOjIyND09KDI0MCZ0aGlzLmludGVyaW1bMF0pPzM6NCxsPWgtbztmb3IoO2M8bDspe2lmKGM+PWkpcmV0dXJuIDA7aWYobj1lW2MrK10sMTI4IT0oMTkyJm4pKXtjLS0scz0hMDticmVha310aGlzLmludGVyaW1bbysrXT1uLHI8PD02LHJ8PTYzJm59c3x8KDI9PT1oP3I8MTI4P2MtLTp0W2ErK109cjozPT09aD9yPDIwNDh8fHI+PTU1Mjk2JiZyPD01NzM0M3x8NjUyNzk9PT1yfHwodFthKytdPXIpOnI8NjU1MzZ8fHI+MTExNDExMXx8KHRbYSsrXT1yKSksdGhpcy5pbnRlcmltLmZpbGwoMCl9Y29uc3QgbD1pLTQ7bGV0IGQ9Yztmb3IoO2Q8aTspe2Zvcig7ISghKGQ8bCl8fDEyOCYocz1lW2RdKXx8MTI4JihyPWVbZCsxXSl8fDEyOCYobj1lW2QrMl0pfHwxMjgmKG89ZVtkKzNdKSk7KXRbYSsrXT1zLHRbYSsrXT1yLHRbYSsrXT1uLHRbYSsrXT1vLGQrPTQ7aWYocz1lW2QrK10sczwxMjgpdFthKytdPXM7ZWxzZSBpZigxOTI9PSgyMjQmcykpe2lmKGQ+PWkpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1zLGE7aWYocj1lW2QrK10sMTI4IT0oMTkyJnIpKXtkLS07Y29udGludWV9aWYoaD0oMzEmcyk8PDZ8NjMmcixoPDEyOCl7ZC0tO2NvbnRpbnVlfXRbYSsrXT1ofWVsc2UgaWYoMjI0PT0oMjQwJnMpKXtpZihkPj1pKXJldHVybiB0aGlzLmludGVyaW1bMF09cyxhO2lmKHI9ZVtkKytdLDEyOCE9KDE5MiZyKSl7ZC0tO2NvbnRpbnVlfWlmKGQ+PWkpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1zLHRoaXMuaW50ZXJpbVsxXT1yLGE7aWYobj1lW2QrK10sMTI4IT0oMTkyJm4pKXtkLS07Y29udGludWV9aWYoaD0oMTUmcyk8PDEyfCg2MyZyKTw8Nnw2MyZuLGg8MjA0OHx8aD49NTUyOTYmJmg8PTU3MzQzfHw2NTI3OT09PWgpY29udGludWU7dFthKytdPWh9ZWxzZSBpZigyNDA9PSgyNDgmcykpe2lmKGQ+PWkpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1zLGE7aWYocj1lW2QrK10sMTI4IT0oMTkyJnIpKXtkLS07Y29udGludWV9aWYoZD49aSlyZXR1cm4gdGhpcy5pbnRlcmltWzBdPXMsdGhpcy5pbnRlcmltWzFdPXIsYTtpZihuPWVbZCsrXSwxMjghPSgxOTImbikpe2QtLTtjb250aW51ZX1pZihkPj1pKXJldHVybiB0aGlzLmludGVyaW1bMF09cyx0aGlzLmludGVyaW1bMV09cix0aGlzLmludGVyaW1bMl09bixhO2lmKG89ZVtkKytdLDEyOCE9KDE5MiZvKSl7ZC0tO2NvbnRpbnVlfWlmKGg9KDcmcyk8PDE4fCg2MyZyKTw8MTJ8KDYzJm4pPDw2fDYzJm8saDw2NTUzNnx8aD4xMTE0MTExKWNvbnRpbnVlO3RbYSsrXT1ofX1yZXR1cm4gYX19fSwyMjU6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuVW5pY29kZVY2PXZvaWQgMDtjb25zdCBzPWkoMTQ4MCkscj1bWzc2OCw4NzldLFsxMTU1LDExNThdLFsxMTYwLDExNjFdLFsxNDI1LDE0NjldLFsxNDcxLDE0NzFdLFsxNDczLDE0NzRdLFsxNDc2LDE0NzddLFsxNDc5LDE0NzldLFsxNTM2LDE1MzldLFsxNTUyLDE1NTddLFsxNjExLDE2MzBdLFsxNjQ4LDE2NDhdLFsxNzUwLDE3NjRdLFsxNzY3LDE3NjhdLFsxNzcwLDE3NzNdLFsxODA3LDE4MDddLFsxODA5LDE4MDldLFsxODQwLDE4NjZdLFsxOTU4LDE5NjhdLFsyMDI3LDIwMzVdLFsyMzA1LDIzMDZdLFsyMzY0LDIzNjRdLFsyMzY5LDIzNzZdLFsyMzgxLDIzODFdLFsyMzg1LDIzODhdLFsyNDAyLDI0MDNdLFsyNDMzLDI0MzNdLFsyNDkyLDI0OTJdLFsyNDk3LDI1MDBdLFsyNTA5LDI1MDldLFsyNTMwLDI1MzFdLFsyNTYxLDI1NjJdLFsyNjIwLDI2MjBdLFsyNjI1LDI2MjZdLFsyNjMxLDI2MzJdLFsyNjM1LDI2MzddLFsyNjcyLDI2NzNdLFsyNjg5LDI2OTBdLFsyNzQ4LDI3NDhdLFsyNzUzLDI3NTddLFsyNzU5LDI3NjBdLFsyNzY1LDI3NjVdLFsyNzg2LDI3ODddLFsyODE3LDI4MTddLFsyODc2LDI4NzZdLFsyODc5LDI4NzldLFsyODgxLDI4ODNdLFsyODkzLDI4OTNdLFsyOTAyLDI5MDJdLFsyOTQ2LDI5NDZdLFszMDA4LDMwMDhdLFszMDIxLDMwMjFdLFszMTM0LDMxMzZdLFszMTQyLDMxNDRdLFszMTQ2LDMxNDldLFszMTU3LDMxNThdLFszMjYwLDMyNjBdLFszMjYzLDMyNjNdLFszMjcwLDMyNzBdLFszMjc2LDMyNzddLFszMjk4LDMyOTldLFszMzkzLDMzOTVdLFszNDA1LDM0MDVdLFszNTMwLDM1MzBdLFszNTM4LDM1NDBdLFszNTQyLDM1NDJdLFszNjMzLDM2MzNdLFszNjM2LDM2NDJdLFszNjU1LDM2NjJdLFszNzYxLDM3NjFdLFszNzY0LDM3NjldLFszNzcxLDM3NzJdLFszNzg0LDM3ODldLFszODY0LDM4NjVdLFszODkzLDM4OTNdLFszODk1LDM4OTVdLFszODk3LDM4OTddLFszOTUzLDM5NjZdLFszOTY4LDM5NzJdLFszOTc0LDM5NzVdLFszOTg0LDM5OTFdLFszOTkzLDQwMjhdLFs0MDM4LDQwMzhdLFs0MTQxLDQxNDRdLFs0MTQ2LDQxNDZdLFs0MTUwLDQxNTFdLFs0MTUzLDQxNTNdLFs0MTg0LDQxODVdLFs0NDQ4LDQ2MDddLFs0OTU5LDQ5NTldLFs1OTA2LDU5MDhdLFs1OTM4LDU5NDBdLFs1OTcwLDU5NzFdLFs2MDAyLDYwMDNdLFs2MDY4LDYwNjldLFs2MDcxLDYwNzddLFs2MDg2LDYwODZdLFs2MDg5LDYwOTldLFs2MTA5LDYxMDldLFs2MTU1LDYxNTddLFs2MzEzLDYzMTNdLFs2NDMyLDY0MzRdLFs2NDM5LDY0NDBdLFs2NDUwLDY0NTBdLFs2NDU3LDY0NTldLFs2Njc5LDY2ODBdLFs2OTEyLDY5MTVdLFs2OTY0LDY5NjRdLFs2OTY2LDY5NzBdLFs2OTcyLDY5NzJdLFs2OTc4LDY5NzhdLFs3MDE5LDcwMjddLFs3NjE2LDc2MjZdLFs3Njc4LDc2NzldLFs4MjAzLDgyMDddLFs4MjM0LDgyMzhdLFs4Mjg4LDgyOTFdLFs4Mjk4LDgzMDNdLFs4NDAwLDg0MzFdLFsxMjMzMCwxMjMzNV0sWzEyNDQxLDEyNDQyXSxbNDMwMTQsNDMwMTRdLFs0MzAxOSw0MzAxOV0sWzQzMDQ1LDQzMDQ2XSxbNjQyODYsNjQyODZdLFs2NTAyNCw2NTAzOV0sWzY1MDU2LDY1MDU5XSxbNjUyNzksNjUyNzldLFs2NTUyOSw2NTUzMV1dLG49W1s2ODA5Nyw2ODA5OV0sWzY4MTAxLDY4MTAyXSxbNjgxMDgsNjgxMTFdLFs2ODE1Miw2ODE1NF0sWzY4MTU5LDY4MTU5XSxbMTE5MTQzLDExOTE0NV0sWzExOTE1NSwxMTkxNzBdLFsxMTkxNzMsMTE5MTc5XSxbMTE5MjEwLDExOTIxM10sWzExOTM2MiwxMTkzNjRdLFs5MTc1MDUsOTE3NTA1XSxbOTE3NTM2LDkxNzYzMV0sWzkxNzc2MCw5MTc5OTldXTtsZXQgbzt0LlVuaWNvZGVWNj1jbGFzc3tjb25zdHJ1Y3Rvcigpe2lmKHRoaXMudmVyc2lvbj1cIjZcIiwhbyl7bz1uZXcgVWludDhBcnJheSg2NTUzNiksby5maWxsKDEpLG9bMF09MCxvLmZpbGwoMCwxLDMyKSxvLmZpbGwoMCwxMjcsMTYwKSxvLmZpbGwoMiw0MzUyLDQ0NDgpLG9bOTAwMV09MixvWzkwMDJdPTIsby5maWxsKDIsMTE5MDQsNDIxOTIpLG9bMTIzNTFdPTEsby5maWxsKDIsNDQwMzIsNTUyMDQpLG8uZmlsbCgyLDYzNzQ0LDY0MjU2KSxvLmZpbGwoMiw2NTA0MCw2NTA1MCksby5maWxsKDIsNjUwNzIsNjUxMzYpLG8uZmlsbCgyLDY1MjgwLDY1Mzc3KSxvLmZpbGwoMiw2NTUwNCw2NTUxMSk7Zm9yKGxldCBlPTA7ZTxyLmxlbmd0aDsrK2Upby5maWxsKDAscltlXVswXSxyW2VdWzFdKzEpfX13Y3dpZHRoKGUpe3JldHVybiBlPDMyPzA6ZTwxMjc/MTplPDY1NTM2P29bZV06ZnVuY3Rpb24oZSx0KXtsZXQgaSxzPTAscj10Lmxlbmd0aC0xO2lmKGU8dFswXVswXXx8ZT50W3JdWzFdKXJldHVybiExO2Zvcig7cj49czspaWYoaT1zK3I+PjEsZT50W2ldWzFdKXM9aSsxO2Vsc2V7aWYoIShlPHRbaV1bMF0pKXJldHVybiEwO3I9aS0xfXJldHVybiExfShlLG4pPzA6ZT49MTMxMDcyJiZlPD0xOTY2MDV8fGU+PTE5NjYwOCYmZTw9MjYyMTQxPzI6MX1jaGFyUHJvcGVydGllcyhlLHQpe2xldCBpPXRoaXMud2N3aWR0aChlKSxyPTA9PT1pJiYwIT09dDtpZihyKXtjb25zdCBlPXMuVW5pY29kZVNlcnZpY2UuZXh0cmFjdFdpZHRoKHQpOzA9PT1lP3I9ITE6ZT5pJiYoaT1lKX1yZXR1cm4gcy5Vbmljb2RlU2VydmljZS5jcmVhdGVQcm9wZXJ0eVZhbHVlKDAsaSxyKX19fSw1OTgxOihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LldyaXRlQnVmZmVyPXZvaWQgMDtjb25zdCBzPWkoODQ2MCkscj1pKDg0NCk7Y2xhc3MgbiBleHRlbmRzIHIuRGlzcG9zYWJsZXtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuX2FjdGlvbj1lLHRoaXMuX3dyaXRlQnVmZmVyPVtdLHRoaXMuX2NhbGxiYWNrcz1bXSx0aGlzLl9wZW5kaW5nRGF0YT0wLHRoaXMuX2J1ZmZlck9mZnNldD0wLHRoaXMuX2lzU3luY1dyaXRpbmc9ITEsdGhpcy5fc3luY0NhbGxzPTAsdGhpcy5fZGlkVXNlcklucHV0PSExLHRoaXMuX29uV3JpdGVQYXJzZWQ9dGhpcy5yZWdpc3RlcihuZXcgcy5FdmVudEVtaXR0ZXIpLHRoaXMub25Xcml0ZVBhcnNlZD10aGlzLl9vbldyaXRlUGFyc2VkLmV2ZW50fWhhbmRsZVVzZXJJbnB1dCgpe3RoaXMuX2RpZFVzZXJJbnB1dD0hMH13cml0ZVN5bmMoZSx0KXtpZih2b2lkIDAhPT10JiZ0aGlzLl9zeW5jQ2FsbHM+dClyZXR1cm4gdm9pZCh0aGlzLl9zeW5jQ2FsbHM9MCk7aWYodGhpcy5fcGVuZGluZ0RhdGErPWUubGVuZ3RoLHRoaXMuX3dyaXRlQnVmZmVyLnB1c2goZSksdGhpcy5fY2FsbGJhY2tzLnB1c2godm9pZCAwKSx0aGlzLl9zeW5jQ2FsbHMrKyx0aGlzLl9pc1N5bmNXcml0aW5nKXJldHVybjtsZXQgaTtmb3IodGhpcy5faXNTeW5jV3JpdGluZz0hMDtpPXRoaXMuX3dyaXRlQnVmZmVyLnNoaWZ0KCk7KXt0aGlzLl9hY3Rpb24oaSk7Y29uc3QgZT10aGlzLl9jYWxsYmFja3Muc2hpZnQoKTtlJiZlKCl9dGhpcy5fcGVuZGluZ0RhdGE9MCx0aGlzLl9idWZmZXJPZmZzZXQ9MjE0NzQ4MzY0Nyx0aGlzLl9pc1N5bmNXcml0aW5nPSExLHRoaXMuX3N5bmNDYWxscz0wfXdyaXRlKGUsdCl7aWYodGhpcy5fcGVuZGluZ0RhdGE+NWU3KXRocm93IG5ldyBFcnJvcihcIndyaXRlIGRhdGEgZGlzY2FyZGVkLCB1c2UgZmxvdyBjb250cm9sIHRvIGF2b2lkIGxvc2luZyBkYXRhXCIpO2lmKCF0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGgpe2lmKHRoaXMuX2J1ZmZlck9mZnNldD0wLHRoaXMuX2RpZFVzZXJJbnB1dClyZXR1cm4gdGhpcy5fZGlkVXNlcklucHV0PSExLHRoaXMuX3BlbmRpbmdEYXRhKz1lLmxlbmd0aCx0aGlzLl93cml0ZUJ1ZmZlci5wdXNoKGUpLHRoaXMuX2NhbGxiYWNrcy5wdXNoKHQpLHZvaWQgdGhpcy5faW5uZXJXcml0ZSgpO3NldFRpbWVvdXQoKCgpPT50aGlzLl9pbm5lcldyaXRlKCkpKX10aGlzLl9wZW5kaW5nRGF0YSs9ZS5sZW5ndGgsdGhpcy5fd3JpdGVCdWZmZXIucHVzaChlKSx0aGlzLl9jYWxsYmFja3MucHVzaCh0KX1faW5uZXJXcml0ZShlPTAsdD0hMCl7Y29uc3QgaT1lfHxEYXRlLm5vdygpO2Zvcig7dGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoPnRoaXMuX2J1ZmZlck9mZnNldDspe2NvbnN0IGU9dGhpcy5fd3JpdGVCdWZmZXJbdGhpcy5fYnVmZmVyT2Zmc2V0XSxzPXRoaXMuX2FjdGlvbihlLHQpO2lmKHMpe2NvbnN0IGU9ZT0+RGF0ZS5ub3coKS1pPj0xMj9zZXRUaW1lb3V0KCgoKT0+dGhpcy5faW5uZXJXcml0ZSgwLGUpKSk6dGhpcy5faW5uZXJXcml0ZShpLGUpO3JldHVybiB2b2lkIHMuY2F0Y2goKGU9PihxdWV1ZU1pY3JvdGFzaygoKCk9Pnt0aHJvdyBlfSkpLFByb21pc2UucmVzb2x2ZSghMSkpKSkudGhlbihlKX1jb25zdCByPXRoaXMuX2NhbGxiYWNrc1t0aGlzLl9idWZmZXJPZmZzZXRdO2lmKHImJnIoKSx0aGlzLl9idWZmZXJPZmZzZXQrKyx0aGlzLl9wZW5kaW5nRGF0YS09ZS5sZW5ndGgsRGF0ZS5ub3coKS1pPj0xMilicmVha310aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGg+dGhpcy5fYnVmZmVyT2Zmc2V0Pyh0aGlzLl9idWZmZXJPZmZzZXQ+NTAmJih0aGlzLl93cml0ZUJ1ZmZlcj10aGlzLl93cml0ZUJ1ZmZlci5zbGljZSh0aGlzLl9idWZmZXJPZmZzZXQpLHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3Muc2xpY2UodGhpcy5fYnVmZmVyT2Zmc2V0KSx0aGlzLl9idWZmZXJPZmZzZXQ9MCksc2V0VGltZW91dCgoKCk9PnRoaXMuX2lubmVyV3JpdGUoKSkpKToodGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoPTAsdGhpcy5fY2FsbGJhY2tzLmxlbmd0aD0wLHRoaXMuX3BlbmRpbmdEYXRhPTAsdGhpcy5fYnVmZmVyT2Zmc2V0PTApLHRoaXMuX29uV3JpdGVQYXJzZWQuZmlyZSgpfX10LldyaXRlQnVmZmVyPW59LDU5NDE6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LnRvUmdiU3RyaW5nPXQucGFyc2VDb2xvcj12b2lkIDA7Y29uc3QgaT0vXihbXFxkYS1mXSlcXC8oW1xcZGEtZl0pXFwvKFtcXGRhLWZdKSR8XihbXFxkYS1mXXsyfSlcXC8oW1xcZGEtZl17Mn0pXFwvKFtcXGRhLWZdezJ9KSR8XihbXFxkYS1mXXszfSlcXC8oW1xcZGEtZl17M30pXFwvKFtcXGRhLWZdezN9KSR8XihbXFxkYS1mXXs0fSlcXC8oW1xcZGEtZl17NH0pXFwvKFtcXGRhLWZdezR9KSQvLHM9L15bXFxkYS1mXSskLztmdW5jdGlvbiByKGUsdCl7Y29uc3QgaT1lLnRvU3RyaW5nKDE2KSxzPWkubGVuZ3RoPDI/XCIwXCIraTppO3N3aXRjaCh0KXtjYXNlIDQ6cmV0dXJuIGlbMF07Y2FzZSA4OnJldHVybiBzO2Nhc2UgMTI6cmV0dXJuKHMrcykuc2xpY2UoMCwzKTtkZWZhdWx0OnJldHVybiBzK3N9fXQucGFyc2VDb2xvcj1mdW5jdGlvbihlKXtpZighZSlyZXR1cm47bGV0IHQ9ZS50b0xvd2VyQ2FzZSgpO2lmKDA9PT10LmluZGV4T2YoXCJyZ2I6XCIpKXt0PXQuc2xpY2UoNCk7Y29uc3QgZT1pLmV4ZWModCk7aWYoZSl7Y29uc3QgdD1lWzFdPzE1OmVbNF0/MjU1OmVbN10/NDA5NTo2NTUzNTtyZXR1cm5bTWF0aC5yb3VuZChwYXJzZUludChlWzFdfHxlWzRdfHxlWzddfHxlWzEwXSwxNikvdCoyNTUpLE1hdGgucm91bmQocGFyc2VJbnQoZVsyXXx8ZVs1XXx8ZVs4XXx8ZVsxMV0sMTYpL3QqMjU1KSxNYXRoLnJvdW5kKHBhcnNlSW50KGVbM118fGVbNl18fGVbOV18fGVbMTJdLDE2KS90KjI1NSldfX1lbHNlIGlmKDA9PT10LmluZGV4T2YoXCIjXCIpJiYodD10LnNsaWNlKDEpLHMuZXhlYyh0KSYmWzMsNiw5LDEyXS5pbmNsdWRlcyh0Lmxlbmd0aCkpKXtjb25zdCBlPXQubGVuZ3RoLzMsaT1bMCwwLDBdO2ZvcihsZXQgcz0wO3M8MzsrK3Mpe2NvbnN0IHI9cGFyc2VJbnQodC5zbGljZShlKnMsZSpzK2UpLDE2KTtpW3NdPTE9PT1lP3I8PDQ6Mj09PWU/cjozPT09ZT9yPj40OnI+Pjh9cmV0dXJuIGl9fSx0LnRvUmdiU3RyaW5nPWZ1bmN0aW9uKGUsdD0xNil7Y29uc3RbaSxzLG5dPWU7cmV0dXJuYHJnYjoke3IoaSx0KX0vJHtyKHMsdCl9LyR7cihuLHQpfWB9fSw1NzcwOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5QQVlMT0FEX0xJTUlUPXZvaWQgMCx0LlBBWUxPQURfTElNSVQ9MWU3fSw2MzUxOihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkRjc0hhbmRsZXI9dC5EY3NQYXJzZXI9dm9pZCAwO2NvbnN0IHM9aSg0ODIpLHI9aSg4NzQyKSxuPWkoNTc3MCksbz1bXTt0LkRjc1BhcnNlcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuX2hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fYWN0aXZlPW8sdGhpcy5faWRlbnQ9MCx0aGlzLl9oYW5kbGVyRmI9KCk9Pnt9LHRoaXMuX3N0YWNrPXtwYXVzZWQ6ITEsbG9vcFBvc2l0aW9uOjAsZmFsbFRocm91Z2g6ITF9fWRpc3Bvc2UoKXt0aGlzLl9oYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2hhbmRsZXJGYj0oKT0+e30sdGhpcy5fYWN0aXZlPW99cmVnaXN0ZXJIYW5kbGVyKGUsdCl7dm9pZCAwPT09dGhpcy5faGFuZGxlcnNbZV0mJih0aGlzLl9oYW5kbGVyc1tlXT1bXSk7Y29uc3QgaT10aGlzLl9oYW5kbGVyc1tlXTtyZXR1cm4gaS5wdXNoKHQpLHtkaXNwb3NlOigpPT57Y29uc3QgZT1pLmluZGV4T2YodCk7LTEhPT1lJiZpLnNwbGljZShlLDEpfX19Y2xlYXJIYW5kbGVyKGUpe3RoaXMuX2hhbmRsZXJzW2VdJiZkZWxldGUgdGhpcy5faGFuZGxlcnNbZV19c2V0SGFuZGxlckZhbGxiYWNrKGUpe3RoaXMuX2hhbmRsZXJGYj1lfXJlc2V0KCl7aWYodGhpcy5fYWN0aXZlLmxlbmd0aClmb3IobGV0IGU9dGhpcy5fc3RhY2sucGF1c2VkP3RoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbi0xOnRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wOy0tZSl0aGlzLl9hY3RpdmVbZV0udW5ob29rKCExKTt0aGlzLl9zdGFjay5wYXVzZWQ9ITEsdGhpcy5fYWN0aXZlPW8sdGhpcy5faWRlbnQ9MH1ob29rKGUsdCl7aWYodGhpcy5yZXNldCgpLHRoaXMuX2lkZW50PWUsdGhpcy5fYWN0aXZlPXRoaXMuX2hhbmRsZXJzW2VdfHxvLHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKGxldCBlPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLl9hY3RpdmVbZV0uaG9vayh0KTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCxcIkhPT0tcIix0KX1wdXQoZSx0LGkpe2lmKHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKGxldCBzPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtzPj0wO3MtLSl0aGlzLl9hY3RpdmVbc10ucHV0KGUsdCxpKTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCxcIlBVVFwiLCgwLHMudXRmMzJUb1N0cmluZykoZSx0LGkpKX11bmhvb2soZSx0PSEwKXtpZih0aGlzLl9hY3RpdmUubGVuZ3RoKXtsZXQgaT0hMSxzPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMSxyPSExO2lmKHRoaXMuX3N0YWNrLnBhdXNlZCYmKHM9dGhpcy5fc3RhY2subG9vcFBvc2l0aW9uLTEsaT10LHI9dGhpcy5fc3RhY2suZmFsbFRocm91Z2gsdGhpcy5fc3RhY2sucGF1c2VkPSExKSwhciYmITE9PT1pKXtmb3IoO3M+PTAmJihpPXRoaXMuX2FjdGl2ZVtzXS51bmhvb2soZSksITAhPT1pKTtzLS0paWYoaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249cyx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMSxpO3MtLX1mb3IoO3M+PTA7cy0tKWlmKGk9dGhpcy5fYWN0aXZlW3NdLnVuaG9vayghMSksaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249cyx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMCxpfWVsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LFwiVU5IT09LXCIsZSk7dGhpcy5fYWN0aXZlPW8sdGhpcy5faWRlbnQ9MH19O2NvbnN0IGE9bmV3IHIuUGFyYW1zO2EuYWRkUGFyYW0oMCksdC5EY3NIYW5kbGVyPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuX2hhbmRsZXI9ZSx0aGlzLl9kYXRhPVwiXCIsdGhpcy5fcGFyYW1zPWEsdGhpcy5faGl0TGltaXQ9ITF9aG9vayhlKXt0aGlzLl9wYXJhbXM9ZS5sZW5ndGg+MXx8ZS5wYXJhbXNbMF0/ZS5jbG9uZSgpOmEsdGhpcy5fZGF0YT1cIlwiLHRoaXMuX2hpdExpbWl0PSExfXB1dChlLHQsaSl7dGhpcy5faGl0TGltaXR8fCh0aGlzLl9kYXRhKz0oMCxzLnV0ZjMyVG9TdHJpbmcpKGUsdCxpKSx0aGlzLl9kYXRhLmxlbmd0aD5uLlBBWUxPQURfTElNSVQmJih0aGlzLl9kYXRhPVwiXCIsdGhpcy5faGl0TGltaXQ9ITApKX11bmhvb2soZSl7bGV0IHQ9ITE7aWYodGhpcy5faGl0TGltaXQpdD0hMTtlbHNlIGlmKGUmJih0PXRoaXMuX2hhbmRsZXIodGhpcy5fZGF0YSx0aGlzLl9wYXJhbXMpLHQgaW5zdGFuY2VvZiBQcm9taXNlKSlyZXR1cm4gdC50aGVuKChlPT4odGhpcy5fcGFyYW1zPWEsdGhpcy5fZGF0YT1cIlwiLHRoaXMuX2hpdExpbWl0PSExLGUpKSk7cmV0dXJuIHRoaXMuX3BhcmFtcz1hLHRoaXMuX2RhdGE9XCJcIix0aGlzLl9oaXRMaW1pdD0hMSx0fX19LDIwMTU6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuRXNjYXBlU2VxdWVuY2VQYXJzZXI9dC5WVDUwMF9UUkFOU0lUSU9OX1RBQkxFPXQuVHJhbnNpdGlvblRhYmxlPXZvaWQgMDtjb25zdCBzPWkoODQ0KSxyPWkoODc0Miksbj1pKDYyNDIpLG89aSg2MzUxKTtjbGFzcyBhe2NvbnN0cnVjdG9yKGUpe3RoaXMudGFibGU9bmV3IFVpbnQ4QXJyYXkoZSl9c2V0RGVmYXVsdChlLHQpe3RoaXMudGFibGUuZmlsbChlPDw0fHQpfWFkZChlLHQsaSxzKXt0aGlzLnRhYmxlW3Q8PDh8ZV09aTw8NHxzfWFkZE1hbnkoZSx0LGkscyl7Zm9yKGxldCByPTA7cjxlLmxlbmd0aDtyKyspdGhpcy50YWJsZVt0PDw4fGVbcl1dPWk8PDR8c319dC5UcmFuc2l0aW9uVGFibGU9YTtjb25zdCBoPTE2MDt0LlZUNTAwX1RSQU5TSVRJT05fVEFCTEU9ZnVuY3Rpb24oKXtjb25zdCBlPW5ldyBhKDQwOTUpLHQ9QXJyYXkuYXBwbHkobnVsbCxBcnJheSgyNTYpKS5tYXAoKChlLHQpPT50KSksaT0oZSxpKT0+dC5zbGljZShlLGkpLHM9aSgzMiwxMjcpLHI9aSgwLDI0KTtyLnB1c2goMjUpLHIucHVzaC5hcHBseShyLGkoMjgsMzIpKTtjb25zdCBuPWkoMCwxNCk7bGV0IG87Zm9yKG8gaW4gZS5zZXREZWZhdWx0KDEsMCksZS5hZGRNYW55KHMsMCwyLDApLG4pZS5hZGRNYW55KFsyNCwyNiwxNTMsMTU0XSxvLDMsMCksZS5hZGRNYW55KGkoMTI4LDE0NCksbywzLDApLGUuYWRkTWFueShpKDE0NCwxNTIpLG8sMywwKSxlLmFkZCgxNTYsbywwLDApLGUuYWRkKDI3LG8sMTEsMSksZS5hZGQoMTU3LG8sNCw4KSxlLmFkZE1hbnkoWzE1MiwxNTgsMTU5XSxvLDAsNyksZS5hZGQoMTU1LG8sMTEsMyksZS5hZGQoMTQ0LG8sMTEsOSk7cmV0dXJuIGUuYWRkTWFueShyLDAsMywwKSxlLmFkZE1hbnkociwxLDMsMSksZS5hZGQoMTI3LDEsMCwxKSxlLmFkZE1hbnkociw4LDAsOCksZS5hZGRNYW55KHIsMywzLDMpLGUuYWRkKDEyNywzLDAsMyksZS5hZGRNYW55KHIsNCwzLDQpLGUuYWRkKDEyNyw0LDAsNCksZS5hZGRNYW55KHIsNiwzLDYpLGUuYWRkTWFueShyLDUsMyw1KSxlLmFkZCgxMjcsNSwwLDUpLGUuYWRkTWFueShyLDIsMywyKSxlLmFkZCgxMjcsMiwwLDIpLGUuYWRkKDkzLDEsNCw4KSxlLmFkZE1hbnkocyw4LDUsOCksZS5hZGQoMTI3LDgsNSw4KSxlLmFkZE1hbnkoWzE1NiwyNywyNCwyNiw3XSw4LDYsMCksZS5hZGRNYW55KGkoMjgsMzIpLDgsMCw4KSxlLmFkZE1hbnkoWzg4LDk0LDk1XSwxLDAsNyksZS5hZGRNYW55KHMsNywwLDcpLGUuYWRkTWFueShyLDcsMCw3KSxlLmFkZCgxNTYsNywwLDApLGUuYWRkKDEyNyw3LDAsNyksZS5hZGQoOTEsMSwxMSwzKSxlLmFkZE1hbnkoaSg2NCwxMjcpLDMsNywwKSxlLmFkZE1hbnkoaSg0OCw2MCksMyw4LDQpLGUuYWRkTWFueShbNjAsNjEsNjIsNjNdLDMsOSw0KSxlLmFkZE1hbnkoaSg0OCw2MCksNCw4LDQpLGUuYWRkTWFueShpKDY0LDEyNyksNCw3LDApLGUuYWRkTWFueShbNjAsNjEsNjIsNjNdLDQsMCw2KSxlLmFkZE1hbnkoaSgzMiw2NCksNiwwLDYpLGUuYWRkKDEyNyw2LDAsNiksZS5hZGRNYW55KGkoNjQsMTI3KSw2LDAsMCksZS5hZGRNYW55KGkoMzIsNDgpLDMsOSw1KSxlLmFkZE1hbnkoaSgzMiw0OCksNSw5LDUpLGUuYWRkTWFueShpKDQ4LDY0KSw1LDAsNiksZS5hZGRNYW55KGkoNjQsMTI3KSw1LDcsMCksZS5hZGRNYW55KGkoMzIsNDgpLDQsOSw1KSxlLmFkZE1hbnkoaSgzMiw0OCksMSw5LDIpLGUuYWRkTWFueShpKDMyLDQ4KSwyLDksMiksZS5hZGRNYW55KGkoNDgsMTI3KSwyLDEwLDApLGUuYWRkTWFueShpKDQ4LDgwKSwxLDEwLDApLGUuYWRkTWFueShpKDgxLDg4KSwxLDEwLDApLGUuYWRkTWFueShbODksOTAsOTJdLDEsMTAsMCksZS5hZGRNYW55KGkoOTYsMTI3KSwxLDEwLDApLGUuYWRkKDgwLDEsMTEsOSksZS5hZGRNYW55KHIsOSwwLDkpLGUuYWRkKDEyNyw5LDAsOSksZS5hZGRNYW55KGkoMjgsMzIpLDksMCw5KSxlLmFkZE1hbnkoaSgzMiw0OCksOSw5LDEyKSxlLmFkZE1hbnkoaSg0OCw2MCksOSw4LDEwKSxlLmFkZE1hbnkoWzYwLDYxLDYyLDYzXSw5LDksMTApLGUuYWRkTWFueShyLDExLDAsMTEpLGUuYWRkTWFueShpKDMyLDEyOCksMTEsMCwxMSksZS5hZGRNYW55KGkoMjgsMzIpLDExLDAsMTEpLGUuYWRkTWFueShyLDEwLDAsMTApLGUuYWRkKDEyNywxMCwwLDEwKSxlLmFkZE1hbnkoaSgyOCwzMiksMTAsMCwxMCksZS5hZGRNYW55KGkoNDgsNjApLDEwLDgsMTApLGUuYWRkTWFueShbNjAsNjEsNjIsNjNdLDEwLDAsMTEpLGUuYWRkTWFueShpKDMyLDQ4KSwxMCw5LDEyKSxlLmFkZE1hbnkociwxMiwwLDEyKSxlLmFkZCgxMjcsMTIsMCwxMiksZS5hZGRNYW55KGkoMjgsMzIpLDEyLDAsMTIpLGUuYWRkTWFueShpKDMyLDQ4KSwxMiw5LDEyKSxlLmFkZE1hbnkoaSg0OCw2NCksMTIsMCwxMSksZS5hZGRNYW55KGkoNjQsMTI3KSwxMiwxMiwxMyksZS5hZGRNYW55KGkoNjQsMTI3KSwxMCwxMiwxMyksZS5hZGRNYW55KGkoNjQsMTI3KSw5LDEyLDEzKSxlLmFkZE1hbnkociwxMywxMywxMyksZS5hZGRNYW55KHMsMTMsMTMsMTMpLGUuYWRkKDEyNywxMywwLDEzKSxlLmFkZE1hbnkoWzI3LDE1NiwyNCwyNl0sMTMsMTQsMCksZS5hZGQoaCwwLDIsMCksZS5hZGQoaCw4LDUsOCksZS5hZGQoaCw2LDAsNiksZS5hZGQoaCwxMSwwLDExKSxlLmFkZChoLDEzLDEzLDEzKSxlfSgpO2NsYXNzIGMgZXh0ZW5kcyBzLkRpc3Bvc2FibGV7Y29uc3RydWN0b3IoZT10LlZUNTAwX1RSQU5TSVRJT05fVEFCTEUpe3N1cGVyKCksdGhpcy5fdHJhbnNpdGlvbnM9ZSx0aGlzLl9wYXJzZVN0YWNrPXtzdGF0ZTowLGhhbmRsZXJzOltdLGhhbmRsZXJQb3M6MCx0cmFuc2l0aW9uOjAsY2h1bmtQb3M6MH0sdGhpcy5pbml0aWFsU3RhdGU9MCx0aGlzLmN1cnJlbnRTdGF0ZT10aGlzLmluaXRpYWxTdGF0ZSx0aGlzLl9wYXJhbXM9bmV3IHIuUGFyYW1zLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTAsdGhpcy5wcmVjZWRpbmdKb2luU3RhdGU9MCx0aGlzLl9wcmludEhhbmRsZXJGYj0oZSx0LGkpPT57fSx0aGlzLl9leGVjdXRlSGFuZGxlckZiPWU9Pnt9LHRoaXMuX2NzaUhhbmRsZXJGYj0oZSx0KT0+e30sdGhpcy5fZXNjSGFuZGxlckZiPWU9Pnt9LHRoaXMuX2Vycm9ySGFuZGxlckZiPWU9PmUsdGhpcy5fcHJpbnRIYW5kbGVyPXRoaXMuX3ByaW50SGFuZGxlckZiLHRoaXMuX2V4ZWN1dGVIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2NzaUhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXNjSGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLnJlZ2lzdGVyKCgwLHMudG9EaXNwb3NhYmxlKSgoKCk9Pnt0aGlzLl9jc2lIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V4ZWN1dGVIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2VzY0hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCl9KSkpLHRoaXMuX29zY1BhcnNlcj10aGlzLnJlZ2lzdGVyKG5ldyBuLk9zY1BhcnNlciksdGhpcy5fZGNzUGFyc2VyPXRoaXMucmVnaXN0ZXIobmV3IG8uRGNzUGFyc2VyKSx0aGlzLl9lcnJvckhhbmRsZXI9dGhpcy5fZXJyb3JIYW5kbGVyRmIsdGhpcy5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOlwiXFxcXFwifSwoKCk9PiEwKSl9X2lkZW50aWZpZXIoZSx0PVs2NCwxMjZdKXtsZXQgaT0wO2lmKGUucHJlZml4KXtpZihlLnByZWZpeC5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IoXCJvbmx5IG9uZSBieXRlIGFzIHByZWZpeCBzdXBwb3J0ZWRcIik7aWYoaT1lLnByZWZpeC5jaGFyQ29kZUF0KDApLGkmJjYwPml8fGk+NjMpdGhyb3cgbmV3IEVycm9yKFwicHJlZml4IG11c3QgYmUgaW4gcmFuZ2UgMHgzYyAuLiAweDNmXCIpfWlmKGUuaW50ZXJtZWRpYXRlcyl7aWYoZS5pbnRlcm1lZGlhdGVzLmxlbmd0aD4yKXRocm93IG5ldyBFcnJvcihcIm9ubHkgdHdvIGJ5dGVzIGFzIGludGVybWVkaWF0ZXMgYXJlIHN1cHBvcnRlZFwiKTtmb3IobGV0IHQ9MDt0PGUuaW50ZXJtZWRpYXRlcy5sZW5ndGg7Kyt0KXtjb25zdCBzPWUuaW50ZXJtZWRpYXRlcy5jaGFyQ29kZUF0KHQpO2lmKDMyPnN8fHM+NDcpdGhyb3cgbmV3IEVycm9yKFwiaW50ZXJtZWRpYXRlIG11c3QgYmUgaW4gcmFuZ2UgMHgyMCAuLiAweDJmXCIpO2k8PD04LGl8PXN9fWlmKDEhPT1lLmZpbmFsLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJmaW5hbCBtdXN0IGJlIGEgc2luZ2xlIGJ5dGVcIik7Y29uc3Qgcz1lLmZpbmFsLmNoYXJDb2RlQXQoMCk7aWYodFswXT5zfHxzPnRbMV0pdGhyb3cgbmV3IEVycm9yKGBmaW5hbCBtdXN0IGJlIGluIHJhbmdlICR7dFswXX0gLi4gJHt0WzFdfWApO3JldHVybiBpPDw9OCxpfD1zLGl9aWRlbnRUb1N0cmluZyhlKXtjb25zdCB0PVtdO2Zvcig7ZTspdC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpKSxlPj49ODtyZXR1cm4gdC5yZXZlcnNlKCkuam9pbihcIlwiKX1zZXRQcmludEhhbmRsZXIoZSl7dGhpcy5fcHJpbnRIYW5kbGVyPWV9Y2xlYXJQcmludEhhbmRsZXIoKXt0aGlzLl9wcmludEhhbmRsZXI9dGhpcy5fcHJpbnRIYW5kbGVyRmJ9cmVnaXN0ZXJFc2NIYW5kbGVyKGUsdCl7Y29uc3QgaT10aGlzLl9pZGVudGlmaWVyKGUsWzQ4LDEyNl0pO3ZvaWQgMD09PXRoaXMuX2VzY0hhbmRsZXJzW2ldJiYodGhpcy5fZXNjSGFuZGxlcnNbaV09W10pO2NvbnN0IHM9dGhpcy5fZXNjSGFuZGxlcnNbaV07cmV0dXJuIHMucHVzaCh0KSx7ZGlzcG9zZTooKT0+e2NvbnN0IGU9cy5pbmRleE9mKHQpOy0xIT09ZSYmcy5zcGxpY2UoZSwxKX19fWNsZWFyRXNjSGFuZGxlcihlKXt0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGUsWzQ4LDEyNl0pXSYmZGVsZXRlIHRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoZSxbNDgsMTI2XSldfXNldEVzY0hhbmRsZXJGYWxsYmFjayhlKXt0aGlzLl9lc2NIYW5kbGVyRmI9ZX1zZXRFeGVjdXRlSGFuZGxlcihlLHQpe3RoaXMuX2V4ZWN1dGVIYW5kbGVyc1tlLmNoYXJDb2RlQXQoMCldPXR9Y2xlYXJFeGVjdXRlSGFuZGxlcihlKXt0aGlzLl9leGVjdXRlSGFuZGxlcnNbZS5jaGFyQ29kZUF0KDApXSYmZGVsZXRlIHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tlLmNoYXJDb2RlQXQoMCldfXNldEV4ZWN1dGVIYW5kbGVyRmFsbGJhY2soZSl7dGhpcy5fZXhlY3V0ZUhhbmRsZXJGYj1lfXJlZ2lzdGVyQ3NpSGFuZGxlcihlLHQpe2NvbnN0IGk9dGhpcy5faWRlbnRpZmllcihlKTt2b2lkIDA9PT10aGlzLl9jc2lIYW5kbGVyc1tpXSYmKHRoaXMuX2NzaUhhbmRsZXJzW2ldPVtdKTtjb25zdCBzPXRoaXMuX2NzaUhhbmRsZXJzW2ldO3JldHVybiBzLnB1c2godCkse2Rpc3Bvc2U6KCk9Pntjb25zdCBlPXMuaW5kZXhPZih0KTstMSE9PWUmJnMuc3BsaWNlKGUsMSl9fX1jbGVhckNzaUhhbmRsZXIoZSl7dGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihlKV0mJmRlbGV0ZSB0aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGUpXX1zZXRDc2lIYW5kbGVyRmFsbGJhY2soZSl7dGhpcy5fY3NpSGFuZGxlckZiPWV9cmVnaXN0ZXJEY3NIYW5kbGVyKGUsdCl7cmV0dXJuIHRoaXMuX2Rjc1BhcnNlci5yZWdpc3RlckhhbmRsZXIodGhpcy5faWRlbnRpZmllcihlKSx0KX1jbGVhckRjc0hhbmRsZXIoZSl7dGhpcy5fZGNzUGFyc2VyLmNsZWFySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGUpKX1zZXREY3NIYW5kbGVyRmFsbGJhY2soZSl7dGhpcy5fZGNzUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhlKX1yZWdpc3Rlck9zY0hhbmRsZXIoZSx0KXtyZXR1cm4gdGhpcy5fb3NjUGFyc2VyLnJlZ2lzdGVySGFuZGxlcihlLHQpfWNsZWFyT3NjSGFuZGxlcihlKXt0aGlzLl9vc2NQYXJzZXIuY2xlYXJIYW5kbGVyKGUpfXNldE9zY0hhbmRsZXJGYWxsYmFjayhlKXt0aGlzLl9vc2NQYXJzZXIuc2V0SGFuZGxlckZhbGxiYWNrKGUpfXNldEVycm9ySGFuZGxlcihlKXt0aGlzLl9lcnJvckhhbmRsZXI9ZX1jbGVhckVycm9ySGFuZGxlcigpe3RoaXMuX2Vycm9ySGFuZGxlcj10aGlzLl9lcnJvckhhbmRsZXJGYn1yZXNldCgpe3RoaXMuY3VycmVudFN0YXRlPXRoaXMuaW5pdGlhbFN0YXRlLHRoaXMuX29zY1BhcnNlci5yZXNldCgpLHRoaXMuX2Rjc1BhcnNlci5yZXNldCgpLHRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTAsdGhpcy5wcmVjZWRpbmdKb2luU3RhdGU9MCwwIT09dGhpcy5fcGFyc2VTdGFjay5zdGF0ZSYmKHRoaXMuX3BhcnNlU3RhY2suc3RhdGU9Mix0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzPVtdKX1fcHJlc2VydmVTdGFjayhlLHQsaSxzLHIpe3RoaXMuX3BhcnNlU3RhY2suc3RhdGU9ZSx0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzPXQsdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zPWksdGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9uPXMsdGhpcy5fcGFyc2VTdGFjay5jaHVua1Bvcz1yfXBhcnNlKGUsdCxpKXtsZXQgcyxyPTAsbj0wLG89MDtpZih0aGlzLl9wYXJzZVN0YWNrLnN0YXRlKWlmKDI9PT10aGlzLl9wYXJzZVN0YWNrLnN0YXRlKXRoaXMuX3BhcnNlU3RhY2suc3RhdGU9MCxvPXRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3MrMTtlbHNle2lmKHZvaWQgMD09PWl8fDE9PT10aGlzLl9wYXJzZVN0YWNrLnN0YXRlKXRocm93IHRoaXMuX3BhcnNlU3RhY2suc3RhdGU9MSxuZXcgRXJyb3IoXCJpbXByb3BlciBjb250aW51YXRpb24gZHVlIHRvIHByZXZpb3VzIGFzeW5jIGhhbmRsZXIsIGdpdmluZyB1cCBwYXJzaW5nXCIpO2NvbnN0IHQ9dGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycztsZXQgbj10aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3MtMTtzd2l0Y2godGhpcy5fcGFyc2VTdGFjay5zdGF0ZSl7Y2FzZSAzOmlmKCExPT09aSYmbj4tMSlmb3IoO24+PTAmJihzPXRbbl0odGhpcy5fcGFyYW1zKSwhMCE9PXMpO24tLSlpZihzIGluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zPW4sczt0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzPVtdO2JyZWFrO2Nhc2UgNDppZighMT09PWkmJm4+LTEpZm9yKDtuPj0wJiYocz10W25dKCksITAhPT1zKTtuLS0paWYocyBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcz1uLHM7dGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycz1bXTticmVhaztjYXNlIDY6aWYocj1lW3RoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3NdLHM9dGhpcy5fZGNzUGFyc2VyLnVuaG9vaygyNCE9PXImJjI2IT09cixpKSxzKXJldHVybiBzOzI3PT09ciYmKHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbnw9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MDticmVhaztjYXNlIDU6aWYocj1lW3RoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3NdLHM9dGhpcy5fb3NjUGFyc2VyLmVuZCgyNCE9PXImJjI2IT09cixpKSxzKXJldHVybiBzOzI3PT09ciYmKHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbnw9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MH10aGlzLl9wYXJzZVN0YWNrLnN0YXRlPTAsbz10aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zKzEsdGhpcy5wcmVjZWRpbmdKb2luU3RhdGU9MCx0aGlzLmN1cnJlbnRTdGF0ZT0xNSZ0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb259Zm9yKGxldCBpPW87aTx0OysraSl7c3dpdGNoKHI9ZVtpXSxuPXRoaXMuX3RyYW5zaXRpb25zLnRhYmxlW3RoaXMuY3VycmVudFN0YXRlPDw4fChyPDE2MD9yOmgpXSxuPj40KXtjYXNlIDI6Zm9yKGxldCBzPWkrMTs7KytzKXtpZihzPj10fHwocj1lW3NdKTwzMnx8cj4xMjYmJnI8aCl7dGhpcy5fcHJpbnRIYW5kbGVyKGUsaSxzKSxpPXMtMTticmVha31pZigrK3M+PXR8fChyPWVbc10pPDMyfHxyPjEyNiYmcjxoKXt0aGlzLl9wcmludEhhbmRsZXIoZSxpLHMpLGk9cy0xO2JyZWFrfWlmKCsrcz49dHx8KHI9ZVtzXSk8MzJ8fHI+MTI2JiZyPGgpe3RoaXMuX3ByaW50SGFuZGxlcihlLGkscyksaT1zLTE7YnJlYWt9aWYoKytzPj10fHwocj1lW3NdKTwzMnx8cj4xMjYmJnI8aCl7dGhpcy5fcHJpbnRIYW5kbGVyKGUsaSxzKSxpPXMtMTticmVha319YnJlYWs7Y2FzZSAzOnRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tyXT90aGlzLl9leGVjdXRlSGFuZGxlcnNbcl0oKTp0aGlzLl9leGVjdXRlSGFuZGxlckZiKHIpLHRoaXMucHJlY2VkaW5nSm9pblN0YXRlPTA7YnJlYWs7Y2FzZSAwOmJyZWFrO2Nhc2UgMTppZih0aGlzLl9lcnJvckhhbmRsZXIoe3Bvc2l0aW9uOmksY29kZTpyLGN1cnJlbnRTdGF0ZTp0aGlzLmN1cnJlbnRTdGF0ZSxjb2xsZWN0OnRoaXMuX2NvbGxlY3QscGFyYW1zOnRoaXMuX3BhcmFtcyxhYm9ydDohMX0pLmFib3J0KXJldHVybjticmVhaztjYXNlIDc6Y29uc3Qgbz10aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9jb2xsZWN0PDw4fHJdO2xldCBhPW8/by5sZW5ndGgtMTotMTtmb3IoO2E+PTAmJihzPW9bYV0odGhpcy5fcGFyYW1zKSwhMCE9PXMpO2EtLSlpZihzIGluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fcHJlc2VydmVTdGFjaygzLG8sYSxuLGkpLHM7YTwwJiZ0aGlzLl9jc2lIYW5kbGVyRmIodGhpcy5fY29sbGVjdDw8OHxyLHRoaXMuX3BhcmFtcyksdGhpcy5wcmVjZWRpbmdKb2luU3RhdGU9MDticmVhaztjYXNlIDg6ZG97c3dpdGNoKHIpe2Nhc2UgNTk6dGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApO2JyZWFrO2Nhc2UgNTg6dGhpcy5fcGFyYW1zLmFkZFN1YlBhcmFtKC0xKTticmVhaztkZWZhdWx0OnRoaXMuX3BhcmFtcy5hZGREaWdpdChyLTQ4KX19d2hpbGUoKytpPHQmJihyPWVbaV0pPjQ3JiZyPDYwKTtpLS07YnJlYWs7Y2FzZSA5OnRoaXMuX2NvbGxlY3Q8PD04LHRoaXMuX2NvbGxlY3R8PXI7YnJlYWs7Y2FzZSAxMDpjb25zdCBjPXRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2NvbGxlY3Q8PDh8cl07bGV0IGw9Yz9jLmxlbmd0aC0xOi0xO2Zvcig7bD49MCYmKHM9Y1tsXSgpLCEwIT09cyk7bC0tKWlmKHMgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDQsYyxsLG4saSkscztsPDAmJnRoaXMuX2VzY0hhbmRsZXJGYih0aGlzLl9jb2xsZWN0PDw4fHIpLHRoaXMucHJlY2VkaW5nSm9pblN0YXRlPTA7YnJlYWs7Y2FzZSAxMTp0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wO2JyZWFrO2Nhc2UgMTI6dGhpcy5fZGNzUGFyc2VyLmhvb2sodGhpcy5fY29sbGVjdDw8OHxyLHRoaXMuX3BhcmFtcyk7YnJlYWs7Y2FzZSAxMzpmb3IobGV0IHM9aSsxOzsrK3MpaWYocz49dHx8MjQ9PT0ocj1lW3NdKXx8MjY9PT1yfHwyNz09PXJ8fHI+MTI3JiZyPGgpe3RoaXMuX2Rjc1BhcnNlci5wdXQoZSxpLHMpLGk9cy0xO2JyZWFrfWJyZWFrO2Nhc2UgMTQ6aWYocz10aGlzLl9kY3NQYXJzZXIudW5ob29rKDI0IT09ciYmMjYhPT1yKSxzKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDYsW10sMCxuLGkpLHM7Mjc9PT1yJiYobnw9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MCx0aGlzLnByZWNlZGluZ0pvaW5TdGF0ZT0wO2JyZWFrO2Nhc2UgNDp0aGlzLl9vc2NQYXJzZXIuc3RhcnQoKTticmVhaztjYXNlIDU6Zm9yKGxldCBzPWkrMTs7cysrKWlmKHM+PXR8fChyPWVbc10pPDMyfHxyPjEyNyYmcjxoKXt0aGlzLl9vc2NQYXJzZXIucHV0KGUsaSxzKSxpPXMtMTticmVha31icmVhaztjYXNlIDY6aWYocz10aGlzLl9vc2NQYXJzZXIuZW5kKDI0IT09ciYmMjYhPT1yKSxzKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDUsW10sMCxuLGkpLHM7Mjc9PT1yJiYobnw9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MCx0aGlzLnByZWNlZGluZ0pvaW5TdGF0ZT0wfXRoaXMuY3VycmVudFN0YXRlPTE1Jm59fX10LkVzY2FwZVNlcXVlbmNlUGFyc2VyPWN9LDYyNDI6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuT3NjSGFuZGxlcj10Lk9zY1BhcnNlcj12b2lkIDA7Y29uc3Qgcz1pKDU3NzApLHI9aSg0ODIpLG49W107dC5Pc2NQYXJzZXI9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLl9zdGF0ZT0wLHRoaXMuX2FjdGl2ZT1uLHRoaXMuX2lkPS0xLHRoaXMuX2hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5faGFuZGxlckZiPSgpPT57fSx0aGlzLl9zdGFjaz17cGF1c2VkOiExLGxvb3BQb3NpdGlvbjowLGZhbGxUaHJvdWdoOiExfX1yZWdpc3RlckhhbmRsZXIoZSx0KXt2b2lkIDA9PT10aGlzLl9oYW5kbGVyc1tlXSYmKHRoaXMuX2hhbmRsZXJzW2VdPVtdKTtjb25zdCBpPXRoaXMuX2hhbmRsZXJzW2VdO3JldHVybiBpLnB1c2godCkse2Rpc3Bvc2U6KCk9Pntjb25zdCBlPWkuaW5kZXhPZih0KTstMSE9PWUmJmkuc3BsaWNlKGUsMSl9fX1jbGVhckhhbmRsZXIoZSl7dGhpcy5faGFuZGxlcnNbZV0mJmRlbGV0ZSB0aGlzLl9oYW5kbGVyc1tlXX1zZXRIYW5kbGVyRmFsbGJhY2soZSl7dGhpcy5faGFuZGxlckZiPWV9ZGlzcG9zZSgpe3RoaXMuX2hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5faGFuZGxlckZiPSgpPT57fSx0aGlzLl9hY3RpdmU9bn1yZXNldCgpe2lmKDI9PT10aGlzLl9zdGF0ZSlmb3IobGV0IGU9dGhpcy5fc3RhY2sucGF1c2VkP3RoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbi0xOnRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wOy0tZSl0aGlzLl9hY3RpdmVbZV0uZW5kKCExKTt0aGlzLl9zdGFjay5wYXVzZWQ9ITEsdGhpcy5fYWN0aXZlPW4sdGhpcy5faWQ9LTEsdGhpcy5fc3RhdGU9MH1fc3RhcnQoKXtpZih0aGlzLl9hY3RpdmU9dGhpcy5faGFuZGxlcnNbdGhpcy5faWRdfHxuLHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKGxldCBlPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLl9hY3RpdmVbZV0uc3RhcnQoKTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCxcIlNUQVJUXCIpfV9wdXQoZSx0LGkpe2lmKHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKGxldCBzPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtzPj0wO3MtLSl0aGlzLl9hY3RpdmVbc10ucHV0KGUsdCxpKTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCxcIlBVVFwiLCgwLHIudXRmMzJUb1N0cmluZykoZSx0LGkpKX1zdGFydCgpe3RoaXMucmVzZXQoKSx0aGlzLl9zdGF0ZT0xfXB1dChlLHQsaSl7aWYoMyE9PXRoaXMuX3N0YXRlKXtpZigxPT09dGhpcy5fc3RhdGUpZm9yKDt0PGk7KXtjb25zdCBpPWVbdCsrXTtpZig1OT09PWkpe3RoaXMuX3N0YXRlPTIsdGhpcy5fc3RhcnQoKTticmVha31pZihpPDQ4fHw1NzxpKXJldHVybiB2b2lkKHRoaXMuX3N0YXRlPTMpOy0xPT09dGhpcy5faWQmJih0aGlzLl9pZD0wKSx0aGlzLl9pZD0xMCp0aGlzLl9pZCtpLTQ4fTI9PT10aGlzLl9zdGF0ZSYmaS10PjAmJnRoaXMuX3B1dChlLHQsaSl9fWVuZChlLHQ9ITApe2lmKDAhPT10aGlzLl9zdGF0ZSl7aWYoMyE9PXRoaXMuX3N0YXRlKWlmKDE9PT10aGlzLl9zdGF0ZSYmdGhpcy5fc3RhcnQoKSx0aGlzLl9hY3RpdmUubGVuZ3RoKXtsZXQgaT0hMSxzPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMSxyPSExO2lmKHRoaXMuX3N0YWNrLnBhdXNlZCYmKHM9dGhpcy5fc3RhY2subG9vcFBvc2l0aW9uLTEsaT10LHI9dGhpcy5fc3RhY2suZmFsbFRocm91Z2gsdGhpcy5fc3RhY2sucGF1c2VkPSExKSwhciYmITE9PT1pKXtmb3IoO3M+PTAmJihpPXRoaXMuX2FjdGl2ZVtzXS5lbmQoZSksITAhPT1pKTtzLS0paWYoaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249cyx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMSxpO3MtLX1mb3IoO3M+PTA7cy0tKWlmKGk9dGhpcy5fYWN0aXZlW3NdLmVuZCghMSksaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249cyx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMCxpfWVsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLFwiRU5EXCIsZSk7dGhpcy5fYWN0aXZlPW4sdGhpcy5faWQ9LTEsdGhpcy5fc3RhdGU9MH19fSx0Lk9zY0hhbmRsZXI9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5faGFuZGxlcj1lLHRoaXMuX2RhdGE9XCJcIix0aGlzLl9oaXRMaW1pdD0hMX1zdGFydCgpe3RoaXMuX2RhdGE9XCJcIix0aGlzLl9oaXRMaW1pdD0hMX1wdXQoZSx0LGkpe3RoaXMuX2hpdExpbWl0fHwodGhpcy5fZGF0YSs9KDAsci51dGYzMlRvU3RyaW5nKShlLHQsaSksdGhpcy5fZGF0YS5sZW5ndGg+cy5QQVlMT0FEX0xJTUlUJiYodGhpcy5fZGF0YT1cIlwiLHRoaXMuX2hpdExpbWl0PSEwKSl9ZW5kKGUpe2xldCB0PSExO2lmKHRoaXMuX2hpdExpbWl0KXQ9ITE7ZWxzZSBpZihlJiYodD10aGlzLl9oYW5kbGVyKHRoaXMuX2RhdGEpLHQgaW5zdGFuY2VvZiBQcm9taXNlKSlyZXR1cm4gdC50aGVuKChlPT4odGhpcy5fZGF0YT1cIlwiLHRoaXMuX2hpdExpbWl0PSExLGUpKSk7cmV0dXJuIHRoaXMuX2RhdGE9XCJcIix0aGlzLl9oaXRMaW1pdD0hMSx0fX19LDg3NDI6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LlBhcmFtcz12b2lkIDA7Y29uc3QgaT0yMTQ3NDgzNjQ3O2NsYXNzIHN7c3RhdGljIGZyb21BcnJheShlKXtjb25zdCB0PW5ldyBzO2lmKCFlLmxlbmd0aClyZXR1cm4gdDtmb3IobGV0IGk9QXJyYXkuaXNBcnJheShlWzBdKT8xOjA7aTxlLmxlbmd0aDsrK2kpe2NvbnN0IHM9ZVtpXTtpZihBcnJheS5pc0FycmF5KHMpKWZvcihsZXQgZT0wO2U8cy5sZW5ndGg7KytlKXQuYWRkU3ViUGFyYW0oc1tlXSk7ZWxzZSB0LmFkZFBhcmFtKHMpfXJldHVybiB0fWNvbnN0cnVjdG9yKGU9MzIsdD0zMil7aWYodGhpcy5tYXhMZW5ndGg9ZSx0aGlzLm1heFN1YlBhcmFtc0xlbmd0aD10LHQ+MjU2KXRocm93IG5ldyBFcnJvcihcIm1heFN1YlBhcmFtc0xlbmd0aCBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMjU2XCIpO3RoaXMucGFyYW1zPW5ldyBJbnQzMkFycmF5KGUpLHRoaXMubGVuZ3RoPTAsdGhpcy5fc3ViUGFyYW1zPW5ldyBJbnQzMkFycmF5KHQpLHRoaXMuX3N1YlBhcmFtc0xlbmd0aD0wLHRoaXMuX3N1YlBhcmFtc0lkeD1uZXcgVWludDE2QXJyYXkoZSksdGhpcy5fcmVqZWN0RGlnaXRzPSExLHRoaXMuX3JlamVjdFN1YkRpZ2l0cz0hMSx0aGlzLl9kaWdpdElzU3ViPSExfWNsb25lKCl7Y29uc3QgZT1uZXcgcyh0aGlzLm1heExlbmd0aCx0aGlzLm1heFN1YlBhcmFtc0xlbmd0aCk7cmV0dXJuIGUucGFyYW1zLnNldCh0aGlzLnBhcmFtcyksZS5sZW5ndGg9dGhpcy5sZW5ndGgsZS5fc3ViUGFyYW1zLnNldCh0aGlzLl9zdWJQYXJhbXMpLGUuX3N1YlBhcmFtc0xlbmd0aD10aGlzLl9zdWJQYXJhbXNMZW5ndGgsZS5fc3ViUGFyYW1zSWR4LnNldCh0aGlzLl9zdWJQYXJhbXNJZHgpLGUuX3JlamVjdERpZ2l0cz10aGlzLl9yZWplY3REaWdpdHMsZS5fcmVqZWN0U3ViRGlnaXRzPXRoaXMuX3JlamVjdFN1YkRpZ2l0cyxlLl9kaWdpdElzU3ViPXRoaXMuX2RpZ2l0SXNTdWIsZX10b0FycmF5KCl7Y29uc3QgZT1bXTtmb3IobGV0IHQ9MDt0PHRoaXMubGVuZ3RoOysrdCl7ZS5wdXNoKHRoaXMucGFyYW1zW3RdKTtjb25zdCBpPXRoaXMuX3N1YlBhcmFtc0lkeFt0XT4+OCxzPTI1NSZ0aGlzLl9zdWJQYXJhbXNJZHhbdF07cy1pPjAmJmUucHVzaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9zdWJQYXJhbXMsaSxzKSl9cmV0dXJuIGV9cmVzZXQoKXt0aGlzLmxlbmd0aD0wLHRoaXMuX3N1YlBhcmFtc0xlbmd0aD0wLHRoaXMuX3JlamVjdERpZ2l0cz0hMSx0aGlzLl9yZWplY3RTdWJEaWdpdHM9ITEsdGhpcy5fZGlnaXRJc1N1Yj0hMX1hZGRQYXJhbShlKXtpZih0aGlzLl9kaWdpdElzU3ViPSExLHRoaXMubGVuZ3RoPj10aGlzLm1heExlbmd0aCl0aGlzLl9yZWplY3REaWdpdHM9ITA7ZWxzZXtpZihlPC0xKXRocm93IG5ldyBFcnJvcihcInZhbHVlcyBsZXNzZXIgdGhhbiAtMSBhcmUgbm90IGFsbG93ZWRcIik7dGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoXT10aGlzLl9zdWJQYXJhbXNMZW5ndGg8PDh8dGhpcy5fc3ViUGFyYW1zTGVuZ3RoLHRoaXMucGFyYW1zW3RoaXMubGVuZ3RoKytdPWU+aT9pOmV9fWFkZFN1YlBhcmFtKGUpe2lmKHRoaXMuX2RpZ2l0SXNTdWI9ITAsdGhpcy5sZW5ndGgpaWYodGhpcy5fcmVqZWN0RGlnaXRzfHx0aGlzLl9zdWJQYXJhbXNMZW5ndGg+PXRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoKXRoaXMuX3JlamVjdFN1YkRpZ2l0cz0hMDtlbHNle2lmKGU8LTEpdGhyb3cgbmV3IEVycm9yKFwidmFsdWVzIGxlc3NlciB0aGFuIC0xIGFyZSBub3QgYWxsb3dlZFwiKTt0aGlzLl9zdWJQYXJhbXNbdGhpcy5fc3ViUGFyYW1zTGVuZ3RoKytdPWU+aT9pOmUsdGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoLTFdKyt9fWhhc1N1YlBhcmFtcyhlKXtyZXR1cm4oMjU1JnRoaXMuX3N1YlBhcmFtc0lkeFtlXSktKHRoaXMuX3N1YlBhcmFtc0lkeFtlXT4+OCk+MH1nZXRTdWJQYXJhbXMoZSl7Y29uc3QgdD10aGlzLl9zdWJQYXJhbXNJZHhbZV0+PjgsaT0yNTUmdGhpcy5fc3ViUGFyYW1zSWR4W2VdO3JldHVybiBpLXQ+MD90aGlzLl9zdWJQYXJhbXMuc3ViYXJyYXkodCxpKTpudWxsfWdldFN1YlBhcmFtc0FsbCgpe2NvbnN0IGU9e307Zm9yKGxldCB0PTA7dDx0aGlzLmxlbmd0aDsrK3Qpe2NvbnN0IGk9dGhpcy5fc3ViUGFyYW1zSWR4W3RdPj44LHM9MjU1JnRoaXMuX3N1YlBhcmFtc0lkeFt0XTtzLWk+MCYmKGVbdF09dGhpcy5fc3ViUGFyYW1zLnNsaWNlKGkscykpfXJldHVybiBlfWFkZERpZ2l0KGUpe2xldCB0O2lmKHRoaXMuX3JlamVjdERpZ2l0c3x8ISh0PXRoaXMuX2RpZ2l0SXNTdWI/dGhpcy5fc3ViUGFyYW1zTGVuZ3RoOnRoaXMubGVuZ3RoKXx8dGhpcy5fZGlnaXRJc1N1YiYmdGhpcy5fcmVqZWN0U3ViRGlnaXRzKXJldHVybjtjb25zdCBzPXRoaXMuX2RpZ2l0SXNTdWI/dGhpcy5fc3ViUGFyYW1zOnRoaXMucGFyYW1zLHI9c1t0LTFdO3NbdC0xXT1+cj9NYXRoLm1pbigxMCpyK2UsaSk6ZX19dC5QYXJhbXM9c30sNTc0MTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQWRkb25NYW5hZ2VyPXZvaWQgMCx0LkFkZG9uTWFuYWdlcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuX2FkZG9ucz1bXX1kaXNwb3NlKCl7Zm9yKGxldCBlPXRoaXMuX2FkZG9ucy5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLl9hZGRvbnNbZV0uaW5zdGFuY2UuZGlzcG9zZSgpfWxvYWRBZGRvbihlLHQpe2NvbnN0IGk9e2luc3RhbmNlOnQsZGlzcG9zZTp0LmRpc3Bvc2UsaXNEaXNwb3NlZDohMX07dGhpcy5fYWRkb25zLnB1c2goaSksdC5kaXNwb3NlPSgpPT50aGlzLl93cmFwcGVkQWRkb25EaXNwb3NlKGkpLHQuYWN0aXZhdGUoZSl9X3dyYXBwZWRBZGRvbkRpc3Bvc2UoZSl7aWYoZS5pc0Rpc3Bvc2VkKXJldHVybjtsZXQgdD0tMTtmb3IobGV0IGk9MDtpPHRoaXMuX2FkZG9ucy5sZW5ndGg7aSsrKWlmKHRoaXMuX2FkZG9uc1tpXT09PWUpe3Q9aTticmVha31pZigtMT09PXQpdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGRpc3Bvc2UgYW4gYWRkb24gdGhhdCBoYXMgbm90IGJlZW4gbG9hZGVkXCIpO2UuaXNEaXNwb3NlZD0hMCxlLmRpc3Bvc2UuYXBwbHkoZS5pbnN0YW5jZSksdGhpcy5fYWRkb25zLnNwbGljZSh0LDEpfX19LDg3NzE6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQnVmZmVyQXBpVmlldz12b2lkIDA7Y29uc3Qgcz1pKDM3ODUpLHI9aSg1MTEpO3QuQnVmZmVyQXBpVmlldz1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX2J1ZmZlcj1lLHRoaXMudHlwZT10fWluaXQoZSl7cmV0dXJuIHRoaXMuX2J1ZmZlcj1lLHRoaXN9Z2V0IGN1cnNvclkoKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnl9Z2V0IGN1cnNvclgoKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnh9Z2V0IHZpZXdwb3J0WSgpe3JldHVybiB0aGlzLl9idWZmZXIueWRpc3B9Z2V0IGJhc2VZKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci55YmFzZX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGh9Z2V0TGluZShlKXtjb25zdCB0PXRoaXMuX2J1ZmZlci5saW5lcy5nZXQoZSk7aWYodClyZXR1cm4gbmV3IHMuQnVmZmVyTGluZUFwaVZpZXcodCl9Z2V0TnVsbENlbGwoKXtyZXR1cm4gbmV3IHIuQ2VsbERhdGF9fX0sMzc4NTooZSx0LGkpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5CdWZmZXJMaW5lQXBpVmlldz12b2lkIDA7Y29uc3Qgcz1pKDUxMSk7dC5CdWZmZXJMaW5lQXBpVmlldz1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9saW5lPWV9Z2V0IGlzV3JhcHBlZCgpe3JldHVybiB0aGlzLl9saW5lLmlzV3JhcHBlZH1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuX2xpbmUubGVuZ3RofWdldENlbGwoZSx0KXtpZighKGU8MHx8ZT49dGhpcy5fbGluZS5sZW5ndGgpKXJldHVybiB0Pyh0aGlzLl9saW5lLmxvYWRDZWxsKGUsdCksdCk6dGhpcy5fbGluZS5sb2FkQ2VsbChlLG5ldyBzLkNlbGxEYXRhKX10cmFuc2xhdGVUb1N0cmluZyhlLHQsaSl7cmV0dXJuIHRoaXMuX2xpbmUudHJhbnNsYXRlVG9TdHJpbmcoZSx0LGkpfX19LDgyODU6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQnVmZmVyTmFtZXNwYWNlQXBpPXZvaWQgMDtjb25zdCBzPWkoODc3MSkscj1pKDg0NjApLG49aSg4NDQpO2NsYXNzIG8gZXh0ZW5kcyBuLkRpc3Bvc2FibGV7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl9jb3JlPWUsdGhpcy5fb25CdWZmZXJDaGFuZ2U9dGhpcy5yZWdpc3RlcihuZXcgci5FdmVudEVtaXR0ZXIpLHRoaXMub25CdWZmZXJDaGFuZ2U9dGhpcy5fb25CdWZmZXJDaGFuZ2UuZXZlbnQsdGhpcy5fbm9ybWFsPW5ldyBzLkJ1ZmZlckFwaVZpZXcodGhpcy5fY29yZS5idWZmZXJzLm5vcm1hbCxcIm5vcm1hbFwiKSx0aGlzLl9hbHRlcm5hdGU9bmV3IHMuQnVmZmVyQXBpVmlldyh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0LFwiYWx0ZXJuYXRlXCIpLHRoaXMuX2NvcmUuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKCgoKT0+dGhpcy5fb25CdWZmZXJDaGFuZ2UuZmlyZSh0aGlzLmFjdGl2ZSkpKX1nZXQgYWN0aXZlKCl7aWYodGhpcy5fY29yZS5idWZmZXJzLmFjdGl2ZT09PXRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwpcmV0dXJuIHRoaXMubm9ybWFsO2lmKHRoaXMuX2NvcmUuYnVmZmVycy5hY3RpdmU9PT10aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0KXJldHVybiB0aGlzLmFsdGVybmF0ZTt0aHJvdyBuZXcgRXJyb3IoXCJBY3RpdmUgYnVmZmVyIGlzIG5laXRoZXIgbm9ybWFsIG5vciBhbHRlcm5hdGVcIil9Z2V0IG5vcm1hbCgpe3JldHVybiB0aGlzLl9ub3JtYWwuaW5pdCh0aGlzLl9jb3JlLmJ1ZmZlcnMubm9ybWFsKX1nZXQgYWx0ZXJuYXRlKCl7cmV0dXJuIHRoaXMuX2FsdGVybmF0ZS5pbml0KHRoaXMuX2NvcmUuYnVmZmVycy5hbHQpfX10LkJ1ZmZlck5hbWVzcGFjZUFwaT1vfSw3OTc1OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5QYXJzZXJBcGk9dm9pZCAwLHQuUGFyc2VyQXBpPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuX2NvcmU9ZX1yZWdpc3RlckNzaUhhbmRsZXIoZSx0KXtyZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckNzaUhhbmRsZXIoZSwoZT0+dChlLnRvQXJyYXkoKSkpKX1hZGRDc2lIYW5kbGVyKGUsdCl7cmV0dXJuIHRoaXMucmVnaXN0ZXJDc2lIYW5kbGVyKGUsdCl9cmVnaXN0ZXJEY3NIYW5kbGVyKGUsdCl7cmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJEY3NIYW5kbGVyKGUsKChlLGkpPT50KGUsaS50b0FycmF5KCkpKSl9YWRkRGNzSGFuZGxlcihlLHQpe3JldHVybiB0aGlzLnJlZ2lzdGVyRGNzSGFuZGxlcihlLHQpfXJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpe3JldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpfWFkZEVzY0hhbmRsZXIoZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3RlckVzY0hhbmRsZXIoZSx0KX1yZWdpc3Rlck9zY0hhbmRsZXIoZSx0KXtyZXR1cm4gdGhpcy5fY29yZS5yZWdpc3Rlck9zY0hhbmRsZXIoZSx0KX1hZGRPc2NIYW5kbGVyKGUsdCl7cmV0dXJuIHRoaXMucmVnaXN0ZXJPc2NIYW5kbGVyKGUsdCl9fX0sNzA5MDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuVW5pY29kZUFwaT12b2lkIDAsdC5Vbmljb2RlQXBpPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuX2NvcmU9ZX1yZWdpc3RlcihlKXt0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnJlZ2lzdGVyKGUpfWdldCB2ZXJzaW9ucygpe3JldHVybiB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnZlcnNpb25zfWdldCBhY3RpdmVWZXJzaW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUudW5pY29kZVNlcnZpY2UuYWN0aXZlVmVyc2lvbn1zZXQgYWN0aXZlVmVyc2lvbihlKXt0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLmFjdGl2ZVZlcnNpb249ZX19fSw3NDQ6ZnVuY3Rpb24oZSx0LGkpe3ZhciBzPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LGkscyl7dmFyIHIsbj1hcmd1bWVudHMubGVuZ3RoLG89bjwzP3Q6bnVsbD09PXM/cz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsaSk6cztpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlvPVJlZmxlY3QuZGVjb3JhdGUoZSx0LGkscyk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkocj1lW2FdKSYmKG89KG48Mz9yKG8pOm4+Mz9yKHQsaSxvKTpyKHQsaSkpfHxvKTtyZXR1cm4gbj4zJiZvJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLG8pLG99LHI9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihpLHMpe3QoaSxzLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5CdWZmZXJTZXJ2aWNlPXQuTUlOSU1VTV9ST1dTPXQuTUlOSU1VTV9DT0xTPXZvaWQgMDtjb25zdCBuPWkoODQ2MCksbz1pKDg0NCksYT1pKDUyOTUpLGg9aSgyNTg1KTt0Lk1JTklNVU1fQ09MUz0yLHQuTUlOSU1VTV9ST1dTPTE7bGV0IGM9dC5CdWZmZXJTZXJ2aWNlPWNsYXNzIGV4dGVuZHMgby5EaXNwb3NhYmxle2dldCBidWZmZXIoKXtyZXR1cm4gdGhpcy5idWZmZXJzLmFjdGl2ZX1jb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuaXNVc2VyU2Nyb2xsaW5nPSExLHRoaXMuX29uUmVzaXplPXRoaXMucmVnaXN0ZXIobmV3IG4uRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVzaXplPXRoaXMuX29uUmVzaXplLmV2ZW50LHRoaXMuX29uU2Nyb2xsPXRoaXMucmVnaXN0ZXIobmV3IG4uRXZlbnRFbWl0dGVyKSx0aGlzLm9uU2Nyb2xsPXRoaXMuX29uU2Nyb2xsLmV2ZW50LHRoaXMuY29scz1NYXRoLm1heChlLnJhd09wdGlvbnMuY29sc3x8MCx0Lk1JTklNVU1fQ09MUyksdGhpcy5yb3dzPU1hdGgubWF4KGUucmF3T3B0aW9ucy5yb3dzfHwwLHQuTUlOSU1VTV9ST1dTKSx0aGlzLmJ1ZmZlcnM9dGhpcy5yZWdpc3RlcihuZXcgYS5CdWZmZXJTZXQoZSx0aGlzKSl9cmVzaXplKGUsdCl7dGhpcy5jb2xzPWUsdGhpcy5yb3dzPXQsdGhpcy5idWZmZXJzLnJlc2l6ZShlLHQpLHRoaXMuX29uUmVzaXplLmZpcmUoe2NvbHM6ZSxyb3dzOnR9KX1yZXNldCgpe3RoaXMuYnVmZmVycy5yZXNldCgpLHRoaXMuaXNVc2VyU2Nyb2xsaW5nPSExfXNjcm9sbChlLHQ9ITEpe2NvbnN0IGk9dGhpcy5idWZmZXI7bGV0IHM7cz10aGlzLl9jYWNoZWRCbGFua0xpbmUscyYmcy5sZW5ndGg9PT10aGlzLmNvbHMmJnMuZ2V0RmcoMCk9PT1lLmZnJiZzLmdldEJnKDApPT09ZS5iZ3x8KHM9aS5nZXRCbGFua0xpbmUoZSx0KSx0aGlzLl9jYWNoZWRCbGFua0xpbmU9cykscy5pc1dyYXBwZWQ9dDtjb25zdCByPWkueWJhc2UraS5zY3JvbGxUb3Asbj1pLnliYXNlK2kuc2Nyb2xsQm90dG9tO2lmKDA9PT1pLnNjcm9sbFRvcCl7Y29uc3QgZT1pLmxpbmVzLmlzRnVsbDtuPT09aS5saW5lcy5sZW5ndGgtMT9lP2kubGluZXMucmVjeWNsZSgpLmNvcHlGcm9tKHMpOmkubGluZXMucHVzaChzLmNsb25lKCkpOmkubGluZXMuc3BsaWNlKG4rMSwwLHMuY2xvbmUoKSksZT90aGlzLmlzVXNlclNjcm9sbGluZyYmKGkueWRpc3A9TWF0aC5tYXgoaS55ZGlzcC0xLDApKTooaS55YmFzZSsrLHRoaXMuaXNVc2VyU2Nyb2xsaW5nfHxpLnlkaXNwKyspfWVsc2V7Y29uc3QgZT1uLXIrMTtpLmxpbmVzLnNoaWZ0RWxlbWVudHMocisxLGUtMSwtMSksaS5saW5lcy5zZXQobixzLmNsb25lKCkpfXRoaXMuaXNVc2VyU2Nyb2xsaW5nfHwoaS55ZGlzcD1pLnliYXNlKSx0aGlzLl9vblNjcm9sbC5maXJlKGkueWRpc3ApfXNjcm9sbExpbmVzKGUsdCxpKXtjb25zdCBzPXRoaXMuYnVmZmVyO2lmKGU8MCl7aWYoMD09PXMueWRpc3ApcmV0dXJuO3RoaXMuaXNVc2VyU2Nyb2xsaW5nPSEwfWVsc2UgZStzLnlkaXNwPj1zLnliYXNlJiYodGhpcy5pc1VzZXJTY3JvbGxpbmc9ITEpO2NvbnN0IHI9cy55ZGlzcDtzLnlkaXNwPU1hdGgubWF4KE1hdGgubWluKHMueWRpc3ArZSxzLnliYXNlKSwwKSxyIT09cy55ZGlzcCYmKHR8fHRoaXMuX29uU2Nyb2xsLmZpcmUocy55ZGlzcCkpfX07dC5CdWZmZXJTZXJ2aWNlPWM9cyhbcigwLGguSU9wdGlvbnNTZXJ2aWNlKV0sYyl9LDc5OTQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LkNoYXJzZXRTZXJ2aWNlPXZvaWQgMCx0LkNoYXJzZXRTZXJ2aWNlPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5nbGV2ZWw9MCx0aGlzLl9jaGFyc2V0cz1bXX1yZXNldCgpe3RoaXMuY2hhcnNldD12b2lkIDAsdGhpcy5fY2hhcnNldHM9W10sdGhpcy5nbGV2ZWw9MH1zZXRnTGV2ZWwoZSl7dGhpcy5nbGV2ZWw9ZSx0aGlzLmNoYXJzZXQ9dGhpcy5fY2hhcnNldHNbZV19c2V0Z0NoYXJzZXQoZSx0KXt0aGlzLl9jaGFyc2V0c1tlXT10LHRoaXMuZ2xldmVsPT09ZSYmKHRoaXMuY2hhcnNldD10KX19fSwxNzUzOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxvPW48Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbz1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihvPShuPDM/cihvKTpuPjM/cih0LGksbyk6cih0LGkpKXx8byk7cmV0dXJuIG4+MyYmbyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxvKSxvfSxyPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ29yZU1vdXNlU2VydmljZT12b2lkIDA7Y29uc3Qgbj1pKDI1ODUpLG89aSg4NDYwKSxhPWkoODQ0KSxoPXtOT05FOntldmVudHM6MCxyZXN0cmljdDooKT0+ITF9LFgxMDp7ZXZlbnRzOjEscmVzdHJpY3Q6ZT0+NCE9PWUuYnV0dG9uJiYxPT09ZS5hY3Rpb24mJihlLmN0cmw9ITEsZS5hbHQ9ITEsZS5zaGlmdD0hMSwhMCl9LFZUMjAwOntldmVudHM6MTkscmVzdHJpY3Q6ZT0+MzIhPT1lLmFjdGlvbn0sRFJBRzp7ZXZlbnRzOjIzLHJlc3RyaWN0OmU9PjMyIT09ZS5hY3Rpb258fDMhPT1lLmJ1dHRvbn0sQU5ZOntldmVudHM6MzEscmVzdHJpY3Q6ZT0+ITB9fTtmdW5jdGlvbiBjKGUsdCl7bGV0IGk9KGUuY3RybD8xNjowKXwoZS5zaGlmdD80OjApfChlLmFsdD84OjApO3JldHVybiA0PT09ZS5idXR0b24/KGl8PTY0LGl8PWUuYWN0aW9uKTooaXw9MyZlLmJ1dHRvbiw0JmUuYnV0dG9uJiYoaXw9NjQpLDgmZS5idXR0b24mJihpfD0xMjgpLDMyPT09ZS5hY3Rpb24/aXw9MzI6MCE9PWUuYWN0aW9ufHx0fHwoaXw9MykpLGl9Y29uc3QgbD1TdHJpbmcuZnJvbUNoYXJDb2RlLGQ9e0RFRkFVTFQ6ZT0+e2NvbnN0IHQ9W2MoZSwhMSkrMzIsZS5jb2wrMzIsZS5yb3crMzJdO3JldHVybiB0WzBdPjI1NXx8dFsxXT4yNTV8fHRbMl0+MjU1P1wiXCI6YFx1MDAxYltNJHtsKHRbMF0pfSR7bCh0WzFdKX0ke2wodFsyXSl9YH0sU0dSOmU9Pntjb25zdCB0PTA9PT1lLmFjdGlvbiYmNCE9PWUuYnV0dG9uP1wibVwiOlwiTVwiO3JldHVybmBcdTAwMWJbPCR7YyhlLCEwKX07JHtlLmNvbH07JHtlLnJvd30ke3R9YH0sU0dSX1BJWEVMUzplPT57Y29uc3QgdD0wPT09ZS5hY3Rpb24mJjQhPT1lLmJ1dHRvbj9cIm1cIjpcIk1cIjtyZXR1cm5gXHUwMDFiWzwke2MoZSwhMCl9OyR7ZS54fTske2UueX0ke3R9YH19O2xldCBfPXQuQ29yZU1vdXNlU2VydmljZT1jbGFzcyBleHRlbmRzIGEuRGlzcG9zYWJsZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuX2NvcmVTZXJ2aWNlPXQsdGhpcy5fcHJvdG9jb2xzPXt9LHRoaXMuX2VuY29kaW5ncz17fSx0aGlzLl9hY3RpdmVQcm90b2NvbD1cIlwiLHRoaXMuX2FjdGl2ZUVuY29kaW5nPVwiXCIsdGhpcy5fbGFzdEV2ZW50PW51bGwsdGhpcy5fb25Qcm90b2NvbENoYW5nZT10aGlzLnJlZ2lzdGVyKG5ldyBvLkV2ZW50RW1pdHRlciksdGhpcy5vblByb3RvY29sQ2hhbmdlPXRoaXMuX29uUHJvdG9jb2xDaGFuZ2UuZXZlbnQ7Zm9yKGNvbnN0IGUgb2YgT2JqZWN0LmtleXMoaCkpdGhpcy5hZGRQcm90b2NvbChlLGhbZV0pO2Zvcihjb25zdCBlIG9mIE9iamVjdC5rZXlzKGQpKXRoaXMuYWRkRW5jb2RpbmcoZSxkW2VdKTt0aGlzLnJlc2V0KCl9YWRkUHJvdG9jb2woZSx0KXt0aGlzLl9wcm90b2NvbHNbZV09dH1hZGRFbmNvZGluZyhlLHQpe3RoaXMuX2VuY29kaW5nc1tlXT10fWdldCBhY3RpdmVQcm90b2NvbCgpe3JldHVybiB0aGlzLl9hY3RpdmVQcm90b2NvbH1nZXQgYXJlTW91c2VFdmVudHNBY3RpdmUoKXtyZXR1cm4gMCE9PXRoaXMuX3Byb3RvY29sc1t0aGlzLl9hY3RpdmVQcm90b2NvbF0uZXZlbnRzfXNldCBhY3RpdmVQcm90b2NvbChlKXtpZighdGhpcy5fcHJvdG9jb2xzW2VdKXRocm93IG5ldyBFcnJvcihgdW5rbm93biBwcm90b2NvbCBcIiR7ZX1cImApO3RoaXMuX2FjdGl2ZVByb3RvY29sPWUsdGhpcy5fb25Qcm90b2NvbENoYW5nZS5maXJlKHRoaXMuX3Byb3RvY29sc1tlXS5ldmVudHMpfWdldCBhY3RpdmVFbmNvZGluZygpe3JldHVybiB0aGlzLl9hY3RpdmVFbmNvZGluZ31zZXQgYWN0aXZlRW5jb2RpbmcoZSl7aWYoIXRoaXMuX2VuY29kaW5nc1tlXSl0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gZW5jb2RpbmcgXCIke2V9XCJgKTt0aGlzLl9hY3RpdmVFbmNvZGluZz1lfXJlc2V0KCl7dGhpcy5hY3RpdmVQcm90b2NvbD1cIk5PTkVcIix0aGlzLmFjdGl2ZUVuY29kaW5nPVwiREVGQVVMVFwiLHRoaXMuX2xhc3RFdmVudD1udWxsfXRyaWdnZXJNb3VzZUV2ZW50KGUpe2lmKGUuY29sPDB8fGUuY29sPj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHN8fGUucm93PDB8fGUucm93Pj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpcmV0dXJuITE7aWYoND09PWUuYnV0dG9uJiYzMj09PWUuYWN0aW9uKXJldHVybiExO2lmKDM9PT1lLmJ1dHRvbiYmMzIhPT1lLmFjdGlvbilyZXR1cm4hMTtpZig0IT09ZS5idXR0b24mJigyPT09ZS5hY3Rpb258fDM9PT1lLmFjdGlvbikpcmV0dXJuITE7aWYoZS5jb2wrKyxlLnJvdysrLDMyPT09ZS5hY3Rpb24mJnRoaXMuX2xhc3RFdmVudCYmdGhpcy5fZXF1YWxFdmVudHModGhpcy5fbGFzdEV2ZW50LGUsXCJTR1JfUElYRUxTXCI9PT10aGlzLl9hY3RpdmVFbmNvZGluZykpcmV0dXJuITE7aWYoIXRoaXMuX3Byb3RvY29sc1t0aGlzLl9hY3RpdmVQcm90b2NvbF0ucmVzdHJpY3QoZSkpcmV0dXJuITE7Y29uc3QgdD10aGlzLl9lbmNvZGluZ3NbdGhpcy5fYWN0aXZlRW5jb2RpbmddKGUpO3JldHVybiB0JiYoXCJERUZBVUxUXCI9PT10aGlzLl9hY3RpdmVFbmNvZGluZz90aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyQmluYXJ5RXZlbnQodCk6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh0LCEwKSksdGhpcy5fbGFzdEV2ZW50PWUsITB9ZXhwbGFpbkV2ZW50cyhlKXtyZXR1cm57ZG93bjohISgxJmUpLHVwOiEhKDImZSksZHJhZzohISg0JmUpLG1vdmU6ISEoOCZlKSx3aGVlbDohISgxNiZlKX19X2VxdWFsRXZlbnRzKGUsdCxpKXtpZihpKXtpZihlLnghPT10LngpcmV0dXJuITE7aWYoZS55IT09dC55KXJldHVybiExfWVsc2V7aWYoZS5jb2whPT10LmNvbClyZXR1cm4hMTtpZihlLnJvdyE9PXQucm93KXJldHVybiExfXJldHVybiBlLmJ1dHRvbj09PXQuYnV0dG9uJiZlLmFjdGlvbj09PXQuYWN0aW9uJiZlLmN0cmw9PT10LmN0cmwmJmUuYWx0PT09dC5hbHQmJmUuc2hpZnQ9PT10LnNoaWZ0fX07dC5Db3JlTW91c2VTZXJ2aWNlPV89cyhbcigwLG4uSUJ1ZmZlclNlcnZpY2UpLHIoMSxuLklDb3JlU2VydmljZSldLF8pfSw2OTc1OmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxvPW48Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbz1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihvPShuPDM/cihvKTpuPjM/cih0LGksbyk6cih0LGkpKXx8byk7cmV0dXJuIG4+MyYmbyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxvKSxvfSxyPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuQ29yZVNlcnZpY2U9dm9pZCAwO2NvbnN0IG49aSgxNDM5KSxvPWkoODQ2MCksYT1pKDg0NCksaD1pKDI1ODUpLGM9T2JqZWN0LmZyZWV6ZSh7aW5zZXJ0TW9kZTohMX0pLGw9T2JqZWN0LmZyZWV6ZSh7YXBwbGljYXRpb25DdXJzb3JLZXlzOiExLGFwcGxpY2F0aW9uS2V5cGFkOiExLGJyYWNrZXRlZFBhc3RlTW9kZTohMSxvcmlnaW46ITEscmV2ZXJzZVdyYXBhcm91bmQ6ITEsc2VuZEZvY3VzOiExLHdyYXBhcm91bmQ6ITB9KTtsZXQgZD10LkNvcmVTZXJ2aWNlPWNsYXNzIGV4dGVuZHMgYS5EaXNwb3NhYmxle2NvbnN0cnVjdG9yKGUsdCxpKXtzdXBlcigpLHRoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9sb2dTZXJ2aWNlPXQsdGhpcy5fb3B0aW9uc1NlcnZpY2U9aSx0aGlzLmlzQ3Vyc29ySW5pdGlhbGl6ZWQ9ITEsdGhpcy5pc0N1cnNvckhpZGRlbj0hMSx0aGlzLl9vbkRhdGE9dGhpcy5yZWdpc3RlcihuZXcgby5FdmVudEVtaXR0ZXIpLHRoaXMub25EYXRhPXRoaXMuX29uRGF0YS5ldmVudCx0aGlzLl9vblVzZXJJbnB1dD10aGlzLnJlZ2lzdGVyKG5ldyBvLkV2ZW50RW1pdHRlciksdGhpcy5vblVzZXJJbnB1dD10aGlzLl9vblVzZXJJbnB1dC5ldmVudCx0aGlzLl9vbkJpbmFyeT10aGlzLnJlZ2lzdGVyKG5ldyBvLkV2ZW50RW1pdHRlciksdGhpcy5vbkJpbmFyeT10aGlzLl9vbkJpbmFyeS5ldmVudCx0aGlzLl9vblJlcXVlc3RTY3JvbGxUb0JvdHRvbT10aGlzLnJlZ2lzdGVyKG5ldyBvLkV2ZW50RW1pdHRlciksdGhpcy5vblJlcXVlc3RTY3JvbGxUb0JvdHRvbT10aGlzLl9vblJlcXVlc3RTY3JvbGxUb0JvdHRvbS5ldmVudCx0aGlzLm1vZGVzPSgwLG4uY2xvbmUpKGMpLHRoaXMuZGVjUHJpdmF0ZU1vZGVzPSgwLG4uY2xvbmUpKGwpfXJlc2V0KCl7dGhpcy5tb2Rlcz0oMCxuLmNsb25lKShjKSx0aGlzLmRlY1ByaXZhdGVNb2Rlcz0oMCxuLmNsb25lKShsKX10cmlnZ2VyRGF0YUV2ZW50KGUsdD0hMSl7aWYodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kaXNhYmxlU3RkaW4pcmV0dXJuO2NvbnN0IGk9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7dCYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JvbGxPblVzZXJJbnB1dCYmaS55YmFzZSE9PWkueWRpc3AmJnRoaXMuX29uUmVxdWVzdFNjcm9sbFRvQm90dG9tLmZpcmUoKSx0JiZ0aGlzLl9vblVzZXJJbnB1dC5maXJlKCksdGhpcy5fbG9nU2VydmljZS5kZWJ1Zyhgc2VuZGluZyBkYXRhIFwiJHtlfVwiYCwoKCk9PmUuc3BsaXQoXCJcIikubWFwKChlPT5lLmNoYXJDb2RlQXQoMCkpKSkpLHRoaXMuX29uRGF0YS5maXJlKGUpfXRyaWdnZXJCaW5hcnlFdmVudChlKXt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRpc2FibGVTdGRpbnx8KHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoYHNlbmRpbmcgYmluYXJ5IFwiJHtlfVwiYCwoKCk9PmUuc3BsaXQoXCJcIikubWFwKChlPT5lLmNoYXJDb2RlQXQoMCkpKSkpLHRoaXMuX29uQmluYXJ5LmZpcmUoZSkpfX07dC5Db3JlU2VydmljZT1kPXMoW3IoMCxoLklCdWZmZXJTZXJ2aWNlKSxyKDEsaC5JTG9nU2VydmljZSkscigyLGguSU9wdGlvbnNTZXJ2aWNlKV0sZCl9LDkwNzQ6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuRGVjb3JhdGlvblNlcnZpY2U9dm9pZCAwO2NvbnN0IHM9aSg4MDU1KSxyPWkoODQ2MCksbj1pKDg0NCksbz1pKDYxMDYpO2xldCBhPTAsaD0wO2NsYXNzIGMgZXh0ZW5kcyBuLkRpc3Bvc2FibGV7Z2V0IGRlY29yYXRpb25zKCl7cmV0dXJuIHRoaXMuX2RlY29yYXRpb25zLnZhbHVlcygpfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLl9kZWNvcmF0aW9ucz1uZXcgby5Tb3J0ZWRMaXN0KChlPT5lPy5tYXJrZXIubGluZSkpLHRoaXMuX29uRGVjb3JhdGlvblJlZ2lzdGVyZWQ9dGhpcy5yZWdpc3RlcihuZXcgci5FdmVudEVtaXR0ZXIpLHRoaXMub25EZWNvcmF0aW9uUmVnaXN0ZXJlZD10aGlzLl9vbkRlY29yYXRpb25SZWdpc3RlcmVkLmV2ZW50LHRoaXMuX29uRGVjb3JhdGlvblJlbW92ZWQ9dGhpcy5yZWdpc3RlcihuZXcgci5FdmVudEVtaXR0ZXIpLHRoaXMub25EZWNvcmF0aW9uUmVtb3ZlZD10aGlzLl9vbkRlY29yYXRpb25SZW1vdmVkLmV2ZW50LHRoaXMucmVnaXN0ZXIoKDAsbi50b0Rpc3Bvc2FibGUpKCgoKT0+dGhpcy5yZXNldCgpKSkpfXJlZ2lzdGVyRGVjb3JhdGlvbihlKXtpZihlLm1hcmtlci5pc0Rpc3Bvc2VkKXJldHVybjtjb25zdCB0PW5ldyBsKGUpO2lmKHQpe2NvbnN0IGU9dC5tYXJrZXIub25EaXNwb3NlKCgoKT0+dC5kaXNwb3NlKCkpKTt0Lm9uRGlzcG9zZSgoKCk9Pnt0JiYodGhpcy5fZGVjb3JhdGlvbnMuZGVsZXRlKHQpJiZ0aGlzLl9vbkRlY29yYXRpb25SZW1vdmVkLmZpcmUodCksZS5kaXNwb3NlKCkpfSkpLHRoaXMuX2RlY29yYXRpb25zLmluc2VydCh0KSx0aGlzLl9vbkRlY29yYXRpb25SZWdpc3RlcmVkLmZpcmUodCl9cmV0dXJuIHR9cmVzZXQoKXtmb3IoY29uc3QgZSBvZiB0aGlzLl9kZWNvcmF0aW9ucy52YWx1ZXMoKSllLmRpc3Bvc2UoKTt0aGlzLl9kZWNvcmF0aW9ucy5jbGVhcigpfSpnZXREZWNvcmF0aW9uc0F0Q2VsbChlLHQsaSl7bGV0IHM9MCxyPTA7Zm9yKGNvbnN0IG4gb2YgdGhpcy5fZGVjb3JhdGlvbnMuZ2V0S2V5SXRlcmF0b3IodCkpcz1uLm9wdGlvbnMueD8/MCxyPXMrKG4ub3B0aW9ucy53aWR0aD8/MSksZT49cyYmZTxyJiYoIWl8fChuLm9wdGlvbnMubGF5ZXI/P1wiYm90dG9tXCIpPT09aSkmJih5aWVsZCBuKX1mb3JFYWNoRGVjb3JhdGlvbkF0Q2VsbChlLHQsaSxzKXt0aGlzLl9kZWNvcmF0aW9ucy5mb3JFYWNoQnlLZXkodCwodD0+e2E9dC5vcHRpb25zLng/PzAsaD1hKyh0Lm9wdGlvbnMud2lkdGg/PzEpLGU+PWEmJmU8aCYmKCFpfHwodC5vcHRpb25zLmxheWVyPz9cImJvdHRvbVwiKT09PWkpJiZzKHQpfSkpfX10LkRlY29yYXRpb25TZXJ2aWNlPWM7Y2xhc3MgbCBleHRlbmRzIG4uRGlzcG9zYWJsZXtnZXQgaXNEaXNwb3NlZCgpe3JldHVybiB0aGlzLl9pc0Rpc3Bvc2VkfWdldCBiYWNrZ3JvdW5kQ29sb3JSR0IoKXtyZXR1cm4gbnVsbD09PXRoaXMuX2NhY2hlZEJnJiYodGhpcy5vcHRpb25zLmJhY2tncm91bmRDb2xvcj90aGlzLl9jYWNoZWRCZz1zLmNzcy50b0NvbG9yKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpOnRoaXMuX2NhY2hlZEJnPXZvaWQgMCksdGhpcy5fY2FjaGVkQmd9Z2V0IGZvcmVncm91bmRDb2xvclJHQigpe3JldHVybiBudWxsPT09dGhpcy5fY2FjaGVkRmcmJih0aGlzLm9wdGlvbnMuZm9yZWdyb3VuZENvbG9yP3RoaXMuX2NhY2hlZEZnPXMuY3NzLnRvQ29sb3IodGhpcy5vcHRpb25zLmZvcmVncm91bmRDb2xvcik6dGhpcy5fY2FjaGVkRmc9dm9pZCAwKSx0aGlzLl9jYWNoZWRGZ31jb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMub3B0aW9ucz1lLHRoaXMub25SZW5kZXJFbWl0dGVyPXRoaXMucmVnaXN0ZXIobmV3IHIuRXZlbnRFbWl0dGVyKSx0aGlzLm9uUmVuZGVyPXRoaXMub25SZW5kZXJFbWl0dGVyLmV2ZW50LHRoaXMuX29uRGlzcG9zZT10aGlzLnJlZ2lzdGVyKG5ldyByLkV2ZW50RW1pdHRlciksdGhpcy5vbkRpc3Bvc2U9dGhpcy5fb25EaXNwb3NlLmV2ZW50LHRoaXMuX2NhY2hlZEJnPW51bGwsdGhpcy5fY2FjaGVkRmc9bnVsbCx0aGlzLm1hcmtlcj1lLm1hcmtlcix0aGlzLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMmJiF0aGlzLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24mJih0aGlzLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb249XCJmdWxsXCIpfWRpc3Bvc2UoKXt0aGlzLl9vbkRpc3Bvc2UuZmlyZSgpLHN1cGVyLmRpc3Bvc2UoKX19fSw0MzQ4OihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lkluc3RhbnRpYXRpb25TZXJ2aWNlPXQuU2VydmljZUNvbGxlY3Rpb249dm9pZCAwO2NvbnN0IHM9aSgyNTg1KSxyPWkoODM0Myk7Y2xhc3Mgbntjb25zdHJ1Y3RvciguLi5lKXt0aGlzLl9lbnRyaWVzPW5ldyBNYXA7Zm9yKGNvbnN0W3QsaV1vZiBlKXRoaXMuc2V0KHQsaSl9c2V0KGUsdCl7Y29uc3QgaT10aGlzLl9lbnRyaWVzLmdldChlKTtyZXR1cm4gdGhpcy5fZW50cmllcy5zZXQoZSx0KSxpfWZvckVhY2goZSl7Zm9yKGNvbnN0W3QsaV1vZiB0aGlzLl9lbnRyaWVzLmVudHJpZXMoKSllKHQsaSl9aGFzKGUpe3JldHVybiB0aGlzLl9lbnRyaWVzLmhhcyhlKX1nZXQoZSl7cmV0dXJuIHRoaXMuX2VudHJpZXMuZ2V0KGUpfX10LlNlcnZpY2VDb2xsZWN0aW9uPW4sdC5JbnN0YW50aWF0aW9uU2VydmljZT1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuX3NlcnZpY2VzPW5ldyBuLHRoaXMuX3NlcnZpY2VzLnNldChzLklJbnN0YW50aWF0aW9uU2VydmljZSx0aGlzKX1zZXRTZXJ2aWNlKGUsdCl7dGhpcy5fc2VydmljZXMuc2V0KGUsdCl9Z2V0U2VydmljZShlKXtyZXR1cm4gdGhpcy5fc2VydmljZXMuZ2V0KGUpfWNyZWF0ZUluc3RhbmNlKGUsLi4udCl7Y29uc3QgaT0oMCxyLmdldFNlcnZpY2VEZXBlbmRlbmNpZXMpKGUpLnNvcnQoKChlLHQpPT5lLmluZGV4LXQuaW5kZXgpKSxzPVtdO2Zvcihjb25zdCB0IG9mIGkpe2NvbnN0IGk9dGhpcy5fc2VydmljZXMuZ2V0KHQuaWQpO2lmKCFpKXRocm93IG5ldyBFcnJvcihgW2NyZWF0ZUluc3RhbmNlXSAke2UubmFtZX0gZGVwZW5kcyBvbiBVTktOT1dOIHNlcnZpY2UgJHt0LmlkfS5gKTtzLnB1c2goaSl9Y29uc3Qgbj1pLmxlbmd0aD4wP2lbMF0uaW5kZXg6dC5sZW5ndGg7aWYodC5sZW5ndGghPT1uKXRocm93IG5ldyBFcnJvcihgW2NyZWF0ZUluc3RhbmNlXSBGaXJzdCBzZXJ2aWNlIGRlcGVuZGVuY3kgb2YgJHtlLm5hbWV9IGF0IHBvc2l0aW9uICR7bisxfSBjb25mbGljdHMgd2l0aCAke3QubGVuZ3RofSBzdGF0aWMgYXJndW1lbnRzYCk7cmV0dXJuIG5ldyBlKC4uLlsuLi50LC4uLnNdKX19fSw3ODY2OmZ1bmN0aW9uKGUsdCxpKXt2YXIgcz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxpLHMpe3ZhciByLG49YXJndW1lbnRzLmxlbmd0aCxvPW48Mz90Om51bGw9PT1zP3M9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGkpOnM7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpbz1SZWZsZWN0LmRlY29yYXRlKGUsdCxpLHMpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKHI9ZVthXSkmJihvPShuPDM/cihvKTpuPjM/cih0LGksbyk6cih0LGkpKXx8byk7cmV0dXJuIG4+MyYmbyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSxvKSxvfSxyPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXt0KGkscyxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQudHJhY2VDYWxsPXQuc2V0VHJhY2VMb2dnZXI9dC5Mb2dTZXJ2aWNlPXZvaWQgMDtjb25zdCBuPWkoODQ0KSxvPWkoMjU4NSksYT17dHJhY2U6by5Mb2dMZXZlbEVudW0uVFJBQ0UsZGVidWc6by5Mb2dMZXZlbEVudW0uREVCVUcsaW5mbzpvLkxvZ0xldmVsRW51bS5JTkZPLHdhcm46by5Mb2dMZXZlbEVudW0uV0FSTixlcnJvcjpvLkxvZ0xldmVsRW51bS5FUlJPUixvZmY6by5Mb2dMZXZlbEVudW0uT0ZGfTtsZXQgaCxjPXQuTG9nU2VydmljZT1jbGFzcyBleHRlbmRzIG4uRGlzcG9zYWJsZXtnZXQgbG9nTGV2ZWwoKXtyZXR1cm4gdGhpcy5fbG9nTGV2ZWx9Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl9vcHRpb25zU2VydmljZT1lLHRoaXMuX2xvZ0xldmVsPW8uTG9nTGV2ZWxFbnVtLk9GRix0aGlzLl91cGRhdGVMb2dMZXZlbCgpLHRoaXMucmVnaXN0ZXIodGhpcy5fb3B0aW9uc1NlcnZpY2Uub25TcGVjaWZpY09wdGlvbkNoYW5nZShcImxvZ0xldmVsXCIsKCgpPT50aGlzLl91cGRhdGVMb2dMZXZlbCgpKSkpLGg9dGhpc31fdXBkYXRlTG9nTGV2ZWwoKXt0aGlzLl9sb2dMZXZlbD1hW3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubG9nTGV2ZWxdfV9ldmFsTGF6eU9wdGlvbmFsUGFyYW1zKGUpe2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKVwiZnVuY3Rpb25cIj09dHlwZW9mIGVbdF0mJihlW3RdPWVbdF0oKSl9X2xvZyhlLHQsaSl7dGhpcy5fZXZhbExhenlPcHRpb25hbFBhcmFtcyhpKSxlLmNhbGwoY29uc29sZSwodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/XCJcIjpcInh0ZXJtLmpzOiBcIikrdCwuLi5pKX10cmFjZShlLC4uLnQpe3RoaXMuX2xvZ0xldmVsPD1vLkxvZ0xldmVsRW51bS5UUkFDRSYmdGhpcy5fbG9nKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyPy50cmFjZS5iaW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyKT8/Y29uc29sZS5sb2csZSx0KX1kZWJ1ZyhlLC4uLnQpe3RoaXMuX2xvZ0xldmVsPD1vLkxvZ0xldmVsRW51bS5ERUJVRyYmdGhpcy5fbG9nKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyPy5kZWJ1Zy5iaW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyKT8/Y29uc29sZS5sb2csZSx0KX1pbmZvKGUsLi4udCl7dGhpcy5fbG9nTGV2ZWw8PW8uTG9nTGV2ZWxFbnVtLklORk8mJnRoaXMuX2xvZyh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ2dlcj8uaW5mby5iaW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyKT8/Y29uc29sZS5pbmZvLGUsdCl9d2FybihlLC4uLnQpe3RoaXMuX2xvZ0xldmVsPD1vLkxvZ0xldmVsRW51bS5XQVJOJiZ0aGlzLl9sb2codGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/Lndhcm4uYmluZCh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ2dlcik/P2NvbnNvbGUud2FybixlLHQpfWVycm9yKGUsLi4udCl7dGhpcy5fbG9nTGV2ZWw8PW8uTG9nTGV2ZWxFbnVtLkVSUk9SJiZ0aGlzLl9sb2codGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/LmVycm9yLmJpbmQodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXIpPz9jb25zb2xlLmVycm9yLGUsdCl9fTt0LkxvZ1NlcnZpY2U9Yz1zKFtyKDAsby5JT3B0aW9uc1NlcnZpY2UpXSxjKSx0LnNldFRyYWNlTG9nZ2VyPWZ1bmN0aW9uKGUpe2g9ZX0sdC50cmFjZUNhbGw9ZnVuY3Rpb24oZSx0LGkpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGkudmFsdWUpdGhyb3cgbmV3IEVycm9yKFwibm90IHN1cHBvcnRlZFwiKTtjb25zdCBzPWkudmFsdWU7aS52YWx1ZT1mdW5jdGlvbiguLi5lKXtpZihoLmxvZ0xldmVsIT09by5Mb2dMZXZlbEVudW0uVFJBQ0UpcmV0dXJuIHMuYXBwbHkodGhpcyxlKTtoLnRyYWNlKGBHbHlwaFJlbmRlcmVyIyR7cy5uYW1lfSgke2UubWFwKChlPT5KU09OLnN0cmluZ2lmeShlKSkpLmpvaW4oXCIsIFwiKX0pYCk7Y29uc3QgdD1zLmFwcGx5KHRoaXMsZSk7cmV0dXJuIGgudHJhY2UoYEdseXBoUmVuZGVyZXIjJHtzLm5hbWV9IHJldHVybmAsdCksdH19fSw3MzAyOihlLHQsaSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lk9wdGlvbnNTZXJ2aWNlPXQuREVGQVVMVF9PUFRJT05TPXZvaWQgMDtjb25zdCBzPWkoODQ2MCkscj1pKDg0NCksbj1pKDYxMTQpO3QuREVGQVVMVF9PUFRJT05TPXtjb2xzOjgwLHJvd3M6MjQsY3Vyc29yQmxpbms6ITEsY3Vyc29yU3R5bGU6XCJibG9ja1wiLGN1cnNvcldpZHRoOjEsY3Vyc29ySW5hY3RpdmVTdHlsZTpcIm91dGxpbmVcIixjdXN0b21HbHlwaHM6ITAsZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM6ITAsZG9jdW1lbnRPdmVycmlkZTpudWxsLGZhc3RTY3JvbGxNb2RpZmllcjpcImFsdFwiLGZhc3RTY3JvbGxTZW5zaXRpdml0eTo1LGZvbnRGYW1pbHk6XCJjb3VyaWVyLW5ldywgY291cmllciwgbW9ub3NwYWNlXCIsZm9udFNpemU6MTUsZm9udFdlaWdodDpcIm5vcm1hbFwiLGZvbnRXZWlnaHRCb2xkOlwiYm9sZFwiLGlnbm9yZUJyYWNrZXRlZFBhc3RlTW9kZTohMSxsaW5lSGVpZ2h0OjEsbGV0dGVyU3BhY2luZzowLGxpbmtIYW5kbGVyOm51bGwsbG9nTGV2ZWw6XCJpbmZvXCIsbG9nZ2VyOm51bGwsc2Nyb2xsYmFjazoxZTMsc2Nyb2xsT25Vc2VySW5wdXQ6ITAsc2Nyb2xsU2Vuc2l0aXZpdHk6MSxzY3JlZW5SZWFkZXJNb2RlOiExLHNtb290aFNjcm9sbER1cmF0aW9uOjAsbWFjT3B0aW9uSXNNZXRhOiExLG1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uOiExLG1pbmltdW1Db250cmFzdFJhdGlvOjEsZGlzYWJsZVN0ZGluOiExLGFsbG93UHJvcG9zZWRBcGk6ITEsYWxsb3dUcmFuc3BhcmVuY3k6ITEsdGFiU3RvcFdpZHRoOjgsdGhlbWU6e30scmVzY2FsZU92ZXJsYXBwaW5nR2x5cGhzOiExLHJpZ2h0Q2xpY2tTZWxlY3RzV29yZDpuLmlzTWFjLHdpbmRvd09wdGlvbnM6e30sd2luZG93c01vZGU6ITEsd2luZG93c1B0eTp7fSx3b3JkU2VwYXJhdG9yOlwiICgpW117fScsXFxcImBcIixhbHRDbGlja01vdmVzQ3Vyc29yOiEwLGNvbnZlcnRFb2w6ITEsdGVybU5hbWU6XCJ4dGVybVwiLGNhbmNlbEV2ZW50czohMSxvdmVydmlld1J1bGVyV2lkdGg6MH07Y29uc3Qgbz1bXCJub3JtYWxcIixcImJvbGRcIixcIjEwMFwiLFwiMjAwXCIsXCIzMDBcIixcIjQwMFwiLFwiNTAwXCIsXCI2MDBcIixcIjcwMFwiLFwiODAwXCIsXCI5MDBcIl07Y2xhc3MgYSBleHRlbmRzIHIuRGlzcG9zYWJsZXtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuX29uT3B0aW9uQ2hhbmdlPXRoaXMucmVnaXN0ZXIobmV3IHMuRXZlbnRFbWl0dGVyKSx0aGlzLm9uT3B0aW9uQ2hhbmdlPXRoaXMuX29uT3B0aW9uQ2hhbmdlLmV2ZW50O2NvbnN0IGk9ey4uLnQuREVGQVVMVF9PUFRJT05TfTtmb3IoY29uc3QgdCBpbiBlKWlmKHQgaW4gaSl0cnl7Y29uc3Qgcz1lW3RdO2lbdF09dGhpcy5fc2FuaXRpemVBbmRWYWxpZGF0ZU9wdGlvbih0LHMpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9dGhpcy5yYXdPcHRpb25zPWksdGhpcy5vcHRpb25zPXsuLi5pfSx0aGlzLl9zZXR1cE9wdGlvbnMoKSx0aGlzLnJlZ2lzdGVyKCgwLHIudG9EaXNwb3NhYmxlKSgoKCk9Pnt0aGlzLnJhd09wdGlvbnMubGlua0hhbmRsZXI9bnVsbCx0aGlzLnJhd09wdGlvbnMuZG9jdW1lbnRPdmVycmlkZT1udWxsfSkpKX1vblNwZWNpZmljT3B0aW9uQ2hhbmdlKGUsdCl7cmV0dXJuIHRoaXMub25PcHRpb25DaGFuZ2UoKGk9PntpPT09ZSYmdCh0aGlzLnJhd09wdGlvbnNbZV0pfSkpfW9uTXVsdGlwbGVPcHRpb25DaGFuZ2UoZSx0KXtyZXR1cm4gdGhpcy5vbk9wdGlvbkNoYW5nZSgoaT0+ey0xIT09ZS5pbmRleE9mKGkpJiZ0KCl9KSl9X3NldHVwT3B0aW9ucygpe2NvbnN0IGU9ZT0+e2lmKCEoZSBpbiB0LkRFRkFVTFRfT1BUSU9OUykpdGhyb3cgbmV3IEVycm9yKGBObyBvcHRpb24gd2l0aCBrZXkgXCIke2V9XCJgKTtyZXR1cm4gdGhpcy5yYXdPcHRpb25zW2VdfSxpPShlLGkpPT57aWYoIShlIGluIHQuREVGQVVMVF9PUFRJT05TKSl0aHJvdyBuZXcgRXJyb3IoYE5vIG9wdGlvbiB3aXRoIGtleSBcIiR7ZX1cImApO2k9dGhpcy5fc2FuaXRpemVBbmRWYWxpZGF0ZU9wdGlvbihlLGkpLHRoaXMucmF3T3B0aW9uc1tlXSE9PWkmJih0aGlzLnJhd09wdGlvbnNbZV09aSx0aGlzLl9vbk9wdGlvbkNoYW5nZS5maXJlKGUpKX07Zm9yKGNvbnN0IHQgaW4gdGhpcy5yYXdPcHRpb25zKXtjb25zdCBzPXtnZXQ6ZS5iaW5kKHRoaXMsdCksc2V0OmkuYmluZCh0aGlzLHQpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vcHRpb25zLHQscyl9fV9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKGUsaSl7c3dpdGNoKGUpe2Nhc2VcImN1cnNvclN0eWxlXCI6aWYoaXx8KGk9dC5ERUZBVUxUX09QVElPTlNbZV0pLCFmdW5jdGlvbihlKXtyZXR1cm5cImJsb2NrXCI9PT1lfHxcInVuZGVybGluZVwiPT09ZXx8XCJiYXJcIj09PWV9KGkpKXRocm93IG5ldyBFcnJvcihgXCIke2l9XCIgaXMgbm90IGEgdmFsaWQgdmFsdWUgZm9yICR7ZX1gKTticmVhaztjYXNlXCJ3b3JkU2VwYXJhdG9yXCI6aXx8KGk9dC5ERUZBVUxUX09QVElPTlNbZV0pO2JyZWFrO2Nhc2VcImZvbnRXZWlnaHRcIjpjYXNlXCJmb250V2VpZ2h0Qm9sZFwiOmlmKFwibnVtYmVyXCI9PXR5cGVvZiBpJiYxPD1pJiZpPD0xZTMpYnJlYWs7aT1vLmluY2x1ZGVzKGkpP2k6dC5ERUZBVUxUX09QVElPTlNbZV07YnJlYWs7Y2FzZVwiY3Vyc29yV2lkdGhcIjppPU1hdGguZmxvb3IoaSk7Y2FzZVwibGluZUhlaWdodFwiOmNhc2VcInRhYlN0b3BXaWR0aFwiOmlmKGk8MSl0aHJvdyBuZXcgRXJyb3IoYCR7ZX0gY2Fubm90IGJlIGxlc3MgdGhhbiAxLCB2YWx1ZTogJHtpfWApO2JyZWFrO2Nhc2VcIm1pbmltdW1Db250cmFzdFJhdGlvXCI6aT1NYXRoLm1heCgxLE1hdGgubWluKDIxLE1hdGgucm91bmQoMTAqaSkvMTApKTticmVhaztjYXNlXCJzY3JvbGxiYWNrXCI6aWYoKGk9TWF0aC5taW4oaSw0Mjk0OTY3Mjk1KSk8MCl0aHJvdyBuZXcgRXJyb3IoYCR7ZX0gY2Fubm90IGJlIGxlc3MgdGhhbiAwLCB2YWx1ZTogJHtpfWApO2JyZWFrO2Nhc2VcImZhc3RTY3JvbGxTZW5zaXRpdml0eVwiOmNhc2VcInNjcm9sbFNlbnNpdGl2aXR5XCI6aWYoaTw9MCl0aHJvdyBuZXcgRXJyb3IoYCR7ZX0gY2Fubm90IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAwLCB2YWx1ZTogJHtpfWApO2JyZWFrO2Nhc2VcInJvd3NcIjpjYXNlXCJjb2xzXCI6aWYoIWkmJjAhPT1pKXRocm93IG5ldyBFcnJvcihgJHtlfSBtdXN0IGJlIG51bWVyaWMsIHZhbHVlOiAke2l9YCk7YnJlYWs7Y2FzZVwid2luZG93c1B0eVwiOmk9aT8/e319cmV0dXJuIGl9fXQuT3B0aW9uc1NlcnZpY2U9YX0sMjY2MDpmdW5jdGlvbihlLHQsaSl7dmFyIHM9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQsaSxzKXt2YXIgcixuPWFyZ3VtZW50cy5sZW5ndGgsbz1uPDM/dDpudWxsPT09cz9zPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxpKTpzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBSZWZsZWN0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKW89UmVmbGVjdC5kZWNvcmF0ZShlLHQsaSxzKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShyPWVbYV0pJiYobz0objwzP3Iobyk6bj4zP3IodCxpLG8pOnIodCxpKSl8fG8pO3JldHVybiBuPjMmJm8mJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGksbyksb30scj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKGkscyl7dChpLHMsZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0Lk9zY0xpbmtTZXJ2aWNlPXZvaWQgMDtjb25zdCBuPWkoMjU4NSk7bGV0IG89dC5Pc2NMaW5rU2VydmljZT1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5fbmV4dElkPTEsdGhpcy5fZW50cmllc1dpdGhJZD1uZXcgTWFwLHRoaXMuX2RhdGFCeUxpbmtJZD1uZXcgTWFwfXJlZ2lzdGVyTGluayhlKXtjb25zdCB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO2lmKHZvaWQgMD09PWUuaWQpe2NvbnN0IGk9dC5hZGRNYXJrZXIodC55YmFzZSt0LnkpLHM9e2RhdGE6ZSxpZDp0aGlzLl9uZXh0SWQrKyxsaW5lczpbaV19O3JldHVybiBpLm9uRGlzcG9zZSgoKCk9PnRoaXMuX3JlbW92ZU1hcmtlckZyb21MaW5rKHMsaSkpKSx0aGlzLl9kYXRhQnlMaW5rSWQuc2V0KHMuaWQscykscy5pZH1jb25zdCBpPWUscz10aGlzLl9nZXRFbnRyeUlkS2V5KGkpLHI9dGhpcy5fZW50cmllc1dpdGhJZC5nZXQocyk7aWYocilyZXR1cm4gdGhpcy5hZGRMaW5lVG9MaW5rKHIuaWQsdC55YmFzZSt0LnkpLHIuaWQ7Y29uc3Qgbj10LmFkZE1hcmtlcih0LnliYXNlK3QueSksbz17aWQ6dGhpcy5fbmV4dElkKyssa2V5OnRoaXMuX2dldEVudHJ5SWRLZXkoaSksZGF0YTppLGxpbmVzOltuXX07cmV0dXJuIG4ub25EaXNwb3NlKCgoKT0+dGhpcy5fcmVtb3ZlTWFya2VyRnJvbUxpbmsobyxuKSkpLHRoaXMuX2VudHJpZXNXaXRoSWQuc2V0KG8ua2V5LG8pLHRoaXMuX2RhdGFCeUxpbmtJZC5zZXQoby5pZCxvKSxvLmlkfWFkZExpbmVUb0xpbmsoZSx0KXtjb25zdCBpPXRoaXMuX2RhdGFCeUxpbmtJZC5nZXQoZSk7aWYoaSYmaS5saW5lcy5ldmVyeSgoZT0+ZS5saW5lIT09dCkpKXtjb25zdCBlPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmFkZE1hcmtlcih0KTtpLmxpbmVzLnB1c2goZSksZS5vbkRpc3Bvc2UoKCgpPT50aGlzLl9yZW1vdmVNYXJrZXJGcm9tTGluayhpLGUpKSl9fWdldExpbmtEYXRhKGUpe3JldHVybiB0aGlzLl9kYXRhQnlMaW5rSWQuZ2V0KGUpPy5kYXRhfV9nZXRFbnRyeUlkS2V5KGUpe3JldHVybmAke2UuaWR9Ozske2UudXJpfWB9X3JlbW92ZU1hcmtlckZyb21MaW5rKGUsdCl7Y29uc3QgaT1lLmxpbmVzLmluZGV4T2YodCk7LTEhPT1pJiYoZS5saW5lcy5zcGxpY2UoaSwxKSwwPT09ZS5saW5lcy5sZW5ndGgmJih2b2lkIDAhPT1lLmRhdGEuaWQmJnRoaXMuX2VudHJpZXNXaXRoSWQuZGVsZXRlKGUua2V5KSx0aGlzLl9kYXRhQnlMaW5rSWQuZGVsZXRlKGUuaWQpKSl9fTt0Lk9zY0xpbmtTZXJ2aWNlPW89cyhbcigwLG4uSUJ1ZmZlclNlcnZpY2UpXSxvKX0sODM0MzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuY3JlYXRlRGVjb3JhdG9yPXQuZ2V0U2VydmljZURlcGVuZGVuY2llcz10LnNlcnZpY2VSZWdpc3RyeT12b2lkIDA7Y29uc3QgaT1cImRpJHRhcmdldFwiLHM9XCJkaSRkZXBlbmRlbmNpZXNcIjt0LnNlcnZpY2VSZWdpc3RyeT1uZXcgTWFwLHQuZ2V0U2VydmljZURlcGVuZGVuY2llcz1mdW5jdGlvbihlKXtyZXR1cm4gZVtzXXx8W119LHQuY3JlYXRlRGVjb3JhdG9yPWZ1bmN0aW9uKGUpe2lmKHQuc2VydmljZVJlZ2lzdHJ5LmhhcyhlKSlyZXR1cm4gdC5zZXJ2aWNlUmVnaXN0cnkuZ2V0KGUpO2NvbnN0IHI9ZnVuY3Rpb24oZSx0LG4pe2lmKDMhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkBJU2VydmljZU5hbWUtZGVjb3JhdG9yIGNhbiBvbmx5IGJlIHVzZWQgdG8gZGVjb3JhdGUgYSBwYXJhbWV0ZXJcIik7IWZ1bmN0aW9uKGUsdCxyKXt0W2ldPT09dD90W3NdLnB1c2goe2lkOmUsaW5kZXg6cn0pOih0W3NdPVt7aWQ6ZSxpbmRleDpyfV0sdFtpXT10KX0ocixlLG4pfTtyZXR1cm4gci50b1N0cmluZz0oKT0+ZSx0LnNlcnZpY2VSZWdpc3RyeS5zZXQoZSxyKSxyfX0sMjU4NTooZSx0LGkpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5JRGVjb3JhdGlvblNlcnZpY2U9dC5JVW5pY29kZVNlcnZpY2U9dC5JT3NjTGlua1NlcnZpY2U9dC5JT3B0aW9uc1NlcnZpY2U9dC5JTG9nU2VydmljZT10LkxvZ0xldmVsRW51bT10LklJbnN0YW50aWF0aW9uU2VydmljZT10LklDaGFyc2V0U2VydmljZT10LklDb3JlU2VydmljZT10LklDb3JlTW91c2VTZXJ2aWNlPXQuSUJ1ZmZlclNlcnZpY2U9dm9pZCAwO2NvbnN0IHM9aSg4MzQzKTt2YXIgcjt0LklCdWZmZXJTZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIkJ1ZmZlclNlcnZpY2VcIiksdC5JQ29yZU1vdXNlU2VydmljZT0oMCxzLmNyZWF0ZURlY29yYXRvcikoXCJDb3JlTW91c2VTZXJ2aWNlXCIpLHQuSUNvcmVTZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIkNvcmVTZXJ2aWNlXCIpLHQuSUNoYXJzZXRTZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIkNoYXJzZXRTZXJ2aWNlXCIpLHQuSUluc3RhbnRpYXRpb25TZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIkluc3RhbnRpYXRpb25TZXJ2aWNlXCIpLGZ1bmN0aW9uKGUpe2VbZS5UUkFDRT0wXT1cIlRSQUNFXCIsZVtlLkRFQlVHPTFdPVwiREVCVUdcIixlW2UuSU5GTz0yXT1cIklORk9cIixlW2UuV0FSTj0zXT1cIldBUk5cIixlW2UuRVJST1I9NF09XCJFUlJPUlwiLGVbZS5PRkY9NV09XCJPRkZcIn0ocnx8KHQuTG9nTGV2ZWxFbnVtPXI9e30pKSx0LklMb2dTZXJ2aWNlPSgwLHMuY3JlYXRlRGVjb3JhdG9yKShcIkxvZ1NlcnZpY2VcIiksdC5JT3B0aW9uc1NlcnZpY2U9KDAscy5jcmVhdGVEZWNvcmF0b3IpKFwiT3B0aW9uc1NlcnZpY2VcIiksdC5JT3NjTGlua1NlcnZpY2U9KDAscy5jcmVhdGVEZWNvcmF0b3IpKFwiT3NjTGlua1NlcnZpY2VcIiksdC5JVW5pY29kZVNlcnZpY2U9KDAscy5jcmVhdGVEZWNvcmF0b3IpKFwiVW5pY29kZVNlcnZpY2VcIiksdC5JRGVjb3JhdGlvblNlcnZpY2U9KDAscy5jcmVhdGVEZWNvcmF0b3IpKFwiRGVjb3JhdGlvblNlcnZpY2VcIil9LDE0ODA6KGUsdCxpKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuVW5pY29kZVNlcnZpY2U9dm9pZCAwO2NvbnN0IHM9aSg4NDYwKSxyPWkoMjI1KTtjbGFzcyBue3N0YXRpYyBleHRyYWN0U2hvdWxkSm9pbihlKXtyZXR1cm4gMCE9KDEmZSl9c3RhdGljIGV4dHJhY3RXaWR0aChlKXtyZXR1cm4gZT4+MSYzfXN0YXRpYyBleHRyYWN0Q2hhcktpbmQoZSl7cmV0dXJuIGU+PjN9c3RhdGljIGNyZWF0ZVByb3BlcnR5VmFsdWUoZSx0LGk9ITEpe3JldHVybigxNjc3NzIxNSZlKTw8M3woMyZ0KTw8MXwoaT8xOjApfWNvbnN0cnVjdG9yKCl7dGhpcy5fcHJvdmlkZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fYWN0aXZlPVwiXCIsdGhpcy5fb25DaGFuZ2U9bmV3IHMuRXZlbnRFbWl0dGVyLHRoaXMub25DaGFuZ2U9dGhpcy5fb25DaGFuZ2UuZXZlbnQ7Y29uc3QgZT1uZXcgci5Vbmljb2RlVjY7dGhpcy5yZWdpc3RlcihlKSx0aGlzLl9hY3RpdmU9ZS52ZXJzaW9uLHRoaXMuX2FjdGl2ZVByb3ZpZGVyPWV9ZGlzcG9zZSgpe3RoaXMuX29uQ2hhbmdlLmRpc3Bvc2UoKX1nZXQgdmVyc2lvbnMoKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcHJvdmlkZXJzKX1nZXQgYWN0aXZlVmVyc2lvbigpe3JldHVybiB0aGlzLl9hY3RpdmV9c2V0IGFjdGl2ZVZlcnNpb24oZSl7aWYoIXRoaXMuX3Byb3ZpZGVyc1tlXSl0aHJvdyBuZXcgRXJyb3IoYHVua25vd24gVW5pY29kZSB2ZXJzaW9uIFwiJHtlfVwiYCk7dGhpcy5fYWN0aXZlPWUsdGhpcy5fYWN0aXZlUHJvdmlkZXI9dGhpcy5fcHJvdmlkZXJzW2VdLHRoaXMuX29uQ2hhbmdlLmZpcmUoZSl9cmVnaXN0ZXIoZSl7dGhpcy5fcHJvdmlkZXJzW2UudmVyc2lvbl09ZX13Y3dpZHRoKGUpe3JldHVybiB0aGlzLl9hY3RpdmVQcm92aWRlci53Y3dpZHRoKGUpfWdldFN0cmluZ0NlbGxXaWR0aChlKXtsZXQgdD0wLGk9MDtjb25zdCBzPWUubGVuZ3RoO2ZvcihsZXQgcj0wO3I8czsrK3Ipe2xldCBvPWUuY2hhckNvZGVBdChyKTtpZig1NTI5Njw9byYmbzw9NTYzMTkpe2lmKCsrcj49cylyZXR1cm4gdCt0aGlzLndjd2lkdGgobyk7Y29uc3QgaT1lLmNoYXJDb2RlQXQocik7NTYzMjA8PWkmJmk8PTU3MzQzP289MTAyNCooby01NTI5NikraS01NjMyMCs2NTUzNjp0Kz10aGlzLndjd2lkdGgoaSl9Y29uc3QgYT10aGlzLmNoYXJQcm9wZXJ0aWVzKG8saSk7bGV0IGg9bi5leHRyYWN0V2lkdGgoYSk7bi5leHRyYWN0U2hvdWxkSm9pbihhKSYmKGgtPW4uZXh0cmFjdFdpZHRoKGkpKSx0Kz1oLGk9YX1yZXR1cm4gdH1jaGFyUHJvcGVydGllcyhlLHQpe3JldHVybiB0aGlzLl9hY3RpdmVQcm92aWRlci5jaGFyUHJvcGVydGllcyhlLHQpfX10LlVuaWNvZGVTZXJ2aWNlPW59fSx0PXt9O2Z1bmN0aW9uIGkocyl7dmFyIHI9dFtzXTtpZih2b2lkIDAhPT1yKXJldHVybiByLmV4cG9ydHM7dmFyIG49dFtzXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbc10uY2FsbChuLmV4cG9ydHMsbixuLmV4cG9ydHMsaSksbi5leHBvcnRzfXZhciBzPXt9O3JldHVybigoKT0+e3ZhciBlPXM7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5UZXJtaW5hbD12b2lkIDA7Y29uc3QgdD1pKDkwNDIpLHI9aSgzMjM2KSxuPWkoODQ0KSxvPWkoNTc0MSksYT1pKDgyODUpLGg9aSg3OTc1KSxjPWkoNzA5MCksbD1bXCJjb2xzXCIsXCJyb3dzXCJdO2NsYXNzIGQgZXh0ZW5kcyBuLkRpc3Bvc2FibGV7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl9jb3JlPXRoaXMucmVnaXN0ZXIobmV3IHIuVGVybWluYWwoZSkpLHRoaXMuX2FkZG9uTWFuYWdlcj10aGlzLnJlZ2lzdGVyKG5ldyBvLkFkZG9uTWFuYWdlciksdGhpcy5fcHVibGljT3B0aW9ucz17Li4udGhpcy5fY29yZS5vcHRpb25zfTtjb25zdCB0PWU9PnRoaXMuX2NvcmUub3B0aW9uc1tlXSxpPShlLHQpPT57dGhpcy5fY2hlY2tSZWFkb25seU9wdGlvbnMoZSksdGhpcy5fY29yZS5vcHRpb25zW2VdPXR9O2Zvcihjb25zdCBlIGluIHRoaXMuX2NvcmUub3B0aW9ucyl7Y29uc3Qgcz17Z2V0OnQuYmluZCh0aGlzLGUpLHNldDppLmJpbmQodGhpcyxlKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuX3B1YmxpY09wdGlvbnMsZSxzKX19X2NoZWNrUmVhZG9ubHlPcHRpb25zKGUpe2lmKGwuaW5jbHVkZXMoZSkpdGhyb3cgbmV3IEVycm9yKGBPcHRpb24gXCIke2V9XCIgY2FuIG9ubHkgYmUgc2V0IGluIHRoZSBjb25zdHJ1Y3RvcmApfV9jaGVja1Byb3Bvc2VkQXBpKCl7aWYoIXRoaXMuX2NvcmUub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5hbGxvd1Byb3Bvc2VkQXBpKXRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IHNldCB0aGUgYWxsb3dQcm9wb3NlZEFwaSBvcHRpb24gdG8gdHJ1ZSB0byB1c2UgcHJvcG9zZWQgQVBJXCIpfWdldCBvbkJlbGwoKXtyZXR1cm4gdGhpcy5fY29yZS5vbkJlbGx9Z2V0IG9uQmluYXJ5KCl7cmV0dXJuIHRoaXMuX2NvcmUub25CaW5hcnl9Z2V0IG9uQ3Vyc29yTW92ZSgpe3JldHVybiB0aGlzLl9jb3JlLm9uQ3Vyc29yTW92ZX1nZXQgb25EYXRhKCl7cmV0dXJuIHRoaXMuX2NvcmUub25EYXRhfWdldCBvbktleSgpe3JldHVybiB0aGlzLl9jb3JlLm9uS2V5fWdldCBvbkxpbmVGZWVkKCl7cmV0dXJuIHRoaXMuX2NvcmUub25MaW5lRmVlZH1nZXQgb25SZW5kZXIoKXtyZXR1cm4gdGhpcy5fY29yZS5vblJlbmRlcn1nZXQgb25SZXNpemUoKXtyZXR1cm4gdGhpcy5fY29yZS5vblJlc2l6ZX1nZXQgb25TY3JvbGwoKXtyZXR1cm4gdGhpcy5fY29yZS5vblNjcm9sbH1nZXQgb25TZWxlY3Rpb25DaGFuZ2UoKXtyZXR1cm4gdGhpcy5fY29yZS5vblNlbGVjdGlvbkNoYW5nZX1nZXQgb25UaXRsZUNoYW5nZSgpe3JldHVybiB0aGlzLl9jb3JlLm9uVGl0bGVDaGFuZ2V9Z2V0IG9uV3JpdGVQYXJzZWQoKXtyZXR1cm4gdGhpcy5fY29yZS5vbldyaXRlUGFyc2VkfWdldCBlbGVtZW50KCl7cmV0dXJuIHRoaXMuX2NvcmUuZWxlbWVudH1nZXQgcGFyc2VyKCl7cmV0dXJuIHRoaXMuX3BhcnNlcnx8KHRoaXMuX3BhcnNlcj1uZXcgaC5QYXJzZXJBcGkodGhpcy5fY29yZSkpLHRoaXMuX3BhcnNlcn1nZXQgdW5pY29kZSgpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksbmV3IGMuVW5pY29kZUFwaSh0aGlzLl9jb3JlKX1nZXQgdGV4dGFyZWEoKXtyZXR1cm4gdGhpcy5fY29yZS50ZXh0YXJlYX1nZXQgcm93cygpe3JldHVybiB0aGlzLl9jb3JlLnJvd3N9Z2V0IGNvbHMoKXtyZXR1cm4gdGhpcy5fY29yZS5jb2xzfWdldCBidWZmZXIoKXtyZXR1cm4gdGhpcy5fYnVmZmVyfHwodGhpcy5fYnVmZmVyPXRoaXMucmVnaXN0ZXIobmV3IGEuQnVmZmVyTmFtZXNwYWNlQXBpKHRoaXMuX2NvcmUpKSksdGhpcy5fYnVmZmVyfWdldCBtYXJrZXJzKCl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLm1hcmtlcnN9Z2V0IG1vZGVzKCl7Y29uc3QgZT10aGlzLl9jb3JlLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2RlcztsZXQgdD1cIm5vbmVcIjtzd2l0Y2godGhpcy5fY29yZS5jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sKXtjYXNlXCJYMTBcIjp0PVwieDEwXCI7YnJlYWs7Y2FzZVwiVlQyMDBcIjp0PVwidnQyMDBcIjticmVhaztjYXNlXCJEUkFHXCI6dD1cImRyYWdcIjticmVhaztjYXNlXCJBTllcIjp0PVwiYW55XCJ9cmV0dXJue2FwcGxpY2F0aW9uQ3Vyc29yS2V5c01vZGU6ZS5hcHBsaWNhdGlvbkN1cnNvcktleXMsYXBwbGljYXRpb25LZXlwYWRNb2RlOmUuYXBwbGljYXRpb25LZXlwYWQsYnJhY2tldGVkUGFzdGVNb2RlOmUuYnJhY2tldGVkUGFzdGVNb2RlLGluc2VydE1vZGU6dGhpcy5fY29yZS5jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlLG1vdXNlVHJhY2tpbmdNb2RlOnQsb3JpZ2luTW9kZTplLm9yaWdpbixyZXZlcnNlV3JhcGFyb3VuZE1vZGU6ZS5yZXZlcnNlV3JhcGFyb3VuZCxzZW5kRm9jdXNNb2RlOmUuc2VuZEZvY3VzLHdyYXBhcm91bmRNb2RlOmUud3JhcGFyb3VuZH19Z2V0IG9wdGlvbnMoKXtyZXR1cm4gdGhpcy5fcHVibGljT3B0aW9uc31zZXQgb3B0aW9ucyhlKXtmb3IoY29uc3QgdCBpbiBlKXRoaXMuX3B1YmxpY09wdGlvbnNbdF09ZVt0XX1ibHVyKCl7dGhpcy5fY29yZS5ibHVyKCl9Zm9jdXMoKXt0aGlzLl9jb3JlLmZvY3VzKCl9aW5wdXQoZSx0PSEwKXt0aGlzLl9jb3JlLmlucHV0KGUsdCl9cmVzaXplKGUsdCl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSx0KSx0aGlzLl9jb3JlLnJlc2l6ZShlLHQpfW9wZW4oZSl7dGhpcy5fY29yZS5vcGVuKGUpfWF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihlKXt0aGlzLl9jb3JlLmF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihlKX1hdHRhY2hDdXN0b21XaGVlbEV2ZW50SGFuZGxlcihlKXt0aGlzLl9jb3JlLmF0dGFjaEN1c3RvbVdoZWVsRXZlbnRIYW5kbGVyKGUpfXJlZ2lzdGVyTGlua1Byb3ZpZGVyKGUpe3JldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKGUpfXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGUpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcihlKX1kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGUpe3RoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoZSl9cmVnaXN0ZXJNYXJrZXIoZT0wKXtyZXR1cm4gdGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSksdGhpcy5fY29yZS5yZWdpc3Rlck1hcmtlcihlKX1yZWdpc3RlckRlY29yYXRpb24oZSl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl92ZXJpZnlQb3NpdGl2ZUludGVnZXJzKGUueD8/MCxlLndpZHRoPz8wLGUuaGVpZ2h0Pz8wKSx0aGlzLl9jb3JlLnJlZ2lzdGVyRGVjb3JhdGlvbihlKX1oYXNTZWxlY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5oYXNTZWxlY3Rpb24oKX1zZWxlY3QoZSx0LGkpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUsdCxpKSx0aGlzLl9jb3JlLnNlbGVjdChlLHQsaSl9Z2V0U2VsZWN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUuZ2V0U2VsZWN0aW9uKCl9Z2V0U2VsZWN0aW9uUG9zaXRpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5nZXRTZWxlY3Rpb25Qb3NpdGlvbigpfWNsZWFyU2VsZWN0aW9uKCl7dGhpcy5fY29yZS5jbGVhclNlbGVjdGlvbigpfXNlbGVjdEFsbCgpe3RoaXMuX2NvcmUuc2VsZWN0QWxsKCl9c2VsZWN0TGluZXMoZSx0KXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlLHQpLHRoaXMuX2NvcmUuc2VsZWN0TGluZXMoZSx0KX1kaXNwb3NlKCl7c3VwZXIuZGlzcG9zZSgpfXNjcm9sbExpbmVzKGUpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUpLHRoaXMuX2NvcmUuc2Nyb2xsTGluZXMoZSl9c2Nyb2xsUGFnZXMoZSl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSksdGhpcy5fY29yZS5zY3JvbGxQYWdlcyhlKX1zY3JvbGxUb1RvcCgpe3RoaXMuX2NvcmUuc2Nyb2xsVG9Ub3AoKX1zY3JvbGxUb0JvdHRvbSgpe3RoaXMuX2NvcmUuc2Nyb2xsVG9Cb3R0b20oKX1zY3JvbGxUb0xpbmUoZSl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSksdGhpcy5fY29yZS5zY3JvbGxUb0xpbmUoZSl9Y2xlYXIoKXt0aGlzLl9jb3JlLmNsZWFyKCl9d3JpdGUoZSx0KXt0aGlzLl9jb3JlLndyaXRlKGUsdCl9d3JpdGVsbihlLHQpe3RoaXMuX2NvcmUud3JpdGUoZSksdGhpcy5fY29yZS53cml0ZShcIlxcclxcblwiLHQpfXBhc3RlKGUpe3RoaXMuX2NvcmUucGFzdGUoZSl9cmVmcmVzaChlLHQpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUsdCksdGhpcy5fY29yZS5yZWZyZXNoKGUsdCl9cmVzZXQoKXt0aGlzLl9jb3JlLnJlc2V0KCl9Y2xlYXJUZXh0dXJlQXRsYXMoKXt0aGlzLl9jb3JlLmNsZWFyVGV4dHVyZUF0bGFzKCl9bG9hZEFkZG9uKGUpe3RoaXMuX2FkZG9uTWFuYWdlci5sb2FkQWRkb24odGhpcyxlKX1zdGF0aWMgZ2V0IHN0cmluZ3MoKXtyZXR1cm4gdH1fdmVyaWZ5SW50ZWdlcnMoLi4uZSl7Zm9yKGNvbnN0IHQgb2YgZSlpZih0PT09MS8wfHxpc05hTih0KXx8dCUxIT0wKXRocm93IG5ldyBFcnJvcihcIlRoaXMgQVBJIG9ubHkgYWNjZXB0cyBpbnRlZ2Vyc1wiKX1fdmVyaWZ5UG9zaXRpdmVJbnRlZ2VycyguLi5lKXtmb3IoY29uc3QgdCBvZiBlKWlmKHQmJih0PT09MS8wfHxpc05hTih0KXx8dCUxIT0wfHx0PDApKXRocm93IG5ldyBFcnJvcihcIlRoaXMgQVBJIG9ubHkgYWNjZXB0cyBwb3NpdGl2ZSBpbnRlZ2Vyc1wiKX19ZS5UZXJtaW5hbD1kfSkoKSxzfSkoKSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9eHRlcm0uanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@xterm/xterm/lib/xterm.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/ace.js":
/*!******************************************!*\
  !*** ./node_modules/ace-code/src/ace.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("/**\n * The main class required to set up an Ace instance in the browser.\n *\n * @namespace Ace\n **/\n\n\"include loader_build\";\n\nvar dom = __webpack_require__(/*! ./lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\n\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar Editor = (__webpack_require__(/*! ./editor */ \"./node_modules/ace-code/src/editor.js\").Editor);\nvar EditSession = (__webpack_require__(/*! ./edit_session */ \"./node_modules/ace-code/src/edit_session.js\").EditSession);\nvar UndoManager = (__webpack_require__(/*! ./undomanager */ \"./node_modules/ace-code/src/undomanager.js\").UndoManager);\nvar Renderer = (__webpack_require__(/*! ./virtual_renderer */ \"./node_modules/ace-code/src/virtual_renderer.js\").VirtualRenderer);\n\n// The following require()s are for inclusion in the built ace file\n__webpack_require__(/*! ./worker/worker_client */ \"./node_modules/ace-code/src/worker/worker_client.js\");\n__webpack_require__(/*! ./keyboard/hash_handler */ \"./node_modules/ace-code/src/keyboard/hash_handler.js\");\n__webpack_require__(/*! ./placeholder */ \"./node_modules/ace-code/src/placeholder.js\");\n__webpack_require__(/*! ./multi_select */ \"./node_modules/ace-code/src/multi_select.js\");\n__webpack_require__(/*! ./mode/folding/fold_mode */ \"./node_modules/ace-code/src/mode/folding/fold_mode.js\");\n__webpack_require__(/*! ./theme/textmate */ \"./node_modules/ace-code/src/theme/textmate.js\");\n__webpack_require__(/*! ./ext/error_marker */ \"./node_modules/ace-code/src/ext/error_marker.js\");\n\nexports.config = __webpack_require__(/*! ./config */ \"./node_modules/ace-code/src/config.js\");\n\n\n/**\n * Embeds the Ace editor into the DOM, at the element provided by `el`.\n * @param {String | HTMLElement & {env?: any, value?: any} | null} [el] Either the id of an element, or the element itself\n * @param {Object } [options] Options for the editor\n * @returns {Editor}\n **/\nexports.edit = function(el, options) {\n    if (typeof el == \"string\") {\n        var _id = el;\n        el = document.getElementById(_id);\n        if (!el)\n            throw new Error(\"ace.edit can't find div #\" + _id);\n    }\n\n    if (el && el.env && el.env.editor instanceof Editor)\n        return el.env.editor;\n\n    var value = \"\";\n    if (el && /input|textarea/i.test(el.tagName)) {\n        var oldNode = el;\n        value = oldNode.value;\n        el = dom.createElement(\"pre\");\n        oldNode.parentNode.replaceChild(el, oldNode);\n    } else if (el) {\n        value = el.textContent;\n        el.innerHTML = \"\";\n    }\n\n    var doc = exports.createEditSession(value);\n    var editor = new Editor(new Renderer(el), doc, options);\n\n    var env = {\n        document: doc,\n        editor: editor,\n        onResize: editor.resize.bind(editor, null)\n    };\n    if (oldNode) env.textarea = oldNode;\n    editor.on(\"destroy\", function() {\n        env.editor.container.env = null; // prevent memory leak on old ie\n    });\n    editor.container.env = editor.env = env;\n    return editor;\n};\n\n/**\n * Creates a new [[EditSession]], and returns the associated [[Document]].\n * @param {import('./document').Document | String} text {:textParam}\n * @param {import(\"../ace-internal\").Ace.SyntaxMode} [mode] {:modeParam}\n * @returns {EditSession}\n **/\nexports.createEditSession = function(text, mode) {\n    var doc = new EditSession(text, mode);\n    doc.setUndoManager(new UndoManager());\n    return doc;\n};\nexports.Range = Range;\nexports.Editor = Editor;\nexports.EditSession = EditSession;\nexports.UndoManager = UndoManager;\nexports.VirtualRenderer = Renderer;\nvar version = exports.config.version;\nexports.version = version;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2FjZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7QUFDYjs7QUFFQSxVQUFVLG1CQUFPLENBQUMseURBQVc7O0FBRTdCLFlBQVksa0ZBQXdCO0FBQ3BDLGFBQWEscUZBQTBCO0FBQ3ZDLGtCQUFrQixzR0FBcUM7QUFDdkQsa0JBQWtCLG9HQUFvQztBQUN0RCxlQUFlLGtIQUE2Qzs7QUFFNUQ7QUFDQSxtQkFBTyxDQUFDLG1GQUF3QjtBQUNoQyxtQkFBTyxDQUFDLHFGQUF5QjtBQUNqQyxtQkFBTyxDQUFDLGlFQUFlO0FBQ3ZCLG1CQUFPLENBQUMsbUVBQWdCO0FBQ3hCLG1CQUFPLENBQUMsdUZBQTBCO0FBQ2xDLG1CQUFPLENBQUMsdUVBQWtCO0FBQzFCLG1CQUFPLENBQUMsMkVBQW9COztBQUU1Qiw2RkFBb0M7OztBQUdwQztBQUNBO0FBQ0EsV0FBVyx3QkFBd0Isd0JBQXdCLFFBQVE7QUFDbkUsV0FBVyxTQUFTO0FBQ3BCLGFBQWE7QUFDYjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekMsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyx3Q0FBd0MsTUFBTTtBQUN6RCxXQUFXLDBDQUEwQyxRQUFRO0FBQzdELGFBQWE7QUFDYjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixjQUFjO0FBQ2QsbUJBQW1CO0FBQ25CLG1CQUFtQjtBQUNuQix1QkFBdUI7QUFDdkI7QUFDQSxlQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvYWNlLmpzP2QxZWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgbWFpbiBjbGFzcyByZXF1aXJlZCB0byBzZXQgdXAgYW4gQWNlIGluc3RhbmNlIGluIHRoZSBicm93c2VyLlxuICpcbiAqIEBuYW1lc3BhY2UgQWNlXG4gKiovXG5cInVzZSBzdHJpY3RcIjtcblwiaW5jbHVkZSBsb2FkZXJfYnVpbGRcIjtcblxudmFyIGRvbSA9IHJlcXVpcmUoXCIuL2xpYi9kb21cIik7XG5cbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuL3JhbmdlXCIpLlJhbmdlO1xudmFyIEVkaXRvciA9IHJlcXVpcmUoXCIuL2VkaXRvclwiKS5FZGl0b3I7XG52YXIgRWRpdFNlc3Npb24gPSByZXF1aXJlKFwiLi9lZGl0X3Nlc3Npb25cIikuRWRpdFNlc3Npb247XG52YXIgVW5kb01hbmFnZXIgPSByZXF1aXJlKFwiLi91bmRvbWFuYWdlclwiKS5VbmRvTWFuYWdlcjtcbnZhciBSZW5kZXJlciA9IHJlcXVpcmUoXCIuL3ZpcnR1YWxfcmVuZGVyZXJcIikuVmlydHVhbFJlbmRlcmVyO1xuXG4vLyBUaGUgZm9sbG93aW5nIHJlcXVpcmUoKXMgYXJlIGZvciBpbmNsdXNpb24gaW4gdGhlIGJ1aWx0IGFjZSBmaWxlXG5yZXF1aXJlKFwiLi93b3JrZXIvd29ya2VyX2NsaWVudFwiKTtcbnJlcXVpcmUoXCIuL2tleWJvYXJkL2hhc2hfaGFuZGxlclwiKTtcbnJlcXVpcmUoXCIuL3BsYWNlaG9sZGVyXCIpO1xucmVxdWlyZShcIi4vbXVsdGlfc2VsZWN0XCIpO1xucmVxdWlyZShcIi4vbW9kZS9mb2xkaW5nL2ZvbGRfbW9kZVwiKTtcbnJlcXVpcmUoXCIuL3RoZW1lL3RleHRtYXRlXCIpO1xucmVxdWlyZShcIi4vZXh0L2Vycm9yX21hcmtlclwiKTtcblxuZXhwb3J0cy5jb25maWcgPSByZXF1aXJlKFwiLi9jb25maWdcIik7XG5cblxuLyoqXG4gKiBFbWJlZHMgdGhlIEFjZSBlZGl0b3IgaW50byB0aGUgRE9NLCBhdCB0aGUgZWxlbWVudCBwcm92aWRlZCBieSBgZWxgLlxuICogQHBhcmFtIHtTdHJpbmcgfCBIVE1MRWxlbWVudCAmIHtlbnY/OiBhbnksIHZhbHVlPzogYW55fSB8IG51bGx9IFtlbF0gRWl0aGVyIHRoZSBpZCBvZiBhbiBlbGVtZW50LCBvciB0aGUgZWxlbWVudCBpdHNlbGZcbiAqIEBwYXJhbSB7T2JqZWN0IH0gW29wdGlvbnNdIE9wdGlvbnMgZm9yIHRoZSBlZGl0b3JcbiAqIEByZXR1cm5zIHtFZGl0b3J9XG4gKiovXG5leHBvcnRzLmVkaXQgPSBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgZWwgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB2YXIgX2lkID0gZWw7XG4gICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX2lkKTtcbiAgICAgICAgaWYgKCFlbClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImFjZS5lZGl0IGNhbid0IGZpbmQgZGl2ICNcIiArIF9pZCk7XG4gICAgfVxuXG4gICAgaWYgKGVsICYmIGVsLmVudiAmJiBlbC5lbnYuZWRpdG9yIGluc3RhbmNlb2YgRWRpdG9yKVxuICAgICAgICByZXR1cm4gZWwuZW52LmVkaXRvcjtcblxuICAgIHZhciB2YWx1ZSA9IFwiXCI7XG4gICAgaWYgKGVsICYmIC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZWwudGFnTmFtZSkpIHtcbiAgICAgICAgdmFyIG9sZE5vZGUgPSBlbDtcbiAgICAgICAgdmFsdWUgPSBvbGROb2RlLnZhbHVlO1xuICAgICAgICBlbCA9IGRvbS5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgICBvbGROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGVsLCBvbGROb2RlKTtcbiAgICB9IGVsc2UgaWYgKGVsKSB7XG4gICAgICAgIHZhbHVlID0gZWwudGV4dENvbnRlbnQ7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IFwiXCI7XG4gICAgfVxuXG4gICAgdmFyIGRvYyA9IGV4cG9ydHMuY3JlYXRlRWRpdFNlc3Npb24odmFsdWUpO1xuICAgIHZhciBlZGl0b3IgPSBuZXcgRWRpdG9yKG5ldyBSZW5kZXJlcihlbCksIGRvYywgb3B0aW9ucyk7XG5cbiAgICB2YXIgZW52ID0ge1xuICAgICAgICBkb2N1bWVudDogZG9jLFxuICAgICAgICBlZGl0b3I6IGVkaXRvcixcbiAgICAgICAgb25SZXNpemU6IGVkaXRvci5yZXNpemUuYmluZChlZGl0b3IsIG51bGwpXG4gICAgfTtcbiAgICBpZiAob2xkTm9kZSkgZW52LnRleHRhcmVhID0gb2xkTm9kZTtcbiAgICBlZGl0b3Iub24oXCJkZXN0cm95XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBlbnYuZWRpdG9yLmNvbnRhaW5lci5lbnYgPSBudWxsOyAvLyBwcmV2ZW50IG1lbW9yeSBsZWFrIG9uIG9sZCBpZVxuICAgIH0pO1xuICAgIGVkaXRvci5jb250YWluZXIuZW52ID0gZWRpdG9yLmVudiA9IGVudjtcbiAgICByZXR1cm4gZWRpdG9yO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFtbRWRpdFNlc3Npb25dXSwgYW5kIHJldHVybnMgdGhlIGFzc29jaWF0ZWQgW1tEb2N1bWVudF1dLlxuICogQHBhcmFtIHtpbXBvcnQoJy4vZG9jdW1lbnQnKS5Eb2N1bWVudCB8IFN0cmluZ30gdGV4dCB7OnRleHRQYXJhbX1cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5TeW50YXhNb2RlfSBbbW9kZV0gezptb2RlUGFyYW19XG4gKiBAcmV0dXJucyB7RWRpdFNlc3Npb259XG4gKiovXG5leHBvcnRzLmNyZWF0ZUVkaXRTZXNzaW9uID0gZnVuY3Rpb24odGV4dCwgbW9kZSkge1xuICAgIHZhciBkb2MgPSBuZXcgRWRpdFNlc3Npb24odGV4dCwgbW9kZSk7XG4gICAgZG9jLnNldFVuZG9NYW5hZ2VyKG5ldyBVbmRvTWFuYWdlcigpKTtcbiAgICByZXR1cm4gZG9jO1xufTtcbmV4cG9ydHMuUmFuZ2UgPSBSYW5nZTtcbmV4cG9ydHMuRWRpdG9yID0gRWRpdG9yO1xuZXhwb3J0cy5FZGl0U2Vzc2lvbiA9IEVkaXRTZXNzaW9uO1xuZXhwb3J0cy5VbmRvTWFuYWdlciA9IFVuZG9NYW5hZ2VyO1xuZXhwb3J0cy5WaXJ0dWFsUmVuZGVyZXIgPSBSZW5kZXJlcjtcbnZhciB2ZXJzaW9uID0gZXhwb3J0cy5jb25maWcudmVyc2lvbjtcbmV4cG9ydHMudmVyc2lvbiA9IHZlcnNpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/ace.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/anchor.js":
/*!*********************************************!*\
  !*** ./node_modules/ace-code/src/anchor.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./document\").Document} Document\n */\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\n\n/**\n * Defines a floating pointer in the document. Whenever text is inserted or deleted before the cursor, the position of the anchor is updated.\n **/\nclass Anchor {\n    /**\n     * Creates a new `Anchor` and associates it with a document.\n     *\n     * @param {Document} doc The document to associate with the anchor\n     * @param {Number|import(\"../ace-internal\").Ace.Point} row The starting row position\n     * @param {Number} [column] The starting column position\n     **/\n    constructor(doc, row, column) {\n        this.$onChange = this.onChange.bind(this);\n        this.attach(doc);\n\n        if (typeof row != \"number\")\n            this.setPosition(row.row, row.column);\n        else\n            this.setPosition(row, column);\n    }\n\n    /**\n     * Returns an object identifying the `row` and `column` position of the current anchor.\n     * @returns {import(\"../ace-internal\").Ace.Point}\n     **/\n    getPosition() {\n        return this.$clipPositionToDocument(this.row, this.column);\n    }\n\n    /**\n     *\n     * Returns the current document.\n     * @returns {Document}\n     **/\n    getDocument() {\n        return this.document;\n    }\n\n    /**\n     * Internal function called when `\"change\"` event fired.\n     * @param {import(\"../ace-internal\").Ace.Delta} delta\n     * @internal\n     */\n    onChange(delta) {\n        if (delta.start.row == delta.end.row && delta.start.row != this.row)\n            return;\n\n        if (delta.start.row > this.row)\n            return;\n\n        var point = $getTransformedPoint(delta, {row: this.row, column: this.column}, this.$insertRight);\n        this.setPosition(point.row, point.column, true);\n    }\n\n    /**\n     * Sets the anchor position to the specified row and column. If `noClip` is `true`, the position is not clipped.\n     * @param {Number} row The row index to move the anchor to\n     * @param {Number} column The column index to move the anchor to\n     * @param {Boolean} [noClip] Identifies if you want the position to be clipped\n     **/\n    setPosition(row, column, noClip) {\n        var pos;\n        if (noClip) {\n            pos = {\n                row: row,\n                column: column\n            };\n        } else {\n            pos = this.$clipPositionToDocument(row, column);\n        }\n\n        if (this.row == pos.row && this.column == pos.column)\n            return;\n\n        var old = {\n            row: this.row,\n            column: this.column\n        };\n\n        this.row = pos.row;\n        this.column = pos.column;\n        this._signal(\"change\", {\n            old: old,\n            value: pos\n        });\n    }\n\n    /**\n     * When called, the `\"change\"` event listener is removed.\n     *\n     **/\n    detach() {\n        this.document.off(\"change\", this.$onChange);\n    }\n\n    /**\n     * When called, the `\"change\"` event listener is appended.\n     * @param {Document} doc The document to associate with\n     *\n     **/\n    attach(doc) {\n        /**@type{Document}*/\n        this.document = doc || this.document;\n        this.document.on(\"change\", this.$onChange);\n    }\n\n    /**\n     * Clips the anchor position to the specified row and column.\n     * @param {Number} row The row index to clip the anchor to\n     * @param {Number} column The column index to clip the anchor to\n     * @returns {import(\"../ace-internal\").Ace.Point}\n     *\n     **/\n    $clipPositionToDocument(row, column) {\n        var pos = {};\n\n        if (row >= this.document.getLength()) {\n            pos.row = Math.max(0, this.document.getLength() - 1);\n            pos.column = this.document.getLine(pos.row).length;\n        }\n        else if (row < 0) {\n            pos.row = 0;\n            pos.column = 0;\n        }\n        else {\n            pos.row = row;\n            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n        }\n\n        if (column < 0)\n            pos.column = 0;\n\n        return pos;\n    }\n}\n\n/**\n * experimental: allows anchor to stick to the next on the left\n */\nAnchor.prototype.$insertRight = false;\n\noop.implement(Anchor.prototype, EventEmitter);\n\nfunction $pointsInOrder(point1, point2, equalPointsInOrder) {\n    var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n    return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);\n}\n\nfunction $getTransformedPoint(delta, point, moveIfEqual) {\n    // Get delta info.\n    var deltaIsInsert = delta.action == \"insert\";\n    var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row    - delta.start.row);\n    var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n    var deltaStart = delta.start;\n    var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n\n    // DELTA AFTER POINT: No change needed.\n    if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n        return {\n            row: point.row,\n            column: point.column\n        };\n    }\n\n    // DELTA BEFORE POINT: Move point by delta shift.\n    if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n        return {\n            row: point.row + deltaRowShift,\n            column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n        };\n    }\n\n    // DELTA ENVELOPS POINT (delete only): Move point to delta start.\n    // TODO warn if delta.action != \"remove\" ?\n\n    return {\n        row: deltaStart.row,\n        column: deltaStart.column\n    };\n}\n\nexports.Anchor = Anchor;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2FuY2hvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsYUFBYSwrQkFBK0I7QUFDNUM7QUFDQSxVQUFVLG1CQUFPLENBQUMseURBQVc7QUFDN0IsbUJBQW1CLGlIQUEyQzs7QUFFOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFVBQVU7QUFDekIsZUFBZSw0Q0FBNEM7QUFDM0QsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpREFBaUQsbUNBQW1DO0FBQ3BGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7O0FBRTNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvYW5jaG9yLmpzP2QzMDYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2RvY3VtZW50XCIpLkRvY3VtZW50fSBEb2N1bWVudFxuICovXG52YXIgb29wID0gcmVxdWlyZShcIi4vbGliL29vcFwiKTtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG5cbi8qKlxuICogRGVmaW5lcyBhIGZsb2F0aW5nIHBvaW50ZXIgaW4gdGhlIGRvY3VtZW50LiBXaGVuZXZlciB0ZXh0IGlzIGluc2VydGVkIG9yIGRlbGV0ZWQgYmVmb3JlIHRoZSBjdXJzb3IsIHRoZSBwb3NpdGlvbiBvZiB0aGUgYW5jaG9yIGlzIHVwZGF0ZWQuXG4gKiovXG5jbGFzcyBBbmNob3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEFuY2hvcmAgYW5kIGFzc29jaWF0ZXMgaXQgd2l0aCBhIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtEb2N1bWVudH0gZG9jIFRoZSBkb2N1bWVudCB0byBhc3NvY2lhdGUgd2l0aCB0aGUgYW5jaG9yXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludH0gcm93IFRoZSBzdGFydGluZyByb3cgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2NvbHVtbl0gVGhlIHN0YXJ0aW5nIGNvbHVtbiBwb3NpdGlvblxuICAgICAqKi9cbiAgICBjb25zdHJ1Y3Rvcihkb2MsIHJvdywgY29sdW1uKSB7XG4gICAgICAgIHRoaXMuJG9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmF0dGFjaChkb2MpO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygcm93ICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHJvdy5yb3csIHJvdy5jb2x1bW4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHJvdywgY29sdW1uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBpZGVudGlmeWluZyB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIHBvc2l0aW9uIG9mIHRoZSBjdXJyZW50IGFuY2hvci5cbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludH1cbiAgICAgKiovXG4gICAgZ2V0UG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRjbGlwUG9zaXRpb25Ub0RvY3VtZW50KHRoaXMucm93LCB0aGlzLmNvbHVtbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50LlxuICAgICAqIEByZXR1cm5zIHtEb2N1bWVudH1cbiAgICAgKiovXG4gICAgZ2V0RG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGZ1bmN0aW9uIGNhbGxlZCB3aGVuIGBcImNoYW5nZVwiYCBldmVudCBmaXJlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuRGVsdGF9IGRlbHRhXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25DaGFuZ2UoZGVsdGEpIHtcbiAgICAgICAgaWYgKGRlbHRhLnN0YXJ0LnJvdyA9PSBkZWx0YS5lbmQucm93ICYmIGRlbHRhLnN0YXJ0LnJvdyAhPSB0aGlzLnJvdylcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBpZiAoZGVsdGEuc3RhcnQucm93ID4gdGhpcy5yb3cpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIHBvaW50ID0gJGdldFRyYW5zZm9ybWVkUG9pbnQoZGVsdGEsIHtyb3c6IHRoaXMucm93LCBjb2x1bW46IHRoaXMuY29sdW1ufSwgdGhpcy4kaW5zZXJ0UmlnaHQpO1xuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHBvaW50LnJvdywgcG9pbnQuY29sdW1uLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBhbmNob3IgcG9zaXRpb24gdG8gdGhlIHNwZWNpZmllZCByb3cgYW5kIGNvbHVtbi4gSWYgYG5vQ2xpcGAgaXMgYHRydWVgLCB0aGUgcG9zaXRpb24gaXMgbm90IGNsaXBwZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IGluZGV4IHRvIG1vdmUgdGhlIGFuY2hvciB0b1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gVGhlIGNvbHVtbiBpbmRleCB0byBtb3ZlIHRoZSBhbmNob3IgdG9cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtub0NsaXBdIElkZW50aWZpZXMgaWYgeW91IHdhbnQgdGhlIHBvc2l0aW9uIHRvIGJlIGNsaXBwZWRcbiAgICAgKiovXG4gICAgc2V0UG9zaXRpb24ocm93LCBjb2x1bW4sIG5vQ2xpcCkge1xuICAgICAgICB2YXIgcG9zO1xuICAgICAgICBpZiAobm9DbGlwKSB7XG4gICAgICAgICAgICBwb3MgPSB7XG4gICAgICAgICAgICAgICAgcm93OiByb3csXG4gICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb3MgPSB0aGlzLiRjbGlwUG9zaXRpb25Ub0RvY3VtZW50KHJvdywgY29sdW1uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJvdyA9PSBwb3Mucm93ICYmIHRoaXMuY29sdW1uID09IHBvcy5jb2x1bW4pXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIG9sZCA9IHtcbiAgICAgICAgICAgIHJvdzogdGhpcy5yb3csXG4gICAgICAgICAgICBjb2x1bW46IHRoaXMuY29sdW1uXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yb3cgPSBwb3Mucm93O1xuICAgICAgICB0aGlzLmNvbHVtbiA9IHBvcy5jb2x1bW47XG4gICAgICAgIHRoaXMuX3NpZ25hbChcImNoYW5nZVwiLCB7XG4gICAgICAgICAgICBvbGQ6IG9sZCxcbiAgICAgICAgICAgIHZhbHVlOiBwb3NcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hlbiBjYWxsZWQsIHRoZSBgXCJjaGFuZ2VcImAgZXZlbnQgbGlzdGVuZXIgaXMgcmVtb3ZlZC5cbiAgICAgKlxuICAgICAqKi9cbiAgICBkZXRhY2goKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQub2ZmKFwiY2hhbmdlXCIsIHRoaXMuJG9uQ2hhbmdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIGNhbGxlZCwgdGhlIGBcImNoYW5nZVwiYCBldmVudCBsaXN0ZW5lciBpcyBhcHBlbmRlZC5cbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBkb2MgVGhlIGRvY3VtZW50IHRvIGFzc29jaWF0ZSB3aXRoXG4gICAgICpcbiAgICAgKiovXG4gICAgYXR0YWNoKGRvYykge1xuICAgICAgICAvKipAdHlwZXtEb2N1bWVudH0qL1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jIHx8IHRoaXMuZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQub24oXCJjaGFuZ2VcIiwgdGhpcy4kb25DaGFuZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsaXBzIHRoZSBhbmNob3IgcG9zaXRpb24gdG8gdGhlIHNwZWNpZmllZCByb3cgYW5kIGNvbHVtbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSByb3cgaW5kZXggdG8gY2xpcCB0aGUgYW5jaG9yIHRvXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBUaGUgY29sdW1uIGluZGV4IHRvIGNsaXAgdGhlIGFuY2hvciB0b1xuICAgICAqIEByZXR1cm5zIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlBvaW50fVxuICAgICAqXG4gICAgICoqL1xuICAgICRjbGlwUG9zaXRpb25Ub0RvY3VtZW50KHJvdywgY29sdW1uKSB7XG4gICAgICAgIHZhciBwb3MgPSB7fTtcblxuICAgICAgICBpZiAocm93ID49IHRoaXMuZG9jdW1lbnQuZ2V0TGVuZ3RoKCkpIHtcbiAgICAgICAgICAgIHBvcy5yb3cgPSBNYXRoLm1heCgwLCB0aGlzLmRvY3VtZW50LmdldExlbmd0aCgpIC0gMSk7XG4gICAgICAgICAgICBwb3MuY29sdW1uID0gdGhpcy5kb2N1bWVudC5nZXRMaW5lKHBvcy5yb3cpLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyb3cgPCAwKSB7XG4gICAgICAgICAgICBwb3Mucm93ID0gMDtcbiAgICAgICAgICAgIHBvcy5jb2x1bW4gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9zLnJvdyA9IHJvdztcbiAgICAgICAgICAgIHBvcy5jb2x1bW4gPSBNYXRoLm1pbih0aGlzLmRvY3VtZW50LmdldExpbmUocG9zLnJvdykubGVuZ3RoLCBNYXRoLm1heCgwLCBjb2x1bW4pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb2x1bW4gPCAwKVxuICAgICAgICAgICAgcG9zLmNvbHVtbiA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG59XG5cbi8qKlxuICogZXhwZXJpbWVudGFsOiBhbGxvd3MgYW5jaG9yIHRvIHN0aWNrIHRvIHRoZSBuZXh0IG9uIHRoZSBsZWZ0XG4gKi9cbkFuY2hvci5wcm90b3R5cGUuJGluc2VydFJpZ2h0ID0gZmFsc2U7XG5cbm9vcC5pbXBsZW1lbnQoQW5jaG9yLnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyKTtcblxuZnVuY3Rpb24gJHBvaW50c0luT3JkZXIocG9pbnQxLCBwb2ludDIsIGVxdWFsUG9pbnRzSW5PcmRlcikge1xuICAgIHZhciBiQ29sSXNBZnRlciA9IGVxdWFsUG9pbnRzSW5PcmRlciA/IHBvaW50MS5jb2x1bW4gPD0gcG9pbnQyLmNvbHVtbiA6IHBvaW50MS5jb2x1bW4gPCBwb2ludDIuY29sdW1uO1xuICAgIHJldHVybiAocG9pbnQxLnJvdyA8IHBvaW50Mi5yb3cpIHx8IChwb2ludDEucm93ID09IHBvaW50Mi5yb3cgJiYgYkNvbElzQWZ0ZXIpO1xufVxuXG5mdW5jdGlvbiAkZ2V0VHJhbnNmb3JtZWRQb2ludChkZWx0YSwgcG9pbnQsIG1vdmVJZkVxdWFsKSB7XG4gICAgLy8gR2V0IGRlbHRhIGluZm8uXG4gICAgdmFyIGRlbHRhSXNJbnNlcnQgPSBkZWx0YS5hY3Rpb24gPT0gXCJpbnNlcnRcIjtcbiAgICB2YXIgZGVsdGFSb3dTaGlmdCA9IChkZWx0YUlzSW5zZXJ0ID8gMSA6IC0xKSAqIChkZWx0YS5lbmQucm93ICAgIC0gZGVsdGEuc3RhcnQucm93KTtcbiAgICB2YXIgZGVsdGFDb2xTaGlmdCA9IChkZWx0YUlzSW5zZXJ0ID8gMSA6IC0xKSAqIChkZWx0YS5lbmQuY29sdW1uIC0gZGVsdGEuc3RhcnQuY29sdW1uKTtcbiAgICB2YXIgZGVsdGFTdGFydCA9IGRlbHRhLnN0YXJ0O1xuICAgIHZhciBkZWx0YUVuZCA9IGRlbHRhSXNJbnNlcnQgPyBkZWx0YVN0YXJ0IDogZGVsdGEuZW5kOyAvLyBDb2xsYXBzZSBpbnNlcnQgcmFuZ2UuXG5cbiAgICAvLyBERUxUQSBBRlRFUiBQT0lOVDogTm8gY2hhbmdlIG5lZWRlZC5cbiAgICBpZiAoJHBvaW50c0luT3JkZXIocG9pbnQsIGRlbHRhU3RhcnQsIG1vdmVJZkVxdWFsKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm93OiBwb2ludC5yb3csXG4gICAgICAgICAgICBjb2x1bW46IHBvaW50LmNvbHVtblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIERFTFRBIEJFRk9SRSBQT0lOVDogTW92ZSBwb2ludCBieSBkZWx0YSBzaGlmdC5cbiAgICBpZiAoJHBvaW50c0luT3JkZXIoZGVsdGFFbmQsIHBvaW50LCAhbW92ZUlmRXF1YWwpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb3c6IHBvaW50LnJvdyArIGRlbHRhUm93U2hpZnQsXG4gICAgICAgICAgICBjb2x1bW46IHBvaW50LmNvbHVtbiArIChwb2ludC5yb3cgPT0gZGVsdGFFbmQucm93ID8gZGVsdGFDb2xTaGlmdCA6IDApXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gREVMVEEgRU5WRUxPUFMgUE9JTlQgKGRlbGV0ZSBvbmx5KTogTW92ZSBwb2ludCB0byBkZWx0YSBzdGFydC5cbiAgICAvLyBUT0RPIHdhcm4gaWYgZGVsdGEuYWN0aW9uICE9IFwicmVtb3ZlXCIgP1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm93OiBkZWx0YVN0YXJ0LnJvdyxcbiAgICAgICAgY29sdW1uOiBkZWx0YVN0YXJ0LmNvbHVtblxuICAgIH07XG59XG5cbmV4cG9ydHMuQW5jaG9yID0gQW5jaG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/anchor.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/apply_delta.js":
/*!**************************************************!*\
  !*** ./node_modules/ace-code/src/apply_delta.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nfunction throwDeltaError(delta, errorText){\n    console.log(\"Invalid Delta:\", delta);\n    throw \"Invalid Delta: \" + errorText;\n}\n\nfunction positionInDocument(docLines, position) {\n    return position.row    >= 0 && position.row    <  docLines.length &&\n           position.column >= 0 && position.column <= docLines[position.row].length;\n}\n\nfunction validateDelta(docLines, delta) {\n    // Validate action string.\n    if (delta.action != \"insert\" && delta.action != \"remove\")\n        throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n    \n    // Validate lines type.\n    if (!(delta.lines instanceof Array))\n        throwDeltaError(delta, \"delta.lines must be an Array\");\n\n    // Validate range type.\n    if (!delta.start || !delta.end)\n       throwDeltaError(delta, \"delta.start/end must be an present\");\n\n    // Validate that the start point is contained in the document.\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start))\n        throwDeltaError(delta, \"delta.start must be contained in document\");\n    \n    // Validate that the end point is contained in the document (remove deltas only).\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end))\n        throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n    \n    // Validate that the .range size matches the .lines size.\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)\n        throwDeltaError(delta, \"delta.range must match delta lines\");\n}\n\n/**\n * Applies a delta to a document.\n * @param {string[]} docLines\n * @param {import(\"../ace-internal\").Ace.Delta} delta\n * @param [doNotValidate]\n */\nexports.applyDelta = function(docLines, delta, doNotValidate) {\n    // disabled validation since it breaks autocompletion popup\n    // if (!doNotValidate)\n    //    validateDelta(docLines, delta);\n    \n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n    switch (delta.action) {\n        case \"insert\":\n            var lines = delta.lines;\n            if (lines.length === 1) {\n                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n            } else {\n                // @ts-ignore\n                var args = [row, 1].concat(delta.lines);\n                docLines.splice.apply(docLines, args);\n                docLines[row] = line.substring(0, startColumn) + docLines[row];\n                docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n            }\n            break;\n        case \"remove\":\n            var endColumn = delta.end.column;\n            var endRow = delta.end.row;\n            if (row === endRow) {\n                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n            } else {\n                docLines.splice(\n                    row, endRow - row + 1,\n                    line.substring(0, startColumn) + docLines[endRow].substring(endColumn)\n                );\n            }\n            break;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2FwcGx5X2RlbHRhLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFVBQVU7QUFDckIsV0FBVyxxQ0FBcUM7QUFDaEQ7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9hcHBseV9kZWx0YS5qcz9iZmZmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsIGVycm9yVGV4dCl7XG4gICAgY29uc29sZS5sb2coXCJJbnZhbGlkIERlbHRhOlwiLCBkZWx0YSk7XG4gICAgdGhyb3cgXCJJbnZhbGlkIERlbHRhOiBcIiArIGVycm9yVGV4dDtcbn1cblxuZnVuY3Rpb24gcG9zaXRpb25JbkRvY3VtZW50KGRvY0xpbmVzLCBwb3NpdGlvbikge1xuICAgIHJldHVybiBwb3NpdGlvbi5yb3cgICAgPj0gMCAmJiBwb3NpdGlvbi5yb3cgICAgPCAgZG9jTGluZXMubGVuZ3RoICYmXG4gICAgICAgICAgIHBvc2l0aW9uLmNvbHVtbiA+PSAwICYmIHBvc2l0aW9uLmNvbHVtbiA8PSBkb2NMaW5lc1twb3NpdGlvbi5yb3ddLmxlbmd0aDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEZWx0YShkb2NMaW5lcywgZGVsdGEpIHtcbiAgICAvLyBWYWxpZGF0ZSBhY3Rpb24gc3RyaW5nLlxuICAgIGlmIChkZWx0YS5hY3Rpb24gIT0gXCJpbnNlcnRcIiAmJiBkZWx0YS5hY3Rpb24gIT0gXCJyZW1vdmVcIilcbiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCBcImRlbHRhLmFjdGlvbiBtdXN0IGJlICdpbnNlcnQnIG9yICdyZW1vdmUnXCIpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIGxpbmVzIHR5cGUuXG4gICAgaWYgKCEoZGVsdGEubGluZXMgaW5zdGFuY2VvZiBBcnJheSkpXG4gICAgICAgIHRocm93RGVsdGFFcnJvcihkZWx0YSwgXCJkZWx0YS5saW5lcyBtdXN0IGJlIGFuIEFycmF5XCIpO1xuXG4gICAgLy8gVmFsaWRhdGUgcmFuZ2UgdHlwZS5cbiAgICBpZiAoIWRlbHRhLnN0YXJ0IHx8ICFkZWx0YS5lbmQpXG4gICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCBcImRlbHRhLnN0YXJ0L2VuZCBtdXN0IGJlIGFuIHByZXNlbnRcIik7XG5cbiAgICAvLyBWYWxpZGF0ZSB0aGF0IHRoZSBzdGFydCBwb2ludCBpcyBjb250YWluZWQgaW4gdGhlIGRvY3VtZW50LlxuICAgIHZhciBzdGFydCA9IGRlbHRhLnN0YXJ0O1xuICAgIGlmICghcG9zaXRpb25JbkRvY3VtZW50KGRvY0xpbmVzLCBkZWx0YS5zdGFydCkpXG4gICAgICAgIHRocm93RGVsdGFFcnJvcihkZWx0YSwgXCJkZWx0YS5zdGFydCBtdXN0IGJlIGNvbnRhaW5lZCBpbiBkb2N1bWVudFwiKTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSB0aGF0IHRoZSBlbmQgcG9pbnQgaXMgY29udGFpbmVkIGluIHRoZSBkb2N1bWVudCAocmVtb3ZlIGRlbHRhcyBvbmx5KS5cbiAgICB2YXIgZW5kID0gZGVsdGEuZW5kO1xuICAgIGlmIChkZWx0YS5hY3Rpb24gPT0gXCJyZW1vdmVcIiAmJiAhcG9zaXRpb25JbkRvY3VtZW50KGRvY0xpbmVzLCBlbmQpKVxuICAgICAgICB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsIFwiZGVsdGEuZW5kIG11c3QgY29udGFpbmVkIGluIGRvY3VtZW50IGZvciAncmVtb3ZlJyBhY3Rpb25zXCIpO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRoYXQgdGhlIC5yYW5nZSBzaXplIG1hdGNoZXMgdGhlIC5saW5lcyBzaXplLlxuICAgIHZhciBudW1SYW5nZVJvd3MgPSBlbmQucm93IC0gc3RhcnQucm93O1xuICAgIHZhciBudW1SYW5nZUxhc3RMaW5lQ2hhcnMgPSAoZW5kLmNvbHVtbiAtIChudW1SYW5nZVJvd3MgPT0gMCA/IHN0YXJ0LmNvbHVtbiA6IDApKTtcbiAgICBpZiAobnVtUmFuZ2VSb3dzICE9IGRlbHRhLmxpbmVzLmxlbmd0aCAtIDEgfHwgZGVsdGEubGluZXNbbnVtUmFuZ2VSb3dzXS5sZW5ndGggIT0gbnVtUmFuZ2VMYXN0TGluZUNoYXJzKVxuICAgICAgICB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsIFwiZGVsdGEucmFuZ2UgbXVzdCBtYXRjaCBkZWx0YSBsaW5lc1wiKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgZGVsdGEgdG8gYSBkb2N1bWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nW119IGRvY0xpbmVzXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuRGVsdGF9IGRlbHRhXG4gKiBAcGFyYW0gW2RvTm90VmFsaWRhdGVdXG4gKi9cbmV4cG9ydHMuYXBwbHlEZWx0YSA9IGZ1bmN0aW9uKGRvY0xpbmVzLCBkZWx0YSwgZG9Ob3RWYWxpZGF0ZSkge1xuICAgIC8vIGRpc2FibGVkIHZhbGlkYXRpb24gc2luY2UgaXQgYnJlYWtzIGF1dG9jb21wbGV0aW9uIHBvcHVwXG4gICAgLy8gaWYgKCFkb05vdFZhbGlkYXRlKVxuICAgIC8vICAgIHZhbGlkYXRlRGVsdGEoZG9jTGluZXMsIGRlbHRhKTtcbiAgICBcbiAgICB2YXIgcm93ID0gZGVsdGEuc3RhcnQucm93O1xuICAgIHZhciBzdGFydENvbHVtbiA9IGRlbHRhLnN0YXJ0LmNvbHVtbjtcbiAgICB2YXIgbGluZSA9IGRvY0xpbmVzW3Jvd10gfHwgXCJcIjtcbiAgICBzd2l0Y2ggKGRlbHRhLmFjdGlvbikge1xuICAgICAgICBjYXNlIFwiaW5zZXJ0XCI6XG4gICAgICAgICAgICB2YXIgbGluZXMgPSBkZWx0YS5saW5lcztcbiAgICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBkb2NMaW5lc1tyb3ddID0gbGluZS5zdWJzdHJpbmcoMCwgc3RhcnRDb2x1bW4pICsgZGVsdGEubGluZXNbMF0gKyBsaW5lLnN1YnN0cmluZyhzdGFydENvbHVtbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtyb3csIDFdLmNvbmNhdChkZWx0YS5saW5lcyk7XG4gICAgICAgICAgICAgICAgZG9jTGluZXMuc3BsaWNlLmFwcGx5KGRvY0xpbmVzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICBkb2NMaW5lc1tyb3ddID0gbGluZS5zdWJzdHJpbmcoMCwgc3RhcnRDb2x1bW4pICsgZG9jTGluZXNbcm93XTtcbiAgICAgICAgICAgICAgICBkb2NMaW5lc1tyb3cgKyBkZWx0YS5saW5lcy5sZW5ndGggLSAxXSArPSBsaW5lLnN1YnN0cmluZyhzdGFydENvbHVtbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInJlbW92ZVwiOlxuICAgICAgICAgICAgdmFyIGVuZENvbHVtbiA9IGRlbHRhLmVuZC5jb2x1bW47XG4gICAgICAgICAgICB2YXIgZW5kUm93ID0gZGVsdGEuZW5kLnJvdztcbiAgICAgICAgICAgIGlmIChyb3cgPT09IGVuZFJvdykge1xuICAgICAgICAgICAgICAgIGRvY0xpbmVzW3Jvd10gPSBsaW5lLnN1YnN0cmluZygwLCBzdGFydENvbHVtbikgKyBsaW5lLnN1YnN0cmluZyhlbmRDb2x1bW4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb2NMaW5lcy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgIHJvdywgZW5kUm93IC0gcm93ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgbGluZS5zdWJzdHJpbmcoMCwgc3RhcnRDb2x1bW4pICsgZG9jTGluZXNbZW5kUm93XS5zdWJzdHJpbmcoZW5kQ29sdW1uKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/apply_delta.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/background_tokenizer.js":
/*!***********************************************************!*\
  !*** ./node_modules/ace-code/src/background_tokenizer.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./document\").Document} Document\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n * @typedef {import(\"./tokenizer\").Tokenizer} Tokenizer\n */\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\n\n/**\n * Tokenizes the current [[Document `Document`]] in the background, and caches the tokenized rows for future use. \n * \n * If a certain row is changed, everything below that row is re-tokenized.\n **/\nclass BackgroundTokenizer {\n    \n    /**\n     * Creates a new `BackgroundTokenizer` object.\n     * @param {Tokenizer} tokenizer The tokenizer to use\n     * @param {EditSession} [session] The editor session to associate with\n     **/\n    constructor(tokenizer, session) {\n        /**@type {false|number}*/\n        this.running = false;\n        this.lines = [];\n        /**@type {string[]|string[][]}*/\n        this.states = [];\n        this.currentLine = 0;\n        this.tokenizer = tokenizer;\n\n        var self = this;\n\n        this.$worker = function() {\n            if (!self.running) { return; }\n\n            var workerStart = new Date();\n            var currentLine = self.currentLine;\n            var endLine = -1;\n            var doc = self.doc;\n\n            var startLine = currentLine;\n            while (self.lines[currentLine])\n                currentLine++;\n\n            var len = doc.getLength();\n            var processedLines = 0;\n            self.running = false;\n            while (currentLine < len) {\n                self.$tokenizeRow(currentLine);\n                endLine = currentLine;\n                do {\n                    currentLine++;\n                } while (self.lines[currentLine]);\n\n                // only check every 5 lines\n                processedLines ++;\n                // @ts-ignore\n                if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {\n                    self.running = setTimeout(self.$worker, 20);\n                    break;\n                }\n            }\n            self.currentLine = currentLine;\n\n            if (endLine == -1)\n                endLine = currentLine;\n\n            if (startLine <= endLine)\n                self.fireUpdateEvent(startLine, endLine);\n        };\n    }\n    \n    /**\n     * Sets a new tokenizer for this object.\n     * @param {Tokenizer} tokenizer The new tokenizer to use\n     **/\n    setTokenizer(tokenizer) {\n        this.tokenizer = tokenizer;\n        this.lines = [];\n        this.states = [];\n\n        this.start(0);\n    }\n\n    /**\n     * Sets a new document to associate with this object.\n     * @param {Document} doc The new document to associate with\n     **/\n    setDocument(doc) {\n        this.doc = doc;\n        this.lines = [];\n        this.states = [];\n\n        this.stop();\n    }\n\n\n    /**\n     * Emits the `'update'` event. `firstRow` and `lastRow` are used to define the boundaries of the region to be updated.\n     * @param {Number} firstRow The starting row region\n     * @param {Number} lastRow The final row region\n     **/\n    fireUpdateEvent(firstRow, lastRow) {\n        var data = {\n            first: firstRow,\n            last: lastRow\n        };\n        this._signal(\"update\", {data: data});\n    }\n\n    /**\n     * Starts tokenizing at the row indicated.\n     * @param {Number} startRow The row to start at\n     **/\n    start(startRow) {\n        this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());\n\n        // remove all cached items below this line\n        this.lines.splice(this.currentLine, this.lines.length);\n        this.states.splice(this.currentLine, this.states.length);\n\n        this.stop();\n        // pretty long delay to prevent the tokenizer from interfering with the user\n        this.running = setTimeout(this.$worker, 700);\n    }\n\n    /**\n     * Sets pretty long delay to prevent the tokenizer from interfering with the user\n     */\n    scheduleStart() {\n        if (!this.running)\n            this.running = setTimeout(this.$worker, 700);\n    }\n\n    /**\n     * @param {import(\"../ace-internal\").Ace.Delta} delta\n     */\n    $updateOnChange(delta) {\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n\n        if (len === 0) {\n            this.lines[startRow] = null;\n        } else if (delta.action == \"remove\") {\n            this.lines.splice(startRow, len + 1, null);\n            this.states.splice(startRow, len + 1, null);\n        } else {\n            var args = Array(len + 1);\n            args.unshift(startRow, 1);\n            this.lines.splice.apply(this.lines, args);\n            this.states.splice.apply(this.states, args);\n        }\n\n        this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());\n\n        this.stop();\n    }\n\n    /**\n     * Stops tokenizing.\n     **/\n    stop() {\n        if (this.running)\n            clearTimeout(this.running);\n        this.running = false;\n    }\n\n    /**\n     * Gives list of [[Token]]'s of the row. (tokens are cached)\n     * @param {Number} row The row to get tokens at\n     * @returns {import(\"../ace-internal\").Ace.Token[]}\n     **/\n    getTokens(row) {\n        return this.lines[row] || this.$tokenizeRow(row);\n    }\n\n    /**\n     * Returns the state of tokenization at the end of a row.\n     * @param {Number} row The row to get state at\n     * @returns {string | string[]}\n     **/\n    getState(row) {\n        if (this.currentLine == row)\n            this.$tokenizeRow(row);\n        return this.states[row] || \"start\";\n    }\n\n    /**\n     * @param {number} row\n     */\n    $tokenizeRow(row) {\n        var line = this.doc.getLine(row);\n        var state = this.states[row - 1];\n        // @ts-expect-error TODO: potential wrong argument\n        var data = this.tokenizer.getLineTokens(line, state, row);\n\n        if (this.states[row] + \"\" !== data.state + \"\") {\n            this.states[row] = data.state;\n            this.lines[row + 1] = null;\n            if (this.currentLine > row + 1)\n                this.currentLine = row + 1;\n        } else if (this.currentLine == row) {\n            this.currentLine = row + 1;\n        }\n\n        return this.lines[row] = data.tokens;\n    }\n\n    cleanup() {\n        this.running = false;\n        this.lines = [];\n        this.states = [];\n        this.currentLine = 0;\n        this.removeAllListeners();\n    }\n\n}\n\noop.implement(BackgroundTokenizer.prototype, EventEmitter);\n\nexports.BackgroundTokenizer = BackgroundTokenizer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2JhY2tncm91bmRfdG9rZW5pemVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxhQUFhLCtCQUErQjtBQUM1QyxhQUFhLHNDQUFzQztBQUNuRCxhQUFhLGlDQUFpQztBQUM5QztBQUNBLFVBQVUsbUJBQU8sQ0FBQyx5REFBVztBQUM3QixtQkFBbUIsaUhBQTJDOztBQUU5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUIsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQSxrQkFBa0IsYUFBYTtBQUMvQjtBQUNBO0FBQ0Esa0JBQWtCLG9CQUFvQjtBQUN0QztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxpQ0FBaUM7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsV0FBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxXQUFXO0FBQzNDOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLDJCQUEyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2JhY2tncm91bmRfdG9rZW5pemVyLmpzPzczNGQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2RvY3VtZW50XCIpLkRvY3VtZW50fSBEb2N1bWVudFxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vdG9rZW5pemVyXCIpLlRva2VuaXplcn0gVG9rZW5pemVyXG4gKi9cbnZhciBvb3AgPSByZXF1aXJlKFwiLi9saWIvb29wXCIpO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoXCIuL2xpYi9ldmVudF9lbWl0dGVyXCIpLkV2ZW50RW1pdHRlcjtcblxuLyoqXG4gKiBUb2tlbml6ZXMgdGhlIGN1cnJlbnQgW1tEb2N1bWVudCBgRG9jdW1lbnRgXV0gaW4gdGhlIGJhY2tncm91bmQsIGFuZCBjYWNoZXMgdGhlIHRva2VuaXplZCByb3dzIGZvciBmdXR1cmUgdXNlLiBcbiAqIFxuICogSWYgYSBjZXJ0YWluIHJvdyBpcyBjaGFuZ2VkLCBldmVyeXRoaW5nIGJlbG93IHRoYXQgcm93IGlzIHJlLXRva2VuaXplZC5cbiAqKi9cbmNsYXNzIEJhY2tncm91bmRUb2tlbml6ZXIge1xuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJhY2tncm91bmRUb2tlbml6ZXJgIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge1Rva2VuaXplcn0gdG9rZW5pemVyIFRoZSB0b2tlbml6ZXIgdG8gdXNlXG4gICAgICogQHBhcmFtIHtFZGl0U2Vzc2lvbn0gW3Nlc3Npb25dIFRoZSBlZGl0b3Igc2Vzc2lvbiB0byBhc3NvY2lhdGUgd2l0aFxuICAgICAqKi9cbiAgICBjb25zdHJ1Y3Rvcih0b2tlbml6ZXIsIHNlc3Npb24pIHtcbiAgICAgICAgLyoqQHR5cGUge2ZhbHNlfG51bWJlcn0qL1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5saW5lcyA9IFtdO1xuICAgICAgICAvKipAdHlwZSB7c3RyaW5nW118c3RyaW5nW11bXX0qL1xuICAgICAgICB0aGlzLnN0YXRlcyA9IFtdO1xuICAgICAgICB0aGlzLmN1cnJlbnRMaW5lID0gMDtcbiAgICAgICAgdGhpcy50b2tlbml6ZXIgPSB0b2tlbml6ZXI7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuJHdvcmtlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFzZWxmLnJ1bm5pbmcpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgIHZhciB3b3JrZXJTdGFydCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB2YXIgY3VycmVudExpbmUgPSBzZWxmLmN1cnJlbnRMaW5lO1xuICAgICAgICAgICAgdmFyIGVuZExpbmUgPSAtMTtcbiAgICAgICAgICAgIHZhciBkb2MgPSBzZWxmLmRvYztcblxuICAgICAgICAgICAgdmFyIHN0YXJ0TGluZSA9IGN1cnJlbnRMaW5lO1xuICAgICAgICAgICAgd2hpbGUgKHNlbGYubGluZXNbY3VycmVudExpbmVdKVxuICAgICAgICAgICAgICAgIGN1cnJlbnRMaW5lKys7XG5cbiAgICAgICAgICAgIHZhciBsZW4gPSBkb2MuZ2V0TGVuZ3RoKCk7XG4gICAgICAgICAgICB2YXIgcHJvY2Vzc2VkTGluZXMgPSAwO1xuICAgICAgICAgICAgc2VsZi5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudExpbmUgPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBzZWxmLiR0b2tlbml6ZVJvdyhjdXJyZW50TGluZSk7XG4gICAgICAgICAgICAgICAgZW5kTGluZSA9IGN1cnJlbnRMaW5lO1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExpbmUrKztcbiAgICAgICAgICAgICAgICB9IHdoaWxlIChzZWxmLmxpbmVzW2N1cnJlbnRMaW5lXSk7XG5cbiAgICAgICAgICAgICAgICAvLyBvbmx5IGNoZWNrIGV2ZXJ5IDUgbGluZXNcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWRMaW5lcyArKztcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzZWRMaW5lcyAlIDUgPT09IDApICYmIChuZXcgRGF0ZSgpIC0gd29ya2VyU3RhcnQpID4gMjApIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5ydW5uaW5nID0gc2V0VGltZW91dChzZWxmLiR3b3JrZXIsIDIwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5jdXJyZW50TGluZSA9IGN1cnJlbnRMaW5lO1xuXG4gICAgICAgICAgICBpZiAoZW5kTGluZSA9PSAtMSlcbiAgICAgICAgICAgICAgICBlbmRMaW5lID0gY3VycmVudExpbmU7XG5cbiAgICAgICAgICAgIGlmIChzdGFydExpbmUgPD0gZW5kTGluZSlcbiAgICAgICAgICAgICAgICBzZWxmLmZpcmVVcGRhdGVFdmVudChzdGFydExpbmUsIGVuZExpbmUpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBTZXRzIGEgbmV3IHRva2VuaXplciBmb3IgdGhpcyBvYmplY3QuXG4gICAgICogQHBhcmFtIHtUb2tlbml6ZXJ9IHRva2VuaXplciBUaGUgbmV3IHRva2VuaXplciB0byB1c2VcbiAgICAgKiovXG4gICAgc2V0VG9rZW5pemVyKHRva2VuaXplcikge1xuICAgICAgICB0aGlzLnRva2VuaXplciA9IHRva2VuaXplcjtcbiAgICAgICAgdGhpcy5saW5lcyA9IFtdO1xuICAgICAgICB0aGlzLnN0YXRlcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuc3RhcnQoMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIG5ldyBkb2N1bWVudCB0byBhc3NvY2lhdGUgd2l0aCB0aGlzIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50fSBkb2MgVGhlIG5ldyBkb2N1bWVudCB0byBhc3NvY2lhdGUgd2l0aFxuICAgICAqKi9cbiAgICBzZXREb2N1bWVudChkb2MpIHtcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIHRoaXMubGluZXMgPSBbXTtcbiAgICAgICAgdGhpcy5zdGF0ZXMgPSBbXTtcblxuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEVtaXRzIHRoZSBgJ3VwZGF0ZSdgIGV2ZW50LiBgZmlyc3RSb3dgIGFuZCBgbGFzdFJvd2AgYXJlIHVzZWQgdG8gZGVmaW5lIHRoZSBib3VuZGFyaWVzIG9mIHRoZSByZWdpb24gdG8gYmUgdXBkYXRlZC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmlyc3RSb3cgVGhlIHN0YXJ0aW5nIHJvdyByZWdpb25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGFzdFJvdyBUaGUgZmluYWwgcm93IHJlZ2lvblxuICAgICAqKi9cbiAgICBmaXJlVXBkYXRlRXZlbnQoZmlyc3RSb3csIGxhc3RSb3cpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBmaXJzdDogZmlyc3RSb3csXG4gICAgICAgICAgICBsYXN0OiBsYXN0Um93XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3NpZ25hbChcInVwZGF0ZVwiLCB7ZGF0YTogZGF0YX0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0b2tlbml6aW5nIGF0IHRoZSByb3cgaW5kaWNhdGVkLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydFJvdyBUaGUgcm93IHRvIHN0YXJ0IGF0XG4gICAgICoqL1xuICAgIHN0YXJ0KHN0YXJ0Um93KSB7XG4gICAgICAgIHRoaXMuY3VycmVudExpbmUgPSBNYXRoLm1pbihzdGFydFJvdyB8fCAwLCB0aGlzLmN1cnJlbnRMaW5lLCB0aGlzLmRvYy5nZXRMZW5ndGgoKSk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGFsbCBjYWNoZWQgaXRlbXMgYmVsb3cgdGhpcyBsaW5lXG4gICAgICAgIHRoaXMubGluZXMuc3BsaWNlKHRoaXMuY3VycmVudExpbmUsIHRoaXMubGluZXMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5zdGF0ZXMuc3BsaWNlKHRoaXMuY3VycmVudExpbmUsIHRoaXMuc3RhdGVzLmxlbmd0aCk7XG5cbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIC8vIHByZXR0eSBsb25nIGRlbGF5IHRvIHByZXZlbnQgdGhlIHRva2VuaXplciBmcm9tIGludGVyZmVyaW5nIHdpdGggdGhlIHVzZXJcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gc2V0VGltZW91dCh0aGlzLiR3b3JrZXIsIDcwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBwcmV0dHkgbG9uZyBkZWxheSB0byBwcmV2ZW50IHRoZSB0b2tlbml6ZXIgZnJvbSBpbnRlcmZlcmluZyB3aXRoIHRoZSB1c2VyXG4gICAgICovXG4gICAgc2NoZWR1bGVTdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJ1bm5pbmcpXG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBzZXRUaW1lb3V0KHRoaXMuJHdvcmtlciwgNzAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuRGVsdGF9IGRlbHRhXG4gICAgICovXG4gICAgJHVwZGF0ZU9uQ2hhbmdlKGRlbHRhKSB7XG4gICAgICAgIHZhciBzdGFydFJvdyA9IGRlbHRhLnN0YXJ0LnJvdztcbiAgICAgICAgdmFyIGxlbiA9IGRlbHRhLmVuZC5yb3cgLSBzdGFydFJvdztcblxuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVzW3N0YXJ0Um93XSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVsdGEuYWN0aW9uID09IFwicmVtb3ZlXCIpIHtcbiAgICAgICAgICAgIHRoaXMubGluZXMuc3BsaWNlKHN0YXJ0Um93LCBsZW4gKyAxLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVzLnNwbGljZShzdGFydFJvdywgbGVuICsgMSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5KGxlbiArIDEpO1xuICAgICAgICAgICAgYXJncy51bnNoaWZ0KHN0YXJ0Um93LCAxKTtcbiAgICAgICAgICAgIHRoaXMubGluZXMuc3BsaWNlLmFwcGx5KHRoaXMubGluZXMsIGFyZ3MpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZXMuc3BsaWNlLmFwcGx5KHRoaXMuc3RhdGVzLCBhcmdzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3VycmVudExpbmUgPSBNYXRoLm1pbihzdGFydFJvdywgdGhpcy5jdXJyZW50TGluZSwgdGhpcy5kb2MuZ2V0TGVuZ3RoKCkpO1xuXG4gICAgICAgIHRoaXMuc3RvcCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRva2VuaXppbmcuXG4gICAgICoqL1xuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ydW5uaW5nKTtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZXMgbGlzdCBvZiBbW1Rva2VuXV0ncyBvZiB0aGUgcm93LiAodG9rZW5zIGFyZSBjYWNoZWQpXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IHRvIGdldCB0b2tlbnMgYXRcbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Ub2tlbltdfVxuICAgICAqKi9cbiAgICBnZXRUb2tlbnMocm93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVzW3Jvd10gfHwgdGhpcy4kdG9rZW5pemVSb3cocm93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSBvZiB0b2tlbml6YXRpb24gYXQgdGhlIGVuZCBvZiBhIHJvdy5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSByb3cgdG8gZ2V0IHN0YXRlIGF0XG4gICAgICogQHJldHVybnMge3N0cmluZyB8IHN0cmluZ1tdfVxuICAgICAqKi9cbiAgICBnZXRTdGF0ZShyb3cpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudExpbmUgPT0gcm93KVxuICAgICAgICAgICAgdGhpcy4kdG9rZW5pemVSb3cocm93KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVzW3Jvd10gfHwgXCJzdGFydFwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKi9cbiAgICAkdG9rZW5pemVSb3cocm93KSB7XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5kb2MuZ2V0TGluZShyb3cpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlc1tyb3cgLSAxXTtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBwb3RlbnRpYWwgd3JvbmcgYXJndW1lbnRcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLnRva2VuaXplci5nZXRMaW5lVG9rZW5zKGxpbmUsIHN0YXRlLCByb3cpO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlc1tyb3ddICsgXCJcIiAhPT0gZGF0YS5zdGF0ZSArIFwiXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVzW3Jvd10gPSBkYXRhLnN0YXRlO1xuICAgICAgICAgICAgdGhpcy5saW5lc1tyb3cgKyAxXSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50TGluZSA+IHJvdyArIDEpXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TGluZSA9IHJvdyArIDE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50TGluZSA9PSByb3cpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudExpbmUgPSByb3cgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubGluZXNbcm93XSA9IGRhdGEudG9rZW5zO1xuICAgIH1cblxuICAgIGNsZWFudXAoKSB7XG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxpbmVzID0gW107XG4gICAgICAgIHRoaXMuc3RhdGVzID0gW107XG4gICAgICAgIHRoaXMuY3VycmVudExpbmUgPSAwO1xuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIH1cblxufVxuXG5vb3AuaW1wbGVtZW50KEJhY2tncm91bmRUb2tlbml6ZXIucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIpO1xuXG5leHBvcnRzLkJhY2tncm91bmRUb2tlbml6ZXIgPSBCYWNrZ3JvdW5kVG9rZW5pemVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/background_tokenizer.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/bidihandler.js":
/*!**************************************************!*\
  !*** ./node_modules/ace-code/src/bidihandler.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n */\n\nvar bidiUtil = __webpack_require__(/*! ./lib/bidiutil */ \"./node_modules/ace-code/src/lib/bidiutil.js\");\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\u202B]/;\n\n/**\n * This object is used to ensure Bi-Directional support (for languages with text flowing from right to left, like Arabic or Hebrew)\n * including correct caret positioning, text selection mouse and keyboard arrows functioning\n **/\nclass BidiHandler {\n    /**\n     * Creates a new `BidiHandler` object\n     * @param {EditSession} session The session to use\n     **/\n    constructor(session) {\n        this.session = session;\n        this.bidiMap = {};\n        /* current screen row */\n        this.currentRow = null;\n        this.bidiUtil = bidiUtil;\n        /* Arabic/Hebrew character width differs from regular character width */\n        this.charWidths = [];\n        this.EOL = \"\\xAC\";\n        this.showInvisibles = true;\n        this.isRtlDir = false;\n        this.$isRtl = false;\n        this.line = \"\";\n        this.wrapIndent = 0;\n        this.EOF = \"\\xB6\";\n        this.RLE = \"\\u202B\";\n        this.contentWidth = 0;\n        this.fontMetrics = null;\n        this.rtlLineOffset = 0;\n        this.wrapOffset = 0;\n        this.isMoveLeftOperation = false;\n        this.seenBidi = bidiRE.test(session.getValue());\n    }\n\n    /**\n     * Returns 'true' if row contains Bidi characters, in such case\n     * creates Bidi map to be used in operations related to selection\n     * (keyboard arrays, mouse click, select)\n     * @param {Number} screenRow the screen row to be checked\n     * @param {Number} [docRow] the document row to be checked [optional]\n     * @param {Number} [splitIndex] the wrapped screen line index [ optional]\n    **/\n    isBidiRow(screenRow, docRow, splitIndex) {\n        if (!this.seenBidi)\n            return false;\n        if (screenRow !== this.currentRow) {\n            this.currentRow = screenRow;\n            this.updateRowLine(docRow, splitIndex);\n            this.updateBidiMap();\n        }\n        return this.bidiMap.bidiLevels;\n    }\n\n    /**\n     * @param {import(\"../ace-internal\").Ace.Delta} delta\n     * @internal\n     */\n    onChange(delta) {\n        if (!this.seenBidi) {\n            if (delta.action == \"insert\" && bidiRE.test(delta.lines.join(\"\\n\"))) {\n                this.seenBidi = true;\n                this.currentRow = null;\n            }\n        }\n        else {\n            this.currentRow = null;\n        }\n    }\n\n    getDocumentRow() {\n        var docRow = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var index = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            if (index >= 0)\n                docRow = this.session.$docRowCache[index];\n        }\n\n        return docRow;\n    }\n\n    getSplitIndex() {\n        var splitIndex = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var currentIndex, prevIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            while (this.currentRow - splitIndex > 0) {\n                currentIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow - splitIndex - 1);\n                if (currentIndex !== prevIndex)\n                    break;\n\n                prevIndex = currentIndex;\n                splitIndex++;\n            }\n        } else {\n            splitIndex = this.currentRow;\n        }\n\n        return splitIndex;\n    }\n\n    updateRowLine(docRow, splitIndex) {\n        if (docRow === undefined)\n            docRow = this.getDocumentRow();\n\n        var isLastRow = (docRow === this.session.getLength() - 1),\n            endOfLine = isLastRow ? this.EOF : this.EOL;\n\n        this.wrapIndent = 0;\n        this.line = this.session.getLine(docRow);\n        this.isRtlDir = this.$isRtl || this.line.charAt(0) === this.RLE;\n        if (this.session.$useWrapMode) {\n            var splits = this.session.$wrapData[docRow];\n            if (splits) {\n                if (splitIndex === undefined)\n                    splitIndex = this.getSplitIndex();\n\n                if(splitIndex > 0 && splits.length) {\n                    this.wrapIndent = splits.indent;\n                    this.wrapOffset = this.wrapIndent * this.charWidths[bidiUtil.L];\n                    this.line = (splitIndex < splits.length) ?\n                        this.line.substring(splits[splitIndex - 1], splits[splitIndex]) :\n                            this.line.substring(splits[splits.length - 1]);\n                } else {\n                    this.line = this.line.substring(0, splits[splitIndex]);\n                }\n\n                if (splitIndex == splits.length) {\n                    this.line += (this.showInvisibles) ? endOfLine : bidiUtil.DOT;\n                }\n            }\n        } else {\n            this.line += this.showInvisibles ? endOfLine : bidiUtil.DOT;\n        }\n\n        /* replace tab and wide characters by commensurate spaces */\n        var session = this.session, shift = 0, size;\n        this.line = this.line.replace(/\\t|[\\u1100-\\u2029, \\u202F-\\uFFE6]/g, function(ch, i){\n            if (ch === '\\t' || session.isFullWidth(ch.charCodeAt(0))) {\n                size = (ch === '\\t') ? session.getScreenTabSize(i + shift) : 2;\n                shift += size - 1;\n                return lang.stringRepeat(bidiUtil.DOT, size);\n            }\n            return ch;\n        });\n\n        if (this.isRtlDir) {\n            this.fontMetrics.$main.textContent = (this.line.charAt(this.line.length - 1) == bidiUtil.DOT) ? this.line.substr(0, this.line.length - 1) : this.line;\n            this.rtlLineOffset = this.contentWidth - this.fontMetrics.$main.getBoundingClientRect().width;\n        }\n    }\n\n    updateBidiMap() {\n        var textCharTypes = [];\n        if (bidiUtil.hasBidiCharacters(this.line, textCharTypes) || this.isRtlDir) {\n             this.bidiMap = bidiUtil.doBidiReorder(this.line, textCharTypes, this.isRtlDir);\n        } else {\n            this.bidiMap = {};\n        }\n    }\n\n    /**\n     * Resets stored info related to current screen row\n    **/\n    markAsDirty() {\n        this.currentRow = null;\n    }\n\n    /**\n     * Updates array of character widths\n     * @param {Object} fontMetrics metrics\n     *\n    **/\n    updateCharacterWidths(fontMetrics) {\n        if (this.characterWidth === fontMetrics.$characterSize.width)\n            return;\n\n        this.fontMetrics = fontMetrics;\n        var characterWidth = this.characterWidth = fontMetrics.$characterSize.width;\n        var bidiCharWidth = fontMetrics.$measureCharWidth(\"\\u05d4\");\n\n        this.charWidths[bidiUtil.L] = this.charWidths[bidiUtil.EN] = this.charWidths[bidiUtil.ON_R] = characterWidth;\n        this.charWidths[bidiUtil.R] = this.charWidths[bidiUtil.AN] = bidiCharWidth;\n        this.charWidths[bidiUtil.R_H] = bidiCharWidth * 0.45;\n        this.charWidths[bidiUtil.B] = this.charWidths[bidiUtil.RLE] = 0;\n\n        this.currentRow = null;\n    }\n\n    setShowInvisibles(showInvisibles) {\n        this.showInvisibles = showInvisibles;\n        this.currentRow = null;\n    }\n\n    setEolChar(eolChar) {\n        this.EOL = eolChar;\n    }\n\n    setContentWidth(width) {\n        this.contentWidth = width;\n    }\n\n    isRtlLine(row) {\n        if (this.$isRtl) return true;\n        if (row != undefined)\n            return (this.session.getLine(row).charAt(0) == this.RLE);\n        else\n            return this.isRtlDir;\n    }\n\n    setRtlDirection(editor, isRtlDir) {\n        var cursor = editor.getCursorPosition();\n        for (var row = editor.selection.getSelectionAnchor().row; row <= cursor.row; row++) {\n            if (!isRtlDir && editor.session.getLine(row).charAt(0) === editor.session.$bidiHandler.RLE)\n                editor.session.doc.removeInLine(row, 0, 1);\n            else if (isRtlDir && editor.session.getLine(row).charAt(0) !== editor.session.$bidiHandler.RLE)\n                editor.session.doc.insert({column: 0, row: row}, editor.session.$bidiHandler.RLE);\n        }\n    }\n\n\n    /**\n     * Returns offset of character at position defined by column.\n     * @param {Number} col the screen column position\n     *\n     * @return {Number} horizontal pixel offset of given screen column\n     **/\n    getPosLeft(col) {\n        col -= this.wrapIndent;\n        var leftBoundary = (this.line.charAt(0) === this.RLE) ? 1 : 0;\n        var logicalIdx = (col > leftBoundary) ? (this.session.getOverwrite() ? col : col - 1) : leftBoundary;\n        var visualIdx = bidiUtil.getVisualFromLogicalIdx(logicalIdx, this.bidiMap),\n            levels = this.bidiMap.bidiLevels, left = 0;\n\n        if (!this.session.getOverwrite() && col <= leftBoundary && levels[visualIdx] % 2 !== 0)\n            visualIdx++;\n\n        for (var i = 0; i < visualIdx; i++) {\n            left += this.charWidths[levels[i]];\n        }\n\n        if (!this.session.getOverwrite() && (col > leftBoundary) && (levels[visualIdx] % 2 === 0))\n            left += this.charWidths[levels[visualIdx]];\n\n        if (this.wrapIndent)\n            left += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n\n        if (this.isRtlDir)\n            left += this.rtlLineOffset;\n\n        return left;\n    }\n\n    /**\n     * Returns 'selections' - array of objects defining set of selection rectangles\n     * @param {Number} startCol the start column position\n     * @param {Number} endCol the end column position\n     *\n     * @return {Object[]} Each object contains 'left' and 'width' values defining selection rectangle.\n    **/\n    getSelections(startCol, endCol) {\n        var map = this.bidiMap, levels = map.bidiLevels, level, selections = [], offset = 0,\n            selColMin = Math.min(startCol, endCol) - this.wrapIndent, selColMax = Math.max(startCol, endCol) - this.wrapIndent,\n                isSelected = false, isSelectedPrev = false, selectionStart = 0;\n\n        if (this.wrapIndent)\n            offset += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n\n        for (var logIdx, visIdx = 0; visIdx < levels.length; visIdx++) {\n            logIdx = map.logicalFromVisual[visIdx];\n            level = levels[visIdx];\n            isSelected = (logIdx >= selColMin) && (logIdx < selColMax);\n            if (isSelected && !isSelectedPrev) {\n                selectionStart = offset;\n            } else if (!isSelected && isSelectedPrev) {\n                selections.push({left: selectionStart, width: offset - selectionStart});\n            }\n            offset += this.charWidths[level];\n            isSelectedPrev = isSelected;\n        }\n\n        if (isSelected && (visIdx === levels.length)) {\n            selections.push({left: selectionStart, width: offset - selectionStart});\n        }\n\n        if(this.isRtlDir) {\n            for (var i = 0; i < selections.length; i++) {\n                selections[i].left += this.rtlLineOffset;\n            }\n        }\n        return selections;\n    }\n\n    /**\n     * Converts character coordinates on the screen to respective document column number\n     * @param {Number} posX character horizontal offset\n     *\n     * @return {Number} screen column number corresponding to given pixel offset\n    **/\n    offsetToCol(posX) {\n        if(this.isRtlDir)\n            posX -= this.rtlLineOffset;\n\n        var logicalIdx = 0, posX = Math.max(posX, 0),\n            offset = 0, visualIdx = 0, levels = this.bidiMap.bidiLevels,\n                charWidth = this.charWidths[levels[visualIdx]];\n\n        if (this.wrapIndent)\n           posX -= this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n\n        while(posX > offset + charWidth/2) {\n            offset += charWidth;\n            if(visualIdx === levels.length - 1) {\n                /* quit when we on the right of the last character, flag this by charWidth = 0 */\n                charWidth = 0;\n                break;\n            }\n            charWidth = this.charWidths[levels[++visualIdx]];\n        }\n\n        if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && (levels[visualIdx] % 2 === 0)){\n        /* Bidi character on the left and None Bidi character on the right */\n            if(posX < offset)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n\n        } else if (visualIdx > 0 && (levels[visualIdx - 1] % 2 === 0) && (levels[visualIdx] % 2 !== 0)){\n        /* None Bidi character on the left and Bidi character on the right */\n            logicalIdx = 1 + ((posX > offset) ? this.bidiMap.logicalFromVisual[visualIdx]\n                    : this.bidiMap.logicalFromVisual[visualIdx - 1]);\n\n        } else if ((this.isRtlDir && visualIdx === levels.length - 1 && charWidth === 0 && (levels[visualIdx - 1] % 2 === 0))\n                || (!this.isRtlDir && visualIdx === 0 && (levels[visualIdx] % 2 !== 0))){\n        /* To the right of last character, which is None Bidi, in RTL direction or */\n        /* to the left of first Bidi character, in LTR direction */\n            logicalIdx = 1 + this.bidiMap.logicalFromVisual[visualIdx];\n        } else {\n            /* Tweak visual position when Bidi character on the left in order to map it to corresponding logical position */\n            if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && charWidth !== 0)\n                visualIdx--;\n\n            /* Regular case */\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n        }\n\n        if (logicalIdx === 0 && this.isRtlDir)\n            logicalIdx++;\n\n        return (logicalIdx + this.wrapIndent);\n    }\n\n}\n\nexports.BidiHandler = BidiHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2JpZGloYW5kbGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxhQUFhLHNDQUFzQztBQUNuRDs7QUFFQSxlQUFlLG1CQUFPLENBQUMsbUVBQWdCO0FBQ3ZDLFdBQVcsbUJBQU8sQ0FBQywyREFBWTtBQUMvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxxQ0FBcUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0VBQWtFLG1CQUFtQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsb0JBQW9CO0FBQy9EO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGdCQUFnQixVQUFVO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxxQ0FBcUMsd0JBQXdCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsaUNBQWlDLHFEQUFxRDtBQUN0RjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2QixxREFBcUQ7QUFDbEY7O0FBRUE7QUFDQSw0QkFBNEIsdUJBQXVCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUEsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLG1CQUFtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2JpZGloYW5kbGVyLmpzPzQ2NTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2VkaXRfc2Vzc2lvblwiKS5FZGl0U2Vzc2lvbn0gRWRpdFNlc3Npb25cbiAqL1xuXG52YXIgYmlkaVV0aWwgPSByZXF1aXJlKFwiLi9saWIvYmlkaXV0aWxcIik7XG52YXIgbGFuZyA9IHJlcXVpcmUoXCIuL2xpYi9sYW5nXCIpO1xudmFyIGJpZGlSRSA9IC9bXFx1MDU5MC1cXHUwNWY0XFx1MDYwMC1cXHUwNmZmXFx1MDcwMC1cXHUwOGFjXFx1MjAyQl0vO1xuXG4vKipcbiAqIFRoaXMgb2JqZWN0IGlzIHVzZWQgdG8gZW5zdXJlIEJpLURpcmVjdGlvbmFsIHN1cHBvcnQgKGZvciBsYW5ndWFnZXMgd2l0aCB0ZXh0IGZsb3dpbmcgZnJvbSByaWdodCB0byBsZWZ0LCBsaWtlIEFyYWJpYyBvciBIZWJyZXcpXG4gKiBpbmNsdWRpbmcgY29ycmVjdCBjYXJldCBwb3NpdGlvbmluZywgdGV4dCBzZWxlY3Rpb24gbW91c2UgYW5kIGtleWJvYXJkIGFycm93cyBmdW5jdGlvbmluZ1xuICoqL1xuY2xhc3MgQmlkaUhhbmRsZXIge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJpZGlIYW5kbGVyYCBvYmplY3RcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uIFRoZSBzZXNzaW9uIHRvIHVzZVxuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIHRoaXMuYmlkaU1hcCA9IHt9O1xuICAgICAgICAvKiBjdXJyZW50IHNjcmVlbiByb3cgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50Um93ID0gbnVsbDtcbiAgICAgICAgdGhpcy5iaWRpVXRpbCA9IGJpZGlVdGlsO1xuICAgICAgICAvKiBBcmFiaWMvSGVicmV3IGNoYXJhY3RlciB3aWR0aCBkaWZmZXJzIGZyb20gcmVndWxhciBjaGFyYWN0ZXIgd2lkdGggKi9cbiAgICAgICAgdGhpcy5jaGFyV2lkdGhzID0gW107XG4gICAgICAgIHRoaXMuRU9MID0gXCJcXHhBQ1wiO1xuICAgICAgICB0aGlzLnNob3dJbnZpc2libGVzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc1J0bERpciA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRpc1J0bCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxpbmUgPSBcIlwiO1xuICAgICAgICB0aGlzLndyYXBJbmRlbnQgPSAwO1xuICAgICAgICB0aGlzLkVPRiA9IFwiXFx4QjZcIjtcbiAgICAgICAgdGhpcy5STEUgPSBcIlxcdTIwMkJcIjtcbiAgICAgICAgdGhpcy5jb250ZW50V2lkdGggPSAwO1xuICAgICAgICB0aGlzLmZvbnRNZXRyaWNzID0gbnVsbDtcbiAgICAgICAgdGhpcy5ydGxMaW5lT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy53cmFwT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5pc01vdmVMZWZ0T3BlcmF0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VlbkJpZGkgPSBiaWRpUkUudGVzdChzZXNzaW9uLmdldFZhbHVlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgJ3RydWUnIGlmIHJvdyBjb250YWlucyBCaWRpIGNoYXJhY3RlcnMsIGluIHN1Y2ggY2FzZVxuICAgICAqIGNyZWF0ZXMgQmlkaSBtYXAgdG8gYmUgdXNlZCBpbiBvcGVyYXRpb25zIHJlbGF0ZWQgdG8gc2VsZWN0aW9uXG4gICAgICogKGtleWJvYXJkIGFycmF5cywgbW91c2UgY2xpY2ssIHNlbGVjdClcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2NyZWVuUm93IHRoZSBzY3JlZW4gcm93IHRvIGJlIGNoZWNrZWRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2RvY1Jvd10gdGhlIGRvY3VtZW50IHJvdyB0byBiZSBjaGVja2VkIFtvcHRpb25hbF1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3NwbGl0SW5kZXhdIHRoZSB3cmFwcGVkIHNjcmVlbiBsaW5lIGluZGV4IFsgb3B0aW9uYWxdXG4gICAgKiovXG4gICAgaXNCaWRpUm93KHNjcmVlblJvdywgZG9jUm93LCBzcGxpdEluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5zZWVuQmlkaSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHNjcmVlblJvdyAhPT0gdGhpcy5jdXJyZW50Um93KSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3cgPSBzY3JlZW5Sb3c7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJvd0xpbmUoZG9jUm93LCBzcGxpdEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQmlkaU1hcCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJpZGlNYXAuYmlkaUxldmVscztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuRGVsdGF9IGRlbHRhXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25DaGFuZ2UoZGVsdGEpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlZW5CaWRpKSB7XG4gICAgICAgICAgICBpZiAoZGVsdGEuYWN0aW9uID09IFwiaW5zZXJ0XCIgJiYgYmlkaVJFLnRlc3QoZGVsdGEubGluZXMuam9pbihcIlxcblwiKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlZW5CaWRpID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRSb3cgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Um93ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldERvY3VtZW50Um93KCkge1xuICAgICAgICB2YXIgZG9jUm93ID0gMDtcbiAgICAgICAgdmFyIHJvd0NhY2hlID0gdGhpcy5zZXNzaW9uLiRzY3JlZW5Sb3dDYWNoZTtcbiAgICAgICAgaWYgKHJvd0NhY2hlLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5zZXNzaW9uLiRnZXRSb3dDYWNoZUluZGV4KHJvd0NhY2hlLCB0aGlzLmN1cnJlbnRSb3cpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApXG4gICAgICAgICAgICAgICAgZG9jUm93ID0gdGhpcy5zZXNzaW9uLiRkb2NSb3dDYWNoZVtpbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZG9jUm93O1xuICAgIH1cblxuICAgIGdldFNwbGl0SW5kZXgoKSB7XG4gICAgICAgIHZhciBzcGxpdEluZGV4ID0gMDtcbiAgICAgICAgdmFyIHJvd0NhY2hlID0gdGhpcy5zZXNzaW9uLiRzY3JlZW5Sb3dDYWNoZTtcbiAgICAgICAgaWYgKHJvd0NhY2hlLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCwgcHJldkluZGV4ID0gdGhpcy5zZXNzaW9uLiRnZXRSb3dDYWNoZUluZGV4KHJvd0NhY2hlLCB0aGlzLmN1cnJlbnRSb3cpO1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuY3VycmVudFJvdyAtIHNwbGl0SW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID0gdGhpcy5zZXNzaW9uLiRnZXRSb3dDYWNoZUluZGV4KHJvd0NhY2hlLCB0aGlzLmN1cnJlbnRSb3cgLSBzcGxpdEluZGV4IC0gMSk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleCAhPT0gcHJldkluZGV4KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIHByZXZJbmRleCA9IGN1cnJlbnRJbmRleDtcbiAgICAgICAgICAgICAgICBzcGxpdEluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGxpdEluZGV4ID0gdGhpcy5jdXJyZW50Um93O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNwbGl0SW5kZXg7XG4gICAgfVxuXG4gICAgdXBkYXRlUm93TGluZShkb2NSb3csIHNwbGl0SW5kZXgpIHtcbiAgICAgICAgaWYgKGRvY1JvdyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgZG9jUm93ID0gdGhpcy5nZXREb2N1bWVudFJvdygpO1xuXG4gICAgICAgIHZhciBpc0xhc3RSb3cgPSAoZG9jUm93ID09PSB0aGlzLnNlc3Npb24uZ2V0TGVuZ3RoKCkgLSAxKSxcbiAgICAgICAgICAgIGVuZE9mTGluZSA9IGlzTGFzdFJvdyA/IHRoaXMuRU9GIDogdGhpcy5FT0w7XG5cbiAgICAgICAgdGhpcy53cmFwSW5kZW50ID0gMDtcbiAgICAgICAgdGhpcy5saW5lID0gdGhpcy5zZXNzaW9uLmdldExpbmUoZG9jUm93KTtcbiAgICAgICAgdGhpcy5pc1J0bERpciA9IHRoaXMuJGlzUnRsIHx8IHRoaXMubGluZS5jaGFyQXQoMCkgPT09IHRoaXMuUkxFO1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uLiR1c2VXcmFwTW9kZSkge1xuICAgICAgICAgICAgdmFyIHNwbGl0cyA9IHRoaXMuc2Vzc2lvbi4kd3JhcERhdGFbZG9jUm93XTtcbiAgICAgICAgICAgIGlmIChzcGxpdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3BsaXRJbmRleCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBzcGxpdEluZGV4ID0gdGhpcy5nZXRTcGxpdEluZGV4KCk7XG5cbiAgICAgICAgICAgICAgICBpZihzcGxpdEluZGV4ID4gMCAmJiBzcGxpdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JhcEluZGVudCA9IHNwbGl0cy5pbmRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JhcE9mZnNldCA9IHRoaXMud3JhcEluZGVudCAqIHRoaXMuY2hhcldpZHRoc1tiaWRpVXRpbC5MXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lID0gKHNwbGl0SW5kZXggPCBzcGxpdHMubGVuZ3RoKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmUuc3Vic3RyaW5nKHNwbGl0c1tzcGxpdEluZGV4IC0gMV0sIHNwbGl0c1tzcGxpdEluZGV4XSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGluZS5zdWJzdHJpbmcoc3BsaXRzW3NwbGl0cy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lID0gdGhpcy5saW5lLnN1YnN0cmluZygwLCBzcGxpdHNbc3BsaXRJbmRleF0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzcGxpdEluZGV4ID09IHNwbGl0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lICs9ICh0aGlzLnNob3dJbnZpc2libGVzKSA/IGVuZE9mTGluZSA6IGJpZGlVdGlsLkRPVDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxpbmUgKz0gdGhpcy5zaG93SW52aXNpYmxlcyA/IGVuZE9mTGluZSA6IGJpZGlVdGlsLkRPVDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIHJlcGxhY2UgdGFiIGFuZCB3aWRlIGNoYXJhY3RlcnMgYnkgY29tbWVuc3VyYXRlIHNwYWNlcyAqL1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbiwgc2hpZnQgPSAwLCBzaXplO1xuICAgICAgICB0aGlzLmxpbmUgPSB0aGlzLmxpbmUucmVwbGFjZSgvXFx0fFtcXHUxMTAwLVxcdTIwMjksIFxcdTIwMkYtXFx1RkZFNl0vZywgZnVuY3Rpb24oY2gsIGkpe1xuICAgICAgICAgICAgaWYgKGNoID09PSAnXFx0JyB8fCBzZXNzaW9uLmlzRnVsbFdpZHRoKGNoLmNoYXJDb2RlQXQoMCkpKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IChjaCA9PT0gJ1xcdCcpID8gc2Vzc2lvbi5nZXRTY3JlZW5UYWJTaXplKGkgKyBzaGlmdCkgOiAyO1xuICAgICAgICAgICAgICAgIHNoaWZ0ICs9IHNpemUgLSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiBsYW5nLnN0cmluZ1JlcGVhdChiaWRpVXRpbC5ET1QsIHNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNoO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5pc1J0bERpcikge1xuICAgICAgICAgICAgdGhpcy5mb250TWV0cmljcy4kbWFpbi50ZXh0Q29udGVudCA9ICh0aGlzLmxpbmUuY2hhckF0KHRoaXMubGluZS5sZW5ndGggLSAxKSA9PSBiaWRpVXRpbC5ET1QpID8gdGhpcy5saW5lLnN1YnN0cigwLCB0aGlzLmxpbmUubGVuZ3RoIC0gMSkgOiB0aGlzLmxpbmU7XG4gICAgICAgICAgICB0aGlzLnJ0bExpbmVPZmZzZXQgPSB0aGlzLmNvbnRlbnRXaWR0aCAtIHRoaXMuZm9udE1ldHJpY3MuJG1haW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVCaWRpTWFwKCkge1xuICAgICAgICB2YXIgdGV4dENoYXJUeXBlcyA9IFtdO1xuICAgICAgICBpZiAoYmlkaVV0aWwuaGFzQmlkaUNoYXJhY3RlcnModGhpcy5saW5lLCB0ZXh0Q2hhclR5cGVzKSB8fCB0aGlzLmlzUnRsRGlyKSB7XG4gICAgICAgICAgICAgdGhpcy5iaWRpTWFwID0gYmlkaVV0aWwuZG9CaWRpUmVvcmRlcih0aGlzLmxpbmUsIHRleHRDaGFyVHlwZXMsIHRoaXMuaXNSdGxEaXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iaWRpTWFwID0ge307XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldHMgc3RvcmVkIGluZm8gcmVsYXRlZCB0byBjdXJyZW50IHNjcmVlbiByb3dcbiAgICAqKi9cbiAgICBtYXJrQXNEaXJ0eSgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Um93ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGFycmF5IG9mIGNoYXJhY3RlciB3aWR0aHNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZm9udE1ldHJpY3MgbWV0cmljc1xuICAgICAqXG4gICAgKiovXG4gICAgdXBkYXRlQ2hhcmFjdGVyV2lkdGhzKGZvbnRNZXRyaWNzKSB7XG4gICAgICAgIGlmICh0aGlzLmNoYXJhY3RlcldpZHRoID09PSBmb250TWV0cmljcy4kY2hhcmFjdGVyU2l6ZS53aWR0aClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB0aGlzLmZvbnRNZXRyaWNzID0gZm9udE1ldHJpY3M7XG4gICAgICAgIHZhciBjaGFyYWN0ZXJXaWR0aCA9IHRoaXMuY2hhcmFjdGVyV2lkdGggPSBmb250TWV0cmljcy4kY2hhcmFjdGVyU2l6ZS53aWR0aDtcbiAgICAgICAgdmFyIGJpZGlDaGFyV2lkdGggPSBmb250TWV0cmljcy4kbWVhc3VyZUNoYXJXaWR0aChcIlxcdTA1ZDRcIik7XG5cbiAgICAgICAgdGhpcy5jaGFyV2lkdGhzW2JpZGlVdGlsLkxdID0gdGhpcy5jaGFyV2lkdGhzW2JpZGlVdGlsLkVOXSA9IHRoaXMuY2hhcldpZHRoc1tiaWRpVXRpbC5PTl9SXSA9IGNoYXJhY3RlcldpZHRoO1xuICAgICAgICB0aGlzLmNoYXJXaWR0aHNbYmlkaVV0aWwuUl0gPSB0aGlzLmNoYXJXaWR0aHNbYmlkaVV0aWwuQU5dID0gYmlkaUNoYXJXaWR0aDtcbiAgICAgICAgdGhpcy5jaGFyV2lkdGhzW2JpZGlVdGlsLlJfSF0gPSBiaWRpQ2hhcldpZHRoICogMC40NTtcbiAgICAgICAgdGhpcy5jaGFyV2lkdGhzW2JpZGlVdGlsLkJdID0gdGhpcy5jaGFyV2lkdGhzW2JpZGlVdGlsLlJMRV0gPSAwO1xuXG4gICAgICAgIHRoaXMuY3VycmVudFJvdyA9IG51bGw7XG4gICAgfVxuXG4gICAgc2V0U2hvd0ludmlzaWJsZXMoc2hvd0ludmlzaWJsZXMpIHtcbiAgICAgICAgdGhpcy5zaG93SW52aXNpYmxlcyA9IHNob3dJbnZpc2libGVzO1xuICAgICAgICB0aGlzLmN1cnJlbnRSb3cgPSBudWxsO1xuICAgIH1cblxuICAgIHNldEVvbENoYXIoZW9sQ2hhcikge1xuICAgICAgICB0aGlzLkVPTCA9IGVvbENoYXI7XG4gICAgfVxuXG4gICAgc2V0Q29udGVudFdpZHRoKHdpZHRoKSB7XG4gICAgICAgIHRoaXMuY29udGVudFdpZHRoID0gd2lkdGg7XG4gICAgfVxuXG4gICAgaXNSdGxMaW5lKHJvdykge1xuICAgICAgICBpZiAodGhpcy4kaXNSdGwpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAocm93ICE9IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5zZXNzaW9uLmdldExpbmUocm93KS5jaGFyQXQoMCkgPT0gdGhpcy5STEUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1J0bERpcjtcbiAgICB9XG5cbiAgICBzZXRSdGxEaXJlY3Rpb24oZWRpdG9yLCBpc1J0bERpcikge1xuICAgICAgICB2YXIgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgICAgIGZvciAodmFyIHJvdyA9IGVkaXRvci5zZWxlY3Rpb24uZ2V0U2VsZWN0aW9uQW5jaG9yKCkucm93OyByb3cgPD0gY3Vyc29yLnJvdzsgcm93KyspIHtcbiAgICAgICAgICAgIGlmICghaXNSdGxEaXIgJiYgZWRpdG9yLnNlc3Npb24uZ2V0TGluZShyb3cpLmNoYXJBdCgwKSA9PT0gZWRpdG9yLnNlc3Npb24uJGJpZGlIYW5kbGVyLlJMRSlcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2Vzc2lvbi5kb2MucmVtb3ZlSW5MaW5lKHJvdywgMCwgMSk7XG4gICAgICAgICAgICBlbHNlIGlmIChpc1J0bERpciAmJiBlZGl0b3Iuc2Vzc2lvbi5nZXRMaW5lKHJvdykuY2hhckF0KDApICE9PSBlZGl0b3Iuc2Vzc2lvbi4kYmlkaUhhbmRsZXIuUkxFKVxuICAgICAgICAgICAgICAgIGVkaXRvci5zZXNzaW9uLmRvYy5pbnNlcnQoe2NvbHVtbjogMCwgcm93OiByb3d9LCBlZGl0b3Iuc2Vzc2lvbi4kYmlkaUhhbmRsZXIuUkxFKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBvZmZzZXQgb2YgY2hhcmFjdGVyIGF0IHBvc2l0aW9uIGRlZmluZWQgYnkgY29sdW1uLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2wgdGhlIHNjcmVlbiBjb2x1bW4gcG9zaXRpb25cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gaG9yaXpvbnRhbCBwaXhlbCBvZmZzZXQgb2YgZ2l2ZW4gc2NyZWVuIGNvbHVtblxuICAgICAqKi9cbiAgICBnZXRQb3NMZWZ0KGNvbCkge1xuICAgICAgICBjb2wgLT0gdGhpcy53cmFwSW5kZW50O1xuICAgICAgICB2YXIgbGVmdEJvdW5kYXJ5ID0gKHRoaXMubGluZS5jaGFyQXQoMCkgPT09IHRoaXMuUkxFKSA/IDEgOiAwO1xuICAgICAgICB2YXIgbG9naWNhbElkeCA9IChjb2wgPiBsZWZ0Qm91bmRhcnkpID8gKHRoaXMuc2Vzc2lvbi5nZXRPdmVyd3JpdGUoKSA/IGNvbCA6IGNvbCAtIDEpIDogbGVmdEJvdW5kYXJ5O1xuICAgICAgICB2YXIgdmlzdWFsSWR4ID0gYmlkaVV0aWwuZ2V0VmlzdWFsRnJvbUxvZ2ljYWxJZHgobG9naWNhbElkeCwgdGhpcy5iaWRpTWFwKSxcbiAgICAgICAgICAgIGxldmVscyA9IHRoaXMuYmlkaU1hcC5iaWRpTGV2ZWxzLCBsZWZ0ID0gMDtcblxuICAgICAgICBpZiAoIXRoaXMuc2Vzc2lvbi5nZXRPdmVyd3JpdGUoKSAmJiBjb2wgPD0gbGVmdEJvdW5kYXJ5ICYmIGxldmVsc1t2aXN1YWxJZHhdICUgMiAhPT0gMClcbiAgICAgICAgICAgIHZpc3VhbElkeCsrO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlzdWFsSWR4OyBpKyspIHtcbiAgICAgICAgICAgIGxlZnQgKz0gdGhpcy5jaGFyV2lkdGhzW2xldmVsc1tpXV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuc2Vzc2lvbi5nZXRPdmVyd3JpdGUoKSAmJiAoY29sID4gbGVmdEJvdW5kYXJ5KSAmJiAobGV2ZWxzW3Zpc3VhbElkeF0gJSAyID09PSAwKSlcbiAgICAgICAgICAgIGxlZnQgKz0gdGhpcy5jaGFyV2lkdGhzW2xldmVsc1t2aXN1YWxJZHhdXTtcblxuICAgICAgICBpZiAodGhpcy53cmFwSW5kZW50KVxuICAgICAgICAgICAgbGVmdCArPSB0aGlzLmlzUnRsRGlyID8gKC0xICogdGhpcy53cmFwT2Zmc2V0KSA6IHRoaXMud3JhcE9mZnNldDtcblxuICAgICAgICBpZiAodGhpcy5pc1J0bERpcilcbiAgICAgICAgICAgIGxlZnQgKz0gdGhpcy5ydGxMaW5lT2Zmc2V0O1xuXG4gICAgICAgIHJldHVybiBsZWZ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgJ3NlbGVjdGlvbnMnIC0gYXJyYXkgb2Ygb2JqZWN0cyBkZWZpbmluZyBzZXQgb2Ygc2VsZWN0aW9uIHJlY3RhbmdsZXNcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhcnRDb2wgdGhlIHN0YXJ0IGNvbHVtbiBwb3NpdGlvblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBlbmRDb2wgdGhlIGVuZCBjb2x1bW4gcG9zaXRpb25cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdFtdfSBFYWNoIG9iamVjdCBjb250YWlucyAnbGVmdCcgYW5kICd3aWR0aCcgdmFsdWVzIGRlZmluaW5nIHNlbGVjdGlvbiByZWN0YW5nbGUuXG4gICAgKiovXG4gICAgZ2V0U2VsZWN0aW9ucyhzdGFydENvbCwgZW5kQ29sKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmJpZGlNYXAsIGxldmVscyA9IG1hcC5iaWRpTGV2ZWxzLCBsZXZlbCwgc2VsZWN0aW9ucyA9IFtdLCBvZmZzZXQgPSAwLFxuICAgICAgICAgICAgc2VsQ29sTWluID0gTWF0aC5taW4oc3RhcnRDb2wsIGVuZENvbCkgLSB0aGlzLndyYXBJbmRlbnQsIHNlbENvbE1heCA9IE1hdGgubWF4KHN0YXJ0Q29sLCBlbmRDb2wpIC0gdGhpcy53cmFwSW5kZW50LFxuICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSBmYWxzZSwgaXNTZWxlY3RlZFByZXYgPSBmYWxzZSwgc2VsZWN0aW9uU3RhcnQgPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLndyYXBJbmRlbnQpXG4gICAgICAgICAgICBvZmZzZXQgKz0gdGhpcy5pc1J0bERpciA/ICgtMSAqIHRoaXMud3JhcE9mZnNldCkgOiB0aGlzLndyYXBPZmZzZXQ7XG5cbiAgICAgICAgZm9yICh2YXIgbG9nSWR4LCB2aXNJZHggPSAwOyB2aXNJZHggPCBsZXZlbHMubGVuZ3RoOyB2aXNJZHgrKykge1xuICAgICAgICAgICAgbG9nSWR4ID0gbWFwLmxvZ2ljYWxGcm9tVmlzdWFsW3Zpc0lkeF07XG4gICAgICAgICAgICBsZXZlbCA9IGxldmVsc1t2aXNJZHhdO1xuICAgICAgICAgICAgaXNTZWxlY3RlZCA9IChsb2dJZHggPj0gc2VsQ29sTWluKSAmJiAobG9nSWR4IDwgc2VsQ29sTWF4KTtcbiAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkICYmICFpc1NlbGVjdGVkUHJldikge1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvblN0YXJ0ID0gb2Zmc2V0O1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNTZWxlY3RlZCAmJiBpc1NlbGVjdGVkUHJldikge1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnMucHVzaCh7bGVmdDogc2VsZWN0aW9uU3RhcnQsIHdpZHRoOiBvZmZzZXQgLSBzZWxlY3Rpb25TdGFydH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2Zmc2V0ICs9IHRoaXMuY2hhcldpZHRoc1tsZXZlbF07XG4gICAgICAgICAgICBpc1NlbGVjdGVkUHJldiA9IGlzU2VsZWN0ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNTZWxlY3RlZCAmJiAodmlzSWR4ID09PSBsZXZlbHMubGVuZ3RoKSkge1xuICAgICAgICAgICAgc2VsZWN0aW9ucy5wdXNoKHtsZWZ0OiBzZWxlY3Rpb25TdGFydCwgd2lkdGg6IG9mZnNldCAtIHNlbGVjdGlvblN0YXJ0fSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmlzUnRsRGlyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLmxlZnQgKz0gdGhpcy5ydGxMaW5lT2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxlY3Rpb25zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGNoYXJhY3RlciBjb29yZGluYXRlcyBvbiB0aGUgc2NyZWVuIHRvIHJlc3BlY3RpdmUgZG9jdW1lbnQgY29sdW1uIG51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwb3NYIGNoYXJhY3RlciBob3Jpem9udGFsIG9mZnNldFxuICAgICAqXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBzY3JlZW4gY29sdW1uIG51bWJlciBjb3JyZXNwb25kaW5nIHRvIGdpdmVuIHBpeGVsIG9mZnNldFxuICAgICoqL1xuICAgIG9mZnNldFRvQ29sKHBvc1gpIHtcbiAgICAgICAgaWYodGhpcy5pc1J0bERpcilcbiAgICAgICAgICAgIHBvc1ggLT0gdGhpcy5ydGxMaW5lT2Zmc2V0O1xuXG4gICAgICAgIHZhciBsb2dpY2FsSWR4ID0gMCwgcG9zWCA9IE1hdGgubWF4KHBvc1gsIDApLFxuICAgICAgICAgICAgb2Zmc2V0ID0gMCwgdmlzdWFsSWR4ID0gMCwgbGV2ZWxzID0gdGhpcy5iaWRpTWFwLmJpZGlMZXZlbHMsXG4gICAgICAgICAgICAgICAgY2hhcldpZHRoID0gdGhpcy5jaGFyV2lkdGhzW2xldmVsc1t2aXN1YWxJZHhdXTtcblxuICAgICAgICBpZiAodGhpcy53cmFwSW5kZW50KVxuICAgICAgICAgICBwb3NYIC09IHRoaXMuaXNSdGxEaXIgPyAoLTEgKiB0aGlzLndyYXBPZmZzZXQpIDogdGhpcy53cmFwT2Zmc2V0O1xuXG4gICAgICAgIHdoaWxlKHBvc1ggPiBvZmZzZXQgKyBjaGFyV2lkdGgvMikge1xuICAgICAgICAgICAgb2Zmc2V0ICs9IGNoYXJXaWR0aDtcbiAgICAgICAgICAgIGlmKHZpc3VhbElkeCA9PT0gbGV2ZWxzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAvKiBxdWl0IHdoZW4gd2Ugb24gdGhlIHJpZ2h0IG9mIHRoZSBsYXN0IGNoYXJhY3RlciwgZmxhZyB0aGlzIGJ5IGNoYXJXaWR0aCA9IDAgKi9cbiAgICAgICAgICAgICAgICBjaGFyV2lkdGggPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hhcldpZHRoID0gdGhpcy5jaGFyV2lkdGhzW2xldmVsc1srK3Zpc3VhbElkeF1dO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZpc3VhbElkeCA+IDAgJiYgKGxldmVsc1t2aXN1YWxJZHggLSAxXSAlIDIgIT09IDApICYmIChsZXZlbHNbdmlzdWFsSWR4XSAlIDIgPT09IDApKXtcbiAgICAgICAgLyogQmlkaSBjaGFyYWN0ZXIgb24gdGhlIGxlZnQgYW5kIE5vbmUgQmlkaSBjaGFyYWN0ZXIgb24gdGhlIHJpZ2h0ICovXG4gICAgICAgICAgICBpZihwb3NYIDwgb2Zmc2V0KVxuICAgICAgICAgICAgICAgIHZpc3VhbElkeC0tO1xuICAgICAgICAgICAgbG9naWNhbElkeCA9IHRoaXMuYmlkaU1hcC5sb2dpY2FsRnJvbVZpc3VhbFt2aXN1YWxJZHhdO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodmlzdWFsSWR4ID4gMCAmJiAobGV2ZWxzW3Zpc3VhbElkeCAtIDFdICUgMiA9PT0gMCkgJiYgKGxldmVsc1t2aXN1YWxJZHhdICUgMiAhPT0gMCkpe1xuICAgICAgICAvKiBOb25lIEJpZGkgY2hhcmFjdGVyIG9uIHRoZSBsZWZ0IGFuZCBCaWRpIGNoYXJhY3RlciBvbiB0aGUgcmlnaHQgKi9cbiAgICAgICAgICAgIGxvZ2ljYWxJZHggPSAxICsgKChwb3NYID4gb2Zmc2V0KSA/IHRoaXMuYmlkaU1hcC5sb2dpY2FsRnJvbVZpc3VhbFt2aXN1YWxJZHhdXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5iaWRpTWFwLmxvZ2ljYWxGcm9tVmlzdWFsW3Zpc3VhbElkeCAtIDFdKTtcblxuICAgICAgICB9IGVsc2UgaWYgKCh0aGlzLmlzUnRsRGlyICYmIHZpc3VhbElkeCA9PT0gbGV2ZWxzLmxlbmd0aCAtIDEgJiYgY2hhcldpZHRoID09PSAwICYmIChsZXZlbHNbdmlzdWFsSWR4IC0gMV0gJSAyID09PSAwKSlcbiAgICAgICAgICAgICAgICB8fCAoIXRoaXMuaXNSdGxEaXIgJiYgdmlzdWFsSWR4ID09PSAwICYmIChsZXZlbHNbdmlzdWFsSWR4XSAlIDIgIT09IDApKSl7XG4gICAgICAgIC8qIFRvIHRoZSByaWdodCBvZiBsYXN0IGNoYXJhY3Rlciwgd2hpY2ggaXMgTm9uZSBCaWRpLCBpbiBSVEwgZGlyZWN0aW9uIG9yICovXG4gICAgICAgIC8qIHRvIHRoZSBsZWZ0IG9mIGZpcnN0IEJpZGkgY2hhcmFjdGVyLCBpbiBMVFIgZGlyZWN0aW9uICovXG4gICAgICAgICAgICBsb2dpY2FsSWR4ID0gMSArIHRoaXMuYmlkaU1hcC5sb2dpY2FsRnJvbVZpc3VhbFt2aXN1YWxJZHhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogVHdlYWsgdmlzdWFsIHBvc2l0aW9uIHdoZW4gQmlkaSBjaGFyYWN0ZXIgb24gdGhlIGxlZnQgaW4gb3JkZXIgdG8gbWFwIGl0IHRvIGNvcnJlc3BvbmRpbmcgbG9naWNhbCBwb3NpdGlvbiAqL1xuICAgICAgICAgICAgaWYgKHZpc3VhbElkeCA+IDAgJiYgKGxldmVsc1t2aXN1YWxJZHggLSAxXSAlIDIgIT09IDApICYmIGNoYXJXaWR0aCAhPT0gMClcbiAgICAgICAgICAgICAgICB2aXN1YWxJZHgtLTtcblxuICAgICAgICAgICAgLyogUmVndWxhciBjYXNlICovXG4gICAgICAgICAgICBsb2dpY2FsSWR4ID0gdGhpcy5iaWRpTWFwLmxvZ2ljYWxGcm9tVmlzdWFsW3Zpc3VhbElkeF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobG9naWNhbElkeCA9PT0gMCAmJiB0aGlzLmlzUnRsRGlyKVxuICAgICAgICAgICAgbG9naWNhbElkeCsrO1xuXG4gICAgICAgIHJldHVybiAobG9naWNhbElkeCArIHRoaXMud3JhcEluZGVudCk7XG4gICAgfVxuXG59XG5cbmV4cG9ydHMuQmlkaUhhbmRsZXIgPSBCaWRpSGFuZGxlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/bidihandler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/clipboard.js":
/*!************************************************!*\
  !*** ./node_modules/ace-code/src/clipboard.js ***!
  \************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar $cancelT;\nmodule.exports = { \n    /** @type {string|false} */\n    lineMode: false,\n    pasteCancelled: function() {\n        if ($cancelT && $cancelT > Date.now() - 50)\n            return true;\n        return $cancelT = false;\n    },\n    cancel: function() {\n        $cancelT = Date.now();\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2NsaXBib2FyZC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9jbGlwYm9hcmQuanM/YmI4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyICRjYW5jZWxUO1xubW9kdWxlLmV4cG9ydHMgPSB7IFxuICAgIC8qKiBAdHlwZSB7c3RyaW5nfGZhbHNlfSAqL1xuICAgIGxpbmVNb2RlOiBmYWxzZSxcbiAgICBwYXN0ZUNhbmNlbGxlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkY2FuY2VsVCAmJiAkY2FuY2VsVCA+IERhdGUubm93KCkgLSA1MClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gJGNhbmNlbFQgPSBmYWxzZTtcbiAgICB9LFxuICAgIGNhbmNlbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICRjYW5jZWxUID0gRGF0ZS5ub3coKTtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/clipboard.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/commands/command_manager.js":
/*!***************************************************************!*\
  !*** ./node_modules/ace-code/src/commands/command_manager.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n *\n * @typedef {import(\"../editor\").Editor} Editor\n */\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar MultiHashHandler = (__webpack_require__(/*! ../keyboard/hash_handler */ \"./node_modules/ace-code/src/keyboard/hash_handler.js\").MultiHashHandler);\nvar EventEmitter = (__webpack_require__(/*! ../lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\n\nclass CommandManager extends MultiHashHandler{\n    /**\n     * new CommandManager(platform, commands)\n     * @param {String} platform Identifier for the platform; must be either `\"mac\"` or `\"win\"`\n     * @param {any[]} commands A list of commands\n     **/\n    constructor(platform, commands) {\n        super(commands, platform);\n        this.byName = this.commands;\n        this.setDefaultHandler(\"exec\", function(e) {\n            if (!e.args) {\n                return e.command.exec(e.editor, {}, e.event, true);\n            }\n            return e.command.exec(e.editor, e.args, e.event, false);\n        });\n    }\n\n    /**\n     * \n     * @param {string | string[] | import(\"../../ace-internal\").Ace.Command} command\n     * @param {Editor} editor\n     * @param {any} args\n     * @returns {boolean}\n     */\n    exec(command, editor, args) {\n        if (Array.isArray(command)) {\n            for (var i = command.length; i--; ) {\n                if (this.exec(command[i], editor, args)) return true;\n            }\n            return false;\n        }\n        \n        if (typeof command === \"string\")\n            command = this.commands[command];\n\n        if (!this.canExecute(command, editor)) {\n            return false; \n        }\n        \n        var e = {editor: editor, command: command, args: args};\n        e.returnValue = this._emit(\"exec\", e);\n        this._signal(\"afterExec\", e);\n\n        return e.returnValue === false ? false : true;\n    }\n\n    /**\n     *\n     * @param {string | import(\"../../ace-internal\").Ace.Command} command\n     * @param {Editor} editor\n     * @returns {boolean}\n     */\n    canExecute(command, editor) {\n        if (typeof command === \"string\")\n            command = this.commands[command];\n        \n        if (!command)\n            return false;\n\n        if (editor && editor.$readOnly && !command.readOnly)\n            return false;\n\n        if (this.$checkCommandState != false && command.isAvailable && !command.isAvailable(editor))\n            return false;\n        \n        return true;\n    }\n    \n\n    /**\n     * @param {Editor} editor\n     * @returns {boolean}\n     */\n    toggleRecording(editor) {\n        if (this.$inReplay)\n            return;\n\n        editor && editor._emit(\"changeStatus\");\n        if (this.recording) {\n            this.macro.pop();\n            this.off(\"exec\", this.$addCommandToMacro);\n\n            if (!this.macro.length)\n                this.macro = this.oldMacro;\n\n            return this.recording = false;\n        }\n        if (!this.$addCommandToMacro) {\n            this.$addCommandToMacro = function(e) {\n                this.macro.push([e.command, e.args]);\n            }.bind(this);\n        }\n\n        this.oldMacro = this.macro;\n        this.macro = [];\n        this.on(\"exec\", this.$addCommandToMacro);\n        return this.recording = true;\n    }\n\n    /**\n     * @param {Editor} editor\n     */\n    replay(editor) {\n        if (this.$inReplay || !this.macro)\n            return;\n\n        if (this.recording)\n            return this.toggleRecording(editor);\n\n        try {\n            this.$inReplay = true;\n            this.macro.forEach(function(x) {\n                if (typeof x == \"string\")\n                    this.exec(x, editor);\n                else\n                    this.exec(x[0], editor, x[1]);\n            }, this);\n        } finally {\n            this.$inReplay = false;\n        }\n    }\n\n    trimMacro(m) {\n        return m.map(function(x){\n            if (typeof x[0] != \"string\")\n                x[0] = x[0].name;\n            if (!x[1])\n                x = x[0];\n            return x;\n        });\n    }\n\n}\noop.implement(CommandManager.prototype, EventEmitter);\n\nexports.CommandManager = CommandManager;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2NvbW1hbmRzL2NvbW1hbmRfbWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhLDRCQUE0QjtBQUN6QztBQUNBLFVBQVUsbUJBQU8sQ0FBQywwREFBWTtBQUM5Qix1QkFBdUIsOEhBQW9EO0FBQzNFLG1CQUFtQixrSEFBNEM7O0FBRS9EO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUSxzQ0FBc0M7QUFDN0QsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxlQUFlLDhEQUE4RDtBQUM3RSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxLQUFLO0FBQ3BCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsS0FBSztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsbURBQW1EO0FBQ2xFLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBLHNCQUFzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2NvbW1hbmRzL2NvbW1hbmRfbWFuYWdlci5qcz9lMTU0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2VkaXRvclwiKS5FZGl0b3J9IEVkaXRvclxuICovXG52YXIgb29wID0gcmVxdWlyZShcIi4uL2xpYi9vb3BcIik7XG52YXIgTXVsdGlIYXNoSGFuZGxlciA9IHJlcXVpcmUoXCIuLi9rZXlib2FyZC9oYXNoX2hhbmRsZXJcIikuTXVsdGlIYXNoSGFuZGxlcjtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiLi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyO1xuXG5jbGFzcyBDb21tYW5kTWFuYWdlciBleHRlbmRzIE11bHRpSGFzaEhhbmRsZXJ7XG4gICAgLyoqXG4gICAgICogbmV3IENvbW1hbmRNYW5hZ2VyKHBsYXRmb3JtLCBjb21tYW5kcylcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGxhdGZvcm0gSWRlbnRpZmllciBmb3IgdGhlIHBsYXRmb3JtOyBtdXN0IGJlIGVpdGhlciBgXCJtYWNcImAgb3IgYFwid2luXCJgXG4gICAgICogQHBhcmFtIHthbnlbXX0gY29tbWFuZHMgQSBsaXN0IG9mIGNvbW1hbmRzXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHBsYXRmb3JtLCBjb21tYW5kcykge1xuICAgICAgICBzdXBlcihjb21tYW5kcywgcGxhdGZvcm0pO1xuICAgICAgICB0aGlzLmJ5TmFtZSA9IHRoaXMuY29tbWFuZHM7XG4gICAgICAgIHRoaXMuc2V0RGVmYXVsdEhhbmRsZXIoXCJleGVjXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmICghZS5hcmdzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuY29tbWFuZC5leGVjKGUuZWRpdG9yLCB7fSwgZS5ldmVudCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZS5jb21tYW5kLmV4ZWMoZS5lZGl0b3IsIGUuYXJncywgZS5ldmVudCwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdIHwgaW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5Db21tYW5kfSBjb21tYW5kXG4gICAgICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvclxuICAgICAqIEBwYXJhbSB7YW55fSBhcmdzXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgZXhlYyhjb21tYW5kLCBlZGl0b3IsIGFyZ3MpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29tbWFuZCkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjb21tYW5kLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5leGVjKGNvbW1hbmRbaV0sIGVkaXRvciwgYXJncykpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZW9mIGNvbW1hbmQgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICBjb21tYW5kID0gdGhpcy5jb21tYW5kc1tjb21tYW5kXTtcblxuICAgICAgICBpZiAoIXRoaXMuY2FuRXhlY3V0ZShjb21tYW5kLCBlZGl0b3IpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgZSA9IHtlZGl0b3I6IGVkaXRvciwgY29tbWFuZDogY29tbWFuZCwgYXJnczogYXJnc307XG4gICAgICAgIGUucmV0dXJuVmFsdWUgPSB0aGlzLl9lbWl0KFwiZXhlY1wiLCBlKTtcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiYWZ0ZXJFeGVjXCIsIGUpO1xuXG4gICAgICAgIHJldHVybiBlLnJldHVyblZhbHVlID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgaW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5Db21tYW5kfSBjb21tYW5kXG4gICAgICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGNhbkV4ZWN1dGUoY29tbWFuZCwgZWRpdG9yKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29tbWFuZCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIGNvbW1hbmQgPSB0aGlzLmNvbW1hbmRzW2NvbW1hbmRdO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFjb21tYW5kKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGlmIChlZGl0b3IgJiYgZWRpdG9yLiRyZWFkT25seSAmJiAhY29tbWFuZC5yZWFkT25seSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICBpZiAodGhpcy4kY2hlY2tDb21tYW5kU3RhdGUgIT0gZmFsc2UgJiYgY29tbWFuZC5pc0F2YWlsYWJsZSAmJiAhY29tbWFuZC5pc0F2YWlsYWJsZShlZGl0b3IpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIHRvZ2dsZVJlY29yZGluZyhlZGl0b3IpIHtcbiAgICAgICAgaWYgKHRoaXMuJGluUmVwbGF5KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGVkaXRvciAmJiBlZGl0b3IuX2VtaXQoXCJjaGFuZ2VTdGF0dXNcIik7XG4gICAgICAgIGlmICh0aGlzLnJlY29yZGluZykge1xuICAgICAgICAgICAgdGhpcy5tYWNyby5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMub2ZmKFwiZXhlY1wiLCB0aGlzLiRhZGRDb21tYW5kVG9NYWNybyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5tYWNyby5sZW5ndGgpXG4gICAgICAgICAgICAgICAgdGhpcy5tYWNybyA9IHRoaXMub2xkTWFjcm87XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY29yZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy4kYWRkQ29tbWFuZFRvTWFjcm8pIHtcbiAgICAgICAgICAgIHRoaXMuJGFkZENvbW1hbmRUb01hY3JvID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFjcm8ucHVzaChbZS5jb21tYW5kLCBlLmFyZ3NdKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub2xkTWFjcm8gPSB0aGlzLm1hY3JvO1xuICAgICAgICB0aGlzLm1hY3JvID0gW107XG4gICAgICAgIHRoaXMub24oXCJleGVjXCIsIHRoaXMuJGFkZENvbW1hbmRUb01hY3JvKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjb3JkaW5nID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VkaXRvcn0gZWRpdG9yXG4gICAgICovXG4gICAgcmVwbGF5KGVkaXRvcikge1xuICAgICAgICBpZiAodGhpcy4kaW5SZXBsYXkgfHwgIXRoaXMubWFjcm8pXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgaWYgKHRoaXMucmVjb3JkaW5nKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlUmVjb3JkaW5nKGVkaXRvcik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuJGluUmVwbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubWFjcm8uZm9yRWFjaChmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB4ID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlYyh4LCBlZGl0b3IpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leGVjKHhbMF0sIGVkaXRvciwgeFsxXSk7XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuJGluUmVwbGF5ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0cmltTWFjcm8obSkge1xuICAgICAgICByZXR1cm4gbS5tYXAoZnVuY3Rpb24oeCl7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHhbMF0gIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICB4WzBdID0geFswXS5uYW1lO1xuICAgICAgICAgICAgaWYgKCF4WzFdKVxuICAgICAgICAgICAgICAgIHggPSB4WzBdO1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0pO1xuICAgIH1cblxufVxub29wLmltcGxlbWVudChDb21tYW5kTWFuYWdlci5wcm90b3R5cGUsIEV2ZW50RW1pdHRlcik7XG5cbmV4cG9ydHMuQ29tbWFuZE1hbmFnZXIgPSBDb21tYW5kTWFuYWdlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/commands/command_manager.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/commands/default_commands.js":
/*!****************************************************************!*\
  !*** ./node_modules/ace-code/src/commands/default_commands.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar lang = __webpack_require__(/*! ../lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar config = __webpack_require__(/*! ../config */ \"./node_modules/ace-code/src/config.js\");\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\n\nfunction bindKey(win, mac) {\n    return {win: win, mac: mac};\n}\n\n/*\n    multiSelectAction: \"forEach\"|\"forEachLine\"|function|undefined,\n    scrollIntoView: true|\"cursor\"|\"center\"|\"selectionPart\"\n*/\n/**@type {import(\"../../ace-internal\").Ace.Command[]} */\nexports.commands = [{\n    name: \"showSettingsMenu\",\n    description: \"Show settings menu\",\n    bindKey: bindKey(\"Ctrl-,\", \"Command-,\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/settings_menu\", function(module) {\n            module.init(editor);\n            editor.showSettingsMenu();\n        });\n    },\n    readOnly: true\n}, {\n    name: \"goToNextError\",\n    description: \"Go to next error\",\n    bindKey: bindKey(\"Alt-E\", \"F4\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/error_marker\", function(module) {\n            module.showErrorMarker(editor, 1);\n        });\n    },\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"goToPreviousError\",\n    description: \"Go to previous error\",\n    bindKey: bindKey(\"Alt-Shift-E\", \"Shift-F4\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/error_marker\", function(module) {\n            module.showErrorMarker(editor, -1);\n        });\n    },\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"selectall\",\n    description: \"Select all\",\n    bindKey: bindKey(\"Ctrl-A\", \"Command-A\"),\n    exec: function(editor) { editor.selectAll(); },\n    readOnly: true\n}, {\n    name: \"centerselection\",\n    description: \"Center selection\",\n    bindKey: bindKey(null, \"Ctrl-L\"),\n    exec: function(editor) { editor.centerSelection(); },\n    readOnly: true\n}, {\n    name: \"gotoline\",\n    description: \"Go to line...\",\n    bindKey: bindKey(\"Ctrl-L\", \"Command-L\"),\n    exec: function(editor, line) {\n        // backwards compatibility\n        if (typeof line === \"number\" && !isNaN(line))\n            editor.gotoLine(line);\n        editor.prompt({ $type: \"gotoLine\" });\n    },\n    readOnly: true\n}, {\n    name: \"fold\",\n    bindKey: bindKey(\"Alt-L|Ctrl-F1\", \"Command-Alt-L|Command-F1\"),\n    exec: function(editor) { editor.session.toggleFold(false); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"unfold\",\n    bindKey: bindKey(\"Alt-Shift-L|Ctrl-Shift-F1\", \"Command-Alt-Shift-L|Command-Shift-F1\"),\n    exec: function(editor) { editor.session.toggleFold(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"toggleFoldWidget\",\n    description: \"Toggle fold widget\",\n    bindKey: bindKey(\"F2\", \"F2\"),\n    exec: function(editor) { editor.session.toggleFoldWidget(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"toggleParentFoldWidget\",\n    description: \"Toggle parent fold widget\",\n    bindKey: bindKey(\"Alt-F2\", \"Alt-F2\"),\n    exec: function(editor) { editor.session.toggleFoldWidget(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldall\",\n    description: \"Fold all\",\n    bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n    exec: function(editor) { editor.session.foldAll(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldAllComments\",\n    description: \"Fold all comments\",\n    bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n    exec: function(editor) { editor.session.foldAllComments(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldOther\",\n    description: \"Fold other\",\n    bindKey: bindKey(\"Alt-0\", \"Command-Option-0\"),\n    exec: function(editor) { \n        editor.session.foldAll();\n        editor.session.unfold(editor.selection.getAllRanges());\n    },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"unfoldall\",\n    description: \"Unfold all\",\n    bindKey: bindKey(\"Alt-Shift-0\", \"Command-Option-Shift-0\"),\n    exec: function(editor) { editor.session.unfold(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"findnext\",\n    description: \"Find next\",\n    bindKey: bindKey(\"Ctrl-K\", \"Command-G\"),\n    exec: function(editor) { editor.findNext(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"findprevious\",\n    description: \"Find previous\",\n    bindKey: bindKey(\"Ctrl-Shift-K\", \"Command-Shift-G\"),\n    exec: function(editor) { editor.findPrevious(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"selectOrFindNext\",\n    description: \"Select or find next\",\n    bindKey: bindKey(\"Alt-K\", \"Ctrl-G\"),\n    exec: function(editor) {\n        if (editor.selection.isEmpty())\n            editor.selection.selectWord();\n        else\n            editor.findNext(); \n    },\n    readOnly: true\n}, {\n    name: \"selectOrFindPrevious\",\n    description: \"Select or find previous\",\n    bindKey: bindKey(\"Alt-Shift-K\", \"Ctrl-Shift-G\"),\n    exec: function(editor) { \n        if (editor.selection.isEmpty())\n            editor.selection.selectWord();\n        else\n            editor.findPrevious();\n    },\n    readOnly: true\n}, {\n    name: \"find\",\n    description: \"Find\",\n    bindKey: bindKey(\"Ctrl-F\", \"Command-F\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/searchbox\", function(e) {e.Search(editor);});\n    },\n    readOnly: true\n}, {\n    name: \"overwrite\",\n    description: \"Overwrite\",\n    bindKey: \"Insert\",\n    exec: function(editor) { editor.toggleOverwrite(); },\n    readOnly: true\n}, {\n    name: \"selecttostart\",\n    description: \"Select to start\",\n    bindKey: bindKey(\"Ctrl-Shift-Home\", \"Command-Shift-Home|Command-Shift-Up\"),\n    exec: function(editor) { editor.getSelection().selectFileStart(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"gotostart\",\n    description: \"Go to start\",\n    bindKey: bindKey(\"Ctrl-Home\", \"Command-Home|Command-Up\"),\n    exec: function(editor) { editor.navigateFileStart(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"selectup\",\n    description: \"Select up\",\n    bindKey: bindKey(\"Shift-Up\", \"Shift-Up|Ctrl-Shift-P\"),\n    exec: function(editor) { editor.getSelection().selectUp(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"golineup\",\n    description: \"Go line up\",\n    bindKey: bindKey(\"Up\", \"Up|Ctrl-P\"),\n    exec: function(editor, args) { editor.navigateUp(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttoend\",\n    description: \"Select to end\",\n    bindKey: bindKey(\"Ctrl-Shift-End\", \"Command-Shift-End|Command-Shift-Down\"),\n    exec: function(editor) { editor.getSelection().selectFileEnd(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"gotoend\",\n    description: \"Go to end\",\n    bindKey: bindKey(\"Ctrl-End\", \"Command-End|Command-Down\"),\n    exec: function(editor) { editor.navigateFileEnd(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"selectdown\",\n    description: \"Select down\",\n    bindKey: bindKey(\"Shift-Down\", \"Shift-Down|Ctrl-Shift-N\"),\n    exec: function(editor) { editor.getSelection().selectDown(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"golinedown\",\n    description: \"Go line down\",\n    bindKey: bindKey(\"Down\", \"Down|Ctrl-N\"),\n    exec: function(editor, args) { editor.navigateDown(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectwordleft\",\n    description: \"Select word left\",\n    bindKey: bindKey(\"Ctrl-Shift-Left\", \"Option-Shift-Left\"),\n    exec: function(editor) { editor.getSelection().selectWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotowordleft\",\n    description: \"Go to word left\",\n    bindKey: bindKey(\"Ctrl-Left\", \"Option-Left\"),\n    exec: function(editor) { editor.navigateWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttolinestart\",\n    description: \"Select to line start\",\n    bindKey: bindKey(\"Alt-Shift-Left\", \"Command-Shift-Left|Ctrl-Shift-A\"),\n    exec: function(editor) { editor.getSelection().selectLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotolinestart\",\n    description: \"Go to line start\",\n    bindKey: bindKey(\"Alt-Left|Home\", \"Command-Left|Home|Ctrl-A\"),\n    exec: function(editor) { editor.navigateLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectleft\",\n    description: \"Select left\",\n    bindKey: bindKey(\"Shift-Left\", \"Shift-Left|Ctrl-Shift-B\"),\n    exec: function(editor) { editor.getSelection().selectLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotoleft\",\n    description: \"Go to left\",\n    bindKey: bindKey(\"Left\", \"Left|Ctrl-B\"),\n    exec: function(editor, args) { editor.navigateLeft(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectwordright\",\n    description: \"Select word right\",\n    bindKey: bindKey(\"Ctrl-Shift-Right\", \"Option-Shift-Right\"),\n    exec: function(editor) { editor.getSelection().selectWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotowordright\",\n    description: \"Go to word right\",\n    bindKey: bindKey(\"Ctrl-Right\", \"Option-Right\"),\n    exec: function(editor) { editor.navigateWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttolineend\",\n    description: \"Select to line end\",\n    bindKey: bindKey(\"Alt-Shift-Right\", \"Command-Shift-Right|Shift-End|Ctrl-Shift-E\"),\n    exec: function(editor) { editor.getSelection().selectLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotolineend\",\n    description: \"Go to line end\",\n    bindKey: bindKey(\"Alt-Right|End\", \"Command-Right|End|Ctrl-E\"),\n    exec: function(editor) { editor.navigateLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectright\",\n    description: \"Select right\",\n    bindKey: bindKey(\"Shift-Right\", \"Shift-Right\"),\n    exec: function(editor) { editor.getSelection().selectRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotoright\",\n    description: \"Go to right\",\n    bindKey: bindKey(\"Right\", \"Right|Ctrl-F\"),\n    exec: function(editor, args) { editor.navigateRight(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectpagedown\",\n    description: \"Select page down\",\n    bindKey: \"Shift-PageDown\",\n    exec: function(editor) { editor.selectPageDown(); },\n    readOnly: true\n}, {\n    name: \"pagedown\",\n    description: \"Page down\",\n    bindKey: bindKey(null, \"Option-PageDown\"),\n    exec: function(editor) { editor.scrollPageDown(); },\n    readOnly: true\n}, {\n    name: \"gotopagedown\",\n    description: \"Go to page down\",\n    bindKey: bindKey(\"PageDown\", \"PageDown|Ctrl-V\"),\n    exec: function(editor) { editor.gotoPageDown(); },\n    readOnly: true\n}, {\n    name: \"selectpageup\",\n    description: \"Select page up\",\n    bindKey: \"Shift-PageUp\",\n    exec: function(editor) { editor.selectPageUp(); },\n    readOnly: true\n}, {\n    name: \"pageup\",\n    description: \"Page up\",\n    bindKey: bindKey(null, \"Option-PageUp\"),\n    exec: function(editor) { editor.scrollPageUp(); },\n    readOnly: true\n}, {\n    name: \"gotopageup\",\n    description: \"Go to page up\",\n    bindKey: \"PageUp\",\n    exec: function(editor) { editor.gotoPageUp(); },\n    readOnly: true\n}, {\n    name: \"scrollup\",\n    description: \"Scroll up\",\n    bindKey: bindKey(\"Ctrl-Up\", null),\n    exec: function(e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },\n    readOnly: true\n}, {\n    name: \"scrolldown\",\n    description: \"Scroll down\",\n    bindKey: bindKey(\"Ctrl-Down\", null),\n    exec: function(e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },\n    readOnly: true\n}, {\n    name: \"selectlinestart\",\n    description: \"Select line start\",\n    bindKey: \"Shift-Home\",\n    exec: function(editor) { editor.getSelection().selectLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectlineend\",\n    description: \"Select line end\",\n    bindKey: \"Shift-End\",\n    exec: function(editor) { editor.getSelection().selectLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"togglerecording\",\n    description: \"Toggle recording\",\n    bindKey: bindKey(\"Ctrl-Alt-E\", \"Command-Option-E\"),\n    exec: function(editor) { editor.commands.toggleRecording(editor); },\n    readOnly: true\n}, {\n    name: \"replaymacro\",\n    description: \"Replay macro\",\n    bindKey: bindKey(\"Ctrl-Shift-E\", \"Command-Shift-E\"),\n    exec: function(editor) { editor.commands.replay(editor); },\n    readOnly: true\n}, {\n    name: \"jumptomatching\",\n    description: \"Jump to matching\",\n    bindKey: bindKey(\"Ctrl-\\\\|Ctrl-P\", \"Command-\\\\\"),\n    exec: function(editor) { editor.jumpToMatching(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"selecttomatching\",\n    description: \"Select to matching\",\n    bindKey: bindKey(\"Ctrl-Shift-\\\\|Ctrl-Shift-P\", \"Command-Shift-\\\\\"),\n    exec: function(editor) { editor.jumpToMatching(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"expandToMatching\",\n    description: \"Expand to matching\",\n    bindKey: bindKey(\"Ctrl-Shift-M\", \"Ctrl-Shift-M\"),\n    exec: function(editor) { editor.jumpToMatching(true, true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"passKeysToBrowser\",\n    description: \"Pass keys to browser\",\n    bindKey: bindKey(null, null),\n    exec: function() {},\n    passEvent: true,\n    readOnly: true\n}, {\n    name: \"copy\",\n    description: \"Copy\",\n    exec: function(editor) {\n        // placeholder for replay macro\n    },\n    readOnly: true\n},\n\n// commands disabled in readOnly mode\n{\n    name: \"cut\",\n    description: \"Cut\",\n    exec: function(editor) {\n        var cutLine = editor.$copyWithEmptySelection && editor.selection.isEmpty();\n        var range = cutLine ? editor.selection.getLineRange() : editor.selection.getRange();\n        editor._emit(\"cut\", range);\n\n        if (!range.isEmpty())\n            editor.session.remove(range);\n        editor.clearSelection();\n    },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"paste\",\n    description: \"Paste\",\n    exec: function(editor, args) {\n        editor.$handlePaste(args);\n    },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removeline\",\n    description: \"Remove line\",\n    bindKey: bindKey(\"Ctrl-D\", \"Command-D\"),\n    exec: function(editor) { editor.removeLines(); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEachLine\"\n}, {\n    name: \"duplicateSelection\",\n    description: \"Duplicate selection\",\n    bindKey: bindKey(\"Ctrl-Shift-D\", \"Command-Shift-D\"),\n    exec: function(editor) { editor.duplicateSelection(); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"sortlines\",\n    description: \"Sort lines\",\n    bindKey: bindKey(\"Ctrl-Alt-S\", \"Command-Alt-S\"),\n    exec: function(editor) { editor.sortLines(); },\n    scrollIntoView: \"selection\",\n    multiSelectAction: \"forEachLine\"\n}, {\n    name: \"togglecomment\",\n    description: \"Toggle comment\",\n    bindKey: bindKey(\"Ctrl-/\", \"Command-/\"),\n    exec: function(editor) { editor.toggleCommentLines(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"toggleBlockComment\",\n    description: \"Toggle block comment\",\n    bindKey: bindKey(\"Ctrl-Shift-/\", \"Command-Shift-/\"),\n    exec: function(editor) { editor.toggleBlockComment(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"modifyNumberUp\",\n    description: \"Modify number up\",\n    bindKey: bindKey(\"Ctrl-Shift-Up\", \"Alt-Shift-Up\"),\n    exec: function(editor) { editor.modifyNumber(1); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"modifyNumberDown\",\n    description: \"Modify number down\",\n    bindKey: bindKey(\"Ctrl-Shift-Down\", \"Alt-Shift-Down\"),\n    exec: function(editor) { editor.modifyNumber(-1); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"replace\",\n    description: \"Replace\",\n    bindKey: bindKey(\"Ctrl-H\", \"Command-Option-F\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/searchbox\", function(e) {e.Search(editor, true);});\n    }\n}, {\n    name: \"undo\",\n    description: \"Undo\",\n    bindKey: bindKey(\"Ctrl-Z\", \"Command-Z\"),\n    exec: function(editor) { editor.undo(); }\n}, {\n    name: \"redo\",\n    description: \"Redo\",\n    bindKey: bindKey(\"Ctrl-Shift-Z|Ctrl-Y\", \"Command-Shift-Z|Command-Y\"),\n    exec: function(editor) { editor.redo(); }\n}, {\n    name: \"copylinesup\",\n    description: \"Copy lines up\",\n    bindKey: bindKey(\"Alt-Shift-Up\", \"Command-Option-Up\"),\n    exec: function(editor) { editor.copyLinesUp(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"movelinesup\",\n    description: \"Move lines up\",\n    bindKey: bindKey(\"Alt-Up\", \"Option-Up\"),\n    exec: function(editor) { editor.moveLinesUp(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"copylinesdown\",\n    description: \"Copy lines down\",\n    bindKey: bindKey(\"Alt-Shift-Down\", \"Command-Option-Down\"),\n    exec: function(editor) { editor.copyLinesDown(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"movelinesdown\",\n    description: \"Move lines down\",\n    bindKey: bindKey(\"Alt-Down\", \"Option-Down\"),\n    exec: function(editor) { editor.moveLinesDown(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"del\",\n    description: \"Delete\",\n    bindKey: bindKey(\"Delete\", \"Delete|Ctrl-D|Shift-Delete\"),\n    exec: function(editor) { editor.remove(\"right\"); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"backspace\",\n    description: \"Backspace\",\n    bindKey: bindKey(\n        \"Shift-Backspace|Backspace\",\n        \"Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H\"\n    ),\n    exec: function(editor) { editor.remove(\"left\"); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"cut_or_delete\",\n    description: \"Cut or delete\",\n    bindKey: bindKey(\"Shift-Delete\", null),\n    exec: function(editor) { \n        if (editor.selection.isEmpty()) {\n            editor.remove(\"left\");\n        } else {\n            return false;\n        }\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolinestart\",\n    description: \"Remove to line start\",\n    bindKey: bindKey(\"Alt-Backspace\", \"Command-Backspace\"),\n    exec: function(editor) { editor.removeToLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolineend\",\n    description: \"Remove to line end\",\n    bindKey: bindKey(\"Alt-Delete\", \"Ctrl-K|Command-Delete\"),\n    exec: function(editor) { editor.removeToLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolinestarthard\",\n    description: \"Remove to line start hard\",\n    bindKey: bindKey(\"Ctrl-Shift-Backspace\", null),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n        range.start.column = 0;\n        editor.session.remove(range);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolineendhard\",\n    description: \"Remove to line end hard\",\n    bindKey: bindKey(\"Ctrl-Shift-Delete\", null),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n        range.end.column = Number.MAX_VALUE;\n        editor.session.remove(range);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removewordleft\",\n    description: \"Remove word left\",\n    bindKey: bindKey(\"Ctrl-Backspace\", \"Alt-Backspace|Ctrl-Alt-Backspace\"),\n    exec: function(editor) { editor.removeWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removewordright\",\n    description: \"Remove word right\",\n    bindKey: bindKey(\"Ctrl-Delete\", \"Alt-Delete\"),\n    exec: function(editor) { editor.removeWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"outdent\",\n    description: \"Outdent\",\n    bindKey: bindKey(\"Shift-Tab\", \"Shift-Tab\"),\n    exec: function(editor) { editor.blockOutdent(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"indent\",\n    description: \"Indent\",\n    bindKey: bindKey(\"Tab\", \"Tab\"),\n    exec: function(editor) { editor.indent(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"blockoutdent\",\n    description: \"Block outdent\",\n    bindKey: bindKey(\"Ctrl-[\", \"Ctrl-[\"),\n    exec: function(editor) { editor.blockOutdent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"blockindent\",\n    description: \"Block indent\",\n    bindKey: bindKey(\"Ctrl-]\", \"Ctrl-]\"),\n    exec: function(editor) { editor.blockIndent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"insertstring\",\n    description: \"Insert string\",\n    exec: function(editor, str) { editor.insert(str); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"inserttext\",\n    description: \"Insert text\",\n    exec: function(editor, args) {\n        editor.insert(lang.stringRepeat(args.text  || \"\", args.times || 1));\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"splitline\",\n    description: \"Split line\",\n    bindKey: bindKey(null, \"Ctrl-O\"),\n    exec: function(editor) { editor.splitLine(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"transposeletters\",\n    description: \"Transpose letters\",\n    bindKey: bindKey(\"Alt-Shift-X\", \"Ctrl-T\"),\n    exec: function(editor) { editor.transposeLetters(); },\n    multiSelectAction: function(editor) {editor.transposeSelections(1); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"touppercase\",\n    description: \"To uppercase\",\n    bindKey: bindKey(\"Ctrl-U\", \"Ctrl-U\"),\n    exec: function(editor) { editor.toUpperCase(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"tolowercase\",\n    description: \"To lowercase\",\n    bindKey: bindKey(\"Ctrl-Shift-U\", \"Ctrl-Shift-U\"),\n    exec: function(editor) { editor.toLowerCase(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"autoindent\",\n    description: \"Auto Indent\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) { editor.autoIndent(); },\n    scrollIntoView: \"animate\"\n}, {\n    name: \"expandtoline\",\n    description: \"Expand to line\",\n    bindKey: bindKey(\"Ctrl-Shift-L\", \"Command-Shift-L\"),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n\n        range.start.column = range.end.column = 0;\n        range.end.row++;\n        editor.selection.setRange(range, false);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"openlink\",\n    bindKey: bindKey(\"Ctrl+F3\", \"F3\"),\n    exec: function(editor) { editor.openLink(); }\n}, {\n    name: \"joinlines\",\n    description: \"Join lines\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        var isBackwards = editor.selection.isBackwards();\n        var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();\n        var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();\n        var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;\n        var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());\n        var selectedCount = selectedText.replace(/\\n\\s*/, \" \").length;\n        var insertLine = editor.session.doc.getLine(selectionStart.row);\n\n        for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {\n            var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));\n            if (curLine.length !== 0) {\n                curLine = \" \" + curLine;\n            }\n            insertLine += curLine;\n        }\n\n        if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {\n            // Don't insert a newline at the end of the document\n            insertLine += editor.session.doc.getNewLineCharacter();\n        }\n\n        editor.clearSelection();\n        editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);\n\n        if (selectedCount > 0) {\n            // Select the text that was previously selected\n            editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);\n            editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);\n        } else {\n            // If the joined line had something in it, start the cursor at that something\n            firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;\n            editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);\n        }\n    },\n    multiSelectAction: \"forEach\",\n    readOnly: true\n}, {\n    name: \"invertSelection\",\n    description: \"Invert selection\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        var endRow = editor.session.doc.getLength() - 1;\n        var endCol = editor.session.doc.getLine(endRow).length;\n        var ranges = editor.selection.rangeList.ranges;\n        var newRanges = [];\n\n        // If multiple selections don't exist, rangeList will return 0 so replace with single range\n        if (ranges.length < 1) {\n            ranges = [editor.selection.getRange()];\n        }\n\n        for (var i = 0; i < ranges.length; i++) {\n            if (i == (ranges.length - 1)) {\n                // The last selection must connect to the end of the document, unless it already does\n                if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {\n                    newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));\n                }\n            }\n\n            if (i === 0) {\n                // The first selection must connect to the start of the document, unless it already does\n                if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {\n                    newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));\n                }\n            } else {\n                newRanges.push(new Range(ranges[i-1].end.row, ranges[i-1].end.column, ranges[i].start.row, ranges[i].start.column));\n            }\n        }\n\n        editor.exitMultiSelectMode();\n        editor.clearSelection();\n\n        for(var i = 0; i < newRanges.length; i++) {\n            editor.selection.addRange(newRanges[i], false);\n        }\n    },\n    readOnly: true,\n    scrollIntoView: \"none\"\n}, {\n    name: \"addLineAfter\",\n    description: \"Add new line after the current line\",\n    exec: function(editor) {\n        editor.selection.clearSelection();\n        editor.navigateLineEnd();\n        editor.insert(\"\\n\");\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"addLineBefore\",\n    description: \"Add new line before the current line\",\n    exec: function(editor) {\n        editor.selection.clearSelection();\n        var cursor = editor.getCursorPosition();\n        editor.selection.moveTo(cursor.row - 1, Number.MAX_VALUE);\n        editor.insert(\"\\n\");\n        if (cursor.row === 0) editor.navigateUp();\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"openCommandPallete\",\n    exec: function(editor) {\n        console.warn(\"This is an obsolete command. Please use `openCommandPalette` instead.\");\n        editor.prompt({ $type: \"commands\" });\n    },\n    readOnly: true\n}, {\n    name: \"openCommandPalette\",\n    description: \"Open command palette\",\n    bindKey: bindKey(\"F1\", \"F1\"),\n    exec: function(editor) {\n        editor.prompt({ $type: \"commands\" });\n    },\n    readOnly: true\n}, {\n    name: \"modeSelect\",\n    description: \"Change language mode...\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        editor.prompt({ $type: \"modes\" });\n    },\n    readOnly: true\n}];\n\nfor (var i = 1; i < 9; i++) {\n    exports.commands.push({\n        name: \"foldToLevel\" + i,\n        description: \"Fold To Level \" + i,\n        level: i,\n        exec: function(editor) { editor.session.foldToLevel(this.level); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2NvbW1hbmRzL2RlZmF1bHRfY29tbWFuZHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsV0FBVyxtQkFBTyxDQUFDLDREQUFhO0FBQ2hDLGFBQWEsbUJBQU8sQ0FBQyx3REFBVztBQUNoQyxZQUFZLG1GQUF5Qjs7QUFFckM7QUFDQSxZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDRDQUE0QztBQUN0RCxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHFCQUFxQjtBQUNsRDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMkJBQTJCO0FBQ3hEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQyxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLDZCQUE2QixtQ0FBbUM7QUFDaEU7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSw2QkFBNkIsa0NBQWtDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsb0NBQW9DO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0NBQXdDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMkJBQTJCO0FBQ3hEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1DQUFtQztBQUNoRTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwQkFBMEI7QUFDdkQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsb0JBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0JBQXdCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsa0JBQWtCO0FBQzlFLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMkJBQTJCO0FBQ3hEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwQ0FBMEM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZCQUE2QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbUNBQW1DO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0NBQWdDO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0NBQXdDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyQkFBMkI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHFDQUFxQztBQUNsRTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGtDQUFrQztBQUNyRTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlDQUF5QztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRCQUE0QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBDQUEwQztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZCQUE2QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHFDQUFxQztBQUNsRTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGtDQUFrQztBQUNyRTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBDQUEwQztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZCQUE2QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdDQUF3QztBQUNyRTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJCQUEyQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNDQUFzQztBQUNuRTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG1DQUFtQztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBCQUEwQjtBQUN2RDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMEJBQTBCO0FBQ3ZEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix3QkFBd0I7QUFDckQ7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdCQUF3QjtBQUNyRDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0JBQXdCO0FBQ3JEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixzQkFBc0I7QUFDbkQ7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlFQUFpRTtBQUN6RjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0VBQWdFO0FBQ3hGO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwQ0FBMEM7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix3Q0FBd0M7QUFDckU7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwQ0FBMEM7QUFDdkU7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlDQUFpQztBQUM5RDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMEJBQTBCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOEJBQThCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsb0NBQW9DO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDhCQUE4QjtBQUMzRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxQkFBcUI7QUFDbEQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOEJBQThCO0FBQzNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDhCQUE4QjtBQUMzRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5QkFBeUI7QUFDdEQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMEJBQTBCO0FBQ3ZEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsd0JBQXdCO0FBQ3BGO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUI7QUFDcEQ7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlCQUF5QjtBQUN0RDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseUJBQXlCO0FBQ3REO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5QkFBeUI7QUFDdEQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsd0JBQXdCO0FBQ3JEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNkJBQTZCO0FBQzFEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJCQUEyQjtBQUN4RDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMEJBQTBCO0FBQ3ZEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJCQUEyQjtBQUN4RDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix3QkFBd0I7QUFDckQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsa0JBQWtCO0FBQy9DO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdCQUF3QjtBQUNyRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUI7QUFDcEQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0Esa0NBQWtDLHFCQUFxQjtBQUN2RDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHFCQUFxQjtBQUNsRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0QkFBNEI7QUFDekQseUNBQXlDLGdDQUFnQztBQUN6RTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixzQkFBc0I7QUFDbkQ7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkNBQTZDLDJCQUEyQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQyxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEMsS0FBSztBQUNMO0FBQ0EsQ0FBQzs7QUFFRCxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx5Q0FBeUM7QUFDMUU7QUFDQTtBQUNBLEtBQUs7QUFDTCIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2NvbW1hbmRzL2RlZmF1bHRfY29tbWFuZHMuanM/M2ZhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIGxhbmcgPSByZXF1aXJlKFwiLi4vbGliL2xhbmdcIik7XG52YXIgY29uZmlnID0gcmVxdWlyZShcIi4uL2NvbmZpZ1wiKTtcbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuLi9yYW5nZVwiKS5SYW5nZTtcblxuZnVuY3Rpb24gYmluZEtleSh3aW4sIG1hYykge1xuICAgIHJldHVybiB7d2luOiB3aW4sIG1hYzogbWFjfTtcbn1cblxuLypcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCJ8XCJmb3JFYWNoTGluZVwifGZ1bmN0aW9ufHVuZGVmaW5lZCxcbiAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZXxcImN1cnNvclwifFwiY2VudGVyXCJ8XCJzZWxlY3Rpb25QYXJ0XCJcbiovXG4vKipAdHlwZSB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5Db21tYW5kW119ICovXG5leHBvcnRzLmNvbW1hbmRzID0gW3tcbiAgICBuYW1lOiBcInNob3dTZXR0aW5nc01lbnVcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTaG93IHNldHRpbmdzIG1lbnVcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC0sXCIsIFwiQ29tbWFuZC0sXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgICBjb25maWcubG9hZE1vZHVsZShcImFjZS9leHQvc2V0dGluZ3NfbWVudVwiLCBmdW5jdGlvbihtb2R1bGUpIHtcbiAgICAgICAgICAgIG1vZHVsZS5pbml0KGVkaXRvcik7XG4gICAgICAgICAgICBlZGl0b3Iuc2hvd1NldHRpbmdzTWVudSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJnb1RvTmV4dEVycm9yXCIsXG4gICAgZGVzY3JpcHRpb246IFwiR28gdG8gbmV4dCBlcnJvclwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJBbHQtRVwiLCBcIkY0XCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgICBjb25maWcubG9hZE1vZHVsZShcImFjZS9leHQvZXJyb3JfbWFya2VyXCIsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgICAgICAgbW9kdWxlLnNob3dFcnJvck1hcmtlcihlZGl0b3IsIDEpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcImFuaW1hdGVcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwiZ29Ub1ByZXZpb3VzRXJyb3JcIixcbiAgICBkZXNjcmlwdGlvbjogXCJHbyB0byBwcmV2aW91cyBlcnJvclwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJBbHQtU2hpZnQtRVwiLCBcIlNoaWZ0LUY0XCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgICBjb25maWcubG9hZE1vZHVsZShcImFjZS9leHQvZXJyb3JfbWFya2VyXCIsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgICAgICAgbW9kdWxlLnNob3dFcnJvck1hcmtlcihlZGl0b3IsIC0xKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJhbmltYXRlXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdGFsbFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlNlbGVjdCBhbGxcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1BXCIsIFwiQ29tbWFuZC1BXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3Iuc2VsZWN0QWxsKCk7IH0sXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImNlbnRlcnNlbGVjdGlvblwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkNlbnRlciBzZWxlY3Rpb25cIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KG51bGwsIFwiQ3RybC1MXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuY2VudGVyU2VsZWN0aW9uKCk7IH0sXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImdvdG9saW5lXCIsXG4gICAgZGVzY3JpcHRpb246IFwiR28gdG8gbGluZS4uLlwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLUxcIiwgXCJDb21tYW5kLUxcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yLCBsaW5lKSB7XG4gICAgICAgIC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgIGlmICh0eXBlb2YgbGluZSA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4obGluZSkpXG4gICAgICAgICAgICBlZGl0b3IuZ290b0xpbmUobGluZSk7XG4gICAgICAgIGVkaXRvci5wcm9tcHQoeyAkdHlwZTogXCJnb3RvTGluZVwiIH0pO1xuICAgIH0sXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImZvbGRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQWx0LUx8Q3RybC1GMVwiLCBcIkNvbW1hbmQtQWx0LUx8Q29tbWFuZC1GMVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlc3Npb24udG9nZ2xlRm9sZChmYWxzZSk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImNlbnRlclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJ1bmZvbGRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQWx0LVNoaWZ0LUx8Q3RybC1TaGlmdC1GMVwiLCBcIkNvbW1hbmQtQWx0LVNoaWZ0LUx8Q29tbWFuZC1TaGlmdC1GMVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlc3Npb24udG9nZ2xlRm9sZCh0cnVlKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY2VudGVyXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInRvZ2dsZUZvbGRXaWRnZXRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJUb2dnbGUgZm9sZCB3aWRnZXRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiRjJcIiwgXCJGMlwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlc3Npb24udG9nZ2xlRm9sZFdpZGdldCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjZW50ZXJcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwidG9nZ2xlUGFyZW50Rm9sZFdpZGdldFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlRvZ2dsZSBwYXJlbnQgZm9sZCB3aWRnZXRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQWx0LUYyXCIsIFwiQWx0LUYyXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3Iuc2Vzc2lvbi50b2dnbGVGb2xkV2lkZ2V0KHRydWUpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjZW50ZXJcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwiZm9sZGFsbFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkZvbGQgYWxsXCIsXG4gICAgYmluZEtleTogYmluZEtleShudWxsLCBcIkN0cmwtQ29tbWFuZC1PcHRpb24tMFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlc3Npb24uZm9sZEFsbCgpOyB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcImNlbnRlclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJmb2xkQWxsQ29tbWVudHNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJGb2xkIGFsbCBjb21tZW50c1wiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkobnVsbCwgXCJDdHJsLUNvbW1hbmQtT3B0aW9uLTBcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5zZXNzaW9uLmZvbGRBbGxDb21tZW50cygpOyB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcImNlbnRlclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJmb2xkT3RoZXJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJGb2xkIG90aGVyXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC0wXCIsIFwiQ29tbWFuZC1PcHRpb24tMFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgXG4gICAgICAgIGVkaXRvci5zZXNzaW9uLmZvbGRBbGwoKTtcbiAgICAgICAgZWRpdG9yLnNlc3Npb24udW5mb2xkKGVkaXRvci5zZWxlY3Rpb24uZ2V0QWxsUmFuZ2VzKCkpO1xuICAgIH0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY2VudGVyXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInVuZm9sZGFsbFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlVuZm9sZCBhbGxcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQWx0LVNoaWZ0LTBcIiwgXCJDb21tYW5kLU9wdGlvbi1TaGlmdC0wXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3Iuc2Vzc2lvbi51bmZvbGQoKTsgfSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjZW50ZXJcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwiZmluZG5leHRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJGaW5kIG5leHRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1LXCIsIFwiQ29tbWFuZC1HXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuZmluZE5leHQoKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY2VudGVyXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImZpbmRwcmV2aW91c1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkZpbmQgcHJldmlvdXNcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1TaGlmdC1LXCIsIFwiQ29tbWFuZC1TaGlmdC1HXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuZmluZFByZXZpb3VzKCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImNlbnRlclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJzZWxlY3RPckZpbmROZXh0XCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IG9yIGZpbmQgbmV4dFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJBbHQtS1wiLCBcIkN0cmwtR1wiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgaWYgKGVkaXRvci5zZWxlY3Rpb24uaXNFbXB0eSgpKVxuICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZWxlY3RXb3JkKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGVkaXRvci5maW5kTmV4dCgpOyBcbiAgICB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJzZWxlY3RPckZpbmRQcmV2aW91c1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlNlbGVjdCBvciBmaW5kIHByZXZpb3VzXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC1TaGlmdC1LXCIsIFwiQ3RybC1TaGlmdC1HXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBcbiAgICAgICAgaWYgKGVkaXRvci5zZWxlY3Rpb24uaXNFbXB0eSgpKVxuICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZWxlY3RXb3JkKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGVkaXRvci5maW5kUHJldmlvdXMoKTtcbiAgICB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJmaW5kXCIsXG4gICAgZGVzY3JpcHRpb246IFwiRmluZFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLUZcIiwgXCJDb21tYW5kLUZcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICAgIGNvbmZpZy5sb2FkTW9kdWxlKFwiYWNlL2V4dC9zZWFyY2hib3hcIiwgZnVuY3Rpb24oZSkge2UuU2VhcmNoKGVkaXRvcik7fSk7XG4gICAgfSxcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwib3ZlcndyaXRlXCIsXG4gICAgZGVzY3JpcHRpb246IFwiT3ZlcndyaXRlXCIsXG4gICAgYmluZEtleTogXCJJbnNlcnRcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnRvZ2dsZU92ZXJ3cml0ZSgpOyB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJzZWxlY3R0b3N0YXJ0XCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IHRvIHN0YXJ0XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtU2hpZnQtSG9tZVwiLCBcIkNvbW1hbmQtU2hpZnQtSG9tZXxDb21tYW5kLVNoaWZ0LVVwXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RmlsZVN0YXJ0KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImFuaW1hdGVcIixcbiAgICBhY2VDb21tYW5kR3JvdXA6IFwiZmlsZUp1bXBcIlxufSwge1xuICAgIG5hbWU6IFwiZ290b3N0YXJ0XCIsXG4gICAgZGVzY3JpcHRpb246IFwiR28gdG8gc3RhcnRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1Ib21lXCIsIFwiQ29tbWFuZC1Ib21lfENvbW1hbmQtVXBcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5uYXZpZ2F0ZUZpbGVTdGFydCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICByZWFkT25seTogdHJ1ZSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJhbmltYXRlXCIsXG4gICAgYWNlQ29tbWFuZEdyb3VwOiBcImZpbGVKdW1wXCJcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdHVwXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IHVwXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIlNoaWZ0LVVwXCIsIFwiU2hpZnQtVXB8Q3RybC1TaGlmdC1QXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0VXAoKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImdvbGluZXVwXCIsXG4gICAgZGVzY3JpcHRpb246IFwiR28gbGluZSB1cFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJVcFwiLCBcIlVwfEN0cmwtUFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IsIGFyZ3MpIHsgZWRpdG9yLm5hdmlnYXRlVXAoYXJncy50aW1lcyk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJzZWxlY3R0b2VuZFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlNlbGVjdCB0byBlbmRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1TaGlmdC1FbmRcIiwgXCJDb21tYW5kLVNoaWZ0LUVuZHxDb21tYW5kLVNoaWZ0LURvd25cIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5nZXRTZWxlY3Rpb24oKS5zZWxlY3RGaWxlRW5kKCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImFuaW1hdGVcIixcbiAgICBhY2VDb21tYW5kR3JvdXA6IFwiZmlsZUp1bXBcIlxufSwge1xuICAgIG5hbWU6IFwiZ290b2VuZFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkdvIHRvIGVuZFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLUVuZFwiLCBcIkNvbW1hbmQtRW5kfENvbW1hbmQtRG93blwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLm5hdmlnYXRlRmlsZUVuZCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICByZWFkT25seTogdHJ1ZSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJhbmltYXRlXCIsXG4gICAgYWNlQ29tbWFuZEdyb3VwOiBcImZpbGVKdW1wXCJcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdGRvd25cIixcbiAgICBkZXNjcmlwdGlvbjogXCJTZWxlY3QgZG93blwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJTaGlmdC1Eb3duXCIsIFwiU2hpZnQtRG93bnxDdHJsLVNoaWZ0LU5cIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5nZXRTZWxlY3Rpb24oKS5zZWxlY3REb3duKCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJnb2xpbmVkb3duXCIsXG4gICAgZGVzY3JpcHRpb246IFwiR28gbGluZSBkb3duXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkRvd25cIiwgXCJEb3dufEN0cmwtTlwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IsIGFyZ3MpIHsgZWRpdG9yLm5hdmlnYXRlRG93bihhcmdzLnRpbWVzKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdHdvcmRsZWZ0XCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IHdvcmQgbGVmdFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLVNoaWZ0LUxlZnRcIiwgXCJPcHRpb24tU2hpZnQtTGVmdFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmdldFNlbGVjdGlvbigpLnNlbGVjdFdvcmRMZWZ0KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJnb3Rvd29yZGxlZnRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJHbyB0byB3b3JkIGxlZnRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1MZWZ0XCIsIFwiT3B0aW9uLUxlZnRcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5uYXZpZ2F0ZVdvcmRMZWZ0KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJzZWxlY3R0b2xpbmVzdGFydFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlNlbGVjdCB0byBsaW5lIHN0YXJ0XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC1TaGlmdC1MZWZ0XCIsIFwiQ29tbWFuZC1TaGlmdC1MZWZ0fEN0cmwtU2hpZnQtQVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmdldFNlbGVjdGlvbigpLnNlbGVjdExpbmVTdGFydCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwiZ290b2xpbmVzdGFydFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkdvIHRvIGxpbmUgc3RhcnRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQWx0LUxlZnR8SG9tZVwiLCBcIkNvbW1hbmQtTGVmdHxIb21lfEN0cmwtQVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLm5hdmlnYXRlTGluZVN0YXJ0KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJzZWxlY3RsZWZ0XCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IGxlZnRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiU2hpZnQtTGVmdFwiLCBcIlNoaWZ0LUxlZnR8Q3RybC1TaGlmdC1CXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0TGVmdCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwiZ290b2xlZnRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJHbyB0byBsZWZ0XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkxlZnRcIiwgXCJMZWZ0fEN0cmwtQlwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IsIGFyZ3MpIHsgZWRpdG9yLm5hdmlnYXRlTGVmdChhcmdzLnRpbWVzKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdHdvcmRyaWdodFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlNlbGVjdCB3b3JkIHJpZ2h0XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtU2hpZnQtUmlnaHRcIiwgXCJPcHRpb24tU2hpZnQtUmlnaHRcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5nZXRTZWxlY3Rpb24oKS5zZWxlY3RXb3JkUmlnaHQoKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImdvdG93b3JkcmlnaHRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJHbyB0byB3b3JkIHJpZ2h0XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtUmlnaHRcIiwgXCJPcHRpb24tUmlnaHRcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5uYXZpZ2F0ZVdvcmRSaWdodCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwic2VsZWN0dG9saW5lZW5kXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IHRvIGxpbmUgZW5kXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC1TaGlmdC1SaWdodFwiLCBcIkNvbW1hbmQtU2hpZnQtUmlnaHR8U2hpZnQtRW5kfEN0cmwtU2hpZnQtRVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmdldFNlbGVjdGlvbigpLnNlbGVjdExpbmVFbmQoKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImdvdG9saW5lZW5kXCIsXG4gICAgZGVzY3JpcHRpb246IFwiR28gdG8gbGluZSBlbmRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQWx0LVJpZ2h0fEVuZFwiLCBcIkNvbW1hbmQtUmlnaHR8RW5kfEN0cmwtRVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLm5hdmlnYXRlTGluZUVuZCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwic2VsZWN0cmlnaHRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTZWxlY3QgcmlnaHRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiU2hpZnQtUmlnaHRcIiwgXCJTaGlmdC1SaWdodFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmdldFNlbGVjdGlvbigpLnNlbGVjdFJpZ2h0KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJnb3RvcmlnaHRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJHbyB0byByaWdodFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJSaWdodFwiLCBcIlJpZ2h0fEN0cmwtRlwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IsIGFyZ3MpIHsgZWRpdG9yLm5hdmlnYXRlUmlnaHQoYXJncy50aW1lcyk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJzZWxlY3RwYWdlZG93blwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlNlbGVjdCBwYWdlIGRvd25cIixcbiAgICBiaW5kS2V5OiBcIlNoaWZ0LVBhZ2VEb3duXCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5zZWxlY3RQYWdlRG93bigpOyB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJwYWdlZG93blwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlBhZ2UgZG93blwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkobnVsbCwgXCJPcHRpb24tUGFnZURvd25cIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5zY3JvbGxQYWdlRG93bigpOyB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJnb3RvcGFnZWRvd25cIixcbiAgICBkZXNjcmlwdGlvbjogXCJHbyB0byBwYWdlIGRvd25cIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiUGFnZURvd25cIiwgXCJQYWdlRG93bnxDdHJsLVZcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5nb3RvUGFnZURvd24oKTsgfSxcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwic2VsZWN0cGFnZXVwXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IHBhZ2UgdXBcIixcbiAgICBiaW5kS2V5OiBcIlNoaWZ0LVBhZ2VVcFwiLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3Iuc2VsZWN0UGFnZVVwKCk7IH0sXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInBhZ2V1cFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlBhZ2UgdXBcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KG51bGwsIFwiT3B0aW9uLVBhZ2VVcFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNjcm9sbFBhZ2VVcCgpOyB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJnb3RvcGFnZXVwXCIsXG4gICAgZGVzY3JpcHRpb246IFwiR28gdG8gcGFnZSB1cFwiLFxuICAgIGJpbmRLZXk6IFwiUGFnZVVwXCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5nb3RvUGFnZVVwKCk7IH0sXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNjcm9sbHVwXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2Nyb2xsIHVwXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtVXBcIiwgbnVsbCksXG4gICAgZXhlYzogZnVuY3Rpb24oZSkgeyBlLnJlbmRlcmVyLnNjcm9sbEJ5KDAsIC0yICogZS5yZW5kZXJlci5sYXllckNvbmZpZy5saW5lSGVpZ2h0KTsgfSxcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwic2Nyb2xsZG93blwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlNjcm9sbCBkb3duXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtRG93blwiLCBudWxsKSxcbiAgICBleGVjOiBmdW5jdGlvbihlKSB7IGUucmVuZGVyZXIuc2Nyb2xsQnkoMCwgMiAqIGUucmVuZGVyZXIubGF5ZXJDb25maWcubGluZUhlaWdodCk7IH0sXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdGxpbmVzdGFydFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlNlbGVjdCBsaW5lIHN0YXJ0XCIsXG4gICAgYmluZEtleTogXCJTaGlmdC1Ib21lXCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5nZXRTZWxlY3Rpb24oKS5zZWxlY3RMaW5lU3RhcnQoKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdGxpbmVlbmRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTZWxlY3QgbGluZSBlbmRcIixcbiAgICBiaW5kS2V5OiBcIlNoaWZ0LUVuZFwiLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0TGluZUVuZCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwidG9nZ2xlcmVjb3JkaW5nXCIsXG4gICAgZGVzY3JpcHRpb246IFwiVG9nZ2xlIHJlY29yZGluZ1wiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLUFsdC1FXCIsIFwiQ29tbWFuZC1PcHRpb24tRVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmNvbW1hbmRzLnRvZ2dsZVJlY29yZGluZyhlZGl0b3IpOyB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJyZXBsYXltYWNyb1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlJlcGxheSBtYWNyb1wiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLVNoaWZ0LUVcIiwgXCJDb21tYW5kLVNoaWZ0LUVcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5jb21tYW5kcy5yZXBsYXkoZWRpdG9yKTsgfSxcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwianVtcHRvbWF0Y2hpbmdcIixcbiAgICBkZXNjcmlwdGlvbjogXCJKdW1wIHRvIG1hdGNoaW5nXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtXFxcXHxDdHJsLVBcIiwgXCJDb21tYW5kLVxcXFxcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5qdW1wVG9NYXRjaGluZygpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJhbmltYXRlXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdHRvbWF0Y2hpbmdcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTZWxlY3QgdG8gbWF0Y2hpbmdcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1TaGlmdC1cXFxcfEN0cmwtU2hpZnQtUFwiLCBcIkNvbW1hbmQtU2hpZnQtXFxcXFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmp1bXBUb01hdGNoaW5nKHRydWUpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJhbmltYXRlXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImV4cGFuZFRvTWF0Y2hpbmdcIixcbiAgICBkZXNjcmlwdGlvbjogXCJFeHBhbmQgdG8gbWF0Y2hpbmdcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1TaGlmdC1NXCIsIFwiQ3RybC1TaGlmdC1NXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuanVtcFRvTWF0Y2hpbmcodHJ1ZSwgdHJ1ZSk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImFuaW1hdGVcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwicGFzc0tleXNUb0Jyb3dzZXJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJQYXNzIGtleXMgdG8gYnJvd3NlclwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkobnVsbCwgbnVsbCksXG4gICAgZXhlYzogZnVuY3Rpb24oKSB7fSxcbiAgICBwYXNzRXZlbnQ6IHRydWUsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcImNvcHlcIixcbiAgICBkZXNjcmlwdGlvbjogXCJDb3B5XCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICAgIC8vIHBsYWNlaG9sZGVyIGZvciByZXBsYXkgbWFjcm9cbiAgICB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LFxuXG4vLyBjb21tYW5kcyBkaXNhYmxlZCBpbiByZWFkT25seSBtb2RlXG57XG4gICAgbmFtZTogXCJjdXRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJDdXRcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgdmFyIGN1dExpbmUgPSBlZGl0b3IuJGNvcHlXaXRoRW1wdHlTZWxlY3Rpb24gJiYgZWRpdG9yLnNlbGVjdGlvbi5pc0VtcHR5KCk7XG4gICAgICAgIHZhciByYW5nZSA9IGN1dExpbmUgPyBlZGl0b3Iuc2VsZWN0aW9uLmdldExpbmVSYW5nZSgpIDogZWRpdG9yLnNlbGVjdGlvbi5nZXRSYW5nZSgpO1xuICAgICAgICBlZGl0b3IuX2VtaXQoXCJjdXRcIiwgcmFuZ2UpO1xuXG4gICAgICAgIGlmICghcmFuZ2UuaXNFbXB0eSgpKVxuICAgICAgICAgICAgZWRpdG9yLnNlc3Npb24ucmVtb3ZlKHJhbmdlKTtcbiAgICAgICAgZWRpdG9yLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCJcbn0sIHtcbiAgICBuYW1lOiBcInBhc3RlXCIsXG4gICAgZGVzY3JpcHRpb246IFwiUGFzdGVcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IsIGFyZ3MpIHtcbiAgICAgICAgZWRpdG9yLiRoYW5kbGVQYXN0ZShhcmdzKTtcbiAgICB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiXG59LCB7XG4gICAgbmFtZTogXCJyZW1vdmVsaW5lXCIsXG4gICAgZGVzY3JpcHRpb246IFwiUmVtb3ZlIGxpbmVcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1EXCIsIFwiQ29tbWFuZC1EXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IucmVtb3ZlTGluZXMoKTsgfSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoTGluZVwiXG59LCB7XG4gICAgbmFtZTogXCJkdXBsaWNhdGVTZWxlY3Rpb25cIixcbiAgICBkZXNjcmlwdGlvbjogXCJEdXBsaWNhdGUgc2VsZWN0aW9uXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtU2hpZnQtRFwiLCBcIkNvbW1hbmQtU2hpZnQtRFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmR1cGxpY2F0ZVNlbGVjdGlvbigpOyB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIlxufSwge1xuICAgIG5hbWU6IFwic29ydGxpbmVzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU29ydCBsaW5lc1wiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLUFsdC1TXCIsIFwiQ29tbWFuZC1BbHQtU1wiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNvcnRMaW5lcygpOyB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcInNlbGVjdGlvblwiLFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hMaW5lXCJcbn0sIHtcbiAgICBuYW1lOiBcInRvZ2dsZWNvbW1lbnRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJUb2dnbGUgY29tbWVudFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLS9cIiwgXCJDb21tYW5kLS9cIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci50b2dnbGVDb21tZW50TGluZXMoKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoTGluZVwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcInNlbGVjdGlvblBhcnRcIlxufSwge1xuICAgIG5hbWU6IFwidG9nZ2xlQmxvY2tDb21tZW50XCIsXG4gICAgZGVzY3JpcHRpb246IFwiVG9nZ2xlIGJsb2NrIGNvbW1lbnRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1TaGlmdC0vXCIsIFwiQ29tbWFuZC1TaGlmdC0vXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IudG9nZ2xlQmxvY2tDb21tZW50KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcInNlbGVjdGlvblBhcnRcIlxufSwge1xuICAgIG5hbWU6IFwibW9kaWZ5TnVtYmVyVXBcIixcbiAgICBkZXNjcmlwdGlvbjogXCJNb2RpZnkgbnVtYmVyIHVwXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtU2hpZnQtVXBcIiwgXCJBbHQtU2hpZnQtVXBcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5tb2RpZnlOdW1iZXIoMSk7IH0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiXG59LCB7XG4gICAgbmFtZTogXCJtb2RpZnlOdW1iZXJEb3duXCIsXG4gICAgZGVzY3JpcHRpb246IFwiTW9kaWZ5IG51bWJlciBkb3duXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtU2hpZnQtRG93blwiLCBcIkFsdC1TaGlmdC1Eb3duXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IubW9kaWZ5TnVtYmVyKC0xKTsgfSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCJcbn0sIHtcbiAgICBuYW1lOiBcInJlcGxhY2VcIixcbiAgICBkZXNjcmlwdGlvbjogXCJSZXBsYWNlXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtSFwiLCBcIkNvbW1hbmQtT3B0aW9uLUZcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICAgIGNvbmZpZy5sb2FkTW9kdWxlKFwiYWNlL2V4dC9zZWFyY2hib3hcIiwgZnVuY3Rpb24oZSkge2UuU2VhcmNoKGVkaXRvciwgdHJ1ZSk7fSk7XG4gICAgfVxufSwge1xuICAgIG5hbWU6IFwidW5kb1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlVuZG9cIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1aXCIsIFwiQ29tbWFuZC1aXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IudW5kbygpOyB9XG59LCB7XG4gICAgbmFtZTogXCJyZWRvXCIsXG4gICAgZGVzY3JpcHRpb246IFwiUmVkb1wiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLVNoaWZ0LVp8Q3RybC1ZXCIsIFwiQ29tbWFuZC1TaGlmdC1afENvbW1hbmQtWVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnJlZG8oKTsgfVxufSwge1xuICAgIG5hbWU6IFwiY29weWxpbmVzdXBcIixcbiAgICBkZXNjcmlwdGlvbjogXCJDb3B5IGxpbmVzIHVwXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC1TaGlmdC1VcFwiLCBcIkNvbW1hbmQtT3B0aW9uLVVwXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuY29weUxpbmVzVXAoKTsgfSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwibW92ZWxpbmVzdXBcIixcbiAgICBkZXNjcmlwdGlvbjogXCJNb3ZlIGxpbmVzIHVwXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC1VcFwiLCBcIk9wdGlvbi1VcFwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLm1vdmVMaW5lc1VwKCk7IH0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCJcbn0sIHtcbiAgICBuYW1lOiBcImNvcHlsaW5lc2Rvd25cIixcbiAgICBkZXNjcmlwdGlvbjogXCJDb3B5IGxpbmVzIGRvd25cIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQWx0LVNoaWZ0LURvd25cIiwgXCJDb21tYW5kLU9wdGlvbi1Eb3duXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuY29weUxpbmVzRG93bigpOyB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiXG59LCB7XG4gICAgbmFtZTogXCJtb3ZlbGluZXNkb3duXCIsXG4gICAgZGVzY3JpcHRpb246IFwiTW92ZSBsaW5lcyBkb3duXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC1Eb3duXCIsIFwiT3B0aW9uLURvd25cIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5tb3ZlTGluZXNEb3duKCk7IH0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCJcbn0sIHtcbiAgICBuYW1lOiBcImRlbFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkRlbGV0ZVwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJEZWxldGVcIiwgXCJEZWxldGV8Q3RybC1EfFNoaWZ0LURlbGV0ZVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnJlbW92ZShcInJpZ2h0XCIpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwiYmFja3NwYWNlXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQmFja3NwYWNlXCIsXG4gICAgYmluZEtleTogYmluZEtleShcbiAgICAgICAgXCJTaGlmdC1CYWNrc3BhY2V8QmFja3NwYWNlXCIsXG4gICAgICAgIFwiQ3RybC1CYWNrc3BhY2V8U2hpZnQtQmFja3NwYWNlfEJhY2tzcGFjZXxDdHJsLUhcIlxuICAgICksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5yZW1vdmUoXCJsZWZ0XCIpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwiY3V0X29yX2RlbGV0ZVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkN1dCBvciBkZWxldGVcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiU2hpZnQtRGVsZXRlXCIsIG51bGwpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBcbiAgICAgICAgaWYgKGVkaXRvci5zZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBlZGl0b3IucmVtb3ZlKFwibGVmdFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiXG59LCB7XG4gICAgbmFtZTogXCJyZW1vdmV0b2xpbmVzdGFydFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlJlbW92ZSB0byBsaW5lIHN0YXJ0XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC1CYWNrc3BhY2VcIiwgXCJDb21tYW5kLUJhY2tzcGFjZVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnJlbW92ZVRvTGluZVN0YXJ0KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiXG59LCB7XG4gICAgbmFtZTogXCJyZW1vdmV0b2xpbmVlbmRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJSZW1vdmUgdG8gbGluZSBlbmRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQWx0LURlbGV0ZVwiLCBcIkN0cmwtS3xDb21tYW5kLURlbGV0ZVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnJlbW92ZVRvTGluZUVuZCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwicmVtb3ZldG9saW5lc3RhcnRoYXJkXCIsXG4gICAgZGVzY3JpcHRpb246IFwiUmVtb3ZlIHRvIGxpbmUgc3RhcnQgaGFyZFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLVNoaWZ0LUJhY2tzcGFjZVwiLCBudWxsKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgdmFyIHJhbmdlID0gZWRpdG9yLnNlbGVjdGlvbi5nZXRSYW5nZSgpO1xuICAgICAgICByYW5nZS5zdGFydC5jb2x1bW4gPSAwO1xuICAgICAgICBlZGl0b3Iuc2Vzc2lvbi5yZW1vdmUocmFuZ2UpO1xuICAgIH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiXG59LCB7XG4gICAgbmFtZTogXCJyZW1vdmV0b2xpbmVlbmRoYXJkXCIsXG4gICAgZGVzY3JpcHRpb246IFwiUmVtb3ZlIHRvIGxpbmUgZW5kIGhhcmRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1TaGlmdC1EZWxldGVcIiwgbnVsbCksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICAgIHZhciByYW5nZSA9IGVkaXRvci5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtcbiAgICAgICAgcmFuZ2UuZW5kLmNvbHVtbiA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICAgIGVkaXRvci5zZXNzaW9uLnJlbW92ZShyYW5nZSk7XG4gICAgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCJcbn0sIHtcbiAgICBuYW1lOiBcInJlbW92ZXdvcmRsZWZ0XCIsXG4gICAgZGVzY3JpcHRpb246IFwiUmVtb3ZlIHdvcmQgbGVmdFwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsLUJhY2tzcGFjZVwiLCBcIkFsdC1CYWNrc3BhY2V8Q3RybC1BbHQtQmFja3NwYWNlXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IucmVtb3ZlV29yZExlZnQoKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCJcbn0sIHtcbiAgICBuYW1lOiBcInJlbW92ZXdvcmRyaWdodFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlJlbW92ZSB3b3JkIHJpZ2h0XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtRGVsZXRlXCIsIFwiQWx0LURlbGV0ZVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnJlbW92ZVdvcmRSaWdodCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwib3V0ZGVudFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIk91dGRlbnRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiU2hpZnQtVGFiXCIsIFwiU2hpZnQtVGFiXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuYmxvY2tPdXRkZW50KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcInNlbGVjdGlvblBhcnRcIlxufSwge1xuICAgIG5hbWU6IFwiaW5kZW50XCIsXG4gICAgZGVzY3JpcHRpb246IFwiSW5kZW50XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIlRhYlwiLCBcIlRhYlwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmluZGVudCgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJzZWxlY3Rpb25QYXJ0XCJcbn0sIHtcbiAgICBuYW1lOiBcImJsb2Nrb3V0ZGVudFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkJsb2NrIG91dGRlbnRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1bXCIsIFwiQ3RybC1bXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuYmxvY2tPdXRkZW50KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaExpbmVcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJzZWxlY3Rpb25QYXJ0XCJcbn0sIHtcbiAgICBuYW1lOiBcImJsb2NraW5kZW50XCIsXG4gICAgZGVzY3JpcHRpb246IFwiQmxvY2sgaW5kZW50XCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtXVwiLCBcIkN0cmwtXVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLmJsb2NrSW5kZW50KCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaExpbmVcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJzZWxlY3Rpb25QYXJ0XCJcbn0sIHtcbiAgICBuYW1lOiBcImluc2VydHN0cmluZ1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkluc2VydCBzdHJpbmdcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IsIHN0cikgeyBlZGl0b3IuaW5zZXJ0KHN0cik7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiXG59LCB7XG4gICAgbmFtZTogXCJpbnNlcnR0ZXh0XCIsXG4gICAgZGVzY3JpcHRpb246IFwiSW5zZXJ0IHRleHRcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IsIGFyZ3MpIHtcbiAgICAgICAgZWRpdG9yLmluc2VydChsYW5nLnN0cmluZ1JlcGVhdChhcmdzLnRleHQgIHx8IFwiXCIsIGFyZ3MudGltZXMgfHwgMSkpO1xuICAgIH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiXG59LCB7XG4gICAgbmFtZTogXCJzcGxpdGxpbmVcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTcGxpdCBsaW5lXCIsXG4gICAgYmluZEtleTogYmluZEtleShudWxsLCBcIkN0cmwtT1wiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNwbGl0TGluZSgpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwidHJhbnNwb3NlbGV0dGVyc1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlRyYW5zcG9zZSBsZXR0ZXJzXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkFsdC1TaGlmdC1YXCIsIFwiQ3RybC1UXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IudHJhbnNwb3NlTGV0dGVycygpOyB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBmdW5jdGlvbihlZGl0b3IpIHtlZGl0b3IudHJhbnNwb3NlU2VsZWN0aW9ucygxKTsgfSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwidG91cHBlcmNhc2VcIixcbiAgICBkZXNjcmlwdGlvbjogXCJUbyB1cHBlcmNhc2VcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1VXCIsIFwiQ3RybC1VXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IudG9VcHBlckNhc2UoKTsgfSxcbiAgICBtdWx0aVNlbGVjdEFjdGlvbjogXCJmb3JFYWNoXCIsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCJcbn0sIHtcbiAgICBuYW1lOiBcInRvbG93ZXJjYXNlXCIsXG4gICAgZGVzY3JpcHRpb246IFwiVG8gbG93ZXJjYXNlXCIsXG4gICAgYmluZEtleTogYmluZEtleShcIkN0cmwtU2hpZnQtVVwiLCBcIkN0cmwtU2hpZnQtVVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnRvTG93ZXJDYXNlKCk7IH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiXG59LCB7XG4gICAgbmFtZTogXCJhdXRvaW5kZW50XCIsXG4gICAgZGVzY3JpcHRpb246IFwiQXV0byBJbmRlbnRcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KG51bGwsIG51bGwpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuYXV0b0luZGVudCgpOyB9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcImFuaW1hdGVcIlxufSwge1xuICAgIG5hbWU6IFwiZXhwYW5kdG9saW5lXCIsXG4gICAgZGVzY3JpcHRpb246IFwiRXhwYW5kIHRvIGxpbmVcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiQ3RybC1TaGlmdC1MXCIsIFwiQ29tbWFuZC1TaGlmdC1MXCIpLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgICB2YXIgcmFuZ2UgPSBlZGl0b3Iuc2VsZWN0aW9uLmdldFJhbmdlKCk7XG5cbiAgICAgICAgcmFuZ2Uuc3RhcnQuY29sdW1uID0gcmFuZ2UuZW5kLmNvbHVtbiA9IDA7XG4gICAgICAgIHJhbmdlLmVuZC5yb3crKztcbiAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZXRSYW5nZShyYW5nZSwgZmFsc2UpO1xuICAgIH0sXG4gICAgbXVsdGlTZWxlY3RBY3Rpb246IFwiZm9yRWFjaFwiLFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJvcGVubGlua1wiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkoXCJDdHJsK0YzXCIsIFwiRjNcIiksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5vcGVuTGluaygpOyB9XG59LCB7XG4gICAgbmFtZTogXCJqb2lubGluZXNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJKb2luIGxpbmVzXCIsXG4gICAgYmluZEtleTogYmluZEtleShudWxsLCBudWxsKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgdmFyIGlzQmFja3dhcmRzID0gZWRpdG9yLnNlbGVjdGlvbi5pc0JhY2t3YXJkcygpO1xuICAgICAgICB2YXIgc2VsZWN0aW9uU3RhcnQgPSBpc0JhY2t3YXJkcyA/IGVkaXRvci5zZWxlY3Rpb24uZ2V0U2VsZWN0aW9uTGVhZCgpIDogZWRpdG9yLnNlbGVjdGlvbi5nZXRTZWxlY3Rpb25BbmNob3IoKTtcbiAgICAgICAgdmFyIHNlbGVjdGlvbkVuZCA9IGlzQmFja3dhcmRzID8gZWRpdG9yLnNlbGVjdGlvbi5nZXRTZWxlY3Rpb25BbmNob3IoKSA6IGVkaXRvci5zZWxlY3Rpb24uZ2V0U2VsZWN0aW9uTGVhZCgpO1xuICAgICAgICB2YXIgZmlyc3RMaW5lRW5kQ29sID0gZWRpdG9yLnNlc3Npb24uZG9jLmdldExpbmUoc2VsZWN0aW9uU3RhcnQucm93KS5sZW5ndGg7XG4gICAgICAgIHZhciBzZWxlY3RlZFRleHQgPSBlZGl0b3Iuc2Vzc2lvbi5kb2MuZ2V0VGV4dFJhbmdlKGVkaXRvci5zZWxlY3Rpb24uZ2V0UmFuZ2UoKSk7XG4gICAgICAgIHZhciBzZWxlY3RlZENvdW50ID0gc2VsZWN0ZWRUZXh0LnJlcGxhY2UoL1xcblxccyovLCBcIiBcIikubGVuZ3RoO1xuICAgICAgICB2YXIgaW5zZXJ0TGluZSA9IGVkaXRvci5zZXNzaW9uLmRvYy5nZXRMaW5lKHNlbGVjdGlvblN0YXJ0LnJvdyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGVjdGlvblN0YXJ0LnJvdyArIDE7IGkgPD0gc2VsZWN0aW9uRW5kLnJvdyArIDE7IGkrKykge1xuICAgICAgICAgICAgdmFyIGN1ckxpbmUgPSBsYW5nLnN0cmluZ1RyaW1MZWZ0KGxhbmcuc3RyaW5nVHJpbVJpZ2h0KGVkaXRvci5zZXNzaW9uLmRvYy5nZXRMaW5lKGkpKSk7XG4gICAgICAgICAgICBpZiAoY3VyTGluZS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBjdXJMaW5lID0gXCIgXCIgKyBjdXJMaW5lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5zZXJ0TGluZSArPSBjdXJMaW5lO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGVjdGlvbkVuZC5yb3cgKyAxIDwgKGVkaXRvci5zZXNzaW9uLmRvYy5nZXRMZW5ndGgoKSAtIDEpKSB7XG4gICAgICAgICAgICAvLyBEb24ndCBpbnNlcnQgYSBuZXdsaW5lIGF0IHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50XG4gICAgICAgICAgICBpbnNlcnRMaW5lICs9IGVkaXRvci5zZXNzaW9uLmRvYy5nZXROZXdMaW5lQ2hhcmFjdGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBlZGl0b3IuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgZWRpdG9yLnNlc3Npb24uZG9jLnJlcGxhY2UobmV3IFJhbmdlKHNlbGVjdGlvblN0YXJ0LnJvdywgMCwgc2VsZWN0aW9uRW5kLnJvdyArIDIsIDApLCBpbnNlcnRMaW5lKTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRDb3VudCA+IDApIHtcbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgdGV4dCB0aGF0IHdhcyBwcmV2aW91c2x5IHNlbGVjdGVkXG4gICAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLm1vdmVDdXJzb3JUbyhzZWxlY3Rpb25TdGFydC5yb3csIHNlbGVjdGlvblN0YXJ0LmNvbHVtbik7XG4gICAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLnNlbGVjdFRvKHNlbGVjdGlvblN0YXJ0LnJvdywgc2VsZWN0aW9uU3RhcnQuY29sdW1uICsgc2VsZWN0ZWRDb3VudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgam9pbmVkIGxpbmUgaGFkIHNvbWV0aGluZyBpbiBpdCwgc3RhcnQgdGhlIGN1cnNvciBhdCB0aGF0IHNvbWV0aGluZ1xuICAgICAgICAgICAgZmlyc3RMaW5lRW5kQ29sID0gZWRpdG9yLnNlc3Npb24uZG9jLmdldExpbmUoc2VsZWN0aW9uU3RhcnQucm93KS5sZW5ndGggPiBmaXJzdExpbmVFbmRDb2wgPyAoZmlyc3RMaW5lRW5kQ29sICsgMSkgOiBmaXJzdExpbmVFbmRDb2w7XG4gICAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLm1vdmVDdXJzb3JUbyhzZWxlY3Rpb25TdGFydC5yb3csIGZpcnN0TGluZUVuZENvbCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwiaW52ZXJ0U2VsZWN0aW9uXCIsXG4gICAgZGVzY3JpcHRpb246IFwiSW52ZXJ0IHNlbGVjdGlvblwiLFxuICAgIGJpbmRLZXk6IGJpbmRLZXkobnVsbCwgbnVsbCksXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICAgIHZhciBlbmRSb3cgPSBlZGl0b3Iuc2Vzc2lvbi5kb2MuZ2V0TGVuZ3RoKCkgLSAxO1xuICAgICAgICB2YXIgZW5kQ29sID0gZWRpdG9yLnNlc3Npb24uZG9jLmdldExpbmUoZW5kUm93KS5sZW5ndGg7XG4gICAgICAgIHZhciByYW5nZXMgPSBlZGl0b3Iuc2VsZWN0aW9uLnJhbmdlTGlzdC5yYW5nZXM7XG4gICAgICAgIHZhciBuZXdSYW5nZXMgPSBbXTtcblxuICAgICAgICAvLyBJZiBtdWx0aXBsZSBzZWxlY3Rpb25zIGRvbid0IGV4aXN0LCByYW5nZUxpc3Qgd2lsbCByZXR1cm4gMCBzbyByZXBsYWNlIHdpdGggc2luZ2xlIHJhbmdlXG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgcmFuZ2VzID0gW2VkaXRvci5zZWxlY3Rpb24uZ2V0UmFuZ2UoKV07XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPT0gKHJhbmdlcy5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBsYXN0IHNlbGVjdGlvbiBtdXN0IGNvbm5lY3QgdG8gdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQsIHVubGVzcyBpdCBhbHJlYWR5IGRvZXNcbiAgICAgICAgICAgICAgICBpZiAoIShyYW5nZXNbaV0uZW5kLnJvdyA9PT0gZW5kUm93ICYmIHJhbmdlc1tpXS5lbmQuY29sdW1uID09PSBlbmRDb2wpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Jhbmdlcy5wdXNoKG5ldyBSYW5nZShyYW5nZXNbaV0uZW5kLnJvdywgcmFuZ2VzW2ldLmVuZC5jb2x1bW4sIGVuZFJvdywgZW5kQ29sKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBmaXJzdCBzZWxlY3Rpb24gbXVzdCBjb25uZWN0IHRvIHRoZSBzdGFydCBvZiB0aGUgZG9jdW1lbnQsIHVubGVzcyBpdCBhbHJlYWR5IGRvZXNcbiAgICAgICAgICAgICAgICBpZiAoIShyYW5nZXNbaV0uc3RhcnQucm93ID09PSAwICYmIHJhbmdlc1tpXS5zdGFydC5jb2x1bW4gPT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Jhbmdlcy5wdXNoKG5ldyBSYW5nZSgwLCAwLCByYW5nZXNbaV0uc3RhcnQucm93LCByYW5nZXNbaV0uc3RhcnQuY29sdW1uKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdSYW5nZXMucHVzaChuZXcgUmFuZ2UocmFuZ2VzW2ktMV0uZW5kLnJvdywgcmFuZ2VzW2ktMV0uZW5kLmNvbHVtbiwgcmFuZ2VzW2ldLnN0YXJ0LnJvdywgcmFuZ2VzW2ldLnN0YXJ0LmNvbHVtbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZWRpdG9yLmV4aXRNdWx0aVNlbGVjdE1vZGUoKTtcbiAgICAgICAgZWRpdG9yLmNsZWFyU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG5ld1Jhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5hZGRSYW5nZShuZXdSYW5nZXNbaV0sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVhZE9ubHk6IHRydWUsXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwibm9uZVwiXG59LCB7XG4gICAgbmFtZTogXCJhZGRMaW5lQWZ0ZXJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJBZGQgbmV3IGxpbmUgYWZ0ZXIgdGhlIGN1cnJlbnQgbGluZVwiLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIGVkaXRvci5uYXZpZ2F0ZUxpbmVFbmQoKTtcbiAgICAgICAgZWRpdG9yLmluc2VydChcIlxcblwiKTtcbiAgICB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwiYWRkTGluZUJlZm9yZVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkFkZCBuZXcgbGluZSBiZWZvcmUgdGhlIGN1cnJlbnQgbGluZVwiLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIHZhciBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKTtcbiAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5tb3ZlVG8oY3Vyc29yLnJvdyAtIDEsIE51bWJlci5NQVhfVkFMVUUpO1xuICAgICAgICBlZGl0b3IuaW5zZXJ0KFwiXFxuXCIpO1xuICAgICAgICBpZiAoY3Vyc29yLnJvdyA9PT0gMCkgZWRpdG9yLm5hdmlnYXRlVXAoKTtcbiAgICB9LFxuICAgIG11bHRpU2VsZWN0QWN0aW9uOiBcImZvckVhY2hcIixcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIlxufSwge1xuICAgIG5hbWU6IFwib3BlbkNvbW1hbmRQYWxsZXRlXCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlRoaXMgaXMgYW4gb2Jzb2xldGUgY29tbWFuZC4gUGxlYXNlIHVzZSBgb3BlbkNvbW1hbmRQYWxldHRlYCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgZWRpdG9yLnByb21wdCh7ICR0eXBlOiBcImNvbW1hbmRzXCIgfSk7XG4gICAgfSxcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwib3BlbkNvbW1hbmRQYWxldHRlXCIsXG4gICAgZGVzY3JpcHRpb246IFwiT3BlbiBjb21tYW5kIHBhbGV0dGVcIixcbiAgICBiaW5kS2V5OiBiaW5kS2V5KFwiRjFcIiwgXCJGMVwiKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgZWRpdG9yLnByb21wdCh7ICR0eXBlOiBcImNvbW1hbmRzXCIgfSk7XG4gICAgfSxcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwibW9kZVNlbGVjdFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkNoYW5nZSBsYW5ndWFnZSBtb2RlLi4uXCIsXG4gICAgYmluZEtleTogYmluZEtleShudWxsLCBudWxsKSxcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgZWRpdG9yLnByb21wdCh7ICR0eXBlOiBcIm1vZGVzXCIgfSk7XG4gICAgfSxcbiAgICByZWFkT25seTogdHJ1ZVxufV07XG5cbmZvciAodmFyIGkgPSAxOyBpIDwgOTsgaSsrKSB7XG4gICAgZXhwb3J0cy5jb21tYW5kcy5wdXNoKHtcbiAgICAgICAgbmFtZTogXCJmb2xkVG9MZXZlbFwiICsgaSxcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRm9sZCBUbyBMZXZlbCBcIiArIGksXG4gICAgICAgIGxldmVsOiBpLFxuICAgICAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlc3Npb24uZm9sZFRvTGV2ZWwodGhpcy5sZXZlbCk7IH0sXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiBcImNlbnRlclwiLFxuICAgICAgICByZWFkT25seTogdHJ1ZVxuICAgIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/commands/default_commands.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/commands/multi_select_commands.js":
/*!*********************************************************************!*\
  !*** ./node_modules/ace-code/src/commands/multi_select_commands.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n/**\n * commands to enter multiselect mode\n * @type {import(\"../../ace-internal\").Ace.Command[]}\n */\nexports.defaultCommands = [{\n    name: \"addCursorAbove\",\n    description: \"Add cursor above\",\n    exec: function(editor) { editor.selectMoreLines(-1); },\n    bindKey: {win: \"Ctrl-Alt-Up\", mac: \"Ctrl-Alt-Up\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorBelow\",\n    description: \"Add cursor below\",\n    exec: function(editor) { editor.selectMoreLines(1); },\n    bindKey: {win: \"Ctrl-Alt-Down\", mac: \"Ctrl-Alt-Down\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorAboveSkipCurrent\",\n    description: \"Add cursor above (skip current)\",\n    exec: function(editor) { editor.selectMoreLines(-1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Up\", mac: \"Ctrl-Alt-Shift-Up\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorBelowSkipCurrent\",\n    description: \"Add cursor below (skip current)\",\n    exec: function(editor) { editor.selectMoreLines(1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Down\", mac: \"Ctrl-Alt-Shift-Down\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectMoreBefore\",\n    description: \"Select more before\",\n    exec: function(editor) { editor.selectMore(-1); },\n    bindKey: {win: \"Ctrl-Alt-Left\", mac: \"Ctrl-Alt-Left\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectMoreAfter\",\n    description: \"Select more after\",\n    exec: function(editor) { editor.selectMore(1); },\n    bindKey: {win: \"Ctrl-Alt-Right\", mac: \"Ctrl-Alt-Right\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectNextBefore\",\n    description: \"Select next before\",\n    exec: function(editor) { editor.selectMore(-1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Left\", mac: \"Ctrl-Alt-Shift-Left\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectNextAfter\",\n    description: \"Select next after\",\n    exec: function(editor) { editor.selectMore(1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Right\", mac: \"Ctrl-Alt-Shift-Right\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"toggleSplitSelectionIntoLines\",\n    description: \"Split selection into lines\",\n    exec: function(editor) {\n        if (editor.multiSelect.rangeCount > 1)\n            editor.multiSelect.joinSelections();\n        else\n            editor.multiSelect.splitIntoLines();\n    },\n    bindKey: {win: \"Ctrl-Alt-L\", mac: \"Ctrl-Alt-L\"},\n    readOnly: true\n}, {\n    name: \"splitSelectionIntoLines\",\n    description: \"Split into lines\",\n    exec: function(editor) { editor.multiSelect.splitIntoLines(); },\n    readOnly: true\n}, {\n    name: \"alignCursors\",\n    description: \"Align cursors\",\n    exec: function(editor) { editor.alignCursors(); },\n    bindKey: {win: \"Ctrl-Alt-A\", mac: \"Ctrl-Alt-A\"},\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"findAll\",\n    description: \"Find all\",\n    exec: function(editor) { editor.findAll(); },\n    bindKey: {win: \"Ctrl-Alt-K\", mac: \"Ctrl-Alt-G\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}];\n\n/**\n * commands active only in multiselect mode\n * @type {import(\"../../ace-internal\").Ace.Command[]}\n */\nexports.multiSelectCommands = [{\n    name: \"singleSelection\",\n    description: \"Single selection\",\n    bindKey: \"esc\",\n    exec: function(editor) { editor.exitMultiSelectMode(); },\n    scrollIntoView: \"cursor\",\n    readOnly: true,\n    isAvailable: function(editor) {return editor && editor.inMultiSelectMode;}\n}];\n\nvar HashHandler = (__webpack_require__(/*! ../keyboard/hash_handler */ \"./node_modules/ace-code/src/keyboard/hash_handler.js\").HashHandler);\nexports.keyboardHandler = new HashHandler(exports.multiSelectCommands);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2NvbW1hbmRzL211bHRpX3NlbGVjdF9jb21tYW5kcy5qcyIsIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsNkJBQTZCLDZCQUE2QjtBQUMxRCxjQUFjLHVDQUF1QztBQUNyRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSw2QkFBNkIsNEJBQTRCO0FBQ3pELGNBQWMsMkNBQTJDO0FBQ3pEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLDZCQUE2QixtQ0FBbUM7QUFDaEUsY0FBYyxtREFBbUQ7QUFDakU7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsNkJBQTZCLGtDQUFrQztBQUMvRCxjQUFjLHVEQUF1RDtBQUNyRTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSw2QkFBNkIsd0JBQXdCO0FBQ3JELGNBQWMsMkNBQTJDO0FBQ3pEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUI7QUFDcEQsY0FBYyw2Q0FBNkM7QUFDM0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsNkJBQTZCLDhCQUE4QjtBQUMzRCxjQUFjLHVEQUF1RDtBQUNyRTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSw2QkFBNkIsNkJBQTZCO0FBQzFELGNBQWMseURBQXlEO0FBQ3ZFO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsY0FBYyxxQ0FBcUM7QUFDbkQ7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLDZCQUE2QixzQ0FBc0M7QUFDbkU7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLDZCQUE2Qix3QkFBd0I7QUFDckQsY0FBYyxxQ0FBcUM7QUFDbkQ7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLDZCQUE2QixtQkFBbUI7QUFDaEQsY0FBYyxxQ0FBcUM7QUFDbkQ7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsK0JBQStCO0FBQzVEO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsQ0FBQzs7QUFFRCxrQkFBa0IseUhBQStDO0FBQ2pFLHVCQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2NvbW1hbmRzL211bHRpX3NlbGVjdF9jb21tYW5kcy5qcz81OTE3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBjb21tYW5kcyB0byBlbnRlciBtdWx0aXNlbGVjdCBtb2RlXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5Db21tYW5kW119XG4gKi9cbmV4cG9ydHMuZGVmYXVsdENvbW1hbmRzID0gW3tcbiAgICBuYW1lOiBcImFkZEN1cnNvckFib3ZlXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQWRkIGN1cnNvciBhYm92ZVwiLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3Iuc2VsZWN0TW9yZUxpbmVzKC0xKTsgfSxcbiAgICBiaW5kS2V5OiB7d2luOiBcIkN0cmwtQWx0LVVwXCIsIG1hYzogXCJDdHJsLUFsdC1VcFwifSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwiYWRkQ3Vyc29yQmVsb3dcIixcbiAgICBkZXNjcmlwdGlvbjogXCJBZGQgY3Vyc29yIGJlbG93XCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5zZWxlY3RNb3JlTGluZXMoMSk7IH0sXG4gICAgYmluZEtleToge3dpbjogXCJDdHJsLUFsdC1Eb3duXCIsIG1hYzogXCJDdHJsLUFsdC1Eb3duXCJ9LFxuICAgIHNjcm9sbEludG9WaWV3OiBcImN1cnNvclwiLFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJhZGRDdXJzb3JBYm92ZVNraXBDdXJyZW50XCIsXG4gICAgZGVzY3JpcHRpb246IFwiQWRkIGN1cnNvciBhYm92ZSAoc2tpcCBjdXJyZW50KVwiLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3Iuc2VsZWN0TW9yZUxpbmVzKC0xLCB0cnVlKTsgfSxcbiAgICBiaW5kS2V5OiB7d2luOiBcIkN0cmwtQWx0LVNoaWZ0LVVwXCIsIG1hYzogXCJDdHJsLUFsdC1TaGlmdC1VcFwifSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwiYWRkQ3Vyc29yQmVsb3dTa2lwQ3VycmVudFwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkFkZCBjdXJzb3IgYmVsb3cgKHNraXAgY3VycmVudClcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlbGVjdE1vcmVMaW5lcygxLCB0cnVlKTsgfSxcbiAgICBiaW5kS2V5OiB7d2luOiBcIkN0cmwtQWx0LVNoaWZ0LURvd25cIiwgbWFjOiBcIkN0cmwtQWx0LVNoaWZ0LURvd25cIn0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdE1vcmVCZWZvcmVcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTZWxlY3QgbW9yZSBiZWZvcmVcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlbGVjdE1vcmUoLTEpOyB9LFxuICAgIGJpbmRLZXk6IHt3aW46IFwiQ3RybC1BbHQtTGVmdFwiLCBtYWM6IFwiQ3RybC1BbHQtTGVmdFwifSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwic2VsZWN0TW9yZUFmdGVyXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IG1vcmUgYWZ0ZXJcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlbGVjdE1vcmUoMSk7IH0sXG4gICAgYmluZEtleToge3dpbjogXCJDdHJsLUFsdC1SaWdodFwiLCBtYWM6IFwiQ3RybC1BbHQtUmlnaHRcIn0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInNlbGVjdE5leHRCZWZvcmVcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTZWxlY3QgbmV4dCBiZWZvcmVcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlbGVjdE1vcmUoLTEsIHRydWUpOyB9LFxuICAgIGJpbmRLZXk6IHt3aW46IFwiQ3RybC1BbHQtU2hpZnQtTGVmdFwiLCBtYWM6IFwiQ3RybC1BbHQtU2hpZnQtTGVmdFwifSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwic2VsZWN0TmV4dEFmdGVyXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2VsZWN0IG5leHQgYWZ0ZXJcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHsgZWRpdG9yLnNlbGVjdE1vcmUoMSwgdHJ1ZSk7IH0sXG4gICAgYmluZEtleToge3dpbjogXCJDdHJsLUFsdC1TaGlmdC1SaWdodFwiLCBtYWM6IFwiQ3RybC1BbHQtU2hpZnQtUmlnaHRcIn0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWVcbn0sIHtcbiAgICBuYW1lOiBcInRvZ2dsZVNwbGl0U2VsZWN0aW9uSW50b0xpbmVzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU3BsaXQgc2VsZWN0aW9uIGludG8gbGluZXNcIixcbiAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgaWYgKGVkaXRvci5tdWx0aVNlbGVjdC5yYW5nZUNvdW50ID4gMSlcbiAgICAgICAgICAgIGVkaXRvci5tdWx0aVNlbGVjdC5qb2luU2VsZWN0aW9ucygpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBlZGl0b3IubXVsdGlTZWxlY3Quc3BsaXRJbnRvTGluZXMoKTtcbiAgICB9LFxuICAgIGJpbmRLZXk6IHt3aW46IFwiQ3RybC1BbHQtTFwiLCBtYWM6IFwiQ3RybC1BbHQtTFwifSxcbiAgICByZWFkT25seTogdHJ1ZVxufSwge1xuICAgIG5hbWU6IFwic3BsaXRTZWxlY3Rpb25JbnRvTGluZXNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTcGxpdCBpbnRvIGxpbmVzXCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5tdWx0aVNlbGVjdC5zcGxpdEludG9MaW5lcygpOyB9LFxuICAgIHJlYWRPbmx5OiB0cnVlXG59LCB7XG4gICAgbmFtZTogXCJhbGlnbkN1cnNvcnNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJBbGlnbiBjdXJzb3JzXCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5hbGlnbkN1cnNvcnMoKTsgfSxcbiAgICBiaW5kS2V5OiB7d2luOiBcIkN0cmwtQWx0LUFcIiwgbWFjOiBcIkN0cmwtQWx0LUFcIn0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCJcbn0sIHtcbiAgICBuYW1lOiBcImZpbmRBbGxcIixcbiAgICBkZXNjcmlwdGlvbjogXCJGaW5kIGFsbFwiLFxuICAgIGV4ZWM6IGZ1bmN0aW9uKGVkaXRvcikgeyBlZGl0b3IuZmluZEFsbCgpOyB9LFxuICAgIGJpbmRLZXk6IHt3aW46IFwiQ3RybC1BbHQtS1wiLCBtYWM6IFwiQ3RybC1BbHQtR1wifSxcbiAgICBzY3JvbGxJbnRvVmlldzogXCJjdXJzb3JcIixcbiAgICByZWFkT25seTogdHJ1ZVxufV07XG5cbi8qKlxuICogY29tbWFuZHMgYWN0aXZlIG9ubHkgaW4gbXVsdGlzZWxlY3QgbW9kZVxuICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuQ29tbWFuZFtdfVxuICovXG5leHBvcnRzLm11bHRpU2VsZWN0Q29tbWFuZHMgPSBbe1xuICAgIG5hbWU6IFwic2luZ2xlU2VsZWN0aW9uXCIsXG4gICAgZGVzY3JpcHRpb246IFwiU2luZ2xlIHNlbGVjdGlvblwiLFxuICAgIGJpbmRLZXk6IFwiZXNjXCIsXG4gICAgZXhlYzogZnVuY3Rpb24oZWRpdG9yKSB7IGVkaXRvci5leGl0TXVsdGlTZWxlY3RNb2RlKCk7IH0sXG4gICAgc2Nyb2xsSW50b1ZpZXc6IFwiY3Vyc29yXCIsXG4gICAgcmVhZE9ubHk6IHRydWUsXG4gICAgaXNBdmFpbGFibGU6IGZ1bmN0aW9uKGVkaXRvcikge3JldHVybiBlZGl0b3IgJiYgZWRpdG9yLmluTXVsdGlTZWxlY3RNb2RlO31cbn1dO1xuXG52YXIgSGFzaEhhbmRsZXIgPSByZXF1aXJlKFwiLi4va2V5Ym9hcmQvaGFzaF9oYW5kbGVyXCIpLkhhc2hIYW5kbGVyO1xuZXhwb3J0cy5rZXlib2FyZEhhbmRsZXIgPSBuZXcgSGFzaEhhbmRsZXIoZXhwb3J0cy5tdWx0aVNlbGVjdENvbW1hbmRzKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/commands/multi_select_commands.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/config.js":
/*!*********************************************!*\
  !*** ./node_modules/ace-code/src/config.js ***!
  \*********************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n\"no use strict\";\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar net = __webpack_require__(/*! ./lib/net */ \"./node_modules/ace-code/src/lib/net.js\");\nvar dom = __webpack_require__(/*! ./lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar AppConfig = (__webpack_require__(/*! ./lib/app_config */ \"./node_modules/ace-code/src/lib/app_config.js\").AppConfig);\n\nmodule.exports = exports = new AppConfig();\n\n/** @type {import(\"../ace-internal\").Ace.ConfigOptions} */\nvar options = {\n    packaged: false,\n    workerPath: null,\n    modePath: null,\n    themePath: null,\n    basePath: \"\",\n    suffix: \".js\",\n    $moduleUrls: {},\n    loadWorkerFromBlob: true,\n    sharedPopups: false,\n    useStrictCSP: null\n};\n\n/**\n * @template {keyof import(\"../ace-internal\").Ace.ConfigOptions} K\n * @param {K} key - The key of the config option to retrieve.\n * @returns {import(\"../ace-internal\").Ace.ConfigOptions[K]} - The value of the config option.\n */\nexports.get = function(key) {\n    if (!options.hasOwnProperty(key))\n        throw new Error(\"Unknown config key: \" + key);\n    return options[key];\n};\n\n/**\n * @template {keyof import(\"../ace-internal\").Ace.ConfigOptions} K\n * @param {K} key\n * @param {import(\"../ace-internal\").Ace.ConfigOptions[K]} value\n */\nexports.set = function(key, value) {\n    if (options.hasOwnProperty(key))\n        options[key] = value;\n    else if (this.setDefaultValue(\"\", key, value) == false)\n        throw new Error(\"Unknown config key: \" + key);\n    if (key == \"useStrictCSP\")\n        dom.useStrictCSP(value);\n};\n/**\n * @return {import(\"../ace-internal\").Ace.ConfigOptions}\n */\nexports.all = function() {\n    return lang.copyObject(options);\n};\n\nexports.$modes = {};\n\n/**\n * module loading\n * @param {string} name\n * @param {string} [component]\n * @returns {string}\n */\nexports.moduleUrl = function(name, component) {\n    if (options.$moduleUrls[name])\n        return options.$moduleUrls[name];\n\n    var parts = name.split(\"/\");\n    component = component || parts[parts.length - 2] || \"\";\n\n    // todo make this configurable or get rid of '-'\n    var sep = component == \"snippets\" ? \"/\" : \"-\";\n    var base = parts[parts.length - 1];\n    if (component == \"worker\" && sep == \"-\") {\n        var re = new RegExp(\"^\" + component + \"[\\\\-_]|[\\\\-_]\" + component + \"$\", \"g\");\n        base = base.replace(re, \"\");\n    }\n\n    if ((!base || base == component) && parts.length > 1)\n        base = parts[parts.length - 2];\n    var path = options[component + \"Path\"];\n    if (path == null) {\n        path = options.basePath;\n    } else if (sep == \"/\") {\n        component = sep = \"\";\n    }\n    if (path && path.slice(-1) != \"/\")\n        path += \"/\";\n    return path + component + sep + base + this.get(\"suffix\");\n};\n/**\n * @param {string} name\n * @param {string} subst\n * @returns {string}\n */\nexports.setModuleUrl = function(name, subst) {\n    return options.$moduleUrls[name] = subst;\n};\n\nvar loader = function(moduleName, cb) {\n    if (moduleName === \"ace/theme/textmate\" || moduleName === \"./theme/textmate\")\n        return cb(null, __webpack_require__(/*! ./theme/textmate */ \"./node_modules/ace-code/src/theme/textmate.js\"));\n    if (customLoader)\n        return customLoader(moduleName, cb);\n    console.error(\"loader is not configured\");\n};\nvar customLoader;\nexports.setLoader = function(cb) {\n    customLoader = cb;\n};\n\nexports.dynamicModules = Object.create(null);\nexports.$loading = {};\nexports.$loaded = {};\n/**\n * @param {string | [string, string]} moduleId\n * @param {(module: any) => void} onLoad\n */\nexports.loadModule = function(moduleId, onLoad) {\n    var loadedModule;\n    if (Array.isArray(moduleId)) {\n        var moduleType = moduleId[0];\n        var moduleName = moduleId[1];\n    } else if (typeof moduleId == \"string\") {\n        var moduleName = moduleId;\n    }\n    var load = function (module) {\n        // require(moduleName) can return empty object if called after require([moduleName], callback)\n        if (module && !exports.$loading[moduleName]) return onLoad && onLoad(module);\n\n        if (!exports.$loading[moduleName]) exports.$loading[moduleName] = [];\n\n        exports.$loading[moduleName].push(onLoad);\n\n        if (exports.$loading[moduleName].length > 1) return;\n\n        var afterLoad = function() {\n            loader(moduleName, function(err, module) {\n                if (module) exports.$loaded[moduleName] = module;\n                exports._emit(\"load.module\", {name: moduleName, module: module});\n                var listeners = exports.$loading[moduleName];\n                exports.$loading[moduleName] = null;\n                listeners.forEach(function(onLoad) {\n                    onLoad && onLoad(module);\n                });\n            });\n        };\n\n        if (!exports.get(\"packaged\")) return afterLoad();\n\n        net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);\n        reportErrorIfPathIsNotConfigured();\n    };\n\n    if (exports.dynamicModules[moduleName]) {\n        exports.dynamicModules[moduleName]().then(function (module) {\n            if (module.default) {\n                load(module.default);\n            }\n            else {\n                load(module);\n            }\n        });\n    } else {\n        // backwards compatibility for node and packaged version\n        try {\n            loadedModule = this.$require(moduleName);\n        } catch (e) {}\n        load(loadedModule || exports.$loaded[moduleName]);\n    }\n};\n\nexports.$require = function(moduleName) {\n    if (typeof module[\"require\"] == \"function\") {\n        var req = \"require\";\n        return module[req](moduleName);\n    }\n};\n\nexports.setModuleLoader = function (moduleName, onLoad) {\n    exports.dynamicModules[moduleName] = onLoad;\n};\n\nvar reportErrorIfPathIsNotConfigured = function() {\n    if (\n        !options.basePath && !options.workerPath\n        && !options.modePath && !options.themePath\n        && !Object.keys(options.$moduleUrls).length\n    ) {\n        console.error(\n            \"Unable to infer path to ace from script src,\",\n            \"use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes\",\n            \"or with webpack use ace/webpack-resolver\"\n        );\n        reportErrorIfPathIsNotConfigured = function() {};\n    }\n};\n\nexports.version = \"1.36.5\";\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiO0FBQUE7QUFDQSxXQUFXLG1CQUFPLENBQUMsMkRBQVk7QUFDL0IsVUFBVSxtQkFBTyxDQUFDLHlEQUFXO0FBQzdCLFVBQVUsbUJBQU8sQ0FBQyx5REFBVztBQUM3QixnQkFBZ0Isd0dBQXFDOztBQUVyRDs7QUFFQSxXQUFXLDZDQUE2QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWMsbURBQW1EO0FBQ2pFLFdBQVcsR0FBRztBQUNkLGFBQWEsZ0RBQWdEO0FBQzdEO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYyxtREFBbUQ7QUFDakUsV0FBVyxHQUFHO0FBQ2QsV0FBVyxnREFBZ0Q7QUFDM0Q7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBLGNBQWM7O0FBRWQ7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFPLENBQUMsdUVBQWtCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEIsZ0JBQWdCO0FBQ2hCLGVBQWU7QUFDZjtBQUNBLFdBQVcsMkJBQTJCO0FBQ3RDLFdBQVcsdUJBQXVCO0FBQ2xDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGlDQUFpQztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvY29uZmlnLmpzP2I5OWUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJubyB1c2Ugc3RyaWN0XCI7XG52YXIgbGFuZyA9IHJlcXVpcmUoXCIuL2xpYi9sYW5nXCIpO1xudmFyIG5ldCA9IHJlcXVpcmUoXCIuL2xpYi9uZXRcIik7XG52YXIgZG9tID0gcmVxdWlyZShcIi4vbGliL2RvbVwiKTtcbnZhciBBcHBDb25maWcgPSByZXF1aXJlKFwiLi9saWIvYXBwX2NvbmZpZ1wiKS5BcHBDb25maWc7XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IG5ldyBBcHBDb25maWcoKTtcblxuLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkNvbmZpZ09wdGlvbnN9ICovXG52YXIgb3B0aW9ucyA9IHtcbiAgICBwYWNrYWdlZDogZmFsc2UsXG4gICAgd29ya2VyUGF0aDogbnVsbCxcbiAgICBtb2RlUGF0aDogbnVsbCxcbiAgICB0aGVtZVBhdGg6IG51bGwsXG4gICAgYmFzZVBhdGg6IFwiXCIsXG4gICAgc3VmZml4OiBcIi5qc1wiLFxuICAgICRtb2R1bGVVcmxzOiB7fSxcbiAgICBsb2FkV29ya2VyRnJvbUJsb2I6IHRydWUsXG4gICAgc2hhcmVkUG9wdXBzOiBmYWxzZSxcbiAgICB1c2VTdHJpY3RDU1A6IG51bGxcbn07XG5cbi8qKlxuICogQHRlbXBsYXRlIHtrZXlvZiBpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkNvbmZpZ09wdGlvbnN9IEtcbiAqIEBwYXJhbSB7S30ga2V5IC0gVGhlIGtleSBvZiB0aGUgY29uZmlnIG9wdGlvbiB0byByZXRyaWV2ZS5cbiAqIEByZXR1cm5zIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkNvbmZpZ09wdGlvbnNbS119IC0gVGhlIHZhbHVlIG9mIHRoZSBjb25maWcgb3B0aW9uLlxuICovXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICghb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGNvbmZpZyBrZXk6IFwiICsga2V5KTtcbiAgICByZXR1cm4gb3B0aW9uc1trZXldO1xufTtcblxuLyoqXG4gKiBAdGVtcGxhdGUge2tleW9mIGltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuQ29uZmlnT3B0aW9uc30gS1xuICogQHBhcmFtIHtLfSBrZXlcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Db25maWdPcHRpb25zW0tdfSB2YWx1ZVxuICovXG5leHBvcnRzLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICBvcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICBlbHNlIGlmICh0aGlzLnNldERlZmF1bHRWYWx1ZShcIlwiLCBrZXksIHZhbHVlKSA9PSBmYWxzZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBjb25maWcga2V5OiBcIiArIGtleSk7XG4gICAgaWYgKGtleSA9PSBcInVzZVN0cmljdENTUFwiKVxuICAgICAgICBkb20udXNlU3RyaWN0Q1NQKHZhbHVlKTtcbn07XG4vKipcbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuQ29uZmlnT3B0aW9uc31cbiAqL1xuZXhwb3J0cy5hbGwgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbGFuZy5jb3B5T2JqZWN0KG9wdGlvbnMpO1xufTtcblxuZXhwb3J0cy4kbW9kZXMgPSB7fTtcblxuLyoqXG4gKiBtb2R1bGUgbG9hZGluZ1xuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29tcG9uZW50XVxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0cy5tb2R1bGVVcmwgPSBmdW5jdGlvbihuYW1lLCBjb21wb25lbnQpIHtcbiAgICBpZiAob3B0aW9ucy4kbW9kdWxlVXJsc1tuYW1lXSlcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuJG1vZHVsZVVybHNbbmFtZV07XG5cbiAgICB2YXIgcGFydHMgPSBuYW1lLnNwbGl0KFwiL1wiKTtcbiAgICBjb21wb25lbnQgPSBjb21wb25lbnQgfHwgcGFydHNbcGFydHMubGVuZ3RoIC0gMl0gfHwgXCJcIjtcblxuICAgIC8vIHRvZG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZSBvciBnZXQgcmlkIG9mICctJ1xuICAgIHZhciBzZXAgPSBjb21wb25lbnQgPT0gXCJzbmlwcGV0c1wiID8gXCIvXCIgOiBcIi1cIjtcbiAgICB2YXIgYmFzZSA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChjb21wb25lbnQgPT0gXCJ3b3JrZXJcIiAmJiBzZXAgPT0gXCItXCIpIHtcbiAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cChcIl5cIiArIGNvbXBvbmVudCArIFwiW1xcXFwtX118W1xcXFwtX11cIiArIGNvbXBvbmVudCArIFwiJFwiLCBcImdcIik7XG4gICAgICAgIGJhc2UgPSBiYXNlLnJlcGxhY2UocmUsIFwiXCIpO1xuICAgIH1cblxuICAgIGlmICgoIWJhc2UgfHwgYmFzZSA9PSBjb21wb25lbnQpICYmIHBhcnRzLmxlbmd0aCA+IDEpXG4gICAgICAgIGJhc2UgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAyXTtcbiAgICB2YXIgcGF0aCA9IG9wdGlvbnNbY29tcG9uZW50ICsgXCJQYXRoXCJdO1xuICAgIGlmIChwYXRoID09IG51bGwpIHtcbiAgICAgICAgcGF0aCA9IG9wdGlvbnMuYmFzZVBhdGg7XG4gICAgfSBlbHNlIGlmIChzZXAgPT0gXCIvXCIpIHtcbiAgICAgICAgY29tcG9uZW50ID0gc2VwID0gXCJcIjtcbiAgICB9XG4gICAgaWYgKHBhdGggJiYgcGF0aC5zbGljZSgtMSkgIT0gXCIvXCIpXG4gICAgICAgIHBhdGggKz0gXCIvXCI7XG4gICAgcmV0dXJuIHBhdGggKyBjb21wb25lbnQgKyBzZXAgKyBiYXNlICsgdGhpcy5nZXQoXCJzdWZmaXhcIik7XG59O1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHN1YnN0XG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnRzLnNldE1vZHVsZVVybCA9IGZ1bmN0aW9uKG5hbWUsIHN1YnN0KSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuJG1vZHVsZVVybHNbbmFtZV0gPSBzdWJzdDtcbn07XG5cbnZhciBsb2FkZXIgPSBmdW5jdGlvbihtb2R1bGVOYW1lLCBjYikge1xuICAgIGlmIChtb2R1bGVOYW1lID09PSBcImFjZS90aGVtZS90ZXh0bWF0ZVwiIHx8IG1vZHVsZU5hbWUgPT09IFwiLi90aGVtZS90ZXh0bWF0ZVwiKVxuICAgICAgICByZXR1cm4gY2IobnVsbCwgcmVxdWlyZShcIi4vdGhlbWUvdGV4dG1hdGVcIikpO1xuICAgIGlmIChjdXN0b21Mb2FkZXIpXG4gICAgICAgIHJldHVybiBjdXN0b21Mb2FkZXIobW9kdWxlTmFtZSwgY2IpO1xuICAgIGNvbnNvbGUuZXJyb3IoXCJsb2FkZXIgaXMgbm90IGNvbmZpZ3VyZWRcIik7XG59O1xudmFyIGN1c3RvbUxvYWRlcjtcbmV4cG9ydHMuc2V0TG9hZGVyID0gZnVuY3Rpb24oY2IpIHtcbiAgICBjdXN0b21Mb2FkZXIgPSBjYjtcbn07XG5cbmV4cG9ydHMuZHluYW1pY01vZHVsZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuZXhwb3J0cy4kbG9hZGluZyA9IHt9O1xuZXhwb3J0cy4kbG9hZGVkID0ge307XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nIHwgW3N0cmluZywgc3RyaW5nXX0gbW9kdWxlSWRcbiAqIEBwYXJhbSB7KG1vZHVsZTogYW55KSA9PiB2b2lkfSBvbkxvYWRcbiAqL1xuZXhwb3J0cy5sb2FkTW9kdWxlID0gZnVuY3Rpb24obW9kdWxlSWQsIG9uTG9hZCkge1xuICAgIHZhciBsb2FkZWRNb2R1bGU7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobW9kdWxlSWQpKSB7XG4gICAgICAgIHZhciBtb2R1bGVUeXBlID0gbW9kdWxlSWRbMF07XG4gICAgICAgIHZhciBtb2R1bGVOYW1lID0gbW9kdWxlSWRbMV07XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlSWQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB2YXIgbW9kdWxlTmFtZSA9IG1vZHVsZUlkO1xuICAgIH1cbiAgICB2YXIgbG9hZCA9IGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAgICAgLy8gcmVxdWlyZShtb2R1bGVOYW1lKSBjYW4gcmV0dXJuIGVtcHR5IG9iamVjdCBpZiBjYWxsZWQgYWZ0ZXIgcmVxdWlyZShbbW9kdWxlTmFtZV0sIGNhbGxiYWNrKVxuICAgICAgICBpZiAobW9kdWxlICYmICFleHBvcnRzLiRsb2FkaW5nW21vZHVsZU5hbWVdKSByZXR1cm4gb25Mb2FkICYmIG9uTG9hZChtb2R1bGUpO1xuXG4gICAgICAgIGlmICghZXhwb3J0cy4kbG9hZGluZ1ttb2R1bGVOYW1lXSkgZXhwb3J0cy4kbG9hZGluZ1ttb2R1bGVOYW1lXSA9IFtdO1xuXG4gICAgICAgIGV4cG9ydHMuJGxvYWRpbmdbbW9kdWxlTmFtZV0ucHVzaChvbkxvYWQpO1xuXG4gICAgICAgIGlmIChleHBvcnRzLiRsb2FkaW5nW21vZHVsZU5hbWVdLmxlbmd0aCA+IDEpIHJldHVybjtcblxuICAgICAgICB2YXIgYWZ0ZXJMb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsb2FkZXIobW9kdWxlTmFtZSwgZnVuY3Rpb24oZXJyLCBtb2R1bGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlKSBleHBvcnRzLiRsb2FkZWRbbW9kdWxlTmFtZV0gPSBtb2R1bGU7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5fZW1pdChcImxvYWQubW9kdWxlXCIsIHtuYW1lOiBtb2R1bGVOYW1lLCBtb2R1bGU6IG1vZHVsZX0pO1xuICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lcnMgPSBleHBvcnRzLiRsb2FkaW5nW21vZHVsZU5hbWVdO1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuJGxvYWRpbmdbbW9kdWxlTmFtZV0gPSBudWxsO1xuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKG9uTG9hZCkge1xuICAgICAgICAgICAgICAgICAgICBvbkxvYWQgJiYgb25Mb2FkKG1vZHVsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIWV4cG9ydHMuZ2V0KFwicGFja2FnZWRcIikpIHJldHVybiBhZnRlckxvYWQoKTtcblxuICAgICAgICBuZXQubG9hZFNjcmlwdChleHBvcnRzLm1vZHVsZVVybChtb2R1bGVOYW1lLCBtb2R1bGVUeXBlKSwgYWZ0ZXJMb2FkKTtcbiAgICAgICAgcmVwb3J0RXJyb3JJZlBhdGhJc05vdENvbmZpZ3VyZWQoKTtcbiAgICB9O1xuXG4gICAgaWYgKGV4cG9ydHMuZHluYW1pY01vZHVsZXNbbW9kdWxlTmFtZV0pIHtcbiAgICAgICAgZXhwb3J0cy5keW5hbWljTW9kdWxlc1ttb2R1bGVOYW1lXSgpLnRoZW4oZnVuY3Rpb24gKG1vZHVsZSkge1xuICAgICAgICAgICAgaWYgKG1vZHVsZS5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgbG9hZChtb2R1bGUuZGVmYXVsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2FkKG1vZHVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBub2RlIGFuZCBwYWNrYWdlZCB2ZXJzaW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2FkZWRNb2R1bGUgPSB0aGlzLiRyZXF1aXJlKG1vZHVsZU5hbWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICBsb2FkKGxvYWRlZE1vZHVsZSB8fCBleHBvcnRzLiRsb2FkZWRbbW9kdWxlTmFtZV0pO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuJHJlcXVpcmUgPSBmdW5jdGlvbihtb2R1bGVOYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVbXCJyZXF1aXJlXCJdID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB2YXIgcmVxID0gXCJyZXF1aXJlXCI7XG4gICAgICAgIHJldHVybiBtb2R1bGVbcmVxXShtb2R1bGVOYW1lKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLnNldE1vZHVsZUxvYWRlciA9IGZ1bmN0aW9uIChtb2R1bGVOYW1lLCBvbkxvYWQpIHtcbiAgICBleHBvcnRzLmR5bmFtaWNNb2R1bGVzW21vZHVsZU5hbWVdID0gb25Mb2FkO1xufTtcblxudmFyIHJlcG9ydEVycm9ySWZQYXRoSXNOb3RDb25maWd1cmVkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKFxuICAgICAgICAhb3B0aW9ucy5iYXNlUGF0aCAmJiAhb3B0aW9ucy53b3JrZXJQYXRoXG4gICAgICAgICYmICFvcHRpb25zLm1vZGVQYXRoICYmICFvcHRpb25zLnRoZW1lUGF0aFxuICAgICAgICAmJiAhT2JqZWN0LmtleXMob3B0aW9ucy4kbW9kdWxlVXJscykubGVuZ3RoXG4gICAgKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBcIlVuYWJsZSB0byBpbmZlciBwYXRoIHRvIGFjZSBmcm9tIHNjcmlwdCBzcmMsXCIsXG4gICAgICAgICAgICBcInVzZSBhY2UuY29uZmlnLnNldCgnYmFzZVBhdGgnLCAncGF0aCcpIHRvIGVuYWJsZSBkeW5hbWljIGxvYWRpbmcgb2YgbW9kZXMgYW5kIHRoZW1lc1wiLFxuICAgICAgICAgICAgXCJvciB3aXRoIHdlYnBhY2sgdXNlIGFjZS93ZWJwYWNrLXJlc29sdmVyXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmVwb3J0RXJyb3JJZlBhdGhJc05vdENvbmZpZ3VyZWQgPSBmdW5jdGlvbigpIHt9O1xuICAgIH1cbn07XG5cbmV4cG9ydHMudmVyc2lvbiA9IFwiMS4zNi41XCI7XG5cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/config.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/css/editor-css.js":
/*!*****************************************************!*\
  !*** ./node_modules/ace-code/src/css/editor-css.js ***!
  \*****************************************************/
/***/ ((module) => {

eval("/*\nstyles = []\nfor (var i = 1; i < 16; i++) {\n    styles.push(\".ace_br\" + i + \"{\" + (\n        [\"top-left\", \"top-right\", \"bottom-right\", \"bottom-left\"]\n    ).map(function(x, j) {\n        return i & (1<<j) ? \"border-\" + x + \"-radius: 3px;\" : \"\" \n    }).filter(Boolean).join(\" \") + \"}\")\n}\nstyles.join(\"\\\\n\")\n*/\nmodule.exports = `\n.ace_br1 {border-top-left-radius    : 3px;}\n.ace_br2 {border-top-right-radius   : 3px;}\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\n.ace_br4 {border-bottom-right-radius: 3px;}\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\n.ace_br8 {border-bottom-left-radius : 3px;}\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\n\n\n.ace_editor {\n    position: relative;\n    overflow: hidden;\n    padding: 0;\n    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;\n    direction: ltr;\n    text-align: left;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n    forced-color-adjust: none;\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow: hidden;\n    top: 0;\n    bottom: 0;\n    background-color: inherit;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    cursor: text;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    min-width: 100%;\n    contain: style size layout;\n    font-variant-ligatures: no-common-ligatures;\n}\n\n.ace_keyboard-focus:focus {\n    box-shadow: inset 0 0 0 2px #5E9ED6;\n    outline: none;\n}\n\n.ace_dragging .ace_scroller:before{\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: '';\n    background: rgba(250, 250, 250, 0.01);\n    z-index: 1000;\n}\n.ace_dragging.ace_dark .ace_scroller:before{\n    background: rgba(0, 0, 0, 0.01);\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    width: auto;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    cursor: default;\n    z-index: 4;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    contain: style size layout;\n}\n\n.ace_gutter-active-line {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n\n.ace_scroller.ace_scroll-left:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\n    pointer-events: none;\n}\n\n.ace_gutter-cell, .ace_gutter-cell_svg-icons {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding-left: 19px;\n    padding-right: 6px;\n    background-repeat: no-repeat;\n}\n\n.ace_gutter-cell_svg-icons .ace_gutter_annotation {\n    margin-left: -14px;\n    float: left;\n}\n\n.ace_gutter-cell .ace_gutter_annotation {\n    margin-left: -19px;\n    float: left;\n}\n\n.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\");\n}\n\n.ace_icon_svg.ace_error {\n    -webkit-mask-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+\");\n    background-color: crimson;\n}\n.ace_icon_svg.ace_security {\n    -webkit-mask-image: url(\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+\");\n    background-color: crimson;\n}\n.ace_icon_svg.ace_warning {\n    -webkit-mask-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==\");\n    background-color: darkorange;\n}\n.ace_icon_svg.ace_info {\n    -webkit-mask-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==\");\n    background-color: royalblue;\n}\n.ace_icon_svg.ace_hint {\n    -webkit-mask-image: url(\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==\");\n    background-color: silver;\n}\n\n.ace_icon_svg.ace_error_fold {\n    -webkit-mask-image: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=\");\n    background-color: crimson;\n}\n.ace_icon_svg.ace_security_fold {\n    -webkit-mask-image: url(\"data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=\");\n    background-color: crimson;\n}\n.ace_icon_svg.ace_warning_fold {\n    -webkit-mask-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=\");\n    background-color: darkorange;\n}\n\n.ace_scrollbar {\n    contain: strict;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 6;\n}\n\n.ace_scrollbar-inner {\n    position: absolute;\n    cursor: text;\n    left: 0;\n    top: 0;\n}\n\n.ace_scrollbar-v{\n    overflow-x: hidden;\n    overflow-y: scroll;\n    top: 0;\n}\n\n.ace_scrollbar-h {\n    overflow-x: scroll;\n    overflow-y: hidden;\n    left: 0;\n}\n\n.ace_print-margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_text-input {\n    position: absolute;\n    z-index: 0;\n    width: 0.5em;\n    height: 1em;\n    opacity: 0;\n    background: transparent;\n    -moz-appearance: none;\n    appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n    font: inherit;\n    padding: 0 1px;\n    margin: 0 -1px;\n    contain: strict;\n    -ms-user-select: text;\n    -moz-user-select: text;\n    -webkit-user-select: text;\n    user-select: text;\n    /*with \\`pre-line\\` chrome inserts &nbsp; instead of space*/\n    white-space: pre!important;\n}\n.ace_text-input.ace_composition {\n    background: transparent;\n    color: inherit;\n    z-index: 1000;\n    opacity: 1;\n}\n.ace_composition_placeholder { color: transparent }\n.ace_composition_marker { \n    border-bottom: 1px solid;\n    position: absolute;\n    border-radius: 0;\n    margin-top: 1px;\n}\n\n[ace_nocontext=true] {\n    transform: none!important;\n    filter: none!important;\n    clip-path: none!important;\n    mask : none!important;\n    contain: none!important;\n    perspective: none!important;\n    mix-blend-mode: initial!important;\n    z-index: auto;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\n    word-wrap: normal;\n    white-space: pre;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter-layer {\n    position: relative;\n    width: auto;\n    text-align: right;\n    pointer-events: auto;\n    height: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer {\n    font: inherit !important;\n    position: absolute;\n    height: 1000000px;\n    width: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\n    contain: style size layout;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n}\n\n.ace_hidpi .ace_text-layer,\n.ace_hidpi .ace_gutter-layer,\n.ace_hidpi .ace_content,\n.ace_hidpi .ace_gutter {\n    contain: strict;\n}\n.ace_hidpi .ace_text-layer > .ace_line, \n.ace_hidpi .ace_text-layer > .ace_line_group {\n    contain: strict;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n    box-sizing: border-box;\n    border-left: 2px solid;\n    /* workaround for smooth cursor repaintng whole screen in chrome */\n    transform: translatez(0);\n}\n\n.ace_multiselect .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_slim-cursors .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_overwrite-cursors .ace_cursor {\n    border-left-width: 0;\n    border-bottom: 1px solid;\n}\n\n.ace_hidden-cursors .ace_cursor {\n    opacity: 0.2;\n}\n\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\n    opacity: 0;\n}\n\n.ace_smooth-blinking .ace_cursor {\n    transition: opacity 0.18s;\n}\n\n.ace_animate-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: step-end;\n    animation-name: blink-ace-animate;\n    animation-iteration-count: infinite;\n}\n\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: ease-in-out;\n    animation-name: blink-ace-animate-smooth;\n}\n    \n@keyframes blink-ace-animate {\n    from, to { opacity: 1; }\n    60% { opacity: 0; }\n}\n\n@keyframes blink-ace-animate-smooth {\n    from, to { opacity: 1; }\n    45% { opacity: 1; }\n    60% { opacity: 0; }\n    85% { opacity: 0; }\n}\n\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_error_bracket {\n    position: absolute;\n    border-bottom: 1px solid #DE5555;\n    border-radius: 0;\n}\n\n.ace_marker-layer .ace_active-line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected-word {\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    box-sizing: border-box;\n\n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image:\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    border-radius: 2px;\n\n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image:\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\");\n}\n\n.ace_tooltip {\n    background-color: #f5f5f5;\n    border: 1px solid gray;\n    border-radius: 1px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    color: black;\n    max-width: 100%;\n    padding: 3px 4px;\n    position: fixed;\n    z-index: 999999;\n    box-sizing: border-box;\n    cursor: default;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    line-height: normal;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    pointer-events: none;\n    overflow: auto;\n    max-width: min(60em, 66vw);\n    overscroll-behavior: contain;\n}\n.ace_tooltip pre {\n    white-space: pre-wrap;\n}\n\n.ace_tooltip.ace_dark {\n    background-color: #636363;\n    color: #fff;\n}\n\n.ace_tooltip:focus {\n    outline: 1px solid #5E9ED6;\n}\n\n.ace_icon {\n    display: inline-block;\n    width: 18px;\n    vertical-align: top;\n}\n\n.ace_icon_svg {\n    display: inline-block;\n    width: 12px;\n    vertical-align: top;\n    -webkit-mask-repeat: no-repeat;\n    -webkit-mask-size: 12px;\n    -webkit-mask-position: center;\n}\n\n.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    box-sizing: border-box;\n\n    margin: 0 -12px 0 1px;\n    display: none;\n    width: 11px;\n    vertical-align: top;\n\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\");\n    background-repeat: no-repeat;\n    background-position: center;\n\n    border-radius: 3px;\n    \n    border: 1px solid transparent;\n    cursor: pointer;\n}\n\n.ace_folding-enabled .ace_fold-widget {\n    display: inline-block;   \n}\n\n.ace_fold-widget.ace_end {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\");\n}\n\n.ace_fold-widget.ace_closed {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n/**\n * Dark version for fold widgets\n */\n.ace_dark .ace_fold-widget {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");\n}\n.ace_dark .ace_fold-widget.ace_end {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");\n}\n.ace_dark .ace_fold-widget.ace_closed {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");\n}\n.ace_dark .ace_fold-widget:hover {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1);\n}\n.ace_dark .ace_fold-widget:active {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n\n.ace_inline_button {\n    border: 1px solid lightgray;\n    display: inline-block;\n    margin: -1px 8px;\n    padding: 0 5px;\n    pointer-events: auto;\n    cursor: pointer;\n}\n.ace_inline_button:hover {\n    border-color: gray;\n    background: rgba(200,200,200,0.2);\n    display: inline-block;\n    pointer-events: auto;\n}\n\n.ace_fold-widget.ace_invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n\n.ace_fade-fold-widgets .ace_fold-widget {\n    transition: opacity 0.4s ease 0.05s;\n    opacity: 0;\n}\n\n.ace_fade-fold-widgets:hover .ace_fold-widget {\n    transition: opacity 0.05s ease 0.05s;\n    opacity:1;\n}\n\n.ace_underline {\n    text-decoration: underline;\n}\n\n.ace_bold {\n    font-weight: bold;\n}\n\n.ace_nobold .ace_bold {\n    font-weight: normal;\n}\n\n.ace_italic {\n    font-style: italic;\n}\n\n\n.ace_error-marker {\n    background-color: rgba(255, 0, 0,0.2);\n    position: absolute;\n    z-index: 9;\n}\n\n.ace_highlight-marker {\n    background-color: rgba(255, 255, 0,0.2);\n    position: absolute;\n    z-index: 8;\n}\n\n.ace_mobile-menu {\n    position: absolute;\n    line-height: 1.5;\n    border-radius: 4px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    background: white;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #dcdcdc;\n    color: black;\n}\n.ace_dark > .ace_mobile-menu {\n    background: #333;\n    color: #ccc;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #444;\n\n}\n.ace_mobile-button {\n    padding: 2px;\n    cursor: pointer;\n    overflow: hidden;\n}\n.ace_mobile-button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_mobile-button:active {\n    background-color: #ddd;\n}\n\n.ace_placeholder {\n    position: relative;\n    font-family: arial;\n    transform: scale(0.9);\n    transform-origin: left;\n    white-space: pre;\n    opacity: 0.7;\n    margin: 0 10px;\n    z-index: 1;\n}\n\n.ace_ghost_text {\n    opacity: 0.5;\n    font-style: italic;\n}\n\n.ace_ghost_text_container > div {\n    white-space: pre;\n}\n\n.ghost_text_line_wrapped::after {\n    content: \"↩\";\n    position: absolute;\n}\n\n.ace_lineWidgetContainer.ace_ghost_text {\n    margin: 0px 4px\n}\n\n.ace_screenreader-only {\n    position:absolute;\n    left:-10000px;\n    top:auto;\n    width:1px;\n    height:1px;\n    overflow:hidden;\n}\n\n.ace_hidden_token {\n    display: none;\n}`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2Nzcy9lZGl0b3ItY3NzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLDBEQUEwRDtBQUMxRCxLQUFLLGdDQUFnQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixVQUFVO0FBQ1YsVUFBVSxpQ0FBaUM7QUFDM0MsVUFBVTtBQUNWLFVBQVUsaUNBQWlDO0FBQzNDLFVBQVUsaUNBQWlDO0FBQzNDLFVBQVUsaUNBQWlDLGlDQUFpQztBQUM1RSxVQUFVO0FBQ1YsVUFBVSxpQ0FBaUM7QUFDM0MsVUFBVSxpQ0FBaUM7QUFDM0MsVUFBVSxpQ0FBaUMsaUNBQWlDO0FBQzVFLFVBQVUsaUNBQWlDO0FBQzNDLFVBQVUsaUNBQWlDLGlDQUFpQztBQUM1RSxVQUFVLGlDQUFpQyxpQ0FBaUM7QUFDNUUsVUFBVSxpQ0FBaUMsaUNBQWlDLGlDQUFpQzs7O0FBRzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEM7QUFDMUM7O0FBRUE7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLFVBQVU7QUFDVjs7QUFFQTtBQUNBLGVBQWU7QUFDZixVQUFVO0FBQ1YsVUFBVTtBQUNWLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QjtBQUM1Qiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QjtBQUM1Qiw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBDQUEwQztBQUMxQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMENBQTBDO0FBQzFDOztBQUVBO0FBQ0EsMENBQTBDO0FBQzFDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2Nzcy9lZGl0b3ItY3NzLmpzP2U5ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbnN0eWxlcyA9IFtdXG5mb3IgKHZhciBpID0gMTsgaSA8IDE2OyBpKyspIHtcbiAgICBzdHlsZXMucHVzaChcIi5hY2VfYnJcIiArIGkgKyBcIntcIiArIChcbiAgICAgICAgW1widG9wLWxlZnRcIiwgXCJ0b3AtcmlnaHRcIiwgXCJib3R0b20tcmlnaHRcIiwgXCJib3R0b20tbGVmdFwiXVxuICAgICkubWFwKGZ1bmN0aW9uKHgsIGopIHtcbiAgICAgICAgcmV0dXJuIGkgJiAoMTw8aikgPyBcImJvcmRlci1cIiArIHggKyBcIi1yYWRpdXM6IDNweDtcIiA6IFwiXCIgXG4gICAgfSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpICsgXCJ9XCIpXG59XG5zdHlsZXMuam9pbihcIlxcXFxuXCIpXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBgXG4uYWNlX2JyMSB7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDt9XG4uYWNlX2JyMiB7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXMgICA6IDNweDt9XG4uYWNlX2JyMyB7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICAgIDNweDt9XG4uYWNlX2JyNCB7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDt9XG4uYWNlX2JyNSB7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDt9XG4uYWNlX2JyNiB7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXMgICA6IDNweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDt9XG4uYWNlX2JyNyB7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICAgIDNweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDt9XG4uYWNlX2JyOCB7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1cyA6IDNweDt9XG4uYWNlX2JyOSB7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogIDNweDt9XG4uYWNlX2JyMTB7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXMgICA6IDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogIDNweDt9XG4uYWNlX2JyMTF7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICAgIDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogIDNweDt9XG4uYWNlX2JyMTJ7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogIDNweDt9XG4uYWNlX2JyMTN7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogIDNweDt9XG4uYWNlX2JyMTR7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXMgICA6IDNweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogIDNweDt9XG4uYWNlX2JyMTV7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1cyAgICA6IDNweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICAgIDNweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogM3B4O31cblxuXG4uYWNlX2VkaXRvciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgcGFkZGluZzogMDtcbiAgICBmb250OiAxMnB4L25vcm1hbCAnTW9uYWNvJywgJ01lbmxvJywgJ1VidW50dSBNb25vJywgJ0NvbnNvbGFzJywgJ1NvdXJjZSBDb2RlIFBybycsICdzb3VyY2UtY29kZS1wcm8nLCBtb25vc3BhY2U7XG4gICAgZGlyZWN0aW9uOiBsdHI7XG4gICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMCk7XG4gICAgZm9yY2VkLWNvbG9yLWFkanVzdDogbm9uZTtcbn1cblxuLmFjZV9zY3JvbGxlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdG9wOiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0O1xuICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgY3Vyc29yOiB0ZXh0O1xufVxuXG4uYWNlX2NvbnRlbnQge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIG1pbi13aWR0aDogMTAwJTtcbiAgICBjb250YWluOiBzdHlsZSBzaXplIGxheW91dDtcbiAgICBmb250LXZhcmlhbnQtbGlnYXR1cmVzOiBuby1jb21tb24tbGlnYXR1cmVzO1xufVxuXG4uYWNlX2tleWJvYXJkLWZvY3VzOmZvY3VzIHtcbiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMCAycHggIzVFOUVENjtcbiAgICBvdXRsaW5lOiBub25lO1xufVxuXG4uYWNlX2RyYWdnaW5nIC5hY2Vfc2Nyb2xsZXI6YmVmb3Jle1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBib3R0b206IDA7XG4gICAgY29udGVudDogJyc7XG4gICAgYmFja2dyb3VuZDogcmdiYSgyNTAsIDI1MCwgMjUwLCAwLjAxKTtcbiAgICB6LWluZGV4OiAxMDAwO1xufVxuLmFjZV9kcmFnZ2luZy5hY2VfZGFyayAuYWNlX3Njcm9sbGVyOmJlZm9yZXtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDEpO1xufVxuXG4uYWNlX2d1dHRlciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIG92ZXJmbG93IDogaGlkZGVuO1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIHRvcDogMDtcbiAgICBib3R0b206IDA7XG4gICAgbGVmdDogMDtcbiAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgei1pbmRleDogNDtcbiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIGNvbnRhaW46IHN0eWxlIHNpemUgbGF5b3V0O1xufVxuXG4uYWNlX2d1dHRlci1hY3RpdmUtbGluZSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG59XG5cbi5hY2Vfc2Nyb2xsZXIuYWNlX3Njcm9sbC1sZWZ0OmFmdGVyIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgYm94LXNoYWRvdzogMTdweCAwIDE2cHggLTE2cHggcmdiYSgwLCAwLCAwLCAwLjQpIGluc2V0O1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4uYWNlX2d1dHRlci1jZWxsLCAuYWNlX2d1dHRlci1jZWxsX3N2Zy1pY29ucyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHJpZ2h0OiAwO1xuICAgIHBhZGRpbmctbGVmdDogMTlweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiA2cHg7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbn1cblxuLmFjZV9ndXR0ZXItY2VsbF9zdmctaWNvbnMgLmFjZV9ndXR0ZXJfYW5ub3RhdGlvbiB7XG4gICAgbWFyZ2luLWxlZnQ6IC0xNHB4O1xuICAgIGZsb2F0OiBsZWZ0O1xufVxuXG4uYWNlX2d1dHRlci1jZWxsIC5hY2VfZ3V0dGVyX2Fubm90YXRpb24ge1xuICAgIG1hcmdpbi1sZWZ0OiAtMTlweDtcbiAgICBmbG9hdDogbGVmdDtcbn1cblxuLmFjZV9ndXR0ZXItY2VsbC5hY2VfZXJyb3IsIC5hY2VfaWNvbi5hY2VfZXJyb3IsIC5hY2VfaWNvbi5hY2VfZXJyb3JfZm9sZCwgLmFjZV9ndXR0ZXItY2VsbC5hY2Vfc2VjdXJpdHksIC5hY2VfaWNvbi5hY2Vfc2VjdXJpdHksIC5hY2VfaWNvbi5hY2Vfc2VjdXJpdHlfZm9sZCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FNQUFBQW9MUTlUQUFBQk9GQk1WRVgvLy8vLy8vLy9RUnN3RkFiL1VpNHdGQVl3RkFZd0ZBYVdHQWZEUnltek9TSC9QeHN3RkFiL1NpVXdGQVl3RkFiVVBSdmpRaURsbG9nNUhoSGRSeWJzVGkzL1R5djlUaXIrU3lqL1VDMy8vLy9YdXJlYk1CSXdGQWIvUlNIYlB4L2dVemZkd0wza3pNaXZLQkF3RkFiYnZibmhQeDY2Tmhvd0ZBWXdGQWFaSmc4d0ZBYXhLQkRadXJmL1JCNm1NeGIvU0NNd0ZBWXdGQWJ4UUIzK1JCNHdGQWIvUWh5NE9oKzRRaWZiTlJjd0ZBWXdGQVl3RkFiL1FSemROaGd3RkFZd0ZBYmF2N3YvVXk3b2FFNjhNQks1THhMZXdyL3IyTlhld0xzd0ZBYXhKdzR3RkFia1BSeTJQeVl3RkFheEtoTG0xdE13RkFhelBpUXdGQWFVR0FiL1FCcmZPeDNidnJ2L1ZDL21hRTR3RkFiUlBCcTZNUk84UXluZXc4RHAydGpmd2Iwd0ZBYng2ZWp1NStieTZ1bnM0dUg5L2YzNit2ci9Ha0hqQUFBQVluUlNUbE1BR3QrNjRybld1L2JvOGVBQTRJbkgzK0R3b043ajRlTGk0eFA5OU5mZzQrYisvdTlCL2VEczFNRDFtTzcrNFBIZzJNWGEzNDdnN3ZEaXpNTE40ZUcrUHY3aTVldnMvdjc5eXU3UzMvRFY3LzQ5OFl2MjRlSCs0dWZRM096dS92Nyt5MTNzUnF3QUFBRExTVVJCVkhqYVpjL1hEc0ZnR0lCaHREcnNobGl0bWsySXJiSEZxTDJwdlhmLys3OERQb2tqNytGejlxcFUvOVVYSklsaG1QYVRhUTZRUGF6MG1tKzVnd2tnb3ZjVjZHWnpkNUp0Q1F3Z3N4b0hPdkpPMTVrbGVSTEFuTWdIRklFU1VFUG1hd0I5bmdtZWxUdGlwd3dmQVNpbHhPTHlpVjVVVlV5VkFmYkcwY0NQSGlnK0dCa3pBRU5IUzBBc3RWRjZiYWNaSU96Z0xteHNIYnQyT2VjTmdKQzgzSkVSbWVQVVlxOEFSR2tKeDZYdEZzZGRkQlFnWkUyblBSNkNJQ1poYXdqQTRGYi9jaHYrMzk5a2ZSK01NTURHT1FBQUFBQkpSVTVFcmtKZ2dnPT1cIik7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAycHggY2VudGVyO1xufVxuXG4uYWNlX2d1dHRlci1jZWxsLmFjZV93YXJuaW5nLCAuYWNlX2ljb24uYWNlX3dhcm5pbmcsIC5hY2VfaWNvbi5hY2Vfd2FybmluZ19mb2xkIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQU1BQUFBb0xROVRBQUFBbVZCTVZFWC8vLzhBQUFELy8vOEFBQUFBQUFCUFN6Yi81c0FBQUFCL2JsSC83M3ovdWxrQUFBQUFBQUQ4NXBrQUFBQUFBQUFDQWdQL3ZHei9ya0RlckdiR3JWNy9wa1FJQ0FmLy8vL2UwSXNBQUFEL29FRC9xVHZocm5VQUFBRC95SEQvbmpjQUFBRHV2MnIvbnovL29Uai9wMDY0b0dmL3pIQUFBQUE5TmlyL3RGSUFBQUQvdGxUaXVXZi90a0lBQUFDeW5YRUFBQUFBQUFBdElSVzd6QnBCQUFBQU0zUlNUbE1BQUJSMW03UlhPOExuMzFaMzZ6VCtuZVhlNU96b29SRGZuK1RaNHAzaDJoVGY0dDNrM3VjeXJOMUs1K1hha3M1MlNmczlDWGdyQUFBQWprbEVRVlI0Mm8zUGJRK0NJQlFGWUV3Ym9QaFNZZ29ZdW5JcXFMbjYvejh1WWRIOFZtZG51OXZ6NFd3WGdOL3hUUFJEMitzZ09jWmpzZ2Uvd2hYWmdVYVlZdlQ4UW51SmFVcmpySFVRcmVHY3p1RWFmUUNPL1NKVHVmVGJyb1dzUGdzbGxWaHEzd0pFazJqVVN6WDNDVUVESkM4NDcwN2RqUmM1TVRBUXhvTGd1cFdSd1c2VUI1ZlMrK05WOEFiT1pnbnNDN0JwRUFBQUFBQkpSVTVFcmtKZ2dnPT1cIik7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAycHggY2VudGVyO1xufVxuXG4uYWNlX2d1dHRlci1jZWxsLmFjZV9pbmZvLCAuYWNlX2ljb24uYWNlX2luZm8sIC5hY2VfZ3V0dGVyLWNlbGwuYWNlX2hpbnQsIC5hY2VfaWNvbi5hY2VfaGludCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FBQUFBQTZtS0M5QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFBSjBVazVUQUFCMms4MDRBQUFBUGtsRVFWUVkwMk5nSUI2OFF1TzN0aUx6bmpBd3BLVGdOeURiTWVnd2lzQ0haVUVUVVpWMFpxT3F1QnBYajJydG5wU0pUMUFFbm5SbUwyT2dHZ0FBSUtrUlFhcDJodGdBQUFBQVNVVk9SSzVDWUlJPVwiKTtcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgIGJhY2tncm91bmQtcG9zaXRpb246IDJweCBjZW50ZXI7XG59XG5cbi5hY2VfZGFyayAuYWNlX2d1dHRlci1jZWxsLmFjZV9pbmZvLCAuYWNlX2RhcmsgLmFjZV9pY29uLmFjZV9pbmZvLCAuYWNlX2RhcmsgLmFjZV9ndXR0ZXItY2VsbC5hY2VfaGludCwgLmFjZV9kYXJrIC5hY2VfaWNvbi5hY2VfaGludCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQkFNQUFBRHQzZUpTQUFBQUpGQk1WRVVBQUFDaG9hR0FnSUFxS2lxK3ZyNnRyYTFaV1ZtVWxKU2JtNXM4UER4dWJtNTZlbnJkZ3pnM0FBQUFBWFJTVGxNQVFPYllaZ0FBQUNsSlJFRlVlTnBqWU1BUGRzTVlIZWd5SlpGUUJsc1VsTUZWQ1dVWUtrQVpNeFpBR2R4bERNUUJBRytUQlA0QjZSeUpBQUFBQUVsRlRrU3VRbUNDXCIpO1xufVxuXG4uYWNlX2ljb25fc3ZnLmFjZV9lcnJvciB7XG4gICAgLXdlYmtpdC1tYXNrLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSFpwWlhkQ2IzZzlJakFnTUNBeU1DQXhOaUkrQ2p4bklITjBjbTlyWlMxM2FXUjBhRDBpTWlJZ2MzUnliMnRsUFNKeVpXUWlJSE5vWVhCbExYSmxibVJsY21sdVp6MGlaMlZ2YldWMGNtbGpVSEpsWTJsemFXOXVJajRLUEdOcGNtTnNaU0JtYVd4c1BTSnViMjVsSWlCamVEMGlPQ0lnWTNrOUlqZ2lJSEk5SWpjaUlITjBjbTlyWlMxc2FXNWxhbTlwYmowaWNtOTFibVFpTHo0S1BHeHBibVVnZURFOUlqRXhJaUI1TVQwaU5TSWdlREk5SWpVaUlIa3lQU0l4TVNJdlBnbzhiR2x1WlNCNE1UMGlNVEVpSUhreFBTSXhNU0lnZURJOUlqVWlJSGt5UFNJMUlpOCtDand2Wno0S1BDOXpkbWMrXCIpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGNyaW1zb247XG59XG4uYWNlX2ljb25fc3ZnLmFjZV9zZWN1cml0eSB7XG4gICAgLXdlYmtpdC1tYXNrLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIyYVdWM1FtOTRQU0l3SURBZ01qQWdNVFlpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrQ2lBZ0lDQThaeUJ6ZEhKdmEyVXRkMmxrZEdnOUlqSWlJSE4wY205clpUMGlaR0Z5YTI5eVlXNW5aU0lnWm1sc2JEMGlibTl1WlNJZ2MyaGhjR1V0Y21WdVpHVnlhVzVuUFNKblpXOXRaWFJ5YVdOUWNtVmphWE5wYjI0aVBnb2dJQ0FnSUNBZ0lEeHdZWFJvSUdOc1lYTnpQU0p6ZEhKdmEyVXRiR2x1WldwdmFXNHRjbTkxYm1RaUlHUTlJazA0SURFMExqZ3pNRGRET0NBeE5DNDRNekEzSURJZ01USXVPVEEwTnlBeUlEZ3VNRGc1T1RKV015NHlOalUwT0VNMUxqTXhJRE11TWpZMU5EZ2dOeTQ1T0RrNU9TQXhMak0wT1RFNElEY3VPVGc1T1RrZ01TNHpORGt4T0VNM0xqazRPVGs1SURFdU16UTVNVGdnTVRBdU5qa2dNeTR5TmpVME9DQXhOQ0F6TGpJMk5UUTRWamd1TURnNU9USkRNVFFnTVRJdU9UQTBOeUE0SURFMExqZ3pNRGNnT0NBeE5DNDRNekEzV2lJdlBnb2dJQ0FnSUNBZ0lEeHdZWFJvSUdROUlrMHlJRGd1TURnNU9USldNeTR5TmpVME9FTTFMak14SURNdU1qWTFORGdnTnk0NU9EazVPU0F4TGpNME9URTRJRGN1T1RnNU9Ua2dNUzR6TkRreE9DSXZQZ29nSUNBZ0lDQWdJRHh3WVhSb0lHUTlJazB4TXk0NU9TQTRMakE0T1RreVZqTXVNalkxTkRoRE1UQXVOamdnTXk0eU5qVTBPQ0E0SURFdU16UTVNVGdnT0NBeExqTTBPVEU0SWk4K0NpQWdJQ0FnSUNBZ1BIQmhkR2dnWTJ4aGMzTTlJbk4wY205clpTMXNhVzVsYW05cGJpMXliM1Z1WkNJZ1pEMGlUVGdnTkZZNUlpOCtDaUFnSUNBZ0lDQWdQSEJoZEdnZ1kyeGhjM005SW5OMGNtOXJaUzFzYVc1bGFtOXBiaTF5YjNWdVpDSWdaRDBpVFRnZ01UQldNVElpTHo0S0lDQWdJRHd2Wno0S1BDOXpkbWMrXCIpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGNyaW1zb247XG59XG4uYWNlX2ljb25fc3ZnLmFjZV93YXJuaW5nIHtcbiAgICAtd2Via2l0LW1hc2staW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TUNBeE5pSStDanhuSUhOMGNtOXJaUzEzYVdSMGFEMGlNaUlnYzNSeWIydGxQU0prWVhKcmIzSmhibWRsSWlCemFHRndaUzF5Wlc1a1pYSnBibWM5SW1kbGIyMWxkSEpwWTFCeVpXTnBjMmx2YmlJK0NqeHdiMng1WjI5dUlITjBjbTlyWlMxc2FXNWxhbTlwYmowaWNtOTFibVFpSUdacGJHdzlJbTV2Ym1VaUlIQnZhVzUwY3owaU9DQXhJREUxSURFMUlERWdNVFVnT0NBeElpOCtDanh5WldOMElIZzlJamdpSUhrOUlqRXlJaUIzYVdSMGFEMGlNQzR3TVNJZ2FHVnBaMmgwUFNJd0xqQXhJaTgrQ2p4c2FXNWxJSGd4UFNJNElpQjVNVDBpTmlJZ2VESTlJamdpSUhreVBTSXhNQ0l2UGdvOEwyYytDand2YzNablBnPT1cIik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogZGFya29yYW5nZTtcbn1cbi5hY2VfaWNvbl9zdmcuYWNlX2luZm8ge1xuICAgIC13ZWJraXQtbWFzay1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhacFpYZENiM2c5SWpBZ01DQXlNQ0F4TmlJK0NqeG5JSE4wY205clpTMTNhV1IwYUQwaU1pSWdjM1J5YjJ0bFBTSmliSFZsSWlCemFHRndaUzF5Wlc1a1pYSnBibWM5SW1kbGIyMWxkSEpwWTFCeVpXTnBjMmx2YmlJK0NqeGphWEpqYkdVZ1ptbHNiRDBpYm05dVpTSWdZM2c5SWpnaUlHTjVQU0k0SWlCeVBTSTNJaUJ6ZEhKdmEyVXRiR2x1WldwdmFXNDlJbkp2ZFc1a0lpOCtDanh3YjJ4NWJHbHVaU0J3YjJsdWRITTlJamdnTVRFZ09DQTRJaTgrQ2p4d2IyeDViR2x1WlNCd2IybHVkSE05SWprZ09DQTJJRGdpTHo0S1BHeHBibVVnZURFOUlqRXdJaUI1TVQwaU1URWlJSGd5UFNJMklpQjVNajBpTVRFaUx6NEtQSEpsWTNRZ2VEMGlPQ0lnZVQwaU5TSWdkMmxrZEdnOUlqQXVNREVpSUdobGFXZG9kRDBpTUM0d01TSXZQZ284TDJjK0Nqd3ZjM1puUGc9PVwiKTtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByb3lhbGJsdWU7XG59XG4uYWNlX2ljb25fc3ZnLmFjZV9oaW50IHtcbiAgICAtd2Via2l0LW1hc2staW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjJhV1YzUW05NFBTSXdJREFnTWpBZ01UWWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SStDaUFnSUNBOFp5QnpkSEp2YTJVdGQybGtkR2c5SWpJaUlITjBjbTlyWlQwaWMybHNkbVZ5SWlCbWFXeHNQU0p1YjI1bElpQnphR0Z3WlMxeVpXNWtaWEpwYm1jOUltZGxiMjFsZEhKcFkxQnlaV05wYzJsdmJpSStDaUFnSUNBZ0lDQWdQSEJoZEdnZ1kyeGhjM005SW5OMGNtOXJaUzFzYVc1bGFtOXBiaTF5YjNWdVpDSWdaRDBpVFRZZ01UUklNVEFpTHo0S0lDQWdJQ0FnSUNBOGNHRjBhQ0JrUFNKTk9DQXhNVWc1UXprZ09TNDBOekF3TWlBeE1pQTRMalUwTURBeUlERXlJRFV1TnpZd01ESkRNVEl1TURJZ05DNDBNREF3TWlBeE1TNHpPU0F6TGpNMk1EQXlJREV3TGpReklESXVOamN3TURKRE9TQXhMalkwTURBeUlEY3VNREF3TURFZ01TNDJOREF3TWlBMUxqVTNNREF4SURJdU5qY3dNREpETkM0Mk1UQXdNU0F6TGpNMk1EQXlJRE11T1RnZ05DNDBNREF3TWlBMElEVXVOell3TURKRE5DQTRMalUwTURBeUlEY3VNREF3TURFZ09TNDBOekF3TWlBM0xqQXdNREF4SURFeFNEaGFJaTgrQ2lBZ0lDQThMMmMrQ2p3dmMzWm5QZz09XCIpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHNpbHZlcjtcbn1cblxuLmFjZV9pY29uX3N2Zy5hY2VfZXJyb3JfZm9sZCB7XG4gICAgLXdlYmtpdC1tYXNrLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSFpwWlhkQ2IzZzlJakFnTUNBeU1DQXhOaUlnWm1sc2JEMGlibTl1WlNJK0NpQWdQSEJoZEdnZ1pEMGliU0F4T0M0NU1qazROVEVzTnk0NE1qazRNRGMySUdNZ01DNHhORFl6TlRNc05pNHpNemMwTmpBMElDMDJMak15TXpFME55dzNMamMzTnpnME5EUWdMVGN1TkRjM09URXlMRGN1TnpjM09EUTBOQ0F0TWk0eE1EY3lOekkyTEMwd0xqRXlPRGMxSURVdU1URTNOamM0TERBdU16VTJNalE1SURVdU1EVXhOams0TEMwM0xqZzNNREEyTVRnZ0xUQXVOakEwTmpjeUxDMDRMakF3TXprM016UTVJQzAzTGpBM056STNNRFlzTFRjdU5UWXpNVEU0T1NBdE5DNDROVGN6TEMwM0xqUXpNRE01TlRVMklERXVOakEyTEMwd0xqRXhOVEUwTWpJMUlEWXVPRGszTkRnMUxERXVNall5TlRRMU9UWWdOeTR5T0RNMU1UUXNOeTQxTWpJMk1USTVOaUI2SWlCbWFXeHNQU0pqY21sdGMyOXVJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqSWlMejRLSUNBOGNHRjBhQ0JtYVd4c0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdOc2FYQXRjblZzWlQwaVpYWmxibTlrWkNJZ1pEMGliU0E0TGpFeE5EYzFOaklzTWk0d05USTVPREk0SUdNZ015NHpORGt4TmprNExEQWdOaTR3TmpReE16STRMREl1TmpjMk9EWXlOeUEyTGpBMk5ERXpNamdzTlM0NU56ZzVOVE1nTUN3ekxqTXdNakV4TWpJZ0xUSXVOekUwT1RZekxEVXVPVGM0T1RJd01pQXROaTR3TmpReE16STRMRFV1T1RjNE9USXdNaUF0TXk0ek5Ea3hORGN6TERBZ0xUWXVNRFkwTVRjM01pd3RNaTQyTnpZNE1EZ2dMVFl1TURZME1UYzNNaXd0TlM0NU56ZzVNakF5SURBdU1EQTFNemtzTFRNdU1qazVPRGcyTVNBeUxqY3hOekkyTlRZc0xUVXVPVGN6TmpRd09DQTJMakEyTkRFM056SXNMVFV1T1RjNE9UVXpJSG9nYlNBd0xDMHhMamN6TlRneU56RTVJR01nTFRRdU16SXhORGd6Tml3d0lDMDNMamd5TkRjME1ETTRMRE11TkRVME1ERTRORGtnTFRjdU9ESTBOelF3TXpnc055NDNNVFEzT0RBeE9TQXdMRFF1TWpZd056STRNaUF6TGpVd016STFOamM0TERjdU56RTBOelExTWlBM0xqZ3lORGMwTURNNExEY3VOekUwTnpRMU1pQTBMak15TVRRME9UZ3NNQ0EzTGpneU5EWTVPVGdzTFRNdU5EVTBNREUzSURjdU9ESTBOams1T0N3dE55NDNNVFEzTkRVeUlEQXNMVEl1TURRMk1Ea3hOQ0F0TUM0NE1qUXpPVElzTFRRdU1EQTRNelkzTWlBdE1pNHlPVEUzTlRZc0xUVXVORFUxTVRjME5pQkRJREV5TGpFNE1ESXlOU3d4TGpFeU9UazJORGdnTVRBdU1Ua3dNREV6TERBdU16RTNNVFUxTmpFZ09DNHhNVFEzTlRZeUxEQXVNekUzTVRVMU5qRWdXaUJOSURZdU9UTTNORFUyTXl3NExqSTBNRFU1T0RVZ05DNDJOekU0TmpnMUxERXdMalE0TlRnMU1pQTJMakF3T0RZNE1UUXNNVEV1T0RjMk56STRJRGd1TXpFM01EQXpOU3c1TGpZd01EYzVNVEVnTVRBdU5qSTFNek0zTERFeExqZzNOamN5T0NBeE1TNDVOakl4TXpnc01UQXVORGcxT0RVeUlEa3VOamsyTlRVd09DdzRMakkwTURVNU9EVWdNVEV1T1RZeU1UTTRMRFl1TURBMk9EQTJOaUF4TUM0MU56TXlORFlzTkM0Mk16YzBNek0xSURndU16RTNNREF6TlN3MkxqZzNNelF5T1RjZ05pNHdOakEzTmpBM0xEUXVOak0zTkRNek5TQTBMalkzTVRnMk9EVXNOaTR3TURZNE1EWTJJRm9pSUdacGJHdzlJbU55YVcxemIyNGlJSE4wY205clpTMTNhV1IwYUQwaU1pSXZQZ284TDNOMlp6ND1cIik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogY3JpbXNvbjtcbn1cbi5hY2VfaWNvbl9zdmcuYWNlX3NlY3VyaXR5X2ZvbGQge1xuICAgIC13ZWJraXQtbWFzay1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxDanh6ZG1jZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWlCMmFXVjNRbTk0UFNJd0lEQWdNVGNnTVRRaUlHWnBiR3c5SW01dmJtVWlQZ29nSUNBZ1BIQmhkR2dnWkQwaVRURXdMakF3TURFZ01UTXVOams1TWtNeE1DNHdNREF4SURFekxqWTVPVElnTVRFdU9USTBNU0F4TXk0ME56WXpJREV6SURFeUxqWTVPVEpETVRRdU5ERXpPU0F4TVM0Mk56Z3hJREUySURFd0xqVWdNVFl1TVRJMU1TQTJMamd4TVRJMlZqSXVOVGc1T0RkRE1UWXVNVEkxTVNBeUxqVTBOelk0SURFMkxqRXlNakVnTWk0MU1EWXhPU0F4Tmk0eE1UWTBJREl1TkRZMU5UbFdNUzQzTVRRNE5VZ3hOUzR5TkRFMFRERTFMakl6TURjZ01TNDNNVFE0TkV3eE5DNDJNalV4SURFdU5qazVNakpXTmk0NE1URXlNME14TkM0Mk1qVXhJRGd1TlRFd05qRWdNVFF1TmpJMU1TQTVMalEyTkRZeElERXlMamM0TWpRZ01URXVOekl4UXpFeUxqRTFPRFlnTVRJdU5EZzBPQ0F4TUM0d01EQXhJREV6TGpZNU9USWdNVEF1TURBd01TQXhNeTQyT1RreVdpSWdabWxzYkQwaVkzSnBiWE52YmlJZ2MzUnliMnRsTFhkcFpIUm9QU0l5SWk4K0NpQWdJQ0E4Y0dGMGFDQm1hV3hzTFhKMWJHVTlJbVYyWlc1dlpHUWlJR05zYVhBdGNuVnNaVDBpWlhabGJtOWtaQ0lnWkQwaVRUY3VNek0yTURrZ01DNHpOamMwTnpWRE55NHdNekl4TkNBd0xqRTFNalkxTWlBMkxqWXlOVFE0SURBdU1UVXpOakUwSURZdU16SXlOVE1nTUM0ek5qazVPVGRNTmk0ek1EZzJPU0F3TGpNM09UVTFORU0yTGpJNU5UVXpJREF1TXpnNE5UZzRJRFl1TWpjek9EZ2dNQzQwTURNeU5qWWdOaTR5TkRReE55QXdMalF5TWpjNE9VTTJMakU0TkRjeElEQXVORFl4T0RZZ05pNHdPVE15TVNBd0xqVXlNREUzTVNBMUxqazNNekV6SURBdU5Ua3hNemN6UXpVdU56TXlOVEVnTUM0M016UXdOVGtnTlM0ek56azVJREF1T1RJMk9EWTBJRFF1T1RReU56a2dNUzR4TWpBd09VTTBMakEyTVRRMElERXVOVEE1TnlBeUxqZzNOVFF4SURFdU9EZ3pOemNnTVM0MU9EazROQ0F4TGpnNE16YzNTREF1TnpFME9EUTBWakl1TnpVNE56ZFdOaTQ1T0RBeE5VTXdMamN4TkRnME5DQTVMalE1TXpjMElESXVNamc0TmpZZ01URXVNVGszTXlBekxqY3dNalUwSURFeUxqSXhPRFZETkM0ME1UZzBOU0F4TWk0M016VTFJRFV1TVRJNE56UWdNVE11TVRBMU15QTFMalkxTnpNeklERXpMak0wTlRkRE5TNDVNakk0TkNBeE15NDBOalkwSURZdU1UUTFOallnTVRNdU5UVTFPU0EyTGpNd05EWTFJREV6TGpZeE5qRkROaTR6T0RReU15QXhNeTQyTkRZeUlEWXVORFE0TURVZ01UTXVOalk1SURZdU5Ea3pORGtnTVRNdU5qZzBPRU0yTGpVeE5qSXlJREV6TGpZNU1qY2dOaTQxTXpRek9DQXhNeTQyT1RnNUlEWXVOVFEzTmpRZ01UTXVOekF6TTB3MkxqVTJNemd5SURFekxqY3dPRGRNTmk0MU5qa3dPQ0F4TXk0M01UQTBURFl1TlRjd09Ua2dNVE11TnpFeFREWXVPRE01T0RRZ01UTXVOelV6TTB3MkxqVTNNalF5SURFekxqY3hNVFZETmk0M05EWXpNeUF4TXk0M05qY3pJRFl1T1RNek16VWdNVE11TnpZM015QTNMakV3TnpJM0lERXpMamN4TVRWTU55NHhNRGczSURFekxqY3hNVXczTGpFeE1EWXhJREV6TGpjeE1EUk1OeTR4TVRVNE55QXhNeTQzTURnM1REY3VNVE15TURVZ01UTXVOekF6TTBNM0xqRTBOVE14SURFekxqWTVPRGtnTnk0eE5qTTBOaUF4TXk0Mk9USTNJRGN1TVRnMk1Ua2dNVE11TmpnME9FTTNMakl6TVRZMElERXpMalkyT1NBM0xqSTVOVFEySURFekxqWTBOaklnTnk0ek56VXdNeUF4TXk0Mk1UWXhRemN1TlRNME1ETWdNVE11TlRVMU9TQTNMamMxTmpnMUlERXpMalEyTmpRZ09DNHdNakl6TmlBeE15NHpORFUzUXpndU5UVXdPVFVnTVRNdU1UQTFNeUE1TGpJMk1USXpJREV5TGpjek5UVWdPUzQ1TnpjeE5TQXhNaTR5TVRnMVF6RXhMak01TVNBeE1TNHhPVGN6SURFeUxqazJORGdnT1M0ME9UTTNOeUF4TWk0NU5qUTRJRFl1T1Rnd01UaFdNaTQzTlRnNFF6RXlMamsyTkRnZ01pNDNNVFkySURFeUxqazJNVGtnTWk0Mk56VXhNU0F4TWk0NU5UWXhJREl1TmpNME5URldNUzQ0T0RNM04wZ3hNaTR3T0RFeFF6RXlMakEzTnpVZ01TNDRPRE0zTnlBeE1pNHdOelFnTVM0NE9ETTNOeUF4TWk0d056QTBJREV1T0Rnek56ZERNVEF1TnprM09TQXhMamc0TURBMElEa3VOakU1TmpJZ01TNDFNVEV3TWlBNExqY3pPRGswSURFdU1USTBPRFpET0M0M016VXpOQ0F4TGpFeU16STNJRGd1TnpNeE56UWdNUzR4TWpFMk9DQTRMamN5T0RFMElERXVNVEl3TURsRE9DNHlPVEV3TXlBd0xqa3lOamcyTkNBM0xqa3pPRFF5SURBdU56TTBNRFU1SURjdU5qazNOemtnTUM0MU9URXpOek5ETnk0MU56YzNNaUF3TGpVeU1ERTNNU0EzTGpRNE5qSXlJREF1TkRZeE9EWWdOeTQwTWpZM05pQXdMalF5TWpjNE9VTTNMak01TnpBMUlEQXVOREF6TWpZMklEY3VNemMxTXprZ01DNHpPRGcxT0RnZ055NHpOakl5TkNBd0xqTTNPVFUxTkV3M0xqTTBPRGsySURBdU16Y3dNelZETnk0ek5EZzVOaUF3TGpNM01ETTFJRGN1TXpRNE5EY2dNQzR6TnpBd01pQTNMak0wTlRZeklEQXVNemMwTURVMFREY3VNek0zTnprZ01DNHpOamcyTlRsTU55NHpNell3T1NBd0xqTTJOelEzTlZwTk9DNHdNelEzTVNBeUxqY3lOamt4UXpndU9EWXdOQ0F6TGpBNU1EWXpJRGt1T1RZd05qWWdNeTQwTmpNd09TQXhNUzR5TURZeElETXVOVGc1TURkV05pNDVPREF4TlVneE1TNHlNVFE0UXpFeExqSXhORGdnT0M0Mk56azFNeUF4TUM0eE5qTTNJRGt1T1RJMU1EY2dPQzQ1TlRJMU5DQXhNQzQzT1RrNFF6Z3VNelUxT1RVZ01URXVNak13TmlBM0xqYzFNemMwSURFeExqVTBOVFFnTnk0eU9UYzVOaUF4TVM0M05USTNRemN1TVRFMk56RWdNVEV1T0RNMU1TQTJMamsyTURZeUlERXhMamc1T1RZZ05pNDRNems0TkNBeE1TNDVORFk1UXpZdU56RTVNRFlnTVRFdU9EazVOaUEyTGpVMk1qazNJREV4TGpnek5URWdOaTR6T0RFM015QXhNUzQzTlRJM1F6VXVPVEkxT1RVZ01URXVOVFExTkNBMUxqTXlNemN6SURFeExqSXpNRFlnTkM0M01qY3hOU0F4TUM0M09UazRRek11TlRFMk1ETWdPUzQ1TWpVd055QXlMalEyTkRnMElEZ3VOamM1TlRVZ01pNDBOalE0TkNBMkxqazRNREU0VmpNdU5UZzVNRGxETXk0M01UY3pPQ0F6TGpRMk1qTTVJRFF1T0RJek1EZ2dNeTR3T0RZek9TQTFMalkxTURNeklESXVOekl3TnpGRE5pNHhOREl5T0NBeUxqVXdNekkwSURZdU5UUTBPRFVnTWk0eU9EVXpOeUEyTGpnek1qVTBJREl1TVRFMk1qUkROeTR4TWpFNE1TQXlMakk0TlRNMUlEY3VOVEkzSURJdU5UQXpOVElnT0M0d01qRTVOaUF5TGpjeU1UTXhRemd1TURJMk1pQXlMamN5TXpFM0lEZ3VNRE13TkRVZ01pNDNNalV3TkNBNExqQXpORGN4SURJdU56STJPVEZhVFRVdU9UWTBPRFFnTXk0ME1ERTBOMVkzTGpjM05qUTNTRGN1TnpFME9EUldNeTQwTURFME4wZzFMamsyTkRnMFdrMDFMamsyTkRnMElERXdMalF3TVRWV09DNDJOVEUwTjBnM0xqY3hORGcwVmpFd0xqUXdNVFZJTlM0NU5qUTRORm9pSUdacGJHdzlJbU55YVcxemIyNGlJSE4wY205clpTMTNhV1IwYUQwaU1pSXZQZ284TDNOMlp6ND1cIik7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogY3JpbXNvbjtcbn1cbi5hY2VfaWNvbl9zdmcuYWNlX3dhcm5pbmdfZm9sZCB7XG4gICAgLXdlYmtpdC1tYXNrLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNakFpSUdobGFXZG9kRDBpTVRZaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TUNBeE5pSWdabWxzYkQwaWJtOXVaU0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JajRLUEhCaGRHZ2dabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJaUJqYkdsd0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdROUlrMHhOQzQzTnpZNUlERTBMamN6TXpkTU9DNDJOVEU1TWlBeUxqUTRNelk1UXpndU16STVORFlnTVM0NE16ZzNOeUEzTGpRd09URXpJREV1T0RNNE56Y2dOeTR3T0RZMk55QXlMalE0TXpZNVREQXVPVFl4TmpZNUlERTBMamN6TXpkRE1DNDJOekEzTnpVZ01UVXVNekUxTlNBeExqQTVNemd6SURFMklERXVOelEwTWprZ01UWklNVE11T1RrME0wTXhOQzQyTkRRNElERTJJREUxTGpBMk56Z2dNVFV1TXpFMU5TQXhOQzQzTnpZNUlERTBMamN6TXpkYVRUTXVNVFl3TURjZ01UUXVNalZNTnk0NE5qa3lPU0EwTGpnek1UVTJUREV5TGpVM09EVWdNVFF1TWpWSU15NHhOakF3TjFwTk9DNDNORFF5T1NBeE1TNDJNalZXTVRNdU16YzFTRFl1T1RrME1qbFdNVEV1TmpJMVNEZ3VOelEwTWpsYVRUWXVPVGswTWprZ01UQXVOelZXTnk0eU5VZzRMamMwTkRJNVZqRXdMamMxU0RZdU9UazBNamxhSWlCbWFXeHNQU0lqUlVNM01qRXhJaTgrQ2p4d1lYUm9JR1E5SWsweE1TNHhPVGt4SURJdU9UVXlNemhETVRBdU9EZ3dPU0F5TGpNeE5EWTNJREV3TGpNMU16Y2dNUzQ0TURVeU5pQTVMamN3TlRVZ01TNDFNRGxNTVRFdU1EUXhJREV1TURZNU56aERNVEV1TmpnNE15QXdMamswT1RneE5DQXhNaTR6TXpjZ01TNHlOekkyTXlBeE1pNDJNekUzSURFdU9EWXhOREZNTVRjdU5qRXpOaUF4TVM0NE1UWXhRekU0TGpNMU1qY2dNVE11TWpreU9TQXhOeTQxT1RNNElERTFMakE0TURRZ01UWXVNREU0SURFMUxqVTNORFZETVRZdU5EQTBOQ0F4TkM0ME5UQTNJREUyTGpNeU16RWdNVE11TWpFNE9DQXhOUzQzT1RJMElERXlMakUxTlRWTU1URXVNVGs1TVNBeUxqazFNak00V2lJZ1ptbHNiRDBpSTBWRE56SXhNU0l2UGdvOEwzTjJaejQ9XCIpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtvcmFuZ2U7XG59XG5cbi5hY2Vfc2Nyb2xsYmFyIHtcbiAgICBjb250YWluOiBzdHJpY3Q7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHJpZ2h0OiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICB6LWluZGV4OiA2O1xufVxuXG4uYWNlX3Njcm9sbGJhci1pbm5lciB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGN1cnNvcjogdGV4dDtcbiAgICBsZWZ0OiAwO1xuICAgIHRvcDogMDtcbn1cblxuLmFjZV9zY3JvbGxiYXItdntcbiAgICBvdmVyZmxvdy14OiBoaWRkZW47XG4gICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xuICAgIHRvcDogMDtcbn1cblxuLmFjZV9zY3JvbGxiYXItaCB7XG4gICAgb3ZlcmZsb3cteDogc2Nyb2xsO1xuICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICBsZWZ0OiAwO1xufVxuXG4uYWNlX3ByaW50LW1hcmdpbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGhlaWdodDogMTAwJTtcbn1cblxuLmFjZV90ZXh0LWlucHV0IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogMDtcbiAgICB3aWR0aDogMC41ZW07XG4gICAgaGVpZ2h0OiAxZW07XG4gICAgb3BhY2l0eTogMDtcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAtbW96LWFwcGVhcmFuY2U6IG5vbmU7XG4gICAgYXBwZWFyYW5jZTogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgcmVzaXplOiBub25lO1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBmb250OiBpbmhlcml0O1xuICAgIHBhZGRpbmc6IDAgMXB4O1xuICAgIG1hcmdpbjogMCAtMXB4O1xuICAgIGNvbnRhaW46IHN0cmljdDtcbiAgICAtbXMtdXNlci1zZWxlY3Q6IHRleHQ7XG4gICAgLW1vei11c2VyLXNlbGVjdDogdGV4dDtcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiB0ZXh0O1xuICAgIHVzZXItc2VsZWN0OiB0ZXh0O1xuICAgIC8qd2l0aCBcXGBwcmUtbGluZVxcYCBjaHJvbWUgaW5zZXJ0cyAmbmJzcDsgaW5zdGVhZCBvZiBzcGFjZSovXG4gICAgd2hpdGUtc3BhY2U6IHByZSFpbXBvcnRhbnQ7XG59XG4uYWNlX3RleHQtaW5wdXQuYWNlX2NvbXBvc2l0aW9uIHtcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICBjb2xvcjogaW5oZXJpdDtcbiAgICB6LWluZGV4OiAxMDAwO1xuICAgIG9wYWNpdHk6IDE7XG59XG4uYWNlX2NvbXBvc2l0aW9uX3BsYWNlaG9sZGVyIHsgY29sb3I6IHRyYW5zcGFyZW50IH1cbi5hY2VfY29tcG9zaXRpb25fbWFya2VyIHsgXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgIG1hcmdpbi10b3A6IDFweDtcbn1cblxuW2FjZV9ub2NvbnRleHQ9dHJ1ZV0ge1xuICAgIHRyYW5zZm9ybTogbm9uZSFpbXBvcnRhbnQ7XG4gICAgZmlsdGVyOiBub25lIWltcG9ydGFudDtcbiAgICBjbGlwLXBhdGg6IG5vbmUhaW1wb3J0YW50O1xuICAgIG1hc2sgOiBub25lIWltcG9ydGFudDtcbiAgICBjb250YWluOiBub25lIWltcG9ydGFudDtcbiAgICBwZXJzcGVjdGl2ZTogbm9uZSFpbXBvcnRhbnQ7XG4gICAgbWl4LWJsZW5kLW1vZGU6IGluaXRpYWwhaW1wb3J0YW50O1xuICAgIHotaW5kZXg6IGF1dG87XG59XG5cbi5hY2VfbGF5ZXIge1xuICAgIHotaW5kZXg6IDE7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgLyogd29ya2Fyb3VuZCBmb3IgY2hyb21lIGJ1ZyBodHRwczovL2dpdGh1Yi5jb20vYWpheG9yZy9hY2UvaXNzdWVzLzIzMTIqL1xuICAgIHdvcmQtd3JhcDogbm9ybWFsO1xuICAgIHdoaXRlLXNwYWNlOiBwcmU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgLyogc2V0dGluZyBwb2ludGVyLWV2ZW50czogYXV0bzsgb24gbm9kZSB1bmRlciB0aGUgbW91c2UsIHdoaWNoIGNoYW5nZXNcbiAgICAgICAgZHVyaW5nIHNjcm9sbCwgd2lsbCBicmVhayBtb3VzZSB3aGVlbCBzY3JvbGxpbmcgaW4gU2FmYXJpICovXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5hY2VfZ3V0dGVyLWxheWVyIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IGF1dG87XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgaGVpZ2h0OiAxMDAwMDAwcHg7XG4gICAgY29udGFpbjogc3R5bGUgc2l6ZSBsYXlvdXQ7XG59XG5cbi5hY2VfdGV4dC1sYXllciB7XG4gICAgZm9udDogaW5oZXJpdCAhaW1wb3J0YW50O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBoZWlnaHQ6IDEwMDAwMDBweDtcbiAgICB3aWR0aDogMTAwMDAwMHB4O1xuICAgIGNvbnRhaW46IHN0eWxlIHNpemUgbGF5b3V0O1xufVxuXG4uYWNlX3RleHQtbGF5ZXIgPiAuYWNlX2xpbmUsIC5hY2VfdGV4dC1sYXllciA+IC5hY2VfbGluZV9ncm91cCB7XG4gICAgY29udGFpbjogc3R5bGUgc2l6ZSBsYXlvdXQ7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHJpZ2h0OiAwO1xufVxuXG4uYWNlX2hpZHBpIC5hY2VfdGV4dC1sYXllcixcbi5hY2VfaGlkcGkgLmFjZV9ndXR0ZXItbGF5ZXIsXG4uYWNlX2hpZHBpIC5hY2VfY29udGVudCxcbi5hY2VfaGlkcGkgLmFjZV9ndXR0ZXIge1xuICAgIGNvbnRhaW46IHN0cmljdDtcbn1cbi5hY2VfaGlkcGkgLmFjZV90ZXh0LWxheWVyID4gLmFjZV9saW5lLCBcbi5hY2VfaGlkcGkgLmFjZV90ZXh0LWxheWVyID4gLmFjZV9saW5lX2dyb3VwIHtcbiAgICBjb250YWluOiBzdHJpY3Q7XG59XG5cbi5hY2VfY2prIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uYWNlX2N1cnNvci1sYXllciB7XG4gICAgei1pbmRleDogNDtcbn1cblxuLmFjZV9jdXJzb3Ige1xuICAgIHotaW5kZXg6IDQ7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgYm9yZGVyLWxlZnQ6IDJweCBzb2xpZDtcbiAgICAvKiB3b3JrYXJvdW5kIGZvciBzbW9vdGggY3Vyc29yIHJlcGFpbnRuZyB3aG9sZSBzY3JlZW4gaW4gY2hyb21lICovXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGV6KDApO1xufVxuXG4uYWNlX211bHRpc2VsZWN0IC5hY2VfY3Vyc29yIHtcbiAgICBib3JkZXItbGVmdC13aWR0aDogMXB4O1xufVxuXG4uYWNlX3NsaW0tY3Vyc29ycyAuYWNlX2N1cnNvciB7XG4gICAgYm9yZGVyLWxlZnQtd2lkdGg6IDFweDtcbn1cblxuLmFjZV9vdmVyd3JpdGUtY3Vyc29ycyAuYWNlX2N1cnNvciB7XG4gICAgYm9yZGVyLWxlZnQtd2lkdGg6IDA7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkO1xufVxuXG4uYWNlX2hpZGRlbi1jdXJzb3JzIC5hY2VfY3Vyc29yIHtcbiAgICBvcGFjaXR5OiAwLjI7XG59XG5cbi5hY2VfaGFzUGxhY2Vob2xkZXIgLmFjZV9oaWRkZW4tY3Vyc29ycyAuYWNlX2N1cnNvciB7XG4gICAgb3BhY2l0eTogMDtcbn1cblxuLmFjZV9zbW9vdGgtYmxpbmtpbmcgLmFjZV9jdXJzb3Ige1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xOHM7XG59XG5cbi5hY2VfYW5pbWF0ZS1ibGlua2luZyAuYWNlX2N1cnNvciB7XG4gICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAxMDAwbXM7XG4gICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogc3RlcC1lbmQ7XG4gICAgYW5pbWF0aW9uLW5hbWU6IGJsaW5rLWFjZS1hbmltYXRlO1xuICAgIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlO1xufVxuXG4uYWNlX2FuaW1hdGUtYmxpbmtpbmcuYWNlX3Ntb290aC1ibGlua2luZyAuYWNlX2N1cnNvciB7XG4gICAgYW5pbWF0aW9uLWR1cmF0aW9uOiAxMDAwbXM7XG4gICAgYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1pbi1vdXQ7XG4gICAgYW5pbWF0aW9uLW5hbWU6IGJsaW5rLWFjZS1hbmltYXRlLXNtb290aDtcbn1cbiAgICBcbkBrZXlmcmFtZXMgYmxpbmstYWNlLWFuaW1hdGUge1xuICAgIGZyb20sIHRvIHsgb3BhY2l0eTogMTsgfVxuICAgIDYwJSB7IG9wYWNpdHk6IDA7IH1cbn1cblxuQGtleWZyYW1lcyBibGluay1hY2UtYW5pbWF0ZS1zbW9vdGgge1xuICAgIGZyb20sIHRvIHsgb3BhY2l0eTogMTsgfVxuICAgIDQ1JSB7IG9wYWNpdHk6IDE7IH1cbiAgICA2MCUgeyBvcGFjaXR5OiAwOyB9XG4gICAgODUlIHsgb3BhY2l0eTogMDsgfVxufVxuXG4uYWNlX21hcmtlci1sYXllciAuYWNlX3N0ZXAsIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc3RhY2sge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAzO1xufVxuXG4uYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGlvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDU7XG59XG5cbi5hY2VfbWFya2VyLWxheWVyIC5hY2VfYnJhY2tldCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDY7XG59XG5cbi5hY2VfbWFya2VyLWxheWVyIC5hY2VfZXJyb3JfYnJhY2tldCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjREU1NTU1O1xuICAgIGJvcmRlci1yYWRpdXM6IDA7XG59XG5cbi5hY2VfbWFya2VyLWxheWVyIC5hY2VfYWN0aXZlLWxpbmUge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiAyO1xufVxuXG4uYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGVkLXdvcmQge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB6LWluZGV4OiA0O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbi5hY2VfbGluZSAuYWNlX2ZvbGQge1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG5cbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgaGVpZ2h0OiAxMXB4O1xuICAgIG1hcmdpbi10b3A6IC0ycHg7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcblxuICAgIGJhY2tncm91bmQtaW1hZ2U6XG4gICAgICAgIHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkVBQUFBSkNBWUFBQURVNk1jTUFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBSnBKUkVGVWVOcGkvUC8vUHdPbGdBWEdZR1JrbEFWU29rRDhHbWp3WTF3YXNLbGpRcFlBQ3RwQ0ZlQURjSFZRZlF5TVFBd3p3QVpJM3dKS3ZDTGtmS0JhTVNDbEJsUjdCT1Fpa0NGR1FFRXJJSDBWcWthYmlHQ0Fxd1VhZEF6WkpSeFFyLzBnd2lYSWFsOHpRUVBuTlZUZ0oxVGRhd0wwVDVnQklQMU1VSk5oQnYySEtvUUhIanFOckE0V080elkwZ2x5TktMVDJLSWZJTUFBUXNkZ0dpWHZnbllBQUFBQVNVVk9SSzVDWUlJPVwiKSxcbiAgICAgICAgdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUEzQ0FZQUFBRE5OaUE1QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFDSkpSRUZVZU5waStQLy9meGdUQXdQREJ4RHhEMDc4UlNYK1llRXlERk1DSU1BQUkzSU5tWGl3ZjJZQUFBQUFTVVZPUks1Q1lJST1cIik7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdCwgcmVwZWF0LXg7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlciwgdG9wIGxlZnQ7XG4gICAgY29sb3I6IHRyYW5zcGFyZW50O1xuXG4gICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xuXG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xufVxuXG4uYWNlX2RhcmsgLmFjZV9mb2xkIHtcbn1cblxuLmFjZV9mb2xkOmhvdmVye1xuICAgIGJhY2tncm91bmQtaW1hZ2U6XG4gICAgICAgIHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkVBQUFBSkNBWUFBQURVNk1jTUFBQUFHWFJGV0hSVGIyWjBkMkZ5WlFCQlpHOWlaU0JKYldGblpWSmxZV1I1Y2NsbFBBQUFBSnBKUkVGVWVOcGkvUC8vUHdPbGdBWEdZR1JrbEFWU29rRDhHbWp3WTF3YXNLbGpRcFlBQ3RwQ0ZlQURjSFZRZlF5TVFBd3p3QVpJM3dKS3ZDTGtmS0JhTVNDbEJsUjdCT1Fpa0NGR1FFRXJJSDBWcWthYmlHQ0Fxd1VhZEF6WkpSeFFyLzBnd2lYSWFsOHpRUVBuTlZUZ0oxVGRhd0wwVDVnQklQMU1VSk5oQnYySEtvUUhIanFOckE0V080elkwZ2x5TktMVDJLSWZJTUFBUXNkZ0dpWHZnbllBQUFBQVNVVk9SSzVDWUlJPVwiKSxcbiAgICAgICAgdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUEzQ0FZQUFBRE5OaUE1QUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFDQkpSRUZVZU5waStQLy9mejRUQXdQRFp4RHhENVg0aTVmTE1Fd0pnQUFEQUVQVkRiak53ODdaQUFBQUFFbEZUa1N1UW1DQ1wiKTtcbn1cblxuLmFjZV90b29sdGlwIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XG4gICAgYm9yZGVyLXJhZGl1czogMXB4O1xuICAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgY29sb3I6IGJsYWNrO1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiAzcHggNHB4O1xuICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICB6LWluZGV4OiA5OTk5OTk7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBjdXJzb3I6IGRlZmF1bHQ7XG4gICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xuICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcbiAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgIGxldHRlci1zcGFjaW5nOiBub3JtYWw7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgbWF4LXdpZHRoOiBtaW4oNjBlbSwgNjZ2dyk7XG4gICAgb3ZlcnNjcm9sbC1iZWhhdmlvcjogY29udGFpbjtcbn1cbi5hY2VfdG9vbHRpcCBwcmUge1xuICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLmFjZV90b29sdGlwLmFjZV9kYXJrIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjM2MzYzO1xuICAgIGNvbG9yOiAjZmZmO1xufVxuXG4uYWNlX3Rvb2x0aXA6Zm9jdXMge1xuICAgIG91dGxpbmU6IDFweCBzb2xpZCAjNUU5RUQ2O1xufVxuXG4uYWNlX2ljb24ge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB3aWR0aDogMThweDtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xufVxuXG4uYWNlX2ljb25fc3ZnIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgd2lkdGg6IDEycHg7XG4gICAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgICAtd2Via2l0LW1hc2stcmVwZWF0OiBuby1yZXBlYXQ7XG4gICAgLXdlYmtpdC1tYXNrLXNpemU6IDEycHg7XG4gICAgLXdlYmtpdC1tYXNrLXBvc2l0aW9uOiBjZW50ZXI7XG59XG5cbi5hY2VfZm9sZGluZy1lbmFibGVkID4gLmFjZV9ndXR0ZXItY2VsbCwgLmFjZV9mb2xkaW5nLWVuYWJsZWQgPiAuYWNlX2d1dHRlci1jZWxsX3N2Zy1pY29ucyB7XG4gICAgcGFkZGluZy1yaWdodDogMTNweDtcbn1cblxuLmFjZV9mb2xkLXdpZGdldCB7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcblxuICAgIG1hcmdpbjogMCAtMTJweCAwIDFweDtcbiAgICBkaXNwbGF5OiBub25lO1xuICAgIHdpZHRoOiAxMXB4O1xuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XG5cbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFVQUFBQUZDQVlBQUFDTmJ5YmxBQUFBTkVsRVFWUjQybVdLc1EwQU1BekM4aXhMbHJ6UWp6bUJpRWpwMEE2V3dCQ1NQZ0tBWG9Ma3FTb3Q3bk4zeU13UjdwWjMyTnpwS2tWb0RCVXhLQUFBQUFCSlJVNUVya0pnZ2c9PVwiKTtcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcblxuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICBcbiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5hY2VfZm9sZGluZy1lbmFibGVkIC5hY2VfZm9sZC13aWRnZXQge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgICBcbn1cblxuLmFjZV9mb2xkLXdpZGdldC5hY2VfZW5kIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFVQUFBQUZDQVlBQUFDTmJ5YmxBQUFBTkVsRVFWUjQybTNId1FrQU1BaEQwWXpzUmNoRktJN3NBaWtlV2tyeHdTY0VCMG5oNWU3S1RQV2ltWmtpNHRZZlZiWCtNTmw0cHlaWGVqVU8xUUFBQUFCSlJVNUVya0pnZ2c9PVwiKTtcbn1cblxuLmFjZV9mb2xkLXdpZGdldC5hY2VfY2xvc2VkIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFNQUFBQUdDQVlBQUFBRzVTUU1BQUFBT1VsRVFWUjQyalhLd1FrQU1BZ0R3S3dxS0Q0RXdRMjZzU09rVldqZ0lJSEF6UGlDZ2FxaXFuSkhabktJQ0JFUkhOMTk0TzViOXZiTHVBVlJMK2wwWVduWkFBQUFBRWxGVGtTdVFtQ0NYQT09XCIpO1xufVxuXG4uYWNlX2ZvbGQtd2lkZ2V0OmhvdmVyIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpO1xuICAgIGJveC1zaGFkb3c6IDAgMXB4IDFweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7XG59XG5cbi5hY2VfZm9sZC13aWRnZXQ6YWN0aXZlIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuNCk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICBib3gtc2hhZG93OiAwIDFweCAxcHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xufVxuLyoqXG4gKiBEYXJrIHZlcnNpb24gZm9yIGZvbGQgd2lkZ2V0c1xuICovXG4uYWNlX2RhcmsgLmFjZV9mb2xkLXdpZGdldCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBVUFBQUFGQ0FZQUFBQ05ieWJsQUFBQUhrbEVRVlFJVzJQNC8vOC9Bem9HRVE3b0dDYUxMQWhXaVN3QjE0NkJBUUNTVFBZb2NxVDBBQUFBQUVsRlRrU3VRbUNDXCIpO1xufVxuLmFjZV9kYXJrIC5hY2VfZm9sZC13aWRnZXQuYWNlX2VuZCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBVUFBQUFGQ0FZQUFBQ05ieWJsQUFBQUgwbEVRVlFJVzJQNC8vOC9BeFE3d05qSUFqRE1nQzRBeGpDVktCaXJJQUFGMGt6MnJsaHhwQUFBQUFCSlJVNUVya0pnZ2c9PVwiKTtcbn1cbi5hY2VfZGFyayAuYWNlX2ZvbGQtd2lkZ2V0LmFjZV9jbG9zZWQge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQU1BQUFBRkNBWUFBQUNBY1ZhaUFBQUFIRWxFUVZRSVcyUDQvLysvQXhBemdEQURsT09Bem5IQUtnUFdBd0FSamk4VUlEVGZRUUFBQUFCSlJVNUVya0pnZ2c9PVwiKTtcbn1cbi5hY2VfZGFyayAuYWNlX2ZvbGQtd2lkZ2V0OmhvdmVyIHtcbiAgICBib3gtc2hhZG93OiAwIDFweCAxcHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTtcbn1cbi5hY2VfZGFyayAuYWNlX2ZvbGQtd2lkZ2V0OmFjdGl2ZSB7XG4gICAgYm94LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcbn1cblxuLmFjZV9pbmxpbmVfYnV0dG9uIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCBsaWdodGdyYXk7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIG1hcmdpbjogLTFweCA4cHg7XG4gICAgcGFkZGluZzogMCA1cHg7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuLmFjZV9pbmxpbmVfYnV0dG9uOmhvdmVyIHtcbiAgICBib3JkZXItY29sb3I6IGdyYXk7XG4gICAgYmFja2dyb3VuZDogcmdiYSgyMDAsMjAwLDIwMCwwLjIpO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbn1cblxuLmFjZV9mb2xkLXdpZGdldC5hY2VfaW52YWxpZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGQjRCNDtcbiAgICBib3JkZXItY29sb3I6ICNERTU1NTU7XG59XG5cbi5hY2VfZmFkZS1mb2xkLXdpZGdldHMgLmFjZV9mb2xkLXdpZGdldCB7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjRzIGVhc2UgMC4wNXM7XG4gICAgb3BhY2l0eTogMDtcbn1cblxuLmFjZV9mYWRlLWZvbGQtd2lkZ2V0czpob3ZlciAuYWNlX2ZvbGQtd2lkZ2V0IHtcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMDVzIGVhc2UgMC4wNXM7XG4gICAgb3BhY2l0eToxO1xufVxuXG4uYWNlX3VuZGVybGluZSB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG59XG5cbi5hY2VfYm9sZCB7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5hY2Vfbm9ib2xkIC5hY2VfYm9sZCB7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbn1cblxuLmFjZV9pdGFsaWMge1xuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbn1cblxuXG4uYWNlX2Vycm9yLW1hcmtlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDAsIDAsMC4yKTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgei1pbmRleDogOTtcbn1cblxuLmFjZV9oaWdobGlnaHQtbWFya2VyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAwLDAuMik7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHotaW5kZXg6IDg7XG59XG5cbi5hY2VfbW9iaWxlLW1lbnUge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsaW5lLWhlaWdodDogMS41O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgIGJveC1zaGFkb3c6IDFweCAzcHggMnB4IGdyZXk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RjZGNkYztcbiAgICBjb2xvcjogYmxhY2s7XG59XG4uYWNlX2RhcmsgPiAuYWNlX21vYmlsZS1tZW51IHtcbiAgICBiYWNrZ3JvdW5kOiAjMzMzO1xuICAgIGNvbG9yOiAjY2NjO1xuICAgIGJveC1zaGFkb3c6IDFweCAzcHggMnB4IGdyZXk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzQ0NDtcblxufVxuLmFjZV9tb2JpbGUtYnV0dG9uIHtcbiAgICBwYWRkaW5nOiAycHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG59XG4uYWNlX21vYmlsZS1idXR0b246aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG4gICAgb3BhY2l0eToxO1xufVxuLmFjZV9tb2JpbGUtYnV0dG9uOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2RkZDtcbn1cblxuLmFjZV9wbGFjZWhvbGRlciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGZvbnQtZmFtaWx5OiBhcmlhbDtcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7XG4gICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdDtcbiAgICB3aGl0ZS1zcGFjZTogcHJlO1xuICAgIG9wYWNpdHk6IDAuNztcbiAgICBtYXJnaW46IDAgMTBweDtcbiAgICB6LWluZGV4OiAxO1xufVxuXG4uYWNlX2dob3N0X3RleHQge1xuICAgIG9wYWNpdHk6IDAuNTtcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XG59XG5cbi5hY2VfZ2hvc3RfdGV4dF9jb250YWluZXIgPiBkaXYge1xuICAgIHdoaXRlLXNwYWNlOiBwcmU7XG59XG5cbi5naG9zdF90ZXh0X2xpbmVfd3JhcHBlZDo6YWZ0ZXIge1xuICAgIGNvbnRlbnQ6IFwi4oapXCI7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xufVxuXG4uYWNlX2xpbmVXaWRnZXRDb250YWluZXIuYWNlX2dob3N0X3RleHQge1xuICAgIG1hcmdpbjogMHB4IDRweFxufVxuXG4uYWNlX3NjcmVlbnJlYWRlci1vbmx5IHtcbiAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICBsZWZ0Oi0xMDAwMHB4O1xuICAgIHRvcDphdXRvO1xuICAgIHdpZHRoOjFweDtcbiAgICBoZWlnaHQ6MXB4O1xuICAgIG92ZXJmbG93OmhpZGRlbjtcbn1cblxuLmFjZV9oaWRkZW5fdG9rZW4ge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59YDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/css/editor-css.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/document.js":
/*!***********************************************!*\
  !*** ./node_modules/ace-code/src/document.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\n/**\n * @typedef {import(\"../ace-internal\").Ace.Delta} Delta\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n * @typedef {import(\"../ace-internal\").Ace.IRange} IRange\n * @typedef {import(\"../ace-internal\").Ace.NewLineMode} NewLineMode\n */\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar applyDelta = (__webpack_require__(/*! ./apply_delta */ \"./node_modules/ace-code/src/apply_delta.js\").applyDelta);\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar Anchor = (__webpack_require__(/*! ./anchor */ \"./node_modules/ace-code/src/anchor.js\").Anchor);\n\n/**\n * Contains the text of the document. Document can be attached to several [[EditSession `EditSession`]]s. \n * At its core, `Document`s are just an array of strings, with each row in the document matching up to the array index.\n **/\nclass Document {\n    /**\n     *\n     * Creates a new `Document`. If `text` is included, the `Document` contains those strings; otherwise, it's empty.\n     * @param {String | String[]} textOrLines text The starting text\n     **/\n    constructor(textOrLines) {\n        /**@type {string[]}*/\n        this.$lines = [\"\"];\n\n        // There has to be one line at least in the document. If you pass an empty\n        // string to the insert function, nothing will happen. Workaround.\n        if (textOrLines.length === 0) {\n            this.$lines = [\"\"];\n        } else if (Array.isArray(textOrLines)) {\n            this.insertMergedLines({row: 0, column: 0}, textOrLines);\n        } else {\n            this.insert({row: 0, column:0}, textOrLines);\n        }\n    }\n    \n    /**\n     * Replaces all the lines in the current `Document` with the value of `text`.\n     *\n     * @param {String} text The text to use\n     **/\n    setValue(text) {\n        var len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length));\n        this.insert({row: 0, column: 0}, text || \"\");\n    }\n\n    /**\n     * Returns all the lines in the document as a single string, joined by the new line character.\n     * @returns {String}\n     **/\n   getValue() {\n        return this.getAllLines().join(this.getNewLineCharacter());\n    }\n\n    /** \n     * Creates a new `Anchor` to define a floating point in the document.\n     * @param {Number} row The row number to use\n     * @param {Number} column The column number to use\n     * @returns {Anchor}\n     **/\n    createAnchor(row, column) {\n        return new Anchor(this, row, column);\n    }\n\n    /**\n     * @param {string} text\n     */\n    $detectNewLine(text) {\n        var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        this.$autoNewLine = match ? match[1] : \"\\n\";\n        this._signal(\"changeNewLineMode\");\n    }\n\n    /**\n     * Returns the newline character that's being used, depending on the value of `newLineMode`. \n     * @returns {String} If `newLineMode == windows`, `\\r\\n` is returned.  \n     *  If `newLineMode == unix`, `\\n` is returned.  \n     *  If `newLineMode == auto`, the value of `autoNewLine` is returned.\n     *\n     **/\n    getNewLineCharacter() {\n        switch (this.$newLineMode) {\n          case \"windows\":\n            return \"\\r\\n\";\n          case \"unix\":\n            return \"\\n\";\n          default:\n            return this.$autoNewLine || \"\\n\";\n        }\n    }\n\n    /**\n     * [Sets the new line mode.]{: #Document.setNewLineMode.desc}\n     * @param {NewLineMode} newLineMode [The newline mode to use; can be either `windows`, `unix`, or `auto`]{: #Document.setNewLineMode.param}\n     \n     **/\n    setNewLineMode(newLineMode) {\n        if (this.$newLineMode === newLineMode)\n            return;\n\n        this.$newLineMode = newLineMode;\n        this._signal(\"changeNewLineMode\");\n    }\n\n    /**\n     * [Returns the type of newlines being used; either `windows`, `unix`, or `auto`]{: #Document.getNewLineMode}\n     * @returns {NewLineMode}\n     **/\n    getNewLineMode() {\n        return this.$newLineMode;\n    }\n\n    /**\n     * Returns `true` if `text` is a newline character (either `\\r\\n`, `\\r`, or `\\n`).\n     * @param {String} text The text to check\n     * @returns {boolean}\n     **/\n    isNewLine(text) {\n        return (text == \"\\r\\n\" || text == \"\\r\" || text == \"\\n\");\n    }\n\n    /**\n     * Returns a verbatim copy of the given line as it is in the document\n     * @param {Number} row The row index to retrieve\n     * @returns {string}\n     **/\n    getLine(row) {\n        return this.$lines[row] || \"\";\n    }\n\n    /**\n     * Returns an array of strings of the rows between `firstRow` and `lastRow`. This function is inclusive of `lastRow`.\n     * @param {Number} firstRow The first row index to retrieve\n     * @param {Number} lastRow The final row index to retrieve\n     * @returns {string[]}\n     **/\n    getLines(firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n    }\n\n    /**\n     * Returns all lines in the document as string array.\n     * @returns {string[]}\n     **/\n    getAllLines() {\n        return this.getLines(0, this.getLength());\n    }\n\n    /**\n     * Returns the number of rows in the document.\n     * @returns {Number}\n     **/\n    getLength() {\n        return this.$lines.length;\n    }\n\n    /**\n     * Returns all the text within `range` as a single string.\n     * @param {IRange} range The range to work with.\n     * \n     * @returns {String}\n     **/\n    getTextRange(range) {\n        return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    }\n    \n    /**\n     * Returns all the text within `range` as an array of lines.\n     * @param {IRange} range The range to work with.\n     * \n     * @returns {string[]}\n     **/\n    getLinesForRange(range) {\n        var lines;\n        if (range.start.row === range.end.row) {\n            // Handle a single-line range.\n            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n        } else {\n            // Handle a multi-line range.\n            lines = this.getLines(range.start.row, range.end.row);\n            lines[0] = (lines[0] || \"\").substring(range.start.column);\n            var l = lines.length - 1;\n            if (range.end.row - range.start.row == l)\n                lines[l] = lines[l].substring(0, range.end.column);\n        }\n        return lines;\n    }\n\n    // Deprecated methods retained for backwards compatibility.\n    /**\n     * @param row\n     * @param lines\n     \n     * @deprecated\n     */\n    insertLines(row, lines) {\n        console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n        return this.insertFullLines(row, lines);\n    }\n\n    /**\n     * @param firstRow\n     * @param lastRow\n     * @returns {String[]}\n     \n     * @deprecated\n     */\n    removeLines(firstRow, lastRow) {\n        console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n        return this.removeFullLines(firstRow, lastRow);\n    }\n\n    /**\n     * @param position\n     * @returns {Point}\n     \n     * @deprecated\n     */\n    insertNewLine(position) {\n        console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n        return this.insertMergedLines(position, [\"\", \"\"]);\n    }\n\n    /**\n     * Inserts a block of `text` at the indicated `position`.\n     * @param {Point} position The position to start inserting at; it's an object that looks like `{ row: row, column: column}`\n     * @param {String} text A chunk of text to insert\n     * @returns {Point} The position ({row, column}) of the last line of `text`. If the length of `text` is 0, this function simply returns `position`. \n     \n     **/\n    insert(position, text) {\n        // Only detect new lines if the document has no line break yet.\n        if (this.getLength() <= 1)\n            this.$detectNewLine(text);\n        \n        return this.insertMergedLines(position, this.$split(text));\n    }\n    \n    /**\n     * Inserts `text` into the `position` at the current row. This method also triggers the `\"change\"` event.\n     * \n     * This differs from the `insert` method in two ways:\n     *   1. This does NOT handle newline characters (single-line text only).\n     *   2. This is faster than the `insert` method for single-line text insertions.\n     * \n     * @param {Point} position The position to insert at; it's an object that looks like `{ row: row, column: column}`\n     * @param {String} text A chunk of text without new lines\n     * @returns {Point} Returns the position of the end of the inserted text\n     **/\n    insertInLine(position, text) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = this.pos(position.row, position.column + text.length);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: [text]\n        }, true);\n        \n        return this.clonePos(end);\n    }\n\n    /**\n     * \n     * @param {number} row\n     * @param {number} column\n     * @return {Point}\n     */\n    clippedPos(row, column) {\n        var length = this.getLength();\n        if (row === undefined) {\n            row = length;\n        } else if (row < 0) {\n            row = 0;\n        } else if (row >= length) {\n            row = length - 1;\n            column = undefined;\n        }\n        var line = this.getLine(row);\n        if (column == undefined)\n            column = line.length;\n        column = Math.min(Math.max(column, 0), line.length);\n        return {row: row, column: column};\n    }\n\n    /**\n     * @param {Point} pos\n     * @return {Point}\n     */\n    clonePos(pos) {\n        return {row: pos.row, column: pos.column};\n    }\n\n    /**\n     * @param {number} row\n     * @param {number} column\n     * @return {Point}\n     */\n    pos(row, column) {\n        return {row: row, column: column};\n    }\n\n    /**\n     * @param {Point} position\n     * @return {Point}\n     * @private\n     */\n    $clipPosition(position) {\n        var length = this.getLength();\n        if (position.row >= length) {\n            position.row = Math.max(0, length - 1);\n            position.column = this.getLine(length - 1).length;\n        } else {\n            position.row = Math.max(0, position.row);\n            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n        }\n        return position;\n    }\n    \n    /**\n     * Inserts the elements in `lines` into the document as full lines (does not merge with existing line), starting at the row index given by `row`. This method also triggers the `\"change\"` event.\n     * @param {Number} row The index of the row to insert at\n     * @param {string[]} lines An array of strings\n     \n     **/\n    insertFullLines(row, lines) {\n        // Clip to document.\n        // Allow one past the document end.\n        row = Math.min(Math.max(row, 0), this.getLength());\n        \n        // Calculate insertion point.\n        var column = 0;\n        if (row < this.getLength()) {\n            // Insert before the specified row.\n            lines = lines.concat([\"\"]);\n            column = 0;\n        } else {\n            // Insert after the last row in the document.\n            lines = [\"\"].concat(lines);\n            row--;\n            column = this.$lines[row].length;\n        }\n        \n        // Insert.\n        this.insertMergedLines({row: row, column: column}, lines);\n    }\n\n    /**\n     * Inserts the elements in `lines` into the document, starting at the position index given by `row`. This method also triggers the `\"change\"` event.\n     * @param {Point} position\n     * @param {string[]} lines An array of strings\n     * @returns {Point} Contains the final row and column, like this:  \n     *   ```\n     *   {row: endRow, column: 0}\n     *   ```  \n     *   If `lines` is empty, this function returns an object containing the current row, and column, like this:  \n     *   ``` \n     *   {row: row, column: 0}\n     *   ```\n     **/    \n    insertMergedLines(position, lines) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = {\n            row: start.row + lines.length - 1,\n            column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length\n        };\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: lines\n        });\n        \n        return this.clonePos(end);\n    }\n\n    /**\n     * Removes the `range` from the document.\n     * @param {IRange} range A specified Range to remove\n     * @returns {Point} Returns the new `start` property of the range, which contains `startRow` and `startColumn`. If `range` is empty, this function returns the unmodified value of `range.start`.\n     \n     **/\n    remove(range) {\n        var start = this.clippedPos(range.start.row, range.start.column);\n        var end = this.clippedPos(range.end.row, range.end.column);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        });\n        return this.clonePos(start);\n    }\n\n    /**\n     * Removes the specified columns from the `row`. This method also triggers a `\"change\"` event.\n     * @param {Number} row The row to remove from\n     * @param {Number} startColumn The column to start removing at \n     * @param {Number} endColumn The column to stop removing at\n     * @returns {Point} Returns an object containing `startRow` and `startColumn`, indicating the new row and column values.<br/>If `startColumn` is equal to `endColumn`, this function returns nothing.\n     \n     **/\n    removeInLine(row, startColumn, endColumn) {\n        var start = this.clippedPos(row, startColumn);\n        var end = this.clippedPos(row, endColumn);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        }, true);\n        \n        return this.clonePos(start);\n    }\n\n    /**\n     * Removes a range of full lines. This method also triggers the `\"change\"` event.\n     * @param {Number} firstRow The first row to be removed\n     * @param {Number} lastRow The last row to be removed\n     * @returns {String[]} Returns all the removed lines.\n     \n     **/\n    removeFullLines(firstRow, lastRow) {\n        // Clip to document.\n        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n        lastRow  = Math.min(Math.max(0, lastRow ), this.getLength() - 1);\n        \n        // Calculate deletion range.\n        // Delete the ending new line unless we're at the end of the document.\n        // If we're at the end of the document, delete the starting new line.\n        var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;\n        var deleteLastNewLine  = lastRow  < this.getLength() - 1;\n        var startRow = ( deleteFirstNewLine ? firstRow - 1                  : firstRow                    );\n        var startCol = ( deleteFirstNewLine ? this.getLine(startRow).length : 0                           );\n        var endRow   = ( deleteLastNewLine  ? lastRow + 1                   : lastRow                     );\n        var endCol   = ( deleteLastNewLine  ? 0                             : this.getLine(endRow).length ); \n        var range = new Range(startRow, startCol, endRow, endCol);\n        \n        // Store delelted lines with bounding newlines ommitted (maintains previous behavior).\n        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        \n        this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: \"remove\",\n            lines: this.getLinesForRange(range)\n        });\n        \n        // Return the deleted lines.\n        return deletedLines;\n    }\n\n    /**\n     * Removes the new line between `row` and the row immediately following it. This method also triggers the `\"change\"` event.\n     * @param {Number} row The row to check\n     *\n     **/\n    removeNewLine(row) {\n        if (row < this.getLength() - 1 && row >= 0) {\n            this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: \"remove\",\n                lines: [\"\", \"\"]\n            });\n        }\n    }\n\n    /**\n     * Replaces a range in the document with the new `text`.\n     * @param {Range | IRange} range A specified Range to replace\n     * @param {String} text The new text to use as a replacement\n     * @returns {Point} Returns an object containing the final row and column, like this:\n     *     {row: endRow, column: 0}\n     * If the text and range are empty, this function returns an object containing the current `range.start` value.\n     * If the text is the exact same as what currently exists, this function returns an object containing the current `range.end` value.\n     *\n     **/\n    replace(range, text) {\n        if (!(range instanceof Range))\n            range = Range.fromPoints(range.start, range.end);\n        // @ts-expect-error\n        if (text.length === 0 && range.isEmpty())\n            return range.start;\n\n        // Shortcut: If the text we want to insert is the same as it is already\n        // in the document, we don't have to replace anything.\n        if (text == this.getTextRange(range))\n            return range.end;\n\n        this.remove(range);\n        var end;\n        if (text) {\n            end = this.insert(range.start, text);\n        }\n        else {\n            end = range.start;\n        }\n        \n        return end;\n    }\n\n    /**\n     * Applies all changes in `deltas` to the document.\n     * @param {Delta[]} deltas An array of delta objects (can include \"insert\" and \"remove\" actions)\n     **/\n    applyDeltas(deltas) {\n        for (var i=0; i<deltas.length; i++) {\n            this.applyDelta(deltas[i]);\n        }\n    }\n    \n    /**\n     * Reverts all changes in `deltas` from the document.\n     * @param {Delta[]} deltas An array of delta objects (can include \"insert\" and \"remove\" actions)\n     **/\n    revertDeltas(deltas) {\n        for (var i=deltas.length-1; i>=0; i--) {\n            this.revertDelta(deltas[i]);\n        }\n    }\n    \n    /**\n     * Applies `delta` to the document.\n     * @param {Delta} delta A delta object (can include \"insert\" and \"remove\" actions)\n     * @param {boolean} [doNotValidate]\n     **/\n    applyDelta(delta, doNotValidate) {\n        var isInsert = delta.action == \"insert\";\n        // An empty range is a NOOP.\n        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]\n            : !Range.comparePoints(delta.start, delta.end)) {\n            return;\n        }\n        \n        if (isInsert && delta.lines.length > 20000) {\n            this.$splitAndapplyLargeDelta(delta, 20000);\n        }\n        else {\n            applyDelta(this.$lines, delta, doNotValidate);\n            this._signal(\"change\", delta);\n        }\n    }\n\n    /**\n     * @param {Delta} delta\n     */\n    $safeApplyDelta(delta) {\n        var docLength = this.$lines.length;\n        // verify that delta is in the document to prevent applyDelta from corrupting lines array \n        if (\n            delta.action == \"remove\" && delta.start.row < docLength && delta.end.row < docLength\n            || delta.action == \"insert\" && delta.start.row <= docLength\n        ) {\n            this.applyDelta(delta);\n        }\n    }\n\n    /**\n     * \n     * @param {Delta} delta\n     * @param {number} MAX\n     */\n    $splitAndapplyLargeDelta(delta, MAX) {\n        // Split large insert deltas. This is necessary because:\n        //    1. We need to support splicing delta lines into the document via $lines.splice.apply(...)\n        //    2. fn.apply() doesn't work for a large number of params. The smallest threshold is on chrome 40 ~42000.\n        // we use 20000 to leave some space for actual stack\n        // \n        // To Do: Ideally we'd be consistent and also split 'delete' deltas. We don't do this now, because delete\n        //        delta handling is too slow. If we make delete delta handling faster we can split all large deltas\n        //        as shown in https://gist.github.com/aldendaniels/8367109#file-document-snippet-js\n        //        If we do this, update validateDelta() to limit the number of lines in a delete delta.\n        var lines = delta.lines;\n        var l = lines.length - MAX + 1;\n        var row = delta.start.row; \n        var column = delta.start.column;\n        for (var from = 0, to = 0; from < l; from = to) {\n            to += MAX - 1;\n            var chunk = lines.slice(from, to);\n            chunk.push(\"\");\n            this.applyDelta({\n                start: this.pos(row + from, column),\n                end: this.pos(row + to, column = 0),\n                action: delta.action,\n                lines: chunk\n            }, true);\n        }\n        // Update remaining delta.\n        delta.lines = lines.slice(from);\n        delta.start.row = row + from;\n        delta.start.column = column;\n        this.applyDelta(delta, true);\n    }\n    \n    /**\n     * Reverts `delta` from the document.\n     * @param {Delta} delta A delta object (can include \"insert\" and \"remove\" actions)\n     **/\n    revertDelta(delta) {\n        this.$safeApplyDelta({\n            start: this.clonePos(delta.start),\n            end: this.clonePos(delta.end),\n            action: (delta.action == \"insert\" ? \"remove\" : \"insert\"),\n            lines: delta.lines.slice()\n        });\n    }\n    \n    /**\n     * Converts an index position in a document to a `{row, column}` object.\n     *\n     * Index refers to the \"absolute position\" of a character in the document. For example:\n     *\n     * ```javascript\n     * var x = 0; // 10 characters, plus one for newline\n     * var y = -1;\n     * ```\n     * \n     * Here, `y` is an index 15: 11 characters for the first row, and 5 characters until `y` in the second.\n     *\n     * @param {Number} index An index to convert\n     * @param {Number} [startRow=0] The row from which to start the conversion\n     * @returns {Point} A `{row, column}` object of the `index` position\n     */\n    indexToPosition(index, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        for (var i = startRow || 0, l = lines.length; i < l; i++) {\n            index -= lines[i].length + newlineLength;\n            if (index < 0)\n                return {row: i, column: index + lines[i].length + newlineLength};\n        }\n        return {row: l-1, column: index + lines[l-1].length + newlineLength};\n    }\n\n    /**\n     * Converts the `{row, column}` position in a document to the character's index.\n     *\n     * Index refers to the \"absolute position\" of a character in the document. For example:\n     *\n     * ```javascript\n     * var x = 0; // 10 characters, plus one for newline\n     * var y = -1;\n     * ```\n     * \n     * Here, `y` is an index 15: 11 characters for the first row, and 5 characters until `y` in the second.\n     *\n     * @param {Point} pos The `{row, column}` to convert\n     * @param {Number} [startRow=0] The row from which to start the conversion\n     * @returns {Number} The index position in the document\n     */\n    positionToIndex(pos, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        var index = 0;\n        var row = Math.min(pos.row, lines.length);\n        for (var i = startRow || 0; i < row; ++i)\n            index += lines[i].length + newlineLength;\n\n        return index + pos.column;\n    }\n\n    /**\n     * Splits a string of text on any newline (`\\n`) or carriage-return (`\\r`) characters.\n     *\n     * @method $split\n     * @param {String} text The text to work with\n     * @returns {String[]} A String array, with each index containing a piece of the original `text` string.\n     *\n     **/\n    $split(text) {\n        return text.split(/\\r\\n|\\r|\\n/);\n    }\n}\n\nDocument.prototype.$autoNewLine = \"\";\nDocument.prototype.$newLineMode = \"auto\";\n\noop.implement(Document.prototype, EventEmitter);\n\nexports.Document = Document;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2RvY3VtZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsYUFBYSxxQ0FBcUM7QUFDbEQsYUFBYSxxQ0FBcUM7QUFDbEQsYUFBYSxzQ0FBc0M7QUFDbkQsYUFBYSwyQ0FBMkM7QUFDeEQ7QUFDQSxVQUFVLG1CQUFPLENBQUMseURBQVc7QUFDN0IsaUJBQWlCLG1HQUFtQztBQUNwRCxtQkFBbUIsaUhBQTJDO0FBQzlELFlBQVksa0ZBQXdCO0FBQ3BDLGFBQWEscUZBQTBCOztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtGQUErRjtBQUMvRixlQUFlLG1CQUFtQjtBQUNsQztBQUNBO0FBQ0Esa0JBQWtCLFNBQVM7QUFDM0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysb0NBQW9DLGtCQUFrQjtBQUN0RCxVQUFVO0FBQ1YseUJBQXlCLGlCQUFpQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0JBQWtCO0FBQ3ZDOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlDQUFpQztBQUNqQyxlQUFlLGFBQWEsc0NBQXNDLDRDQUE0QztBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlEQUFpRCxxQ0FBcUM7QUFDdEYsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsT0FBTyw2Q0FBNkMsa0NBQWtDLHlCQUF5QjtBQUM5SCxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLE9BQU8sZUFBZSxZQUFZO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU8sb0NBQW9DLGtDQUFrQyx5QkFBeUI7QUFDckgsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBLGVBQWUsT0FBTztBQUN0QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7O0FBRUE7QUFDQSxlQUFlLE9BQU87QUFDdEIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHlCQUF5QjtBQUN6RDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsVUFBVTtBQUN6QixpQkFBaUIsT0FBTztBQUN4QjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsdUJBQXVCO0FBQ2pFLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx1QkFBdUI7QUFDakUsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsVUFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsT0FBTztBQUN4QixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQSxzQkFBc0IsaUJBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0Esb0NBQW9DLE1BQU07QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFVBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsWUFBWTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsT0FBTyxJQUFJLFlBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsT0FBTztBQUM3RDtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0EsZ0JBQWdCO0FBQ2hCOztBQUVBO0FBQ0Esc0JBQXNCLFlBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTyxVQUFVLFlBQVk7QUFDNUMsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxTQUFTO0FBQzdDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFVBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsZ0JBQWdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvZG9jdW1lbnQuanM/NDRlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5EZWx0YX0gRGVsdGFcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlBvaW50fSBQb2ludFxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuSVJhbmdlfSBJUmFuZ2VcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLk5ld0xpbmVNb2RlfSBOZXdMaW5lTW9kZVxuICovXG52YXIgb29wID0gcmVxdWlyZShcIi4vbGliL29vcFwiKTtcbnZhciBhcHBseURlbHRhID0gcmVxdWlyZShcIi4vYXBwbHlfZGVsdGFcIikuYXBwbHlEZWx0YTtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG52YXIgUmFuZ2UgPSByZXF1aXJlKFwiLi9yYW5nZVwiKS5SYW5nZTtcbnZhciBBbmNob3IgPSByZXF1aXJlKFwiLi9hbmNob3JcIikuQW5jaG9yO1xuXG4vKipcbiAqIENvbnRhaW5zIHRoZSB0ZXh0IG9mIHRoZSBkb2N1bWVudC4gRG9jdW1lbnQgY2FuIGJlIGF0dGFjaGVkIHRvIHNldmVyYWwgW1tFZGl0U2Vzc2lvbiBgRWRpdFNlc3Npb25gXV1zLiBcbiAqIEF0IGl0cyBjb3JlLCBgRG9jdW1lbnRgcyBhcmUganVzdCBhbiBhcnJheSBvZiBzdHJpbmdzLCB3aXRoIGVhY2ggcm93IGluIHRoZSBkb2N1bWVudCBtYXRjaGluZyB1cCB0byB0aGUgYXJyYXkgaW5kZXguXG4gKiovXG5jbGFzcyBEb2N1bWVudCB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBEb2N1bWVudGAuIElmIGB0ZXh0YCBpcyBpbmNsdWRlZCwgdGhlIGBEb2N1bWVudGAgY29udGFpbnMgdGhvc2Ugc3RyaW5nczsgb3RoZXJ3aXNlLCBpdCdzIGVtcHR5LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nIHwgU3RyaW5nW119IHRleHRPckxpbmVzIHRleHQgVGhlIHN0YXJ0aW5nIHRleHRcbiAgICAgKiovXG4gICAgY29uc3RydWN0b3IodGV4dE9yTGluZXMpIHtcbiAgICAgICAgLyoqQHR5cGUge3N0cmluZ1tdfSovXG4gICAgICAgIHRoaXMuJGxpbmVzID0gW1wiXCJdO1xuXG4gICAgICAgIC8vIFRoZXJlIGhhcyB0byBiZSBvbmUgbGluZSBhdCBsZWFzdCBpbiB0aGUgZG9jdW1lbnQuIElmIHlvdSBwYXNzIGFuIGVtcHR5XG4gICAgICAgIC8vIHN0cmluZyB0byB0aGUgaW5zZXJ0IGZ1bmN0aW9uLCBub3RoaW5nIHdpbGwgaGFwcGVuLiBXb3JrYXJvdW5kLlxuICAgICAgICBpZiAodGV4dE9yTGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLiRsaW5lcyA9IFtcIlwiXTtcbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRleHRPckxpbmVzKSkge1xuICAgICAgICAgICAgdGhpcy5pbnNlcnRNZXJnZWRMaW5lcyh7cm93OiAwLCBjb2x1bW46IDB9LCB0ZXh0T3JMaW5lcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluc2VydCh7cm93OiAwLCBjb2x1bW46MH0sIHRleHRPckxpbmVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyBhbGwgdGhlIGxpbmVzIGluIHRoZSBjdXJyZW50IGBEb2N1bWVudGAgd2l0aCB0aGUgdmFsdWUgb2YgYHRleHRgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gdXNlXG4gICAgICoqL1xuICAgIHNldFZhbHVlKHRleHQpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuZ2V0TGVuZ3RoKCkgLSAxO1xuICAgICAgICB0aGlzLnJlbW92ZShuZXcgUmFuZ2UoMCwgMCwgbGVuLCB0aGlzLmdldExpbmUobGVuKS5sZW5ndGgpKTtcbiAgICAgICAgdGhpcy5pbnNlcnQoe3JvdzogMCwgY29sdW1uOiAwfSwgdGV4dCB8fCBcIlwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgbGluZXMgaW4gdGhlIGRvY3VtZW50IGFzIGEgc2luZ2xlIHN0cmluZywgam9pbmVkIGJ5IHRoZSBuZXcgbGluZSBjaGFyYWN0ZXIuXG4gICAgICogQHJldHVybnMge1N0cmluZ31cbiAgICAgKiovXG4gICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsTGluZXMoKS5qb2luKHRoaXMuZ2V0TmV3TGluZUNoYXJhY3RlcigpKTtcbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQW5jaG9yYCB0byBkZWZpbmUgYSBmbG9hdGluZyBwb2ludCBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IG51bWJlciB0byB1c2VcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIFRoZSBjb2x1bW4gbnVtYmVyIHRvIHVzZVxuICAgICAqIEByZXR1cm5zIHtBbmNob3J9XG4gICAgICoqL1xuICAgIGNyZWF0ZUFuY2hvcihyb3csIGNvbHVtbikge1xuICAgICAgICByZXR1cm4gbmV3IEFuY2hvcih0aGlzLCByb3csIGNvbHVtbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICAgKi9cbiAgICAkZGV0ZWN0TmV3TGluZSh0ZXh0KSB7XG4gICAgICAgIHZhciBtYXRjaCA9IHRleHQubWF0Y2goL14uKj8oXFxyXFxufFxccnxcXG4pL20pO1xuICAgICAgICB0aGlzLiRhdXRvTmV3TGluZSA9IG1hdGNoID8gbWF0Y2hbMV0gOiBcIlxcblwiO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VOZXdMaW5lTW9kZVwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBuZXdsaW5lIGNoYXJhY3RlciB0aGF0J3MgYmVpbmcgdXNlZCwgZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZSBvZiBgbmV3TGluZU1vZGVgLiBcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBJZiBgbmV3TGluZU1vZGUgPT0gd2luZG93c2AsIGBcXHJcXG5gIGlzIHJldHVybmVkLiAgXG4gICAgICogIElmIGBuZXdMaW5lTW9kZSA9PSB1bml4YCwgYFxcbmAgaXMgcmV0dXJuZWQuICBcbiAgICAgKiAgSWYgYG5ld0xpbmVNb2RlID09IGF1dG9gLCB0aGUgdmFsdWUgb2YgYGF1dG9OZXdMaW5lYCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqKi9cbiAgICBnZXROZXdMaW5lQ2hhcmFjdGVyKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuJG5ld0xpbmVNb2RlKSB7XG4gICAgICAgICAgY2FzZSBcIndpbmRvd3NcIjpcbiAgICAgICAgICAgIHJldHVybiBcIlxcclxcblwiO1xuICAgICAgICAgIGNhc2UgXCJ1bml4XCI6XG4gICAgICAgICAgICByZXR1cm4gXCJcXG5cIjtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGF1dG9OZXdMaW5lIHx8IFwiXFxuXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbU2V0cyB0aGUgbmV3IGxpbmUgbW9kZS5dezogI0RvY3VtZW50LnNldE5ld0xpbmVNb2RlLmRlc2N9XG4gICAgICogQHBhcmFtIHtOZXdMaW5lTW9kZX0gbmV3TGluZU1vZGUgW1RoZSBuZXdsaW5lIG1vZGUgdG8gdXNlOyBjYW4gYmUgZWl0aGVyIGB3aW5kb3dzYCwgYHVuaXhgLCBvciBgYXV0b2BdezogI0RvY3VtZW50LnNldE5ld0xpbmVNb2RlLnBhcmFtfVxuICAgICBcbiAgICAgKiovXG4gICAgc2V0TmV3TGluZU1vZGUobmV3TGluZU1vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuJG5ld0xpbmVNb2RlID09PSBuZXdMaW5lTW9kZSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB0aGlzLiRuZXdMaW5lTW9kZSA9IG5ld0xpbmVNb2RlO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VOZXdMaW5lTW9kZVwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbUmV0dXJucyB0aGUgdHlwZSBvZiBuZXdsaW5lcyBiZWluZyB1c2VkOyBlaXRoZXIgYHdpbmRvd3NgLCBgdW5peGAsIG9yIGBhdXRvYF17OiAjRG9jdW1lbnQuZ2V0TmV3TGluZU1vZGV9XG4gICAgICogQHJldHVybnMge05ld0xpbmVNb2RlfVxuICAgICAqKi9cbiAgICBnZXROZXdMaW5lTW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJG5ld0xpbmVNb2RlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGB0ZXh0YCBpcyBhIG5ld2xpbmUgY2hhcmFjdGVyIChlaXRoZXIgYFxcclxcbmAsIGBcXHJgLCBvciBgXFxuYCkuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gY2hlY2tcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKiovXG4gICAgaXNOZXdMaW5lKHRleHQpIHtcbiAgICAgICAgcmV0dXJuICh0ZXh0ID09IFwiXFxyXFxuXCIgfHwgdGV4dCA9PSBcIlxcclwiIHx8IHRleHQgPT0gXCJcXG5cIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHZlcmJhdGltIGNvcHkgb2YgdGhlIGdpdmVuIGxpbmUgYXMgaXQgaXMgaW4gdGhlIGRvY3VtZW50XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IGluZGV4IHRvIHJldHJpZXZlXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKiovXG4gICAgZ2V0TGluZShyb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGxpbmVzW3Jvd10gfHwgXCJcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHN0cmluZ3Mgb2YgdGhlIHJvd3MgYmV0d2VlbiBgZmlyc3RSb3dgIGFuZCBgbGFzdFJvd2AuIFRoaXMgZnVuY3Rpb24gaXMgaW5jbHVzaXZlIG9mIGBsYXN0Um93YC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmlyc3RSb3cgVGhlIGZpcnN0IHJvdyBpbmRleCB0byByZXRyaWV2ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsYXN0Um93IFRoZSBmaW5hbCByb3cgaW5kZXggdG8gcmV0cmlldmVcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119XG4gICAgICoqL1xuICAgIGdldExpbmVzKGZpcnN0Um93LCBsYXN0Um93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRsaW5lcy5zbGljZShmaXJzdFJvdywgbGFzdFJvdyArIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIGxpbmVzIGluIHRoZSBkb2N1bWVudCBhcyBzdHJpbmcgYXJyYXkuXG4gICAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgICAqKi9cbiAgICBnZXRBbGxMaW5lcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZXMoMCwgdGhpcy5nZXRMZW5ndGgoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldExlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGxpbmVzLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgdGV4dCB3aXRoaW4gYHJhbmdlYCBhcyBhIHNpbmdsZSBzdHJpbmcuXG4gICAgICogQHBhcmFtIHtJUmFuZ2V9IHJhbmdlIFRoZSByYW5nZSB0byB3b3JrIHdpdGguXG4gICAgICogXG4gICAgICogQHJldHVybnMge1N0cmluZ31cbiAgICAgKiovXG4gICAgZ2V0VGV4dFJhbmdlKHJhbmdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldExpbmVzRm9yUmFuZ2UocmFuZ2UpLmpvaW4odGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyKCkpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgdGV4dCB3aXRoaW4gYHJhbmdlYCBhcyBhbiBhcnJheSBvZiBsaW5lcy5cbiAgICAgKiBAcGFyYW0ge0lSYW5nZX0gcmFuZ2UgVGhlIHJhbmdlIHRvIHdvcmsgd2l0aC5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119XG4gICAgICoqL1xuICAgIGdldExpbmVzRm9yUmFuZ2UocmFuZ2UpIHtcbiAgICAgICAgdmFyIGxpbmVzO1xuICAgICAgICBpZiAocmFuZ2Uuc3RhcnQucm93ID09PSByYW5nZS5lbmQucm93KSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgYSBzaW5nbGUtbGluZSByYW5nZS5cbiAgICAgICAgICAgIGxpbmVzID0gW3RoaXMuZ2V0TGluZShyYW5nZS5zdGFydC5yb3cpLnN1YnN0cmluZyhyYW5nZS5zdGFydC5jb2x1bW4sIHJhbmdlLmVuZC5jb2x1bW4pXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBhIG11bHRpLWxpbmUgcmFuZ2UuXG4gICAgICAgICAgICBsaW5lcyA9IHRoaXMuZ2V0TGluZXMocmFuZ2Uuc3RhcnQucm93LCByYW5nZS5lbmQucm93KTtcbiAgICAgICAgICAgIGxpbmVzWzBdID0gKGxpbmVzWzBdIHx8IFwiXCIpLnN1YnN0cmluZyhyYW5nZS5zdGFydC5jb2x1bW4pO1xuICAgICAgICAgICAgdmFyIGwgPSBsaW5lcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgaWYgKHJhbmdlLmVuZC5yb3cgLSByYW5nZS5zdGFydC5yb3cgPT0gbClcbiAgICAgICAgICAgICAgICBsaW5lc1tsXSA9IGxpbmVzW2xdLnN1YnN0cmluZygwLCByYW5nZS5lbmQuY29sdW1uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGluZXM7XG4gICAgfVxuXG4gICAgLy8gRGVwcmVjYXRlZCBtZXRob2RzIHJldGFpbmVkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcm93XG4gICAgICogQHBhcmFtIGxpbmVzXG4gICAgIFxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgaW5zZXJ0TGluZXMocm93LCBsaW5lcykge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJVc2Ugb2YgZG9jdW1lbnQuaW5zZXJ0TGluZXMgaXMgZGVwcmVjYXRlZC4gVXNlIHRoZSBpbnNlcnRGdWxsTGluZXMgbWV0aG9kIGluc3RlYWQuXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnRGdWxsTGluZXMocm93LCBsaW5lcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGZpcnN0Um93XG4gICAgICogQHBhcmFtIGxhc3RSb3dcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nW119XG4gICAgIFxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgcmVtb3ZlTGluZXMoZmlyc3RSb3csIGxhc3RSb3cpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiVXNlIG9mIGRvY3VtZW50LnJlbW92ZUxpbmVzIGlzIGRlcHJlY2F0ZWQuIFVzZSB0aGUgcmVtb3ZlRnVsbExpbmVzIG1ldGhvZCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlRnVsbExpbmVzKGZpcnN0Um93LCBsYXN0Um93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gcG9zaXRpb25cbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9XG4gICAgIFxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgaW5zZXJ0TmV3TGluZShwb3NpdGlvbikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJVc2Ugb2YgZG9jdW1lbnQuaW5zZXJ0TmV3TGluZSBpcyBkZXByZWNhdGVkLiBVc2UgaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIFsnJywgJyddKSBpbnN0ZWFkLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIFtcIlwiLCBcIlwiXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyBhIGJsb2NrIG9mIGB0ZXh0YCBhdCB0aGUgaW5kaWNhdGVkIGBwb3NpdGlvbmAuXG4gICAgICogQHBhcmFtIHtQb2ludH0gcG9zaXRpb24gVGhlIHBvc2l0aW9uIHRvIHN0YXJ0IGluc2VydGluZyBhdDsgaXQncyBhbiBvYmplY3QgdGhhdCBsb29rcyBsaWtlIGB7IHJvdzogcm93LCBjb2x1bW46IGNvbHVtbn1gXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgQSBjaHVuayBvZiB0ZXh0IHRvIGluc2VydFxuICAgICAqIEByZXR1cm5zIHtQb2ludH0gVGhlIHBvc2l0aW9uICh7cm93LCBjb2x1bW59KSBvZiB0aGUgbGFzdCBsaW5lIG9mIGB0ZXh0YC4gSWYgdGhlIGxlbmd0aCBvZiBgdGV4dGAgaXMgMCwgdGhpcyBmdW5jdGlvbiBzaW1wbHkgcmV0dXJucyBgcG9zaXRpb25gLiBcbiAgICAgXG4gICAgICoqL1xuICAgIGluc2VydChwb3NpdGlvbiwgdGV4dCkge1xuICAgICAgICAvLyBPbmx5IGRldGVjdCBuZXcgbGluZXMgaWYgdGhlIGRvY3VtZW50IGhhcyBubyBsaW5lIGJyZWFrIHlldC5cbiAgICAgICAgaWYgKHRoaXMuZ2V0TGVuZ3RoKCkgPD0gMSlcbiAgICAgICAgICAgIHRoaXMuJGRldGVjdE5ld0xpbmUodGV4dCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnRNZXJnZWRMaW5lcyhwb3NpdGlvbiwgdGhpcy4kc3BsaXQodGV4dCkpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIGB0ZXh0YCBpbnRvIHRoZSBgcG9zaXRpb25gIGF0IHRoZSBjdXJyZW50IHJvdy4gVGhpcyBtZXRob2QgYWxzbyB0cmlnZ2VycyB0aGUgYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgICAqIFxuICAgICAqIFRoaXMgZGlmZmVycyBmcm9tIHRoZSBgaW5zZXJ0YCBtZXRob2QgaW4gdHdvIHdheXM6XG4gICAgICogICAxLiBUaGlzIGRvZXMgTk9UIGhhbmRsZSBuZXdsaW5lIGNoYXJhY3RlcnMgKHNpbmdsZS1saW5lIHRleHQgb25seSkuXG4gICAgICogICAyLiBUaGlzIGlzIGZhc3RlciB0aGFuIHRoZSBgaW5zZXJ0YCBtZXRob2QgZm9yIHNpbmdsZS1saW5lIHRleHQgaW5zZXJ0aW9ucy5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwb3NpdGlvbiBUaGUgcG9zaXRpb24gdG8gaW5zZXJ0IGF0OyBpdCdzIGFuIG9iamVjdCB0aGF0IGxvb2tzIGxpa2UgYHsgcm93OiByb3csIGNvbHVtbjogY29sdW1ufWBcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBBIGNodW5rIG9mIHRleHQgd2l0aG91dCBuZXcgbGluZXNcbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9IFJldHVybnMgdGhlIHBvc2l0aW9uIG9mIHRoZSBlbmQgb2YgdGhlIGluc2VydGVkIHRleHRcbiAgICAgKiovXG4gICAgaW5zZXJ0SW5MaW5lKHBvc2l0aW9uLCB0ZXh0KSB7XG4gICAgICAgIHZhciBzdGFydCA9IHRoaXMuY2xpcHBlZFBvcyhwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbik7XG4gICAgICAgIHZhciBlbmQgPSB0aGlzLnBvcyhwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbiArIHRleHQubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYXBwbHlEZWx0YSh7XG4gICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IGVuZCxcbiAgICAgICAgICAgIGFjdGlvbjogXCJpbnNlcnRcIixcbiAgICAgICAgICAgIGxpbmVzOiBbdGV4dF1cbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZVBvcyhlbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29sdW1uXG4gICAgICogQHJldHVybiB7UG9pbnR9XG4gICAgICovXG4gICAgY2xpcHBlZFBvcyhyb3csIGNvbHVtbikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByb3cgPSBsZW5ndGg7XG4gICAgICAgIH0gZWxzZSBpZiAocm93IDwgMCkge1xuICAgICAgICAgICAgcm93ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChyb3cgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICByb3cgPSBsZW5ndGggLSAxO1xuICAgICAgICAgICAgY29sdW1uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5nZXRMaW5lKHJvdyk7XG4gICAgICAgIGlmIChjb2x1bW4gPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgY29sdW1uID0gbGluZS5sZW5ndGg7XG4gICAgICAgIGNvbHVtbiA9IE1hdGgubWluKE1hdGgubWF4KGNvbHVtbiwgMCksIGxpbmUubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIHtyb3c6IHJvdywgY29sdW1uOiBjb2x1bW59O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc1xuICAgICAqIEByZXR1cm4ge1BvaW50fVxuICAgICAqL1xuICAgIGNsb25lUG9zKHBvcykge1xuICAgICAgICByZXR1cm4ge3JvdzogcG9zLnJvdywgY29sdW1uOiBwb3MuY29sdW1ufTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbHVtblxuICAgICAqIEByZXR1cm4ge1BvaW50fVxuICAgICAqL1xuICAgIHBvcyhyb3csIGNvbHVtbikge1xuICAgICAgICByZXR1cm4ge3Jvdzogcm93LCBjb2x1bW46IGNvbHVtbn07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludH0gcG9zaXRpb25cbiAgICAgKiBAcmV0dXJuIHtQb2ludH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgICRjbGlwUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIGlmIChwb3NpdGlvbi5yb3cgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgICBwb3NpdGlvbi5yb3cgPSBNYXRoLm1heCgwLCBsZW5ndGggLSAxKTtcbiAgICAgICAgICAgIHBvc2l0aW9uLmNvbHVtbiA9IHRoaXMuZ2V0TGluZShsZW5ndGggLSAxKS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb3NpdGlvbi5yb3cgPSBNYXRoLm1heCgwLCBwb3NpdGlvbi5yb3cpO1xuICAgICAgICAgICAgcG9zaXRpb24uY29sdW1uID0gTWF0aC5taW4oTWF0aC5tYXgocG9zaXRpb24uY29sdW1uLCAwKSwgdGhpcy5nZXRMaW5lKHBvc2l0aW9uLnJvdykubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zaXRpb247XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGhlIGVsZW1lbnRzIGluIGBsaW5lc2AgaW50byB0aGUgZG9jdW1lbnQgYXMgZnVsbCBsaW5lcyAoZG9lcyBub3QgbWVyZ2Ugd2l0aCBleGlzdGluZyBsaW5lKSwgc3RhcnRpbmcgYXQgdGhlIHJvdyBpbmRleCBnaXZlbiBieSBgcm93YC4gVGhpcyBtZXRob2QgYWxzbyB0cmlnZ2VycyB0aGUgYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgVGhlIGluZGV4IG9mIHRoZSByb3cgdG8gaW5zZXJ0IGF0XG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gbGluZXMgQW4gYXJyYXkgb2Ygc3RyaW5nc1xuICAgICBcbiAgICAgKiovXG4gICAgaW5zZXJ0RnVsbExpbmVzKHJvdywgbGluZXMpIHtcbiAgICAgICAgLy8gQ2xpcCB0byBkb2N1bWVudC5cbiAgICAgICAgLy8gQWxsb3cgb25lIHBhc3QgdGhlIGRvY3VtZW50IGVuZC5cbiAgICAgICAgcm93ID0gTWF0aC5taW4oTWF0aC5tYXgocm93LCAwKSwgdGhpcy5nZXRMZW5ndGgoKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhdGUgaW5zZXJ0aW9uIHBvaW50LlxuICAgICAgICB2YXIgY29sdW1uID0gMDtcbiAgICAgICAgaWYgKHJvdyA8IHRoaXMuZ2V0TGVuZ3RoKCkpIHtcbiAgICAgICAgICAgIC8vIEluc2VydCBiZWZvcmUgdGhlIHNwZWNpZmllZCByb3cuXG4gICAgICAgICAgICBsaW5lcyA9IGxpbmVzLmNvbmNhdChbXCJcIl0pO1xuICAgICAgICAgICAgY29sdW1uID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEluc2VydCBhZnRlciB0aGUgbGFzdCByb3cgaW4gdGhlIGRvY3VtZW50LlxuICAgICAgICAgICAgbGluZXMgPSBbXCJcIl0uY29uY2F0KGxpbmVzKTtcbiAgICAgICAgICAgIHJvdy0tO1xuICAgICAgICAgICAgY29sdW1uID0gdGhpcy4kbGluZXNbcm93XS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEluc2VydC5cbiAgICAgICAgdGhpcy5pbnNlcnRNZXJnZWRMaW5lcyh7cm93OiByb3csIGNvbHVtbjogY29sdW1ufSwgbGluZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGhlIGVsZW1lbnRzIGluIGBsaW5lc2AgaW50byB0aGUgZG9jdW1lbnQsIHN0YXJ0aW5nIGF0IHRoZSBwb3NpdGlvbiBpbmRleCBnaXZlbiBieSBgcm93YC4gVGhpcyBtZXRob2QgYWxzbyB0cmlnZ2VycyB0aGUgYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc2l0aW9uXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gbGluZXMgQW4gYXJyYXkgb2Ygc3RyaW5nc1xuICAgICAqIEByZXR1cm5zIHtQb2ludH0gQ29udGFpbnMgdGhlIGZpbmFsIHJvdyBhbmQgY29sdW1uLCBsaWtlIHRoaXM6ICBcbiAgICAgKiAgIGBgYFxuICAgICAqICAge3JvdzogZW5kUm93LCBjb2x1bW46IDB9XG4gICAgICogICBgYGAgIFxuICAgICAqICAgSWYgYGxpbmVzYCBpcyBlbXB0eSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjdXJyZW50IHJvdywgYW5kIGNvbHVtbiwgbGlrZSB0aGlzOiAgXG4gICAgICogICBgYGAgXG4gICAgICogICB7cm93OiByb3csIGNvbHVtbjogMH1cbiAgICAgKiAgIGBgYFxuICAgICAqKi8gICAgXG4gICAgaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIGxpbmVzKSB7XG4gICAgICAgIHZhciBzdGFydCA9IHRoaXMuY2xpcHBlZFBvcyhwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbik7XG4gICAgICAgIHZhciBlbmQgPSB7XG4gICAgICAgICAgICByb3c6IHN0YXJ0LnJvdyArIGxpbmVzLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICBjb2x1bW46IChsaW5lcy5sZW5ndGggPT0gMSA/IHN0YXJ0LmNvbHVtbiA6IDApICsgbGluZXNbbGluZXMubGVuZ3RoIC0gMV0ubGVuZ3RoXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLmFwcGx5RGVsdGEoe1xuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgICAgICBhY3Rpb246IFwiaW5zZXJ0XCIsXG4gICAgICAgICAgICBsaW5lczogbGluZXNcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZVBvcyhlbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGByYW5nZWAgZnJvbSB0aGUgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIHtJUmFuZ2V9IHJhbmdlIEEgc3BlY2lmaWVkIFJhbmdlIHRvIHJlbW92ZVxuICAgICAqIEByZXR1cm5zIHtQb2ludH0gUmV0dXJucyB0aGUgbmV3IGBzdGFydGAgcHJvcGVydHkgb2YgdGhlIHJhbmdlLCB3aGljaCBjb250YWlucyBgc3RhcnRSb3dgIGFuZCBgc3RhcnRDb2x1bW5gLiBJZiBgcmFuZ2VgIGlzIGVtcHR5LCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHVubW9kaWZpZWQgdmFsdWUgb2YgYHJhbmdlLnN0YXJ0YC5cbiAgICAgXG4gICAgICoqL1xuICAgIHJlbW92ZShyYW5nZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmNsaXBwZWRQb3MocmFuZ2Uuc3RhcnQucm93LCByYW5nZS5zdGFydC5jb2x1bW4pO1xuICAgICAgICB2YXIgZW5kID0gdGhpcy5jbGlwcGVkUG9zKHJhbmdlLmVuZC5yb3csIHJhbmdlLmVuZC5jb2x1bW4pO1xuICAgICAgICB0aGlzLmFwcGx5RGVsdGEoe1xuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgICAgICBhY3Rpb246IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICBsaW5lczogdGhpcy5nZXRMaW5lc0ZvclJhbmdlKHtzdGFydDogc3RhcnQsIGVuZDogZW5kfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lUG9zKHN0YXJ0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgY29sdW1ucyBmcm9tIHRoZSBgcm93YC4gVGhpcyBtZXRob2QgYWxzbyB0cmlnZ2VycyBhIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSByb3cgdG8gcmVtb3ZlIGZyb21cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhcnRDb2x1bW4gVGhlIGNvbHVtbiB0byBzdGFydCByZW1vdmluZyBhdCBcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZW5kQ29sdW1uIFRoZSBjb2x1bW4gdG8gc3RvcCByZW1vdmluZyBhdFxuICAgICAqIEByZXR1cm5zIHtQb2ludH0gUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBgc3RhcnRSb3dgIGFuZCBgc3RhcnRDb2x1bW5gLCBpbmRpY2F0aW5nIHRoZSBuZXcgcm93IGFuZCBjb2x1bW4gdmFsdWVzLjxici8+SWYgYHN0YXJ0Q29sdW1uYCBpcyBlcXVhbCB0byBgZW5kQ29sdW1uYCwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIG5vdGhpbmcuXG4gICAgIFxuICAgICAqKi9cbiAgICByZW1vdmVJbkxpbmUocm93LCBzdGFydENvbHVtbiwgZW5kQ29sdW1uKSB7XG4gICAgICAgIHZhciBzdGFydCA9IHRoaXMuY2xpcHBlZFBvcyhyb3csIHN0YXJ0Q29sdW1uKTtcbiAgICAgICAgdmFyIGVuZCA9IHRoaXMuY2xpcHBlZFBvcyhyb3csIGVuZENvbHVtbik7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmFwcGx5RGVsdGEoe1xuICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgICAgICBhY3Rpb246IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICBsaW5lczogdGhpcy5nZXRMaW5lc0ZvclJhbmdlKHtzdGFydDogc3RhcnQsIGVuZDogZW5kfSlcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZVBvcyhzdGFydCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHJhbmdlIG9mIGZ1bGwgbGluZXMuIFRoaXMgbWV0aG9kIGFsc28gdHJpZ2dlcnMgdGhlIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmlyc3RSb3cgVGhlIGZpcnN0IHJvdyB0byBiZSByZW1vdmVkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxhc3RSb3cgVGhlIGxhc3Qgcm93IHRvIGJlIHJlbW92ZWRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nW119IFJldHVybnMgYWxsIHRoZSByZW1vdmVkIGxpbmVzLlxuICAgICBcbiAgICAgKiovXG4gICAgcmVtb3ZlRnVsbExpbmVzKGZpcnN0Um93LCBsYXN0Um93KSB7XG4gICAgICAgIC8vIENsaXAgdG8gZG9jdW1lbnQuXG4gICAgICAgIGZpcnN0Um93ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgZmlyc3RSb3cpLCB0aGlzLmdldExlbmd0aCgpIC0gMSk7XG4gICAgICAgIGxhc3RSb3cgID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgbGFzdFJvdyApLCB0aGlzLmdldExlbmd0aCgpIC0gMSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhdGUgZGVsZXRpb24gcmFuZ2UuXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgZW5kaW5nIG5ldyBsaW5lIHVubGVzcyB3ZSdyZSBhdCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICAgICAgLy8gSWYgd2UncmUgYXQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQsIGRlbGV0ZSB0aGUgc3RhcnRpbmcgbmV3IGxpbmUuXG4gICAgICAgIHZhciBkZWxldGVGaXJzdE5ld0xpbmUgPSBsYXN0Um93ID09IHRoaXMuZ2V0TGVuZ3RoKCkgLSAxICYmIGZpcnN0Um93ID4gMDtcbiAgICAgICAgdmFyIGRlbGV0ZUxhc3ROZXdMaW5lICA9IGxhc3RSb3cgIDwgdGhpcy5nZXRMZW5ndGgoKSAtIDE7XG4gICAgICAgIHZhciBzdGFydFJvdyA9ICggZGVsZXRlRmlyc3ROZXdMaW5lID8gZmlyc3RSb3cgLSAxICAgICAgICAgICAgICAgICAgOiBmaXJzdFJvdyAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgdmFyIHN0YXJ0Q29sID0gKCBkZWxldGVGaXJzdE5ld0xpbmUgPyB0aGlzLmdldExpbmUoc3RhcnRSb3cpLmxlbmd0aCA6IDAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICB2YXIgZW5kUm93ICAgPSAoIGRlbGV0ZUxhc3ROZXdMaW5lICA/IGxhc3RSb3cgKyAxICAgICAgICAgICAgICAgICAgIDogbGFzdFJvdyAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgIHZhciBlbmRDb2wgICA9ICggZGVsZXRlTGFzdE5ld0xpbmUgID8gMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmdldExpbmUoZW5kUm93KS5sZW5ndGggKTsgXG4gICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShzdGFydFJvdywgc3RhcnRDb2wsIGVuZFJvdywgZW5kQ29sKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3JlIGRlbGVsdGVkIGxpbmVzIHdpdGggYm91bmRpbmcgbmV3bGluZXMgb21taXR0ZWQgKG1haW50YWlucyBwcmV2aW91cyBiZWhhdmlvcikuXG4gICAgICAgIHZhciBkZWxldGVkTGluZXMgPSB0aGlzLiRsaW5lcy5zbGljZShmaXJzdFJvdywgbGFzdFJvdyArIDEpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hcHBseURlbHRhKHtcbiAgICAgICAgICAgIHN0YXJ0OiByYW5nZS5zdGFydCxcbiAgICAgICAgICAgIGVuZDogcmFuZ2UuZW5kLFxuICAgICAgICAgICAgYWN0aW9uOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgbGluZXM6IHRoaXMuZ2V0TGluZXNGb3JSYW5nZShyYW5nZSlcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZXR1cm4gdGhlIGRlbGV0ZWQgbGluZXMuXG4gICAgICAgIHJldHVybiBkZWxldGVkTGluZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgbmV3IGxpbmUgYmV0d2VlbiBgcm93YCBhbmQgdGhlIHJvdyBpbW1lZGlhdGVseSBmb2xsb3dpbmcgaXQuIFRoaXMgbWV0aG9kIGFsc28gdHJpZ2dlcnMgdGhlIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSByb3cgdG8gY2hlY2tcbiAgICAgKlxuICAgICAqKi9cbiAgICByZW1vdmVOZXdMaW5lKHJvdykge1xuICAgICAgICBpZiAocm93IDwgdGhpcy5nZXRMZW5ndGgoKSAtIDEgJiYgcm93ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlEZWx0YSh7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMucG9zKHJvdywgdGhpcy5nZXRMaW5lKHJvdykubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICBlbmQ6IHRoaXMucG9zKHJvdyArIDEsIDApLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogXCJyZW1vdmVcIixcbiAgICAgICAgICAgICAgICBsaW5lczogW1wiXCIsIFwiXCJdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIGEgcmFuZ2UgaW4gdGhlIGRvY3VtZW50IHdpdGggdGhlIG5ldyBgdGV4dGAuXG4gICAgICogQHBhcmFtIHtSYW5nZSB8IElSYW5nZX0gcmFuZ2UgQSBzcGVjaWZpZWQgUmFuZ2UgdG8gcmVwbGFjZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSBuZXcgdGV4dCB0byB1c2UgYXMgYSByZXBsYWNlbWVudFxuICAgICAqIEByZXR1cm5zIHtQb2ludH0gUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgZmluYWwgcm93IGFuZCBjb2x1bW4sIGxpa2UgdGhpczpcbiAgICAgKiAgICAge3JvdzogZW5kUm93LCBjb2x1bW46IDB9XG4gICAgICogSWYgdGhlIHRleHQgYW5kIHJhbmdlIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjdXJyZW50IGByYW5nZS5zdGFydGAgdmFsdWUuXG4gICAgICogSWYgdGhlIHRleHQgaXMgdGhlIGV4YWN0IHNhbWUgYXMgd2hhdCBjdXJyZW50bHkgZXhpc3RzLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGN1cnJlbnQgYHJhbmdlLmVuZGAgdmFsdWUuXG4gICAgICpcbiAgICAgKiovXG4gICAgcmVwbGFjZShyYW5nZSwgdGV4dCkge1xuICAgICAgICBpZiAoIShyYW5nZSBpbnN0YW5jZW9mIFJhbmdlKSlcbiAgICAgICAgICAgIHJhbmdlID0gUmFuZ2UuZnJvbVBvaW50cyhyYW5nZS5zdGFydCwgcmFuZ2UuZW5kKTtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBpZiAodGV4dC5sZW5ndGggPT09IDAgJiYgcmFuZ2UuaXNFbXB0eSgpKVxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlLnN0YXJ0O1xuXG4gICAgICAgIC8vIFNob3J0Y3V0OiBJZiB0aGUgdGV4dCB3ZSB3YW50IHRvIGluc2VydCBpcyB0aGUgc2FtZSBhcyBpdCBpcyBhbHJlYWR5XG4gICAgICAgIC8vIGluIHRoZSBkb2N1bWVudCwgd2UgZG9uJ3QgaGF2ZSB0byByZXBsYWNlIGFueXRoaW5nLlxuICAgICAgICBpZiAodGV4dCA9PSB0aGlzLmdldFRleHRSYW5nZShyYW5nZSkpXG4gICAgICAgICAgICByZXR1cm4gcmFuZ2UuZW5kO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlKHJhbmdlKTtcbiAgICAgICAgdmFyIGVuZDtcbiAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICAgIGVuZCA9IHRoaXMuaW5zZXJ0KHJhbmdlLnN0YXJ0LCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVuZCA9IHJhbmdlLnN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZW5kO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYWxsIGNoYW5nZXMgaW4gYGRlbHRhc2AgdG8gdGhlIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSB7RGVsdGFbXX0gZGVsdGFzIEFuIGFycmF5IG9mIGRlbHRhIG9iamVjdHMgKGNhbiBpbmNsdWRlIFwiaW5zZXJ0XCIgYW5kIFwicmVtb3ZlXCIgYWN0aW9ucylcbiAgICAgKiovXG4gICAgYXBwbHlEZWx0YXMoZGVsdGFzKSB7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxkZWx0YXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlEZWx0YShkZWx0YXNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldmVydHMgYWxsIGNoYW5nZXMgaW4gYGRlbHRhc2AgZnJvbSB0aGUgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIHtEZWx0YVtdfSBkZWx0YXMgQW4gYXJyYXkgb2YgZGVsdGEgb2JqZWN0cyAoY2FuIGluY2x1ZGUgXCJpbnNlcnRcIiBhbmQgXCJyZW1vdmVcIiBhY3Rpb25zKVxuICAgICAqKi9cbiAgICByZXZlcnREZWx0YXMoZGVsdGFzKSB7XG4gICAgICAgIGZvciAodmFyIGk9ZGVsdGFzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMucmV2ZXJ0RGVsdGEoZGVsdGFzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGBkZWx0YWAgdG8gdGhlIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSB7RGVsdGF9IGRlbHRhIEEgZGVsdGEgb2JqZWN0IChjYW4gaW5jbHVkZSBcImluc2VydFwiIGFuZCBcInJlbW92ZVwiIGFjdGlvbnMpXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZG9Ob3RWYWxpZGF0ZV1cbiAgICAgKiovXG4gICAgYXBwbHlEZWx0YShkZWx0YSwgZG9Ob3RWYWxpZGF0ZSkge1xuICAgICAgICB2YXIgaXNJbnNlcnQgPSBkZWx0YS5hY3Rpb24gPT0gXCJpbnNlcnRcIjtcbiAgICAgICAgLy8gQW4gZW1wdHkgcmFuZ2UgaXMgYSBOT09QLlxuICAgICAgICBpZiAoaXNJbnNlcnQgPyBkZWx0YS5saW5lcy5sZW5ndGggPD0gMSAmJiAhZGVsdGEubGluZXNbMF1cbiAgICAgICAgICAgIDogIVJhbmdlLmNvbXBhcmVQb2ludHMoZGVsdGEuc3RhcnQsIGRlbHRhLmVuZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGlzSW5zZXJ0ICYmIGRlbHRhLmxpbmVzLmxlbmd0aCA+IDIwMDAwKSB7XG4gICAgICAgICAgICB0aGlzLiRzcGxpdEFuZGFwcGx5TGFyZ2VEZWx0YShkZWx0YSwgMjAwMDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlEZWx0YSh0aGlzLiRsaW5lcywgZGVsdGEsIGRvTm90VmFsaWRhdGUpO1xuICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlXCIsIGRlbHRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RGVsdGF9IGRlbHRhXG4gICAgICovXG4gICAgJHNhZmVBcHBseURlbHRhKGRlbHRhKSB7XG4gICAgICAgIHZhciBkb2NMZW5ndGggPSB0aGlzLiRsaW5lcy5sZW5ndGg7XG4gICAgICAgIC8vIHZlcmlmeSB0aGF0IGRlbHRhIGlzIGluIHRoZSBkb2N1bWVudCB0byBwcmV2ZW50IGFwcGx5RGVsdGEgZnJvbSBjb3JydXB0aW5nIGxpbmVzIGFycmF5IFxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBkZWx0YS5hY3Rpb24gPT0gXCJyZW1vdmVcIiAmJiBkZWx0YS5zdGFydC5yb3cgPCBkb2NMZW5ndGggJiYgZGVsdGEuZW5kLnJvdyA8IGRvY0xlbmd0aFxuICAgICAgICAgICAgfHwgZGVsdGEuYWN0aW9uID09IFwiaW5zZXJ0XCIgJiYgZGVsdGEuc3RhcnQucm93IDw9IGRvY0xlbmd0aFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlEZWx0YShkZWx0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0RlbHRhfSBkZWx0YVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBNQVhcbiAgICAgKi9cbiAgICAkc3BsaXRBbmRhcHBseUxhcmdlRGVsdGEoZGVsdGEsIE1BWCkge1xuICAgICAgICAvLyBTcGxpdCBsYXJnZSBpbnNlcnQgZGVsdGFzLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlOlxuICAgICAgICAvLyAgICAxLiBXZSBuZWVkIHRvIHN1cHBvcnQgc3BsaWNpbmcgZGVsdGEgbGluZXMgaW50byB0aGUgZG9jdW1lbnQgdmlhICRsaW5lcy5zcGxpY2UuYXBwbHkoLi4uKVxuICAgICAgICAvLyAgICAyLiBmbi5hcHBseSgpIGRvZXNuJ3Qgd29yayBmb3IgYSBsYXJnZSBudW1iZXIgb2YgcGFyYW1zLiBUaGUgc21hbGxlc3QgdGhyZXNob2xkIGlzIG9uIGNocm9tZSA0MCB+NDIwMDAuXG4gICAgICAgIC8vIHdlIHVzZSAyMDAwMCB0byBsZWF2ZSBzb21lIHNwYWNlIGZvciBhY3R1YWwgc3RhY2tcbiAgICAgICAgLy8gXG4gICAgICAgIC8vIFRvIERvOiBJZGVhbGx5IHdlJ2QgYmUgY29uc2lzdGVudCBhbmQgYWxzbyBzcGxpdCAnZGVsZXRlJyBkZWx0YXMuIFdlIGRvbid0IGRvIHRoaXMgbm93LCBiZWNhdXNlIGRlbGV0ZVxuICAgICAgICAvLyAgICAgICAgZGVsdGEgaGFuZGxpbmcgaXMgdG9vIHNsb3cuIElmIHdlIG1ha2UgZGVsZXRlIGRlbHRhIGhhbmRsaW5nIGZhc3RlciB3ZSBjYW4gc3BsaXQgYWxsIGxhcmdlIGRlbHRhc1xuICAgICAgICAvLyAgICAgICAgYXMgc2hvd24gaW4gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vYWxkZW5kYW5pZWxzLzgzNjcxMDkjZmlsZS1kb2N1bWVudC1zbmlwcGV0LWpzXG4gICAgICAgIC8vICAgICAgICBJZiB3ZSBkbyB0aGlzLCB1cGRhdGUgdmFsaWRhdGVEZWx0YSgpIHRvIGxpbWl0IHRoZSBudW1iZXIgb2YgbGluZXMgaW4gYSBkZWxldGUgZGVsdGEuXG4gICAgICAgIHZhciBsaW5lcyA9IGRlbHRhLmxpbmVzO1xuICAgICAgICB2YXIgbCA9IGxpbmVzLmxlbmd0aCAtIE1BWCArIDE7XG4gICAgICAgIHZhciByb3cgPSBkZWx0YS5zdGFydC5yb3c7IFxuICAgICAgICB2YXIgY29sdW1uID0gZGVsdGEuc3RhcnQuY29sdW1uO1xuICAgICAgICBmb3IgKHZhciBmcm9tID0gMCwgdG8gPSAwOyBmcm9tIDwgbDsgZnJvbSA9IHRvKSB7XG4gICAgICAgICAgICB0byArPSBNQVggLSAxO1xuICAgICAgICAgICAgdmFyIGNodW5rID0gbGluZXMuc2xpY2UoZnJvbSwgdG8pO1xuICAgICAgICAgICAgY2h1bmsucHVzaChcIlwiKTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlEZWx0YSh7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMucG9zKHJvdyArIGZyb20sIGNvbHVtbiksXG4gICAgICAgICAgICAgICAgZW5kOiB0aGlzLnBvcyhyb3cgKyB0bywgY29sdW1uID0gMCksXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBkZWx0YS5hY3Rpb24sXG4gICAgICAgICAgICAgICAgbGluZXM6IGNodW5rXG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgcmVtYWluaW5nIGRlbHRhLlxuICAgICAgICBkZWx0YS5saW5lcyA9IGxpbmVzLnNsaWNlKGZyb20pO1xuICAgICAgICBkZWx0YS5zdGFydC5yb3cgPSByb3cgKyBmcm9tO1xuICAgICAgICBkZWx0YS5zdGFydC5jb2x1bW4gPSBjb2x1bW47XG4gICAgICAgIHRoaXMuYXBwbHlEZWx0YShkZWx0YSwgdHJ1ZSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldmVydHMgYGRlbHRhYCBmcm9tIHRoZSBkb2N1bWVudC5cbiAgICAgKiBAcGFyYW0ge0RlbHRhfSBkZWx0YSBBIGRlbHRhIG9iamVjdCAoY2FuIGluY2x1ZGUgXCJpbnNlcnRcIiBhbmQgXCJyZW1vdmVcIiBhY3Rpb25zKVxuICAgICAqKi9cbiAgICByZXZlcnREZWx0YShkZWx0YSkge1xuICAgICAgICB0aGlzLiRzYWZlQXBwbHlEZWx0YSh7XG4gICAgICAgICAgICBzdGFydDogdGhpcy5jbG9uZVBvcyhkZWx0YS5zdGFydCksXG4gICAgICAgICAgICBlbmQ6IHRoaXMuY2xvbmVQb3MoZGVsdGEuZW5kKSxcbiAgICAgICAgICAgIGFjdGlvbjogKGRlbHRhLmFjdGlvbiA9PSBcImluc2VydFwiID8gXCJyZW1vdmVcIiA6IFwiaW5zZXJ0XCIpLFxuICAgICAgICAgICAgbGluZXM6IGRlbHRhLmxpbmVzLnNsaWNlKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGFuIGluZGV4IHBvc2l0aW9uIGluIGEgZG9jdW1lbnQgdG8gYSBge3JvdywgY29sdW1ufWAgb2JqZWN0LlxuICAgICAqXG4gICAgICogSW5kZXggcmVmZXJzIHRvIHRoZSBcImFic29sdXRlIHBvc2l0aW9uXCIgb2YgYSBjaGFyYWN0ZXIgaW4gdGhlIGRvY3VtZW50LiBGb3IgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGphdmFzY3JpcHRcbiAgICAgKiB2YXIgeCA9IDA7IC8vIDEwIGNoYXJhY3RlcnMsIHBsdXMgb25lIGZvciBuZXdsaW5lXG4gICAgICogdmFyIHkgPSAtMTtcbiAgICAgKiBgYGBcbiAgICAgKiBcbiAgICAgKiBIZXJlLCBgeWAgaXMgYW4gaW5kZXggMTU6IDExIGNoYXJhY3RlcnMgZm9yIHRoZSBmaXJzdCByb3csIGFuZCA1IGNoYXJhY3RlcnMgdW50aWwgYHlgIGluIHRoZSBzZWNvbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggQW4gaW5kZXggdG8gY29udmVydFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRSb3c9MF0gVGhlIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHRoZSBjb252ZXJzaW9uXG4gICAgICogQHJldHVybnMge1BvaW50fSBBIGB7cm93LCBjb2x1bW59YCBvYmplY3Qgb2YgdGhlIGBpbmRleGAgcG9zaXRpb25cbiAgICAgKi9cbiAgICBpbmRleFRvUG9zaXRpb24oaW5kZXgsIHN0YXJ0Um93KSB7XG4gICAgICAgIHZhciBsaW5lcyA9IHRoaXMuJGxpbmVzIHx8IHRoaXMuZ2V0QWxsTGluZXMoKTtcbiAgICAgICAgdmFyIG5ld2xpbmVMZW5ndGggPSB0aGlzLmdldE5ld0xpbmVDaGFyYWN0ZXIoKS5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSBzdGFydFJvdyB8fCAwLCBsID0gbGluZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBpbmRleCAtPSBsaW5lc1tpXS5sZW5ndGggKyBuZXdsaW5lTGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgMClcbiAgICAgICAgICAgICAgICByZXR1cm4ge3JvdzogaSwgY29sdW1uOiBpbmRleCArIGxpbmVzW2ldLmxlbmd0aCArIG5ld2xpbmVMZW5ndGh9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7cm93OiBsLTEsIGNvbHVtbjogaW5kZXggKyBsaW5lc1tsLTFdLmxlbmd0aCArIG5ld2xpbmVMZW5ndGh9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBge3JvdywgY29sdW1ufWAgcG9zaXRpb24gaW4gYSBkb2N1bWVudCB0byB0aGUgY2hhcmFjdGVyJ3MgaW5kZXguXG4gICAgICpcbiAgICAgKiBJbmRleCByZWZlcnMgdG8gdGhlIFwiYWJzb2x1dGUgcG9zaXRpb25cIiBvZiBhIGNoYXJhY3RlciBpbiB0aGUgZG9jdW1lbnQuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqIHZhciB4ID0gMDsgLy8gMTAgY2hhcmFjdGVycywgcGx1cyBvbmUgZm9yIG5ld2xpbmVcbiAgICAgKiB2YXIgeSA9IC0xO1xuICAgICAqIGBgYFxuICAgICAqIFxuICAgICAqIEhlcmUsIGB5YCBpcyBhbiBpbmRleCAxNTogMTEgY2hhcmFjdGVycyBmb3IgdGhlIGZpcnN0IHJvdywgYW5kIDUgY2hhcmFjdGVycyB1bnRpbCBgeWAgaW4gdGhlIHNlY29uZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvcyBUaGUgYHtyb3csIGNvbHVtbn1gIHRvIGNvbnZlcnRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0Um93PTBdIFRoZSByb3cgZnJvbSB3aGljaCB0byBzdGFydCB0aGUgY29udmVyc2lvblxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBpbmRleCBwb3NpdGlvbiBpbiB0aGUgZG9jdW1lbnRcbiAgICAgKi9cbiAgICBwb3NpdGlvblRvSW5kZXgocG9zLCBzdGFydFJvdykge1xuICAgICAgICB2YXIgbGluZXMgPSB0aGlzLiRsaW5lcyB8fCB0aGlzLmdldEFsbExpbmVzKCk7XG4gICAgICAgIHZhciBuZXdsaW5lTGVuZ3RoID0gdGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyKCkubGVuZ3RoO1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgcm93ID0gTWF0aC5taW4ocG9zLnJvdywgbGluZXMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0Um93IHx8IDA7IGkgPCByb3c7ICsraSlcbiAgICAgICAgICAgIGluZGV4ICs9IGxpbmVzW2ldLmxlbmd0aCArIG5ld2xpbmVMZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIGluZGV4ICsgcG9zLmNvbHVtbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTcGxpdHMgYSBzdHJpbmcgb2YgdGV4dCBvbiBhbnkgbmV3bGluZSAoYFxcbmApIG9yIGNhcnJpYWdlLXJldHVybiAoYFxccmApIGNoYXJhY3RlcnMuXG4gICAgICpcbiAgICAgKiBAbWV0aG9kICRzcGxpdFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIHdvcmsgd2l0aFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmdbXX0gQSBTdHJpbmcgYXJyYXksIHdpdGggZWFjaCBpbmRleCBjb250YWluaW5nIGEgcGllY2Ugb2YgdGhlIG9yaWdpbmFsIGB0ZXh0YCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiovXG4gICAgJHNwbGl0KHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRleHQuc3BsaXQoL1xcclxcbnxcXHJ8XFxuLyk7XG4gICAgfVxufVxuXG5Eb2N1bWVudC5wcm90b3R5cGUuJGF1dG9OZXdMaW5lID0gXCJcIjtcbkRvY3VtZW50LnByb3RvdHlwZS4kbmV3TGluZU1vZGUgPSBcImF1dG9cIjtcblxub29wLmltcGxlbWVudChEb2N1bWVudC5wcm90b3R5cGUsIEV2ZW50RW1pdHRlcik7XG5cbmV4cG9ydHMuRG9jdW1lbnQgPSBEb2N1bWVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/document.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/edit_session.js":
/*!***************************************************!*\
  !*** ./node_modules/ace-code/src/edit_session.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./layer/font_metrics\").FontMetrics} FontMetrics\n * @typedef {import(\"./edit_session/fold_line\").FoldLine} FoldLine\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n * @typedef {import(\"../ace-internal\").Ace.Delta} Delta\n * @typedef {import(\"../ace-internal\").Ace.IRange} IRange\n * @typedef {import(\"../ace-internal\").Ace.SyntaxMode} SyntaxMode\n * @typedef {import(\"../ace-internal\").Ace.LineWidget} LineWidget\n */\n\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar BidiHandler = (__webpack_require__(/*! ./bidihandler */ \"./node_modules/ace-code/src/bidihandler.js\").BidiHandler);\nvar config = __webpack_require__(/*! ./config */ \"./node_modules/ace-code/src/config.js\");\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nvar Selection = (__webpack_require__(/*! ./selection */ \"./node_modules/ace-code/src/selection.js\").Selection);\nvar TextMode = (__webpack_require__(/*! ./mode/text */ \"./node_modules/ace-code/src/mode/text.js\").Mode);\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar LineWidgets = (__webpack_require__(/*! ./line_widgets */ \"./node_modules/ace-code/src/line_widgets.js\").LineWidgets);\nvar Document = (__webpack_require__(/*! ./document */ \"./node_modules/ace-code/src/document.js\").Document);\nvar BackgroundTokenizer = (__webpack_require__(/*! ./background_tokenizer */ \"./node_modules/ace-code/src/background_tokenizer.js\").BackgroundTokenizer);\nvar SearchHighlight = (__webpack_require__(/*! ./search_highlight */ \"./node_modules/ace-code/src/search_highlight.js\").SearchHighlight);\nvar UndoManager = (__webpack_require__(/*! ./undomanager */ \"./node_modules/ace-code/src/undomanager.js\").UndoManager);\n\n/**\n * @typedef TextMode\n * @type {SyntaxMode}\n */\n\n/**\n * Stores all the data about [[Editor `Editor`]] state providing easy way to change editors state.\n *\n * `EditSession` can be attached to only one [[Document `Document`]]. Same `Document` can be attached to several `EditSession`s.\n **/\nclass EditSession {\n    /**\n     * Sets up a new `EditSession` and associates it with the given `Document` and `Mode`.\n     * @param {Document | String} [text] [If `text` is a `Document`, it associates the `EditSession` with it. Otherwise, a new `Document` is created, with the initial text]{: #textParam}\n     * @param {SyntaxMode} [mode] [The initial language mode to use for the document]{: #modeParam}\n     **/\n    constructor(text, mode) {\n        /**@type {Document}*/this.doc;\n        this.$breakpoints = [];\n        this.$decorations = [];\n        this.$frontMarkers = {};\n        this.$backMarkers = {};\n        this.$markerId = 1;\n        this.$undoSelect = true;\n        this.$editor = null;\n        this.prevOp = {};\n\n        /** @type {FoldLine[]} */\n        this.$foldData = [];\n        this.id = \"session\" + (++EditSession.$uid);\n        this.$foldData.toString = function() {\n            return this.join(\"\\n\");\n        };\n\n        // Set default background tokenizer with Text mode until editor session mode is set\n        this.bgTokenizer = new BackgroundTokenizer((new TextMode()).getTokenizer(), this);\n\n\n        var _self = this;\n        this.bgTokenizer.on(\"update\", function(e) {\n            _self._signal(\"tokenizerUpdate\", e);\n        });\n\n        this.on(\"changeFold\", this.onChangeFold.bind(this));\n        this.$onChange = this.onChange.bind(this);\n\n        if (typeof text != \"object\" || !text.getLine)\n            text = new Document(/**@type{string}*/(text));\n\n        this.setDocument(text);\n\n        this.selection = new Selection(this);\n        this.$onSelectionChange = this.onSelectionChange.bind(this);\n        this.selection.on(\"changeSelection\", this.$onSelectionChange);\n        this.selection.on(\"changeCursor\", this.$onSelectionChange);\n\n        this.$bidiHandler = new BidiHandler(this);\n\n        config.resetOptions(this);\n        this.setMode(mode);\n        config._signal(\"session\", this);\n\n        this.destroyed = false;\n        this.$initOperationListeners();\n    }\n\n    $initOperationListeners() {\n        this.curOp = null;\n        this.on(\"change\", () => {\n            if (!this.curOp) {\n                this.startOperation();\n                this.curOp.selectionBefore = this.$lastSel;\n            }\n            this.curOp.docChanged = true;\n        }, true);\n        this.on(\"changeSelection\", () => {\n            if (!this.curOp) {\n                this.startOperation();\n                this.curOp.selectionBefore = this.$lastSel;\n            }\n            this.curOp.selectionChanged = true;\n        }, true);\n\n        // Fallback mechanism in case current operation doesn't finish more explicitly.\n        // Triggered, for example, when a consumer makes programmatic changes without invoking endOperation afterwards.\n        this.$operationResetTimer = lang.delayedCall(this.endOperation.bind(this, true));\n    }\n\n    /**\n     * Start an Ace operation, which will then batch all the subsequent changes (to either content or selection) under a single atomic operation.\n     * @param {{command?: {name?: string}, args?: any}|undefined} [commandEvent] Optional name for the operation\n     */\n    startOperation(commandEvent) {\n        if (this.curOp) {\n            if (!commandEvent || this.curOp.command) {\n                return;\n            }\n            this.prevOp = this.curOp;\n        }\n        if (!commandEvent) {\n            commandEvent = {};\n        }\n\n        this.$operationResetTimer.schedule();\n        this.curOp = {\n            command: commandEvent.command || {},\n            args: commandEvent.args\n        };\n        this.curOp.selectionBefore = this.selection.toJSON();\n        this._signal(\"startOperation\", commandEvent);\n    }\n\n    /**\n     * End current Ace operation.\n     * Emits \"beforeEndOperation\" event just before clearing everything, where the current operation can be accessed through `curOp` property.\n     * @param {any} e\n     */\n    endOperation(e) {\n        if (this.curOp) {\n            if (e && e.returnValue === false) {\n                this.curOp = null;\n                this._signal(\"endOperation\", e);\n                return;\n            }\n            if (e == true && this.curOp.command && this.curOp.command.name == \"mouse\") {\n                // When current operation is mousedown, we wait for the mouseup to end the operation.\n                // So during a user selection, we would only end the operation when the final selection is known.\n                return;\n            }\n\n            const currentSelection = this.selection.toJSON();\n            this.curOp.selectionAfter = currentSelection;\n            this.$lastSel = this.selection.toJSON();\n            this.getUndoManager().addSelection(currentSelection);\n\n            this._signal(\"beforeEndOperation\");\n            this.prevOp = this.curOp;\n            this.curOp = null;\n            this._signal(\"endOperation\", e);\n        }\n    }\n\n    /**\n     * Sets the `EditSession` to point to a new `Document`. If a `BackgroundTokenizer` exists, it also points to `doc`.\n     *\n     * @param {Document} doc The new `Document` to use\n     *\n     **/\n    setDocument(doc) {\n        if (this.doc)\n            this.doc.off(\"change\", this.$onChange);\n        this.doc = doc;\n        doc.on(\"change\", this.$onChange, true);\n\n        this.bgTokenizer.setDocument(this.getDocument());\n\n        this.resetCaches();\n    }\n\n    /**\n     * Returns the `Document` associated with this session.\n     * @return {Document}\n     **/\n    getDocument() {\n        return this.doc;\n    }\n\n    /**\n     * Get \"widgetManager\" from EditSession\n     * \n     * @returns {LineWidgets} object\n     */\n    get widgetManager() {\n        const widgetManager = new LineWidgets(this);\n        // todo remove the widgetManger assignement from lineWidgets constructor when introducing breaking changes\n        this.widgetManager = widgetManager;\n\n        if (this.$editor)\n            widgetManager.attach(this.$editor);\n        \n        return widgetManager;\n    }\n\n    /**\n     * Set \"widgetManager\" in EditSession\n     * \n     * @returns void\n     */\n    set widgetManager(value) {\n        Object.defineProperty(this, \"widgetManager\", {\n            writable: true, \n            enumerable: true,\n            configurable: true,\n            value: value,\n        });\n    }\n    /**\n     * @param {Number} docRow The row to work with\n     *\n     **/\n    $resetRowCache(docRow) {\n        if (!docRow) {\n            /** @type {number[]} */\n            this.$docRowCache = [];\n            /** @type {number[]} */\n            this.$screenRowCache = [];\n            return;\n        }\n        var l = this.$docRowCache.length;\n        var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;\n        if (l > i) {\n            this.$docRowCache.splice(i, l);\n            this.$screenRowCache.splice(i, l);\n        }\n    }\n\n    $getRowCacheIndex(cacheArray, val) {\n        var low = 0;\n        var hi = cacheArray.length - 1;\n\n        while (low <= hi) {\n            var mid = (low + hi) >> 1;\n            var c = cacheArray[mid];\n\n            if (val > c)\n                low = mid + 1;\n            else if (val < c)\n                hi = mid - 1;\n            else\n                return mid;\n        }\n\n        return low -1;\n    }\n\n    resetCaches() {\n        this.$modified = true;\n        this.$wrapData = [];\n        this.$rowLengthCache = [];\n        this.$resetRowCache(0);\n        if (!this.destroyed)\n            this.bgTokenizer.start(0);\n    }\n\n    /**\n     * @param e\n     * @internal\n     */\n    onChangeFold(e) {\n        var fold = e.data;\n        this.$resetRowCache(fold.start.row);\n    }\n\n    /**\n     *\n     * @param {Delta} delta\n     * @internal\n     */\n    onChange(delta) {\n        this.$modified = true;\n        this.$bidiHandler.onChange(delta);\n        this.$resetRowCache(delta.start.row);\n\n        var removedFolds = this.$updateInternalDataOnChange(delta);\n        if (!this.$fromUndo && this.$undoManager) {\n            if (removedFolds && removedFolds.length) {\n                this.$undoManager.add({\n                    // @ts-expect-error TODO: this action type is missing in the types\n                    action: \"removeFolds\",\n                    folds:  removedFolds\n                }, this.mergeUndoDeltas);\n                this.mergeUndoDeltas = true;\n            }\n            this.$undoManager.add(delta, this.mergeUndoDeltas);\n            this.mergeUndoDeltas = true;\n\n            this.$informUndoManager.schedule();\n        }\n\n        this.bgTokenizer.$updateOnChange(delta);\n        this._signal(\"change\", delta);\n    }\n\n    onSelectionChange() {\n        this._signal(\"changeSelection\");\n    }\n\n    /**\n     * Sets the session text.\n     * @param {String} text The new text to place\n     **/\n    setValue(text) {\n        this.doc.setValue(text);\n        this.selection.moveTo(0, 0);\n\n        this.$resetRowCache(0);\n        this.setUndoManager(this.$undoManager);\n        this.getUndoManager().reset();\n    }\n\n     /**\n     * Returns a new instance of EditSession with state from JSON.\n     * @method fromJSON\n     * @param {string|object} session The EditSession state.\n     * @returns {EditSession}\n     */\n    static fromJSON(session) {\n        if (typeof session == \"string\")\n            session = JSON.parse(session);\n        const undoManager = new UndoManager();\n        undoManager.$undoStack = session.history.undo;\n        undoManager.$redoStack = session.history.redo;\n        undoManager.mark = session.history.mark;\n        undoManager.$rev = session.history.rev;\n\n        const editSession = new EditSession(session.value);\n        session.folds.forEach(function(fold) {\n          editSession.addFold(\"...\", Range.fromPoints(fold.start, fold.end));\n        });\n        editSession.setAnnotations(session.annotations);\n        editSession.setBreakpoints(session.breakpoints);\n        editSession.setMode(session.mode);\n        editSession.setScrollLeft(session.scrollLeft);\n        editSession.setScrollTop(session.scrollTop);\n        editSession.setUndoManager(undoManager);\n        editSession.selection.fromJSON(session.selection);\n\n        return editSession;\n    }\n\n    /**\n     * Returns the current edit session.\n     * @method toJSON\n     * @returns {Object}\n     */\n    toJSON() {\n        return {\n            annotations: this.$annotations,\n            breakpoints: this.$breakpoints,\n            folds: this.getAllFolds().map(function(fold) {\n                return fold.range;\n            }),\n            history: this.getUndoManager(),\n            mode: this.$mode.$id,\n            scrollLeft: this.$scrollLeft,\n            scrollTop: this.$scrollTop,\n            selection: this.selection.toJSON(),\n            value: this.doc.getValue()\n        };\n    }\n\n    /**\n     * Returns the current [[Document `Document`]] as a string.\n     * @method toString\n     * @returns {String}\n     * @alias EditSession.getValue\n     *\n     **/\n    toString() {\n        return this.doc.getValue();\n    }\n\n    /**\n     * Returns selection object.\n     * @returns {Selection}\n     **/\n    getSelection() {\n        return this.selection;\n    }\n\n    /**\n     * {:BackgroundTokenizer.getState}\n     * @param {Number} row The row to start at\n     * @returns {string | string[]}\n     * @related BackgroundTokenizer.getState\n     **/\n    getState(row) {\n        return this.bgTokenizer.getState(row);\n    }\n\n    /**\n     * Starts tokenizing at the row indicated. Returns a list of objects of the tokenized rows.\n     * @param {Number} row The row to start at\n     * @returns {import(\"../ace-internal\").Ace.Token[]}\n     **/\n    getTokens(row) {\n        return this.bgTokenizer.getTokens(row);\n    }\n\n    /**\n     * Returns an object indicating the token at the current row. The object has two properties: `index` and `start`.\n     * @param {Number} row The row number to retrieve from\n     * @param {Number} column The column number to retrieve from\n     * @returns {import(\"../ace-internal\").Ace.Token}\n     *\n     **/\n    getTokenAt(row, column) {\n        var tokens = this.bgTokenizer.getTokens(row);\n        var token, c = 0;\n        if (column == null) {\n            var i = tokens.length - 1;\n            c = this.getLine(row).length;\n        } else {\n            for (var i = 0; i < tokens.length; i++) {\n                c += tokens[i].value.length;\n                if (c >= column)\n                    break;\n            }\n        }\n        token = tokens[i];\n        if (!token)\n            return null;\n        token.index = i;\n        token.start = c - token.value.length;\n        return token;\n    }\n\n    /**\n     * Sets the undo manager.\n     * @param {UndoManager} undoManager The new undo manager\n     **/\n    setUndoManager(undoManager) {\n        this.$undoManager = undoManager;\n\n        if (this.$informUndoManager)\n            this.$informUndoManager.cancel();\n\n        if (undoManager) {\n            var self = this;\n            undoManager.addSession(this);\n            this.$syncInformUndoManager = function() {\n                self.$informUndoManager.cancel();\n                self.mergeUndoDeltas = false;\n            };\n            this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);\n        } else {\n            this.$syncInformUndoManager = function() {};\n        }\n    }\n\n    /**\n     * starts a new group in undo history\n     **/\n    markUndoGroup() {\n        if (this.$syncInformUndoManager)\n            this.$syncInformUndoManager();\n    }\n\n    /**\n     * Returns the current undo manager.\n     * @returns {UndoManager}\n     **/\n    getUndoManager() {\n        // @ts-ignore\n        return this.$undoManager || this.$defaultUndoManager;\n    }\n\n    /**\n     * Returns the current value for tabs. If the user is using soft tabs, this will be a series of spaces (defined by [[EditSession.getTabSize `getTabSize()`]]); otherwise it's simply `'\\t'`.\n     * @returns {String}\n     **/\n    getTabString() {\n        if (this.getUseSoftTabs()) {\n            return lang.stringRepeat(\" \", this.getTabSize());\n        } else {\n            return \"\\t\";\n        }\n    }\n\n    /**\n     * Pass `true` to enable the use of soft tabs. Soft tabs means you're using spaces instead of the tab character (`'\\t'`).\n     * @param {Boolean} val Value indicating whether or not to use soft tabs\n     **/\n    setUseSoftTabs(val) {\n        this.setOption(\"useSoftTabs\", val);\n    }\n\n    /**\n     * Returns `true` if soft tabs are being used, `false` otherwise.\n     * @returns {Boolean}\n     **/\n    getUseSoftTabs() {\n        // todo might need more general way for changing settings from mode, but this is ok for now\n        return this.$useSoftTabs && !this.$mode.$indentWithTabs;\n    }\n    /**\n     * Set the number of spaces that define a soft tab; for example, passing in `4` transforms the soft tabs to be equivalent to four spaces. This function also emits the `changeTabSize` event.\n     * @param {Number} tabSize The new tab size\n     **/\n    setTabSize(tabSize) {\n        this.setOption(\"tabSize\", tabSize);\n    }\n    /**\n     * Returns the current tab size.\n     * @return {number}\n     **/\n    getTabSize() {\n        return this.$tabSize;\n    }\n\n    /**\n     * Returns `true` if the character at the position is a soft tab.\n     * @param {Point} position The position to check\n     **/\n    isTabStop(position) {\n        return this.$useSoftTabs && (position.column % this.$tabSize === 0);\n    }\n\n    /**\n     * Set whether keyboard navigation of soft tabs moves the cursor within the soft tab, rather than over\n     * @param {Boolean} navigateWithinSoftTabs Value indicating whether or not to navigate within soft tabs\n     **/\n    setNavigateWithinSoftTabs(navigateWithinSoftTabs) {\n        this.setOption(\"navigateWithinSoftTabs\", navigateWithinSoftTabs);\n    }\n    /**\n     * Returns `true` if keyboard navigation moves the cursor within soft tabs, `false` if it moves the cursor over soft tabs.\n     * @returns {Boolean}\n     **/\n    getNavigateWithinSoftTabs() {\n        return this.$navigateWithinSoftTabs;\n    }\n\n    /**\n     * Pass in `true` to enable overwrites in your session, or `false` to disable.\n     *\n     * If overwrites is enabled, any text you enter will type over any text after it. If the value of `overwrite` changes, this function also emits the `changeOverwrite` event.\n     *\n     * @param {Boolean} overwrite Defines whether or not to set overwrites\n     *\n     **/\n    setOverwrite(overwrite) {\n        this.setOption(\"overwrite\", overwrite);\n    }\n\n    /**\n     * Returns `true` if overwrites are enabled; `false` otherwise.\n     **/\n    getOverwrite() {\n        return this.$overwrite;\n    }\n\n    /**\n     * Sets the value of overwrite to the opposite of whatever it currently is.\n     **/\n    toggleOverwrite() {\n        this.setOverwrite(!this.$overwrite);\n    }\n\n    /**\n     * Adds `className` to the `row`, to be used for CSS stylings and whatnot.\n     * @param {Number} row The row number\n     * @param {String} className The class to add\n     **/\n    addGutterDecoration(row, className) {\n        if (!this.$decorations[row])\n            this.$decorations[row] = \"\";\n        this.$decorations[row] += \" \" + className;\n        this._signal(\"changeBreakpoint\", {});\n    }\n\n    /**\n     * Removes `className` from the `row`.\n     * @param {Number} row The row number\n     * @param {String} className The class to add\n     **/\n    removeGutterDecoration(row, className) {\n        this.$decorations[row] = (this.$decorations[row] || \"\").replace(\" \" + className, \"\");\n        this._signal(\"changeBreakpoint\", {});\n    }\n\n    /**\n     * Returns an array of strings, indicating the breakpoint class (if any) applied to each row.\n     * @returns {String[]}\n     **/\n    getBreakpoints() {\n        return this.$breakpoints;\n    }\n\n    /**\n     * Sets a breakpoint on every row number given by `rows`. This function also emites the `'changeBreakpoint'` event.\n     * @param {number[]} rows An array of row indices\n     **/\n    setBreakpoints(rows) {\n        this.$breakpoints = [];\n        for (var i=0; i<rows.length; i++) {\n            this.$breakpoints[rows[i]] = \"ace_breakpoint\";\n        }\n        this._signal(\"changeBreakpoint\", {});\n    }\n\n    /**\n     * Removes all breakpoints on the rows. This function also emits the `'changeBreakpoint'` event.\n     **/\n    clearBreakpoints() {\n        this.$breakpoints = [];\n        this._signal(\"changeBreakpoint\", {});\n    }\n\n    /**\n     * Sets a breakpoint on the row number given by `row`. This function also emits the `'changeBreakpoint'` event.\n     * @param {Number} row A row index\n     * @param {String} className Class of the breakpoint\n     **/\n    setBreakpoint(row, className) {\n        if (className === undefined)\n            className = \"ace_breakpoint\";\n        if (className)\n            this.$breakpoints[row] = className;\n        else\n            delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    }\n\n    /**\n     * Removes a breakpoint on the row number given by `row`. This function also emits the `'changeBreakpoint'` event.\n     * @param {Number} row A row index\n     **/\n    clearBreakpoint(row) {\n        delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    }\n\n    /**\n     * Adds a new marker to the given `Range`. If `inFront` is `true`, a front marker is defined, and the `'changeFrontMarker'` event fires; otherwise, the `'changeBackMarker'` event fires.\n     * @param {Range} range Define the range of the marker\n     * @param {String} clazz Set the CSS class for the marker\n     * @param {import(\"../ace-internal\").Ace.MarkerRenderer | \"fullLine\" | \"screenLine\" | \"text\" | \"line\"} [type] Identify the renderer type of the marker. If string provided, corresponding built-in renderer is used. Supported string types are \"fullLine\", \"screenLine\", \"text\" or \"line\". If a Function is provided, that Function is used as renderer.\n     * @param {Boolean} [inFront] Set to `true` to establish a front marker\n     *\n     * @return {Number} The new marker id\n     **/\n    addMarker(range, clazz, type, inFront) {\n        var id = this.$markerId++;\n\n        var marker = {\n            range : range,\n            type : type || \"line\",\n            renderer: typeof type == \"function\" ? type : null,\n            clazz : clazz,\n            inFront: !!inFront,\n            id: id\n        };\n\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        } else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n\n        return id;\n    }\n\n    /**\n     * Adds a dynamic marker to the session.\n     * @param {import(\"../ace-internal\").Ace.MarkerLike} marker object with update method\n     * @param {Boolean} [inFront] Set to `true` to establish a front marker\n     *\n     * @return {import(\"../ace-internal\").Ace.MarkerLike} The added marker\n     **/\n    addDynamicMarker(marker, inFront) {\n        if (!marker.update)\n            return;\n        var id = this.$markerId++;\n        marker.id = id;\n        marker.inFront = !!inFront;\n\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        } else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n\n        return marker;\n    }\n\n    /**\n     * Removes the marker with the specified ID. If this marker was in front, the `'changeFrontMarker'` event is emitted. If the marker was in the back, the `'changeBackMarker'` event is emitted.\n     * @param {Number} markerId A number representing a marker\n     **/\n    removeMarker(markerId) {\n        var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];\n        if (!marker)\n            return;\n\n        var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;\n        delete (markers[markerId]);\n        this._signal(marker.inFront ? \"changeFrontMarker\" : \"changeBackMarker\");\n    }\n\n    /**\n     * Returns an object containing all of the markers, either front or back.\n     * @param {Boolean} [inFront] If `true`, indicates you only want front markers; `false` indicates only back markers\n     *\n     * @returns {{[id: number]: import(\"../ace-internal\").Ace.MarkerLike}}\n     **/\n    getMarkers(inFront) {\n        return inFront ? this.$frontMarkers : this.$backMarkers;\n    }\n\n    /**\n     * @param {RegExp} re\n     */\n    highlight(re) {\n        if (!this.$searchHighlight) {\n            var highlight = new SearchHighlight(null, \"ace_selected-word\", \"text\");\n            this.$searchHighlight = this.addDynamicMarker(highlight);\n        }\n        this.$searchHighlight.setRegexp(re);\n    }\n\n    /**\n     * experimental\n     * @param {number} startRow\n     * @param {number} endRow\n     * @param {string} clazz\n     * @param {boolean} [inFront]\n     * @return {Range}\n     */\n    highlightLines(startRow, endRow, clazz, inFront) {\n        if (typeof endRow != \"number\") {\n            clazz = endRow;\n            endRow = startRow;\n        }\n        if (!clazz)\n            clazz = \"ace_step\";\n\n        var range = new Range(startRow, 0, endRow, Infinity);\n        range.id = this.addMarker(range, clazz, \"fullLine\", inFront);\n        return range;\n    }\n\n    /*\n     * Error:\n     *  {\n     *    row: 12,\n     *    column: 2, //can be undefined\n     *    text: \"Missing argument\",\n     *    type: \"error\" // or \"warning\" or \"info\"\n     *  }\n     */\n    /**\n     * Sets annotations for the `EditSession`. This functions emits the `'changeAnnotation'` event.\n     * @param {import(\"../ace-internal\").Ace.Annotation[]} annotations A list of annotations\n     **/\n    setAnnotations(annotations) {\n        this.$annotations = annotations;\n        this._signal(\"changeAnnotation\", {});\n    }\n\n    /**\n     * Returns the annotations for the `EditSession`.\n     * @returns {import(\"../ace-internal\").Ace.Annotation[]}\n     **/\n    getAnnotations() {\n        return this.$annotations || [];\n    }\n\n    /**\n     * Clears all the annotations for this session. This function also triggers the `'changeAnnotation'` event.\n     **/\n    clearAnnotations() {\n        this.setAnnotations([]);\n    }\n\n    /**\n     * If `text` contains either the newline (`\\n`) or carriage-return ('\\r') characters, `$autoNewLine` stores that value.\n     * @param {String} text A block of text\n     *\n     **/\n    $detectNewLine(text) {\n        var match = text.match(/^.*?(\\r?\\n)/m);\n        if (match) {\n            this.$autoNewLine = match[1];\n        } else {\n            this.$autoNewLine = \"\\n\";\n        }\n    }\n\n    /**\n     * Given a starting row and column, this method returns the `Range` of the first word boundary it finds.\n     * @param {Number} row The row to start at\n     * @param {Number} column The column to start at\n     *\n     * @returns {Range}\n     **/\n    getWordRange(row, column) {\n        var line = this.getLine(row);\n\n        var inToken = false;\n        if (column > 0)\n            inToken = !!line.charAt(column - 1).match(this.tokenRe);\n\n        if (!inToken)\n            inToken = !!line.charAt(column).match(this.tokenRe);\n\n        if (inToken)\n            var re = this.tokenRe;\n        else if (/^\\s+$/.test(line.slice(column-1, column+1)))\n            var re = /\\s/;\n        else\n            var re = this.nonTokenRe;\n\n        var start = column;\n        if (start > 0) {\n            do {\n                start--;\n            }\n            while (start >= 0 && line.charAt(start).match(re));\n            start++;\n        }\n\n        var end = column;\n        while (end < line.length && line.charAt(end).match(re)) {\n            end++;\n        }\n\n        return new Range(row, start, row, end);\n    }\n\n    /**\n     * Gets the range of a word, including its right whitespace.\n     * @param {Number} row The row number to start from\n     * @param {Number} column The column number to start from\n     *\n     * @return {Range}\n     **/\n    getAWordRange(row, column) {\n        var wordRange = this.getWordRange(row, column);\n        var line = this.getLine(wordRange.end.row);\n\n        while (line.charAt(wordRange.end.column).match(/[ \\t]/)) {\n            wordRange.end.column += 1;\n        }\n        return wordRange;\n    }\n\n    /**\n     * {:Document.setNewLineMode.desc}\n     * @param {import(\"../ace-internal\").Ace.NewLineMode} newLineMode {:Document.setNewLineMode.param}\n     *\n     *\n     * @related Document.setNewLineMode\n     **/\n    setNewLineMode(newLineMode) {\n        this.doc.setNewLineMode(newLineMode);\n    }\n\n    /**\n     *\n     * Returns the current new line mode.\n     * @returns {import(\"../ace-internal\").Ace.NewLineMode}\n     * @related Document.getNewLineMode\n     **/\n    getNewLineMode() {\n        return this.doc.getNewLineMode();\n    }\n\n    /**\n     * Identifies if you want to use a worker for the `EditSession`.\n     * @param {Boolean} useWorker Set to `true` to use a worker\n     **/\n    setUseWorker(useWorker) { this.setOption(\"useWorker\", useWorker); }\n\n    /**\n     * Returns `true` if workers are being used.\n     **/\n    getUseWorker() { return this.$useWorker; }\n\n    /**\n     * Reloads all the tokens on the current session. This function calls [[BackgroundTokenizer.start `BackgroundTokenizer.start ()`]] to all the rows; it also emits the `'tokenizerUpdate'` event.\n     * @internal\n     **/\n    onReloadTokenizer(e) {\n        var rows = e.data;\n        this.bgTokenizer.start(rows.first);\n        this._signal(\"tokenizerUpdate\", e);\n    }\n\n    /**\n     * Sets a new text mode for the `EditSession`. This method also emits the `'changeMode'` event. If a [[BackgroundTokenizer `BackgroundTokenizer`]] is set, the `'tokenizerUpdate'` event is also emitted.\n     * @param {SyntaxMode | string} mode Set a new text mode\n     * @param {() => void} [cb] optional callback\n     **/\n    setMode(mode, cb) {\n        if (mode && typeof mode === \"object\") {\n            if (mode.getTokenizer)\n                return this.$onChangeMode(mode);\n            var options = mode;\n            var path = options.path;\n        } else {\n            path = /**@type{string}*/(mode) || \"ace/mode/text\";\n        }\n\n        // this is needed if ace isn't on require path (e.g tests in node)\n        if (!this.$modes[\"ace/mode/text\"])\n            this.$modes[\"ace/mode/text\"] = new TextMode();\n\n        if (this.$modes[path] && !options) {\n            this.$onChangeMode(this.$modes[path]);\n            cb && cb();\n            return;\n        }\n        // load on demand\n        this.$modeId = path;\n        config.loadModule([\"mode\", path], function(m) {\n            if (this.$modeId !== path)\n                return cb && cb();\n            if (this.$modes[path] && !options) {\n                this.$onChangeMode(this.$modes[path]);\n            } else if (m && m.Mode) {\n                m = new m.Mode(options);\n                if (!options) {\n                    this.$modes[path] = m;\n                    m.$id = path;\n                }\n                this.$onChangeMode(m);\n            }\n            cb && cb();\n        }.bind(this));\n\n        // set mode to text until loading is finished\n        if (!this.$mode)\n            this.$onChangeMode(this.$modes[\"ace/mode/text\"], true);\n    }\n\n    /**\n     * @param mode\n     * @param [$isPlaceholder]\n     */\n    $onChangeMode(mode, $isPlaceholder) {\n        if (!$isPlaceholder)\n            this.$modeId = mode.$id;\n        if (this.$mode === mode)\n            return;\n\n        var oldMode = this.$mode;\n        this.$mode = mode;\n\n        this.$stopWorker();\n\n        if (this.$useWorker)\n            this.$startWorker();\n\n        var tokenizer = mode.getTokenizer();\n\n        if(tokenizer.on !== undefined) {\n            var onReloadTokenizer = this.onReloadTokenizer.bind(this);\n            tokenizer.on(\"update\", onReloadTokenizer);\n        }\n\n        this.bgTokenizer.setTokenizer(tokenizer);\n        this.bgTokenizer.setDocument(this.getDocument());\n\n        /**@type {RegExp}*/\n        this.tokenRe = mode.tokenRe;\n        /**@type {RegExp}*/\n        this.nonTokenRe = mode.nonTokenRe;\n\n\n        if (!$isPlaceholder) {\n            // experimental method, used by c9 findiniles\n            if (mode.attachToSession)\n                mode.attachToSession(this);\n            this.$options.wrapMethod.set.call(this, this.$wrapMethod);\n            this.$setFolding(mode.foldingRules);\n            this.bgTokenizer.start(0);\n            this._emit(\"changeMode\", {oldMode: oldMode, mode: mode});\n        }\n    }\n\n    $stopWorker() {\n        if (this.$worker) {\n            this.$worker.terminate();\n            this.$worker = null;\n        }\n    }\n\n    $startWorker() {\n        try {\n            this.$worker = this.$mode.createWorker(this);\n        } catch (e) {\n            config.warn(\"Could not load worker\", e);\n            this.$worker = null;\n        }\n    }\n\n    /**\n     * Returns the current text mode.\n     * @returns {TextMode} The current text mode\n     **/\n    getMode() {\n        return this.$mode;\n    }\n\n    /**\n     * This function sets the scroll top value. It also emits the `'changeScrollTop'` event.\n     * @param {Number} scrollTop The new scroll top value\n     **/\n    setScrollTop(scrollTop) {\n        // TODO: should we force integer lineheight instead? scrollTop = Math.round(scrollTop);\n        if (this.$scrollTop === scrollTop || isNaN(scrollTop))\n            return;\n\n        this.$scrollTop = scrollTop;\n        this._signal(\"changeScrollTop\", scrollTop);\n    }\n\n    /**\n     * [Returns the value of the distance between the top of the editor and the topmost part of the visible content.]{: #EditSession.getScrollTop}\n     * @returns {Number}\n     **/\n    getScrollTop() {\n        return this.$scrollTop;\n    }\n\n    /**\n     * [Sets the value of the distance between the left of the editor and the leftmost part of the visible content.]{: #EditSession.setScrollLeft}\n     * @param {number} scrollLeft\n     */\n    setScrollLeft(scrollLeft) {\n        // scrollLeft = Math.round(scrollLeft);\n        if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))\n            return;\n\n        this.$scrollLeft = scrollLeft;\n        this._signal(\"changeScrollLeft\", scrollLeft);\n    }\n\n    /**\n     * [Returns the value of the distance between the left of the editor and the leftmost part of the visible content.]{: #EditSession.getScrollLeft}\n     * @returns {Number}\n     **/\n    getScrollLeft() {\n        return this.$scrollLeft;\n    }\n\n    /**\n     * Returns the width of the screen.\n     * @returns {Number}\n     **/\n    getScreenWidth() {\n        this.$computeWidth();\n        if (this.lineWidgets)\n            return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);\n        return this.screenWidth;\n    }\n\n    /**\n     * @return {number}\n     */\n    getLineWidgetMaxWidth() {\n        if (this.lineWidgetsWidth != null) return this.lineWidgetsWidth;\n        var width = 0;\n        this.lineWidgets.forEach(function(w) {\n            if (w && w.screenWidth > width)\n                width = w.screenWidth;\n        });\n        return this.lineWidgetWidth = width;\n    }\n\n    /**\n     * @param {boolean} [force]\n     */\n    $computeWidth(force) {\n        if (this.$modified || force) {\n            this.$modified = false;\n\n            if (this.$useWrapMode)\n                return this.screenWidth = this.$wrapLimit;\n\n            var lines = this.doc.getAllLines();\n            var cache = this.$rowLengthCache;\n            var longestScreenLine = 0;\n            var foldIndex = 0;\n            var foldLine = this.$foldData[foldIndex];\n            var foldStart = foldLine ? foldLine.start.row : Infinity;\n            var len = lines.length;\n\n            for (var i = 0; i < len; i++) {\n                if (i > foldStart) {\n                    i = foldLine.end.row + 1;\n                    if (i >= len)\n                        break;\n                    foldLine = this.$foldData[foldIndex++];\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n\n                if (cache[i] == null)\n                    cache[i] = this.$getStringScreenWidth(lines[i])[0];\n\n                if (cache[i] > longestScreenLine)\n                    longestScreenLine = cache[i];\n            }\n            this.screenWidth = longestScreenLine;\n        }\n    }\n\n    /**\n     * Returns a verbatim copy of the given line as it is in the document\n     * @param {Number} row The row to retrieve from\n     * @returns {String}\n     **/\n    getLine(row) {\n        return this.doc.getLine(row);\n    }\n\n    /**\n     * Returns an array of strings of the rows between `firstRow` and `lastRow`. This function is inclusive of `lastRow`.\n     * @param {Number} firstRow The first row index to retrieve\n     * @param {Number} lastRow The final row index to retrieve\n     *\n     * @returns {String[]}\n     *\n     **/\n    getLines(firstRow, lastRow) {\n        return this.doc.getLines(firstRow, lastRow);\n    }\n\n    /**\n     * Returns the number of rows in the document.\n     * @returns {Number}\n     **/\n    getLength() {\n        return this.doc.getLength();\n    }\n\n    /**\n     * {:Document.getTextRange.desc}\n     * @param {IRange} [range] The range to work with\n     *\n     * @returns {String}\n     **/\n    getTextRange(range) {\n        return this.doc.getTextRange(range || this.selection.getRange());\n    }\n\n    /**\n     * Inserts a block of `text` and the indicated `position`.\n     * @param {Point} position The position {row, column} to start inserting at\n     * @param {String} text A chunk of text to insert\n     * @returns {Point} The position of the last line of `text`. If the length of `text` is 0, this function simply returns `position`.\n     **/\n    insert(position, text) {\n        return this.doc.insert(position, text);\n    }\n\n    /**\n     * Removes the `range` from the document.\n     * @param {IRange} range A specified Range to remove\n     * @returns {Point} The new `start` property of the range, which contains `startRow` and `startColumn`. If `range` is empty, this function returns the unmodified value of `range.start`.\n     **/\n    remove(range) {\n        return this.doc.remove(range);\n    }\n\n    /**\n     * Removes a range of full lines. This method also triggers the `'change'` event.\n     * @param {Number} firstRow The first row to be removed\n     * @param {Number} lastRow The last row to be removed\n     * @returns {String[]} Returns all the removed lines.\n     *\n     * @related Document.removeFullLines\n     *\n     **/\n    removeFullLines(firstRow, lastRow){\n        return this.doc.removeFullLines(firstRow, lastRow);\n    }\n\n    /**\n     * Reverts previous changes to your document.\n     * @param {Delta[]} deltas An array of previous changes\n     * @param {Boolean} [dontSelect] [If `true`, doesn't select the range of where the change occured]{: #dontSelect}\n     **/\n    undoChanges(deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n\n        this.$fromUndo = true;\n        for (var i = deltas.length - 1; i != -1; i--) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.revertDelta(delta);\n            } else if (delta.folds) {\n                this.addFolds(delta.folds);\n            }\n        }\n        if (!dontSelect && this.$undoSelect) {\n            //@ts-expect-error TODO: potential wrong property\n            if (deltas.selectionBefore)\n                //@ts-expect-error TODO: potential wrong property\n                this.selection.fromJSON(deltas.selectionBefore);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, true));\n        }\n        this.$fromUndo = false;\n    }\n\n    /**\n     * Re-implements a previously undone change to your document.\n     * @param {Delta[]} deltas An array of previous changes\n     * @param {Boolean} [dontSelect] {:dontSelect}\n     **/\n    redoChanges(deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n\n        this.$fromUndo = true;\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.$safeApplyDelta(delta);\n            }\n        }\n\n        if (!dontSelect && this.$undoSelect) {\n            //@ts-expect-error TODO: potential wrong property\n            if (deltas.selectionAfter)\n                //@ts-expect-error TODO: potential wrong property\n                this.selection.fromJSON(deltas.selectionAfter);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, false));\n        }\n        this.$fromUndo = false;\n    }\n\n    /**\n     * Enables or disables highlighting of the range where an undo occurred.\n     * @param {Boolean} enable If `true`, selects the range of the reinserted change\n     *\n     **/\n    setUndoSelect(enable) {\n        this.$undoSelect = enable;\n    }\n\n    /**\n     *\n     * @param {Delta[]} deltas\n     * @param {boolean} [isUndo]\n     * @return {Range}\n     */\n    $getUndoSelection(deltas, isUndo) {\n        function isInsert(delta) {\n            return isUndo ? delta.action !== \"insert\" : delta.action === \"insert\";\n        }\n\n        var range, point;\n\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (!delta.start) continue; // skip folds\n            if (!range) {\n                if (isInsert(delta)) {\n                    range = Range.fromPoints(delta.start, delta.end);\n                } else {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n                continue;\n            }\n\n            if (isInsert(delta)) {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range.setStart(point);\n                }\n                point = delta.end;\n                if (range.compare(point.row, point.column) == 1) {\n                    range.setEnd(point);\n                }\n            } else {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n            }\n        }\n        return range;\n    }\n\n    /**\n     * Replaces a range in the document with the new `text`.\n     *\n     * @param {IRange} range A specified Range to replace\n     * @param {String} text The new text to use as a replacement\n     * @returns {Point} An object containing the final row and column, like this:\n     * ```\n     * {row: endRow, column: 0}\n     * ```\n     * If the text and range are empty, this function returns an object containing the current `range.start` value.\n     * If the text is the exact same as what currently exists, this function returns an object containing the current `range.end` value.\n     *\n     * @related Document.replace\n     **/\n    replace(range, text) {\n        return this.doc.replace(range, text);\n    }\n\n    /**\n     * Moves a range of text from the given range to the given position. `toPosition` is an object that looks like this:\n     *  ```json\n     *    { row: newRowLocation, column: newColumnLocation }\n     *  ```\n     * @param {Range} fromRange The range of text you want moved within the document\n     * @param {Point} toPosition The location (row and column) where you want to move the text to\n     * @param {boolean} [copy]\n     * @returns {Range} The new range where the text was moved to.\n     **/\n    moveText(fromRange, toPosition, copy) {\n        var text = this.getTextRange(fromRange);\n        var folds = this.getFoldsInRange(fromRange);\n\n        var toRange = Range.fromPoints(toPosition, toPosition);\n        if (!copy) {\n            this.remove(fromRange);\n            var rowDiff = fromRange.start.row - fromRange.end.row;\n            var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;\n            if (collDiff) {\n                if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)\n                    toRange.start.column += collDiff;\n                if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)\n                    toRange.end.column += collDiff;\n            }\n            if (rowDiff && toRange.start.row >= fromRange.end.row) {\n                toRange.start.row += rowDiff;\n                toRange.end.row += rowDiff;\n            }\n        }\n\n        toRange.end = this.insert(toRange.start, text);\n        if (folds.length) {\n            var oldStart = fromRange.start;\n            var newStart = toRange.start;\n            var rowDiff = newStart.row - oldStart.row;\n            var collDiff = newStart.column - oldStart.column;\n            this.addFolds(folds.map(function(x) {\n                x = x.clone();\n                if (x.start.row == oldStart.row)\n                    x.start.column += collDiff;\n                if (x.end.row == oldStart.row)\n                    x.end.column += collDiff;\n                x.start.row += rowDiff;\n                x.end.row += rowDiff;\n                return x;\n            }));\n        }\n\n        return toRange;\n    }\n\n    /**\n     * Indents all the rows, from `startRow` to `endRow` (inclusive), by prefixing each row with the token in `indentString`.\n     *\n     * If `indentString` contains the `'\\t'` character, it's replaced by whatever is defined by [[EditSession.getTabString `getTabString()`]].\n     * @param {Number} startRow Starting row\n     * @param {Number} endRow Ending row\n     * @param {String} indentString The indent token\n     **/\n    indentRows(startRow, endRow, indentString) {\n        indentString = indentString.replace(/\\t/g, this.getTabString());\n        for (var row=startRow; row<=endRow; row++)\n            this.doc.insertInLine({row: row, column: 0}, indentString);\n    }\n\n    /**\n     * Outdents all the rows defined by the `start` and `end` properties of `range`.\n     * @param {Range} range A range of rows\n     **/\n    outdentRows(range) {\n        var rowRange = range.collapseRows();\n        var deleteRange = new Range(0, 0, 0, 0);\n        var size = this.getTabSize();\n\n        for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {\n            var line = this.getLine(i);\n\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            for (var j = 0; j < size; ++j)\n                if (line.charAt(j) != ' ')\n                    break;\n            if (j < size && line.charAt(j) == '\\t') {\n                deleteRange.start.column = j;\n                deleteRange.end.column = j + 1;\n            } else {\n                deleteRange.start.column = 0;\n                deleteRange.end.column = j;\n            }\n            this.remove(deleteRange);\n        }\n    }\n\n    /**\n     *\n     * @param {number} firstRow\n     * @param {number} lastRow\n     * @param [dir]\n     * @returns {number}\n     */\n    $moveLines(firstRow, lastRow, dir) {\n        firstRow = this.getRowFoldStart(firstRow);\n        lastRow = this.getRowFoldEnd(lastRow);\n        if (dir < 0) {\n            var row = this.getRowFoldStart(firstRow + dir);\n            if (row < 0) return 0;\n            var diff = row-firstRow;\n        } else if (dir > 0) {\n            var row = this.getRowFoldEnd(lastRow + dir);\n            if (row > this.doc.getLength()-1) return 0;\n            var diff = row-lastRow;\n        } else {\n            firstRow = this.$clipRowToDocument(firstRow);\n            lastRow = this.$clipRowToDocument(lastRow);\n            var diff = lastRow - firstRow + 1;\n        }\n\n        var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);\n        var folds = this.getFoldsInRange(range).map(function(x){\n            x = x.clone();\n            x.start.row += diff;\n            x.end.row += diff;\n            return x;\n        });\n\n        var lines = dir == 0\n            ? this.doc.getLines(firstRow, lastRow)\n            : this.doc.removeFullLines(firstRow, lastRow);\n        this.doc.insertFullLines(firstRow+diff, lines);\n        folds.length && this.addFolds(folds);\n        return diff;\n    }\n    /**\n     * Shifts all the lines in the document up one, starting from `firstRow` and ending at `lastRow`.\n     * @param {Number} firstRow The starting row to move up\n     * @param {Number} lastRow The final row to move up\n     * @returns {Number} If `firstRow` is less-than or equal to 0, this function returns 0. Otherwise, on success, it returns -1.\n     **/\n    moveLinesUp(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, -1);\n    }\n\n    /**\n     * Shifts all the lines in the document down one, starting from `firstRow` and ending at `lastRow`.\n     * @param {Number} firstRow The starting row to move down\n     * @param {Number} lastRow The final row to move down\n     * @returns {Number} If `firstRow` is less-than or equal to 0, this function returns 0. Otherwise, on success, it returns -1.\n     **/\n    moveLinesDown(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 1);\n    }\n\n    /**\n     * Duplicates all the text between `firstRow` and `lastRow`.\n     * @param {Number} firstRow The starting row to duplicate\n     * @param {Number} lastRow The final row to duplicate\n     * @returns {Number} Returns the number of new rows added; in other words, `lastRow - firstRow + 1`.\n     **/\n    duplicateLines(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 0);\n    }\n\n    /**\n     * @param {number} row\n     * @returns {number}\n     */\n    $clipRowToDocument(row) {\n        return Math.max(0, Math.min(row, this.doc.getLength()-1));\n    }\n\n    /**\n     * @param {number} row\n     * @param {number} column\n     * @returns {number}\n     */\n    $clipColumnToRow(row, column) {\n        if (column < 0) return 0;\n        return Math.min(this.doc.getLine(row).length, column);\n    }\n\n    /**\n     * @param {number} row\n     * @param {number} column\n     * @returns {Point}\n     */\n    $clipPositionToDocument(row, column) {\n        column = Math.max(0, column);\n\n        if (row < 0) {\n            row = 0;\n            column = 0;\n        } else {\n            var len = this.doc.getLength();\n            if (row >= len) {\n                row = len - 1;\n                column = this.doc.getLine(len-1).length;\n            } else {\n                column = Math.min(this.doc.getLine(row).length, column);\n            }\n        }\n\n        return {\n            row: row,\n            column: column\n        };\n    }\n\n    /**\n     * @param {Range} range\n     * @returns {Range}\n     */\n    $clipRangeToDocument(range) {\n        if (range.start.row < 0) {\n            range.start.row = 0;\n            range.start.column = 0;\n        } else {\n            range.start.column = this.$clipColumnToRow(\n                range.start.row,\n                range.start.column\n            );\n        }\n\n        var len = this.doc.getLength() - 1;\n        if (range.end.row > len) {\n            range.end.row = len;\n            range.end.column = this.doc.getLine(len).length;\n        } else {\n            range.end.column = this.$clipColumnToRow(\n                range.end.row,\n                range.end.column\n            );\n        }\n        return range;\n    }\n\n    /**\n     * Sets whether or not line wrapping is enabled. If `useWrapMode` is different than the current value, the `'changeWrapMode'` event is emitted.\n     * @param {Boolean} useWrapMode Enable (or disable) wrap mode\n     **/\n    setUseWrapMode(useWrapMode) {\n        if (useWrapMode != this.$useWrapMode) {\n            this.$useWrapMode = useWrapMode;\n            this.$modified = true;\n            this.$resetRowCache(0);\n\n            // If wrapMode is activaed, the wrapData array has to be initialized.\n            if (useWrapMode) {\n                var len = this.getLength();\n                this.$wrapData = Array(len);\n                this.$updateWrapData(0, len - 1);\n            }\n\n            this._signal(\"changeWrapMode\");\n        }\n    }\n\n    /**\n     * Returns `true` if wrap mode is being used; `false` otherwise.\n     * @returns {Boolean}\n     **/\n    getUseWrapMode() {\n        return this.$useWrapMode;\n    }\n\n    // Allow the wrap limit to move freely between min and max. Either\n    // parameter can be null to allow the wrap limit to be unconstrained\n    // in that direction. Or set both parameters to the same number to pin\n    // the limit to that value.\n    /**\n     * Sets the boundaries of wrap. Either value can be `null` to have an unconstrained wrap, or, they can be the same number to pin the limit. If the wrap limits for `min` or `max` are different, this method also emits the `'changeWrapMode'` event.\n     * @param {Number} min The minimum wrap value (the left side wrap)\n     * @param {Number} max The maximum wrap value (the right side wrap)\n     **/\n    setWrapLimitRange(min, max) {\n        if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {\n            this.$wrapLimitRange = { min: min, max: max };\n            this.$modified = true;\n            this.$bidiHandler.markAsDirty();\n\n            // This will force a recalculation of the wrap limit\n            if (this.$useWrapMode)\n                this._signal(\"changeWrapMode\");\n        }\n    }\n\n    /**\n     * This should generally only be called by the renderer when a resize is detected.\n     * @param {Number} desiredLimit The new wrap limit\n     * @param [$printMargin]\n     * @returns {Boolean}\n     **/\n    adjustWrapLimit(desiredLimit, $printMargin) {\n        var limits = this.$wrapLimitRange;\n        if (limits.max < 0)\n            limits = {min: $printMargin, max: $printMargin};\n        var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);\n        if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {\n            this.$wrapLimit = wrapLimit;\n            this.$modified = true;\n            if (this.$useWrapMode) {\n                this.$updateWrapData(0, this.getLength() - 1);\n                this.$resetRowCache(0);\n                this._signal(\"changeWrapLimit\");\n            }\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     *\n     * @param {number} wrapLimit\n     * @param {number} [min]\n     * @param {number} [max]\n     * @returns {number}\n     */\n    $constrainWrapLimit(wrapLimit, min, max) {\n        if (min)\n            wrapLimit = Math.max(min, wrapLimit);\n\n        if (max)\n            wrapLimit = Math.min(max, wrapLimit);\n\n        return wrapLimit;\n    }\n\n    /**\n     * Returns the value of wrap limit.\n     * @returns {Number} The wrap limit.\n     **/\n    getWrapLimit() {\n        return this.$wrapLimit;\n    }\n\n    /**\n     * Sets the line length for soft wrap in the editor. Lines will break\n     *  at a minimum of the given length minus 20 chars and at a maximum\n     *  of the given number of chars.\n     * @param {number} limit The maximum line length in chars, for soft wrapping lines.\n     */\n    setWrapLimit(limit) {\n        this.setWrapLimitRange(limit, limit);\n    }\n\n    /**\n     * Returns an object that defines the minimum and maximum of the wrap limit; it looks something like this:\n     *\n     *     { min: wrapLimitRange_min, max: wrapLimitRange_max }\n     *\n     * @returns {{ min: number, max: number }}\n     **/\n    getWrapLimitRange() {\n        // Avoid unexpected mutation by returning a copy\n        return {\n            min : this.$wrapLimitRange.min,\n            max : this.$wrapLimitRange.max\n        };\n    }\n\n    /**\n     * @param {Delta} delta\n     */\n    $updateInternalDataOnChange(delta) {\n        var useWrapMode = this.$useWrapMode;\n        var action = delta.action;\n        var start = delta.start;\n        var end = delta.end;\n        var firstRow = start.row;\n        var lastRow = end.row;\n        var len = lastRow - firstRow;\n        var removedFolds = null;\n\n        this.$updating = true;\n        if (len != 0) {\n            if (action === \"remove\") {\n                this[useWrapMode ? \"$wrapData\" : \"$rowLengthCache\"].splice(firstRow, len);\n\n                var foldLines = this.$foldData;\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n\n                var foldLine = this.getFoldLine(end.row);\n                var idx = 0;\n                if (foldLine) {\n                    foldLine.addRemoveChars(end.row, end.column, start.column - end.column);\n                    foldLine.shiftRow(-len);\n\n                    var foldLineBefore = this.getFoldLine(firstRow);\n                    if (foldLineBefore && foldLineBefore !== foldLine) {\n                        foldLineBefore.merge(foldLine);\n                        foldLine = foldLineBefore;\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= end.row) {\n                        foldLine.shiftRow(-len);\n                    }\n                }\n\n                lastRow = firstRow;\n            } else {\n                var args = Array(len);\n                args.unshift(firstRow, 0);\n                var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache;\n                arr.splice.apply(arr, args);\n\n                // If some new line is added inside of a foldLine, then split\n                // the fold line up.\n                var foldLines = this.$foldData;\n                var foldLine = this.getFoldLine(firstRow);\n                var idx = 0;\n                if (foldLine) {\n                    var cmp = foldLine.range.compareInside(start.row, start.column);\n                    // Inside of the foldLine range. Need to split stuff up.\n                    if (cmp == 0) {\n                        foldLine = foldLine.split(start.row, start.column);\n                        if (foldLine) {\n                            foldLine.shiftRow(len);\n                            foldLine.addRemoveChars(lastRow, 0, end.column - start.column);\n                        }\n                    } else\n                    // Infront of the foldLine but same row. Need to shift column.\n                    if (cmp == -1) {\n                        foldLine.addRemoveChars(firstRow, 0, end.column - start.column);\n                        foldLine.shiftRow(len);\n                    }\n                    // Nothing to do if the insert is after the foldLine.\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= firstRow) {\n                        foldLine.shiftRow(len);\n                    }\n                }\n            }\n        } else {\n            // Realign folds. E.g. if you add some new chars before a fold, the\n            // fold should \"move\" to the right.\n            len = Math.abs(delta.start.column - delta.end.column);\n            if (action === \"remove\") {\n                // Get all the folds in the change range and remove them.\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n\n                len = -len;\n            }\n            var foldLine = this.getFoldLine(firstRow);\n            if (foldLine) {\n                foldLine.addRemoveChars(firstRow, start.column, len);\n            }\n        }\n\n        if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {\n            console.error(\"doc.getLength() and $wrapData.length have to be the same!\");\n        }\n        this.$updating = false;\n\n        if (useWrapMode)\n            this.$updateWrapData(firstRow, lastRow);\n        else\n            this.$updateRowLengthCache(firstRow, lastRow);\n\n        return removedFolds;\n    }\n\n    /**\n     * @param {number} firstRow\n     * @param {number} lastRow\n     */\n    $updateRowLengthCache(firstRow, lastRow) {\n        this.$rowLengthCache[firstRow] = null;\n        this.$rowLengthCache[lastRow] = null;\n    }\n\n    /**\n     * @param {number} firstRow\n     * @param {number} lastRow\n     */\n    $updateWrapData(firstRow, lastRow) {\n        var lines = this.doc.getAllLines();\n        var tabSize = this.getTabSize();\n        var wrapData = this.$wrapData;\n        var wrapLimit = this.$wrapLimit;\n        var tokens;\n        var foldLine;\n\n        var row = firstRow;\n        lastRow = Math.min(lastRow, lines.length - 1);\n        while (row <= lastRow) {\n            foldLine = this.getFoldLine(row, foldLine);\n            if (!foldLine) {\n                tokens = this.$getDisplayTokens(lines[row]);\n                wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row ++;\n            } else {\n                tokens = [];\n                foldLine.walk(function(placeholder, row, column, lastColumn) {\n                        var walkTokens;\n                        if (placeholder != null) {\n                            walkTokens = this.$getDisplayTokens(\n                                            placeholder, tokens.length);\n                            walkTokens[0] = PLACEHOLDER_START;\n                            for (var i = 1; i < walkTokens.length; i++) {\n                                walkTokens[i] = PLACEHOLDER_BODY;\n                            }\n                        } else {\n                            walkTokens = this.$getDisplayTokens(\n                                lines[row].substring(lastColumn, column),\n                                tokens.length);\n                        }\n                        tokens = tokens.concat(walkTokens);\n                    }.bind(this),\n                    foldLine.end.row,\n                    lines[foldLine.end.row].length + 1\n                );\n\n                wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row = foldLine.end.row + 1;\n            }\n        }\n    }\n\n    /**\n     * @param {number[]}tokens\n     * @param {number} wrapLimit\n     * @param {number} tabSize\n     * @returns {*[]}\n     */\n    $computeWrapSplits(tokens, wrapLimit, tabSize) {\n        if (tokens.length == 0) {\n            return [];\n        }\n\n        var splits = [];\n        var displayLength = tokens.length;\n        var lastSplit = 0, lastDocSplit = 0;\n\n        var isCode = this.$wrapAsCode;\n\n        var indentedSoftWrap = this.$indentedSoftWrap;\n        var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8)\n            || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);\n\n        function getWrapIndent() {\n            var indentation = 0;\n            if (maxIndent === 0)\n                return indentation;\n            if (indentedSoftWrap) {\n                for (var i = 0; i < tokens.length; i++) {\n                    var token = tokens[i];\n                    if (token == SPACE)\n                        indentation += 1;\n                    else if (token == TAB)\n                        indentation += tabSize;\n                    else if (token == TAB_SPACE)\n                        continue;\n                    else\n                        break;\n                }\n            }\n            if (isCode && indentedSoftWrap !== false)\n                indentation += tabSize;\n            return Math.min(indentation, maxIndent);\n        }\n        function addSplit(screenPos) {\n            // The document size is the current size - the extra width for tabs\n            // and multipleWidth characters.\n            var len = screenPos - lastSplit;\n            for (var i = lastSplit; i < screenPos; i++) {\n                var ch = tokens[i];\n                if (ch === 12 || ch === 2) len -= 1;\n            }\n\n            if (!splits.length) {\n                indent = getWrapIndent();\n                //@ts-expect-error TODO: potential wrong property\n                splits.indent = indent;\n            }\n            lastDocSplit += len;\n            splits.push(lastDocSplit);\n            lastSplit = screenPos;\n        }\n        var indent = 0;\n        while (displayLength - lastSplit > wrapLimit - indent) {\n            // This is, where the split should be.\n            var split = lastSplit + wrapLimit - indent;\n\n            // If there is a space or tab at this split position, then making\n            // a split is simple.\n            if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {\n                /* disabled see https://github.com/ajaxorg/ace/issues/1186\n                // Include all following spaces + tabs in this split as well.\n                while (tokens[split] >= SPACE) {\n                    split ++;\n                } */\n                addSplit(split);\n                continue;\n            }\n\n            // === ELSE ===\n            // Check if split is inside of a placeholder. Placeholder are\n            // not splitable. Therefore, seek the beginning of the placeholder\n            // and try to place the split before the placeholder's start.\n            if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {\n                // Seek the start of the placeholder and do the split\n                // before the placeholder. By definition there always\n                // a PLACEHOLDER_START between split and lastSplit.\n                for (split; split != lastSplit - 1; split--) {\n                    if (tokens[split] == PLACEHOLDER_START) {\n                        // split++; << No incremental here as we want to\n                        //  have the position before the Placeholder.\n                        break;\n                    }\n                }\n\n                // If the PLACEHOLDER_START is not the index of the\n                // last split, then we can do the split\n                if (split > lastSplit) {\n                    addSplit(split);\n                    continue;\n                }\n\n                // If the PLACEHOLDER_START IS the index of the last\n                // split, then we have to place the split after the\n                // placeholder. So, let's seek for the end of the placeholder.\n                split = lastSplit + wrapLimit;\n                for (split; split < tokens.length; split++) {\n                    if (tokens[split] != PLACEHOLDER_BODY) {\n                        break;\n                    }\n                }\n\n                // If spilt == tokens.length, then the placeholder is the last\n                // thing in the line and adding a new split doesn't make sense.\n                if (split == tokens.length) {\n                    break;  // Breaks the while-loop.\n                }\n\n                // Finally, add the split...\n                addSplit(split);\n                continue;\n            }\n\n            // === ELSE ===\n            // Search for the first non space/tab/placeholder/punctuation token backwards.\n            var minSplit = Math.max(split - (wrapLimit -(wrapLimit>>2)), lastSplit - 1);\n            while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                split --;\n            }\n            if (isCode) {\n                while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                    split --;\n                }\n                while (split > minSplit && tokens[split] == PUNCTUATION) {\n                    split --;\n                }\n            } else {\n                while (split > minSplit && tokens[split] < SPACE) {\n                    split --;\n                }\n            }\n            // If we found one, then add the split.\n            if (split > minSplit) {\n                addSplit(++split);\n                continue;\n            }\n\n            // === ELSE ===\n            split = lastSplit + wrapLimit;\n            // The split is inside of a CHAR or CHAR_EXT token and no space\n            // around -> force a split.\n            if (tokens[split] == CHAR_EXT)\n                split--;\n            addSplit(split - indent);\n        }\n        return splits;\n    }\n\n    /**\n     * Given a string, returns an array of the display characters, including tabs and spaces.\n     * @param {String} str The string to check\n     * @param {Number} [offset] The value to start at\n     * @returns {number[]}\n     **/\n    $getDisplayTokens(str, offset) {\n        var arr = [];\n        var tabSize;\n        offset = offset || 0;\n\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            // Tab\n            if (c == 9) {\n                tabSize = this.getScreenTabSize(arr.length + offset);\n                arr.push(TAB);\n                for (var n = 1; n < tabSize; n++) {\n                    arr.push(TAB_SPACE);\n                }\n            }\n            // Space\n            else if (c == 32) {\n                arr.push(SPACE);\n            } else if((c > 39 && c < 48) || (c > 57 && c < 64)) {\n                arr.push(PUNCTUATION);\n            }\n            // full width characters\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                arr.push(CHAR, CHAR_EXT);\n            } else {\n                arr.push(CHAR);\n            }\n        }\n        return arr;\n    }\n\n    /**\n     * Calculates the width of the string `str` on the screen while assuming that the string starts at the first column on the screen.\n     * @param {String} str The string to calculate the screen width of\n     * @param {Number} [maxScreenColumn]\n     * @param {Number} [screenColumn]\n     * @returns {Number[]} Returns an `int[]` array with two elements:<br/>\n     * The first position indicates the number of columns for `str` on screen.<br/>\n     * The second value contains the position of the document column that this function read until.\n     **/\n    $getStringScreenWidth(str, maxScreenColumn, screenColumn) {\n        if (maxScreenColumn == 0)\n            return [0, 0];\n        if (maxScreenColumn == null)\n            maxScreenColumn = Infinity;\n        screenColumn = screenColumn || 0;\n\n        var c, column;\n        for (column = 0; column < str.length; column++) {\n            c = str.charCodeAt(column);\n            // tab\n            if (c == 9) {\n                screenColumn += this.getScreenTabSize(screenColumn);\n            }\n            // full width characters\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                screenColumn += 2;\n            } else {\n                screenColumn += 1;\n            }\n            if (screenColumn > maxScreenColumn) {\n                break;\n            }\n        }\n\n        return [screenColumn, column];\n    }\n\n    /**\n     * Returns number of screenrows in a wrapped line.\n     * @param {Number} row The row number to check\n     * @returns {Number}\n     **/\n    getRowLength(row) {\n        var h = 1;\n        if (this.lineWidgets)\n            h += this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n\n        if (!this.$useWrapMode || !this.$wrapData[row])\n            return h;\n        else\n            return this.$wrapData[row].length + h;\n    }\n\n    /**\n     * @param {Number} row\n     * @returns {Number}\n     **/\n    getRowLineCount(row) {\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1;\n        } else {\n            return this.$wrapData[row].length + 1;\n        }\n    }\n\n    /**\n     * @param {Number} screenRow\n     * @returns {Number}\n     **/\n    getRowWrapIndent(screenRow) {\n        if (this.$useWrapMode) {\n            var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n            var splits = this.$wrapData[pos.row];\n            return splits.length && splits[0] < pos.column ? splits.indent : 0;\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Returns the position (on screen) for the last character in the provided screen row.\n     * @param {Number} screenRow The screen row to check\n     * @returns {Number}\n     *\n     * @related EditSession.documentToScreenColumn\n     **/\n    getScreenLastRowColumn(screenRow) {\n        var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n        return this.documentToScreenColumn(pos.row, pos.column);\n    }\n\n    /**\n     * For the given document row and column, this returns the column position of the last screen row.\n     * @param {Number} docRow\n     * @param {Number} docColumn\n     * @returns {number}\n     **/\n    getDocumentLastRowColumn(docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.getScreenLastRowColumn(screenRow);\n    }\n\n    /**\n     * For the given document row and column, this returns the document position of the last row.\n     * @param {Number} docRow\n     * @param {Number} docColumn\n     * @returns {Point}\n     **/\n    getDocumentLastRowColumnPosition(docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);\n    }\n\n    /**\n     * For the given row, this returns the split data.\n     * @param {number} row\n     * @returns {String | undefined}\n     */\n    getRowSplitData(row) {\n        if (!this.$useWrapMode) {\n            return undefined;\n        } else {\n            return this.$wrapData[row];\n        }\n    }\n\n    /**\n     * The distance to the next tab stop at the specified screen column.\n     * @param {Number} screenColumn The screen column to check\n     *\n     * @returns {Number}\n     **/\n    getScreenTabSize(screenColumn) {\n        return this.$tabSize - (screenColumn % this.$tabSize | 0);\n    }\n\n    /**\n     * @param {number} screenRow\n     * @param {number} screenColumn\n     * @returns {number}\n     */\n    screenToDocumentRow(screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).row;\n    }\n\n    /**\n     * @param {number} screenRow\n     * @param {number} screenColumn\n     * @returns {number}\n     */\n    screenToDocumentColumn(screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).column;\n    }\n\n    /**\n     * Converts characters coordinates on the screen to characters coordinates within the document. [This takes into account code folding, word wrap, tab size, and any other visual modifications.]{: #conversionConsiderations}\n     * @param {Number} screenRow The screen row to check\n     * @param {Number} screenColumn The screen column to check\n     * @param {Number} [offsetX] screen character x-offset [optional]\n     *\n     * @returns {Point} The object returned has two properties: `row` and `column`.\n     *\n     * @related EditSession.documentToScreenPosition\n     **/\n    screenToDocumentPosition(screenRow, screenColumn, offsetX) {\n        if (screenRow < 0)\n            return {row: 0, column: 0};\n\n        var line;\n        var docRow = 0;\n        var docColumn = 0;\n        var column;\n        var row = 0;\n        var rowLength = 0;\n\n        var rowCache = this.$screenRowCache;\n        var i = this.$getRowCacheIndex(rowCache, screenRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var docRow = this.$docRowCache[i];\n            var doCache = screenRow > rowCache[l - 1];\n        } else {\n            var doCache = !l;\n        }\n\n        var maxRow = this.getLength() - 1;\n        var foldLine = this.getNextFoldLine(docRow);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (row <= screenRow) {\n            rowLength = this.getRowLength(docRow);\n            if (row + rowLength > screenRow || docRow >= maxRow) {\n                break;\n            } else {\n                row += rowLength;\n                docRow++;\n                if (docRow > foldStart) {\n                    docRow = foldLine.end.row+1;\n                    foldLine = this.getNextFoldLine(docRow, foldLine);\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n            }\n\n            if (doCache) {\n                this.$docRowCache.push(docRow);\n                this.$screenRowCache.push(row);\n            }\n        }\n\n        if (foldLine && foldLine.start.row <= docRow) {\n            line = this.getFoldDisplayLine(foldLine);\n            docRow = foldLine.start.row;\n        } else if (row + rowLength <= screenRow || docRow > maxRow) {\n            // clip at the end of the document\n            return {\n                row: maxRow,\n                column: this.getLine(maxRow).length\n            };\n        } else {\n            line = this.getLine(docRow);\n            foldLine = null;\n        }\n        var wrapIndent = 0, splitIndex = Math.floor(screenRow - row);\n        if (this.$useWrapMode) {\n            var splits = this.$wrapData[docRow];\n            if (splits) {\n                column = splits[splitIndex];\n                if(splitIndex > 0 && splits.length) {\n                    wrapIndent = splits.indent;\n                    docColumn = splits[splitIndex - 1] || splits[splits.length - 1];\n                    line = line.substring(docColumn);\n                }\n            }\n        }\n\n        if (offsetX !== undefined && this.$bidiHandler.isBidiRow(row + splitIndex, docRow, splitIndex))\n            screenColumn = this.$bidiHandler.offsetToCol(offsetX);\n\n        docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];\n\n        // We remove one character at the end so that the docColumn\n        // position returned is not associated to the next row on the screen.\n        if (this.$useWrapMode && docColumn >= column)\n            docColumn = column - 1;\n\n        if (foldLine)\n            return foldLine.idxToPosition(docColumn);\n\n        return {row: docRow, column: docColumn};\n    }\n\n    /**\n     * Converts document coordinates to screen coordinates. {:conversionConsiderations}\n     * @param {Number|Point} docRow The document row to check\n     * @param {Number|undefined} [docColumn] The document column to check\n     * @returns {Point} The object returned by this method has two properties: `row` and `column`.\n     *\n     * @related EditSession.screenToDocumentPosition\n     **/\n    documentToScreenPosition(docRow, docColumn) {\n        // Normalize the passed in arguments.\n        if (typeof docColumn === \"undefined\")\n            var pos = this.$clipPositionToDocument(/**@type{Point}*/(docRow).row, /**@type{Point}*/(docRow).column);\n        else\n            pos = this.$clipPositionToDocument(/**@type{number}*/(docRow), docColumn);\n\n        docRow = pos.row;\n        docColumn = pos.column;\n\n        var screenRow = 0;\n        var foldStartRow = null;\n        var fold = null;\n\n        // Clamp the docRow position in case it's inside of a folded block.\n        fold = this.getFoldAt(docRow, docColumn, 1);\n        if (fold) {\n            docRow = fold.start.row;\n            docColumn = fold.start.column;\n        }\n\n        var rowEnd, row = 0;\n\n        var rowCache = this.$docRowCache;\n        var i = this.$getRowCacheIndex(rowCache, docRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var screenRow = this.$screenRowCache[i];\n            var doCache = docRow > rowCache[l - 1];\n        } else {\n            var doCache = !l;\n        }\n\n        var foldLine = this.getNextFoldLine(row);\n        var foldStart = foldLine ?foldLine.start.row :Infinity;\n\n        while (row < docRow) {\n            if (row >= foldStart) {\n                rowEnd = foldLine.end.row + 1;\n                if (rowEnd > docRow)\n                    break;\n                foldLine = this.getNextFoldLine(rowEnd, foldLine);\n                foldStart = foldLine ?foldLine.start.row :Infinity;\n            }\n            else {\n                rowEnd = row + 1;\n            }\n\n            screenRow += this.getRowLength(row);\n            row = rowEnd;\n\n            if (doCache) {\n                this.$docRowCache.push(row);\n                this.$screenRowCache.push(screenRow);\n            }\n        }\n\n        // Calculate the text line that is displayed in docRow on the screen.\n        var textLine = \"\";\n        // Check if the final row we want to reach is inside of a fold.\n        if (foldLine && row >= foldStart) {\n            textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);\n            foldStartRow = foldLine.start.row;\n        } else {\n            textLine = this.getLine(docRow).substring(0, docColumn);\n            foldStartRow = docRow;\n        }\n        var wrapIndent = 0;\n        // Clamp textLine if in wrapMode.\n        if (this.$useWrapMode) {\n            var wrapRow = this.$wrapData[foldStartRow];\n            if (wrapRow) {\n                var screenRowOffset = 0;\n                while (textLine.length >= wrapRow[screenRowOffset]) {\n                    screenRow ++;\n                    screenRowOffset++;\n                }\n                textLine = textLine.substring(\n                    wrapRow[screenRowOffset - 1] || 0, textLine.length\n                );\n                wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;\n            }\n        }\n\n        if (this.lineWidgets && this.lineWidgets[row] && this.lineWidgets[row].rowsAbove)\n            screenRow += this.lineWidgets[row].rowsAbove;\n\n        return {\n            row: screenRow,\n            column: wrapIndent + this.$getStringScreenWidth(textLine)[0]\n        };\n    }\n\n    /**\n     * For the given document row and column, returns the screen column.\n     * @param {Number|Point} row\n     * @param {Number} [docColumn]\n     * @returns {Number}\n     **/\n    documentToScreenColumn(row, docColumn) {\n        return this.documentToScreenPosition(row, docColumn).column;\n    }\n\n    /**\n     * For the given document row and column, returns the screen row.\n     * @param {Number|Point} docRow\n     * @param {Number} [docColumn]\n     * @returns {number}\n     **/\n    documentToScreenRow(docRow, docColumn) {\n        return this.documentToScreenPosition(docRow, docColumn).row;\n    }\n\n    /**\n     * Returns the length of the screen.\n     * @returns {Number}\n     **/\n    getScreenLength() {\n        var screenRows = 0;\n        /**@type {FoldLine}*/\n        var fold = null;\n        if (!this.$useWrapMode) {\n            screenRows = this.getLength();\n\n            // Remove the folded lines again.\n            var foldData = this.$foldData;\n            for (var i = 0; i < foldData.length; i++) {\n                fold = foldData[i];\n                screenRows -= fold.end.row - fold.start.row;\n            }\n        } else {\n            var lastRow = this.$wrapData.length;\n            var row = 0, i = 0;\n            var fold = this.$foldData[i++];\n            var foldStart = fold ? fold.start.row :Infinity;\n\n            while (row < lastRow) {\n                var splits = this.$wrapData[row];\n                screenRows += splits ? splits.length + 1 : 1;\n                row ++;\n                if (row > foldStart) {\n                    row = fold.end.row+1;\n                    fold = this.$foldData[i++];\n                    foldStart = fold ?fold.start.row :Infinity;\n                }\n            }\n        }\n\n        // todo\n        if (this.lineWidgets)\n            screenRows += this.$getWidgetScreenLength();\n\n        return screenRows;\n    }\n\n    /**\n     * @param {FontMetrics} fm\n     */\n    $setFontMetrics(fm) {\n        if (!this.$enableVarChar) return;\n        this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {\n            if (maxScreenColumn === 0)\n                return [0, 0];\n            if (!maxScreenColumn)\n                maxScreenColumn = Infinity;\n            screenColumn = screenColumn || 0;\n\n            var c, column;\n            for (column = 0; column < str.length; column++) {\n                c = str.charAt(column);\n                // tab\n                if (c === \"\\t\") {\n                    screenColumn += this.getScreenTabSize(screenColumn);\n                } else {\n                    screenColumn += fm.getCharacterWidth(c);\n                }\n                if (screenColumn > maxScreenColumn) {\n                    break;\n                }\n            }\n\n            return [screenColumn, column];\n        };\n    }\n\n    /**\n     * @returns {string} the last character preceding the cursor in the editor\n     */\n    getPrecedingCharacter() {\n        var pos = this.selection.getCursor();\n\n        if (pos.column === 0) {\n            return pos.row === 0 ? \"\" : this.doc.getNewLineCharacter();\n        }\n\n        var currentLine = this.getLine(pos.row);\n        return currentLine[pos.column - 1];\n    }\n\n    destroy() {\n        if (!this.destroyed) {\n            this.bgTokenizer.setDocument(null);\n            this.bgTokenizer.cleanup();\n            this.destroyed = true;\n        }\n        this.endOperation();\n        this.$stopWorker();\n        this.removeAllListeners();\n        if (this.doc) {\n            this.doc.off(\"change\", this.$onChange);\n        }\n        if (this.selection) {\n            this.selection.off(\"changeCursor\", this.$onSelectionChange);\n            this.selection.off(\"changeSelection\", this.$onSelectionChange);\n        }\n        this.selection.detach();\n    }\n}\n\nEditSession.$uid = 0;\nEditSession.prototype.$modes = config.$modes;\n/**\n * Returns the current [[Document `Document`]] as a string.\n * @method getValue\n * @returns {String}\n * @alias EditSession.toString\n **/\nEditSession.prototype.getValue = EditSession.prototype.toString;\n\nEditSession.prototype.$defaultUndoManager = {\n    undo: function() {},\n    redo: function() {},\n    hasUndo: function() {},\n    hasRedo: function() {},\n    reset: function() {},\n    add: function() {},\n    addSelection: function() {},\n    startNewGroup: function() {},\n    addSession: function() {}\n};\nEditSession.prototype.$overwrite = false;\n\nEditSession.prototype.$mode = null;\nEditSession.prototype.$modeId = null;\nEditSession.prototype.$scrollTop = 0;\nEditSession.prototype.$scrollLeft = 0;\n// WRAPMODE\nEditSession.prototype.$wrapLimit = 80;\nEditSession.prototype.$useWrapMode = false;\nEditSession.prototype.$wrapLimitRange = {\n    min : null,\n    max : null\n};\n/**\n *\n * @type {null | import(\"../ace-internal\").Ace.LineWidget[]}\n */\nEditSession.prototype.lineWidgets = null;\nEditSession.prototype.isFullWidth = isFullWidth;\n\noop.implement(EditSession.prototype, EventEmitter);\n\n// \"Tokens\"\nvar CHAR = 1,\n    CHAR_EXT = 2,\n    PLACEHOLDER_START = 3,\n    PLACEHOLDER_BODY =  4,\n    PUNCTUATION = 9,\n    SPACE = 10,\n    TAB = 11,\n    TAB_SPACE = 12;\n// For every keystroke this gets called once per char in the whole doc!!\n// Wouldn't hurt to make it a bit faster for c >= 0x1100\nfunction isFullWidth(c) {\n    if (c < 0x1100)\n        return false;\n    return c >= 0x1100 && c <= 0x115F ||\n        c >= 0x11A3 && c <= 0x11A7 ||\n        c >= 0x11FA && c <= 0x11FF ||\n        c >= 0x2329 && c <= 0x232A ||\n        c >= 0x2E80 && c <= 0x2E99 ||\n        c >= 0x2E9B && c <= 0x2EF3 ||\n        c >= 0x2F00 && c <= 0x2FD5 ||\n        c >= 0x2FF0 && c <= 0x2FFB ||\n        c >= 0x3000 && c <= 0x303E ||\n        c >= 0x3041 && c <= 0x3096 ||\n        c >= 0x3099 && c <= 0x30FF ||\n        c >= 0x3105 && c <= 0x312D ||\n        c >= 0x3131 && c <= 0x318E ||\n        c >= 0x3190 && c <= 0x31BA ||\n        c >= 0x31C0 && c <= 0x31E3 ||\n        c >= 0x31F0 && c <= 0x321E ||\n        c >= 0x3220 && c <= 0x3247 ||\n        c >= 0x3250 && c <= 0x32FE ||\n        c >= 0x3300 && c <= 0x4DBF ||\n        c >= 0x4E00 && c <= 0xA48C ||\n        c >= 0xA490 && c <= 0xA4C6 ||\n        c >= 0xA960 && c <= 0xA97C ||\n        c >= 0xAC00 && c <= 0xD7A3 ||\n        c >= 0xD7B0 && c <= 0xD7C6 ||\n        c >= 0xD7CB && c <= 0xD7FB ||\n        c >= 0xF900 && c <= 0xFAFF ||\n        c >= 0xFE10 && c <= 0xFE19 ||\n        c >= 0xFE30 && c <= 0xFE52 ||\n        c >= 0xFE54 && c <= 0xFE66 ||\n        c >= 0xFE68 && c <= 0xFE6B ||\n        c >= 0xFF01 && c <= 0xFF60 ||\n        c >= 0xFFE0 && c <= 0xFFE6;\n}\n(__webpack_require__(/*! ./edit_session/folding */ \"./node_modules/ace-code/src/edit_session/folding.js\").Folding).call(EditSession.prototype);\n(__webpack_require__(/*! ./edit_session/bracket_match */ \"./node_modules/ace-code/src/edit_session/bracket_match.js\").BracketMatch).call(EditSession.prototype);\n\n\nconfig.defineOptions(EditSession.prototype, \"session\", {\n    wrap: {\n        /**\n         * @param {string | boolean | number} value\n         * @this {EditSession}\n         */\n        set: function(value) {\n            if (!value || value == \"off\")\n                value = false;\n            else if (value == \"free\")\n                value = true;\n            else if (value == \"printMargin\")\n                value = -1;\n            else if (typeof value == \"string\")\n                value = parseInt(value, 10) || false;\n\n            if (this.$wrap == value)\n                return;\n            this.$wrap = value;\n            if (!value) {\n                this.setUseWrapMode(false);\n            } else {\n                var col = typeof value == \"number\" ? value : null;\n                this.setWrapLimitRange(col, col);\n                this.setUseWrapMode(true);\n            }\n        },\n        get: function() {\n            if (this.getUseWrapMode()) {\n                if (this.$wrap == -1)\n                    return \"printMargin\";\n                if (!this.getWrapLimitRange().min)\n                    return \"free\";\n                return this.$wrap;\n            }\n            return \"off\";\n        },\n        handlesSet: true\n    },\n    wrapMethod: {\n        /**\n         * @param {\"code\"|\"text\"|\"auto\"|boolean} val\n         * @this{EditSession}\n         */\n        set: function(val) {\n            val = val == \"auto\"\n                ? this.$mode.type != \"text\"\n                : val != \"text\";\n            if (val != this.$wrapAsCode) {\n                this.$wrapAsCode = val;\n                if (this.$useWrapMode) {\n                    this.$useWrapMode = false;\n                    this.setUseWrapMode(true);\n                }\n            }\n        },\n        initialValue: \"auto\"\n    },\n    indentedSoftWrap: {\n        /**\n         * @this{EditSession}\n         */\n        set: function() {\n            if (this.$useWrapMode) {\n                this.$useWrapMode = false;\n                this.setUseWrapMode(true);\n            }\n        },\n        initialValue: true\n    },\n    firstLineNumber: {\n        set: function() {this._signal(\"changeBreakpoint\");},\n        initialValue: 1\n    },\n    useWorker: {\n        /**\n         * @param {boolean} useWorker\n         * @this{EditSession}\n         */\n        set: function(useWorker) {\n            this.$useWorker = useWorker;\n\n            this.$stopWorker();\n            if (useWorker)\n                this.$startWorker();\n        },\n        initialValue: true\n    },\n    useSoftTabs: {initialValue: true},\n    tabSize: {\n        /**\n         * @param tabSize\n         * @this{EditSession}\n         */\n        set: function(tabSize) {\n            tabSize = parseInt(tabSize);\n            if (tabSize > 0 && this.$tabSize !== tabSize) {\n                this.$modified = true;\n                this.$rowLengthCache = [];\n                this.$tabSize = tabSize;\n                this._signal(\"changeTabSize\");\n            }\n        },\n        initialValue: 4,\n        handlesSet: true\n    },\n    navigateWithinSoftTabs: {initialValue: false},\n    foldStyle: {\n        set: function(val) {this.setFoldStyle(val);},\n        handlesSet: true\n    },\n    overwrite: {\n        set: function(val) {this._signal(\"changeOverwrite\");},\n        initialValue: false\n    },\n    newLineMode: {\n        set: function(val) {this.doc.setNewLineMode(val);},\n        get: function() {return this.doc.getNewLineMode();},\n        handlesSet: true\n    },\n    mode: {\n        set: function(val) { this.setMode(val); },\n        get: function() { return this.$modeId; },\n        handlesSet: true\n    }\n});\n\nexports.EditSession = EditSession;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2VkaXRfc2Vzc2lvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsYUFBYSw0Q0FBNEM7QUFDekQsYUFBYSw2Q0FBNkM7QUFDMUQsYUFBYSxxQ0FBcUM7QUFDbEQsYUFBYSxxQ0FBcUM7QUFDbEQsYUFBYSxzQ0FBc0M7QUFDbkQsYUFBYSwwQ0FBMEM7QUFDdkQsYUFBYSwwQ0FBMEM7QUFDdkQ7O0FBRUEsVUFBVSxtQkFBTyxDQUFDLHlEQUFXO0FBQzdCLFdBQVcsbUJBQU8sQ0FBQywyREFBWTtBQUMvQixrQkFBa0Isb0dBQW9DO0FBQ3RELGFBQWEsbUJBQU8sQ0FBQyx1REFBVTtBQUMvQixtQkFBbUIsaUhBQTJDO0FBQzlELGdCQUFnQiw4RkFBZ0M7QUFDaEQsZUFBZSx5RkFBMkI7QUFDMUMsWUFBWSxrRkFBd0I7QUFDcEMsa0JBQWtCLHNHQUFxQztBQUN2RCxlQUFlLDJGQUE4QjtBQUM3QywwQkFBMEIsOEhBQXFEO0FBQy9FLHNCQUFzQixrSEFBNkM7QUFDbkUsa0JBQWtCLG9HQUFvQzs7QUFFdEQ7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUIsMklBQTJJO0FBQzdLLGVBQWUsWUFBWSwyREFBMkQ7QUFDdEY7QUFDQTtBQUNBLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLFlBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQSx5Q0FBeUMsT0FBTzs7QUFFaEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixXQUFXLGNBQWMsYUFBYSxZQUFZO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsYUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFVBQVU7QUFDakM7QUFDQSx1QkFBdUIsVUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVE7QUFDUixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtS0FBbUs7QUFDbkssaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hELGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsZUFBZTtBQUNyQztBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQzs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQzs7QUFFQTtBQUNBLDZJQUE2STtBQUM3SSxlQUFlLE9BQU87QUFDdEIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsNEZBQTRGO0FBQzNHLGVBQWUsU0FBUztBQUN4QjtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSwwQ0FBMEM7QUFDekQsZUFBZSxTQUFTO0FBQ3hCO0FBQ0EsZ0JBQWdCLDBDQUEwQztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVMsNERBQTREO0FBQ3BGO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsU0FBUztBQUN4QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0Q0FBNEM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSLGVBQWUsMkNBQTJDLGFBQWE7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBLDhCQUE4Qjs7QUFFOUI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBLHdKQUF3SjtBQUN4SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxxQkFBcUI7QUFDcEMsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDRCQUE0QixPQUFPO0FBQ25DOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0Esa0JBQWtCLE9BQU87QUFDekI7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZCQUE2QjtBQUNuRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixVQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzSEFBc0g7QUFDdEgsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUhBQXFIO0FBQ3JILGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdIQUF3SDtBQUN4SCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNEJBQTRCLFNBQVM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPLHVCQUF1QixhQUFhO0FBQzFELGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixVQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsZUFBZSxTQUFTLCtFQUErRTtBQUN2RztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdDQUF3QyxTQUFTO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsU0FBUyxjQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsU0FBUztBQUN4QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsU0FBUztBQUN4QixpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixhQUFhO0FBQzVDLG1DQUFtQyxvQkFBb0I7QUFDdkQ7O0FBRUE7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlDQUF5Qyx1QkFBdUI7QUFDaEU7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QixVQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUSxzQ0FBc0M7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLE9BQU87QUFDdEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0RBQWtEO0FBQ2xELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpRkFBaUY7QUFDakY7QUFDQSxhQUFhO0FBQ2I7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwwQkFBMEIsd0JBQXdCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQix3QkFBd0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx1QkFBdUI7QUFDbkU7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG1CQUFtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxlQUFlO0FBQ25EO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3QkFBd0I7QUFDcEQ7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHVCQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxhQUFhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixVQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QixxQkFBcUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxTUFBcU07QUFDck0sZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9COztBQUVwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZ0JBQWdCO0FBQ2hCOztBQUVBO0FBQ0EsNkRBQTZEO0FBQzdELGVBQWUsY0FBYztBQUM3QixlQUFlLGtCQUFrQjtBQUNqQyxpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsTUFBTSx5QkFBeUIsTUFBTTtBQUNqRztBQUNBLHdEQUF3RCxPQUFPOztBQUUvRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsY0FBYztBQUM3QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0IsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLHFCQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkIscUJBQXFCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QjtBQUN2Qix1QkFBdUI7QUFDdkIsMEJBQTBCO0FBQzFCLDBCQUEwQjtBQUMxQix3QkFBd0I7QUFDeEIsc0JBQXNCO0FBQ3RCLCtCQUErQjtBQUMvQixnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0hBQXlDO0FBQ3pDLG1JQUFvRDs7O0FBR3BEO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwyQkFBMkI7QUFDOUMsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQkFBbUIsOEJBQThCO0FBQ2pELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5QkFBeUIsa0NBQWtDO0FBQzNEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTCw2QkFBNkIsb0JBQW9CO0FBQ2pEO0FBQ0EsNEJBQTRCLHdCQUF3QjtBQUNwRDtBQUNBLEtBQUs7QUFDTDtBQUNBLDRCQUE0QixpQ0FBaUM7QUFDN0Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSw0QkFBNEIsOEJBQThCO0FBQzFELHlCQUF5QixrQ0FBa0M7QUFDM0Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSw2QkFBNkIsb0JBQW9CO0FBQ2pELDBCQUEwQixzQkFBc0I7QUFDaEQ7QUFDQTtBQUNBLENBQUM7O0FBRUQsbUJBQW1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvZWRpdF9zZXNzaW9uLmpzPzM1OTEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2xheWVyL2ZvbnRfbWV0cmljc1wiKS5Gb250TWV0cmljc30gRm9udE1ldHJpY3NcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2VkaXRfc2Vzc2lvbi9mb2xkX2xpbmVcIikuRm9sZExpbmV9IEZvbGRMaW5lXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludH0gUG9pbnRcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkRlbHRhfSBEZWx0YVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuSVJhbmdlfSBJUmFuZ2VcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlN5bnRheE1vZGV9IFN5bnRheE1vZGVcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkxpbmVXaWRnZXR9IExpbmVXaWRnZXRcbiAqL1xuXG52YXIgb29wID0gcmVxdWlyZShcIi4vbGliL29vcFwiKTtcbnZhciBsYW5nID0gcmVxdWlyZShcIi4vbGliL2xhbmdcIik7XG52YXIgQmlkaUhhbmRsZXIgPSByZXF1aXJlKFwiLi9iaWRpaGFuZGxlclwiKS5CaWRpSGFuZGxlcjtcbnZhciBjb25maWcgPSByZXF1aXJlKFwiLi9jb25maWdcIik7XG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyO1xudmFyIFNlbGVjdGlvbiA9IHJlcXVpcmUoXCIuL3NlbGVjdGlvblwiKS5TZWxlY3Rpb247XG52YXIgVGV4dE1vZGUgPSByZXF1aXJlKFwiLi9tb2RlL3RleHRcIikuTW9kZTtcbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuL3JhbmdlXCIpLlJhbmdlO1xudmFyIExpbmVXaWRnZXRzID0gcmVxdWlyZShcIi4vbGluZV93aWRnZXRzXCIpLkxpbmVXaWRnZXRzO1xudmFyIERvY3VtZW50ID0gcmVxdWlyZShcIi4vZG9jdW1lbnRcIikuRG9jdW1lbnQ7XG52YXIgQmFja2dyb3VuZFRva2VuaXplciA9IHJlcXVpcmUoXCIuL2JhY2tncm91bmRfdG9rZW5pemVyXCIpLkJhY2tncm91bmRUb2tlbml6ZXI7XG52YXIgU2VhcmNoSGlnaGxpZ2h0ID0gcmVxdWlyZShcIi4vc2VhcmNoX2hpZ2hsaWdodFwiKS5TZWFyY2hIaWdobGlnaHQ7XG52YXIgVW5kb01hbmFnZXIgPSByZXF1aXJlKFwiLi91bmRvbWFuYWdlclwiKS5VbmRvTWFuYWdlcjtcblxuLyoqXG4gKiBAdHlwZWRlZiBUZXh0TW9kZVxuICogQHR5cGUge1N5bnRheE1vZGV9XG4gKi9cblxuLyoqXG4gKiBTdG9yZXMgYWxsIHRoZSBkYXRhIGFib3V0IFtbRWRpdG9yIGBFZGl0b3JgXV0gc3RhdGUgcHJvdmlkaW5nIGVhc3kgd2F5IHRvIGNoYW5nZSBlZGl0b3JzIHN0YXRlLlxuICpcbiAqIGBFZGl0U2Vzc2lvbmAgY2FuIGJlIGF0dGFjaGVkIHRvIG9ubHkgb25lIFtbRG9jdW1lbnQgYERvY3VtZW50YF1dLiBTYW1lIGBEb2N1bWVudGAgY2FuIGJlIGF0dGFjaGVkIHRvIHNldmVyYWwgYEVkaXRTZXNzaW9uYHMuXG4gKiovXG5jbGFzcyBFZGl0U2Vzc2lvbiB7XG4gICAgLyoqXG4gICAgICogU2V0cyB1cCBhIG5ldyBgRWRpdFNlc3Npb25gIGFuZCBhc3NvY2lhdGVzIGl0IHdpdGggdGhlIGdpdmVuIGBEb2N1bWVudGAgYW5kIGBNb2RlYC5cbiAgICAgKiBAcGFyYW0ge0RvY3VtZW50IHwgU3RyaW5nfSBbdGV4dF0gW0lmIGB0ZXh0YCBpcyBhIGBEb2N1bWVudGAsIGl0IGFzc29jaWF0ZXMgdGhlIGBFZGl0U2Vzc2lvbmAgd2l0aCBpdC4gT3RoZXJ3aXNlLCBhIG5ldyBgRG9jdW1lbnRgIGlzIGNyZWF0ZWQsIHdpdGggdGhlIGluaXRpYWwgdGV4dF17OiAjdGV4dFBhcmFtfVxuICAgICAqIEBwYXJhbSB7U3ludGF4TW9kZX0gW21vZGVdIFtUaGUgaW5pdGlhbCBsYW5ndWFnZSBtb2RlIHRvIHVzZSBmb3IgdGhlIGRvY3VtZW50XXs6ICNtb2RlUGFyYW19XG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHRleHQsIG1vZGUpIHtcbiAgICAgICAgLyoqQHR5cGUge0RvY3VtZW50fSovdGhpcy5kb2M7XG4gICAgICAgIHRoaXMuJGJyZWFrcG9pbnRzID0gW107XG4gICAgICAgIHRoaXMuJGRlY29yYXRpb25zID0gW107XG4gICAgICAgIHRoaXMuJGZyb250TWFya2VycyA9IHt9O1xuICAgICAgICB0aGlzLiRiYWNrTWFya2VycyA9IHt9O1xuICAgICAgICB0aGlzLiRtYXJrZXJJZCA9IDE7XG4gICAgICAgIHRoaXMuJHVuZG9TZWxlY3QgPSB0cnVlO1xuICAgICAgICB0aGlzLiRlZGl0b3IgPSBudWxsO1xuICAgICAgICB0aGlzLnByZXZPcCA9IHt9O1xuXG4gICAgICAgIC8qKiBAdHlwZSB7Rm9sZExpbmVbXX0gKi9cbiAgICAgICAgdGhpcy4kZm9sZERhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5pZCA9IFwic2Vzc2lvblwiICsgKCsrRWRpdFNlc3Npb24uJHVpZCk7XG4gICAgICAgIHRoaXMuJGZvbGREYXRhLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5qb2luKFwiXFxuXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFNldCBkZWZhdWx0IGJhY2tncm91bmQgdG9rZW5pemVyIHdpdGggVGV4dCBtb2RlIHVudGlsIGVkaXRvciBzZXNzaW9uIG1vZGUgaXMgc2V0XG4gICAgICAgIHRoaXMuYmdUb2tlbml6ZXIgPSBuZXcgQmFja2dyb3VuZFRva2VuaXplcigobmV3IFRleHRNb2RlKCkpLmdldFRva2VuaXplcigpLCB0aGlzKTtcblxuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuYmdUb2tlbml6ZXIub24oXCJ1cGRhdGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgX3NlbGYuX3NpZ25hbChcInRva2VuaXplclVwZGF0ZVwiLCBlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5vbihcImNoYW5nZUZvbGRcIiwgdGhpcy5vbkNoYW5nZUZvbGQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuJG9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdGV4dCAhPSBcIm9iamVjdFwiIHx8ICF0ZXh0LmdldExpbmUpXG4gICAgICAgICAgICB0ZXh0ID0gbmV3IERvY3VtZW50KC8qKkB0eXBle3N0cmluZ30qLyh0ZXh0KSk7XG5cbiAgICAgICAgdGhpcy5zZXREb2N1bWVudCh0ZXh0KTtcblxuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IG5ldyBTZWxlY3Rpb24odGhpcyk7XG4gICAgICAgIHRoaXMuJG9uU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5vbihcImNoYW5nZVNlbGVjdGlvblwiLCB0aGlzLiRvblNlbGVjdGlvbkNoYW5nZSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLm9uKFwiY2hhbmdlQ3Vyc29yXCIsIHRoaXMuJG9uU2VsZWN0aW9uQ2hhbmdlKTtcblxuICAgICAgICB0aGlzLiRiaWRpSGFuZGxlciA9IG5ldyBCaWRpSGFuZGxlcih0aGlzKTtcblxuICAgICAgICBjb25maWcucmVzZXRPcHRpb25zKHRoaXMpO1xuICAgICAgICB0aGlzLnNldE1vZGUobW9kZSk7XG4gICAgICAgIGNvbmZpZy5fc2lnbmFsKFwic2Vzc2lvblwiLCB0aGlzKTtcblxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRpbml0T3BlcmF0aW9uTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgJGluaXRPcGVyYXRpb25MaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuY3VyT3AgPSBudWxsO1xuICAgICAgICB0aGlzLm9uKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJPcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRPcGVyYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1ck9wLnNlbGVjdGlvbkJlZm9yZSA9IHRoaXMuJGxhc3RTZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1ck9wLmRvY0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgdGhpcy5vbihcImNoYW5nZVNlbGVjdGlvblwiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VyT3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0T3BlcmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJPcC5zZWxlY3Rpb25CZWZvcmUgPSB0aGlzLiRsYXN0U2VsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgLy8gRmFsbGJhY2sgbWVjaGFuaXNtIGluIGNhc2UgY3VycmVudCBvcGVyYXRpb24gZG9lc24ndCBmaW5pc2ggbW9yZSBleHBsaWNpdGx5LlxuICAgICAgICAvLyBUcmlnZ2VyZWQsIGZvciBleGFtcGxlLCB3aGVuIGEgY29uc3VtZXIgbWFrZXMgcHJvZ3JhbW1hdGljIGNoYW5nZXMgd2l0aG91dCBpbnZva2luZyBlbmRPcGVyYXRpb24gYWZ0ZXJ3YXJkcy5cbiAgICAgICAgdGhpcy4kb3BlcmF0aW9uUmVzZXRUaW1lciA9IGxhbmcuZGVsYXllZENhbGwodGhpcy5lbmRPcGVyYXRpb24uYmluZCh0aGlzLCB0cnVlKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnQgYW4gQWNlIG9wZXJhdGlvbiwgd2hpY2ggd2lsbCB0aGVuIGJhdGNoIGFsbCB0aGUgc3Vic2VxdWVudCBjaGFuZ2VzICh0byBlaXRoZXIgY29udGVudCBvciBzZWxlY3Rpb24pIHVuZGVyIGEgc2luZ2xlIGF0b21pYyBvcGVyYXRpb24uXG4gICAgICogQHBhcmFtIHt7Y29tbWFuZD86IHtuYW1lPzogc3RyaW5nfSwgYXJncz86IGFueX18dW5kZWZpbmVkfSBbY29tbWFuZEV2ZW50XSBPcHRpb25hbCBuYW1lIGZvciB0aGUgb3BlcmF0aW9uXG4gICAgICovXG4gICAgc3RhcnRPcGVyYXRpb24oY29tbWFuZEV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmN1ck9wKSB7XG4gICAgICAgICAgICBpZiAoIWNvbW1hbmRFdmVudCB8fCB0aGlzLmN1ck9wLmNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZPcCA9IHRoaXMuY3VyT3A7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb21tYW5kRXZlbnQpIHtcbiAgICAgICAgICAgIGNvbW1hbmRFdmVudCA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kb3BlcmF0aW9uUmVzZXRUaW1lci5zY2hlZHVsZSgpO1xuICAgICAgICB0aGlzLmN1ck9wID0ge1xuICAgICAgICAgICAgY29tbWFuZDogY29tbWFuZEV2ZW50LmNvbW1hbmQgfHwge30sXG4gICAgICAgICAgICBhcmdzOiBjb21tYW5kRXZlbnQuYXJnc1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmN1ck9wLnNlbGVjdGlvbkJlZm9yZSA9IHRoaXMuc2VsZWN0aW9uLnRvSlNPTigpO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJzdGFydE9wZXJhdGlvblwiLCBjb21tYW5kRXZlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuZCBjdXJyZW50IEFjZSBvcGVyYXRpb24uXG4gICAgICogRW1pdHMgXCJiZWZvcmVFbmRPcGVyYXRpb25cIiBldmVudCBqdXN0IGJlZm9yZSBjbGVhcmluZyBldmVyeXRoaW5nLCB3aGVyZSB0aGUgY3VycmVudCBvcGVyYXRpb24gY2FuIGJlIGFjY2Vzc2VkIHRocm91Z2ggYGN1ck9wYCBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge2FueX0gZVxuICAgICAqL1xuICAgIGVuZE9wZXJhdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLmN1ck9wKSB7XG4gICAgICAgICAgICBpZiAoZSAmJiBlLnJldHVyblZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VyT3AgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NpZ25hbChcImVuZE9wZXJhdGlvblwiLCBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZSA9PSB0cnVlICYmIHRoaXMuY3VyT3AuY29tbWFuZCAmJiB0aGlzLmN1ck9wLmNvbW1hbmQubmFtZSA9PSBcIm1vdXNlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIGN1cnJlbnQgb3BlcmF0aW9uIGlzIG1vdXNlZG93biwgd2Ugd2FpdCBmb3IgdGhlIG1vdXNldXAgdG8gZW5kIHRoZSBvcGVyYXRpb24uXG4gICAgICAgICAgICAgICAgLy8gU28gZHVyaW5nIGEgdXNlciBzZWxlY3Rpb24sIHdlIHdvdWxkIG9ubHkgZW5kIHRoZSBvcGVyYXRpb24gd2hlbiB0aGUgZmluYWwgc2VsZWN0aW9uIGlzIGtub3duLlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY3VycmVudFNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uLnRvSlNPTigpO1xuICAgICAgICAgICAgdGhpcy5jdXJPcC5zZWxlY3Rpb25BZnRlciA9IGN1cnJlbnRTZWxlY3Rpb247XG4gICAgICAgICAgICB0aGlzLiRsYXN0U2VsID0gdGhpcy5zZWxlY3Rpb24udG9KU09OKCk7XG4gICAgICAgICAgICB0aGlzLmdldFVuZG9NYW5hZ2VyKCkuYWRkU2VsZWN0aW9uKGN1cnJlbnRTZWxlY3Rpb24pO1xuXG4gICAgICAgICAgICB0aGlzLl9zaWduYWwoXCJiZWZvcmVFbmRPcGVyYXRpb25cIik7XG4gICAgICAgICAgICB0aGlzLnByZXZPcCA9IHRoaXMuY3VyT3A7XG4gICAgICAgICAgICB0aGlzLmN1ck9wID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3NpZ25hbChcImVuZE9wZXJhdGlvblwiLCBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGBFZGl0U2Vzc2lvbmAgdG8gcG9pbnQgdG8gYSBuZXcgYERvY3VtZW50YC4gSWYgYSBgQmFja2dyb3VuZFRva2VuaXplcmAgZXhpc3RzLCBpdCBhbHNvIHBvaW50cyB0byBgZG9jYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RG9jdW1lbnR9IGRvYyBUaGUgbmV3IGBEb2N1bWVudGAgdG8gdXNlXG4gICAgICpcbiAgICAgKiovXG4gICAgc2V0RG9jdW1lbnQoZG9jKSB7XG4gICAgICAgIGlmICh0aGlzLmRvYylcbiAgICAgICAgICAgIHRoaXMuZG9jLm9mZihcImNoYW5nZVwiLCB0aGlzLiRvbkNoYW5nZSk7XG4gICAgICAgIHRoaXMuZG9jID0gZG9jO1xuICAgICAgICBkb2Mub24oXCJjaGFuZ2VcIiwgdGhpcy4kb25DaGFuZ2UsIHRydWUpO1xuXG4gICAgICAgIHRoaXMuYmdUb2tlbml6ZXIuc2V0RG9jdW1lbnQodGhpcy5nZXREb2N1bWVudCgpKTtcblxuICAgICAgICB0aGlzLnJlc2V0Q2FjaGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYERvY3VtZW50YCBhc3NvY2lhdGVkIHdpdGggdGhpcyBzZXNzaW9uLlxuICAgICAqIEByZXR1cm4ge0RvY3VtZW50fVxuICAgICAqKi9cbiAgICBnZXREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBcIndpZGdldE1hbmFnZXJcIiBmcm9tIEVkaXRTZXNzaW9uXG4gICAgICogXG4gICAgICogQHJldHVybnMge0xpbmVXaWRnZXRzfSBvYmplY3RcbiAgICAgKi9cbiAgICBnZXQgd2lkZ2V0TWFuYWdlcigpIHtcbiAgICAgICAgY29uc3Qgd2lkZ2V0TWFuYWdlciA9IG5ldyBMaW5lV2lkZ2V0cyh0aGlzKTtcbiAgICAgICAgLy8gdG9kbyByZW1vdmUgdGhlIHdpZGdldE1hbmdlciBhc3NpZ25lbWVudCBmcm9tIGxpbmVXaWRnZXRzIGNvbnN0cnVjdG9yIHdoZW4gaW50cm9kdWNpbmcgYnJlYWtpbmcgY2hhbmdlc1xuICAgICAgICB0aGlzLndpZGdldE1hbmFnZXIgPSB3aWRnZXRNYW5hZ2VyO1xuXG4gICAgICAgIGlmICh0aGlzLiRlZGl0b3IpXG4gICAgICAgICAgICB3aWRnZXRNYW5hZ2VyLmF0dGFjaCh0aGlzLiRlZGl0b3IpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHdpZGdldE1hbmFnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IFwid2lkZ2V0TWFuYWdlclwiIGluIEVkaXRTZXNzaW9uXG4gICAgICogXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIHNldCB3aWRnZXRNYW5hZ2VyKHZhbHVlKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndpZGdldE1hbmFnZXJcIiwge1xuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsIFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkb2NSb3cgVGhlIHJvdyB0byB3b3JrIHdpdGhcbiAgICAgKlxuICAgICAqKi9cbiAgICAkcmVzZXRSb3dDYWNoZShkb2NSb3cpIHtcbiAgICAgICAgaWYgKCFkb2NSb3cpIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyW119ICovXG4gICAgICAgICAgICB0aGlzLiRkb2NSb3dDYWNoZSA9IFtdO1xuICAgICAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJbXX0gKi9cbiAgICAgICAgICAgIHRoaXMuJHNjcmVlblJvd0NhY2hlID0gW107XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGwgPSB0aGlzLiRkb2NSb3dDYWNoZS5sZW5ndGg7XG4gICAgICAgIHZhciBpID0gdGhpcy4kZ2V0Um93Q2FjaGVJbmRleCh0aGlzLiRkb2NSb3dDYWNoZSwgZG9jUm93KSArIDE7XG4gICAgICAgIGlmIChsID4gaSkge1xuICAgICAgICAgICAgdGhpcy4kZG9jUm93Q2FjaGUuc3BsaWNlKGksIGwpO1xuICAgICAgICAgICAgdGhpcy4kc2NyZWVuUm93Q2FjaGUuc3BsaWNlKGksIGwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJGdldFJvd0NhY2hlSW5kZXgoY2FjaGVBcnJheSwgdmFsKSB7XG4gICAgICAgIHZhciBsb3cgPSAwO1xuICAgICAgICB2YXIgaGkgPSBjYWNoZUFycmF5Lmxlbmd0aCAtIDE7XG5cbiAgICAgICAgd2hpbGUgKGxvdyA8PSBoaSkge1xuICAgICAgICAgICAgdmFyIG1pZCA9IChsb3cgKyBoaSkgPj4gMTtcbiAgICAgICAgICAgIHZhciBjID0gY2FjaGVBcnJheVttaWRdO1xuXG4gICAgICAgICAgICBpZiAodmFsID4gYylcbiAgICAgICAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICAgICAgZWxzZSBpZiAodmFsIDwgYylcbiAgICAgICAgICAgICAgICBoaSA9IG1pZCAtIDE7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsb3cgLTE7XG4gICAgfVxuXG4gICAgcmVzZXRDYWNoZXMoKSB7XG4gICAgICAgIHRoaXMuJG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kd3JhcERhdGEgPSBbXTtcbiAgICAgICAgdGhpcy4kcm93TGVuZ3RoQ2FjaGUgPSBbXTtcbiAgICAgICAgdGhpcy4kcmVzZXRSb3dDYWNoZSgwKTtcbiAgICAgICAgaWYgKCF0aGlzLmRlc3Ryb3llZClcbiAgICAgICAgICAgIHRoaXMuYmdUb2tlbml6ZXIuc3RhcnQoMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGVcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkNoYW5nZUZvbGQoZSkge1xuICAgICAgICB2YXIgZm9sZCA9IGUuZGF0YTtcbiAgICAgICAgdGhpcy4kcmVzZXRSb3dDYWNoZShmb2xkLnN0YXJ0LnJvdyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RlbHRhfSBkZWx0YVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uQ2hhbmdlKGRlbHRhKSB7XG4gICAgICAgIHRoaXMuJG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kYmlkaUhhbmRsZXIub25DaGFuZ2UoZGVsdGEpO1xuICAgICAgICB0aGlzLiRyZXNldFJvd0NhY2hlKGRlbHRhLnN0YXJ0LnJvdyk7XG5cbiAgICAgICAgdmFyIHJlbW92ZWRGb2xkcyA9IHRoaXMuJHVwZGF0ZUludGVybmFsRGF0YU9uQ2hhbmdlKGRlbHRhKTtcbiAgICAgICAgaWYgKCF0aGlzLiRmcm9tVW5kbyAmJiB0aGlzLiR1bmRvTWFuYWdlcikge1xuICAgICAgICAgICAgaWYgKHJlbW92ZWRGb2xkcyAmJiByZW1vdmVkRm9sZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdW5kb01hbmFnZXIuYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB0aGlzIGFjdGlvbiB0eXBlIGlzIG1pc3NpbmcgaW4gdGhlIHR5cGVzXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJyZW1vdmVGb2xkc1wiLFxuICAgICAgICAgICAgICAgICAgICBmb2xkczogIHJlbW92ZWRGb2xkc1xuICAgICAgICAgICAgICAgIH0sIHRoaXMubWVyZ2VVbmRvRGVsdGFzKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lcmdlVW5kb0RlbHRhcyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiR1bmRvTWFuYWdlci5hZGQoZGVsdGEsIHRoaXMubWVyZ2VVbmRvRGVsdGFzKTtcbiAgICAgICAgICAgIHRoaXMubWVyZ2VVbmRvRGVsdGFzID0gdHJ1ZTtcblxuICAgICAgICAgICAgdGhpcy4kaW5mb3JtVW5kb01hbmFnZXIuc2NoZWR1bGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmdUb2tlbml6ZXIuJHVwZGF0ZU9uQ2hhbmdlKGRlbHRhKTtcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlXCIsIGRlbHRhKTtcbiAgICB9XG5cbiAgICBvblNlbGVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlU2VsZWN0aW9uXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNlc3Npb24gdGV4dC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgbmV3IHRleHQgdG8gcGxhY2VcbiAgICAgKiovXG4gICAgc2V0VmFsdWUodGV4dCkge1xuICAgICAgICB0aGlzLmRvYy5zZXRWYWx1ZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24ubW92ZVRvKDAsIDApO1xuXG4gICAgICAgIHRoaXMuJHJlc2V0Um93Q2FjaGUoMCk7XG4gICAgICAgIHRoaXMuc2V0VW5kb01hbmFnZXIodGhpcy4kdW5kb01hbmFnZXIpO1xuICAgICAgICB0aGlzLmdldFVuZG9NYW5hZ2VyKCkucmVzZXQoKTtcbiAgICB9XG5cbiAgICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBpbnN0YW5jZSBvZiBFZGl0U2Vzc2lvbiB3aXRoIHN0YXRlIGZyb20gSlNPTi5cbiAgICAgKiBAbWV0aG9kIGZyb21KU09OXG4gICAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBzZXNzaW9uIFRoZSBFZGl0U2Vzc2lvbiBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyB7RWRpdFNlc3Npb259XG4gICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNlc3Npb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXNzaW9uID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICBzZXNzaW9uID0gSlNPTi5wYXJzZShzZXNzaW9uKTtcbiAgICAgICAgY29uc3QgdW5kb01hbmFnZXIgPSBuZXcgVW5kb01hbmFnZXIoKTtcbiAgICAgICAgdW5kb01hbmFnZXIuJHVuZG9TdGFjayA9IHNlc3Npb24uaGlzdG9yeS51bmRvO1xuICAgICAgICB1bmRvTWFuYWdlci4kcmVkb1N0YWNrID0gc2Vzc2lvbi5oaXN0b3J5LnJlZG87XG4gICAgICAgIHVuZG9NYW5hZ2VyLm1hcmsgPSBzZXNzaW9uLmhpc3RvcnkubWFyaztcbiAgICAgICAgdW5kb01hbmFnZXIuJHJldiA9IHNlc3Npb24uaGlzdG9yeS5yZXY7XG5cbiAgICAgICAgY29uc3QgZWRpdFNlc3Npb24gPSBuZXcgRWRpdFNlc3Npb24oc2Vzc2lvbi52YWx1ZSk7XG4gICAgICAgIHNlc3Npb24uZm9sZHMuZm9yRWFjaChmdW5jdGlvbihmb2xkKSB7XG4gICAgICAgICAgZWRpdFNlc3Npb24uYWRkRm9sZChcIi4uLlwiLCBSYW5nZS5mcm9tUG9pbnRzKGZvbGQuc3RhcnQsIGZvbGQuZW5kKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBlZGl0U2Vzc2lvbi5zZXRBbm5vdGF0aW9ucyhzZXNzaW9uLmFubm90YXRpb25zKTtcbiAgICAgICAgZWRpdFNlc3Npb24uc2V0QnJlYWtwb2ludHMoc2Vzc2lvbi5icmVha3BvaW50cyk7XG4gICAgICAgIGVkaXRTZXNzaW9uLnNldE1vZGUoc2Vzc2lvbi5tb2RlKTtcbiAgICAgICAgZWRpdFNlc3Npb24uc2V0U2Nyb2xsTGVmdChzZXNzaW9uLnNjcm9sbExlZnQpO1xuICAgICAgICBlZGl0U2Vzc2lvbi5zZXRTY3JvbGxUb3Aoc2Vzc2lvbi5zY3JvbGxUb3ApO1xuICAgICAgICBlZGl0U2Vzc2lvbi5zZXRVbmRvTWFuYWdlcih1bmRvTWFuYWdlcik7XG4gICAgICAgIGVkaXRTZXNzaW9uLnNlbGVjdGlvbi5mcm9tSlNPTihzZXNzaW9uLnNlbGVjdGlvbik7XG5cbiAgICAgICAgcmV0dXJuIGVkaXRTZXNzaW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgZWRpdCBzZXNzaW9uLlxuICAgICAqIEBtZXRob2QgdG9KU09OXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbm5vdGF0aW9uczogdGhpcy4kYW5ub3RhdGlvbnMsXG4gICAgICAgICAgICBicmVha3BvaW50czogdGhpcy4kYnJlYWtwb2ludHMsXG4gICAgICAgICAgICBmb2xkczogdGhpcy5nZXRBbGxGb2xkcygpLm1hcChmdW5jdGlvbihmb2xkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvbGQucmFuZ2U7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMuZ2V0VW5kb01hbmFnZXIoKSxcbiAgICAgICAgICAgIG1vZGU6IHRoaXMuJG1vZGUuJGlkLFxuICAgICAgICAgICAgc2Nyb2xsTGVmdDogdGhpcy4kc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIHNjcm9sbFRvcDogdGhpcy4kc2Nyb2xsVG9wLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiB0aGlzLnNlbGVjdGlvbi50b0pTT04oKSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmRvYy5nZXRWYWx1ZSgpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBbW0RvY3VtZW50IGBEb2N1bWVudGBdXSBhcyBhIHN0cmluZy5cbiAgICAgKiBAbWV0aG9kIHRvU3RyaW5nXG4gICAgICogQHJldHVybnMge1N0cmluZ31cbiAgICAgKiBAYWxpYXMgRWRpdFNlc3Npb24uZ2V0VmFsdWVcbiAgICAgKlxuICAgICAqKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jLmdldFZhbHVlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBzZWxlY3Rpb24gb2JqZWN0LlxuICAgICAqIEByZXR1cm5zIHtTZWxlY3Rpb259XG4gICAgICoqL1xuICAgIGdldFNlbGVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHs6QmFja2dyb3VuZFRva2VuaXplci5nZXRTdGF0ZX1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSByb3cgdG8gc3RhcnQgYXRcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nIHwgc3RyaW5nW119XG4gICAgICogQHJlbGF0ZWQgQmFja2dyb3VuZFRva2VuaXplci5nZXRTdGF0ZVxuICAgICAqKi9cbiAgICBnZXRTdGF0ZShyb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmdUb2tlbml6ZXIuZ2V0U3RhdGUocm93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdG9rZW5pemluZyBhdCB0aGUgcm93IGluZGljYXRlZC4gUmV0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cyBvZiB0aGUgdG9rZW5pemVkIHJvd3MuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IHRvIHN0YXJ0IGF0XG4gICAgICogQHJldHVybnMge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuVG9rZW5bXX1cbiAgICAgKiovXG4gICAgZ2V0VG9rZW5zKHJvdykge1xuICAgICAgICByZXR1cm4gdGhpcy5iZ1Rva2VuaXplci5nZXRUb2tlbnMocm93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBpbmRpY2F0aW5nIHRoZSB0b2tlbiBhdCB0aGUgY3VycmVudCByb3cuIFRoZSBvYmplY3QgaGFzIHR3byBwcm9wZXJ0aWVzOiBgaW5kZXhgIGFuZCBgc3RhcnRgLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgVGhlIHJvdyBudW1iZXIgdG8gcmV0cmlldmUgZnJvbVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gVGhlIGNvbHVtbiBudW1iZXIgdG8gcmV0cmlldmUgZnJvbVxuICAgICAqIEByZXR1cm5zIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlRva2VufVxuICAgICAqXG4gICAgICoqL1xuICAgIGdldFRva2VuQXQocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdmFyIHRva2VucyA9IHRoaXMuYmdUb2tlbml6ZXIuZ2V0VG9rZW5zKHJvdyk7XG4gICAgICAgIHZhciB0b2tlbiwgYyA9IDA7XG4gICAgICAgIGlmIChjb2x1bW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGMgPSB0aGlzLmdldExpbmUocm93KS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGMgKz0gdG9rZW5zW2ldLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoYyA+PSBjb2x1bW4pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICBpZiAoIXRva2VuKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHRva2VuLmluZGV4ID0gaTtcbiAgICAgICAgdG9rZW4uc3RhcnQgPSBjIC0gdG9rZW4udmFsdWUubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdW5kbyBtYW5hZ2VyLlxuICAgICAqIEBwYXJhbSB7VW5kb01hbmFnZXJ9IHVuZG9NYW5hZ2VyIFRoZSBuZXcgdW5kbyBtYW5hZ2VyXG4gICAgICoqL1xuICAgIHNldFVuZG9NYW5hZ2VyKHVuZG9NYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuJHVuZG9NYW5hZ2VyID0gdW5kb01hbmFnZXI7XG5cbiAgICAgICAgaWYgKHRoaXMuJGluZm9ybVVuZG9NYW5hZ2VyKVxuICAgICAgICAgICAgdGhpcy4kaW5mb3JtVW5kb01hbmFnZXIuY2FuY2VsKCk7XG5cbiAgICAgICAgaWYgKHVuZG9NYW5hZ2VyKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB1bmRvTWFuYWdlci5hZGRTZXNzaW9uKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy4kc3luY0luZm9ybVVuZG9NYW5hZ2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc2VsZi4kaW5mb3JtVW5kb01hbmFnZXIuY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5tZXJnZVVuZG9EZWx0YXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLiRpbmZvcm1VbmRvTWFuYWdlciA9IGxhbmcuZGVsYXllZENhbGwodGhpcy4kc3luY0luZm9ybVVuZG9NYW5hZ2VyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJHN5bmNJbmZvcm1VbmRvTWFuYWdlciA9IGZ1bmN0aW9uKCkge307XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdGFydHMgYSBuZXcgZ3JvdXAgaW4gdW5kbyBoaXN0b3J5XG4gICAgICoqL1xuICAgIG1hcmtVbmRvR3JvdXAoKSB7XG4gICAgICAgIGlmICh0aGlzLiRzeW5jSW5mb3JtVW5kb01hbmFnZXIpXG4gICAgICAgICAgICB0aGlzLiRzeW5jSW5mb3JtVW5kb01hbmFnZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHVuZG8gbWFuYWdlci5cbiAgICAgKiBAcmV0dXJucyB7VW5kb01hbmFnZXJ9XG4gICAgICoqL1xuICAgIGdldFVuZG9NYW5hZ2VyKCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiB0aGlzLiR1bmRvTWFuYWdlciB8fCB0aGlzLiRkZWZhdWx0VW5kb01hbmFnZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCB2YWx1ZSBmb3IgdGFicy4gSWYgdGhlIHVzZXIgaXMgdXNpbmcgc29mdCB0YWJzLCB0aGlzIHdpbGwgYmUgYSBzZXJpZXMgb2Ygc3BhY2VzIChkZWZpbmVkIGJ5IFtbRWRpdFNlc3Npb24uZ2V0VGFiU2l6ZSBgZ2V0VGFiU2l6ZSgpYF1dKTsgb3RoZXJ3aXNlIGl0J3Mgc2ltcGx5IGAnXFx0J2AuXG4gICAgICogQHJldHVybnMge1N0cmluZ31cbiAgICAgKiovXG4gICAgZ2V0VGFiU3RyaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRVc2VTb2Z0VGFicygpKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFuZy5zdHJpbmdSZXBlYXQoXCIgXCIsIHRoaXMuZ2V0VGFiU2l6ZSgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIlxcdFwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFzcyBgdHJ1ZWAgdG8gZW5hYmxlIHRoZSB1c2Ugb2Ygc29mdCB0YWJzLiBTb2Z0IHRhYnMgbWVhbnMgeW91J3JlIHVzaW5nIHNwYWNlcyBpbnN0ZWFkIG9mIHRoZSB0YWIgY2hhcmFjdGVyIChgJ1xcdCdgKS5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHZhbCBWYWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRvIHVzZSBzb2Z0IHRhYnNcbiAgICAgKiovXG4gICAgc2V0VXNlU29mdFRhYnModmFsKSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKFwidXNlU29mdFRhYnNcIiwgdmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBzb2Z0IHRhYnMgYXJlIGJlaW5nIHVzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBnZXRVc2VTb2Z0VGFicygpIHtcbiAgICAgICAgLy8gdG9kbyBtaWdodCBuZWVkIG1vcmUgZ2VuZXJhbCB3YXkgZm9yIGNoYW5naW5nIHNldHRpbmdzIGZyb20gbW9kZSwgYnV0IHRoaXMgaXMgb2sgZm9yIG5vd1xuICAgICAgICByZXR1cm4gdGhpcy4kdXNlU29mdFRhYnMgJiYgIXRoaXMuJG1vZGUuJGluZGVudFdpdGhUYWJzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG51bWJlciBvZiBzcGFjZXMgdGhhdCBkZWZpbmUgYSBzb2Z0IHRhYjsgZm9yIGV4YW1wbGUsIHBhc3NpbmcgaW4gYDRgIHRyYW5zZm9ybXMgdGhlIHNvZnQgdGFicyB0byBiZSBlcXVpdmFsZW50IHRvIGZvdXIgc3BhY2VzLiBUaGlzIGZ1bmN0aW9uIGFsc28gZW1pdHMgdGhlIGBjaGFuZ2VUYWJTaXplYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGFiU2l6ZSBUaGUgbmV3IHRhYiBzaXplXG4gICAgICoqL1xuICAgIHNldFRhYlNpemUodGFiU2l6ZSkge1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcInRhYlNpemVcIiwgdGFiU2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGFiIHNpemUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRUYWJTaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdGFiU2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY2hhcmFjdGVyIGF0IHRoZSBwb3NpdGlvbiBpcyBhIHNvZnQgdGFiLlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc2l0aW9uIFRoZSBwb3NpdGlvbiB0byBjaGVja1xuICAgICAqKi9cbiAgICBpc1RhYlN0b3AocG9zaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHVzZVNvZnRUYWJzICYmIChwb3NpdGlvbi5jb2x1bW4gJSB0aGlzLiR0YWJTaXplID09PSAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciBrZXlib2FyZCBuYXZpZ2F0aW9uIG9mIHNvZnQgdGFicyBtb3ZlcyB0aGUgY3Vyc29yIHdpdGhpbiB0aGUgc29mdCB0YWIsIHJhdGhlciB0aGFuIG92ZXJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG5hdmlnYXRlV2l0aGluU29mdFRhYnMgVmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0byBuYXZpZ2F0ZSB3aXRoaW4gc29mdCB0YWJzXG4gICAgICoqL1xuICAgIHNldE5hdmlnYXRlV2l0aGluU29mdFRhYnMobmF2aWdhdGVXaXRoaW5Tb2Z0VGFicykge1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcIm5hdmlnYXRlV2l0aGluU29mdFRhYnNcIiwgbmF2aWdhdGVXaXRoaW5Tb2Z0VGFicyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGtleWJvYXJkIG5hdmlnYXRpb24gbW92ZXMgdGhlIGN1cnNvciB3aXRoaW4gc29mdCB0YWJzLCBgZmFsc2VgIGlmIGl0IG1vdmVzIHRoZSBjdXJzb3Igb3ZlciBzb2Z0IHRhYnMuXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGdldE5hdmlnYXRlV2l0aGluU29mdFRhYnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuYXZpZ2F0ZVdpdGhpblNvZnRUYWJzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhc3MgaW4gYHRydWVgIHRvIGVuYWJsZSBvdmVyd3JpdGVzIGluIHlvdXIgc2Vzc2lvbiwgb3IgYGZhbHNlYCB0byBkaXNhYmxlLlxuICAgICAqXG4gICAgICogSWYgb3ZlcndyaXRlcyBpcyBlbmFibGVkLCBhbnkgdGV4dCB5b3UgZW50ZXIgd2lsbCB0eXBlIG92ZXIgYW55IHRleHQgYWZ0ZXIgaXQuIElmIHRoZSB2YWx1ZSBvZiBgb3ZlcndyaXRlYCBjaGFuZ2VzLCB0aGlzIGZ1bmN0aW9uIGFsc28gZW1pdHMgdGhlIGBjaGFuZ2VPdmVyd3JpdGVgIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBvdmVyd3JpdGUgRGVmaW5lcyB3aGV0aGVyIG9yIG5vdCB0byBzZXQgb3ZlcndyaXRlc1xuICAgICAqXG4gICAgICoqL1xuICAgIHNldE92ZXJ3cml0ZShvdmVyd3JpdGUpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJvdmVyd3JpdGVcIiwgb3ZlcndyaXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBvdmVyd3JpdGVzIGFyZSBlbmFibGVkOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiovXG4gICAgZ2V0T3ZlcndyaXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kb3ZlcndyaXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIG92ZXJ3cml0ZSB0byB0aGUgb3Bwb3NpdGUgb2Ygd2hhdGV2ZXIgaXQgY3VycmVudGx5IGlzLlxuICAgICAqKi9cbiAgICB0b2dnbGVPdmVyd3JpdGUoKSB7XG4gICAgICAgIHRoaXMuc2V0T3ZlcndyaXRlKCF0aGlzLiRvdmVyd3JpdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYGNsYXNzTmFtZWAgdG8gdGhlIGByb3dgLCB0byBiZSB1c2VkIGZvciBDU1Mgc3R5bGluZ3MgYW5kIHdoYXRub3QuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IG51bWJlclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWUgVGhlIGNsYXNzIHRvIGFkZFxuICAgICAqKi9cbiAgICBhZGRHdXR0ZXJEZWNvcmF0aW9uKHJvdywgY2xhc3NOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy4kZGVjb3JhdGlvbnNbcm93XSlcbiAgICAgICAgICAgIHRoaXMuJGRlY29yYXRpb25zW3Jvd10gPSBcIlwiO1xuICAgICAgICB0aGlzLiRkZWNvcmF0aW9uc1tyb3ddICs9IFwiIFwiICsgY2xhc3NOYW1lO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VCcmVha3BvaW50XCIsIHt9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGBjbGFzc05hbWVgIGZyb20gdGhlIGByb3dgLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgVGhlIHJvdyBudW1iZXJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lIFRoZSBjbGFzcyB0byBhZGRcbiAgICAgKiovXG4gICAgcmVtb3ZlR3V0dGVyRGVjb3JhdGlvbihyb3csIGNsYXNzTmFtZSkge1xuICAgICAgICB0aGlzLiRkZWNvcmF0aW9uc1tyb3ddID0gKHRoaXMuJGRlY29yYXRpb25zW3Jvd10gfHwgXCJcIikucmVwbGFjZShcIiBcIiArIGNsYXNzTmFtZSwgXCJcIik7XG4gICAgICAgIHRoaXMuX3NpZ25hbChcImNoYW5nZUJyZWFrcG9pbnRcIiwge30pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2Ygc3RyaW5ncywgaW5kaWNhdGluZyB0aGUgYnJlYWtwb2ludCBjbGFzcyAoaWYgYW55KSBhcHBsaWVkIHRvIGVhY2ggcm93LlxuICAgICAqIEByZXR1cm5zIHtTdHJpbmdbXX1cbiAgICAgKiovXG4gICAgZ2V0QnJlYWtwb2ludHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRicmVha3BvaW50cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgYnJlYWtwb2ludCBvbiBldmVyeSByb3cgbnVtYmVyIGdpdmVuIGJ5IGByb3dzYC4gVGhpcyBmdW5jdGlvbiBhbHNvIGVtaXRlcyB0aGUgYCdjaGFuZ2VCcmVha3BvaW50J2AgZXZlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJbXX0gcm93cyBBbiBhcnJheSBvZiByb3cgaW5kaWNlc1xuICAgICAqKi9cbiAgICBzZXRCcmVha3BvaW50cyhyb3dzKSB7XG4gICAgICAgIHRoaXMuJGJyZWFrcG9pbnRzID0gW107XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxyb3dzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLiRicmVha3BvaW50c1tyb3dzW2ldXSA9IFwiYWNlX2JyZWFrcG9pbnRcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VCcmVha3BvaW50XCIsIHt9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBicmVha3BvaW50cyBvbiB0aGUgcm93cy4gVGhpcyBmdW5jdGlvbiBhbHNvIGVtaXRzIHRoZSBgJ2NoYW5nZUJyZWFrcG9pbnQnYCBldmVudC5cbiAgICAgKiovXG4gICAgY2xlYXJCcmVha3BvaW50cygpIHtcbiAgICAgICAgdGhpcy4kYnJlYWtwb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlQnJlYWtwb2ludFwiLCB7fSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIGJyZWFrcG9pbnQgb24gdGhlIHJvdyBudW1iZXIgZ2l2ZW4gYnkgYHJvd2AuIFRoaXMgZnVuY3Rpb24gYWxzbyBlbWl0cyB0aGUgYCdjaGFuZ2VCcmVha3BvaW50J2AgZXZlbnQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyBpbmRleFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWUgQ2xhc3Mgb2YgdGhlIGJyZWFrcG9pbnRcbiAgICAgKiovXG4gICAgc2V0QnJlYWtwb2ludChyb3csIGNsYXNzTmFtZSkge1xuICAgICAgICBpZiAoY2xhc3NOYW1lID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBjbGFzc05hbWUgPSBcImFjZV9icmVha3BvaW50XCI7XG4gICAgICAgIGlmIChjbGFzc05hbWUpXG4gICAgICAgICAgICB0aGlzLiRicmVha3BvaW50c1tyb3ddID0gY2xhc3NOYW1lO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgdGhpcy4kYnJlYWtwb2ludHNbcm93XTtcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlQnJlYWtwb2ludFwiLCB7fSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGJyZWFrcG9pbnQgb24gdGhlIHJvdyBudW1iZXIgZ2l2ZW4gYnkgYHJvd2AuIFRoaXMgZnVuY3Rpb24gYWxzbyBlbWl0cyB0aGUgYCdjaGFuZ2VCcmVha3BvaW50J2AgZXZlbnQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyBpbmRleFxuICAgICAqKi9cbiAgICBjbGVhckJyZWFrcG9pbnQocm93KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLiRicmVha3BvaW50c1tyb3ddO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VCcmVha3BvaW50XCIsIHt9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IG1hcmtlciB0byB0aGUgZ2l2ZW4gYFJhbmdlYC4gSWYgYGluRnJvbnRgIGlzIGB0cnVlYCwgYSBmcm9udCBtYXJrZXIgaXMgZGVmaW5lZCwgYW5kIHRoZSBgJ2NoYW5nZUZyb250TWFya2VyJ2AgZXZlbnQgZmlyZXM7IG90aGVyd2lzZSwgdGhlIGAnY2hhbmdlQmFja01hcmtlcidgIGV2ZW50IGZpcmVzLlxuICAgICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlIERlZmluZSB0aGUgcmFuZ2Ugb2YgdGhlIG1hcmtlclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGF6eiBTZXQgdGhlIENTUyBjbGFzcyBmb3IgdGhlIG1hcmtlclxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5NYXJrZXJSZW5kZXJlciB8IFwiZnVsbExpbmVcIiB8IFwic2NyZWVuTGluZVwiIHwgXCJ0ZXh0XCIgfCBcImxpbmVcIn0gW3R5cGVdIElkZW50aWZ5IHRoZSByZW5kZXJlciB0eXBlIG9mIHRoZSBtYXJrZXIuIElmIHN0cmluZyBwcm92aWRlZCwgY29ycmVzcG9uZGluZyBidWlsdC1pbiByZW5kZXJlciBpcyB1c2VkLiBTdXBwb3J0ZWQgc3RyaW5nIHR5cGVzIGFyZSBcImZ1bGxMaW5lXCIsIFwic2NyZWVuTGluZVwiLCBcInRleHRcIiBvciBcImxpbmVcIi4gSWYgYSBGdW5jdGlvbiBpcyBwcm92aWRlZCwgdGhhdCBGdW5jdGlvbiBpcyB1c2VkIGFzIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2luRnJvbnRdIFNldCB0byBgdHJ1ZWAgdG8gZXN0YWJsaXNoIGEgZnJvbnQgbWFya2VyXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBuZXcgbWFya2VyIGlkXG4gICAgICoqL1xuICAgIGFkZE1hcmtlcihyYW5nZSwgY2xhenosIHR5cGUsIGluRnJvbnQpIHtcbiAgICAgICAgdmFyIGlkID0gdGhpcy4kbWFya2VySWQrKztcblxuICAgICAgICB2YXIgbWFya2VyID0ge1xuICAgICAgICAgICAgcmFuZ2UgOiByYW5nZSxcbiAgICAgICAgICAgIHR5cGUgOiB0eXBlIHx8IFwibGluZVwiLFxuICAgICAgICAgICAgcmVuZGVyZXI6IHR5cGVvZiB0eXBlID09IFwiZnVuY3Rpb25cIiA/IHR5cGUgOiBudWxsLFxuICAgICAgICAgICAgY2xhenogOiBjbGF6eixcbiAgICAgICAgICAgIGluRnJvbnQ6ICEhaW5Gcm9udCxcbiAgICAgICAgICAgIGlkOiBpZFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChpbkZyb250KSB7XG4gICAgICAgICAgICB0aGlzLiRmcm9udE1hcmtlcnNbaWRdID0gbWFya2VyO1xuICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlRnJvbnRNYXJrZXJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRiYWNrTWFya2Vyc1tpZF0gPSBtYXJrZXI7XG4gICAgICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VCYWNrTWFya2VyXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBkeW5hbWljIG1hcmtlciB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuTWFya2VyTGlrZX0gbWFya2VyIG9iamVjdCB3aXRoIHVwZGF0ZSBtZXRob2RcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtpbkZyb250XSBTZXQgdG8gYHRydWVgIHRvIGVzdGFibGlzaCBhIGZyb250IG1hcmtlclxuICAgICAqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5NYXJrZXJMaWtlfSBUaGUgYWRkZWQgbWFya2VyXG4gICAgICoqL1xuICAgIGFkZER5bmFtaWNNYXJrZXIobWFya2VyLCBpbkZyb250KSB7XG4gICAgICAgIGlmICghbWFya2VyLnVwZGF0ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIGlkID0gdGhpcy4kbWFya2VySWQrKztcbiAgICAgICAgbWFya2VyLmlkID0gaWQ7XG4gICAgICAgIG1hcmtlci5pbkZyb250ID0gISFpbkZyb250O1xuXG4gICAgICAgIGlmIChpbkZyb250KSB7XG4gICAgICAgICAgICB0aGlzLiRmcm9udE1hcmtlcnNbaWRdID0gbWFya2VyO1xuICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlRnJvbnRNYXJrZXJcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRiYWNrTWFya2Vyc1tpZF0gPSBtYXJrZXI7XG4gICAgICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VCYWNrTWFya2VyXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hcmtlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBtYXJrZXIgd2l0aCB0aGUgc3BlY2lmaWVkIElELiBJZiB0aGlzIG1hcmtlciB3YXMgaW4gZnJvbnQsIHRoZSBgJ2NoYW5nZUZyb250TWFya2VyJ2AgZXZlbnQgaXMgZW1pdHRlZC4gSWYgdGhlIG1hcmtlciB3YXMgaW4gdGhlIGJhY2ssIHRoZSBgJ2NoYW5nZUJhY2tNYXJrZXInYCBldmVudCBpcyBlbWl0dGVkLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtYXJrZXJJZCBBIG51bWJlciByZXByZXNlbnRpbmcgYSBtYXJrZXJcbiAgICAgKiovXG4gICAgcmVtb3ZlTWFya2VyKG1hcmtlcklkKSB7XG4gICAgICAgIHZhciBtYXJrZXIgPSB0aGlzLiRmcm9udE1hcmtlcnNbbWFya2VySWRdIHx8IHRoaXMuJGJhY2tNYXJrZXJzW21hcmtlcklkXTtcbiAgICAgICAgaWYgKCFtYXJrZXIpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIG1hcmtlcnMgPSBtYXJrZXIuaW5Gcm9udCA/IHRoaXMuJGZyb250TWFya2VycyA6IHRoaXMuJGJhY2tNYXJrZXJzO1xuICAgICAgICBkZWxldGUgKG1hcmtlcnNbbWFya2VySWRdKTtcbiAgICAgICAgdGhpcy5fc2lnbmFsKG1hcmtlci5pbkZyb250ID8gXCJjaGFuZ2VGcm9udE1hcmtlclwiIDogXCJjaGFuZ2VCYWNrTWFya2VyXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIG9mIHRoZSBtYXJrZXJzLCBlaXRoZXIgZnJvbnQgb3IgYmFjay5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtpbkZyb250XSBJZiBgdHJ1ZWAsIGluZGljYXRlcyB5b3Ugb25seSB3YW50IGZyb250IG1hcmtlcnM7IGBmYWxzZWAgaW5kaWNhdGVzIG9ubHkgYmFjayBtYXJrZXJzXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7e1tpZDogbnVtYmVyXTogaW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5NYXJrZXJMaWtlfX1cbiAgICAgKiovXG4gICAgZ2V0TWFya2VycyhpbkZyb250KSB7XG4gICAgICAgIHJldHVybiBpbkZyb250ID8gdGhpcy4kZnJvbnRNYXJrZXJzIDogdGhpcy4kYmFja01hcmtlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IHJlXG4gICAgICovXG4gICAgaGlnaGxpZ2h0KHJlKSB7XG4gICAgICAgIGlmICghdGhpcy4kc2VhcmNoSGlnaGxpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgaGlnaGxpZ2h0ID0gbmV3IFNlYXJjaEhpZ2hsaWdodChudWxsLCBcImFjZV9zZWxlY3RlZC13b3JkXCIsIFwidGV4dFwiKTtcbiAgICAgICAgICAgIHRoaXMuJHNlYXJjaEhpZ2hsaWdodCA9IHRoaXMuYWRkRHluYW1pY01hcmtlcihoaWdobGlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHNlYXJjaEhpZ2hsaWdodC5zZXRSZWdleHAocmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGV4cGVyaW1lbnRhbFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRSb3dcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhenpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpbkZyb250XVxuICAgICAqIEByZXR1cm4ge1JhbmdlfVxuICAgICAqL1xuICAgIGhpZ2hsaWdodExpbmVzKHN0YXJ0Um93LCBlbmRSb3csIGNsYXp6LCBpbkZyb250KSB7XG4gICAgICAgIGlmICh0eXBlb2YgZW5kUm93ICE9IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIGNsYXp6ID0gZW5kUm93O1xuICAgICAgICAgICAgZW5kUm93ID0gc3RhcnRSb3c7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjbGF6eilcbiAgICAgICAgICAgIGNsYXp6ID0gXCJhY2Vfc3RlcFwiO1xuXG4gICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShzdGFydFJvdywgMCwgZW5kUm93LCBJbmZpbml0eSk7XG4gICAgICAgIHJhbmdlLmlkID0gdGhpcy5hZGRNYXJrZXIocmFuZ2UsIGNsYXp6LCBcImZ1bGxMaW5lXCIsIGluRnJvbnQpO1xuICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBFcnJvcjpcbiAgICAgKiAge1xuICAgICAqICAgIHJvdzogMTIsXG4gICAgICogICAgY29sdW1uOiAyLCAvL2NhbiBiZSB1bmRlZmluZWRcbiAgICAgKiAgICB0ZXh0OiBcIk1pc3NpbmcgYXJndW1lbnRcIixcbiAgICAgKiAgICB0eXBlOiBcImVycm9yXCIgLy8gb3IgXCJ3YXJuaW5nXCIgb3IgXCJpbmZvXCJcbiAgICAgKiAgfVxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIFNldHMgYW5ub3RhdGlvbnMgZm9yIHRoZSBgRWRpdFNlc3Npb25gLiBUaGlzIGZ1bmN0aW9ucyBlbWl0cyB0aGUgYCdjaGFuZ2VBbm5vdGF0aW9uJ2AgZXZlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkFubm90YXRpb25bXX0gYW5ub3RhdGlvbnMgQSBsaXN0IG9mIGFubm90YXRpb25zXG4gICAgICoqL1xuICAgIHNldEFubm90YXRpb25zKGFubm90YXRpb25zKSB7XG4gICAgICAgIHRoaXMuJGFubm90YXRpb25zID0gYW5ub3RhdGlvbnM7XG4gICAgICAgIHRoaXMuX3NpZ25hbChcImNoYW5nZUFubm90YXRpb25cIiwge30pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFubm90YXRpb25zIGZvciB0aGUgYEVkaXRTZXNzaW9uYC5cbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Bbm5vdGF0aW9uW119XG4gICAgICoqL1xuICAgIGdldEFubm90YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kYW5ub3RhdGlvbnMgfHwgW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCB0aGUgYW5ub3RhdGlvbnMgZm9yIHRoaXMgc2Vzc2lvbi4gVGhpcyBmdW5jdGlvbiBhbHNvIHRyaWdnZXJzIHRoZSBgJ2NoYW5nZUFubm90YXRpb24nYCBldmVudC5cbiAgICAgKiovXG4gICAgY2xlYXJBbm5vdGF0aW9ucygpIHtcbiAgICAgICAgdGhpcy5zZXRBbm5vdGF0aW9ucyhbXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgYHRleHRgIGNvbnRhaW5zIGVpdGhlciB0aGUgbmV3bGluZSAoYFxcbmApIG9yIGNhcnJpYWdlLXJldHVybiAoJ1xccicpIGNoYXJhY3RlcnMsIGAkYXV0b05ld0xpbmVgIHN0b3JlcyB0aGF0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IEEgYmxvY2sgb2YgdGV4dFxuICAgICAqXG4gICAgICoqL1xuICAgICRkZXRlY3ROZXdMaW5lKHRleHQpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gdGV4dC5tYXRjaCgvXi4qPyhcXHI/XFxuKS9tKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLiRhdXRvTmV3TGluZSA9IG1hdGNoWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kYXV0b05ld0xpbmUgPSBcIlxcblwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBzdGFydGluZyByb3cgYW5kIGNvbHVtbiwgdGhpcyBtZXRob2QgcmV0dXJucyB0aGUgYFJhbmdlYCBvZiB0aGUgZmlyc3Qgd29yZCBib3VuZGFyeSBpdCBmaW5kcy5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSByb3cgdG8gc3RhcnQgYXRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIFRoZSBjb2x1bW4gdG8gc3RhcnQgYXRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtSYW5nZX1cbiAgICAgKiovXG4gICAgZ2V0V29yZFJhbmdlKHJvdywgY29sdW1uKSB7XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5nZXRMaW5lKHJvdyk7XG5cbiAgICAgICAgdmFyIGluVG9rZW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKGNvbHVtbiA+IDApXG4gICAgICAgICAgICBpblRva2VuID0gISFsaW5lLmNoYXJBdChjb2x1bW4gLSAxKS5tYXRjaCh0aGlzLnRva2VuUmUpO1xuXG4gICAgICAgIGlmICghaW5Ub2tlbilcbiAgICAgICAgICAgIGluVG9rZW4gPSAhIWxpbmUuY2hhckF0KGNvbHVtbikubWF0Y2godGhpcy50b2tlblJlKTtcblxuICAgICAgICBpZiAoaW5Ub2tlbilcbiAgICAgICAgICAgIHZhciByZSA9IHRoaXMudG9rZW5SZTtcbiAgICAgICAgZWxzZSBpZiAoL15cXHMrJC8udGVzdChsaW5lLnNsaWNlKGNvbHVtbi0xLCBjb2x1bW4rMSkpKVxuICAgICAgICAgICAgdmFyIHJlID0gL1xccy87XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHZhciByZSA9IHRoaXMubm9uVG9rZW5SZTtcblxuICAgICAgICB2YXIgc3RhcnQgPSBjb2x1bW47XG4gICAgICAgIGlmIChzdGFydCA+IDApIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBzdGFydC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKHN0YXJ0ID49IDAgJiYgbGluZS5jaGFyQXQoc3RhcnQpLm1hdGNoKHJlKSk7XG4gICAgICAgICAgICBzdGFydCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVuZCA9IGNvbHVtbjtcbiAgICAgICAgd2hpbGUgKGVuZCA8IGxpbmUubGVuZ3RoICYmIGxpbmUuY2hhckF0KGVuZCkubWF0Y2gocmUpKSB7XG4gICAgICAgICAgICBlbmQrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2Uocm93LCBzdGFydCwgcm93LCBlbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJhbmdlIG9mIGEgd29yZCwgaW5jbHVkaW5nIGl0cyByaWdodCB3aGl0ZXNwYWNlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgVGhlIHJvdyBudW1iZXIgdG8gc3RhcnQgZnJvbVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gVGhlIGNvbHVtbiBudW1iZXIgdG8gc3RhcnQgZnJvbVxuICAgICAqXG4gICAgICogQHJldHVybiB7UmFuZ2V9XG4gICAgICoqL1xuICAgIGdldEFXb3JkUmFuZ2Uocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdmFyIHdvcmRSYW5nZSA9IHRoaXMuZ2V0V29yZFJhbmdlKHJvdywgY29sdW1uKTtcbiAgICAgICAgdmFyIGxpbmUgPSB0aGlzLmdldExpbmUod29yZFJhbmdlLmVuZC5yb3cpO1xuXG4gICAgICAgIHdoaWxlIChsaW5lLmNoYXJBdCh3b3JkUmFuZ2UuZW5kLmNvbHVtbikubWF0Y2goL1sgXFx0XS8pKSB7XG4gICAgICAgICAgICB3b3JkUmFuZ2UuZW5kLmNvbHVtbiArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3b3JkUmFuZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogezpEb2N1bWVudC5zZXROZXdMaW5lTW9kZS5kZXNjfVxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5OZXdMaW5lTW9kZX0gbmV3TGluZU1vZGUgezpEb2N1bWVudC5zZXROZXdMaW5lTW9kZS5wYXJhbX1cbiAgICAgKlxuICAgICAqXG4gICAgICogQHJlbGF0ZWQgRG9jdW1lbnQuc2V0TmV3TGluZU1vZGVcbiAgICAgKiovXG4gICAgc2V0TmV3TGluZU1vZGUobmV3TGluZU1vZGUpIHtcbiAgICAgICAgdGhpcy5kb2Muc2V0TmV3TGluZU1vZGUobmV3TGluZU1vZGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBuZXcgbGluZSBtb2RlLlxuICAgICAqIEByZXR1cm5zIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLk5ld0xpbmVNb2RlfVxuICAgICAqIEByZWxhdGVkIERvY3VtZW50LmdldE5ld0xpbmVNb2RlXG4gICAgICoqL1xuICAgIGdldE5ld0xpbmVNb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MuZ2V0TmV3TGluZU1vZGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVzIGlmIHlvdSB3YW50IHRvIHVzZSBhIHdvcmtlciBmb3IgdGhlIGBFZGl0U2Vzc2lvbmAuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB1c2VXb3JrZXIgU2V0IHRvIGB0cnVlYCB0byB1c2UgYSB3b3JrZXJcbiAgICAgKiovXG4gICAgc2V0VXNlV29ya2VyKHVzZVdvcmtlcikgeyB0aGlzLnNldE9wdGlvbihcInVzZVdvcmtlclwiLCB1c2VXb3JrZXIpOyB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB3b3JrZXJzIGFyZSBiZWluZyB1c2VkLlxuICAgICAqKi9cbiAgICBnZXRVc2VXb3JrZXIoKSB7IHJldHVybiB0aGlzLiR1c2VXb3JrZXI7IH1cblxuICAgIC8qKlxuICAgICAqIFJlbG9hZHMgYWxsIHRoZSB0b2tlbnMgb24gdGhlIGN1cnJlbnQgc2Vzc2lvbi4gVGhpcyBmdW5jdGlvbiBjYWxscyBbW0JhY2tncm91bmRUb2tlbml6ZXIuc3RhcnQgYEJhY2tncm91bmRUb2tlbml6ZXIuc3RhcnQgKClgXV0gdG8gYWxsIHRoZSByb3dzOyBpdCBhbHNvIGVtaXRzIHRoZSBgJ3Rva2VuaXplclVwZGF0ZSdgIGV2ZW50LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqKi9cbiAgICBvblJlbG9hZFRva2VuaXplcihlKSB7XG4gICAgICAgIHZhciByb3dzID0gZS5kYXRhO1xuICAgICAgICB0aGlzLmJnVG9rZW5pemVyLnN0YXJ0KHJvd3MuZmlyc3QpO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJ0b2tlbml6ZXJVcGRhdGVcIiwgZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIG5ldyB0ZXh0IG1vZGUgZm9yIHRoZSBgRWRpdFNlc3Npb25gLiBUaGlzIG1ldGhvZCBhbHNvIGVtaXRzIHRoZSBgJ2NoYW5nZU1vZGUnYCBldmVudC4gSWYgYSBbW0JhY2tncm91bmRUb2tlbml6ZXIgYEJhY2tncm91bmRUb2tlbml6ZXJgXV0gaXMgc2V0LCB0aGUgYCd0b2tlbml6ZXJVcGRhdGUnYCBldmVudCBpcyBhbHNvIGVtaXR0ZWQuXG4gICAgICogQHBhcmFtIHtTeW50YXhNb2RlIHwgc3RyaW5nfSBtb2RlIFNldCBhIG5ldyB0ZXh0IG1vZGVcbiAgICAgKiBAcGFyYW0geygpID0+IHZvaWR9IFtjYl0gb3B0aW9uYWwgY2FsbGJhY2tcbiAgICAgKiovXG4gICAgc2V0TW9kZShtb2RlLCBjYikge1xuICAgICAgICBpZiAobW9kZSAmJiB0eXBlb2YgbW9kZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgaWYgKG1vZGUuZ2V0VG9rZW5pemVyKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRvbkNoYW5nZU1vZGUobW9kZSk7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IG1vZGU7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IG9wdGlvbnMucGF0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhdGggPSAvKipAdHlwZXtzdHJpbmd9Ki8obW9kZSkgfHwgXCJhY2UvbW9kZS90ZXh0XCI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGlzIGlzIG5lZWRlZCBpZiBhY2UgaXNuJ3Qgb24gcmVxdWlyZSBwYXRoIChlLmcgdGVzdHMgaW4gbm9kZSlcbiAgICAgICAgaWYgKCF0aGlzLiRtb2Rlc1tcImFjZS9tb2RlL3RleHRcIl0pXG4gICAgICAgICAgICB0aGlzLiRtb2Rlc1tcImFjZS9tb2RlL3RleHRcIl0gPSBuZXcgVGV4dE1vZGUoKTtcblxuICAgICAgICBpZiAodGhpcy4kbW9kZXNbcGF0aF0gJiYgIW9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuJG9uQ2hhbmdlTW9kZSh0aGlzLiRtb2Rlc1twYXRoXSk7XG4gICAgICAgICAgICBjYiAmJiBjYigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxvYWQgb24gZGVtYW5kXG4gICAgICAgIHRoaXMuJG1vZGVJZCA9IHBhdGg7XG4gICAgICAgIGNvbmZpZy5sb2FkTW9kdWxlKFtcIm1vZGVcIiwgcGF0aF0sIGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRtb2RlSWQgIT09IHBhdGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kbW9kZXNbcGF0aF0gJiYgIW9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRvbkNoYW5nZU1vZGUodGhpcy4kbW9kZXNbcGF0aF0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtICYmIG0uTW9kZSkge1xuICAgICAgICAgICAgICAgIG0gPSBuZXcgbS5Nb2RlKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRtb2Rlc1twYXRoXSA9IG07XG4gICAgICAgICAgICAgICAgICAgIG0uJGlkID0gcGF0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4kb25DaGFuZ2VNb2RlKG0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2IgJiYgY2IoKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAvLyBzZXQgbW9kZSB0byB0ZXh0IHVudGlsIGxvYWRpbmcgaXMgZmluaXNoZWRcbiAgICAgICAgaWYgKCF0aGlzLiRtb2RlKVxuICAgICAgICAgICAgdGhpcy4kb25DaGFuZ2VNb2RlKHRoaXMuJG1vZGVzW1wiYWNlL21vZGUvdGV4dFwiXSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIG1vZGVcbiAgICAgKiBAcGFyYW0gWyRpc1BsYWNlaG9sZGVyXVxuICAgICAqL1xuICAgICRvbkNoYW5nZU1vZGUobW9kZSwgJGlzUGxhY2Vob2xkZXIpIHtcbiAgICAgICAgaWYgKCEkaXNQbGFjZWhvbGRlcilcbiAgICAgICAgICAgIHRoaXMuJG1vZGVJZCA9IG1vZGUuJGlkO1xuICAgICAgICBpZiAodGhpcy4kbW9kZSA9PT0gbW9kZSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgb2xkTW9kZSA9IHRoaXMuJG1vZGU7XG4gICAgICAgIHRoaXMuJG1vZGUgPSBtb2RlO1xuXG4gICAgICAgIHRoaXMuJHN0b3BXb3JrZXIoKTtcblxuICAgICAgICBpZiAodGhpcy4kdXNlV29ya2VyKVxuICAgICAgICAgICAgdGhpcy4kc3RhcnRXb3JrZXIoKTtcblxuICAgICAgICB2YXIgdG9rZW5pemVyID0gbW9kZS5nZXRUb2tlbml6ZXIoKTtcblxuICAgICAgICBpZih0b2tlbml6ZXIub24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIG9uUmVsb2FkVG9rZW5pemVyID0gdGhpcy5vblJlbG9hZFRva2VuaXplci5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdG9rZW5pemVyLm9uKFwidXBkYXRlXCIsIG9uUmVsb2FkVG9rZW5pemVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmdUb2tlbml6ZXIuc2V0VG9rZW5pemVyKHRva2VuaXplcik7XG4gICAgICAgIHRoaXMuYmdUb2tlbml6ZXIuc2V0RG9jdW1lbnQodGhpcy5nZXREb2N1bWVudCgpKTtcblxuICAgICAgICAvKipAdHlwZSB7UmVnRXhwfSovXG4gICAgICAgIHRoaXMudG9rZW5SZSA9IG1vZGUudG9rZW5SZTtcbiAgICAgICAgLyoqQHR5cGUge1JlZ0V4cH0qL1xuICAgICAgICB0aGlzLm5vblRva2VuUmUgPSBtb2RlLm5vblRva2VuUmU7XG5cblxuICAgICAgICBpZiAoISRpc1BsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAvLyBleHBlcmltZW50YWwgbWV0aG9kLCB1c2VkIGJ5IGM5IGZpbmRpbmlsZXNcbiAgICAgICAgICAgIGlmIChtb2RlLmF0dGFjaFRvU2Vzc2lvbilcbiAgICAgICAgICAgICAgICBtb2RlLmF0dGFjaFRvU2Vzc2lvbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuJG9wdGlvbnMud3JhcE1ldGhvZC5zZXQuY2FsbCh0aGlzLCB0aGlzLiR3cmFwTWV0aG9kKTtcbiAgICAgICAgICAgIHRoaXMuJHNldEZvbGRpbmcobW9kZS5mb2xkaW5nUnVsZXMpO1xuICAgICAgICAgICAgdGhpcy5iZ1Rva2VuaXplci5zdGFydCgwKTtcbiAgICAgICAgICAgIHRoaXMuX2VtaXQoXCJjaGFuZ2VNb2RlXCIsIHtvbGRNb2RlOiBvbGRNb2RlLCBtb2RlOiBtb2RlfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc3RvcFdvcmtlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuJHdvcmtlcikge1xuICAgICAgICAgICAgdGhpcy4kd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgdGhpcy4kd29ya2VyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzdGFydFdvcmtlcigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuJHdvcmtlciA9IHRoaXMuJG1vZGUuY3JlYXRlV29ya2VyKHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25maWcud2FybihcIkNvdWxkIG5vdCBsb2FkIHdvcmtlclwiLCBlKTtcbiAgICAgICAgICAgIHRoaXMuJHdvcmtlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHRleHQgbW9kZS5cbiAgICAgKiBAcmV0dXJucyB7VGV4dE1vZGV9IFRoZSBjdXJyZW50IHRleHQgbW9kZVxuICAgICAqKi9cbiAgICBnZXRNb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbW9kZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHNldHMgdGhlIHNjcm9sbCB0b3AgdmFsdWUuIEl0IGFsc28gZW1pdHMgdGhlIGAnY2hhbmdlU2Nyb2xsVG9wJ2AgZXZlbnQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjcm9sbFRvcCBUaGUgbmV3IHNjcm9sbCB0b3AgdmFsdWVcbiAgICAgKiovXG4gICAgc2V0U2Nyb2xsVG9wKHNjcm9sbFRvcCkge1xuICAgICAgICAvLyBUT0RPOiBzaG91bGQgd2UgZm9yY2UgaW50ZWdlciBsaW5laGVpZ2h0IGluc3RlYWQ/IHNjcm9sbFRvcCA9IE1hdGgucm91bmQoc2Nyb2xsVG9wKTtcbiAgICAgICAgaWYgKHRoaXMuJHNjcm9sbFRvcCA9PT0gc2Nyb2xsVG9wIHx8IGlzTmFOKHNjcm9sbFRvcCkpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy4kc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VTY3JvbGxUb3BcIiwgc2Nyb2xsVG9wKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHRvcCBvZiB0aGUgZWRpdG9yIGFuZCB0aGUgdG9wbW9zdCBwYXJ0IG9mIHRoZSB2aXNpYmxlIGNvbnRlbnQuXXs6ICNFZGl0U2Vzc2lvbi5nZXRTY3JvbGxUb3B9XG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0U2Nyb2xsVG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kc2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFtTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgbGVmdCBvZiB0aGUgZWRpdG9yIGFuZCB0aGUgbGVmdG1vc3QgcGFydCBvZiB0aGUgdmlzaWJsZSBjb250ZW50Ll17OiAjRWRpdFNlc3Npb24uc2V0U2Nyb2xsTGVmdH1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2Nyb2xsTGVmdFxuICAgICAqL1xuICAgIHNldFNjcm9sbExlZnQoc2Nyb2xsTGVmdCkge1xuICAgICAgICAvLyBzY3JvbGxMZWZ0ID0gTWF0aC5yb3VuZChzY3JvbGxMZWZ0KTtcbiAgICAgICAgaWYgKHRoaXMuJHNjcm9sbExlZnQgPT09IHNjcm9sbExlZnQgfHwgaXNOYU4oc2Nyb2xsTGVmdCkpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy4kc2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQ7XG4gICAgICAgIHRoaXMuX3NpZ25hbChcImNoYW5nZVNjcm9sbExlZnRcIiwgc2Nyb2xsTGVmdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogW1JldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBsZWZ0IG9mIHRoZSBlZGl0b3IgYW5kIHRoZSBsZWZ0bW9zdCBwYXJ0IG9mIHRoZSB2aXNpYmxlIGNvbnRlbnQuXXs6ICNFZGl0U2Vzc2lvbi5nZXRTY3JvbGxMZWZ0fVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldFNjcm9sbExlZnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzY3JvbGxMZWZ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHdpZHRoIG9mIHRoZSBzY3JlZW4uXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0U2NyZWVuV2lkdGgoKSB7XG4gICAgICAgIHRoaXMuJGNvbXB1dGVXaWR0aCgpO1xuICAgICAgICBpZiAodGhpcy5saW5lV2lkZ2V0cylcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLmdldExpbmVXaWRnZXRNYXhXaWR0aCgpLCB0aGlzLnNjcmVlbldpZHRoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NyZWVuV2lkdGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldExpbmVXaWRnZXRNYXhXaWR0aCgpIHtcbiAgICAgICAgaWYgKHRoaXMubGluZVdpZGdldHNXaWR0aCAhPSBudWxsKSByZXR1cm4gdGhpcy5saW5lV2lkZ2V0c1dpZHRoO1xuICAgICAgICB2YXIgd2lkdGggPSAwO1xuICAgICAgICB0aGlzLmxpbmVXaWRnZXRzLmZvckVhY2goZnVuY3Rpb24odykge1xuICAgICAgICAgICAgaWYgKHcgJiYgdy5zY3JlZW5XaWR0aCA+IHdpZHRoKVxuICAgICAgICAgICAgICAgIHdpZHRoID0gdy5zY3JlZW5XaWR0aDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpbmVXaWRnZXRXaWR0aCA9IHdpZHRoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ZvcmNlXVxuICAgICAqL1xuICAgICRjb21wdXRlV2lkdGgoZm9yY2UpIHtcbiAgICAgICAgaWYgKHRoaXMuJG1vZGlmaWVkIHx8IGZvcmNlKSB7XG4gICAgICAgICAgICB0aGlzLiRtb2RpZmllZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy4kdXNlV3JhcE1vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NyZWVuV2lkdGggPSB0aGlzLiR3cmFwTGltaXQ7XG5cbiAgICAgICAgICAgIHZhciBsaW5lcyA9IHRoaXMuZG9jLmdldEFsbExpbmVzKCk7XG4gICAgICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLiRyb3dMZW5ndGhDYWNoZTtcbiAgICAgICAgICAgIHZhciBsb25nZXN0U2NyZWVuTGluZSA9IDA7XG4gICAgICAgICAgICB2YXIgZm9sZEluZGV4ID0gMDtcbiAgICAgICAgICAgIHZhciBmb2xkTGluZSA9IHRoaXMuJGZvbGREYXRhW2ZvbGRJbmRleF07XG4gICAgICAgICAgICB2YXIgZm9sZFN0YXJ0ID0gZm9sZExpbmUgPyBmb2xkTGluZS5zdGFydC5yb3cgOiBJbmZpbml0eTtcbiAgICAgICAgICAgIHZhciBsZW4gPSBsaW5lcy5sZW5ndGg7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA+IGZvbGRTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBpID0gZm9sZExpbmUuZW5kLnJvdyArIDE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID49IGxlbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBmb2xkTGluZSA9IHRoaXMuJGZvbGREYXRhW2ZvbGRJbmRleCsrXTtcbiAgICAgICAgICAgICAgICAgICAgZm9sZFN0YXJ0ID0gZm9sZExpbmUgPyBmb2xkTGluZS5zdGFydC5yb3cgOiBJbmZpbml0eTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVbaV0gPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVbaV0gPSB0aGlzLiRnZXRTdHJpbmdTY3JlZW5XaWR0aChsaW5lc1tpXSlbMF07XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVbaV0gPiBsb25nZXN0U2NyZWVuTGluZSlcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2VzdFNjcmVlbkxpbmUgPSBjYWNoZVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2NyZWVuV2lkdGggPSBsb25nZXN0U2NyZWVuTGluZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2ZXJiYXRpbSBjb3B5IG9mIHRoZSBnaXZlbiBsaW5lIGFzIGl0IGlzIGluIHRoZSBkb2N1bWVudFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgVGhlIHJvdyB0byByZXRyaWV2ZSBmcm9tXG4gICAgICogQHJldHVybnMge1N0cmluZ31cbiAgICAgKiovXG4gICAgZ2V0TGluZShyb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jLmdldExpbmUocm93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHN0cmluZ3Mgb2YgdGhlIHJvd3MgYmV0d2VlbiBgZmlyc3RSb3dgIGFuZCBgbGFzdFJvd2AuIFRoaXMgZnVuY3Rpb24gaXMgaW5jbHVzaXZlIG9mIGBsYXN0Um93YC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmlyc3RSb3cgVGhlIGZpcnN0IHJvdyBpbmRleCB0byByZXRyaWV2ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsYXN0Um93IFRoZSBmaW5hbCByb3cgaW5kZXggdG8gcmV0cmlldmVcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtTdHJpbmdbXX1cbiAgICAgKlxuICAgICAqKi9cbiAgICBnZXRMaW5lcyhmaXJzdFJvdywgbGFzdFJvdykge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MuZ2V0TGluZXMoZmlyc3RSb3csIGxhc3RSb3cpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvYy5nZXRMZW5ndGgoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB7OkRvY3VtZW50LmdldFRleHRSYW5nZS5kZXNjfVxuICAgICAqIEBwYXJhbSB7SVJhbmdlfSBbcmFuZ2VdIFRoZSByYW5nZSB0byB3b3JrIHdpdGhcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAgICoqL1xuICAgIGdldFRleHRSYW5nZShyYW5nZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MuZ2V0VGV4dFJhbmdlKHJhbmdlIHx8IHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYSBibG9jayBvZiBgdGV4dGAgYW5kIHRoZSBpbmRpY2F0ZWQgYHBvc2l0aW9uYC5cbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwb3NpdGlvbiBUaGUgcG9zaXRpb24ge3JvdywgY29sdW1ufSB0byBzdGFydCBpbnNlcnRpbmcgYXRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBBIGNodW5rIG9mIHRleHQgdG8gaW5zZXJ0XG4gICAgICogQHJldHVybnMge1BvaW50fSBUaGUgcG9zaXRpb24gb2YgdGhlIGxhc3QgbGluZSBvZiBgdGV4dGAuIElmIHRoZSBsZW5ndGggb2YgYHRleHRgIGlzIDAsIHRoaXMgZnVuY3Rpb24gc2ltcGx5IHJldHVybnMgYHBvc2l0aW9uYC5cbiAgICAgKiovXG4gICAgaW5zZXJ0KHBvc2l0aW9uLCB0ZXh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvYy5pbnNlcnQocG9zaXRpb24sIHRleHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGByYW5nZWAgZnJvbSB0aGUgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIHtJUmFuZ2V9IHJhbmdlIEEgc3BlY2lmaWVkIFJhbmdlIHRvIHJlbW92ZVxuICAgICAqIEByZXR1cm5zIHtQb2ludH0gVGhlIG5ldyBgc3RhcnRgIHByb3BlcnR5IG9mIHRoZSByYW5nZSwgd2hpY2ggY29udGFpbnMgYHN0YXJ0Um93YCBhbmQgYHN0YXJ0Q29sdW1uYC4gSWYgYHJhbmdlYCBpcyBlbXB0eSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSB1bm1vZGlmaWVkIHZhbHVlIG9mIGByYW5nZS5zdGFydGAuXG4gICAgICoqL1xuICAgIHJlbW92ZShyYW5nZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2MucmVtb3ZlKHJhbmdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmFuZ2Ugb2YgZnVsbCBsaW5lcy4gVGhpcyBtZXRob2QgYWxzbyB0cmlnZ2VycyB0aGUgYCdjaGFuZ2UnYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmlyc3RSb3cgVGhlIGZpcnN0IHJvdyB0byBiZSByZW1vdmVkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxhc3RSb3cgVGhlIGxhc3Qgcm93IHRvIGJlIHJlbW92ZWRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nW119IFJldHVybnMgYWxsIHRoZSByZW1vdmVkIGxpbmVzLlxuICAgICAqXG4gICAgICogQHJlbGF0ZWQgRG9jdW1lbnQucmVtb3ZlRnVsbExpbmVzXG4gICAgICpcbiAgICAgKiovXG4gICAgcmVtb3ZlRnVsbExpbmVzKGZpcnN0Um93LCBsYXN0Um93KXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jLnJlbW92ZUZ1bGxMaW5lcyhmaXJzdFJvdywgbGFzdFJvdyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV2ZXJ0cyBwcmV2aW91cyBjaGFuZ2VzIHRvIHlvdXIgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIHtEZWx0YVtdfSBkZWx0YXMgQW4gYXJyYXkgb2YgcHJldmlvdXMgY2hhbmdlc1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2RvbnRTZWxlY3RdIFtJZiBgdHJ1ZWAsIGRvZXNuJ3Qgc2VsZWN0IHRoZSByYW5nZSBvZiB3aGVyZSB0aGUgY2hhbmdlIG9jY3VyZWRdezogI2RvbnRTZWxlY3R9XG4gICAgICoqL1xuICAgIHVuZG9DaGFuZ2VzKGRlbHRhcywgZG9udFNlbGVjdCkge1xuICAgICAgICBpZiAoIWRlbHRhcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy4kZnJvbVVuZG8gPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gZGVsdGFzLmxlbmd0aCAtIDE7IGkgIT0gLTE7IGktLSkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gZGVsdGFzW2ldO1xuICAgICAgICAgICAgaWYgKGRlbHRhLmFjdGlvbiA9PSBcImluc2VydFwiIHx8IGRlbHRhLmFjdGlvbiA9PSBcInJlbW92ZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb2MucmV2ZXJ0RGVsdGEoZGVsdGEpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZWx0YS5mb2xkcykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRm9sZHMoZGVsdGEuZm9sZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZG9udFNlbGVjdCAmJiB0aGlzLiR1bmRvU2VsZWN0KSB7XG4gICAgICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3IgVE9ETzogcG90ZW50aWFsIHdyb25nIHByb3BlcnR5XG4gICAgICAgICAgICBpZiAoZGVsdGFzLnNlbGVjdGlvbkJlZm9yZSlcbiAgICAgICAgICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3IgVE9ETzogcG90ZW50aWFsIHdyb25nIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZnJvbUpTT04oZGVsdGFzLnNlbGVjdGlvbkJlZm9yZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uc2V0UmFuZ2UodGhpcy4kZ2V0VW5kb1NlbGVjdGlvbihkZWx0YXMsIHRydWUpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRmcm9tVW5kbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlLWltcGxlbWVudHMgYSBwcmV2aW91c2x5IHVuZG9uZSBjaGFuZ2UgdG8geW91ciBkb2N1bWVudC5cbiAgICAgKiBAcGFyYW0ge0RlbHRhW119IGRlbHRhcyBBbiBhcnJheSBvZiBwcmV2aW91cyBjaGFuZ2VzXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZG9udFNlbGVjdF0gezpkb250U2VsZWN0fVxuICAgICAqKi9cbiAgICByZWRvQ2hhbmdlcyhkZWx0YXMsIGRvbnRTZWxlY3QpIHtcbiAgICAgICAgaWYgKCFkZWx0YXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuJGZyb21VbmRvID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWx0YXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGRlbHRhc1tpXTtcbiAgICAgICAgICAgIGlmIChkZWx0YS5hY3Rpb24gPT0gXCJpbnNlcnRcIiB8fCBkZWx0YS5hY3Rpb24gPT0gXCJyZW1vdmVcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9jLiRzYWZlQXBwbHlEZWx0YShkZWx0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRvbnRTZWxlY3QgJiYgdGhpcy4kdW5kb1NlbGVjdCkge1xuICAgICAgICAgICAgLy9AdHMtZXhwZWN0LWVycm9yIFRPRE86IHBvdGVudGlhbCB3cm9uZyBwcm9wZXJ0eVxuICAgICAgICAgICAgaWYgKGRlbHRhcy5zZWxlY3Rpb25BZnRlcilcbiAgICAgICAgICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3IgVE9ETzogcG90ZW50aWFsIHdyb25nIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uZnJvbUpTT04oZGVsdGFzLnNlbGVjdGlvbkFmdGVyKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZXRSYW5nZSh0aGlzLiRnZXRVbmRvU2VsZWN0aW9uKGRlbHRhcywgZmFsc2UpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRmcm9tVW5kbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgb3IgZGlzYWJsZXMgaGlnaGxpZ2h0aW5nIG9mIHRoZSByYW5nZSB3aGVyZSBhbiB1bmRvIG9jY3VycmVkLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZW5hYmxlIElmIGB0cnVlYCwgc2VsZWN0cyB0aGUgcmFuZ2Ugb2YgdGhlIHJlaW5zZXJ0ZWQgY2hhbmdlXG4gICAgICpcbiAgICAgKiovXG4gICAgc2V0VW5kb1NlbGVjdChlbmFibGUpIHtcbiAgICAgICAgdGhpcy4kdW5kb1NlbGVjdCA9IGVuYWJsZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RGVsdGFbXX0gZGVsdGFzXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNVbmRvXVxuICAgICAqIEByZXR1cm4ge1JhbmdlfVxuICAgICAqL1xuICAgICRnZXRVbmRvU2VsZWN0aW9uKGRlbHRhcywgaXNVbmRvKSB7XG4gICAgICAgIGZ1bmN0aW9uIGlzSW5zZXJ0KGRlbHRhKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNVbmRvID8gZGVsdGEuYWN0aW9uICE9PSBcImluc2VydFwiIDogZGVsdGEuYWN0aW9uID09PSBcImluc2VydFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJhbmdlLCBwb2ludDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlbHRhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gZGVsdGFzW2ldO1xuICAgICAgICAgICAgaWYgKCFkZWx0YS5zdGFydCkgY29udGludWU7IC8vIHNraXAgZm9sZHNcbiAgICAgICAgICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNJbnNlcnQoZGVsdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gUmFuZ2UuZnJvbVBvaW50cyhkZWx0YS5zdGFydCwgZGVsdGEuZW5kKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IFJhbmdlLmZyb21Qb2ludHMoZGVsdGEuc3RhcnQsIGRlbHRhLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0luc2VydChkZWx0YSkpIHtcbiAgICAgICAgICAgICAgICBwb2ludCA9IGRlbHRhLnN0YXJ0O1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5jb21wYXJlKHBvaW50LnJvdywgcG9pbnQuY29sdW1uKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICByYW5nZS5zZXRTdGFydChwb2ludCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvaW50ID0gZGVsdGEuZW5kO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5jb21wYXJlKHBvaW50LnJvdywgcG9pbnQuY29sdW1uKSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLnNldEVuZChwb2ludCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb2ludCA9IGRlbHRhLnN0YXJ0O1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5jb21wYXJlKHBvaW50LnJvdywgcG9pbnQuY29sdW1uKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IFJhbmdlLmZyb21Qb2ludHMoZGVsdGEuc3RhcnQsIGRlbHRhLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIGEgcmFuZ2UgaW4gdGhlIGRvY3VtZW50IHdpdGggdGhlIG5ldyBgdGV4dGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0lSYW5nZX0gcmFuZ2UgQSBzcGVjaWZpZWQgUmFuZ2UgdG8gcmVwbGFjZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSBuZXcgdGV4dCB0byB1c2UgYXMgYSByZXBsYWNlbWVudFxuICAgICAqIEByZXR1cm5zIHtQb2ludH0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZpbmFsIHJvdyBhbmQgY29sdW1uLCBsaWtlIHRoaXM6XG4gICAgICogYGBgXG4gICAgICoge3JvdzogZW5kUm93LCBjb2x1bW46IDB9XG4gICAgICogYGBgXG4gICAgICogSWYgdGhlIHRleHQgYW5kIHJhbmdlIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBjdXJyZW50IGByYW5nZS5zdGFydGAgdmFsdWUuXG4gICAgICogSWYgdGhlIHRleHQgaXMgdGhlIGV4YWN0IHNhbWUgYXMgd2hhdCBjdXJyZW50bHkgZXhpc3RzLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGN1cnJlbnQgYHJhbmdlLmVuZGAgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcmVsYXRlZCBEb2N1bWVudC5yZXBsYWNlXG4gICAgICoqL1xuICAgIHJlcGxhY2UocmFuZ2UsIHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jLnJlcGxhY2UocmFuZ2UsIHRleHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIGEgcmFuZ2Ugb2YgdGV4dCBmcm9tIHRoZSBnaXZlbiByYW5nZSB0byB0aGUgZ2l2ZW4gcG9zaXRpb24uIGB0b1Bvc2l0aW9uYCBpcyBhbiBvYmplY3QgdGhhdCBsb29rcyBsaWtlIHRoaXM6XG4gICAgICogIGBgYGpzb25cbiAgICAgKiAgICB7IHJvdzogbmV3Um93TG9jYXRpb24sIGNvbHVtbjogbmV3Q29sdW1uTG9jYXRpb24gfVxuICAgICAqICBgYGBcbiAgICAgKiBAcGFyYW0ge1JhbmdlfSBmcm9tUmFuZ2UgVGhlIHJhbmdlIG9mIHRleHQgeW91IHdhbnQgbW92ZWQgd2l0aGluIHRoZSBkb2N1bWVudFxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHRvUG9zaXRpb24gVGhlIGxvY2F0aW9uIChyb3cgYW5kIGNvbHVtbikgd2hlcmUgeW91IHdhbnQgdG8gbW92ZSB0aGUgdGV4dCB0b1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NvcHldXG4gICAgICogQHJldHVybnMge1JhbmdlfSBUaGUgbmV3IHJhbmdlIHdoZXJlIHRoZSB0ZXh0IHdhcyBtb3ZlZCB0by5cbiAgICAgKiovXG4gICAgbW92ZVRleHQoZnJvbVJhbmdlLCB0b1Bvc2l0aW9uLCBjb3B5KSB7XG4gICAgICAgIHZhciB0ZXh0ID0gdGhpcy5nZXRUZXh0UmFuZ2UoZnJvbVJhbmdlKTtcbiAgICAgICAgdmFyIGZvbGRzID0gdGhpcy5nZXRGb2xkc0luUmFuZ2UoZnJvbVJhbmdlKTtcblxuICAgICAgICB2YXIgdG9SYW5nZSA9IFJhbmdlLmZyb21Qb2ludHModG9Qb3NpdGlvbiwgdG9Qb3NpdGlvbik7XG4gICAgICAgIGlmICghY29weSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUoZnJvbVJhbmdlKTtcbiAgICAgICAgICAgIHZhciByb3dEaWZmID0gZnJvbVJhbmdlLnN0YXJ0LnJvdyAtIGZyb21SYW5nZS5lbmQucm93O1xuICAgICAgICAgICAgdmFyIGNvbGxEaWZmID0gcm93RGlmZiA/IC1mcm9tUmFuZ2UuZW5kLmNvbHVtbiA6IGZyb21SYW5nZS5zdGFydC5jb2x1bW4gLSBmcm9tUmFuZ2UuZW5kLmNvbHVtbjtcbiAgICAgICAgICAgIGlmIChjb2xsRGlmZikge1xuICAgICAgICAgICAgICAgIGlmICh0b1JhbmdlLnN0YXJ0LnJvdyA9PSBmcm9tUmFuZ2UuZW5kLnJvdyAmJiB0b1JhbmdlLnN0YXJ0LmNvbHVtbiA+IGZyb21SYW5nZS5lbmQuY29sdW1uKVxuICAgICAgICAgICAgICAgICAgICB0b1JhbmdlLnN0YXJ0LmNvbHVtbiArPSBjb2xsRGlmZjtcbiAgICAgICAgICAgICAgICBpZiAodG9SYW5nZS5lbmQucm93ID09IGZyb21SYW5nZS5lbmQucm93ICYmIHRvUmFuZ2UuZW5kLmNvbHVtbiA+IGZyb21SYW5nZS5lbmQuY29sdW1uKVxuICAgICAgICAgICAgICAgICAgICB0b1JhbmdlLmVuZC5jb2x1bW4gKz0gY29sbERpZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm93RGlmZiAmJiB0b1JhbmdlLnN0YXJ0LnJvdyA+PSBmcm9tUmFuZ2UuZW5kLnJvdykge1xuICAgICAgICAgICAgICAgIHRvUmFuZ2Uuc3RhcnQucm93ICs9IHJvd0RpZmY7XG4gICAgICAgICAgICAgICAgdG9SYW5nZS5lbmQucm93ICs9IHJvd0RpZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0b1JhbmdlLmVuZCA9IHRoaXMuaW5zZXJ0KHRvUmFuZ2Uuc3RhcnQsIHRleHQpO1xuICAgICAgICBpZiAoZm9sZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgb2xkU3RhcnQgPSBmcm9tUmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICB2YXIgbmV3U3RhcnQgPSB0b1JhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgdmFyIHJvd0RpZmYgPSBuZXdTdGFydC5yb3cgLSBvbGRTdGFydC5yb3c7XG4gICAgICAgICAgICB2YXIgY29sbERpZmYgPSBuZXdTdGFydC5jb2x1bW4gLSBvbGRTdGFydC5jb2x1bW47XG4gICAgICAgICAgICB0aGlzLmFkZEZvbGRzKGZvbGRzLm1hcChmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICAgICAgeCA9IHguY2xvbmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoeC5zdGFydC5yb3cgPT0gb2xkU3RhcnQucm93KVxuICAgICAgICAgICAgICAgICAgICB4LnN0YXJ0LmNvbHVtbiArPSBjb2xsRGlmZjtcbiAgICAgICAgICAgICAgICBpZiAoeC5lbmQucm93ID09IG9sZFN0YXJ0LnJvdylcbiAgICAgICAgICAgICAgICAgICAgeC5lbmQuY29sdW1uICs9IGNvbGxEaWZmO1xuICAgICAgICAgICAgICAgIHguc3RhcnQucm93ICs9IHJvd0RpZmY7XG4gICAgICAgICAgICAgICAgeC5lbmQucm93ICs9IHJvd0RpZmY7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG9SYW5nZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbmRlbnRzIGFsbCB0aGUgcm93cywgZnJvbSBgc3RhcnRSb3dgIHRvIGBlbmRSb3dgIChpbmNsdXNpdmUpLCBieSBwcmVmaXhpbmcgZWFjaCByb3cgd2l0aCB0aGUgdG9rZW4gaW4gYGluZGVudFN0cmluZ2AuXG4gICAgICpcbiAgICAgKiBJZiBgaW5kZW50U3RyaW5nYCBjb250YWlucyB0aGUgYCdcXHQnYCBjaGFyYWN0ZXIsIGl0J3MgcmVwbGFjZWQgYnkgd2hhdGV2ZXIgaXMgZGVmaW5lZCBieSBbW0VkaXRTZXNzaW9uLmdldFRhYlN0cmluZyBgZ2V0VGFiU3RyaW5nKClgXV0uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0Um93IFN0YXJ0aW5nIHJvd1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBlbmRSb3cgRW5kaW5nIHJvd1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpbmRlbnRTdHJpbmcgVGhlIGluZGVudCB0b2tlblxuICAgICAqKi9cbiAgICBpbmRlbnRSb3dzKHN0YXJ0Um93LCBlbmRSb3csIGluZGVudFN0cmluZykge1xuICAgICAgICBpbmRlbnRTdHJpbmcgPSBpbmRlbnRTdHJpbmcucmVwbGFjZSgvXFx0L2csIHRoaXMuZ2V0VGFiU3RyaW5nKCkpO1xuICAgICAgICBmb3IgKHZhciByb3c9c3RhcnRSb3c7IHJvdzw9ZW5kUm93OyByb3crKylcbiAgICAgICAgICAgIHRoaXMuZG9jLmluc2VydEluTGluZSh7cm93OiByb3csIGNvbHVtbjogMH0sIGluZGVudFN0cmluZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3V0ZGVudHMgYWxsIHRoZSByb3dzIGRlZmluZWQgYnkgdGhlIGBzdGFydGAgYW5kIGBlbmRgIHByb3BlcnRpZXMgb2YgYHJhbmdlYC5cbiAgICAgKiBAcGFyYW0ge1JhbmdlfSByYW5nZSBBIHJhbmdlIG9mIHJvd3NcbiAgICAgKiovXG4gICAgb3V0ZGVudFJvd3MocmFuZ2UpIHtcbiAgICAgICAgdmFyIHJvd1JhbmdlID0gcmFuZ2UuY29sbGFwc2VSb3dzKCk7XG4gICAgICAgIHZhciBkZWxldGVSYW5nZSA9IG5ldyBSYW5nZSgwLCAwLCAwLCAwKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFRhYlNpemUoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gcm93UmFuZ2Uuc3RhcnQucm93OyBpIDw9IHJvd1JhbmdlLmVuZC5yb3c7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxpbmUgPSB0aGlzLmdldExpbmUoaSk7XG5cbiAgICAgICAgICAgIGRlbGV0ZVJhbmdlLnN0YXJ0LnJvdyA9IGk7XG4gICAgICAgICAgICBkZWxldGVSYW5nZS5lbmQucm93ID0gaTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2l6ZTsgKytqKVxuICAgICAgICAgICAgICAgIGlmIChsaW5lLmNoYXJBdChqKSAhPSAnICcpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKGogPCBzaXplICYmIGxpbmUuY2hhckF0KGopID09ICdcXHQnKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlUmFuZ2Uuc3RhcnQuY29sdW1uID0gajtcbiAgICAgICAgICAgICAgICBkZWxldGVSYW5nZS5lbmQuY29sdW1uID0gaiArIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlbGV0ZVJhbmdlLnN0YXJ0LmNvbHVtbiA9IDA7XG4gICAgICAgICAgICAgICAgZGVsZXRlUmFuZ2UuZW5kLmNvbHVtbiA9IGo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShkZWxldGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmaXJzdFJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsYXN0Um93XG4gICAgICogQHBhcmFtIFtkaXJdXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICAkbW92ZUxpbmVzKGZpcnN0Um93LCBsYXN0Um93LCBkaXIpIHtcbiAgICAgICAgZmlyc3RSb3cgPSB0aGlzLmdldFJvd0ZvbGRTdGFydChmaXJzdFJvdyk7XG4gICAgICAgIGxhc3RSb3cgPSB0aGlzLmdldFJvd0ZvbGRFbmQobGFzdFJvdyk7XG4gICAgICAgIGlmIChkaXIgPCAwKSB7XG4gICAgICAgICAgICB2YXIgcm93ID0gdGhpcy5nZXRSb3dGb2xkU3RhcnQoZmlyc3RSb3cgKyBkaXIpO1xuICAgICAgICAgICAgaWYgKHJvdyA8IDApIHJldHVybiAwO1xuICAgICAgICAgICAgdmFyIGRpZmYgPSByb3ctZmlyc3RSb3c7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyID4gMCkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRoaXMuZ2V0Um93Rm9sZEVuZChsYXN0Um93ICsgZGlyKTtcbiAgICAgICAgICAgIGlmIChyb3cgPiB0aGlzLmRvYy5nZXRMZW5ndGgoKS0xKSByZXR1cm4gMDtcbiAgICAgICAgICAgIHZhciBkaWZmID0gcm93LWxhc3RSb3c7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaXJzdFJvdyA9IHRoaXMuJGNsaXBSb3dUb0RvY3VtZW50KGZpcnN0Um93KTtcbiAgICAgICAgICAgIGxhc3RSb3cgPSB0aGlzLiRjbGlwUm93VG9Eb2N1bWVudChsYXN0Um93KTtcbiAgICAgICAgICAgIHZhciBkaWZmID0gbGFzdFJvdyAtIGZpcnN0Um93ICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShmaXJzdFJvdywgMCwgbGFzdFJvdywgTnVtYmVyLk1BWF9WQUxVRSk7XG4gICAgICAgIHZhciBmb2xkcyA9IHRoaXMuZ2V0Rm9sZHNJblJhbmdlKHJhbmdlKS5tYXAoZnVuY3Rpb24oeCl7XG4gICAgICAgICAgICB4ID0geC5jbG9uZSgpO1xuICAgICAgICAgICAgeC5zdGFydC5yb3cgKz0gZGlmZjtcbiAgICAgICAgICAgIHguZW5kLnJvdyArPSBkaWZmO1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBsaW5lcyA9IGRpciA9PSAwXG4gICAgICAgICAgICA/IHRoaXMuZG9jLmdldExpbmVzKGZpcnN0Um93LCBsYXN0Um93KVxuICAgICAgICAgICAgOiB0aGlzLmRvYy5yZW1vdmVGdWxsTGluZXMoZmlyc3RSb3csIGxhc3RSb3cpO1xuICAgICAgICB0aGlzLmRvYy5pbnNlcnRGdWxsTGluZXMoZmlyc3RSb3crZGlmZiwgbGluZXMpO1xuICAgICAgICBmb2xkcy5sZW5ndGggJiYgdGhpcy5hZGRGb2xkcyhmb2xkcyk7XG4gICAgICAgIHJldHVybiBkaWZmO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaGlmdHMgYWxsIHRoZSBsaW5lcyBpbiB0aGUgZG9jdW1lbnQgdXAgb25lLCBzdGFydGluZyBmcm9tIGBmaXJzdFJvd2AgYW5kIGVuZGluZyBhdCBgbGFzdFJvd2AuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGZpcnN0Um93IFRoZSBzdGFydGluZyByb3cgdG8gbW92ZSB1cFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsYXN0Um93IFRoZSBmaW5hbCByb3cgdG8gbW92ZSB1cFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IElmIGBmaXJzdFJvd2AgaXMgbGVzcy10aGFuIG9yIGVxdWFsIHRvIDAsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyAwLiBPdGhlcndpc2UsIG9uIHN1Y2Nlc3MsIGl0IHJldHVybnMgLTEuXG4gICAgICoqL1xuICAgIG1vdmVMaW5lc1VwKGZpcnN0Um93LCBsYXN0Um93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRtb3ZlTGluZXMoZmlyc3RSb3csIGxhc3RSb3csIC0xKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaGlmdHMgYWxsIHRoZSBsaW5lcyBpbiB0aGUgZG9jdW1lbnQgZG93biBvbmUsIHN0YXJ0aW5nIGZyb20gYGZpcnN0Um93YCBhbmQgZW5kaW5nIGF0IGBsYXN0Um93YC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmlyc3RSb3cgVGhlIHN0YXJ0aW5nIHJvdyB0byBtb3ZlIGRvd25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGFzdFJvdyBUaGUgZmluYWwgcm93IHRvIG1vdmUgZG93blxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IElmIGBmaXJzdFJvd2AgaXMgbGVzcy10aGFuIG9yIGVxdWFsIHRvIDAsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyAwLiBPdGhlcndpc2UsIG9uIHN1Y2Nlc3MsIGl0IHJldHVybnMgLTEuXG4gICAgICoqL1xuICAgIG1vdmVMaW5lc0Rvd24oZmlyc3RSb3csIGxhc3RSb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJG1vdmVMaW5lcyhmaXJzdFJvdywgbGFzdFJvdywgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHVwbGljYXRlcyBhbGwgdGhlIHRleHQgYmV0d2VlbiBgZmlyc3RSb3dgIGFuZCBgbGFzdFJvd2AuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGZpcnN0Um93IFRoZSBzdGFydGluZyByb3cgdG8gZHVwbGljYXRlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxhc3RSb3cgVGhlIGZpbmFsIHJvdyB0byBkdXBsaWNhdGVcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIgb2YgbmV3IHJvd3MgYWRkZWQ7IGluIG90aGVyIHdvcmRzLCBgbGFzdFJvdyAtIGZpcnN0Um93ICsgMWAuXG4gICAgICoqL1xuICAgIGR1cGxpY2F0ZUxpbmVzKGZpcnN0Um93LCBsYXN0Um93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRtb3ZlTGluZXMoZmlyc3RSb3csIGxhc3RSb3csIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgICRjbGlwUm93VG9Eb2N1bWVudChyb3cpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKHJvdywgdGhpcy5kb2MuZ2V0TGVuZ3RoKCktMSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29sdW1uXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICAkY2xpcENvbHVtblRvUm93KHJvdywgY29sdW1uKSB7XG4gICAgICAgIGlmIChjb2x1bW4gPCAwKSByZXR1cm4gMDtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMuZG9jLmdldExpbmUocm93KS5sZW5ndGgsIGNvbHVtbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2x1bW5cbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9XG4gICAgICovXG4gICAgJGNsaXBQb3NpdGlvblRvRG9jdW1lbnQocm93LCBjb2x1bW4pIHtcbiAgICAgICAgY29sdW1uID0gTWF0aC5tYXgoMCwgY29sdW1uKTtcblxuICAgICAgICBpZiAocm93IDwgMCkge1xuICAgICAgICAgICAgcm93ID0gMDtcbiAgICAgICAgICAgIGNvbHVtbiA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdGhpcy5kb2MuZ2V0TGVuZ3RoKCk7XG4gICAgICAgICAgICBpZiAocm93ID49IGxlbikge1xuICAgICAgICAgICAgICAgIHJvdyA9IGxlbiAtIDE7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gdGhpcy5kb2MuZ2V0TGluZShsZW4tMSkubGVuZ3RoO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBNYXRoLm1pbih0aGlzLmRvYy5nZXRMaW5lKHJvdykubGVuZ3RoLCBjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJvdzogcm93LFxuICAgICAgICAgICAgY29sdW1uOiBjb2x1bW5cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1JhbmdlfSByYW5nZVxuICAgICAqIEByZXR1cm5zIHtSYW5nZX1cbiAgICAgKi9cbiAgICAkY2xpcFJhbmdlVG9Eb2N1bWVudChyYW5nZSkge1xuICAgICAgICBpZiAocmFuZ2Uuc3RhcnQucm93IDwgMCkge1xuICAgICAgICAgICAgcmFuZ2Uuc3RhcnQucm93ID0gMDtcbiAgICAgICAgICAgIHJhbmdlLnN0YXJ0LmNvbHVtbiA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByYW5nZS5zdGFydC5jb2x1bW4gPSB0aGlzLiRjbGlwQ29sdW1uVG9Sb3coXG4gICAgICAgICAgICAgICAgcmFuZ2Uuc3RhcnQucm93LFxuICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0LmNvbHVtblxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsZW4gPSB0aGlzLmRvYy5nZXRMZW5ndGgoKSAtIDE7XG4gICAgICAgIGlmIChyYW5nZS5lbmQucm93ID4gbGVuKSB7XG4gICAgICAgICAgICByYW5nZS5lbmQucm93ID0gbGVuO1xuICAgICAgICAgICAgcmFuZ2UuZW5kLmNvbHVtbiA9IHRoaXMuZG9jLmdldExpbmUobGVuKS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByYW5nZS5lbmQuY29sdW1uID0gdGhpcy4kY2xpcENvbHVtblRvUm93KFxuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5yb3csXG4gICAgICAgICAgICAgICAgcmFuZ2UuZW5kLmNvbHVtblxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIG9yIG5vdCBsaW5lIHdyYXBwaW5nIGlzIGVuYWJsZWQuIElmIGB1c2VXcmFwTW9kZWAgaXMgZGlmZmVyZW50IHRoYW4gdGhlIGN1cnJlbnQgdmFsdWUsIHRoZSBgJ2NoYW5nZVdyYXBNb2RlJ2AgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHVzZVdyYXBNb2RlIEVuYWJsZSAob3IgZGlzYWJsZSkgd3JhcCBtb2RlXG4gICAgICoqL1xuICAgIHNldFVzZVdyYXBNb2RlKHVzZVdyYXBNb2RlKSB7XG4gICAgICAgIGlmICh1c2VXcmFwTW9kZSAhPSB0aGlzLiR1c2VXcmFwTW9kZSkge1xuICAgICAgICAgICAgdGhpcy4kdXNlV3JhcE1vZGUgPSB1c2VXcmFwTW9kZTtcbiAgICAgICAgICAgIHRoaXMuJG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuJHJlc2V0Um93Q2FjaGUoMCk7XG5cbiAgICAgICAgICAgIC8vIElmIHdyYXBNb2RlIGlzIGFjdGl2YWVkLCB0aGUgd3JhcERhdGEgYXJyYXkgaGFzIHRvIGJlIGluaXRpYWxpemVkLlxuICAgICAgICAgICAgaWYgKHVzZVdyYXBNb2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kd3JhcERhdGEgPSBBcnJheShsZW4pO1xuICAgICAgICAgICAgICAgIHRoaXMuJHVwZGF0ZVdyYXBEYXRhKDAsIGxlbiAtIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VXcmFwTW9kZVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHdyYXAgbW9kZSBpcyBiZWluZyB1c2VkOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiovXG4gICAgZ2V0VXNlV3JhcE1vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiR1c2VXcmFwTW9kZTtcbiAgICB9XG5cbiAgICAvLyBBbGxvdyB0aGUgd3JhcCBsaW1pdCB0byBtb3ZlIGZyZWVseSBiZXR3ZWVuIG1pbiBhbmQgbWF4LiBFaXRoZXJcbiAgICAvLyBwYXJhbWV0ZXIgY2FuIGJlIG51bGwgdG8gYWxsb3cgdGhlIHdyYXAgbGltaXQgdG8gYmUgdW5jb25zdHJhaW5lZFxuICAgIC8vIGluIHRoYXQgZGlyZWN0aW9uLiBPciBzZXQgYm90aCBwYXJhbWV0ZXJzIHRvIHRoZSBzYW1lIG51bWJlciB0byBwaW5cbiAgICAvLyB0aGUgbGltaXQgdG8gdGhhdCB2YWx1ZS5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBib3VuZGFyaWVzIG9mIHdyYXAuIEVpdGhlciB2YWx1ZSBjYW4gYmUgYG51bGxgIHRvIGhhdmUgYW4gdW5jb25zdHJhaW5lZCB3cmFwLCBvciwgdGhleSBjYW4gYmUgdGhlIHNhbWUgbnVtYmVyIHRvIHBpbiB0aGUgbGltaXQuIElmIHRoZSB3cmFwIGxpbWl0cyBmb3IgYG1pbmAgb3IgYG1heGAgYXJlIGRpZmZlcmVudCwgdGhpcyBtZXRob2QgYWxzbyBlbWl0cyB0aGUgYCdjaGFuZ2VXcmFwTW9kZSdgIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtaW4gVGhlIG1pbmltdW0gd3JhcCB2YWx1ZSAodGhlIGxlZnQgc2lkZSB3cmFwKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtYXggVGhlIG1heGltdW0gd3JhcCB2YWx1ZSAodGhlIHJpZ2h0IHNpZGUgd3JhcClcbiAgICAgKiovXG4gICAgc2V0V3JhcExpbWl0UmFuZ2UobWluLCBtYXgpIHtcbiAgICAgICAgaWYgKHRoaXMuJHdyYXBMaW1pdFJhbmdlLm1pbiAhPT0gbWluIHx8IHRoaXMuJHdyYXBMaW1pdFJhbmdlLm1heCAhPT0gbWF4KSB7XG4gICAgICAgICAgICB0aGlzLiR3cmFwTGltaXRSYW5nZSA9IHsgbWluOiBtaW4sIG1heDogbWF4IH07XG4gICAgICAgICAgICB0aGlzLiRtb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLiRiaWRpSGFuZGxlci5tYXJrQXNEaXJ0eSgpO1xuXG4gICAgICAgICAgICAvLyBUaGlzIHdpbGwgZm9yY2UgYSByZWNhbGN1bGF0aW9uIG9mIHRoZSB3cmFwIGxpbWl0XG4gICAgICAgICAgICBpZiAodGhpcy4kdXNlV3JhcE1vZGUpXG4gICAgICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlV3JhcE1vZGVcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHNob3VsZCBnZW5lcmFsbHkgb25seSBiZSBjYWxsZWQgYnkgdGhlIHJlbmRlcmVyIHdoZW4gYSByZXNpemUgaXMgZGV0ZWN0ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRlc2lyZWRMaW1pdCBUaGUgbmV3IHdyYXAgbGltaXRcbiAgICAgKiBAcGFyYW0gWyRwcmludE1hcmdpbl1cbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiovXG4gICAgYWRqdXN0V3JhcExpbWl0KGRlc2lyZWRMaW1pdCwgJHByaW50TWFyZ2luKSB7XG4gICAgICAgIHZhciBsaW1pdHMgPSB0aGlzLiR3cmFwTGltaXRSYW5nZTtcbiAgICAgICAgaWYgKGxpbWl0cy5tYXggPCAwKVxuICAgICAgICAgICAgbGltaXRzID0ge21pbjogJHByaW50TWFyZ2luLCBtYXg6ICRwcmludE1hcmdpbn07XG4gICAgICAgIHZhciB3cmFwTGltaXQgPSB0aGlzLiRjb25zdHJhaW5XcmFwTGltaXQoZGVzaXJlZExpbWl0LCBsaW1pdHMubWluLCBsaW1pdHMubWF4KTtcbiAgICAgICAgaWYgKHdyYXBMaW1pdCAhPSB0aGlzLiR3cmFwTGltaXQgJiYgd3JhcExpbWl0ID4gMSkge1xuICAgICAgICAgICAgdGhpcy4kd3JhcExpbWl0ID0gd3JhcExpbWl0O1xuICAgICAgICAgICAgdGhpcy4kbW9kaWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuJHVzZVdyYXBNb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdXBkYXRlV3JhcERhdGEoMCwgdGhpcy5nZXRMZW5ndGgoKSAtIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuJHJlc2V0Um93Q2FjaGUoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlV3JhcExpbWl0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdyYXBMaW1pdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWluXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4XVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgJGNvbnN0cmFpbldyYXBMaW1pdCh3cmFwTGltaXQsIG1pbiwgbWF4KSB7XG4gICAgICAgIGlmIChtaW4pXG4gICAgICAgICAgICB3cmFwTGltaXQgPSBNYXRoLm1heChtaW4sIHdyYXBMaW1pdCk7XG5cbiAgICAgICAgaWYgKG1heClcbiAgICAgICAgICAgIHdyYXBMaW1pdCA9IE1hdGgubWluKG1heCwgd3JhcExpbWl0KTtcblxuICAgICAgICByZXR1cm4gd3JhcExpbWl0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHdyYXAgbGltaXQuXG4gICAgICogQHJldHVybnMge051bWJlcn0gVGhlIHdyYXAgbGltaXQuXG4gICAgICoqL1xuICAgIGdldFdyYXBMaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHdyYXBMaW1pdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsaW5lIGxlbmd0aCBmb3Igc29mdCB3cmFwIGluIHRoZSBlZGl0b3IuIExpbmVzIHdpbGwgYnJlYWtcbiAgICAgKiAgYXQgYSBtaW5pbXVtIG9mIHRoZSBnaXZlbiBsZW5ndGggbWludXMgMjAgY2hhcnMgYW5kIGF0IGEgbWF4aW11bVxuICAgICAqICBvZiB0aGUgZ2l2ZW4gbnVtYmVyIG9mIGNoYXJzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCBUaGUgbWF4aW11bSBsaW5lIGxlbmd0aCBpbiBjaGFycywgZm9yIHNvZnQgd3JhcHBpbmcgbGluZXMuXG4gICAgICovXG4gICAgc2V0V3JhcExpbWl0KGxpbWl0KSB7XG4gICAgICAgIHRoaXMuc2V0V3JhcExpbWl0UmFuZ2UobGltaXQsIGxpbWl0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGRlZmluZXMgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gb2YgdGhlIHdyYXAgbGltaXQ7IGl0IGxvb2tzIHNvbWV0aGluZyBsaWtlIHRoaXM6XG4gICAgICpcbiAgICAgKiAgICAgeyBtaW46IHdyYXBMaW1pdFJhbmdlX21pbiwgbWF4OiB3cmFwTGltaXRSYW5nZV9tYXggfVxuICAgICAqXG4gICAgICogQHJldHVybnMge3sgbWluOiBudW1iZXIsIG1heDogbnVtYmVyIH19XG4gICAgICoqL1xuICAgIGdldFdyYXBMaW1pdFJhbmdlKCkge1xuICAgICAgICAvLyBBdm9pZCB1bmV4cGVjdGVkIG11dGF0aW9uIGJ5IHJldHVybmluZyBhIGNvcHlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1pbiA6IHRoaXMuJHdyYXBMaW1pdFJhbmdlLm1pbixcbiAgICAgICAgICAgIG1heCA6IHRoaXMuJHdyYXBMaW1pdFJhbmdlLm1heFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RGVsdGF9IGRlbHRhXG4gICAgICovXG4gICAgJHVwZGF0ZUludGVybmFsRGF0YU9uQ2hhbmdlKGRlbHRhKSB7XG4gICAgICAgIHZhciB1c2VXcmFwTW9kZSA9IHRoaXMuJHVzZVdyYXBNb2RlO1xuICAgICAgICB2YXIgYWN0aW9uID0gZGVsdGEuYWN0aW9uO1xuICAgICAgICB2YXIgc3RhcnQgPSBkZWx0YS5zdGFydDtcbiAgICAgICAgdmFyIGVuZCA9IGRlbHRhLmVuZDtcbiAgICAgICAgdmFyIGZpcnN0Um93ID0gc3RhcnQucm93O1xuICAgICAgICB2YXIgbGFzdFJvdyA9IGVuZC5yb3c7XG4gICAgICAgIHZhciBsZW4gPSBsYXN0Um93IC0gZmlyc3RSb3c7XG4gICAgICAgIHZhciByZW1vdmVkRm9sZHMgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuJHVwZGF0aW5nID0gdHJ1ZTtcbiAgICAgICAgaWYgKGxlbiAhPSAwKSB7XG4gICAgICAgICAgICBpZiAoYWN0aW9uID09PSBcInJlbW92ZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpc1t1c2VXcmFwTW9kZSA/IFwiJHdyYXBEYXRhXCIgOiBcIiRyb3dMZW5ndGhDYWNoZVwiXS5zcGxpY2UoZmlyc3RSb3csIGxlbik7XG5cbiAgICAgICAgICAgICAgICB2YXIgZm9sZExpbmVzID0gdGhpcy4kZm9sZERhdGE7XG4gICAgICAgICAgICAgICAgcmVtb3ZlZEZvbGRzID0gdGhpcy5nZXRGb2xkc0luUmFuZ2UoZGVsdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRm9sZHMocmVtb3ZlZEZvbGRzKTtcblxuICAgICAgICAgICAgICAgIHZhciBmb2xkTGluZSA9IHRoaXMuZ2V0Rm9sZExpbmUoZW5kLnJvdyk7XG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGZvbGRMaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRMaW5lLmFkZFJlbW92ZUNoYXJzKGVuZC5yb3csIGVuZC5jb2x1bW4sIHN0YXJ0LmNvbHVtbiAtIGVuZC5jb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICBmb2xkTGluZS5zaGlmdFJvdygtbGVuKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9sZExpbmVCZWZvcmUgPSB0aGlzLmdldEZvbGRMaW5lKGZpcnN0Um93KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRMaW5lQmVmb3JlICYmIGZvbGRMaW5lQmVmb3JlICE9PSBmb2xkTGluZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZExpbmVCZWZvcmUubWVyZ2UoZm9sZExpbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZExpbmUgPSBmb2xkTGluZUJlZm9yZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZHggPSBmb2xkTGluZXMuaW5kZXhPZihmb2xkTGluZSkgKyAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAoaWR4OyBpZHggPCBmb2xkTGluZXMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9sZExpbmUgPSBmb2xkTGluZXNbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRMaW5lLnN0YXJ0LnJvdyA+PSBlbmQucm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkTGluZS5zaGlmdFJvdygtbGVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhc3RSb3cgPSBmaXJzdFJvdztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW4pO1xuICAgICAgICAgICAgICAgIGFyZ3MudW5zaGlmdChmaXJzdFJvdywgMCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHVzZVdyYXBNb2RlID8gdGhpcy4kd3JhcERhdGEgOiB0aGlzLiRyb3dMZW5ndGhDYWNoZTtcbiAgICAgICAgICAgICAgICBhcnIuc3BsaWNlLmFwcGx5KGFyciwgYXJncyk7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBzb21lIG5ldyBsaW5lIGlzIGFkZGVkIGluc2lkZSBvZiBhIGZvbGRMaW5lLCB0aGVuIHNwbGl0XG4gICAgICAgICAgICAgICAgLy8gdGhlIGZvbGQgbGluZSB1cC5cbiAgICAgICAgICAgICAgICB2YXIgZm9sZExpbmVzID0gdGhpcy4kZm9sZERhdGE7XG4gICAgICAgICAgICAgICAgdmFyIGZvbGRMaW5lID0gdGhpcy5nZXRGb2xkTGluZShmaXJzdFJvdyk7XG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGZvbGRMaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbXAgPSBmb2xkTGluZS5yYW5nZS5jb21wYXJlSW5zaWRlKHN0YXJ0LnJvdywgc3RhcnQuY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5zaWRlIG9mIHRoZSBmb2xkTGluZSByYW5nZS4gTmVlZCB0byBzcGxpdCBzdHVmZiB1cC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtcCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkTGluZSA9IGZvbGRMaW5lLnNwbGl0KHN0YXJ0LnJvdywgc3RhcnQuY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb2xkTGluZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRMaW5lLnNoaWZ0Um93KGxlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9sZExpbmUuYWRkUmVtb3ZlQ2hhcnMobGFzdFJvdywgMCwgZW5kLmNvbHVtbiAtIHN0YXJ0LmNvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAvLyBJbmZyb250IG9mIHRoZSBmb2xkTGluZSBidXQgc2FtZSByb3cuIE5lZWQgdG8gc2hpZnQgY29sdW1uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoY21wID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkTGluZS5hZGRSZW1vdmVDaGFycyhmaXJzdFJvdywgMCwgZW5kLmNvbHVtbiAtIHN0YXJ0LmNvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkTGluZS5zaGlmdFJvdyhsZW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gaWYgdGhlIGluc2VydCBpcyBhZnRlciB0aGUgZm9sZExpbmUuXG4gICAgICAgICAgICAgICAgICAgIGlkeCA9IGZvbGRMaW5lcy5pbmRleE9mKGZvbGRMaW5lKSArIDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yIChpZHg7IGlkeCA8IGZvbGRMaW5lcy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb2xkTGluZSA9IGZvbGRMaW5lc1tpZHhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZExpbmUuc3RhcnQucm93ID49IGZpcnN0Um93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkTGluZS5zaGlmdFJvdyhsZW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVhbGlnbiBmb2xkcy4gRS5nLiBpZiB5b3UgYWRkIHNvbWUgbmV3IGNoYXJzIGJlZm9yZSBhIGZvbGQsIHRoZVxuICAgICAgICAgICAgLy8gZm9sZCBzaG91bGQgXCJtb3ZlXCIgdG8gdGhlIHJpZ2h0LlxuICAgICAgICAgICAgbGVuID0gTWF0aC5hYnMoZGVsdGEuc3RhcnQuY29sdW1uIC0gZGVsdGEuZW5kLmNvbHVtbik7XG4gICAgICAgICAgICBpZiAoYWN0aW9uID09PSBcInJlbW92ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGFsbCB0aGUgZm9sZHMgaW4gdGhlIGNoYW5nZSByYW5nZSBhbmQgcmVtb3ZlIHRoZW0uXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEZvbGRzID0gdGhpcy5nZXRGb2xkc0luUmFuZ2UoZGVsdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRm9sZHMocmVtb3ZlZEZvbGRzKTtcblxuICAgICAgICAgICAgICAgIGxlbiA9IC1sZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZm9sZExpbmUgPSB0aGlzLmdldEZvbGRMaW5lKGZpcnN0Um93KTtcbiAgICAgICAgICAgIGlmIChmb2xkTGluZSkge1xuICAgICAgICAgICAgICAgIGZvbGRMaW5lLmFkZFJlbW92ZUNoYXJzKGZpcnN0Um93LCBzdGFydC5jb2x1bW4sIGxlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlV3JhcE1vZGUgJiYgdGhpcy4kd3JhcERhdGEubGVuZ3RoICE9IHRoaXMuZG9jLmdldExlbmd0aCgpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZG9jLmdldExlbmd0aCgpIGFuZCAkd3JhcERhdGEubGVuZ3RoIGhhdmUgdG8gYmUgdGhlIHNhbWUhXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHVwZGF0aW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHVzZVdyYXBNb2RlKVxuICAgICAgICAgICAgdGhpcy4kdXBkYXRlV3JhcERhdGEoZmlyc3RSb3csIGxhc3RSb3cpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLiR1cGRhdGVSb3dMZW5ndGhDYWNoZShmaXJzdFJvdywgbGFzdFJvdyk7XG5cbiAgICAgICAgcmV0dXJuIHJlbW92ZWRGb2xkcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZmlyc3RSb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGFzdFJvd1xuICAgICAqL1xuICAgICR1cGRhdGVSb3dMZW5ndGhDYWNoZShmaXJzdFJvdywgbGFzdFJvdykge1xuICAgICAgICB0aGlzLiRyb3dMZW5ndGhDYWNoZVtmaXJzdFJvd10gPSBudWxsO1xuICAgICAgICB0aGlzLiRyb3dMZW5ndGhDYWNoZVtsYXN0Um93XSA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZpcnN0Um93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxhc3RSb3dcbiAgICAgKi9cbiAgICAkdXBkYXRlV3JhcERhdGEoZmlyc3RSb3csIGxhc3RSb3cpIHtcbiAgICAgICAgdmFyIGxpbmVzID0gdGhpcy5kb2MuZ2V0QWxsTGluZXMoKTtcbiAgICAgICAgdmFyIHRhYlNpemUgPSB0aGlzLmdldFRhYlNpemUoKTtcbiAgICAgICAgdmFyIHdyYXBEYXRhID0gdGhpcy4kd3JhcERhdGE7XG4gICAgICAgIHZhciB3cmFwTGltaXQgPSB0aGlzLiR3cmFwTGltaXQ7XG4gICAgICAgIHZhciB0b2tlbnM7XG4gICAgICAgIHZhciBmb2xkTGluZTtcblxuICAgICAgICB2YXIgcm93ID0gZmlyc3RSb3c7XG4gICAgICAgIGxhc3RSb3cgPSBNYXRoLm1pbihsYXN0Um93LCBsaW5lcy5sZW5ndGggLSAxKTtcbiAgICAgICAgd2hpbGUgKHJvdyA8PSBsYXN0Um93KSB7XG4gICAgICAgICAgICBmb2xkTGluZSA9IHRoaXMuZ2V0Rm9sZExpbmUocm93LCBmb2xkTGluZSk7XG4gICAgICAgICAgICBpZiAoIWZvbGRMaW5lKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5zID0gdGhpcy4kZ2V0RGlzcGxheVRva2VucyhsaW5lc1tyb3ddKTtcbiAgICAgICAgICAgICAgICB3cmFwRGF0YVtyb3ddID0gdGhpcy4kY29tcHV0ZVdyYXBTcGxpdHModG9rZW5zLCB3cmFwTGltaXQsIHRhYlNpemUpO1xuICAgICAgICAgICAgICAgIHJvdyArKztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdG9rZW5zID0gW107XG4gICAgICAgICAgICAgICAgZm9sZExpbmUud2FsayhmdW5jdGlvbihwbGFjZWhvbGRlciwgcm93LCBjb2x1bW4sIGxhc3RDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YWxrVG9rZW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxrVG9rZW5zID0gdGhpcy4kZ2V0RGlzcGxheVRva2VucyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIsIHRva2Vucy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhbGtUb2tlbnNbMF0gPSBQTEFDRUhPTERFUl9TVEFSVDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHdhbGtUb2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2Fsa1Rva2Vuc1tpXSA9IFBMQUNFSE9MREVSX0JPRFk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxrVG9rZW5zID0gdGhpcy4kZ2V0RGlzcGxheVRva2VucyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZXNbcm93XS5zdWJzdHJpbmcobGFzdENvbHVtbiwgY29sdW1uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnMgPSB0b2tlbnMuY29uY2F0KHdhbGtUb2tlbnMpO1xuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIGZvbGRMaW5lLmVuZC5yb3csXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzW2ZvbGRMaW5lLmVuZC5yb3ddLmxlbmd0aCArIDFcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgd3JhcERhdGFbZm9sZExpbmUuc3RhcnQucm93XSA9IHRoaXMuJGNvbXB1dGVXcmFwU3BsaXRzKHRva2Vucywgd3JhcExpbWl0LCB0YWJTaXplKTtcbiAgICAgICAgICAgICAgICByb3cgPSBmb2xkTGluZS5lbmQucm93ICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyW119dG9rZW5zXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdyYXBMaW1pdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0YWJTaXplXG4gICAgICogQHJldHVybnMgeypbXX1cbiAgICAgKi9cbiAgICAkY29tcHV0ZVdyYXBTcGxpdHModG9rZW5zLCB3cmFwTGltaXQsIHRhYlNpemUpIHtcbiAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNwbGl0cyA9IFtdO1xuICAgICAgICB2YXIgZGlzcGxheUxlbmd0aCA9IHRva2Vucy5sZW5ndGg7XG4gICAgICAgIHZhciBsYXN0U3BsaXQgPSAwLCBsYXN0RG9jU3BsaXQgPSAwO1xuXG4gICAgICAgIHZhciBpc0NvZGUgPSB0aGlzLiR3cmFwQXNDb2RlO1xuXG4gICAgICAgIHZhciBpbmRlbnRlZFNvZnRXcmFwID0gdGhpcy4kaW5kZW50ZWRTb2Z0V3JhcDtcbiAgICAgICAgdmFyIG1heEluZGVudCA9IHdyYXBMaW1pdCA8PSBNYXRoLm1heCgyICogdGFiU2l6ZSwgOClcbiAgICAgICAgICAgIHx8IGluZGVudGVkU29mdFdyYXAgPT09IGZhbHNlID8gMCA6IE1hdGguZmxvb3Iod3JhcExpbWl0IC8gMik7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0V3JhcEluZGVudCgpIHtcbiAgICAgICAgICAgIHZhciBpbmRlbnRhdGlvbiA9IDA7XG4gICAgICAgICAgICBpZiAobWF4SW5kZW50ID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRlbnRhdGlvbjtcbiAgICAgICAgICAgIGlmIChpbmRlbnRlZFNvZnRXcmFwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gPT0gU1BBQ0UpXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRlbnRhdGlvbiArPSAxO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0b2tlbiA9PSBUQUIpXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRlbnRhdGlvbiArPSB0YWJTaXplO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0b2tlbiA9PSBUQUJfU1BBQ0UpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQ29kZSAmJiBpbmRlbnRlZFNvZnRXcmFwICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICBpbmRlbnRhdGlvbiArPSB0YWJTaXplO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGluZGVudGF0aW9uLCBtYXhJbmRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGFkZFNwbGl0KHNjcmVlblBvcykge1xuICAgICAgICAgICAgLy8gVGhlIGRvY3VtZW50IHNpemUgaXMgdGhlIGN1cnJlbnQgc2l6ZSAtIHRoZSBleHRyYSB3aWR0aCBmb3IgdGFic1xuICAgICAgICAgICAgLy8gYW5kIG11bHRpcGxlV2lkdGggY2hhcmFjdGVycy5cbiAgICAgICAgICAgIHZhciBsZW4gPSBzY3JlZW5Qb3MgLSBsYXN0U3BsaXQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gbGFzdFNwbGl0OyBpIDwgc2NyZWVuUG9zOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2ggPSB0b2tlbnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGNoID09PSAxMiB8fCBjaCA9PT0gMikgbGVuIC09IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghc3BsaXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGluZGVudCA9IGdldFdyYXBJbmRlbnQoKTtcbiAgICAgICAgICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3IgVE9ETzogcG90ZW50aWFsIHdyb25nIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgc3BsaXRzLmluZGVudCA9IGluZGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3REb2NTcGxpdCArPSBsZW47XG4gICAgICAgICAgICBzcGxpdHMucHVzaChsYXN0RG9jU3BsaXQpO1xuICAgICAgICAgICAgbGFzdFNwbGl0ID0gc2NyZWVuUG9zO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRlbnQgPSAwO1xuICAgICAgICB3aGlsZSAoZGlzcGxheUxlbmd0aCAtIGxhc3RTcGxpdCA+IHdyYXBMaW1pdCAtIGluZGVudCkge1xuICAgICAgICAgICAgLy8gVGhpcyBpcywgd2hlcmUgdGhlIHNwbGl0IHNob3VsZCBiZS5cbiAgICAgICAgICAgIHZhciBzcGxpdCA9IGxhc3RTcGxpdCArIHdyYXBMaW1pdCAtIGluZGVudDtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBzcGFjZSBvciB0YWIgYXQgdGhpcyBzcGxpdCBwb3NpdGlvbiwgdGhlbiBtYWtpbmdcbiAgICAgICAgICAgIC8vIGEgc3BsaXQgaXMgc2ltcGxlLlxuICAgICAgICAgICAgaWYgKHRva2Vuc1tzcGxpdCAtIDFdID49IFNQQUNFICYmIHRva2Vuc1tzcGxpdF0gPj0gU1BBQ0UpIHtcbiAgICAgICAgICAgICAgICAvKiBkaXNhYmxlZCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FqYXhvcmcvYWNlL2lzc3Vlcy8xMTg2XG4gICAgICAgICAgICAgICAgLy8gSW5jbHVkZSBhbGwgZm9sbG93aW5nIHNwYWNlcyArIHRhYnMgaW4gdGhpcyBzcGxpdCBhcyB3ZWxsLlxuICAgICAgICAgICAgICAgIHdoaWxlICh0b2tlbnNbc3BsaXRdID49IFNQQUNFKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwbGl0ICsrO1xuICAgICAgICAgICAgICAgIH0gKi9cbiAgICAgICAgICAgICAgICBhZGRTcGxpdChzcGxpdCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vID09PSBFTFNFID09PVxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3BsaXQgaXMgaW5zaWRlIG9mIGEgcGxhY2Vob2xkZXIuIFBsYWNlaG9sZGVyIGFyZVxuICAgICAgICAgICAgLy8gbm90IHNwbGl0YWJsZS4gVGhlcmVmb3JlLCBzZWVrIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAvLyBhbmQgdHJ5IHRvIHBsYWNlIHRoZSBzcGxpdCBiZWZvcmUgdGhlIHBsYWNlaG9sZGVyJ3Mgc3RhcnQuXG4gICAgICAgICAgICBpZiAodG9rZW5zW3NwbGl0XSA9PSBQTEFDRUhPTERFUl9TVEFSVCB8fCB0b2tlbnNbc3BsaXRdID09IFBMQUNFSE9MREVSX0JPRFkpIHtcbiAgICAgICAgICAgICAgICAvLyBTZWVrIHRoZSBzdGFydCBvZiB0aGUgcGxhY2Vob2xkZXIgYW5kIGRvIHRoZSBzcGxpdFxuICAgICAgICAgICAgICAgIC8vIGJlZm9yZSB0aGUgcGxhY2Vob2xkZXIuIEJ5IGRlZmluaXRpb24gdGhlcmUgYWx3YXlzXG4gICAgICAgICAgICAgICAgLy8gYSBQTEFDRUhPTERFUl9TVEFSVCBiZXR3ZWVuIHNwbGl0IGFuZCBsYXN0U3BsaXQuXG4gICAgICAgICAgICAgICAgZm9yIChzcGxpdDsgc3BsaXQgIT0gbGFzdFNwbGl0IC0gMTsgc3BsaXQtLSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5zW3NwbGl0XSA9PSBQTEFDRUhPTERFUl9TVEFSVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3BsaXQrKzsgPDwgTm8gaW5jcmVtZW50YWwgaGVyZSBhcyB3ZSB3YW50IHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgaGF2ZSB0aGUgcG9zaXRpb24gYmVmb3JlIHRoZSBQbGFjZWhvbGRlci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIFBMQUNFSE9MREVSX1NUQVJUIGlzIG5vdCB0aGUgaW5kZXggb2YgdGhlXG4gICAgICAgICAgICAgICAgLy8gbGFzdCBzcGxpdCwgdGhlbiB3ZSBjYW4gZG8gdGhlIHNwbGl0XG4gICAgICAgICAgICAgICAgaWYgKHNwbGl0ID4gbGFzdFNwbGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFNwbGl0KHNwbGl0KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIFBMQUNFSE9MREVSX1NUQVJUIElTIHRoZSBpbmRleCBvZiB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIHNwbGl0LCB0aGVuIHdlIGhhdmUgdG8gcGxhY2UgdGhlIHNwbGl0IGFmdGVyIHRoZVxuICAgICAgICAgICAgICAgIC8vIHBsYWNlaG9sZGVyLiBTbywgbGV0J3Mgc2VlayBmb3IgdGhlIGVuZCBvZiB0aGUgcGxhY2Vob2xkZXIuXG4gICAgICAgICAgICAgICAgc3BsaXQgPSBsYXN0U3BsaXQgKyB3cmFwTGltaXQ7XG4gICAgICAgICAgICAgICAgZm9yIChzcGxpdDsgc3BsaXQgPCB0b2tlbnMubGVuZ3RoOyBzcGxpdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbnNbc3BsaXRdICE9IFBMQUNFSE9MREVSX0JPRFkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgc3BpbHQgPT0gdG9rZW5zLmxlbmd0aCwgdGhlbiB0aGUgcGxhY2Vob2xkZXIgaXMgdGhlIGxhc3RcbiAgICAgICAgICAgICAgICAvLyB0aGluZyBpbiB0aGUgbGluZSBhbmQgYWRkaW5nIGEgbmV3IHNwbGl0IGRvZXNuJ3QgbWFrZSBzZW5zZS5cbiAgICAgICAgICAgICAgICBpZiAoc3BsaXQgPT0gdG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhazsgIC8vIEJyZWFrcyB0aGUgd2hpbGUtbG9vcC5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBhZGQgdGhlIHNwbGl0Li4uXG4gICAgICAgICAgICAgICAgYWRkU3BsaXQoc3BsaXQpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyA9PT0gRUxTRSA9PT1cbiAgICAgICAgICAgIC8vIFNlYXJjaCBmb3IgdGhlIGZpcnN0IG5vbiBzcGFjZS90YWIvcGxhY2Vob2xkZXIvcHVuY3R1YXRpb24gdG9rZW4gYmFja3dhcmRzLlxuICAgICAgICAgICAgdmFyIG1pblNwbGl0ID0gTWF0aC5tYXgoc3BsaXQgLSAod3JhcExpbWl0IC0od3JhcExpbWl0Pj4yKSksIGxhc3RTcGxpdCAtIDEpO1xuICAgICAgICAgICAgd2hpbGUgKHNwbGl0ID4gbWluU3BsaXQgJiYgdG9rZW5zW3NwbGl0XSA8IFBMQUNFSE9MREVSX1NUQVJUKSB7XG4gICAgICAgICAgICAgICAgc3BsaXQgLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNDb2RlKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHNwbGl0ID4gbWluU3BsaXQgJiYgdG9rZW5zW3NwbGl0XSA8IFBMQUNFSE9MREVSX1NUQVJUKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwbGl0IC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aGlsZSAoc3BsaXQgPiBtaW5TcGxpdCAmJiB0b2tlbnNbc3BsaXRdID09IFBVTkNUVUFUSU9OKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwbGl0IC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHNwbGl0ID4gbWluU3BsaXQgJiYgdG9rZW5zW3NwbGl0XSA8IFNQQUNFKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwbGl0IC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlIGZvdW5kIG9uZSwgdGhlbiBhZGQgdGhlIHNwbGl0LlxuICAgICAgICAgICAgaWYgKHNwbGl0ID4gbWluU3BsaXQpIHtcbiAgICAgICAgICAgICAgICBhZGRTcGxpdCgrK3NwbGl0KTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gPT09IEVMU0UgPT09XG4gICAgICAgICAgICBzcGxpdCA9IGxhc3RTcGxpdCArIHdyYXBMaW1pdDtcbiAgICAgICAgICAgIC8vIFRoZSBzcGxpdCBpcyBpbnNpZGUgb2YgYSBDSEFSIG9yIENIQVJfRVhUIHRva2VuIGFuZCBubyBzcGFjZVxuICAgICAgICAgICAgLy8gYXJvdW5kIC0+IGZvcmNlIGEgc3BsaXQuXG4gICAgICAgICAgICBpZiAodG9rZW5zW3NwbGl0XSA9PSBDSEFSX0VYVClcbiAgICAgICAgICAgICAgICBzcGxpdC0tO1xuICAgICAgICAgICAgYWRkU3BsaXQoc3BsaXQgLSBpbmRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcGxpdHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBzdHJpbmcsIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGRpc3BsYXkgY2hhcmFjdGVycywgaW5jbHVkaW5nIHRhYnMgYW5kIHNwYWNlcy5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gY2hlY2tcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW29mZnNldF0gVGhlIHZhbHVlIHRvIHN0YXJ0IGF0XG4gICAgICogQHJldHVybnMge251bWJlcltdfVxuICAgICAqKi9cbiAgICAkZ2V0RGlzcGxheVRva2VucyhzdHIsIG9mZnNldCkge1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIHZhciB0YWJTaXplO1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIC8vIFRhYlxuICAgICAgICAgICAgaWYgKGMgPT0gOSkge1xuICAgICAgICAgICAgICAgIHRhYlNpemUgPSB0aGlzLmdldFNjcmVlblRhYlNpemUoYXJyLmxlbmd0aCArIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goVEFCKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMTsgbiA8IHRhYlNpemU7IG4rKykge1xuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChUQUJfU1BBQ0UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNwYWNlXG4gICAgICAgICAgICBlbHNlIGlmIChjID09IDMyKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goU1BBQ0UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKChjID4gMzkgJiYgYyA8IDQ4KSB8fCAoYyA+IDU3ICYmIGMgPCA2NCkpIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChQVU5DVFVBVElPTik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmdWxsIHdpZHRoIGNoYXJhY3RlcnNcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPj0gMHgxMTAwICYmIGlzRnVsbFdpZHRoKGMpKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goQ0hBUiwgQ0hBUl9FWFQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChDSEFSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgdGhlIHdpZHRoIG9mIHRoZSBzdHJpbmcgYHN0cmAgb24gdGhlIHNjcmVlbiB3aGlsZSBhc3N1bWluZyB0aGF0IHRoZSBzdHJpbmcgc3RhcnRzIGF0IHRoZSBmaXJzdCBjb2x1bW4gb24gdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBzdHJpbmcgdG8gY2FsY3VsYXRlIHRoZSBzY3JlZW4gd2lkdGggb2ZcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW21heFNjcmVlbkNvbHVtbl1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3NjcmVlbkNvbHVtbl1cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyW119IFJldHVybnMgYW4gYGludFtdYCBhcnJheSB3aXRoIHR3byBlbGVtZW50czo8YnIvPlxuICAgICAqIFRoZSBmaXJzdCBwb3NpdGlvbiBpbmRpY2F0ZXMgdGhlIG51bWJlciBvZiBjb2x1bW5zIGZvciBgc3RyYCBvbiBzY3JlZW4uPGJyLz5cbiAgICAgKiBUaGUgc2Vjb25kIHZhbHVlIGNvbnRhaW5zIHRoZSBwb3NpdGlvbiBvZiB0aGUgZG9jdW1lbnQgY29sdW1uIHRoYXQgdGhpcyBmdW5jdGlvbiByZWFkIHVudGlsLlxuICAgICAqKi9cbiAgICAkZ2V0U3RyaW5nU2NyZWVuV2lkdGgoc3RyLCBtYXhTY3JlZW5Db2x1bW4sIHNjcmVlbkNvbHVtbikge1xuICAgICAgICBpZiAobWF4U2NyZWVuQ29sdW1uID09IDApXG4gICAgICAgICAgICByZXR1cm4gWzAsIDBdO1xuICAgICAgICBpZiAobWF4U2NyZWVuQ29sdW1uID09IG51bGwpXG4gICAgICAgICAgICBtYXhTY3JlZW5Db2x1bW4gPSBJbmZpbml0eTtcbiAgICAgICAgc2NyZWVuQ29sdW1uID0gc2NyZWVuQ29sdW1uIHx8IDA7XG5cbiAgICAgICAgdmFyIGMsIGNvbHVtbjtcbiAgICAgICAgZm9yIChjb2x1bW4gPSAwOyBjb2x1bW4gPCBzdHIubGVuZ3RoOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGNvbHVtbik7XG4gICAgICAgICAgICAvLyB0YWJcbiAgICAgICAgICAgIGlmIChjID09IDkpIHtcbiAgICAgICAgICAgICAgICBzY3JlZW5Db2x1bW4gKz0gdGhpcy5nZXRTY3JlZW5UYWJTaXplKHNjcmVlbkNvbHVtbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmdWxsIHdpZHRoIGNoYXJhY3RlcnNcbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPj0gMHgxMTAwICYmIGlzRnVsbFdpZHRoKGMpKSB7XG4gICAgICAgICAgICAgICAgc2NyZWVuQ29sdW1uICs9IDI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNjcmVlbkNvbHVtbiArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNjcmVlbkNvbHVtbiA+IG1heFNjcmVlbkNvbHVtbikge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtzY3JlZW5Db2x1bW4sIGNvbHVtbl07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBudW1iZXIgb2Ygc2NyZWVucm93cyBpbiBhIHdyYXBwZWQgbGluZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSByb3cgbnVtYmVyIHRvIGNoZWNrXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0Um93TGVuZ3RoKHJvdykge1xuICAgICAgICB2YXIgaCA9IDE7XG4gICAgICAgIGlmICh0aGlzLmxpbmVXaWRnZXRzKVxuICAgICAgICAgICAgaCArPSB0aGlzLmxpbmVXaWRnZXRzW3Jvd10gJiYgdGhpcy5saW5lV2lkZ2V0c1tyb3ddLnJvd0NvdW50IHx8IDA7XG5cbiAgICAgICAgaWYgKCF0aGlzLiR1c2VXcmFwTW9kZSB8fCAhdGhpcy4kd3JhcERhdGFbcm93XSlcbiAgICAgICAgICAgIHJldHVybiBoO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kd3JhcERhdGFbcm93XS5sZW5ndGggKyBoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3dcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRSb3dMaW5lQ291bnQocm93KSB7XG4gICAgICAgIGlmICghdGhpcy4kdXNlV3JhcE1vZGUgfHwgIXRoaXMuJHdyYXBEYXRhW3Jvd10pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHdyYXBEYXRhW3Jvd10ubGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY3JlZW5Sb3dcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRSb3dXcmFwSW5kZW50KHNjcmVlblJvdykge1xuICAgICAgICBpZiAodGhpcy4kdXNlV3JhcE1vZGUpIHtcbiAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihzY3JlZW5Sb3csIE51bWJlci5NQVhfVkFMVUUpO1xuICAgICAgICAgICAgdmFyIHNwbGl0cyA9IHRoaXMuJHdyYXBEYXRhW3Bvcy5yb3ddO1xuICAgICAgICAgICAgcmV0dXJuIHNwbGl0cy5sZW5ndGggJiYgc3BsaXRzWzBdIDwgcG9zLmNvbHVtbiA/IHNwbGl0cy5pbmRlbnQgOiAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiAob24gc2NyZWVuKSBmb3IgdGhlIGxhc3QgY2hhcmFjdGVyIGluIHRoZSBwcm92aWRlZCBzY3JlZW4gcm93LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY3JlZW5Sb3cgVGhlIHNjcmVlbiByb3cgdG8gY2hlY2tcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqXG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24uZG9jdW1lbnRUb1NjcmVlbkNvbHVtblxuICAgICAqKi9cbiAgICBnZXRTY3JlZW5MYXN0Um93Q29sdW1uKHNjcmVlblJvdykge1xuICAgICAgICB2YXIgcG9zID0gdGhpcy5zY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24oc2NyZWVuUm93LCBOdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRUb1NjcmVlbkNvbHVtbihwb3Mucm93LCBwb3MuY29sdW1uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3IgdGhlIGdpdmVuIGRvY3VtZW50IHJvdyBhbmQgY29sdW1uLCB0aGlzIHJldHVybnMgdGhlIGNvbHVtbiBwb3NpdGlvbiBvZiB0aGUgbGFzdCBzY3JlZW4gcm93LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkb2NSb3dcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZG9jQ29sdW1uXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0RG9jdW1lbnRMYXN0Um93Q29sdW1uKGRvY1JvdywgZG9jQ29sdW1uKSB7XG4gICAgICAgIHZhciBzY3JlZW5Sb3cgPSB0aGlzLmRvY3VtZW50VG9TY3JlZW5Sb3coZG9jUm93LCBkb2NDb2x1bW4pO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTY3JlZW5MYXN0Um93Q29sdW1uKHNjcmVlblJvdyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9yIHRoZSBnaXZlbiBkb2N1bWVudCByb3cgYW5kIGNvbHVtbiwgdGhpcyByZXR1cm5zIHRoZSBkb2N1bWVudCBwb3NpdGlvbiBvZiB0aGUgbGFzdCByb3cuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRvY1Jvd1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkb2NDb2x1bW5cbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9XG4gICAgICoqL1xuICAgIGdldERvY3VtZW50TGFzdFJvd0NvbHVtblBvc2l0aW9uKGRvY1JvdywgZG9jQ29sdW1uKSB7XG4gICAgICAgIHZhciBzY3JlZW5Sb3cgPSB0aGlzLmRvY3VtZW50VG9TY3JlZW5Sb3coZG9jUm93LCBkb2NDb2x1bW4pO1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24oc2NyZWVuUm93LCBOdW1iZXIuTUFYX1ZBTFVFIC8gMTApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvciB0aGUgZ2l2ZW4gcm93LCB0aGlzIHJldHVybnMgdGhlIHNwbGl0IGRhdGEuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEByZXR1cm5zIHtTdHJpbmcgfCB1bmRlZmluZWR9XG4gICAgICovXG4gICAgZ2V0Um93U3BsaXREYXRhKHJvdykge1xuICAgICAgICBpZiAoIXRoaXMuJHVzZVdyYXBNb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHdyYXBEYXRhW3Jvd107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGlzdGFuY2UgdG8gdGhlIG5leHQgdGFiIHN0b3AgYXQgdGhlIHNwZWNpZmllZCBzY3JlZW4gY29sdW1uLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY3JlZW5Db2x1bW4gVGhlIHNjcmVlbiBjb2x1bW4gdG8gY2hlY2tcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldFNjcmVlblRhYlNpemUoc2NyZWVuQ29sdW1uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiR0YWJTaXplIC0gKHNjcmVlbkNvbHVtbiAlIHRoaXMuJHRhYlNpemUgfCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NyZWVuUm93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNjcmVlbkNvbHVtblxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2NyZWVuVG9Eb2N1bWVudFJvdyhzY3JlZW5Sb3csIHNjcmVlbkNvbHVtbikge1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24oc2NyZWVuUm93LCBzY3JlZW5Db2x1bW4pLnJvdztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NyZWVuUm93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNjcmVlbkNvbHVtblxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2NyZWVuVG9Eb2N1bWVudENvbHVtbihzY3JlZW5Sb3csIHNjcmVlbkNvbHVtbikge1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24oc2NyZWVuUm93LCBzY3JlZW5Db2x1bW4pLmNvbHVtbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBjaGFyYWN0ZXJzIGNvb3JkaW5hdGVzIG9uIHRoZSBzY3JlZW4gdG8gY2hhcmFjdGVycyBjb29yZGluYXRlcyB3aXRoaW4gdGhlIGRvY3VtZW50LiBbVGhpcyB0YWtlcyBpbnRvIGFjY291bnQgY29kZSBmb2xkaW5nLCB3b3JkIHdyYXAsIHRhYiBzaXplLCBhbmQgYW55IG90aGVyIHZpc3VhbCBtb2RpZmljYXRpb25zLl17OiAjY29udmVyc2lvbkNvbnNpZGVyYXRpb25zfVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY3JlZW5Sb3cgVGhlIHNjcmVlbiByb3cgdG8gY2hlY2tcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2NyZWVuQ29sdW1uIFRoZSBzY3JlZW4gY29sdW1uIHRvIGNoZWNrXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtvZmZzZXRYXSBzY3JlZW4gY2hhcmFjdGVyIHgtb2Zmc2V0IFtvcHRpb25hbF1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQb2ludH0gVGhlIG9iamVjdCByZXR1cm5lZCBoYXMgdHdvIHByb3BlcnRpZXM6IGByb3dgIGFuZCBgY29sdW1uYC5cbiAgICAgKlxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvblxuICAgICAqKi9cbiAgICBzY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24oc2NyZWVuUm93LCBzY3JlZW5Db2x1bW4sIG9mZnNldFgpIHtcbiAgICAgICAgaWYgKHNjcmVlblJvdyA8IDApXG4gICAgICAgICAgICByZXR1cm4ge3JvdzogMCwgY29sdW1uOiAwfTtcblxuICAgICAgICB2YXIgbGluZTtcbiAgICAgICAgdmFyIGRvY1JvdyA9IDA7XG4gICAgICAgIHZhciBkb2NDb2x1bW4gPSAwO1xuICAgICAgICB2YXIgY29sdW1uO1xuICAgICAgICB2YXIgcm93ID0gMDtcbiAgICAgICAgdmFyIHJvd0xlbmd0aCA9IDA7XG5cbiAgICAgICAgdmFyIHJvd0NhY2hlID0gdGhpcy4kc2NyZWVuUm93Q2FjaGU7XG4gICAgICAgIHZhciBpID0gdGhpcy4kZ2V0Um93Q2FjaGVJbmRleChyb3dDYWNoZSwgc2NyZWVuUm93KTtcbiAgICAgICAgdmFyIGwgPSByb3dDYWNoZS5sZW5ndGg7XG4gICAgICAgIGlmIChsICYmIGkgPj0gMCkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHJvd0NhY2hlW2ldO1xuICAgICAgICAgICAgdmFyIGRvY1JvdyA9IHRoaXMuJGRvY1Jvd0NhY2hlW2ldO1xuICAgICAgICAgICAgdmFyIGRvQ2FjaGUgPSBzY3JlZW5Sb3cgPiByb3dDYWNoZVtsIC0gMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZG9DYWNoZSA9ICFsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1heFJvdyA9IHRoaXMuZ2V0TGVuZ3RoKCkgLSAxO1xuICAgICAgICB2YXIgZm9sZExpbmUgPSB0aGlzLmdldE5leHRGb2xkTGluZShkb2NSb3cpO1xuICAgICAgICB2YXIgZm9sZFN0YXJ0ID0gZm9sZExpbmUgPyBmb2xkTGluZS5zdGFydC5yb3cgOiBJbmZpbml0eTtcblxuICAgICAgICB3aGlsZSAocm93IDw9IHNjcmVlblJvdykge1xuICAgICAgICAgICAgcm93TGVuZ3RoID0gdGhpcy5nZXRSb3dMZW5ndGgoZG9jUm93KTtcbiAgICAgICAgICAgIGlmIChyb3cgKyByb3dMZW5ndGggPiBzY3JlZW5Sb3cgfHwgZG9jUm93ID49IG1heFJvdykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByb3cgKz0gcm93TGVuZ3RoO1xuICAgICAgICAgICAgICAgIGRvY1JvdysrO1xuICAgICAgICAgICAgICAgIGlmIChkb2NSb3cgPiBmb2xkU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jUm93ID0gZm9sZExpbmUuZW5kLnJvdysxO1xuICAgICAgICAgICAgICAgICAgICBmb2xkTGluZSA9IHRoaXMuZ2V0TmV4dEZvbGRMaW5lKGRvY1JvdywgZm9sZExpbmUpO1xuICAgICAgICAgICAgICAgICAgICBmb2xkU3RhcnQgPSBmb2xkTGluZSA/IGZvbGRMaW5lLnN0YXJ0LnJvdyA6IEluZmluaXR5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRvQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRkb2NSb3dDYWNoZS5wdXNoKGRvY1Jvdyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2NyZWVuUm93Q2FjaGUucHVzaChyb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvbGRMaW5lICYmIGZvbGRMaW5lLnN0YXJ0LnJvdyA8PSBkb2NSb3cpIHtcbiAgICAgICAgICAgIGxpbmUgPSB0aGlzLmdldEZvbGREaXNwbGF5TGluZShmb2xkTGluZSk7XG4gICAgICAgICAgICBkb2NSb3cgPSBmb2xkTGluZS5zdGFydC5yb3c7XG4gICAgICAgIH0gZWxzZSBpZiAocm93ICsgcm93TGVuZ3RoIDw9IHNjcmVlblJvdyB8fCBkb2NSb3cgPiBtYXhSb3cpIHtcbiAgICAgICAgICAgIC8vIGNsaXAgYXQgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnRcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcm93OiBtYXhSb3csXG4gICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLmdldExpbmUobWF4Um93KS5sZW5ndGhcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaW5lID0gdGhpcy5nZXRMaW5lKGRvY1Jvdyk7XG4gICAgICAgICAgICBmb2xkTGluZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdyYXBJbmRlbnQgPSAwLCBzcGxpdEluZGV4ID0gTWF0aC5mbG9vcihzY3JlZW5Sb3cgLSByb3cpO1xuICAgICAgICBpZiAodGhpcy4kdXNlV3JhcE1vZGUpIHtcbiAgICAgICAgICAgIHZhciBzcGxpdHMgPSB0aGlzLiR3cmFwRGF0YVtkb2NSb3ddO1xuICAgICAgICAgICAgaWYgKHNwbGl0cykge1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IHNwbGl0c1tzcGxpdEluZGV4XTtcbiAgICAgICAgICAgICAgICBpZihzcGxpdEluZGV4ID4gMCAmJiBzcGxpdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBJbmRlbnQgPSBzcGxpdHMuaW5kZW50O1xuICAgICAgICAgICAgICAgICAgICBkb2NDb2x1bW4gPSBzcGxpdHNbc3BsaXRJbmRleCAtIDFdIHx8IHNwbGl0c1tzcGxpdHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cmluZyhkb2NDb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvZmZzZXRYICE9PSB1bmRlZmluZWQgJiYgdGhpcy4kYmlkaUhhbmRsZXIuaXNCaWRpUm93KHJvdyArIHNwbGl0SW5kZXgsIGRvY1Jvdywgc3BsaXRJbmRleCkpXG4gICAgICAgICAgICBzY3JlZW5Db2x1bW4gPSB0aGlzLiRiaWRpSGFuZGxlci5vZmZzZXRUb0NvbChvZmZzZXRYKTtcblxuICAgICAgICBkb2NDb2x1bW4gKz0gdGhpcy4kZ2V0U3RyaW5nU2NyZWVuV2lkdGgobGluZSwgc2NyZWVuQ29sdW1uIC0gd3JhcEluZGVudClbMV07XG5cbiAgICAgICAgLy8gV2UgcmVtb3ZlIG9uZSBjaGFyYWN0ZXIgYXQgdGhlIGVuZCBzbyB0aGF0IHRoZSBkb2NDb2x1bW5cbiAgICAgICAgLy8gcG9zaXRpb24gcmV0dXJuZWQgaXMgbm90IGFzc29jaWF0ZWQgdG8gdGhlIG5leHQgcm93IG9uIHRoZSBzY3JlZW4uXG4gICAgICAgIGlmICh0aGlzLiR1c2VXcmFwTW9kZSAmJiBkb2NDb2x1bW4gPj0gY29sdW1uKVxuICAgICAgICAgICAgZG9jQ29sdW1uID0gY29sdW1uIC0gMTtcblxuICAgICAgICBpZiAoZm9sZExpbmUpXG4gICAgICAgICAgICByZXR1cm4gZm9sZExpbmUuaWR4VG9Qb3NpdGlvbihkb2NDb2x1bW4pO1xuXG4gICAgICAgIHJldHVybiB7cm93OiBkb2NSb3csIGNvbHVtbjogZG9jQ29sdW1ufTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBkb2N1bWVudCBjb29yZGluYXRlcyB0byBzY3JlZW4gY29vcmRpbmF0ZXMuIHs6Y29udmVyc2lvbkNvbnNpZGVyYXRpb25zfVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfFBvaW50fSBkb2NSb3cgVGhlIGRvY3VtZW50IHJvdyB0byBjaGVja1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfHVuZGVmaW5lZH0gW2RvY0NvbHVtbl0gVGhlIGRvY3VtZW50IGNvbHVtbiB0byBjaGVja1xuICAgICAqIEByZXR1cm5zIHtQb2ludH0gVGhlIG9iamVjdCByZXR1cm5lZCBieSB0aGlzIG1ldGhvZCBoYXMgdHdvIHByb3BlcnRpZXM6IGByb3dgIGFuZCBgY29sdW1uYC5cbiAgICAgKlxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvblxuICAgICAqKi9cbiAgICBkb2N1bWVudFRvU2NyZWVuUG9zaXRpb24oZG9jUm93LCBkb2NDb2x1bW4pIHtcbiAgICAgICAgLy8gTm9ybWFsaXplIHRoZSBwYXNzZWQgaW4gYXJndW1lbnRzLlxuICAgICAgICBpZiAodHlwZW9mIGRvY0NvbHVtbiA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLiRjbGlwUG9zaXRpb25Ub0RvY3VtZW50KC8qKkB0eXBle1BvaW50fSovKGRvY1Jvdykucm93LCAvKipAdHlwZXtQb2ludH0qLyhkb2NSb3cpLmNvbHVtbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHBvcyA9IHRoaXMuJGNsaXBQb3NpdGlvblRvRG9jdW1lbnQoLyoqQHR5cGV7bnVtYmVyfSovKGRvY1JvdyksIGRvY0NvbHVtbik7XG5cbiAgICAgICAgZG9jUm93ID0gcG9zLnJvdztcbiAgICAgICAgZG9jQ29sdW1uID0gcG9zLmNvbHVtbjtcblxuICAgICAgICB2YXIgc2NyZWVuUm93ID0gMDtcbiAgICAgICAgdmFyIGZvbGRTdGFydFJvdyA9IG51bGw7XG4gICAgICAgIHZhciBmb2xkID0gbnVsbDtcblxuICAgICAgICAvLyBDbGFtcCB0aGUgZG9jUm93IHBvc2l0aW9uIGluIGNhc2UgaXQncyBpbnNpZGUgb2YgYSBmb2xkZWQgYmxvY2suXG4gICAgICAgIGZvbGQgPSB0aGlzLmdldEZvbGRBdChkb2NSb3csIGRvY0NvbHVtbiwgMSk7XG4gICAgICAgIGlmIChmb2xkKSB7XG4gICAgICAgICAgICBkb2NSb3cgPSBmb2xkLnN0YXJ0LnJvdztcbiAgICAgICAgICAgIGRvY0NvbHVtbiA9IGZvbGQuc3RhcnQuY29sdW1uO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJvd0VuZCwgcm93ID0gMDtcblxuICAgICAgICB2YXIgcm93Q2FjaGUgPSB0aGlzLiRkb2NSb3dDYWNoZTtcbiAgICAgICAgdmFyIGkgPSB0aGlzLiRnZXRSb3dDYWNoZUluZGV4KHJvd0NhY2hlLCBkb2NSb3cpO1xuICAgICAgICB2YXIgbCA9IHJvd0NhY2hlLmxlbmd0aDtcbiAgICAgICAgaWYgKGwgJiYgaSA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgcm93ID0gcm93Q2FjaGVbaV07XG4gICAgICAgICAgICB2YXIgc2NyZWVuUm93ID0gdGhpcy4kc2NyZWVuUm93Q2FjaGVbaV07XG4gICAgICAgICAgICB2YXIgZG9DYWNoZSA9IGRvY1JvdyA+IHJvd0NhY2hlW2wgLSAxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkb0NhY2hlID0gIWw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZm9sZExpbmUgPSB0aGlzLmdldE5leHRGb2xkTGluZShyb3cpO1xuICAgICAgICB2YXIgZm9sZFN0YXJ0ID0gZm9sZExpbmUgP2ZvbGRMaW5lLnN0YXJ0LnJvdyA6SW5maW5pdHk7XG5cbiAgICAgICAgd2hpbGUgKHJvdyA8IGRvY1Jvdykge1xuICAgICAgICAgICAgaWYgKHJvdyA+PSBmb2xkU3RhcnQpIHtcbiAgICAgICAgICAgICAgICByb3dFbmQgPSBmb2xkTGluZS5lbmQucm93ICsgMTtcbiAgICAgICAgICAgICAgICBpZiAocm93RW5kID4gZG9jUm93KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBmb2xkTGluZSA9IHRoaXMuZ2V0TmV4dEZvbGRMaW5lKHJvd0VuZCwgZm9sZExpbmUpO1xuICAgICAgICAgICAgICAgIGZvbGRTdGFydCA9IGZvbGRMaW5lID9mb2xkTGluZS5zdGFydC5yb3cgOkluZmluaXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcm93RW5kID0gcm93ICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2NyZWVuUm93ICs9IHRoaXMuZ2V0Um93TGVuZ3RoKHJvdyk7XG4gICAgICAgICAgICByb3cgPSByb3dFbmQ7XG5cbiAgICAgICAgICAgIGlmIChkb0NhY2hlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZG9jUm93Q2FjaGUucHVzaChyb3cpO1xuICAgICAgICAgICAgICAgIHRoaXMuJHNjcmVlblJvd0NhY2hlLnB1c2goc2NyZWVuUm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgdGV4dCBsaW5lIHRoYXQgaXMgZGlzcGxheWVkIGluIGRvY1JvdyBvbiB0aGUgc2NyZWVuLlxuICAgICAgICB2YXIgdGV4dExpbmUgPSBcIlwiO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmluYWwgcm93IHdlIHdhbnQgdG8gcmVhY2ggaXMgaW5zaWRlIG9mIGEgZm9sZC5cbiAgICAgICAgaWYgKGZvbGRMaW5lICYmIHJvdyA+PSBmb2xkU3RhcnQpIHtcbiAgICAgICAgICAgIHRleHRMaW5lID0gdGhpcy5nZXRGb2xkRGlzcGxheUxpbmUoZm9sZExpbmUsIGRvY1JvdywgZG9jQ29sdW1uKTtcbiAgICAgICAgICAgIGZvbGRTdGFydFJvdyA9IGZvbGRMaW5lLnN0YXJ0LnJvdztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRleHRMaW5lID0gdGhpcy5nZXRMaW5lKGRvY1Jvdykuc3Vic3RyaW5nKDAsIGRvY0NvbHVtbik7XG4gICAgICAgICAgICBmb2xkU3RhcnRSb3cgPSBkb2NSb3c7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdyYXBJbmRlbnQgPSAwO1xuICAgICAgICAvLyBDbGFtcCB0ZXh0TGluZSBpZiBpbiB3cmFwTW9kZS5cbiAgICAgICAgaWYgKHRoaXMuJHVzZVdyYXBNb2RlKSB7XG4gICAgICAgICAgICB2YXIgd3JhcFJvdyA9IHRoaXMuJHdyYXBEYXRhW2ZvbGRTdGFydFJvd107XG4gICAgICAgICAgICBpZiAod3JhcFJvdykge1xuICAgICAgICAgICAgICAgIHZhciBzY3JlZW5Sb3dPZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlICh0ZXh0TGluZS5sZW5ndGggPj0gd3JhcFJvd1tzY3JlZW5Sb3dPZmZzZXRdKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcmVlblJvdyArKztcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuUm93T2Zmc2V0Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRleHRMaW5lID0gdGV4dExpbmUuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICB3cmFwUm93W3NjcmVlblJvd09mZnNldCAtIDFdIHx8IDAsIHRleHRMaW5lLmxlbmd0aFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgd3JhcEluZGVudCA9IHNjcmVlblJvd09mZnNldCA+IDAgPyB3cmFwUm93LmluZGVudCA6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5saW5lV2lkZ2V0cyAmJiB0aGlzLmxpbmVXaWRnZXRzW3Jvd10gJiYgdGhpcy5saW5lV2lkZ2V0c1tyb3ddLnJvd3NBYm92ZSlcbiAgICAgICAgICAgIHNjcmVlblJvdyArPSB0aGlzLmxpbmVXaWRnZXRzW3Jvd10ucm93c0Fib3ZlO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByb3c6IHNjcmVlblJvdyxcbiAgICAgICAgICAgIGNvbHVtbjogd3JhcEluZGVudCArIHRoaXMuJGdldFN0cmluZ1NjcmVlbldpZHRoKHRleHRMaW5lKVswXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQgcm93IGFuZCBjb2x1bW4sIHJldHVybnMgdGhlIHNjcmVlbiBjb2x1bW4uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8UG9pbnR9IHJvd1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbZG9jQ29sdW1uXVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGRvY3VtZW50VG9TY3JlZW5Db2x1bW4ocm93LCBkb2NDb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uKHJvdywgZG9jQ29sdW1uKS5jb2x1bW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9yIHRoZSBnaXZlbiBkb2N1bWVudCByb3cgYW5kIGNvbHVtbiwgcmV0dXJucyB0aGUgc2NyZWVuIHJvdy5cbiAgICAgKiBAcGFyYW0ge051bWJlcnxQb2ludH0gZG9jUm93XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtkb2NDb2x1bW5dXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKiovXG4gICAgZG9jdW1lbnRUb1NjcmVlblJvdyhkb2NSb3csIGRvY0NvbHVtbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24oZG9jUm93LCBkb2NDb2x1bW4pLnJvdztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIHNjcmVlbi5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRTY3JlZW5MZW5ndGgoKSB7XG4gICAgICAgIHZhciBzY3JlZW5Sb3dzID0gMDtcbiAgICAgICAgLyoqQHR5cGUge0ZvbGRMaW5lfSovXG4gICAgICAgIHZhciBmb2xkID0gbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLiR1c2VXcmFwTW9kZSkge1xuICAgICAgICAgICAgc2NyZWVuUm93cyA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZm9sZGVkIGxpbmVzIGFnYWluLlxuICAgICAgICAgICAgdmFyIGZvbGREYXRhID0gdGhpcy4kZm9sZERhdGE7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvbGREYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9sZCA9IGZvbGREYXRhW2ldO1xuICAgICAgICAgICAgICAgIHNjcmVlblJvd3MgLT0gZm9sZC5lbmQucm93IC0gZm9sZC5zdGFydC5yb3c7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgbGFzdFJvdyA9IHRoaXMuJHdyYXBEYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciByb3cgPSAwLCBpID0gMDtcbiAgICAgICAgICAgIHZhciBmb2xkID0gdGhpcy4kZm9sZERhdGFbaSsrXTtcbiAgICAgICAgICAgIHZhciBmb2xkU3RhcnQgPSBmb2xkID8gZm9sZC5zdGFydC5yb3cgOkluZmluaXR5O1xuXG4gICAgICAgICAgICB3aGlsZSAocm93IDwgbGFzdFJvdykge1xuICAgICAgICAgICAgICAgIHZhciBzcGxpdHMgPSB0aGlzLiR3cmFwRGF0YVtyb3ddO1xuICAgICAgICAgICAgICAgIHNjcmVlblJvd3MgKz0gc3BsaXRzID8gc3BsaXRzLmxlbmd0aCArIDEgOiAxO1xuICAgICAgICAgICAgICAgIHJvdyArKztcbiAgICAgICAgICAgICAgICBpZiAocm93ID4gZm9sZFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJvdyA9IGZvbGQuZW5kLnJvdysxO1xuICAgICAgICAgICAgICAgICAgICBmb2xkID0gdGhpcy4kZm9sZERhdGFbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgZm9sZFN0YXJ0ID0gZm9sZCA/Zm9sZC5zdGFydC5yb3cgOkluZmluaXR5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRvZG9cbiAgICAgICAgaWYgKHRoaXMubGluZVdpZGdldHMpXG4gICAgICAgICAgICBzY3JlZW5Sb3dzICs9IHRoaXMuJGdldFdpZGdldFNjcmVlbkxlbmd0aCgpO1xuXG4gICAgICAgIHJldHVybiBzY3JlZW5Sb3dzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Rm9udE1ldHJpY3N9IGZtXG4gICAgICovXG4gICAgJHNldEZvbnRNZXRyaWNzKGZtKSB7XG4gICAgICAgIGlmICghdGhpcy4kZW5hYmxlVmFyQ2hhcikgcmV0dXJuO1xuICAgICAgICB0aGlzLiRnZXRTdHJpbmdTY3JlZW5XaWR0aCA9IGZ1bmN0aW9uKHN0ciwgbWF4U2NyZWVuQ29sdW1uLCBzY3JlZW5Db2x1bW4pIHtcbiAgICAgICAgICAgIGlmIChtYXhTY3JlZW5Db2x1bW4gPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIFswLCAwXTtcbiAgICAgICAgICAgIGlmICghbWF4U2NyZWVuQ29sdW1uKVxuICAgICAgICAgICAgICAgIG1heFNjcmVlbkNvbHVtbiA9IEluZmluaXR5O1xuICAgICAgICAgICAgc2NyZWVuQ29sdW1uID0gc2NyZWVuQ29sdW1uIHx8IDA7XG5cbiAgICAgICAgICAgIHZhciBjLCBjb2x1bW47XG4gICAgICAgICAgICBmb3IgKGNvbHVtbiA9IDA7IGNvbHVtbiA8IHN0ci5sZW5ndGg7IGNvbHVtbisrKSB7XG4gICAgICAgICAgICAgICAgYyA9IHN0ci5jaGFyQXQoY29sdW1uKTtcbiAgICAgICAgICAgICAgICAvLyB0YWJcbiAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCJcXHRcIikge1xuICAgICAgICAgICAgICAgICAgICBzY3JlZW5Db2x1bW4gKz0gdGhpcy5nZXRTY3JlZW5UYWJTaXplKHNjcmVlbkNvbHVtbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuQ29sdW1uICs9IGZtLmdldENoYXJhY3RlcldpZHRoKGMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2NyZWVuQ29sdW1uID4gbWF4U2NyZWVuQ29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFtzY3JlZW5Db2x1bW4sIGNvbHVtbl07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGxhc3QgY2hhcmFjdGVyIHByZWNlZGluZyB0aGUgY3Vyc29yIGluIHRoZSBlZGl0b3JcbiAgICAgKi9cbiAgICBnZXRQcmVjZWRpbmdDaGFyYWN0ZXIoKSB7XG4gICAgICAgIHZhciBwb3MgPSB0aGlzLnNlbGVjdGlvbi5nZXRDdXJzb3IoKTtcblxuICAgICAgICBpZiAocG9zLmNvbHVtbiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHBvcy5yb3cgPT09IDAgPyBcIlwiIDogdGhpcy5kb2MuZ2V0TmV3TGluZUNoYXJhY3RlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRMaW5lID0gdGhpcy5nZXRMaW5lKHBvcy5yb3cpO1xuICAgICAgICByZXR1cm4gY3VycmVudExpbmVbcG9zLmNvbHVtbiAtIDFdO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICghdGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYmdUb2tlbml6ZXIuc2V0RG9jdW1lbnQobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmJnVG9rZW5pemVyLmNsZWFudXAoKTtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZE9wZXJhdGlvbigpO1xuICAgICAgICB0aGlzLiRzdG9wV29ya2VyKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICAgIGlmICh0aGlzLmRvYykge1xuICAgICAgICAgICAgdGhpcy5kb2Mub2ZmKFwiY2hhbmdlXCIsIHRoaXMuJG9uQ2hhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLm9mZihcImNoYW5nZUN1cnNvclwiLCB0aGlzLiRvblNlbGVjdGlvbkNoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5vZmYoXCJjaGFuZ2VTZWxlY3Rpb25cIiwgdGhpcy4kb25TZWxlY3Rpb25DaGFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLmRldGFjaCgpO1xuICAgIH1cbn1cblxuRWRpdFNlc3Npb24uJHVpZCA9IDA7XG5FZGl0U2Vzc2lvbi5wcm90b3R5cGUuJG1vZGVzID0gY29uZmlnLiRtb2Rlcztcbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCBbW0RvY3VtZW50IGBEb2N1bWVudGBdXSBhcyBhIHN0cmluZy5cbiAqIEBtZXRob2QgZ2V0VmFsdWVcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKiBAYWxpYXMgRWRpdFNlc3Npb24udG9TdHJpbmdcbiAqKi9cbkVkaXRTZXNzaW9uLnByb3RvdHlwZS5nZXRWYWx1ZSA9IEVkaXRTZXNzaW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuRWRpdFNlc3Npb24ucHJvdG90eXBlLiRkZWZhdWx0VW5kb01hbmFnZXIgPSB7XG4gICAgdW5kbzogZnVuY3Rpb24oKSB7fSxcbiAgICByZWRvOiBmdW5jdGlvbigpIHt9LFxuICAgIGhhc1VuZG86IGZ1bmN0aW9uKCkge30sXG4gICAgaGFzUmVkbzogZnVuY3Rpb24oKSB7fSxcbiAgICByZXNldDogZnVuY3Rpb24oKSB7fSxcbiAgICBhZGQ6IGZ1bmN0aW9uKCkge30sXG4gICAgYWRkU2VsZWN0aW9uOiBmdW5jdGlvbigpIHt9LFxuICAgIHN0YXJ0TmV3R3JvdXA6IGZ1bmN0aW9uKCkge30sXG4gICAgYWRkU2Vzc2lvbjogZnVuY3Rpb24oKSB7fVxufTtcbkVkaXRTZXNzaW9uLnByb3RvdHlwZS4kb3ZlcndyaXRlID0gZmFsc2U7XG5cbkVkaXRTZXNzaW9uLnByb3RvdHlwZS4kbW9kZSA9IG51bGw7XG5FZGl0U2Vzc2lvbi5wcm90b3R5cGUuJG1vZGVJZCA9IG51bGw7XG5FZGl0U2Vzc2lvbi5wcm90b3R5cGUuJHNjcm9sbFRvcCA9IDA7XG5FZGl0U2Vzc2lvbi5wcm90b3R5cGUuJHNjcm9sbExlZnQgPSAwO1xuLy8gV1JBUE1PREVcbkVkaXRTZXNzaW9uLnByb3RvdHlwZS4kd3JhcExpbWl0ID0gODA7XG5FZGl0U2Vzc2lvbi5wcm90b3R5cGUuJHVzZVdyYXBNb2RlID0gZmFsc2U7XG5FZGl0U2Vzc2lvbi5wcm90b3R5cGUuJHdyYXBMaW1pdFJhbmdlID0ge1xuICAgIG1pbiA6IG51bGwsXG4gICAgbWF4IDogbnVsbFxufTtcbi8qKlxuICpcbiAqIEB0eXBlIHtudWxsIHwgaW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5MaW5lV2lkZ2V0W119XG4gKi9cbkVkaXRTZXNzaW9uLnByb3RvdHlwZS5saW5lV2lkZ2V0cyA9IG51bGw7XG5FZGl0U2Vzc2lvbi5wcm90b3R5cGUuaXNGdWxsV2lkdGggPSBpc0Z1bGxXaWR0aDtcblxub29wLmltcGxlbWVudChFZGl0U2Vzc2lvbi5wcm90b3R5cGUsIEV2ZW50RW1pdHRlcik7XG5cbi8vIFwiVG9rZW5zXCJcbnZhciBDSEFSID0gMSxcbiAgICBDSEFSX0VYVCA9IDIsXG4gICAgUExBQ0VIT0xERVJfU1RBUlQgPSAzLFxuICAgIFBMQUNFSE9MREVSX0JPRFkgPSAgNCxcbiAgICBQVU5DVFVBVElPTiA9IDksXG4gICAgU1BBQ0UgPSAxMCxcbiAgICBUQUIgPSAxMSxcbiAgICBUQUJfU1BBQ0UgPSAxMjtcbi8vIEZvciBldmVyeSBrZXlzdHJva2UgdGhpcyBnZXRzIGNhbGxlZCBvbmNlIHBlciBjaGFyIGluIHRoZSB3aG9sZSBkb2MhIVxuLy8gV291bGRuJ3QgaHVydCB0byBtYWtlIGl0IGEgYml0IGZhc3RlciBmb3IgYyA+PSAweDExMDBcbmZ1bmN0aW9uIGlzRnVsbFdpZHRoKGMpIHtcbiAgICBpZiAoYyA8IDB4MTEwMClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBjID49IDB4MTEwMCAmJiBjIDw9IDB4MTE1RiB8fFxuICAgICAgICBjID49IDB4MTFBMyAmJiBjIDw9IDB4MTFBNyB8fFxuICAgICAgICBjID49IDB4MTFGQSAmJiBjIDw9IDB4MTFGRiB8fFxuICAgICAgICBjID49IDB4MjMyOSAmJiBjIDw9IDB4MjMyQSB8fFxuICAgICAgICBjID49IDB4MkU4MCAmJiBjIDw9IDB4MkU5OSB8fFxuICAgICAgICBjID49IDB4MkU5QiAmJiBjIDw9IDB4MkVGMyB8fFxuICAgICAgICBjID49IDB4MkYwMCAmJiBjIDw9IDB4MkZENSB8fFxuICAgICAgICBjID49IDB4MkZGMCAmJiBjIDw9IDB4MkZGQiB8fFxuICAgICAgICBjID49IDB4MzAwMCAmJiBjIDw9IDB4MzAzRSB8fFxuICAgICAgICBjID49IDB4MzA0MSAmJiBjIDw9IDB4MzA5NiB8fFxuICAgICAgICBjID49IDB4MzA5OSAmJiBjIDw9IDB4MzBGRiB8fFxuICAgICAgICBjID49IDB4MzEwNSAmJiBjIDw9IDB4MzEyRCB8fFxuICAgICAgICBjID49IDB4MzEzMSAmJiBjIDw9IDB4MzE4RSB8fFxuICAgICAgICBjID49IDB4MzE5MCAmJiBjIDw9IDB4MzFCQSB8fFxuICAgICAgICBjID49IDB4MzFDMCAmJiBjIDw9IDB4MzFFMyB8fFxuICAgICAgICBjID49IDB4MzFGMCAmJiBjIDw9IDB4MzIxRSB8fFxuICAgICAgICBjID49IDB4MzIyMCAmJiBjIDw9IDB4MzI0NyB8fFxuICAgICAgICBjID49IDB4MzI1MCAmJiBjIDw9IDB4MzJGRSB8fFxuICAgICAgICBjID49IDB4MzMwMCAmJiBjIDw9IDB4NERCRiB8fFxuICAgICAgICBjID49IDB4NEUwMCAmJiBjIDw9IDB4QTQ4QyB8fFxuICAgICAgICBjID49IDB4QTQ5MCAmJiBjIDw9IDB4QTRDNiB8fFxuICAgICAgICBjID49IDB4QTk2MCAmJiBjIDw9IDB4QTk3QyB8fFxuICAgICAgICBjID49IDB4QUMwMCAmJiBjIDw9IDB4RDdBMyB8fFxuICAgICAgICBjID49IDB4RDdCMCAmJiBjIDw9IDB4RDdDNiB8fFxuICAgICAgICBjID49IDB4RDdDQiAmJiBjIDw9IDB4RDdGQiB8fFxuICAgICAgICBjID49IDB4RjkwMCAmJiBjIDw9IDB4RkFGRiB8fFxuICAgICAgICBjID49IDB4RkUxMCAmJiBjIDw9IDB4RkUxOSB8fFxuICAgICAgICBjID49IDB4RkUzMCAmJiBjIDw9IDB4RkU1MiB8fFxuICAgICAgICBjID49IDB4RkU1NCAmJiBjIDw9IDB4RkU2NiB8fFxuICAgICAgICBjID49IDB4RkU2OCAmJiBjIDw9IDB4RkU2QiB8fFxuICAgICAgICBjID49IDB4RkYwMSAmJiBjIDw9IDB4RkY2MCB8fFxuICAgICAgICBjID49IDB4RkZFMCAmJiBjIDw9IDB4RkZFNjtcbn1cbnJlcXVpcmUoXCIuL2VkaXRfc2Vzc2lvbi9mb2xkaW5nXCIpLkZvbGRpbmcuY2FsbChFZGl0U2Vzc2lvbi5wcm90b3R5cGUpO1xucmVxdWlyZShcIi4vZWRpdF9zZXNzaW9uL2JyYWNrZXRfbWF0Y2hcIikuQnJhY2tldE1hdGNoLmNhbGwoRWRpdFNlc3Npb24ucHJvdG90eXBlKTtcblxuXG5jb25maWcuZGVmaW5lT3B0aW9ucyhFZGl0U2Vzc2lvbi5wcm90b3R5cGUsIFwic2Vzc2lvblwiLCB7XG4gICAgd3JhcDoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyfSB2YWx1ZVxuICAgICAgICAgKiBAdGhpcyB7RWRpdFNlc3Npb259XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09IFwib2ZmXCIpXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09IFwiZnJlZVwiKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09IFwicHJpbnRNYXJnaW5cIilcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IC0xO1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApIHx8IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy4kd3JhcCA9PSB2YWx1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLiR3cmFwID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRVc2VXcmFwTW9kZShmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgPSB0eXBlb2YgdmFsdWUgPT0gXCJudW1iZXJcIiA/IHZhbHVlIDogbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFdyYXBMaW1pdFJhbmdlKGNvbCwgY29sKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVzZVdyYXBNb2RlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VXNlV3JhcE1vZGUoKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiR3cmFwID09IC0xKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwcmludE1hcmdpblwiO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5nZXRXcmFwTGltaXRSYW5nZSgpLm1pbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiZnJlZVwiO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiR3cmFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwib2ZmXCI7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZXNTZXQ6IHRydWVcbiAgICB9LFxuICAgIHdyYXBNZXRob2Q6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7XCJjb2RlXCJ8XCJ0ZXh0XCJ8XCJhdXRvXCJ8Ym9vbGVhbn0gdmFsXG4gICAgICAgICAqIEB0aGlze0VkaXRTZXNzaW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgIHZhbCA9IHZhbCA9PSBcImF1dG9cIlxuICAgICAgICAgICAgICAgID8gdGhpcy4kbW9kZS50eXBlICE9IFwidGV4dFwiXG4gICAgICAgICAgICAgICAgOiB2YWwgIT0gXCJ0ZXh0XCI7XG4gICAgICAgICAgICBpZiAodmFsICE9IHRoaXMuJHdyYXBBc0NvZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiR3cmFwQXNDb2RlID0gdmFsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLiR1c2VXcmFwTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR1c2VXcmFwTW9kZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFVzZVdyYXBNb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiBcImF1dG9cIlxuICAgIH0sXG4gICAgaW5kZW50ZWRTb2Z0V3JhcDoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHRoaXN7RWRpdFNlc3Npb259XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHVzZVdyYXBNb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdXNlV3JhcE1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVzZVdyYXBNb2RlKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IHRydWVcbiAgICB9LFxuICAgIGZpcnN0TGluZU51bWJlcjoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKCkge3RoaXMuX3NpZ25hbChcImNoYW5nZUJyZWFrcG9pbnRcIik7fSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiAxXG4gICAgfSxcbiAgICB1c2VXb3JrZXI6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlV29ya2VyXG4gICAgICAgICAqIEB0aGlze0VkaXRTZXNzaW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbih1c2VXb3JrZXIpIHtcbiAgICAgICAgICAgIHRoaXMuJHVzZVdvcmtlciA9IHVzZVdvcmtlcjtcblxuICAgICAgICAgICAgdGhpcy4kc3RvcFdvcmtlcigpO1xuICAgICAgICAgICAgaWYgKHVzZVdvcmtlcilcbiAgICAgICAgICAgICAgICB0aGlzLiRzdGFydFdvcmtlcigpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IHRydWVcbiAgICB9LFxuICAgIHVzZVNvZnRUYWJzOiB7aW5pdGlhbFZhbHVlOiB0cnVlfSxcbiAgICB0YWJTaXplOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gdGFiU2l6ZVxuICAgICAgICAgKiBAdGhpc3tFZGl0U2Vzc2lvbn1cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24odGFiU2l6ZSkge1xuICAgICAgICAgICAgdGFiU2l6ZSA9IHBhcnNlSW50KHRhYlNpemUpO1xuICAgICAgICAgICAgaWYgKHRhYlNpemUgPiAwICYmIHRoaXMuJHRhYlNpemUgIT09IHRhYlNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRtb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy4kcm93TGVuZ3RoQ2FjaGUgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLiR0YWJTaXplID0gdGFiU2l6ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VUYWJTaXplXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IDQsXG4gICAgICAgIGhhbmRsZXNTZXQ6IHRydWVcbiAgICB9LFxuICAgIG5hdmlnYXRlV2l0aGluU29mdFRhYnM6IHtpbml0aWFsVmFsdWU6IGZhbHNlfSxcbiAgICBmb2xkU3R5bGU6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHt0aGlzLnNldEZvbGRTdHlsZSh2YWwpO30sXG4gICAgICAgIGhhbmRsZXNTZXQ6IHRydWVcbiAgICB9LFxuICAgIG92ZXJ3cml0ZToge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge3RoaXMuX3NpZ25hbChcImNoYW5nZU92ZXJ3cml0ZVwiKTt9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IGZhbHNlXG4gICAgfSxcbiAgICBuZXdMaW5lTW9kZToge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge3RoaXMuZG9jLnNldE5ld0xpbmVNb2RlKHZhbCk7fSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5kb2MuZ2V0TmV3TGluZU1vZGUoKTt9LFxuICAgICAgICBoYW5kbGVzU2V0OiB0cnVlXG4gICAgfSxcbiAgICBtb2RlOiB7XG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7IHRoaXMuc2V0TW9kZSh2YWwpOyB9LFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy4kbW9kZUlkOyB9LFxuICAgICAgICBoYW5kbGVzU2V0OiB0cnVlXG4gICAgfVxufSk7XG5cbmV4cG9ydHMuRWRpdFNlc3Npb24gPSBFZGl0U2Vzc2lvbjtcblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/edit_session.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/edit_session/bracket_match.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ace-code/src/edit_session/bracket_match.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../edit_session\").EditSession} EditSession\n * @typedef {import(\"../edit_session\").Point} Point\n */\nvar TokenIterator = (__webpack_require__(/*! ../token_iterator */ \"./node_modules/ace-code/src/token_iterator.js\").TokenIterator);\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\n\nfunction BracketMatch() {\n\n    /**\n     * \n     * @param {Point} position\n     * @param {string} [chr]\n     * @this {EditSession}\n     */\n    this.findMatchingBracket = function(position, chr) {\n        if (position.column == 0) return null;\n\n        var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column-1);\n        if (charBeforeCursor == \"\") return null;\n\n        var match = charBeforeCursor.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match)\n            return null;\n\n        if (match[1])\n            return this.$findClosingBracket(match[1], position);\n        else\n            return this.$findOpeningBracket(match[2], position);\n    };\n\n    /**\n     * @param {Point} pos\n     * @return {null|Range}\n     * @this {EditSession}\n     */\n    this.getBracketRange = function(pos) {\n        var line = this.getLine(pos.row);\n        var before = true, range;\n\n        var chr = line.charAt(pos.column - 1);\n        var match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match) {\n            chr = line.charAt(pos.column);\n            pos = {row: pos.row, column: pos.column + 1};\n            match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n            before = false;\n        }\n        if (!match)\n            return null;\n\n        if (match[1]) {\n            var bracketPos = this.$findClosingBracket(match[1], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(pos, bracketPos);\n            if (!before) {\n                range.end.column++;\n                range.start.column--;\n            }\n            range.cursor = range.end;\n        } else {\n            var bracketPos = this.$findOpeningBracket(match[2], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(bracketPos, pos);\n            if (!before) {\n                range.start.column++;\n                range.end.column--;\n            }\n            range.cursor = range.start;\n        }\n        \n        return range;\n    };\n\n    /**\n     * Returns:\n     * * null if there is no any bracket at `pos`;\n     * * two Ranges if there is opening and closing brackets;\n     * * one Range if there is only one bracket\n     *\n     * @param {Point} pos\n     * @param {boolean} [isBackwards]\n     * @returns {null|Range[]}\n     * @this {EditSession}\n     */\n    this.getMatchingBracketRanges = function(pos, isBackwards) {\n        var line = this.getLine(pos.row);\n        var bracketsRegExp = /([\\(\\[\\{])|([\\)\\]\\}])/;\n        var chr = !isBackwards && line.charAt(pos.column - 1);\n        var match = chr && chr.match(bracketsRegExp);\n        if (!match) {\n            chr = (isBackwards === undefined || isBackwards) && line.charAt(pos.column);\n            pos = {\n                row: pos.row,\n                column: pos.column + 1\n            };\n            match = chr && chr.match(bracketsRegExp);\n        }\n\n        if (!match)\n            return null;\n\n        var startRange = new Range(pos.row, pos.column - 1, pos.row, pos.column);\n        var bracketPos = match[1] ? this.$findClosingBracket(match[1], pos)\n            : this.$findOpeningBracket(match[2], pos);\n        if (!bracketPos)\n            return [startRange];\n        var endRange = new Range(bracketPos.row, bracketPos.column, bracketPos.row, bracketPos.column + 1);\n\n        return [startRange, endRange];\n    };\n\n    this.$brackets = {\n        \")\": \"(\",\n        \"(\": \")\",\n        \"]\": \"[\",\n        \"[\": \"]\",\n        \"{\": \"}\",\n        \"}\": \"{\",\n        \"<\": \">\",\n        \">\": \"<\"\n    };\n\n    /**\n     * \n     * @param {string} bracket\n     * @param {Point} position\n     * @param {RegExp} [typeRe]\n     * @return {Point|null}\n     * @this {EditSession}\n     */\n    this.$findOpeningBracket = function(bracket, position, typeRe) {\n        var openBracket = this.$brackets[bracket];\n        var depth = 1;\n\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n        \n         if (!typeRe){\n            typeRe = new RegExp(\n                \"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"rparen\", \".paren\")\n                    .replace(/\\b(?:end)\\b/, \"(?:start|begin|end)\")\n                    .replace(/-close\\b/, \"-(close|open)\")\n                + \")+\"\n            );\n        }\n        \n        // Start searching in token, just before the character at position.column\n        var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;\n        var value = token.value;\n        \n        while (true) {\n        \n            while (valueIndex >= 0) {\n                var chr = value.charAt(valueIndex);\n                if (chr == openBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return {row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn()};\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex -= 1;\n            }\n\n            // Scan backward through the document, looking for the next token\n            // whose type matches typeRe\n            do {\n                token = iterator.stepBackward();\n            } while (token && !typeRe.test(token.type));\n\n            if (token == null)\n                break;\n                \n            value = token.value;\n            valueIndex = value.length - 1;\n        }\n        \n        return null;\n    };\n\n    /**\n     *\n     * @param {string} bracket\n     * @param {Point} position\n     * @param {RegExp} [typeRe]\n     * @return {Point|null}\n     * @this {EditSession}\n     */\n    this.$findClosingBracket = function(bracket, position, typeRe) {\n        var closingBracket = this.$brackets[bracket];\n        var depth = 1;\n\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n\n        if (!typeRe){\n            typeRe = new RegExp(\n                \"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"lparen\", \".paren\")\n                    .replace(/\\b(?:start|begin)\\b/, \"(?:start|begin|end)\")\n                    .replace(/-open\\b/, \"-(close|open)\")\n                + \")+\"\n            );\n        }\n\n        // Start searching in token, after the character at position.column\n        var valueIndex = position.column - iterator.getCurrentTokenColumn();\n\n        while (true) {\n\n            var value = token.value;\n            var valueLength = value.length;\n            while (valueIndex < valueLength) {\n                var chr = value.charAt(valueIndex);\n                if (chr == closingBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return {row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn()};\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex += 1;\n            }\n\n            // Scan forward through the document, looking for the next token\n            // whose type matches typeRe\n            do {\n                token = iterator.stepForward();\n            } while (token && !typeRe.test(token.type));\n\n            if (token == null)\n                break;\n\n            valueIndex = 0;\n        }\n        \n        return null;\n    };\n\n    /**\n     * Returns [[Range]]'s for matching tags and tag names, if there are any\n     * @param {Point} pos\n     * @returns {{closeTag: Range, closeTagName: Range, openTag: Range, openTagName: Range} | undefined}\n     * @this {EditSession}\n     */\n    this.getMatchingTags = function (pos) {\n        var iterator = new TokenIterator(this, pos.row, pos.column);\n        var token = this.$findTagName(iterator);\n        if (!token) return;\n\n        var prevToken = iterator.stepBackward();\n\n        if (prevToken.value === '<') {\n            return this.$findClosingTag(iterator, token);\n        }\n        else {\n            return this.$findOpeningTag(iterator, token);\n        }\n    };\n\n    this.$findTagName = function (iterator) {\n        var token = iterator.getCurrentToken();\n        var found = false;\n        var backward = false;\n        if (token && token.type.indexOf('tag-name') === -1) {\n            do {\n                if (backward) token = iterator.stepBackward(); else token = iterator.stepForward();\n                if (token) {\n                    if (token.value === \"/>\") {\n                        //changing iterator direction for self-closing tags, when cursor is in between tag\n                        //name and tag closing\n                        backward = true;\n                    }\n                    else if (token.type.indexOf('tag-name') !== -1) {\n                        found = true;\n                    }\n                }\n            } while (token && !found);\n        }\n        return token;\n    };\n\n    this.$findClosingTag = function (iterator, token) {\n        var prevToken;\n        var currentTag = token.value;\n        var tag = token.value;\n        var depth = 0;\n\n        var openTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1\n        );\n        token = iterator.stepForward();\n        var openTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length\n        );\n        var foundOpenTagEnd = false;\n        do {\n            prevToken = token;\n            if (prevToken.type.indexOf('tag-close') !== -1 && !foundOpenTagEnd) {\n                var openTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n                    iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1\n                ); //Range for `>`\n                foundOpenTagEnd = true;\n            }\n            token = iterator.stepForward();\n            if (token) {\n                if (token.value === '>' && !foundOpenTagEnd) {\n                    var openTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n                        iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1\n                    ); //Range for `>`\n                    foundOpenTagEnd = true;\n                }\n                if (token.type.indexOf('tag-name') !== -1) {\n                    currentTag = token.value;\n                    if (tag === currentTag) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                        }\n                        else if (prevToken.value === '</') {\n                            depth--;\n                            if (depth < 0) {//found closing tag\n                                iterator.stepBackward();\n                                var closeTagStart = new Range(iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn() + 2\n                                ); //Range for </\n                                token = iterator.stepForward();\n                                var closeTagName = new Range(iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn() + token.value.length\n                                );\n                                if (token.type.indexOf('tag-close') === -1) {\n                                    token = iterator.stepForward();\n                                }\n                                if (token && token.value === '>') {\n                                    var closeTagEnd = new Range(iterator.getCurrentTokenRow(),\n                                        iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                        iterator.getCurrentTokenColumn() + 1\n                                    ); //Range for >\n                                }\n                                else {\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }\n                else if (tag === currentTag && token.value === '/>') { // self-closing tag\n                    depth--;\n                    if (depth < 0) {//found self-closing tag end\n                        //Example: <tagName attr/>\n                        //`<tagName ` - opening part of tag consist of `openTagStart`, `openTagName` and `openTagEnd`\n                        //`/>` - closing part of tag consist of `closeTagStart`, `closeTagName` and `closeTagEnd`\n                        var closeTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n                            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 2\n                        );\n                        var closeTagName = closeTagStart;\n                        var closeTagEnd = closeTagName;\n\n                        var openTagEnd = new Range(openTagName.end.row, openTagName.end.column, openTagName.end.row,\n                            openTagName.end.column + 1\n                        );\n\n                    }\n                }\n            }\n        } while (token && depth >= 0);\n\n        if (openTagStart && openTagEnd && closeTagStart && closeTagEnd && openTagName && closeTagName) {\n            return {\n                openTag: new Range(openTagStart.start.row, openTagStart.start.column, openTagEnd.end.row,\n                    openTagEnd.end.column\n                ),\n                closeTag: new Range(closeTagStart.start.row, closeTagStart.start.column, closeTagEnd.end.row,\n                    closeTagEnd.end.column\n                ),\n                openTagName: openTagName,\n                closeTagName: closeTagName\n            };\n        }\n    };\n\n    this.$findOpeningTag = function (iterator, token) {\n        var prevToken = iterator.getCurrentToken();\n        var tag = token.value;\n        var depth = 0;\n\n        var startRow = iterator.getCurrentTokenRow();\n        var startColumn = iterator.getCurrentTokenColumn();\n        var endColumn = startColumn + 2;\n\n        //closing tag\n        var closeTagStart = new Range(startRow, startColumn, startRow, endColumn); //Range for </\n        iterator.stepForward();\n        var closeTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length\n        );\n\n        if (token.type.indexOf('tag-close') === -1) {\n            token = iterator.stepForward();\n        }\n        if (!token || token.value !== \">\") return;\n        var closeTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1\n        ); //Range for >\n\n        iterator.stepBackward();\n        iterator.stepBackward();\n        do {\n            token = prevToken;\n            startRow = iterator.getCurrentTokenRow();\n            startColumn = iterator.getCurrentTokenColumn();\n            endColumn = startColumn + token.value.length;\n\n            prevToken = iterator.stepBackward();\n\n            if (token) {\n                if (token.type.indexOf('tag-name') !== -1) {\n                    if (tag === token.value) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                            if (depth > 0) {//found opening tag\n                                var openTagName = new Range(startRow, startColumn, startRow, endColumn);\n                                var openTagStart = new Range(iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn() + 1\n                                ); //Range for <\n                                do {\n                                    token = iterator.stepForward();\n                                } while (token && token.value !== '>');\n                                var openTagEnd = new Range(iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn() + 1\n                                ); //Range for >\n                            }\n                        }\n                        else if (prevToken.value === '</') {\n                            depth--;\n                        }\n                    }\n                }\n                else if (token.value === '/>') { // self-closing tag\n                    var stepCount = 0;\n                    var tmpToken = prevToken;\n                    while (tmpToken) {\n                        if (tmpToken.type.indexOf('tag-name') !== -1 && tmpToken.value === tag) {\n                            depth--;\n                            break;\n                        }\n                        else if (tmpToken.value === '<') {\n                            break;\n                        }\n                        tmpToken = iterator.stepBackward();\n                        stepCount++;\n                    }\n                    for (var i = 0; i < stepCount; i++) {\n                        iterator.stepForward();\n                    }\n                }\n            }\n        } while (prevToken && depth <= 0);\n\n        if (openTagStart && openTagEnd && closeTagStart && closeTagEnd && openTagName && closeTagName) {\n            return {\n                openTag: new Range(openTagStart.start.row, openTagStart.start.column, openTagEnd.end.row,\n                    openTagEnd.end.column\n                ),\n                closeTag: new Range(closeTagStart.start.row, closeTagStart.start.column, closeTagEnd.end.row,\n                    closeTagEnd.end.column\n                ),\n                openTagName: openTagName,\n                closeTagName: closeTagName\n            };\n        }\n    };\n}\nexports.BracketMatch = BracketMatch;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2VkaXRfc2Vzc2lvbi9icmFja2V0X21hdGNoLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxhQUFhLHVDQUF1QztBQUNwRCxhQUFhLGlDQUFpQztBQUM5QztBQUNBLG9CQUFvQiw2R0FBMEM7QUFDOUQsWUFBWSxtRkFBeUI7O0FBRXJDOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxRQUFRO0FBQ3ZCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxvREFBb0QsV0FBVztBQUMvRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLE9BQU87QUFDdEIsZ0JBQWdCO0FBQ2hCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QyxXQUFXO0FBQ3pEO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsOENBQThDLFdBQVc7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsU0FBUztBQUN4QixpQkFBaUI7QUFDakIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxXQUFXO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsS0FBSztBQUNmLFVBQVUsS0FBSztBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCO0FBQ2hCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYzs7QUFFZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLE9BQU87QUFDdEIsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjOztBQUVkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGtCQUFrQiwwRUFBMEU7QUFDNUYsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFO0FBQ3ZFO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7O0FBRVY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxlQUFlO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTs7QUFFVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvZWRpdF9zZXNzaW9uL2JyYWNrZXRfbWF0Y2guanM/ZjYxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2VkaXRfc2Vzc2lvblwiKS5FZGl0U2Vzc2lvbn0gRWRpdFNlc3Npb25cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9lZGl0X3Nlc3Npb25cIikuUG9pbnR9IFBvaW50XG4gKi9cbnZhciBUb2tlbkl0ZXJhdG9yID0gcmVxdWlyZShcIi4uL3Rva2VuX2l0ZXJhdG9yXCIpLlRva2VuSXRlcmF0b3I7XG52YXIgUmFuZ2UgPSByZXF1aXJlKFwiLi4vcmFuZ2VcIikuUmFuZ2U7XG5cbmZ1bmN0aW9uIEJyYWNrZXRNYXRjaCgpIHtcblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc2l0aW9uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjaHJdXG4gICAgICogQHRoaXMge0VkaXRTZXNzaW9ufVxuICAgICAqL1xuICAgIHRoaXMuZmluZE1hdGNoaW5nQnJhY2tldCA9IGZ1bmN0aW9uKHBvc2l0aW9uLCBjaHIpIHtcbiAgICAgICAgaWYgKHBvc2l0aW9uLmNvbHVtbiA9PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICB2YXIgY2hhckJlZm9yZUN1cnNvciA9IGNociB8fCB0aGlzLmdldExpbmUocG9zaXRpb24ucm93KS5jaGFyQXQocG9zaXRpb24uY29sdW1uLTEpO1xuICAgICAgICBpZiAoY2hhckJlZm9yZUN1cnNvciA9PSBcIlwiKSByZXR1cm4gbnVsbDtcblxuICAgICAgICB2YXIgbWF0Y2ggPSBjaGFyQmVmb3JlQ3Vyc29yLm1hdGNoKC8oW1xcKFxcW1xce10pfChbXFwpXFxdXFx9XSkvKTtcbiAgICAgICAgaWYgKCFtYXRjaClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRmaW5kQ2xvc2luZ0JyYWNrZXQobWF0Y2hbMV0sIHBvc2l0aW9uKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGZpbmRPcGVuaW5nQnJhY2tldChtYXRjaFsyXSwgcG9zaXRpb24pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwb3NcbiAgICAgKiBAcmV0dXJuIHtudWxsfFJhbmdlfVxuICAgICAqIEB0aGlzIHtFZGl0U2Vzc2lvbn1cbiAgICAgKi9cbiAgICB0aGlzLmdldEJyYWNrZXRSYW5nZSA9IGZ1bmN0aW9uKHBvcykge1xuICAgICAgICB2YXIgbGluZSA9IHRoaXMuZ2V0TGluZShwb3Mucm93KTtcbiAgICAgICAgdmFyIGJlZm9yZSA9IHRydWUsIHJhbmdlO1xuXG4gICAgICAgIHZhciBjaHIgPSBsaW5lLmNoYXJBdChwb3MuY29sdW1uIC0gMSk7XG4gICAgICAgIHZhciBtYXRjaCA9IGNociAmJiBjaHIubWF0Y2goLyhbXFwoXFxbXFx7XSl8KFtcXClcXF1cXH1dKS8pO1xuICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICBjaHIgPSBsaW5lLmNoYXJBdChwb3MuY29sdW1uKTtcbiAgICAgICAgICAgIHBvcyA9IHtyb3c6IHBvcy5yb3csIGNvbHVtbjogcG9zLmNvbHVtbiArIDF9O1xuICAgICAgICAgICAgbWF0Y2ggPSBjaHIgJiYgY2hyLm1hdGNoKC8oW1xcKFxcW1xce10pfChbXFwpXFxdXFx9XSkvKTtcbiAgICAgICAgICAgIGJlZm9yZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWF0Y2gpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICAgIHZhciBicmFja2V0UG9zID0gdGhpcy4kZmluZENsb3NpbmdCcmFja2V0KG1hdGNoWzFdLCBwb3MpO1xuICAgICAgICAgICAgaWYgKCFicmFja2V0UG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmFuZ2UgPSBSYW5nZS5mcm9tUG9pbnRzKHBvcywgYnJhY2tldFBvcyk7XG4gICAgICAgICAgICBpZiAoIWJlZm9yZSkge1xuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4rKztcbiAgICAgICAgICAgICAgICByYW5nZS5zdGFydC5jb2x1bW4tLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJhbmdlLmN1cnNvciA9IHJhbmdlLmVuZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBicmFja2V0UG9zID0gdGhpcy4kZmluZE9wZW5pbmdCcmFja2V0KG1hdGNoWzJdLCBwb3MpO1xuICAgICAgICAgICAgaWYgKCFicmFja2V0UG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmFuZ2UgPSBSYW5nZS5mcm9tUG9pbnRzKGJyYWNrZXRQb3MsIHBvcyk7XG4gICAgICAgICAgICBpZiAoIWJlZm9yZSkge1xuICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0LmNvbHVtbisrO1xuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4tLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJhbmdlLmN1cnNvciA9IHJhbmdlLnN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnM6XG4gICAgICogKiBudWxsIGlmIHRoZXJlIGlzIG5vIGFueSBicmFja2V0IGF0IGBwb3NgO1xuICAgICAqICogdHdvIFJhbmdlcyBpZiB0aGVyZSBpcyBvcGVuaW5nIGFuZCBjbG9zaW5nIGJyYWNrZXRzO1xuICAgICAqICogb25lIFJhbmdlIGlmIHRoZXJlIGlzIG9ubHkgb25lIGJyYWNrZXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzQmFja3dhcmRzXVxuICAgICAqIEByZXR1cm5zIHtudWxsfFJhbmdlW119XG4gICAgICogQHRoaXMge0VkaXRTZXNzaW9ufVxuICAgICAqL1xuICAgIHRoaXMuZ2V0TWF0Y2hpbmdCcmFja2V0UmFuZ2VzID0gZnVuY3Rpb24ocG9zLCBpc0JhY2t3YXJkcykge1xuICAgICAgICB2YXIgbGluZSA9IHRoaXMuZ2V0TGluZShwb3Mucm93KTtcbiAgICAgICAgdmFyIGJyYWNrZXRzUmVnRXhwID0gLyhbXFwoXFxbXFx7XSl8KFtcXClcXF1cXH1dKS87XG4gICAgICAgIHZhciBjaHIgPSAhaXNCYWNrd2FyZHMgJiYgbGluZS5jaGFyQXQocG9zLmNvbHVtbiAtIDEpO1xuICAgICAgICB2YXIgbWF0Y2ggPSBjaHIgJiYgY2hyLm1hdGNoKGJyYWNrZXRzUmVnRXhwKTtcbiAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgY2hyID0gKGlzQmFja3dhcmRzID09PSB1bmRlZmluZWQgfHwgaXNCYWNrd2FyZHMpICYmIGxpbmUuY2hhckF0KHBvcy5jb2x1bW4pO1xuICAgICAgICAgICAgcG9zID0ge1xuICAgICAgICAgICAgICAgIHJvdzogcG9zLnJvdyxcbiAgICAgICAgICAgICAgICBjb2x1bW46IHBvcy5jb2x1bW4gKyAxXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWF0Y2ggPSBjaHIgJiYgY2hyLm1hdGNoKGJyYWNrZXRzUmVnRXhwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbWF0Y2gpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICB2YXIgc3RhcnRSYW5nZSA9IG5ldyBSYW5nZShwb3Mucm93LCBwb3MuY29sdW1uIC0gMSwgcG9zLnJvdywgcG9zLmNvbHVtbik7XG4gICAgICAgIHZhciBicmFja2V0UG9zID0gbWF0Y2hbMV0gPyB0aGlzLiRmaW5kQ2xvc2luZ0JyYWNrZXQobWF0Y2hbMV0sIHBvcylcbiAgICAgICAgICAgIDogdGhpcy4kZmluZE9wZW5pbmdCcmFja2V0KG1hdGNoWzJdLCBwb3MpO1xuICAgICAgICBpZiAoIWJyYWNrZXRQb3MpXG4gICAgICAgICAgICByZXR1cm4gW3N0YXJ0UmFuZ2VdO1xuICAgICAgICB2YXIgZW5kUmFuZ2UgPSBuZXcgUmFuZ2UoYnJhY2tldFBvcy5yb3csIGJyYWNrZXRQb3MuY29sdW1uLCBicmFja2V0UG9zLnJvdywgYnJhY2tldFBvcy5jb2x1bW4gKyAxKTtcblxuICAgICAgICByZXR1cm4gW3N0YXJ0UmFuZ2UsIGVuZFJhbmdlXTtcbiAgICB9O1xuXG4gICAgdGhpcy4kYnJhY2tldHMgPSB7XG4gICAgICAgIFwiKVwiOiBcIihcIixcbiAgICAgICAgXCIoXCI6IFwiKVwiLFxuICAgICAgICBcIl1cIjogXCJbXCIsXG4gICAgICAgIFwiW1wiOiBcIl1cIixcbiAgICAgICAgXCJ7XCI6IFwifVwiLFxuICAgICAgICBcIn1cIjogXCJ7XCIsXG4gICAgICAgIFwiPFwiOiBcIj5cIixcbiAgICAgICAgXCI+XCI6IFwiPFwiXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBicmFja2V0XG4gICAgICogQHBhcmFtIHtQb2ludH0gcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gW3R5cGVSZV1cbiAgICAgKiBAcmV0dXJuIHtQb2ludHxudWxsfVxuICAgICAqIEB0aGlzIHtFZGl0U2Vzc2lvbn1cbiAgICAgKi9cbiAgICB0aGlzLiRmaW5kT3BlbmluZ0JyYWNrZXQgPSBmdW5jdGlvbihicmFja2V0LCBwb3NpdGlvbiwgdHlwZVJlKSB7XG4gICAgICAgIHZhciBvcGVuQnJhY2tldCA9IHRoaXMuJGJyYWNrZXRzW2JyYWNrZXRdO1xuICAgICAgICB2YXIgZGVwdGggPSAxO1xuXG4gICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBUb2tlbkl0ZXJhdG9yKHRoaXMsIHBvc2l0aW9uLnJvdywgcG9zaXRpb24uY29sdW1uKTtcbiAgICAgICAgdmFyIHRva2VuID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuKCk7XG4gICAgICAgIGlmICghdG9rZW4pXG4gICAgICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBGb3J3YXJkKCk7XG4gICAgICAgIGlmICghdG9rZW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIFxuICAgICAgICAgaWYgKCF0eXBlUmUpe1xuICAgICAgICAgICAgdHlwZVJlID0gbmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICBcIihcXFxcLj9cIiArXG4gICAgICAgICAgICAgICAgdG9rZW4udHlwZS5yZXBsYWNlKFwiLlwiLCBcIlxcXFwuXCIpLnJlcGxhY2UoXCJycGFyZW5cIiwgXCIucGFyZW5cIilcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcYig/OmVuZClcXGIvLCBcIig/OnN0YXJ0fGJlZ2lufGVuZClcIilcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLy1jbG9zZVxcYi8sIFwiLShjbG9zZXxvcGVuKVwiKVxuICAgICAgICAgICAgICAgICsgXCIpK1wiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTdGFydCBzZWFyY2hpbmcgaW4gdG9rZW4sIGp1c3QgYmVmb3JlIHRoZSBjaGFyYWN0ZXIgYXQgcG9zaXRpb24uY29sdW1uXG4gICAgICAgIHZhciB2YWx1ZUluZGV4ID0gcG9zaXRpb24uY29sdW1uIC0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkgLSAyO1xuICAgICAgICB2YXIgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIFxuICAgICAgICAgICAgd2hpbGUgKHZhbHVlSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBjaHIgPSB2YWx1ZS5jaGFyQXQodmFsdWVJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGNociA9PSBvcGVuQnJhY2tldCkge1xuICAgICAgICAgICAgICAgICAgICBkZXB0aCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVwdGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtyb3c6IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogdmFsdWVJbmRleCArIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaHIgPT0gYnJhY2tldCkge1xuICAgICAgICAgICAgICAgICAgICBkZXB0aCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZUluZGV4IC09IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNjYW4gYmFja3dhcmQgdGhyb3VnaCB0aGUgZG9jdW1lbnQsIGxvb2tpbmcgZm9yIHRoZSBuZXh0IHRva2VuXG4gICAgICAgICAgICAvLyB3aG9zZSB0eXBlIG1hdGNoZXMgdHlwZVJlXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgdG9rZW4gPSBpdGVyYXRvci5zdGVwQmFja3dhcmQoKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKHRva2VuICYmICF0eXBlUmUudGVzdCh0b2tlbi50eXBlKSk7XG5cbiAgICAgICAgICAgIGlmICh0b2tlbiA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgICAgICAgICAgIHZhbHVlSW5kZXggPSB2YWx1ZS5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYnJhY2tldFxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc2l0aW9uXG4gICAgICogQHBhcmFtIHtSZWdFeHB9IFt0eXBlUmVdXG4gICAgICogQHJldHVybiB7UG9pbnR8bnVsbH1cbiAgICAgKiBAdGhpcyB7RWRpdFNlc3Npb259XG4gICAgICovXG4gICAgdGhpcy4kZmluZENsb3NpbmdCcmFja2V0ID0gZnVuY3Rpb24oYnJhY2tldCwgcG9zaXRpb24sIHR5cGVSZSkge1xuICAgICAgICB2YXIgY2xvc2luZ0JyYWNrZXQgPSB0aGlzLiRicmFja2V0c1ticmFja2V0XTtcbiAgICAgICAgdmFyIGRlcHRoID0gMTtcblxuICAgICAgICB2YXIgaXRlcmF0b3IgPSBuZXcgVG9rZW5JdGVyYXRvcih0aGlzLCBwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbik7XG4gICAgICAgIHZhciB0b2tlbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbigpO1xuICAgICAgICBpZiAoIXRva2VuKVxuICAgICAgICAgICAgdG9rZW4gPSBpdGVyYXRvci5zdGVwRm9yd2FyZCgpO1xuICAgICAgICBpZiAoIXRva2VuKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmICghdHlwZVJlKXtcbiAgICAgICAgICAgIHR5cGVSZSA9IG5ldyBSZWdFeHAoXG4gICAgICAgICAgICAgICAgXCIoXFxcXC4/XCIgK1xuICAgICAgICAgICAgICAgIHRva2VuLnR5cGUucmVwbGFjZShcIi5cIiwgXCJcXFxcLlwiKS5yZXBsYWNlKFwibHBhcmVuXCIsIFwiLnBhcmVuXCIpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXGIoPzpzdGFydHxiZWdpbilcXGIvLCBcIig/OnN0YXJ0fGJlZ2lufGVuZClcIilcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLy1vcGVuXFxiLywgXCItKGNsb3NlfG9wZW4pXCIpXG4gICAgICAgICAgICAgICAgKyBcIikrXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdGFydCBzZWFyY2hpbmcgaW4gdG9rZW4sIGFmdGVyIHRoZSBjaGFyYWN0ZXIgYXQgcG9zaXRpb24uY29sdW1uXG4gICAgICAgIHZhciB2YWx1ZUluZGV4ID0gcG9zaXRpb24uY29sdW1uIC0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCk7XG5cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcblxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdG9rZW4udmFsdWU7XG4gICAgICAgICAgICB2YXIgdmFsdWVMZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAodmFsdWVJbmRleCA8IHZhbHVlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNociA9IHZhbHVlLmNoYXJBdCh2YWx1ZUluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoY2hyID09IGNsb3NpbmdCcmFja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoIC09IDE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXB0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge3JvdzogaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiB2YWx1ZUluZGV4ICsgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCl9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNociA9PSBicmFja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhbHVlSW5kZXggKz0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2NhbiBmb3J3YXJkIHRocm91Z2ggdGhlIGRvY3VtZW50LCBsb29raW5nIGZvciB0aGUgbmV4dCB0b2tlblxuICAgICAgICAgICAgLy8gd2hvc2UgdHlwZSBtYXRjaGVzIHR5cGVSZVxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKHRva2VuICYmICF0eXBlUmUudGVzdCh0b2tlbi50eXBlKSk7XG5cbiAgICAgICAgICAgIGlmICh0b2tlbiA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB2YWx1ZUluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgW1tSYW5nZV1dJ3MgZm9yIG1hdGNoaW5nIHRhZ3MgYW5kIHRhZyBuYW1lcywgaWYgdGhlcmUgYXJlIGFueVxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc1xuICAgICAqIEByZXR1cm5zIHt7Y2xvc2VUYWc6IFJhbmdlLCBjbG9zZVRhZ05hbWU6IFJhbmdlLCBvcGVuVGFnOiBSYW5nZSwgb3BlblRhZ05hbWU6IFJhbmdlfSB8IHVuZGVmaW5lZH1cbiAgICAgKiBAdGhpcyB7RWRpdFNlc3Npb259XG4gICAgICovXG4gICAgdGhpcy5nZXRNYXRjaGluZ1RhZ3MgPSBmdW5jdGlvbiAocG9zKSB7XG4gICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBUb2tlbkl0ZXJhdG9yKHRoaXMsIHBvcy5yb3csIHBvcy5jb2x1bW4pO1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLiRmaW5kVGFnTmFtZShpdGVyYXRvcik7XG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybjtcblxuICAgICAgICB2YXIgcHJldlRva2VuID0gaXRlcmF0b3Iuc3RlcEJhY2t3YXJkKCk7XG5cbiAgICAgICAgaWYgKHByZXZUb2tlbi52YWx1ZSA9PT0gJzwnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kZmluZENsb3NpbmdUYWcoaXRlcmF0b3IsIHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRmaW5kT3BlbmluZ1RhZyhpdGVyYXRvciwgdG9rZW4pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuJGZpbmRUYWdOYW1lID0gZnVuY3Rpb24gKGl0ZXJhdG9yKSB7XG4gICAgICAgIHZhciB0b2tlbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbigpO1xuICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGJhY2t3YXJkID0gZmFsc2U7XG4gICAgICAgIGlmICh0b2tlbiAmJiB0b2tlbi50eXBlLmluZGV4T2YoJ3RhZy1uYW1lJykgPT09IC0xKSB7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGJhY2t3YXJkKSB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpOyBlbHNlIHRva2VuID0gaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlID09PSBcIi8+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2hhbmdpbmcgaXRlcmF0b3IgZGlyZWN0aW9uIGZvciBzZWxmLWNsb3NpbmcgdGFncywgd2hlbiBjdXJzb3IgaXMgaW4gYmV0d2VlbiB0YWdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbmFtZSBhbmQgdGFnIGNsb3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t3YXJkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0b2tlbi50eXBlLmluZGV4T2YoJ3RhZy1uYW1lJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlICh0b2tlbiAmJiAhZm91bmQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9O1xuXG4gICAgdGhpcy4kZmluZENsb3NpbmdUYWcgPSBmdW5jdGlvbiAoaXRlcmF0b3IsIHRva2VuKSB7XG4gICAgICAgIHZhciBwcmV2VG9rZW47XG4gICAgICAgIHZhciBjdXJyZW50VGFnID0gdG9rZW4udmFsdWU7XG4gICAgICAgIHZhciB0YWcgPSB0b2tlbi52YWx1ZTtcbiAgICAgICAgdmFyIGRlcHRoID0gMDtcblxuICAgICAgICB2YXIgb3BlblRhZ1N0YXJ0ID0gbmV3IFJhbmdlKGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSxcbiAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSArIDFcbiAgICAgICAgKTtcbiAgICAgICAgdG9rZW4gPSBpdGVyYXRvci5zdGVwRm9yd2FyZCgpO1xuICAgICAgICB2YXIgb3BlblRhZ05hbWUgPSBuZXcgUmFuZ2UoaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCksIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpLFxuICAgICAgICAgICAgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCksIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgdG9rZW4udmFsdWUubGVuZ3RoXG4gICAgICAgICk7XG4gICAgICAgIHZhciBmb3VuZE9wZW5UYWdFbmQgPSBmYWxzZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgcHJldlRva2VuID0gdG9rZW47XG4gICAgICAgICAgICBpZiAocHJldlRva2VuLnR5cGUuaW5kZXhPZigndGFnLWNsb3NlJykgIT09IC0xICYmICFmb3VuZE9wZW5UYWdFbmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3BlblRhZ0VuZCA9IG5ldyBSYW5nZShpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSwgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCksXG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSArIDFcbiAgICAgICAgICAgICAgICApOyAvL1JhbmdlIGZvciBgPmBcbiAgICAgICAgICAgICAgICBmb3VuZE9wZW5UYWdFbmQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9rZW4gPSBpdGVyYXRvci5zdGVwRm9yd2FyZCgpO1xuICAgICAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlID09PSAnPicgJiYgIWZvdW5kT3BlblRhZ0VuZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlblRhZ0VuZCA9IG5ldyBSYW5nZShpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSwgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSwgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkgKyAxXG4gICAgICAgICAgICAgICAgICAgICk7IC8vUmFuZ2UgZm9yIGA+YFxuICAgICAgICAgICAgICAgICAgICBmb3VuZE9wZW5UYWdFbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZS5pbmRleE9mKCd0YWctbmFtZScpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFnID0gdG9rZW4udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWcgPT09IGN1cnJlbnRUYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2VG9rZW4udmFsdWUgPT09ICc8Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwcmV2VG9rZW4udmFsdWUgPT09ICc8LycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXB0aCA8IDApIHsvL2ZvdW5kIGNsb3NpbmcgdGFnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VUYWdTdGFydCA9IG5ldyBSYW5nZShpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOyAvL1JhbmdlIGZvciA8L1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBGb3J3YXJkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZVRhZ05hbWUgPSBuZXcgUmFuZ2UoaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSwgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSArIHRva2VuLnZhbHVlLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZS5pbmRleE9mKCd0YWctY2xvc2UnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gJiYgdG9rZW4udmFsdWUgPT09ICc+Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3NlVGFnRW5kID0gbmV3IFJhbmdlKGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7IC8vUmFuZ2UgZm9yID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0YWcgPT09IGN1cnJlbnRUYWcgJiYgdG9rZW4udmFsdWUgPT09ICcvPicpIHsgLy8gc2VsZi1jbG9zaW5nIHRhZ1xuICAgICAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVwdGggPCAwKSB7Ly9mb3VuZCBzZWxmLWNsb3NpbmcgdGFnIGVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9FeGFtcGxlOiA8dGFnTmFtZSBhdHRyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYDx0YWdOYW1lIGAgLSBvcGVuaW5nIHBhcnQgb2YgdGFnIGNvbnNpc3Qgb2YgYG9wZW5UYWdTdGFydGAsIGBvcGVuVGFnTmFtZWAgYW5kIGBvcGVuVGFnRW5kYFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9gLz5gIC0gY2xvc2luZyBwYXJ0IG9mIHRhZyBjb25zaXN0IG9mIGBjbG9zZVRhZ1N0YXJ0YCwgYGNsb3NlVGFnTmFtZWAgYW5kIGBjbG9zZVRhZ0VuZGBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZVRhZ1N0YXJ0ID0gbmV3IFJhbmdlKGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSwgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkgKyAyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3NlVGFnTmFtZSA9IGNsb3NlVGFnU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VUYWdFbmQgPSBjbG9zZVRhZ05hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcGVuVGFnRW5kID0gbmV3IFJhbmdlKG9wZW5UYWdOYW1lLmVuZC5yb3csIG9wZW5UYWdOYW1lLmVuZC5jb2x1bW4sIG9wZW5UYWdOYW1lLmVuZC5yb3csXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlblRhZ05hbWUuZW5kLmNvbHVtbiArIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAodG9rZW4gJiYgZGVwdGggPj0gMCk7XG5cbiAgICAgICAgaWYgKG9wZW5UYWdTdGFydCAmJiBvcGVuVGFnRW5kICYmIGNsb3NlVGFnU3RhcnQgJiYgY2xvc2VUYWdFbmQgJiYgb3BlblRhZ05hbWUgJiYgY2xvc2VUYWdOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG9wZW5UYWc6IG5ldyBSYW5nZShvcGVuVGFnU3RhcnQuc3RhcnQucm93LCBvcGVuVGFnU3RhcnQuc3RhcnQuY29sdW1uLCBvcGVuVGFnRW5kLmVuZC5yb3csXG4gICAgICAgICAgICAgICAgICAgIG9wZW5UYWdFbmQuZW5kLmNvbHVtblxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgY2xvc2VUYWc6IG5ldyBSYW5nZShjbG9zZVRhZ1N0YXJ0LnN0YXJ0LnJvdywgY2xvc2VUYWdTdGFydC5zdGFydC5jb2x1bW4sIGNsb3NlVGFnRW5kLmVuZC5yb3csXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlVGFnRW5kLmVuZC5jb2x1bW5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIG9wZW5UYWdOYW1lOiBvcGVuVGFnTmFtZSxcbiAgICAgICAgICAgICAgICBjbG9zZVRhZ05hbWU6IGNsb3NlVGFnTmFtZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLiRmaW5kT3BlbmluZ1RhZyA9IGZ1bmN0aW9uIChpdGVyYXRvciwgdG9rZW4pIHtcbiAgICAgICAgdmFyIHByZXZUb2tlbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbigpO1xuICAgICAgICB2YXIgdGFnID0gdG9rZW4udmFsdWU7XG4gICAgICAgIHZhciBkZXB0aCA9IDA7XG5cbiAgICAgICAgdmFyIHN0YXJ0Um93ID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCk7XG4gICAgICAgIHZhciBzdGFydENvbHVtbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpO1xuICAgICAgICB2YXIgZW5kQ29sdW1uID0gc3RhcnRDb2x1bW4gKyAyO1xuXG4gICAgICAgIC8vY2xvc2luZyB0YWdcbiAgICAgICAgdmFyIGNsb3NlVGFnU3RhcnQgPSBuZXcgUmFuZ2Uoc3RhcnRSb3csIHN0YXJ0Q29sdW1uLCBzdGFydFJvdywgZW5kQ29sdW1uKTsgLy9SYW5nZSBmb3IgPC9cbiAgICAgICAgaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICAgICAgdmFyIGNsb3NlVGFnTmFtZSA9IG5ldyBSYW5nZShpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSwgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCksXG4gICAgICAgICAgICBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSwgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkgKyB0b2tlbi52YWx1ZS5sZW5ndGhcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodG9rZW4udHlwZS5pbmRleE9mKCd0YWctY2xvc2UnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRva2VuIHx8IHRva2VuLnZhbHVlICE9PSBcIj5cIikgcmV0dXJuO1xuICAgICAgICB2YXIgY2xvc2VUYWdFbmQgPSBuZXcgUmFuZ2UoaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCksIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpLFxuICAgICAgICAgICAgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCksIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgMVxuICAgICAgICApOyAvL1JhbmdlIGZvciA+XG5cbiAgICAgICAgaXRlcmF0b3Iuc3RlcEJhY2t3YXJkKCk7XG4gICAgICAgIGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB0b2tlbiA9IHByZXZUb2tlbjtcbiAgICAgICAgICAgIHN0YXJ0Um93ID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCk7XG4gICAgICAgICAgICBzdGFydENvbHVtbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpO1xuICAgICAgICAgICAgZW5kQ29sdW1uID0gc3RhcnRDb2x1bW4gKyB0b2tlbi52YWx1ZS5sZW5ndGg7XG5cbiAgICAgICAgICAgIHByZXZUb2tlbiA9IGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpO1xuXG4gICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZS5pbmRleE9mKCd0YWctbmFtZScpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnID09PSB0b2tlbi52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZUb2tlbi52YWx1ZSA9PT0gJzwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwdGgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVwdGggPiAwKSB7Ly9mb3VuZCBvcGVuaW5nIHRhZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3BlblRhZ05hbWUgPSBuZXcgUmFuZ2Uoc3RhcnRSb3csIHN0YXJ0Q29sdW1uLCBzdGFydFJvdywgZW5kQ29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5UYWdTdGFydCA9IG5ldyBSYW5nZShpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOyAvL1JhbmdlIGZvciA8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAodG9rZW4gJiYgdG9rZW4udmFsdWUgIT09ICc+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcGVuVGFnRW5kID0gbmV3IFJhbmdlKGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCksIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkgKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7IC8vUmFuZ2UgZm9yID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwcmV2VG9rZW4udmFsdWUgPT09ICc8LycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnZhbHVlID09PSAnLz4nKSB7IC8vIHNlbGYtY2xvc2luZyB0YWdcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0ZXBDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXBUb2tlbiA9IHByZXZUb2tlbjtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRtcFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wVG9rZW4udHlwZS5pbmRleE9mKCd0YWctbmFtZScpICE9PSAtMSAmJiB0bXBUb2tlbi52YWx1ZSA9PT0gdGFnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwdGgtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRtcFRva2VuLnZhbHVlID09PSAnPCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcFRva2VuID0gaXRlcmF0b3Iuc3RlcEJhY2t3YXJkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXBDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5zdGVwRm9yd2FyZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChwcmV2VG9rZW4gJiYgZGVwdGggPD0gMCk7XG5cbiAgICAgICAgaWYgKG9wZW5UYWdTdGFydCAmJiBvcGVuVGFnRW5kICYmIGNsb3NlVGFnU3RhcnQgJiYgY2xvc2VUYWdFbmQgJiYgb3BlblRhZ05hbWUgJiYgY2xvc2VUYWdOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG9wZW5UYWc6IG5ldyBSYW5nZShvcGVuVGFnU3RhcnQuc3RhcnQucm93LCBvcGVuVGFnU3RhcnQuc3RhcnQuY29sdW1uLCBvcGVuVGFnRW5kLmVuZC5yb3csXG4gICAgICAgICAgICAgICAgICAgIG9wZW5UYWdFbmQuZW5kLmNvbHVtblxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgY2xvc2VUYWc6IG5ldyBSYW5nZShjbG9zZVRhZ1N0YXJ0LnN0YXJ0LnJvdywgY2xvc2VUYWdTdGFydC5zdGFydC5jb2x1bW4sIGNsb3NlVGFnRW5kLmVuZC5yb3csXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlVGFnRW5kLmVuZC5jb2x1bW5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIG9wZW5UYWdOYW1lOiBvcGVuVGFnTmFtZSxcbiAgICAgICAgICAgICAgICBjbG9zZVRhZ05hbWU6IGNsb3NlVGFnTmFtZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH07XG59XG5leHBvcnRzLkJyYWNrZXRNYXRjaCA9IEJyYWNrZXRNYXRjaDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/edit_session/bracket_match.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/edit_session/fold.js":
/*!********************************************************!*\
  !*** ./node_modules/ace-code/src/edit_session/fold.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./fold_line\").FoldLine} FoldLine\n * @typedef {import(\"../range\").Range} Range\n * @typedef {import(\"../../ace-internal\").Ace.Point} Point\n * @typedef {import(\"../../ace-internal\").Ace.IRange} IRange\n */\nvar RangeList = (__webpack_require__(/*! ../range_list */ \"./node_modules/ace-code/src/range_list.js\").RangeList);\n\n/*\n * Simple fold-data struct.\n **/\nclass Fold extends RangeList {\n\n    /**\n     * @param {Range} range\n     * @param {any} placeholder\n     */\n    constructor(range, placeholder) {\n        super();\n        this.foldLine = null;\n        this.placeholder = placeholder;\n        this.range = range;\n        this.start = range.start;\n        this.end = range.end;\n\n        this.sameRow = range.start.row == range.end.row;\n        /**@type {Fold[]}*/\n        this.subFolds = this.ranges = [];\n    }\n    \n    toString() {\n        return '\"' + this.placeholder + '\" ' + this.range.toString();\n    }\n\n    /**\n     * @param {FoldLine} foldLine\n     */\n    setFoldLine(foldLine) {\n        this.foldLine = foldLine;\n        this.subFolds.forEach(function(fold) {\n            fold.setFoldLine(foldLine);\n        });\n    }\n\n    clone() {\n        var range = this.range.clone();\n        var fold = new Fold(range, this.placeholder);\n        this.subFolds.forEach(function(subFold) {\n            fold.subFolds.push(subFold.clone());\n        });\n        fold.collapseChildren = this.collapseChildren;\n        return fold;\n    }\n\n    /**\n     * @param {Fold} fold\n     */\n    addSubFold(fold) {\n        if (this.range.isEqual(fold))\n            return;\n\n        // transform fold to local coordinates\n        consumeRange(fold, this.start);\n\n        var row = fold.start.row, column = fold.start.column;\n        for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {\n            cmp = this.subFolds[i].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        var afterStart = this.subFolds[i];\n        var firstConsumed = 0;\n\n        if (cmp == 0) {\n            if (afterStart.range.containsRange(fold))\n                return afterStart.addSubFold(fold);\n            else\n                firstConsumed = 1;\n        }\n\n        // cmp == -1\n        var row = fold.range.end.row, column = fold.range.end.column;\n        for (var j = i, cmp = -1; j < this.subFolds.length; j++) {\n            cmp = this.subFolds[j].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        if (cmp == 0)  j++;\n        var consumedFolds = this.subFolds.splice(i, j - i, fold);\n        var last = cmp == 0 ? consumedFolds.length - 1 : consumedFolds.length;\n        for (var k = firstConsumed; k < last; k++) {\n            fold.addSubFold(consumedFolds[k]);\n        }\n        fold.setFoldLine(this.foldLine);\n\n        return fold;\n    }\n\n    /**\n     * @param {IRange} range\n     */\n    restoreRange(range) {\n        return restoreRange(range, this.start);\n    }\n\n}\n\n/**\n * @param {Point} point\n * @param {Point} anchor\n */\nfunction consumePoint(point, anchor) {\n    point.row -= anchor.row;\n    if (point.row == 0)\n        point.column -= anchor.column;\n}\n/**\n * @param {IRange} range\n * @param {Point} anchor\n */\nfunction consumeRange(range, anchor) {\n    consumePoint(range.start, anchor);\n    consumePoint(range.end, anchor);\n}\n/**\n * @param {Point} point\n * @param {Point} anchor\n */\nfunction restorePoint(point, anchor) {\n    if (point.row == 0)\n        point.column += anchor.column;\n    point.row += anchor.row;\n}\n/**\n * @param {IRange} range\n * @param {Point} anchor\n */\nfunction restoreRange(range, anchor) {\n    restorePoint(range.start, anchor);\n    restorePoint(range.end, anchor);\n}\n\nexports.Fold = Fold;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2VkaXRfc2Vzc2lvbi9mb2xkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxhQUFhLGdDQUFnQztBQUM3QyxhQUFhLDBCQUEwQjtBQUN2QyxhQUFhLHdDQUF3QztBQUNyRCxhQUFhLHlDQUF5QztBQUN0RDtBQUNBLGdCQUFnQixpR0FBa0M7O0FBRWxEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLE9BQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLE1BQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQywwQkFBMEI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0NBQWtDLDBCQUEwQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxVQUFVO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxZQUFZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvZWRpdF9zZXNzaW9uL2ZvbGQuanM/NmVjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vZm9sZF9saW5lXCIpLkZvbGRMaW5lfSBGb2xkTGluZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL3JhbmdlXCIpLlJhbmdlfSBSYW5nZVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuUG9pbnR9IFBvaW50XG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5JUmFuZ2V9IElSYW5nZVxuICovXG52YXIgUmFuZ2VMaXN0ID0gcmVxdWlyZShcIi4uL3JhbmdlX2xpc3RcIikuUmFuZ2VMaXN0O1xuXG4vKlxuICogU2ltcGxlIGZvbGQtZGF0YSBzdHJ1Y3QuXG4gKiovXG5jbGFzcyBGb2xkIGV4dGVuZHMgUmFuZ2VMaXN0IHtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlXG4gICAgICogQHBhcmFtIHthbnl9IHBsYWNlaG9sZGVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocmFuZ2UsIHBsYWNlaG9sZGVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZm9sZExpbmUgPSBudWxsO1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XG4gICAgICAgIHRoaXMucmFuZ2UgPSByYW5nZTtcbiAgICAgICAgdGhpcy5zdGFydCA9IHJhbmdlLnN0YXJ0O1xuICAgICAgICB0aGlzLmVuZCA9IHJhbmdlLmVuZDtcblxuICAgICAgICB0aGlzLnNhbWVSb3cgPSByYW5nZS5zdGFydC5yb3cgPT0gcmFuZ2UuZW5kLnJvdztcbiAgICAgICAgLyoqQHR5cGUge0ZvbGRbXX0qL1xuICAgICAgICB0aGlzLnN1YkZvbGRzID0gdGhpcy5yYW5nZXMgPSBbXTtcbiAgICB9XG4gICAgXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAnXCInICsgdGhpcy5wbGFjZWhvbGRlciArICdcIiAnICsgdGhpcy5yYW5nZS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Rm9sZExpbmV9IGZvbGRMaW5lXG4gICAgICovXG4gICAgc2V0Rm9sZExpbmUoZm9sZExpbmUpIHtcbiAgICAgICAgdGhpcy5mb2xkTGluZSA9IGZvbGRMaW5lO1xuICAgICAgICB0aGlzLnN1YkZvbGRzLmZvckVhY2goZnVuY3Rpb24oZm9sZCkge1xuICAgICAgICAgICAgZm9sZC5zZXRGb2xkTGluZShmb2xkTGluZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNsb25lKCkge1xuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnJhbmdlLmNsb25lKCk7XG4gICAgICAgIHZhciBmb2xkID0gbmV3IEZvbGQocmFuZ2UsIHRoaXMucGxhY2Vob2xkZXIpO1xuICAgICAgICB0aGlzLnN1YkZvbGRzLmZvckVhY2goZnVuY3Rpb24oc3ViRm9sZCkge1xuICAgICAgICAgICAgZm9sZC5zdWJGb2xkcy5wdXNoKHN1YkZvbGQuY2xvbmUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBmb2xkLmNvbGxhcHNlQ2hpbGRyZW4gPSB0aGlzLmNvbGxhcHNlQ2hpbGRyZW47XG4gICAgICAgIHJldHVybiBmb2xkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Rm9sZH0gZm9sZFxuICAgICAqL1xuICAgIGFkZFN1YkZvbGQoZm9sZCkge1xuICAgICAgICBpZiAodGhpcy5yYW5nZS5pc0VxdWFsKGZvbGQpKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIC8vIHRyYW5zZm9ybSBmb2xkIHRvIGxvY2FsIGNvb3JkaW5hdGVzXG4gICAgICAgIGNvbnN1bWVSYW5nZShmb2xkLCB0aGlzLnN0YXJ0KTtcblxuICAgICAgICB2YXIgcm93ID0gZm9sZC5zdGFydC5yb3csIGNvbHVtbiA9IGZvbGQuc3RhcnQuY29sdW1uO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgY21wID0gLTE7IGkgPCB0aGlzLnN1YkZvbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjbXAgPSB0aGlzLnN1YkZvbGRzW2ldLnJhbmdlLmNvbXBhcmUocm93LCBjb2x1bW4pO1xuICAgICAgICAgICAgaWYgKGNtcCAhPSAxKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhZnRlclN0YXJ0ID0gdGhpcy5zdWJGb2xkc1tpXTtcbiAgICAgICAgdmFyIGZpcnN0Q29uc3VtZWQgPSAwO1xuXG4gICAgICAgIGlmIChjbXAgPT0gMCkge1xuICAgICAgICAgICAgaWYgKGFmdGVyU3RhcnQucmFuZ2UuY29udGFpbnNSYW5nZShmb2xkKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWZ0ZXJTdGFydC5hZGRTdWJGb2xkKGZvbGQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZpcnN0Q29uc3VtZWQgPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY21wID09IC0xXG4gICAgICAgIHZhciByb3cgPSBmb2xkLnJhbmdlLmVuZC5yb3csIGNvbHVtbiA9IGZvbGQucmFuZ2UuZW5kLmNvbHVtbjtcbiAgICAgICAgZm9yICh2YXIgaiA9IGksIGNtcCA9IC0xOyBqIDwgdGhpcy5zdWJGb2xkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY21wID0gdGhpcy5zdWJGb2xkc1tqXS5yYW5nZS5jb21wYXJlKHJvdywgY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjbXAgIT0gMSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY21wID09IDApICBqKys7XG4gICAgICAgIHZhciBjb25zdW1lZEZvbGRzID0gdGhpcy5zdWJGb2xkcy5zcGxpY2UoaSwgaiAtIGksIGZvbGQpO1xuICAgICAgICB2YXIgbGFzdCA9IGNtcCA9PSAwID8gY29uc3VtZWRGb2xkcy5sZW5ndGggLSAxIDogY29uc3VtZWRGb2xkcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGsgPSBmaXJzdENvbnN1bWVkOyBrIDwgbGFzdDsgaysrKSB7XG4gICAgICAgICAgICBmb2xkLmFkZFN1YkZvbGQoY29uc3VtZWRGb2xkc1trXSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9sZC5zZXRGb2xkTGluZSh0aGlzLmZvbGRMaW5lKTtcblxuICAgICAgICByZXR1cm4gZm9sZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0lSYW5nZX0gcmFuZ2VcbiAgICAgKi9cbiAgICByZXN0b3JlUmFuZ2UocmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3RvcmVSYW5nZShyYW5nZSwgdGhpcy5zdGFydCk7XG4gICAgfVxuXG59XG5cbi8qKlxuICogQHBhcmFtIHtQb2ludH0gcG9pbnRcbiAqIEBwYXJhbSB7UG9pbnR9IGFuY2hvclxuICovXG5mdW5jdGlvbiBjb25zdW1lUG9pbnQocG9pbnQsIGFuY2hvcikge1xuICAgIHBvaW50LnJvdyAtPSBhbmNob3Iucm93O1xuICAgIGlmIChwb2ludC5yb3cgPT0gMClcbiAgICAgICAgcG9pbnQuY29sdW1uIC09IGFuY2hvci5jb2x1bW47XG59XG4vKipcbiAqIEBwYXJhbSB7SVJhbmdlfSByYW5nZVxuICogQHBhcmFtIHtQb2ludH0gYW5jaG9yXG4gKi9cbmZ1bmN0aW9uIGNvbnN1bWVSYW5nZShyYW5nZSwgYW5jaG9yKSB7XG4gICAgY29uc3VtZVBvaW50KHJhbmdlLnN0YXJ0LCBhbmNob3IpO1xuICAgIGNvbnN1bWVQb2ludChyYW5nZS5lbmQsIGFuY2hvcik7XG59XG4vKipcbiAqIEBwYXJhbSB7UG9pbnR9IHBvaW50XG4gKiBAcGFyYW0ge1BvaW50fSBhbmNob3JcbiAqL1xuZnVuY3Rpb24gcmVzdG9yZVBvaW50KHBvaW50LCBhbmNob3IpIHtcbiAgICBpZiAocG9pbnQucm93ID09IDApXG4gICAgICAgIHBvaW50LmNvbHVtbiArPSBhbmNob3IuY29sdW1uO1xuICAgIHBvaW50LnJvdyArPSBhbmNob3Iucm93O1xufVxuLyoqXG4gKiBAcGFyYW0ge0lSYW5nZX0gcmFuZ2VcbiAqIEBwYXJhbSB7UG9pbnR9IGFuY2hvclxuICovXG5mdW5jdGlvbiByZXN0b3JlUmFuZ2UocmFuZ2UsIGFuY2hvcikge1xuICAgIHJlc3RvcmVQb2ludChyYW5nZS5zdGFydCwgYW5jaG9yKTtcbiAgICByZXN0b3JlUG9pbnQocmFuZ2UuZW5kLCBhbmNob3IpO1xufVxuXG5leHBvcnRzLkZvbGQgPSBGb2xkO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/edit_session/fold.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/edit_session/fold_line.js":
/*!*************************************************************!*\
  !*** ./node_modules/ace-code/src/edit_session/fold_line.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./fold\").Fold} Fold\n */\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\n\nclass FoldLine {\n    /**\n     * If an array is passed in, the folds are expected to be sorted already.\n     * @param {FoldLine[]} foldData\n     * @param {Fold[]|Fold} folds\n     */\n    constructor(foldData, folds) {\n        this.foldData = foldData;\n        if (Array.isArray(folds)) {\n            /**@type {Fold[]} */\n            this.folds = folds;\n        } else {\n            folds = this.folds = [ folds ];\n        }\n\n        var last = folds[folds.length - 1];\n        this.range = new Range(folds[0].start.row, folds[0].start.column,\n            last.end.row, last.end.column);\n        this.start = this.range.start;\n        this.end   = this.range.end;\n\n        this.folds.forEach(function(fold) {\n            fold.setFoldLine(this);\n        }, this);\n    }\n    \n    /**\n     * Note: This doesn't update wrapData!\n     * @param {number} shift\n     */\n    shiftRow(shift) {\n        this.start.row += shift;\n        this.end.row += shift;\n        this.folds.forEach(function(fold) {\n            fold.start.row += shift;\n            fold.end.row += shift;\n        });\n    }\n\n    /**\n     * @param {Fold} fold\n     */\n    addFold(fold) {\n        if (fold.sameRow) {\n            // @ts-expect-error TODO: startRow, endRow are missing in Fold and FoldLine\n            if (fold.start.row < this.startRow || fold.endRow > this.endRow) {\n                throw new Error(\"Can't add a fold to this FoldLine as it has no connection\");\n            }\n            this.folds.push(fold);\n            this.folds.sort(function(a, b) {\n                return -a.range.compareEnd(b.start.row, b.start.column);\n            });\n            if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {\n                this.end.row = fold.end.row;\n                this.end.column =  fold.end.column;\n            } else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {\n                this.start.row = fold.start.row;\n                this.start.column = fold.start.column;\n            }\n        } else if (fold.start.row == this.end.row) {\n            this.folds.push(fold);\n            this.end.row = fold.end.row;\n            this.end.column = fold.end.column;\n        } else if (fold.end.row == this.start.row) {\n            this.folds.unshift(fold);\n            this.start.row = fold.start.row;\n            this.start.column = fold.start.column;\n        } else {\n            throw new Error(\"Trying to add fold to FoldRow that doesn't have a matching row\");\n        }\n        fold.foldLine = this;\n    }\n\n    /**\n     * @param {number} row\n     */\n    containsRow(row) {\n        return row >= this.start.row && row <= this.end.row;\n    }\n\n    /**\n     * @param {Function} callback\n     * @param {number} endRow\n     * @param {number} endColumn\n     */\n    walk(callback, endRow, endColumn) {\n        var lastEnd = 0,\n            folds = this.folds,\n            fold,\n            cmp, stop, isNewRow = true;\n\n        if (endRow == null) {\n            endRow = this.end.row;\n            endColumn = this.end.column;\n        }\n\n        for (var i = 0; i < folds.length; i++) {\n            fold = folds[i];\n\n            cmp = fold.range.compareStart(endRow, endColumn);\n            // This fold is after the endRow/Column.\n            if (cmp == -1) {\n                callback(null, endRow, endColumn, lastEnd, isNewRow);\n                return;\n            }\n\n            stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);\n            stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);\n\n            // If the user requested to stop the walk or endRow/endColumn is\n            // inside of this fold (cmp == 0), then end here.\n            if (stop || cmp === 0) {\n                return;\n            }\n\n            // Note the new lastEnd might not be on the same line. However,\n            // it's the callback's job to recognize this.\n            isNewRow = !fold.sameRow;\n            lastEnd = fold.end.column;\n        }\n        callback(null, endRow, endColumn, lastEnd, isNewRow);\n    }\n\n    /**\n     * @param {number} row\n     * @param {number} column\n     * @return {{ fold: Fold, kind: string } | null}\n     */\n    getNextFoldTo(row, column) {\n        var fold, cmp;\n        for (var i = 0; i < this.folds.length; i++) {\n            fold = this.folds[i];\n            cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                return {\n                    fold: fold,\n                    kind: \"after\"\n                };\n            } else if (cmp === 0) {\n                return {\n                    fold: fold,\n                    kind: \"inside\"\n                };\n            }\n        }\n        return null;\n    }\n\n    /**\n     * @param {number} row\n     * @param {number} column\n     * @param {number} len\n     */\n    addRemoveChars(row, column, len) {\n        var ret = this.getNextFoldTo(row, column),\n            fold, folds;\n        if (ret) {\n            fold = ret.fold;\n            if (ret.kind == \"inside\"\n                && fold.start.column != column\n                && fold.start.row != row)\n            {\n                //throwing here breaks whole editor\n                //TODO: properly handle this\n                window.console && window.console.log(row, column, fold);\n            } else if (fold.start.row == row) {\n                folds = this.folds;\n                var i = folds.indexOf(fold);\n                if (i === 0) {\n                    this.start.column += len;\n                }\n                for (i; i < folds.length; i++) {\n                    fold = folds[i];\n                    fold.start.column += len;\n                    if (!fold.sameRow) {\n                        return;\n                    }\n                    fold.end.column += len;\n                }\n                this.end.column += len;\n            }\n        }\n    }\n\n    /**\n     * @param {number} row\n     * @param {number} column\n     * @return {FoldLine | null}\n     */\n    split(row, column) {\n        var pos = this.getNextFoldTo(row, column);\n        \n        if (!pos || pos.kind == \"inside\")\n            return null;\n            \n        var fold = pos.fold;\n        var folds = this.folds;\n        var foldData = this.foldData;\n        \n        var i = folds.indexOf(fold);\n        var foldBefore = folds[i - 1];\n        this.end.row = foldBefore.end.row;\n        this.end.column = foldBefore.end.column;\n\n        // Remove the folds after row/column and create a new FoldLine\n        // containing these removed folds.\n        folds = folds.splice(i, folds.length - i);\n\n        var newFoldLine = new FoldLine(foldData, folds);\n        foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);\n        return newFoldLine;\n    }\n\n    /**\n     * @param {FoldLine} foldLineNext\n     */\n    merge(foldLineNext) {\n        var folds = foldLineNext.folds;\n        for (var i = 0; i < folds.length; i++) {\n            this.addFold(folds[i]);\n        }\n        // Remove the foldLineNext - no longer needed, as\n        // it's merged now with foldLineNext.\n        var foldData = this.foldData;\n        foldData.splice(foldData.indexOf(foldLineNext), 1);\n    }\n\n    toString() {\n        var ret = [this.range.toString() + \": [\" ];\n\n        this.folds.forEach(function(fold) {\n            ret.push(\"  \" + fold.toString());\n        });\n        ret.push(\"]\");\n        return ret.join(\"\\n\");\n    }\n\n    /**\n     * @param {number} idx\n     * @return {import(\"../../ace-internal\").Ace.Point}\n     */\n    idxToPosition(idx) {\n        var lastFoldEndColumn = 0;\n\n        for (var i = 0; i < this.folds.length; i++) {\n            var fold = this.folds[i];\n\n            idx -= fold.start.column - lastFoldEndColumn;\n            if (idx < 0) {\n                return {\n                    row: fold.start.row,\n                    column: fold.start.column + idx\n                };\n            }\n\n            idx -= fold.placeholder.length;\n            if (idx < 0) {\n                return fold.start;\n            }\n\n            lastFoldEndColumn = fold.end.column;\n        }\n\n        return {\n            row: this.end.row,\n            column: this.end.column + idx\n        };\n    }\n}\n\nexports.FoldLine = FoldLine;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2VkaXRfc2Vzc2lvbi9mb2xkX2xpbmUuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsdUJBQXVCO0FBQ3BDO0FBQ0EsWUFBWSxtRkFBeUI7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsWUFBWTtBQUMzQixlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsUUFBUTtBQUM5QjtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLGVBQWUsTUFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFVBQVU7QUFDekIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLGtCQUFrQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixrQkFBa0IsMkJBQTJCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBOztBQUVBLHdCQUF3Qix1QkFBdUI7QUFDL0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvZWRpdF9zZXNzaW9uL2ZvbGRfbGluZS5qcz9iNzRkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9mb2xkXCIpLkZvbGR9IEZvbGRcbiAqL1xudmFyIFJhbmdlID0gcmVxdWlyZShcIi4uL3JhbmdlXCIpLlJhbmdlO1xuXG5jbGFzcyBGb2xkTGluZSB7XG4gICAgLyoqXG4gICAgICogSWYgYW4gYXJyYXkgaXMgcGFzc2VkIGluLCB0aGUgZm9sZHMgYXJlIGV4cGVjdGVkIHRvIGJlIHNvcnRlZCBhbHJlYWR5LlxuICAgICAqIEBwYXJhbSB7Rm9sZExpbmVbXX0gZm9sZERhdGFcbiAgICAgKiBAcGFyYW0ge0ZvbGRbXXxGb2xkfSBmb2xkc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZvbGREYXRhLCBmb2xkcykge1xuICAgICAgICB0aGlzLmZvbGREYXRhID0gZm9sZERhdGE7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZvbGRzKSkge1xuICAgICAgICAgICAgLyoqQHR5cGUge0ZvbGRbXX0gKi9cbiAgICAgICAgICAgIHRoaXMuZm9sZHMgPSBmb2xkcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvbGRzID0gdGhpcy5mb2xkcyA9IFsgZm9sZHMgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsYXN0ID0gZm9sZHNbZm9sZHMubGVuZ3RoIC0gMV07XG4gICAgICAgIHRoaXMucmFuZ2UgPSBuZXcgUmFuZ2UoZm9sZHNbMF0uc3RhcnQucm93LCBmb2xkc1swXS5zdGFydC5jb2x1bW4sXG4gICAgICAgICAgICBsYXN0LmVuZC5yb3csIGxhc3QuZW5kLmNvbHVtbik7XG4gICAgICAgIHRoaXMuc3RhcnQgPSB0aGlzLnJhbmdlLnN0YXJ0O1xuICAgICAgICB0aGlzLmVuZCAgID0gdGhpcy5yYW5nZS5lbmQ7XG5cbiAgICAgICAgdGhpcy5mb2xkcy5mb3JFYWNoKGZ1bmN0aW9uKGZvbGQpIHtcbiAgICAgICAgICAgIGZvbGQuc2V0Rm9sZExpbmUodGhpcyk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBOb3RlOiBUaGlzIGRvZXNuJ3QgdXBkYXRlIHdyYXBEYXRhIVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaGlmdFxuICAgICAqL1xuICAgIHNoaWZ0Um93KHNoaWZ0KSB7XG4gICAgICAgIHRoaXMuc3RhcnQucm93ICs9IHNoaWZ0O1xuICAgICAgICB0aGlzLmVuZC5yb3cgKz0gc2hpZnQ7XG4gICAgICAgIHRoaXMuZm9sZHMuZm9yRWFjaChmdW5jdGlvbihmb2xkKSB7XG4gICAgICAgICAgICBmb2xkLnN0YXJ0LnJvdyArPSBzaGlmdDtcbiAgICAgICAgICAgIGZvbGQuZW5kLnJvdyArPSBzaGlmdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtGb2xkfSBmb2xkXG4gICAgICovXG4gICAgYWRkRm9sZChmb2xkKSB7XG4gICAgICAgIGlmIChmb2xkLnNhbWVSb3cpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogc3RhcnRSb3csIGVuZFJvdyBhcmUgbWlzc2luZyBpbiBGb2xkIGFuZCBGb2xkTGluZVxuICAgICAgICAgICAgaWYgKGZvbGQuc3RhcnQucm93IDwgdGhpcy5zdGFydFJvdyB8fCBmb2xkLmVuZFJvdyA+IHRoaXMuZW5kUm93KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgYWRkIGEgZm9sZCB0byB0aGlzIEZvbGRMaW5lIGFzIGl0IGhhcyBubyBjb25uZWN0aW9uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mb2xkcy5wdXNoKGZvbGQpO1xuICAgICAgICAgICAgdGhpcy5mb2xkcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLWEucmFuZ2UuY29tcGFyZUVuZChiLnN0YXJ0LnJvdywgYi5zdGFydC5jb2x1bW4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5yYW5nZS5jb21wYXJlRW5kKGZvbGQuc3RhcnQucm93LCBmb2xkLnN0YXJ0LmNvbHVtbikgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmQucm93ID0gZm9sZC5lbmQucm93O1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kLmNvbHVtbiA9ICBmb2xkLmVuZC5jb2x1bW47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmFuZ2UuY29tcGFyZVN0YXJ0KGZvbGQuZW5kLnJvdywgZm9sZC5lbmQuY29sdW1uKSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0LnJvdyA9IGZvbGQuc3RhcnQucm93O1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQuY29sdW1uID0gZm9sZC5zdGFydC5jb2x1bW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZm9sZC5zdGFydC5yb3cgPT0gdGhpcy5lbmQucm93KSB7XG4gICAgICAgICAgICB0aGlzLmZvbGRzLnB1c2goZm9sZCk7XG4gICAgICAgICAgICB0aGlzLmVuZC5yb3cgPSBmb2xkLmVuZC5yb3c7XG4gICAgICAgICAgICB0aGlzLmVuZC5jb2x1bW4gPSBmb2xkLmVuZC5jb2x1bW47XG4gICAgICAgIH0gZWxzZSBpZiAoZm9sZC5lbmQucm93ID09IHRoaXMuc3RhcnQucm93KSB7XG4gICAgICAgICAgICB0aGlzLmZvbGRzLnVuc2hpZnQoZm9sZCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0LnJvdyA9IGZvbGQuc3RhcnQucm93O1xuICAgICAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gPSBmb2xkLnN0YXJ0LmNvbHVtbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBhZGQgZm9sZCB0byBGb2xkUm93IHRoYXQgZG9lc24ndCBoYXZlIGEgbWF0Y2hpbmcgcm93XCIpO1xuICAgICAgICB9XG4gICAgICAgIGZvbGQuZm9sZExpbmUgPSB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKi9cbiAgICBjb250YWluc1Jvdyhyb3cpIHtcbiAgICAgICAgcmV0dXJuIHJvdyA+PSB0aGlzLnN0YXJ0LnJvdyAmJiByb3cgPD0gdGhpcy5lbmQucm93O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZFJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRDb2x1bW5cbiAgICAgKi9cbiAgICB3YWxrKGNhbGxiYWNrLCBlbmRSb3csIGVuZENvbHVtbikge1xuICAgICAgICB2YXIgbGFzdEVuZCA9IDAsXG4gICAgICAgICAgICBmb2xkcyA9IHRoaXMuZm9sZHMsXG4gICAgICAgICAgICBmb2xkLFxuICAgICAgICAgICAgY21wLCBzdG9wLCBpc05ld1JvdyA9IHRydWU7XG5cbiAgICAgICAgaWYgKGVuZFJvdyA9PSBudWxsKSB7XG4gICAgICAgICAgICBlbmRSb3cgPSB0aGlzLmVuZC5yb3c7XG4gICAgICAgICAgICBlbmRDb2x1bW4gPSB0aGlzLmVuZC5jb2x1bW47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb2xkID0gZm9sZHNbaV07XG5cbiAgICAgICAgICAgIGNtcCA9IGZvbGQucmFuZ2UuY29tcGFyZVN0YXJ0KGVuZFJvdywgZW5kQ29sdW1uKTtcbiAgICAgICAgICAgIC8vIFRoaXMgZm9sZCBpcyBhZnRlciB0aGUgZW5kUm93L0NvbHVtbi5cbiAgICAgICAgICAgIGlmIChjbXAgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBlbmRSb3csIGVuZENvbHVtbiwgbGFzdEVuZCwgaXNOZXdSb3cpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RvcCA9IGNhbGxiYWNrKG51bGwsIGZvbGQuc3RhcnQucm93LCBmb2xkLnN0YXJ0LmNvbHVtbiwgbGFzdEVuZCwgaXNOZXdSb3cpO1xuICAgICAgICAgICAgc3RvcCA9ICFzdG9wICYmIGNhbGxiYWNrKGZvbGQucGxhY2Vob2xkZXIsIGZvbGQuc3RhcnQucm93LCBmb2xkLnN0YXJ0LmNvbHVtbiwgbGFzdEVuZCk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIHJlcXVlc3RlZCB0byBzdG9wIHRoZSB3YWxrIG9yIGVuZFJvdy9lbmRDb2x1bW4gaXNcbiAgICAgICAgICAgIC8vIGluc2lkZSBvZiB0aGlzIGZvbGQgKGNtcCA9PSAwKSwgdGhlbiBlbmQgaGVyZS5cbiAgICAgICAgICAgIGlmIChzdG9wIHx8IGNtcCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTm90ZSB0aGUgbmV3IGxhc3RFbmQgbWlnaHQgbm90IGJlIG9uIHRoZSBzYW1lIGxpbmUuIEhvd2V2ZXIsXG4gICAgICAgICAgICAvLyBpdCdzIHRoZSBjYWxsYmFjaydzIGpvYiB0byByZWNvZ25pemUgdGhpcy5cbiAgICAgICAgICAgIGlzTmV3Um93ID0gIWZvbGQuc2FtZVJvdztcbiAgICAgICAgICAgIGxhc3RFbmQgPSBmb2xkLmVuZC5jb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2sobnVsbCwgZW5kUm93LCBlbmRDb2x1bW4sIGxhc3RFbmQsIGlzTmV3Um93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbHVtblxuICAgICAqIEByZXR1cm4ge3sgZm9sZDogRm9sZCwga2luZDogc3RyaW5nIH0gfCBudWxsfVxuICAgICAqL1xuICAgIGdldE5leHRGb2xkVG8ocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdmFyIGZvbGQsIGNtcDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZvbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb2xkID0gdGhpcy5mb2xkc1tpXTtcbiAgICAgICAgICAgIGNtcCA9IGZvbGQucmFuZ2UuY29tcGFyZUVuZChyb3csIGNvbHVtbik7XG4gICAgICAgICAgICBpZiAoY21wID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZm9sZDogZm9sZCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogXCJhZnRlclwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY21wID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZm9sZDogZm9sZCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogXCJpbnNpZGVcIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2x1bW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVuXG4gICAgICovXG4gICAgYWRkUmVtb3ZlQ2hhcnMocm93LCBjb2x1bW4sIGxlbikge1xuICAgICAgICB2YXIgcmV0ID0gdGhpcy5nZXROZXh0Rm9sZFRvKHJvdywgY29sdW1uKSxcbiAgICAgICAgICAgIGZvbGQsIGZvbGRzO1xuICAgICAgICBpZiAocmV0KSB7XG4gICAgICAgICAgICBmb2xkID0gcmV0LmZvbGQ7XG4gICAgICAgICAgICBpZiAocmV0LmtpbmQgPT0gXCJpbnNpZGVcIlxuICAgICAgICAgICAgICAgICYmIGZvbGQuc3RhcnQuY29sdW1uICE9IGNvbHVtblxuICAgICAgICAgICAgICAgICYmIGZvbGQuc3RhcnQucm93ICE9IHJvdylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL3Rocm93aW5nIGhlcmUgYnJlYWtzIHdob2xlIGVkaXRvclxuICAgICAgICAgICAgICAgIC8vVE9ETzogcHJvcGVybHkgaGFuZGxlIHRoaXNcbiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cocm93LCBjb2x1bW4sIGZvbGQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmb2xkLnN0YXJ0LnJvdyA9PSByb3cpIHtcbiAgICAgICAgICAgICAgICBmb2xkcyA9IHRoaXMuZm9sZHM7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBmb2xkcy5pbmRleE9mKGZvbGQpO1xuICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQuY29sdW1uICs9IGxlbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChpOyBpIDwgZm9sZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9sZCA9IGZvbGRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBmb2xkLnN0YXJ0LmNvbHVtbiArPSBsZW47XG4gICAgICAgICAgICAgICAgICAgIGlmICghZm9sZC5zYW1lUm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9sZC5lbmQuY29sdW1uICs9IGxlbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbmQuY29sdW1uICs9IGxlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29sdW1uXG4gICAgICogQHJldHVybiB7Rm9sZExpbmUgfCBudWxsfVxuICAgICAqL1xuICAgIHNwbGl0KHJvdywgY29sdW1uKSB7XG4gICAgICAgIHZhciBwb3MgPSB0aGlzLmdldE5leHRGb2xkVG8ocm93LCBjb2x1bW4pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFwb3MgfHwgcG9zLmtpbmQgPT0gXCJpbnNpZGVcIilcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgIHZhciBmb2xkID0gcG9zLmZvbGQ7XG4gICAgICAgIHZhciBmb2xkcyA9IHRoaXMuZm9sZHM7XG4gICAgICAgIHZhciBmb2xkRGF0YSA9IHRoaXMuZm9sZERhdGE7XG4gICAgICAgIFxuICAgICAgICB2YXIgaSA9IGZvbGRzLmluZGV4T2YoZm9sZCk7XG4gICAgICAgIHZhciBmb2xkQmVmb3JlID0gZm9sZHNbaSAtIDFdO1xuICAgICAgICB0aGlzLmVuZC5yb3cgPSBmb2xkQmVmb3JlLmVuZC5yb3c7XG4gICAgICAgIHRoaXMuZW5kLmNvbHVtbiA9IGZvbGRCZWZvcmUuZW5kLmNvbHVtbjtcblxuICAgICAgICAvLyBSZW1vdmUgdGhlIGZvbGRzIGFmdGVyIHJvdy9jb2x1bW4gYW5kIGNyZWF0ZSBhIG5ldyBGb2xkTGluZVxuICAgICAgICAvLyBjb250YWluaW5nIHRoZXNlIHJlbW92ZWQgZm9sZHMuXG4gICAgICAgIGZvbGRzID0gZm9sZHMuc3BsaWNlKGksIGZvbGRzLmxlbmd0aCAtIGkpO1xuXG4gICAgICAgIHZhciBuZXdGb2xkTGluZSA9IG5ldyBGb2xkTGluZShmb2xkRGF0YSwgZm9sZHMpO1xuICAgICAgICBmb2xkRGF0YS5zcGxpY2UoZm9sZERhdGEuaW5kZXhPZih0aGlzKSArIDEsIDAsIG5ld0ZvbGRMaW5lKTtcbiAgICAgICAgcmV0dXJuIG5ld0ZvbGRMaW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Rm9sZExpbmV9IGZvbGRMaW5lTmV4dFxuICAgICAqL1xuICAgIG1lcmdlKGZvbGRMaW5lTmV4dCkge1xuICAgICAgICB2YXIgZm9sZHMgPSBmb2xkTGluZU5leHQuZm9sZHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9sZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRm9sZChmb2xkc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBmb2xkTGluZU5leHQgLSBubyBsb25nZXIgbmVlZGVkLCBhc1xuICAgICAgICAvLyBpdCdzIG1lcmdlZCBub3cgd2l0aCBmb2xkTGluZU5leHQuXG4gICAgICAgIHZhciBmb2xkRGF0YSA9IHRoaXMuZm9sZERhdGE7XG4gICAgICAgIGZvbGREYXRhLnNwbGljZShmb2xkRGF0YS5pbmRleE9mKGZvbGRMaW5lTmV4dCksIDEpO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICB2YXIgcmV0ID0gW3RoaXMucmFuZ2UudG9TdHJpbmcoKSArIFwiOiBbXCIgXTtcblxuICAgICAgICB0aGlzLmZvbGRzLmZvckVhY2goZnVuY3Rpb24oZm9sZCkge1xuICAgICAgICAgICAgcmV0LnB1c2goXCIgIFwiICsgZm9sZC50b1N0cmluZygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldC5wdXNoKFwiXVwiKTtcbiAgICAgICAgcmV0dXJuIHJldC5qb2luKFwiXFxuXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpZHhcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLlBvaW50fVxuICAgICAqL1xuICAgIGlkeFRvUG9zaXRpb24oaWR4KSB7XG4gICAgICAgIHZhciBsYXN0Rm9sZEVuZENvbHVtbiA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZvbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZm9sZCA9IHRoaXMuZm9sZHNbaV07XG5cbiAgICAgICAgICAgIGlkeCAtPSBmb2xkLnN0YXJ0LmNvbHVtbiAtIGxhc3RGb2xkRW5kQ29sdW1uO1xuICAgICAgICAgICAgaWYgKGlkeCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByb3c6IGZvbGQuc3RhcnQucm93LFxuICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGZvbGQuc3RhcnQuY29sdW1uICsgaWR4XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWR4IC09IGZvbGQucGxhY2Vob2xkZXIubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGlkeCA8IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9sZC5zdGFydDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFzdEZvbGRFbmRDb2x1bW4gPSBmb2xkLmVuZC5jb2x1bW47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm93OiB0aGlzLmVuZC5yb3csXG4gICAgICAgICAgICBjb2x1bW46IHRoaXMuZW5kLmNvbHVtbiArIGlkeFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0cy5Gb2xkTGluZSA9IEZvbGRMaW5lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/edit_session/fold_line.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/edit_session/folding.js":
/*!***********************************************************!*\
  !*** ./node_modules/ace-code/src/edit_session/folding.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("// @ts-nocheck\n\n\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar FoldLine = (__webpack_require__(/*! ./fold_line */ \"./node_modules/ace-code/src/edit_session/fold_line.js\").FoldLine);\nvar Fold = (__webpack_require__(/*! ./fold */ \"./node_modules/ace-code/src/edit_session/fold.js\").Fold);\nvar TokenIterator = (__webpack_require__(/*! ../token_iterator */ \"./node_modules/ace-code/src/token_iterator.js\").TokenIterator);\nvar MouseEvent = (__webpack_require__(/*! ../mouse/mouse_event */ \"./node_modules/ace-code/src/mouse/mouse_event.js\").MouseEvent);\n\n/**\n * @typedef {import(\"../edit_session\").EditSession & import(\"../../ace-internal\").Ace.Folding} IFolding\n * @typedef {import(\"../../ace-internal\").Ace.Delta } Delta\n */\n\n/**\n * @this {IFolding}\n * @type {IFolding}\n */\nfunction Folding() {\n    /**\n     * Looks up a fold at a given row/column. Possible values for side:\n     *   -1: ignore a fold if fold.start = row/column\n     *   +1: ignore a fold if fold.end = row/column\n     * @param {number} row\n     * @param {number} column\n     * @param {number} [side]\n     * @return {Fold}\n     **/\n    this.getFoldAt = function(row, column, side) {\n        var foldLine = this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n\n        var folds = foldLine.folds;\n        for (var i = 0; i < folds.length; i++) {\n            var range = folds[i].range;\n            if (range.contains(row, column)) {\n                if (side == 1 && range.isEnd(row, column) && !range.isEmpty()) {\n                    continue;\n                } else if (side == -1 && range.isStart(row, column) && !range.isEmpty()) {\n                    continue;\n                }\n                return folds[i];\n            }\n        }\n    };\n\n    /**\n     * Returns all folds in the given range. Note, that this will return folds\n     * @param {Range| Delta} range\n     * @returns {Fold[]}\n     **/\n    this.getFoldsInRange = function(range) {\n        var start = range.start;\n        var end = range.end;\n        var foldLines = this.$foldData;\n        var foundFolds = [];\n\n        start.column += 1;\n        end.column -= 1;\n\n        for (var i = 0; i < foldLines.length; i++) {\n            var cmp = foldLines[i].range.compareRange(range);\n            if (cmp == 2) {\n                // Range is before foldLine. No intersection. This means,\n                // there might be other foldLines that intersect.\n                continue;\n            }\n            else if (cmp == -2) {\n                // Range is after foldLine. There can't be any other foldLines then,\n                // so let's give up.\n                break;\n            }\n\n            var folds = foldLines[i].folds;\n            for (var j = 0; j < folds.length; j++) {\n                var fold = folds[j];\n                cmp = fold.range.compareRange(range);\n                if (cmp == -2) {\n                    break;\n                } else if (cmp == 2) {\n                    continue;\n                } else\n                // WTF-state: Can happen due to -1/+1 to start/end column.\n                if (cmp == 42) {\n                    break;\n                }\n                foundFolds.push(fold);\n            }\n        }\n        start.column -= 1;\n        end.column += 1;\n\n        return foundFolds;\n    };\n\n    /**\n     * \n     * @param {Range[]|Range}ranges\n     * @returns {Fold[]}\n     */\n    this.getFoldsInRangeList = function(ranges) {\n        if (Array.isArray(ranges)) {\n            /**@type {Fold[]} */\n            var folds = [];\n            ranges.forEach(function(range) {\n                folds = folds.concat(this.getFoldsInRange(range));\n            }, this);\n        } else {\n            var folds = this.getFoldsInRange(ranges);\n        }\n        return folds;\n    };\n    \n    /**\n     * Returns all folds in the document\n     * @returns {Fold[]}\n     */\n    this.getAllFolds = function() {\n        var folds = [];\n        var foldLines = this.$foldData;\n        \n        for (var i = 0; i < foldLines.length; i++)\n            for (var j = 0; j < foldLines[i].folds.length; j++)\n                folds.push(foldLines[i].folds[j]);\n\n        return folds;\n    };\n\n    /**\n     * Returns the string between folds at the given position.\n     * E.g.\n     *  foo<fold>b|ar<fold>wolrd -> \"bar\"\n     *  foo<fold>bar<fold>wol|rd -> \"world\"\n     *  foo<fold>bar<fo|ld>wolrd -> <null>\n     *\n     * where | means the position of row/column\n     *\n     * The trim option determs if the return string should be trimed according\n     * to the \"side\" passed with the trim value:\n     *\n     * E.g.\n     *  foo<fold>b|ar<fold>wolrd -trim=-1> \"b\"\n     *  foo<fold>bar<fold>wol|rd -trim=+1> \"rld\"\n     *  fo|o<fold>bar<fold>wolrd -trim=00> \"foo\"\n     *  @param {number} row\n     *  @param {number} column\n     *  @param {number} [trim]\n     *  @param {FoldLine} [foldLine]\n     *  @returns {string | null}\n     */\n    this.getFoldStringAt = function(row, column, trim, foldLine) {\n        foldLine = foldLine || this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n\n        var lastFold = {\n            end: { column: 0 }\n        };\n        // TODO: Refactor to use getNextFoldTo function.\n        var str, fold;\n        for (var i = 0; i < foldLine.folds.length; i++) {\n            fold = foldLine.folds[i];\n            var cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                str = this\n                    .getLine(fold.start.row)\n                    .substring(lastFold.end.column, fold.start.column);\n                break;\n            }\n            else if (cmp === 0) {\n                return null;\n            }\n            lastFold = fold;\n        }\n        if (!str)\n            str = this.getLine(fold.start.row).substring(lastFold.end.column);\n\n        if (trim == -1)\n            return str.substring(0, column - lastFold.end.column);\n        else if (trim == 1)\n            return str.substring(column - lastFold.end.column);\n        else\n            return str;\n    };\n\n    /**\n     * \n     * @param {number} docRow\n     * @param {FoldLine} [startFoldLine]\n     * @returns {null|FoldLine}\n     */\n    this.getFoldLine = function(docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {\n                return foldLine;\n            } else if (foldLine.end.row > docRow) {\n                return null;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * Returns the fold which starts after or contains docRow\n     * @param {number} docRow\n     * @param {FoldLine} [startFoldLine]\n     * @returns {null|FoldLine}\n     */\n    this.getNextFoldLine = function(docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.end.row >= docRow) {\n                return foldLine;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * \n     * @param {number} first\n     * @param {number} last\n     * @return {number}\n     */\n    this.getFoldedRowCount = function(first, last) {\n        var foldData = this.$foldData, rowCount = last-first+1;\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i],\n                end = foldLine.end.row,\n                start = foldLine.start.row;\n            if (end >= last) {\n                if (start < last) {\n                    if (start >= first)\n                        rowCount -= last-start;\n                    else\n                        rowCount = 0; // in one fold\n                }\n                break;\n            } else if (end >= first){\n                if (start >= first) // fold inside range\n                    rowCount -=  end-start;\n                else\n                    rowCount -=  end-first+1;\n            }\n        }\n        return rowCount;\n    };\n\n    /**\n     * \n     * @param {FoldLine}foldLine\n     * @return {FoldLine}\n     */\n    this.$addFoldLine = function(foldLine) {\n        this.$foldData.push(foldLine);\n        this.$foldData.sort(function(a, b) {\n            return a.start.row - b.start.row;\n        });\n        return foldLine;\n    };\n\n    /**\n     * Adds a new fold.\n     *\n     * @param {Fold|string} placeholder\n     * @param {Range} [range]\n     * @returns {Fold}\n     *      The new created Fold object or an existing fold object in case the\n     *      passed in range fits an existing fold exactly.\n     * @this {IFolding}\n     */\n    this.addFold = function(placeholder, range) {\n        var foldData = this.$foldData;\n        var added = false;\n        /**@type {Fold}*/\n        var fold;\n        \n        if (placeholder instanceof Fold)\n            fold = placeholder;\n        else {\n            fold = new Fold(range, placeholder);\n            // @ts-ignore\n            fold.collapseChildren = range.collapseChildren;\n        }\n        this.$clipRangeToDocument(fold.range);\n\n        var startRow = fold.start.row;\n        var startColumn = fold.start.column;\n        var endRow = fold.end.row;\n        var endColumn = fold.end.column;\n\n        var startFold = this.getFoldAt(startRow, startColumn, 1);\n        var endFold = this.getFoldAt(endRow, endColumn, -1);\n        if (startFold && endFold == startFold)\n            return startFold.addSubFold(fold);\n\n        if (startFold && !startFold.range.isStart(startRow, startColumn))\n            this.removeFold(startFold);\n        \n        if (endFold && !endFold.range.isEnd(endRow, endColumn))\n            this.removeFold(endFold);\n        \n        // Check if there are folds in the range we create the new fold for.\n        var folds = this.getFoldsInRange(fold.range);\n        if (folds.length > 0) {\n            // Remove the folds from fold data.\n            this.removeFolds(folds);\n            // Add the removed folds as subfolds on the new fold.\n            if (!fold.collapseChildren) {\n                folds.forEach(function(subFold) {\n                    fold.addSubFold(subFold);\n                });\n            }\n        }\n\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (endRow == foldLine.start.row) {\n                foldLine.addFold(fold);\n                added = true;\n                break;\n            } else if (startRow == foldLine.end.row) {\n                foldLine.addFold(fold);\n                added = true;\n                if (!fold.sameRow) {\n                    // Check if we might have to merge two FoldLines.\n                    var foldLineNext = foldData[i + 1];\n                    if (foldLineNext && foldLineNext.start.row == endRow) {\n                        // We need to merge!\n                        foldLine.merge(foldLineNext);\n                        break;\n                    }\n                }\n                break;\n            } else if (endRow <= foldLine.start.row) {\n                break;\n            }\n        }\n\n        if (!added)\n            foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));\n\n        if (this.$useWrapMode)\n            this.$updateWrapData(foldLine.start.row, foldLine.start.row);\n        else\n            this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);\n\n        // Notify that fold data has changed.\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"add\" });\n\n        return fold;\n    };\n\n    /**\n     * @param {Fold[]} folds\n     */\n    this.addFolds = function(folds) {\n        folds.forEach(function(fold) {\n            this.addFold(fold);\n        }, this);\n    };\n\n    /**\n     * \n     * @param {Fold} fold\n     */\n    this.removeFold = function(fold) {\n        var foldLine = fold.foldLine;\n        var startRow = foldLine.start.row;\n        var endRow = foldLine.end.row;\n\n        var foldLines = this.$foldData;\n        var folds = foldLine.folds;\n        // Simple case where there is only one fold in the FoldLine such that\n        // the entire fold line can get removed directly.\n        if (folds.length == 1) {\n            foldLines.splice(foldLines.indexOf(foldLine), 1);\n        } else\n        // If the fold is the last fold of the foldLine, just remove it.\n        if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {\n            folds.pop();\n            foldLine.end.row = folds[folds.length - 1].end.row;\n            foldLine.end.column = folds[folds.length - 1].end.column;\n        } else\n        // If the fold is the first fold of the foldLine, just remove it.\n        if (foldLine.range.isStart(fold.start.row, fold.start.column)) {\n            folds.shift();\n            foldLine.start.row = folds[0].start.row;\n            foldLine.start.column = folds[0].start.column;\n        } else\n        // We know there are more then 2 folds and the fold is not at the edge.\n        // This means, the fold is somewhere in between.\n        //\n        // If the fold is in one row, we just can remove it.\n        if (fold.sameRow) {\n            folds.splice(folds.indexOf(fold), 1);\n        } else\n        // The fold goes over more then one row. This means remvoing this fold\n        // will cause the fold line to get splitted up. newFoldLine is the second part\n        {\n            var newFoldLine = foldLine.split(fold.start.row, fold.start.column);\n            folds = newFoldLine.folds;\n            folds.shift();\n            newFoldLine.start.row = folds[0].start.row;\n            newFoldLine.start.column = folds[0].start.column;\n        }\n\n        if (!this.$updating) {\n            if (this.$useWrapMode)\n                this.$updateWrapData(startRow, endRow);\n            else\n                this.$updateRowLengthCache(startRow, endRow);\n        }\n        \n        // Notify that fold data has changed.\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"remove\" });\n    };\n\n    /**\n     * \n     * @param {Fold[]} folds\n     */\n    this.removeFolds = function(folds) {\n        // We need to clone the folds array passed in as it might be the folds\n        // array of a fold line and as we call this.removeFold(fold), folds\n        // are removed from folds and changes the current index.\n        var cloneFolds = [];\n        for (var i = 0; i < folds.length; i++) {\n            cloneFolds.push(folds[i]);\n        }\n\n        cloneFolds.forEach(function(fold) {\n            this.removeFold(fold);\n        }, this);\n        this.$modified = true;\n    };\n\n    /**\n     * @param {Fold} fold\n     */\n    this.expandFold = function(fold) {\n        this.removeFold(fold);\n        fold.subFolds.forEach(function(subFold) {\n            fold.restoreRange(subFold);\n            this.addFold(subFold);\n        }, this);\n        if (fold.collapseChildren > 0) {\n            this.foldAll(fold.start.row+1, fold.end.row, fold.collapseChildren-1);\n        }\n        fold.subFolds = [];\n    };\n\n    /**\n     * @param {Fold[]}folds\n     */\n    this.expandFolds = function(folds) {\n        folds.forEach(function(fold) {\n            this.expandFold(fold);\n        }, this);\n    };\n\n    /**\n     * \n     * @param {number|null|import(\"../../ace-internal\").Ace.Point|Range|Range[]} [location]\n     * @param {boolean} [expandInner]\n     * @return {Fold[]| undefined}\n     */\n    this.unfold = function(location, expandInner) {\n        var range, folds;\n        if (location == null) {\n            range = new Range(0, 0, this.getLength(), 0);\n            if (expandInner == null) expandInner = true;\n        } else if (typeof location == \"number\") {\n            range = new Range(location, 0, location, this.getLine(location).length);\n        } else if (\"row\" in location) {\n            range = Range.fromPoints(location, location);\n        } else if (Array.isArray(location)) {\n            folds = [];\n            location.forEach(function(range) {\n                folds = folds.concat(this.unfold(range));\n            }, this);\n            return folds;\n        } else {\n            range = location;\n        }\n        \n        folds = this.getFoldsInRangeList(range);\n        var outermostFolds = folds;\n        // if range itself is in a fold, expand that fold instead of removing, \n        // to not accidentally remove sibling folds\n        while (\n            folds.length == 1\n            && Range.comparePoints(folds[0].start, range.start) < 0 \n            && Range.comparePoints(folds[0].end, range.end) > 0\n        ) {\n            this.expandFolds(folds);\n            folds = this.getFoldsInRangeList(range);\n        }\n        \n        if (expandInner != false) {\n            this.removeFolds(folds);\n        } else {\n            this.expandFolds(folds);\n        }\n        if (outermostFolds.length)\n            return outermostFolds;\n    };\n\n    /**\n     * Checks if a given documentRow is folded. This is true if there are some\n     * folded parts such that some parts of the line is still visible.\n     * @param {number} docRow\n     * @param {FoldLine} [startFoldRow]\n     * @returns {boolean}\n     **/\n    this.isRowFolded = function(docRow, startFoldRow) {\n        return !!this.getFoldLine(docRow, startFoldRow);\n    };\n\n    /**\n     * \n     * @param {number} docRow\n     * @param {FoldLine} [startFoldRow]\n     * @return {number}\n     */\n    this.getRowFoldEnd = function(docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.end.row : docRow;\n    };\n\n    /**\n     * \n     * @param {number} docRow\n     * @param {FoldLine} [startFoldRow]\n     * @returns {number}\n     */\n    this.getRowFoldStart = function(docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.start.row : docRow;\n    };\n\n    /**\n     * \n     * @param {FoldLine} foldLine\n     * @param {number | null} [endRow]\n     * @param {number | null} [endColumn]\n     * @param {number | null} [startRow]\n     * @param {number | null} [startColumn]\n     * @return {string}\n     */\n    this.getFoldDisplayLine = function(foldLine, endRow, endColumn, startRow, startColumn) {\n        if (startRow == null)\n            startRow = foldLine.start.row;\n        if (startColumn == null)\n            startColumn = 0;\n        if (endRow == null)\n            endRow = foldLine.end.row;\n        if (endColumn == null)\n            endColumn = this.getLine(endRow).length;\n        \n\n        // Build the textline using the FoldLine walker.\n        var doc = this.doc;\n        var textLine = \"\";\n\n        foldLine.walk(function(placeholder, row, column, lastColumn) {\n            if (row < startRow)\n                return;\n            if (row == startRow) {\n                if (column < startColumn)\n                    return;\n                lastColumn = Math.max(startColumn, lastColumn);\n            }\n\n            if (placeholder != null) {\n                textLine += placeholder;\n            } else {\n                textLine += doc.getLine(row).substring(lastColumn, column);\n            }\n        }, endRow, endColumn);\n        return textLine;\n    };\n\n    /**\n     * \n     * @param {number} row\n     * @param {number | null} endColumn\n     * @param {number | null} startRow\n     * @param {number | null} startColumn\n     * @return {string}\n     */\n    this.getDisplayLine = function(row, endColumn, startRow, startColumn) {\n        var foldLine = this.getFoldLine(row);\n\n        if (!foldLine) {\n            var line;\n            line = this.doc.getLine(row);\n            return line.substring(startColumn || 0, endColumn || line.length);\n        } else {\n            return this.getFoldDisplayLine(\n                foldLine, row, endColumn, startRow, startColumn);\n        }\n    };\n\n    /**\n     * @return {FoldLine[]}\n     */\n    this.$cloneFoldData = function() {\n        var fd = [];\n        fd = this.$foldData.map(function(foldLine) {\n            var folds = foldLine.folds.map(function(fold) {\n                return fold.clone();\n            });\n            return new FoldLine(fd, folds);\n        });\n\n        return fd;\n    };\n\n    /**\n     * @param {boolean} [tryToUnfold]\n     */\n    this.toggleFold = function(tryToUnfold) {\n        var selection = this.selection;\n        var range = selection.getRange();\n        var fold;\n        var bracketPos;\n\n        if (range.isEmpty()) {\n            var cursor = range.start;\n            fold = this.getFoldAt(cursor.row, cursor.column);\n\n            if (fold) {\n                this.expandFold(fold);\n                return;\n            } else if (bracketPos = this.findMatchingBracket(cursor)) {\n                if (range.comparePoint(bracketPos) == 1) {\n                    range.end = bracketPos;\n                } else {\n                    range.start = bracketPos;\n                    range.start.column++;\n                    range.end.column--;\n                }\n            } else if (bracketPos = this.findMatchingBracket({row: cursor.row, column: cursor.column + 1})) {\n                if (range.comparePoint(bracketPos) == 1)\n                    range.end = bracketPos;\n                else\n                    range.start = bracketPos;\n\n                range.start.column++;\n            } else {\n                range = this.getCommentFoldRange(cursor.row, cursor.column) || range;\n            }\n        } else {\n            var folds = this.getFoldsInRange(range);\n            if (tryToUnfold && folds.length) {\n                this.expandFolds(folds);\n                return;\n            } else if (folds.length == 1 ) {\n                fold = folds[0];\n            }\n        }\n\n        if (!fold)\n            fold = this.getFoldAt(range.start.row, range.start.column);\n\n        if (fold && fold.range.toString() == range.toString()) {\n            this.expandFold(fold);\n            return;\n        }\n\n        var placeholder = \"...\";\n        if (!range.isMultiLine()) {\n            placeholder = this.getTextRange(range);\n            if (placeholder.length < 4)\n                return;\n            placeholder = placeholder.trim().substring(0, 2) + \"..\";\n        }\n\n        this.addFold(placeholder, range);\n    };\n\n    /**\n     * \n     * @param {number} row\n     * @param {number} column\n     * @param {number} [dir]\n     * @return {Range | undefined}\n     */\n    this.getCommentFoldRange = function(row, column, dir) {\n        var iterator = new TokenIterator(this, row, column);\n        var token = iterator.getCurrentToken();\n        var type = token && token.type;\n        if (token && /^comment|string/.test(type)) {\n            type = type.match(/comment|string/)[0];\n            if (type == \"comment\")\n                type += \"|doc-start|\\\\.doc\";\n            var re = new RegExp(type);\n            var range = new Range();\n            if (dir != 1) {\n                do {\n                    token = iterator.stepBackward();\n                } while (token && re.test(token.type));\n                token = iterator.stepForward();\n            }\n            \n            range.start.row = iterator.getCurrentTokenRow();\n            range.start.column = iterator.getCurrentTokenColumn() + token.value.length;\n\n            iterator = new TokenIterator(this, row, column);\n            var initState = this.getState(iterator.$row);\n            \n            if (dir != -1) {\n                var lastRow = -1;\n                do {\n                    token = iterator.stepForward();\n                    if (lastRow == -1) {\n                        var state = this.getState(iterator.$row);\n                        if (initState.toString() !== state.toString())\n                            lastRow = iterator.$row;\n                    } else if (iterator.$row > lastRow) {\n                        break;\n                    }\n                } while (token && re.test(token.type));\n                token = iterator.stepBackward();\n            } else\n                token = iterator.getCurrentToken();\n\n            range.end.row = iterator.getCurrentTokenRow();\n            range.end.column = iterator.getCurrentTokenColumn();\n            return range;\n        }\n    };\n\n    /**\n     * \n     * @param {number | null} [startRow]\n     * @param {number | null} [endRow]\n     * @param {number | null} [depth]\n     * @param {Function} [test]\n     */\n    this.foldAll = function(startRow, endRow, depth, test) {\n        if (depth == undefined)\n            depth = 100000; // JSON.stringify doesn't hanle Infinity\n        var foldWidgets = this.foldWidgets;\n        if (!foldWidgets)\n            return; // mode doesn't support folding\n        endRow = endRow || this.getLength();\n        startRow = startRow || 0;\n        for (var row = startRow; row < endRow; row++) {\n            if (foldWidgets[row] == null)\n                foldWidgets[row] = this.getFoldWidget(row);\n            if (foldWidgets[row] != \"start\")\n                continue;\n            \n            if (test && !test(row)) continue;\n\n            var range = this.getFoldWidgetRange(row);\n            if (range && range.isMultiLine()\n                && range.end.row <= endRow\n                && range.start.row >= startRow\n            ) {\n                row = range.end.row;\n                range.collapseChildren = depth;\n                // addFold can change the range\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n\n    /**\n     * \n     * @param {number} level\n     */\n    this.foldToLevel = function(level) {\n        this.foldAll();\n        while (level-- > 0)\n            this.unfold(null, false);\n    };\n\n    /**\n     *\n     */\n    this.foldAllComments = function() {\n        var session = this;\n        this.foldAll(null, null, null, function(row) {\n            var tokens = session.getTokens(row);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                if (token.type == \"text\" && /^\\s+$/.test(token.value))\n                    continue;\n                if (/comment/.test(token.type))\n                    return true;\n                return false;\n            }\n        });\n    };\n    \n    // structured folding\n    this.$foldStyles = {\n        \"manual\": 1,\n        \"markbegin\": 1,\n        \"markbeginend\": 1\n    };\n    this.$foldStyle = \"markbegin\";\n    \n    /**\n     * @param {string} style\n     */\n    this.setFoldStyle = function(style) {\n        if (!this.$foldStyles[style])\n            throw new Error(\"invalid fold style: \" + style + \"[\" + Object.keys(this.$foldStyles).join(\", \") + \"]\");\n        \n        if (this.$foldStyle == style)\n            return;\n\n        this.$foldStyle = style;\n        \n        if (style == \"manual\")\n            this.unfold();\n        \n        // reset folding\n        var mode = this.$foldMode;\n        this.$setFolding(null);\n        this.$setFolding(mode);\n    };\n\n    /**\n     * @param {import(\"../../ace-internal\").Ace.FoldMode} foldMode\n     */\n    this.$setFolding = function(foldMode) {\n        if (this.$foldMode == foldMode)\n            return;\n\n\n        this.$foldMode = foldMode;\n        \n        this.off('change', this.$updateFoldWidgets);\n        this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n        this._signal(\"changeAnnotation\");\n        \n        if (!foldMode || this.$foldStyle == \"manual\") {\n            this.foldWidgets = null;\n            return;\n        }\n        \n        this.foldWidgets = [];\n        this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);\n        this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);\n        \n        this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);\n        this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);\n        this.on('change', this.$updateFoldWidgets);\n        this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n    };\n    /**\n     * @param {number} row\n     * @param {boolean} [ignoreCurrent]\n     * @return {{range?: Range, firstRange?: Range}}\n     */\n    this.getParentFoldRangeData = function (row, ignoreCurrent) {\n        var fw = this.foldWidgets;\n        if (!fw || (ignoreCurrent && fw[row]))\n            return {};\n\n        var i = row - 1, firstRange;\n        while (i >= 0) {\n            var c = fw[i];\n            if (c == null)\n                c = fw[i] = this.getFoldWidget(i);\n\n            if (c == \"start\") {\n                var range = this.getFoldWidgetRange(i);\n                if (!firstRange)\n                    firstRange = range;\n                if (range && range.end.row >= row)\n                    break;\n            }\n            i--;\n        }\n\n        return {\n            range: i !== -1 && range,\n            firstRange: firstRange\n        };\n    };\n\n    /**\n     * \n     * @param {number} row\n     * @param {any} e\n     */\n    this.onFoldWidgetClick = function(row, e) {\n        if (e instanceof MouseEvent)\n            e = e.domEvent;\n\n        var options = {\n            children: e.shiftKey,\n            all: e.ctrlKey || e.metaKey,\n            siblings: e.altKey\n        };\n        \n        var range = this.$toggleFoldWidget(row, options);\n        if (!range) {\n            var el = (e.target || e.srcElement);\n            if (el && /ace_fold-widget/.test(el.className))\n                el.className += \" ace_invalid\";\n        }\n    };\n\n    /**\n     * \n     * @param {number} row\n     * @param options\n     * @return {Fold|*}\n     */\n    this.$toggleFoldWidget = function(row, options) {\n        if (!this.getFoldWidget)\n            return;\n        var type = this.getFoldWidget(row);\n        var line = this.getLine(row);\n\n        var dir = type === \"end\" ? -1 : 1;\n        var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);\n\n        if (fold) {\n            if (options.children || options.all)\n                this.removeFold(fold);\n            else\n                this.expandFold(fold);\n            return fold;\n        }\n\n        var range = this.getFoldWidgetRange(row, true);\n        // sometimes singleline folds can be missed by the code above\n        if (range && !range.isMultiLine()) {\n            fold = this.getFoldAt(range.start.row, range.start.column, 1);\n            if (fold && range.isEqual(fold.range)) {\n                this.removeFold(fold);\n                return fold;\n            }\n        }\n        \n        if (options.siblings) {\n            var data = this.getParentFoldRangeData(row);\n            if (data.range) {\n                var startRow = data.range.start.row + 1;\n                var endRow = data.range.end.row;\n            }\n            this.foldAll(startRow, endRow, options.all ? 10000 : 0);\n        } else if (options.children) {\n            endRow = range ? range.end.row : this.getLength();\n            this.foldAll(row + 1, endRow, options.all ? 10000 : 0);\n        } else if (range) {\n            if (options.all) \n                range.collapseChildren = 10000;\n            this.addFold(\"...\", range);\n        }\n        \n        return range;\n    };\n    \n    /**\n     * \n     * @param {boolean} [toggleParent]\n     */\n    this.toggleFoldWidget = function(toggleParent) {\n        var row = this.selection.getCursor().row;\n        row = this.getRowFoldStart(row);\n        var range = this.$toggleFoldWidget(row, {});\n        \n        if (range)\n            return;\n        // handle toggleParent\n        var data = this.getParentFoldRangeData(row, true);\n        range = data.range || data.firstRange;\n        \n        if (range) {\n            row = range.start.row;\n            var fold = this.getFoldAt(row, this.getLine(row).length, 1);\n\n            if (fold) {\n                this.removeFold(fold);\n            } else {\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n\n    /**\n     * @param {Delta} delta\n     */\n    this.updateFoldWidgets = function(delta) {\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n\n        if (len === 0) {\n            this.foldWidgets[firstRow] = null;\n        } else if (delta.action == 'remove') {\n            this.foldWidgets.splice(firstRow, len + 1, null);\n        } else {\n            var args = Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.foldWidgets.splice.apply(this.foldWidgets, args);\n        }\n    };\n    /**\n     * @param e\n     */\n    this.tokenizerUpdateFoldWidgets = function(e) {\n        var rows = e.data;\n        if (rows.first != rows.last) {\n            if (this.foldWidgets.length > rows.first)\n                this.foldWidgets.splice(rows.first, this.foldWidgets.length);\n        }\n    };\n}\n\nexports.Folding = Folding;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2VkaXRfc2Vzc2lvbi9mb2xkaW5nLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ2E7O0FBRWIsWUFBWSxtRkFBeUI7QUFDckMsZUFBZSwwR0FBK0I7QUFDOUMsV0FBVyw0RkFBc0I7QUFDakMsb0JBQW9CLDZHQUEwQztBQUM5RCxpQkFBaUIsZ0hBQTBDOztBQUUzRDtBQUNBLGFBQWEsa0ZBQWtGO0FBQy9GLGFBQWEseUNBQXlDO0FBQ3REOztBQUVBO0FBQ0EsVUFBVTtBQUNWLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QixrQkFBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0IsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QixzQkFBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsY0FBYztBQUM3QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFFBQVE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5Qyw0QkFBNEIsK0JBQStCO0FBQzNEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsVUFBVTtBQUMxQixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkJBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsVUFBVTtBQUN6QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscUJBQXFCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsZUFBZSxPQUFPO0FBQ3RCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEtBQUs7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUEsd0JBQXdCLHFCQUFxQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUNBQXFDLDJCQUEyQjs7QUFFaEU7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxNQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw4QkFBOEI7QUFDbkU7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsZUFBZSxNQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGtFQUFrRTtBQUNqRixlQUFlLFNBQVM7QUFDeEIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsVUFBVTtBQUN6QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFVBQVU7QUFDekIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QixlQUFlLGVBQWU7QUFDOUIsZUFBZSxlQUFlO0FBQzlCLGVBQWUsZUFBZTtBQUM5QixlQUFlLGVBQWU7QUFDOUIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLGVBQWU7QUFDOUIsZUFBZSxlQUFlO0FBQzlCLGVBQWUsZUFBZTtBQUM5QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnREFBZ0QsMkNBQTJDO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxlQUFlO0FBQzlCLGVBQWUsZUFBZTtBQUM5QixlQUFlLGVBQWU7QUFDOUIsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSxpQ0FBaUMsY0FBYztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSwyQ0FBMkM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZUFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2VkaXRfc2Vzc2lvbi9mb2xkaW5nLmpzP2UwM2YiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcblwidXNlIHN0cmljdFwiO1xuXG52YXIgUmFuZ2UgPSByZXF1aXJlKFwiLi4vcmFuZ2VcIikuUmFuZ2U7XG52YXIgRm9sZExpbmUgPSByZXF1aXJlKFwiLi9mb2xkX2xpbmVcIikuRm9sZExpbmU7XG52YXIgRm9sZCA9IHJlcXVpcmUoXCIuL2ZvbGRcIikuRm9sZDtcbnZhciBUb2tlbkl0ZXJhdG9yID0gcmVxdWlyZShcIi4uL3Rva2VuX2l0ZXJhdG9yXCIpLlRva2VuSXRlcmF0b3I7XG52YXIgTW91c2VFdmVudCA9IHJlcXVpcmUoXCIuLi9tb3VzZS9tb3VzZV9ldmVudFwiKS5Nb3VzZUV2ZW50O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9lZGl0X3Nlc3Npb25cIikuRWRpdFNlc3Npb24gJiBpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLkZvbGRpbmd9IElGb2xkaW5nXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5EZWx0YSB9IERlbHRhXG4gKi9cblxuLyoqXG4gKiBAdGhpcyB7SUZvbGRpbmd9XG4gKiBAdHlwZSB7SUZvbGRpbmd9XG4gKi9cbmZ1bmN0aW9uIEZvbGRpbmcoKSB7XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBmb2xkIGF0IGEgZ2l2ZW4gcm93L2NvbHVtbi4gUG9zc2libGUgdmFsdWVzIGZvciBzaWRlOlxuICAgICAqICAgLTE6IGlnbm9yZSBhIGZvbGQgaWYgZm9sZC5zdGFydCA9IHJvdy9jb2x1bW5cbiAgICAgKiAgICsxOiBpZ25vcmUgYSBmb2xkIGlmIGZvbGQuZW5kID0gcm93L2NvbHVtblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29sdW1uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzaWRlXVxuICAgICAqIEByZXR1cm4ge0ZvbGR9XG4gICAgICoqL1xuICAgIHRoaXMuZ2V0Rm9sZEF0ID0gZnVuY3Rpb24ocm93LCBjb2x1bW4sIHNpZGUpIHtcbiAgICAgICAgdmFyIGZvbGRMaW5lID0gdGhpcy5nZXRGb2xkTGluZShyb3cpO1xuICAgICAgICBpZiAoIWZvbGRMaW5lKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgdmFyIGZvbGRzID0gZm9sZExpbmUuZm9sZHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9sZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IGZvbGRzW2ldLnJhbmdlO1xuICAgICAgICAgICAgaWYgKHJhbmdlLmNvbnRhaW5zKHJvdywgY29sdW1uKSkge1xuICAgICAgICAgICAgICAgIGlmIChzaWRlID09IDEgJiYgcmFuZ2UuaXNFbmQocm93LCBjb2x1bW4pICYmICFyYW5nZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaWRlID09IC0xICYmIHJhbmdlLmlzU3RhcnQocm93LCBjb2x1bW4pICYmICFyYW5nZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmb2xkc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBmb2xkcyBpbiB0aGUgZ2l2ZW4gcmFuZ2UuIE5vdGUsIHRoYXQgdGhpcyB3aWxsIHJldHVybiBmb2xkc1xuICAgICAqIEBwYXJhbSB7UmFuZ2V8IERlbHRhfSByYW5nZVxuICAgICAqIEByZXR1cm5zIHtGb2xkW119XG4gICAgICoqL1xuICAgIHRoaXMuZ2V0Rm9sZHNJblJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gcmFuZ2Uuc3RhcnQ7XG4gICAgICAgIHZhciBlbmQgPSByYW5nZS5lbmQ7XG4gICAgICAgIHZhciBmb2xkTGluZXMgPSB0aGlzLiRmb2xkRGF0YTtcbiAgICAgICAgdmFyIGZvdW5kRm9sZHMgPSBbXTtcblxuICAgICAgICBzdGFydC5jb2x1bW4gKz0gMTtcbiAgICAgICAgZW5kLmNvbHVtbiAtPSAxO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9sZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY21wID0gZm9sZExpbmVzW2ldLnJhbmdlLmNvbXBhcmVSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICBpZiAoY21wID09IDIpIHtcbiAgICAgICAgICAgICAgICAvLyBSYW5nZSBpcyBiZWZvcmUgZm9sZExpbmUuIE5vIGludGVyc2VjdGlvbi4gVGhpcyBtZWFucyxcbiAgICAgICAgICAgICAgICAvLyB0aGVyZSBtaWdodCBiZSBvdGhlciBmb2xkTGluZXMgdGhhdCBpbnRlcnNlY3QuXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPT0gLTIpIHtcbiAgICAgICAgICAgICAgICAvLyBSYW5nZSBpcyBhZnRlciBmb2xkTGluZS4gVGhlcmUgY2FuJ3QgYmUgYW55IG90aGVyIGZvbGRMaW5lcyB0aGVuLFxuICAgICAgICAgICAgICAgIC8vIHNvIGxldCdzIGdpdmUgdXAuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBmb2xkcyA9IGZvbGRMaW5lc1tpXS5mb2xkcztcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZm9sZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9sZCA9IGZvbGRzW2pdO1xuICAgICAgICAgICAgICAgIGNtcCA9IGZvbGQucmFuZ2UuY29tcGFyZVJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgICAgICBpZiAoY21wID09IC0yKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY21wID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgLy8gV1RGLXN0YXRlOiBDYW4gaGFwcGVuIGR1ZSB0byAtMS8rMSB0byBzdGFydC9lbmQgY29sdW1uLlxuICAgICAgICAgICAgICAgIGlmIChjbXAgPT0gNDIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvdW5kRm9sZHMucHVzaChmb2xkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGFydC5jb2x1bW4gLT0gMTtcbiAgICAgICAgZW5kLmNvbHVtbiArPSAxO1xuXG4gICAgICAgIHJldHVybiBmb3VuZEZvbGRzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge1JhbmdlW118UmFuZ2V9cmFuZ2VzXG4gICAgICogQHJldHVybnMge0ZvbGRbXX1cbiAgICAgKi9cbiAgICB0aGlzLmdldEZvbGRzSW5SYW5nZUxpc3QgPSBmdW5jdGlvbihyYW5nZXMpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmFuZ2VzKSkge1xuICAgICAgICAgICAgLyoqQHR5cGUge0ZvbGRbXX0gKi9cbiAgICAgICAgICAgIHZhciBmb2xkcyA9IFtdO1xuICAgICAgICAgICAgcmFuZ2VzLmZvckVhY2goZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBmb2xkcyA9IGZvbGRzLmNvbmNhdCh0aGlzLmdldEZvbGRzSW5SYW5nZShyYW5nZSkpO1xuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZm9sZHMgPSB0aGlzLmdldEZvbGRzSW5SYW5nZShyYW5nZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb2xkcztcbiAgICB9O1xuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIGZvbGRzIGluIHRoZSBkb2N1bWVudFxuICAgICAqIEByZXR1cm5zIHtGb2xkW119XG4gICAgICovXG4gICAgdGhpcy5nZXRBbGxGb2xkcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZm9sZHMgPSBbXTtcbiAgICAgICAgdmFyIGZvbGRMaW5lcyA9IHRoaXMuJGZvbGREYXRhO1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb2xkTGluZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZvbGRMaW5lc1tpXS5mb2xkcy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICBmb2xkcy5wdXNoKGZvbGRMaW5lc1tpXS5mb2xkc1tqXSk7XG5cbiAgICAgICAgcmV0dXJuIGZvbGRzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzdHJpbmcgYmV0d2VlbiBmb2xkcyBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgICogRS5nLlxuICAgICAqICBmb288Zm9sZD5ifGFyPGZvbGQ+d29scmQgLT4gXCJiYXJcIlxuICAgICAqICBmb288Zm9sZD5iYXI8Zm9sZD53b2x8cmQgLT4gXCJ3b3JsZFwiXG4gICAgICogIGZvbzxmb2xkPmJhcjxmb3xsZD53b2xyZCAtPiA8bnVsbD5cbiAgICAgKlxuICAgICAqIHdoZXJlIHwgbWVhbnMgdGhlIHBvc2l0aW9uIG9mIHJvdy9jb2x1bW5cbiAgICAgKlxuICAgICAqIFRoZSB0cmltIG9wdGlvbiBkZXRlcm1zIGlmIHRoZSByZXR1cm4gc3RyaW5nIHNob3VsZCBiZSB0cmltZWQgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIFwic2lkZVwiIHBhc3NlZCB3aXRoIHRoZSB0cmltIHZhbHVlOlxuICAgICAqXG4gICAgICogRS5nLlxuICAgICAqICBmb288Zm9sZD5ifGFyPGZvbGQ+d29scmQgLXRyaW09LTE+IFwiYlwiXG4gICAgICogIGZvbzxmb2xkPmJhcjxmb2xkPndvbHxyZCAtdHJpbT0rMT4gXCJybGRcIlxuICAgICAqICBmb3xvPGZvbGQ+YmFyPGZvbGQ+d29scmQgLXRyaW09MDA+IFwiZm9vXCJcbiAgICAgKiAgQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqICBAcGFyYW0ge251bWJlcn0gY29sdW1uXG4gICAgICogIEBwYXJhbSB7bnVtYmVyfSBbdHJpbV1cbiAgICAgKiAgQHBhcmFtIHtGb2xkTGluZX0gW2ZvbGRMaW5lXVxuICAgICAqICBAcmV0dXJucyB7c3RyaW5nIHwgbnVsbH1cbiAgICAgKi9cbiAgICB0aGlzLmdldEZvbGRTdHJpbmdBdCA9IGZ1bmN0aW9uKHJvdywgY29sdW1uLCB0cmltLCBmb2xkTGluZSkge1xuICAgICAgICBmb2xkTGluZSA9IGZvbGRMaW5lIHx8IHRoaXMuZ2V0Rm9sZExpbmUocm93KTtcbiAgICAgICAgaWYgKCFmb2xkTGluZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgIHZhciBsYXN0Rm9sZCA9IHtcbiAgICAgICAgICAgIGVuZDogeyBjb2x1bW46IDAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBSZWZhY3RvciB0byB1c2UgZ2V0TmV4dEZvbGRUbyBmdW5jdGlvbi5cbiAgICAgICAgdmFyIHN0ciwgZm9sZDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb2xkTGluZS5mb2xkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9sZCA9IGZvbGRMaW5lLmZvbGRzW2ldO1xuICAgICAgICAgICAgdmFyIGNtcCA9IGZvbGQucmFuZ2UuY29tcGFyZUVuZChyb3csIGNvbHVtbik7XG4gICAgICAgICAgICBpZiAoY21wID09IC0xKSB7XG4gICAgICAgICAgICAgICAgc3RyID0gdGhpc1xuICAgICAgICAgICAgICAgICAgICAuZ2V0TGluZShmb2xkLnN0YXJ0LnJvdylcbiAgICAgICAgICAgICAgICAgICAgLnN1YnN0cmluZyhsYXN0Rm9sZC5lbmQuY29sdW1uLCBmb2xkLnN0YXJ0LmNvbHVtbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RGb2xkID0gZm9sZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN0cilcbiAgICAgICAgICAgIHN0ciA9IHRoaXMuZ2V0TGluZShmb2xkLnN0YXJ0LnJvdykuc3Vic3RyaW5nKGxhc3RGb2xkLmVuZC5jb2x1bW4pO1xuXG4gICAgICAgIGlmICh0cmltID09IC0xKVxuICAgICAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHJpbmcoMCwgY29sdW1uIC0gbGFzdEZvbGQuZW5kLmNvbHVtbik7XG4gICAgICAgIGVsc2UgaWYgKHRyaW0gPT0gMSlcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKGNvbHVtbiAtIGxhc3RGb2xkLmVuZC5jb2x1bW4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZG9jUm93XG4gICAgICogQHBhcmFtIHtGb2xkTGluZX0gW3N0YXJ0Rm9sZExpbmVdXG4gICAgICogQHJldHVybnMge251bGx8Rm9sZExpbmV9XG4gICAgICovXG4gICAgdGhpcy5nZXRGb2xkTGluZSA9IGZ1bmN0aW9uKGRvY1Jvdywgc3RhcnRGb2xkTGluZSkge1xuICAgICAgICB2YXIgZm9sZERhdGEgPSB0aGlzLiRmb2xkRGF0YTtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICBpZiAoc3RhcnRGb2xkTGluZSlcbiAgICAgICAgICAgIGkgPSBmb2xkRGF0YS5pbmRleE9mKHN0YXJ0Rm9sZExpbmUpO1xuICAgICAgICBpZiAoaSA9PSAtMSlcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICBmb3IgKGk7IGkgPCBmb2xkRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGZvbGRMaW5lID0gZm9sZERhdGFbaV07XG4gICAgICAgICAgICBpZiAoZm9sZExpbmUuc3RhcnQucm93IDw9IGRvY1JvdyAmJiBmb2xkTGluZS5lbmQucm93ID49IGRvY1Jvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb2xkTGluZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZm9sZExpbmUuZW5kLnJvdyA+IGRvY1Jvdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmb2xkIHdoaWNoIHN0YXJ0cyBhZnRlciBvciBjb250YWlucyBkb2NSb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZG9jUm93XG4gICAgICogQHBhcmFtIHtGb2xkTGluZX0gW3N0YXJ0Rm9sZExpbmVdXG4gICAgICogQHJldHVybnMge251bGx8Rm9sZExpbmV9XG4gICAgICovXG4gICAgdGhpcy5nZXROZXh0Rm9sZExpbmUgPSBmdW5jdGlvbihkb2NSb3csIHN0YXJ0Rm9sZExpbmUpIHtcbiAgICAgICAgdmFyIGZvbGREYXRhID0gdGhpcy4kZm9sZERhdGE7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgaWYgKHN0YXJ0Rm9sZExpbmUpXG4gICAgICAgICAgICBpID0gZm9sZERhdGEuaW5kZXhPZihzdGFydEZvbGRMaW5lKTtcbiAgICAgICAgaWYgKGkgPT0gLTEpXG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgZm9yIChpOyBpIDwgZm9sZERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmb2xkTGluZSA9IGZvbGREYXRhW2ldO1xuICAgICAgICAgICAgaWYgKGZvbGRMaW5lLmVuZC5yb3cgPj0gZG9jUm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvbGRMaW5lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZmlyc3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGFzdFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmdldEZvbGRlZFJvd0NvdW50ID0gZnVuY3Rpb24oZmlyc3QsIGxhc3QpIHtcbiAgICAgICAgdmFyIGZvbGREYXRhID0gdGhpcy4kZm9sZERhdGEsIHJvd0NvdW50ID0gbGFzdC1maXJzdCsxO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvbGREYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZm9sZExpbmUgPSBmb2xkRGF0YVtpXSxcbiAgICAgICAgICAgICAgICBlbmQgPSBmb2xkTGluZS5lbmQucm93LFxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gZm9sZExpbmUuc3RhcnQucm93O1xuICAgICAgICAgICAgaWYgKGVuZCA+PSBsYXN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0IDwgbGFzdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPj0gZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dDb3VudCAtPSBsYXN0LXN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dDb3VudCA9IDA7IC8vIGluIG9uZSBmb2xkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbmQgPj0gZmlyc3Qpe1xuICAgICAgICAgICAgICAgIGlmIChzdGFydCA+PSBmaXJzdCkgLy8gZm9sZCBpbnNpZGUgcmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgcm93Q291bnQgLT0gIGVuZC1zdGFydDtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50IC09ICBlbmQtZmlyc3QrMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm93Q291bnQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7Rm9sZExpbmV9Zm9sZExpbmVcbiAgICAgKiBAcmV0dXJuIHtGb2xkTGluZX1cbiAgICAgKi9cbiAgICB0aGlzLiRhZGRGb2xkTGluZSA9IGZ1bmN0aW9uKGZvbGRMaW5lKSB7XG4gICAgICAgIHRoaXMuJGZvbGREYXRhLnB1c2goZm9sZExpbmUpO1xuICAgICAgICB0aGlzLiRmb2xkRGF0YS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLnN0YXJ0LnJvdyAtIGIuc3RhcnQucm93O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZvbGRMaW5lO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGZvbGQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ZvbGR8c3RyaW5nfSBwbGFjZWhvbGRlclxuICAgICAqIEBwYXJhbSB7UmFuZ2V9IFtyYW5nZV1cbiAgICAgKiBAcmV0dXJucyB7Rm9sZH1cbiAgICAgKiAgICAgIFRoZSBuZXcgY3JlYXRlZCBGb2xkIG9iamVjdCBvciBhbiBleGlzdGluZyBmb2xkIG9iamVjdCBpbiBjYXNlIHRoZVxuICAgICAqICAgICAgcGFzc2VkIGluIHJhbmdlIGZpdHMgYW4gZXhpc3RpbmcgZm9sZCBleGFjdGx5LlxuICAgICAqIEB0aGlzIHtJRm9sZGluZ31cbiAgICAgKi9cbiAgICB0aGlzLmFkZEZvbGQgPSBmdW5jdGlvbihwbGFjZWhvbGRlciwgcmFuZ2UpIHtcbiAgICAgICAgdmFyIGZvbGREYXRhID0gdGhpcy4kZm9sZERhdGE7XG4gICAgICAgIHZhciBhZGRlZCA9IGZhbHNlO1xuICAgICAgICAvKipAdHlwZSB7Rm9sZH0qL1xuICAgICAgICB2YXIgZm9sZDtcbiAgICAgICAgXG4gICAgICAgIGlmIChwbGFjZWhvbGRlciBpbnN0YW5jZW9mIEZvbGQpXG4gICAgICAgICAgICBmb2xkID0gcGxhY2Vob2xkZXI7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9IG5ldyBGb2xkKHJhbmdlLCBwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBmb2xkLmNvbGxhcHNlQ2hpbGRyZW4gPSByYW5nZS5jb2xsYXBzZUNoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGNsaXBSYW5nZVRvRG9jdW1lbnQoZm9sZC5yYW5nZSk7XG5cbiAgICAgICAgdmFyIHN0YXJ0Um93ID0gZm9sZC5zdGFydC5yb3c7XG4gICAgICAgIHZhciBzdGFydENvbHVtbiA9IGZvbGQuc3RhcnQuY29sdW1uO1xuICAgICAgICB2YXIgZW5kUm93ID0gZm9sZC5lbmQucm93O1xuICAgICAgICB2YXIgZW5kQ29sdW1uID0gZm9sZC5lbmQuY29sdW1uO1xuXG4gICAgICAgIHZhciBzdGFydEZvbGQgPSB0aGlzLmdldEZvbGRBdChzdGFydFJvdywgc3RhcnRDb2x1bW4sIDEpO1xuICAgICAgICB2YXIgZW5kRm9sZCA9IHRoaXMuZ2V0Rm9sZEF0KGVuZFJvdywgZW5kQ29sdW1uLCAtMSk7XG4gICAgICAgIGlmIChzdGFydEZvbGQgJiYgZW5kRm9sZCA9PSBzdGFydEZvbGQpXG4gICAgICAgICAgICByZXR1cm4gc3RhcnRGb2xkLmFkZFN1YkZvbGQoZm9sZCk7XG5cbiAgICAgICAgaWYgKHN0YXJ0Rm9sZCAmJiAhc3RhcnRGb2xkLnJhbmdlLmlzU3RhcnQoc3RhcnRSb3csIHN0YXJ0Q29sdW1uKSlcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRm9sZChzdGFydEZvbGQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVuZEZvbGQgJiYgIWVuZEZvbGQucmFuZ2UuaXNFbmQoZW5kUm93LCBlbmRDb2x1bW4pKVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVGb2xkKGVuZEZvbGQpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGZvbGRzIGluIHRoZSByYW5nZSB3ZSBjcmVhdGUgdGhlIG5ldyBmb2xkIGZvci5cbiAgICAgICAgdmFyIGZvbGRzID0gdGhpcy5nZXRGb2xkc0luUmFuZ2UoZm9sZC5yYW5nZSk7XG4gICAgICAgIGlmIChmb2xkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGZvbGRzIGZyb20gZm9sZCBkYXRhLlxuICAgICAgICAgICAgdGhpcy5yZW1vdmVGb2xkcyhmb2xkcyk7XG4gICAgICAgICAgICAvLyBBZGQgdGhlIHJlbW92ZWQgZm9sZHMgYXMgc3ViZm9sZHMgb24gdGhlIG5ldyBmb2xkLlxuICAgICAgICAgICAgaWYgKCFmb2xkLmNvbGxhcHNlQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBmb2xkcy5mb3JFYWNoKGZ1bmN0aW9uKHN1YkZvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9sZC5hZGRTdWJGb2xkKHN1YkZvbGQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb2xkRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGZvbGRMaW5lID0gZm9sZERhdGFbaV07XG4gICAgICAgICAgICBpZiAoZW5kUm93ID09IGZvbGRMaW5lLnN0YXJ0LnJvdykge1xuICAgICAgICAgICAgICAgIGZvbGRMaW5lLmFkZEZvbGQoZm9sZCk7XG4gICAgICAgICAgICAgICAgYWRkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGFydFJvdyA9PSBmb2xkTGluZS5lbmQucm93KSB7XG4gICAgICAgICAgICAgICAgZm9sZExpbmUuYWRkRm9sZChmb2xkKTtcbiAgICAgICAgICAgICAgICBhZGRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFmb2xkLnNhbWVSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgbWlnaHQgaGF2ZSB0byBtZXJnZSB0d28gRm9sZExpbmVzLlxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9sZExpbmVOZXh0ID0gZm9sZERhdGFbaSArIDFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZExpbmVOZXh0ICYmIGZvbGRMaW5lTmV4dC5zdGFydC5yb3cgPT0gZW5kUm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIG1lcmdlIVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZExpbmUubWVyZ2UoZm9sZExpbmVOZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbmRSb3cgPD0gZm9sZExpbmUuc3RhcnQucm93KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFkZGVkKVxuICAgICAgICAgICAgZm9sZExpbmUgPSB0aGlzLiRhZGRGb2xkTGluZShuZXcgRm9sZExpbmUodGhpcy4kZm9sZERhdGEsIGZvbGQpKTtcblxuICAgICAgICBpZiAodGhpcy4kdXNlV3JhcE1vZGUpXG4gICAgICAgICAgICB0aGlzLiR1cGRhdGVXcmFwRGF0YShmb2xkTGluZS5zdGFydC5yb3csIGZvbGRMaW5lLnN0YXJ0LnJvdyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuJHVwZGF0ZVJvd0xlbmd0aENhY2hlKGZvbGRMaW5lLnN0YXJ0LnJvdywgZm9sZExpbmUuc3RhcnQucm93KTtcblxuICAgICAgICAvLyBOb3RpZnkgdGhhdCBmb2xkIGRhdGEgaGFzIGNoYW5nZWQuXG4gICAgICAgIHRoaXMuJG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlRm9sZFwiLCB7IGRhdGE6IGZvbGQsIGFjdGlvbjogXCJhZGRcIiB9KTtcblxuICAgICAgICByZXR1cm4gZm9sZDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtGb2xkW119IGZvbGRzXG4gICAgICovXG4gICAgdGhpcy5hZGRGb2xkcyA9IGZ1bmN0aW9uKGZvbGRzKSB7XG4gICAgICAgIGZvbGRzLmZvckVhY2goZnVuY3Rpb24oZm9sZCkge1xuICAgICAgICAgICAgdGhpcy5hZGRGb2xkKGZvbGQpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtGb2xkfSBmb2xkXG4gICAgICovXG4gICAgdGhpcy5yZW1vdmVGb2xkID0gZnVuY3Rpb24oZm9sZCkge1xuICAgICAgICB2YXIgZm9sZExpbmUgPSBmb2xkLmZvbGRMaW5lO1xuICAgICAgICB2YXIgc3RhcnRSb3cgPSBmb2xkTGluZS5zdGFydC5yb3c7XG4gICAgICAgIHZhciBlbmRSb3cgPSBmb2xkTGluZS5lbmQucm93O1xuXG4gICAgICAgIHZhciBmb2xkTGluZXMgPSB0aGlzLiRmb2xkRGF0YTtcbiAgICAgICAgdmFyIGZvbGRzID0gZm9sZExpbmUuZm9sZHM7XG4gICAgICAgIC8vIFNpbXBsZSBjYXNlIHdoZXJlIHRoZXJlIGlzIG9ubHkgb25lIGZvbGQgaW4gdGhlIEZvbGRMaW5lIHN1Y2ggdGhhdFxuICAgICAgICAvLyB0aGUgZW50aXJlIGZvbGQgbGluZSBjYW4gZ2V0IHJlbW92ZWQgZGlyZWN0bHkuXG4gICAgICAgIGlmIChmb2xkcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgZm9sZExpbmVzLnNwbGljZShmb2xkTGluZXMuaW5kZXhPZihmb2xkTGluZSksIDEpO1xuICAgICAgICB9IGVsc2VcbiAgICAgICAgLy8gSWYgdGhlIGZvbGQgaXMgdGhlIGxhc3QgZm9sZCBvZiB0aGUgZm9sZExpbmUsIGp1c3QgcmVtb3ZlIGl0LlxuICAgICAgICBpZiAoZm9sZExpbmUucmFuZ2UuaXNFbmQoZm9sZC5lbmQucm93LCBmb2xkLmVuZC5jb2x1bW4pKSB7XG4gICAgICAgICAgICBmb2xkcy5wb3AoKTtcbiAgICAgICAgICAgIGZvbGRMaW5lLmVuZC5yb3cgPSBmb2xkc1tmb2xkcy5sZW5ndGggLSAxXS5lbmQucm93O1xuICAgICAgICAgICAgZm9sZExpbmUuZW5kLmNvbHVtbiA9IGZvbGRzW2ZvbGRzLmxlbmd0aCAtIDFdLmVuZC5jb2x1bW47XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAvLyBJZiB0aGUgZm9sZCBpcyB0aGUgZmlyc3QgZm9sZCBvZiB0aGUgZm9sZExpbmUsIGp1c3QgcmVtb3ZlIGl0LlxuICAgICAgICBpZiAoZm9sZExpbmUucmFuZ2UuaXNTdGFydChmb2xkLnN0YXJ0LnJvdywgZm9sZC5zdGFydC5jb2x1bW4pKSB7XG4gICAgICAgICAgICBmb2xkcy5zaGlmdCgpO1xuICAgICAgICAgICAgZm9sZExpbmUuc3RhcnQucm93ID0gZm9sZHNbMF0uc3RhcnQucm93O1xuICAgICAgICAgICAgZm9sZExpbmUuc3RhcnQuY29sdW1uID0gZm9sZHNbMF0uc3RhcnQuY29sdW1uO1xuICAgICAgICB9IGVsc2VcbiAgICAgICAgLy8gV2Uga25vdyB0aGVyZSBhcmUgbW9yZSB0aGVuIDIgZm9sZHMgYW5kIHRoZSBmb2xkIGlzIG5vdCBhdCB0aGUgZWRnZS5cbiAgICAgICAgLy8gVGhpcyBtZWFucywgdGhlIGZvbGQgaXMgc29tZXdoZXJlIGluIGJldHdlZW4uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIElmIHRoZSBmb2xkIGlzIGluIG9uZSByb3csIHdlIGp1c3QgY2FuIHJlbW92ZSBpdC5cbiAgICAgICAgaWYgKGZvbGQuc2FtZVJvdykge1xuICAgICAgICAgICAgZm9sZHMuc3BsaWNlKGZvbGRzLmluZGV4T2YoZm9sZCksIDEpO1xuICAgICAgICB9IGVsc2VcbiAgICAgICAgLy8gVGhlIGZvbGQgZ29lcyBvdmVyIG1vcmUgdGhlbiBvbmUgcm93LiBUaGlzIG1lYW5zIHJlbXZvaW5nIHRoaXMgZm9sZFxuICAgICAgICAvLyB3aWxsIGNhdXNlIHRoZSBmb2xkIGxpbmUgdG8gZ2V0IHNwbGl0dGVkIHVwLiBuZXdGb2xkTGluZSBpcyB0aGUgc2Vjb25kIHBhcnRcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIG5ld0ZvbGRMaW5lID0gZm9sZExpbmUuc3BsaXQoZm9sZC5zdGFydC5yb3csIGZvbGQuc3RhcnQuY29sdW1uKTtcbiAgICAgICAgICAgIGZvbGRzID0gbmV3Rm9sZExpbmUuZm9sZHM7XG4gICAgICAgICAgICBmb2xkcy5zaGlmdCgpO1xuICAgICAgICAgICAgbmV3Rm9sZExpbmUuc3RhcnQucm93ID0gZm9sZHNbMF0uc3RhcnQucm93O1xuICAgICAgICAgICAgbmV3Rm9sZExpbmUuc3RhcnQuY29sdW1uID0gZm9sZHNbMF0uc3RhcnQuY29sdW1uO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLiR1cGRhdGluZykge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHVzZVdyYXBNb2RlKVxuICAgICAgICAgICAgICAgIHRoaXMuJHVwZGF0ZVdyYXBEYXRhKHN0YXJ0Um93LCBlbmRSb3cpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuJHVwZGF0ZVJvd0xlbmd0aENhY2hlKHN0YXJ0Um93LCBlbmRSb3cpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBOb3RpZnkgdGhhdCBmb2xkIGRhdGEgaGFzIGNoYW5nZWQuXG4gICAgICAgIHRoaXMuJG1vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlRm9sZFwiLCB7IGRhdGE6IGZvbGQsIGFjdGlvbjogXCJyZW1vdmVcIiB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtGb2xkW119IGZvbGRzXG4gICAgICovXG4gICAgdGhpcy5yZW1vdmVGb2xkcyA9IGZ1bmN0aW9uKGZvbGRzKSB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gY2xvbmUgdGhlIGZvbGRzIGFycmF5IHBhc3NlZCBpbiBhcyBpdCBtaWdodCBiZSB0aGUgZm9sZHNcbiAgICAgICAgLy8gYXJyYXkgb2YgYSBmb2xkIGxpbmUgYW5kIGFzIHdlIGNhbGwgdGhpcy5yZW1vdmVGb2xkKGZvbGQpLCBmb2xkc1xuICAgICAgICAvLyBhcmUgcmVtb3ZlZCBmcm9tIGZvbGRzIGFuZCBjaGFuZ2VzIHRoZSBjdXJyZW50IGluZGV4LlxuICAgICAgICB2YXIgY2xvbmVGb2xkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjbG9uZUZvbGRzLnB1c2goZm9sZHNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xvbmVGb2xkcy5mb3JFYWNoKGZ1bmN0aW9uKGZvbGQpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRm9sZChmb2xkKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIHRoaXMuJG1vZGlmaWVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtGb2xkfSBmb2xkXG4gICAgICovXG4gICAgdGhpcy5leHBhbmRGb2xkID0gZnVuY3Rpb24oZm9sZCkge1xuICAgICAgICB0aGlzLnJlbW92ZUZvbGQoZm9sZCk7XG4gICAgICAgIGZvbGQuc3ViRm9sZHMuZm9yRWFjaChmdW5jdGlvbihzdWJGb2xkKSB7XG4gICAgICAgICAgICBmb2xkLnJlc3RvcmVSYW5nZShzdWJGb2xkKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRm9sZChzdWJGb2xkKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIGlmIChmb2xkLmNvbGxhcHNlQ2hpbGRyZW4gPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmZvbGRBbGwoZm9sZC5zdGFydC5yb3crMSwgZm9sZC5lbmQucm93LCBmb2xkLmNvbGxhcHNlQ2hpbGRyZW4tMSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9sZC5zdWJGb2xkcyA9IFtdO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0ZvbGRbXX1mb2xkc1xuICAgICAqL1xuICAgIHRoaXMuZXhwYW5kRm9sZHMgPSBmdW5jdGlvbihmb2xkcykge1xuICAgICAgICBmb2xkcy5mb3JFYWNoKGZ1bmN0aW9uKGZvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kRm9sZChmb2xkKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfG51bGx8aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludHxSYW5nZXxSYW5nZVtdfSBbbG9jYXRpb25dXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZXhwYW5kSW5uZXJdXG4gICAgICogQHJldHVybiB7Rm9sZFtdfCB1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy51bmZvbGQgPSBmdW5jdGlvbihsb2NhdGlvbiwgZXhwYW5kSW5uZXIpIHtcbiAgICAgICAgdmFyIHJhbmdlLCBmb2xkcztcbiAgICAgICAgaWYgKGxvY2F0aW9uID09IG51bGwpIHtcbiAgICAgICAgICAgIHJhbmdlID0gbmV3IFJhbmdlKDAsIDAsIHRoaXMuZ2V0TGVuZ3RoKCksIDApO1xuICAgICAgICAgICAgaWYgKGV4cGFuZElubmVyID09IG51bGwpIGV4cGFuZElubmVyID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbG9jYXRpb24gPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgcmFuZ2UgPSBuZXcgUmFuZ2UobG9jYXRpb24sIDAsIGxvY2F0aW9uLCB0aGlzLmdldExpbmUobG9jYXRpb24pLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJyb3dcIiBpbiBsb2NhdGlvbikge1xuICAgICAgICAgICAgcmFuZ2UgPSBSYW5nZS5mcm9tUG9pbnRzKGxvY2F0aW9uLCBsb2NhdGlvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShsb2NhdGlvbikpIHtcbiAgICAgICAgICAgIGZvbGRzID0gW107XG4gICAgICAgICAgICBsb2NhdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgICAgICAgICAgZm9sZHMgPSBmb2xkcy5jb25jYXQodGhpcy51bmZvbGQocmFuZ2UpKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIGZvbGRzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmFuZ2UgPSBsb2NhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZm9sZHMgPSB0aGlzLmdldEZvbGRzSW5SYW5nZUxpc3QocmFuZ2UpO1xuICAgICAgICB2YXIgb3V0ZXJtb3N0Rm9sZHMgPSBmb2xkcztcbiAgICAgICAgLy8gaWYgcmFuZ2UgaXRzZWxmIGlzIGluIGEgZm9sZCwgZXhwYW5kIHRoYXQgZm9sZCBpbnN0ZWFkIG9mIHJlbW92aW5nLCBcbiAgICAgICAgLy8gdG8gbm90IGFjY2lkZW50YWxseSByZW1vdmUgc2libGluZyBmb2xkc1xuICAgICAgICB3aGlsZSAoXG4gICAgICAgICAgICBmb2xkcy5sZW5ndGggPT0gMVxuICAgICAgICAgICAgJiYgUmFuZ2UuY29tcGFyZVBvaW50cyhmb2xkc1swXS5zdGFydCwgcmFuZ2Uuc3RhcnQpIDwgMCBcbiAgICAgICAgICAgICYmIFJhbmdlLmNvbXBhcmVQb2ludHMoZm9sZHNbMF0uZW5kLCByYW5nZS5lbmQpID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kRm9sZHMoZm9sZHMpO1xuICAgICAgICAgICAgZm9sZHMgPSB0aGlzLmdldEZvbGRzSW5SYW5nZUxpc3QocmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhwYW5kSW5uZXIgIT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRm9sZHMoZm9sZHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRGb2xkcyhmb2xkcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dGVybW9zdEZvbGRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBvdXRlcm1vc3RGb2xkcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgZ2l2ZW4gZG9jdW1lbnRSb3cgaXMgZm9sZGVkLiBUaGlzIGlzIHRydWUgaWYgdGhlcmUgYXJlIHNvbWVcbiAgICAgKiBmb2xkZWQgcGFydHMgc3VjaCB0aGF0IHNvbWUgcGFydHMgb2YgdGhlIGxpbmUgaXMgc3RpbGwgdmlzaWJsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZG9jUm93XG4gICAgICogQHBhcmFtIHtGb2xkTGluZX0gW3N0YXJ0Rm9sZFJvd11cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKiovXG4gICAgdGhpcy5pc1Jvd0ZvbGRlZCA9IGZ1bmN0aW9uKGRvY1Jvdywgc3RhcnRGb2xkUm93KSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0Rm9sZExpbmUoZG9jUm93LCBzdGFydEZvbGRSb3cpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZG9jUm93XG4gICAgICogQHBhcmFtIHtGb2xkTGluZX0gW3N0YXJ0Rm9sZFJvd11cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5nZXRSb3dGb2xkRW5kID0gZnVuY3Rpb24oZG9jUm93LCBzdGFydEZvbGRSb3cpIHtcbiAgICAgICAgdmFyIGZvbGRMaW5lID0gdGhpcy5nZXRGb2xkTGluZShkb2NSb3csIHN0YXJ0Rm9sZFJvdyk7XG4gICAgICAgIHJldHVybiBmb2xkTGluZSA/IGZvbGRMaW5lLmVuZC5yb3cgOiBkb2NSb3c7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkb2NSb3dcbiAgICAgKiBAcGFyYW0ge0ZvbGRMaW5lfSBbc3RhcnRGb2xkUm93XVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5nZXRSb3dGb2xkU3RhcnQgPSBmdW5jdGlvbihkb2NSb3csIHN0YXJ0Rm9sZFJvdykge1xuICAgICAgICB2YXIgZm9sZExpbmUgPSB0aGlzLmdldEZvbGRMaW5lKGRvY1Jvdywgc3RhcnRGb2xkUm93KTtcbiAgICAgICAgcmV0dXJuIGZvbGRMaW5lID8gZm9sZExpbmUuc3RhcnQucm93IDogZG9jUm93O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0ZvbGRMaW5lfSBmb2xkTGluZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyIHwgbnVsbH0gW2VuZFJvd11cbiAgICAgKiBAcGFyYW0ge251bWJlciB8IG51bGx9IFtlbmRDb2x1bW5dXG4gICAgICogQHBhcmFtIHtudW1iZXIgfCBudWxsfSBbc3RhcnRSb3ddXG4gICAgICogQHBhcmFtIHtudW1iZXIgfCBudWxsfSBbc3RhcnRDb2x1bW5dXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0Rm9sZERpc3BsYXlMaW5lID0gZnVuY3Rpb24oZm9sZExpbmUsIGVuZFJvdywgZW5kQ29sdW1uLCBzdGFydFJvdywgc3RhcnRDb2x1bW4pIHtcbiAgICAgICAgaWYgKHN0YXJ0Um93ID09IG51bGwpXG4gICAgICAgICAgICBzdGFydFJvdyA9IGZvbGRMaW5lLnN0YXJ0LnJvdztcbiAgICAgICAgaWYgKHN0YXJ0Q29sdW1uID09IG51bGwpXG4gICAgICAgICAgICBzdGFydENvbHVtbiA9IDA7XG4gICAgICAgIGlmIChlbmRSb3cgPT0gbnVsbClcbiAgICAgICAgICAgIGVuZFJvdyA9IGZvbGRMaW5lLmVuZC5yb3c7XG4gICAgICAgIGlmIChlbmRDb2x1bW4gPT0gbnVsbClcbiAgICAgICAgICAgIGVuZENvbHVtbiA9IHRoaXMuZ2V0TGluZShlbmRSb3cpLmxlbmd0aDtcbiAgICAgICAgXG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIHRleHRsaW5lIHVzaW5nIHRoZSBGb2xkTGluZSB3YWxrZXIuXG4gICAgICAgIHZhciBkb2MgPSB0aGlzLmRvYztcbiAgICAgICAgdmFyIHRleHRMaW5lID0gXCJcIjtcblxuICAgICAgICBmb2xkTGluZS53YWxrKGZ1bmN0aW9uKHBsYWNlaG9sZGVyLCByb3csIGNvbHVtbiwgbGFzdENvbHVtbikge1xuICAgICAgICAgICAgaWYgKHJvdyA8IHN0YXJ0Um93KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChyb3cgPT0gc3RhcnRSb3cpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uIDwgc3RhcnRDb2x1bW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBsYXN0Q29sdW1uID0gTWF0aC5tYXgoc3RhcnRDb2x1bW4sIGxhc3RDb2x1bW4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGxhY2Vob2xkZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRleHRMaW5lICs9IHBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0TGluZSArPSBkb2MuZ2V0TGluZShyb3cpLnN1YnN0cmluZyhsYXN0Q29sdW1uLCBjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBlbmRSb3csIGVuZENvbHVtbik7XG4gICAgICAgIHJldHVybiB0ZXh0TGluZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyIHwgbnVsbH0gZW5kQ29sdW1uXG4gICAgICogQHBhcmFtIHtudW1iZXIgfCBudWxsfSBzdGFydFJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyIHwgbnVsbH0gc3RhcnRDb2x1bW5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5nZXREaXNwbGF5TGluZSA9IGZ1bmN0aW9uKHJvdywgZW5kQ29sdW1uLCBzdGFydFJvdywgc3RhcnRDb2x1bW4pIHtcbiAgICAgICAgdmFyIGZvbGRMaW5lID0gdGhpcy5nZXRGb2xkTGluZShyb3cpO1xuXG4gICAgICAgIGlmICghZm9sZExpbmUpIHtcbiAgICAgICAgICAgIHZhciBsaW5lO1xuICAgICAgICAgICAgbGluZSA9IHRoaXMuZG9jLmdldExpbmUocm93KTtcbiAgICAgICAgICAgIHJldHVybiBsaW5lLnN1YnN0cmluZyhzdGFydENvbHVtbiB8fCAwLCBlbmRDb2x1bW4gfHwgbGluZS5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9sZERpc3BsYXlMaW5lKFxuICAgICAgICAgICAgICAgIGZvbGRMaW5lLCByb3csIGVuZENvbHVtbiwgc3RhcnRSb3csIHN0YXJ0Q29sdW1uKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtGb2xkTGluZVtdfVxuICAgICAqL1xuICAgIHRoaXMuJGNsb25lRm9sZERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGZkID0gW107XG4gICAgICAgIGZkID0gdGhpcy4kZm9sZERhdGEubWFwKGZ1bmN0aW9uKGZvbGRMaW5lKSB7XG4gICAgICAgICAgICB2YXIgZm9sZHMgPSBmb2xkTGluZS5mb2xkcy5tYXAoZnVuY3Rpb24oZm9sZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmb2xkLmNsb25lKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRm9sZExpbmUoZmQsIGZvbGRzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZkO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFt0cnlUb1VuZm9sZF1cbiAgICAgKi9cbiAgICB0aGlzLnRvZ2dsZUZvbGQgPSBmdW5jdGlvbih0cnlUb1VuZm9sZCkge1xuICAgICAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb247XG4gICAgICAgIHZhciByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZSgpO1xuICAgICAgICB2YXIgZm9sZDtcbiAgICAgICAgdmFyIGJyYWNrZXRQb3M7XG5cbiAgICAgICAgaWYgKHJhbmdlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgZm9sZCA9IHRoaXMuZ2V0Rm9sZEF0KGN1cnNvci5yb3csIGN1cnNvci5jb2x1bW4pO1xuXG4gICAgICAgICAgICBpZiAoZm9sZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kRm9sZChmb2xkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJyYWNrZXRQb3MgPSB0aGlzLmZpbmRNYXRjaGluZ0JyYWNrZXQoY3Vyc29yKSkge1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZS5jb21wYXJlUG9pbnQoYnJhY2tldFBvcykgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByYW5nZS5lbmQgPSBicmFja2V0UG9zO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0ID0gYnJhY2tldFBvcztcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc3RhcnQuY29sdW1uKys7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4tLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJyYWNrZXRQb3MgPSB0aGlzLmZpbmRNYXRjaGluZ0JyYWNrZXQoe3JvdzogY3Vyc29yLnJvdywgY29sdW1uOiBjdXJzb3IuY29sdW1uICsgMX0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlLmNvbXBhcmVQb2ludChicmFja2V0UG9zKSA9PSAxKVxuICAgICAgICAgICAgICAgICAgICByYW5nZS5lbmQgPSBicmFja2V0UG9zO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc3RhcnQgPSBicmFja2V0UG9zO1xuXG4gICAgICAgICAgICAgICAgcmFuZ2Uuc3RhcnQuY29sdW1uKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhbmdlID0gdGhpcy5nZXRDb21tZW50Rm9sZFJhbmdlKGN1cnNvci5yb3csIGN1cnNvci5jb2x1bW4pIHx8IHJhbmdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGZvbGRzID0gdGhpcy5nZXRGb2xkc0luUmFuZ2UocmFuZ2UpO1xuICAgICAgICAgICAgaWYgKHRyeVRvVW5mb2xkICYmIGZvbGRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kRm9sZHMoZm9sZHMpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZm9sZHMubGVuZ3RoID09IDEgKSB7XG4gICAgICAgICAgICAgICAgZm9sZCA9IGZvbGRzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFmb2xkKVxuICAgICAgICAgICAgZm9sZCA9IHRoaXMuZ2V0Rm9sZEF0KHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uKTtcblxuICAgICAgICBpZiAoZm9sZCAmJiBmb2xkLnJhbmdlLnRvU3RyaW5nKCkgPT0gcmFuZ2UudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRGb2xkKGZvbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gXCIuLi5cIjtcbiAgICAgICAgaWYgKCFyYW5nZS5pc011bHRpTGluZSgpKSB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlciA9IHRoaXMuZ2V0VGV4dFJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlci5sZW5ndGggPCA0KVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXIudHJpbSgpLnN1YnN0cmluZygwLCAyKSArIFwiLi5cIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWRkRm9sZChwbGFjZWhvbGRlciwgcmFuZ2UpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbHVtblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGlyXVxuICAgICAqIEByZXR1cm4ge1JhbmdlIHwgdW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0Q29tbWVudEZvbGRSYW5nZSA9IGZ1bmN0aW9uKHJvdywgY29sdW1uLCBkaXIpIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9yID0gbmV3IFRva2VuSXRlcmF0b3IodGhpcywgcm93LCBjb2x1bW4pO1xuICAgICAgICB2YXIgdG9rZW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW4oKTtcbiAgICAgICAgdmFyIHR5cGUgPSB0b2tlbiAmJiB0b2tlbi50eXBlO1xuICAgICAgICBpZiAodG9rZW4gJiYgL15jb21tZW50fHN0cmluZy8udGVzdCh0eXBlKSkge1xuICAgICAgICAgICAgdHlwZSA9IHR5cGUubWF0Y2goL2NvbW1lbnR8c3RyaW5nLylbMF07XG4gICAgICAgICAgICBpZiAodHlwZSA9PSBcImNvbW1lbnRcIilcbiAgICAgICAgICAgICAgICB0eXBlICs9IFwifGRvYy1zdGFydHxcXFxcLmRvY1wiO1xuICAgICAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCh0eXBlKTtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZSgpO1xuICAgICAgICAgICAgaWYgKGRpciAhPSAxKSB7XG4gICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpO1xuICAgICAgICAgICAgICAgIH0gd2hpbGUgKHRva2VuICYmIHJlLnRlc3QodG9rZW4udHlwZSkpO1xuICAgICAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmFuZ2Uuc3RhcnQucm93ID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCk7XG4gICAgICAgICAgICByYW5nZS5zdGFydC5jb2x1bW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSArIHRva2VuLnZhbHVlLmxlbmd0aDtcblxuICAgICAgICAgICAgaXRlcmF0b3IgPSBuZXcgVG9rZW5JdGVyYXRvcih0aGlzLCByb3csIGNvbHVtbik7XG4gICAgICAgICAgICB2YXIgaW5pdFN0YXRlID0gdGhpcy5nZXRTdGF0ZShpdGVyYXRvci4kcm93KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGRpciAhPSAtMSkge1xuICAgICAgICAgICAgICAgIHZhciBsYXN0Um93ID0gLTE7XG4gICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBGb3J3YXJkKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXN0Um93ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmdldFN0YXRlKGl0ZXJhdG9yLiRyb3cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRTdGF0ZS50b1N0cmluZygpICE9PSBzdGF0ZS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RSb3cgPSBpdGVyYXRvci4kcm93O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZXJhdG9yLiRyb3cgPiBsYXN0Um93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKHRva2VuICYmIHJlLnRlc3QodG9rZW4udHlwZSkpO1xuICAgICAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEJhY2t3YXJkKCk7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbigpO1xuXG4gICAgICAgICAgICByYW5nZS5lbmQucm93ID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCk7XG4gICAgICAgICAgICByYW5nZS5lbmQuY29sdW1uID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCk7XG4gICAgICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXIgfCBudWxsfSBbc3RhcnRSb3ddXG4gICAgICogQHBhcmFtIHtudW1iZXIgfCBudWxsfSBbZW5kUm93XVxuICAgICAqIEBwYXJhbSB7bnVtYmVyIHwgbnVsbH0gW2RlcHRoXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFt0ZXN0XVxuICAgICAqL1xuICAgIHRoaXMuZm9sZEFsbCA9IGZ1bmN0aW9uKHN0YXJ0Um93LCBlbmRSb3csIGRlcHRoLCB0ZXN0KSB7XG4gICAgICAgIGlmIChkZXB0aCA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBkZXB0aCA9IDEwMDAwMDsgLy8gSlNPTi5zdHJpbmdpZnkgZG9lc24ndCBoYW5sZSBJbmZpbml0eVxuICAgICAgICB2YXIgZm9sZFdpZGdldHMgPSB0aGlzLmZvbGRXaWRnZXRzO1xuICAgICAgICBpZiAoIWZvbGRXaWRnZXRzKVxuICAgICAgICAgICAgcmV0dXJuOyAvLyBtb2RlIGRvZXNuJ3Qgc3VwcG9ydCBmb2xkaW5nXG4gICAgICAgIGVuZFJvdyA9IGVuZFJvdyB8fCB0aGlzLmdldExlbmd0aCgpO1xuICAgICAgICBzdGFydFJvdyA9IHN0YXJ0Um93IHx8IDA7XG4gICAgICAgIGZvciAodmFyIHJvdyA9IHN0YXJ0Um93OyByb3cgPCBlbmRSb3c7IHJvdysrKSB7XG4gICAgICAgICAgICBpZiAoZm9sZFdpZGdldHNbcm93XSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGZvbGRXaWRnZXRzW3Jvd10gPSB0aGlzLmdldEZvbGRXaWRnZXQocm93KTtcbiAgICAgICAgICAgIGlmIChmb2xkV2lkZ2V0c1tyb3ddICE9IFwic3RhcnRcIilcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRlc3QgJiYgIXRlc3Qocm93KSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHZhciByYW5nZSA9IHRoaXMuZ2V0Rm9sZFdpZGdldFJhbmdlKHJvdyk7XG4gICAgICAgICAgICBpZiAocmFuZ2UgJiYgcmFuZ2UuaXNNdWx0aUxpbmUoKVxuICAgICAgICAgICAgICAgICYmIHJhbmdlLmVuZC5yb3cgPD0gZW5kUm93XG4gICAgICAgICAgICAgICAgJiYgcmFuZ2Uuc3RhcnQucm93ID49IHN0YXJ0Um93XG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByb3cgPSByYW5nZS5lbmQucm93O1xuICAgICAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlQ2hpbGRyZW4gPSBkZXB0aDtcbiAgICAgICAgICAgICAgICAvLyBhZGRGb2xkIGNhbiBjaGFuZ2UgdGhlIHJhbmdlXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRGb2xkKFwiLi4uXCIsIHJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWxcbiAgICAgKi9cbiAgICB0aGlzLmZvbGRUb0xldmVsID0gZnVuY3Rpb24obGV2ZWwpIHtcbiAgICAgICAgdGhpcy5mb2xkQWxsKCk7XG4gICAgICAgIHdoaWxlIChsZXZlbC0tID4gMClcbiAgICAgICAgICAgIHRoaXMudW5mb2xkKG51bGwsIGZhbHNlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICB0aGlzLmZvbGRBbGxDb21tZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXM7XG4gICAgICAgIHRoaXMuZm9sZEFsbChudWxsLCBudWxsLCBudWxsLCBmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgICAgIHZhciB0b2tlbnMgPSBzZXNzaW9uLmdldFRva2Vucyhyb3cpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLnR5cGUgPT0gXCJ0ZXh0XCIgJiYgL15cXHMrJC8udGVzdCh0b2tlbi52YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmICgvY29tbWVudC8udGVzdCh0b2tlbi50eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFxuICAgIC8vIHN0cnVjdHVyZWQgZm9sZGluZ1xuICAgIHRoaXMuJGZvbGRTdHlsZXMgPSB7XG4gICAgICAgIFwibWFudWFsXCI6IDEsXG4gICAgICAgIFwibWFya2JlZ2luXCI6IDEsXG4gICAgICAgIFwibWFya2JlZ2luZW5kXCI6IDFcbiAgICB9O1xuICAgIHRoaXMuJGZvbGRTdHlsZSA9IFwibWFya2JlZ2luXCI7XG4gICAgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlXG4gICAgICovXG4gICAgdGhpcy5zZXRGb2xkU3R5bGUgPSBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICBpZiAoIXRoaXMuJGZvbGRTdHlsZXNbc3R5bGVdKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBmb2xkIHN0eWxlOiBcIiArIHN0eWxlICsgXCJbXCIgKyBPYmplY3Qua2V5cyh0aGlzLiRmb2xkU3R5bGVzKS5qb2luKFwiLCBcIikgKyBcIl1cIik7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy4kZm9sZFN0eWxlID09IHN0eWxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuJGZvbGRTdHlsZSA9IHN0eWxlO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN0eWxlID09IFwibWFudWFsXCIpXG4gICAgICAgICAgICB0aGlzLnVuZm9sZCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gcmVzZXQgZm9sZGluZ1xuICAgICAgICB2YXIgbW9kZSA9IHRoaXMuJGZvbGRNb2RlO1xuICAgICAgICB0aGlzLiRzZXRGb2xkaW5nKG51bGwpO1xuICAgICAgICB0aGlzLiRzZXRGb2xkaW5nKG1vZGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuRm9sZE1vZGV9IGZvbGRNb2RlXG4gICAgICovXG4gICAgdGhpcy4kc2V0Rm9sZGluZyA9IGZ1bmN0aW9uKGZvbGRNb2RlKSB7XG4gICAgICAgIGlmICh0aGlzLiRmb2xkTW9kZSA9PSBmb2xkTW9kZSlcbiAgICAgICAgICAgIHJldHVybjtcblxuXG4gICAgICAgIHRoaXMuJGZvbGRNb2RlID0gZm9sZE1vZGU7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm9mZignY2hhbmdlJywgdGhpcy4kdXBkYXRlRm9sZFdpZGdldHMpO1xuICAgICAgICB0aGlzLm9mZigndG9rZW5pemVyVXBkYXRlJywgdGhpcy4kdG9rZW5pemVyVXBkYXRlRm9sZFdpZGdldHMpO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VBbm5vdGF0aW9uXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFmb2xkTW9kZSB8fCB0aGlzLiRmb2xkU3R5bGUgPT0gXCJtYW51YWxcIikge1xuICAgICAgICAgICAgdGhpcy5mb2xkV2lkZ2V0cyA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuZm9sZFdpZGdldHMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXRGb2xkV2lkZ2V0ID0gZm9sZE1vZGUuZ2V0Rm9sZFdpZGdldC5iaW5kKGZvbGRNb2RlLCB0aGlzLCB0aGlzLiRmb2xkU3R5bGUpO1xuICAgICAgICB0aGlzLmdldEZvbGRXaWRnZXRSYW5nZSA9IGZvbGRNb2RlLmdldEZvbGRXaWRnZXRSYW5nZS5iaW5kKGZvbGRNb2RlLCB0aGlzLCB0aGlzLiRmb2xkU3R5bGUpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy4kdXBkYXRlRm9sZFdpZGdldHMgPSB0aGlzLnVwZGF0ZUZvbGRXaWRnZXRzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuJHRva2VuaXplclVwZGF0ZUZvbGRXaWRnZXRzID0gdGhpcy50b2tlbml6ZXJVcGRhdGVGb2xkV2lkZ2V0cy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLiR1cGRhdGVGb2xkV2lkZ2V0cyk7XG4gICAgICAgIHRoaXMub24oJ3Rva2VuaXplclVwZGF0ZScsIHRoaXMuJHRva2VuaXplclVwZGF0ZUZvbGRXaWRnZXRzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpZ25vcmVDdXJyZW50XVxuICAgICAqIEByZXR1cm4ge3tyYW5nZT86IFJhbmdlLCBmaXJzdFJhbmdlPzogUmFuZ2V9fVxuICAgICAqL1xuICAgIHRoaXMuZ2V0UGFyZW50Rm9sZFJhbmdlRGF0YSA9IGZ1bmN0aW9uIChyb3csIGlnbm9yZUN1cnJlbnQpIHtcbiAgICAgICAgdmFyIGZ3ID0gdGhpcy5mb2xkV2lkZ2V0cztcbiAgICAgICAgaWYgKCFmdyB8fCAoaWdub3JlQ3VycmVudCAmJiBmd1tyb3ddKSlcbiAgICAgICAgICAgIHJldHVybiB7fTtcblxuICAgICAgICB2YXIgaSA9IHJvdyAtIDEsIGZpcnN0UmFuZ2U7XG4gICAgICAgIHdoaWxlIChpID49IDApIHtcbiAgICAgICAgICAgIHZhciBjID0gZndbaV07XG4gICAgICAgICAgICBpZiAoYyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGMgPSBmd1tpXSA9IHRoaXMuZ2V0Rm9sZFdpZGdldChpKTtcblxuICAgICAgICAgICAgaWYgKGMgPT0gXCJzdGFydFwiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5nZXRGb2xkV2lkZ2V0UmFuZ2UoaSk7XG4gICAgICAgICAgICAgICAgaWYgKCFmaXJzdFJhbmdlKVxuICAgICAgICAgICAgICAgICAgICBmaXJzdFJhbmdlID0gcmFuZ2U7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlICYmIHJhbmdlLmVuZC5yb3cgPj0gcm93KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByYW5nZTogaSAhPT0gLTEgJiYgcmFuZ2UsXG4gICAgICAgICAgICBmaXJzdFJhbmdlOiBmaXJzdFJhbmdlXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcGFyYW0ge2FueX0gZVxuICAgICAqL1xuICAgIHRoaXMub25Gb2xkV2lkZ2V0Q2xpY2sgPSBmdW5jdGlvbihyb3csIGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KVxuICAgICAgICAgICAgZSA9IGUuZG9tRXZlbnQ7XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjaGlsZHJlbjogZS5zaGlmdEtleSxcbiAgICAgICAgICAgIGFsbDogZS5jdHJsS2V5IHx8IGUubWV0YUtleSxcbiAgICAgICAgICAgIHNpYmxpbmdzOiBlLmFsdEtleVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdmFyIHJhbmdlID0gdGhpcy4kdG9nZ2xlRm9sZFdpZGdldChyb3csIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSAoZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChlbCAmJiAvYWNlX2ZvbGQtd2lkZ2V0Ly50ZXN0KGVsLmNsYXNzTmFtZSkpXG4gICAgICAgICAgICAgICAgZWwuY2xhc3NOYW1lICs9IFwiIGFjZV9pbnZhbGlkXCI7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHJldHVybiB7Rm9sZHwqfVxuICAgICAqL1xuICAgIHRoaXMuJHRvZ2dsZUZvbGRXaWRnZXQgPSBmdW5jdGlvbihyb3csIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmdldEZvbGRXaWRnZXQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy5nZXRGb2xkV2lkZ2V0KHJvdyk7XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5nZXRMaW5lKHJvdyk7XG5cbiAgICAgICAgdmFyIGRpciA9IHR5cGUgPT09IFwiZW5kXCIgPyAtMSA6IDE7XG4gICAgICAgIHZhciBmb2xkID0gdGhpcy5nZXRGb2xkQXQocm93LCBkaXIgPT09IC0xID8gMCA6IGxpbmUubGVuZ3RoLCBkaXIpO1xuXG4gICAgICAgIGlmIChmb2xkKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jaGlsZHJlbiB8fCBvcHRpb25zLmFsbClcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZvbGQoZm9sZCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmRGb2xkKGZvbGQpO1xuICAgICAgICAgICAgcmV0dXJuIGZvbGQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmdldEZvbGRXaWRnZXRSYW5nZShyb3csIHRydWUpO1xuICAgICAgICAvLyBzb21ldGltZXMgc2luZ2xlbGluZSBmb2xkcyBjYW4gYmUgbWlzc2VkIGJ5IHRoZSBjb2RlIGFib3ZlXG4gICAgICAgIGlmIChyYW5nZSAmJiAhcmFuZ2UuaXNNdWx0aUxpbmUoKSkge1xuICAgICAgICAgICAgZm9sZCA9IHRoaXMuZ2V0Rm9sZEF0KHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uLCAxKTtcbiAgICAgICAgICAgIGlmIChmb2xkICYmIHJhbmdlLmlzRXF1YWwoZm9sZC5yYW5nZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZvbGQoZm9sZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChvcHRpb25zLnNpYmxpbmdzKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZ2V0UGFyZW50Rm9sZFJhbmdlRGF0YShyb3cpO1xuICAgICAgICAgICAgaWYgKGRhdGEucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRSb3cgPSBkYXRhLnJhbmdlLnN0YXJ0LnJvdyArIDE7XG4gICAgICAgICAgICAgICAgdmFyIGVuZFJvdyA9IGRhdGEucmFuZ2UuZW5kLnJvdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9sZEFsbChzdGFydFJvdywgZW5kUm93LCBvcHRpb25zLmFsbCA/IDEwMDAwIDogMCk7XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5jaGlsZHJlbikge1xuICAgICAgICAgICAgZW5kUm93ID0gcmFuZ2UgPyByYW5nZS5lbmQucm93IDogdGhpcy5nZXRMZW5ndGgoKTtcbiAgICAgICAgICAgIHRoaXMuZm9sZEFsbChyb3cgKyAxLCBlbmRSb3csIG9wdGlvbnMuYWxsID8gMTAwMDAgOiAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsKSBcbiAgICAgICAgICAgICAgICByYW5nZS5jb2xsYXBzZUNoaWxkcmVuID0gMTAwMDA7XG4gICAgICAgICAgICB0aGlzLmFkZEZvbGQoXCIuLi5cIiwgcmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFt0b2dnbGVQYXJlbnRdXG4gICAgICovXG4gICAgdGhpcy50b2dnbGVGb2xkV2lkZ2V0ID0gZnVuY3Rpb24odG9nZ2xlUGFyZW50KSB7XG4gICAgICAgIHZhciByb3cgPSB0aGlzLnNlbGVjdGlvbi5nZXRDdXJzb3IoKS5yb3c7XG4gICAgICAgIHJvdyA9IHRoaXMuZ2V0Um93Rm9sZFN0YXJ0KHJvdyk7XG4gICAgICAgIHZhciByYW5nZSA9IHRoaXMuJHRvZ2dsZUZvbGRXaWRnZXQocm93LCB7fSk7XG4gICAgICAgIFxuICAgICAgICBpZiAocmFuZ2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIGhhbmRsZSB0b2dnbGVQYXJlbnRcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmdldFBhcmVudEZvbGRSYW5nZURhdGEocm93LCB0cnVlKTtcbiAgICAgICAgcmFuZ2UgPSBkYXRhLnJhbmdlIHx8IGRhdGEuZmlyc3RSYW5nZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgcm93ID0gcmFuZ2Uuc3RhcnQucm93O1xuICAgICAgICAgICAgdmFyIGZvbGQgPSB0aGlzLmdldEZvbGRBdChyb3csIHRoaXMuZ2V0TGluZShyb3cpLmxlbmd0aCwgMSk7XG5cbiAgICAgICAgICAgIGlmIChmb2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGb2xkKGZvbGQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEZvbGQoXCIuLi5cIiwgcmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RGVsdGF9IGRlbHRhXG4gICAgICovXG4gICAgdGhpcy51cGRhdGVGb2xkV2lkZ2V0cyA9IGZ1bmN0aW9uKGRlbHRhKSB7XG4gICAgICAgIHZhciBmaXJzdFJvdyA9IGRlbHRhLnN0YXJ0LnJvdztcbiAgICAgICAgdmFyIGxlbiA9IGRlbHRhLmVuZC5yb3cgLSBmaXJzdFJvdztcblxuICAgICAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmZvbGRXaWRnZXRzW2ZpcnN0Um93XSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVsdGEuYWN0aW9uID09ICdyZW1vdmUnKSB7XG4gICAgICAgICAgICB0aGlzLmZvbGRXaWRnZXRzLnNwbGljZShmaXJzdFJvdywgbGVuICsgMSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5KGxlbiArIDEpO1xuICAgICAgICAgICAgYXJncy51bnNoaWZ0KGZpcnN0Um93LCAxKTtcbiAgICAgICAgICAgIHRoaXMuZm9sZFdpZGdldHMuc3BsaWNlLmFwcGx5KHRoaXMuZm9sZFdpZGdldHMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZVxuICAgICAqL1xuICAgIHRoaXMudG9rZW5pemVyVXBkYXRlRm9sZFdpZGdldHMgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciByb3dzID0gZS5kYXRhO1xuICAgICAgICBpZiAocm93cy5maXJzdCAhPSByb3dzLmxhc3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvbGRXaWRnZXRzLmxlbmd0aCA+IHJvd3MuZmlyc3QpXG4gICAgICAgICAgICAgICAgdGhpcy5mb2xkV2lkZ2V0cy5zcGxpY2Uocm93cy5maXJzdCwgdGhpcy5mb2xkV2lkZ2V0cy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0cy5Gb2xkaW5nID0gRm9sZGluZztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/edit_session/folding.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/editor.js":
/*!*********************************************!*\
  !*** ./node_modules/ace-code/src/editor.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\n/**\n * @typedef {import(\"./virtual_renderer\").VirtualRenderer} VirtualRenderer\n * @typedef {import(\"./selection\").Selection} Selection\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n * @typedef {import(\"../ace-internal\").Ace.SearchOptions} SearchOptions\n */\n\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar dom = __webpack_require__(/*! ./lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar useragent = __webpack_require__(/*! ./lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\nvar TextInput = (__webpack_require__(/*! ./keyboard/textinput */ \"./node_modules/ace-code/src/keyboard/textinput.js\").TextInput);\nvar MouseHandler = (__webpack_require__(/*! ./mouse/mouse_handler */ \"./node_modules/ace-code/src/mouse/mouse_handler.js\").MouseHandler);\nvar FoldHandler = (__webpack_require__(/*! ./mouse/fold_handler */ \"./node_modules/ace-code/src/mouse/fold_handler.js\").FoldHandler);\nvar KeyBinding = (__webpack_require__(/*! ./keyboard/keybinding */ \"./node_modules/ace-code/src/keyboard/keybinding.js\").KeyBinding);\nvar EditSession = (__webpack_require__(/*! ./edit_session */ \"./node_modules/ace-code/src/edit_session.js\").EditSession);\nvar Search = (__webpack_require__(/*! ./search */ \"./node_modules/ace-code/src/search.js\").Search);\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nvar CommandManager = (__webpack_require__(/*! ./commands/command_manager */ \"./node_modules/ace-code/src/commands/command_manager.js\").CommandManager);\nvar defaultCommands = (__webpack_require__(/*! ./commands/default_commands */ \"./node_modules/ace-code/src/commands/default_commands.js\").commands);\nvar config = __webpack_require__(/*! ./config */ \"./node_modules/ace-code/src/config.js\");\nvar TokenIterator = (__webpack_require__(/*! ./token_iterator */ \"./node_modules/ace-code/src/token_iterator.js\").TokenIterator);\nvar GutterKeyboardHandler = (__webpack_require__(/*! ./keyboard/gutter_handler */ \"./node_modules/ace-code/src/keyboard/gutter_handler.js\").GutterKeyboardHandler);\nvar nls = (__webpack_require__(/*! ./config */ \"./node_modules/ace-code/src/config.js\").nls);\n\nvar clipboard = __webpack_require__(/*! ./clipboard */ \"./node_modules/ace-code/src/clipboard.js\");\nvar keys = __webpack_require__(/*! ./lib/keys */ \"./node_modules/ace-code/src/lib/keys.js\");\n\n\n/**\n * The main entry point into the Ace functionality.\n *\n * The `Editor` manages the [[EditSession]] (which manages [[Document]]s), as well as the [[VirtualRenderer]], which draws everything to the screen.\n *\n * Event sessions dealing with the mouse and keyboard are bubbled up from `Document` to the `Editor`, which decides what to do with them.\n **/\nclass Editor {\n    /**\n     * Creates a new `Editor` object.\n     *\n     * @param {VirtualRenderer} renderer Associated `VirtualRenderer` that draws everything\n     * @param {EditSession} [session] The `EditSession` to refer to\n     * @param {Partial<import(\"../ace-internal\").Ace.EditorOptions>} [options] The default options\n     **/\n    constructor(renderer, session, options) {\n        /**@type{EditSession}*/this.session;\n        this.$toDestroy = [];\n\n        var container = renderer.getContainerElement();\n        /**@type {HTMLElement & {env?:any, value?:any}}*/\n        this.container = container;\n        /**@type {VirtualRenderer}*/\n        this.renderer = renderer;\n        /**@type {string}*/\n        this.id = \"editor\" + (++Editor.$uid);\n        this.commands = new CommandManager(useragent.isMac ? \"mac\" : \"win\", defaultCommands);\n        if (typeof document == \"object\") {\n            this.textInput = new TextInput(renderer.getTextAreaContainer(), this);\n            this.renderer.textarea = this.textInput.getElement();\n            // TODO detect touch event support\n            /**@type {MouseHandler}*/\n            this.$mouseHandler = new MouseHandler(this);\n            new FoldHandler(this);\n        }\n        /**@type {KeyBinding}*/\n        this.keyBinding = new KeyBinding(this);\n        /**@type {Search}*/\n        this.$search = new Search().set({\n            wrap: true\n        });\n\n        this.$historyTracker = this.$historyTracker.bind(this);\n        this.commands.on(\"exec\", this.$historyTracker);\n\n        this.$initOperationListeners();\n\n        this._$emitInputEvent = lang.delayedCall(function() {\n            this._signal(\"input\", {});\n            if (this.session && !this.session.destroyed)\n                this.session.bgTokenizer.scheduleStart();\n        }.bind(this));\n\n        this.on(\"change\", function(_, _self) {\n            _self._$emitInputEvent.schedule(31);\n        });\n\n        this.setSession(session || options && options.session || new EditSession(\"\"));\n        config.resetOptions(this);\n        if (options)\n            this.setOptions(options);\n        config._signal(\"editor\", this);\n    }\n\n    $initOperationListeners() {\n        this.commands.on(\"exec\", this.startOperation.bind(this), true);\n        this.commands.on(\"afterExec\", this.endOperation.bind(this), true);\n    }\n\n    startOperation(commandEvent) {\n        this.session.startOperation(commandEvent);\n    }\n\n    /**\n     * @arg e\n     */\n    endOperation(e) {\n        this.session.endOperation(e);\n    }\n\n    onStartOperation(commandEvent) {\n        this.curOp = this.session.curOp;\n        this.curOp.scrollTop = this.renderer.scrollTop;\n        this.prevOp = this.session.prevOp;\n\n        if (!commandEvent) {\n            this.previousCommand = null;\n        }\n    }\n\n    /**\n     * @arg e\n     */\n    onEndOperation(e) {\n        if (this.curOp && this.session) {\n            if (e && e.returnValue === false) {\n                this.curOp = null;\n                return;\n            }\n\n            this._signal(\"beforeEndOperation\");\n            if (!this.curOp) return;\n\n            var command = this.curOp.command;\n            var scrollIntoView = command && command.scrollIntoView;\n            if (scrollIntoView) {\n                switch (scrollIntoView) {\n                    case \"center-animate\":\n                        scrollIntoView = \"animate\";\n                        /* fall through */\n                    case \"center\":\n                        this.renderer.scrollCursorIntoView(null, 0.5);\n                        break;\n                    case \"animate\":\n                    case \"cursor\":\n                        this.renderer.scrollCursorIntoView();\n                        break;\n                    case \"selectionPart\":\n                        var range = this.selection.getRange();\n                        var config = this.renderer.layerConfig;\n                        if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {\n                            this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n                if (scrollIntoView == \"animate\")\n                    this.renderer.animateScrolling(this.curOp.scrollTop);\n            }\n\n            this.$lastSel = this.session.selection.toJSON();\n            this.prevOp = this.curOp;\n            this.curOp = null;\n        }\n    }\n\n    /**\n     * @param e\n     */\n    $historyTracker(e) {\n        if (!this.$mergeUndoDeltas)\n            return;\n\n        var prev = this.prevOp;\n        var mergeableCommands = this.$mergeableCommands;\n        // previous command was the same\n        var shouldMerge = prev.command && (e.command.name == prev.command.name);\n        if (e.command.name == \"insertstring\") {\n            var text = e.args;\n            if (this.mergeNextCommand === undefined)\n                this.mergeNextCommand = true;\n\n            shouldMerge = shouldMerge\n                && this.mergeNextCommand // previous command allows to coalesce with\n                && (!/\\s/.test(text) || /\\s/.test(prev.args)); // previous insertion was of same type\n\n            this.mergeNextCommand = true;\n        } else {\n            shouldMerge = shouldMerge\n                && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable\n        }\n\n        if (\n            this.$mergeUndoDeltas != \"always\"\n            && Date.now() - this.sequenceStartTime > 2000\n        ) {\n            shouldMerge = false; // the sequence is too long\n        }\n\n        if (shouldMerge)\n            this.session.mergeUndoDeltas = true;\n        else if (mergeableCommands.indexOf(e.command.name) !== -1)\n            this.sequenceStartTime = Date.now();\n    }\n\n    /**\n     * Sets a new key handler, such as \"vim\" or \"windows\".\n     * @param {String | import(\"../ace-internal\").Ace.KeyboardHandler | null} keyboardHandler The new key handler\n     * @param {() => void} [cb]\n     **/\n    setKeyboardHandler(keyboardHandler, cb) {\n        if (keyboardHandler && typeof keyboardHandler === \"string\" && keyboardHandler != \"ace\") {\n            this.$keybindingId = keyboardHandler;\n            var _self = this;\n            config.loadModule([\"keybinding\", keyboardHandler], function(module) {\n                if (_self.$keybindingId == keyboardHandler)\n                    _self.keyBinding.setKeyboardHandler(module && module.handler);\n                cb && cb();\n            });\n        } else {\n            this.$keybindingId = null;\n            // @ts-ignore\n            this.keyBinding.setKeyboardHandler(keyboardHandler);\n            cb && cb();\n        }\n    }\n\n    /**\n     * Returns the keyboard handler, such as \"vim\" or \"windows\".\n     * @returns {Object}\n     **/\n    getKeyboardHandler() {\n        return this.keyBinding.getKeyboardHandler();\n    }\n\n\n\n    /**\n     * Sets a new editsession to use. This method also emits the `'changeSession'` event.\n     * @param {EditSession} [session] The new session to use\n     **/\n    setSession(session) {\n        if (this.session == session)\n            return;\n\n        // make sure operationEnd events are not emitted to wrong session\n        if (this.curOp) this.endOperation();\n        this.curOp = {};\n\n        var oldSession = this.session;\n        if (oldSession) {\n            this.session.off(\"change\", this.$onDocumentChange);\n            this.session.off(\"changeMode\", this.$onChangeMode);\n            this.session.off(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n            this.session.off(\"changeTabSize\", this.$onChangeTabSize);\n            this.session.off(\"changeWrapLimit\", this.$onChangeWrapLimit);\n            this.session.off(\"changeWrapMode\", this.$onChangeWrapMode);\n            this.session.off(\"changeFold\", this.$onChangeFold);\n            this.session.off(\"changeFrontMarker\", this.$onChangeFrontMarker);\n            this.session.off(\"changeBackMarker\", this.$onChangeBackMarker);\n            this.session.off(\"changeBreakpoint\", this.$onChangeBreakpoint);\n            this.session.off(\"changeAnnotation\", this.$onChangeAnnotation);\n            this.session.off(\"changeOverwrite\", this.$onCursorChange);\n            this.session.off(\"changeScrollTop\", this.$onScrollTopChange);\n            this.session.off(\"changeScrollLeft\", this.$onScrollLeftChange);\n            this.session.off(\"startOperation\", this.$onStartOperation);\n            this.session.off(\"endOperation\", this.$onEndOperation);\n\n            var selection = this.session.getSelection();\n            selection.off(\"changeCursor\", this.$onCursorChange);\n            selection.off(\"changeSelection\", this.$onSelectionChange);\n        }\n\n        this.session = session;\n        if (session) {\n            this.$onDocumentChange = this.onDocumentChange.bind(this);\n            session.on(\"change\", this.$onDocumentChange);\n            this.renderer.setSession(session);\n\n            this.$onChangeMode = this.onChangeMode.bind(this);\n            session.on(\"changeMode\", this.$onChangeMode);\n\n            this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);\n            session.on(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n\n            this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);\n            session.on(\"changeTabSize\", this.$onChangeTabSize);\n\n            this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);\n            session.on(\"changeWrapLimit\", this.$onChangeWrapLimit);\n\n            this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);\n            session.on(\"changeWrapMode\", this.$onChangeWrapMode);\n\n            this.$onChangeFold = this.onChangeFold.bind(this);\n            session.on(\"changeFold\", this.$onChangeFold);\n\n            this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);\n            this.session.on(\"changeFrontMarker\", this.$onChangeFrontMarker);\n\n            this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);\n            this.session.on(\"changeBackMarker\", this.$onChangeBackMarker);\n\n            this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);\n            this.session.on(\"changeBreakpoint\", this.$onChangeBreakpoint);\n\n            this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);\n            this.session.on(\"changeAnnotation\", this.$onChangeAnnotation);\n\n            this.$onCursorChange = this.onCursorChange.bind(this);\n            this.session.on(\"changeOverwrite\", this.$onCursorChange);\n\n            this.$onScrollTopChange = this.onScrollTopChange.bind(this);\n            this.session.on(\"changeScrollTop\", this.$onScrollTopChange);\n\n            this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);\n            this.session.on(\"changeScrollLeft\", this.$onScrollLeftChange);\n\n            this.selection = session.getSelection();\n            this.selection.on(\"changeCursor\", this.$onCursorChange);\n\n            this.$onSelectionChange = this.onSelectionChange.bind(this);\n            this.selection.on(\"changeSelection\", this.$onSelectionChange);\n\n            this.$onStartOperation = this.onStartOperation.bind(this);\n            this.session.on(\"startOperation\", this.$onStartOperation);\n            this.$onEndOperation = this.onEndOperation.bind(this);\n            this.session.on(\"endOperation\", this.$onEndOperation);\n\n            this.onChangeMode();\n\n            this.onCursorChange();\n\n            this.onScrollTopChange();\n            this.onScrollLeftChange();\n            this.onSelectionChange();\n            this.onChangeFrontMarker();\n            this.onChangeBackMarker();\n            this.onChangeBreakpoint();\n            this.onChangeAnnotation();\n            this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();\n            this.renderer.updateFull();\n        } else {\n            this.selection = null;\n            this.renderer.setSession(session);\n        }\n\n        this._signal(\"changeSession\", {\n            session: session,\n            oldSession: oldSession\n        });\n\n        this.curOp = null;\n\n        oldSession && oldSession._signal(\"changeEditor\", {oldEditor: this});\n        if (oldSession) oldSession.$editor = null;\n        session && session._signal(\"changeEditor\", {editor: this});\n        if (session) session.$editor = this;\n\n        if (session && !session.destroyed)\n            session.bgTokenizer.scheduleStart();\n    }\n\n    /**\n     * Returns the current session being used.\n     * @returns {EditSession}\n     **/\n    getSession() {\n        return this.session;\n    }\n\n    /**\n     * Sets the current document to `val`.\n     * @param {String} val The new value to set for the document\n     * @param {Number} [cursorPos] Where to set the new value. `undefined` or 0 is selectAll, -1 is at the document start, and 1 is at the end\n     *\n     * @returns {String} The current document value\n     * @related Document.setValue\n     **/\n    setValue(val, cursorPos) {\n        this.session.doc.setValue(val);\n\n        if (!cursorPos)\n            this.selectAll();\n        else if (cursorPos == 1)\n            this.navigateFileEnd();\n        else if (cursorPos == -1)\n            this.navigateFileStart();\n\n        return val;\n    }\n\n    /**\n     * Returns the current session's content.\n     *\n     * @returns {String}\n     * @related EditSession.getValue\n     **/\n    getValue() {\n        return this.session.getValue();\n    }\n\n    /**\n     *\n     * Returns the currently highlighted selection.\n     * @returns {Selection} The selection object\n     **/\n    getSelection() {\n        return this.selection;\n    }\n\n    /**\n     * {:VirtualRenderer.onResize}\n     * @param {Boolean} [force] If `true`, recomputes the size, even if the height and width haven't changed\n     * @related VirtualRenderer.onResize\n     **/\n    resize(force) {\n        this.renderer.onResize(force);\n    }\n\n    /**\n     * {:VirtualRenderer.setTheme}\n     * @param {string | import(\"../ace-internal\").Ace.Theme} theme The path to a theme\n     * @param {() => void} [cb] optional callback called when theme is loaded\n     **/\n    setTheme(theme, cb) {\n        this.renderer.setTheme(theme, cb);\n    }\n\n    /**\n     * {:VirtualRenderer.getTheme}\n     *\n     * @returns {String} The set theme\n     * @related VirtualRenderer.getTheme\n     **/\n    getTheme() {\n        return this.renderer.getTheme();\n    }\n\n    /**\n     * {:VirtualRenderer.setStyle}\n     * @param {String} style A class name\n     * @related VirtualRenderer.setStyle\n     **/\n    setStyle(style) {\n        this.renderer.setStyle(style);\n    }\n\n    /**\n     * {:VirtualRenderer.unsetStyle}\n     * @related VirtualRenderer.unsetStyle\n     * @param {string} style\n     */\n    unsetStyle(style) {\n        this.renderer.unsetStyle(style);\n    }\n\n    /**\n     * Gets the current font size of the editor text.\n     * @return {string | number}\n     */\n    getFontSize() {\n        return this.getOption(\"fontSize\") ||\n           dom.computedStyle(this.container).fontSize;\n    }\n\n    /**\n     * Set a new font size (in pixels) for the editor text.\n     * @param {String | number} size A font size ( _e.g._ \"12px\")\n     **/\n    setFontSize(size) {\n        this.setOption(\"fontSize\", size);\n    }\n\n    $highlightBrackets() {\n        if (this.$highlightPending) {\n            return;\n        }\n\n        // perform highlight async to not block the browser during navigation\n        var self = this;\n        this.$highlightPending = true;\n        setTimeout(function () {\n            self.$highlightPending = false;\n            var session = self.session;\n            if (!session || session.destroyed) return;\n            if (session.$bracketHighlight) {\n                session.$bracketHighlight.markerIds.forEach(function(id) {\n                    session.removeMarker(id);\n                });\n                session.$bracketHighlight = null;\n            }\n            var pos = self.getCursorPosition();\n            var handler = self.getKeyboardHandler();\n            var isBackwards = handler && handler.$getDirectionForHighlight && handler.$getDirectionForHighlight(self);\n            var ranges = session.getMatchingBracketRanges(pos, isBackwards);\n\n            if (!ranges) {\n                var iterator = new TokenIterator(session, pos.row, pos.column);\n                var token = iterator.getCurrentToken();\n\n                if (token && /\\b(?:tag-open|tag-name)/.test(token.type)) {\n                    var tagNamesRanges = session.getMatchingTags(pos);\n                    if (tagNamesRanges) {\n                        ranges = [\n                            tagNamesRanges.openTagName.isEmpty() ? tagNamesRanges.openTag : tagNamesRanges.openTagName,\n                            tagNamesRanges.closeTagName.isEmpty() ? tagNamesRanges.closeTag : tagNamesRanges.closeTagName\n                        ];\n                    }\n                }\n            }\n            if (!ranges && session.$mode.getMatching)\n                ranges = session.$mode.getMatching(self.session);\n            if (!ranges) {\n                if (self.getHighlightIndentGuides()) self.renderer.$textLayer.$highlightIndentGuide();\n                return;\n            }\n\n            var markerType = \"ace_bracket\";\n            if (!Array.isArray(ranges)) {\n                ranges = [ranges];\n            } else if (ranges.length == 1) {\n                markerType = \"ace_error_bracket\";\n            }\n\n            // show adjacent ranges as one\n            if (ranges.length == 2) {\n                if (Range.comparePoints(ranges[0].end, ranges[1].start) == 0)\n                    ranges = [Range.fromPoints(ranges[0].start, ranges[1].end)];\n                else if (Range.comparePoints(ranges[0].start, ranges[1].end) == 0)\n                    ranges = [Range.fromPoints(ranges[1].start, ranges[0].end)];\n            }\n\n            session.$bracketHighlight = {\n                ranges: ranges,\n                markerIds: ranges.map(function(range) {\n                    return session.addMarker(range, markerType, \"text\");\n                })\n            };\n            if (self.getHighlightIndentGuides()) self.renderer.$textLayer.$highlightIndentGuide();\n        }, 50);\n    }\n\n    /**\n     *\n     * Brings the current `textInput` into focus.\n     **/\n    focus() {\n        this.textInput.focus();\n    }\n\n    /**\n     * Returns `true` if the current `textInput` is in focus.\n     * @return {Boolean}\n     **/\n    isFocused() {\n        return this.textInput.isFocused();\n    }\n\n    /**\n     *\n     * Blurs the current `textInput`.\n     **/\n    blur() {\n        this.textInput.blur();\n    }\n\n    /**\n     * Emitted once the editor comes into focus.\n     * @internal\n     **/\n    onFocus(e) {\n        if (this.$isFocused)\n            return;\n        this.$isFocused = true;\n        this.renderer.showCursor();\n        this.renderer.visualizeFocus();\n        this._emit(\"focus\", e);\n    }\n\n    /**\n     * Emitted once the editor has been blurred.\n     * @internal\n     **/\n    onBlur(e) {\n        if (!this.$isFocused)\n            return;\n        this.$isFocused = false;\n        this.renderer.hideCursor();\n        this.renderer.visualizeBlur();\n        this._emit(\"blur\", e);\n    }\n\n    /**\n     */\n    $cursorChange() {\n        this.renderer.updateCursor();\n        this.$highlightBrackets();\n        this.$updateHighlightActiveLine();\n    }\n\n    /**\n     * Emitted whenever the document is changed.\n     * @param {import(\"../ace-internal\").Ace.Delta} delta Contains a single property, `data`, which has the delta of changes\n     * @internal\n     **/\n    onDocumentChange(delta) {\n        // Rerender and emit \"change\" event.\n        var wrap = this.session.$useWrapMode;\n        var lastRow = (delta.start.row == delta.end.row ? delta.end.row : Infinity);\n        this.renderer.updateLines(delta.start.row, lastRow, wrap);\n\n        this._signal(\"change\", delta);\n\n        // Update cursor because tab characters can influence the cursor position.\n        this.$cursorChange();\n    }\n\n    /**\n     * @internal\n     */\n    onTokenizerUpdate(e) {\n        var rows = e.data;\n        this.renderer.updateLines(rows.first, rows.last);\n    }\n\n    /**\n     * @internal\n     */\n    onScrollTopChange() {\n        this.renderer.scrollToY(this.session.getScrollTop());\n    }\n\n    /**\n     * @internal\n     */\n    onScrollLeftChange() {\n        this.renderer.scrollToX(this.session.getScrollLeft());\n    }\n\n    /**\n     * Emitted when the selection changes.\n     * @internal\n     **/\n    onCursorChange() {\n        this.$cursorChange();\n        this._signal(\"changeSelection\");\n    }\n\n    /**\n     */\n    $updateHighlightActiveLine() {\n        var session = this.getSession();\n        /**@type {Point|false}*/\n        var highlight;\n        if (this.$highlightActiveLine) {\n            if (this.$selectionStyle != \"line\" || !this.selection.isMultiLine())\n                highlight = this.getCursorPosition();\n            if (this.renderer.theme && this.renderer.theme.$selectionColorConflict && !this.selection.isEmpty())\n                highlight = false;\n            if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))\n                highlight = false;\n        }\n\n        if (session.$highlightLineMarker && !highlight) {\n            session.removeMarker(session.$highlightLineMarker.id);\n            session.$highlightLineMarker = null;\n        } else if (!session.$highlightLineMarker && highlight) {\n            var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);\n            range.id = session.addMarker(range, \"ace_active-line\", \"screenLine\");\n            session.$highlightLineMarker = range;\n        } else if (highlight) {\n            session.$highlightLineMarker.start.row = highlight.row;\n            session.$highlightLineMarker.end.row = highlight.row;\n            session.$highlightLineMarker.start.column = highlight.column;\n            session._signal(\"changeBackMarker\");\n        }\n    }\n\n    /**\n     * @param e\n     * @internal\n     */\n    onSelectionChange(e) {\n        var session = this.session;\n\n        if (session.$selectionMarker) {\n            session.removeMarker(session.$selectionMarker);\n        }\n        session.$selectionMarker = null;\n\n        if (!this.selection.isEmpty()) {\n            var range = this.selection.getRange();\n            var style = this.getSelectionStyle();\n            session.$selectionMarker = session.addMarker(range, \"ace_selection\", style);\n        } else {\n            this.$updateHighlightActiveLine();\n        }\n\n        var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();\n        this.session.highlight(re);\n\n        this._signal(\"changeSelection\");\n    }\n\n    $getSelectionHighLightRegexp() {\n        var session = this.session;\n\n        var selection = this.getSelectionRange();\n        if (selection.isEmpty() || selection.isMultiLine())\n            return;\n\n        var startColumn = selection.start.column;\n        var endColumn = selection.end.column;\n        var line = session.getLine(selection.start.row);\n\n        var needle = line.substring(startColumn, endColumn);\n        // maximum allowed size for regular expressions in 32000,\n        // but getting close to it has significant impact on the performance\n        if (needle.length > 5000 || !/[\\w\\d]/.test(needle))\n            return;\n\n        var re = this.$search.$assembleRegExp({\n            wholeWord: true,\n            caseSensitive: true,\n            needle: needle\n        });\n\n        var wordWithBoundary = line.substring(startColumn - 1, endColumn + 1);\n        if (!re.test(wordWithBoundary))\n            return;\n\n        return re;\n    }\n\n    /**\n     * @internal\n     */\n    onChangeFrontMarker() {\n        this.renderer.updateFrontMarkers();\n    }\n\n    /**\n     * @internal\n     */\n    onChangeBackMarker() {\n        this.renderer.updateBackMarkers();\n    }\n\n    /**\n     * @internal\n     */\n    onChangeBreakpoint() {\n        this.renderer.updateBreakpoints();\n    }\n\n    /**\n     * @internal\n     */\n    onChangeAnnotation() {\n        this.renderer.setAnnotations(this.session.getAnnotations());\n    }\n\n    /**\n     * @param e\n     * @internal\n     */\n    onChangeMode (e) {\n        this.renderer.updateText();\n        this._emit(\"changeMode\", e);\n    }\n\n    /**\n     * @internal\n     */\n    onChangeWrapLimit() {\n        this.renderer.updateFull();\n    }\n\n    /**\n     * @internal\n     */\n    onChangeWrapMode() {\n        this.renderer.onResize(true);\n    }\n\n\n    /**\n     * @internal\n     */\n    onChangeFold() {\n        // Update the active line marker as due to folding changes the current\n        // line range on the screen might have changed.\n        this.$updateHighlightActiveLine();\n        // TODO: This might be too much updating. Okay for now.\n        this.renderer.updateFull();\n    }\n\n\n    /**\n     * Returns the string of text currently highlighted.\n     * @returns {String}\n     **/\n    getSelectedText() {\n        return this.session.getTextRange(this.getSelectionRange());\n    }\n\n\n    /**\n     * Returns the string of text currently highlighted.\n     * @returns {String}\n     **/\n    getCopyText () {\n        var text = this.getSelectedText();\n        var nl = this.session.doc.getNewLineCharacter();\n        var copyLine= false;\n        if (!text && this.$copyWithEmptySelection) {\n            copyLine = true;\n            var ranges = this.selection.getAllRanges();\n            for (var i = 0; i < ranges.length; i++) {\n                var range = ranges[i];\n                if (i && ranges[i - 1].start.row == range.start.row)\n                    continue;\n                text += this.session.getLine(range.start.row) + nl;\n            }\n        }\n        var e = {text: text};\n        this._signal(\"copy\", e);\n        clipboard.lineMode = copyLine ? e.text : false;\n        return e.text;\n    }\n\n    /**\n     * Called whenever a text \"copy\" happens.\n     * @internal\n     **/\n    onCopy() {\n        this.commands.exec(\"copy\", this);\n    }\n\n    /**\n     * Called whenever a text \"cut\" happens.\n     * @internal\n     **/\n    onCut() {\n        this.commands.exec(\"cut\", this);\n    }\n\n\n    /**\n     * Called whenever a text \"paste\" happens.\n     * @param {String} text The pasted text\n     * @param {any} event\n     * @internal\n     **/\n    onPaste(text, event) {\n        var e = {text: text, event: event};\n        this.commands.exec(\"paste\", this, e);\n    }\n\n    /**\n     *\n     * @param e\n     * @returns {boolean}\n     */\n    $handlePaste(e) {\n        if (typeof e == \"string\")\n            e = {text: e};\n        this._signal(\"paste\", e);\n        var text = e.text;\n\n        var lineMode = text === clipboard.lineMode;\n        var session = this.session;\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode) {\n            if (lineMode)\n                session.insert({ row: this.selection.lead.row, column: 0 }, text);\n            else\n                this.insert(text);\n        } else if (lineMode) {\n            this.selection.rangeList.ranges.forEach(function(range) {\n                session.insert({ row: range.start.row, column: 0 }, text);\n            });\n        } else {\n            var lines = text.split(/\\r\\n|\\r|\\n/);\n            var ranges = this.selection.rangeList.ranges;\n\n            var isFullLine = lines.length == 2 && (!lines[0] || !lines[1]);\n            if (lines.length != ranges.length || isFullLine)\n                return this.commands.exec(\"insertstring\", this, text);\n\n            for (var i = ranges.length; i--;) {\n                var range = ranges[i];\n                if (!range.isEmpty())\n                    session.remove(range);\n\n                session.insert(range.start, lines[i]);\n            }\n        }\n    }\n\n    /**\n     *\n     * @param {string | string[]} command\n     * @param [args]\n     * @return {boolean}\n     */\n    execCommand(command, args) {\n        return this.commands.exec(command, this, args);\n    }\n\n    /**\n     * Inserts `text` into wherever the cursor is pointing.\n     * @param {String} text The new text to add\n     * @param {boolean} [pasted]\n     **/\n    insert(text, pasted) {\n        var session = this.session;\n        var mode = session.getMode();\n        var cursor = this.getCursorPosition();\n\n        if (this.getBehavioursEnabled() && !pasted) {\n            // Get a transform if the current mode wants one.\n            var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);\n            if (transform) {\n                if (text !== transform.text) {\n                    // keep automatic insertion in a separate delta, unless it is in multiselect mode\n                    if (!this.inVirtualSelectionMode) {\n                        this.session.mergeUndoDeltas = false;\n                        this.mergeNextCommand = false;\n                    }\n                }\n                text = transform.text;\n\n            }\n        }\n\n        if (text == \"\\t\")\n            text = this.session.getTabString();\n\n        // remove selected text\n        if (!this.selection.isEmpty()) {\n            var range = this.getSelectionRange();\n            cursor = this.session.remove(range);\n            this.clearSelection();\n        }\n        else if (this.session.getOverwrite() && text.indexOf(\"\\n\") == -1) {\n            var range = Range.fromPoints(cursor, cursor);\n            range.end.column += text.length;\n            this.session.remove(range);\n        }\n\n        if (text == \"\\n\" || text == \"\\r\\n\") {\n            var line = session.getLine(cursor.row);\n            if (cursor.column > line.search(/\\S|$/)) {\n                var d = line.substr(cursor.column).search(/\\S|$/);\n                session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);\n            }\n        }\n        this.clearSelection();\n\n        var start = cursor.column;\n        var lineState = session.getState(cursor.row);\n        var line = session.getLine(cursor.row);\n        var shouldOutdent = mode.checkOutdent(lineState, line, text);\n        session.insert(cursor, text);\n\n        if (transform && transform.selection) {\n            if (transform.selection.length == 2) { // Transform relative to the current column\n                this.selection.setSelectionRange(\n                    new Range(cursor.row, start + transform.selection[0],\n                              cursor.row, start + transform.selection[1]));\n            } else { // Transform relative to the current row.\n                this.selection.setSelectionRange(\n                    new Range(cursor.row + transform.selection[0],\n                              transform.selection[1],\n                              cursor.row + transform.selection[2],\n                              transform.selection[3]));\n            }\n        }\n        if (this.$enableAutoIndent) {\n            if (session.getDocument().isNewLine(text)) {\n                var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());\n\n                session.insert({row: cursor.row+1, column: 0}, lineIndent);\n            }\n            if (shouldOutdent)\n                mode.autoOutdent(lineState, session, cursor.row);\n        }\n    }\n\n    autoIndent() {\n        var session = this.session;\n        var mode = session.getMode();\n\n        var ranges = this.selection.isEmpty()\n            ? [new Range(0, 0, session.doc.getLength() - 1, 0)]\n            : this.selection.getAllRanges();\n\n        /**@type{string|string[]}*/\n        var prevLineState = \"\";\n        var prevLine = \"\";\n        var lineIndent = \"\";\n        var tab = session.getTabString();\n        for (var i = 0; i < ranges.length; i++) {\n            var startRow = ranges[i].start.row;\n            var endRow = ranges[i].end.row;\n\n            for (var row = startRow; row <= endRow; row++) {\n                if (row > 0) {\n                    prevLineState = session.getState(row - 1);\n                    prevLine = session.getLine(row - 1);\n                    lineIndent = mode.getNextLineIndent(prevLineState, prevLine, tab);\n                }\n\n                var line = session.getLine(row);\n                var currIndent = mode.$getIndent(line);\n                if (lineIndent !== currIndent) {\n                    if (currIndent.length > 0) {\n                        var range = new Range(row, 0, row, currIndent.length);\n                        session.remove(range);\n                    }\n                    if (lineIndent.length > 0) {\n                        session.insert({row: row, column: 0}, lineIndent);\n                    }\n                }\n\n                mode.autoOutdent(prevLineState, session, row);\n            }\n        }\n    }\n\n    /**\n     *\n     * @param text\n     * @param composition\n     * @returns {*}\n     * @internal\n     */\n    onTextInput(text, composition) {\n        if (!composition)\n            return this.keyBinding.onTextInput(text);\n\n        this.startOperation({command: { name: \"insertstring\" }});\n        var applyComposition = this.applyComposition.bind(this, text, composition);\n        if (this.selection.rangeCount)\n            this.forEachSelection(applyComposition);\n        else\n            applyComposition();\n        this.endOperation();\n    }\n\n    /**\n     * @param {string} [text]\n     * @param {any} [composition]\n     */\n    applyComposition(text, composition) {\n        if (composition.extendLeft || composition.extendRight) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.extendLeft;\n            r.end.column += composition.extendRight;\n            if (r.start.column < 0) {\n                r.start.row--;\n                r.start.column += this.session.getLine(r.start.row).length + 1;\n            }\n            this.selection.setRange(r);\n            if (!text && !r.isEmpty())\n                this.remove();\n        }\n        if (text || !this.selection.isEmpty())\n            this.insert(text, true);\n        if (composition.restoreStart || composition.restoreEnd) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.restoreStart;\n            r.end.column -= composition.restoreEnd;\n            this.selection.setRange(r);\n        }\n    }\n\n    /**\n     * @internal\n     */\n    onCommandKey(e, hashId, keyCode) {\n        return this.keyBinding.onCommandKey(e, hashId, keyCode);\n    }\n\n    /**\n     * Pass in `true` to enable overwrites in your session, or `false` to disable. If overwrites is enabled, any text you enter will type over any text after it. If the value of `overwrite` changes, this function also emits the `changeOverwrite` event.\n     * @param {Boolean} overwrite Defines whether or not to set overwrites\n     * @related EditSession.setOverwrite\n     **/\n    setOverwrite(overwrite) {\n        this.session.setOverwrite(overwrite);\n    }\n\n    /**\n     * Returns `true` if overwrites are enabled; `false` otherwise.\n     * @returns {Boolean}\n     * @related EditSession.getOverwrite\n     **/\n    getOverwrite() {\n        return this.session.getOverwrite();\n    }\n\n    /**\n     * Sets the value of overwrite to the opposite of whatever it currently is.\n     * @related EditSession.toggleOverwrite\n     **/\n    toggleOverwrite() {\n        this.session.toggleOverwrite();\n    }\n\n    /**\n     * Sets how fast the mouse scrolling should do.\n     * @param {Number} speed A value indicating the new speed (in milliseconds)\n     **/\n    setScrollSpeed(speed) {\n        this.setOption(\"scrollSpeed\", speed);\n    }\n\n    /**\n     * Returns the value indicating how fast the mouse scroll speed is (in milliseconds).\n     * @returns {Number}\n     **/\n    getScrollSpeed() {\n        return this.getOption(\"scrollSpeed\");\n    }\n\n    /**\n     * Sets the delay (in milliseconds) of the mouse drag.\n     * @param {Number} dragDelay A value indicating the new delay\n     **/\n    setDragDelay(dragDelay) {\n        this.setOption(\"dragDelay\", dragDelay);\n    }\n\n    /**\n     * Returns the current mouse drag delay.\n     * @returns {Number}\n     **/\n    getDragDelay() {\n        return this.getOption(\"dragDelay\");\n    }\n\n\n    /**\n     * Draw selection markers spanning whole line, or only over selected text. Default value is \"line\"\n     * @param {\"fullLine\" | \"screenLine\" | \"text\" | \"line\"} val The new selection style \"line\"|\"text\"\n     **/\n    setSelectionStyle(val) {\n        this.setOption(\"selectionStyle\", val);\n    }\n\n    /**\n     * Returns the current selection style.\n     * @returns {import(\"../ace-internal\").Ace.EditorOptions[\"selectionStyle\"]}\n     **/\n    getSelectionStyle() {\n        return this.getOption(\"selectionStyle\");\n    }\n\n    /**\n     * Determines whether or not the current line should be highlighted.\n     * @param {Boolean} shouldHighlight Set to `true` to highlight the current line\n     **/\n    setHighlightActiveLine(shouldHighlight) {\n        this.setOption(\"highlightActiveLine\", shouldHighlight);\n    }\n    /**\n     * Returns `true` if current lines are always highlighted.\n     * @return {Boolean}\n     **/\n    getHighlightActiveLine() {\n        return this.getOption(\"highlightActiveLine\");\n    }\n\n    /**\n     * @param {boolean} shouldHighlight\n     */\n    setHighlightGutterLine(shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    }\n\n    /**\n     * @returns {Boolean}\n     */\n    getHighlightGutterLine() {\n        return this.getOption(\"highlightGutterLine\");\n    }\n\n    /**\n     * Determines if the currently selected word should be highlighted.\n     * @param {Boolean} shouldHighlight Set to `true` to highlight the currently selected word\n     **/\n    setHighlightSelectedWord(shouldHighlight) {\n        this.setOption(\"highlightSelectedWord\", shouldHighlight);\n    }\n\n    /**\n     * Returns `true` if currently highlighted words are to be highlighted.\n     * @returns {Boolean}\n     **/\n    getHighlightSelectedWord() {\n        return this.$highlightSelectedWord;\n    }\n\n    /**\n     * @param {boolean} shouldAnimate\n     */\n    setAnimatedScroll(shouldAnimate){\n        this.renderer.setAnimatedScroll(shouldAnimate);\n    }\n\n    /**\n     * @return {boolean}\n     */\n    getAnimatedScroll(){\n        return this.renderer.getAnimatedScroll();\n    }\n\n    /**\n     * If `showInvisibles` is set to `true`, invisible characters&mdash;like spaces or new lines&mdash;are show in the editor.\n     * @param {Boolean} showInvisibles Specifies whether or not to show invisible characters\n     **/\n    setShowInvisibles(showInvisibles) {\n        this.renderer.setShowInvisibles(showInvisibles);\n    }\n\n    /**\n     * Returns `true` if invisible characters are being shown.\n     * @returns {Boolean}\n     **/\n    getShowInvisibles() {\n        return this.renderer.getShowInvisibles();\n    }\n\n    /**\n     * @param {boolean} display\n     */\n    setDisplayIndentGuides(display) {\n        this.renderer.setDisplayIndentGuides(display);\n    }\n\n    /**\n     * @return {boolean}\n     */\n    getDisplayIndentGuides() {\n        return this.renderer.getDisplayIndentGuides();\n    }\n\n    /**\n     * @param {boolean} highlight\n     */\n    setHighlightIndentGuides(highlight) {\n        this.renderer.setHighlightIndentGuides(highlight);\n    }\n\n    /**\n     * @return {boolean}\n     */\n    getHighlightIndentGuides() {\n        return this.renderer.getHighlightIndentGuides();\n    }\n\n    /**\n     * If `showPrintMargin` is set to `true`, the print margin is shown in the editor.\n     * @param {Boolean} showPrintMargin Specifies whether or not to show the print margin\n     *\n     **/\n    setShowPrintMargin(showPrintMargin) {\n        this.renderer.setShowPrintMargin(showPrintMargin);\n    }\n\n    /**\n     * Returns `true` if the print margin is being shown.\n     * @returns {Boolean}\n     **/\n    getShowPrintMargin() {\n        return this.renderer.getShowPrintMargin();\n    }\n\n    /**\n     * Sets the column defining where the print margin should be.\n     * @param {Number} showPrintMargin Specifies the new print margin\n     *\n     **/\n    setPrintMarginColumn(showPrintMargin) {\n        this.renderer.setPrintMarginColumn(showPrintMargin);\n    }\n\n    /**\n     * Returns the column number of where the print margin is.\n     * @returns {Number}\n     **/\n    getPrintMarginColumn() {\n        return this.renderer.getPrintMarginColumn();\n    }\n\n    /**\n     * If `readOnly` is true, then the editor is set to read-only mode, and none of the content can change.\n     * @param {Boolean} readOnly Specifies whether the editor can be modified or not\n     **/\n    setReadOnly(readOnly) {\n        this.setOption(\"readOnly\", readOnly);\n    }\n\n    /**\n     * Returns `true` if the editor is set to read-only mode.\n     * @returns {Boolean}\n     **/\n    getReadOnly() {\n        return this.getOption(\"readOnly\");\n    }\n\n    /**\n     * Specifies whether to use behaviors or not. [\"Behaviors\" in this case is the auto-pairing of special characters, like quotation marks, parenthesis, or brackets.]{: #BehaviorsDef}\n     * @param {Boolean} enabled Enables or disables behaviors\n     **/\n    setBehavioursEnabled(enabled) {\n        this.setOption(\"behavioursEnabled\", enabled);\n    }\n\n    /**\n     * Returns `true` if the behaviors are currently enabled. {:BehaviorsDef}\n     * @returns {Boolean}\n     **/\n    getBehavioursEnabled() {\n        return this.getOption(\"behavioursEnabled\");\n    }\n\n    /**\n     * Specifies whether to use wrapping behaviors or not, i.e. automatically wrapping the selection with characters such as brackets\n     * when such a character is typed in.\n     * @param {Boolean} enabled Enables or disables wrapping behaviors\n     **/\n    setWrapBehavioursEnabled(enabled) {\n        this.setOption(\"wrapBehavioursEnabled\", enabled);\n    }\n\n    /**\n     * Returns `true` if the wrapping behaviors are currently enabled.\n     * @returns {boolean}\n     **/\n    getWrapBehavioursEnabled() {\n        return this.getOption(\"wrapBehavioursEnabled\");\n    }\n\n    /**\n     * Indicates whether the fold widgets should be shown or not.\n     * @param {Boolean} show Specifies whether the fold widgets are shown\n     **/\n    setShowFoldWidgets(show) {\n        this.setOption(\"showFoldWidgets\", show);\n\n    }\n    /**\n     * Returns `true` if the fold widgets are shown.\n     * @return {Boolean}\n     **/\n    getShowFoldWidgets() {\n        return this.getOption(\"showFoldWidgets\");\n    }\n\n    /**\n     * @param {boolean} fade\n     */\n    setFadeFoldWidgets(fade) {\n        this.setOption(\"fadeFoldWidgets\", fade);\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    getFadeFoldWidgets() {\n        return this.getOption(\"fadeFoldWidgets\");\n    }\n\n    /**\n     * Removes the current selection or one character.\n     * @param {'left' | 'right'} [dir] The direction of the deletion to occur, either \"left\" or \"right\"\n     **/\n    remove(dir) {\n        if (this.selection.isEmpty()){\n            if (dir == \"left\")\n                this.selection.selectLeft();\n            else\n                this.selection.selectRight();\n        }\n\n        var range = this.getSelectionRange();\n        if (this.getBehavioursEnabled()) {\n            var session = this.session;\n            var state = session.getState(range.start.row);\n            var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);\n\n            if (range.end.column === 0) {\n                var text = session.getTextRange(range);\n                if (text[text.length - 1] == \"\\n\") {\n                    var line = session.getLine(range.end.row);\n                    if (/^\\s+$/.test(line)) {\n                        range.end.column = line.length;\n                    }\n                }\n            }\n            if (new_range)\n                // @ts-expect-error TODO: possible bug, new_range could be not a Range\n                range = new_range;\n        }\n\n        this.session.remove(range);\n        this.clearSelection();\n    }\n\n    /**\n     * Removes the word directly to the right of the current selection.\n     **/\n    removeWordRight() {\n        if (this.selection.isEmpty())\n            this.selection.selectWordRight();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    }\n\n    /**\n     * Removes the word directly to the left of the current selection.\n     **/\n    removeWordLeft() {\n        if (this.selection.isEmpty())\n            this.selection.selectWordLeft();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    }\n\n    /**\n     * Removes all the words to the left of the current selection, until the start of the line.\n     **/\n    removeToLineStart() {\n        if (this.selection.isEmpty())\n            this.selection.selectLineStart();\n        if (this.selection.isEmpty())\n            this.selection.selectLeft();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    }\n\n    /**\n     * Removes all the words to the right of the current selection, until the end of the line.\n     **/\n    removeToLineEnd() {\n        if (this.selection.isEmpty())\n            this.selection.selectLineEnd();\n\n        var range = this.getSelectionRange();\n        if (range.start.column == range.end.column && range.start.row == range.end.row) {\n            range.end.column = 0;\n            range.end.row++;\n        }\n\n        this.session.remove(range);\n        this.clearSelection();\n    }\n\n    /**\n     * Splits the line at the current selection (by inserting an `'\\n'`).\n     **/\n    splitLine() {\n        if (!this.selection.isEmpty()) {\n            this.session.remove(this.getSelectionRange());\n            this.clearSelection();\n        }\n\n        var cursor = this.getCursorPosition();\n        this.insert(\"\\n\");\n        this.moveCursorToPosition(cursor);\n    }\n\n    /**\n     * Set the \"ghost\" text in provided position. \"Ghost\" text is a kind of\n     * preview text inside the editor which can be used to preview some code\n     * inline in the editor such as, for example, code completions.\n     *\n     * @param {String} text Text to be inserted as \"ghost\" text\n     * @param {Point} [position] Position to insert text to\n     */\n    setGhostText(text, position) {\n        this.renderer.setGhostText(text, position);\n    }\n\n    /**\n     * Removes \"ghost\" text currently displayed in the editor.\n     */\n    removeGhostText() {\n        this.renderer.removeGhostText();\n    }\n\n    /**\n     * Transposes current line.\n     **/\n    transposeLetters() {\n        if (!this.selection.isEmpty()) {\n            return;\n        }\n\n        var cursor = this.getCursorPosition();\n        var column = cursor.column;\n        if (column === 0)\n            return;\n\n        var line = this.session.getLine(cursor.row);\n        var swap, range;\n        if (column < line.length) {\n            swap = line.charAt(column) + line.charAt(column-1);\n            range = new Range(cursor.row, column-1, cursor.row, column+1);\n        }\n        else {\n            swap = line.charAt(column-1) + line.charAt(column-2);\n            range = new Range(cursor.row, column-2, cursor.row, column);\n        }\n        this.session.replace(range, swap);\n        this.session.selection.moveToPosition(range.end);\n    }\n\n    /**\n     * Converts the current selection entirely into lowercase.\n     **/\n    toLowerCase() {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toLowerCase());\n        this.selection.setSelectionRange(originalRange);\n    }\n\n    /**\n     * Converts the current selection entirely into uppercase.\n     **/\n    toUpperCase() {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toUpperCase());\n        this.selection.setSelectionRange(originalRange);\n    }\n\n    /**\n     * Inserts an indentation into the current cursor position or indents the selected lines.\n     *\n     * @related EditSession.indentRows\n     **/\n    indent() {\n        var session = this.session;\n        var range = this.getSelectionRange();\n\n        if (range.start.row < range.end.row) {\n            var rows = this.$getSelectedRows();\n            session.indentRows(rows.first, rows.last, \"\\t\");\n            return;\n        } else if (range.start.column < range.end.column) {\n            var text = session.getTextRange(range);\n            if (!/^\\s+$/.test(text)) {\n                var rows = this.$getSelectedRows();\n                session.indentRows(rows.first, rows.last, \"\\t\");\n                return;\n            }\n        }\n\n        var line = session.getLine(range.start.row);\n        var position = range.start;\n        var size = session.getTabSize();\n        var column = session.documentToScreenColumn(position.row, position.column);\n\n        if (this.session.getUseSoftTabs()) {\n            var count = (size - column % size);\n            var indentString = lang.stringRepeat(\" \", count);\n        } else {\n            var count = column % size;\n            while (line[range.start.column - 1] == \" \" && count) {\n                range.start.column--;\n                count--;\n            }\n            this.selection.setSelectionRange(range);\n            indentString = \"\\t\";\n        }\n        return this.insert(indentString);\n    }\n\n    /**\n     * Indents the current line.\n     * @related EditSession.indentRows\n     **/\n    blockIndent() {\n        var rows = this.$getSelectedRows();\n        this.session.indentRows(rows.first, rows.last, \"\\t\");\n    }\n\n    /**\n     * Outdents the current line.\n     * @related EditSession.outdentRows\n     **/\n    blockOutdent() {\n        var selection = this.session.getSelection();\n        this.session.outdentRows(selection.getRange());\n    }\n\n    // TODO: move out of core when we have good mechanism for managing extensions\n    sortLines() {\n        var rows = this.$getSelectedRows();\n        var session = this.session;\n\n        var lines = [];\n        for (var i = rows.first; i <= rows.last; i++)\n            lines.push(session.getLine(i));\n\n        lines.sort(function(a, b) {\n            if (a.toLowerCase() < b.toLowerCase()) return -1;\n            if (a.toLowerCase() > b.toLowerCase()) return 1;\n            return 0;\n        });\n\n        var deleteRange = new Range(0, 0, 0, 0);\n        for (var i = rows.first; i <= rows.last; i++) {\n            var line = session.getLine(i);\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            deleteRange.end.column = line.length;\n            session.replace(deleteRange, lines[i-rows.first]);\n        }\n    }\n\n    /**\n     * Given the currently selected range, this function either comments all the lines, or uncomments all of them.\n     **/\n    toggleCommentLines() {\n        var state = this.session.getState(this.getCursorPosition().row);\n        var rows = this.$getSelectedRows();\n        this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);\n    }\n\n    toggleBlockComment() {\n        var cursor = this.getCursorPosition();\n        var state = this.session.getState(cursor.row);\n        var range = this.getSelectionRange();\n        this.session.getMode().toggleBlockComment(state, this.session, range, cursor);\n    }\n\n    /**\n     * Works like [[EditSession.getTokenAt]], except it returns a number.\n     * @returns {any}\n     **/\n    getNumberAt(row, column) {\n        var _numberRx = /[\\-]?[0-9]+(?:\\.[0-9]+)?/g;\n        _numberRx.lastIndex = 0;\n\n        var s = this.session.getLine(row);\n        while (_numberRx.lastIndex < column) {\n            var m = _numberRx.exec(s);\n            if(m.index <= column && m.index+m[0].length >= column){\n                var number = {\n                    value: m[0],\n                    start: m.index,\n                    end: m.index+m[0].length\n                };\n                return number;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * If the character before the cursor is a number, this functions changes its value by `amount`.\n     * @param {Number} amount The value to change the numeral by (can be negative to decrease value)\n     **/\n    modifyNumber(amount) {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n\n        // get the char before the cursor\n        var charRange = new Range(row, column-1, row, column);\n\n        var c = this.session.getTextRange(charRange);\n        // if the char is a digit\n        // @ts-ignore\n        if (!isNaN(parseFloat(c)) && isFinite(c)) {\n            // get the whole number the digit is part of\n            var nr = this.getNumberAt(row, column);\n            // if number found\n            if (nr) {\n                var fp = nr.value.indexOf(\".\") >= 0 ? nr.start + nr.value.indexOf(\".\") + 1 : nr.end;\n                var decimals = nr.start + nr.value.length - fp;\n\n                var t = parseFloat(nr.value);\n                t *= Math.pow(10, decimals);\n\n\n                if(fp !== nr.end && column < fp){\n                    amount *= Math.pow(10, nr.end - column - 1);\n                } else {\n                    amount *= Math.pow(10, nr.end - column);\n                }\n\n                t += amount;\n                t /= Math.pow(10, decimals);\n                var nnr = t.toFixed(decimals);\n\n                //update number\n                var replaceRange = new Range(row, nr.start, row, nr.end);\n                this.session.replace(replaceRange, nnr);\n\n                //reposition the cursor\n                this.moveCursorTo(row, Math.max(nr.start +1, column + nnr.length - nr.value.length));\n\n            }\n        } else {\n            this.toggleWord();\n        }\n    }\n\n    /**\n     */\n    toggleWord() {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        this.selection.selectWord();\n        var currentState = this.getSelectedText();\n        var currWordStart = this.selection.getWordRange().start.column;\n        var wordParts = currentState.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g, '$1 ').split(/\\s/);\n        var delta = column - currWordStart - 1;\n        if (delta < 0) delta = 0;\n        var curLength = 0, itLength = 0;\n        var that = this;\n        if (currentState.match(/[A-Za-z0-9_]+/)) {\n            wordParts.forEach(function (item, i) {\n                itLength = curLength + item.length;\n                if (delta >= curLength && delta <= itLength) {\n                    currentState = item;\n                    that.selection.clearSelection();\n                    that.moveCursorTo(row, curLength + currWordStart);\n                    that.selection.selectTo(row, itLength + currWordStart);\n                }\n                curLength = itLength;\n            });\n        }\n\n        var wordPairs = this.$toggleWordPairs;\n        var reg;\n        for (var i = 0; i < wordPairs.length; i++) {\n            var item = wordPairs[i];\n            for (var j = 0; j <= 1; j++) {\n                var negate = +!j;\n                var firstCondition = currentState.match(new RegExp('^\\\\s?_?(' + lang.escapeRegExp(item[j]) + ')\\\\s?$', 'i'));\n                if (firstCondition) {\n                    var secondCondition = currentState.match(new RegExp('([_]|^|\\\\s)(' + lang.escapeRegExp(firstCondition[1]) + ')($|\\\\s)', 'g'));\n                    if (secondCondition) {\n                        reg = currentState.replace(new RegExp(lang.escapeRegExp(item[j]), 'i'), function (result) {\n                            var res = item[negate];\n                            if (result.toUpperCase() == result) {\n                                res = res.toUpperCase();\n                            } else if (result.charAt(0).toUpperCase() == result.charAt(0)) {\n                                res = res.substr(0, 0) + item[negate].charAt(0).toUpperCase() + res.substr(1);\n                            }\n                            return res;\n                        });\n                        this.insert(reg);\n                        reg = \"\";\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Finds link at defined {row} and {column}\n     * @returns {String}\n     **/\n    findLinkAt(row, column) {\n        var line = this.session.getLine(row);\n        var wordParts = line.split(/((?:https?|ftp):\\/\\/[\\S]+)/);\n        var columnPosition = column;\n        if (columnPosition < 0) columnPosition = 0;\n        var previousPosition = 0, currentPosition = 0, match;\n        for (let item of wordParts) {\n            currentPosition = previousPosition + item.length;\n            if (columnPosition >= previousPosition && columnPosition <= currentPosition) {\n                if (item.match(/((?:https?|ftp):\\/\\/[\\S]+)/)) {\n                    match = item.replace(/[\\s:.,'\";}\\]]+$/, \"\");\n                    break;\n                }\n            }\n            previousPosition = currentPosition;\n        }\n        return match;\n    }\n\n    /**\n     * Open valid url under cursor in another tab\n     * @returns {Boolean}\n     **/\n    openLink() {\n        var cursor =  this.selection.getCursor();\n        var url = this.findLinkAt(cursor.row, cursor.column);\n        if (url)\n            window.open(url, '_blank');\n        return url != null;\n    }\n\n    /**\n     * Removes all the lines in the current selection\n     * @related EditSession.remove\n     **/\n    removeLines() {\n        var rows = this.$getSelectedRows();\n        this.session.removeFullLines(rows.first, rows.last);\n        this.clearSelection();\n    }\n\n    duplicateSelection() {\n        var sel = this.selection;\n        var doc = this.session;\n        var range = sel.getRange();\n        var reverse = sel.isBackwards();\n        if (range.isEmpty()) {\n            var row = range.start.row;\n            doc.duplicateLines(row, row);\n        } else {\n            var point = reverse ? range.start : range.end;\n            var endPoint = doc.insert(point, doc.getTextRange(range));\n            range.start = point;\n            range.end = endPoint;\n\n            sel.setSelectionRange(range, reverse);\n        }\n    }\n\n    /**\n     * Shifts all the selected lines down one row.\n     *\n     * @related EditSession.moveLinesUp\n     **/\n    moveLinesDown() {\n        this.$moveLines(1, false);\n    }\n\n    /**\n     * Shifts all the selected lines up one row.\n     * @related EditSession.moveLinesDown\n     **/\n    moveLinesUp() {\n        this.$moveLines(-1, false);\n    }\n\n    /**\n     * Moves a range of text from the given range to the given position. `toPosition` is an object that looks like this:\n     * ```json\n     *    { row: newRowLocation, column: newColumnLocation }\n     * ```\n     * @param {Range} range The range of text you want moved within the document\n     * @param {Point} toPosition The location (row and column) where you want to move the text to\n     * @param {boolean} [copy]\n     *\n     * @returns {Range} The new range where the text was moved to.\n     * @related EditSession.moveText\n     **/\n    moveText(range, toPosition, copy) {\n        return this.session.moveText(range, toPosition, copy);\n    }\n\n    /**\n     * Copies all the selected lines up one row.\n     *\n     **/\n   copyLinesUp() {\n        this.$moveLines(-1, true);\n    }\n\n    /**\n     * Copies all the selected lines down one row.\n     * @related EditSession.duplicateLines\n     *\n     **/\n    copyLinesDown() {\n        this.$moveLines(1, true);\n    }\n\n    /**\n     * for internal use\n     * @ignore\n     *\n     **/\n    $moveLines(dir, copy) {\n        var rows, moved;\n        var selection = this.selection;\n        if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {\n            var range = selection.toOrientedRange();\n            rows = this.$getSelectedRows(range);\n            moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);\n            if (copy && dir == -1) moved = 0;\n            range.moveBy(moved, 0);\n            selection.fromOrientedRange(range);\n        } else {\n            var ranges = selection.rangeList.ranges;\n            // @ts-expect-error TODO: possible bug, no args in parameters\n            selection.rangeList.detach(this.session);\n            this.inVirtualSelectionMode = true;\n\n            var diff = 0;\n            var totalDiff = 0;\n            var l = ranges.length;\n            for (var i = 0; i < l; i++) {\n                var rangeIndex = i;\n                ranges[i].moveBy(diff, 0);\n                rows = this.$getSelectedRows(ranges[i]);\n                var first = rows.first;\n                var last = rows.last;\n                while (++i < l) {\n                    if (totalDiff) ranges[i].moveBy(totalDiff, 0);\n                    var subRows = this.$getSelectedRows(ranges[i]);\n                    if (copy && subRows.first != last)\n                        break;\n                    else if (!copy && subRows.first > last + 1)\n                        break;\n                    last = subRows.last;\n                }\n                i--;\n                diff = this.session.$moveLines(first, last, copy ? 0 : dir);\n                if (copy && dir == -1) rangeIndex = i + 1;\n                while (rangeIndex <= i) {\n                    ranges[rangeIndex].moveBy(diff, 0);\n                    rangeIndex++;\n                }\n                if (!copy) diff = 0;\n                totalDiff += diff;\n            }\n\n            selection.fromOrientedRange(selection.ranges[0]);\n            selection.rangeList.attach(this.session);\n            this.inVirtualSelectionMode = false;\n        }\n    }\n\n    /**\n     * Returns an object indicating the currently selected rows. The object looks like this:\n     *\n     * ```json\n     * { first: range.start.row, last: range.end.row }\n     * ```\n     *\n     * @returns {Object}\n     **/\n    $getSelectedRows(range) {\n        range = (range || this.getSelectionRange()).collapseRows();\n\n        return {\n            first: this.session.getRowFoldStart(range.start.row),\n            last: this.session.getRowFoldEnd(range.end.row)\n        };\n    }\n\n    /**\n     * @internal\n     */\n    onCompositionStart(compositionState) {\n        this.renderer.showComposition(compositionState);\n    }\n\n    /**\n     * @internal\n     */\n    onCompositionUpdate(text) {\n        this.renderer.setCompositionText(text);\n    }\n\n    /**\n     * @internal\n     */\n    onCompositionEnd() {\n        this.renderer.hideComposition();\n    }\n\n    /**\n     * {:VirtualRenderer.getFirstVisibleRow}\n     *\n     * @returns {Number}\n     * @related VirtualRenderer.getFirstVisibleRow\n     **/\n    getFirstVisibleRow() {\n        return this.renderer.getFirstVisibleRow();\n    }\n\n    /**\n     * {:VirtualRenderer.getLastVisibleRow}\n     *\n     * @returns {Number}\n     * @related VirtualRenderer.getLastVisibleRow\n     **/\n    getLastVisibleRow() {\n        return this.renderer.getLastVisibleRow();\n    }\n\n    /**\n     * Indicates if the row is currently visible on the screen.\n     * @param {Number} row The row to check\n     *\n     * @returns {Boolean}\n     **/\n    isRowVisible(row) {\n        return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());\n    }\n\n    /**\n     * Indicates if the entire row is currently visible on the screen.\n     * @param {Number} row The row to check\n     *\n     *\n     * @returns {Boolean}\n     **/\n    isRowFullyVisible(row) {\n        return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());\n    }\n\n    /**\n     * Returns the number of currently visible rows.\n     * @returns {Number}\n     **/\n    $getVisibleRowCount() {\n        return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;\n    }\n\n    $moveByPage(dir, select) {\n        var renderer = this.renderer;\n        var config = this.renderer.layerConfig;\n        var rows = dir * Math.floor(config.height / config.lineHeight);\n\n        if (select === true) {\n            this.selection.$moveSelection(function(){\n                this.moveCursorBy(rows, 0);\n            });\n        } else if (select === false) {\n            this.selection.moveCursorBy(rows, 0);\n            this.selection.clearSelection();\n        }\n\n        var scrollTop = renderer.scrollTop;\n\n        renderer.scrollBy(0, rows * config.lineHeight);\n        if (select != null)\n            renderer.scrollCursorIntoView(null, 0.5);\n\n        renderer.animateScrolling(scrollTop);\n    }\n\n    /**\n     * Selects the text from the current position of the document until where a \"page down\" finishes.\n     **/\n    selectPageDown() {\n        this.$moveByPage(1, true);\n    }\n\n    /**\n     * Selects the text from the current position of the document until where a \"page up\" finishes.\n     **/\n    selectPageUp() {\n        this.$moveByPage(-1, true);\n    }\n\n    /**\n     * Shifts the document to wherever \"page down\" is, as well as moving the cursor position.\n     **/\n    gotoPageDown() {\n       this.$moveByPage(1, false);\n    }\n\n    /**\n     * Shifts the document to wherever \"page up\" is, as well as moving the cursor position.\n     **/\n    gotoPageUp() {\n        this.$moveByPage(-1, false);\n    }\n\n    /**\n     * Scrolls the document to wherever \"page down\" is, without changing the cursor position.\n     **/\n    scrollPageDown() {\n        this.$moveByPage(1);\n    }\n\n    /**\n     * Scrolls the document to wherever \"page up\" is, without changing the cursor position.\n     **/\n    scrollPageUp() {\n        this.$moveByPage(-1);\n    }\n\n    /**\n     * Moves the editor to the specified row.\n     * @related VirtualRenderer.scrollToRow\n     * @param {number} row\n     */\n    scrollToRow(row) {\n        this.renderer.scrollToRow(row);\n    }\n\n    /**\n     * Scrolls to a line. If `center` is `true`, it puts the line in middle of screen (or attempts to).\n     * @param {Number} line The line to scroll to\n     * @param {Boolean} center If `true`\n     * @param {Boolean} animate If `true` animates scrolling\n     * @param {() => void} [callback] Function to be called when the animation has finished\n     *\n     * @related VirtualRenderer.scrollToLine\n     **/\n    scrollToLine(line, center, animate, callback) {\n        this.renderer.scrollToLine(line, center, animate, callback);\n    }\n\n    /**\n     * Attempts to center the current selection on the screen.\n     **/\n    centerSelection() {\n        var range = this.getSelectionRange();\n        var pos = {\n            row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),\n            column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)\n        };\n        this.renderer.alignCursor(pos, 0.5);\n    }\n\n    /**\n     * Gets the current position of the cursor.\n     * @returns {Point} An object that looks something like this:\n     *\n     * ```json\n     * { row: currRow, column: currCol }\n     * ```\n     *\n     * @related Selection.getCursor\n     **/\n    getCursorPosition() {\n        return this.selection.getCursor();\n    }\n\n    /**\n     * Returns the screen position of the cursor.\n     * @returns {Point}\n     * @related EditSession.documentToScreenPosition\n     **/\n    getCursorPositionScreen() {\n        return this.session.documentToScreenPosition(this.getCursorPosition());\n    }\n\n    /**\n     * {:Selection.getRange}\n     * @returns {Range}\n     * @related Selection.getRange\n     **/\n    getSelectionRange() {\n        return this.selection.getRange();\n    }\n\n    /**\n     * Selects all the text in editor.\n     * @related Selection.selectAll\n     **/\n    selectAll() {\n        this.selection.selectAll();\n    }\n\n    /**\n     * {:Selection.clearSelection}\n     * @related Selection.clearSelection\n     **/\n    clearSelection() {\n        this.selection.clearSelection();\n    }\n\n    /**\n     * Moves the cursor to the specified row and column. Note that this does not de-select the current selection.\n     * @param {Number} row The new row number\n     * @param {Number} column The new column number\n     * @related Selection.moveCursorTo\n     **/\n    moveCursorTo(row, column) {\n        this.selection.moveCursorTo(row, column);\n    }\n\n    /**\n     * Moves the cursor to the position indicated by `pos.row` and `pos.column`.\n     * @param {Point} pos An object with two properties, row and column\n     * @related Selection.moveCursorToPosition\n     **/\n    moveCursorToPosition(pos) {\n        this.selection.moveCursorToPosition(pos);\n    }\n\n    /**\n     * Moves the cursor's row and column to the next matching bracket or HTML tag.\n     * @param {boolean} [select]\n     * @param {boolean} [expand]\n     */\n    jumpToMatching(select, expand) {\n        var cursor = this.getCursorPosition();\n        var iterator = new TokenIterator(this.session, cursor.row, cursor.column);\n        var prevToken = iterator.getCurrentToken();\n        var tokenCount = 0;\n        if (prevToken && prevToken.type.indexOf('tag-name') !== -1) {\n            prevToken = iterator.stepBackward();\n        }\n        var token = prevToken || iterator.stepForward();\n\n        if (!token) return;\n\n        //get next closing tag or bracket\n        var matchType;\n        var found = false;\n        var depth = {};\n        var i = cursor.column - token.start;\n        var bracketType;\n        var brackets = {\n            \")\": \"(\",\n            \"(\": \"(\",\n            \"]\": \"[\",\n            \"[\": \"[\",\n            \"{\": \"{\",\n            \"}\": \"{\"\n        };\n\n        do {\n            if (token.value.match(/[{}()\\[\\]]/g)) {\n                for (; i < token.value.length && !found; i++) {\n                    if (!brackets[token.value[i]]) {\n                        continue;\n                    }\n\n                    bracketType = brackets[token.value[i]] + '.' + token.type.replace(\"rparen\", \"lparen\");\n\n                    if (isNaN(depth[bracketType])) {\n                        depth[bracketType] = 0;\n                    }\n\n                    switch (token.value[i]) {\n                        case '(':\n                        case '[':\n                        case '{':\n                            depth[bracketType]++;\n                            break;\n                        case ')':\n                        case ']':\n                        case '}':\n                            depth[bracketType]--;\n\n                            if (depth[bracketType] === -1) {\n                                matchType = 'bracket';\n                                found = true;\n                            }\n                            break;\n                    }\n                }\n            }\n            else if (token.type.indexOf('tag-name') !== -1) {\n                if (isNaN(depth[token.value])) {\n                    depth[token.value] = 0;\n                }\n\n                if (prevToken.value === '<' && tokenCount > 1) {\n                    depth[token.value]++;\n                }\n                else if (prevToken.value === '</') {\n                    depth[token.value]--;\n                }\n\n                if (depth[token.value] === -1) {\n                    matchType = 'tag';\n                    found = true;\n                }\n            }\n\n            if (!found) {\n                prevToken = token;\n                tokenCount++;\n                token = iterator.stepForward();\n                i = 0;\n            }\n        } while (token && !found);\n\n        //no match found\n        if (!matchType) return;\n\n        var range, pos;\n        if (matchType === 'bracket') {\n            range = this.session.getBracketRange(cursor);\n            if (!range) {\n                range = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1,\n                    iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1\n                );\n                pos = range.start;\n                if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column)\n                    < 2) range = this.session.getBracketRange(pos);\n            }\n        }\n        else if (matchType === 'tag') {\n            if (!token || token.type.indexOf('tag-name') === -1) return;\n            range = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2,\n                iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2\n            );\n\n            //find matching tag\n            if (range.compare(cursor.row, cursor.column) === 0) {\n                var tagsRanges = this.session.getMatchingTags(cursor);\n                if (tagsRanges) {\n                    if (tagsRanges.openTag.contains(cursor.row, cursor.column)) {\n                        range = tagsRanges.closeTag;\n                        pos = range.start;\n                    }\n                    else {\n                        range = tagsRanges.openTag;\n                        if (tagsRanges.closeTag.start.row === cursor.row && tagsRanges.closeTag.start.column\n                            === cursor.column) pos = range.end; else pos = range.start;\n                    }\n                }\n            }\n\n            //we found it\n            pos = pos || range.start;\n        }\n\n        pos = range && range.cursor || pos;\n        if (pos) {\n            if (select) {\n                if (range && expand) {\n                    this.selection.setRange(range);\n                }\n                else if (range && range.isEqual(this.getSelectionRange())) {\n                    this.clearSelection();\n                }\n                else {\n                    this.selection.selectTo(pos.row, pos.column);\n                }\n            }\n            else {\n                this.selection.moveTo(pos.row, pos.column);\n            }\n        }\n    }\n\n    /**\n     * Moves the cursor to the specified line number, and also into the indicated column.\n     * @param {Number} lineNumber The line number to go to\n     * @param {Number} [column] A column number to go to\n     * @param {Boolean} [animate] If `true` animates scolling\n     **/\n    gotoLine(lineNumber, column, animate) {\n        this.selection.clearSelection();\n        this.session.unfold({row: lineNumber - 1, column: column || 0});\n\n        // todo: find a way to automatically exit multiselect mode\n        this.exitMultiSelectMode && this.exitMultiSelectMode();\n        this.moveCursorTo(lineNumber - 1, column || 0);\n\n        if (!this.isRowFullyVisible(lineNumber - 1))\n            this.scrollToLine(lineNumber - 1, true, animate);\n    }\n\n    /**\n     * Moves the cursor to the specified row and column. Note that this does de-select the current selection.\n     * @param {Number} row The new row number\n     * @param {Number} column The new column number\n     *\n     * @related Editor.moveCursorTo\n     **/\n    navigateTo(row, column) {\n        this.selection.moveTo(row, column);\n    }\n\n    /**\n     * Moves the cursor up in the document the specified number of times. Note that this does de-select the current selection.\n     * @param {Number} [times] The number of times to change navigation\n     *\n     **/\n    navigateUp(times) {\n        if (this.selection.isMultiLine() && !this.selection.isBackwards()) {\n            var selectionStart = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionStart);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(-times || -1, 0);\n    }\n\n    /**\n     * Moves the cursor down in the document the specified number of times. Note that this does de-select the current selection.\n     * @param {Number} [times] The number of times to change navigation\n     *\n     **/\n    navigateDown(times) {\n        if (this.selection.isMultiLine() && this.selection.isBackwards()) {\n            var selectionEnd = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionEnd);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(times || 1, 0);\n    }\n\n    /**\n     * Moves the cursor left in the document the specified number of times. Note that this does de-select the current selection.\n     * @param {Number} [times] The number of times to change navigation\n     *\n     **/\n    navigateLeft(times) {\n        if (!this.selection.isEmpty()) {\n            var selectionStart = this.getSelectionRange().start;\n            this.moveCursorToPosition(selectionStart);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorLeft();\n            }\n        }\n        this.clearSelection();\n    }\n\n    /**\n     * Moves the cursor right in the document the specified number of times. Note that this does de-select the current selection.\n     * @param {Number} [times] The number of times to change navigation\n     *\n     **/\n    navigateRight(times) {\n        if (!this.selection.isEmpty()) {\n            var selectionEnd = this.getSelectionRange().end;\n            this.moveCursorToPosition(selectionEnd);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorRight();\n            }\n        }\n        this.clearSelection();\n    }\n\n    /**\n     *\n     * Moves the cursor to the start of the current line. Note that this does de-select the current selection.\n     **/\n    navigateLineStart() {\n        this.selection.moveCursorLineStart();\n        this.clearSelection();\n    }\n\n    /**\n     *\n     * Moves the cursor to the end of the current line. Note that this does de-select the current selection.\n     **/\n    navigateLineEnd() {\n        this.selection.moveCursorLineEnd();\n        this.clearSelection();\n    }\n\n    /**\n     *\n     * Moves the cursor to the end of the current file. Note that this does de-select the current selection.\n     **/\n    navigateFileEnd() {\n        this.selection.moveCursorFileEnd();\n        this.clearSelection();\n    }\n\n    /**\n     *\n     * Moves the cursor to the start of the current file. Note that this does de-select the current selection.\n     **/\n    navigateFileStart() {\n        this.selection.moveCursorFileStart();\n        this.clearSelection();\n    }\n\n    /**\n     *\n     * Moves the cursor to the word immediately to the right of the current position. Note that this does de-select the current selection.\n     **/\n    navigateWordRight() {\n        this.selection.moveCursorWordRight();\n        this.clearSelection();\n    }\n\n    /**\n     *\n     * Moves the cursor to the word immediately to the left of the current position. Note that this does de-select the current selection.\n     **/\n    navigateWordLeft() {\n        this.selection.moveCursorWordLeft();\n        this.clearSelection();\n    }\n\n    /**\n     * Replaces the first occurrence of `options.needle` with the value in `replacement`.\n     * @param {String} [replacement] The text to replace with\n     * @param {Partial<SearchOptions>} [options] The [[Search `Search`]] options to use\n     * @return {number}\n     **/\n    replace(replacement, options) {\n        if (options)\n            this.$search.set(options);\n\n        var range = this.$search.find(this.session);\n        var replaced = 0;\n        if (!range)\n            return replaced;\n\n        if (this.$tryReplace(range, replacement)) {\n            replaced = 1;\n        }\n\n        this.selection.setSelectionRange(range);\n        this.renderer.scrollSelectionIntoView(range.start, range.end);\n\n        return replaced;\n    }\n\n    /**\n     * Replaces all occurrences of `options.needle` with the value in `replacement`.\n     * @param {String} [replacement] The text to replace with\n     * @param {Partial<SearchOptions>} [options] The [[Search `Search`]] options to use\n     * @return {number}\n     **/\n    replaceAll(replacement, options) {\n        if (options) {\n            this.$search.set(options);\n        }\n\n        var ranges = this.$search.findAll(this.session);\n        var replaced = 0;\n        if (!ranges.length)\n            return replaced;\n\n        var selection = this.getSelectionRange();\n        this.selection.moveTo(0, 0);\n\n        for (var i = ranges.length - 1; i >= 0; --i) {\n            if(this.$tryReplace(ranges[i], replacement)) {\n                replaced++;\n            }\n        }\n\n        this.selection.setSelectionRange(selection);\n\n        return replaced;\n    }\n\n    /**\n     * @param {import(\"../ace-internal\").Ace.IRange} range\n     * @param {string} [replacement]\n     */\n    $tryReplace(range, replacement) {\n        var input = this.session.getTextRange(range);\n        replacement = this.$search.replace(input, replacement);\n        if (replacement !== null) {\n            range.end = this.session.replace(range, replacement);\n            return range;\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * {:Search.getOptions} For more information on `options`, see [[Search `Search`]].\n     * @related Search.getOptions\n     * @returns {Partial<SearchOptions>}\n     **/\n    getLastSearchOptions() {\n        return this.$search.getOptions();\n    }\n\n    /**\n     * Attempts to find `needle` within the document. For more information on `options`, see [[Search `Search`]].\n     * @param {String|RegExp|Object} needle The text to search for (optional)\n     * @param {Partial<SearchOptions>} [options] An object defining various search properties\n     * @param {Boolean} [animate] If `true` animate scrolling\n     * @related Search.find\n     **/\n    find(needle, options, animate) {\n        if (!options)\n            options = {};\n\n        if (typeof needle == \"string\" || needle instanceof RegExp)\n            options.needle = needle;\n        else if (typeof needle == \"object\")\n            oop.mixin(options, needle);\n\n        var range = this.selection.getRange();\n        if (options.needle == null) {\n            needle = this.session.getTextRange(range)\n                || this.$search.$options.needle;\n            if (!needle) {\n                range = this.session.getWordRange(range.start.row, range.start.column);\n                needle = this.session.getTextRange(range);\n            }\n            this.$search.set({needle: needle});\n        }\n\n        this.$search.set(options);\n        if (!options.start)\n            this.$search.set({start: range});\n\n        var newRange = this.$search.find(this.session);\n        if (options.preventScroll)\n            return newRange;\n        if (newRange) {\n            this.revealRange(newRange, animate);\n            return newRange;\n        }\n        // clear selection if nothing is found\n        if (options.backwards)\n            range.start = range.end;\n        else\n            range.end = range.start;\n        this.selection.setRange(range);\n    }\n\n    /**\n     * Performs another search for `needle` in the document. For more information on `options`, see [[Search `Search`]].\n     * @param {Partial<SearchOptions>} [options] search options\n     * @param {Boolean} [animate] If `true` animate scrolling\n     *\n     * @related Editor.find\n     **/\n    findNext(options, animate) {\n        this.find({skipCurrent: true, backwards: false}, options, animate);\n    }\n\n    /**\n     * Performs a search for `needle` backwards. For more information on `options`, see [[Search `Search`]].\n     * @param {Partial<SearchOptions>} [options] search options\n     * @param {Boolean} [animate] If `true` animate scrolling\n     *\n     * @related Editor.find\n     **/\n    findPrevious(options, animate) {\n        this.find(options, {skipCurrent: true, backwards: true}, animate);\n    }\n\n    /**\n     *\n     * @param {Range} range\n     * @param {boolean} [animate]\n     */\n    revealRange(range, animate) {\n        this.session.unfold(range);\n        this.selection.setSelectionRange(range);\n\n        var scrollTop = this.renderer.scrollTop;\n        this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);\n        if (animate !== false)\n            this.renderer.animateScrolling(scrollTop);\n    }\n\n    /**\n     * {:UndoManager.undo}\n     * @related UndoManager.undo\n     **/\n    undo() {\n        this.session.getUndoManager().undo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    }\n\n    /**\n     * {:UndoManager.redo}\n     * @related UndoManager.redo\n     **/\n    redo() {\n        this.session.getUndoManager().redo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    }\n\n    /**\n     *\n     * Cleans up the entire editor.\n     **/\n    destroy() {\n        if (this.$toDestroy) {\n            this.$toDestroy.forEach(function(el) {\n                el.destroy();\n            });\n            this.$toDestroy = null;\n        }\n        if (this.$mouseHandler)\n            this.$mouseHandler.destroy();\n        this.renderer.destroy();\n        this._signal(\"destroy\", this);\n        if (this.session)\n            this.session.destroy();\n        if (this._$emitInputEvent)\n            this._$emitInputEvent.cancel();\n        this.removeAllListeners();\n\n    }\n\n    /**\n     * Enables automatic scrolling of the cursor into view when editor itself is inside scrollable element\n     * @param {Boolean} enable default true\n     **/\n    setAutoScrollEditorIntoView(enable) {\n        if (!enable)\n            return;\n        var rect;\n        var self = this;\n        var shouldScroll = false;\n        if (!this.$scrollAnchor)\n            this.$scrollAnchor = document.createElement(\"div\");\n        var scrollAnchor = this.$scrollAnchor;\n        scrollAnchor.style.cssText = \"position:absolute\";\n        this.container.insertBefore(scrollAnchor, this.container.firstChild);\n        var onChangeSelection = this.on(\"changeSelection\", function() {\n            shouldScroll = true;\n        });\n        // needed to not trigger sync reflow\n        var onBeforeRender = this.renderer.on(\"beforeRender\", function() {\n            if (shouldScroll)\n                rect = self.renderer.container.getBoundingClientRect();\n        });\n        var onAfterRender = this.renderer.on(\"afterRender\", function() {\n            if (shouldScroll && rect && (self.isFocused()\n                || self.searchBox && self.searchBox.isFocused())\n            ) {\n                var renderer = self.renderer;\n                var pos = renderer.$cursorLayer.$pixelPos;\n                var config = renderer.layerConfig;\n                var top = pos.top - config.offset;\n                if (pos.top >= 0 && top + rect.top < 0) {\n                    shouldScroll = true;\n                } else if (pos.top < config.height &&\n                    pos.top + rect.top + config.lineHeight > window.innerHeight) {\n                    shouldScroll = false;\n                } else {\n                    shouldScroll = null;\n                }\n                if (shouldScroll != null) {\n                    scrollAnchor.style.top = top + \"px\";\n                    scrollAnchor.style.left = pos.left + \"px\";\n                    scrollAnchor.style.height = config.lineHeight + \"px\";\n                    scrollAnchor.scrollIntoView(shouldScroll);\n                }\n                shouldScroll = rect = null;\n            }\n        });\n        this.setAutoScrollEditorIntoView = function(enable) {\n            if (enable)\n                return;\n            delete this.setAutoScrollEditorIntoView;\n            this.off(\"changeSelection\", onChangeSelection);\n            this.renderer.off(\"afterRender\", onAfterRender);\n            this.renderer.off(\"beforeRender\", onBeforeRender);\n        };\n    }\n\n    $resetCursorStyle() {\n        var style = this.$cursorStyle || \"ace\";\n        var cursorLayer = this.renderer.$cursorLayer;\n        if (!cursorLayer)\n            return;\n        cursorLayer.setSmoothBlinking(/smooth/.test(style));\n        cursorLayer.isBlinking = !this.$readOnly && style != \"wide\";\n        dom.setCssClass(cursorLayer.element, \"ace_slim-cursors\", /slim/.test(style));\n    }\n\n    /**\n     * opens a prompt displaying message\n     **/\n    prompt(message, options, callback) {\n        var editor = this;\n        config.loadModule(\"ace/ext/prompt\", function (module) {\n            module.prompt(editor, message, options, callback);\n        });\n    }\n\n}\n\nEditor.$uid = 0;\nEditor.prototype.curOp = null;\nEditor.prototype.prevOp = {};\n// TODO use property on commands instead of this\nEditor.prototype.$mergeableCommands = [\"backspace\", \"del\", \"insertstring\"];\nEditor.prototype.$toggleWordPairs = [\n    [\"first\", \"last\"],\n    [\"true\", \"false\"],\n    [\"yes\", \"no\"],\n    [\"width\", \"height\"],\n    [\"top\", \"bottom\"],\n    [\"right\", \"left\"],\n    [\"on\", \"off\"],\n    [\"x\", \"y\"],\n    [\"get\", \"set\"],\n    [\"max\", \"min\"],\n    [\"horizontal\", \"vertical\"],\n    [\"show\", \"hide\"],\n    [\"add\", \"remove\"],\n    [\"up\", \"down\"],\n    [\"before\", \"after\"],\n    [\"even\", \"odd\"],\n    [\"in\", \"out\"],\n    [\"inside\", \"outside\"],\n    [\"next\", \"previous\"],\n    [\"increase\", \"decrease\"],\n    [\"attach\", \"detach\"],\n    [\"&&\", \"||\"],\n    [\"==\", \"!=\"]\n];\n\noop.implement(Editor.prototype, EventEmitter);\n\n\nconfig.defineOptions(Editor.prototype, \"editor\", {\n    selectionStyle: {\n        set: function(style) {\n            this.onSelectionChange();\n            this._signal(\"changeSelectionStyle\", {data: style});\n        },\n        initialValue: \"line\"\n    },\n    highlightActiveLine: {\n        set: function() {this.$updateHighlightActiveLine();},\n        initialValue: true\n    },\n    highlightSelectedWord: {\n        set: function(shouldHighlight) {this.$onSelectionChange();},\n        initialValue: true\n    },\n    readOnly: {\n        set: function(readOnly) {\n            this.textInput.setReadOnly(readOnly);\n            this.$resetCursorStyle();\n        },\n        initialValue: false\n    },\n    copyWithEmptySelection: {\n        set: function(value) {\n            this.textInput.setCopyWithEmptySelection(value);\n        },\n        initialValue: false\n    },\n    cursorStyle: {\n        set: function(val) { this.$resetCursorStyle(); },\n        values: [\"ace\", \"slim\", \"smooth\", \"wide\"],\n        initialValue: \"ace\"\n    },\n    mergeUndoDeltas: {\n        values: [false, true, \"always\"],\n        initialValue: true\n    },\n    behavioursEnabled: {initialValue: true},\n    wrapBehavioursEnabled: {initialValue: true},\n    enableAutoIndent: {initialValue: true},\n    autoScrollEditorIntoView: {\n        set: function(val) {this.setAutoScrollEditorIntoView(val);}\n    },\n    keyboardHandler: {\n        set: function(val) { this.setKeyboardHandler(val); },\n        get: function() { return this.$keybindingId; },\n        handlesSet: true\n    },\n    value: {\n        set: function(val) { this.session.setValue(val); },\n        get: function() { return this.getValue(); },\n        handlesSet: true,\n        hidden: true\n    },\n    session: {\n        set: function(val) { this.setSession(val); },\n        get: function() { return this.session; },\n        handlesSet: true,\n        hidden: true\n    },\n\n    showLineNumbers: {\n        set: function(show) {\n            this.renderer.$gutterLayer.setShowLineNumbers(show);\n            this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER);\n            if (show && this.$relativeLineNumbers)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        },\n        initialValue: true\n    },\n    relativeLineNumbers: {\n        set: function(value) {\n            if (this.$showLineNumbers && value)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        }\n    },\n    placeholder: {\n        /**\n         * @param message\n         */\n        set: function(message) {\n            if (!this.$updatePlaceholder) {\n                this.$updatePlaceholder = function() {\n                    var hasValue = this.session && (this.renderer.$composition ||\n                         this.session.getLength() > 1 || this.session.getLine(0).length > 0);\n                    if (hasValue && this.renderer.placeholderNode) {\n                        this.renderer.off(\"afterRender\", this.$updatePlaceholder);\n                        dom.removeCssClass(this.container, \"ace_hasPlaceholder\");\n                        this.renderer.placeholderNode.remove();\n                        this.renderer.placeholderNode = null;\n                    } else if (!hasValue && !this.renderer.placeholderNode) {\n                        this.renderer.on(\"afterRender\", this.$updatePlaceholder);\n                        dom.addCssClass(this.container, \"ace_hasPlaceholder\");\n                        var el = dom.createElement(\"div\");\n                        el.className = \"ace_placeholder\";\n                        el.textContent = this.$placeholder || \"\";\n                        this.renderer.placeholderNode = el;\n                        this.renderer.content.appendChild(this.renderer.placeholderNode);\n                    } else if (!hasValue && this.renderer.placeholderNode) {\n                        this.renderer.placeholderNode.textContent = this.$placeholder || \"\";\n                    }\n                }.bind(this);\n                // @ts-ignore\n                this.on(\"input\", this.$updatePlaceholder);\n            }\n            this.$updatePlaceholder();\n        }\n    },\n    enableKeyboardAccessibility: {\n        set: function(value) {\n            var blurCommand = {\n                name: \"blurTextInput\",\n                description: \"Set focus to the editor content div to allow tabbing through the page\",\n                bindKey: \"Esc\",\n                exec: function(editor) {\n                    editor.blur();\n                    editor.renderer.scroller.focus();\n                },\n                readOnly: true\n            };\n\n            var focusOnEnterKeyup = function (e) {\n                if (e.target == this.renderer.scroller && e.keyCode === keys['enter']){\n                    e.preventDefault();\n                    var row = this.getCursorPosition().row;\n\n                    if (!this.isRowVisible(row))\n                        this.scrollToLine(row, true, true);\n\n                    this.focus();\n                }\n            };\n            /**@type {GutterKeyboardHandler}*/\n            var gutterKeyboardHandler;\n\n            // If keyboard a11y mode is enabled we:\n            // - Enable keyboard operability gutter.\n            // - Prevent tab-trapping.\n            // - Hide irrelevant elements from assistive technology.\n            // - On Windows, set more lines to the textarea.\n            // - set aria-label to the text input.\n            if (value){\n                this.renderer.enableKeyboardAccessibility = true;\n                this.renderer.keyboardFocusClassName = \"ace_keyboard-focus\";\n\n                this.textInput.getElement().setAttribute(\"tabindex\", -1);\n                // VoiceOver on Mac OS works best with single line in the textarea, the screen readers on\n                // Windows work best with multiple lines in the textarea.\n                this.textInput.setNumberOfExtraLines(useragent.isWin ? 3 : 0);\n                this.renderer.scroller.setAttribute(\"tabindex\", 0);\n                this.renderer.scroller.setAttribute(\"role\", \"group\");\n                this.renderer.scroller.setAttribute(\"aria-roledescription\", nls(\"editor.scroller.aria-roledescription\", \"editor\"));\n                this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName);\n                this.renderer.scroller.setAttribute(\"aria-label\",\n                    nls(\"editor.scroller.aria-label\", \"Editor content, press Enter to start editing, press Escape to exit\")\n                );\n\n                this.renderer.scroller.addEventListener(\"keyup\", focusOnEnterKeyup.bind(this));\n                this.commands.addCommand(blurCommand);\n\n                this.renderer.$gutter.setAttribute(\"tabindex\", 0);\n                this.renderer.$gutter.setAttribute(\"aria-hidden\", false);\n                this.renderer.$gutter.setAttribute(\"role\", \"group\");\n                this.renderer.$gutter.setAttribute(\"aria-roledescription\", nls(\"editor.gutter.aria-roledescription\", \"editor\"));\n                this.renderer.$gutter.setAttribute(\"aria-label\",\n                    nls(\"editor.gutter.aria-label\", \"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit\")\n                );\n                this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName);\n\n                this.renderer.content.setAttribute(\"aria-hidden\", true);\n\n                if (!gutterKeyboardHandler)\n                    gutterKeyboardHandler = new GutterKeyboardHandler(this);\n\n                gutterKeyboardHandler.addListener();\n\n                this.textInput.setAriaOptions({\n                    setLabel: true\n                });\n            } else {\n                this.renderer.enableKeyboardAccessibility = false;\n\n                this.textInput.getElement().setAttribute(\"tabindex\", 0);\n                this.textInput.setNumberOfExtraLines(0);\n                this.renderer.scroller.setAttribute(\"tabindex\", -1);\n                this.renderer.scroller.removeAttribute(\"role\");\n                this.renderer.scroller.removeAttribute(\"aria-roledescription\");\n                this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName);\n                this.renderer.scroller.removeAttribute(\"aria-label\");\n\n                this.renderer.scroller.removeEventListener(\"keyup\", focusOnEnterKeyup.bind(this));\n                this.commands.removeCommand(blurCommand);\n\n                this.renderer.content.removeAttribute(\"aria-hidden\");\n\n                this.renderer.$gutter.setAttribute(\"tabindex\", -1);\n                this.renderer.$gutter.setAttribute(\"aria-hidden\", true);\n                this.renderer.$gutter.removeAttribute(\"role\");\n                this.renderer.$gutter.removeAttribute(\"aria-roledescription\");\n                this.renderer.$gutter.removeAttribute(\"aria-label\");\n                this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName);\n\n                if (gutterKeyboardHandler)\n                    gutterKeyboardHandler.removeListener();\n            }\n        },\n        initialValue: false\n    },\n    textInputAriaLabel: {\n        set: function(val) { this.$textInputAriaLabel = val; },\n        initialValue: \"\"\n    },\n    enableMobileMenu: {\n        /**\n         * @param {boolean} val\n         */\n        set: function(val) { this.$enableMobileMenu = val; },\n        initialValue: true\n    },\n    customScrollbar: \"renderer\",\n    hScrollBarAlwaysVisible: \"renderer\",\n    vScrollBarAlwaysVisible: \"renderer\",\n    highlightGutterLine: \"renderer\",\n    animatedScroll: \"renderer\",\n    showInvisibles: \"renderer\",\n    showPrintMargin: \"renderer\",\n    printMarginColumn: \"renderer\",\n    printMargin: \"renderer\",\n    fadeFoldWidgets: \"renderer\",\n    showFoldWidgets: \"renderer\",\n    displayIndentGuides: \"renderer\",\n    highlightIndentGuides: \"renderer\",\n    showGutter: \"renderer\",\n    fontSize: \"renderer\",\n    fontFamily: \"renderer\",\n    maxLines: \"renderer\",\n    minLines: \"renderer\",\n    scrollPastEnd: \"renderer\",\n    fixedWidthGutter: \"renderer\",\n    theme: \"renderer\",\n    hasCssTransforms: \"renderer\",\n    maxPixelHeight: \"renderer\",\n    useTextareaForIME: \"renderer\",\n    useResizeObserver: \"renderer\",\n    useSvgGutterIcons: \"renderer\",\n    showFoldedAnnotations: \"renderer\",\n\n    scrollSpeed: \"$mouseHandler\",\n    dragDelay: \"$mouseHandler\",\n    dragEnabled: \"$mouseHandler\",\n    focusTimeout: \"$mouseHandler\",\n    tooltipFollowsMouse: \"$mouseHandler\",\n\n    firstLineNumber: \"session\",\n    overwrite: \"session\",\n    newLineMode: \"session\",\n    useWorker: \"session\",\n    useSoftTabs: \"session\",\n    navigateWithinSoftTabs: \"session\",\n    tabSize: \"session\",\n    wrap: \"session\",\n    indentedSoftWrap: \"session\",\n    foldStyle: \"session\",\n    mode: \"session\"\n});\n\n\nvar relativeNumberRenderer = {\n    getText: function(/**@type{EditSession}*/session, /**@type{number}*/row) {\n        return (Math.abs(session.selection.lead.row - row) || (row + 1 + (row < 9 ? \"\\xb7\" : \"\"))) + \"\";\n    },\n    getWidth: function(session, /**@type{number}*/lastLineNumber, config) {\n        return Math.max(\n            lastLineNumber.toString().length,\n            (config.lastRow + 1).toString().length,\n            2\n        ) * config.characterWidth;\n    },\n    update: function(e, /**@type{Editor}*/editor) {\n        editor.renderer.$loop.schedule(editor.renderer.CHANGE_GUTTER);\n    },\n    attach: function(/**@type{Editor}*/editor) {\n        editor.renderer.$gutterLayer.$renderer = this;\n        editor.on(\"changeSelection\", this.update);\n        this.update(null, editor);\n    },\n    detach: function(/**@type{Editor}*/editor) {\n        if (editor.renderer.$gutterLayer.$renderer == this)\n            editor.renderer.$gutterLayer.$renderer = null;\n        editor.off(\"changeSelection\", this.update);\n        this.update(null, editor);\n    }\n};\nexports.Editor = Editor;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2VkaXRvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBLGFBQWEsOENBQThDO0FBQzNELGFBQWEsaUNBQWlDO0FBQzlDLGFBQWEscUNBQXFDO0FBQ2xELGFBQWEsNkNBQTZDO0FBQzFEOztBQUVBLFVBQVUsbUJBQU8sQ0FBQyx5REFBVztBQUM3QixVQUFVLG1CQUFPLENBQUMseURBQVc7QUFDN0IsV0FBVyxtQkFBTyxDQUFDLDJEQUFZO0FBQy9CLGdCQUFnQixtQkFBTyxDQUFDLHFFQUFpQjtBQUN6QyxnQkFBZ0IsZ0hBQXlDO0FBQ3pELG1CQUFtQixxSEFBNkM7QUFDaEUsa0JBQWtCLGtIQUEyQztBQUM3RCxpQkFBaUIsbUhBQTJDO0FBQzVELGtCQUFrQixzR0FBcUM7QUFDdkQsYUFBYSxxRkFBMEI7QUFDdkMsWUFBWSxrRkFBd0I7QUFDcEMsbUJBQW1CLGlIQUEyQztBQUM5RCxxQkFBcUIsaUlBQW9EO0FBQ3pFLHNCQUFzQiw2SEFBK0M7QUFDckUsYUFBYSxtQkFBTyxDQUFDLHVEQUFVO0FBQy9CLG9CQUFvQiw0R0FBeUM7QUFDN0QsNEJBQTRCLHNJQUEwRDtBQUN0RixVQUFVLGtGQUF1Qjs7QUFFakMsZ0JBQWdCLG1CQUFPLENBQUMsNkRBQWE7QUFDckMsV0FBVyxtQkFBTyxDQUFDLDJEQUFZOzs7QUFHL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDLGVBQWUsYUFBYTtBQUM1QixlQUFlLHNEQUFzRDtBQUNyRTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7O0FBRUE7QUFDQSxrQkFBa0IsZUFBZSxzQkFBc0I7QUFDdkQ7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0Esa0JBQWtCLE9BQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGFBQWE7QUFDbkM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFdBQVc7QUFDN0I7QUFDQSxrQkFBa0IsT0FBTztBQUN6QjtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBOztBQUVBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrREFBK0Q7O0FBRS9EO0FBQ0EsVUFBVTtBQUNWO0FBQ0EscUVBQXFFO0FBQ3JFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsK0RBQStEO0FBQzlFLGVBQWUsWUFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBLDBEQUEwRCxnQkFBZ0I7QUFDMUU7QUFDQSxvREFBb0QsYUFBYTtBQUNqRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixXQUFXO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSLGVBQWUsOENBQThDO0FBQzdELGVBQWUsWUFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1IsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLHFDQUFxQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixtQkFBbUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMseUNBQXlDO0FBQzFFO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxpQ0FBaUMsaUNBQWlDO0FBQ2xFLGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDLElBQUk7QUFDNUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLG1CQUFtQjtBQUNsQztBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdDQUFnQyw2QkFBNkI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7O0FBRUEscUNBQXFDLGVBQWU7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLG9CQUFvQjtBQUM1RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLFdBQVcsdUJBQXVCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpREFBaUQ7QUFDakQsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLGVBQWUsNkNBQTZDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0VBQXdFLCtCQUErQjtBQUN2RyxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3S0FBd0s7QUFDeEssZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0RBQStEO0FBQy9ELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUNBQWlDLGdCQUFnQjtBQUNqRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxpQ0FBaUMsZ0JBQWdCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QztBQUNBLDRCQUE0QixRQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsS0FBSyxLQUFLO0FBQ3hDLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsU0FBUztBQUN4QjtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLE9BQU87QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsWUFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1IsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLO0FBQ25CLGNBQWMsS0FBSztBQUNuQjs7QUFFQTtBQUNBLHNDQUFzQztBQUN0Qyx1QkFBdUIsa0NBQWtDO0FBQ3pEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVOztBQUVWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseUNBQXlDOztBQUV0RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLHdCQUF3QjtBQUN2QyxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsd0JBQXdCO0FBQ3ZDLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsd0NBQXdDLFFBQVE7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGVBQWUsc0NBQXNDO0FBQ3JELGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRLG9CQUFvQjtBQUM1QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckMsZUFBZSx3QkFBd0I7QUFDdkMsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixlQUFlO0FBQzdDOztBQUVBO0FBQ0E7QUFDQSw4QkFBOEIsYUFBYTs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkMsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkMsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1DQUFtQztBQUMvRDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxZQUFZO0FBQzlELFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLHlCQUF5QixtQ0FBbUM7QUFDNUQ7QUFDQSxLQUFLO0FBQ0w7QUFDQSx3Q0FBd0MsMkJBQTJCO0FBQ25FO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLDZCQUE2QiwyQkFBMkI7QUFDeEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsd0JBQXdCLG1CQUFtQjtBQUMzQyw0QkFBNEIsbUJBQW1CO0FBQy9DLHVCQUF1QixtQkFBbUI7QUFDMUM7QUFDQSw0QkFBNEI7QUFDNUIsS0FBSztBQUNMO0FBQ0EsNkJBQTZCLCtCQUErQjtBQUM1RCwwQkFBMEIsNEJBQTRCO0FBQ3REO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNkJBQTZCLDZCQUE2QjtBQUMxRCwwQkFBMEIseUJBQXlCO0FBQ25EO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BELDBCQUEwQixzQkFBc0I7QUFDaEQ7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzQkFBc0I7QUFDNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNkJBQTZCLGlDQUFpQztBQUM5RDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUJBQW1CLFNBQVM7QUFDNUI7QUFDQSw2QkFBNkIsK0JBQStCO0FBQzVEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBLCtCQUErQixZQUFZLG9CQUFvQixPQUFPO0FBQ3RFO0FBQ0EsS0FBSztBQUNMLHlDQUF5QyxPQUFPO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsaUNBQWlDLE9BQU87QUFDeEM7QUFDQSxLQUFLO0FBQ0wsOEJBQThCLE9BQU87QUFDckM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDhCQUE4QixPQUFPO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9lZGl0b3IuanM/YTkyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi92aXJ0dWFsX3JlbmRlcmVyXCIpLlZpcnR1YWxSZW5kZXJlcn0gVmlydHVhbFJlbmRlcmVyXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9zZWxlY3Rpb25cIikuU2VsZWN0aW9ufSBTZWxlY3Rpb25cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlBvaW50fSBQb2ludFxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuU2VhcmNoT3B0aW9uc30gU2VhcmNoT3B0aW9uc1xuICovXG5cbnZhciBvb3AgPSByZXF1aXJlKFwiLi9saWIvb29wXCIpO1xudmFyIGRvbSA9IHJlcXVpcmUoXCIuL2xpYi9kb21cIik7XG52YXIgbGFuZyA9IHJlcXVpcmUoXCIuL2xpYi9sYW5nXCIpO1xudmFyIHVzZXJhZ2VudCA9IHJlcXVpcmUoXCIuL2xpYi91c2VyYWdlbnRcIik7XG52YXIgVGV4dElucHV0ID0gcmVxdWlyZShcIi4va2V5Ym9hcmQvdGV4dGlucHV0XCIpLlRleHRJbnB1dDtcbnZhciBNb3VzZUhhbmRsZXIgPSByZXF1aXJlKFwiLi9tb3VzZS9tb3VzZV9oYW5kbGVyXCIpLk1vdXNlSGFuZGxlcjtcbnZhciBGb2xkSGFuZGxlciA9IHJlcXVpcmUoXCIuL21vdXNlL2ZvbGRfaGFuZGxlclwiKS5Gb2xkSGFuZGxlcjtcbnZhciBLZXlCaW5kaW5nID0gcmVxdWlyZShcIi4va2V5Ym9hcmQva2V5YmluZGluZ1wiKS5LZXlCaW5kaW5nO1xudmFyIEVkaXRTZXNzaW9uID0gcmVxdWlyZShcIi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9uO1xudmFyIFNlYXJjaCA9IHJlcXVpcmUoXCIuL3NlYXJjaFwiKS5TZWFyY2g7XG52YXIgUmFuZ2UgPSByZXF1aXJlKFwiLi9yYW5nZVwiKS5SYW5nZTtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG52YXIgQ29tbWFuZE1hbmFnZXIgPSByZXF1aXJlKFwiLi9jb21tYW5kcy9jb21tYW5kX21hbmFnZXJcIikuQ29tbWFuZE1hbmFnZXI7XG52YXIgZGVmYXVsdENvbW1hbmRzID0gcmVxdWlyZShcIi4vY29tbWFuZHMvZGVmYXVsdF9jb21tYW5kc1wiKS5jb21tYW5kcztcbnZhciBjb25maWcgPSByZXF1aXJlKFwiLi9jb25maWdcIik7XG52YXIgVG9rZW5JdGVyYXRvciA9IHJlcXVpcmUoXCIuL3Rva2VuX2l0ZXJhdG9yXCIpLlRva2VuSXRlcmF0b3I7XG52YXIgR3V0dGVyS2V5Ym9hcmRIYW5kbGVyID0gcmVxdWlyZShcIi4va2V5Ym9hcmQvZ3V0dGVyX2hhbmRsZXJcIikuR3V0dGVyS2V5Ym9hcmRIYW5kbGVyO1xudmFyIG5scyA9IHJlcXVpcmUoXCIuL2NvbmZpZ1wiKS5ubHM7XG5cbnZhciBjbGlwYm9hcmQgPSByZXF1aXJlKFwiLi9jbGlwYm9hcmRcIik7XG52YXIga2V5cyA9IHJlcXVpcmUoJy4vbGliL2tleXMnKTtcblxuXG4vKipcbiAqIFRoZSBtYWluIGVudHJ5IHBvaW50IGludG8gdGhlIEFjZSBmdW5jdGlvbmFsaXR5LlxuICpcbiAqIFRoZSBgRWRpdG9yYCBtYW5hZ2VzIHRoZSBbW0VkaXRTZXNzaW9uXV0gKHdoaWNoIG1hbmFnZXMgW1tEb2N1bWVudF1dcyksIGFzIHdlbGwgYXMgdGhlIFtbVmlydHVhbFJlbmRlcmVyXV0sIHdoaWNoIGRyYXdzIGV2ZXJ5dGhpbmcgdG8gdGhlIHNjcmVlbi5cbiAqXG4gKiBFdmVudCBzZXNzaW9ucyBkZWFsaW5nIHdpdGggdGhlIG1vdXNlIGFuZCBrZXlib2FyZCBhcmUgYnViYmxlZCB1cCBmcm9tIGBEb2N1bWVudGAgdG8gdGhlIGBFZGl0b3JgLCB3aGljaCBkZWNpZGVzIHdoYXQgdG8gZG8gd2l0aCB0aGVtLlxuICoqL1xuY2xhc3MgRWRpdG9yIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBFZGl0b3JgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VmlydHVhbFJlbmRlcmVyfSByZW5kZXJlciBBc3NvY2lhdGVkIGBWaXJ0dWFsUmVuZGVyZXJgIHRoYXQgZHJhd3MgZXZlcnl0aGluZ1xuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IFtzZXNzaW9uXSBUaGUgYEVkaXRTZXNzaW9uYCB0byByZWZlciB0b1xuICAgICAqIEBwYXJhbSB7UGFydGlhbDxpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkVkaXRvck9wdGlvbnM+fSBbb3B0aW9uc10gVGhlIGRlZmF1bHQgb3B0aW9uc1xuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgc2Vzc2lvbiwgb3B0aW9ucykge1xuICAgICAgICAvKipAdHlwZXtFZGl0U2Vzc2lvbn0qL3RoaXMuc2Vzc2lvbjtcbiAgICAgICAgdGhpcy4kdG9EZXN0cm95ID0gW107XG5cbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHJlbmRlcmVyLmdldENvbnRhaW5lckVsZW1lbnQoKTtcbiAgICAgICAgLyoqQHR5cGUge0hUTUxFbGVtZW50ICYge2Vudj86YW55LCB2YWx1ZT86YW55fX0qL1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgLyoqQHR5cGUge1ZpcnR1YWxSZW5kZXJlcn0qL1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIC8qKkB0eXBlIHtzdHJpbmd9Ki9cbiAgICAgICAgdGhpcy5pZCA9IFwiZWRpdG9yXCIgKyAoKytFZGl0b3IuJHVpZCk7XG4gICAgICAgIHRoaXMuY29tbWFuZHMgPSBuZXcgQ29tbWFuZE1hbmFnZXIodXNlcmFnZW50LmlzTWFjID8gXCJtYWNcIiA6IFwid2luXCIsIGRlZmF1bHRDb21tYW5kcyk7XG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhpcy50ZXh0SW5wdXQgPSBuZXcgVGV4dElucHV0KHJlbmRlcmVyLmdldFRleHRBcmVhQ29udGFpbmVyKCksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci50ZXh0YXJlYSA9IHRoaXMudGV4dElucHV0LmdldEVsZW1lbnQoKTtcbiAgICAgICAgICAgIC8vIFRPRE8gZGV0ZWN0IHRvdWNoIGV2ZW50IHN1cHBvcnRcbiAgICAgICAgICAgIC8qKkB0eXBlIHtNb3VzZUhhbmRsZXJ9Ki9cbiAgICAgICAgICAgIHRoaXMuJG1vdXNlSGFuZGxlciA9IG5ldyBNb3VzZUhhbmRsZXIodGhpcyk7XG4gICAgICAgICAgICBuZXcgRm9sZEhhbmRsZXIodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqQHR5cGUge0tleUJpbmRpbmd9Ki9cbiAgICAgICAgdGhpcy5rZXlCaW5kaW5nID0gbmV3IEtleUJpbmRpbmcodGhpcyk7XG4gICAgICAgIC8qKkB0eXBlIHtTZWFyY2h9Ki9cbiAgICAgICAgdGhpcy4kc2VhcmNoID0gbmV3IFNlYXJjaCgpLnNldCh7XG4gICAgICAgICAgICB3cmFwOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuJGhpc3RvcnlUcmFja2VyID0gdGhpcy4kaGlzdG9yeVRyYWNrZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jb21tYW5kcy5vbihcImV4ZWNcIiwgdGhpcy4kaGlzdG9yeVRyYWNrZXIpO1xuXG4gICAgICAgIHRoaXMuJGluaXRPcGVyYXRpb25MaXN0ZW5lcnMoKTtcblxuICAgICAgICB0aGlzLl8kZW1pdElucHV0RXZlbnQgPSBsYW5nLmRlbGF5ZWRDYWxsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwiaW5wdXRcIiwge30pO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbiAmJiAhdGhpcy5zZXNzaW9uLmRlc3Ryb3llZClcbiAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb24uYmdUb2tlbml6ZXIuc2NoZWR1bGVTdGFydCgpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgICAgIHRoaXMub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oXywgX3NlbGYpIHtcbiAgICAgICAgICAgIF9zZWxmLl8kZW1pdElucHV0RXZlbnQuc2NoZWR1bGUoMzEpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNldFNlc3Npb24oc2Vzc2lvbiB8fCBvcHRpb25zICYmIG9wdGlvbnMuc2Vzc2lvbiB8fCBuZXcgRWRpdFNlc3Npb24oXCJcIikpO1xuICAgICAgICBjb25maWcucmVzZXRPcHRpb25zKHRoaXMpO1xuICAgICAgICBpZiAob3B0aW9ucylcbiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgY29uZmlnLl9zaWduYWwoXCJlZGl0b3JcIiwgdGhpcyk7XG4gICAgfVxuXG4gICAgJGluaXRPcGVyYXRpb25MaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZHMub24oXCJleGVjXCIsIHRoaXMuc3RhcnRPcGVyYXRpb24uYmluZCh0aGlzKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuY29tbWFuZHMub24oXCJhZnRlckV4ZWNcIiwgdGhpcy5lbmRPcGVyYXRpb24uYmluZCh0aGlzKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgc3RhcnRPcGVyYXRpb24oY29tbWFuZEV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zdGFydE9wZXJhdGlvbihjb21tYW5kRXZlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBhcmcgZVxuICAgICAqL1xuICAgIGVuZE9wZXJhdGlvbihlKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5lbmRPcGVyYXRpb24oZSk7XG4gICAgfVxuXG4gICAgb25TdGFydE9wZXJhdGlvbihjb21tYW5kRXZlbnQpIHtcbiAgICAgICAgdGhpcy5jdXJPcCA9IHRoaXMuc2Vzc2lvbi5jdXJPcDtcbiAgICAgICAgdGhpcy5jdXJPcC5zY3JvbGxUb3AgPSB0aGlzLnJlbmRlcmVyLnNjcm9sbFRvcDtcbiAgICAgICAgdGhpcy5wcmV2T3AgPSB0aGlzLnNlc3Npb24ucHJldk9wO1xuXG4gICAgICAgIGlmICghY29tbWFuZEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzQ29tbWFuZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAYXJnIGVcbiAgICAgKi9cbiAgICBvbkVuZE9wZXJhdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLmN1ck9wICYmIHRoaXMuc2Vzc2lvbikge1xuICAgICAgICAgICAgaWYgKGUgJiYgZS5yZXR1cm5WYWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1ck9wID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3NpZ25hbChcImJlZm9yZUVuZE9wZXJhdGlvblwiKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJPcCkgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgY29tbWFuZCA9IHRoaXMuY3VyT3AuY29tbWFuZDtcbiAgICAgICAgICAgIHZhciBzY3JvbGxJbnRvVmlldyA9IGNvbW1hbmQgJiYgY29tbWFuZC5zY3JvbGxJbnRvVmlldztcbiAgICAgICAgICAgIGlmIChzY3JvbGxJbnRvVmlldykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoc2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNlbnRlci1hbmltYXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxJbnRvVmlldyA9IFwiYW5pbWF0ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogZmFsbCB0aHJvdWdoICovXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjZW50ZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsQ3Vyc29ySW50b1ZpZXcobnVsbCwgMC41KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYW5pbWF0ZVwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3Vyc29yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNlbGVjdGlvblBhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5yZW5kZXJlci5sYXllckNvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydC5yb3cgPj0gY29uZmlnLmxhc3RSb3cgfHwgcmFuZ2UuZW5kLnJvdyA8PSBjb25maWcuZmlyc3RSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbFNlbGVjdGlvbkludG9WaWV3KHRoaXMuc2VsZWN0aW9uLmFuY2hvciwgdGhpcy5zZWxlY3Rpb24ubGVhZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsSW50b1ZpZXcgPT0gXCJhbmltYXRlXCIpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYW5pbWF0ZVNjcm9sbGluZyh0aGlzLmN1ck9wLnNjcm9sbFRvcCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuJGxhc3RTZWwgPSB0aGlzLnNlc3Npb24uc2VsZWN0aW9uLnRvSlNPTigpO1xuICAgICAgICAgICAgdGhpcy5wcmV2T3AgPSB0aGlzLmN1ck9wO1xuICAgICAgICAgICAgdGhpcy5jdXJPcCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZVxuICAgICAqL1xuICAgICRoaXN0b3J5VHJhY2tlcihlKSB7XG4gICAgICAgIGlmICghdGhpcy4kbWVyZ2VVbmRvRGVsdGFzKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBwcmV2ID0gdGhpcy5wcmV2T3A7XG4gICAgICAgIHZhciBtZXJnZWFibGVDb21tYW5kcyA9IHRoaXMuJG1lcmdlYWJsZUNvbW1hbmRzO1xuICAgICAgICAvLyBwcmV2aW91cyBjb21tYW5kIHdhcyB0aGUgc2FtZVxuICAgICAgICB2YXIgc2hvdWxkTWVyZ2UgPSBwcmV2LmNvbW1hbmQgJiYgKGUuY29tbWFuZC5uYW1lID09IHByZXYuY29tbWFuZC5uYW1lKTtcbiAgICAgICAgaWYgKGUuY29tbWFuZC5uYW1lID09IFwiaW5zZXJ0c3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gZS5hcmdzO1xuICAgICAgICAgICAgaWYgKHRoaXMubWVyZ2VOZXh0Q29tbWFuZCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHRoaXMubWVyZ2VOZXh0Q29tbWFuZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHNob3VsZE1lcmdlID0gc2hvdWxkTWVyZ2VcbiAgICAgICAgICAgICAgICAmJiB0aGlzLm1lcmdlTmV4dENvbW1hbmQgLy8gcHJldmlvdXMgY29tbWFuZCBhbGxvd3MgdG8gY29hbGVzY2Ugd2l0aFxuICAgICAgICAgICAgICAgICYmICghL1xccy8udGVzdCh0ZXh0KSB8fCAvXFxzLy50ZXN0KHByZXYuYXJncykpOyAvLyBwcmV2aW91cyBpbnNlcnRpb24gd2FzIG9mIHNhbWUgdHlwZVxuXG4gICAgICAgICAgICB0aGlzLm1lcmdlTmV4dENvbW1hbmQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvdWxkTWVyZ2UgPSBzaG91bGRNZXJnZVxuICAgICAgICAgICAgICAgICYmIG1lcmdlYWJsZUNvbW1hbmRzLmluZGV4T2YoZS5jb21tYW5kLm5hbWUpICE9PSAtMTsgLy8gdGhlIGNvbW1hbmQgaXMgbWVyZ2VhYmxlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLiRtZXJnZVVuZG9EZWx0YXMgIT0gXCJhbHdheXNcIlxuICAgICAgICAgICAgJiYgRGF0ZS5ub3coKSAtIHRoaXMuc2VxdWVuY2VTdGFydFRpbWUgPiAyMDAwXG4gICAgICAgICkge1xuICAgICAgICAgICAgc2hvdWxkTWVyZ2UgPSBmYWxzZTsgLy8gdGhlIHNlcXVlbmNlIGlzIHRvbyBsb25nXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hvdWxkTWVyZ2UpXG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ubWVyZ2VVbmRvRGVsdGFzID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAobWVyZ2VhYmxlQ29tbWFuZHMuaW5kZXhPZihlLmNvbW1hbmQubmFtZSkgIT09IC0xKVxuICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZVN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIG5ldyBrZXkgaGFuZGxlciwgc3VjaCBhcyBcInZpbVwiIG9yIFwid2luZG93c1wiLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nIHwgaW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5LZXlib2FyZEhhbmRsZXIgfCBudWxsfSBrZXlib2FyZEhhbmRsZXIgVGhlIG5ldyBrZXkgaGFuZGxlclxuICAgICAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gW2NiXVxuICAgICAqKi9cbiAgICBzZXRLZXlib2FyZEhhbmRsZXIoa2V5Ym9hcmRIYW5kbGVyLCBjYikge1xuICAgICAgICBpZiAoa2V5Ym9hcmRIYW5kbGVyICYmIHR5cGVvZiBrZXlib2FyZEhhbmRsZXIgPT09IFwic3RyaW5nXCIgJiYga2V5Ym9hcmRIYW5kbGVyICE9IFwiYWNlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuJGtleWJpbmRpbmdJZCA9IGtleWJvYXJkSGFuZGxlcjtcbiAgICAgICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBjb25maWcubG9hZE1vZHVsZShbXCJrZXliaW5kaW5nXCIsIGtleWJvYXJkSGFuZGxlcl0sIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgICAgICAgICAgIGlmIChfc2VsZi4ka2V5YmluZGluZ0lkID09IGtleWJvYXJkSGFuZGxlcilcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYua2V5QmluZGluZy5zZXRLZXlib2FyZEhhbmRsZXIobW9kdWxlICYmIG1vZHVsZS5oYW5kbGVyKTtcbiAgICAgICAgICAgICAgICBjYiAmJiBjYigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRrZXliaW5kaW5nSWQgPSBudWxsO1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpcy5rZXlCaW5kaW5nLnNldEtleWJvYXJkSGFuZGxlcihrZXlib2FyZEhhbmRsZXIpO1xuICAgICAgICAgICAgY2IgJiYgY2IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGtleWJvYXJkIGhhbmRsZXIsIHN1Y2ggYXMgXCJ2aW1cIiBvciBcIndpbmRvd3NcIi5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqKi9cbiAgICBnZXRLZXlib2FyZEhhbmRsZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleUJpbmRpbmcuZ2V0S2V5Ym9hcmRIYW5kbGVyKCk7XG4gICAgfVxuXG5cblxuICAgIC8qKlxuICAgICAqIFNldHMgYSBuZXcgZWRpdHNlc3Npb24gdG8gdXNlLiBUaGlzIG1ldGhvZCBhbHNvIGVtaXRzIHRoZSBgJ2NoYW5nZVNlc3Npb24nYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBbc2Vzc2lvbl0gVGhlIG5ldyBzZXNzaW9uIHRvIHVzZVxuICAgICAqKi9cbiAgICBzZXRTZXNzaW9uKHNlc3Npb24pIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbiA9PSBzZXNzaW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIC8vIG1ha2Ugc3VyZSBvcGVyYXRpb25FbmQgZXZlbnRzIGFyZSBub3QgZW1pdHRlZCB0byB3cm9uZyBzZXNzaW9uXG4gICAgICAgIGlmICh0aGlzLmN1ck9wKSB0aGlzLmVuZE9wZXJhdGlvbigpO1xuICAgICAgICB0aGlzLmN1ck9wID0ge307XG5cbiAgICAgICAgdmFyIG9sZFNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIGlmIChvbGRTZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ub2ZmKFwiY2hhbmdlXCIsIHRoaXMuJG9uRG9jdW1lbnRDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcImNoYW5nZU1vZGVcIiwgdGhpcy4kb25DaGFuZ2VNb2RlKTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5vZmYoXCJ0b2tlbml6ZXJVcGRhdGVcIiwgdGhpcy4kb25Ub2tlbml6ZXJVcGRhdGUpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcImNoYW5nZVRhYlNpemVcIiwgdGhpcy4kb25DaGFuZ2VUYWJTaXplKTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5vZmYoXCJjaGFuZ2VXcmFwTGltaXRcIiwgdGhpcy4kb25DaGFuZ2VXcmFwTGltaXQpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcImNoYW5nZVdyYXBNb2RlXCIsIHRoaXMuJG9uQ2hhbmdlV3JhcE1vZGUpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcImNoYW5nZUZvbGRcIiwgdGhpcy4kb25DaGFuZ2VGb2xkKTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5vZmYoXCJjaGFuZ2VGcm9udE1hcmtlclwiLCB0aGlzLiRvbkNoYW5nZUZyb250TWFya2VyKTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5vZmYoXCJjaGFuZ2VCYWNrTWFya2VyXCIsIHRoaXMuJG9uQ2hhbmdlQmFja01hcmtlcik7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ub2ZmKFwiY2hhbmdlQnJlYWtwb2ludFwiLCB0aGlzLiRvbkNoYW5nZUJyZWFrcG9pbnQpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcImNoYW5nZUFubm90YXRpb25cIiwgdGhpcy4kb25DaGFuZ2VBbm5vdGF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5vZmYoXCJjaGFuZ2VPdmVyd3JpdGVcIiwgdGhpcy4kb25DdXJzb3JDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcImNoYW5nZVNjcm9sbFRvcFwiLCB0aGlzLiRvblNjcm9sbFRvcENoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ub2ZmKFwiY2hhbmdlU2Nyb2xsTGVmdFwiLCB0aGlzLiRvblNjcm9sbExlZnRDaGFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcInN0YXJ0T3BlcmF0aW9uXCIsIHRoaXMuJG9uU3RhcnRPcGVyYXRpb24pO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcImVuZE9wZXJhdGlvblwiLCB0aGlzLiRvbkVuZE9wZXJhdGlvbik7XG5cbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSB0aGlzLnNlc3Npb24uZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBzZWxlY3Rpb24ub2ZmKFwiY2hhbmdlQ3Vyc29yXCIsIHRoaXMuJG9uQ3Vyc29yQ2hhbmdlKTtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5vZmYoXCJjaGFuZ2VTZWxlY3Rpb25cIiwgdGhpcy4kb25TZWxlY3Rpb25DaGFuZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgICAgIHRoaXMuJG9uRG9jdW1lbnRDaGFuZ2UgPSB0aGlzLm9uRG9jdW1lbnRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHNlc3Npb24ub24oXCJjaGFuZ2VcIiwgdGhpcy4kb25Eb2N1bWVudENoYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNlc3Npb24oc2Vzc2lvbik7XG5cbiAgICAgICAgICAgIHRoaXMuJG9uQ2hhbmdlTW9kZSA9IHRoaXMub25DaGFuZ2VNb2RlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICBzZXNzaW9uLm9uKFwiY2hhbmdlTW9kZVwiLCB0aGlzLiRvbkNoYW5nZU1vZGUpO1xuXG4gICAgICAgICAgICB0aGlzLiRvblRva2VuaXplclVwZGF0ZSA9IHRoaXMub25Ub2tlbml6ZXJVcGRhdGUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIHNlc3Npb24ub24oXCJ0b2tlbml6ZXJVcGRhdGVcIiwgdGhpcy4kb25Ub2tlbml6ZXJVcGRhdGUpO1xuXG4gICAgICAgICAgICB0aGlzLiRvbkNoYW5nZVRhYlNpemUgPSB0aGlzLnJlbmRlcmVyLm9uQ2hhbmdlVGFiU2l6ZS5iaW5kKHRoaXMucmVuZGVyZXIpO1xuICAgICAgICAgICAgc2Vzc2lvbi5vbihcImNoYW5nZVRhYlNpemVcIiwgdGhpcy4kb25DaGFuZ2VUYWJTaXplKTtcblxuICAgICAgICAgICAgdGhpcy4kb25DaGFuZ2VXcmFwTGltaXQgPSB0aGlzLm9uQ2hhbmdlV3JhcExpbWl0LmJpbmQodGhpcyk7XG4gICAgICAgICAgICBzZXNzaW9uLm9uKFwiY2hhbmdlV3JhcExpbWl0XCIsIHRoaXMuJG9uQ2hhbmdlV3JhcExpbWl0KTtcblxuICAgICAgICAgICAgdGhpcy4kb25DaGFuZ2VXcmFwTW9kZSA9IHRoaXMub25DaGFuZ2VXcmFwTW9kZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgc2Vzc2lvbi5vbihcImNoYW5nZVdyYXBNb2RlXCIsIHRoaXMuJG9uQ2hhbmdlV3JhcE1vZGUpO1xuXG4gICAgICAgICAgICB0aGlzLiRvbkNoYW5nZUZvbGQgPSB0aGlzLm9uQ2hhbmdlRm9sZC5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgc2Vzc2lvbi5vbihcImNoYW5nZUZvbGRcIiwgdGhpcy4kb25DaGFuZ2VGb2xkKTtcblxuICAgICAgICAgICAgdGhpcy4kb25DaGFuZ2VGcm9udE1hcmtlciA9IHRoaXMub25DaGFuZ2VGcm9udE1hcmtlci5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9uKFwiY2hhbmdlRnJvbnRNYXJrZXJcIiwgdGhpcy4kb25DaGFuZ2VGcm9udE1hcmtlcik7XG5cbiAgICAgICAgICAgIHRoaXMuJG9uQ2hhbmdlQmFja01hcmtlciA9IHRoaXMub25DaGFuZ2VCYWNrTWFya2VyLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ub24oXCJjaGFuZ2VCYWNrTWFya2VyXCIsIHRoaXMuJG9uQ2hhbmdlQmFja01hcmtlcik7XG5cbiAgICAgICAgICAgIHRoaXMuJG9uQ2hhbmdlQnJlYWtwb2ludCA9IHRoaXMub25DaGFuZ2VCcmVha3BvaW50LmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ub24oXCJjaGFuZ2VCcmVha3BvaW50XCIsIHRoaXMuJG9uQ2hhbmdlQnJlYWtwb2ludCk7XG5cbiAgICAgICAgICAgIHRoaXMuJG9uQ2hhbmdlQW5ub3RhdGlvbiA9IHRoaXMub25DaGFuZ2VBbm5vdGF0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ub24oXCJjaGFuZ2VBbm5vdGF0aW9uXCIsIHRoaXMuJG9uQ2hhbmdlQW5ub3RhdGlvbik7XG5cbiAgICAgICAgICAgIHRoaXMuJG9uQ3Vyc29yQ2hhbmdlID0gdGhpcy5vbkN1cnNvckNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9uKFwiY2hhbmdlT3ZlcndyaXRlXCIsIHRoaXMuJG9uQ3Vyc29yQ2hhbmdlKTtcblxuICAgICAgICAgICAgdGhpcy4kb25TY3JvbGxUb3BDaGFuZ2UgPSB0aGlzLm9uU2Nyb2xsVG9wQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ub24oXCJjaGFuZ2VTY3JvbGxUb3BcIiwgdGhpcy4kb25TY3JvbGxUb3BDaGFuZ2UpO1xuXG4gICAgICAgICAgICB0aGlzLiRvblNjcm9sbExlZnRDaGFuZ2UgPSB0aGlzLm9uU2Nyb2xsTGVmdENoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9uKFwiY2hhbmdlU2Nyb2xsTGVmdFwiLCB0aGlzLiRvblNjcm9sbExlZnRDaGFuZ2UpO1xuXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHNlc3Npb24uZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5vbihcImNoYW5nZUN1cnNvclwiLCB0aGlzLiRvbkN1cnNvckNoYW5nZSk7XG5cbiAgICAgICAgICAgIHRoaXMuJG9uU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24ub24oXCJjaGFuZ2VTZWxlY3Rpb25cIiwgdGhpcy4kb25TZWxlY3Rpb25DaGFuZ2UpO1xuXG4gICAgICAgICAgICB0aGlzLiRvblN0YXJ0T3BlcmF0aW9uID0gdGhpcy5vblN0YXJ0T3BlcmF0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ub24oXCJzdGFydE9wZXJhdGlvblwiLCB0aGlzLiRvblN0YXJ0T3BlcmF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuJG9uRW5kT3BlcmF0aW9uID0gdGhpcy5vbkVuZE9wZXJhdGlvbi5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9uKFwiZW5kT3BlcmF0aW9uXCIsIHRoaXMuJG9uRW5kT3BlcmF0aW9uKTtcblxuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZU1vZGUoKTtcblxuICAgICAgICAgICAgdGhpcy5vbkN1cnNvckNoYW5nZSgpO1xuXG4gICAgICAgICAgICB0aGlzLm9uU2Nyb2xsVG9wQ2hhbmdlKCk7XG4gICAgICAgICAgICB0aGlzLm9uU2Nyb2xsTGVmdENoYW5nZSgpO1xuICAgICAgICAgICAgdGhpcy5vblNlbGVjdGlvbkNoYW5nZSgpO1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZUZyb250TWFya2VyKCk7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlQmFja01hcmtlcigpO1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZUJyZWFrcG9pbnQoKTtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2VBbm5vdGF0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24uZ2V0VXNlV3JhcE1vZGUoKSAmJiB0aGlzLnJlbmRlcmVyLmFkanVzdFdyYXBMaW1pdCgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVGdWxsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNlc3Npb24oc2Vzc2lvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VTZXNzaW9uXCIsIHtcbiAgICAgICAgICAgIHNlc3Npb246IHNlc3Npb24sXG4gICAgICAgICAgICBvbGRTZXNzaW9uOiBvbGRTZXNzaW9uXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY3VyT3AgPSBudWxsO1xuXG4gICAgICAgIG9sZFNlc3Npb24gJiYgb2xkU2Vzc2lvbi5fc2lnbmFsKFwiY2hhbmdlRWRpdG9yXCIsIHtvbGRFZGl0b3I6IHRoaXN9KTtcbiAgICAgICAgaWYgKG9sZFNlc3Npb24pIG9sZFNlc3Npb24uJGVkaXRvciA9IG51bGw7XG4gICAgICAgIHNlc3Npb24gJiYgc2Vzc2lvbi5fc2lnbmFsKFwiY2hhbmdlRWRpdG9yXCIsIHtlZGl0b3I6IHRoaXN9KTtcbiAgICAgICAgaWYgKHNlc3Npb24pIHNlc3Npb24uJGVkaXRvciA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHNlc3Npb24gJiYgIXNlc3Npb24uZGVzdHJveWVkKVxuICAgICAgICAgICAgc2Vzc2lvbi5iZ1Rva2VuaXplci5zY2hlZHVsZVN0YXJ0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBzZXNzaW9uIGJlaW5nIHVzZWQuXG4gICAgICogQHJldHVybnMge0VkaXRTZXNzaW9ufVxuICAgICAqKi9cbiAgICBnZXRTZXNzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgZG9jdW1lbnQgdG8gYHZhbGAuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbCBUaGUgbmV3IHZhbHVlIHRvIHNldCBmb3IgdGhlIGRvY3VtZW50XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtjdXJzb3JQb3NdIFdoZXJlIHRvIHNldCB0aGUgbmV3IHZhbHVlLiBgdW5kZWZpbmVkYCBvciAwIGlzIHNlbGVjdEFsbCwgLTEgaXMgYXQgdGhlIGRvY3VtZW50IHN0YXJ0LCBhbmQgMSBpcyBhdCB0aGUgZW5kXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgY3VycmVudCBkb2N1bWVudCB2YWx1ZVxuICAgICAqIEByZWxhdGVkIERvY3VtZW50LnNldFZhbHVlXG4gICAgICoqL1xuICAgIHNldFZhbHVlKHZhbCwgY3Vyc29yUG9zKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5kb2Muc2V0VmFsdWUodmFsKTtcblxuICAgICAgICBpZiAoIWN1cnNvclBvcylcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0QWxsKCk7XG4gICAgICAgIGVsc2UgaWYgKGN1cnNvclBvcyA9PSAxKVxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZUZpbGVFbmQoKTtcbiAgICAgICAgZWxzZSBpZiAoY3Vyc29yUG9zID09IC0xKVxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZUZpbGVTdGFydCgpO1xuXG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBzZXNzaW9uJ3MgY29udGVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24uZ2V0VmFsdWVcbiAgICAgKiovXG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb24uZ2V0VmFsdWUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBoaWdobGlnaHRlZCBzZWxlY3Rpb24uXG4gICAgICogQHJldHVybnMge1NlbGVjdGlvbn0gVGhlIHNlbGVjdGlvbiBvYmplY3RcbiAgICAgKiovXG4gICAgZ2V0U2VsZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogezpWaXJ0dWFsUmVuZGVyZXIub25SZXNpemV9XG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VdIElmIGB0cnVlYCwgcmVjb21wdXRlcyB0aGUgc2l6ZSwgZXZlbiBpZiB0aGUgaGVpZ2h0IGFuZCB3aWR0aCBoYXZlbid0IGNoYW5nZWRcbiAgICAgKiBAcmVsYXRlZCBWaXJ0dWFsUmVuZGVyZXIub25SZXNpemVcbiAgICAgKiovXG4gICAgcmVzaXplKGZvcmNlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIub25SZXNpemUoZm9yY2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHs6VmlydHVhbFJlbmRlcmVyLnNldFRoZW1lfVxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgaW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5UaGVtZX0gdGhlbWUgVGhlIHBhdGggdG8gYSB0aGVtZVxuICAgICAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gW2NiXSBvcHRpb25hbCBjYWxsYmFjayBjYWxsZWQgd2hlbiB0aGVtZSBpcyBsb2FkZWRcbiAgICAgKiovXG4gICAgc2V0VGhlbWUodGhlbWUsIGNiKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0VGhlbWUodGhlbWUsIGNiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB7OlZpcnR1YWxSZW5kZXJlci5nZXRUaGVtZX1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBzZXQgdGhlbWVcbiAgICAgKiBAcmVsYXRlZCBWaXJ0dWFsUmVuZGVyZXIuZ2V0VGhlbWVcbiAgICAgKiovXG4gICAgZ2V0VGhlbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmdldFRoZW1lKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogezpWaXJ0dWFsUmVuZGVyZXIuc2V0U3R5bGV9XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0eWxlIEEgY2xhc3MgbmFtZVxuICAgICAqIEByZWxhdGVkIFZpcnR1YWxSZW5kZXJlci5zZXRTdHlsZVxuICAgICAqKi9cbiAgICBzZXRTdHlsZShzdHlsZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHN0eWxlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB7OlZpcnR1YWxSZW5kZXJlci51bnNldFN0eWxlfVxuICAgICAqIEByZWxhdGVkIFZpcnR1YWxSZW5kZXJlci51bnNldFN0eWxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlXG4gICAgICovXG4gICAgdW5zZXRTdHlsZShzdHlsZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnVuc2V0U3R5bGUoc3R5bGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGN1cnJlbnQgZm9udCBzaXplIG9mIHRoZSBlZGl0b3IgdGV4dC5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmcgfCBudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0Rm9udFNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbihcImZvbnRTaXplXCIpIHx8XG4gICAgICAgICAgIGRvbS5jb21wdXRlZFN0eWxlKHRoaXMuY29udGFpbmVyKS5mb250U2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYSBuZXcgZm9udCBzaXplIChpbiBwaXhlbHMpIGZvciB0aGUgZWRpdG9yIHRleHQuXG4gICAgICogQHBhcmFtIHtTdHJpbmcgfCBudW1iZXJ9IHNpemUgQSBmb250IHNpemUgKCBfZS5nLl8gXCIxMnB4XCIpXG4gICAgICoqL1xuICAgIHNldEZvbnRTaXplKHNpemUpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJmb250U2l6ZVwiLCBzaXplKTtcbiAgICB9XG5cbiAgICAkaGlnaGxpZ2h0QnJhY2tldHMoKSB7XG4gICAgICAgIGlmICh0aGlzLiRoaWdobGlnaHRQZW5kaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwZXJmb3JtIGhpZ2hsaWdodCBhc3luYyB0byBub3QgYmxvY2sgdGhlIGJyb3dzZXIgZHVyaW5nIG5hdmlnYXRpb25cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLiRoaWdobGlnaHRQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLiRoaWdobGlnaHRQZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IHNlbGYuc2Vzc2lvbjtcbiAgICAgICAgICAgIGlmICghc2Vzc2lvbiB8fCBzZXNzaW9uLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHNlc3Npb24uJGJyYWNrZXRIaWdobGlnaHQpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLiRicmFja2V0SGlnaGxpZ2h0Lm1hcmtlcklkcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24ucmVtb3ZlTWFya2VyKGlkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLiRicmFja2V0SGlnaGxpZ2h0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwb3MgPSBzZWxmLmdldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgICAgICAgICB2YXIgaGFuZGxlciA9IHNlbGYuZ2V0S2V5Ym9hcmRIYW5kbGVyKCk7XG4gICAgICAgICAgICB2YXIgaXNCYWNrd2FyZHMgPSBoYW5kbGVyICYmIGhhbmRsZXIuJGdldERpcmVjdGlvbkZvckhpZ2hsaWdodCAmJiBoYW5kbGVyLiRnZXREaXJlY3Rpb25Gb3JIaWdobGlnaHQoc2VsZik7XG4gICAgICAgICAgICB2YXIgcmFuZ2VzID0gc2Vzc2lvbi5nZXRNYXRjaGluZ0JyYWNrZXRSYW5nZXMocG9zLCBpc0JhY2t3YXJkcyk7XG5cbiAgICAgICAgICAgIGlmICghcmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gbmV3IFRva2VuSXRlcmF0b3Ioc2Vzc2lvbiwgcG9zLnJvdywgcG9zLmNvbHVtbik7XG4gICAgICAgICAgICAgICAgdmFyIHRva2VuID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodG9rZW4gJiYgL1xcYig/OnRhZy1vcGVufHRhZy1uYW1lKS8udGVzdCh0b2tlbi50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnTmFtZXNSYW5nZXMgPSBzZXNzaW9uLmdldE1hdGNoaW5nVGFncyhwb3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnTmFtZXNSYW5nZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lc1Jhbmdlcy5vcGVuVGFnTmFtZS5pc0VtcHR5KCkgPyB0YWdOYW1lc1Jhbmdlcy5vcGVuVGFnIDogdGFnTmFtZXNSYW5nZXMub3BlblRhZ05hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZXNSYW5nZXMuY2xvc2VUYWdOYW1lLmlzRW1wdHkoKSA/IHRhZ05hbWVzUmFuZ2VzLmNsb3NlVGFnIDogdGFnTmFtZXNSYW5nZXMuY2xvc2VUYWdOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyYW5nZXMgJiYgc2Vzc2lvbi4kbW9kZS5nZXRNYXRjaGluZylcbiAgICAgICAgICAgICAgICByYW5nZXMgPSBzZXNzaW9uLiRtb2RlLmdldE1hdGNoaW5nKHNlbGYuc2Vzc2lvbik7XG4gICAgICAgICAgICBpZiAoIXJhbmdlcykge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmdldEhpZ2hsaWdodEluZGVudEd1aWRlcygpKSBzZWxmLnJlbmRlcmVyLiR0ZXh0TGF5ZXIuJGhpZ2hsaWdodEluZGVudEd1aWRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbWFya2VyVHlwZSA9IFwiYWNlX2JyYWNrZXRcIjtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyYW5nZXMpKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2VzID0gW3Jhbmdlc107XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJhbmdlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgIG1hcmtlclR5cGUgPSBcImFjZV9lcnJvcl9icmFja2V0XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNob3cgYWRqYWNlbnQgcmFuZ2VzIGFzIG9uZVxuICAgICAgICAgICAgaWYgKHJhbmdlcy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgIGlmIChSYW5nZS5jb21wYXJlUG9pbnRzKHJhbmdlc1swXS5lbmQsIHJhbmdlc1sxXS5zdGFydCkgPT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzID0gW1JhbmdlLmZyb21Qb2ludHMocmFuZ2VzWzBdLnN0YXJ0LCByYW5nZXNbMV0uZW5kKV07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoUmFuZ2UuY29tcGFyZVBvaW50cyhyYW5nZXNbMF0uc3RhcnQsIHJhbmdlc1sxXS5lbmQpID09IDApXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlcyA9IFtSYW5nZS5mcm9tUG9pbnRzKHJhbmdlc1sxXS5zdGFydCwgcmFuZ2VzWzBdLmVuZCldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXNzaW9uLiRicmFja2V0SGlnaGxpZ2h0ID0ge1xuICAgICAgICAgICAgICAgIHJhbmdlczogcmFuZ2VzLFxuICAgICAgICAgICAgICAgIG1hcmtlcklkczogcmFuZ2VzLm1hcChmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Vzc2lvbi5hZGRNYXJrZXIocmFuZ2UsIG1hcmtlclR5cGUsIFwidGV4dFwiKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChzZWxmLmdldEhpZ2hsaWdodEluZGVudEd1aWRlcygpKSBzZWxmLnJlbmRlcmVyLiR0ZXh0TGF5ZXIuJGhpZ2hsaWdodEluZGVudEd1aWRlKCk7XG4gICAgICAgIH0sIDUwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJyaW5ncyB0aGUgY3VycmVudCBgdGV4dElucHV0YCBpbnRvIGZvY3VzLlxuICAgICAqKi9cbiAgICBmb2N1cygpIHtcbiAgICAgICAgdGhpcy50ZXh0SW5wdXQuZm9jdXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY3VycmVudCBgdGV4dElucHV0YCBpcyBpbiBmb2N1cy5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc0ZvY3VzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHRJbnB1dC5pc0ZvY3VzZWQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJsdXJzIHRoZSBjdXJyZW50IGB0ZXh0SW5wdXRgLlxuICAgICAqKi9cbiAgICBibHVyKCkge1xuICAgICAgICB0aGlzLnRleHRJbnB1dC5ibHVyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1pdHRlZCBvbmNlIHRoZSBlZGl0b3IgY29tZXMgaW50byBmb2N1cy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiovXG4gICAgb25Gb2N1cyhlKSB7XG4gICAgICAgIGlmICh0aGlzLiRpc0ZvY3VzZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuJGlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2hvd0N1cnNvcigpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpc3VhbGl6ZUZvY3VzKCk7XG4gICAgICAgIHRoaXMuX2VtaXQoXCJmb2N1c1wiLCBlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbWl0dGVkIG9uY2UgdGhlIGVkaXRvciBoYXMgYmVlbiBibHVycmVkLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqKi9cbiAgICBvbkJsdXIoZSkge1xuICAgICAgICBpZiAoIXRoaXMuJGlzRm9jdXNlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy4kaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuaGlkZUN1cnNvcigpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnZpc3VhbGl6ZUJsdXIoKTtcbiAgICAgICAgdGhpcy5fZW1pdChcImJsdXJcIiwgZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICovXG4gICAgJGN1cnNvckNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVDdXJzb3IoKTtcbiAgICAgICAgdGhpcy4kaGlnaGxpZ2h0QnJhY2tldHMoKTtcbiAgICAgICAgdGhpcy4kdXBkYXRlSGlnaGxpZ2h0QWN0aXZlTGluZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVtaXR0ZWQgd2hlbmV2ZXIgdGhlIGRvY3VtZW50IGlzIGNoYW5nZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkRlbHRhfSBkZWx0YSBDb250YWlucyBhIHNpbmdsZSBwcm9wZXJ0eSwgYGRhdGFgLCB3aGljaCBoYXMgdGhlIGRlbHRhIG9mIGNoYW5nZXNcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiovXG4gICAgb25Eb2N1bWVudENoYW5nZShkZWx0YSkge1xuICAgICAgICAvLyBSZXJlbmRlciBhbmQgZW1pdCBcImNoYW5nZVwiIGV2ZW50LlxuICAgICAgICB2YXIgd3JhcCA9IHRoaXMuc2Vzc2lvbi4kdXNlV3JhcE1vZGU7XG4gICAgICAgIHZhciBsYXN0Um93ID0gKGRlbHRhLnN0YXJ0LnJvdyA9PSBkZWx0YS5lbmQucm93ID8gZGVsdGEuZW5kLnJvdyA6IEluZmluaXR5KTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVMaW5lcyhkZWx0YS5zdGFydC5yb3csIGxhc3RSb3csIHdyYXApO1xuXG4gICAgICAgIHRoaXMuX3NpZ25hbChcImNoYW5nZVwiLCBkZWx0YSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGN1cnNvciBiZWNhdXNlIHRhYiBjaGFyYWN0ZXJzIGNhbiBpbmZsdWVuY2UgdGhlIGN1cnNvciBwb3NpdGlvbi5cbiAgICAgICAgdGhpcy4kY3Vyc29yQ2hhbmdlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25Ub2tlbml6ZXJVcGRhdGUoZSkge1xuICAgICAgICB2YXIgcm93cyA9IGUuZGF0YTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVMaW5lcyhyb3dzLmZpcnN0LCByb3dzLmxhc3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uU2Nyb2xsVG9wQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbFRvWSh0aGlzLnNlc3Npb24uZ2V0U2Nyb2xsVG9wKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uU2Nyb2xsTGVmdENoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zY3JvbGxUb1godGhpcy5zZXNzaW9uLmdldFNjcm9sbExlZnQoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1pdHRlZCB3aGVuIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiovXG4gICAgb25DdXJzb3JDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuJGN1cnNvckNoYW5nZSgpO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VTZWxlY3Rpb25cIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICovXG4gICAgJHVwZGF0ZUhpZ2hsaWdodEFjdGl2ZUxpbmUoKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5nZXRTZXNzaW9uKCk7XG4gICAgICAgIC8qKkB0eXBlIHtQb2ludHxmYWxzZX0qL1xuICAgICAgICB2YXIgaGlnaGxpZ2h0O1xuICAgICAgICBpZiAodGhpcy4kaGlnaGxpZ2h0QWN0aXZlTGluZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNlbGVjdGlvblN0eWxlICE9IFwibGluZVwiIHx8ICF0aGlzLnNlbGVjdGlvbi5pc011bHRpTGluZSgpKVxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodCA9IHRoaXMuZ2V0Q3Vyc29yUG9zaXRpb24oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVyLnRoZW1lICYmIHRoaXMucmVuZGVyZXIudGhlbWUuJHNlbGVjdGlvbkNvbG9yQ29uZmxpY3QgJiYgIXRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSlcbiAgICAgICAgICAgICAgICBoaWdobGlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVyLiRtYXhMaW5lcyAmJiB0aGlzLnNlc3Npb24uZ2V0TGVuZ3RoKCkgPT09IDEgJiYgISh0aGlzLnJlbmRlcmVyLiRtaW5MaW5lcyA+IDEpKVxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlc3Npb24uJGhpZ2hsaWdodExpbmVNYXJrZXIgJiYgIWhpZ2hsaWdodCkge1xuICAgICAgICAgICAgc2Vzc2lvbi5yZW1vdmVNYXJrZXIoc2Vzc2lvbi4kaGlnaGxpZ2h0TGluZU1hcmtlci5pZCk7XG4gICAgICAgICAgICBzZXNzaW9uLiRoaWdobGlnaHRMaW5lTWFya2VyID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmICghc2Vzc2lvbi4kaGlnaGxpZ2h0TGluZU1hcmtlciAmJiBoaWdobGlnaHQpIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShoaWdobGlnaHQucm93LCBoaWdobGlnaHQuY29sdW1uLCBoaWdobGlnaHQucm93LCBJbmZpbml0eSk7XG4gICAgICAgICAgICByYW5nZS5pZCA9IHNlc3Npb24uYWRkTWFya2VyKHJhbmdlLCBcImFjZV9hY3RpdmUtbGluZVwiLCBcInNjcmVlbkxpbmVcIik7XG4gICAgICAgICAgICBzZXNzaW9uLiRoaWdobGlnaHRMaW5lTWFya2VyID0gcmFuZ2U7XG4gICAgICAgIH0gZWxzZSBpZiAoaGlnaGxpZ2h0KSB7XG4gICAgICAgICAgICBzZXNzaW9uLiRoaWdobGlnaHRMaW5lTWFya2VyLnN0YXJ0LnJvdyA9IGhpZ2hsaWdodC5yb3c7XG4gICAgICAgICAgICBzZXNzaW9uLiRoaWdobGlnaHRMaW5lTWFya2VyLmVuZC5yb3cgPSBoaWdobGlnaHQucm93O1xuICAgICAgICAgICAgc2Vzc2lvbi4kaGlnaGxpZ2h0TGluZU1hcmtlci5zdGFydC5jb2x1bW4gPSBoaWdobGlnaHQuY29sdW1uO1xuICAgICAgICAgICAgc2Vzc2lvbi5fc2lnbmFsKFwiY2hhbmdlQmFja01hcmtlclwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25TZWxlY3Rpb25DaGFuZ2UoZSkge1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcblxuICAgICAgICBpZiAoc2Vzc2lvbi4kc2VsZWN0aW9uTWFya2VyKSB7XG4gICAgICAgICAgICBzZXNzaW9uLnJlbW92ZU1hcmtlcihzZXNzaW9uLiRzZWxlY3Rpb25NYXJrZXIpO1xuICAgICAgICB9XG4gICAgICAgIHNlc3Npb24uJHNlbGVjdGlvbk1hcmtlciA9IG51bGw7XG5cbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmdldFNlbGVjdGlvblN0eWxlKCk7XG4gICAgICAgICAgICBzZXNzaW9uLiRzZWxlY3Rpb25NYXJrZXIgPSBzZXNzaW9uLmFkZE1hcmtlcihyYW5nZSwgXCJhY2Vfc2VsZWN0aW9uXCIsIHN0eWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJHVwZGF0ZUhpZ2hsaWdodEFjdGl2ZUxpbmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZSA9IHRoaXMuJGhpZ2hsaWdodFNlbGVjdGVkV29yZCAmJiB0aGlzLiRnZXRTZWxlY3Rpb25IaWdoTGlnaHRSZWdleHAoKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLmhpZ2hsaWdodChyZSk7XG5cbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlU2VsZWN0aW9uXCIpO1xuICAgIH1cblxuICAgICRnZXRTZWxlY3Rpb25IaWdoTGlnaHRSZWdleHAoKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuXG4gICAgICAgIHZhciBzZWxlY3Rpb24gPSB0aGlzLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGlmIChzZWxlY3Rpb24uaXNFbXB0eSgpIHx8IHNlbGVjdGlvbi5pc011bHRpTGluZSgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBzdGFydENvbHVtbiA9IHNlbGVjdGlvbi5zdGFydC5jb2x1bW47XG4gICAgICAgIHZhciBlbmRDb2x1bW4gPSBzZWxlY3Rpb24uZW5kLmNvbHVtbjtcbiAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUoc2VsZWN0aW9uLnN0YXJ0LnJvdyk7XG5cbiAgICAgICAgdmFyIG5lZWRsZSA9IGxpbmUuc3Vic3RyaW5nKHN0YXJ0Q29sdW1uLCBlbmRDb2x1bW4pO1xuICAgICAgICAvLyBtYXhpbXVtIGFsbG93ZWQgc2l6ZSBmb3IgcmVndWxhciBleHByZXNzaW9ucyBpbiAzMjAwMCxcbiAgICAgICAgLy8gYnV0IGdldHRpbmcgY2xvc2UgdG8gaXQgaGFzIHNpZ25pZmljYW50IGltcGFjdCBvbiB0aGUgcGVyZm9ybWFuY2VcbiAgICAgICAgaWYgKG5lZWRsZS5sZW5ndGggPiA1MDAwIHx8ICEvW1xcd1xcZF0vLnRlc3QobmVlZGxlKSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgcmUgPSB0aGlzLiRzZWFyY2guJGFzc2VtYmxlUmVnRXhwKHtcbiAgICAgICAgICAgIHdob2xlV29yZDogdHJ1ZSxcbiAgICAgICAgICAgIGNhc2VTZW5zaXRpdmU6IHRydWUsXG4gICAgICAgICAgICBuZWVkbGU6IG5lZWRsZVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgd29yZFdpdGhCb3VuZGFyeSA9IGxpbmUuc3Vic3RyaW5nKHN0YXJ0Q29sdW1uIC0gMSwgZW5kQ29sdW1uICsgMSk7XG4gICAgICAgIGlmICghcmUudGVzdCh3b3JkV2l0aEJvdW5kYXJ5KSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICByZXR1cm4gcmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25DaGFuZ2VGcm9udE1hcmtlcigpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVGcm9udE1hcmtlcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkNoYW5nZUJhY2tNYXJrZXIoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQmFja01hcmtlcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkNoYW5nZUJyZWFrcG9pbnQoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQnJlYWtwb2ludHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkNoYW5nZUFubm90YXRpb24oKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QW5ub3RhdGlvbnModGhpcy5zZXNzaW9uLmdldEFubm90YXRpb25zKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25DaGFuZ2VNb2RlIChlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlVGV4dCgpO1xuICAgICAgICB0aGlzLl9lbWl0KFwiY2hhbmdlTW9kZVwiLCBlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkNoYW5nZVdyYXBMaW1pdCgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVGdWxsKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25DaGFuZ2VXcmFwTW9kZSgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5vblJlc2l6ZSh0cnVlKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uQ2hhbmdlRm9sZCgpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBhY3RpdmUgbGluZSBtYXJrZXIgYXMgZHVlIHRvIGZvbGRpbmcgY2hhbmdlcyB0aGUgY3VycmVudFxuICAgICAgICAvLyBsaW5lIHJhbmdlIG9uIHRoZSBzY3JlZW4gbWlnaHQgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICB0aGlzLiR1cGRhdGVIaWdobGlnaHRBY3RpdmVMaW5lKCk7XG4gICAgICAgIC8vIFRPRE86IFRoaXMgbWlnaHQgYmUgdG9vIG11Y2ggdXBkYXRpbmcuIE9rYXkgZm9yIG5vdy5cbiAgICAgICAgdGhpcy5yZW5kZXJlci51cGRhdGVGdWxsKCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzdHJpbmcgb2YgdGV4dCBjdXJyZW50bHkgaGlnaGxpZ2h0ZWQuXG4gICAgICogQHJldHVybnMge1N0cmluZ31cbiAgICAgKiovXG4gICAgZ2V0U2VsZWN0ZWRUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uLmdldFRleHRSYW5nZSh0aGlzLmdldFNlbGVjdGlvblJhbmdlKCkpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc3RyaW5nIG9mIHRleHQgY3VycmVudGx5IGhpZ2hsaWdodGVkLlxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAgICoqL1xuICAgIGdldENvcHlUZXh0ICgpIHtcbiAgICAgICAgdmFyIHRleHQgPSB0aGlzLmdldFNlbGVjdGVkVGV4dCgpO1xuICAgICAgICB2YXIgbmwgPSB0aGlzLnNlc3Npb24uZG9jLmdldE5ld0xpbmVDaGFyYWN0ZXIoKTtcbiAgICAgICAgdmFyIGNvcHlMaW5lPSBmYWxzZTtcbiAgICAgICAgaWYgKCF0ZXh0ICYmIHRoaXMuJGNvcHlXaXRoRW1wdHlTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvcHlMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlbGVjdGlvbi5nZXRBbGxSYW5nZXMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChpICYmIHJhbmdlc1tpIC0gMV0uc3RhcnQucm93ID09IHJhbmdlLnN0YXJ0LnJvdylcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgdGV4dCArPSB0aGlzLnNlc3Npb24uZ2V0TGluZShyYW5nZS5zdGFydC5yb3cpICsgbmw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGUgPSB7dGV4dDogdGV4dH07XG4gICAgICAgIHRoaXMuX3NpZ25hbChcImNvcHlcIiwgZSk7XG4gICAgICAgIGNsaXBib2FyZC5saW5lTW9kZSA9IGNvcHlMaW5lID8gZS50ZXh0IDogZmFsc2U7XG4gICAgICAgIHJldHVybiBlLnRleHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW5ldmVyIGEgdGV4dCBcImNvcHlcIiBoYXBwZW5zLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqKi9cbiAgICBvbkNvcHkoKSB7XG4gICAgICAgIHRoaXMuY29tbWFuZHMuZXhlYyhcImNvcHlcIiwgdGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW5ldmVyIGEgdGV4dCBcImN1dFwiIGhhcHBlbnMuXG4gICAgICogQGludGVybmFsXG4gICAgICoqL1xuICAgIG9uQ3V0KCkge1xuICAgICAgICB0aGlzLmNvbW1hbmRzLmV4ZWMoXCJjdXRcIiwgdGhpcyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbmV2ZXIgYSB0ZXh0IFwicGFzdGVcIiBoYXBwZW5zLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSBwYXN0ZWQgdGV4dFxuICAgICAqIEBwYXJhbSB7YW55fSBldmVudFxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqKi9cbiAgICBvblBhc3RlKHRleHQsIGV2ZW50KSB7XG4gICAgICAgIHZhciBlID0ge3RleHQ6IHRleHQsIGV2ZW50OiBldmVudH07XG4gICAgICAgIHRoaXMuY29tbWFuZHMuZXhlYyhcInBhc3RlXCIsIHRoaXMsIGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGVcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICAkaGFuZGxlUGFzdGUoZSkge1xuICAgICAgICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIGUgPSB7dGV4dDogZX07XG4gICAgICAgIHRoaXMuX3NpZ25hbChcInBhc3RlXCIsIGUpO1xuICAgICAgICB2YXIgdGV4dCA9IGUudGV4dDtcblxuICAgICAgICB2YXIgbGluZU1vZGUgPSB0ZXh0ID09PSBjbGlwYm9hcmQubGluZU1vZGU7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICBpZiAoIXRoaXMuaW5NdWx0aVNlbGVjdE1vZGUgfHwgdGhpcy5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICBpZiAobGluZU1vZGUpXG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5pbnNlcnQoeyByb3c6IHRoaXMuc2VsZWN0aW9uLmxlYWQucm93LCBjb2x1bW46IDAgfSwgdGV4dCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnQodGV4dCk7XG4gICAgICAgIH0gZWxzZSBpZiAobGluZU1vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnJhbmdlTGlzdC5yYW5nZXMuZm9yRWFjaChmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICAgICAgICAgIHNlc3Npb24uaW5zZXJ0KHsgcm93OiByYW5nZS5zdGFydC5yb3csIGNvbHVtbjogMCB9LCB0ZXh0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGxpbmVzID0gdGV4dC5zcGxpdCgvXFxyXFxufFxccnxcXG4vKTtcbiAgICAgICAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlbGVjdGlvbi5yYW5nZUxpc3QucmFuZ2VzO1xuXG4gICAgICAgICAgICB2YXIgaXNGdWxsTGluZSA9IGxpbmVzLmxlbmd0aCA9PSAyICYmICghbGluZXNbMF0gfHwgIWxpbmVzWzFdKTtcbiAgICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggIT0gcmFuZ2VzLmxlbmd0aCB8fCBpc0Z1bGxMaW5lKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmRzLmV4ZWMoXCJpbnNlcnRzdHJpbmdcIiwgdGhpcywgdGV4dCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSByYW5nZXMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghcmFuZ2UuaXNFbXB0eSgpKVxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnJlbW92ZShyYW5nZSk7XG5cbiAgICAgICAgICAgICAgICBzZXNzaW9uLmluc2VydChyYW5nZS5zdGFydCwgbGluZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdfSBjb21tYW5kXG4gICAgICogQHBhcmFtIFthcmdzXVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgZXhlY0NvbW1hbmQoY29tbWFuZCwgYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21tYW5kcy5leGVjKGNvbW1hbmQsIHRoaXMsIGFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYHRleHRgIGludG8gd2hlcmV2ZXIgdGhlIGN1cnNvciBpcyBwb2ludGluZy5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgbmV3IHRleHQgdG8gYWRkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbcGFzdGVkXVxuICAgICAqKi9cbiAgICBpbnNlcnQodGV4dCwgcGFzdGVkKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICB2YXIgbW9kZSA9IHNlc3Npb24uZ2V0TW9kZSgpO1xuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5nZXRDdXJzb3JQb3NpdGlvbigpO1xuXG4gICAgICAgIGlmICh0aGlzLmdldEJlaGF2aW91cnNFbmFibGVkKCkgJiYgIXBhc3RlZCkge1xuICAgICAgICAgICAgLy8gR2V0IGEgdHJhbnNmb3JtIGlmIHRoZSBjdXJyZW50IG1vZGUgd2FudHMgb25lLlxuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IG1vZGUudHJhbnNmb3JtQWN0aW9uKHNlc3Npb24uZ2V0U3RhdGUoY3Vyc29yLnJvdyksICdpbnNlcnRpb24nLCB0aGlzLCBzZXNzaW9uLCB0ZXh0KTtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICBpZiAodGV4dCAhPT0gdHJhbnNmb3JtLnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCBhdXRvbWF0aWMgaW5zZXJ0aW9uIGluIGEgc2VwYXJhdGUgZGVsdGEsIHVubGVzcyBpdCBpcyBpbiBtdWx0aXNlbGVjdCBtb2RlXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb24ubWVyZ2VVbmRvRGVsdGFzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lcmdlTmV4dENvbW1hbmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZXh0ID0gdHJhbnNmb3JtLnRleHQ7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXh0ID09IFwiXFx0XCIpXG4gICAgICAgICAgICB0ZXh0ID0gdGhpcy5zZXNzaW9uLmdldFRhYlN0cmluZygpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBzZWxlY3RlZCB0ZXh0XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgICAgICBjdXJzb3IgPSB0aGlzLnNlc3Npb24ucmVtb3ZlKHJhbmdlKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnNlc3Npb24uZ2V0T3ZlcndyaXRlKCkgJiYgdGV4dC5pbmRleE9mKFwiXFxuXCIpID09IC0xKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBSYW5nZS5mcm9tUG9pbnRzKGN1cnNvciwgY3Vyc29yKTtcbiAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4gKz0gdGV4dC5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ucmVtb3ZlKHJhbmdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXh0ID09IFwiXFxuXCIgfHwgdGV4dCA9PSBcIlxcclxcblwiKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShjdXJzb3Iucm93KTtcbiAgICAgICAgICAgIGlmIChjdXJzb3IuY29sdW1uID4gbGluZS5zZWFyY2goL1xcU3wkLykpIHtcbiAgICAgICAgICAgICAgICB2YXIgZCA9IGxpbmUuc3Vic3RyKGN1cnNvci5jb2x1bW4pLnNlYXJjaCgvXFxTfCQvKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLmRvYy5yZW1vdmVJbkxpbmUoY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbiwgY3Vyc29yLmNvbHVtbiArIGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcblxuICAgICAgICB2YXIgc3RhcnQgPSBjdXJzb3IuY29sdW1uO1xuICAgICAgICB2YXIgbGluZVN0YXRlID0gc2Vzc2lvbi5nZXRTdGF0ZShjdXJzb3Iucm93KTtcbiAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUoY3Vyc29yLnJvdyk7XG4gICAgICAgIHZhciBzaG91bGRPdXRkZW50ID0gbW9kZS5jaGVja091dGRlbnQobGluZVN0YXRlLCBsaW5lLCB0ZXh0KTtcbiAgICAgICAgc2Vzc2lvbi5pbnNlcnQoY3Vyc29yLCB0ZXh0KTtcblxuICAgICAgICBpZiAodHJhbnNmb3JtICYmIHRyYW5zZm9ybS5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0uc2VsZWN0aW9uLmxlbmd0aCA9PSAyKSB7IC8vIFRyYW5zZm9ybSByZWxhdGl2ZSB0byB0aGUgY3VycmVudCBjb2x1bW5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25SYW5nZShcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJhbmdlKGN1cnNvci5yb3csIHN0YXJ0ICsgdHJhbnNmb3JtLnNlbGVjdGlvblswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5yb3csIHN0YXJ0ICsgdHJhbnNmb3JtLnNlbGVjdGlvblsxXSkpO1xuICAgICAgICAgICAgfSBlbHNlIHsgLy8gVHJhbnNmb3JtIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IHJvdy5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25SYW5nZShcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJhbmdlKGN1cnNvci5yb3cgKyB0cmFuc2Zvcm0uc2VsZWN0aW9uWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLnNlbGVjdGlvblsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5yb3cgKyB0cmFuc2Zvcm0uc2VsZWN0aW9uWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLnNlbGVjdGlvblszXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiRlbmFibGVBdXRvSW5kZW50KSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5nZXREb2N1bWVudCgpLmlzTmV3TGluZSh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIHZhciBsaW5lSW5kZW50ID0gbW9kZS5nZXROZXh0TGluZUluZGVudChsaW5lU3RhdGUsIGxpbmUuc2xpY2UoMCwgY3Vyc29yLmNvbHVtbiksIHNlc3Npb24uZ2V0VGFiU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5pbnNlcnQoe3JvdzogY3Vyc29yLnJvdysxLCBjb2x1bW46IDB9LCBsaW5lSW5kZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaG91bGRPdXRkZW50KVxuICAgICAgICAgICAgICAgIG1vZGUuYXV0b091dGRlbnQobGluZVN0YXRlLCBzZXNzaW9uLCBjdXJzb3Iucm93KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGF1dG9JbmRlbnQoKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICB2YXIgbW9kZSA9IHNlc3Npb24uZ2V0TW9kZSgpO1xuXG4gICAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KClcbiAgICAgICAgICAgID8gW25ldyBSYW5nZSgwLCAwLCBzZXNzaW9uLmRvYy5nZXRMZW5ndGgoKSAtIDEsIDApXVxuICAgICAgICAgICAgOiB0aGlzLnNlbGVjdGlvbi5nZXRBbGxSYW5nZXMoKTtcblxuICAgICAgICAvKipAdHlwZXtzdHJpbmd8c3RyaW5nW119Ki9cbiAgICAgICAgdmFyIHByZXZMaW5lU3RhdGUgPSBcIlwiO1xuICAgICAgICB2YXIgcHJldkxpbmUgPSBcIlwiO1xuICAgICAgICB2YXIgbGluZUluZGVudCA9IFwiXCI7XG4gICAgICAgIHZhciB0YWIgPSBzZXNzaW9uLmdldFRhYlN0cmluZygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN0YXJ0Um93ID0gcmFuZ2VzW2ldLnN0YXJ0LnJvdztcbiAgICAgICAgICAgIHZhciBlbmRSb3cgPSByYW5nZXNbaV0uZW5kLnJvdztcblxuICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gc3RhcnRSb3c7IHJvdyA8PSBlbmRSb3c7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldkxpbmVTdGF0ZSA9IHNlc3Npb24uZ2V0U3RhdGUocm93IC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZMaW5lID0gc2Vzc2lvbi5nZXRMaW5lKHJvdyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBsaW5lSW5kZW50ID0gbW9kZS5nZXROZXh0TGluZUluZGVudChwcmV2TGluZVN0YXRlLCBwcmV2TGluZSwgdGFiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShyb3cpO1xuICAgICAgICAgICAgICAgIHZhciBjdXJySW5kZW50ID0gbW9kZS4kZ2V0SW5kZW50KGxpbmUpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lSW5kZW50ICE9PSBjdXJySW5kZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJySW5kZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IG5ldyBSYW5nZShyb3csIDAsIHJvdywgY3VyckluZGVudC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5yZW1vdmUocmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lSW5kZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb24uaW5zZXJ0KHtyb3c6IHJvdywgY29sdW1uOiAwfSwgbGluZUluZGVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtb2RlLmF1dG9PdXRkZW50KHByZXZMaW5lU3RhdGUsIHNlc3Npb24sIHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXh0XG4gICAgICogQHBhcmFtIGNvbXBvc2l0aW9uXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25UZXh0SW5wdXQodGV4dCwgY29tcG9zaXRpb24pIHtcbiAgICAgICAgaWYgKCFjb21wb3NpdGlvbilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtleUJpbmRpbmcub25UZXh0SW5wdXQodGV4dCk7XG5cbiAgICAgICAgdGhpcy5zdGFydE9wZXJhdGlvbih7Y29tbWFuZDogeyBuYW1lOiBcImluc2VydHN0cmluZ1wiIH19KTtcbiAgICAgICAgdmFyIGFwcGx5Q29tcG9zaXRpb24gPSB0aGlzLmFwcGx5Q29tcG9zaXRpb24uYmluZCh0aGlzLCB0ZXh0LCBjb21wb3NpdGlvbik7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbi5yYW5nZUNvdW50KVxuICAgICAgICAgICAgdGhpcy5mb3JFYWNoU2VsZWN0aW9uKGFwcGx5Q29tcG9zaXRpb24pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcHBseUNvbXBvc2l0aW9uKCk7XG4gICAgICAgIHRoaXMuZW5kT3BlcmF0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt0ZXh0XVxuICAgICAqIEBwYXJhbSB7YW55fSBbY29tcG9zaXRpb25dXG4gICAgICovXG4gICAgYXBwbHlDb21wb3NpdGlvbih0ZXh0LCBjb21wb3NpdGlvbikge1xuICAgICAgICBpZiAoY29tcG9zaXRpb24uZXh0ZW5kTGVmdCB8fCBjb21wb3NpdGlvbi5leHRlbmRSaWdodCkge1xuICAgICAgICAgICAgdmFyIHIgPSB0aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO1xuICAgICAgICAgICAgci5zdGFydC5jb2x1bW4gLT0gY29tcG9zaXRpb24uZXh0ZW5kTGVmdDtcbiAgICAgICAgICAgIHIuZW5kLmNvbHVtbiArPSBjb21wb3NpdGlvbi5leHRlbmRSaWdodDtcbiAgICAgICAgICAgIGlmIChyLnN0YXJ0LmNvbHVtbiA8IDApIHtcbiAgICAgICAgICAgICAgICByLnN0YXJ0LnJvdy0tO1xuICAgICAgICAgICAgICAgIHIuc3RhcnQuY29sdW1uICs9IHRoaXMuc2Vzc2lvbi5nZXRMaW5lKHIuc3RhcnQucm93KS5sZW5ndGggKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uc2V0UmFuZ2Uocik7XG4gICAgICAgICAgICBpZiAoIXRleHQgJiYgIXIuaXNFbXB0eSgpKVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRleHQgfHwgIXRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSlcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0KHRleHQsIHRydWUpO1xuICAgICAgICBpZiAoY29tcG9zaXRpb24ucmVzdG9yZVN0YXJ0IHx8IGNvbXBvc2l0aW9uLnJlc3RvcmVFbmQpIHtcbiAgICAgICAgICAgIHZhciByID0gdGhpcy5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtcbiAgICAgICAgICAgIHIuc3RhcnQuY29sdW1uIC09IGNvbXBvc2l0aW9uLnJlc3RvcmVTdGFydDtcbiAgICAgICAgICAgIHIuZW5kLmNvbHVtbiAtPSBjb21wb3NpdGlvbi5yZXN0b3JlRW5kO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uc2V0UmFuZ2Uocik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkNvbW1hbmRLZXkoZSwgaGFzaElkLCBrZXlDb2RlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleUJpbmRpbmcub25Db21tYW5kS2V5KGUsIGhhc2hJZCwga2V5Q29kZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFzcyBpbiBgdHJ1ZWAgdG8gZW5hYmxlIG92ZXJ3cml0ZXMgaW4geW91ciBzZXNzaW9uLCBvciBgZmFsc2VgIHRvIGRpc2FibGUuIElmIG92ZXJ3cml0ZXMgaXMgZW5hYmxlZCwgYW55IHRleHQgeW91IGVudGVyIHdpbGwgdHlwZSBvdmVyIGFueSB0ZXh0IGFmdGVyIGl0LiBJZiB0aGUgdmFsdWUgb2YgYG92ZXJ3cml0ZWAgY2hhbmdlcywgdGhpcyBmdW5jdGlvbiBhbHNvIGVtaXRzIHRoZSBgY2hhbmdlT3ZlcndyaXRlYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG92ZXJ3cml0ZSBEZWZpbmVzIHdoZXRoZXIgb3Igbm90IHRvIHNldCBvdmVyd3JpdGVzXG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24uc2V0T3ZlcndyaXRlXG4gICAgICoqL1xuICAgIHNldE92ZXJ3cml0ZShvdmVyd3JpdGUpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnNldE92ZXJ3cml0ZShvdmVyd3JpdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIG92ZXJ3cml0ZXMgYXJlIGVuYWJsZWQ7IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLmdldE92ZXJ3cml0ZVxuICAgICAqKi9cbiAgICBnZXRPdmVyd3JpdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb24uZ2V0T3ZlcndyaXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdmFsdWUgb2Ygb3ZlcndyaXRlIHRvIHRoZSBvcHBvc2l0ZSBvZiB3aGF0ZXZlciBpdCBjdXJyZW50bHkgaXMuXG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24udG9nZ2xlT3ZlcndyaXRlXG4gICAgICoqL1xuICAgIHRvZ2dsZU92ZXJ3cml0ZSgpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnRvZ2dsZU92ZXJ3cml0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgaG93IGZhc3QgdGhlIG1vdXNlIHNjcm9sbGluZyBzaG91bGQgZG8uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNwZWVkIEEgdmFsdWUgaW5kaWNhdGluZyB0aGUgbmV3IHNwZWVkIChpbiBtaWxsaXNlY29uZHMpXG4gICAgICoqL1xuICAgIHNldFNjcm9sbFNwZWVkKHNwZWVkKSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKFwic2Nyb2xsU3BlZWRcIiwgc3BlZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGluZGljYXRpbmcgaG93IGZhc3QgdGhlIG1vdXNlIHNjcm9sbCBzcGVlZCBpcyAoaW4gbWlsbGlzZWNvbmRzKS5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRTY3JvbGxTcGVlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwic2Nyb2xsU3BlZWRcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGVsYXkgKGluIG1pbGxpc2Vjb25kcykgb2YgdGhlIG1vdXNlIGRyYWcuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRyYWdEZWxheSBBIHZhbHVlIGluZGljYXRpbmcgdGhlIG5ldyBkZWxheVxuICAgICAqKi9cbiAgICBzZXREcmFnRGVsYXkoZHJhZ0RlbGF5KSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKFwiZHJhZ0RlbGF5XCIsIGRyYWdEZWxheSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBtb3VzZSBkcmFnIGRlbGF5LlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldERyYWdEZWxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwiZHJhZ0RlbGF5XCIpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogRHJhdyBzZWxlY3Rpb24gbWFya2VycyBzcGFubmluZyB3aG9sZSBsaW5lLCBvciBvbmx5IG92ZXIgc2VsZWN0ZWQgdGV4dC4gRGVmYXVsdCB2YWx1ZSBpcyBcImxpbmVcIlxuICAgICAqIEBwYXJhbSB7XCJmdWxsTGluZVwiIHwgXCJzY3JlZW5MaW5lXCIgfCBcInRleHRcIiB8IFwibGluZVwifSB2YWwgVGhlIG5ldyBzZWxlY3Rpb24gc3R5bGUgXCJsaW5lXCJ8XCJ0ZXh0XCJcbiAgICAgKiovXG4gICAgc2V0U2VsZWN0aW9uU3R5bGUodmFsKSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKFwic2VsZWN0aW9uU3R5bGVcIiwgdmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBzdHlsZS5cbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5FZGl0b3JPcHRpb25zW1wic2VsZWN0aW9uU3R5bGVcIl19XG4gICAgICoqL1xuICAgIGdldFNlbGVjdGlvblN0eWxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJzZWxlY3Rpb25TdHlsZVwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRoZSBjdXJyZW50IGxpbmUgc2hvdWxkIGJlIGhpZ2hsaWdodGVkLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdWxkSGlnaGxpZ2h0IFNldCB0byBgdHJ1ZWAgdG8gaGlnaGxpZ2h0IHRoZSBjdXJyZW50IGxpbmVcbiAgICAgKiovXG4gICAgc2V0SGlnaGxpZ2h0QWN0aXZlTGluZShzaG91bGRIaWdobGlnaHQpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJoaWdobGlnaHRBY3RpdmVMaW5lXCIsIHNob3VsZEhpZ2hsaWdodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGN1cnJlbnQgbGluZXMgYXJlIGFsd2F5cyBoaWdobGlnaHRlZC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBnZXRIaWdobGlnaHRBY3RpdmVMaW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJoaWdobGlnaHRBY3RpdmVMaW5lXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvdWxkSGlnaGxpZ2h0XG4gICAgICovXG4gICAgc2V0SGlnaGxpZ2h0R3V0dGVyTGluZShzaG91bGRIaWdobGlnaHQpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJoaWdobGlnaHRHdXR0ZXJMaW5lXCIsIHNob3VsZEhpZ2hsaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0SGlnaGxpZ2h0R3V0dGVyTGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwiaGlnaGxpZ2h0R3V0dGVyTGluZVwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgd29yZCBzaG91bGQgYmUgaGlnaGxpZ2h0ZWQuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRIaWdobGlnaHQgU2V0IHRvIGB0cnVlYCB0byBoaWdobGlnaHQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB3b3JkXG4gICAgICoqL1xuICAgIHNldEhpZ2hsaWdodFNlbGVjdGVkV29yZChzaG91bGRIaWdobGlnaHQpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJoaWdobGlnaHRTZWxlY3RlZFdvcmRcIiwgc2hvdWxkSGlnaGxpZ2h0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBjdXJyZW50bHkgaGlnaGxpZ2h0ZWQgd29yZHMgYXJlIHRvIGJlIGhpZ2hsaWdodGVkLlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBnZXRIaWdobGlnaHRTZWxlY3RlZFdvcmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRoaWdobGlnaHRTZWxlY3RlZFdvcmQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaG91bGRBbmltYXRlXG4gICAgICovXG4gICAgc2V0QW5pbWF0ZWRTY3JvbGwoc2hvdWxkQW5pbWF0ZSl7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0QW5pbWF0ZWRTY3JvbGwoc2hvdWxkQW5pbWF0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXRBbmltYXRlZFNjcm9sbCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5nZXRBbmltYXRlZFNjcm9sbCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIGBzaG93SW52aXNpYmxlc2AgaXMgc2V0IHRvIGB0cnVlYCwgaW52aXNpYmxlIGNoYXJhY3RlcnMmbWRhc2g7bGlrZSBzcGFjZXMgb3IgbmV3IGxpbmVzJm1kYXNoO2FyZSBzaG93IGluIHRoZSBlZGl0b3IuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBzaG93SW52aXNpYmxlcyBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2hvdyBpbnZpc2libGUgY2hhcmFjdGVyc1xuICAgICAqKi9cbiAgICBzZXRTaG93SW52aXNpYmxlcyhzaG93SW52aXNpYmxlcykge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNob3dJbnZpc2libGVzKHNob3dJbnZpc2libGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBpbnZpc2libGUgY2hhcmFjdGVycyBhcmUgYmVpbmcgc2hvd24uXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGdldFNob3dJbnZpc2libGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5nZXRTaG93SW52aXNpYmxlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGlzcGxheVxuICAgICAqL1xuICAgIHNldERpc3BsYXlJbmRlbnRHdWlkZXMoZGlzcGxheSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldERpc3BsYXlJbmRlbnRHdWlkZXMoZGlzcGxheSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXREaXNwbGF5SW5kZW50R3VpZGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5nZXREaXNwbGF5SW5kZW50R3VpZGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBoaWdobGlnaHRcbiAgICAgKi9cbiAgICBzZXRIaWdobGlnaHRJbmRlbnRHdWlkZXMoaGlnaGxpZ2h0KSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0SGlnaGxpZ2h0SW5kZW50R3VpZGVzKGhpZ2hsaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXRIaWdobGlnaHRJbmRlbnRHdWlkZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmdldEhpZ2hsaWdodEluZGVudEd1aWRlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIGBzaG93UHJpbnRNYXJnaW5gIGlzIHNldCB0byBgdHJ1ZWAsIHRoZSBwcmludCBtYXJnaW4gaXMgc2hvd24gaW4gdGhlIGVkaXRvci5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dQcmludE1hcmdpbiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2hvdyB0aGUgcHJpbnQgbWFyZ2luXG4gICAgICpcbiAgICAgKiovXG4gICAgc2V0U2hvd1ByaW50TWFyZ2luKHNob3dQcmludE1hcmdpbikge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNob3dQcmludE1hcmdpbihzaG93UHJpbnRNYXJnaW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBwcmludCBtYXJnaW4gaXMgYmVpbmcgc2hvd24uXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGdldFNob3dQcmludE1hcmdpbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0U2hvd1ByaW50TWFyZ2luKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY29sdW1uIGRlZmluaW5nIHdoZXJlIHRoZSBwcmludCBtYXJnaW4gc2hvdWxkIGJlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzaG93UHJpbnRNYXJnaW4gU3BlY2lmaWVzIHRoZSBuZXcgcHJpbnQgbWFyZ2luXG4gICAgICpcbiAgICAgKiovXG4gICAgc2V0UHJpbnRNYXJnaW5Db2x1bW4oc2hvd1ByaW50TWFyZ2luKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJpbnRNYXJnaW5Db2x1bW4oc2hvd1ByaW50TWFyZ2luKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjb2x1bW4gbnVtYmVyIG9mIHdoZXJlIHRoZSBwcmludCBtYXJnaW4gaXMuXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0UHJpbnRNYXJnaW5Db2x1bW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmdldFByaW50TWFyZ2luQ29sdW1uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgYHJlYWRPbmx5YCBpcyB0cnVlLCB0aGVuIHRoZSBlZGl0b3IgaXMgc2V0IHRvIHJlYWQtb25seSBtb2RlLCBhbmQgbm9uZSBvZiB0aGUgY29udGVudCBjYW4gY2hhbmdlLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVhZE9ubHkgU3BlY2lmaWVzIHdoZXRoZXIgdGhlIGVkaXRvciBjYW4gYmUgbW9kaWZpZWQgb3Igbm90XG4gICAgICoqL1xuICAgIHNldFJlYWRPbmx5KHJlYWRPbmx5KSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKFwicmVhZE9ubHlcIiwgcmVhZE9ubHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBlZGl0b3IgaXMgc2V0IHRvIHJlYWQtb25seSBtb2RlLlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBnZXRSZWFkT25seSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwicmVhZE9ubHlcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHdoZXRoZXIgdG8gdXNlIGJlaGF2aW9ycyBvciBub3QuIFtcIkJlaGF2aW9yc1wiIGluIHRoaXMgY2FzZSBpcyB0aGUgYXV0by1wYWlyaW5nIG9mIHNwZWNpYWwgY2hhcmFjdGVycywgbGlrZSBxdW90YXRpb24gbWFya3MsIHBhcmVudGhlc2lzLCBvciBicmFja2V0cy5dezogI0JlaGF2aW9yc0RlZn1cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGVuYWJsZWQgRW5hYmxlcyBvciBkaXNhYmxlcyBiZWhhdmlvcnNcbiAgICAgKiovXG4gICAgc2V0QmVoYXZpb3Vyc0VuYWJsZWQoZW5hYmxlZCkge1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcImJlaGF2aW91cnNFbmFibGVkXCIsIGVuYWJsZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBiZWhhdmlvcnMgYXJlIGN1cnJlbnRseSBlbmFibGVkLiB7OkJlaGF2aW9yc0RlZn1cbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiovXG4gICAgZ2V0QmVoYXZpb3Vyc0VuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbihcImJlaGF2aW91cnNFbmFibGVkXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRvIHVzZSB3cmFwcGluZyBiZWhhdmlvcnMgb3Igbm90LCBpLmUuIGF1dG9tYXRpY2FsbHkgd3JhcHBpbmcgdGhlIHNlbGVjdGlvbiB3aXRoIGNoYXJhY3RlcnMgc3VjaCBhcyBicmFja2V0c1xuICAgICAqIHdoZW4gc3VjaCBhIGNoYXJhY3RlciBpcyB0eXBlZCBpbi5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGVuYWJsZWQgRW5hYmxlcyBvciBkaXNhYmxlcyB3cmFwcGluZyBiZWhhdmlvcnNcbiAgICAgKiovXG4gICAgc2V0V3JhcEJlaGF2aW91cnNFbmFibGVkKGVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJ3cmFwQmVoYXZpb3Vyc0VuYWJsZWRcIiwgZW5hYmxlZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHdyYXBwaW5nIGJlaGF2aW9ycyBhcmUgY3VycmVudGx5IGVuYWJsZWQuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICoqL1xuICAgIGdldFdyYXBCZWhhdmlvdXJzRW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwid3JhcEJlaGF2aW91cnNFbmFibGVkXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBmb2xkIHdpZGdldHMgc2hvdWxkIGJlIHNob3duIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3cgU3BlY2lmaWVzIHdoZXRoZXIgdGhlIGZvbGQgd2lkZ2V0cyBhcmUgc2hvd25cbiAgICAgKiovXG4gICAgc2V0U2hvd0ZvbGRXaWRnZXRzKHNob3cpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJzaG93Rm9sZFdpZGdldHNcIiwgc2hvdyk7XG5cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZvbGQgd2lkZ2V0cyBhcmUgc2hvd24uXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiovXG4gICAgZ2V0U2hvd0ZvbGRXaWRnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJzaG93Rm9sZFdpZGdldHNcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBmYWRlXG4gICAgICovXG4gICAgc2V0RmFkZUZvbGRXaWRnZXRzKGZhZGUpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJmYWRlRm9sZFdpZGdldHNcIiwgZmFkZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0RmFkZUZvbGRXaWRnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJmYWRlRm9sZFdpZGdldHNcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgY3VycmVudCBzZWxlY3Rpb24gb3Igb25lIGNoYXJhY3Rlci5cbiAgICAgKiBAcGFyYW0geydsZWZ0JyB8ICdyaWdodCd9IFtkaXJdIFRoZSBkaXJlY3Rpb24gb2YgdGhlIGRlbGV0aW9uIHRvIG9jY3VyLCBlaXRoZXIgXCJsZWZ0XCIgb3IgXCJyaWdodFwiXG4gICAgICoqL1xuICAgIHJlbW92ZShkaXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSl7XG4gICAgICAgICAgICBpZiAoZGlyID09IFwibGVmdFwiKVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnNlbGVjdExlZnQoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZWxlY3RSaWdodCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICBpZiAodGhpcy5nZXRCZWhhdmlvdXJzRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHNlc3Npb24uZ2V0U3RhdGUocmFuZ2Uuc3RhcnQucm93KTtcbiAgICAgICAgICAgIHZhciBuZXdfcmFuZ2UgPSBzZXNzaW9uLmdldE1vZGUoKS50cmFuc2Zvcm1BY3Rpb24oc3RhdGUsICdkZWxldGlvbicsIHRoaXMsIHNlc3Npb24sIHJhbmdlKTtcblxuICAgICAgICAgICAgaWYgKHJhbmdlLmVuZC5jb2x1bW4gPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IHNlc3Npb24uZ2V0VGV4dFJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgICAgICBpZiAodGV4dFt0ZXh0Lmxlbmd0aCAtIDFdID09IFwiXFxuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUocmFuZ2UuZW5kLnJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgvXlxccyskLy50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5lbmQuY29sdW1uID0gbGluZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3X3JhbmdlKVxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogcG9zc2libGUgYnVnLCBuZXdfcmFuZ2UgY291bGQgYmUgbm90IGEgUmFuZ2VcbiAgICAgICAgICAgICAgICByYW5nZSA9IG5ld19yYW5nZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmUocmFuZ2UpO1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgd29yZCBkaXJlY3RseSB0byB0aGUgcmlnaHQgb2YgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgICAqKi9cbiAgICByZW1vdmVXb3JkUmlnaHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCkpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZWxlY3RXb3JkUmlnaHQoKTtcblxuICAgICAgICB0aGlzLnNlc3Npb24ucmVtb3ZlKHRoaXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKSk7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSB3b3JkIGRpcmVjdGx5IHRvIHRoZSBsZWZ0IG9mIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAgKiovXG4gICAgcmVtb3ZlV29yZExlZnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCkpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZWxlY3RXb3JkTGVmdCgpO1xuXG4gICAgICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmUodGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpKTtcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHRoZSB3b3JkcyB0byB0aGUgbGVmdCBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24sIHVudGlsIHRoZSBzdGFydCBvZiB0aGUgbGluZS5cbiAgICAgKiovXG4gICAgcmVtb3ZlVG9MaW5lU3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCkpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZWxlY3RMaW5lU3RhcnQoKTtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSlcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnNlbGVjdExlZnQoKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnJlbW92ZSh0aGlzLmdldFNlbGVjdGlvblJhbmdlKCkpO1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgdGhlIHdvcmRzIHRvIHRoZSByaWdodCBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24sIHVudGlsIHRoZSBlbmQgb2YgdGhlIGxpbmUuXG4gICAgICoqL1xuICAgIHJlbW92ZVRvTGluZUVuZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSlcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnNlbGVjdExpbmVFbmQoKTtcblxuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGlmIChyYW5nZS5zdGFydC5jb2x1bW4gPT0gcmFuZ2UuZW5kLmNvbHVtbiAmJiByYW5nZS5zdGFydC5yb3cgPT0gcmFuZ2UuZW5kLnJvdykge1xuICAgICAgICAgICAgcmFuZ2UuZW5kLmNvbHVtbiA9IDA7XG4gICAgICAgICAgICByYW5nZS5lbmQucm93Kys7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNlc3Npb24ucmVtb3ZlKHJhbmdlKTtcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNwbGl0cyB0aGUgbGluZSBhdCB0aGUgY3VycmVudCBzZWxlY3Rpb24gKGJ5IGluc2VydGluZyBhbiBgJ1xcbidgKS5cbiAgICAgKiovXG4gICAgc3BsaXRMaW5lKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLnJlbW92ZSh0aGlzLmdldFNlbGVjdGlvblJhbmdlKCkpO1xuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuZ2V0Q3Vyc29yUG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy5pbnNlcnQoXCJcXG5cIik7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvclRvUG9zaXRpb24oY3Vyc29yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIFwiZ2hvc3RcIiB0ZXh0IGluIHByb3ZpZGVkIHBvc2l0aW9uLiBcIkdob3N0XCIgdGV4dCBpcyBhIGtpbmQgb2ZcbiAgICAgKiBwcmV2aWV3IHRleHQgaW5zaWRlIHRoZSBlZGl0b3Igd2hpY2ggY2FuIGJlIHVzZWQgdG8gcHJldmlldyBzb21lIGNvZGVcbiAgICAgKiBpbmxpbmUgaW4gdGhlIGVkaXRvciBzdWNoIGFzLCBmb3IgZXhhbXBsZSwgY29kZSBjb21wbGV0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRleHQgdG8gYmUgaW5zZXJ0ZWQgYXMgXCJnaG9zdFwiIHRleHRcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBbcG9zaXRpb25dIFBvc2l0aW9uIHRvIGluc2VydCB0ZXh0IHRvXG4gICAgICovXG4gICAgc2V0R2hvc3RUZXh0KHRleHQsIHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0R2hvc3RUZXh0KHRleHQsIHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIFwiZ2hvc3RcIiB0ZXh0IGN1cnJlbnRseSBkaXNwbGF5ZWQgaW4gdGhlIGVkaXRvci5cbiAgICAgKi9cbiAgICByZW1vdmVHaG9zdFRleHQoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlR2hvc3RUZXh0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNwb3NlcyBjdXJyZW50IGxpbmUuXG4gICAgICoqL1xuICAgIHRyYW5zcG9zZUxldHRlcnMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5nZXRDdXJzb3JQb3NpdGlvbigpO1xuICAgICAgICB2YXIgY29sdW1uID0gY3Vyc29yLmNvbHVtbjtcbiAgICAgICAgaWYgKGNvbHVtbiA9PT0gMClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgbGluZSA9IHRoaXMuc2Vzc2lvbi5nZXRMaW5lKGN1cnNvci5yb3cpO1xuICAgICAgICB2YXIgc3dhcCwgcmFuZ2U7XG4gICAgICAgIGlmIChjb2x1bW4gPCBsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgc3dhcCA9IGxpbmUuY2hhckF0KGNvbHVtbikgKyBsaW5lLmNoYXJBdChjb2x1bW4tMSk7XG4gICAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShjdXJzb3Iucm93LCBjb2x1bW4tMSwgY3Vyc29yLnJvdywgY29sdW1uKzEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3dhcCA9IGxpbmUuY2hhckF0KGNvbHVtbi0xKSArIGxpbmUuY2hhckF0KGNvbHVtbi0yKTtcbiAgICAgICAgICAgIHJhbmdlID0gbmV3IFJhbmdlKGN1cnNvci5yb3csIGNvbHVtbi0yLCBjdXJzb3Iucm93LCBjb2x1bW4pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5yZXBsYWNlKHJhbmdlLCBzd2FwKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnNlbGVjdGlvbi5tb3ZlVG9Qb3NpdGlvbihyYW5nZS5lbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50IHNlbGVjdGlvbiBlbnRpcmVseSBpbnRvIGxvd2VyY2FzZS5cbiAgICAgKiovXG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbFJhbmdlID0gdGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb24uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZWxlY3RXb3JkKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIHZhciB0ZXh0ID0gdGhpcy5zZXNzaW9uLmdldFRleHRSYW5nZShyYW5nZSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5yZXBsYWNlKHJhbmdlLCB0ZXh0LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25SYW5nZShvcmlnaW5hbFJhbmdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudCBzZWxlY3Rpb24gZW50aXJlbHkgaW50byB1cHBlcmNhc2UuXG4gICAgICoqL1xuICAgIHRvVXBwZXJDYXNlKCkge1xuICAgICAgICB2YXIgb3JpZ2luYWxSYW5nZSA9IHRoaXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uc2VsZWN0V29yZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICB2YXIgdGV4dCA9IHRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2UocmFuZ2UpO1xuICAgICAgICB0aGlzLnNlc3Npb24ucmVwbGFjZShyYW5nZSwgdGV4dC50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uUmFuZ2Uob3JpZ2luYWxSYW5nZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyBhbiBpbmRlbnRhdGlvbiBpbnRvIHRoZSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbiBvciBpbmRlbnRzIHRoZSBzZWxlY3RlZCBsaW5lcy5cbiAgICAgKlxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLmluZGVudFJvd3NcbiAgICAgKiovXG4gICAgaW5kZW50KCkge1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO1xuXG4gICAgICAgIGlmIChyYW5nZS5zdGFydC5yb3cgPCByYW5nZS5lbmQucm93KSB7XG4gICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMuJGdldFNlbGVjdGVkUm93cygpO1xuICAgICAgICAgICAgc2Vzc2lvbi5pbmRlbnRSb3dzKHJvd3MuZmlyc3QsIHJvd3MubGFzdCwgXCJcXHRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAocmFuZ2Uuc3RhcnQuY29sdW1uIDwgcmFuZ2UuZW5kLmNvbHVtbikge1xuICAgICAgICAgICAgdmFyIHRleHQgPSBzZXNzaW9uLmdldFRleHRSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICBpZiAoIS9eXFxzKyQvLnRlc3QodGV4dCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93cyA9IHRoaXMuJGdldFNlbGVjdGVkUm93cygpO1xuICAgICAgICAgICAgICAgIHNlc3Npb24uaW5kZW50Um93cyhyb3dzLmZpcnN0LCByb3dzLmxhc3QsIFwiXFx0XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5nZXRMaW5lKHJhbmdlLnN0YXJ0LnJvdyk7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHJhbmdlLnN0YXJ0O1xuICAgICAgICB2YXIgc2l6ZSA9IHNlc3Npb24uZ2V0VGFiU2l6ZSgpO1xuICAgICAgICB2YXIgY29sdW1uID0gc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuQ29sdW1uKHBvc2l0aW9uLnJvdywgcG9zaXRpb24uY29sdW1uKTtcblxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uLmdldFVzZVNvZnRUYWJzKCkpIHtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IChzaXplIC0gY29sdW1uICUgc2l6ZSk7XG4gICAgICAgICAgICB2YXIgaW5kZW50U3RyaW5nID0gbGFuZy5zdHJpbmdSZXBlYXQoXCIgXCIsIGNvdW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IGNvbHVtbiAlIHNpemU7XG4gICAgICAgICAgICB3aGlsZSAobGluZVtyYW5nZS5zdGFydC5jb2x1bW4gLSAxXSA9PSBcIiBcIiAmJiBjb3VudCkge1xuICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0LmNvbHVtbi0tO1xuICAgICAgICAgICAgICAgIGNvdW50LS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25SYW5nZShyYW5nZSk7XG4gICAgICAgICAgICBpbmRlbnRTdHJpbmcgPSBcIlxcdFwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmluc2VydChpbmRlbnRTdHJpbmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluZGVudHMgdGhlIGN1cnJlbnQgbGluZS5cbiAgICAgKiBAcmVsYXRlZCBFZGl0U2Vzc2lvbi5pbmRlbnRSb3dzXG4gICAgICoqL1xuICAgIGJsb2NrSW5kZW50KCkge1xuICAgICAgICB2YXIgcm93cyA9IHRoaXMuJGdldFNlbGVjdGVkUm93cygpO1xuICAgICAgICB0aGlzLnNlc3Npb24uaW5kZW50Um93cyhyb3dzLmZpcnN0LCByb3dzLmxhc3QsIFwiXFx0XCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE91dGRlbnRzIHRoZSBjdXJyZW50IGxpbmUuXG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24ub3V0ZGVudFJvd3NcbiAgICAgKiovXG4gICAgYmxvY2tPdXRkZW50KCkge1xuICAgICAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5zZXNzaW9uLmdldFNlbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnNlc3Npb24ub3V0ZGVudFJvd3Moc2VsZWN0aW9uLmdldFJhbmdlKCkpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IG1vdmUgb3V0IG9mIGNvcmUgd2hlbiB3ZSBoYXZlIGdvb2QgbWVjaGFuaXNtIGZvciBtYW5hZ2luZyBleHRlbnNpb25zXG4gICAgc29ydExpbmVzKCkge1xuICAgICAgICB2YXIgcm93cyA9IHRoaXMuJGdldFNlbGVjdGVkUm93cygpO1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcblxuICAgICAgICB2YXIgbGluZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHJvd3MuZmlyc3Q7IGkgPD0gcm93cy5sYXN0OyBpKyspXG4gICAgICAgICAgICBsaW5lcy5wdXNoKHNlc3Npb24uZ2V0TGluZShpKSk7XG5cbiAgICAgICAgbGluZXMuc29ydChmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICBpZiAoYS50b0xvd2VyQ2FzZSgpIDwgYi50b0xvd2VyQ2FzZSgpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYS50b0xvd2VyQ2FzZSgpID4gYi50b0xvd2VyQ2FzZSgpKSByZXR1cm4gMTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZGVsZXRlUmFuZ2UgPSBuZXcgUmFuZ2UoMCwgMCwgMCwgMCk7XG4gICAgICAgIGZvciAodmFyIGkgPSByb3dzLmZpcnN0OyBpIDw9IHJvd3MubGFzdDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShpKTtcbiAgICAgICAgICAgIGRlbGV0ZVJhbmdlLnN0YXJ0LnJvdyA9IGk7XG4gICAgICAgICAgICBkZWxldGVSYW5nZS5lbmQucm93ID0gaTtcbiAgICAgICAgICAgIGRlbGV0ZVJhbmdlLmVuZC5jb2x1bW4gPSBsaW5lLmxlbmd0aDtcbiAgICAgICAgICAgIHNlc3Npb24ucmVwbGFjZShkZWxldGVSYW5nZSwgbGluZXNbaS1yb3dzLmZpcnN0XSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJhbmdlLCB0aGlzIGZ1bmN0aW9uIGVpdGhlciBjb21tZW50cyBhbGwgdGhlIGxpbmVzLCBvciB1bmNvbW1lbnRzIGFsbCBvZiB0aGVtLlxuICAgICAqKi9cbiAgICB0b2dnbGVDb21tZW50TGluZXMoKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc2Vzc2lvbi5nZXRTdGF0ZSh0aGlzLmdldEN1cnNvclBvc2l0aW9uKCkucm93KTtcbiAgICAgICAgdmFyIHJvd3MgPSB0aGlzLiRnZXRTZWxlY3RlZFJvd3MoKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLmdldE1vZGUoKS50b2dnbGVDb21tZW50TGluZXMoc3RhdGUsIHRoaXMuc2Vzc2lvbiwgcm93cy5maXJzdCwgcm93cy5sYXN0KTtcbiAgICB9XG5cbiAgICB0b2dnbGVCbG9ja0NvbW1lbnQoKSB7XG4gICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLmdldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc2Vzc2lvbi5nZXRTdGF0ZShjdXJzb3Iucm93KTtcbiAgICAgICAgdmFyIHJhbmdlID0gdGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICB0aGlzLnNlc3Npb24uZ2V0TW9kZSgpLnRvZ2dsZUJsb2NrQ29tbWVudChzdGF0ZSwgdGhpcy5zZXNzaW9uLCByYW5nZSwgY3Vyc29yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXb3JrcyBsaWtlIFtbRWRpdFNlc3Npb24uZ2V0VG9rZW5BdF1dLCBleGNlcHQgaXQgcmV0dXJucyBhIG51bWJlci5cbiAgICAgKiBAcmV0dXJucyB7YW55fVxuICAgICAqKi9cbiAgICBnZXROdW1iZXJBdChyb3csIGNvbHVtbikge1xuICAgICAgICB2YXIgX251bWJlclJ4ID0gL1tcXC1dP1swLTldKyg/OlxcLlswLTldKyk/L2c7XG4gICAgICAgIF9udW1iZXJSeC5sYXN0SW5kZXggPSAwO1xuXG4gICAgICAgIHZhciBzID0gdGhpcy5zZXNzaW9uLmdldExpbmUocm93KTtcbiAgICAgICAgd2hpbGUgKF9udW1iZXJSeC5sYXN0SW5kZXggPCBjb2x1bW4pIHtcbiAgICAgICAgICAgIHZhciBtID0gX251bWJlclJ4LmV4ZWMocyk7XG4gICAgICAgICAgICBpZihtLmluZGV4IDw9IGNvbHVtbiAmJiBtLmluZGV4K21bMF0ubGVuZ3RoID49IGNvbHVtbil7XG4gICAgICAgICAgICAgICAgdmFyIG51bWJlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1bMF0sXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBtLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IG0uaW5kZXgrbVswXS5sZW5ndGhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIGNoYXJhY3RlciBiZWZvcmUgdGhlIGN1cnNvciBpcyBhIG51bWJlciwgdGhpcyBmdW5jdGlvbnMgY2hhbmdlcyBpdHMgdmFsdWUgYnkgYGFtb3VudGAuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGFtb3VudCBUaGUgdmFsdWUgdG8gY2hhbmdlIHRoZSBudW1lcmFsIGJ5IChjYW4gYmUgbmVnYXRpdmUgdG8gZGVjcmVhc2UgdmFsdWUpXG4gICAgICoqL1xuICAgIG1vZGlmeU51bWJlcihhbW91bnQpIHtcbiAgICAgICAgdmFyIHJvdyA9IHRoaXMuc2VsZWN0aW9uLmdldEN1cnNvcigpLnJvdztcbiAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMuc2VsZWN0aW9uLmdldEN1cnNvcigpLmNvbHVtbjtcblxuICAgICAgICAvLyBnZXQgdGhlIGNoYXIgYmVmb3JlIHRoZSBjdXJzb3JcbiAgICAgICAgdmFyIGNoYXJSYW5nZSA9IG5ldyBSYW5nZShyb3csIGNvbHVtbi0xLCByb3csIGNvbHVtbik7XG5cbiAgICAgICAgdmFyIGMgPSB0aGlzLnNlc3Npb24uZ2V0VGV4dFJhbmdlKGNoYXJSYW5nZSk7XG4gICAgICAgIC8vIGlmIHRoZSBjaGFyIGlzIGEgZGlnaXRcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoIWlzTmFOKHBhcnNlRmxvYXQoYykpICYmIGlzRmluaXRlKGMpKSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIHdob2xlIG51bWJlciB0aGUgZGlnaXQgaXMgcGFydCBvZlxuICAgICAgICAgICAgdmFyIG5yID0gdGhpcy5nZXROdW1iZXJBdChyb3csIGNvbHVtbik7XG4gICAgICAgICAgICAvLyBpZiBudW1iZXIgZm91bmRcbiAgICAgICAgICAgIGlmIChucikge1xuICAgICAgICAgICAgICAgIHZhciBmcCA9IG5yLnZhbHVlLmluZGV4T2YoXCIuXCIpID49IDAgPyBuci5zdGFydCArIG5yLnZhbHVlLmluZGV4T2YoXCIuXCIpICsgMSA6IG5yLmVuZDtcbiAgICAgICAgICAgICAgICB2YXIgZGVjaW1hbHMgPSBuci5zdGFydCArIG5yLnZhbHVlLmxlbmd0aCAtIGZwO1xuXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBwYXJzZUZsb2F0KG5yLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0ICo9IE1hdGgucG93KDEwLCBkZWNpbWFscyk7XG5cblxuICAgICAgICAgICAgICAgIGlmKGZwICE9PSBuci5lbmQgJiYgY29sdW1uIDwgZnApe1xuICAgICAgICAgICAgICAgICAgICBhbW91bnQgKj0gTWF0aC5wb3coMTAsIG5yLmVuZCAtIGNvbHVtbiAtIDEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFtb3VudCAqPSBNYXRoLnBvdygxMCwgbnIuZW5kIC0gY29sdW1uKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0ICs9IGFtb3VudDtcbiAgICAgICAgICAgICAgICB0IC89IE1hdGgucG93KDEwLCBkZWNpbWFscyk7XG4gICAgICAgICAgICAgICAgdmFyIG5uciA9IHQudG9GaXhlZChkZWNpbWFscyk7XG5cbiAgICAgICAgICAgICAgICAvL3VwZGF0ZSBudW1iZXJcbiAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZVJhbmdlID0gbmV3IFJhbmdlKHJvdywgbnIuc3RhcnQsIHJvdywgbnIuZW5kKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb24ucmVwbGFjZShyZXBsYWNlUmFuZ2UsIG5ucik7XG5cbiAgICAgICAgICAgICAgICAvL3JlcG9zaXRpb24gdGhlIGN1cnNvclxuICAgICAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvKHJvdywgTWF0aC5tYXgobnIuc3RhcnQgKzEsIGNvbHVtbiArIG5uci5sZW5ndGggLSBuci52YWx1ZS5sZW5ndGgpKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVXb3JkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKi9cbiAgICB0b2dnbGVXb3JkKCkge1xuICAgICAgICB2YXIgcm93ID0gdGhpcy5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCkucm93O1xuICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCkuY29sdW1uO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZWxlY3RXb3JkKCk7XG4gICAgICAgIHZhciBjdXJyZW50U3RhdGUgPSB0aGlzLmdldFNlbGVjdGVkVGV4dCgpO1xuICAgICAgICB2YXIgY3VycldvcmRTdGFydCA9IHRoaXMuc2VsZWN0aW9uLmdldFdvcmRSYW5nZSgpLnN0YXJ0LmNvbHVtbjtcbiAgICAgICAgdmFyIHdvcmRQYXJ0cyA9IGN1cnJlbnRTdGF0ZS5yZXBsYWNlKC8oW2Etel0rfFtBLVpdKykoPz1bQS1aX118JCkvZywgJyQxICcpLnNwbGl0KC9cXHMvKTtcbiAgICAgICAgdmFyIGRlbHRhID0gY29sdW1uIC0gY3VycldvcmRTdGFydCAtIDE7XG4gICAgICAgIGlmIChkZWx0YSA8IDApIGRlbHRhID0gMDtcbiAgICAgICAgdmFyIGN1ckxlbmd0aCA9IDAsIGl0TGVuZ3RoID0gMDtcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICBpZiAoY3VycmVudFN0YXRlLm1hdGNoKC9bQS1aYS16MC05X10rLykpIHtcbiAgICAgICAgICAgIHdvcmRQYXJ0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7XG4gICAgICAgICAgICAgICAgaXRMZW5ndGggPSBjdXJMZW5ndGggKyBpdGVtLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoZGVsdGEgPj0gY3VyTGVuZ3RoICYmIGRlbHRhIDw9IGl0TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2VsZWN0aW9uLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubW92ZUN1cnNvclRvKHJvdywgY3VyTGVuZ3RoICsgY3VycldvcmRTdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2VsZWN0aW9uLnNlbGVjdFRvKHJvdywgaXRMZW5ndGggKyBjdXJyV29yZFN0YXJ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VyTGVuZ3RoID0gaXRMZW5ndGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB3b3JkUGFpcnMgPSB0aGlzLiR0b2dnbGVXb3JkUGFpcnM7XG4gICAgICAgIHZhciByZWc7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd29yZFBhaXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IHdvcmRQYWlyc1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDw9IDE7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBuZWdhdGUgPSArIWo7XG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0Q29uZGl0aW9uID0gY3VycmVudFN0YXRlLm1hdGNoKG5ldyBSZWdFeHAoJ15cXFxccz9fPygnICsgbGFuZy5lc2NhcGVSZWdFeHAoaXRlbVtqXSkgKyAnKVxcXFxzPyQnLCAnaScpKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlY29uZENvbmRpdGlvbiA9IGN1cnJlbnRTdGF0ZS5tYXRjaChuZXcgUmVnRXhwKCcoW19dfF58XFxcXHMpKCcgKyBsYW5nLmVzY2FwZVJlZ0V4cChmaXJzdENvbmRpdGlvblsxXSkgKyAnKSgkfFxcXFxzKScsICdnJykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vjb25kQ29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWcgPSBjdXJyZW50U3RhdGUucmVwbGFjZShuZXcgUmVnRXhwKGxhbmcuZXNjYXBlUmVnRXhwKGl0ZW1bal0pLCAnaScpLCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IGl0ZW1bbmVnYXRlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnRvVXBwZXJDYXNlKCkgPT0gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IHJlcy50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpID09IHJlc3VsdC5jaGFyQXQoMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gcmVzLnN1YnN0cigwLCAwKSArIGl0ZW1bbmVnYXRlXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHJlcy5zdWJzdHIoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0KHJlZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWcgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgbGluayBhdCBkZWZpbmVkIHtyb3d9IGFuZCB7Y29sdW1ufVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAgICoqL1xuICAgIGZpbmRMaW5rQXQocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdmFyIGxpbmUgPSB0aGlzLnNlc3Npb24uZ2V0TGluZShyb3cpO1xuICAgICAgICB2YXIgd29yZFBhcnRzID0gbGluZS5zcGxpdCgvKCg/Omh0dHBzP3xmdHApOlxcL1xcL1tcXFNdKykvKTtcbiAgICAgICAgdmFyIGNvbHVtblBvc2l0aW9uID0gY29sdW1uO1xuICAgICAgICBpZiAoY29sdW1uUG9zaXRpb24gPCAwKSBjb2x1bW5Qb3NpdGlvbiA9IDA7XG4gICAgICAgIHZhciBwcmV2aW91c1Bvc2l0aW9uID0gMCwgY3VycmVudFBvc2l0aW9uID0gMCwgbWF0Y2g7XG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2Ygd29yZFBhcnRzKSB7XG4gICAgICAgICAgICBjdXJyZW50UG9zaXRpb24gPSBwcmV2aW91c1Bvc2l0aW9uICsgaXRlbS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoY29sdW1uUG9zaXRpb24gPj0gcHJldmlvdXNQb3NpdGlvbiAmJiBjb2x1bW5Qb3NpdGlvbiA8PSBjdXJyZW50UG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5tYXRjaCgvKCg/Omh0dHBzP3xmdHApOlxcL1xcL1tcXFNdKykvKSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGl0ZW0ucmVwbGFjZSgvW1xcczouLCdcIjt9XFxdXSskLywgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZpb3VzUG9zaXRpb24gPSBjdXJyZW50UG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW4gdmFsaWQgdXJsIHVuZGVyIGN1cnNvciBpbiBhbm90aGVyIHRhYlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBvcGVuTGluaygpIHtcbiAgICAgICAgdmFyIGN1cnNvciA9ICB0aGlzLnNlbGVjdGlvbi5nZXRDdXJzb3IoKTtcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuZmluZExpbmtBdChjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uKTtcbiAgICAgICAgaWYgKHVybClcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpO1xuICAgICAgICByZXR1cm4gdXJsICE9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgdGhlIGxpbmVzIGluIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLnJlbW92ZVxuICAgICAqKi9cbiAgICByZW1vdmVMaW5lcygpIHtcbiAgICAgICAgdmFyIHJvd3MgPSB0aGlzLiRnZXRTZWxlY3RlZFJvd3MoKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnJlbW92ZUZ1bGxMaW5lcyhyb3dzLmZpcnN0LCByb3dzLmxhc3QpO1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgZHVwbGljYXRlU2VsZWN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsID0gdGhpcy5zZWxlY3Rpb247XG4gICAgICAgIHZhciBkb2MgPSB0aGlzLnNlc3Npb247XG4gICAgICAgIHZhciByYW5nZSA9IHNlbC5nZXRSYW5nZSgpO1xuICAgICAgICB2YXIgcmV2ZXJzZSA9IHNlbC5pc0JhY2t3YXJkcygpO1xuICAgICAgICBpZiAocmFuZ2UuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICB2YXIgcm93ID0gcmFuZ2Uuc3RhcnQucm93O1xuICAgICAgICAgICAgZG9jLmR1cGxpY2F0ZUxpbmVzKHJvdywgcm93KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IHJldmVyc2UgPyByYW5nZS5zdGFydCA6IHJhbmdlLmVuZDtcbiAgICAgICAgICAgIHZhciBlbmRQb2ludCA9IGRvYy5pbnNlcnQocG9pbnQsIGRvYy5nZXRUZXh0UmFuZ2UocmFuZ2UpKTtcbiAgICAgICAgICAgIHJhbmdlLnN0YXJ0ID0gcG9pbnQ7XG4gICAgICAgICAgICByYW5nZS5lbmQgPSBlbmRQb2ludDtcblxuICAgICAgICAgICAgc2VsLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlLCByZXZlcnNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNoaWZ0cyBhbGwgdGhlIHNlbGVjdGVkIGxpbmVzIGRvd24gb25lIHJvdy5cbiAgICAgKlxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLm1vdmVMaW5lc1VwXG4gICAgICoqL1xuICAgIG1vdmVMaW5lc0Rvd24oKSB7XG4gICAgICAgIHRoaXMuJG1vdmVMaW5lcygxLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hpZnRzIGFsbCB0aGUgc2VsZWN0ZWQgbGluZXMgdXAgb25lIHJvdy5cbiAgICAgKiBAcmVsYXRlZCBFZGl0U2Vzc2lvbi5tb3ZlTGluZXNEb3duXG4gICAgICoqL1xuICAgIG1vdmVMaW5lc1VwKCkge1xuICAgICAgICB0aGlzLiRtb3ZlTGluZXMoLTEsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhIHJhbmdlIG9mIHRleHQgZnJvbSB0aGUgZ2l2ZW4gcmFuZ2UgdG8gdGhlIGdpdmVuIHBvc2l0aW9uLiBgdG9Qb3NpdGlvbmAgaXMgYW4gb2JqZWN0IHRoYXQgbG9va3MgbGlrZSB0aGlzOlxuICAgICAqIGBgYGpzb25cbiAgICAgKiAgICB7IHJvdzogbmV3Um93TG9jYXRpb24sIGNvbHVtbjogbmV3Q29sdW1uTG9jYXRpb24gfVxuICAgICAqIGBgYFxuICAgICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlIFRoZSByYW5nZSBvZiB0ZXh0IHlvdSB3YW50IG1vdmVkIHdpdGhpbiB0aGUgZG9jdW1lbnRcbiAgICAgKiBAcGFyYW0ge1BvaW50fSB0b1Bvc2l0aW9uIFRoZSBsb2NhdGlvbiAocm93IGFuZCBjb2x1bW4pIHdoZXJlIHlvdSB3YW50IHRvIG1vdmUgdGhlIHRleHQgdG9cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjb3B5XVxuICAgICAqXG4gICAgICogQHJldHVybnMge1JhbmdlfSBUaGUgbmV3IHJhbmdlIHdoZXJlIHRoZSB0ZXh0IHdhcyBtb3ZlZCB0by5cbiAgICAgKiBAcmVsYXRlZCBFZGl0U2Vzc2lvbi5tb3ZlVGV4dFxuICAgICAqKi9cbiAgICBtb3ZlVGV4dChyYW5nZSwgdG9Qb3NpdGlvbiwgY29weSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uLm1vdmVUZXh0KHJhbmdlLCB0b1Bvc2l0aW9uLCBjb3B5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgYWxsIHRoZSBzZWxlY3RlZCBsaW5lcyB1cCBvbmUgcm93LlxuICAgICAqXG4gICAgICoqL1xuICAgY29weUxpbmVzVXAoKSB7XG4gICAgICAgIHRoaXMuJG1vdmVMaW5lcygtMSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29waWVzIGFsbCB0aGUgc2VsZWN0ZWQgbGluZXMgZG93biBvbmUgcm93LlxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLmR1cGxpY2F0ZUxpbmVzXG4gICAgICpcbiAgICAgKiovXG4gICAgY29weUxpbmVzRG93bigpIHtcbiAgICAgICAgdGhpcy4kbW92ZUxpbmVzKDEsIHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZvciBpbnRlcm5hbCB1c2VcbiAgICAgKiBAaWdub3JlXG4gICAgICpcbiAgICAgKiovXG4gICAgJG1vdmVMaW5lcyhkaXIsIGNvcHkpIHtcbiAgICAgICAgdmFyIHJvd3MsIG1vdmVkO1xuICAgICAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb247XG4gICAgICAgIGlmICghc2VsZWN0aW9uLmluTXVsdGlTZWxlY3RNb2RlIHx8IHRoaXMuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZSkge1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gc2VsZWN0aW9uLnRvT3JpZW50ZWRSYW5nZSgpO1xuICAgICAgICAgICAgcm93cyA9IHRoaXMuJGdldFNlbGVjdGVkUm93cyhyYW5nZSk7XG4gICAgICAgICAgICBtb3ZlZCA9IHRoaXMuc2Vzc2lvbi4kbW92ZUxpbmVzKHJvd3MuZmlyc3QsIHJvd3MubGFzdCwgY29weSA/IDAgOiBkaXIpO1xuICAgICAgICAgICAgaWYgKGNvcHkgJiYgZGlyID09IC0xKSBtb3ZlZCA9IDA7XG4gICAgICAgICAgICByYW5nZS5tb3ZlQnkobW92ZWQsIDApO1xuICAgICAgICAgICAgc2VsZWN0aW9uLmZyb21PcmllbnRlZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciByYW5nZXMgPSBzZWxlY3Rpb24ucmFuZ2VMaXN0LnJhbmdlcztcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogcG9zc2libGUgYnVnLCBubyBhcmdzIGluIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIHNlbGVjdGlvbi5yYW5nZUxpc3QuZGV0YWNoKHRoaXMuc2Vzc2lvbik7XG4gICAgICAgICAgICB0aGlzLmluVmlydHVhbFNlbGVjdGlvbk1vZGUgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgZGlmZiA9IDA7XG4gICAgICAgICAgICB2YXIgdG90YWxEaWZmID0gMDtcbiAgICAgICAgICAgIHZhciBsID0gcmFuZ2VzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIHJhbmdlc1tpXS5tb3ZlQnkoZGlmZiwgMCk7XG4gICAgICAgICAgICAgICAgcm93cyA9IHRoaXMuJGdldFNlbGVjdGVkUm93cyhyYW5nZXNbaV0pO1xuICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IHJvd3MuZmlyc3Q7XG4gICAgICAgICAgICAgICAgdmFyIGxhc3QgPSByb3dzLmxhc3Q7XG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraSA8IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsRGlmZikgcmFuZ2VzW2ldLm1vdmVCeSh0b3RhbERpZmYsIDApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViUm93cyA9IHRoaXMuJGdldFNlbGVjdGVkUm93cyhyYW5nZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29weSAmJiBzdWJSb3dzLmZpcnN0ICE9IGxhc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNvcHkgJiYgc3ViUm93cy5maXJzdCA+IGxhc3QgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGxhc3QgPSBzdWJSb3dzLmxhc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICBkaWZmID0gdGhpcy5zZXNzaW9uLiRtb3ZlTGluZXMoZmlyc3QsIGxhc3QsIGNvcHkgPyAwIDogZGlyKTtcbiAgICAgICAgICAgICAgICBpZiAoY29weSAmJiBkaXIgPT0gLTEpIHJhbmdlSW5kZXggPSBpICsgMTtcbiAgICAgICAgICAgICAgICB3aGlsZSAocmFuZ2VJbmRleCA8PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlc1tyYW5nZUluZGV4XS5tb3ZlQnkoZGlmZiwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlSW5kZXgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjb3B5KSBkaWZmID0gMDtcbiAgICAgICAgICAgICAgICB0b3RhbERpZmYgKz0gZGlmZjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZWN0aW9uLmZyb21PcmllbnRlZFJhbmdlKHNlbGVjdGlvbi5yYW5nZXNbMF0pO1xuICAgICAgICAgICAgc2VsZWN0aW9uLnJhbmdlTGlzdC5hdHRhY2godGhpcy5zZXNzaW9uKTtcbiAgICAgICAgICAgIHRoaXMuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QgaW5kaWNhdGluZyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJvd3MuIFRoZSBvYmplY3QgbG9va3MgbGlrZSB0aGlzOlxuICAgICAqXG4gICAgICogYGBganNvblxuICAgICAqIHsgZmlyc3Q6IHJhbmdlLnN0YXJ0LnJvdywgbGFzdDogcmFuZ2UuZW5kLnJvdyB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqKi9cbiAgICAkZ2V0U2VsZWN0ZWRSb3dzKHJhbmdlKSB7XG4gICAgICAgIHJhbmdlID0gKHJhbmdlIHx8IHRoaXMuZ2V0U2VsZWN0aW9uUmFuZ2UoKSkuY29sbGFwc2VSb3dzKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpcnN0OiB0aGlzLnNlc3Npb24uZ2V0Um93Rm9sZFN0YXJ0KHJhbmdlLnN0YXJ0LnJvdyksXG4gICAgICAgICAgICBsYXN0OiB0aGlzLnNlc3Npb24uZ2V0Um93Rm9sZEVuZChyYW5nZS5lbmQucm93KVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uQ29tcG9zaXRpb25TdGFydChjb21wb3NpdGlvblN0YXRlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2hvd0NvbXBvc2l0aW9uKGNvbXBvc2l0aW9uU3RhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uQ29tcG9zaXRpb25VcGRhdGUodGV4dCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldENvbXBvc2l0aW9uVGV4dCh0ZXh0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkNvbXBvc2l0aW9uRW5kKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmhpZGVDb21wb3NpdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHs6VmlydHVhbFJlbmRlcmVyLmdldEZpcnN0VmlzaWJsZVJvd31cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICogQHJlbGF0ZWQgVmlydHVhbFJlbmRlcmVyLmdldEZpcnN0VmlzaWJsZVJvd1xuICAgICAqKi9cbiAgICBnZXRGaXJzdFZpc2libGVSb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmdldEZpcnN0VmlzaWJsZVJvdygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHs6VmlydHVhbFJlbmRlcmVyLmdldExhc3RWaXNpYmxlUm93fVxuICAgICAqXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiBAcmVsYXRlZCBWaXJ0dWFsUmVuZGVyZXIuZ2V0TGFzdFZpc2libGVSb3dcbiAgICAgKiovXG4gICAgZ2V0TGFzdFZpc2libGVSb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmdldExhc3RWaXNpYmxlUm93KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIHRoZSByb3cgaXMgY3VycmVudGx5IHZpc2libGUgb24gdGhlIHNjcmVlbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSByb3cgdG8gY2hlY2tcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc1Jvd1Zpc2libGUocm93KSB7XG4gICAgICAgIHJldHVybiAocm93ID49IHRoaXMuZ2V0Rmlyc3RWaXNpYmxlUm93KCkgJiYgcm93IDw9IHRoaXMuZ2V0TGFzdFZpc2libGVSb3coKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIGlmIHRoZSBlbnRpcmUgcm93IGlzIGN1cnJlbnRseSB2aXNpYmxlIG9uIHRoZSBzY3JlZW4uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IHRvIGNoZWNrXG4gICAgICpcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc1Jvd0Z1bGx5VmlzaWJsZShyb3cpIHtcbiAgICAgICAgcmV0dXJuIChyb3cgPj0gdGhpcy5yZW5kZXJlci5nZXRGaXJzdEZ1bGx5VmlzaWJsZVJvdygpICYmIHJvdyA8PSB0aGlzLnJlbmRlcmVyLmdldExhc3RGdWxseVZpc2libGVSb3coKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGN1cnJlbnRseSB2aXNpYmxlIHJvd3MuXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgJGdldFZpc2libGVSb3dDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIuZ2V0U2Nyb2xsQm90dG9tUm93KCkgLSB0aGlzLnJlbmRlcmVyLmdldFNjcm9sbFRvcFJvdygpICsgMTtcbiAgICB9XG5cbiAgICAkbW92ZUJ5UGFnZShkaXIsIHNlbGVjdCkge1xuICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5yZW5kZXJlci5sYXllckNvbmZpZztcbiAgICAgICAgdmFyIHJvd3MgPSBkaXIgKiBNYXRoLmZsb29yKGNvbmZpZy5oZWlnaHQgLyBjb25maWcubGluZUhlaWdodCk7XG5cbiAgICAgICAgaWYgKHNlbGVjdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uJG1vdmVTZWxlY3Rpb24oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JCeShyb3dzLCAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLm1vdmVDdXJzb3JCeShyb3dzLCAwKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2Nyb2xsVG9wID0gcmVuZGVyZXIuc2Nyb2xsVG9wO1xuXG4gICAgICAgIHJlbmRlcmVyLnNjcm9sbEJ5KDAsIHJvd3MgKiBjb25maWcubGluZUhlaWdodCk7XG4gICAgICAgIGlmIChzZWxlY3QgIT0gbnVsbClcbiAgICAgICAgICAgIHJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KG51bGwsIDAuNSk7XG5cbiAgICAgICAgcmVuZGVyZXIuYW5pbWF0ZVNjcm9sbGluZyhzY3JvbGxUb3ApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdHMgdGhlIHRleHQgZnJvbSB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgZG9jdW1lbnQgdW50aWwgd2hlcmUgYSBcInBhZ2UgZG93blwiIGZpbmlzaGVzLlxuICAgICAqKi9cbiAgICBzZWxlY3RQYWdlRG93bigpIHtcbiAgICAgICAgdGhpcy4kbW92ZUJ5UGFnZSgxLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIHRoZSB0ZXh0IGZyb20gdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGRvY3VtZW50IHVudGlsIHdoZXJlIGEgXCJwYWdlIHVwXCIgZmluaXNoZXMuXG4gICAgICoqL1xuICAgIHNlbGVjdFBhZ2VVcCgpIHtcbiAgICAgICAgdGhpcy4kbW92ZUJ5UGFnZSgtMSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hpZnRzIHRoZSBkb2N1bWVudCB0byB3aGVyZXZlciBcInBhZ2UgZG93blwiIGlzLCBhcyB3ZWxsIGFzIG1vdmluZyB0aGUgY3Vyc29yIHBvc2l0aW9uLlxuICAgICAqKi9cbiAgICBnb3RvUGFnZURvd24oKSB7XG4gICAgICAgdGhpcy4kbW92ZUJ5UGFnZSgxLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hpZnRzIHRoZSBkb2N1bWVudCB0byB3aGVyZXZlciBcInBhZ2UgdXBcIiBpcywgYXMgd2VsbCBhcyBtb3ZpbmcgdGhlIGN1cnNvciBwb3NpdGlvbi5cbiAgICAgKiovXG4gICAgZ290b1BhZ2VVcCgpIHtcbiAgICAgICAgdGhpcy4kbW92ZUJ5UGFnZSgtMSwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjcm9sbHMgdGhlIGRvY3VtZW50IHRvIHdoZXJldmVyIFwicGFnZSBkb3duXCIgaXMsIHdpdGhvdXQgY2hhbmdpbmcgdGhlIGN1cnNvciBwb3NpdGlvbi5cbiAgICAgKiovXG4gICAgc2Nyb2xsUGFnZURvd24oKSB7XG4gICAgICAgIHRoaXMuJG1vdmVCeVBhZ2UoMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2Nyb2xscyB0aGUgZG9jdW1lbnQgdG8gd2hlcmV2ZXIgXCJwYWdlIHVwXCIgaXMsIHdpdGhvdXQgY2hhbmdpbmcgdGhlIGN1cnNvciBwb3NpdGlvbi5cbiAgICAgKiovXG4gICAgc2Nyb2xsUGFnZVVwKCkge1xuICAgICAgICB0aGlzLiRtb3ZlQnlQYWdlKC0xKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgZWRpdG9yIHRvIHRoZSBzcGVjaWZpZWQgcm93LlxuICAgICAqIEByZWxhdGVkIFZpcnR1YWxSZW5kZXJlci5zY3JvbGxUb1Jvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKi9cbiAgICBzY3JvbGxUb1Jvdyhyb3cpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zY3JvbGxUb1Jvdyhyb3cpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjcm9sbHMgdG8gYSBsaW5lLiBJZiBgY2VudGVyYCBpcyBgdHJ1ZWAsIGl0IHB1dHMgdGhlIGxpbmUgaW4gbWlkZGxlIG9mIHNjcmVlbiAob3IgYXR0ZW1wdHMgdG8pLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsaW5lIFRoZSBsaW5lIHRvIHNjcm9sbCB0b1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gY2VudGVyIElmIGB0cnVlYFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYW5pbWF0ZSBJZiBgdHJ1ZWAgYW5pbWF0ZXMgc2Nyb2xsaW5nXG4gICAgICogQHBhcmFtIHsoKSA9PiB2b2lkfSBbY2FsbGJhY2tdIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBhbmltYXRpb24gaGFzIGZpbmlzaGVkXG4gICAgICpcbiAgICAgKiBAcmVsYXRlZCBWaXJ0dWFsUmVuZGVyZXIuc2Nyb2xsVG9MaW5lXG4gICAgICoqL1xuICAgIHNjcm9sbFRvTGluZShsaW5lLCBjZW50ZXIsIGFuaW1hdGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsVG9MaW5lKGxpbmUsIGNlbnRlciwgYW5pbWF0ZSwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dGVtcHRzIHRvIGNlbnRlciB0aGUgY3VycmVudCBzZWxlY3Rpb24gb24gdGhlIHNjcmVlbi5cbiAgICAgKiovXG4gICAgY2VudGVyU2VsZWN0aW9uKCkge1xuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIHZhciBwb3MgPSB7XG4gICAgICAgICAgICByb3c6IE1hdGguZmxvb3IocmFuZ2Uuc3RhcnQucm93ICsgKHJhbmdlLmVuZC5yb3cgLSByYW5nZS5zdGFydC5yb3cpIC8gMiksXG4gICAgICAgICAgICBjb2x1bW46IE1hdGguZmxvb3IocmFuZ2Uuc3RhcnQuY29sdW1uICsgKHJhbmdlLmVuZC5jb2x1bW4gLSByYW5nZS5zdGFydC5jb2x1bW4pIC8gMilcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5hbGlnbkN1cnNvcihwb3MsIDAuNSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgY3Vyc29yLlxuICAgICAqIEByZXR1cm5zIHtQb2ludH0gQW4gb2JqZWN0IHRoYXQgbG9va3Mgc29tZXRoaW5nIGxpa2UgdGhpczpcbiAgICAgKlxuICAgICAqIGBgYGpzb25cbiAgICAgKiB7IHJvdzogY3VyclJvdywgY29sdW1uOiBjdXJyQ29sIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZWxhdGVkIFNlbGVjdGlvbi5nZXRDdXJzb3JcbiAgICAgKiovXG4gICAgZ2V0Q3Vyc29yUG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbi5nZXRDdXJzb3IoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzY3JlZW4gcG9zaXRpb24gb2YgdGhlIGN1cnNvci5cbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9XG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uXG4gICAgICoqL1xuICAgIGdldEN1cnNvclBvc2l0aW9uU2NyZWVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLmdldEN1cnNvclBvc2l0aW9uKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHs6U2VsZWN0aW9uLmdldFJhbmdlfVxuICAgICAqIEByZXR1cm5zIHtSYW5nZX1cbiAgICAgKiBAcmVsYXRlZCBTZWxlY3Rpb24uZ2V0UmFuZ2VcbiAgICAgKiovXG4gICAgZ2V0U2VsZWN0aW9uUmFuZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdHMgYWxsIHRoZSB0ZXh0IGluIGVkaXRvci5cbiAgICAgKiBAcmVsYXRlZCBTZWxlY3Rpb24uc2VsZWN0QWxsXG4gICAgICoqL1xuICAgIHNlbGVjdEFsbCgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24uc2VsZWN0QWxsKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogezpTZWxlY3Rpb24uY2xlYXJTZWxlY3Rpb259XG4gICAgICogQHJlbGF0ZWQgU2VsZWN0aW9uLmNsZWFyU2VsZWN0aW9uXG4gICAgICoqL1xuICAgIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIHNwZWNpZmllZCByb3cgYW5kIGNvbHVtbi4gTm90ZSB0aGF0IHRoaXMgZG9lcyBub3QgZGUtc2VsZWN0IHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSBuZXcgcm93IG51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gVGhlIG5ldyBjb2x1bW4gbnVtYmVyXG4gICAgICogQHJlbGF0ZWQgU2VsZWN0aW9uLm1vdmVDdXJzb3JUb1xuICAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yVG8ocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvclRvKHJvdywgY29sdW1uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yIHRvIHRoZSBwb3NpdGlvbiBpbmRpY2F0ZWQgYnkgYHBvcy5yb3dgIGFuZCBgcG9zLmNvbHVtbmAuXG4gICAgICogQHBhcmFtIHtQb2ludH0gcG9zIEFuIG9iamVjdCB3aXRoIHR3byBwcm9wZXJ0aWVzLCByb3cgYW5kIGNvbHVtblxuICAgICAqIEByZWxhdGVkIFNlbGVjdGlvbi5tb3ZlQ3Vyc29yVG9Qb3NpdGlvblxuICAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yVG9Qb3NpdGlvbihwb3MpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvclRvUG9zaXRpb24ocG9zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yJ3Mgcm93IGFuZCBjb2x1bW4gdG8gdGhlIG5leHQgbWF0Y2hpbmcgYnJhY2tldCBvciBIVE1MIHRhZy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzZWxlY3RdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZXhwYW5kXVxuICAgICAqL1xuICAgIGp1bXBUb01hdGNoaW5nKHNlbGVjdCwgZXhwYW5kKSB7XG4gICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLmdldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBUb2tlbkl0ZXJhdG9yKHRoaXMuc2Vzc2lvbiwgY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbik7XG4gICAgICAgIHZhciBwcmV2VG9rZW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW4oKTtcbiAgICAgICAgdmFyIHRva2VuQ291bnQgPSAwO1xuICAgICAgICBpZiAocHJldlRva2VuICYmIHByZXZUb2tlbi50eXBlLmluZGV4T2YoJ3RhZy1uYW1lJykgIT09IC0xKSB7XG4gICAgICAgICAgICBwcmV2VG9rZW4gPSBpdGVyYXRvci5zdGVwQmFja3dhcmQoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdG9rZW4gPSBwcmV2VG9rZW4gfHwgaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcblxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm47XG5cbiAgICAgICAgLy9nZXQgbmV4dCBjbG9zaW5nIHRhZyBvciBicmFja2V0XG4gICAgICAgIHZhciBtYXRjaFR5cGU7XG4gICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZGVwdGggPSB7fTtcbiAgICAgICAgdmFyIGkgPSBjdXJzb3IuY29sdW1uIC0gdG9rZW4uc3RhcnQ7XG4gICAgICAgIHZhciBicmFja2V0VHlwZTtcbiAgICAgICAgdmFyIGJyYWNrZXRzID0ge1xuICAgICAgICAgICAgXCIpXCI6IFwiKFwiLFxuICAgICAgICAgICAgXCIoXCI6IFwiKFwiLFxuICAgICAgICAgICAgXCJdXCI6IFwiW1wiLFxuICAgICAgICAgICAgXCJbXCI6IFwiW1wiLFxuICAgICAgICAgICAgXCJ7XCI6IFwie1wiLFxuICAgICAgICAgICAgXCJ9XCI6IFwie1wiXG4gICAgICAgIH07XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlLm1hdGNoKC9be30oKVxcW1xcXV0vZykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IHRva2VuLnZhbHVlLmxlbmd0aCAmJiAhZm91bmQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJyYWNrZXRzW3Rva2VuLnZhbHVlW2ldXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmFja2V0VHlwZSA9IGJyYWNrZXRzW3Rva2VuLnZhbHVlW2ldXSArICcuJyArIHRva2VuLnR5cGUucmVwbGFjZShcInJwYXJlblwiLCBcImxwYXJlblwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZGVwdGhbYnJhY2tldFR5cGVdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwdGhbYnJhY2tldFR5cGVdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodG9rZW4udmFsdWVbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJygnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnWyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd7JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0aFticmFja2V0VHlwZV0rKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJyknOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnXSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd9JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0aFticmFja2V0VHlwZV0tLTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXB0aFticmFja2V0VHlwZV0gPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoVHlwZSA9ICdicmFja2V0JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUuaW5kZXhPZigndGFnLW5hbWUnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZGVwdGhbdG9rZW4udmFsdWVdKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXB0aFt0b2tlbi52YWx1ZV0gPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwcmV2VG9rZW4udmFsdWUgPT09ICc8JyAmJiB0b2tlbkNvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBkZXB0aFt0b2tlbi52YWx1ZV0rKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJldlRva2VuLnZhbHVlID09PSAnPC8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoW3Rva2VuLnZhbHVlXS0tO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkZXB0aFt0b2tlbi52YWx1ZV0gPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoVHlwZSA9ICd0YWcnO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcHJldlRva2VuID0gdG9rZW47XG4gICAgICAgICAgICAgICAgdG9rZW5Db3VudCsrO1xuICAgICAgICAgICAgICAgIHRva2VuID0gaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAodG9rZW4gJiYgIWZvdW5kKTtcblxuICAgICAgICAvL25vIG1hdGNoIGZvdW5kXG4gICAgICAgIGlmICghbWF0Y2hUeXBlKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHJhbmdlLCBwb3M7XG4gICAgICAgIGlmIChtYXRjaFR5cGUgPT09ICdicmFja2V0Jykge1xuICAgICAgICAgICAgcmFuZ2UgPSB0aGlzLnNlc3Npb24uZ2V0QnJhY2tldFJhbmdlKGN1cnNvcik7XG4gICAgICAgICAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSBuZXcgUmFuZ2UoaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCksIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgaSAtIDEsXG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSArIGkgLSAxXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBwb3MgPSByYW5nZS5zdGFydDtcbiAgICAgICAgICAgICAgICBpZiAoZXhwYW5kIHx8IHBvcy5yb3cgPT09IGN1cnNvci5yb3cgJiYgTWF0aC5hYnMocG9zLmNvbHVtbiAtIGN1cnNvci5jb2x1bW4pXG4gICAgICAgICAgICAgICAgICAgIDwgMikgcmFuZ2UgPSB0aGlzLnNlc3Npb24uZ2V0QnJhY2tldFJhbmdlKHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWF0Y2hUeXBlID09PSAndGFnJykge1xuICAgICAgICAgICAgaWYgKCF0b2tlbiB8fCB0b2tlbi50eXBlLmluZGV4T2YoJ3RhZy1uYW1lJykgPT09IC0xKSByZXR1cm47XG4gICAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKSwgaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCkgLSAyLFxuICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlblJvdygpLCBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSAtIDJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vZmluZCBtYXRjaGluZyB0YWdcbiAgICAgICAgICAgIGlmIChyYW5nZS5jb21wYXJlKGN1cnNvci5yb3csIGN1cnNvci5jb2x1bW4pID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZ3NSYW5nZXMgPSB0aGlzLnNlc3Npb24uZ2V0TWF0Y2hpbmdUYWdzKGN1cnNvcik7XG4gICAgICAgICAgICAgICAgaWYgKHRhZ3NSYW5nZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZ3NSYW5nZXMub3BlblRhZy5jb250YWlucyhjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSB0YWdzUmFuZ2VzLmNsb3NlVGFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gcmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZSA9IHRhZ3NSYW5nZXMub3BlblRhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWdzUmFuZ2VzLmNsb3NlVGFnLnN0YXJ0LnJvdyA9PT0gY3Vyc29yLnJvdyAmJiB0YWdzUmFuZ2VzLmNsb3NlVGFnLnN0YXJ0LmNvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID09PSBjdXJzb3IuY29sdW1uKSBwb3MgPSByYW5nZS5lbmQ7IGVsc2UgcG9zID0gcmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vd2UgZm91bmQgaXRcbiAgICAgICAgICAgIHBvcyA9IHBvcyB8fCByYW5nZS5zdGFydDtcbiAgICAgICAgfVxuXG4gICAgICAgIHBvcyA9IHJhbmdlICYmIHJhbmdlLmN1cnNvciB8fCBwb3M7XG4gICAgICAgIGlmIChwb3MpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UgJiYgZXhwYW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnNldFJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmFuZ2UgJiYgcmFuZ2UuaXNFcXVhbCh0aGlzLmdldFNlbGVjdGlvblJhbmdlKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLnNlbGVjdFRvKHBvcy5yb3csIHBvcy5jb2x1bW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLm1vdmVUbyhwb3Mucm93LCBwb3MuY29sdW1uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIHNwZWNpZmllZCBsaW5lIG51bWJlciwgYW5kIGFsc28gaW50byB0aGUgaW5kaWNhdGVkIGNvbHVtbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGluZU51bWJlciBUaGUgbGluZSBudW1iZXIgdG8gZ28gdG9cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2NvbHVtbl0gQSBjb2x1bW4gbnVtYmVyIHRvIGdvIHRvXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbYW5pbWF0ZV0gSWYgYHRydWVgIGFuaW1hdGVzIHNjb2xsaW5nXG4gICAgICoqL1xuICAgIGdvdG9MaW5lKGxpbmVOdW1iZXIsIGNvbHVtbiwgYW5pbWF0ZSkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnNlc3Npb24udW5mb2xkKHtyb3c6IGxpbmVOdW1iZXIgLSAxLCBjb2x1bW46IGNvbHVtbiB8fCAwfSk7XG5cbiAgICAgICAgLy8gdG9kbzogZmluZCBhIHdheSB0byBhdXRvbWF0aWNhbGx5IGV4aXQgbXVsdGlzZWxlY3QgbW9kZVxuICAgICAgICB0aGlzLmV4aXRNdWx0aVNlbGVjdE1vZGUgJiYgdGhpcy5leGl0TXVsdGlTZWxlY3RNb2RlKCk7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvclRvKGxpbmVOdW1iZXIgLSAxLCBjb2x1bW4gfHwgMCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzUm93RnVsbHlWaXNpYmxlKGxpbmVOdW1iZXIgLSAxKSlcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9MaW5lKGxpbmVOdW1iZXIgLSAxLCB0cnVlLCBhbmltYXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yIHRvIHRoZSBzcGVjaWZpZWQgcm93IGFuZCBjb2x1bW4uIE5vdGUgdGhhdCB0aGlzIGRvZXMgZGUtc2VsZWN0IHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSBuZXcgcm93IG51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gVGhlIG5ldyBjb2x1bW4gbnVtYmVyXG4gICAgICpcbiAgICAgKiBAcmVsYXRlZCBFZGl0b3IubW92ZUN1cnNvclRvXG4gICAgICoqL1xuICAgIG5hdmlnYXRlVG8ocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24ubW92ZVRvKHJvdywgY29sdW1uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yIHVwIGluIHRoZSBkb2N1bWVudCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy4gTm90ZSB0aGF0IHRoaXMgZG9lcyBkZS1zZWxlY3QgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbdGltZXNdIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gY2hhbmdlIG5hdmlnYXRpb25cbiAgICAgKlxuICAgICAqKi9cbiAgICBuYXZpZ2F0ZVVwKHRpbWVzKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbi5pc011bHRpTGluZSgpICYmICF0aGlzLnNlbGVjdGlvbi5pc0JhY2t3YXJkcygpKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uU3RhcnQgPSB0aGlzLnNlbGVjdGlvbi5hbmNob3IuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vdmVDdXJzb3JUb1Bvc2l0aW9uKHNlbGVjdGlvblN0YXJ0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdGlvbi5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yQnkoLXRpbWVzIHx8IC0xLCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yIGRvd24gaW4gdGhlIGRvY3VtZW50IHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLiBOb3RlIHRoYXQgdGhpcyBkb2VzIGRlLXNlbGVjdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt0aW1lc10gVGhlIG51bWJlciBvZiB0aW1lcyB0byBjaGFuZ2UgbmF2aWdhdGlvblxuICAgICAqXG4gICAgICoqL1xuICAgIG5hdmlnYXRlRG93bih0aW1lcykge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3Rpb24uaXNNdWx0aUxpbmUoKSAmJiB0aGlzLnNlbGVjdGlvbi5pc0JhY2t3YXJkcygpKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uRW5kID0gdGhpcy5zZWxlY3Rpb24uYW5jaG9yLmdldFBvc2l0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbihzZWxlY3Rpb25FbmQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLm1vdmVDdXJzb3JCeSh0aW1lcyB8fCAxLCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yIGxlZnQgaW4gdGhlIGRvY3VtZW50IHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLiBOb3RlIHRoYXQgdGhpcyBkb2VzIGRlLXNlbGVjdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt0aW1lc10gVGhlIG51bWJlciBvZiB0aW1lcyB0byBjaGFuZ2UgbmF2aWdhdGlvblxuICAgICAqXG4gICAgICoqL1xuICAgIG5hdmlnYXRlTGVmdCh0aW1lcykge1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvblN0YXJ0ID0gdGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpLnN0YXJ0O1xuICAgICAgICAgICAgdGhpcy5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbihzZWxlY3Rpb25TdGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aW1lcyA9IHRpbWVzIHx8IDE7XG4gICAgICAgICAgICB3aGlsZSAodGltZXMtLSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLm1vdmVDdXJzb3JMZWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgcmlnaHQgaW4gdGhlIGRvY3VtZW50IHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLiBOb3RlIHRoYXQgdGhpcyBkb2VzIGRlLXNlbGVjdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt0aW1lc10gVGhlIG51bWJlciBvZiB0aW1lcyB0byBjaGFuZ2UgbmF2aWdhdGlvblxuICAgICAqXG4gICAgICoqL1xuICAgIG5hdmlnYXRlUmlnaHQodGltZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb25FbmQgPSB0aGlzLmdldFNlbGVjdGlvblJhbmdlKCkuZW5kO1xuICAgICAgICAgICAgdGhpcy5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbihzZWxlY3Rpb25FbmQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGltZXMgPSB0aW1lcyB8fCAxO1xuICAgICAgICAgICAgd2hpbGUgKHRpbWVzLS0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yUmlnaHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yIHRvIHRoZSBzdGFydCBvZiB0aGUgY3VycmVudCBsaW5lLiBOb3RlIHRoYXQgdGhpcyBkb2VzIGRlLXNlbGVjdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICoqL1xuICAgIG5hdmlnYXRlTGluZVN0YXJ0KCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yTGluZVN0YXJ0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIGVuZCBvZiB0aGUgY3VycmVudCBsaW5lLiBOb3RlIHRoYXQgdGhpcyBkb2VzIGRlLXNlbGVjdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICoqL1xuICAgIG5hdmlnYXRlTGluZUVuZCgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvckxpbmVFbmQoKTtcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTW92ZXMgdGhlIGN1cnNvciB0byB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IGZpbGUuIE5vdGUgdGhhdCB0aGlzIGRvZXMgZGUtc2VsZWN0IHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAgKiovXG4gICAgbmF2aWdhdGVGaWxlRW5kKCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yRmlsZUVuZCgpO1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yIHRvIHRoZSBzdGFydCBvZiB0aGUgY3VycmVudCBmaWxlLiBOb3RlIHRoYXQgdGhpcyBkb2VzIGRlLXNlbGVjdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICoqL1xuICAgIG5hdmlnYXRlRmlsZVN0YXJ0KCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yRmlsZVN0YXJ0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIHdvcmQgaW1tZWRpYXRlbHkgdG8gdGhlIHJpZ2h0IG9mIHRoZSBjdXJyZW50IHBvc2l0aW9uLiBOb3RlIHRoYXQgdGhpcyBkb2VzIGRlLXNlbGVjdCB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICoqL1xuICAgIG5hdmlnYXRlV29yZFJpZ2h0KCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yV29yZFJpZ2h0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIHdvcmQgaW1tZWRpYXRlbHkgdG8gdGhlIGxlZnQgb2YgdGhlIGN1cnJlbnQgcG9zaXRpb24uIE5vdGUgdGhhdCB0aGlzIGRvZXMgZGUtc2VsZWN0IHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAgKiovXG4gICAgbmF2aWdhdGVXb3JkTGVmdCgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24ubW92ZUN1cnNvcldvcmRMZWZ0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBgb3B0aW9ucy5uZWVkbGVgIHdpdGggdGhlIHZhbHVlIGluIGByZXBsYWNlbWVudGAuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtyZXBsYWNlbWVudF0gVGhlIHRleHQgdG8gcmVwbGFjZSB3aXRoXG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPFNlYXJjaE9wdGlvbnM+fSBbb3B0aW9uc10gVGhlIFtbU2VhcmNoIGBTZWFyY2hgXV0gb3B0aW9ucyB0byB1c2VcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICoqL1xuICAgIHJlcGxhY2UocmVwbGFjZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMpXG4gICAgICAgICAgICB0aGlzLiRzZWFyY2guc2V0KG9wdGlvbnMpO1xuXG4gICAgICAgIHZhciByYW5nZSA9IHRoaXMuJHNlYXJjaC5maW5kKHRoaXMuc2Vzc2lvbik7XG4gICAgICAgIHZhciByZXBsYWNlZCA9IDA7XG4gICAgICAgIGlmICghcmFuZ2UpXG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuJHRyeVJlcGxhY2UocmFuZ2UsIHJlcGxhY2VtZW50KSkge1xuICAgICAgICAgICAgcmVwbGFjZWQgPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uUmFuZ2UocmFuZ2UpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbFNlbGVjdGlvbkludG9WaWV3KHJhbmdlLnN0YXJ0LCByYW5nZS5lbmQpO1xuXG4gICAgICAgIHJldHVybiByZXBsYWNlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyBhbGwgb2NjdXJyZW5jZXMgb2YgYG9wdGlvbnMubmVlZGxlYCB3aXRoIHRoZSB2YWx1ZSBpbiBgcmVwbGFjZW1lbnRgLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbcmVwbGFjZW1lbnRdIFRoZSB0ZXh0IHRvIHJlcGxhY2Ugd2l0aFxuICAgICAqIEBwYXJhbSB7UGFydGlhbDxTZWFyY2hPcHRpb25zPn0gW29wdGlvbnNdIFRoZSBbW1NlYXJjaCBgU2VhcmNoYF1dIG9wdGlvbnMgdG8gdXNlXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqKi9cbiAgICByZXBsYWNlQWxsKHJlcGxhY2VtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLiRzZWFyY2guc2V0KG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJhbmdlcyA9IHRoaXMuJHNlYXJjaC5maW5kQWxsKHRoaXMuc2Vzc2lvbik7XG4gICAgICAgIHZhciByZXBsYWNlZCA9IDA7XG4gICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlZDtcblxuICAgICAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5tb3ZlVG8oMCwgMCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHJhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgaWYodGhpcy4kdHJ5UmVwbGFjZShyYW5nZXNbaV0sIHJlcGxhY2VtZW50KSkge1xuICAgICAgICAgICAgICAgIHJlcGxhY2VkKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb24pO1xuXG4gICAgICAgIHJldHVybiByZXBsYWNlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuSVJhbmdlfSByYW5nZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcmVwbGFjZW1lbnRdXG4gICAgICovXG4gICAgJHRyeVJlcGxhY2UocmFuZ2UsIHJlcGxhY2VtZW50KSB7XG4gICAgICAgIHZhciBpbnB1dCA9IHRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2UocmFuZ2UpO1xuICAgICAgICByZXBsYWNlbWVudCA9IHRoaXMuJHNlYXJjaC5yZXBsYWNlKGlucHV0LCByZXBsYWNlbWVudCk7XG4gICAgICAgIGlmIChyZXBsYWNlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmFuZ2UuZW5kID0gdGhpcy5zZXNzaW9uLnJlcGxhY2UocmFuZ2UsIHJlcGxhY2VtZW50KTtcbiAgICAgICAgICAgIHJldHVybiByYW5nZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogezpTZWFyY2guZ2V0T3B0aW9uc30gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gYG9wdGlvbnNgLCBzZWUgW1tTZWFyY2ggYFNlYXJjaGBdXS5cbiAgICAgKiBAcmVsYXRlZCBTZWFyY2guZ2V0T3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtQYXJ0aWFsPFNlYXJjaE9wdGlvbnM+fVxuICAgICAqKi9cbiAgICBnZXRMYXN0U2VhcmNoT3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHNlYXJjaC5nZXRPcHRpb25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXR0ZW1wdHMgdG8gZmluZCBgbmVlZGxlYCB3aXRoaW4gdGhlIGRvY3VtZW50LiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBgb3B0aW9uc2AsIHNlZSBbW1NlYXJjaCBgU2VhcmNoYF1dLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cHxPYmplY3R9IG5lZWRsZSBUaGUgdGV4dCB0byBzZWFyY2ggZm9yIChvcHRpb25hbClcbiAgICAgKiBAcGFyYW0ge1BhcnRpYWw8U2VhcmNoT3B0aW9ucz59IFtvcHRpb25zXSBBbiBvYmplY3QgZGVmaW5pbmcgdmFyaW91cyBzZWFyY2ggcHJvcGVydGllc1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FuaW1hdGVdIElmIGB0cnVlYCBhbmltYXRlIHNjcm9sbGluZ1xuICAgICAqIEByZWxhdGVkIFNlYXJjaC5maW5kXG4gICAgICoqL1xuICAgIGZpbmQobmVlZGxlLCBvcHRpb25zLCBhbmltYXRlKSB7XG4gICAgICAgIGlmICghb3B0aW9ucylcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcblxuICAgICAgICBpZiAodHlwZW9mIG5lZWRsZSA9PSBcInN0cmluZ1wiIHx8IG5lZWRsZSBpbnN0YW5jZW9mIFJlZ0V4cClcbiAgICAgICAgICAgIG9wdGlvbnMubmVlZGxlID0gbmVlZGxlO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbmVlZGxlID09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICBvb3AubWl4aW4ob3B0aW9ucywgbmVlZGxlKTtcblxuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO1xuICAgICAgICBpZiAob3B0aW9ucy5uZWVkbGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgbmVlZGxlID0gdGhpcy5zZXNzaW9uLmdldFRleHRSYW5nZShyYW5nZSlcbiAgICAgICAgICAgICAgICB8fCB0aGlzLiRzZWFyY2guJG9wdGlvbnMubmVlZGxlO1xuICAgICAgICAgICAgaWYgKCFuZWVkbGUpIHtcbiAgICAgICAgICAgICAgICByYW5nZSA9IHRoaXMuc2Vzc2lvbi5nZXRXb3JkUmFuZ2UocmFuZ2Uuc3RhcnQucm93LCByYW5nZS5zdGFydC5jb2x1bW4pO1xuICAgICAgICAgICAgICAgIG5lZWRsZSA9IHRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2UocmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kc2VhcmNoLnNldCh7bmVlZGxlOiBuZWVkbGV9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJHNlYXJjaC5zZXQob3B0aW9ucyk7XG4gICAgICAgIGlmICghb3B0aW9ucy5zdGFydClcbiAgICAgICAgICAgIHRoaXMuJHNlYXJjaC5zZXQoe3N0YXJ0OiByYW5nZX0pO1xuXG4gICAgICAgIHZhciBuZXdSYW5nZSA9IHRoaXMuJHNlYXJjaC5maW5kKHRoaXMuc2Vzc2lvbik7XG4gICAgICAgIGlmIChvcHRpb25zLnByZXZlbnRTY3JvbGwpXG4gICAgICAgICAgICByZXR1cm4gbmV3UmFuZ2U7XG4gICAgICAgIGlmIChuZXdSYW5nZSkge1xuICAgICAgICAgICAgdGhpcy5yZXZlYWxSYW5nZShuZXdSYW5nZSwgYW5pbWF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3UmFuZ2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2xlYXIgc2VsZWN0aW9uIGlmIG5vdGhpbmcgaXMgZm91bmRcbiAgICAgICAgaWYgKG9wdGlvbnMuYmFja3dhcmRzKVxuICAgICAgICAgICAgcmFuZ2Uuc3RhcnQgPSByYW5nZS5lbmQ7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJhbmdlLmVuZCA9IHJhbmdlLnN0YXJ0O1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZXRSYW5nZShyYW5nZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYW5vdGhlciBzZWFyY2ggZm9yIGBuZWVkbGVgIGluIHRoZSBkb2N1bWVudC4gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gYG9wdGlvbnNgLCBzZWUgW1tTZWFyY2ggYFNlYXJjaGBdXS5cbiAgICAgKiBAcGFyYW0ge1BhcnRpYWw8U2VhcmNoT3B0aW9ucz59IFtvcHRpb25zXSBzZWFyY2ggb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FuaW1hdGVdIElmIGB0cnVlYCBhbmltYXRlIHNjcm9sbGluZ1xuICAgICAqXG4gICAgICogQHJlbGF0ZWQgRWRpdG9yLmZpbmRcbiAgICAgKiovXG4gICAgZmluZE5leHQob3B0aW9ucywgYW5pbWF0ZSkge1xuICAgICAgICB0aGlzLmZpbmQoe3NraXBDdXJyZW50OiB0cnVlLCBiYWNrd2FyZHM6IGZhbHNlfSwgb3B0aW9ucywgYW5pbWF0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBzZWFyY2ggZm9yIGBuZWVkbGVgIGJhY2t3YXJkcy4gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gYG9wdGlvbnNgLCBzZWUgW1tTZWFyY2ggYFNlYXJjaGBdXS5cbiAgICAgKiBAcGFyYW0ge1BhcnRpYWw8U2VhcmNoT3B0aW9ucz59IFtvcHRpb25zXSBzZWFyY2ggb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FuaW1hdGVdIElmIGB0cnVlYCBhbmltYXRlIHNjcm9sbGluZ1xuICAgICAqXG4gICAgICogQHJlbGF0ZWQgRWRpdG9yLmZpbmRcbiAgICAgKiovXG4gICAgZmluZFByZXZpb3VzKG9wdGlvbnMsIGFuaW1hdGUpIHtcbiAgICAgICAgdGhpcy5maW5kKG9wdGlvbnMsIHtza2lwQ3VycmVudDogdHJ1ZSwgYmFja3dhcmRzOiB0cnVlfSwgYW5pbWF0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JhbmdlfSByYW5nZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2FuaW1hdGVdXG4gICAgICovXG4gICAgcmV2ZWFsUmFuZ2UocmFuZ2UsIGFuaW1hdGUpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnVuZm9sZChyYW5nZSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlKTtcblxuICAgICAgICB2YXIgc2Nyb2xsVG9wID0gdGhpcy5yZW5kZXJlci5zY3JvbGxUb3A7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXcocmFuZ2Uuc3RhcnQsIHJhbmdlLmVuZCwgMC41KTtcbiAgICAgICAgaWYgKGFuaW1hdGUgIT09IGZhbHNlKVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hbmltYXRlU2Nyb2xsaW5nKHNjcm9sbFRvcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogezpVbmRvTWFuYWdlci51bmRvfVxuICAgICAqIEByZWxhdGVkIFVuZG9NYW5hZ2VyLnVuZG9cbiAgICAgKiovXG4gICAgdW5kbygpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLmdldFVuZG9NYW5hZ2VyKCkudW5kbyh0aGlzLnNlc3Npb24pO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KG51bGwsIDAuNSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogezpVbmRvTWFuYWdlci5yZWRvfVxuICAgICAqIEByZWxhdGVkIFVuZG9NYW5hZ2VyLnJlZG9cbiAgICAgKiovXG4gICAgcmVkbygpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLmdldFVuZG9NYW5hZ2VyKCkucmVkbyh0aGlzLnNlc3Npb24pO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KG51bGwsIDAuNSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDbGVhbnMgdXAgdGhlIGVudGlyZSBlZGl0b3IuXG4gICAgICoqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLiR0b0Rlc3Ryb3kpIHtcbiAgICAgICAgICAgIHRoaXMuJHRvRGVzdHJveS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgZWwuZGVzdHJveSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiR0b0Rlc3Ryb3kgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiRtb3VzZUhhbmRsZXIpXG4gICAgICAgICAgICB0aGlzLiRtb3VzZUhhbmRsZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiZGVzdHJveVwiLCB0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbilcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5kZXN0cm95KCk7XG4gICAgICAgIGlmICh0aGlzLl8kZW1pdElucHV0RXZlbnQpXG4gICAgICAgICAgICB0aGlzLl8kZW1pdElucHV0RXZlbnQuY2FuY2VsKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIGF1dG9tYXRpYyBzY3JvbGxpbmcgb2YgdGhlIGN1cnNvciBpbnRvIHZpZXcgd2hlbiBlZGl0b3IgaXRzZWxmIGlzIGluc2lkZSBzY3JvbGxhYmxlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGVuYWJsZSBkZWZhdWx0IHRydWVcbiAgICAgKiovXG4gICAgc2V0QXV0b1Njcm9sbEVkaXRvckludG9WaWV3KGVuYWJsZSkge1xuICAgICAgICBpZiAoIWVuYWJsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHJlY3Q7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHNob3VsZFNjcm9sbCA9IGZhbHNlO1xuICAgICAgICBpZiAoIXRoaXMuJHNjcm9sbEFuY2hvcilcbiAgICAgICAgICAgIHRoaXMuJHNjcm9sbEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhciBzY3JvbGxBbmNob3IgPSB0aGlzLiRzY3JvbGxBbmNob3I7XG4gICAgICAgIHNjcm9sbEFuY2hvci5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZVwiO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUoc2Nyb2xsQW5jaG9yLCB0aGlzLmNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgdmFyIG9uQ2hhbmdlU2VsZWN0aW9uID0gdGhpcy5vbihcImNoYW5nZVNlbGVjdGlvblwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNob3VsZFNjcm9sbCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBuZWVkZWQgdG8gbm90IHRyaWdnZXIgc3luYyByZWZsb3dcbiAgICAgICAgdmFyIG9uQmVmb3JlUmVuZGVyID0gdGhpcy5yZW5kZXJlci5vbihcImJlZm9yZVJlbmRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRTY3JvbGwpXG4gICAgICAgICAgICAgICAgcmVjdCA9IHNlbGYucmVuZGVyZXIuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG9uQWZ0ZXJSZW5kZXIgPSB0aGlzLnJlbmRlcmVyLm9uKFwiYWZ0ZXJSZW5kZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkU2Nyb2xsICYmIHJlY3QgJiYgKHNlbGYuaXNGb2N1c2VkKClcbiAgICAgICAgICAgICAgICB8fCBzZWxmLnNlYXJjaEJveCAmJiBzZWxmLnNlYXJjaEJveC5pc0ZvY3VzZWQoKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHNlbGYucmVuZGVyZXI7XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IHJlbmRlcmVyLiRjdXJzb3JMYXllci4kcGl4ZWxQb3M7XG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHJlbmRlcmVyLmxheWVyQ29uZmlnO1xuICAgICAgICAgICAgICAgIHZhciB0b3AgPSBwb3MudG9wIC0gY29uZmlnLm9mZnNldDtcbiAgICAgICAgICAgICAgICBpZiAocG9zLnRvcCA+PSAwICYmIHRvcCArIHJlY3QudG9wIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBzaG91bGRTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocG9zLnRvcCA8IGNvbmZpZy5oZWlnaHQgJiZcbiAgICAgICAgICAgICAgICAgICAgcG9zLnRvcCArIHJlY3QudG9wICsgY29uZmlnLmxpbmVIZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2Nyb2xsID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFNjcm9sbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvci5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvci5zdHlsZS5sZWZ0ID0gcG9zLmxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvci5zdHlsZS5oZWlnaHQgPSBjb25maWcubGluZUhlaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQW5jaG9yLnNjcm9sbEludG9WaWV3KHNob3VsZFNjcm9sbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNob3VsZFNjcm9sbCA9IHJlY3QgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRBdXRvU2Nyb2xsRWRpdG9ySW50b1ZpZXcgPSBmdW5jdGlvbihlbmFibGUpIHtcbiAgICAgICAgICAgIGlmIChlbmFibGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2V0QXV0b1Njcm9sbEVkaXRvckludG9WaWV3O1xuICAgICAgICAgICAgdGhpcy5vZmYoXCJjaGFuZ2VTZWxlY3Rpb25cIiwgb25DaGFuZ2VTZWxlY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vZmYoXCJhZnRlclJlbmRlclwiLCBvbkFmdGVyUmVuZGVyKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIub2ZmKFwiYmVmb3JlUmVuZGVyXCIsIG9uQmVmb3JlUmVuZGVyKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAkcmVzZXRDdXJzb3JTdHlsZSgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy4kY3Vyc29yU3R5bGUgfHwgXCJhY2VcIjtcbiAgICAgICAgdmFyIGN1cnNvckxheWVyID0gdGhpcy5yZW5kZXJlci4kY3Vyc29yTGF5ZXI7XG4gICAgICAgIGlmICghY3Vyc29yTGF5ZXIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGN1cnNvckxheWVyLnNldFNtb290aEJsaW5raW5nKC9zbW9vdGgvLnRlc3Qoc3R5bGUpKTtcbiAgICAgICAgY3Vyc29yTGF5ZXIuaXNCbGlua2luZyA9ICF0aGlzLiRyZWFkT25seSAmJiBzdHlsZSAhPSBcIndpZGVcIjtcbiAgICAgICAgZG9tLnNldENzc0NsYXNzKGN1cnNvckxheWVyLmVsZW1lbnQsIFwiYWNlX3NsaW0tY3Vyc29yc1wiLCAvc2xpbS8udGVzdChzdHlsZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG9wZW5zIGEgcHJvbXB0IGRpc3BsYXlpbmcgbWVzc2FnZVxuICAgICAqKi9cbiAgICBwcm9tcHQobWVzc2FnZSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXM7XG4gICAgICAgIGNvbmZpZy5sb2FkTW9kdWxlKFwiYWNlL2V4dC9wcm9tcHRcIiwgZnVuY3Rpb24gKG1vZHVsZSkge1xuICAgICAgICAgICAgbW9kdWxlLnByb21wdChlZGl0b3IsIG1lc3NhZ2UsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG5cbkVkaXRvci4kdWlkID0gMDtcbkVkaXRvci5wcm90b3R5cGUuY3VyT3AgPSBudWxsO1xuRWRpdG9yLnByb3RvdHlwZS5wcmV2T3AgPSB7fTtcbi8vIFRPRE8gdXNlIHByb3BlcnR5IG9uIGNvbW1hbmRzIGluc3RlYWQgb2YgdGhpc1xuRWRpdG9yLnByb3RvdHlwZS4kbWVyZ2VhYmxlQ29tbWFuZHMgPSBbXCJiYWNrc3BhY2VcIiwgXCJkZWxcIiwgXCJpbnNlcnRzdHJpbmdcIl07XG5FZGl0b3IucHJvdG90eXBlLiR0b2dnbGVXb3JkUGFpcnMgPSBbXG4gICAgW1wiZmlyc3RcIiwgXCJsYXN0XCJdLFxuICAgIFtcInRydWVcIiwgXCJmYWxzZVwiXSxcbiAgICBbXCJ5ZXNcIiwgXCJub1wiXSxcbiAgICBbXCJ3aWR0aFwiLCBcImhlaWdodFwiXSxcbiAgICBbXCJ0b3BcIiwgXCJib3R0b21cIl0sXG4gICAgW1wicmlnaHRcIiwgXCJsZWZ0XCJdLFxuICAgIFtcIm9uXCIsIFwib2ZmXCJdLFxuICAgIFtcInhcIiwgXCJ5XCJdLFxuICAgIFtcImdldFwiLCBcInNldFwiXSxcbiAgICBbXCJtYXhcIiwgXCJtaW5cIl0sXG4gICAgW1wiaG9yaXpvbnRhbFwiLCBcInZlcnRpY2FsXCJdLFxuICAgIFtcInNob3dcIiwgXCJoaWRlXCJdLFxuICAgIFtcImFkZFwiLCBcInJlbW92ZVwiXSxcbiAgICBbXCJ1cFwiLCBcImRvd25cIl0sXG4gICAgW1wiYmVmb3JlXCIsIFwiYWZ0ZXJcIl0sXG4gICAgW1wiZXZlblwiLCBcIm9kZFwiXSxcbiAgICBbXCJpblwiLCBcIm91dFwiXSxcbiAgICBbXCJpbnNpZGVcIiwgXCJvdXRzaWRlXCJdLFxuICAgIFtcIm5leHRcIiwgXCJwcmV2aW91c1wiXSxcbiAgICBbXCJpbmNyZWFzZVwiLCBcImRlY3JlYXNlXCJdLFxuICAgIFtcImF0dGFjaFwiLCBcImRldGFjaFwiXSxcbiAgICBbXCImJlwiLCBcInx8XCJdLFxuICAgIFtcIj09XCIsIFwiIT1cIl1cbl07XG5cbm9vcC5pbXBsZW1lbnQoRWRpdG9yLnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyKTtcblxuXG5jb25maWcuZGVmaW5lT3B0aW9ucyhFZGl0b3IucHJvdG90eXBlLCBcImVkaXRvclwiLCB7XG4gICAgc2VsZWN0aW9uU3R5bGU6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICAgICAgdGhpcy5vblNlbGVjdGlvbkNoYW5nZSgpO1xuICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwiY2hhbmdlU2VsZWN0aW9uU3R5bGVcIiwge2RhdGE6IHN0eWxlfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogXCJsaW5lXCJcbiAgICB9LFxuICAgIGhpZ2hsaWdodEFjdGl2ZUxpbmU6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbigpIHt0aGlzLiR1cGRhdGVIaWdobGlnaHRBY3RpdmVMaW5lKCk7fSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiB0cnVlXG4gICAgfSxcbiAgICBoaWdobGlnaHRTZWxlY3RlZFdvcmQ6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbihzaG91bGRIaWdobGlnaHQpIHt0aGlzLiRvblNlbGVjdGlvbkNoYW5nZSgpO30sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogdHJ1ZVxuICAgIH0sXG4gICAgcmVhZE9ubHk6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbihyZWFkT25seSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0SW5wdXQuc2V0UmVhZE9ubHkocmVhZE9ubHkpO1xuICAgICAgICAgICAgdGhpcy4kcmVzZXRDdXJzb3JTdHlsZSgpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IGZhbHNlXG4gICAgfSxcbiAgICBjb3B5V2l0aEVtcHR5U2VsZWN0aW9uOiB7XG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dElucHV0LnNldENvcHlXaXRoRW1wdHlTZWxlY3Rpb24odmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IGZhbHNlXG4gICAgfSxcbiAgICBjdXJzb3JTdHlsZToge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkgeyB0aGlzLiRyZXNldEN1cnNvclN0eWxlKCk7IH0sXG4gICAgICAgIHZhbHVlczogW1wiYWNlXCIsIFwic2xpbVwiLCBcInNtb290aFwiLCBcIndpZGVcIl0sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogXCJhY2VcIlxuICAgIH0sXG4gICAgbWVyZ2VVbmRvRGVsdGFzOiB7XG4gICAgICAgIHZhbHVlczogW2ZhbHNlLCB0cnVlLCBcImFsd2F5c1wiXSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiB0cnVlXG4gICAgfSxcbiAgICBiZWhhdmlvdXJzRW5hYmxlZDoge2luaXRpYWxWYWx1ZTogdHJ1ZX0sXG4gICAgd3JhcEJlaGF2aW91cnNFbmFibGVkOiB7aW5pdGlhbFZhbHVlOiB0cnVlfSxcbiAgICBlbmFibGVBdXRvSW5kZW50OiB7aW5pdGlhbFZhbHVlOiB0cnVlfSxcbiAgICBhdXRvU2Nyb2xsRWRpdG9ySW50b1ZpZXc6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHt0aGlzLnNldEF1dG9TY3JvbGxFZGl0b3JJbnRvVmlldyh2YWwpO31cbiAgICB9LFxuICAgIGtleWJvYXJkSGFuZGxlcjoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkgeyB0aGlzLnNldEtleWJvYXJkSGFuZGxlcih2YWwpOyB9LFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy4ka2V5YmluZGluZ0lkOyB9LFxuICAgICAgICBoYW5kbGVzU2V0OiB0cnVlXG4gICAgfSxcbiAgICB2YWx1ZToge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkgeyB0aGlzLnNlc3Npb24uc2V0VmFsdWUodmFsKTsgfSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTsgfSxcbiAgICAgICAgaGFuZGxlc1NldDogdHJ1ZSxcbiAgICAgICAgaGlkZGVuOiB0cnVlXG4gICAgfSxcbiAgICBzZXNzaW9uOiB7XG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7IHRoaXMuc2V0U2Vzc2lvbih2YWwpOyB9LFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5zZXNzaW9uOyB9LFxuICAgICAgICBoYW5kbGVzU2V0OiB0cnVlLFxuICAgICAgICBoaWRkZW46IHRydWVcbiAgICB9LFxuXG4gICAgc2hvd0xpbmVOdW1iZXJzOiB7XG4gICAgICAgIHNldDogZnVuY3Rpb24oc2hvdykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci4kZ3V0dGVyTGF5ZXIuc2V0U2hvd0xpbmVOdW1iZXJzKHNob3cpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci4kbG9vcC5zY2hlZHVsZSh0aGlzLnJlbmRlcmVyLkNIQU5HRV9HVVRURVIpO1xuICAgICAgICAgICAgaWYgKHNob3cgJiYgdGhpcy4kcmVsYXRpdmVMaW5lTnVtYmVycylcbiAgICAgICAgICAgICAgICByZWxhdGl2ZU51bWJlclJlbmRlcmVyLmF0dGFjaCh0aGlzKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZWxhdGl2ZU51bWJlclJlbmRlcmVyLmRldGFjaCh0aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiB0cnVlXG4gICAgfSxcbiAgICByZWxhdGl2ZUxpbmVOdW1iZXJzOiB7XG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzaG93TGluZU51bWJlcnMgJiYgdmFsdWUpXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVOdW1iZXJSZW5kZXJlci5hdHRhY2godGhpcyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVsYXRpdmVOdW1iZXJSZW5kZXJlci5kZXRhY2godGhpcyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuJHVwZGF0ZVBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdXBkYXRlUGxhY2Vob2xkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhc1ZhbHVlID0gdGhpcy5zZXNzaW9uICYmICh0aGlzLnJlbmRlcmVyLiRjb21wb3NpdGlvbiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5nZXRMZW5ndGgoKSA+IDEgfHwgdGhpcy5zZXNzaW9uLmdldExpbmUoMCkubGVuZ3RoID4gMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNWYWx1ZSAmJiB0aGlzLnJlbmRlcmVyLnBsYWNlaG9sZGVyTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vZmYoXCJhZnRlclJlbmRlclwiLCB0aGlzLiR1cGRhdGVQbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb20ucmVtb3ZlQ3NzQ2xhc3ModGhpcy5jb250YWluZXIsIFwiYWNlX2hhc1BsYWNlaG9sZGVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5wbGFjZWhvbGRlck5vZGUucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnBsYWNlaG9sZGVyTm9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWhhc1ZhbHVlICYmICF0aGlzLnJlbmRlcmVyLnBsYWNlaG9sZGVyTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5vbihcImFmdGVyUmVuZGVyXCIsIHRoaXMuJHVwZGF0ZVBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbS5hZGRDc3NDbGFzcyh0aGlzLmNvbnRhaW5lciwgXCJhY2VfaGFzUGxhY2Vob2xkZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb20uY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IFwiYWNlX3BsYWNlaG9sZGVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IHRoaXMuJHBsYWNlaG9sZGVyIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnBsYWNlaG9sZGVyTm9kZSA9IGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jb250ZW50LmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIucGxhY2Vob2xkZXJOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaGFzVmFsdWUgJiYgdGhpcy5yZW5kZXJlci5wbGFjZWhvbGRlck5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucGxhY2Vob2xkZXJOb2RlLnRleHRDb250ZW50ID0gdGhpcy4kcGxhY2Vob2xkZXIgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgdGhpcy5vbihcImlucHV0XCIsIHRoaXMuJHVwZGF0ZVBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJHVwZGF0ZVBsYWNlaG9sZGVyKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGVuYWJsZUtleWJvYXJkQWNjZXNzaWJpbGl0eToge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgYmx1ckNvbW1hbmQgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJibHVyVGV4dElucHV0XCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiU2V0IGZvY3VzIHRvIHRoZSBlZGl0b3IgY29udGVudCBkaXYgdG8gYWxsb3cgdGFiYmluZyB0aHJvdWdoIHRoZSBwYWdlXCIsXG4gICAgICAgICAgICAgICAgYmluZEtleTogXCJFc2NcIixcbiAgICAgICAgICAgICAgICBleGVjOiBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLnNjcm9sbGVyLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGZvY3VzT25FbnRlcktleXVwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT0gdGhpcy5yZW5kZXJlci5zY3JvbGxlciAmJiBlLmtleUNvZGUgPT09IGtleXNbJ2VudGVyJ10pe1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSB0aGlzLmdldEN1cnNvclBvc2l0aW9uKCkucm93O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1Jvd1Zpc2libGUocm93KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9MaW5lKHJvdywgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKipAdHlwZSB7R3V0dGVyS2V5Ym9hcmRIYW5kbGVyfSovXG4gICAgICAgICAgICB2YXIgZ3V0dGVyS2V5Ym9hcmRIYW5kbGVyO1xuXG4gICAgICAgICAgICAvLyBJZiBrZXlib2FyZCBhMTF5IG1vZGUgaXMgZW5hYmxlZCB3ZTpcbiAgICAgICAgICAgIC8vIC0gRW5hYmxlIGtleWJvYXJkIG9wZXJhYmlsaXR5IGd1dHRlci5cbiAgICAgICAgICAgIC8vIC0gUHJldmVudCB0YWItdHJhcHBpbmcuXG4gICAgICAgICAgICAvLyAtIEhpZGUgaXJyZWxldmFudCBlbGVtZW50cyBmcm9tIGFzc2lzdGl2ZSB0ZWNobm9sb2d5LlxuICAgICAgICAgICAgLy8gLSBPbiBXaW5kb3dzLCBzZXQgbW9yZSBsaW5lcyB0byB0aGUgdGV4dGFyZWEuXG4gICAgICAgICAgICAvLyAtIHNldCBhcmlhLWxhYmVsIHRvIHRoZSB0ZXh0IGlucHV0LlxuICAgICAgICAgICAgaWYgKHZhbHVlKXtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmVuYWJsZUtleWJvYXJkQWNjZXNzaWJpbGl0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5rZXlib2FyZEZvY3VzQ2xhc3NOYW1lID0gXCJhY2Vfa2V5Ym9hcmQtZm9jdXNcIjtcblxuICAgICAgICAgICAgICAgIHRoaXMudGV4dElucHV0LmdldEVsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCAtMSk7XG4gICAgICAgICAgICAgICAgLy8gVm9pY2VPdmVyIG9uIE1hYyBPUyB3b3JrcyBiZXN0IHdpdGggc2luZ2xlIGxpbmUgaW4gdGhlIHRleHRhcmVhLCB0aGUgc2NyZWVuIHJlYWRlcnMgb25cbiAgICAgICAgICAgICAgICAvLyBXaW5kb3dzIHdvcmsgYmVzdCB3aXRoIG11bHRpcGxlIGxpbmVzIGluIHRoZSB0ZXh0YXJlYS5cbiAgICAgICAgICAgICAgICB0aGlzLnRleHRJbnB1dC5zZXROdW1iZXJPZkV4dHJhTGluZXModXNlcmFnZW50LmlzV2luID8gMyA6IDApO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsZXIuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zY3JvbGxlci5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiZ3JvdXBcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zY3JvbGxlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLXJvbGVkZXNjcmlwdGlvblwiLCBubHMoXCJlZGl0b3Iuc2Nyb2xsZXIuYXJpYS1yb2xlZGVzY3JpcHRpb25cIiwgXCJlZGl0b3JcIikpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsZXIuY2xhc3NMaXN0LmFkZCh0aGlzLnJlbmRlcmVyLmtleWJvYXJkRm9jdXNDbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBubHMoXCJlZGl0b3Iuc2Nyb2xsZXIuYXJpYS1sYWJlbFwiLCBcIkVkaXRvciBjb250ZW50LCBwcmVzcyBFbnRlciB0byBzdGFydCBlZGl0aW5nLCBwcmVzcyBFc2NhcGUgdG8gZXhpdFwiKVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmb2N1c09uRW50ZXJLZXl1cC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRzLmFkZENvbW1hbmQoYmx1ckNvbW1hbmQpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci4kZ3V0dGVyLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuJGd1dHRlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci4kZ3V0dGVyLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJncm91cFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLiRndXR0ZXIuc2V0QXR0cmlidXRlKFwiYXJpYS1yb2xlZGVzY3JpcHRpb25cIiwgbmxzKFwiZWRpdG9yLmd1dHRlci5hcmlhLXJvbGVkZXNjcmlwdGlvblwiLCBcImVkaXRvclwiKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci4kZ3V0dGVyLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgbmxzKFwiZWRpdG9yLmd1dHRlci5hcmlhLWxhYmVsXCIsIFwiRWRpdG9yIGd1dHRlciwgcHJlc3MgRW50ZXIgdG8gaW50ZXJhY3Qgd2l0aCBjb250cm9scyB1c2luZyBhcnJvdyBrZXlzLCBwcmVzcyBFc2NhcGUgdG8gZXhpdFwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci4kZ3V0dGVyLmNsYXNzTGlzdC5hZGQodGhpcy5yZW5kZXJlci5rZXlib2FyZEZvY3VzQ2xhc3NOYW1lKTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY29udGVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGlmICghZ3V0dGVyS2V5Ym9hcmRIYW5kbGVyKVxuICAgICAgICAgICAgICAgICAgICBndXR0ZXJLZXlib2FyZEhhbmRsZXIgPSBuZXcgR3V0dGVyS2V5Ym9hcmRIYW5kbGVyKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgZ3V0dGVyS2V5Ym9hcmRIYW5kbGVyLmFkZExpc3RlbmVyKCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRleHRJbnB1dC5zZXRBcmlhT3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgIHNldExhYmVsOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZW5hYmxlS2V5Ym9hcmRBY2Nlc3NpYmlsaXR5ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnRleHRJbnB1dC5nZXRFbGVtZW50KCkuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0SW5wdXQuc2V0TnVtYmVyT2ZFeHRyYUxpbmVzKDApO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsZXIuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgLTEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsZXIucmVtb3ZlQXR0cmlidXRlKFwicm9sZVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbGVyLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtcm9sZWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsZXIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnJlbmRlcmVyLmtleWJvYXJkRm9jdXNDbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsZXIucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2Nyb2xsZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZvY3VzT25FbnRlcktleXVwLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWFuZHMucmVtb3ZlQ29tbWFuZChibHVyQ29tbWFuZCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNvbnRlbnQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLiRndXR0ZXIuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgLTEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuJGd1dHRlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLiRndXR0ZXIucmVtb3ZlQXR0cmlidXRlKFwicm9sZVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLiRndXR0ZXIucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1yb2xlZGVzY3JpcHRpb25cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci4kZ3V0dGVyLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci4kZ3V0dGVyLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5yZW5kZXJlci5rZXlib2FyZEZvY3VzQ2xhc3NOYW1lKTtcblxuICAgICAgICAgICAgICAgIGlmIChndXR0ZXJLZXlib2FyZEhhbmRsZXIpXG4gICAgICAgICAgICAgICAgICAgIGd1dHRlcktleWJvYXJkSGFuZGxlci5yZW1vdmVMaXN0ZW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IGZhbHNlXG4gICAgfSxcbiAgICB0ZXh0SW5wdXRBcmlhTGFiZWw6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHsgdGhpcy4kdGV4dElucHV0QXJpYUxhYmVsID0gdmFsOyB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IFwiXCJcbiAgICB9LFxuICAgIGVuYWJsZU1vYmlsZU1lbnU6IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkgeyB0aGlzLiRlbmFibGVNb2JpbGVNZW51ID0gdmFsOyB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IHRydWVcbiAgICB9LFxuICAgIGN1c3RvbVNjcm9sbGJhcjogXCJyZW5kZXJlclwiLFxuICAgIGhTY3JvbGxCYXJBbHdheXNWaXNpYmxlOiBcInJlbmRlcmVyXCIsXG4gICAgdlNjcm9sbEJhckFsd2F5c1Zpc2libGU6IFwicmVuZGVyZXJcIixcbiAgICBoaWdobGlnaHRHdXR0ZXJMaW5lOiBcInJlbmRlcmVyXCIsXG4gICAgYW5pbWF0ZWRTY3JvbGw6IFwicmVuZGVyZXJcIixcbiAgICBzaG93SW52aXNpYmxlczogXCJyZW5kZXJlclwiLFxuICAgIHNob3dQcmludE1hcmdpbjogXCJyZW5kZXJlclwiLFxuICAgIHByaW50TWFyZ2luQ29sdW1uOiBcInJlbmRlcmVyXCIsXG4gICAgcHJpbnRNYXJnaW46IFwicmVuZGVyZXJcIixcbiAgICBmYWRlRm9sZFdpZGdldHM6IFwicmVuZGVyZXJcIixcbiAgICBzaG93Rm9sZFdpZGdldHM6IFwicmVuZGVyZXJcIixcbiAgICBkaXNwbGF5SW5kZW50R3VpZGVzOiBcInJlbmRlcmVyXCIsXG4gICAgaGlnaGxpZ2h0SW5kZW50R3VpZGVzOiBcInJlbmRlcmVyXCIsXG4gICAgc2hvd0d1dHRlcjogXCJyZW5kZXJlclwiLFxuICAgIGZvbnRTaXplOiBcInJlbmRlcmVyXCIsXG4gICAgZm9udEZhbWlseTogXCJyZW5kZXJlclwiLFxuICAgIG1heExpbmVzOiBcInJlbmRlcmVyXCIsXG4gICAgbWluTGluZXM6IFwicmVuZGVyZXJcIixcbiAgICBzY3JvbGxQYXN0RW5kOiBcInJlbmRlcmVyXCIsXG4gICAgZml4ZWRXaWR0aEd1dHRlcjogXCJyZW5kZXJlclwiLFxuICAgIHRoZW1lOiBcInJlbmRlcmVyXCIsXG4gICAgaGFzQ3NzVHJhbnNmb3JtczogXCJyZW5kZXJlclwiLFxuICAgIG1heFBpeGVsSGVpZ2h0OiBcInJlbmRlcmVyXCIsXG4gICAgdXNlVGV4dGFyZWFGb3JJTUU6IFwicmVuZGVyZXJcIixcbiAgICB1c2VSZXNpemVPYnNlcnZlcjogXCJyZW5kZXJlclwiLFxuICAgIHVzZVN2Z0d1dHRlckljb25zOiBcInJlbmRlcmVyXCIsXG4gICAgc2hvd0ZvbGRlZEFubm90YXRpb25zOiBcInJlbmRlcmVyXCIsXG5cbiAgICBzY3JvbGxTcGVlZDogXCIkbW91c2VIYW5kbGVyXCIsXG4gICAgZHJhZ0RlbGF5OiBcIiRtb3VzZUhhbmRsZXJcIixcbiAgICBkcmFnRW5hYmxlZDogXCIkbW91c2VIYW5kbGVyXCIsXG4gICAgZm9jdXNUaW1lb3V0OiBcIiRtb3VzZUhhbmRsZXJcIixcbiAgICB0b29sdGlwRm9sbG93c01vdXNlOiBcIiRtb3VzZUhhbmRsZXJcIixcblxuICAgIGZpcnN0TGluZU51bWJlcjogXCJzZXNzaW9uXCIsXG4gICAgb3ZlcndyaXRlOiBcInNlc3Npb25cIixcbiAgICBuZXdMaW5lTW9kZTogXCJzZXNzaW9uXCIsXG4gICAgdXNlV29ya2VyOiBcInNlc3Npb25cIixcbiAgICB1c2VTb2Z0VGFiczogXCJzZXNzaW9uXCIsXG4gICAgbmF2aWdhdGVXaXRoaW5Tb2Z0VGFiczogXCJzZXNzaW9uXCIsXG4gICAgdGFiU2l6ZTogXCJzZXNzaW9uXCIsXG4gICAgd3JhcDogXCJzZXNzaW9uXCIsXG4gICAgaW5kZW50ZWRTb2Z0V3JhcDogXCJzZXNzaW9uXCIsXG4gICAgZm9sZFN0eWxlOiBcInNlc3Npb25cIixcbiAgICBtb2RlOiBcInNlc3Npb25cIlxufSk7XG5cblxudmFyIHJlbGF0aXZlTnVtYmVyUmVuZGVyZXIgPSB7XG4gICAgZ2V0VGV4dDogZnVuY3Rpb24oLyoqQHR5cGV7RWRpdFNlc3Npb259Ki9zZXNzaW9uLCAvKipAdHlwZXtudW1iZXJ9Ki9yb3cpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLmFicyhzZXNzaW9uLnNlbGVjdGlvbi5sZWFkLnJvdyAtIHJvdykgfHwgKHJvdyArIDEgKyAocm93IDwgOSA/IFwiXFx4YjdcIiA6IFwiXCIpKSkgKyBcIlwiO1xuICAgIH0sXG4gICAgZ2V0V2lkdGg6IGZ1bmN0aW9uKHNlc3Npb24sIC8qKkB0eXBle251bWJlcn0qL2xhc3RMaW5lTnVtYmVyLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgICAgICAgbGFzdExpbmVOdW1iZXIudG9TdHJpbmcoKS5sZW5ndGgsXG4gICAgICAgICAgICAoY29uZmlnLmxhc3RSb3cgKyAxKS50b1N0cmluZygpLmxlbmd0aCxcbiAgICAgICAgICAgIDJcbiAgICAgICAgKSAqIGNvbmZpZy5jaGFyYWN0ZXJXaWR0aDtcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24oZSwgLyoqQHR5cGV7RWRpdG9yfSovZWRpdG9yKSB7XG4gICAgICAgIGVkaXRvci5yZW5kZXJlci4kbG9vcC5zY2hlZHVsZShlZGl0b3IucmVuZGVyZXIuQ0hBTkdFX0dVVFRFUik7XG4gICAgfSxcbiAgICBhdHRhY2g6IGZ1bmN0aW9uKC8qKkB0eXBle0VkaXRvcn0qL2VkaXRvcikge1xuICAgICAgICBlZGl0b3IucmVuZGVyZXIuJGd1dHRlckxheWVyLiRyZW5kZXJlciA9IHRoaXM7XG4gICAgICAgIGVkaXRvci5vbihcImNoYW5nZVNlbGVjdGlvblwiLCB0aGlzLnVwZGF0ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlKG51bGwsIGVkaXRvcik7XG4gICAgfSxcbiAgICBkZXRhY2g6IGZ1bmN0aW9uKC8qKkB0eXBle0VkaXRvcn0qL2VkaXRvcikge1xuICAgICAgICBpZiAoZWRpdG9yLnJlbmRlcmVyLiRndXR0ZXJMYXllci4kcmVuZGVyZXIgPT0gdGhpcylcbiAgICAgICAgICAgIGVkaXRvci5yZW5kZXJlci4kZ3V0dGVyTGF5ZXIuJHJlbmRlcmVyID0gbnVsbDtcbiAgICAgICAgZWRpdG9yLm9mZihcImNoYW5nZVNlbGVjdGlvblwiLCB0aGlzLnVwZGF0ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlKG51bGwsIGVkaXRvcik7XG4gICAgfVxufTtcbmV4cG9ydHMuRWRpdG9yID0gRWRpdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/editor.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/ext/error_marker.js":
/*!*******************************************************!*\
  !*** ./node_modules/ace-code/src/ext/error_marker.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar nls = (__webpack_require__(/*! ../config */ \"./node_modules/ace-code/src/config.js\").nls);\n\nfunction binarySearch(array, needle, comparator) {\n    var first = 0;\n    var last = array.length - 1;\n\n    while (first <= last) {\n        var mid = (first + last) >> 1;\n        var c = comparator(needle, array[mid]);\n        if (c > 0)\n            first = mid + 1;\n        else if (c < 0)\n            last = mid - 1;\n        else\n            return mid;\n    }\n\n    // Return the nearest lesser index, \"-1\" means \"0, \"-2\" means \"1\", etc.\n    return -(first + 1);\n}\n\n/**\n * @param {import(\"../edit_session\").EditSession} session\n * @param {number} row\n * @param {number} dir\n */\nfunction findAnnotations(session, row, dir) {\n    var annotations = session.getAnnotations().sort(Range.comparePoints);\n    if (!annotations.length)\n        return;\n    \n    var i = binarySearch(annotations, {row: row, column: -1}, Range.comparePoints);\n    if (i < 0)\n        i = -i - 1;\n    \n    if (i >= annotations.length)\n        i = dir > 0 ? 0 : annotations.length - 1;\n    else if (i === 0 && dir < 0)\n        i = annotations.length - 1;\n    \n    var annotation = annotations[i];\n    if (!annotation || !dir)\n        return;\n\n    if (annotation.row === row) {\n        do {\n            annotation = annotations[i += dir];\n        } while (annotation && annotation.row === row);\n        if (!annotation)\n            return annotations.slice();\n    }\n    \n    \n    var matched = [];\n    row = annotation.row;\n    do {\n        matched[dir < 0 ? \"unshift\" : \"push\"](annotation);\n        annotation = annotations[i += dir];\n    } while (annotation && annotation.row == row);\n    return matched.length && matched;\n}\n\n/**\n * @param {import(\"../editor\").Editor} editor\n * @param {number} dir\n */\nexports.showErrorMarker = function(editor, dir) {\n    var session = editor.session;\n    var pos = editor.getCursorPosition();\n    var row = pos.row;\n    var oldWidget = session.widgetManager.getWidgetsAtRow(row).filter(function(w) {\n        return w.type == \"errorMarker\";\n    })[0];\n    if (oldWidget) {\n        oldWidget.destroy();\n    } else {\n        row -= dir;\n    }\n    var annotations = findAnnotations(session, row, dir);\n    var gutterAnno;\n    if (annotations) {\n        var annotation = annotations[0];\n        pos.column = (annotation.pos && typeof annotation.column != \"number\"\n            ? annotation.pos.sc\n            : annotation.column) || 0;\n        pos.row = annotation.row;\n        gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];\n    } else if (oldWidget) {\n        return;\n    } else {\n        gutterAnno = {\n            displayText: [nls(\"error-marker.good-state\", \"Looks good!\")],\n            className: \"ace_ok\"\n        };\n    }\n    editor.session.unfold(pos.row);\n    editor.selection.moveToPosition(pos);\n    \n    var w = {\n        row: pos.row, \n        fixedWidth: true,\n        coverGutter: true,\n        el: dom.createElement(\"div\"),\n        type: \"errorMarker\"\n    };\n    var el = w.el.appendChild(dom.createElement(\"div\"));\n    var arrow = w.el.appendChild(dom.createElement(\"div\"));\n    arrow.className = \"error_widget_arrow \" + gutterAnno.className;\n    \n    var left = editor.renderer.$cursorLayer\n        .getPixelPosition(pos).left;\n    arrow.style.left = left + editor.renderer.gutterWidth - 5 + \"px\";\n    \n    w.el.className = \"error_widget_wrapper\";\n    el.className = \"error_widget \" + gutterAnno.className;\n    gutterAnno.displayText.forEach(function (annoTextLine, i) {\n        el.appendChild(dom.createTextNode(annoTextLine));\n        if (i < gutterAnno.displayText.length - 1) {\n            el.appendChild(dom.createElement(\"br\"));\n        }\n    });\n    \n    el.appendChild(dom.createElement(\"div\"));\n    \n    var kb = function(_, hashId, keyString) {\n        if (hashId === 0 && (keyString === \"esc\" || keyString === \"return\")) {\n            w.destroy();\n            return {command: \"null\"};\n        }\n    };\n    \n    w.destroy = function() {\n        if (editor.$mouseHandler.isMousePressed)\n            return;\n        // @ts-ignore\n        editor.keyBinding.removeKeyboardHandler(kb);\n        session.widgetManager.removeLineWidget(w);\n        editor.off(\"changeSelection\", w.destroy);\n        editor.off(\"changeSession\", w.destroy);\n        editor.off(\"mouseup\", w.destroy);\n        editor.off(\"change\", w.destroy);\n    };\n\n    // @ts-ignore\n    editor.keyBinding.addKeyboardHandler(kb);\n    editor.on(\"changeSelection\", w.destroy);\n    editor.on(\"changeSession\", w.destroy);\n    editor.on(\"mouseup\", w.destroy);\n    editor.on(\"change\", w.destroy);\n    \n    editor.session.widgetManager.addLineWidget(w);\n    \n    w.el.onmousedown = editor.focus.bind(editor);\n    \n    editor.renderer.scrollCursorIntoView(null, 0.5, {bottom: w.el.offsetHeight});\n};\n\n\ndom.importCssString(`\n    .error_widget_wrapper {\n        background: inherit;\n        color: inherit;\n        border:none\n    }\n    .error_widget {\n        border-top: solid 2px;\n        border-bottom: solid 2px;\n        margin: 5px 0;\n        padding: 10px 40px;\n        white-space: pre-wrap;\n    }\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\n        border-color: #ff5a5a\n    }\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\n        border-color: #F1D817\n    }\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\n        border-color: #5a5a5a\n    }\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\n        border-color: #5aaa5a\n    }\n    .error_widget_arrow {\n        position: absolute;\n        border: solid 5px;\n        border-top-color: transparent!important;\n        border-right-color: transparent!important;\n        border-left-color: transparent!important;\n        top: -5px;\n    }\n`, \"error_marker.css\", false);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2V4dC9lcnJvcl9tYXJrZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixVQUFVLG1CQUFPLENBQUMsMERBQVk7QUFDOUIsWUFBWSxtRkFBeUI7QUFDckMsVUFBVSxtRkFBd0I7O0FBRWxDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLHVDQUF1QztBQUNsRCxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxxQkFBcUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBLFdBQVcsNEJBQTRCO0FBQ3ZDLFdBQVcsUUFBUTtBQUNuQjtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCwwQkFBMEI7QUFDL0U7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvZXh0L2Vycm9yX21hcmtlci5qcz80YzgxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIGRvbSA9IHJlcXVpcmUoXCIuLi9saWIvZG9tXCIpO1xudmFyIFJhbmdlID0gcmVxdWlyZShcIi4uL3JhbmdlXCIpLlJhbmdlO1xudmFyIG5scyA9IHJlcXVpcmUoXCIuLi9jb25maWdcIikubmxzO1xuXG5mdW5jdGlvbiBiaW5hcnlTZWFyY2goYXJyYXksIG5lZWRsZSwgY29tcGFyYXRvcikge1xuICAgIHZhciBmaXJzdCA9IDA7XG4gICAgdmFyIGxhc3QgPSBhcnJheS5sZW5ndGggLSAxO1xuXG4gICAgd2hpbGUgKGZpcnN0IDw9IGxhc3QpIHtcbiAgICAgICAgdmFyIG1pZCA9IChmaXJzdCArIGxhc3QpID4+IDE7XG4gICAgICAgIHZhciBjID0gY29tcGFyYXRvcihuZWVkbGUsIGFycmF5W21pZF0pO1xuICAgICAgICBpZiAoYyA+IDApXG4gICAgICAgICAgICBmaXJzdCA9IG1pZCArIDE7XG4gICAgICAgIGVsc2UgaWYgKGMgPCAwKVxuICAgICAgICAgICAgbGFzdCA9IG1pZCAtIDE7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBtaWQ7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBuZWFyZXN0IGxlc3NlciBpbmRleCwgXCItMVwiIG1lYW5zIFwiMCwgXCItMlwiIG1lYW5zIFwiMVwiLCBldGMuXG4gICAgcmV0dXJuIC0oZmlyc3QgKyAxKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2VkaXRfc2Vzc2lvblwiKS5FZGl0U2Vzc2lvbn0gc2Vzc2lvblxuICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICogQHBhcmFtIHtudW1iZXJ9IGRpclxuICovXG5mdW5jdGlvbiBmaW5kQW5ub3RhdGlvbnMoc2Vzc2lvbiwgcm93LCBkaXIpIHtcbiAgICB2YXIgYW5ub3RhdGlvbnMgPSBzZXNzaW9uLmdldEFubm90YXRpb25zKCkuc29ydChSYW5nZS5jb21wYXJlUG9pbnRzKTtcbiAgICBpZiAoIWFubm90YXRpb25zLmxlbmd0aClcbiAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgIHZhciBpID0gYmluYXJ5U2VhcmNoKGFubm90YXRpb25zLCB7cm93OiByb3csIGNvbHVtbjogLTF9LCBSYW5nZS5jb21wYXJlUG9pbnRzKTtcbiAgICBpZiAoaSA8IDApXG4gICAgICAgIGkgPSAtaSAtIDE7XG4gICAgXG4gICAgaWYgKGkgPj0gYW5ub3RhdGlvbnMubGVuZ3RoKVxuICAgICAgICBpID0gZGlyID4gMCA/IDAgOiBhbm5vdGF0aW9ucy5sZW5ndGggLSAxO1xuICAgIGVsc2UgaWYgKGkgPT09IDAgJiYgZGlyIDwgMClcbiAgICAgICAgaSA9IGFubm90YXRpb25zLmxlbmd0aCAtIDE7XG4gICAgXG4gICAgdmFyIGFubm90YXRpb24gPSBhbm5vdGF0aW9uc1tpXTtcbiAgICBpZiAoIWFubm90YXRpb24gfHwgIWRpcilcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgaWYgKGFubm90YXRpb24ucm93ID09PSByb3cpIHtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgYW5ub3RhdGlvbiA9IGFubm90YXRpb25zW2kgKz0gZGlyXTtcbiAgICAgICAgfSB3aGlsZSAoYW5ub3RhdGlvbiAmJiBhbm5vdGF0aW9uLnJvdyA9PT0gcm93KTtcbiAgICAgICAgaWYgKCFhbm5vdGF0aW9uKVxuICAgICAgICAgICAgcmV0dXJuIGFubm90YXRpb25zLnNsaWNlKCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIHZhciBtYXRjaGVkID0gW107XG4gICAgcm93ID0gYW5ub3RhdGlvbi5yb3c7XG4gICAgZG8ge1xuICAgICAgICBtYXRjaGVkW2RpciA8IDAgPyBcInVuc2hpZnRcIiA6IFwicHVzaFwiXShhbm5vdGF0aW9uKTtcbiAgICAgICAgYW5ub3RhdGlvbiA9IGFubm90YXRpb25zW2kgKz0gZGlyXTtcbiAgICB9IHdoaWxlIChhbm5vdGF0aW9uICYmIGFubm90YXRpb24ucm93ID09IHJvdyk7XG4gICAgcmV0dXJuIG1hdGNoZWQubGVuZ3RoICYmIG1hdGNoZWQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9lZGl0b3JcIikuRWRpdG9yfSBlZGl0b3JcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXJcbiAqL1xuZXhwb3J0cy5zaG93RXJyb3JNYXJrZXIgPSBmdW5jdGlvbihlZGl0b3IsIGRpcikge1xuICAgIHZhciBzZXNzaW9uID0gZWRpdG9yLnNlc3Npb247XG4gICAgdmFyIHBvcyA9IGVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpO1xuICAgIHZhciByb3cgPSBwb3Mucm93O1xuICAgIHZhciBvbGRXaWRnZXQgPSBzZXNzaW9uLndpZGdldE1hbmFnZXIuZ2V0V2lkZ2V0c0F0Um93KHJvdykuZmlsdGVyKGZ1bmN0aW9uKHcpIHtcbiAgICAgICAgcmV0dXJuIHcudHlwZSA9PSBcImVycm9yTWFya2VyXCI7XG4gICAgfSlbMF07XG4gICAgaWYgKG9sZFdpZGdldCkge1xuICAgICAgICBvbGRXaWRnZXQuZGVzdHJveSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJvdyAtPSBkaXI7XG4gICAgfVxuICAgIHZhciBhbm5vdGF0aW9ucyA9IGZpbmRBbm5vdGF0aW9ucyhzZXNzaW9uLCByb3csIGRpcik7XG4gICAgdmFyIGd1dHRlckFubm87XG4gICAgaWYgKGFubm90YXRpb25zKSB7XG4gICAgICAgIHZhciBhbm5vdGF0aW9uID0gYW5ub3RhdGlvbnNbMF07XG4gICAgICAgIHBvcy5jb2x1bW4gPSAoYW5ub3RhdGlvbi5wb3MgJiYgdHlwZW9mIGFubm90YXRpb24uY29sdW1uICE9IFwibnVtYmVyXCJcbiAgICAgICAgICAgID8gYW5ub3RhdGlvbi5wb3Muc2NcbiAgICAgICAgICAgIDogYW5ub3RhdGlvbi5jb2x1bW4pIHx8IDA7XG4gICAgICAgIHBvcy5yb3cgPSBhbm5vdGF0aW9uLnJvdztcbiAgICAgICAgZ3V0dGVyQW5ubyA9IGVkaXRvci5yZW5kZXJlci4kZ3V0dGVyTGF5ZXIuJGFubm90YXRpb25zW3Bvcy5yb3ddO1xuICAgIH0gZWxzZSBpZiAob2xkV2lkZ2V0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBndXR0ZXJBbm5vID0ge1xuICAgICAgICAgICAgZGlzcGxheVRleHQ6IFtubHMoXCJlcnJvci1tYXJrZXIuZ29vZC1zdGF0ZVwiLCBcIkxvb2tzIGdvb2QhXCIpXSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJhY2Vfb2tcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICBlZGl0b3Iuc2Vzc2lvbi51bmZvbGQocG9zLnJvdyk7XG4gICAgZWRpdG9yLnNlbGVjdGlvbi5tb3ZlVG9Qb3NpdGlvbihwb3MpO1xuICAgIFxuICAgIHZhciB3ID0ge1xuICAgICAgICByb3c6IHBvcy5yb3csIFxuICAgICAgICBmaXhlZFdpZHRoOiB0cnVlLFxuICAgICAgICBjb3Zlckd1dHRlcjogdHJ1ZSxcbiAgICAgICAgZWw6IGRvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICB0eXBlOiBcImVycm9yTWFya2VyXCJcbiAgICB9O1xuICAgIHZhciBlbCA9IHcuZWwuYXBwZW5kQ2hpbGQoZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgIHZhciBhcnJvdyA9IHcuZWwuYXBwZW5kQ2hpbGQoZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgIGFycm93LmNsYXNzTmFtZSA9IFwiZXJyb3Jfd2lkZ2V0X2Fycm93IFwiICsgZ3V0dGVyQW5uby5jbGFzc05hbWU7XG4gICAgXG4gICAgdmFyIGxlZnQgPSBlZGl0b3IucmVuZGVyZXIuJGN1cnNvckxheWVyXG4gICAgICAgIC5nZXRQaXhlbFBvc2l0aW9uKHBvcykubGVmdDtcbiAgICBhcnJvdy5zdHlsZS5sZWZ0ID0gbGVmdCArIGVkaXRvci5yZW5kZXJlci5ndXR0ZXJXaWR0aCAtIDUgKyBcInB4XCI7XG4gICAgXG4gICAgdy5lbC5jbGFzc05hbWUgPSBcImVycm9yX3dpZGdldF93cmFwcGVyXCI7XG4gICAgZWwuY2xhc3NOYW1lID0gXCJlcnJvcl93aWRnZXQgXCIgKyBndXR0ZXJBbm5vLmNsYXNzTmFtZTtcbiAgICBndXR0ZXJBbm5vLmRpc3BsYXlUZXh0LmZvckVhY2goZnVuY3Rpb24gKGFubm9UZXh0TGluZSwgaSkge1xuICAgICAgICBlbC5hcHBlbmRDaGlsZChkb20uY3JlYXRlVGV4dE5vZGUoYW5ub1RleHRMaW5lKSk7XG4gICAgICAgIGlmIChpIDwgZ3V0dGVyQW5uby5kaXNwbGF5VGV4dC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChkb20uY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGVsLmFwcGVuZENoaWxkKGRvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICBcbiAgICB2YXIga2IgPSBmdW5jdGlvbihfLCBoYXNoSWQsIGtleVN0cmluZykge1xuICAgICAgICBpZiAoaGFzaElkID09PSAwICYmIChrZXlTdHJpbmcgPT09IFwiZXNjXCIgfHwga2V5U3RyaW5nID09PSBcInJldHVyblwiKSkge1xuICAgICAgICAgICAgdy5kZXN0cm95KCk7XG4gICAgICAgICAgICByZXR1cm4ge2NvbW1hbmQ6IFwibnVsbFwifTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdy5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChlZGl0b3IuJG1vdXNlSGFuZGxlci5pc01vdXNlUHJlc3NlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBlZGl0b3Iua2V5QmluZGluZy5yZW1vdmVLZXlib2FyZEhhbmRsZXIoa2IpO1xuICAgICAgICBzZXNzaW9uLndpZGdldE1hbmFnZXIucmVtb3ZlTGluZVdpZGdldCh3KTtcbiAgICAgICAgZWRpdG9yLm9mZihcImNoYW5nZVNlbGVjdGlvblwiLCB3LmRlc3Ryb3kpO1xuICAgICAgICBlZGl0b3Iub2ZmKFwiY2hhbmdlU2Vzc2lvblwiLCB3LmRlc3Ryb3kpO1xuICAgICAgICBlZGl0b3Iub2ZmKFwibW91c2V1cFwiLCB3LmRlc3Ryb3kpO1xuICAgICAgICBlZGl0b3Iub2ZmKFwiY2hhbmdlXCIsIHcuZGVzdHJveSk7XG4gICAgfTtcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBlZGl0b3Iua2V5QmluZGluZy5hZGRLZXlib2FyZEhhbmRsZXIoa2IpO1xuICAgIGVkaXRvci5vbihcImNoYW5nZVNlbGVjdGlvblwiLCB3LmRlc3Ryb3kpO1xuICAgIGVkaXRvci5vbihcImNoYW5nZVNlc3Npb25cIiwgdy5kZXN0cm95KTtcbiAgICBlZGl0b3Iub24oXCJtb3VzZXVwXCIsIHcuZGVzdHJveSk7XG4gICAgZWRpdG9yLm9uKFwiY2hhbmdlXCIsIHcuZGVzdHJveSk7XG4gICAgXG4gICAgZWRpdG9yLnNlc3Npb24ud2lkZ2V0TWFuYWdlci5hZGRMaW5lV2lkZ2V0KHcpO1xuICAgIFxuICAgIHcuZWwub25tb3VzZWRvd24gPSBlZGl0b3IuZm9jdXMuYmluZChlZGl0b3IpO1xuICAgIFxuICAgIGVkaXRvci5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldyhudWxsLCAwLjUsIHtib3R0b206IHcuZWwub2Zmc2V0SGVpZ2h0fSk7XG59O1xuXG5cbmRvbS5pbXBvcnRDc3NTdHJpbmcoYFxuICAgIC5lcnJvcl93aWRnZXRfd3JhcHBlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IGluaGVyaXQ7XG4gICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgICAgICBib3JkZXI6bm9uZVxuICAgIH1cbiAgICAuZXJyb3Jfd2lkZ2V0IHtcbiAgICAgICAgYm9yZGVyLXRvcDogc29saWQgMnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiBzb2xpZCAycHg7XG4gICAgICAgIG1hcmdpbjogNXB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggNDBweDtcbiAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgIH1cbiAgICAuZXJyb3Jfd2lkZ2V0LmFjZV9lcnJvciwgLmVycm9yX3dpZGdldF9hcnJvdy5hY2VfZXJyb3J7XG4gICAgICAgIGJvcmRlci1jb2xvcjogI2ZmNWE1YVxuICAgIH1cbiAgICAuZXJyb3Jfd2lkZ2V0LmFjZV93YXJuaW5nLCAuZXJyb3Jfd2lkZ2V0X2Fycm93LmFjZV93YXJuaW5ne1xuICAgICAgICBib3JkZXItY29sb3I6ICNGMUQ4MTdcbiAgICB9XG4gICAgLmVycm9yX3dpZGdldC5hY2VfaW5mbywgLmVycm9yX3dpZGdldF9hcnJvdy5hY2VfaW5mb3tcbiAgICAgICAgYm9yZGVyLWNvbG9yOiAjNWE1YTVhXG4gICAgfVxuICAgIC5lcnJvcl93aWRnZXQuYWNlX29rLCAuZXJyb3Jfd2lkZ2V0X2Fycm93LmFjZV9va3tcbiAgICAgICAgYm9yZGVyLWNvbG9yOiAjNWFhYTVhXG4gICAgfVxuICAgIC5lcnJvcl93aWRnZXRfYXJyb3cge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGJvcmRlcjogc29saWQgNXB4O1xuICAgICAgICBib3JkZXItdG9wLWNvbG9yOiB0cmFuc3BhcmVudCFpbXBvcnRhbnQ7XG4gICAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQhaW1wb3J0YW50O1xuICAgICAgICBib3JkZXItbGVmdC1jb2xvcjogdHJhbnNwYXJlbnQhaW1wb3J0YW50O1xuICAgICAgICB0b3A6IC01cHg7XG4gICAgfVxuYCwgXCJlcnJvcl9tYXJrZXIuY3NzXCIsIGZhbHNlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/ext/error_marker.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/keyboard/gutter_handler.js":
/*!**************************************************************!*\
  !*** ./node_modules/ace-code/src/keyboard/gutter_handler.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar keys = __webpack_require__(/*! ../lib/keys */ \"./node_modules/ace-code/src/lib/keys.js\");\nvar GutterTooltip = (__webpack_require__(/*! ../mouse/default_gutter_handler */ \"./node_modules/ace-code/src/mouse/default_gutter_handler.js\").GutterTooltip);\n\nclass GutterKeyboardHandler {\n    constructor(editor) {\n        this.editor = editor;\n        this.gutterLayer = editor.renderer.$gutterLayer;\n        this.element = editor.renderer.$gutter;\n        this.lines = editor.renderer.$gutterLayer.$lines;\n\n        this.activeRowIndex = null;\n        this.activeLane = null;\n\n        this.annotationTooltip = new GutterTooltip(this.editor);\n    }\n\n    addListener() {\n        this.element.addEventListener(\"keydown\", this.$onGutterKeyDown.bind(this));\n        this.element.addEventListener(\"focusout\", this.$blurGutter.bind(this));\n        this.editor.on(\"mousewheel\", this.$blurGutter.bind(this));\n    }\n\n    removeListener() {\n        this.element.removeEventListener(\"keydown\", this.$onGutterKeyDown.bind(this));\n        this.element.removeEventListener(\"focusout\", this.$blurGutter.bind(this));\n        this.editor.off(\"mousewheel\", this.$blurGutter.bind(this));\n    }\n\n    $onGutterKeyDown(e) {\n        // if the tooltip is open, we only want to respond to commands to close it (like a modal)\n        if (this.annotationTooltip.isOpen) {\n            e.preventDefault();\n\n            if (e.keyCode === keys[\"escape\"])\n                this.annotationTooltip.hideTooltip();\n\n            return;\n        }\n\n        // If focus is on the gutter element, set focus to nearest gutter icon on enter press.\n        if (e.target === this.element) {\n            if (e.keyCode != keys[\"enter\"]) {return;}\n            e.preventDefault();\n\n            // Scroll if the cursor is not currently within the viewport.\n            var row = this.editor.getCursorPosition().row;       \n            if (!this.editor.isRowVisible(row))\n                this.editor.scrollToLine(row, true, true);\n\n            // After scrolling is completed, find the nearest gutter icon and set focus to it.\n            setTimeout(\n                /** @this {GutterKeyboardHandler} */\n                function () {\n                    var index = this.$rowToRowIndex(this.gutterLayer.$cursorCell.row);\n                    var nearestFoldIndex = this.$findNearestFoldWidget(index);\n                    var nearestAnnotationIndex = this.$findNearestAnnotation(index);\n\n                    if (nearestFoldIndex === null && nearestAnnotationIndex === null) return;\n\n                    if (nearestFoldIndex === null && nearestAnnotationIndex !== null) {\n                        this.activeRowIndex = nearestAnnotationIndex;\n                        this.activeLane = \"annotation\";\n                        this.$focusAnnotation(this.activeRowIndex);\n                        return;\n                    }\n\n                    if (nearestFoldIndex !== null && nearestAnnotationIndex === null) {\n                        this.activeRowIndex = nearestFoldIndex;\n                        this.activeLane = \"fold\";\n                        this.$focusFoldWidget(this.activeRowIndex);\n                        return;\n                    }\n\n                    if (Math.abs(nearestAnnotationIndex - index) < Math.abs(nearestFoldIndex - index)) {\n                        this.activeRowIndex = nearestAnnotationIndex;\n                        this.activeLane = \"annotation\";\n                        this.$focusAnnotation(this.activeRowIndex);\n                        return;\n                    }\n                    else {\n                        this.activeRowIndex = nearestFoldIndex;\n                        this.activeLane = \"fold\";\n                        this.$focusFoldWidget(this.activeRowIndex);\n                        return;\n                    }\n                }.bind(this), 10);\n            return;\n        } \n\n        // After here, foucs is on a gutter icon and we want to interact with them.\n        this.$handleGutterKeyboardInteraction(e);\n\n        // Wait until folding is completed and then signal gutterkeydown to the editor.\n        setTimeout(function() {\n            // Signal to the editor that a key is pressed inside the gutter.\n            this.editor._signal(\"gutterkeydown\", new GutterKeyboardEvent(e, this));\n        }.bind(this), 10);\n    }\n\n    $handleGutterKeyboardInteraction(e) {\n        // Prevent tabbing when interacting with the gutter icons.\n        if (e.keyCode === keys[\"tab\"]){\n            e.preventDefault();\n            return;\n        } \n\n        // If focus is on a gutter icon, set focus to gutter on escape press.\n        if (e.keyCode === keys[\"escape\"]) {\n            e.preventDefault();\n            this.$blurGutter();\n            this.element.focus();\n            this.lane = null;\n            return;\n        }\n\n        if (e.keyCode === keys[\"up\"]) {\n            e.preventDefault();\n  \n            switch (this.activeLane){\n                case \"fold\":\n                    this.$moveFoldWidgetUp();\n                    break;\n                \n                case \"annotation\":\n                    this.$moveAnnotationUp();\n                    break;\n            }\n            return;\n        }\n\n        if (e.keyCode === keys[\"down\"]) {\n            e.preventDefault();\n\n            switch (this.activeLane){\n                case \"fold\":\n                    this.$moveFoldWidgetDown();\n                    break;\n                \n                case \"annotation\":\n                    this.$moveAnnotationDown();\n                    break;\n            }\n            return;\n        }\n\n        // Try to switch from fold widgets to annotations.\n        if (e.keyCode === keys[\"left\"]){\n            e.preventDefault();\n            this.$switchLane(\"annotation\");\n            return;\n        }\n\n        // Try to switch from annotations to fold widgets.\n        if (e.keyCode === keys[\"right\"]){\n            e.preventDefault();\n            this.$switchLane(\"fold\");\n            return;\n        }\n\n        if (e.keyCode === keys[\"enter\"] || e.keyCode === keys[\"space\"]){\n            e.preventDefault();\n\n            switch (this.activeLane) {\n                case \"fold\":\n                    if (this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)] === 'start') {\n                        var rowFoldingWidget = this.$rowIndexToRow(this.activeRowIndex);\n                        this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex), e);\n\n                        // After folding, check that the right fold widget is still in focus.\n                        // If not (e.g. folding close to bottom of doc), put right widget in focus.\n                        setTimeout(\n                            /** @this {GutterKeyboardHandler} */\n                            function () {\n                                if (this.$rowIndexToRow(this.activeRowIndex) !== rowFoldingWidget) {\n                                    this.$blurFoldWidget(this.activeRowIndex);\n                                    this.activeRowIndex = this.$rowToRowIndex(rowFoldingWidget);\n                                    this.$focusFoldWidget(this.activeRowIndex);\n                                }\n                        }.bind(this), 10);\n\n                        break;\n                    } else if (this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)] === 'end') {\n                        /* TO DO: deal with 'end' fold widgets */\n                        break;\n                    }\n                    return; \n                \n                case \"annotation\":\n                    var gutterElement = this.lines.cells[this.activeRowIndex].element.childNodes[2];\n                    var rect = gutterElement.getBoundingClientRect();\n                    var style = this.annotationTooltip.getElement().style;\n                    style.left = rect.right + \"px\";\n                    style.top = rect.bottom + \"px\";\n                    this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));                \n                    break;\n            }\n            return;\n        }   \n    }\n\n    $blurGutter() {\n        if (this.activeRowIndex !== null){\n            switch (this.activeLane){\n                case \"fold\":\n                    this.$blurFoldWidget(this.activeRowIndex);\n                    break;\n\n                case \"annotation\":\n                    this.$blurAnnotation(this.activeRowIndex);\n                    break;\n            }\n        }\n\n        if (this.annotationTooltip.isOpen)\n            this.annotationTooltip.hideTooltip();\n\n        return;\n    }\n\n    $isFoldWidgetVisible(index) {\n        var isRowFullyVisible = this.editor.isRowFullyVisible(this.$rowIndexToRow(index));\n        var isIconVisible = this.$getFoldWidget(index).style.display !== \"none\";\n        return isRowFullyVisible && isIconVisible;\n    }\n\n    $isAnnotationVisible(index) {\n        var isRowFullyVisible = this.editor.isRowFullyVisible(this.$rowIndexToRow(index));\n        var isIconVisible = this.$getAnnotation(index).style.display !== \"none\";\n        return isRowFullyVisible && isIconVisible;\n    }\n\n    $getFoldWidget(index) {\n        var cell = this.lines.get(index);\n        var element = cell.element;\n        return element.childNodes[1];\n    }\n\n    $getAnnotation(index) {\n        var cell = this.lines.get(index);\n        var element = cell.element;\n        return element.childNodes[2];\n    }\n\n    // Given an index, find the nearest index with a foldwidget\n    $findNearestFoldWidget(index) {\n        // If fold widget exists at index, return index.\n        if (this.$isFoldWidgetVisible(index))\n            return index;\n\n        // else, find the nearest index with fold widget within viewport.\n        var i = 0;\n        while (index - i > 0 || index + i < this.lines.getLength() - 1){\n            i++;\n\n            if (index - i >= 0 && this.$isFoldWidgetVisible(index - i))\n                return index - i;\n\n            if (index + i <= this.lines.getLength() - 1 && this.$isFoldWidgetVisible(index + i))\n                return index + i;\n        }\n\n        // If there are no fold widgets within the viewport, return null.\n        return null;\n    }\n\n    // Given an index, find the nearest index with an annotation.\n    $findNearestAnnotation(index) {\n        // If annotation exists at index, return index.\n        if (this.$isAnnotationVisible(index))\n            return index;\n\n        // else, find the nearest index with annotation within viewport.\n        var i = 0;\n        while (index - i > 0 || index + i < this.lines.getLength() - 1){\n            i++;\n\n            if (index - i >= 0 && this.$isAnnotationVisible(index - i))\n                return index - i;\n\n            if (index + i <= this.lines.getLength() - 1 && this.$isAnnotationVisible(index + i))\n                return index + i;\n        }\n\n        // If there are no annotations within the viewport, return null.\n        return null;\n    }\n\n    $focusFoldWidget(index) {\n        if (index == null)\n            return;\n\n        var foldWidget = this.$getFoldWidget(index);\n\n        foldWidget.classList.add(this.editor.renderer.keyboardFocusClassName);\n        foldWidget.focus();\n    }\n\n    $focusAnnotation(index) {\n        if (index == null)\n            return;\n\n        var annotation = this.$getAnnotation(index);\n\n        annotation.classList.add(this.editor.renderer.keyboardFocusClassName);\n        annotation.focus();\n    }\n\n    $blurFoldWidget(index) {\n        var foldWidget = this.$getFoldWidget(index);\n\n        foldWidget.classList.remove(this.editor.renderer.keyboardFocusClassName);\n        foldWidget.blur();\n    }\n\n    $blurAnnotation(index) {\n        var annotation = this.$getAnnotation(index);\n\n        annotation.classList.remove(this.editor.renderer.keyboardFocusClassName);\n        annotation.blur();\n    }\n\n    $moveFoldWidgetUp() {\n        var index = this.activeRowIndex;\n\n        while (index > 0){\n            index--;\n\n            if (this.$isFoldWidgetVisible(index)){\n                this.$blurFoldWidget(this.activeRowIndex);\n                this.activeRowIndex = index;\n                this.$focusFoldWidget(this.activeRowIndex);\n                return;\n            }\n        }\n        return;\n    }\n\n    $moveFoldWidgetDown() {\n        var index = this.activeRowIndex;\n\n        while (index < this.lines.getLength() - 1){\n            index++;\n\n            if (this.$isFoldWidgetVisible(index)){\n                this.$blurFoldWidget(this.activeRowIndex);\n                this.activeRowIndex = index;\n                this.$focusFoldWidget(this.activeRowIndex);\n                return;\n            }\n        }\n        return;\n    }\n\n    $moveAnnotationUp() {\n        var index = this.activeRowIndex;\n\n        while (index > 0){\n            index--;\n\n            if (this.$isAnnotationVisible(index)){\n                this.$blurAnnotation(this.activeRowIndex);\n                this.activeRowIndex = index;\n                this.$focusAnnotation(this.activeRowIndex);\n                return;\n            }\n        }\n        return;\n    }\n\n    $moveAnnotationDown() {\n        var index = this.activeRowIndex;\n\n        while (index < this.lines.getLength() - 1){\n            index++;\n\n            if (this.$isAnnotationVisible(index)){\n                this.$blurAnnotation(this.activeRowIndex);\n                this.activeRowIndex = index;\n                this.$focusAnnotation(this.activeRowIndex);\n                return;\n            }\n        }\n        return;\n    }\n\n    $switchLane(desinationLane){\n        switch (desinationLane) {\n            case \"annotation\":\n                if (this.activeLane === \"annotation\") {break;}\n                var annotationIndex = this.$findNearestAnnotation(this.activeRowIndex);\n                if (annotationIndex == null) {break;}\n\n                this.activeLane = \"annotation\";\n\n                this.$blurFoldWidget(this.activeRowIndex);\n                this.activeRowIndex = annotationIndex;\n                this.$focusAnnotation(this.activeRowIndex);\n\n                break;\n\n            case \"fold\": \n                if (this.activeLane === \"fold\") {break;}\n                var foldWidgetIndex = this.$findNearestFoldWidget(this.activeRowIndex);\n                if (foldWidgetIndex == null) {break;}\n\n                this.activeLane = \"fold\";\n\n                this.$blurAnnotation(this.activeRowIndex);\n                this.activeRowIndex = foldWidgetIndex;\n                this.$focusFoldWidget(this.activeRowIndex);\n                \n                break;\n        }\n        return;\n    }\n\n    // Convert row index (viewport space) to row (document space).\n    $rowIndexToRow(index) {\n        var cell = this.lines.get(index);\n        if (cell)\n            return cell.row;\n\n        return null;\n    }\n\n    // Convert row (document space) to row index (viewport space).\n    $rowToRowIndex(row) {\n        for (var i = 0; i < this.lines.getLength(); i++){\n            var cell = this.lines.get(i);\n            if (cell.row == row)\n                return i;\n        }\n\n        return null;\n    }\n}\n\nexports.GutterKeyboardHandler = GutterKeyboardHandler;\n\n/*\n * Custom Ace gutter keyboard event\n */\nclass GutterKeyboardEvent {\n    constructor(domEvent, gutterKeyboardHandler) {\n        this.gutterKeyboardHandler = gutterKeyboardHandler;\n        this.domEvent = domEvent;\n    }\n\n    /**\n     * Returns the key that was presssed.\n     * \n     * @return {string} the key that was pressed.\n     */\n    getKey() {\n        return keys.keyCodeToString(this.domEvent.keyCode);\n    }\n\n    /**\n     * Returns the row in the gutter that was focused after the keyboard event was handled.\n     * \n     * @return {number} the key that was pressed.\n     */\n    getRow() {\n        return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex);\n    }\n\n    /**\n     * Returns whether focus is on the annotation lane after the keyboard event was handled.\n     * \n     * @return {boolean} true if focus was on the annotation lane after the keyboard event.\n     */\n    isInAnnotationLane() {\n        return this.gutterKeyboardHandler.activeLane === \"annotation\";\n    }\n\n    /**\n     * Returns whether focus is on the fold lane after the keyboard event was handled.\n     * \n     * @return {boolean} true if focus was on the fold lane after the keyboard event.\n     */\n    isInFoldLane() {\n        return this.gutterKeyboardHandler.activeLane === \"fold\";\n    }\n}\n\nexports.GutterKeyboardEvent = GutterKeyboardEvent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2tleWJvYXJkL2d1dHRlcl9oYW5kbGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFdBQVcsbUJBQU8sQ0FBQyw0REFBYTtBQUNoQyxvQkFBb0IseUlBQXdEOztBQUU1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZDQUE2QztBQUM3Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCLHVCQUF1QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHVCQUF1QjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0EsOENBQThDOztBQUU5Qzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQSw4Q0FBOEM7O0FBRTlDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsNEJBQTRCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9rZXlib2FyZC9ndXR0ZXJfaGFuZGxlci5qcz85NTFkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIga2V5cyA9IHJlcXVpcmUoJy4uL2xpYi9rZXlzJyk7XG52YXIgR3V0dGVyVG9vbHRpcCA9IHJlcXVpcmUoXCIuLi9tb3VzZS9kZWZhdWx0X2d1dHRlcl9oYW5kbGVyXCIpLkd1dHRlclRvb2x0aXA7XG5cbmNsYXNzIEd1dHRlcktleWJvYXJkSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoZWRpdG9yKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgICAgICB0aGlzLmd1dHRlckxheWVyID0gZWRpdG9yLnJlbmRlcmVyLiRndXR0ZXJMYXllcjtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWRpdG9yLnJlbmRlcmVyLiRndXR0ZXI7XG4gICAgICAgIHRoaXMubGluZXMgPSBlZGl0b3IucmVuZGVyZXIuJGd1dHRlckxheWVyLiRsaW5lcztcblxuICAgICAgICB0aGlzLmFjdGl2ZVJvd0luZGV4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5hY3RpdmVMYW5lID0gbnVsbDtcblxuICAgICAgICB0aGlzLmFubm90YXRpb25Ub29sdGlwID0gbmV3IEd1dHRlclRvb2x0aXAodGhpcy5lZGl0b3IpO1xuICAgIH1cblxuICAgIGFkZExpc3RlbmVyKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4kb25HdXR0ZXJLZXlEb3duLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIHRoaXMuJGJsdXJHdXR0ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZWRpdG9yLm9uKFwibW91c2V3aGVlbFwiLCB0aGlzLiRibHVyR3V0dGVyLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHJlbW92ZUxpc3RlbmVyKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy4kb25HdXR0ZXJLZXlEb3duLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIHRoaXMuJGJsdXJHdXR0ZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZWRpdG9yLm9mZihcIm1vdXNld2hlZWxcIiwgdGhpcy4kYmx1ckd1dHRlci5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAkb25HdXR0ZXJLZXlEb3duKGUpIHtcbiAgICAgICAgLy8gaWYgdGhlIHRvb2x0aXAgaXMgb3Blbiwgd2Ugb25seSB3YW50IHRvIHJlc3BvbmQgdG8gY29tbWFuZHMgdG8gY2xvc2UgaXQgKGxpa2UgYSBtb2RhbClcbiAgICAgICAgaWYgKHRoaXMuYW5ub3RhdGlvblRvb2x0aXAuaXNPcGVuKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IGtleXNbXCJlc2NhcGVcIl0pXG4gICAgICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uVG9vbHRpcC5oaWRlVG9vbHRpcCgpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBmb2N1cyBpcyBvbiB0aGUgZ3V0dGVyIGVsZW1lbnQsIHNldCBmb2N1cyB0byBuZWFyZXN0IGd1dHRlciBpY29uIG9uIGVudGVyIHByZXNzLlxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSAhPSBrZXlzW1wiZW50ZXJcIl0pIHtyZXR1cm47fVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAvLyBTY3JvbGwgaWYgdGhlIGN1cnNvciBpcyBub3QgY3VycmVudGx5IHdpdGhpbiB0aGUgdmlld3BvcnQuXG4gICAgICAgICAgICB2YXIgcm93ID0gdGhpcy5lZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKS5yb3c7ICAgICAgIFxuICAgICAgICAgICAgaWYgKCF0aGlzLmVkaXRvci5pc1Jvd1Zpc2libGUocm93KSlcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRvci5zY3JvbGxUb0xpbmUocm93LCB0cnVlLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gQWZ0ZXIgc2Nyb2xsaW5nIGlzIGNvbXBsZXRlZCwgZmluZCB0aGUgbmVhcmVzdCBndXR0ZXIgaWNvbiBhbmQgc2V0IGZvY3VzIHRvIGl0LlxuICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAvKiogQHRoaXMge0d1dHRlcktleWJvYXJkSGFuZGxlcn0gKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuJHJvd1RvUm93SW5kZXgodGhpcy5ndXR0ZXJMYXllci4kY3Vyc29yQ2VsbC5yb3cpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmVhcmVzdEZvbGRJbmRleCA9IHRoaXMuJGZpbmROZWFyZXN0Rm9sZFdpZGdldChpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWFyZXN0QW5ub3RhdGlvbkluZGV4ID0gdGhpcy4kZmluZE5lYXJlc3RBbm5vdGF0aW9uKGluZGV4KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobmVhcmVzdEZvbGRJbmRleCA9PT0gbnVsbCAmJiBuZWFyZXN0QW5ub3RhdGlvbkluZGV4ID09PSBudWxsKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lYXJlc3RGb2xkSW5kZXggPT09IG51bGwgJiYgbmVhcmVzdEFubm90YXRpb25JbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVSb3dJbmRleCA9IG5lYXJlc3RBbm5vdGF0aW9uSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUxhbmUgPSBcImFubm90YXRpb25cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGZvY3VzQW5ub3RhdGlvbih0aGlzLmFjdGl2ZVJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZWFyZXN0Rm9sZEluZGV4ICE9PSBudWxsICYmIG5lYXJlc3RBbm5vdGF0aW9uSW5kZXggPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlUm93SW5kZXggPSBuZWFyZXN0Rm9sZEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVMYW5lID0gXCJmb2xkXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRmb2N1c0ZvbGRXaWRnZXQodGhpcy5hY3RpdmVSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobmVhcmVzdEFubm90YXRpb25JbmRleCAtIGluZGV4KSA8IE1hdGguYWJzKG5lYXJlc3RGb2xkSW5kZXggLSBpbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlUm93SW5kZXggPSBuZWFyZXN0QW5ub3RhdGlvbkluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVMYW5lID0gXCJhbm5vdGF0aW9uXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRmb2N1c0Fubm90YXRpb24odGhpcy5hY3RpdmVSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVJvd0luZGV4ID0gbmVhcmVzdEZvbGRJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTGFuZSA9IFwiZm9sZFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZm9jdXNGb2xkV2lkZ2V0KHRoaXMuYWN0aXZlUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCAxMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gXG5cbiAgICAgICAgLy8gQWZ0ZXIgaGVyZSwgZm91Y3MgaXMgb24gYSBndXR0ZXIgaWNvbiBhbmQgd2Ugd2FudCB0byBpbnRlcmFjdCB3aXRoIHRoZW0uXG4gICAgICAgIHRoaXMuJGhhbmRsZUd1dHRlcktleWJvYXJkSW50ZXJhY3Rpb24oZSk7XG5cbiAgICAgICAgLy8gV2FpdCB1bnRpbCBmb2xkaW5nIGlzIGNvbXBsZXRlZCBhbmQgdGhlbiBzaWduYWwgZ3V0dGVya2V5ZG93biB0byB0aGUgZWRpdG9yLlxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gU2lnbmFsIHRvIHRoZSBlZGl0b3IgdGhhdCBhIGtleSBpcyBwcmVzc2VkIGluc2lkZSB0aGUgZ3V0dGVyLlxuICAgICAgICAgICAgdGhpcy5lZGl0b3IuX3NpZ25hbChcImd1dHRlcmtleWRvd25cIiwgbmV3IEd1dHRlcktleWJvYXJkRXZlbnQoZSwgdGhpcykpO1xuICAgICAgICB9LmJpbmQodGhpcyksIDEwKTtcbiAgICB9XG5cbiAgICAkaGFuZGxlR3V0dGVyS2V5Ym9hcmRJbnRlcmFjdGlvbihlKSB7XG4gICAgICAgIC8vIFByZXZlbnQgdGFiYmluZyB3aGVuIGludGVyYWN0aW5nIHdpdGggdGhlIGd1dHRlciBpY29ucy5cbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0ga2V5c1tcInRhYlwiXSl7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gXG5cbiAgICAgICAgLy8gSWYgZm9jdXMgaXMgb24gYSBndXR0ZXIgaWNvbiwgc2V0IGZvY3VzIHRvIGd1dHRlciBvbiBlc2NhcGUgcHJlc3MuXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IGtleXNbXCJlc2NhcGVcIl0pIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuJGJsdXJHdXR0ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5sYW5lID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IGtleXNbXCJ1cFwiXSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5hY3RpdmVMYW5lKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZm9sZFwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRtb3ZlRm9sZFdpZGdldFVwKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgXCJhbm5vdGF0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG1vdmVBbm5vdGF0aW9uVXAoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSBrZXlzW1wiZG93blwiXSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlTGFuZSl7XG4gICAgICAgICAgICAgICAgY2FzZSBcImZvbGRcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbW92ZUZvbGRXaWRnZXREb3duKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgXCJhbm5vdGF0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG1vdmVBbm5vdGF0aW9uRG93bigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyeSB0byBzd2l0Y2ggZnJvbSBmb2xkIHdpZGdldHMgdG8gYW5ub3RhdGlvbnMuXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IGtleXNbXCJsZWZ0XCJdKXtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuJHN3aXRjaExhbmUoXCJhbm5vdGF0aW9uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJ5IHRvIHN3aXRjaCBmcm9tIGFubm90YXRpb25zIHRvIGZvbGQgd2lkZ2V0cy5cbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0ga2V5c1tcInJpZ2h0XCJdKXtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuJHN3aXRjaExhbmUoXCJmb2xkXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0ga2V5c1tcImVudGVyXCJdIHx8IGUua2V5Q29kZSA9PT0ga2V5c1tcInNwYWNlXCJdKXtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmFjdGl2ZUxhbmUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZm9sZFwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ndXR0ZXJMYXllci5zZXNzaW9uLmZvbGRXaWRnZXRzW3RoaXMuJHJvd0luZGV4VG9Sb3codGhpcy5hY3RpdmVSb3dJbmRleCldID09PSAnc3RhcnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93Rm9sZGluZ1dpZGdldCA9IHRoaXMuJHJvd0luZGV4VG9Sb3codGhpcy5hY3RpdmVSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRvci5zZXNzaW9uLm9uRm9sZFdpZGdldENsaWNrKHRoaXMuJHJvd0luZGV4VG9Sb3codGhpcy5hY3RpdmVSb3dJbmRleCksIGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZnRlciBmb2xkaW5nLCBjaGVjayB0aGF0IHRoZSByaWdodCBmb2xkIHdpZGdldCBpcyBzdGlsbCBpbiBmb2N1cy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCAoZS5nLiBmb2xkaW5nIGNsb3NlIHRvIGJvdHRvbSBvZiBkb2MpLCBwdXQgcmlnaHQgd2lkZ2V0IGluIGZvY3VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiogQHRoaXMge0d1dHRlcktleWJvYXJkSGFuZGxlcn0gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyb3dJbmRleFRvUm93KHRoaXMuYWN0aXZlUm93SW5kZXgpICE9PSByb3dGb2xkaW5nV2lkZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRibHVyRm9sZFdpZGdldCh0aGlzLmFjdGl2ZVJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlUm93SW5kZXggPSB0aGlzLiRyb3dUb1Jvd0luZGV4KHJvd0ZvbGRpbmdXaWRnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZm9jdXNGb2xkV2lkZ2V0KHRoaXMuYWN0aXZlUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIDEwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ndXR0ZXJMYXllci5zZXNzaW9uLmZvbGRXaWRnZXRzW3RoaXMuJHJvd0luZGV4VG9Sb3codGhpcy5hY3RpdmVSb3dJbmRleCldID09PSAnZW5kJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyogVE8gRE86IGRlYWwgd2l0aCAnZW5kJyBmb2xkIHdpZGdldHMgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSBcImFubm90YXRpb25cIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIGd1dHRlckVsZW1lbnQgPSB0aGlzLmxpbmVzLmNlbGxzW3RoaXMuYWN0aXZlUm93SW5kZXhdLmVsZW1lbnQuY2hpbGROb2Rlc1syXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBndXR0ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmFubm90YXRpb25Ub29sdGlwLmdldEVsZW1lbnQoKS5zdHlsZTtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUubGVmdCA9IHJlY3QucmlnaHQgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLnRvcCA9IHJlY3QuYm90dG9tICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFubm90YXRpb25Ub29sdGlwLnNob3dUb29sdGlwKHRoaXMuJHJvd0luZGV4VG9Sb3codGhpcy5hY3RpdmVSb3dJbmRleCkpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gICBcbiAgICB9XG5cbiAgICAkYmx1ckd1dHRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlUm93SW5kZXggIT09IG51bGwpe1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmFjdGl2ZUxhbmUpe1xuICAgICAgICAgICAgICAgIGNhc2UgXCJmb2xkXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJsdXJGb2xkV2lkZ2V0KHRoaXMuYWN0aXZlUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgXCJhbm5vdGF0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGJsdXJBbm5vdGF0aW9uKHRoaXMuYWN0aXZlUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmFubm90YXRpb25Ub29sdGlwLmlzT3BlbilcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvblRvb2x0aXAuaGlkZVRvb2x0aXAoKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJGlzRm9sZFdpZGdldFZpc2libGUoaW5kZXgpIHtcbiAgICAgICAgdmFyIGlzUm93RnVsbHlWaXNpYmxlID0gdGhpcy5lZGl0b3IuaXNSb3dGdWxseVZpc2libGUodGhpcy4kcm93SW5kZXhUb1JvdyhpbmRleCkpO1xuICAgICAgICB2YXIgaXNJY29uVmlzaWJsZSA9IHRoaXMuJGdldEZvbGRXaWRnZXQoaW5kZXgpLnN0eWxlLmRpc3BsYXkgIT09IFwibm9uZVwiO1xuICAgICAgICByZXR1cm4gaXNSb3dGdWxseVZpc2libGUgJiYgaXNJY29uVmlzaWJsZTtcbiAgICB9XG5cbiAgICAkaXNBbm5vdGF0aW9uVmlzaWJsZShpbmRleCkge1xuICAgICAgICB2YXIgaXNSb3dGdWxseVZpc2libGUgPSB0aGlzLmVkaXRvci5pc1Jvd0Z1bGx5VmlzaWJsZSh0aGlzLiRyb3dJbmRleFRvUm93KGluZGV4KSk7XG4gICAgICAgIHZhciBpc0ljb25WaXNpYmxlID0gdGhpcy4kZ2V0QW5ub3RhdGlvbihpbmRleCkuc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCI7XG4gICAgICAgIHJldHVybiBpc1Jvd0Z1bGx5VmlzaWJsZSAmJiBpc0ljb25WaXNpYmxlO1xuICAgIH1cblxuICAgICRnZXRGb2xkV2lkZ2V0KGluZGV4KSB7XG4gICAgICAgIHZhciBjZWxsID0gdGhpcy5saW5lcy5nZXQoaW5kZXgpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGNlbGwuZWxlbWVudDtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2hpbGROb2Rlc1sxXTtcbiAgICB9XG5cbiAgICAkZ2V0QW5ub3RhdGlvbihpbmRleCkge1xuICAgICAgICB2YXIgY2VsbCA9IHRoaXMubGluZXMuZ2V0KGluZGV4KTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBjZWxsLmVsZW1lbnQ7XG4gICAgICAgIHJldHVybiBlbGVtZW50LmNoaWxkTm9kZXNbMl07XG4gICAgfVxuXG4gICAgLy8gR2l2ZW4gYW4gaW5kZXgsIGZpbmQgdGhlIG5lYXJlc3QgaW5kZXggd2l0aCBhIGZvbGR3aWRnZXRcbiAgICAkZmluZE5lYXJlc3RGb2xkV2lkZ2V0KGluZGV4KSB7XG4gICAgICAgIC8vIElmIGZvbGQgd2lkZ2V0IGV4aXN0cyBhdCBpbmRleCwgcmV0dXJuIGluZGV4LlxuICAgICAgICBpZiAodGhpcy4kaXNGb2xkV2lkZ2V0VmlzaWJsZShpbmRleCkpXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XG5cbiAgICAgICAgLy8gZWxzZSwgZmluZCB0aGUgbmVhcmVzdCBpbmRleCB3aXRoIGZvbGQgd2lkZ2V0IHdpdGhpbiB2aWV3cG9ydC5cbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaW5kZXggLSBpID4gMCB8fCBpbmRleCArIGkgPCB0aGlzLmxpbmVzLmdldExlbmd0aCgpIC0gMSl7XG4gICAgICAgICAgICBpKys7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCAtIGkgPj0gMCAmJiB0aGlzLiRpc0ZvbGRXaWRnZXRWaXNpYmxlKGluZGV4IC0gaSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4IC0gaTtcblxuICAgICAgICAgICAgaWYgKGluZGV4ICsgaSA8PSB0aGlzLmxpbmVzLmdldExlbmd0aCgpIC0gMSAmJiB0aGlzLiRpc0ZvbGRXaWRnZXRWaXNpYmxlKGluZGV4ICsgaSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ICsgaTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBmb2xkIHdpZGdldHMgd2l0aGluIHRoZSB2aWV3cG9ydCwgcmV0dXJuIG51bGwuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEdpdmVuIGFuIGluZGV4LCBmaW5kIHRoZSBuZWFyZXN0IGluZGV4IHdpdGggYW4gYW5ub3RhdGlvbi5cbiAgICAkZmluZE5lYXJlc3RBbm5vdGF0aW9uKGluZGV4KSB7XG4gICAgICAgIC8vIElmIGFubm90YXRpb24gZXhpc3RzIGF0IGluZGV4LCByZXR1cm4gaW5kZXguXG4gICAgICAgIGlmICh0aGlzLiRpc0Fubm90YXRpb25WaXNpYmxlKGluZGV4KSlcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcblxuICAgICAgICAvLyBlbHNlLCBmaW5kIHRoZSBuZWFyZXN0IGluZGV4IHdpdGggYW5ub3RhdGlvbiB3aXRoaW4gdmlld3BvcnQuXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKGluZGV4IC0gaSA+IDAgfHwgaW5kZXggKyBpIDwgdGhpcy5saW5lcy5nZXRMZW5ndGgoKSAtIDEpe1xuICAgICAgICAgICAgaSsrO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggLSBpID49IDAgJiYgdGhpcy4kaXNBbm5vdGF0aW9uVmlzaWJsZShpbmRleCAtIGkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCAtIGk7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCArIGkgPD0gdGhpcy5saW5lcy5nZXRMZW5ndGgoKSAtIDEgJiYgdGhpcy4kaXNBbm5vdGF0aW9uVmlzaWJsZShpbmRleCArIGkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCArIGk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gYW5ub3RhdGlvbnMgd2l0aGluIHRoZSB2aWV3cG9ydCwgcmV0dXJuIG51bGwuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgICRmb2N1c0ZvbGRXaWRnZXQoaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIGZvbGRXaWRnZXQgPSB0aGlzLiRnZXRGb2xkV2lkZ2V0KGluZGV4KTtcblxuICAgICAgICBmb2xkV2lkZ2V0LmNsYXNzTGlzdC5hZGQodGhpcy5lZGl0b3IucmVuZGVyZXIua2V5Ym9hcmRGb2N1c0NsYXNzTmFtZSk7XG4gICAgICAgIGZvbGRXaWRnZXQuZm9jdXMoKTtcbiAgICB9XG5cbiAgICAkZm9jdXNBbm5vdGF0aW9uKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBhbm5vdGF0aW9uID0gdGhpcy4kZ2V0QW5ub3RhdGlvbihpbmRleCk7XG5cbiAgICAgICAgYW5ub3RhdGlvbi5jbGFzc0xpc3QuYWRkKHRoaXMuZWRpdG9yLnJlbmRlcmVyLmtleWJvYXJkRm9jdXNDbGFzc05hbWUpO1xuICAgICAgICBhbm5vdGF0aW9uLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgJGJsdXJGb2xkV2lkZ2V0KGluZGV4KSB7XG4gICAgICAgIHZhciBmb2xkV2lkZ2V0ID0gdGhpcy4kZ2V0Rm9sZFdpZGdldChpbmRleCk7XG5cbiAgICAgICAgZm9sZFdpZGdldC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuZWRpdG9yLnJlbmRlcmVyLmtleWJvYXJkRm9jdXNDbGFzc05hbWUpO1xuICAgICAgICBmb2xkV2lkZ2V0LmJsdXIoKTtcbiAgICB9XG5cbiAgICAkYmx1ckFubm90YXRpb24oaW5kZXgpIHtcbiAgICAgICAgdmFyIGFubm90YXRpb24gPSB0aGlzLiRnZXRBbm5vdGF0aW9uKGluZGV4KTtcblxuICAgICAgICBhbm5vdGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5lZGl0b3IucmVuZGVyZXIua2V5Ym9hcmRGb2N1c0NsYXNzTmFtZSk7XG4gICAgICAgIGFubm90YXRpb24uYmx1cigpO1xuICAgIH1cblxuICAgICRtb3ZlRm9sZFdpZGdldFVwKCkge1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmFjdGl2ZVJvd0luZGV4O1xuXG4gICAgICAgIHdoaWxlIChpbmRleCA+IDApe1xuICAgICAgICAgICAgaW5kZXgtLTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuJGlzRm9sZFdpZGdldFZpc2libGUoaW5kZXgpKXtcbiAgICAgICAgICAgICAgICB0aGlzLiRibHVyRm9sZFdpZGdldCh0aGlzLmFjdGl2ZVJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVJvd0luZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy4kZm9jdXNGb2xkV2lkZ2V0KHRoaXMuYWN0aXZlUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJG1vdmVGb2xkV2lkZ2V0RG93bigpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5hY3RpdmVSb3dJbmRleDtcblxuICAgICAgICB3aGlsZSAoaW5kZXggPCB0aGlzLmxpbmVzLmdldExlbmd0aCgpIC0gMSl7XG4gICAgICAgICAgICBpbmRleCsrO1xuXG4gICAgICAgICAgICBpZiAodGhpcy4kaXNGb2xkV2lkZ2V0VmlzaWJsZShpbmRleCkpe1xuICAgICAgICAgICAgICAgIHRoaXMuJGJsdXJGb2xkV2lkZ2V0KHRoaXMuYWN0aXZlUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlUm93SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLiRmb2N1c0ZvbGRXaWRnZXQodGhpcy5hY3RpdmVSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAkbW92ZUFubm90YXRpb25VcCgpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5hY3RpdmVSb3dJbmRleDtcblxuICAgICAgICB3aGlsZSAoaW5kZXggPiAwKXtcbiAgICAgICAgICAgIGluZGV4LS07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLiRpc0Fubm90YXRpb25WaXNpYmxlKGluZGV4KSl7XG4gICAgICAgICAgICAgICAgdGhpcy4kYmx1ckFubm90YXRpb24odGhpcy5hY3RpdmVSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVSb3dJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuJGZvY3VzQW5ub3RhdGlvbih0aGlzLmFjdGl2ZVJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgICRtb3ZlQW5ub3RhdGlvbkRvd24oKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuYWN0aXZlUm93SW5kZXg7XG5cbiAgICAgICAgd2hpbGUgKGluZGV4IDwgdGhpcy5saW5lcy5nZXRMZW5ndGgoKSAtIDEpe1xuICAgICAgICAgICAgaW5kZXgrKztcblxuICAgICAgICAgICAgaWYgKHRoaXMuJGlzQW5ub3RhdGlvblZpc2libGUoaW5kZXgpKXtcbiAgICAgICAgICAgICAgICB0aGlzLiRibHVyQW5ub3RhdGlvbih0aGlzLmFjdGl2ZVJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVJvd0luZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy4kZm9jdXNBbm5vdGF0aW9uKHRoaXMuYWN0aXZlUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJHN3aXRjaExhbmUoZGVzaW5hdGlvbkxhbmUpe1xuICAgICAgICBzd2l0Y2ggKGRlc2luYXRpb25MYW5lKSB7XG4gICAgICAgICAgICBjYXNlIFwiYW5ub3RhdGlvblwiOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUxhbmUgPT09IFwiYW5ub3RhdGlvblwiKSB7YnJlYWs7fVxuICAgICAgICAgICAgICAgIHZhciBhbm5vdGF0aW9uSW5kZXggPSB0aGlzLiRmaW5kTmVhcmVzdEFubm90YXRpb24odGhpcy5hY3RpdmVSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGFubm90YXRpb25JbmRleCA9PSBudWxsKSB7YnJlYWs7fVxuXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVMYW5lID0gXCJhbm5vdGF0aW9uXCI7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRibHVyRm9sZFdpZGdldCh0aGlzLmFjdGl2ZVJvd0luZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVJvd0luZGV4ID0gYW5ub3RhdGlvbkluZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuJGZvY3VzQW5ub3RhdGlvbih0aGlzLmFjdGl2ZVJvd0luZGV4KTtcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwiZm9sZFwiOiBcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVMYW5lID09PSBcImZvbGRcIikge2JyZWFrO31cbiAgICAgICAgICAgICAgICB2YXIgZm9sZFdpZGdldEluZGV4ID0gdGhpcy4kZmluZE5lYXJlc3RGb2xkV2lkZ2V0KHRoaXMuYWN0aXZlUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmIChmb2xkV2lkZ2V0SW5kZXggPT0gbnVsbCkge2JyZWFrO31cblxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTGFuZSA9IFwiZm9sZFwiO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kYmx1ckFubm90YXRpb24odGhpcy5hY3RpdmVSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVSb3dJbmRleCA9IGZvbGRXaWRnZXRJbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLiRmb2N1c0ZvbGRXaWRnZXQodGhpcy5hY3RpdmVSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgcm93IGluZGV4ICh2aWV3cG9ydCBzcGFjZSkgdG8gcm93IChkb2N1bWVudCBzcGFjZSkuXG4gICAgJHJvd0luZGV4VG9Sb3coaW5kZXgpIHtcbiAgICAgICAgdmFyIGNlbGwgPSB0aGlzLmxpbmVzLmdldChpbmRleCk7XG4gICAgICAgIGlmIChjZWxsKVxuICAgICAgICAgICAgcmV0dXJuIGNlbGwucm93O1xuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgcm93IChkb2N1bWVudCBzcGFjZSkgdG8gcm93IGluZGV4ICh2aWV3cG9ydCBzcGFjZSkuXG4gICAgJHJvd1RvUm93SW5kZXgocm93KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saW5lcy5nZXRMZW5ndGgoKTsgaSsrKXtcbiAgICAgICAgICAgIHZhciBjZWxsID0gdGhpcy5saW5lcy5nZXQoaSk7XG4gICAgICAgICAgICBpZiAoY2VsbC5yb3cgPT0gcm93KVxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5leHBvcnRzLkd1dHRlcktleWJvYXJkSGFuZGxlciA9IEd1dHRlcktleWJvYXJkSGFuZGxlcjtcblxuLypcbiAqIEN1c3RvbSBBY2UgZ3V0dGVyIGtleWJvYXJkIGV2ZW50XG4gKi9cbmNsYXNzIEd1dHRlcktleWJvYXJkRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKGRvbUV2ZW50LCBndXR0ZXJLZXlib2FyZEhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5ndXR0ZXJLZXlib2FyZEhhbmRsZXIgPSBndXR0ZXJLZXlib2FyZEhhbmRsZXI7XG4gICAgICAgIHRoaXMuZG9tRXZlbnQgPSBkb21FdmVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBrZXkgdGhhdCB3YXMgcHJlc3NzZWQuXG4gICAgICogXG4gICAgICogQHJldHVybiB7c3RyaW5nfSB0aGUga2V5IHRoYXQgd2FzIHByZXNzZWQuXG4gICAgICovXG4gICAgZ2V0S2V5KCkge1xuICAgICAgICByZXR1cm4ga2V5cy5rZXlDb2RlVG9TdHJpbmcodGhpcy5kb21FdmVudC5rZXlDb2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByb3cgaW4gdGhlIGd1dHRlciB0aGF0IHdhcyBmb2N1c2VkIGFmdGVyIHRoZSBrZXlib2FyZCBldmVudCB3YXMgaGFuZGxlZC5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBrZXkgdGhhdCB3YXMgcHJlc3NlZC5cbiAgICAgKi9cbiAgICBnZXRSb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmd1dHRlcktleWJvYXJkSGFuZGxlci4kcm93SW5kZXhUb1Jvdyh0aGlzLmd1dHRlcktleWJvYXJkSGFuZGxlci5hY3RpdmVSb3dJbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGZvY3VzIGlzIG9uIHRoZSBhbm5vdGF0aW9uIGxhbmUgYWZ0ZXIgdGhlIGtleWJvYXJkIGV2ZW50IHdhcyBoYW5kbGVkLlxuICAgICAqIFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgZm9jdXMgd2FzIG9uIHRoZSBhbm5vdGF0aW9uIGxhbmUgYWZ0ZXIgdGhlIGtleWJvYXJkIGV2ZW50LlxuICAgICAqL1xuICAgIGlzSW5Bbm5vdGF0aW9uTGFuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3V0dGVyS2V5Ym9hcmRIYW5kbGVyLmFjdGl2ZUxhbmUgPT09IFwiYW5ub3RhdGlvblwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBmb2N1cyBpcyBvbiB0aGUgZm9sZCBsYW5lIGFmdGVyIHRoZSBrZXlib2FyZCBldmVudCB3YXMgaGFuZGxlZC5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIGZvY3VzIHdhcyBvbiB0aGUgZm9sZCBsYW5lIGFmdGVyIHRoZSBrZXlib2FyZCBldmVudC5cbiAgICAgKi9cbiAgICBpc0luRm9sZExhbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmd1dHRlcktleWJvYXJkSGFuZGxlci5hY3RpdmVMYW5lID09PSBcImZvbGRcIjtcbiAgICB9XG59XG5cbmV4cG9ydHMuR3V0dGVyS2V5Ym9hcmRFdmVudCA9IEd1dHRlcktleWJvYXJkRXZlbnQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/keyboard/gutter_handler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/keyboard/hash_handler.js":
/*!************************************************************!*\
  !*** ./node_modules/ace-code/src/keyboard/hash_handler.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\n/**\n * @typedef {import(\"../../ace-internal\").Ace.Command} Command\n * @typedef {import(\"../../ace-internal\").Ace.CommandLike} CommandLike\n*/\n\n/** @type {any} */var keyUtil = __webpack_require__(/*! ../lib/keys */ \"./node_modules/ace-code/src/lib/keys.js\");\nvar useragent = __webpack_require__(/*! ../lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\nvar KEY_MODS = keyUtil.KEY_MODS;\n\nclass MultiHashHandler {\n    /**\n     * @param {Record<string, CommandLike> | Command[]} [config]\n     * @param {string} [platform]\n     */\n    constructor(config, platform) {\n        this.$init(config, platform, false);\n    }\n\n    /**\n     * @param {Record<string, CommandLike> | Command[]} config\n     * @param {string} [platform]\n     * @param {boolean} [$singleCommand]\n     */\n    $init(config, platform, $singleCommand) {\n        this.platform = platform || (useragent.isMac ? \"mac\" : \"win\");\n        /**@type {Record<string, Command>}*/\n        this.commands = {};\n        this.commandKeyBinding = {};\n        this.addCommands(config);\n        this.$singleCommand = $singleCommand;\n    }\n\n    /**\n     * @param {Command} command\n     */\n    addCommand(command) {\n        if (this.commands[command.name])\n            this.removeCommand(command);\n\n        this.commands[command.name] = command;\n\n        if (command.bindKey)\n            this._buildKeyHash(command);\n    }\n\n    /**\n     * @param {Command | string} command\n     * @param {boolean} [keepCommand]\n     */\n    removeCommand(command, keepCommand) {\n        var name = command && (typeof command === 'string' ? command : command.name);\n        command = this.commands[name];\n        if (!keepCommand)\n            delete this.commands[name];\n\n        // exhaustive search is brute force but since removeCommand is\n        // not a performance critical operation this should be OK\n        var ckb = this.commandKeyBinding;\n        for (var keyId in ckb) {\n            var cmdGroup = ckb[keyId];\n            if (cmdGroup == command) {\n                delete ckb[keyId];\n            } else if (Array.isArray(cmdGroup)) {\n                var i = cmdGroup.indexOf(command);\n                if (i != -1) {\n                    cmdGroup.splice(i, 1);\n                    if (cmdGroup.length == 1)\n                        ckb[keyId] = cmdGroup[0];\n                }\n            }\n        }\n    }\n\n    /**\n     * @param {string | { win?: string; mac?: string; position?:number}} key\n     * @param {CommandLike | string} command\n     * @param {number} [position]\n     */\n    bindKey(key, command, position) {\n        if (typeof key == \"object\" && key) {\n            if (position == undefined)\n                position = key.position;\n            key = key[this.platform];\n        }\n        if (!key)\n            return;\n        if (typeof command == \"function\")\n            return this.addCommand({exec: command, bindKey: key, name: command.name || /**@type{string}*/(key)});\n        \n        /**@type{string}*/(key).split(\"|\").forEach(function(keyPart) {\n            var chain = \"\";\n            if (keyPart.indexOf(\" \") != -1) {\n                var parts = keyPart.split(/\\s+/);\n                keyPart = parts.pop();\n                parts.forEach(function(keyPart) {\n                    var binding = this.parseKeys(keyPart);\n                    var id = KEY_MODS[binding.hashId] + binding.key;\n                    chain += (chain ? \" \" : \"\") + id;\n                    this._addCommandToBinding(chain, \"chainKeys\");\n                }, this);\n                chain += \" \";\n            }\n            var binding = this.parseKeys(keyPart);\n            var id = KEY_MODS[binding.hashId] + binding.key;\n            this._addCommandToBinding(chain + id, command, position);\n        }, this);\n    }\n\n    /**\n     * @param {string} keyId\n     * @param {any} command\n     * @param {number} position\n     */\n    _addCommandToBinding(keyId, command, position) {\n        var ckb = this.commandKeyBinding, i;\n        if (!command) {\n            delete ckb[keyId];\n        } else if (!ckb[keyId] || this.$singleCommand) {\n            ckb[keyId] = command;\n        } else {\n            if (!Array.isArray(ckb[keyId])) {\n                ckb[keyId] = [ckb[keyId]];\n            } else if ((i = ckb[keyId].indexOf(command)) != -1) {\n                ckb[keyId].splice(i, 1);\n            }\n            \n            if (typeof position != \"number\") {\n                position = getPosition(command);\n            }\n\n            var commands = ckb[keyId];\n            for (i = 0; i < commands.length; i++) {\n                var other = commands[i];\n                var otherPos = getPosition(other);\n                if (otherPos > position)\n                    break;\n            }\n            commands.splice(i, 0, command);\n        }\n    }\n\n    /**\n     * @param {Record<string, CommandLike> | Command[]} [commands]\n     */\n    addCommands(commands) {\n        commands && Object.keys(commands).forEach(function(name) {\n            var command = commands[name];\n            if (!command)\n                return;\n            \n            if (typeof command === \"string\")\n                return this.bindKey(command, name);\n\n            if (typeof command === \"function\")\n                command = { exec: command };\n\n            if (typeof command !== \"object\")\n                return;\n\n            if (!command.name)\n                command.name = name;\n\n            this.addCommand(command);\n        }, this);\n    }\n\n    /**\n     * @param {Record<string, CommandLike>} commands\n     */\n    removeCommands(commands) {\n        Object.keys(commands).forEach(function(name) {\n            this.removeCommand(commands[name]);\n        }, this);\n    }\n\n    /**\n     * @param {Record<string, CommandLike>} keyList\n     */\n    bindKeys(keyList) {\n        Object.keys(keyList).forEach(function(key) {\n            this.bindKey(key, keyList[key]);\n        }, this);\n    }\n\n    _buildKeyHash(command) {\n        this.bindKey(command.bindKey, command);\n    }\n\n    /**\n     * Accepts keys in the form ctrl+Enter or ctrl-Enter\n     * keys without modifiers or shift only\n     * @param {string} keys\n     * @returns {{key: string, hashId: number} | false}\n     */\n    parseKeys(keys) {\n        var parts = keys.toLowerCase().split(/[\\-\\+]([\\-\\+])?/).filter(function(x){return x;});\n        var key = parts.pop();\n\n        var keyCode = keyUtil[key];\n        if (keyUtil.FUNCTION_KEYS[keyCode])\n            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();\n        else if (!parts.length)\n            return {key: key, hashId: -1};\n        else if (parts.length == 1 && parts[0] == \"shift\")\n            return {key: key.toUpperCase(), hashId: -1};\n\n        var hashId = 0;\n        for (var i = parts.length; i--;) {\n            var modifier = keyUtil.KEY_MODS[parts[i]];\n            if (modifier == null) {\n                if (typeof console != \"undefined\")\n                    console.error(\"invalid modifier \" + parts[i] + \" in \" + keys);\n                return false;\n            }\n            hashId |= modifier;\n        }\n        return {key: key, hashId: hashId};\n    }\n\n    /**\n     * @param {number} hashId\n     * @param {string} keyString\n     * @returns {Command}\n     */\n    findKeyCommand(hashId, keyString) {\n        var key = KEY_MODS[hashId] + keyString;\n        return this.commandKeyBinding[key];\n    }\n\n    /**\n     * @param {{ $keyChain: string | any[]; }} data\n     * @param {number} hashId\n     * @param {string} keyString\n     * @param {number} keyCode\n     * @returns {{command: string} | void}\n     */\n    handleKeyboard(data, hashId, keyString, keyCode) {\n        if (keyCode < 0) return;\n        var key = KEY_MODS[hashId] + keyString;\n        var command = this.commandKeyBinding[key];\n        if (data.$keyChain) {\n            data.$keyChain += \" \" + key;\n            command = this.commandKeyBinding[data.$keyChain] || command;\n        }\n        \n        if (command) {\n            if (command == \"chainKeys\" || command[command.length - 1] == \"chainKeys\") {\n                data.$keyChain = data.$keyChain || key;\n                return {command: \"null\"};\n            }\n        }\n        \n        if (data.$keyChain) {\n            if ((!hashId || hashId == 4) && keyString.length == 1)\n                data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input\n            else if (hashId == -1 || keyCode > 0)\n                data.$keyChain = \"\"; // reset keyChain\n        }\n        return {command: command};\n    }\n\n    /**\n     * @param {any} [editor]\n     * @param {any} [data]\n     * @returns {string}\n     */\n    getStatusText(editor, data) {\n        return data.$keyChain || \"\";\n    }\n\n}\n\nfunction getPosition(command) {\n    return typeof command == \"object\" && command.bindKey\n        && command.bindKey.position \n        || (command.isDefault ? -100 : 0);\n}\n\nclass HashHandler extends MultiHashHandler {\n    /**\n     * @param {Record<string, CommandLike> | Command[]} [config]\n     * @param {string} [platform]\n     */\n    constructor(config, platform) {\n        super(config, platform);\n        this.$singleCommand = true;\n    }\n}\n\nHashHandler.call = function(thisArg, config, platform) {\n    MultiHashHandler.prototype.$init.call(thisArg, config, platform, true);\n};\nMultiHashHandler.call = function(thisArg, config, platform) {\n    MultiHashHandler.prototype.$init.call(thisArg, config, platform, false);\n};\n\nexports.HashHandler = HashHandler;\nexports.MultiHashHandler = MultiHashHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2tleWJvYXJkL2hhc2hfaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBLGFBQWEsMENBQTBDO0FBQ3ZELGFBQWEsOENBQThDO0FBQzNEOztBQUVBLFdBQVcsS0FBSyxnQkFBZ0IsbUJBQU8sQ0FBQyw0REFBYTtBQUNyRCxnQkFBZ0IsbUJBQU8sQ0FBQyxzRUFBa0I7QUFDMUM7O0FBRUE7QUFDQTtBQUNBLGVBQWUseUNBQXlDO0FBQ3hELGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUseUNBQXlDO0FBQ3hELGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxXQUFXLGNBQWMsY0FBYyxtQkFBbUI7QUFDekUsZUFBZSxzQkFBc0I7QUFDckMsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDREQUE0RCxPQUFPLFFBQVE7QUFDL0c7QUFDQSxpQkFBaUIsT0FBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLEtBQUs7QUFDcEIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0IscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLHlDQUF5QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7O0FBRTVCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixrQkFBa0IsNkJBQTZCO0FBQy9DO0FBQ0E7QUFDQSxtRkFBbUYsVUFBVTtBQUM3Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBLG9CQUFvQjs7QUFFcEI7QUFDQSxtQ0FBbUMsSUFBSTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQiw4QkFBOEI7QUFDL0MsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsa0JBQWtCLGlCQUFpQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFO0FBQzNFO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0EsZ0JBQWdCO0FBQ2hCOztBQUVBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsS0FBSztBQUNwQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSx5Q0FBeUM7QUFDeEQsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CO0FBQ25CLHdCQUF3QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2tleWJvYXJkL2hhc2hfaGFuZGxlci5qcz9hNDcwIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLkNvbW1hbmR9IENvbW1hbmRcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLkNvbW1hbmRMaWtlfSBDb21tYW5kTGlrZVxuKi9cblxuLyoqIEB0eXBlIHthbnl9ICovdmFyIGtleVV0aWwgPSByZXF1aXJlKFwiLi4vbGliL2tleXNcIik7XG52YXIgdXNlcmFnZW50ID0gcmVxdWlyZShcIi4uL2xpYi91c2VyYWdlbnRcIik7XG52YXIgS0VZX01PRFMgPSBrZXlVdGlsLktFWV9NT0RTO1xuXG5jbGFzcyBNdWx0aUhhc2hIYW5kbGVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIENvbW1hbmRMaWtlPiB8IENvbW1hbmRbXX0gW2NvbmZpZ11cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3BsYXRmb3JtXVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgcGxhdGZvcm0pIHtcbiAgICAgICAgdGhpcy4kaW5pdChjb25maWcsIHBsYXRmb3JtLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCBDb21tYW5kTGlrZT4gfCBDb21tYW5kW119IGNvbmZpZ1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcGxhdGZvcm1dXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbJHNpbmdsZUNvbW1hbmRdXG4gICAgICovXG4gICAgJGluaXQoY29uZmlnLCBwbGF0Zm9ybSwgJHNpbmdsZUNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHBsYXRmb3JtIHx8ICh1c2VyYWdlbnQuaXNNYWMgPyBcIm1hY1wiIDogXCJ3aW5cIik7XG4gICAgICAgIC8qKkB0eXBlIHtSZWNvcmQ8c3RyaW5nLCBDb21tYW5kPn0qL1xuICAgICAgICB0aGlzLmNvbW1hbmRzID0ge307XG4gICAgICAgIHRoaXMuY29tbWFuZEtleUJpbmRpbmcgPSB7fTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kcyhjb25maWcpO1xuICAgICAgICB0aGlzLiRzaW5nbGVDb21tYW5kID0gJHNpbmdsZUNvbW1hbmQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDb21tYW5kfSBjb21tYW5kXG4gICAgICovXG4gICAgYWRkQ29tbWFuZChjb21tYW5kKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbW1hbmRzW2NvbW1hbmQubmFtZV0pXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNvbW1hbmQoY29tbWFuZCk7XG5cbiAgICAgICAgdGhpcy5jb21tYW5kc1tjb21tYW5kLm5hbWVdID0gY29tbWFuZDtcblxuICAgICAgICBpZiAoY29tbWFuZC5iaW5kS2V5KVxuICAgICAgICAgICAgdGhpcy5fYnVpbGRLZXlIYXNoKGNvbW1hbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q29tbWFuZCB8IHN0cmluZ30gY29tbWFuZFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2tlZXBDb21tYW5kXVxuICAgICAqL1xuICAgIHJlbW92ZUNvbW1hbmQoY29tbWFuZCwga2VlcENvbW1hbmQpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBjb21tYW5kICYmICh0eXBlb2YgY29tbWFuZCA9PT0gJ3N0cmluZycgPyBjb21tYW5kIDogY29tbWFuZC5uYW1lKTtcbiAgICAgICAgY29tbWFuZCA9IHRoaXMuY29tbWFuZHNbbmFtZV07XG4gICAgICAgIGlmICgha2VlcENvbW1hbmQpXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jb21tYW5kc1tuYW1lXTtcblxuICAgICAgICAvLyBleGhhdXN0aXZlIHNlYXJjaCBpcyBicnV0ZSBmb3JjZSBidXQgc2luY2UgcmVtb3ZlQ29tbWFuZCBpc1xuICAgICAgICAvLyBub3QgYSBwZXJmb3JtYW5jZSBjcml0aWNhbCBvcGVyYXRpb24gdGhpcyBzaG91bGQgYmUgT0tcbiAgICAgICAgdmFyIGNrYiA9IHRoaXMuY29tbWFuZEtleUJpbmRpbmc7XG4gICAgICAgIGZvciAodmFyIGtleUlkIGluIGNrYikge1xuICAgICAgICAgICAgdmFyIGNtZEdyb3VwID0gY2tiW2tleUlkXTtcbiAgICAgICAgICAgIGlmIChjbWRHcm91cCA9PSBjb21tYW5kKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGNrYltrZXlJZF07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY21kR3JvdXApKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBjbWRHcm91cC5pbmRleE9mKGNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIGlmIChpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNtZEdyb3VwLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNtZEdyb3VwLmxlbmd0aCA9PSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2tiW2tleUlkXSA9IGNtZEdyb3VwWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgeyB3aW4/OiBzdHJpbmc7IG1hYz86IHN0cmluZzsgcG9zaXRpb24/Om51bWJlcn19IGtleVxuICAgICAqIEBwYXJhbSB7Q29tbWFuZExpa2UgfCBzdHJpbmd9IGNvbW1hbmRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Bvc2l0aW9uXVxuICAgICAqL1xuICAgIGJpbmRLZXkoa2V5LCBjb21tYW5kLCBwb3NpdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGtleSA9PSBcIm9iamVjdFwiICYmIGtleSkge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGtleS5wb3NpdGlvbjtcbiAgICAgICAgICAgIGtleSA9IGtleVt0aGlzLnBsYXRmb3JtXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWtleSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGVvZiBjb21tYW5kID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZENvbW1hbmQoe2V4ZWM6IGNvbW1hbmQsIGJpbmRLZXk6IGtleSwgbmFtZTogY29tbWFuZC5uYW1lIHx8IC8qKkB0eXBle3N0cmluZ30qLyhrZXkpfSk7XG4gICAgICAgIFxuICAgICAgICAvKipAdHlwZXtzdHJpbmd9Ki8oa2V5KS5zcGxpdChcInxcIikuZm9yRWFjaChmdW5jdGlvbihrZXlQYXJ0KSB7XG4gICAgICAgICAgICB2YXIgY2hhaW4gPSBcIlwiO1xuICAgICAgICAgICAgaWYgKGtleVBhcnQuaW5kZXhPZihcIiBcIikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBrZXlQYXJ0LnNwbGl0KC9cXHMrLyk7XG4gICAgICAgICAgICAgICAga2V5UGFydCA9IHBhcnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgIHBhcnRzLmZvckVhY2goZnVuY3Rpb24oa2V5UGFydCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmluZGluZyA9IHRoaXMucGFyc2VLZXlzKGtleVBhcnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBLRVlfTU9EU1tiaW5kaW5nLmhhc2hJZF0gKyBiaW5kaW5nLmtleTtcbiAgICAgICAgICAgICAgICAgICAgY2hhaW4gKz0gKGNoYWluID8gXCIgXCIgOiBcIlwiKSArIGlkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGRDb21tYW5kVG9CaW5kaW5nKGNoYWluLCBcImNoYWluS2V5c1wiKTtcbiAgICAgICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgICAgICAgICBjaGFpbiArPSBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiaW5kaW5nID0gdGhpcy5wYXJzZUtleXMoa2V5UGFydCk7XG4gICAgICAgICAgICB2YXIgaWQgPSBLRVlfTU9EU1tiaW5kaW5nLmhhc2hJZF0gKyBiaW5kaW5nLmtleTtcbiAgICAgICAgICAgIHRoaXMuX2FkZENvbW1hbmRUb0JpbmRpbmcoY2hhaW4gKyBpZCwgY29tbWFuZCwgcG9zaXRpb24pO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5SWRcbiAgICAgKiBAcGFyYW0ge2FueX0gY29tbWFuZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb3NpdGlvblxuICAgICAqL1xuICAgIF9hZGRDb21tYW5kVG9CaW5kaW5nKGtleUlkLCBjb21tYW5kLCBwb3NpdGlvbikge1xuICAgICAgICB2YXIgY2tiID0gdGhpcy5jb21tYW5kS2V5QmluZGluZywgaTtcbiAgICAgICAgaWYgKCFjb21tYW5kKSB7XG4gICAgICAgICAgICBkZWxldGUgY2tiW2tleUlkXTtcbiAgICAgICAgfSBlbHNlIGlmICghY2tiW2tleUlkXSB8fCB0aGlzLiRzaW5nbGVDb21tYW5kKSB7XG4gICAgICAgICAgICBja2Jba2V5SWRdID0gY29tbWFuZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShja2Jba2V5SWRdKSkge1xuICAgICAgICAgICAgICAgIGNrYltrZXlJZF0gPSBbY2tiW2tleUlkXV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChpID0gY2tiW2tleUlkXS5pbmRleE9mKGNvbW1hbmQpKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIGNrYltrZXlJZF0uc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodHlwZW9mIHBvc2l0aW9uICE9IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGdldFBvc2l0aW9uKGNvbW1hbmQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29tbWFuZHMgPSBja2Jba2V5SWRdO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvbW1hbmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG90aGVyID0gY29tbWFuZHNbaV07XG4gICAgICAgICAgICAgICAgdmFyIG90aGVyUG9zID0gZ2V0UG9zaXRpb24ob3RoZXIpO1xuICAgICAgICAgICAgICAgIGlmIChvdGhlclBvcyA+IHBvc2l0aW9uKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbW1hbmRzLnNwbGljZShpLCAwLCBjb21tYW5kKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UmVjb3JkPHN0cmluZywgQ29tbWFuZExpa2U+IHwgQ29tbWFuZFtdfSBbY29tbWFuZHNdXG4gICAgICovXG4gICAgYWRkQ29tbWFuZHMoY29tbWFuZHMpIHtcbiAgICAgICAgY29tbWFuZHMgJiYgT2JqZWN0LmtleXMoY29tbWFuZHMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgdmFyIGNvbW1hbmQgPSBjb21tYW5kc1tuYW1lXTtcbiAgICAgICAgICAgIGlmICghY29tbWFuZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29tbWFuZCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iaW5kS2V5KGNvbW1hbmQsIG5hbWUpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbW1hbmQgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgICBjb21tYW5kID0geyBleGVjOiBjb21tYW5kIH07XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29tbWFuZCAhPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIGlmICghY29tbWFuZC5uYW1lKVxuICAgICAgICAgICAgICAgIGNvbW1hbmQubmFtZSA9IG5hbWU7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkQ29tbWFuZChjb21tYW5kKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCBDb21tYW5kTGlrZT59IGNvbW1hbmRzXG4gICAgICovXG4gICAgcmVtb3ZlQ29tbWFuZHMoY29tbWFuZHMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoY29tbWFuZHMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDb21tYW5kKGNvbW1hbmRzW25hbWVdKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCBDb21tYW5kTGlrZT59IGtleUxpc3RcbiAgICAgKi9cbiAgICBiaW5kS2V5cyhrZXlMaXN0KSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGtleUxpc3QpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRLZXkoa2V5LCBrZXlMaXN0W2tleV0pO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG5cbiAgICBfYnVpbGRLZXlIYXNoKGNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5iaW5kS2V5KGNvbW1hbmQuYmluZEtleSwgY29tbWFuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWNjZXB0cyBrZXlzIGluIHRoZSBmb3JtIGN0cmwrRW50ZXIgb3IgY3RybC1FbnRlclxuICAgICAqIGtleXMgd2l0aG91dCBtb2RpZmllcnMgb3Igc2hpZnQgb25seVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlzXG4gICAgICogQHJldHVybnMge3trZXk6IHN0cmluZywgaGFzaElkOiBudW1iZXJ9IHwgZmFsc2V9XG4gICAgICovXG4gICAgcGFyc2VLZXlzKGtleXMpIHtcbiAgICAgICAgdmFyIHBhcnRzID0ga2V5cy50b0xvd2VyQ2FzZSgpLnNwbGl0KC9bXFwtXFwrXShbXFwtXFwrXSk/LykuZmlsdGVyKGZ1bmN0aW9uKHgpe3JldHVybiB4O30pO1xuICAgICAgICB2YXIga2V5ID0gcGFydHMucG9wKCk7XG5cbiAgICAgICAgdmFyIGtleUNvZGUgPSBrZXlVdGlsW2tleV07XG4gICAgICAgIGlmIChrZXlVdGlsLkZVTkNUSU9OX0tFWVNba2V5Q29kZV0pXG4gICAgICAgICAgICBrZXkgPSBrZXlVdGlsLkZVTkNUSU9OX0tFWVNba2V5Q29kZV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgZWxzZSBpZiAoIXBhcnRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB7a2V5OiBrZXksIGhhc2hJZDogLTF9O1xuICAgICAgICBlbHNlIGlmIChwYXJ0cy5sZW5ndGggPT0gMSAmJiBwYXJ0c1swXSA9PSBcInNoaWZ0XCIpXG4gICAgICAgICAgICByZXR1cm4ge2tleToga2V5LnRvVXBwZXJDYXNlKCksIGhhc2hJZDogLTF9O1xuXG4gICAgICAgIHZhciBoYXNoSWQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gcGFydHMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgICAgICB2YXIgbW9kaWZpZXIgPSBrZXlVdGlsLktFWV9NT0RTW3BhcnRzW2ldXTtcbiAgICAgICAgICAgIGlmIChtb2RpZmllciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJpbnZhbGlkIG1vZGlmaWVyIFwiICsgcGFydHNbaV0gKyBcIiBpbiBcIiArIGtleXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhhc2hJZCB8PSBtb2RpZmllcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge2tleToga2V5LCBoYXNoSWQ6IGhhc2hJZH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhhc2hJZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlTdHJpbmdcbiAgICAgKiBAcmV0dXJucyB7Q29tbWFuZH1cbiAgICAgKi9cbiAgICBmaW5kS2V5Q29tbWFuZChoYXNoSWQsIGtleVN0cmluZykge1xuICAgICAgICB2YXIga2V5ID0gS0VZX01PRFNbaGFzaElkXSArIGtleVN0cmluZztcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWFuZEtleUJpbmRpbmdba2V5XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3sgJGtleUNoYWluOiBzdHJpbmcgfCBhbnlbXTsgfX0gZGF0YVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYXNoSWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5U3RyaW5nXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtleUNvZGVcbiAgICAgKiBAcmV0dXJucyB7e2NvbW1hbmQ6IHN0cmluZ30gfCB2b2lkfVxuICAgICAqL1xuICAgIGhhbmRsZUtleWJvYXJkKGRhdGEsIGhhc2hJZCwga2V5U3RyaW5nLCBrZXlDb2RlKSB7XG4gICAgICAgIGlmIChrZXlDb2RlIDwgMCkgcmV0dXJuO1xuICAgICAgICB2YXIga2V5ID0gS0VZX01PRFNbaGFzaElkXSArIGtleVN0cmluZztcbiAgICAgICAgdmFyIGNvbW1hbmQgPSB0aGlzLmNvbW1hbmRLZXlCaW5kaW5nW2tleV07XG4gICAgICAgIGlmIChkYXRhLiRrZXlDaGFpbikge1xuICAgICAgICAgICAgZGF0YS4ka2V5Q2hhaW4gKz0gXCIgXCIgKyBrZXk7XG4gICAgICAgICAgICBjb21tYW5kID0gdGhpcy5jb21tYW5kS2V5QmluZGluZ1tkYXRhLiRrZXlDaGFpbl0gfHwgY29tbWFuZDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgICAgICAgIGlmIChjb21tYW5kID09IFwiY2hhaW5LZXlzXCIgfHwgY29tbWFuZFtjb21tYW5kLmxlbmd0aCAtIDFdID09IFwiY2hhaW5LZXlzXCIpIHtcbiAgICAgICAgICAgICAgICBkYXRhLiRrZXlDaGFpbiA9IGRhdGEuJGtleUNoYWluIHx8IGtleTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge2NvbW1hbmQ6IFwibnVsbFwifTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEuJGtleUNoYWluKSB7XG4gICAgICAgICAgICBpZiAoKCFoYXNoSWQgfHwgaGFzaElkID09IDQpICYmIGtleVN0cmluZy5sZW5ndGggPT0gMSlcbiAgICAgICAgICAgICAgICBkYXRhLiRrZXlDaGFpbiA9IGRhdGEuJGtleUNoYWluLnNsaWNlKDAsIC1rZXkubGVuZ3RoIC0gMSk7IC8vIHdhaXQgZm9yIGlucHV0XG4gICAgICAgICAgICBlbHNlIGlmIChoYXNoSWQgPT0gLTEgfHwga2V5Q29kZSA+IDApXG4gICAgICAgICAgICAgICAgZGF0YS4ka2V5Q2hhaW4gPSBcIlwiOyAvLyByZXNldCBrZXlDaGFpblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7Y29tbWFuZDogY29tbWFuZH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthbnl9IFtlZGl0b3JdXG4gICAgICogQHBhcmFtIHthbnl9IFtkYXRhXVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0U3RhdHVzVGV4dChlZGl0b3IsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGRhdGEuJGtleUNoYWluIHx8IFwiXCI7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGdldFBvc2l0aW9uKGNvbW1hbmQpIHtcbiAgICByZXR1cm4gdHlwZW9mIGNvbW1hbmQgPT0gXCJvYmplY3RcIiAmJiBjb21tYW5kLmJpbmRLZXlcbiAgICAgICAgJiYgY29tbWFuZC5iaW5kS2V5LnBvc2l0aW9uIFxuICAgICAgICB8fCAoY29tbWFuZC5pc0RlZmF1bHQgPyAtMTAwIDogMCk7XG59XG5cbmNsYXNzIEhhc2hIYW5kbGVyIGV4dGVuZHMgTXVsdGlIYXNoSGFuZGxlciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCBDb21tYW5kTGlrZT4gfCBDb21tYW5kW119IFtjb25maWddXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwbGF0Zm9ybV1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIHBsYXRmb3JtKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZywgcGxhdGZvcm0pO1xuICAgICAgICB0aGlzLiRzaW5nbGVDb21tYW5kID0gdHJ1ZTtcbiAgICB9XG59XG5cbkhhc2hIYW5kbGVyLmNhbGwgPSBmdW5jdGlvbih0aGlzQXJnLCBjb25maWcsIHBsYXRmb3JtKSB7XG4gICAgTXVsdGlIYXNoSGFuZGxlci5wcm90b3R5cGUuJGluaXQuY2FsbCh0aGlzQXJnLCBjb25maWcsIHBsYXRmb3JtLCB0cnVlKTtcbn07XG5NdWx0aUhhc2hIYW5kbGVyLmNhbGwgPSBmdW5jdGlvbih0aGlzQXJnLCBjb25maWcsIHBsYXRmb3JtKSB7XG4gICAgTXVsdGlIYXNoSGFuZGxlci5wcm90b3R5cGUuJGluaXQuY2FsbCh0aGlzQXJnLCBjb25maWcsIHBsYXRmb3JtLCBmYWxzZSk7XG59O1xuXG5leHBvcnRzLkhhc2hIYW5kbGVyID0gSGFzaEhhbmRsZXI7XG5leHBvcnRzLk11bHRpSGFzaEhhbmRsZXIgPSBNdWx0aUhhc2hIYW5kbGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/keyboard/hash_handler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/keyboard/keybinding.js":
/*!**********************************************************!*\
  !*** ./node_modules/ace-code/src/keyboard/keybinding.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../editor\").Editor} Editor\n * @typedef {import(\"../../ace-internal\").Ace.KeyboardHandler} KeyboardHandler\n */\nvar keyUtil  = __webpack_require__(/*! ../lib/keys */ \"./node_modules/ace-code/src/lib/keys.js\");\nvar event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\n\n\nclass KeyBinding {\n    /**\n     * @param {Editor} editor\n     */\n    constructor(editor) {\n        this.$editor = editor;\n        this.$data = {editor: editor};\n        /**@type {(KeyboardHandler)[]}*/\n        this.$handlers = [];\n        this.setDefaultHandler(editor.commands);\n    }\n\n    /**\n     * @param {KeyboardHandler} kb\n     */\n    setDefaultHandler(kb) {\n        this.removeKeyboardHandler(this.$defaultHandler);\n        this.$defaultHandler = kb;\n        this.addKeyboardHandler(kb, 0);\n    }\n\n    /**\n     * @param {KeyboardHandler} kb\n     */\n    setKeyboardHandler(kb) {\n        var h = this.$handlers;\n        if (h[h.length - 1] == kb)\n            return;\n\n        while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)\n            this.removeKeyboardHandler(h[h.length - 1]);\n\n        this.addKeyboardHandler(kb, 1);\n    }\n\n    /**\n     * @param {KeyboardHandler & {attach?: (editor: any) => void, detach?: (editor: any) => void;}} [kb]\n     * @param {number} [pos]\n     */\n    addKeyboardHandler(kb, pos) {\n        if (!kb)\n            return;\n        // @ts-ignore\n        if (typeof kb == \"function\" && !kb.handleKeyboard)\n            // @ts-ignore\n            kb.handleKeyboard = kb;\n        var i = this.$handlers.indexOf(kb);\n        if (i != -1)\n            this.$handlers.splice(i, 1);\n\n        if (pos == undefined)\n            this.$handlers.push(kb);\n        else\n            this.$handlers.splice(pos, 0, kb);\n\n        if (i == -1 && kb.attach)\n            kb.attach(this.$editor);\n    }\n\n    /**\n     * @param {KeyboardHandler & {attach?: (editor: any) => void, detach?: (editor: any) => void;}} kb\n     * @returns {boolean}\n     */\n    removeKeyboardHandler(kb) {\n        var i = this.$handlers.indexOf(kb);\n        if (i == -1)\n            return false;\n        this.$handlers.splice(i, 1);\n        kb.detach && kb.detach(this.$editor);\n        return true;\n    }\n\n    /**\n     * @return {KeyboardHandler}\n     */\n    getKeyboardHandler() {\n        return this.$handlers[this.$handlers.length - 1];\n    }\n\n    getStatusText() {\n        var data = this.$data;\n        var editor = data.editor;\n        return this.$handlers.map(function(h) {\n            return h.getStatusText && h.getStatusText(editor, data) || \"\";\n        }).filter(Boolean).join(\" \");\n    }\n\n    $callKeyboardHandlers(hashId, keyString, keyCode, e) {\n        var toExecute;\n        var success = false;\n        var commands = this.$editor.commands;\n\n        for (var i = this.$handlers.length; i--;) {\n            toExecute = this.$handlers[i].handleKeyboard(\n                // @ts-expect-error TODO: could be wrong arguments amount\n                this.$data, hashId, keyString, keyCode, e\n            );\n            if (!toExecute || !toExecute.command)\n                continue;\n\n            // allow keyboardHandler to consume keys\n            if (toExecute.command == \"null\") {\n                success = true;\n            } else {\n                // @ts-expect-error //TODO: potential wrong arguments amount\n                success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);\n            }\n            // do not stop input events to not break repeating\n            if (success && e && hashId != -1 &&\n                toExecute[\"passEvent\"] != true && toExecute.command[\"passEvent\"] != true\n            ) {\n                event.stopEvent(e);\n            }\n            if (success)\n                break;\n        }\n\n        if (!success && hashId == -1) {\n            toExecute = {command: \"insertstring\"};\n            success = commands.exec(\"insertstring\", this.$editor, keyString);\n        }\n\n        if (success && this.$editor._signal)\n            this.$editor._signal(\"keyboardActivity\", toExecute);\n\n        return success;\n    }\n\n    /**\n     * @param {any} e\n     * @param {number} hashId\n     * @param {number} keyCode\n     * @return {boolean}\n     * @internal\n     */\n    onCommandKey(e, hashId, keyCode) {\n        var keyString = keyUtil.keyCodeToString(keyCode);\n        return this.$callKeyboardHandlers(hashId, keyString, keyCode, e);\n    }\n\n    /**\n     * @param {string} text\n     * @return {boolean}\n     * @internal\n     */\n    onTextInput(text) {\n        return this.$callKeyboardHandlers(-1, text);\n    }\n\n}\n\nexports.KeyBinding = KeyBinding;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2tleWJvYXJkL2tleWJpbmRpbmcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDLGFBQWEsa0RBQWtEO0FBQy9EO0FBQ0EsZUFBZSxtQkFBTyxDQUFDLDREQUFhO0FBQ3BDLFlBQVksbUJBQU8sQ0FBQyw4REFBYzs7O0FBR2xDO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLG1CQUFtQixrRUFBa0U7QUFDcEcsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxtQkFBbUIsa0VBQWtFO0FBQ3BHLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw0Q0FBNEMsSUFBSTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGVBQWUsS0FBSztBQUNwQixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMva2V5Ym9hcmQva2V5YmluZGluZy5qcz84NzI5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vZWRpdG9yXCIpLkVkaXRvcn0gRWRpdG9yXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5LZXlib2FyZEhhbmRsZXJ9IEtleWJvYXJkSGFuZGxlclxuICovXG52YXIga2V5VXRpbCAgPSByZXF1aXJlKFwiLi4vbGliL2tleXNcIik7XG52YXIgZXZlbnQgPSByZXF1aXJlKFwiLi4vbGliL2V2ZW50XCIpO1xuXG5cbmNsYXNzIEtleUJpbmRpbmcge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWRpdG9yfSBlZGl0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlZGl0b3IpIHtcbiAgICAgICAgdGhpcy4kZWRpdG9yID0gZWRpdG9yO1xuICAgICAgICB0aGlzLiRkYXRhID0ge2VkaXRvcjogZWRpdG9yfTtcbiAgICAgICAgLyoqQHR5cGUgeyhLZXlib2FyZEhhbmRsZXIpW119Ki9cbiAgICAgICAgdGhpcy4kaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5zZXREZWZhdWx0SGFuZGxlcihlZGl0b3IuY29tbWFuZHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7S2V5Ym9hcmRIYW5kbGVyfSBrYlxuICAgICAqL1xuICAgIHNldERlZmF1bHRIYW5kbGVyKGtiKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlS2V5Ym9hcmRIYW5kbGVyKHRoaXMuJGRlZmF1bHRIYW5kbGVyKTtcbiAgICAgICAgdGhpcy4kZGVmYXVsdEhhbmRsZXIgPSBrYjtcbiAgICAgICAgdGhpcy5hZGRLZXlib2FyZEhhbmRsZXIoa2IsIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7S2V5Ym9hcmRIYW5kbGVyfSBrYlxuICAgICAqL1xuICAgIHNldEtleWJvYXJkSGFuZGxlcihrYikge1xuICAgICAgICB2YXIgaCA9IHRoaXMuJGhhbmRsZXJzO1xuICAgICAgICBpZiAoaFtoLmxlbmd0aCAtIDFdID09IGtiKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHdoaWxlIChoW2gubGVuZ3RoIC0gMV0gJiYgaFtoLmxlbmd0aCAtIDFdICE9IHRoaXMuJGRlZmF1bHRIYW5kbGVyKVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVLZXlib2FyZEhhbmRsZXIoaFtoLmxlbmd0aCAtIDFdKTtcblxuICAgICAgICB0aGlzLmFkZEtleWJvYXJkSGFuZGxlcihrYiwgMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtLZXlib2FyZEhhbmRsZXIgJiB7YXR0YWNoPzogKGVkaXRvcjogYW55KSA9PiB2b2lkLCBkZXRhY2g/OiAoZWRpdG9yOiBhbnkpID0+IHZvaWQ7fX0gW2tiXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbcG9zXVxuICAgICAqL1xuICAgIGFkZEtleWJvYXJkSGFuZGxlcihrYiwgcG9zKSB7XG4gICAgICAgIGlmICgha2IpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKHR5cGVvZiBrYiA9PSBcImZ1bmN0aW9uXCIgJiYgIWtiLmhhbmRsZUtleWJvYXJkKVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAga2IuaGFuZGxlS2V5Ym9hcmQgPSBrYjtcbiAgICAgICAgdmFyIGkgPSB0aGlzLiRoYW5kbGVycy5pbmRleE9mKGtiKTtcbiAgICAgICAgaWYgKGkgIT0gLTEpXG4gICAgICAgICAgICB0aGlzLiRoYW5kbGVycy5zcGxpY2UoaSwgMSk7XG5cbiAgICAgICAgaWYgKHBvcyA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aGlzLiRoYW5kbGVycy5wdXNoKGtiKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy4kaGFuZGxlcnMuc3BsaWNlKHBvcywgMCwga2IpO1xuXG4gICAgICAgIGlmIChpID09IC0xICYmIGtiLmF0dGFjaClcbiAgICAgICAgICAgIGtiLmF0dGFjaCh0aGlzLiRlZGl0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7S2V5Ym9hcmRIYW5kbGVyICYge2F0dGFjaD86IChlZGl0b3I6IGFueSkgPT4gdm9pZCwgZGV0YWNoPzogKGVkaXRvcjogYW55KSA9PiB2b2lkO319IGtiXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgcmVtb3ZlS2V5Ym9hcmRIYW5kbGVyKGtiKSB7XG4gICAgICAgIHZhciBpID0gdGhpcy4kaGFuZGxlcnMuaW5kZXhPZihrYik7XG4gICAgICAgIGlmIChpID09IC0xKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLiRoYW5kbGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGtiLmRldGFjaCAmJiBrYi5kZXRhY2godGhpcy4kZWRpdG9yKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7S2V5Ym9hcmRIYW5kbGVyfVxuICAgICAqL1xuICAgIGdldEtleWJvYXJkSGFuZGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGhhbmRsZXJzW3RoaXMuJGhhbmRsZXJzLmxlbmd0aCAtIDFdO1xuICAgIH1cblxuICAgIGdldFN0YXR1c1RleHQoKSB7XG4gICAgICAgIHZhciBkYXRhID0gdGhpcy4kZGF0YTtcbiAgICAgICAgdmFyIGVkaXRvciA9IGRhdGEuZWRpdG9yO1xuICAgICAgICByZXR1cm4gdGhpcy4kaGFuZGxlcnMubWFwKGZ1bmN0aW9uKGgpIHtcbiAgICAgICAgICAgIHJldHVybiBoLmdldFN0YXR1c1RleHQgJiYgaC5nZXRTdGF0dXNUZXh0KGVkaXRvciwgZGF0YSkgfHwgXCJcIjtcbiAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCIgXCIpO1xuICAgIH1cblxuICAgICRjYWxsS2V5Ym9hcmRIYW5kbGVycyhoYXNoSWQsIGtleVN0cmluZywga2V5Q29kZSwgZSkge1xuICAgICAgICB2YXIgdG9FeGVjdXRlO1xuICAgICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICB2YXIgY29tbWFuZHMgPSB0aGlzLiRlZGl0b3IuY29tbWFuZHM7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuJGhhbmRsZXJzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgdG9FeGVjdXRlID0gdGhpcy4kaGFuZGxlcnNbaV0uaGFuZGxlS2V5Ym9hcmQoXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBjb3VsZCBiZSB3cm9uZyBhcmd1bWVudHMgYW1vdW50XG4gICAgICAgICAgICAgICAgdGhpcy4kZGF0YSwgaGFzaElkLCBrZXlTdHJpbmcsIGtleUNvZGUsIGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoIXRvRXhlY3V0ZSB8fCAhdG9FeGVjdXRlLmNvbW1hbmQpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIGFsbG93IGtleWJvYXJkSGFuZGxlciB0byBjb25zdW1lIGtleXNcbiAgICAgICAgICAgIGlmICh0b0V4ZWN1dGUuY29tbWFuZCA9PSBcIm51bGxcIikge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC8vVE9ETzogcG90ZW50aWFsIHdyb25nIGFyZ3VtZW50cyBhbW91bnRcbiAgICAgICAgICAgICAgICBzdWNjZXNzID0gY29tbWFuZHMuZXhlYyh0b0V4ZWN1dGUuY29tbWFuZCwgdGhpcy4kZWRpdG9yLCB0b0V4ZWN1dGUuYXJncywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkbyBub3Qgc3RvcCBpbnB1dCBldmVudHMgdG8gbm90IGJyZWFrIHJlcGVhdGluZ1xuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MgJiYgZSAmJiBoYXNoSWQgIT0gLTEgJiZcbiAgICAgICAgICAgICAgICB0b0V4ZWN1dGVbXCJwYXNzRXZlbnRcIl0gIT0gdHJ1ZSAmJiB0b0V4ZWN1dGUuY29tbWFuZFtcInBhc3NFdmVudFwiXSAhPSB0cnVlXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wRXZlbnQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3VjY2VzcylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc3VjY2VzcyAmJiBoYXNoSWQgPT0gLTEpIHtcbiAgICAgICAgICAgIHRvRXhlY3V0ZSA9IHtjb21tYW5kOiBcImluc2VydHN0cmluZ1wifTtcbiAgICAgICAgICAgIHN1Y2Nlc3MgPSBjb21tYW5kcy5leGVjKFwiaW5zZXJ0c3RyaW5nXCIsIHRoaXMuJGVkaXRvciwga2V5U3RyaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdWNjZXNzICYmIHRoaXMuJGVkaXRvci5fc2lnbmFsKVxuICAgICAgICAgICAgdGhpcy4kZWRpdG9yLl9zaWduYWwoXCJrZXlib2FyZEFjdGl2aXR5XCIsIHRvRXhlY3V0ZSk7XG5cbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthbnl9IGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGFzaElkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtleUNvZGVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uQ29tbWFuZEtleShlLCBoYXNoSWQsIGtleUNvZGUpIHtcbiAgICAgICAgdmFyIGtleVN0cmluZyA9IGtleVV0aWwua2V5Q29kZVRvU3RyaW5nKGtleUNvZGUpO1xuICAgICAgICByZXR1cm4gdGhpcy4kY2FsbEtleWJvYXJkSGFuZGxlcnMoaGFzaElkLCBrZXlTdHJpbmcsIGtleUNvZGUsIGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvblRleHRJbnB1dCh0ZXh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRjYWxsS2V5Ym9hcmRIYW5kbGVycygtMSwgdGV4dCk7XG4gICAgfVxuXG59XG5cbmV4cG9ydHMuS2V5QmluZGluZyA9IEtleUJpbmRpbmc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/keyboard/keybinding.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/keyboard/textinput.js":
/*!*********************************************************!*\
  !*** ./node_modules/ace-code/src/keyboard/textinput.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar nls = (__webpack_require__(/*! ../config */ \"./node_modules/ace-code/src/config.js\").nls);\nvar useragent = __webpack_require__(/*! ../lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar lang = __webpack_require__(/*! ../lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar clipboard = __webpack_require__(/*! ../clipboard */ \"./node_modules/ace-code/src/clipboard.js\");\nvar BROKEN_SETDATA = useragent.isChrome < 18;\nvar USE_IE_MIME_TYPE =  useragent.isIE;\nvar HAS_FOCUS_ARGS = useragent.isChrome > 63;\nvar MAX_LINE_LENGTH = 400;\n\n/**\n * \n * @type {{[key: string]: any}}\n */\nvar KEYS = __webpack_require__(/*! ../lib/keys */ \"./node_modules/ace-code/src/lib/keys.js\");\nvar MODS = KEYS.KEY_MODS;\nvar isIOS = useragent.isIOS;\nvar valueResetRegex = isIOS ? /\\s/ : /\\n/;\nvar isMobile = useragent.isMobile;\n\nvar TextInput;\nTextInput= function(parentNode, host) {\n    /**@type {HTMLTextAreaElement & {msGetInputContext?: () => {compositionStartOffset: number}, getInputContext?: () => {compositionStartOffset: number}}}*/\n    var text = dom.createElement(\"textarea\");\n    text.className = \"ace_text-input\";\n\n    text.setAttribute(\"wrap\", \"off\");\n    text.setAttribute(\"autocorrect\", \"off\");\n    text.setAttribute(\"autocapitalize\", \"off\");\n    text.setAttribute(\"spellcheck\", \"false\");\n\n    text.style.opacity = \"0\";\n    parentNode.insertBefore(text, parentNode.firstChild);\n\n    var copied = false;\n    var pasted = false;\n    /**@type {(boolean|Object) & {context?: any, useTextareaForIME?: boolean, selectionStart?: number, markerRange?: any}}} */\n    var inComposition = false;\n    var sendingText = false;\n    var tempStyle = '';\n    \n    if (!isMobile)\n        text.style.fontSize = \"1px\";\n\n    var commandMode = false;\n    var ignoreFocusEvents = false;\n    \n    var lastValue = \"\";\n    var lastSelectionStart = 0;\n    var lastSelectionEnd = 0;\n    var lastRestoreEnd = 0;\n    var rowStart = Number.MAX_SAFE_INTEGER;\n    var rowEnd = Number.MIN_SAFE_INTEGER;\n    var numberOfExtraLines = 0;\n    \n    // FOCUS\n    // ie9 throws error if document.activeElement is accessed too soon\n    try { var isFocused = document.activeElement === text; } catch(e) {}\n\n    // Set number of extra lines in textarea, some screenreaders\n    // perform better with extra lines above and below in the textarea.\n    this.setNumberOfExtraLines = function(number) {\n        rowStart = Number.MAX_SAFE_INTEGER;\n        rowEnd =  Number.MIN_SAFE_INTEGER;\n\n        if (number < 0) {\n            numberOfExtraLines = 0;\n            return;\n        }\n        \n        numberOfExtraLines = number;\n    };\n\n    this.setAriaLabel = function() {\n        var ariaLabel = \"\";\n        if (host.$textInputAriaLabel) {\n            ariaLabel += `${host.$textInputAriaLabel}, `;\n        }\n        if(host.session) {\n            var row = host.session.selection.cursor.row;\n            ariaLabel += nls(\"text-input.aria-label\", \"Cursor at row $0\", [row + 1]);\n        }\n        text.setAttribute(\"aria-label\", ariaLabel);\n    };\n\n    this.setAriaOptions = function(options) {\n        if (options.activeDescendant) {\n            text.setAttribute(\"aria-haspopup\", \"true\");\n            text.setAttribute(\"aria-autocomplete\", options.inline ? \"both\" : \"list\");\n            text.setAttribute(\"aria-activedescendant\", options.activeDescendant);\n        } else {\n            text.setAttribute(\"aria-haspopup\", \"false\");\n            text.setAttribute(\"aria-autocomplete\", \"both\");\n            text.removeAttribute(\"aria-activedescendant\");\n        }\n        if (options.role) {\n            text.setAttribute(\"role\", options.role);\n        }     \n        if (options.setLabel) {\n            text.setAttribute(\"aria-roledescription\", nls(\"text-input.aria-roledescription\", \"editor\"));\n            this.setAriaLabel();\n        }\n    };\n\n    this.setAriaOptions({role: \"textbox\"});\n\n    event.addListener(text, \"blur\", function(e) {\n        if (ignoreFocusEvents) return;\n        host.onBlur(e);\n        isFocused = false;\n    }, host);\n    event.addListener(text, \"focus\", function(e) {\n        if (ignoreFocusEvents) return;\n        isFocused = true;\n        if (useragent.isEdge) {\n            // on edge focus event is fired even if document itself is not focused\n            try {\n                if (!document.hasFocus())\n                    return;\n            } catch(e) {}\n        }\n        host.onFocus(e);\n        if (useragent.isEdge)\n            setTimeout(resetSelection);\n        else\n            resetSelection();\n    }, host);\n    /**\n     * \n     * @type {boolean | string}\n     */\n    this.$focusScroll = false;\n    this.focus = function() {\n        // On focusing on the textarea, read active row number to assistive tech.\n        this.setAriaOptions({\n            setLabel: host.renderer.enableKeyboardAccessibility\n        });\n\n        if (tempStyle || HAS_FOCUS_ARGS || this.$focusScroll == \"browser\")\n            return text.focus({ preventScroll: true });\n\n        var top = text.style.top;\n        text.style.position = \"fixed\";\n        text.style.top = \"0px\";\n        try {\n            var isTransformed = text.getBoundingClientRect().top != 0;\n        } catch(e) {\n            // getBoundingClientRect on IE throws error if element is not in the dom tree\n            return;\n        }\n        var ancestors = [];\n        if (isTransformed) {\n            var t = text.parentElement;\n            while (t && t.nodeType == 1) {\n                ancestors.push(t);\n                t.setAttribute(\"ace_nocontext\", \"true\");\n                if (!t.parentElement && t.getRootNode)\n                    t = t.getRootNode()[\"host\"];\n                else\n                    t = t.parentElement;\n            }\n        }\n        text.focus({ preventScroll: true });\n        if (isTransformed) {\n            ancestors.forEach(function(p) {\n                p.removeAttribute(\"ace_nocontext\");\n            });\n        }\n        setTimeout(function() {\n            text.style.position = \"\";\n            if (text.style.top == \"0px\")\n                text.style.top = top;\n        }, 0);\n    };\n    this.blur = function() {\n        text.blur();\n    };\n    this.isFocused = function() {\n        return isFocused;\n    };\n    \n    host.on(\"beforeEndOperation\", function() {\n        var curOp = host.curOp;\n        var commandName = curOp && curOp.command && curOp.command.name;\n        if (commandName == \"insertstring\")\n            return;\n        var isUserAction = commandName && (curOp.docChanged || curOp.selectionChanged);\n        if (inComposition && isUserAction) {\n            // exit composition from commands other than insertstring\n            lastValue = text.value = \"\";\n            onCompositionEnd();\n        }\n        // sync value of textarea\n        resetSelection();\n    });\n\n    // if cursor changes position, we need to update the label with the correct row\n    host.on(\"changeSelection\", this.setAriaLabel);\n    \n    // Convert from row,column position to the linear position with respect to the current\n    // block of lines in the textarea.\n    var positionToSelection = function(row, column) {\n        var selection = column;\n\n        for (var i = 1; i <= row - rowStart && i < 2*numberOfExtraLines + 1; i++) {\n            selection += host.session.getLine(row - i).length + 1;\n        }\n        return selection;\n    };\n\n    var resetSelection = isIOS\n    ? function(value) {\n        if (!isFocused || (copied && !value) || sendingText) return;\n        if (!value) \n            value = \"\";\n        var newValue = \"\\n ab\" + value + \"cde fg\\n\";\n        if (newValue != text.value)\n            text.value = lastValue = newValue;\n        \n        var selectionStart = 4;\n        var selectionEnd = 4 + (value.length || (host.selection.isEmpty() ? 0 : 1));\n\n        if (lastSelectionStart != selectionStart || lastSelectionEnd != selectionEnd) {\n            text.setSelectionRange(selectionStart, selectionEnd);\n        }\n        lastSelectionStart = selectionStart;\n        lastSelectionEnd = selectionEnd;\n    }\n    : function() {\n        if (inComposition || sendingText)\n            return;\n        // modifying selection of blured textarea can focus it (chrome mac/linux)\n        if (!isFocused && !afterContextMenu)\n            return;\n        // see https://github.com/ajaxorg/ace/issues/2114\n        // this prevents infinite recursion on safari 8\n        inComposition = true;\n        \n        var selectionStart = 0;\n        var selectionEnd = 0;\n        var line = \"\";\n\n        if (host.session) {\n            var selection = host.selection;\n            var range = selection.getRange();\n            var row = selection.cursor.row;\n\n            // We keep 2*numberOfExtraLines + 1 lines in the textarea, if the new active row\n            // is within the current block of lines in the textarea we do nothing. If the new row\n            // is one row above or below the current block, move up or down to the next block of lines.\n            // If the new row is further than 1 row away from the current block grab a new block centered \n            // around the new row.\n            if (row === rowEnd + 1) {\n                rowStart = rowEnd + 1;\n                rowEnd = rowStart + 2*numberOfExtraLines;\n            } else if (row === rowStart - 1) {\n                rowEnd = rowStart - 1;\n                rowStart = rowEnd - 2*numberOfExtraLines;\n            } else if (row < rowStart - 1 || row > rowEnd + 1) {\n                rowStart = row > numberOfExtraLines ? row - numberOfExtraLines : 0;\n                rowEnd = row > numberOfExtraLines ? row + numberOfExtraLines : 2*numberOfExtraLines;\n            }\n            \n            var lines = [];\n\n            for (var i = rowStart; i <= rowEnd; i++) {\n                lines.push(host.session.getLine(i));\n            }\n            \n            line = lines.join('\\n');\n\n            selectionStart = positionToSelection(range.start.row, range.start.column);\n            selectionEnd = positionToSelection(range.end.row, range.end.column);\n            \n            if (range.start.row < rowStart) {\n                var prevLine = host.session.getLine(rowStart - 1);\n                selectionStart = range.start.row < rowStart - 1 ? 0 : selectionStart;\n                selectionEnd += prevLine.length + 1;\n                line = prevLine + \"\\n\" + line;\n            }\n            else if (range.end.row > rowEnd) {\n                var nextLine = host.session.getLine(rowEnd + 1);\n                selectionEnd = range.end.row > rowEnd + 1 ? nextLine.length : range.end.column;\n                selectionEnd += line.length + 1;\n                line = line + \"\\n\" + nextLine;\n            }\n            else if (isMobile && row > 0) {\n                line = \"\\n\" + line;\n                selectionEnd += 1;\n                selectionStart += 1;\n            }\n\n            if (line.length > MAX_LINE_LENGTH) {\n                if (selectionStart < MAX_LINE_LENGTH && selectionEnd < MAX_LINE_LENGTH) {\n                    line = line.slice(0, MAX_LINE_LENGTH);\n                } else {\n                    line = \"\\n\";\n                    if (selectionStart == selectionEnd) {\n                        selectionStart = selectionEnd = 0;\n                    }\n                    else {\n                        selectionStart = 0;\n                        selectionEnd = 1;\n                    }\n                }\n            }\n        \n            var newValue = line + \"\\n\\n\";\n            if (newValue != lastValue) {\n                text.value = lastValue = newValue;\n                lastSelectionStart = lastSelectionEnd = newValue.length;\n            }\n        }\n        \n        // contextmenu on mac may change the selection\n        if (afterContextMenu) {\n            lastSelectionStart = text.selectionStart;\n            lastSelectionEnd = text.selectionEnd;\n        }\n        // on firefox this throws if textarea is hidden\n        if (\n            lastSelectionEnd != selectionEnd \n            || lastSelectionStart != selectionStart \n            || text.selectionEnd != lastSelectionEnd // on ie edge selectionEnd changes silently after the initialization\n        ) {\n            try {\n                text.setSelectionRange(selectionStart, selectionEnd);\n                lastSelectionStart = selectionStart;\n                lastSelectionEnd = selectionEnd;\n            } catch(e){}\n        }\n        inComposition = false;\n    };\n    this.resetSelection = resetSelection;\n\n    if (isFocused)\n        host.onFocus();\n\n\n    var isAllSelected = function(text) {\n        return text.selectionStart === 0 && text.selectionEnd >= lastValue.length\n            && text.value === lastValue && lastValue\n            && text.selectionEnd !== lastSelectionEnd;\n    };\n\n    var onSelect = function(e) {\n        if (inComposition)\n            return;\n        if (copied) {\n            copied = false;\n        } else if (isAllSelected(text)) {\n            host.selectAll();\n            resetSelection();\n        } else if (isMobile && text.selectionStart != lastSelectionStart) {\n            resetSelection();\n        }\n    };\n\n\n    var inputHandler = null;\n    this.setInputHandler = function(cb) {inputHandler = cb;};\n    this.getInputHandler = function() {return inputHandler;};\n    var afterContextMenu = false;\n    \n    var sendText = function(value, fromInput) {\n        if (afterContextMenu)\n            afterContextMenu = false;\n        if (pasted) {\n            resetSelection();\n            if (value)\n                host.onPaste(value);\n            pasted = false;\n            return \"\";\n        } else {\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n        \n            var extendLeft = lastSelectionStart;\n            var extendRight = lastValue.length - lastSelectionEnd;\n            \n            var inserted = value;\n            var restoreStart = value.length - selectionStart;\n            var restoreEnd = value.length - selectionEnd;\n        \n            var i = 0;\n            while (extendLeft > 0 && lastValue[i] == value[i]) {\n                i++;\n                extendLeft--;\n            }\n            inserted = inserted.slice(i);\n            i = 1;\n            while (extendRight > 0 && lastValue.length - i > lastSelectionStart - 1  && lastValue[lastValue.length - i] == value[value.length - i]) {\n                i++;\n                extendRight--;\n            }\n            restoreStart -= i-1;\n            restoreEnd -= i-1;\n            var endIndex = inserted.length - i + 1;\n            if (endIndex < 0) {\n                extendLeft = -endIndex;\n                endIndex = 0;\n            } \n            inserted = inserted.slice(0, endIndex);\n            \n            // composition update can be called without any change\n            if (!fromInput && !inserted && !restoreStart && !extendLeft && !extendRight && !restoreEnd)\n                return \"\";\n            sendingText = true;\n            \n            // some android keyboards converts two spaces into sentence end, which is not useful for code\n            var shouldReset = false;\n            if (useragent.isAndroid && inserted == \". \") {\n                inserted = \"  \";\n                shouldReset = true;\n            }\n            \n            if (inserted && !extendLeft && !extendRight && !restoreStart && !restoreEnd || commandMode) {\n                host.onTextInput(inserted);\n            } else {\n                host.onTextInput(inserted, {\n                    extendLeft: extendLeft,\n                    extendRight: extendRight,\n                    restoreStart: restoreStart,\n                    restoreEnd: restoreEnd\n                });\n            }\n            sendingText = false;\n            \n            lastValue = value;\n            lastSelectionStart = selectionStart;\n            lastSelectionEnd = selectionEnd;\n            lastRestoreEnd = restoreEnd;\n            return shouldReset ? \"\\n\" : inserted;\n        }\n    };\n    var onInput = function(e) {\n        if (inComposition)\n            return onCompositionUpdate();\n        if (e && e.inputType) {\n            if (e.inputType == \"historyUndo\") return host.execCommand(\"undo\");\n            if (e.inputType == \"historyRedo\") return host.execCommand(\"redo\");\n        }\n        var data = text.value;\n        var inserted = sendText(data, true);\n        if (\n            data.length > MAX_LINE_LENGTH + 100 \n            || valueResetRegex.test(inserted)\n            || isMobile && lastSelectionStart < 1 && lastSelectionStart == lastSelectionEnd\n        ) {\n            resetSelection();\n        }\n    };\n    \n    var handleClipboardData = function(e, data, forceIEMime) {\n        var clipboardData = e.clipboardData || window[\"clipboardData\"];\n        if (!clipboardData || BROKEN_SETDATA)\n            return;\n        // using \"Text\" doesn't work on old webkit but ie needs it\n        var mime = USE_IE_MIME_TYPE || forceIEMime ? \"Text\" : \"text/plain\";\n        try {\n            if (data) {\n                // Safari 5 has clipboardData object, but does not handle setData()\n                return clipboardData.setData(mime, data) !== false;\n            } else {\n                return clipboardData.getData(mime);\n            }\n        } catch(e) {\n            if (!forceIEMime)\n                return handleClipboardData(e, data, true);\n        }\n    };\n\n    var doCopy = function(e, isCut) {\n        var data = host.getCopyText();\n        if (!data)\n            return event.preventDefault(e);\n\n        if (handleClipboardData(e, data)) {\n            if (isIOS) {\n                resetSelection(data);\n                copied = data;\n                setTimeout(function () {\n                    copied = false;\n                }, 10);\n            }\n            isCut ? host.onCut() : host.onCopy();\n            event.preventDefault(e);\n        } else {\n            copied = true;\n            text.value = data;\n            text.select();\n            setTimeout(function(){\n                copied = false;\n                resetSelection();\n                isCut ? host.onCut() : host.onCopy();\n            });\n        }\n    };\n    \n    var onCut = function(e) {\n        doCopy(e, true);\n    };\n    \n    var onCopy = function(e) {\n        doCopy(e, false);\n    };\n    \n    var onPaste = function(e) {\n        var data = handleClipboardData(e);\n        if (clipboard.pasteCancelled())\n            return;\n        if (typeof data == \"string\") {\n            if (data)\n                host.onPaste(data, e);\n            if (useragent.isIE)\n                setTimeout(resetSelection);\n            event.preventDefault(e);\n        }\n        else {\n            text.value = \"\";\n            pasted = true;\n        }\n    };\n\n    event.addCommandKeyListener(text, function(e, hashId, keyCode) {\n        // ignore command events during composition as they will \n        // either be handled by ime itself or fired again after ime end\n        if (inComposition) return;\n        return host.onCommandKey(e, hashId, keyCode);\n    }, host);\n\n    event.addListener(text, \"select\", onSelect, host);\n    event.addListener(text, \"input\", onInput, host);\n\n    event.addListener(text, \"cut\", onCut, host);\n    event.addListener(text, \"copy\", onCopy, host);\n    event.addListener(text, \"paste\", onPaste, host);\n\n\n    // Opera has no clipboard events\n    if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)) {\n        event.addListener(parentNode, \"keydown\", function(e) {\n            if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)\n                return;\n\n            switch (e.keyCode) {\n                case 67:\n                    onCopy(e);\n                    break;\n                case 86:\n                    onPaste(e);\n                    break;\n                case 88:\n                    onCut(e);\n                    break;\n            }\n        }, host);\n    }\n\n\n    // COMPOSITION\n    var onCompositionStart = function(e) {\n        if (inComposition || !host.onCompositionStart || host.$readOnly) \n            return;\n        \n        inComposition = {};\n\n        if (commandMode)\n            return;\n        \n        if (e.data)\n            inComposition.useTextareaForIME = false;\n        \n        setTimeout(onCompositionUpdate, 0);\n        host._signal(\"compositionStart\");\n        host.on(\"mousedown\", cancelComposition);\n        \n        var range = host.getSelectionRange();\n        range.end.row = range.start.row;\n        range.end.column = range.start.column;\n        inComposition.markerRange = range;\n        inComposition.selectionStart = lastSelectionStart;\n        host.onCompositionStart(inComposition);\n        \n        if (inComposition.useTextareaForIME) {\n            lastValue = text.value = \"\";\n            lastSelectionStart = 0;\n            lastSelectionEnd = 0;\n        }\n        else {\n            if (text.msGetInputContext)\n                inComposition.context = text.msGetInputContext();\n            if (text.getInputContext)\n                inComposition.context = text.getInputContext();\n        }\n    };\n\n    var onCompositionUpdate = function() {\n        if (!inComposition || !host.onCompositionUpdate || host.$readOnly)\n            return;\n        if (commandMode)\n            return cancelComposition();\n        \n        if (inComposition.useTextareaForIME) {\n            host.onCompositionUpdate(text.value);\n        }\n        else {\n            var data = text.value;\n            sendText(data);\n            if (inComposition.markerRange) {\n                if (inComposition.context) {\n                    inComposition.markerRange.start.column = inComposition.selectionStart\n                        = inComposition.context.compositionStartOffset;\n                }\n                inComposition.markerRange.end.column = inComposition.markerRange.start.column\n                    + lastSelectionEnd - inComposition.selectionStart + lastRestoreEnd;\n            }\n        }\n    };\n\n    var onCompositionEnd = function(e) {\n        if (!host.onCompositionEnd || host.$readOnly) return;\n        inComposition = false;\n        host.onCompositionEnd();\n        host.off(\"mousedown\", cancelComposition);\n        // note that resetting value of textarea at this point doesn't always work\n        // because textarea value can be silently restored\n        if (e) onInput();\n    };\n    \n\n    function cancelComposition() {\n        // force end composition\n        ignoreFocusEvents = true;\n        text.blur();\n        text.focus();\n        ignoreFocusEvents = false;\n    }\n\n    var syncComposition = lang.delayedCall(onCompositionUpdate, 50).schedule.bind(null, null);\n    \n    function onKeyup(e) {\n        // workaround for a bug in ie where pressing esc silently moves selection out of textarea\n        if (e.keyCode == 27 && text.value.length < text.selectionStart) {\n            if (!inComposition)\n                lastValue = text.value;\n            lastSelectionStart = lastSelectionEnd = -1;\n            resetSelection();\n        }\n        syncComposition();\n    }\n\n    event.addListener(text, \"compositionstart\", onCompositionStart, host);\n    event.addListener(text, \"compositionupdate\", onCompositionUpdate, host);\n    event.addListener(text, \"keyup\", onKeyup, host);\n    event.addListener(text, \"keydown\", syncComposition, host);\n    event.addListener(text, \"compositionend\", onCompositionEnd, host);\n\n    this.getElement = function() {\n        return text;\n    };\n    \n    // allows to ignore composition (used by vim keyboard handler in the normal mode)\n    // this is useful on mac, where with some keyboard layouts (e.g swedish) ^ starts composition\n    this.setCommandMode = function(value) {\n        commandMode = value;\n        text.readOnly = false;\n    };\n    \n    this.setReadOnly = function(readOnly) {\n        if (!commandMode)\n            text.readOnly = readOnly;\n    };\n\n    this.setCopyWithEmptySelection = function(value) {\n    };\n\n    this.onContextMenu = function(e) {\n        afterContextMenu = true;\n        resetSelection();\n        host._emit(\"nativecontextmenu\", {target: host, domEvent: e});\n        this.moveToMouse(e, true);\n    };\n    \n    this.moveToMouse = function(e, bringToFront) {\n        if (!tempStyle)\n            tempStyle = text.style.cssText;\n        text.style.cssText = (bringToFront ? \"z-index:100000;\" : \"\")\n            + (useragent.isIE ? \"opacity:0.1;\" : \"\")\n            + \"text-indent: -\" + (lastSelectionStart + lastSelectionEnd) * host.renderer.characterWidth * 0.5 + \"px;\";\n\n        var rect = host.container.getBoundingClientRect();\n        var style = dom.computedStyle(host.container);\n        var top = rect.top + (parseInt(style.borderTopWidth) || 0);\n        var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);\n        var maxTop = rect.bottom - top - text.clientHeight -2;\n        var move = function(e) {\n            dom.translate(text, e.clientX - left - 2, Math.min(e.clientY - top - 2, maxTop));\n        }; \n        move(e);\n\n        if (e.type != \"mousedown\")\n            return;\n\n        host.renderer.$isMousePressed = true;\n\n        clearTimeout(closeTimeout);\n        // on windows context menu is opened after mouseup\n        if (useragent.isWin)\n            event.capture(host.container, move, onContextMenuClose);\n    };\n\n    this.onContextMenuClose = onContextMenuClose;\n    var closeTimeout;\n    function onContextMenuClose() {\n        clearTimeout(closeTimeout);\n        closeTimeout = setTimeout(function () {\n            if (tempStyle) {\n                text.style.cssText = tempStyle;\n                tempStyle = '';\n            }\n            host.renderer.$isMousePressed = false;\n            if (host.renderer.$keepTextAreaAtCursor)\n                host.renderer.$moveTextAreaToCursor();\n        }, 0);\n    }\n\n    var onContextMenu = function(e) {\n        host.textInput.onContextMenu(e);\n        onContextMenuClose();\n    };\n    event.addListener(text, \"mouseup\", onContextMenu, host);\n    event.addListener(text, \"mousedown\", function(e) {\n        e.preventDefault();\n        onContextMenuClose();\n    }, host);\n    event.addListener(host.renderer.scroller, \"contextmenu\", onContextMenu, host);\n    event.addListener(text, \"contextmenu\", onContextMenu, host);\n    \n    if (isIOS)\n        addIosSelectionHandler(parentNode, host, text);\n\n    function addIosSelectionHandler(parentNode, host, text) {\n        var typingResetTimeout = null;\n        var typing = false;\n\n        text.addEventListener(\"keydown\", function (e) {\n            if (typingResetTimeout) clearTimeout(typingResetTimeout);\n            typing = true;\n        }, true);\n\n        text.addEventListener(\"keyup\", function (e) {\n            typingResetTimeout = setTimeout(function () {\n                typing = false;\n            }, 100);\n        }, true);\n    \n        // IOS doesn't fire events for arrow keys, but this unique hack changes everything!\n        var detectArrowKeys = function(e) {\n            if (document.activeElement !== text) return;\n            if (typing || inComposition || host.$mouseHandler.isMousePressed) return;\n\n            if (copied) {\n                return;\n            }\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n            \n            var key = null;\n            var modifier = 0;\n            // console.log(selectionStart, selectionEnd);\n            if (selectionStart == 0) {\n                key = KEYS.up;\n            } else if (selectionStart == 1) {\n                key = KEYS.home;\n            } else if (selectionEnd > lastSelectionEnd && lastValue[selectionEnd] == \"\\n\") {\n                key = KEYS.end;\n            } else if (selectionStart < lastSelectionStart && lastValue[selectionStart - 1] == \" \") {\n                key = KEYS.left;\n                modifier = MODS.option;\n            } else if (\n                selectionStart < lastSelectionStart\n                || (\n                    selectionStart == lastSelectionStart \n                    && lastSelectionEnd != lastSelectionStart\n                    && selectionStart == selectionEnd\n                )\n            ) {\n                key = KEYS.left;\n            } else if (selectionEnd > lastSelectionEnd && lastValue.slice(0, selectionEnd).split(\"\\n\").length > 2) {\n                key = KEYS.down;\n            } else if (selectionEnd > lastSelectionEnd && lastValue[selectionEnd - 1] == \" \") {\n                key = KEYS.right;\n                modifier = MODS.option;\n            } else if (\n                selectionEnd > lastSelectionEnd\n                || (\n                    selectionEnd == lastSelectionEnd \n                    && lastSelectionEnd != lastSelectionStart\n                    && selectionStart == selectionEnd\n                )\n            ) {\n                key = KEYS.right;\n            }\n            \n            if (selectionStart !== selectionEnd)\n                modifier |= MODS.shift;\n\n            if (key) {\n                var result = host.onCommandKey({}, modifier, key);\n                if (!result && host.commands) {\n                    key = KEYS.keyCodeToString(key);\n                    var command = host.commands.findKeyCommand(modifier, key);\n                    if (command)\n                        host.execCommand(command);\n                }\n                lastSelectionStart = selectionStart;\n                lastSelectionEnd = selectionEnd;\n                resetSelection(\"\");\n            }\n        };\n        // On iOS, \"selectionchange\" can only be attached to the document object...\n        document.addEventListener(\"selectionchange\", detectArrowKeys);\n        host.on(\"destroy\", function() {\n            document.removeEventListener(\"selectionchange\", detectArrowKeys);\n        });\n    }\n\n    this.destroy = function() {\n        if (text.parentElement)\n            text.parentElement.removeChild(text);\n    };\n};\n\nexports.TextInput = TextInput;\nexports.$setUserAgentForTests = function(_isMobile, _isIOS) {\n    isMobile = _isMobile;\n    isIOS = _isIOS;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2tleWJvYXJkL3RleHRpbnB1dC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixZQUFZLG1CQUFPLENBQUMsOERBQWM7QUFDbEMsVUFBVSxtRkFBd0I7QUFDbEMsZ0JBQWdCLG1CQUFPLENBQUMsc0VBQWtCO0FBQzFDLFVBQVUsbUJBQU8sQ0FBQywwREFBWTtBQUM5QixXQUFXLG1CQUFPLENBQUMsNERBQWE7QUFDaEMsZ0JBQWdCLG1CQUFPLENBQUMsOERBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVcsbUJBQU8sQ0FBQyw0REFBYTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyx1QkFBdUIsMkJBQTJCLCtCQUErQiwyQkFBMkIsaUNBQWlDO0FBQzNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxvQkFBb0IsMEZBQTBGO0FBQzVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbURBQW1EOztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix5QkFBeUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCLGdCQUFnQjs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsZ0NBQWdDLHFCQUFxQjs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscUJBQXFCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLHFEQUFxRDtBQUM3RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1DQUFtQyxhQUFhO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EseUNBQXlDO0FBQ3pDLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDBCQUEwQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0QsNkNBQTZDO0FBQzdDLG9IQUFvSDs7QUFFcEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUI7QUFDakIsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2tleWJvYXJkL3RleHRpbnB1dC5qcz8zNTdjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgZXZlbnQgPSByZXF1aXJlKFwiLi4vbGliL2V2ZW50XCIpO1xudmFyIG5scyA9IHJlcXVpcmUoXCIuLi9jb25maWdcIikubmxzO1xudmFyIHVzZXJhZ2VudCA9IHJlcXVpcmUoXCIuLi9saWIvdXNlcmFnZW50XCIpO1xudmFyIGRvbSA9IHJlcXVpcmUoXCIuLi9saWIvZG9tXCIpO1xudmFyIGxhbmcgPSByZXF1aXJlKFwiLi4vbGliL2xhbmdcIik7XG52YXIgY2xpcGJvYXJkID0gcmVxdWlyZShcIi4uL2NsaXBib2FyZFwiKTtcbnZhciBCUk9LRU5fU0VUREFUQSA9IHVzZXJhZ2VudC5pc0Nocm9tZSA8IDE4O1xudmFyIFVTRV9JRV9NSU1FX1RZUEUgPSAgdXNlcmFnZW50LmlzSUU7XG52YXIgSEFTX0ZPQ1VTX0FSR1MgPSB1c2VyYWdlbnQuaXNDaHJvbWUgPiA2MztcbnZhciBNQVhfTElORV9MRU5HVEggPSA0MDA7XG5cbi8qKlxuICogXG4gKiBAdHlwZSB7e1trZXk6IHN0cmluZ106IGFueX19XG4gKi9cbnZhciBLRVlTID0gcmVxdWlyZShcIi4uL2xpYi9rZXlzXCIpO1xudmFyIE1PRFMgPSBLRVlTLktFWV9NT0RTO1xudmFyIGlzSU9TID0gdXNlcmFnZW50LmlzSU9TO1xudmFyIHZhbHVlUmVzZXRSZWdleCA9IGlzSU9TID8gL1xccy8gOiAvXFxuLztcbnZhciBpc01vYmlsZSA9IHVzZXJhZ2VudC5pc01vYmlsZTtcblxudmFyIFRleHRJbnB1dDtcblRleHRJbnB1dD0gZnVuY3Rpb24ocGFyZW50Tm9kZSwgaG9zdCkge1xuICAgIC8qKkB0eXBlIHtIVE1MVGV4dEFyZWFFbGVtZW50ICYge21zR2V0SW5wdXRDb250ZXh0PzogKCkgPT4ge2NvbXBvc2l0aW9uU3RhcnRPZmZzZXQ6IG51bWJlcn0sIGdldElucHV0Q29udGV4dD86ICgpID0+IHtjb21wb3NpdGlvblN0YXJ0T2Zmc2V0OiBudW1iZXJ9fX0qL1xuICAgIHZhciB0ZXh0ID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcbiAgICB0ZXh0LmNsYXNzTmFtZSA9IFwiYWNlX3RleHQtaW5wdXRcIjtcblxuICAgIHRleHQuc2V0QXR0cmlidXRlKFwid3JhcFwiLCBcIm9mZlwiKTtcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIsIFwib2ZmXCIpO1xuICAgIHRleHQuc2V0QXR0cmlidXRlKFwiYXV0b2NhcGl0YWxpemVcIiwgXCJvZmZcIik7XG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJzcGVsbGNoZWNrXCIsIFwiZmFsc2VcIik7XG5cbiAgICB0ZXh0LnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ZXh0LCBwYXJlbnROb2RlLmZpcnN0Q2hpbGQpO1xuXG4gICAgdmFyIGNvcGllZCA9IGZhbHNlO1xuICAgIHZhciBwYXN0ZWQgPSBmYWxzZTtcbiAgICAvKipAdHlwZSB7KGJvb2xlYW58T2JqZWN0KSAmIHtjb250ZXh0PzogYW55LCB1c2VUZXh0YXJlYUZvcklNRT86IGJvb2xlYW4sIHNlbGVjdGlvblN0YXJ0PzogbnVtYmVyLCBtYXJrZXJSYW5nZT86IGFueX19fSAqL1xuICAgIHZhciBpbkNvbXBvc2l0aW9uID0gZmFsc2U7XG4gICAgdmFyIHNlbmRpbmdUZXh0ID0gZmFsc2U7XG4gICAgdmFyIHRlbXBTdHlsZSA9ICcnO1xuICAgIFxuICAgIGlmICghaXNNb2JpbGUpXG4gICAgICAgIHRleHQuc3R5bGUuZm9udFNpemUgPSBcIjFweFwiO1xuXG4gICAgdmFyIGNvbW1hbmRNb2RlID0gZmFsc2U7XG4gICAgdmFyIGlnbm9yZUZvY3VzRXZlbnRzID0gZmFsc2U7XG4gICAgXG4gICAgdmFyIGxhc3RWYWx1ZSA9IFwiXCI7XG4gICAgdmFyIGxhc3RTZWxlY3Rpb25TdGFydCA9IDA7XG4gICAgdmFyIGxhc3RTZWxlY3Rpb25FbmQgPSAwO1xuICAgIHZhciBsYXN0UmVzdG9yZUVuZCA9IDA7XG4gICAgdmFyIHJvd1N0YXJ0ID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gICAgdmFyIHJvd0VuZCA9IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xuICAgIHZhciBudW1iZXJPZkV4dHJhTGluZXMgPSAwO1xuICAgIFxuICAgIC8vIEZPQ1VTXG4gICAgLy8gaWU5IHRocm93cyBlcnJvciBpZiBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGlzIGFjY2Vzc2VkIHRvbyBzb29uXG4gICAgdHJ5IHsgdmFyIGlzRm9jdXNlZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRleHQ7IH0gY2F0Y2goZSkge31cblxuICAgIC8vIFNldCBudW1iZXIgb2YgZXh0cmEgbGluZXMgaW4gdGV4dGFyZWEsIHNvbWUgc2NyZWVucmVhZGVyc1xuICAgIC8vIHBlcmZvcm0gYmV0dGVyIHdpdGggZXh0cmEgbGluZXMgYWJvdmUgYW5kIGJlbG93IGluIHRoZSB0ZXh0YXJlYS5cbiAgICB0aGlzLnNldE51bWJlck9mRXh0cmFMaW5lcyA9IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICByb3dTdGFydCA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgICAgICByb3dFbmQgPSAgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVI7XG5cbiAgICAgICAgaWYgKG51bWJlciA8IDApIHtcbiAgICAgICAgICAgIG51bWJlck9mRXh0cmFMaW5lcyA9IDA7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIG51bWJlck9mRXh0cmFMaW5lcyA9IG51bWJlcjtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRBcmlhTGFiZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyaWFMYWJlbCA9IFwiXCI7XG4gICAgICAgIGlmIChob3N0LiR0ZXh0SW5wdXRBcmlhTGFiZWwpIHtcbiAgICAgICAgICAgIGFyaWFMYWJlbCArPSBgJHtob3N0LiR0ZXh0SW5wdXRBcmlhTGFiZWx9LCBgO1xuICAgICAgICB9XG4gICAgICAgIGlmKGhvc3Quc2Vzc2lvbikge1xuICAgICAgICAgICAgdmFyIHJvdyA9IGhvc3Quc2Vzc2lvbi5zZWxlY3Rpb24uY3Vyc29yLnJvdztcbiAgICAgICAgICAgIGFyaWFMYWJlbCArPSBubHMoXCJ0ZXh0LWlucHV0LmFyaWEtbGFiZWxcIiwgXCJDdXJzb3IgYXQgcm93ICQwXCIsIFtyb3cgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIGFyaWFMYWJlbCk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0QXJpYU9wdGlvbnMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFjdGl2ZURlc2NlbmRhbnQpIHtcbiAgICAgICAgICAgIHRleHQuc2V0QXR0cmlidXRlKFwiYXJpYS1oYXNwb3B1cFwiLCBcInRydWVcIik7XG4gICAgICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZShcImFyaWEtYXV0b2NvbXBsZXRlXCIsIG9wdGlvbnMuaW5saW5lID8gXCJib3RoXCIgOiBcImxpc3RcIik7XG4gICAgICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZShcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLCBvcHRpb25zLmFjdGl2ZURlc2NlbmRhbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhhc3BvcHVwXCIsIFwiZmFsc2VcIik7XG4gICAgICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZShcImFyaWEtYXV0b2NvbXBsZXRlXCIsIFwiYm90aFwiKTtcbiAgICAgICAgICAgIHRleHQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnJvbGUpIHtcbiAgICAgICAgICAgIHRleHQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBvcHRpb25zLnJvbGUpO1xuICAgICAgICB9ICAgICBcbiAgICAgICAgaWYgKG9wdGlvbnMuc2V0TGFiZWwpIHtcbiAgICAgICAgICAgIHRleHQuc2V0QXR0cmlidXRlKFwiYXJpYS1yb2xlZGVzY3JpcHRpb25cIiwgbmxzKFwidGV4dC1pbnB1dC5hcmlhLXJvbGVkZXNjcmlwdGlvblwiLCBcImVkaXRvclwiKSk7XG4gICAgICAgICAgICB0aGlzLnNldEFyaWFMYWJlbCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0QXJpYU9wdGlvbnMoe3JvbGU6IFwidGV4dGJveFwifSk7XG5cbiAgICBldmVudC5hZGRMaXN0ZW5lcih0ZXh0LCBcImJsdXJcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoaWdub3JlRm9jdXNFdmVudHMpIHJldHVybjtcbiAgICAgICAgaG9zdC5vbkJsdXIoZSk7XG4gICAgICAgIGlzRm9jdXNlZCA9IGZhbHNlO1xuICAgIH0sIGhvc3QpO1xuICAgIGV2ZW50LmFkZExpc3RlbmVyKHRleHQsIFwiZm9jdXNcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoaWdub3JlRm9jdXNFdmVudHMpIHJldHVybjtcbiAgICAgICAgaXNGb2N1c2VkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHVzZXJhZ2VudC5pc0VkZ2UpIHtcbiAgICAgICAgICAgIC8vIG9uIGVkZ2UgZm9jdXMgZXZlbnQgaXMgZmlyZWQgZXZlbiBpZiBkb2N1bWVudCBpdHNlbGYgaXMgbm90IGZvY3VzZWRcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5oYXNGb2N1cygpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHt9XG4gICAgICAgIH1cbiAgICAgICAgaG9zdC5vbkZvY3VzKGUpO1xuICAgICAgICBpZiAodXNlcmFnZW50LmlzRWRnZSlcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzZXRTZWxlY3Rpb24pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXNldFNlbGVjdGlvbigpO1xuICAgIH0sIGhvc3QpO1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtib29sZWFuIHwgc3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMuJGZvY3VzU2Nyb2xsID0gZmFsc2U7XG4gICAgdGhpcy5mb2N1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBPbiBmb2N1c2luZyBvbiB0aGUgdGV4dGFyZWEsIHJlYWQgYWN0aXZlIHJvdyBudW1iZXIgdG8gYXNzaXN0aXZlIHRlY2guXG4gICAgICAgIHRoaXMuc2V0QXJpYU9wdGlvbnMoe1xuICAgICAgICAgICAgc2V0TGFiZWw6IGhvc3QucmVuZGVyZXIuZW5hYmxlS2V5Ym9hcmRBY2Nlc3NpYmlsaXR5XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0ZW1wU3R5bGUgfHwgSEFTX0ZPQ1VTX0FSR1MgfHwgdGhpcy4kZm9jdXNTY3JvbGwgPT0gXCJicm93c2VyXCIpXG4gICAgICAgICAgICByZXR1cm4gdGV4dC5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG5cbiAgICAgICAgdmFyIHRvcCA9IHRleHQuc3R5bGUudG9wO1xuICAgICAgICB0ZXh0LnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiO1xuICAgICAgICB0ZXh0LnN0eWxlLnRvcCA9IFwiMHB4XCI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgaXNUcmFuc2Zvcm1lZCA9IHRleHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICE9IDA7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgLy8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIElFIHRocm93cyBlcnJvciBpZiBlbGVtZW50IGlzIG5vdCBpbiB0aGUgZG9tIHRyZWVcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5jZXN0b3JzID0gW107XG4gICAgICAgIGlmIChpc1RyYW5zZm9ybWVkKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRleHQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIHdoaWxlICh0ICYmIHQubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgICAgIGFuY2VzdG9ycy5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIHQuc2V0QXR0cmlidXRlKFwiYWNlX25vY29udGV4dFwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgaWYgKCF0LnBhcmVudEVsZW1lbnQgJiYgdC5nZXRSb290Tm9kZSlcbiAgICAgICAgICAgICAgICAgICAgdCA9IHQuZ2V0Um9vdE5vZGUoKVtcImhvc3RcIl07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0ID0gdC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRleHQuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xuICAgICAgICBpZiAoaXNUcmFuc2Zvcm1lZCkge1xuICAgICAgICAgICAgYW5jZXN0b3JzLmZvckVhY2goZnVuY3Rpb24ocCkge1xuICAgICAgICAgICAgICAgIHAucmVtb3ZlQXR0cmlidXRlKFwiYWNlX25vY29udGV4dFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0ZXh0LnN0eWxlLnBvc2l0aW9uID0gXCJcIjtcbiAgICAgICAgICAgIGlmICh0ZXh0LnN0eWxlLnRvcCA9PSBcIjBweFwiKVxuICAgICAgICAgICAgICAgIHRleHQuc3R5bGUudG9wID0gdG9wO1xuICAgICAgICB9LCAwKTtcbiAgICB9O1xuICAgIHRoaXMuYmx1ciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0ZXh0LmJsdXIoKTtcbiAgICB9O1xuICAgIHRoaXMuaXNGb2N1c2VkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpc0ZvY3VzZWQ7XG4gICAgfTtcbiAgICBcbiAgICBob3N0Lm9uKFwiYmVmb3JlRW5kT3BlcmF0aW9uXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3VyT3AgPSBob3N0LmN1ck9wO1xuICAgICAgICB2YXIgY29tbWFuZE5hbWUgPSBjdXJPcCAmJiBjdXJPcC5jb21tYW5kICYmIGN1ck9wLmNvbW1hbmQubmFtZTtcbiAgICAgICAgaWYgKGNvbW1hbmROYW1lID09IFwiaW5zZXJ0c3RyaW5nXCIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBpc1VzZXJBY3Rpb24gPSBjb21tYW5kTmFtZSAmJiAoY3VyT3AuZG9jQ2hhbmdlZCB8fCBjdXJPcC5zZWxlY3Rpb25DaGFuZ2VkKTtcbiAgICAgICAgaWYgKGluQ29tcG9zaXRpb24gJiYgaXNVc2VyQWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBleGl0IGNvbXBvc2l0aW9uIGZyb20gY29tbWFuZHMgb3RoZXIgdGhhbiBpbnNlcnRzdHJpbmdcbiAgICAgICAgICAgIGxhc3RWYWx1ZSA9IHRleHQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgb25Db21wb3NpdGlvbkVuZCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN5bmMgdmFsdWUgb2YgdGV4dGFyZWFcbiAgICAgICAgcmVzZXRTZWxlY3Rpb24oKTtcbiAgICB9KTtcblxuICAgIC8vIGlmIGN1cnNvciBjaGFuZ2VzIHBvc2l0aW9uLCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgbGFiZWwgd2l0aCB0aGUgY29ycmVjdCByb3dcbiAgICBob3N0Lm9uKFwiY2hhbmdlU2VsZWN0aW9uXCIsIHRoaXMuc2V0QXJpYUxhYmVsKTtcbiAgICBcbiAgICAvLyBDb252ZXJ0IGZyb20gcm93LGNvbHVtbiBwb3NpdGlvbiB0byB0aGUgbGluZWFyIHBvc2l0aW9uIHdpdGggcmVzcGVjdCB0byB0aGUgY3VycmVudFxuICAgIC8vIGJsb2NrIG9mIGxpbmVzIGluIHRoZSB0ZXh0YXJlYS5cbiAgICB2YXIgcG9zaXRpb25Ub1NlbGVjdGlvbiA9IGZ1bmN0aW9uKHJvdywgY29sdW1uKSB7XG4gICAgICAgIHZhciBzZWxlY3Rpb24gPSBjb2x1bW47XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcm93IC0gcm93U3RhcnQgJiYgaSA8IDIqbnVtYmVyT2ZFeHRyYUxpbmVzICsgMTsgaSsrKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24gKz0gaG9zdC5zZXNzaW9uLmdldExpbmUocm93IC0gaSkubGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgIH07XG5cbiAgICB2YXIgcmVzZXRTZWxlY3Rpb24gPSBpc0lPU1xuICAgID8gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKCFpc0ZvY3VzZWQgfHwgKGNvcGllZCAmJiAhdmFsdWUpIHx8IHNlbmRpbmdUZXh0KSByZXR1cm47XG4gICAgICAgIGlmICghdmFsdWUpIFxuICAgICAgICAgICAgdmFsdWUgPSBcIlwiO1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSBcIlxcbiBhYlwiICsgdmFsdWUgKyBcImNkZSBmZ1xcblwiO1xuICAgICAgICBpZiAobmV3VmFsdWUgIT0gdGV4dC52YWx1ZSlcbiAgICAgICAgICAgIHRleHQudmFsdWUgPSBsYXN0VmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgXG4gICAgICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IDQ7XG4gICAgICAgIHZhciBzZWxlY3Rpb25FbmQgPSA0ICsgKHZhbHVlLmxlbmd0aCB8fCAoaG9zdC5zZWxlY3Rpb24uaXNFbXB0eSgpID8gMCA6IDEpKTtcblxuICAgICAgICBpZiAobGFzdFNlbGVjdGlvblN0YXJ0ICE9IHNlbGVjdGlvblN0YXJ0IHx8IGxhc3RTZWxlY3Rpb25FbmQgIT0gc2VsZWN0aW9uRW5kKSB7XG4gICAgICAgICAgICB0ZXh0LnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RTZWxlY3Rpb25TdGFydCA9IHNlbGVjdGlvblN0YXJ0O1xuICAgICAgICBsYXN0U2VsZWN0aW9uRW5kID0gc2VsZWN0aW9uRW5kO1xuICAgIH1cbiAgICA6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaW5Db21wb3NpdGlvbiB8fCBzZW5kaW5nVGV4dClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gbW9kaWZ5aW5nIHNlbGVjdGlvbiBvZiBibHVyZWQgdGV4dGFyZWEgY2FuIGZvY3VzIGl0IChjaHJvbWUgbWFjL2xpbnV4KVxuICAgICAgICBpZiAoIWlzRm9jdXNlZCAmJiAhYWZ0ZXJDb250ZXh0TWVudSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hamF4b3JnL2FjZS9pc3N1ZXMvMjExNFxuICAgICAgICAvLyB0aGlzIHByZXZlbnRzIGluZmluaXRlIHJlY3Vyc2lvbiBvbiBzYWZhcmkgOFxuICAgICAgICBpbkNvbXBvc2l0aW9uID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIHZhciBzZWxlY3Rpb25TdGFydCA9IDA7XG4gICAgICAgIHZhciBzZWxlY3Rpb25FbmQgPSAwO1xuICAgICAgICB2YXIgbGluZSA9IFwiXCI7XG5cbiAgICAgICAgaWYgKGhvc3Quc2Vzc2lvbikge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGhvc3Quc2VsZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlKCk7XG4gICAgICAgICAgICB2YXIgcm93ID0gc2VsZWN0aW9uLmN1cnNvci5yb3c7XG5cbiAgICAgICAgICAgIC8vIFdlIGtlZXAgMipudW1iZXJPZkV4dHJhTGluZXMgKyAxIGxpbmVzIGluIHRoZSB0ZXh0YXJlYSwgaWYgdGhlIG5ldyBhY3RpdmUgcm93XG4gICAgICAgICAgICAvLyBpcyB3aXRoaW4gdGhlIGN1cnJlbnQgYmxvY2sgb2YgbGluZXMgaW4gdGhlIHRleHRhcmVhIHdlIGRvIG5vdGhpbmcuIElmIHRoZSBuZXcgcm93XG4gICAgICAgICAgICAvLyBpcyBvbmUgcm93IGFib3ZlIG9yIGJlbG93IHRoZSBjdXJyZW50IGJsb2NrLCBtb3ZlIHVwIG9yIGRvd24gdG8gdGhlIG5leHQgYmxvY2sgb2YgbGluZXMuXG4gICAgICAgICAgICAvLyBJZiB0aGUgbmV3IHJvdyBpcyBmdXJ0aGVyIHRoYW4gMSByb3cgYXdheSBmcm9tIHRoZSBjdXJyZW50IGJsb2NrIGdyYWIgYSBuZXcgYmxvY2sgY2VudGVyZWQgXG4gICAgICAgICAgICAvLyBhcm91bmQgdGhlIG5ldyByb3cuXG4gICAgICAgICAgICBpZiAocm93ID09PSByb3dFbmQgKyAxKSB7XG4gICAgICAgICAgICAgICAgcm93U3RhcnQgPSByb3dFbmQgKyAxO1xuICAgICAgICAgICAgICAgIHJvd0VuZCA9IHJvd1N0YXJ0ICsgMipudW1iZXJPZkV4dHJhTGluZXM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvdyA9PT0gcm93U3RhcnQgLSAxKSB7XG4gICAgICAgICAgICAgICAgcm93RW5kID0gcm93U3RhcnQgLSAxO1xuICAgICAgICAgICAgICAgIHJvd1N0YXJ0ID0gcm93RW5kIC0gMipudW1iZXJPZkV4dHJhTGluZXM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvdyA8IHJvd1N0YXJ0IC0gMSB8fCByb3cgPiByb3dFbmQgKyAxKSB7XG4gICAgICAgICAgICAgICAgcm93U3RhcnQgPSByb3cgPiBudW1iZXJPZkV4dHJhTGluZXMgPyByb3cgLSBudW1iZXJPZkV4dHJhTGluZXMgOiAwO1xuICAgICAgICAgICAgICAgIHJvd0VuZCA9IHJvdyA+IG51bWJlck9mRXh0cmFMaW5lcyA/IHJvdyArIG51bWJlck9mRXh0cmFMaW5lcyA6IDIqbnVtYmVyT2ZFeHRyYUxpbmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgbGluZXMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHJvd1N0YXJ0OyBpIDw9IHJvd0VuZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChob3N0LnNlc3Npb24uZ2V0TGluZShpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lcy5qb2luKCdcXG4nKTtcblxuICAgICAgICAgICAgc2VsZWN0aW9uU3RhcnQgPSBwb3NpdGlvblRvU2VsZWN0aW9uKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uKTtcbiAgICAgICAgICAgIHNlbGVjdGlvbkVuZCA9IHBvc2l0aW9uVG9TZWxlY3Rpb24ocmFuZ2UuZW5kLnJvdywgcmFuZ2UuZW5kLmNvbHVtbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydC5yb3cgPCByb3dTdGFydCkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2TGluZSA9IGhvc3Quc2Vzc2lvbi5nZXRMaW5lKHJvd1N0YXJ0IC0gMSk7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uU3RhcnQgPSByYW5nZS5zdGFydC5yb3cgPCByb3dTdGFydCAtIDEgPyAwIDogc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uRW5kICs9IHByZXZMaW5lLmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgbGluZSA9IHByZXZMaW5lICsgXCJcXG5cIiArIGxpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyYW5nZS5lbmQucm93ID4gcm93RW5kKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRMaW5lID0gaG9zdC5zZXNzaW9uLmdldExpbmUocm93RW5kICsgMSk7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uRW5kID0gcmFuZ2UuZW5kLnJvdyA+IHJvd0VuZCArIDEgPyBuZXh0TGluZS5sZW5ndGggOiByYW5nZS5lbmQuY29sdW1uO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVuZCArPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUgKyBcIlxcblwiICsgbmV4dExpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc01vYmlsZSAmJiByb3cgPiAwKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IFwiXFxuXCIgKyBsaW5lO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVuZCArPSAxO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvblN0YXJ0ICs9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCA+IE1BWF9MSU5FX0xFTkdUSCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25TdGFydCA8IE1BWF9MSU5FX0xFTkdUSCAmJiBzZWxlY3Rpb25FbmQgPCBNQVhfTElORV9MRU5HVEgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoMCwgTUFYX0xJTkVfTEVOR1RIKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsaW5lID0gXCJcXG5cIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvblN0YXJ0ID09IHNlbGVjdGlvbkVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb25FbmQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uU3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uRW5kID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBsaW5lICsgXCJcXG5cXG5cIjtcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPSBsYXN0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0ZXh0LnZhbHVlID0gbGFzdFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgbGFzdFNlbGVjdGlvblN0YXJ0ID0gbGFzdFNlbGVjdGlvbkVuZCA9IG5ld1ZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gY29udGV4dG1lbnUgb24gbWFjIG1heSBjaGFuZ2UgdGhlIHNlbGVjdGlvblxuICAgICAgICBpZiAoYWZ0ZXJDb250ZXh0TWVudSkge1xuICAgICAgICAgICAgbGFzdFNlbGVjdGlvblN0YXJ0ID0gdGV4dC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIGxhc3RTZWxlY3Rpb25FbmQgPSB0ZXh0LnNlbGVjdGlvbkVuZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBvbiBmaXJlZm94IHRoaXMgdGhyb3dzIGlmIHRleHRhcmVhIGlzIGhpZGRlblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBsYXN0U2VsZWN0aW9uRW5kICE9IHNlbGVjdGlvbkVuZCBcbiAgICAgICAgICAgIHx8IGxhc3RTZWxlY3Rpb25TdGFydCAhPSBzZWxlY3Rpb25TdGFydCBcbiAgICAgICAgICAgIHx8IHRleHQuc2VsZWN0aW9uRW5kICE9IGxhc3RTZWxlY3Rpb25FbmQgLy8gb24gaWUgZWRnZSBzZWxlY3Rpb25FbmQgY2hhbmdlcyBzaWxlbnRseSBhZnRlciB0aGUgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCk7XG4gICAgICAgICAgICAgICAgbGFzdFNlbGVjdGlvblN0YXJ0ID0gc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgICAgbGFzdFNlbGVjdGlvbkVuZCA9IHNlbGVjdGlvbkVuZDtcbiAgICAgICAgICAgIH0gY2F0Y2goZSl7fVxuICAgICAgICB9XG4gICAgICAgIGluQ29tcG9zaXRpb24gPSBmYWxzZTtcbiAgICB9O1xuICAgIHRoaXMucmVzZXRTZWxlY3Rpb24gPSByZXNldFNlbGVjdGlvbjtcblxuICAgIGlmIChpc0ZvY3VzZWQpXG4gICAgICAgIGhvc3Qub25Gb2N1cygpO1xuXG5cbiAgICB2YXIgaXNBbGxTZWxlY3RlZCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRleHQuc2VsZWN0aW9uU3RhcnQgPT09IDAgJiYgdGV4dC5zZWxlY3Rpb25FbmQgPj0gbGFzdFZhbHVlLmxlbmd0aFxuICAgICAgICAgICAgJiYgdGV4dC52YWx1ZSA9PT0gbGFzdFZhbHVlICYmIGxhc3RWYWx1ZVxuICAgICAgICAgICAgJiYgdGV4dC5zZWxlY3Rpb25FbmQgIT09IGxhc3RTZWxlY3Rpb25FbmQ7XG4gICAgfTtcblxuICAgIHZhciBvblNlbGVjdCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGluQ29tcG9zaXRpb24pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChjb3BpZWQpIHtcbiAgICAgICAgICAgIGNvcGllZCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQWxsU2VsZWN0ZWQodGV4dCkpIHtcbiAgICAgICAgICAgIGhvc3Quc2VsZWN0QWxsKCk7XG4gICAgICAgICAgICByZXNldFNlbGVjdGlvbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzTW9iaWxlICYmIHRleHQuc2VsZWN0aW9uU3RhcnQgIT0gbGFzdFNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICAgICAgICByZXNldFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgdmFyIGlucHV0SGFuZGxlciA9IG51bGw7XG4gICAgdGhpcy5zZXRJbnB1dEhhbmRsZXIgPSBmdW5jdGlvbihjYikge2lucHV0SGFuZGxlciA9IGNiO307XG4gICAgdGhpcy5nZXRJbnB1dEhhbmRsZXIgPSBmdW5jdGlvbigpIHtyZXR1cm4gaW5wdXRIYW5kbGVyO307XG4gICAgdmFyIGFmdGVyQ29udGV4dE1lbnUgPSBmYWxzZTtcbiAgICBcbiAgICB2YXIgc2VuZFRleHQgPSBmdW5jdGlvbih2YWx1ZSwgZnJvbUlucHV0KSB7XG4gICAgICAgIGlmIChhZnRlckNvbnRleHRNZW51KVxuICAgICAgICAgICAgYWZ0ZXJDb250ZXh0TWVudSA9IGZhbHNlO1xuICAgICAgICBpZiAocGFzdGVkKSB7XG4gICAgICAgICAgICByZXNldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAgICAgIGhvc3Qub25QYXN0ZSh2YWx1ZSk7XG4gICAgICAgICAgICBwYXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvblN0YXJ0ID0gdGV4dC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb25FbmQgPSB0ZXh0LnNlbGVjdGlvbkVuZDtcbiAgICAgICAgXG4gICAgICAgICAgICB2YXIgZXh0ZW5kTGVmdCA9IGxhc3RTZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIHZhciBleHRlbmRSaWdodCA9IGxhc3RWYWx1ZS5sZW5ndGggLSBsYXN0U2VsZWN0aW9uRW5kO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgaW5zZXJ0ZWQgPSB2YWx1ZTtcbiAgICAgICAgICAgIHZhciByZXN0b3JlU3RhcnQgPSB2YWx1ZS5sZW5ndGggLSBzZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIHZhciByZXN0b3JlRW5kID0gdmFsdWUubGVuZ3RoIC0gc2VsZWN0aW9uRW5kO1xuICAgICAgICBcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChleHRlbmRMZWZ0ID4gMCAmJiBsYXN0VmFsdWVbaV0gPT0gdmFsdWVbaV0pIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgZXh0ZW5kTGVmdC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5zZXJ0ZWQgPSBpbnNlcnRlZC5zbGljZShpKTtcbiAgICAgICAgICAgIGkgPSAxO1xuICAgICAgICAgICAgd2hpbGUgKGV4dGVuZFJpZ2h0ID4gMCAmJiBsYXN0VmFsdWUubGVuZ3RoIC0gaSA+IGxhc3RTZWxlY3Rpb25TdGFydCAtIDEgICYmIGxhc3RWYWx1ZVtsYXN0VmFsdWUubGVuZ3RoIC0gaV0gPT0gdmFsdWVbdmFsdWUubGVuZ3RoIC0gaV0pIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgZXh0ZW5kUmlnaHQtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3RvcmVTdGFydCAtPSBpLTE7XG4gICAgICAgICAgICByZXN0b3JlRW5kIC09IGktMTtcbiAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IGluc2VydGVkLmxlbmd0aCAtIGkgKyAxO1xuICAgICAgICAgICAgaWYgKGVuZEluZGV4IDwgMCkge1xuICAgICAgICAgICAgICAgIGV4dGVuZExlZnQgPSAtZW5kSW5kZXg7XG4gICAgICAgICAgICAgICAgZW5kSW5kZXggPSAwO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGluc2VydGVkID0gaW5zZXJ0ZWQuc2xpY2UoMCwgZW5kSW5kZXgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBjb21wb3NpdGlvbiB1cGRhdGUgY2FuIGJlIGNhbGxlZCB3aXRob3V0IGFueSBjaGFuZ2VcbiAgICAgICAgICAgIGlmICghZnJvbUlucHV0ICYmICFpbnNlcnRlZCAmJiAhcmVzdG9yZVN0YXJ0ICYmICFleHRlbmRMZWZ0ICYmICFleHRlbmRSaWdodCAmJiAhcmVzdG9yZUVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIHNlbmRpbmdUZXh0ID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gc29tZSBhbmRyb2lkIGtleWJvYXJkcyBjb252ZXJ0cyB0d28gc3BhY2VzIGludG8gc2VudGVuY2UgZW5kLCB3aGljaCBpcyBub3QgdXNlZnVsIGZvciBjb2RlXG4gICAgICAgICAgICB2YXIgc2hvdWxkUmVzZXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh1c2VyYWdlbnQuaXNBbmRyb2lkICYmIGluc2VydGVkID09IFwiLiBcIikge1xuICAgICAgICAgICAgICAgIGluc2VydGVkID0gXCIgIFwiO1xuICAgICAgICAgICAgICAgIHNob3VsZFJlc2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGluc2VydGVkICYmICFleHRlbmRMZWZ0ICYmICFleHRlbmRSaWdodCAmJiAhcmVzdG9yZVN0YXJ0ICYmICFyZXN0b3JlRW5kIHx8IGNvbW1hbmRNb2RlKSB7XG4gICAgICAgICAgICAgICAgaG9zdC5vblRleHRJbnB1dChpbnNlcnRlZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3Qub25UZXh0SW5wdXQoaW5zZXJ0ZWQsIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kTGVmdDogZXh0ZW5kTGVmdCxcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kUmlnaHQ6IGV4dGVuZFJpZ2h0LFxuICAgICAgICAgICAgICAgICAgICByZXN0b3JlU3RhcnQ6IHJlc3RvcmVTdGFydCxcbiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZUVuZDogcmVzdG9yZUVuZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VuZGluZ1RleHQgPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGFzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBsYXN0U2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIGxhc3RTZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb25FbmQ7XG4gICAgICAgICAgICBsYXN0UmVzdG9yZUVuZCA9IHJlc3RvcmVFbmQ7XG4gICAgICAgICAgICByZXR1cm4gc2hvdWxkUmVzZXQgPyBcIlxcblwiIDogaW5zZXJ0ZWQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBvbklucHV0ID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoaW5Db21wb3NpdGlvbilcbiAgICAgICAgICAgIHJldHVybiBvbkNvbXBvc2l0aW9uVXBkYXRlKCk7XG4gICAgICAgIGlmIChlICYmIGUuaW5wdXRUeXBlKSB7XG4gICAgICAgICAgICBpZiAoZS5pbnB1dFR5cGUgPT0gXCJoaXN0b3J5VW5kb1wiKSByZXR1cm4gaG9zdC5leGVjQ29tbWFuZChcInVuZG9cIik7XG4gICAgICAgICAgICBpZiAoZS5pbnB1dFR5cGUgPT0gXCJoaXN0b3J5UmVkb1wiKSByZXR1cm4gaG9zdC5leGVjQ29tbWFuZChcInJlZG9cIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGEgPSB0ZXh0LnZhbHVlO1xuICAgICAgICB2YXIgaW5zZXJ0ZWQgPSBzZW5kVGV4dChkYXRhLCB0cnVlKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZGF0YS5sZW5ndGggPiBNQVhfTElORV9MRU5HVEggKyAxMDAgXG4gICAgICAgICAgICB8fCB2YWx1ZVJlc2V0UmVnZXgudGVzdChpbnNlcnRlZClcbiAgICAgICAgICAgIHx8IGlzTW9iaWxlICYmIGxhc3RTZWxlY3Rpb25TdGFydCA8IDEgJiYgbGFzdFNlbGVjdGlvblN0YXJ0ID09IGxhc3RTZWxlY3Rpb25FbmRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXNldFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB2YXIgaGFuZGxlQ2xpcGJvYXJkRGF0YSA9IGZ1bmN0aW9uKGUsIGRhdGEsIGZvcmNlSUVNaW1lKSB7XG4gICAgICAgIHZhciBjbGlwYm9hcmREYXRhID0gZS5jbGlwYm9hcmREYXRhIHx8IHdpbmRvd1tcImNsaXBib2FyZERhdGFcIl07XG4gICAgICAgIGlmICghY2xpcGJvYXJkRGF0YSB8fCBCUk9LRU5fU0VUREFUQSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gdXNpbmcgXCJUZXh0XCIgZG9lc24ndCB3b3JrIG9uIG9sZCB3ZWJraXQgYnV0IGllIG5lZWRzIGl0XG4gICAgICAgIHZhciBtaW1lID0gVVNFX0lFX01JTUVfVFlQRSB8fCBmb3JjZUlFTWltZSA/IFwiVGV4dFwiIDogXCJ0ZXh0L3BsYWluXCI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIFNhZmFyaSA1IGhhcyBjbGlwYm9hcmREYXRhIG9iamVjdCwgYnV0IGRvZXMgbm90IGhhbmRsZSBzZXREYXRhKClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xpcGJvYXJkRGF0YS5zZXREYXRhKG1pbWUsIGRhdGEpICE9PSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsaXBib2FyZERhdGEuZ2V0RGF0YShtaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBpZiAoIWZvcmNlSUVNaW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVDbGlwYm9hcmREYXRhKGUsIGRhdGEsIHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkb0NvcHkgPSBmdW5jdGlvbihlLCBpc0N1dCkge1xuICAgICAgICB2YXIgZGF0YSA9IGhvc3QuZ2V0Q29weVRleHQoKTtcbiAgICAgICAgaWYgKCFkYXRhKVxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KGUpO1xuXG4gICAgICAgIGlmIChoYW5kbGVDbGlwYm9hcmREYXRhKGUsIGRhdGEpKSB7XG4gICAgICAgICAgICBpZiAoaXNJT1MpIHtcbiAgICAgICAgICAgICAgICByZXNldFNlbGVjdGlvbihkYXRhKTtcbiAgICAgICAgICAgICAgICBjb3BpZWQgPSBkYXRhO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb3BpZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCAxMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc0N1dCA/IGhvc3Qub25DdXQoKSA6IGhvc3Qub25Db3B5KCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvcGllZCA9IHRydWU7XG4gICAgICAgICAgICB0ZXh0LnZhbHVlID0gZGF0YTtcbiAgICAgICAgICAgIHRleHQuc2VsZWN0KCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgY29waWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmVzZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBpc0N1dCA/IGhvc3Qub25DdXQoKSA6IGhvc3Qub25Db3B5KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdmFyIG9uQ3V0ID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBkb0NvcHkoZSwgdHJ1ZSk7XG4gICAgfTtcbiAgICBcbiAgICB2YXIgb25Db3B5ID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBkb0NvcHkoZSwgZmFsc2UpO1xuICAgIH07XG4gICAgXG4gICAgdmFyIG9uUGFzdGUgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBkYXRhID0gaGFuZGxlQ2xpcGJvYXJkRGF0YShlKTtcbiAgICAgICAgaWYgKGNsaXBib2FyZC5wYXN0ZUNhbmNlbGxlZCgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaWYgKGRhdGEpXG4gICAgICAgICAgICAgICAgaG9zdC5vblBhc3RlKGRhdGEsIGUpO1xuICAgICAgICAgICAgaWYgKHVzZXJhZ2VudC5pc0lFKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocmVzZXRTZWxlY3Rpb24pO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0ZXh0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIHBhc3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZXZlbnQuYWRkQ29tbWFuZEtleUxpc3RlbmVyKHRleHQsIGZ1bmN0aW9uKGUsIGhhc2hJZCwga2V5Q29kZSkge1xuICAgICAgICAvLyBpZ25vcmUgY29tbWFuZCBldmVudHMgZHVyaW5nIGNvbXBvc2l0aW9uIGFzIHRoZXkgd2lsbCBcbiAgICAgICAgLy8gZWl0aGVyIGJlIGhhbmRsZWQgYnkgaW1lIGl0c2VsZiBvciBmaXJlZCBhZ2FpbiBhZnRlciBpbWUgZW5kXG4gICAgICAgIGlmIChpbkNvbXBvc2l0aW9uKSByZXR1cm47XG4gICAgICAgIHJldHVybiBob3N0Lm9uQ29tbWFuZEtleShlLCBoYXNoSWQsIGtleUNvZGUpO1xuICAgIH0sIGhvc3QpO1xuXG4gICAgZXZlbnQuYWRkTGlzdGVuZXIodGV4dCwgXCJzZWxlY3RcIiwgb25TZWxlY3QsIGhvc3QpO1xuICAgIGV2ZW50LmFkZExpc3RlbmVyKHRleHQsIFwiaW5wdXRcIiwgb25JbnB1dCwgaG9zdCk7XG5cbiAgICBldmVudC5hZGRMaXN0ZW5lcih0ZXh0LCBcImN1dFwiLCBvbkN1dCwgaG9zdCk7XG4gICAgZXZlbnQuYWRkTGlzdGVuZXIodGV4dCwgXCJjb3B5XCIsIG9uQ29weSwgaG9zdCk7XG4gICAgZXZlbnQuYWRkTGlzdGVuZXIodGV4dCwgXCJwYXN0ZVwiLCBvblBhc3RlLCBob3N0KTtcblxuXG4gICAgLy8gT3BlcmEgaGFzIG5vIGNsaXBib2FyZCBldmVudHNcbiAgICBpZiAoISgnb25jdXQnIGluIHRleHQpIHx8ICEoJ29uY29weScgaW4gdGV4dCkgfHwgISgnb25wYXN0ZScgaW4gdGV4dCkpIHtcbiAgICAgICAgZXZlbnQuYWRkTGlzdGVuZXIocGFyZW50Tm9kZSwgXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmICgodXNlcmFnZW50LmlzTWFjICYmICFlLm1ldGFLZXkpIHx8ICFlLmN0cmxLZXkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgNjc6XG4gICAgICAgICAgICAgICAgICAgIG9uQ29weShlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4NjpcbiAgICAgICAgICAgICAgICAgICAgb25QYXN0ZShlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA4ODpcbiAgICAgICAgICAgICAgICAgICAgb25DdXQoZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBob3N0KTtcbiAgICB9XG5cblxuICAgIC8vIENPTVBPU0lUSU9OXG4gICAgdmFyIG9uQ29tcG9zaXRpb25TdGFydCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGluQ29tcG9zaXRpb24gfHwgIWhvc3Qub25Db21wb3NpdGlvblN0YXJ0IHx8IGhvc3QuJHJlYWRPbmx5KSBcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGluQ29tcG9zaXRpb24gPSB7fTtcblxuICAgICAgICBpZiAoY29tbWFuZE1vZGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBpZiAoZS5kYXRhKVxuICAgICAgICAgICAgaW5Db21wb3NpdGlvbi51c2VUZXh0YXJlYUZvcklNRSA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgc2V0VGltZW91dChvbkNvbXBvc2l0aW9uVXBkYXRlLCAwKTtcbiAgICAgICAgaG9zdC5fc2lnbmFsKFwiY29tcG9zaXRpb25TdGFydFwiKTtcbiAgICAgICAgaG9zdC5vbihcIm1vdXNlZG93blwiLCBjYW5jZWxDb21wb3NpdGlvbik7XG4gICAgICAgIFxuICAgICAgICB2YXIgcmFuZ2UgPSBob3N0LmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIHJhbmdlLmVuZC5yb3cgPSByYW5nZS5zdGFydC5yb3c7XG4gICAgICAgIHJhbmdlLmVuZC5jb2x1bW4gPSByYW5nZS5zdGFydC5jb2x1bW47XG4gICAgICAgIGluQ29tcG9zaXRpb24ubWFya2VyUmFuZ2UgPSByYW5nZTtcbiAgICAgICAgaW5Db21wb3NpdGlvbi5zZWxlY3Rpb25TdGFydCA9IGxhc3RTZWxlY3Rpb25TdGFydDtcbiAgICAgICAgaG9zdC5vbkNvbXBvc2l0aW9uU3RhcnQoaW5Db21wb3NpdGlvbik7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5Db21wb3NpdGlvbi51c2VUZXh0YXJlYUZvcklNRSkge1xuICAgICAgICAgICAgbGFzdFZhbHVlID0gdGV4dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICBsYXN0U2VsZWN0aW9uU3RhcnQgPSAwO1xuICAgICAgICAgICAgbGFzdFNlbGVjdGlvbkVuZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGV4dC5tc0dldElucHV0Q29udGV4dClcbiAgICAgICAgICAgICAgICBpbkNvbXBvc2l0aW9uLmNvbnRleHQgPSB0ZXh0Lm1zR2V0SW5wdXRDb250ZXh0KCk7XG4gICAgICAgICAgICBpZiAodGV4dC5nZXRJbnB1dENvbnRleHQpXG4gICAgICAgICAgICAgICAgaW5Db21wb3NpdGlvbi5jb250ZXh0ID0gdGV4dC5nZXRJbnB1dENvbnRleHQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgb25Db21wb3NpdGlvblVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIWluQ29tcG9zaXRpb24gfHwgIWhvc3Qub25Db21wb3NpdGlvblVwZGF0ZSB8fCBob3N0LiRyZWFkT25seSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGNvbW1hbmRNb2RlKVxuICAgICAgICAgICAgcmV0dXJuIGNhbmNlbENvbXBvc2l0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5Db21wb3NpdGlvbi51c2VUZXh0YXJlYUZvcklNRSkge1xuICAgICAgICAgICAgaG9zdC5vbkNvbXBvc2l0aW9uVXBkYXRlKHRleHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB0ZXh0LnZhbHVlO1xuICAgICAgICAgICAgc2VuZFRleHQoZGF0YSk7XG4gICAgICAgICAgICBpZiAoaW5Db21wb3NpdGlvbi5tYXJrZXJSYW5nZSkge1xuICAgICAgICAgICAgICAgIGlmIChpbkNvbXBvc2l0aW9uLmNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5Db21wb3NpdGlvbi5tYXJrZXJSYW5nZS5zdGFydC5jb2x1bW4gPSBpbkNvbXBvc2l0aW9uLnNlbGVjdGlvblN0YXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICA9IGluQ29tcG9zaXRpb24uY29udGV4dC5jb21wb3NpdGlvblN0YXJ0T2Zmc2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbkNvbXBvc2l0aW9uLm1hcmtlclJhbmdlLmVuZC5jb2x1bW4gPSBpbkNvbXBvc2l0aW9uLm1hcmtlclJhbmdlLnN0YXJ0LmNvbHVtblxuICAgICAgICAgICAgICAgICAgICArIGxhc3RTZWxlY3Rpb25FbmQgLSBpbkNvbXBvc2l0aW9uLnNlbGVjdGlvblN0YXJ0ICsgbGFzdFJlc3RvcmVFbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIG9uQ29tcG9zaXRpb25FbmQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghaG9zdC5vbkNvbXBvc2l0aW9uRW5kIHx8IGhvc3QuJHJlYWRPbmx5KSByZXR1cm47XG4gICAgICAgIGluQ29tcG9zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgaG9zdC5vbkNvbXBvc2l0aW9uRW5kKCk7XG4gICAgICAgIGhvc3Qub2ZmKFwibW91c2Vkb3duXCIsIGNhbmNlbENvbXBvc2l0aW9uKTtcbiAgICAgICAgLy8gbm90ZSB0aGF0IHJlc2V0dGluZyB2YWx1ZSBvZiB0ZXh0YXJlYSBhdCB0aGlzIHBvaW50IGRvZXNuJ3QgYWx3YXlzIHdvcmtcbiAgICAgICAgLy8gYmVjYXVzZSB0ZXh0YXJlYSB2YWx1ZSBjYW4gYmUgc2lsZW50bHkgcmVzdG9yZWRcbiAgICAgICAgaWYgKGUpIG9uSW5wdXQoKTtcbiAgICB9O1xuICAgIFxuXG4gICAgZnVuY3Rpb24gY2FuY2VsQ29tcG9zaXRpb24oKSB7XG4gICAgICAgIC8vIGZvcmNlIGVuZCBjb21wb3NpdGlvblxuICAgICAgICBpZ25vcmVGb2N1c0V2ZW50cyA9IHRydWU7XG4gICAgICAgIHRleHQuYmx1cigpO1xuICAgICAgICB0ZXh0LmZvY3VzKCk7XG4gICAgICAgIGlnbm9yZUZvY3VzRXZlbnRzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIHN5bmNDb21wb3NpdGlvbiA9IGxhbmcuZGVsYXllZENhbGwob25Db21wb3NpdGlvblVwZGF0ZSwgNTApLnNjaGVkdWxlLmJpbmQobnVsbCwgbnVsbCk7XG4gICAgXG4gICAgZnVuY3Rpb24gb25LZXl1cChlKSB7XG4gICAgICAgIC8vIHdvcmthcm91bmQgZm9yIGEgYnVnIGluIGllIHdoZXJlIHByZXNzaW5nIGVzYyBzaWxlbnRseSBtb3ZlcyBzZWxlY3Rpb24gb3V0IG9mIHRleHRhcmVhXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gMjcgJiYgdGV4dC52YWx1ZS5sZW5ndGggPCB0ZXh0LnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICAgICAgICBpZiAoIWluQ29tcG9zaXRpb24pXG4gICAgICAgICAgICAgICAgbGFzdFZhbHVlID0gdGV4dC52YWx1ZTtcbiAgICAgICAgICAgIGxhc3RTZWxlY3Rpb25TdGFydCA9IGxhc3RTZWxlY3Rpb25FbmQgPSAtMTtcbiAgICAgICAgICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3luY0NvbXBvc2l0aW9uKCk7XG4gICAgfVxuXG4gICAgZXZlbnQuYWRkTGlzdGVuZXIodGV4dCwgXCJjb21wb3NpdGlvbnN0YXJ0XCIsIG9uQ29tcG9zaXRpb25TdGFydCwgaG9zdCk7XG4gICAgZXZlbnQuYWRkTGlzdGVuZXIodGV4dCwgXCJjb21wb3NpdGlvbnVwZGF0ZVwiLCBvbkNvbXBvc2l0aW9uVXBkYXRlLCBob3N0KTtcbiAgICBldmVudC5hZGRMaXN0ZW5lcih0ZXh0LCBcImtleXVwXCIsIG9uS2V5dXAsIGhvc3QpO1xuICAgIGV2ZW50LmFkZExpc3RlbmVyKHRleHQsIFwia2V5ZG93blwiLCBzeW5jQ29tcG9zaXRpb24sIGhvc3QpO1xuICAgIGV2ZW50LmFkZExpc3RlbmVyKHRleHQsIFwiY29tcG9zaXRpb25lbmRcIiwgb25Db21wb3NpdGlvbkVuZCwgaG9zdCk7XG5cbiAgICB0aGlzLmdldEVsZW1lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfTtcbiAgICBcbiAgICAvLyBhbGxvd3MgdG8gaWdub3JlIGNvbXBvc2l0aW9uICh1c2VkIGJ5IHZpbSBrZXlib2FyZCBoYW5kbGVyIGluIHRoZSBub3JtYWwgbW9kZSlcbiAgICAvLyB0aGlzIGlzIHVzZWZ1bCBvbiBtYWMsIHdoZXJlIHdpdGggc29tZSBrZXlib2FyZCBsYXlvdXRzIChlLmcgc3dlZGlzaCkgXiBzdGFydHMgY29tcG9zaXRpb25cbiAgICB0aGlzLnNldENvbW1hbmRNb2RlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgY29tbWFuZE1vZGUgPSB2YWx1ZTtcbiAgICAgICAgdGV4dC5yZWFkT25seSA9IGZhbHNlO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5zZXRSZWFkT25seSA9IGZ1bmN0aW9uKHJlYWRPbmx5KSB7XG4gICAgICAgIGlmICghY29tbWFuZE1vZGUpXG4gICAgICAgICAgICB0ZXh0LnJlYWRPbmx5ID0gcmVhZE9ubHk7XG4gICAgfTtcblxuICAgIHRoaXMuc2V0Q29weVdpdGhFbXB0eVNlbGVjdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgfTtcblxuICAgIHRoaXMub25Db250ZXh0TWVudSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgYWZ0ZXJDb250ZXh0TWVudSA9IHRydWU7XG4gICAgICAgIHJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGhvc3QuX2VtaXQoXCJuYXRpdmVjb250ZXh0bWVudVwiLCB7dGFyZ2V0OiBob3N0LCBkb21FdmVudDogZX0pO1xuICAgICAgICB0aGlzLm1vdmVUb01vdXNlKGUsIHRydWUpO1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5tb3ZlVG9Nb3VzZSA9IGZ1bmN0aW9uKGUsIGJyaW5nVG9Gcm9udCkge1xuICAgICAgICBpZiAoIXRlbXBTdHlsZSlcbiAgICAgICAgICAgIHRlbXBTdHlsZSA9IHRleHQuc3R5bGUuY3NzVGV4dDtcbiAgICAgICAgdGV4dC5zdHlsZS5jc3NUZXh0ID0gKGJyaW5nVG9Gcm9udCA/IFwiei1pbmRleDoxMDAwMDA7XCIgOiBcIlwiKVxuICAgICAgICAgICAgKyAodXNlcmFnZW50LmlzSUUgPyBcIm9wYWNpdHk6MC4xO1wiIDogXCJcIilcbiAgICAgICAgICAgICsgXCJ0ZXh0LWluZGVudDogLVwiICsgKGxhc3RTZWxlY3Rpb25TdGFydCArIGxhc3RTZWxlY3Rpb25FbmQpICogaG9zdC5yZW5kZXJlci5jaGFyYWN0ZXJXaWR0aCAqIDAuNSArIFwicHg7XCI7XG5cbiAgICAgICAgdmFyIHJlY3QgPSBob3N0LmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHN0eWxlID0gZG9tLmNvbXB1dGVkU3R5bGUoaG9zdC5jb250YWluZXIpO1xuICAgICAgICB2YXIgdG9wID0gcmVjdC50b3AgKyAocGFyc2VJbnQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpIHx8IDApO1xuICAgICAgICB2YXIgbGVmdCA9IHJlY3QubGVmdCArIChwYXJzZUludChyZWN0LmJvcmRlckxlZnRXaWR0aCkgfHwgMCk7XG4gICAgICAgIHZhciBtYXhUb3AgPSByZWN0LmJvdHRvbSAtIHRvcCAtIHRleHQuY2xpZW50SGVpZ2h0IC0yO1xuICAgICAgICB2YXIgbW92ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGRvbS50cmFuc2xhdGUodGV4dCwgZS5jbGllbnRYIC0gbGVmdCAtIDIsIE1hdGgubWluKGUuY2xpZW50WSAtIHRvcCAtIDIsIG1heFRvcCkpO1xuICAgICAgICB9OyBcbiAgICAgICAgbW92ZShlKTtcblxuICAgICAgICBpZiAoZS50eXBlICE9IFwibW91c2Vkb3duXCIpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgaG9zdC5yZW5kZXJlci4kaXNNb3VzZVByZXNzZWQgPSB0cnVlO1xuXG4gICAgICAgIGNsZWFyVGltZW91dChjbG9zZVRpbWVvdXQpO1xuICAgICAgICAvLyBvbiB3aW5kb3dzIGNvbnRleHQgbWVudSBpcyBvcGVuZWQgYWZ0ZXIgbW91c2V1cFxuICAgICAgICBpZiAodXNlcmFnZW50LmlzV2luKVxuICAgICAgICAgICAgZXZlbnQuY2FwdHVyZShob3N0LmNvbnRhaW5lciwgbW92ZSwgb25Db250ZXh0TWVudUNsb3NlKTtcbiAgICB9O1xuXG4gICAgdGhpcy5vbkNvbnRleHRNZW51Q2xvc2UgPSBvbkNvbnRleHRNZW51Q2xvc2U7XG4gICAgdmFyIGNsb3NlVGltZW91dDtcbiAgICBmdW5jdGlvbiBvbkNvbnRleHRNZW51Q2xvc2UoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChjbG9zZVRpbWVvdXQpO1xuICAgICAgICBjbG9zZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0ZW1wU3R5bGUpIHtcbiAgICAgICAgICAgICAgICB0ZXh0LnN0eWxlLmNzc1RleHQgPSB0ZW1wU3R5bGU7XG4gICAgICAgICAgICAgICAgdGVtcFN0eWxlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBob3N0LnJlbmRlcmVyLiRpc01vdXNlUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGhvc3QucmVuZGVyZXIuJGtlZXBUZXh0QXJlYUF0Q3Vyc29yKVxuICAgICAgICAgICAgICAgIGhvc3QucmVuZGVyZXIuJG1vdmVUZXh0QXJlYVRvQ3Vyc29yKCk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cblxuICAgIHZhciBvbkNvbnRleHRNZW51ID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBob3N0LnRleHRJbnB1dC5vbkNvbnRleHRNZW51KGUpO1xuICAgICAgICBvbkNvbnRleHRNZW51Q2xvc2UoKTtcbiAgICB9O1xuICAgIGV2ZW50LmFkZExpc3RlbmVyKHRleHQsIFwibW91c2V1cFwiLCBvbkNvbnRleHRNZW51LCBob3N0KTtcbiAgICBldmVudC5hZGRMaXN0ZW5lcih0ZXh0LCBcIm1vdXNlZG93blwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgb25Db250ZXh0TWVudUNsb3NlKCk7XG4gICAgfSwgaG9zdCk7XG4gICAgZXZlbnQuYWRkTGlzdGVuZXIoaG9zdC5yZW5kZXJlci5zY3JvbGxlciwgXCJjb250ZXh0bWVudVwiLCBvbkNvbnRleHRNZW51LCBob3N0KTtcbiAgICBldmVudC5hZGRMaXN0ZW5lcih0ZXh0LCBcImNvbnRleHRtZW51XCIsIG9uQ29udGV4dE1lbnUsIGhvc3QpO1xuICAgIFxuICAgIGlmIChpc0lPUylcbiAgICAgICAgYWRkSW9zU2VsZWN0aW9uSGFuZGxlcihwYXJlbnROb2RlLCBob3N0LCB0ZXh0KTtcblxuICAgIGZ1bmN0aW9uIGFkZElvc1NlbGVjdGlvbkhhbmRsZXIocGFyZW50Tm9kZSwgaG9zdCwgdGV4dCkge1xuICAgICAgICB2YXIgdHlwaW5nUmVzZXRUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgdmFyIHR5cGluZyA9IGZhbHNlO1xuXG4gICAgICAgIHRleHQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBpbmdSZXNldFRpbWVvdXQpIGNsZWFyVGltZW91dCh0eXBpbmdSZXNldFRpbWVvdXQpO1xuICAgICAgICAgICAgdHlwaW5nID0gdHJ1ZTtcbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgdGV4dC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHR5cGluZ1Jlc2V0VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHR5cGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgXG4gICAgICAgIC8vIElPUyBkb2Vzbid0IGZpcmUgZXZlbnRzIGZvciBhcnJvdyBrZXlzLCBidXQgdGhpcyB1bmlxdWUgaGFjayBjaGFuZ2VzIGV2ZXJ5dGhpbmchXG4gICAgICAgIHZhciBkZXRlY3RBcnJvd0tleXMgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGV4dCkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHR5cGluZyB8fCBpbkNvbXBvc2l0aW9uIHx8IGhvc3QuJG1vdXNlSGFuZGxlci5pc01vdXNlUHJlc3NlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAoY29waWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNlbGVjdGlvblN0YXJ0ID0gdGV4dC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb25FbmQgPSB0ZXh0LnNlbGVjdGlvbkVuZDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGtleSA9IG51bGw7XG4gICAgICAgICAgICB2YXIgbW9kaWZpZXIgPSAwO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uU3RhcnQgPT0gMCkge1xuICAgICAgICAgICAgICAgIGtleSA9IEtFWVMudXA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGlvblN0YXJ0ID09IDEpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBLRVlTLmhvbWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbkVuZCA+IGxhc3RTZWxlY3Rpb25FbmQgJiYgbGFzdFZhbHVlW3NlbGVjdGlvbkVuZF0gPT0gXCJcXG5cIikge1xuICAgICAgICAgICAgICAgIGtleSA9IEtFWVMuZW5kO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3Rpb25TdGFydCA8IGxhc3RTZWxlY3Rpb25TdGFydCAmJiBsYXN0VmFsdWVbc2VsZWN0aW9uU3RhcnQgLSAxXSA9PSBcIiBcIikge1xuICAgICAgICAgICAgICAgIGtleSA9IEtFWVMubGVmdDtcbiAgICAgICAgICAgICAgICBtb2RpZmllciA9IE1PRFMub3B0aW9uO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25TdGFydCA8IGxhc3RTZWxlY3Rpb25TdGFydFxuICAgICAgICAgICAgICAgIHx8IChcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uU3RhcnQgPT0gbGFzdFNlbGVjdGlvblN0YXJ0IFxuICAgICAgICAgICAgICAgICAgICAmJiBsYXN0U2VsZWN0aW9uRW5kICE9IGxhc3RTZWxlY3Rpb25TdGFydFxuICAgICAgICAgICAgICAgICAgICAmJiBzZWxlY3Rpb25TdGFydCA9PSBzZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBLRVlTLmxlZnQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbkVuZCA+IGxhc3RTZWxlY3Rpb25FbmQgJiYgbGFzdFZhbHVlLnNsaWNlKDAsIHNlbGVjdGlvbkVuZCkuc3BsaXQoXCJcXG5cIikubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgICAgIGtleSA9IEtFWVMuZG93bjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0aW9uRW5kID4gbGFzdFNlbGVjdGlvbkVuZCAmJiBsYXN0VmFsdWVbc2VsZWN0aW9uRW5kIC0gMV0gPT0gXCIgXCIpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBLRVlTLnJpZ2h0O1xuICAgICAgICAgICAgICAgIG1vZGlmaWVyID0gTU9EUy5vcHRpb247XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVuZCA+IGxhc3RTZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICB8fCAoXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkVuZCA9PSBsYXN0U2VsZWN0aW9uRW5kIFxuICAgICAgICAgICAgICAgICAgICAmJiBsYXN0U2VsZWN0aW9uRW5kICE9IGxhc3RTZWxlY3Rpb25TdGFydFxuICAgICAgICAgICAgICAgICAgICAmJiBzZWxlY3Rpb25TdGFydCA9PSBzZWxlY3Rpb25FbmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBLRVlTLnJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uU3RhcnQgIT09IHNlbGVjdGlvbkVuZClcbiAgICAgICAgICAgICAgICBtb2RpZmllciB8PSBNT0RTLnNoaWZ0O1xuXG4gICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGhvc3Qub25Db21tYW5kS2V5KHt9LCBtb2RpZmllciwga2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCAmJiBob3N0LmNvbW1hbmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IEtFWVMua2V5Q29kZVRvU3RyaW5nKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21tYW5kID0gaG9zdC5jb21tYW5kcy5maW5kS2V5Q29tbWFuZChtb2RpZmllciwga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQpXG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0LmV4ZWNDb21tYW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsYXN0U2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgICAgICBsYXN0U2VsZWN0aW9uRW5kID0gc2VsZWN0aW9uRW5kO1xuICAgICAgICAgICAgICAgIHJlc2V0U2VsZWN0aW9uKFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBPbiBpT1MsIFwic2VsZWN0aW9uY2hhbmdlXCIgY2FuIG9ubHkgYmUgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50IG9iamVjdC4uLlxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIGRldGVjdEFycm93S2V5cyk7XG4gICAgICAgIGhvc3Qub24oXCJkZXN0cm95XCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCBkZXRlY3RBcnJvd0tleXMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRleHQucGFyZW50RWxlbWVudClcbiAgICAgICAgICAgIHRleHQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0ZXh0KTtcbiAgICB9O1xufTtcblxuZXhwb3J0cy5UZXh0SW5wdXQgPSBUZXh0SW5wdXQ7XG5leHBvcnRzLiRzZXRVc2VyQWdlbnRGb3JUZXN0cyA9IGZ1bmN0aW9uKF9pc01vYmlsZSwgX2lzSU9TKSB7XG4gICAgaXNNb2JpbGUgPSBfaXNNb2JpbGU7XG4gICAgaXNJT1MgPSBfaXNJT1M7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/keyboard/textinput.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/layer/cursor.js":
/*!***************************************************!*\
  !*** ./node_modules/ace-code/src/layer/cursor.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../edit_session\").EditSession} EditSession\n */\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\n\n\nclass Cursor {\n    /**\n     * @param {HTMLElement} parentEl\n     */\n    constructor(parentEl) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_layer ace_cursor-layer\";\n        parentEl.appendChild(this.element);\n\n        this.isVisible = false;\n        this.isBlinking = true;\n        this.blinkInterval = 1000;\n        this.smoothBlinking = false;\n\n        this.cursors = [];\n        this.cursor = this.addCursor();\n        dom.addCssClass(this.element, \"ace_hidden-cursors\");\n        this.$updateCursors = this.$updateOpacity.bind(this);\n    }\n\n    /**\n     * @param {boolean} [val]\n     */\n    $updateOpacity(val) {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--; )\n            dom.setStyle(cursors[i].style, \"opacity\", val ? \"\" : \"0\");\n    }\n\n    $startCssAnimation() {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--; )\n            cursors[i].style.animationDuration = this.blinkInterval + \"ms\";\n\n        this.$isAnimating = true;\n        setTimeout(function() {\n            if (this.$isAnimating) {\n                dom.addCssClass(this.element, \"ace_animate-blinking\");\n            }\n        }.bind(this));\n    }\n    \n    $stopCssAnimation() {\n        this.$isAnimating = false;\n        dom.removeCssClass(this.element, \"ace_animate-blinking\");\n    }\n\n    /**\n     * @param {number} padding\n     */\n    setPadding(padding) {\n        this.$padding = padding;\n    }\n\n    /**\n     * @param {EditSession} session\n     */\n    setSession(session) {\n        this.session = session;\n    }\n\n    /**\n     * @param {boolean} blinking\n     */\n    setBlinking(blinking) {\n        if (blinking != this.isBlinking) {\n            this.isBlinking = blinking;\n            this.restartTimer();\n        }\n    }\n\n    /**\n     * @param {number} blinkInterval\n     */\n    setBlinkInterval(blinkInterval) {\n        if (blinkInterval != this.blinkInterval) {\n            this.blinkInterval = blinkInterval;\n            this.restartTimer();\n        }\n    }\n\n    /**\n     * @param {boolean} smoothBlinking\n     */\n    setSmoothBlinking(smoothBlinking) {\n        if (smoothBlinking != this.smoothBlinking) {\n            this.smoothBlinking = smoothBlinking;\n            dom.setCssClass(this.element, \"ace_smooth-blinking\", smoothBlinking);\n            this.$updateCursors(true);\n            this.restartTimer();\n        }\n    }\n\n    addCursor() {\n        var el = dom.createElement(\"div\");\n        el.className = \"ace_cursor\";\n        this.element.appendChild(el);\n        this.cursors.push(el);\n        return el;\n    }\n\n    removeCursor() {\n        if (this.cursors.length > 1) {\n            var el = this.cursors.pop();\n            el.parentNode.removeChild(el);\n            return el;\n        }\n    }\n\n    hideCursor() {\n        this.isVisible = false;\n        dom.addCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    }\n\n    showCursor() {\n        this.isVisible = true;\n        dom.removeCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    }\n\n    restartTimer() {\n        var update = this.$updateCursors;\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n        this.$stopCssAnimation();\n\n        if (this.smoothBlinking) {\n            this.$isSmoothBlinking = false;\n            dom.removeCssClass(this.element, \"ace_smooth-blinking\");\n        }\n        \n        update(true);\n\n        if (!this.isBlinking || !this.blinkInterval || !this.isVisible) {\n            this.$stopCssAnimation();\n            return;\n        }\n\n        if (this.smoothBlinking) {\n            this.$isSmoothBlinking = true;\n            setTimeout(function() {\n                if (this.$isSmoothBlinking) {\n                    dom.addCssClass(this.element, \"ace_smooth-blinking\");\n                }\n            }.bind(this));\n        }\n        \n        if (dom.HAS_CSS_ANIMATION) {\n            this.$startCssAnimation();\n        } else {\n            var blink = /**@this{Cursor}*/function(){\n                this.timeoutId = setTimeout(function() {\n                    update(false);\n                }, 0.6 * this.blinkInterval);\n            }.bind(this);\n    \n            this.intervalId = setInterval(function() {\n                update(true);\n                blink();\n            }, this.blinkInterval);\n            blink();\n        }\n    }\n\n    /**\n     * @param {import(\"../../ace-internal\").Ace.Point} [position]\n     * @param {boolean} [onScreen]\n     */\n    getPixelPosition(position, onScreen) {\n        if (!this.config || !this.session)\n            return {left : 0, top : 0};\n\n        if (!position)\n            position = this.session.selection.getCursor();\n        var pos = this.session.documentToScreenPosition(position);\n        var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row)\n            ? this.session.$bidiHandler.getPosLeft(pos.column)\n            : pos.column * this.config.characterWidth);\n\n        var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *\n            this.config.lineHeight;\n\n        return {left : cursorLeft, top : cursorTop};\n    }\n\n    isCursorInView(pixelPos, config) {\n        return pixelPos.top >= 0 && pixelPos.top < config.maxHeight;\n    }\n\n    update(config) {\n        this.config = config;\n\n        var selections = this.session.$selectionMarkers;\n        var i = 0, cursorIndex = 0;\n\n        if (selections === undefined || selections.length === 0){\n            selections = [{cursor: null}];\n        }\n\n        for (var i = 0, n = selections.length; i < n; i++) {\n            var pixelPos = this.getPixelPosition(selections[i].cursor, true);\n            if ((pixelPos.top > config.height + config.offset ||\n                 pixelPos.top < 0) && i > 1) {\n                continue;\n            }\n\n            var element = this.cursors[cursorIndex++] || this.addCursor();\n            var style = element.style;\n            \n            if (!this.drawCursor) {\n                if (!this.isCursorInView(pixelPos, config)) {\n                    dom.setStyle(style, \"display\", \"none\");\n                } else {\n                    dom.setStyle(style, \"display\", \"block\");\n                    dom.translate(element, pixelPos.left, pixelPos.top);\n                    dom.setStyle(style, \"width\", Math.round(config.characterWidth) + \"px\");\n                    dom.setStyle(style, \"height\", config.lineHeight + \"px\");\n                }\n            } else {\n                this.drawCursor(element, pixelPos, config, selections[i], this.session);\n            }\n        }\n        while (this.cursors.length > cursorIndex)\n            this.removeCursor();\n\n        var overwrite = this.session.getOverwrite();\n        this.$setOverwrite(overwrite);\n\n        // cache for textarea and gutter highlight\n        this.$pixelPos = pixelPos;\n        this.restartTimer();\n    }\n\n    /**\n     * @param {boolean} overwrite\n     */\n    $setOverwrite(overwrite) {\n        if (overwrite != this.overwrite) {\n            this.overwrite = overwrite;\n            if (overwrite)\n                dom.addCssClass(this.element, \"ace_overwrite-cursors\");\n            else\n                dom.removeCssClass(this.element, \"ace_overwrite-cursors\");\n        }\n    }\n\n    destroy() {\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n    }\n\n}\n\nCursor.prototype.$padding = 0;\nCursor.prototype.drawCursor = null;\n\n\nexports.Cursor = Cursor;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL2N1cnNvci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsYUFBYSx1Q0FBdUM7QUFDcEQ7QUFDQSxVQUFVLG1CQUFPLENBQUMsMERBQVk7OztBQUc5QjtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsS0FBSztBQUMxQztBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQ0FBcUMsS0FBSztBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixpQ0FBaUMsT0FBTztBQUN4QztBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLHdDQUF3QztBQUN2RCxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9COztBQUVwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxnQkFBZ0I7QUFDaEI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQixhQUFhO0FBQ3hDOztBQUVBLCtDQUErQyxPQUFPO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7OztBQUdBLGNBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9sYXllci9jdXJzb3IuanM/YzU3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2VkaXRfc2Vzc2lvblwiKS5FZGl0U2Vzc2lvbn0gRWRpdFNlc3Npb25cbiAqL1xudmFyIGRvbSA9IHJlcXVpcmUoXCIuLi9saWIvZG9tXCIpO1xuXG5cbmNsYXNzIEN1cnNvciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50RWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRFbCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb20uY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNlX2xheWVyIGFjZV9jdXJzb3ItbGF5ZXJcIjtcbiAgICAgICAgcGFyZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcblxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzQmxpbmtpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmJsaW5rSW50ZXJ2YWwgPSAxMDAwO1xuICAgICAgICB0aGlzLnNtb290aEJsaW5raW5nID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5jdXJzb3JzID0gW107XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5hZGRDdXJzb3IoKTtcbiAgICAgICAgZG9tLmFkZENzc0NsYXNzKHRoaXMuZWxlbWVudCwgXCJhY2VfaGlkZGVuLWN1cnNvcnNcIik7XG4gICAgICAgIHRoaXMuJHVwZGF0ZUN1cnNvcnMgPSB0aGlzLiR1cGRhdGVPcGFjaXR5LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbdmFsXVxuICAgICAqL1xuICAgICR1cGRhdGVPcGFjaXR5KHZhbCkge1xuICAgICAgICB2YXIgY3Vyc29ycyA9IHRoaXMuY3Vyc29ycztcbiAgICAgICAgZm9yICh2YXIgaSA9IGN1cnNvcnMubGVuZ3RoOyBpLS07IClcbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZShjdXJzb3JzW2ldLnN0eWxlLCBcIm9wYWNpdHlcIiwgdmFsID8gXCJcIiA6IFwiMFwiKTtcbiAgICB9XG5cbiAgICAkc3RhcnRDc3NBbmltYXRpb24oKSB7XG4gICAgICAgIHZhciBjdXJzb3JzID0gdGhpcy5jdXJzb3JzO1xuICAgICAgICBmb3IgKHZhciBpID0gY3Vyc29ycy5sZW5ndGg7IGktLTsgKVxuICAgICAgICAgICAgY3Vyc29yc1tpXS5zdHlsZS5hbmltYXRpb25EdXJhdGlvbiA9IHRoaXMuYmxpbmtJbnRlcnZhbCArIFwibXNcIjtcblxuICAgICAgICB0aGlzLiRpc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICBkb20uYWRkQ3NzQ2xhc3ModGhpcy5lbGVtZW50LCBcImFjZV9hbmltYXRlLWJsaW5raW5nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBcbiAgICAkc3RvcENzc0FuaW1hdGlvbigpIHtcbiAgICAgICAgdGhpcy4kaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgZG9tLnJlbW92ZUNzc0NsYXNzKHRoaXMuZWxlbWVudCwgXCJhY2VfYW5pbWF0ZS1ibGlua2luZ1wiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGFkZGluZ1xuICAgICAqL1xuICAgIHNldFBhZGRpbmcocGFkZGluZykge1xuICAgICAgICB0aGlzLiRwYWRkaW5nID0gcGFkZGluZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uXG4gICAgICovXG4gICAgc2V0U2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBibGlua2luZ1xuICAgICAqL1xuICAgIHNldEJsaW5raW5nKGJsaW5raW5nKSB7XG4gICAgICAgIGlmIChibGlua2luZyAhPSB0aGlzLmlzQmxpbmtpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuaXNCbGlua2luZyA9IGJsaW5raW5nO1xuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0VGltZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBibGlua0ludGVydmFsXG4gICAgICovXG4gICAgc2V0QmxpbmtJbnRlcnZhbChibGlua0ludGVydmFsKSB7XG4gICAgICAgIGlmIChibGlua0ludGVydmFsICE9IHRoaXMuYmxpbmtJbnRlcnZhbCkge1xuICAgICAgICAgICAgdGhpcy5ibGlua0ludGVydmFsID0gYmxpbmtJbnRlcnZhbDtcbiAgICAgICAgICAgIHRoaXMucmVzdGFydFRpbWVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNtb290aEJsaW5raW5nXG4gICAgICovXG4gICAgc2V0U21vb3RoQmxpbmtpbmcoc21vb3RoQmxpbmtpbmcpIHtcbiAgICAgICAgaWYgKHNtb290aEJsaW5raW5nICE9IHRoaXMuc21vb3RoQmxpbmtpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuc21vb3RoQmxpbmtpbmcgPSBzbW9vdGhCbGlua2luZztcbiAgICAgICAgICAgIGRvbS5zZXRDc3NDbGFzcyh0aGlzLmVsZW1lbnQsIFwiYWNlX3Ntb290aC1ibGlua2luZ1wiLCBzbW9vdGhCbGlua2luZyk7XG4gICAgICAgICAgICB0aGlzLiR1cGRhdGVDdXJzb3JzKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0VGltZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZEN1cnNvcigpIHtcbiAgICAgICAgdmFyIGVsID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGVsLmNsYXNzTmFtZSA9IFwiYWNlX2N1cnNvclwiO1xuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB0aGlzLmN1cnNvcnMucHVzaChlbCk7XG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9XG5cbiAgICByZW1vdmVDdXJzb3IoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvcnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5jdXJzb3JzLnBvcCgpO1xuICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgICAgICByZXR1cm4gZWw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoaWRlQ3Vyc29yKCkge1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICBkb20uYWRkQ3NzQ2xhc3ModGhpcy5lbGVtZW50LCBcImFjZV9oaWRkZW4tY3Vyc29yc1wiKTtcbiAgICAgICAgdGhpcy5yZXN0YXJ0VGltZXIoKTtcbiAgICB9XG5cbiAgICBzaG93Q3Vyc29yKCkge1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIGRvbS5yZW1vdmVDc3NDbGFzcyh0aGlzLmVsZW1lbnQsIFwiYWNlX2hpZGRlbi1jdXJzb3JzXCIpO1xuICAgICAgICB0aGlzLnJlc3RhcnRUaW1lcigpO1xuICAgIH1cblxuICAgIHJlc3RhcnRUaW1lcigpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSA9IHRoaXMuJHVwZGF0ZUN1cnNvcnM7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKTtcbiAgICAgICAgdGhpcy4kc3RvcENzc0FuaW1hdGlvbigpO1xuXG4gICAgICAgIGlmICh0aGlzLnNtb290aEJsaW5raW5nKSB7XG4gICAgICAgICAgICB0aGlzLiRpc1Ntb290aEJsaW5raW5nID0gZmFsc2U7XG4gICAgICAgICAgICBkb20ucmVtb3ZlQ3NzQ2xhc3ModGhpcy5lbGVtZW50LCBcImFjZV9zbW9vdGgtYmxpbmtpbmdcIik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHVwZGF0ZSh0cnVlKTtcblxuICAgICAgICBpZiAoIXRoaXMuaXNCbGlua2luZyB8fCAhdGhpcy5ibGlua0ludGVydmFsIHx8ICF0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy4kc3RvcENzc0FuaW1hdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc21vb3RoQmxpbmtpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuJGlzU21vb3RoQmxpbmtpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kaXNTbW9vdGhCbGlua2luZykge1xuICAgICAgICAgICAgICAgICAgICBkb20uYWRkQ3NzQ2xhc3ModGhpcy5lbGVtZW50LCBcImFjZV9zbW9vdGgtYmxpbmtpbmdcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRvbS5IQVNfQ1NTX0FOSU1BVElPTikge1xuICAgICAgICAgICAgdGhpcy4kc3RhcnRDc3NBbmltYXRpb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBibGluayA9IC8qKkB0aGlze0N1cnNvcn0qL2Z1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0sIDAuNiAqIHRoaXMuYmxpbmtJbnRlcnZhbCk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgYmxpbmsoKTtcbiAgICAgICAgICAgIH0sIHRoaXMuYmxpbmtJbnRlcnZhbCk7XG4gICAgICAgICAgICBibGluaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLlBvaW50fSBbcG9zaXRpb25dXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb25TY3JlZW5dXG4gICAgICovXG4gICAgZ2V0UGl4ZWxQb3NpdGlvbihwb3NpdGlvbiwgb25TY3JlZW4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZyB8fCAhdGhpcy5zZXNzaW9uKVxuICAgICAgICAgICAgcmV0dXJuIHtsZWZ0IDogMCwgdG9wIDogMH07XG5cbiAgICAgICAgaWYgKCFwb3NpdGlvbilcbiAgICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5zZXNzaW9uLnNlbGVjdGlvbi5nZXRDdXJzb3IoKTtcbiAgICAgICAgdmFyIHBvcyA9IHRoaXMuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgICB2YXIgY3Vyc29yTGVmdCA9IHRoaXMuJHBhZGRpbmcgKyAodGhpcy5zZXNzaW9uLiRiaWRpSGFuZGxlci5pc0JpZGlSb3cocG9zLnJvdywgcG9zaXRpb24ucm93KVxuICAgICAgICAgICAgPyB0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLmdldFBvc0xlZnQocG9zLmNvbHVtbilcbiAgICAgICAgICAgIDogcG9zLmNvbHVtbiAqIHRoaXMuY29uZmlnLmNoYXJhY3RlcldpZHRoKTtcblxuICAgICAgICB2YXIgY3Vyc29yVG9wID0gKHBvcy5yb3cgLSAob25TY3JlZW4gPyB0aGlzLmNvbmZpZy5maXJzdFJvd1NjcmVlbiA6IDApKSAqXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5saW5lSGVpZ2h0O1xuXG4gICAgICAgIHJldHVybiB7bGVmdCA6IGN1cnNvckxlZnQsIHRvcCA6IGN1cnNvclRvcH07XG4gICAgfVxuXG4gICAgaXNDdXJzb3JJblZpZXcocGl4ZWxQb3MsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gcGl4ZWxQb3MudG9wID49IDAgJiYgcGl4ZWxQb3MudG9wIDwgY29uZmlnLm1heEhlaWdodDtcbiAgICB9XG5cbiAgICB1cGRhdGUoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXG4gICAgICAgIHZhciBzZWxlY3Rpb25zID0gdGhpcy5zZXNzaW9uLiRzZWxlY3Rpb25NYXJrZXJzO1xuICAgICAgICB2YXIgaSA9IDAsIGN1cnNvckluZGV4ID0gMDtcblxuICAgICAgICBpZiAoc2VsZWN0aW9ucyA9PT0gdW5kZWZpbmVkIHx8IHNlbGVjdGlvbnMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgICAgIHNlbGVjdGlvbnMgPSBbe2N1cnNvcjogbnVsbH1dO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBzZWxlY3Rpb25zLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgdmFyIHBpeGVsUG9zID0gdGhpcy5nZXRQaXhlbFBvc2l0aW9uKHNlbGVjdGlvbnNbaV0uY3Vyc29yLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICgocGl4ZWxQb3MudG9wID4gY29uZmlnLmhlaWdodCArIGNvbmZpZy5vZmZzZXQgfHxcbiAgICAgICAgICAgICAgICAgcGl4ZWxQb3MudG9wIDwgMCkgJiYgaSA+IDEpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmN1cnNvcnNbY3Vyc29ySW5kZXgrK10gfHwgdGhpcy5hZGRDdXJzb3IoKTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGVsZW1lbnQuc3R5bGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGhpcy5kcmF3Q3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQ3Vyc29ySW5WaWV3KHBpeGVsUG9zLCBjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbS5zZXRTdHlsZShzdHlsZSwgXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb20uc2V0U3R5bGUoc3R5bGUsIFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgICAgICAgICAgICBkb20udHJhbnNsYXRlKGVsZW1lbnQsIHBpeGVsUG9zLmxlZnQsIHBpeGVsUG9zLnRvcCk7XG4gICAgICAgICAgICAgICAgICAgIGRvbS5zZXRTdHlsZShzdHlsZSwgXCJ3aWR0aFwiLCBNYXRoLnJvdW5kKGNvbmZpZy5jaGFyYWN0ZXJXaWR0aCkgKyBcInB4XCIpO1xuICAgICAgICAgICAgICAgICAgICBkb20uc2V0U3R5bGUoc3R5bGUsIFwiaGVpZ2h0XCIsIGNvbmZpZy5saW5lSGVpZ2h0ICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0N1cnNvcihlbGVtZW50LCBwaXhlbFBvcywgY29uZmlnLCBzZWxlY3Rpb25zW2ldLCB0aGlzLnNlc3Npb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0aGlzLmN1cnNvcnMubGVuZ3RoID4gY3Vyc29ySW5kZXgpXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUN1cnNvcigpO1xuXG4gICAgICAgIHZhciBvdmVyd3JpdGUgPSB0aGlzLnNlc3Npb24uZ2V0T3ZlcndyaXRlKCk7XG4gICAgICAgIHRoaXMuJHNldE92ZXJ3cml0ZShvdmVyd3JpdGUpO1xuXG4gICAgICAgIC8vIGNhY2hlIGZvciB0ZXh0YXJlYSBhbmQgZ3V0dGVyIGhpZ2hsaWdodFxuICAgICAgICB0aGlzLiRwaXhlbFBvcyA9IHBpeGVsUG9zO1xuICAgICAgICB0aGlzLnJlc3RhcnRUaW1lcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3ZlcndyaXRlXG4gICAgICovXG4gICAgJHNldE92ZXJ3cml0ZShvdmVyd3JpdGUpIHtcbiAgICAgICAgaWYgKG92ZXJ3cml0ZSAhPSB0aGlzLm92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgdGhpcy5vdmVyd3JpdGUgPSBvdmVyd3JpdGU7XG4gICAgICAgICAgICBpZiAob3ZlcndyaXRlKVxuICAgICAgICAgICAgICAgIGRvbS5hZGRDc3NDbGFzcyh0aGlzLmVsZW1lbnQsIFwiYWNlX292ZXJ3cml0ZS1jdXJzb3JzXCIpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRvbS5yZW1vdmVDc3NDbGFzcyh0aGlzLmVsZW1lbnQsIFwiYWNlX292ZXJ3cml0ZS1jdXJzb3JzXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWQpO1xuICAgIH1cblxufVxuXG5DdXJzb3IucHJvdG90eXBlLiRwYWRkaW5nID0gMDtcbkN1cnNvci5wcm90b3R5cGUuZHJhd0N1cnNvciA9IG51bGw7XG5cblxuZXhwb3J0cy5DdXJzb3IgPSBDdXJzb3I7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/layer/cursor.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/layer/decorators.js":
/*!*******************************************************!*\
  !*** ./node_modules/ace-code/src/layer/decorators.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar EventEmitter = (__webpack_require__(/*! ../lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\n\nclass Decorator {\n    constructor(parent, renderer) {\n        this.canvas = dom.createElement(\"canvas\");\n        this.renderer = renderer;\n        this.pixelRatio = 1;\n        this.maxHeight = renderer.layerConfig.maxHeight;\n        this.lineHeight = renderer.layerConfig.lineHeight;\n        this.canvasHeight = parent.parent.scrollHeight;\n        this.heightRatio = this.canvasHeight / this.maxHeight;\n        this.canvasWidth = parent.width;\n        this.minDecorationHeight = (2 * this.pixelRatio) | 0;\n        this.halfMinDecorationHeight = (this.minDecorationHeight / 2) | 0;\n\n        this.canvas.width = this.canvasWidth;\n        this.canvas.height = this.canvasHeight;\n        this.canvas.style.top = 0 + \"px\";\n        this.canvas.style.right = 0 + \"px\";\n        this.canvas.style.zIndex = 7 + \"px\";\n        this.canvas.style.position = \"absolute\";\n        this.colors = {};\n        this.colors.dark = {\n            \"error\": \"rgba(255, 18, 18, 1)\",\n            \"warning\": \"rgba(18, 136, 18, 1)\",\n            \"info\": \"rgba(18, 18, 136, 1)\"\n        };\n\n        this.colors.light = {\n            \"error\": \"rgb(255,51,51)\",\n            \"warning\": \"rgb(32,133,72)\",\n            \"info\": \"rgb(35,68,138)\"\n        };\n\n        parent.element.appendChild(this.canvas);\n\n    }\n    \n    $updateDecorators(config) {\n        var colors = (this.renderer.theme.isDark === true) ? this.colors.dark : this.colors.light;\n        if (config) {\n            this.maxHeight = config.maxHeight;\n            this.lineHeight = config.lineHeight;\n            this.canvasHeight = config.height;\n            var allLineHeight = (config.lastRow + 1) * this.lineHeight;\n            if (allLineHeight < this.canvasHeight) {\n                this.heightRatio = 1;\n            }\n            else {\n                this.heightRatio = this.canvasHeight / this.maxHeight;\n            }\n        }\n        var ctx = this.canvas.getContext(\"2d\");\n\n        function compare(a, b) {\n            if (a.priority < b.priority) return -1;\n            if (a.priority > b.priority) return 1;\n            return 0;\n        }\n\n        var annotations = this.renderer.session.$annotations;\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        if (annotations) {\n            var priorities = {\n                \"info\": 1,\n                \"warning\": 2,\n                \"error\": 3\n            };\n            annotations.forEach(function (item) {\n                item.priority = priorities[item.type] || null;\n            });\n            annotations = annotations.sort(compare);\n            var foldData = this.renderer.session.$foldData;\n\n            for (let i = 0; i < annotations.length; i++) {\n                let row = annotations[i].row;\n                let compensateFold = this.compensateFoldRows(row, foldData);\n                let currentY = Math.round((row - compensateFold) * this.lineHeight * this.heightRatio);\n                let y1 = Math.round(((row - compensateFold) * this.lineHeight * this.heightRatio));\n                let y2 = Math.round((((row - compensateFold) * this.lineHeight + this.lineHeight) * this.heightRatio));\n                const height = y2 - y1;\n                if (height < this.minDecorationHeight) {\n                    let yCenter = ((y1 + y2) / 2) | 0;\n                    if (yCenter < this.halfMinDecorationHeight) {\n                        yCenter = this.halfMinDecorationHeight;\n                    }\n                    else if (yCenter + this.halfMinDecorationHeight > this.canvasHeight) {\n                        yCenter = this.canvasHeight - this.halfMinDecorationHeight;\n                    }\n                    y1 = Math.round(yCenter - this.halfMinDecorationHeight);\n                    y2 = Math.round(yCenter + this.halfMinDecorationHeight);\n                }\n\n                ctx.fillStyle = colors[annotations[i].type] || null;\n                ctx.fillRect(0, currentY, this.canvasWidth, y2 - y1);\n            }\n        }\n        var cursor = this.renderer.session.selection.getCursor();\n        if (cursor) {\n            let compensateFold = this.compensateFoldRows(cursor.row, foldData);\n            let currentY = Math.round((cursor.row - compensateFold) * this.lineHeight * this.heightRatio);\n            ctx.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n            ctx.fillRect(0, currentY, this.canvasWidth, 2);\n        }\n\n    }\n\n    compensateFoldRows(row, foldData) {\n        let compensateFold = 0;\n        if (foldData && foldData.length > 0) {\n            for (let j = 0; j < foldData.length; j++) {\n                if (row > foldData[j].start.row && row < foldData[j].end.row) {\n                    compensateFold += row - foldData[j].start.row;\n                }\n                else if (row >= foldData[j].end.row) {\n                    compensateFold += foldData[j].end.row - foldData[j].start.row;\n                }\n            }\n        }\n        return compensateFold;\n    }\n}\n\noop.implement(Decorator.prototype, EventEmitter);\n\nexports.Decorator = Decorator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL2RlY29yYXRvcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixVQUFVLG1CQUFPLENBQUMsMERBQVk7QUFDOUIsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLG1CQUFtQixrSEFBNEM7O0FBRS9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQSw0QkFBNEIsd0JBQXdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscUJBQXFCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbGF5ZXIvZGVjb3JhdG9ycy5qcz9iMzNlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIGRvbSA9IHJlcXVpcmUoXCIuLi9saWIvZG9tXCIpO1xudmFyIG9vcCA9IHJlcXVpcmUoXCIuLi9saWIvb29wXCIpO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoXCIuLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG5cbmNsYXNzIERlY29yYXRvciB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCByZW5kZXJlcikge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGRvbS5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMucGl4ZWxSYXRpbyA9IDE7XG4gICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gcmVuZGVyZXIubGF5ZXJDb25maWcubWF4SGVpZ2h0O1xuICAgICAgICB0aGlzLmxpbmVIZWlnaHQgPSByZW5kZXJlci5sYXllckNvbmZpZy5saW5lSGVpZ2h0O1xuICAgICAgICB0aGlzLmNhbnZhc0hlaWdodCA9IHBhcmVudC5wYXJlbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB0aGlzLmhlaWdodFJhdGlvID0gdGhpcy5jYW52YXNIZWlnaHQgLyB0aGlzLm1heEhlaWdodDtcbiAgICAgICAgdGhpcy5jYW52YXNXaWR0aCA9IHBhcmVudC53aWR0aDtcbiAgICAgICAgdGhpcy5taW5EZWNvcmF0aW9uSGVpZ2h0ID0gKDIgKiB0aGlzLnBpeGVsUmF0aW8pIHwgMDtcbiAgICAgICAgdGhpcy5oYWxmTWluRGVjb3JhdGlvbkhlaWdodCA9ICh0aGlzLm1pbkRlY29yYXRpb25IZWlnaHQgLyAyKSB8IDA7XG5cbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmNhbnZhc1dpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhbnZhc0hlaWdodDtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUudG9wID0gMCArIFwicHhcIjtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUucmlnaHQgPSAwICsgXCJweFwiO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS56SW5kZXggPSA3ICsgXCJweFwiO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgdGhpcy5jb2xvcnMgPSB7fTtcbiAgICAgICAgdGhpcy5jb2xvcnMuZGFyayA9IHtcbiAgICAgICAgICAgIFwiZXJyb3JcIjogXCJyZ2JhKDI1NSwgMTgsIDE4LCAxKVwiLFxuICAgICAgICAgICAgXCJ3YXJuaW5nXCI6IFwicmdiYSgxOCwgMTM2LCAxOCwgMSlcIixcbiAgICAgICAgICAgIFwiaW5mb1wiOiBcInJnYmEoMTgsIDE4LCAxMzYsIDEpXCJcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbG9ycy5saWdodCA9IHtcbiAgICAgICAgICAgIFwiZXJyb3JcIjogXCJyZ2IoMjU1LDUxLDUxKVwiLFxuICAgICAgICAgICAgXCJ3YXJuaW5nXCI6IFwicmdiKDMyLDEzMyw3MilcIixcbiAgICAgICAgICAgIFwiaW5mb1wiOiBcInJnYigzNSw2OCwxMzgpXCJcbiAgICAgICAgfTtcblxuICAgICAgICBwYXJlbnQuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XG5cbiAgICB9XG4gICAgXG4gICAgJHVwZGF0ZURlY29yYXRvcnMoY29uZmlnKSB7XG4gICAgICAgIHZhciBjb2xvcnMgPSAodGhpcy5yZW5kZXJlci50aGVtZS5pc0RhcmsgPT09IHRydWUpID8gdGhpcy5jb2xvcnMuZGFyayA6IHRoaXMuY29sb3JzLmxpZ2h0O1xuICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICB0aGlzLm1heEhlaWdodCA9IGNvbmZpZy5tYXhIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmxpbmVIZWlnaHQgPSBjb25maWcubGluZUhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzSGVpZ2h0ID0gY29uZmlnLmhlaWdodDtcbiAgICAgICAgICAgIHZhciBhbGxMaW5lSGVpZ2h0ID0gKGNvbmZpZy5sYXN0Um93ICsgMSkgKiB0aGlzLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBpZiAoYWxsTGluZUhlaWdodCA8IHRoaXMuY2FudmFzSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHRSYXRpbyA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodFJhdGlvID0gdGhpcy5jYW52YXNIZWlnaHQgLyB0aGlzLm1heEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikge1xuICAgICAgICAgICAgaWYgKGEucHJpb3JpdHkgPCBiLnByaW9yaXR5KSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYS5wcmlvcml0eSA+IGIucHJpb3JpdHkpIHJldHVybiAxO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYW5ub3RhdGlvbnMgPSB0aGlzLnJlbmRlcmVyLnNlc3Npb24uJGFubm90YXRpb25zO1xuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBpZiAoYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBwcmlvcml0aWVzID0ge1xuICAgICAgICAgICAgICAgIFwiaW5mb1wiOiAxLFxuICAgICAgICAgICAgICAgIFwid2FybmluZ1wiOiAyLFxuICAgICAgICAgICAgICAgIFwiZXJyb3JcIjogM1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFubm90YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpdGVtLnByaW9yaXR5ID0gcHJpb3JpdGllc1tpdGVtLnR5cGVdIHx8IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFubm90YXRpb25zID0gYW5ub3RhdGlvbnMuc29ydChjb21wYXJlKTtcbiAgICAgICAgICAgIHZhciBmb2xkRGF0YSA9IHRoaXMucmVuZGVyZXIuc2Vzc2lvbi4kZm9sZERhdGE7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5ub3RhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gYW5ub3RhdGlvbnNbaV0ucm93O1xuICAgICAgICAgICAgICAgIGxldCBjb21wZW5zYXRlRm9sZCA9IHRoaXMuY29tcGVuc2F0ZUZvbGRSb3dzKHJvdywgZm9sZERhdGEpO1xuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50WSA9IE1hdGgucm91bmQoKHJvdyAtIGNvbXBlbnNhdGVGb2xkKSAqIHRoaXMubGluZUhlaWdodCAqIHRoaXMuaGVpZ2h0UmF0aW8pO1xuICAgICAgICAgICAgICAgIGxldCB5MSA9IE1hdGgucm91bmQoKChyb3cgLSBjb21wZW5zYXRlRm9sZCkgKiB0aGlzLmxpbmVIZWlnaHQgKiB0aGlzLmhlaWdodFJhdGlvKSk7XG4gICAgICAgICAgICAgICAgbGV0IHkyID0gTWF0aC5yb3VuZCgoKChyb3cgLSBjb21wZW5zYXRlRm9sZCkgKiB0aGlzLmxpbmVIZWlnaHQgKyB0aGlzLmxpbmVIZWlnaHQpICogdGhpcy5oZWlnaHRSYXRpbykpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHkyIC0geTE7XG4gICAgICAgICAgICAgICAgaWYgKGhlaWdodCA8IHRoaXMubWluRGVjb3JhdGlvbkhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeUNlbnRlciA9ICgoeTEgKyB5MikgLyAyKSB8IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh5Q2VudGVyIDwgdGhpcy5oYWxmTWluRGVjb3JhdGlvbkhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeUNlbnRlciA9IHRoaXMuaGFsZk1pbkRlY29yYXRpb25IZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoeUNlbnRlciArIHRoaXMuaGFsZk1pbkRlY29yYXRpb25IZWlnaHQgPiB0aGlzLmNhbnZhc0hlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeUNlbnRlciA9IHRoaXMuY2FudmFzSGVpZ2h0IC0gdGhpcy5oYWxmTWluRGVjb3JhdGlvbkhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB5MSA9IE1hdGgucm91bmQoeUNlbnRlciAtIHRoaXMuaGFsZk1pbkRlY29yYXRpb25IZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB5MiA9IE1hdGgucm91bmQoeUNlbnRlciArIHRoaXMuaGFsZk1pbkRlY29yYXRpb25IZWlnaHQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcnNbYW5ub3RhdGlvbnNbaV0udHlwZV0gfHwgbnVsbDtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgY3VycmVudFksIHRoaXMuY2FudmFzV2lkdGgsIHkyIC0geTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLnJlbmRlcmVyLnNlc3Npb24uc2VsZWN0aW9uLmdldEN1cnNvcigpO1xuICAgICAgICBpZiAoY3Vyc29yKSB7XG4gICAgICAgICAgICBsZXQgY29tcGVuc2F0ZUZvbGQgPSB0aGlzLmNvbXBlbnNhdGVGb2xkUm93cyhjdXJzb3Iucm93LCBmb2xkRGF0YSk7XG4gICAgICAgICAgICBsZXQgY3VycmVudFkgPSBNYXRoLnJvdW5kKChjdXJzb3Iucm93IC0gY29tcGVuc2F0ZUZvbGQpICogdGhpcy5saW5lSGVpZ2h0ICogdGhpcy5oZWlnaHRSYXRpbyk7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJyZ2JhKDAsIDAsIDAsIDAuNSlcIjtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCBjdXJyZW50WSwgdGhpcy5jYW52YXNXaWR0aCwgMik7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGNvbXBlbnNhdGVGb2xkUm93cyhyb3csIGZvbGREYXRhKSB7XG4gICAgICAgIGxldCBjb21wZW5zYXRlRm9sZCA9IDA7XG4gICAgICAgIGlmIChmb2xkRGF0YSAmJiBmb2xkRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZvbGREYXRhLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvdyA+IGZvbGREYXRhW2pdLnN0YXJ0LnJvdyAmJiByb3cgPCBmb2xkRGF0YVtqXS5lbmQucm93KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBlbnNhdGVGb2xkICs9IHJvdyAtIGZvbGREYXRhW2pdLnN0YXJ0LnJvdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocm93ID49IGZvbGREYXRhW2pdLmVuZC5yb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGVuc2F0ZUZvbGQgKz0gZm9sZERhdGFbal0uZW5kLnJvdyAtIGZvbGREYXRhW2pdLnN0YXJ0LnJvdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBlbnNhdGVGb2xkO1xuICAgIH1cbn1cblxub29wLmltcGxlbWVudChEZWNvcmF0b3IucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIpO1xuXG5leHBvcnRzLkRlY29yYXRvciA9IERlY29yYXRvcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/layer/decorators.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/layer/font_metrics.js":
/*!*********************************************************!*\
  !*** ./node_modules/ace-code/src/layer/font_metrics.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("var oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar lang = __webpack_require__(/*! ../lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar useragent = __webpack_require__(/*! ../lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\nvar EventEmitter = (__webpack_require__(/*! ../lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\n\nvar CHAR_COUNT = 512;\nvar USE_OBSERVER = typeof ResizeObserver == \"function\";\nvar L = 200;\n\nclass FontMetrics {\n\n    /**\n     * @param {HTMLElement} parentEl\n     */\n    constructor(parentEl) {\n        this.el = dom.createElement(\"div\");\n        this.$setMeasureNodeStyles(this.el.style, true);\n\n        this.$main = dom.createElement(\"div\");\n        this.$setMeasureNodeStyles(this.$main.style);\n\n        this.$measureNode = dom.createElement(\"div\");\n        this.$setMeasureNodeStyles(this.$measureNode.style);\n\n\n        this.el.appendChild(this.$main);\n        this.el.appendChild(this.$measureNode);\n        parentEl.appendChild(this.el);\n\n        this.$measureNode.textContent = lang.stringRepeat(\"X\", CHAR_COUNT);\n\n        this.$characterSize = {width: 0, height: 0};\n\n\n        if (USE_OBSERVER)\n            this.$addObserver();\n        else\n            this.checkForSizeChanges();\n    }\n    \n    $setMeasureNodeStyles(style, isRoot) {\n        style.width = style.height = \"auto\";\n        style.left = style.top = \"0px\";\n        style.visibility = \"hidden\";\n        style.position = \"absolute\";\n        style.whiteSpace = \"pre\";\n\n        if (useragent.isIE < 8) {\n            style[\"font-family\"] = \"inherit\";\n        } else {\n            style.font = \"inherit\";\n        }\n        style.overflow = isRoot ? \"hidden\" : \"visible\";\n    }\n\n    /**\n     * @param size\n     */\n    checkForSizeChanges(size) {\n        if (size === undefined)\n            size = this.$measureSizes();\n        if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {\n            this.$measureNode.style.fontWeight = \"bold\";\n            var boldSize = this.$measureSizes();\n            this.$measureNode.style.fontWeight = \"\";\n            this.$characterSize = size;\n            this.charSizes = Object.create(null);\n            this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;\n            this._emit(\"changeCharacterSize\", {data: size});\n        }\n    }\n\n    $addObserver() {\n        var self = this;\n        this.$observer = new window.ResizeObserver(function(e) {\n            // e[0].contentRect is broken on safari when zoomed;\n            self.checkForSizeChanges();\n        });\n        this.$observer.observe(this.$measureNode);\n    }\n\n    /**\n     * @return {number}\n     */\n    $pollSizeChanges() {\n        if (this.$pollSizeChangesTimer || this.$observer)\n            return this.$pollSizeChangesTimer;\n        var self = this;\n        \n        return this.$pollSizeChangesTimer = event.onIdle(function cb() {\n            self.checkForSizeChanges();\n            event.onIdle(cb, 500);\n        }, 500);\n    }\n\n    /**\n     * @param {boolean} val\n     */\n    setPolling(val) {\n        if (val) {\n            this.$pollSizeChanges();\n        } else if (this.$pollSizeChangesTimer) {\n            clearInterval(this.$pollSizeChangesTimer);\n            this.$pollSizeChangesTimer = 0;\n        }\n    }\n\n    $measureSizes(node) {\n        var size = {\n            height: (node || this.$measureNode).clientHeight,\n            width: (node || this.$measureNode).clientWidth / CHAR_COUNT\n        };\n        \n        // Size and width can be null if the editor is not visible or\n        // detached from the document\n        if (size.width === 0 || size.height === 0)\n            return null;\n        return size;\n    }\n\n    $measureCharWidth(ch) {\n        this.$main.textContent = lang.stringRepeat(ch, CHAR_COUNT);\n        var rect = this.$main.getBoundingClientRect();\n        return rect.width / CHAR_COUNT;\n    }\n    \n    getCharacterWidth(ch) {\n        var w = this.charSizes[ch];\n        if (w === undefined) {\n            w = this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;\n        }\n        return w;\n    }\n\n    destroy() {\n        clearInterval(this.$pollSizeChangesTimer);\n        if (this.$observer)\n            this.$observer.disconnect();\n        if (this.el && this.el.parentNode)\n            this.el.parentNode.removeChild(this.el);\n    }\n\n    \n    $getZoom(element) {\n        if (!element || !element.parentElement) return 1;\n        return (Number(window.getComputedStyle(element)[\"zoom\"]) || 1) * this.$getZoom(element.parentElement);\n    }\n    \n    $initTransformMeasureNodes() {\n        var t = function(t, l) {\n            return [\"div\", {\n                style: \"position: absolute;top:\" + t + \"px;left:\" + l + \"px;\"\n            }];\n        };\n        this.els = dom.buildDom([t(0, 0), t(L, 0), t(0, L), t(L, L)], this.el);\n    }\n    // general transforms from element coordinates x to screen coordinates u have the form\n    // | m1[0] m2[0] t[0] |   | x |       | u |\n    // | m1[1] m2[1] t[1] | . | y |  == k | v |\n    // | h[0]  h[1]  1    |   | 1 |       | 1 |\n    // this function finds the coeeficients of the matrix using positions of four points\n    //  \n    transformCoordinates(clientPos, elPos) {\n        if (clientPos) {\n            var zoom = this.$getZoom(this.el);\n            clientPos = mul(1 / zoom, clientPos);\n        }\n        function solve(l1, l2, r) {\n            var det = l1[1] * l2[0] - l1[0] * l2[1];\n            return [\n                (-l2[1] * r[0] + l2[0] * r[1]) / det,\n                (+l1[1] * r[0] - l1[0] * r[1]) / det\n            ];\n        }\n        function sub(a, b) { return [a[0] - b[0], a[1] - b[1]]; }\n        function add(a, b) { return [a[0] + b[0], a[1] + b[1]]; }\n        function mul(a, b) { return [a * b[0], a * b[1]]; }\n\n        if (!this.els)\n            this.$initTransformMeasureNodes();\n        \n        function p(el) {\n            var r = el.getBoundingClientRect();\n            return [r.left, r.top];\n        }\n\n        var a = p(this.els[0]);\n        var b = p(this.els[1]);\n        var c = p(this.els[2]);\n        var d = p(this.els[3]);\n\n        var h = solve(sub(d, b), sub(d, c), sub(add(b, c), add(d, a)));\n\n        var m1 = mul(1 + h[0], sub(b, a));\n        var m2 = mul(1 + h[1], sub(c, a));\n        \n        if (elPos) {\n            var x = elPos;\n            var k = h[0] * x[0] / L + h[1] * x[1] / L + 1;\n            var ut = add(mul(x[0], m1), mul(x[1], m2));\n            return  add(mul(1 / k / L, ut), a);\n        }\n        var u = sub(clientPos, a);\n        var f = solve(sub(m1, mul(h[0], u)), sub(m2, mul(h[1], u)), u);\n        return mul(L, f);\n    }\n    \n}\nFontMetrics.prototype.$characterSize = {width: 0, height: 0};\n\noop.implement(FontMetrics.prototype, EventEmitter);\n\nexports.FontMetrics = FontMetrics;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL2ZvbnRfbWV0cmljcy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxVQUFVLG1CQUFPLENBQUMsMERBQVk7QUFDOUIsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLFdBQVcsbUJBQU8sQ0FBQyw0REFBYTtBQUNoQyxZQUFZLG1CQUFPLENBQUMsOERBQWM7QUFDbEMsZ0JBQWdCLG1CQUFPLENBQUMsc0VBQWtCO0FBQzFDLG1CQUFtQixrSEFBNEM7O0FBRS9EO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSwrQkFBK0I7OztBQUcvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxXQUFXO0FBQzFEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLGdCQUFnQixpQkFBaUI7QUFDNUUsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qiw2QkFBNkI7QUFDN0IsNkJBQTZCOztBQUU3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7O0FBRXhDOztBQUVBLG1CQUFtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL2ZvbnRfbWV0cmljcy5qcz9mZjI5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBvb3AgPSByZXF1aXJlKFwiLi4vbGliL29vcFwiKTtcbnZhciBkb20gPSByZXF1aXJlKFwiLi4vbGliL2RvbVwiKTtcbnZhciBsYW5nID0gcmVxdWlyZShcIi4uL2xpYi9sYW5nXCIpO1xudmFyIGV2ZW50ID0gcmVxdWlyZShcIi4uL2xpYi9ldmVudFwiKTtcbnZhciB1c2VyYWdlbnQgPSByZXF1aXJlKFwiLi4vbGliL3VzZXJhZ2VudFwiKTtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiLi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyO1xuXG52YXIgQ0hBUl9DT1VOVCA9IDUxMjtcbnZhciBVU0VfT0JTRVJWRVIgPSB0eXBlb2YgUmVzaXplT2JzZXJ2ZXIgPT0gXCJmdW5jdGlvblwiO1xudmFyIEwgPSAyMDA7XG5cbmNsYXNzIEZvbnRNZXRyaWNzIHtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudEVsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50RWwpIHtcbiAgICAgICAgdGhpcy5lbCA9IGRvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLiRzZXRNZWFzdXJlTm9kZVN0eWxlcyh0aGlzLmVsLnN0eWxlLCB0cnVlKTtcblxuICAgICAgICB0aGlzLiRtYWluID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuJHNldE1lYXN1cmVOb2RlU3R5bGVzKHRoaXMuJG1haW4uc3R5bGUpO1xuXG4gICAgICAgIHRoaXMuJG1lYXN1cmVOb2RlID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuJHNldE1lYXN1cmVOb2RlU3R5bGVzKHRoaXMuJG1lYXN1cmVOb2RlLnN0eWxlKTtcblxuXG4gICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy4kbWFpbik7XG4gICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy4kbWVhc3VyZU5vZGUpO1xuICAgICAgICBwYXJlbnRFbC5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcblxuICAgICAgICB0aGlzLiRtZWFzdXJlTm9kZS50ZXh0Q29udGVudCA9IGxhbmcuc3RyaW5nUmVwZWF0KFwiWFwiLCBDSEFSX0NPVU5UKTtcblxuICAgICAgICB0aGlzLiRjaGFyYWN0ZXJTaXplID0ge3dpZHRoOiAwLCBoZWlnaHQ6IDB9O1xuXG5cbiAgICAgICAgaWYgKFVTRV9PQlNFUlZFUilcbiAgICAgICAgICAgIHRoaXMuJGFkZE9ic2VydmVyKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuY2hlY2tGb3JTaXplQ2hhbmdlcygpO1xuICAgIH1cbiAgICBcbiAgICAkc2V0TWVhc3VyZU5vZGVTdHlsZXMoc3R5bGUsIGlzUm9vdCkge1xuICAgICAgICBzdHlsZS53aWR0aCA9IHN0eWxlLmhlaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICBzdHlsZS5sZWZ0ID0gc3R5bGUudG9wID0gXCIwcHhcIjtcbiAgICAgICAgc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBzdHlsZS53aGl0ZVNwYWNlID0gXCJwcmVcIjtcblxuICAgICAgICBpZiAodXNlcmFnZW50LmlzSUUgPCA4KSB7XG4gICAgICAgICAgICBzdHlsZVtcImZvbnQtZmFtaWx5XCJdID0gXCJpbmhlcml0XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHlsZS5mb250ID0gXCJpbmhlcml0XCI7XG4gICAgICAgIH1cbiAgICAgICAgc3R5bGUub3ZlcmZsb3cgPSBpc1Jvb3QgPyBcImhpZGRlblwiIDogXCJ2aXNpYmxlXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNpemVcbiAgICAgKi9cbiAgICBjaGVja0ZvclNpemVDaGFuZ2VzKHNpemUpIHtcbiAgICAgICAgaWYgKHNpemUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLiRtZWFzdXJlU2l6ZXMoKTtcbiAgICAgICAgaWYgKHNpemUgJiYgKHRoaXMuJGNoYXJhY3RlclNpemUud2lkdGggIT09IHNpemUud2lkdGggfHwgdGhpcy4kY2hhcmFjdGVyU2l6ZS5oZWlnaHQgIT09IHNpemUuaGVpZ2h0KSkge1xuICAgICAgICAgICAgdGhpcy4kbWVhc3VyZU5vZGUuc3R5bGUuZm9udFdlaWdodCA9IFwiYm9sZFwiO1xuICAgICAgICAgICAgdmFyIGJvbGRTaXplID0gdGhpcy4kbWVhc3VyZVNpemVzKCk7XG4gICAgICAgICAgICB0aGlzLiRtZWFzdXJlTm9kZS5zdHlsZS5mb250V2VpZ2h0ID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMuJGNoYXJhY3RlclNpemUgPSBzaXplO1xuICAgICAgICAgICAgdGhpcy5jaGFyU2l6ZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5hbGxvd0JvbGRGb250cyA9IGJvbGRTaXplICYmIGJvbGRTaXplLndpZHRoID09PSBzaXplLndpZHRoICYmIGJvbGRTaXplLmhlaWdodCA9PT0gc2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLl9lbWl0KFwiY2hhbmdlQ2hhcmFjdGVyU2l6ZVwiLCB7ZGF0YTogc2l6ZX0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJGFkZE9ic2VydmVyKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuJG9ic2VydmVyID0gbmV3IHdpbmRvdy5SZXNpemVPYnNlcnZlcihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAvLyBlWzBdLmNvbnRlbnRSZWN0IGlzIGJyb2tlbiBvbiBzYWZhcmkgd2hlbiB6b29tZWQ7XG4gICAgICAgICAgICBzZWxmLmNoZWNrRm9yU2l6ZUNoYW5nZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuJG9ic2VydmVyLm9ic2VydmUodGhpcy4kbWVhc3VyZU5vZGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICAkcG9sbFNpemVDaGFuZ2VzKCkge1xuICAgICAgICBpZiAodGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXIgfHwgdGhpcy4kb2JzZXJ2ZXIpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXI7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLiRwb2xsU2l6ZUNoYW5nZXNUaW1lciA9IGV2ZW50Lm9uSWRsZShmdW5jdGlvbiBjYigpIHtcbiAgICAgICAgICAgIHNlbGYuY2hlY2tGb3JTaXplQ2hhbmdlcygpO1xuICAgICAgICAgICAgZXZlbnQub25JZGxlKGNiLCA1MDApO1xuICAgICAgICB9LCA1MDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICovXG4gICAgc2V0UG9sbGluZyh2YWwpIHtcbiAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgdGhpcy4kcG9sbFNpemVDaGFuZ2VzKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXIpO1xuICAgICAgICAgICAgdGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXIgPSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJG1lYXN1cmVTaXplcyhub2RlKSB7XG4gICAgICAgIHZhciBzaXplID0ge1xuICAgICAgICAgICAgaGVpZ2h0OiAobm9kZSB8fCB0aGlzLiRtZWFzdXJlTm9kZSkuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgd2lkdGg6IChub2RlIHx8IHRoaXMuJG1lYXN1cmVOb2RlKS5jbGllbnRXaWR0aCAvIENIQVJfQ09VTlRcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpemUgYW5kIHdpZHRoIGNhbiBiZSBudWxsIGlmIHRoZSBlZGl0b3IgaXMgbm90IHZpc2libGUgb3JcbiAgICAgICAgLy8gZGV0YWNoZWQgZnJvbSB0aGUgZG9jdW1lbnRcbiAgICAgICAgaWYgKHNpemUud2lkdGggPT09IDAgfHwgc2l6ZS5oZWlnaHQgPT09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgfVxuXG4gICAgJG1lYXN1cmVDaGFyV2lkdGgoY2gpIHtcbiAgICAgICAgdGhpcy4kbWFpbi50ZXh0Q29udGVudCA9IGxhbmcuc3RyaW5nUmVwZWF0KGNoLCBDSEFSX0NPVU5UKTtcbiAgICAgICAgdmFyIHJlY3QgPSB0aGlzLiRtYWluLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4gcmVjdC53aWR0aCAvIENIQVJfQ09VTlQ7XG4gICAgfVxuICAgIFxuICAgIGdldENoYXJhY3RlcldpZHRoKGNoKSB7XG4gICAgICAgIHZhciB3ID0gdGhpcy5jaGFyU2l6ZXNbY2hdO1xuICAgICAgICBpZiAodyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3ID0gdGhpcy5jaGFyU2l6ZXNbY2hdID0gdGhpcy4kbWVhc3VyZUNoYXJXaWR0aChjaCkgLyB0aGlzLiRjaGFyYWN0ZXJTaXplLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3O1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy4kcG9sbFNpemVDaGFuZ2VzVGltZXIpO1xuICAgICAgICBpZiAodGhpcy4kb2JzZXJ2ZXIpXG4gICAgICAgICAgICB0aGlzLiRvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIGlmICh0aGlzLmVsICYmIHRoaXMuZWwucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIHRoaXMuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsKTtcbiAgICB9XG5cbiAgICBcbiAgICAkZ2V0Wm9vbShlbGVtZW50KSB7XG4gICAgICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5wYXJlbnRFbGVtZW50KSByZXR1cm4gMTtcbiAgICAgICAgcmV0dXJuIChOdW1iZXIod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudClbXCJ6b29tXCJdKSB8fCAxKSAqIHRoaXMuJGdldFpvb20oZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcbiAgICB9XG4gICAgXG4gICAgJGluaXRUcmFuc2Zvcm1NZWFzdXJlTm9kZXMoKSB7XG4gICAgICAgIHZhciB0ID0gZnVuY3Rpb24odCwgbCkge1xuICAgICAgICAgICAgcmV0dXJuIFtcImRpdlwiLCB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IFwicG9zaXRpb246IGFic29sdXRlO3RvcDpcIiArIHQgKyBcInB4O2xlZnQ6XCIgKyBsICsgXCJweDtcIlxuICAgICAgICAgICAgfV07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZWxzID0gZG9tLmJ1aWxkRG9tKFt0KDAsIDApLCB0KEwsIDApLCB0KDAsIEwpLCB0KEwsIEwpXSwgdGhpcy5lbCk7XG4gICAgfVxuICAgIC8vIGdlbmVyYWwgdHJhbnNmb3JtcyBmcm9tIGVsZW1lbnQgY29vcmRpbmF0ZXMgeCB0byBzY3JlZW4gY29vcmRpbmF0ZXMgdSBoYXZlIHRoZSBmb3JtXG4gICAgLy8gfCBtMVswXSBtMlswXSB0WzBdIHwgICB8IHggfCAgICAgICB8IHUgfFxuICAgIC8vIHwgbTFbMV0gbTJbMV0gdFsxXSB8IC4gfCB5IHwgID09IGsgfCB2IHxcbiAgICAvLyB8IGhbMF0gIGhbMV0gIDEgICAgfCAgIHwgMSB8ICAgICAgIHwgMSB8XG4gICAgLy8gdGhpcyBmdW5jdGlvbiBmaW5kcyB0aGUgY29lZWZpY2llbnRzIG9mIHRoZSBtYXRyaXggdXNpbmcgcG9zaXRpb25zIG9mIGZvdXIgcG9pbnRzXG4gICAgLy8gIFxuICAgIHRyYW5zZm9ybUNvb3JkaW5hdGVzKGNsaWVudFBvcywgZWxQb3MpIHtcbiAgICAgICAgaWYgKGNsaWVudFBvcykge1xuICAgICAgICAgICAgdmFyIHpvb20gPSB0aGlzLiRnZXRab29tKHRoaXMuZWwpO1xuICAgICAgICAgICAgY2xpZW50UG9zID0gbXVsKDEgLyB6b29tLCBjbGllbnRQb3MpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNvbHZlKGwxLCBsMiwgcikge1xuICAgICAgICAgICAgdmFyIGRldCA9IGwxWzFdICogbDJbMF0gLSBsMVswXSAqIGwyWzFdO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAoLWwyWzFdICogclswXSArIGwyWzBdICogclsxXSkgLyBkZXQsXG4gICAgICAgICAgICAgICAgKCtsMVsxXSAqIHJbMF0gLSBsMVswXSAqIHJbMV0pIC8gZGV0XG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHN1YihhLCBiKSB7IHJldHVybiBbYVswXSAtIGJbMF0sIGFbMV0gLSBiWzFdXTsgfVxuICAgICAgICBmdW5jdGlvbiBhZGQoYSwgYikgeyByZXR1cm4gW2FbMF0gKyBiWzBdLCBhWzFdICsgYlsxXV07IH1cbiAgICAgICAgZnVuY3Rpb24gbXVsKGEsIGIpIHsgcmV0dXJuIFthICogYlswXSwgYSAqIGJbMV1dOyB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmVscylcbiAgICAgICAgICAgIHRoaXMuJGluaXRUcmFuc2Zvcm1NZWFzdXJlTm9kZXMoKTtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHAoZWwpIHtcbiAgICAgICAgICAgIHZhciByID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICByZXR1cm4gW3IubGVmdCwgci50b3BdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGEgPSBwKHRoaXMuZWxzWzBdKTtcbiAgICAgICAgdmFyIGIgPSBwKHRoaXMuZWxzWzFdKTtcbiAgICAgICAgdmFyIGMgPSBwKHRoaXMuZWxzWzJdKTtcbiAgICAgICAgdmFyIGQgPSBwKHRoaXMuZWxzWzNdKTtcblxuICAgICAgICB2YXIgaCA9IHNvbHZlKHN1YihkLCBiKSwgc3ViKGQsIGMpLCBzdWIoYWRkKGIsIGMpLCBhZGQoZCwgYSkpKTtcblxuICAgICAgICB2YXIgbTEgPSBtdWwoMSArIGhbMF0sIHN1YihiLCBhKSk7XG4gICAgICAgIHZhciBtMiA9IG11bCgxICsgaFsxXSwgc3ViKGMsIGEpKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChlbFBvcykge1xuICAgICAgICAgICAgdmFyIHggPSBlbFBvcztcbiAgICAgICAgICAgIHZhciBrID0gaFswXSAqIHhbMF0gLyBMICsgaFsxXSAqIHhbMV0gLyBMICsgMTtcbiAgICAgICAgICAgIHZhciB1dCA9IGFkZChtdWwoeFswXSwgbTEpLCBtdWwoeFsxXSwgbTIpKTtcbiAgICAgICAgICAgIHJldHVybiAgYWRkKG11bCgxIC8gayAvIEwsIHV0KSwgYSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHUgPSBzdWIoY2xpZW50UG9zLCBhKTtcbiAgICAgICAgdmFyIGYgPSBzb2x2ZShzdWIobTEsIG11bChoWzBdLCB1KSksIHN1YihtMiwgbXVsKGhbMV0sIHUpKSwgdSk7XG4gICAgICAgIHJldHVybiBtdWwoTCwgZik7XG4gICAgfVxuICAgIFxufVxuRm9udE1ldHJpY3MucHJvdG90eXBlLiRjaGFyYWN0ZXJTaXplID0ge3dpZHRoOiAwLCBoZWlnaHQ6IDB9O1xuXG5vb3AuaW1wbGVtZW50KEZvbnRNZXRyaWNzLnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyKTtcblxuZXhwb3J0cy5Gb250TWV0cmljcyA9IEZvbnRNZXRyaWNzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/layer/font_metrics.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/layer/gutter.js":
/*!***************************************************!*\
  !*** ./node_modules/ace-code/src/layer/gutter.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../edit_session\").EditSession} EditSession\n * @typedef {import(\"../../ace-internal\").Ace.LayerConfig} LayerConfig\n */\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar lang = __webpack_require__(/*! ../lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar EventEmitter = (__webpack_require__(/*! ../lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nvar Lines = (__webpack_require__(/*! ./lines */ \"./node_modules/ace-code/src/layer/lines.js\").Lines);\nvar nls = (__webpack_require__(/*! ../config */ \"./node_modules/ace-code/src/config.js\").nls);\n\nclass Gutter{\n    /**\n     * @param {HTMLElement} parentEl\n     */\n    constructor(parentEl) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_layer ace_gutter-layer\";\n        parentEl.appendChild(this.element);\n        this.setShowFoldWidgets(this.$showFoldWidgets);\n\n        this.gutterWidth = 0;\n\n        this.$annotations = [];\n        this.$updateAnnotations = this.$updateAnnotations.bind(this);\n\n        this.$lines = new Lines(this.element);\n        this.$lines.$offsetCoefficient = 1;\n    }\n\n    /**\n     * @param {EditSession} session\n     */\n    setSession(session) {\n        if (this.session)\n            this.session.off(\"change\", this.$updateAnnotations);\n        this.session = session;\n        if (session)\n            session.on(\"change\", this.$updateAnnotations);\n    }\n\n    /**\n     * @param {number} row\n     * @param {string} className\n     */\n    addGutterDecoration(row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.addGutterDecoration\");\n        this.session.addGutterDecoration(row, className);\n    }\n\n    /**\n     * @param {number} row\n     * @param {string} className\n     */\n    removeGutterDecoration(row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.removeGutterDecoration\");\n        this.session.removeGutterDecoration(row, className);\n    }\n\n    /**\n     * @param {any[]} annotations\n     */\n    setAnnotations(annotations) {\n        // iterate over sparse array\n        this.$annotations = [];\n        for (var i = 0; i < annotations.length; i++) {\n            var annotation = annotations[i];\n            var row = annotation.row;\n            var rowInfo = this.$annotations[row];\n            if (!rowInfo)\n                rowInfo = this.$annotations[row] = {text: [], type: [], displayText: []};\n           \n            var annoText = annotation.text;\n            var displayAnnoText = annotation.text;\n            var annoType = annotation.type;\n            annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || \"\";\n            displayAnnoText = displayAnnoText ? displayAnnoText : annotation.html || \"\";\n\n            if (rowInfo.text.indexOf(annoText) === -1){\n                rowInfo.text.push(annoText);\n                rowInfo.type.push(annoType);\n                rowInfo.displayText.push(displayAnnoText);\n            }\n\n            var className = annotation.className;\n            if (className) {\n                rowInfo.className = className;\n            } else if (annoType === \"error\") {\n                rowInfo.className = \" ace_error\";\n            } else if (annoType === \"security\" && !/\\bace_error\\b/.test(rowInfo.className)) {\n                rowInfo.className = \" ace_security\";\n            } else if (annoType === \"warning\" && !/\\bace_(error|security)\\b/.test(rowInfo.className)) {\n                rowInfo.className = \" ace_warning\";\n            } else if (annoType === \"info\" && !rowInfo.className) {\n                rowInfo.className = \" ace_info\";\n            } else if (annoType === \"hint\" && !rowInfo.className) {\n                rowInfo.className = \" ace_hint\";\n            }\n        }\n    }\n\n    /**\n     * @param {import(\"../../ace-internal\").Ace.Delta} delta\n     */\n    $updateAnnotations(delta) {\n        if (!this.$annotations.length)\n            return;\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n        if (len === 0) {\n            // do nothing\n        } else if (delta.action == 'remove') {\n            this.$annotations.splice(firstRow, len + 1, null);\n        } else {\n            var args = new Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.$annotations.splice.apply(this.$annotations, args);\n        }\n    }\n\n    /**\n     * @param {LayerConfig} config\n     */\n    update(config) {\n        this.config = config;\n        \n        var session = this.session;\n        var firstRow = config.firstRow;\n        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar\n            session.getLength() - 1);\n            \n        this.oldLastRow = lastRow;\n        this.config = config;\n        \n        this.$lines.moveContainer(config);\n        this.$updateCursorRow();\n            \n        var fold = session.getNextFoldLine(firstRow);\n        var foldStart = fold ? fold.start.row : Infinity;\n\n        var cell = null;\n        var index = -1;\n        var row = firstRow;\n        \n        while (true) {\n            if (row > foldStart) {\n                row = fold.end.row + 1;\n                fold = session.getNextFoldLine(row, fold);\n                foldStart = fold ? fold.start.row : Infinity;\n            }\n            if (row > lastRow) {\n                while (this.$lines.getLength() > index + 1)\n                    this.$lines.pop();\n                    \n                break;\n            }\n\n            cell = this.$lines.get(++index);\n            if (cell) {\n                cell.row = row;\n            } else {\n                cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n                this.$lines.push(cell);\n            }\n\n            this.$renderCell(cell, config, fold, row);\n            row++;\n        }\n        \n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    }\n\n    /**\n     * @param {LayerConfig} config\n     */\n    $updateGutterWidth(config) {\n        var session = this.session;\n        \n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        \n        var firstLineNumber = session.$firstLineNumber;\n        var lastLineText = this.$lines.last() ? this.$lines.last().text : \"\";\n        \n        if (this.$fixedWidth || session.$useWrapMode)\n            lastLineText = session.getLength() + firstLineNumber - 1;\n\n        var gutterWidth = gutterRenderer \n            ? gutterRenderer.getWidth(session, lastLineText, config)\n            : lastLineText.toString().length * config.characterWidth;\n        \n        var padding = this.$padding || this.$computePadding();\n        gutterWidth += padding.left + padding.right;\n        if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {\n            this.gutterWidth = gutterWidth;\n            /**@type{any}*/(this.element.parentNode).style.width = \n            this.element.style.width = Math.ceil(this.gutterWidth) + \"px\";\n            this._signal(\"changeGutterWidth\", gutterWidth);\n        }\n    }\n    \n    $updateCursorRow() {\n        if (!this.$highlightGutterLine)\n            return;\n            \n        var position = this.session.selection.getCursor();\n        if (this.$cursorRow === position.row)\n            return;\n        \n        this.$cursorRow = position.row;\n    }\n    \n    updateLineHighlight() {\n        if (!this.$highlightGutterLine)\n            return;\n        var row = this.session.selection.cursor.row;\n        this.$cursorRow = row;\n\n        if (this.$cursorCell && this.$cursorCell.row == row)\n            return;\n        if (this.$cursorCell)\n            this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n        var cells = this.$lines.cells;\n        this.$cursorCell = null;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            if (cell.row >= this.$cursorRow) {\n                if (cell.row > this.$cursorRow) {\n                    var fold = this.session.getFoldLine(this.$cursorRow);\n                    if (i > 0 && fold && fold.start.row == cells[i - 1].row)\n                        cell = cells[i - 1];\n                    else\n                        break;\n                }\n                cell.element.className = \"ace_gutter-active-line \" + cell.element.className;\n                this.$cursorCell = cell;\n                break;\n            }\n        }\n    }\n\n    /**\n     * @param {LayerConfig} config\n     */\n    scrollLines(config) {\n        var oldConfig = this.config;\n        this.config = config;\n        \n        this.$updateCursorRow();\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n        \n        this.$lines.moveContainer(config);\n\n        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar\n            this.session.getLength() - 1);\n        var oldLastRow = this.oldLastRow;\n        this.oldLastRow = lastRow;\n        \n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)\n                this.$lines.shift();\n\n        if (oldLastRow > lastRow)\n            for (var row=this.session.getFoldedRowCount(lastRow + 1, oldLastRow); row>0; row--)\n                this.$lines.pop();\n\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLines(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n\n        if (lastRow > oldLastRow) {\n            this.$lines.push(this.$renderLines(config, oldLastRow + 1, lastRow));\n        }\n        \n        this.updateLineHighlight();\n        \n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    }\n\n    /**\n     * @param {LayerConfig} config\n     * @param {number} firstRow\n     * @param {number} lastRow\n     */\n    $renderLines(config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n\n            var cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n            this.$renderCell(cell, config, foldLine, row);\n            fragment.push(cell);\n\n            row++;\n        }\n        return fragment;\n    }\n\n\n    /**\n     * @param {any} cell\n     * @param {LayerConfig} config\n     * @param {import(\"../../ace-internal\").Ace.IRange | undefined} fold\n     * @param {number} row\n     */\n    $renderCell(cell, config, fold, row) {\n        var element = cell.element;\n        \n        var session = this.session;\n        \n        var textNode = element.childNodes[0];\n        var foldWidget = element.childNodes[1];\n        var annotationNode = element.childNodes[2];\n        var annotationIconNode = annotationNode.firstChild;\n\n        var firstLineNumber = session.$firstLineNumber;\n        \n        var breakpoints = session.$breakpoints;\n        var decorations = session.$decorations;\n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        var foldWidgets = this.$showFoldWidgets && session.foldWidgets;\n        var foldStart = fold ? fold.start.row : Number.MAX_VALUE;\n        \n        var lineHeight = config.lineHeight + \"px\";\n\n        var className = this.$useSvgGutterIcons ? \"ace_gutter-cell_svg-icons \" : \"ace_gutter-cell \";\n        var iconClassName = this.$useSvgGutterIcons ? \"ace_icon_svg\" : \"ace_icon\";\n        \n        var rowText = (gutterRenderer\n            ? gutterRenderer.getText(session, row)\n            : row + firstLineNumber).toString();\n\n        if (this.$highlightGutterLine) {\n            if (row == this.$cursorRow || (fold && row < this.$cursorRow && row >= foldStart &&  this.$cursorRow <= fold.end.row)) {\n                className += \"ace_gutter-active-line \";\n                if (this.$cursorCell != cell) {\n                    if (this.$cursorCell)\n                        this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n                    this.$cursorCell = cell;\n                }\n            }\n        }\n        \n        if (breakpoints[row])\n            className += breakpoints[row];\n        if (decorations[row])\n            className += decorations[row];\n        if (this.$annotations[row] && row !== foldStart)\n            className += this.$annotations[row].className;\n\n        if (foldWidgets) {\n            var c = foldWidgets[row];\n            // check if cached value is invalidated and we need to recompute\n            if (c == null)\n                c = foldWidgets[row] = session.getFoldWidget(row);\n        }\n\n        if (c) {\n            var foldClass = \"ace_fold-widget ace_\" + c;\n            var isClosedFold = c == \"start\" && row == foldStart && row < fold.end.row;\n            if (isClosedFold) {\n                foldClass += \" ace_closed\";\n                var foldAnnotationClass = \"\";\n                var annotationInFold = false;\n\n                for (var i = row + 1; i <= fold.end.row; i++) {\n                    if (!this.$annotations[i]) continue;\n\n                    if (this.$annotations[i].className === \" ace_error\") {\n                        annotationInFold = true;\n                        foldAnnotationClass = \" ace_error_fold\";\n                        break;\n                    }\n\n                    if (this.$annotations[i].className === \" ace_security\") {\n                        annotationInFold = true;\n                        foldAnnotationClass = \" ace_security_fold\";\n                    } else if (\n                        this.$annotations[i].className === \" ace_warning\" &&\n                        foldAnnotationClass !== \" ace_security_fold\"\n                    ) {\n                        annotationInFold = true;\n                        foldAnnotationClass = \" ace_warning_fold\";\n                    }\n                }\n\n                className += foldAnnotationClass;\n            }\n            else\n                foldClass += \" ace_open\";\n            if (foldWidget.className != foldClass)\n                foldWidget.className = foldClass;\n\n            dom.setStyle(foldWidget.style, \"height\", lineHeight);\n            dom.setStyle(foldWidget.style, \"display\", \"inline-block\");\n\n            // Set a11y properties.\n            foldWidget.setAttribute(\"role\", \"button\");\n            foldWidget.setAttribute(\"tabindex\", \"-1\");\n            var foldRange = session.getFoldWidgetRange(row);\n\n            // getFoldWidgetRange is optional to be implemented by fold modes, if not available we fall-back.\n            if (foldRange)\n                foldWidget.setAttribute(\n                    \"aria-label\",\n                    nls(\"gutter.code-folding.range.aria-label\", \"Toggle code folding, rows $0 through $1\", [\n                        foldRange.start.row + 1,\n                        foldRange.end.row + 1\n                    ])\n                );\n            else {\n                if (fold)\n                    foldWidget.setAttribute(\n                        \"aria-label\",\n                        nls(\"gutter.code-folding.closed.aria-label\", \"Toggle code folding, rows $0 through $1\", [\n                            fold.start.row + 1,\n                            fold.end.row + 1\n                        ])\n                    );\n                else\n                    foldWidget.setAttribute(\n                        \"aria-label\",\n                        nls(\"gutter.code-folding.open.aria-label\", \"Toggle code folding, row $0\", [row + 1])\n                    );\n            }\n\n            if (isClosedFold) {\n                foldWidget.setAttribute(\"aria-expanded\", \"false\");\n                foldWidget.setAttribute(\"title\", nls(\"gutter.code-folding.closed.title\", \"Unfold code\"));\n            } else {\n                foldWidget.setAttribute(\"aria-expanded\", \"true\");\n                foldWidget.setAttribute(\"title\", nls(\"gutter.code-folding.open.title\", \"Fold code\"));\n            }\n        } else {\n            if (foldWidget) {\n                dom.setStyle(foldWidget.style, \"display\", \"none\");\n                foldWidget.setAttribute(\"tabindex\", \"0\");\n                foldWidget.removeAttribute(\"role\");\n                foldWidget.removeAttribute(\"aria-label\");\n            }\n        }\n\n        if (annotationInFold && this.$showFoldedAnnotations){\n            annotationNode.className = \"ace_gutter_annotation\";\n            annotationIconNode.className = iconClassName;\n            annotationIconNode.className += foldAnnotationClass;\n\n            dom.setStyle(annotationIconNode.style, \"height\", lineHeight);\n            dom.setStyle(annotationNode.style, \"display\", \"block\");\n            dom.setStyle(annotationNode.style, \"height\", lineHeight);\n            var ariaLabel;\n            switch(foldAnnotationClass) {\n                case \" ace_error_fold\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.error\", \"Error, read annotations row $0\", [rowText]);\n                    break;\n\n                case \" ace_security_fold\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.security\", \"Security finding, read annotations row $0\", [rowText]);\n                    break;\n\n                case \" ace_warning_fold\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.warning\", \"Warning, read annotations row $0\", [rowText]);\n                    break;\n            }\n            annotationNode.setAttribute(\"aria-label\", ariaLabel);\n            annotationNode.setAttribute(\"tabindex\", \"-1\");\n            annotationNode.setAttribute(\"role\", \"button\");\n        }\n        else if (this.$annotations[row]){\n            annotationNode.className = \"ace_gutter_annotation\";\n            annotationIconNode.className = iconClassName;\n\n            if (this.$useSvgGutterIcons)\n                annotationIconNode.className += this.$annotations[row].className;\n            else \n                element.classList.add(this.$annotations[row].className.replace(\" \", \"\"));\n\n            dom.setStyle(annotationIconNode.style, \"height\", lineHeight);\n            dom.setStyle(annotationNode.style, \"display\", \"block\");\n            dom.setStyle(annotationNode.style, \"height\", lineHeight);\n            var ariaLabel;\n            switch(this.$annotations[row].className) {\n                case \" ace_error\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.error\", \"Error, read annotations row $0\", [rowText]);\n                    break;\n\n                case \" ace_security\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.security\", \"Security finding, read annotations row $0\", [rowText]);\n                    break;\n\n                case \" ace_warning\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.warning\", \"Warning, read annotations row $0\", [rowText]);\n                    break;\n\n                case \" ace_info\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.info\", \"Info, read annotations row $0\", [rowText]);\n                    break;\n\n                case \" ace_hint\":\n                    ariaLabel = nls(\"gutter.annotation.aria-label.hint\", \"Suggestion, read annotations row $0\", [rowText]);\n                    break;\n            }\n            annotationNode.setAttribute(\"aria-label\", ariaLabel);\n            annotationNode.setAttribute(\"tabindex\", \"-1\");\n            annotationNode.setAttribute(\"role\", \"button\");\n        }\n        else {\n            dom.setStyle(annotationNode.style, \"display\", \"none\");\n            annotationNode.removeAttribute(\"aria-label\");\n            annotationNode.removeAttribute(\"role\");\n            annotationNode.setAttribute(\"tabindex\", \"0\");\n        }\n        if (rowText !== textNode.data) {\n            textNode.data = rowText;\n        } \n\n        if (element.className != className)\n            element.className = className;\n        dom.setStyle(cell.element.style, \"height\", this.$lines.computeLineHeight(row, config, session) + \"px\");\n        dom.setStyle(cell.element.style, \"top\", this.$lines.computeLineTop(row, config, session) + \"px\");\n        \n        cell.text = rowText;\n\n        // If there are no annotations or fold widgets in the gutter cell, hide it from assistive tech.\n        if (annotationNode.style.display === \"none\" && foldWidget.style.display === \"none\")\n            cell.element.setAttribute(\"aria-hidden\", true);\n        else\n            cell.element.setAttribute(\"aria-hidden\", false);\n        \n        return cell;\n    }\n\n    /**\n     * @param {boolean} highlightGutterLine\n     */\n    setHighlightGutterLine(highlightGutterLine) {\n        this.$highlightGutterLine = highlightGutterLine;\n    }\n\n    /**\n     * @param {boolean} show\n     */\n    setShowLineNumbers(show) {\n        this.$renderer = !show && {\n            getWidth: function() {return 0;},\n            getText: function() {return \"\";}\n        };\n    }\n    \n    getShowLineNumbers() {\n        return this.$showLineNumbers;\n    }\n\n    /**\n     * @param {boolean} [show]\n     */\n    setShowFoldWidgets(show) {\n        if (show)\n            dom.addCssClass(this.element, \"ace_folding-enabled\");\n        else\n            dom.removeCssClass(this.element, \"ace_folding-enabled\");\n\n        this.$showFoldWidgets = show;\n        this.$padding = null;\n    }\n    \n    getShowFoldWidgets() {\n        return this.$showFoldWidgets;\n    }\n\n    $computePadding() {\n        if (!this.element.firstChild)\n            return {left: 0, right: 0};\n        var style = dom.computedStyle(/**@type{Element}*/(this.element.firstChild));\n        this.$padding = {};\n        this.$padding.left = (parseInt(style.borderLeftWidth) || 0)\n            + (parseInt(style.paddingLeft) || 0) + 1;\n        this.$padding.right = (parseInt(style.borderRightWidth) || 0)\n            + (parseInt(style.paddingRight) || 0);\n        return this.$padding;\n    }\n\n    /**\n     * @param {{ x: number; }} point\n     */\n    getRegion(point) {\n        var padding = this.$padding || this.$computePadding();\n        var rect = this.element.getBoundingClientRect();\n        if (point.x < padding.left + rect.left)\n            return \"markers\";\n        if (this.$showFoldWidgets && point.x > rect.right - padding.right)\n            return \"foldWidgets\";\n    }\n\n}\n\nGutter.prototype.$fixedWidth = false;\nGutter.prototype.$highlightGutterLine = true;\nGutter.prototype.$renderer = \"\";\nGutter.prototype.$showLineNumbers = true;\nGutter.prototype.$showFoldWidgets = true;\n\noop.implement(Gutter.prototype, EventEmitter);\n\nfunction onCreateCell(element) {\n    var textNode = document.createTextNode('');\n    element.appendChild(textNode);\n    \n    var foldWidget = dom.createElement(\"span\");\n    element.appendChild(foldWidget);\n\n    var annotationNode = dom.createElement(\"span\");\n    element.appendChild(annotationNode);\n\n    var annotationIconNode = dom.createElement(\"span\");\n    annotationNode.appendChild(annotationIconNode);\n    \n    return element;\n}\n\nexports.Gutter = Gutter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL2d1dHRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsYUFBYSx1Q0FBdUM7QUFDcEQsYUFBYSw4Q0FBOEM7QUFDM0Q7QUFDQSxVQUFVLG1CQUFPLENBQUMsMERBQVk7QUFDOUIsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLFdBQVcsbUJBQU8sQ0FBQyw0REFBYTtBQUNoQyxtQkFBbUIsa0hBQTRDO0FBQy9ELFlBQVksd0ZBQXdCO0FBQ3BDLFVBQVUsbUZBQXdCOztBQUVsQztBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3QkFBd0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSx3Q0FBd0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsSUFBSTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtHQUFrRyxPQUFPO0FBQ3pHOztBQUVBO0FBQ0Esa0ZBQWtGLE9BQU87QUFDekY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxlQUFlLEtBQUs7QUFDcEIsZUFBZSxhQUFhO0FBQzVCLGVBQWUscURBQXFEO0FBQ3BFLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNDQUFzQyxtQkFBbUI7QUFDekQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFVBQVU7QUFDNUMsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQiwrQ0FBK0MsUUFBUTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL2d1dHRlci5qcz85ZjJiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuTGF5ZXJDb25maWd9IExheWVyQ29uZmlnXG4gKi9cbnZhciBkb20gPSByZXF1aXJlKFwiLi4vbGliL2RvbVwiKTtcbnZhciBvb3AgPSByZXF1aXJlKFwiLi4vbGliL29vcFwiKTtcbnZhciBsYW5nID0gcmVxdWlyZShcIi4uL2xpYi9sYW5nXCIpO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoXCIuLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG52YXIgTGluZXMgPSByZXF1aXJlKFwiLi9saW5lc1wiKS5MaW5lcztcbnZhciBubHMgPSByZXF1aXJlKFwiLi4vY29uZmlnXCIpLm5scztcblxuY2xhc3MgR3V0dGVye1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudEVsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50RWwpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBcImFjZV9sYXllciBhY2VfZ3V0dGVyLWxheWVyXCI7XG4gICAgICAgIHBhcmVudEVsLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMuc2V0U2hvd0ZvbGRXaWRnZXRzKHRoaXMuJHNob3dGb2xkV2lkZ2V0cyk7XG5cbiAgICAgICAgdGhpcy5ndXR0ZXJXaWR0aCA9IDA7XG5cbiAgICAgICAgdGhpcy4kYW5ub3RhdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy4kdXBkYXRlQW5ub3RhdGlvbnMgPSB0aGlzLiR1cGRhdGVBbm5vdGF0aW9ucy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuJGxpbmVzID0gbmV3IExpbmVzKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMuJGxpbmVzLiRvZmZzZXRDb2VmZmljaWVudCA9IDE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFZGl0U2Vzc2lvbn0gc2Vzc2lvblxuICAgICAqL1xuICAgIHNldFNlc3Npb24oc2Vzc2lvbikge1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uKVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm9mZihcImNoYW5nZVwiLCB0aGlzLiR1cGRhdGVBbm5vdGF0aW9ucyk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIGlmIChzZXNzaW9uKVxuICAgICAgICAgICAgc2Vzc2lvbi5vbihcImNoYW5nZVwiLCB0aGlzLiR1cGRhdGVBbm5vdGF0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICAgKi9cbiAgICBhZGRHdXR0ZXJEZWNvcmF0aW9uKHJvdywgY2xhc3NOYW1lKSB7XG4gICAgICAgIGlmICh3aW5kb3cuY29uc29sZSlcbiAgICAgICAgICAgIGNvbnNvbGUud2FybiAmJiBjb25zb2xlLndhcm4oXCJkZXByZWNhdGVkIHVzZSBzZXNzaW9uLmFkZEd1dHRlckRlY29yYXRpb25cIik7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5hZGRHdXR0ZXJEZWNvcmF0aW9uKHJvdywgY2xhc3NOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm93XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZVxuICAgICAqL1xuICAgIHJlbW92ZUd1dHRlckRlY29yYXRpb24ocm93LCBjbGFzc05hbWUpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5jb25zb2xlKVxuICAgICAgICAgICAgY29uc29sZS53YXJuICYmIGNvbnNvbGUud2FybihcImRlcHJlY2F0ZWQgdXNlIHNlc3Npb24ucmVtb3ZlR3V0dGVyRGVjb3JhdGlvblwiKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnJlbW92ZUd1dHRlckRlY29yYXRpb24ocm93LCBjbGFzc05hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7YW55W119IGFubm90YXRpb25zXG4gICAgICovXG4gICAgc2V0QW5ub3RhdGlvbnMoYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHNwYXJzZSBhcnJheVxuICAgICAgICB0aGlzLiRhbm5vdGF0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFubm90YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYW5ub3RhdGlvbiA9IGFubm90YXRpb25zW2ldO1xuICAgICAgICAgICAgdmFyIHJvdyA9IGFubm90YXRpb24ucm93O1xuICAgICAgICAgICAgdmFyIHJvd0luZm8gPSB0aGlzLiRhbm5vdGF0aW9uc1tyb3ddO1xuICAgICAgICAgICAgaWYgKCFyb3dJbmZvKVxuICAgICAgICAgICAgICAgIHJvd0luZm8gPSB0aGlzLiRhbm5vdGF0aW9uc1tyb3ddID0ge3RleHQ6IFtdLCB0eXBlOiBbXSwgZGlzcGxheVRleHQ6IFtdfTtcbiAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgYW5ub1RleHQgPSBhbm5vdGF0aW9uLnRleHQ7XG4gICAgICAgICAgICB2YXIgZGlzcGxheUFubm9UZXh0ID0gYW5ub3RhdGlvbi50ZXh0O1xuICAgICAgICAgICAgdmFyIGFubm9UeXBlID0gYW5ub3RhdGlvbi50eXBlO1xuICAgICAgICAgICAgYW5ub1RleHQgPSBhbm5vVGV4dCA/IGxhbmcuZXNjYXBlSFRNTChhbm5vVGV4dCkgOiBhbm5vdGF0aW9uLmh0bWwgfHwgXCJcIjtcbiAgICAgICAgICAgIGRpc3BsYXlBbm5vVGV4dCA9IGRpc3BsYXlBbm5vVGV4dCA/IGRpc3BsYXlBbm5vVGV4dCA6IGFubm90YXRpb24uaHRtbCB8fCBcIlwiO1xuXG4gICAgICAgICAgICBpZiAocm93SW5mby50ZXh0LmluZGV4T2YoYW5ub1RleHQpID09PSAtMSl7XG4gICAgICAgICAgICAgICAgcm93SW5mby50ZXh0LnB1c2goYW5ub1RleHQpO1xuICAgICAgICAgICAgICAgIHJvd0luZm8udHlwZS5wdXNoKGFubm9UeXBlKTtcbiAgICAgICAgICAgICAgICByb3dJbmZvLmRpc3BsYXlUZXh0LnB1c2goZGlzcGxheUFubm9UZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IGFubm90YXRpb24uY2xhc3NOYW1lO1xuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIHJvd0luZm8uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbm5vVHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICAgICAgcm93SW5mby5jbGFzc05hbWUgPSBcIiBhY2VfZXJyb3JcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYW5ub1R5cGUgPT09IFwic2VjdXJpdHlcIiAmJiAhL1xcYmFjZV9lcnJvclxcYi8udGVzdChyb3dJbmZvLmNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByb3dJbmZvLmNsYXNzTmFtZSA9IFwiIGFjZV9zZWN1cml0eVwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhbm5vVHlwZSA9PT0gXCJ3YXJuaW5nXCIgJiYgIS9cXGJhY2VfKGVycm9yfHNlY3VyaXR5KVxcYi8udGVzdChyb3dJbmZvLmNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICByb3dJbmZvLmNsYXNzTmFtZSA9IFwiIGFjZV93YXJuaW5nXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFubm9UeXBlID09PSBcImluZm9cIiAmJiAhcm93SW5mby5jbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICByb3dJbmZvLmNsYXNzTmFtZSA9IFwiIGFjZV9pbmZvXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFubm9UeXBlID09PSBcImhpbnRcIiAmJiAhcm93SW5mby5jbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICByb3dJbmZvLmNsYXNzTmFtZSA9IFwiIGFjZV9oaW50XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuRGVsdGF9IGRlbHRhXG4gICAgICovXG4gICAgJHVwZGF0ZUFubm90YXRpb25zKGRlbHRhKSB7XG4gICAgICAgIGlmICghdGhpcy4kYW5ub3RhdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgZmlyc3RSb3cgPSBkZWx0YS5zdGFydC5yb3c7XG4gICAgICAgIHZhciBsZW4gPSBkZWx0YS5lbmQucm93IC0gZmlyc3RSb3c7XG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgfSBlbHNlIGlmIChkZWx0YS5hY3Rpb24gPT0gJ3JlbW92ZScpIHtcbiAgICAgICAgICAgIHRoaXMuJGFubm90YXRpb25zLnNwbGljZShmaXJzdFJvdywgbGVuICsgMSwgbnVsbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShsZW4gKyAxKTtcbiAgICAgICAgICAgIGFyZ3MudW5zaGlmdChmaXJzdFJvdywgMSk7XG4gICAgICAgICAgICB0aGlzLiRhbm5vdGF0aW9ucy5zcGxpY2UuYXBwbHkodGhpcy4kYW5ub3RhdGlvbnMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllckNvbmZpZ30gY29uZmlnXG4gICAgICovXG4gICAgdXBkYXRlKGNvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgXG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICB2YXIgZmlyc3RSb3cgPSBjb25maWcuZmlyc3RSb3c7XG4gICAgICAgIHZhciBsYXN0Um93ID0gTWF0aC5taW4oY29uZmlnLmxhc3RSb3cgKyBjb25maWcuZ3V0dGVyT2Zmc2V0LCAgLy8gbmVlZGVkIHRvIGNvbXBlbnNhdGUgZm9yIGhvciBzY29sbGJhclxuICAgICAgICAgICAgc2Vzc2lvbi5nZXRMZW5ndGgoKSAtIDEpO1xuICAgICAgICAgICAgXG4gICAgICAgIHRoaXMub2xkTGFzdFJvdyA9IGxhc3RSb3c7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICBcbiAgICAgICAgdGhpcy4kbGluZXMubW92ZUNvbnRhaW5lcihjb25maWcpO1xuICAgICAgICB0aGlzLiR1cGRhdGVDdXJzb3JSb3coKTtcbiAgICAgICAgICAgIFxuICAgICAgICB2YXIgZm9sZCA9IHNlc3Npb24uZ2V0TmV4dEZvbGRMaW5lKGZpcnN0Um93KTtcbiAgICAgICAgdmFyIGZvbGRTdGFydCA9IGZvbGQgPyBmb2xkLnN0YXJ0LnJvdyA6IEluZmluaXR5O1xuXG4gICAgICAgIHZhciBjZWxsID0gbnVsbDtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIHZhciByb3cgPSBmaXJzdFJvdztcbiAgICAgICAgXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAocm93ID4gZm9sZFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcm93ID0gZm9sZC5lbmQucm93ICsgMTtcbiAgICAgICAgICAgICAgICBmb2xkID0gc2Vzc2lvbi5nZXROZXh0Rm9sZExpbmUocm93LCBmb2xkKTtcbiAgICAgICAgICAgICAgICBmb2xkU3RhcnQgPSBmb2xkID8gZm9sZC5zdGFydC5yb3cgOiBJbmZpbml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cgPiBsYXN0Um93KSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuJGxpbmVzLmdldExlbmd0aCgpID4gaW5kZXggKyAxKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRsaW5lcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNlbGwgPSB0aGlzLiRsaW5lcy5nZXQoKytpbmRleCk7XG4gICAgICAgICAgICBpZiAoY2VsbCkge1xuICAgICAgICAgICAgICAgIGNlbGwucm93ID0gcm93O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjZWxsID0gdGhpcy4kbGluZXMuY3JlYXRlQ2VsbChyb3csIGNvbmZpZywgdGhpcy5zZXNzaW9uLCBvbkNyZWF0ZUNlbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGxpbmVzLnB1c2goY2VsbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuJHJlbmRlckNlbGwoY2VsbCwgY29uZmlnLCBmb2xkLCByb3cpO1xuICAgICAgICAgICAgcm93Kys7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NpZ25hbChcImFmdGVyUmVuZGVyXCIpO1xuICAgICAgICB0aGlzLiR1cGRhdGVHdXR0ZXJXaWR0aChjb25maWcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TGF5ZXJDb25maWd9IGNvbmZpZ1xuICAgICAqL1xuICAgICR1cGRhdGVHdXR0ZXJXaWR0aChjb25maWcpIHtcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIFxuICAgICAgICB2YXIgZ3V0dGVyUmVuZGVyZXIgPSBzZXNzaW9uLmd1dHRlclJlbmRlcmVyIHx8IHRoaXMuJHJlbmRlcmVyO1xuICAgICAgICBcbiAgICAgICAgdmFyIGZpcnN0TGluZU51bWJlciA9IHNlc3Npb24uJGZpcnN0TGluZU51bWJlcjtcbiAgICAgICAgdmFyIGxhc3RMaW5lVGV4dCA9IHRoaXMuJGxpbmVzLmxhc3QoKSA/IHRoaXMuJGxpbmVzLmxhc3QoKS50ZXh0IDogXCJcIjtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLiRmaXhlZFdpZHRoIHx8IHNlc3Npb24uJHVzZVdyYXBNb2RlKVxuICAgICAgICAgICAgbGFzdExpbmVUZXh0ID0gc2Vzc2lvbi5nZXRMZW5ndGgoKSArIGZpcnN0TGluZU51bWJlciAtIDE7XG5cbiAgICAgICAgdmFyIGd1dHRlcldpZHRoID0gZ3V0dGVyUmVuZGVyZXIgXG4gICAgICAgICAgICA/IGd1dHRlclJlbmRlcmVyLmdldFdpZHRoKHNlc3Npb24sIGxhc3RMaW5lVGV4dCwgY29uZmlnKVxuICAgICAgICAgICAgOiBsYXN0TGluZVRleHQudG9TdHJpbmcoKS5sZW5ndGggKiBjb25maWcuY2hhcmFjdGVyV2lkdGg7XG4gICAgICAgIFxuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMuJHBhZGRpbmcgfHwgdGhpcy4kY29tcHV0ZVBhZGRpbmcoKTtcbiAgICAgICAgZ3V0dGVyV2lkdGggKz0gcGFkZGluZy5sZWZ0ICsgcGFkZGluZy5yaWdodDtcbiAgICAgICAgaWYgKGd1dHRlcldpZHRoICE9PSB0aGlzLmd1dHRlcldpZHRoICYmICFpc05hTihndXR0ZXJXaWR0aCkpIHtcbiAgICAgICAgICAgIHRoaXMuZ3V0dGVyV2lkdGggPSBndXR0ZXJXaWR0aDtcbiAgICAgICAgICAgIC8qKkB0eXBle2FueX0qLyh0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkuc3R5bGUud2lkdGggPSBcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IE1hdGguY2VpbCh0aGlzLmd1dHRlcldpZHRoKSArIFwicHhcIjtcbiAgICAgICAgICAgIHRoaXMuX3NpZ25hbChcImNoYW5nZUd1dHRlcldpZHRoXCIsIGd1dHRlcldpZHRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAkdXBkYXRlQ3Vyc29yUm93KCkge1xuICAgICAgICBpZiAoIXRoaXMuJGhpZ2hsaWdodEd1dHRlckxpbmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5zZXNzaW9uLnNlbGVjdGlvbi5nZXRDdXJzb3IoKTtcbiAgICAgICAgaWYgKHRoaXMuJGN1cnNvclJvdyA9PT0gcG9zaXRpb24ucm93KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgdGhpcy4kY3Vyc29yUm93ID0gcG9zaXRpb24ucm93O1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGVMaW5lSGlnaGxpZ2h0KCkge1xuICAgICAgICBpZiAoIXRoaXMuJGhpZ2hsaWdodEd1dHRlckxpbmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciByb3cgPSB0aGlzLnNlc3Npb24uc2VsZWN0aW9uLmN1cnNvci5yb3c7XG4gICAgICAgIHRoaXMuJGN1cnNvclJvdyA9IHJvdztcblxuICAgICAgICBpZiAodGhpcy4kY3Vyc29yQ2VsbCAmJiB0aGlzLiRjdXJzb3JDZWxsLnJvdyA9PSByb3cpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLiRjdXJzb3JDZWxsKVxuICAgICAgICAgICAgdGhpcy4kY3Vyc29yQ2VsbC5lbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuJGN1cnNvckNlbGwuZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShcImFjZV9ndXR0ZXItYWN0aXZlLWxpbmUgXCIsIFwiXCIpO1xuICAgICAgICB2YXIgY2VsbHMgPSB0aGlzLiRsaW5lcy5jZWxscztcbiAgICAgICAgdGhpcy4kY3Vyc29yQ2VsbCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjZWxsID0gY2VsbHNbaV07XG4gICAgICAgICAgICBpZiAoY2VsbC5yb3cgPj0gdGhpcy4kY3Vyc29yUm93KSB7XG4gICAgICAgICAgICAgICAgaWYgKGNlbGwucm93ID4gdGhpcy4kY3Vyc29yUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb2xkID0gdGhpcy5zZXNzaW9uLmdldEZvbGRMaW5lKHRoaXMuJGN1cnNvclJvdyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCAmJiBmb2xkICYmIGZvbGQuc3RhcnQucm93ID09IGNlbGxzW2kgLSAxXS5yb3cpXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsID0gY2VsbHNbaSAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2VsbC5lbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNlX2d1dHRlci1hY3RpdmUtbGluZSBcIiArIGNlbGwuZWxlbWVudC5jbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgdGhpcy4kY3Vyc29yQ2VsbCA9IGNlbGw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheWVyQ29uZmlnfSBjb25maWdcbiAgICAgKi9cbiAgICBzY3JvbGxMaW5lcyhjb25maWcpIHtcbiAgICAgICAgdmFyIG9sZENvbmZpZyA9IHRoaXMuY29uZmlnO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgXG4gICAgICAgIHRoaXMuJHVwZGF0ZUN1cnNvclJvdygpO1xuICAgICAgICBpZiAodGhpcy4kbGluZXMucGFnZUNoYW5nZWQob2xkQ29uZmlnLCBjb25maWcpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLiRsaW5lcy5tb3ZlQ29udGFpbmVyKGNvbmZpZyk7XG5cbiAgICAgICAgdmFyIGxhc3RSb3cgPSBNYXRoLm1pbihjb25maWcubGFzdFJvdyArIGNvbmZpZy5ndXR0ZXJPZmZzZXQsICAvLyBuZWVkZWQgdG8gY29tcGVuc2F0ZSBmb3IgaG9yIHNjb2xsYmFyXG4gICAgICAgICAgICB0aGlzLnNlc3Npb24uZ2V0TGVuZ3RoKCkgLSAxKTtcbiAgICAgICAgdmFyIG9sZExhc3RSb3cgPSB0aGlzLm9sZExhc3RSb3c7XG4gICAgICAgIHRoaXMub2xkTGFzdFJvdyA9IGxhc3RSb3c7XG4gICAgICAgIFxuICAgICAgICBpZiAoIW9sZENvbmZpZyB8fCBvbGRMYXN0Um93IDwgY29uZmlnLmZpcnN0Um93KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKGNvbmZpZyk7XG5cbiAgICAgICAgaWYgKGxhc3RSb3cgPCBvbGRDb25maWcuZmlyc3RSb3cpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUoY29uZmlnKTtcblxuICAgICAgICBpZiAob2xkQ29uZmlnLmZpcnN0Um93IDwgY29uZmlnLmZpcnN0Um93KVxuICAgICAgICAgICAgZm9yICh2YXIgcm93PXRoaXMuc2Vzc2lvbi5nZXRGb2xkZWRSb3dDb3VudChvbGRDb25maWcuZmlyc3RSb3csIGNvbmZpZy5maXJzdFJvdyAtIDEpOyByb3c+MDsgcm93LS0pXG4gICAgICAgICAgICAgICAgdGhpcy4kbGluZXMuc2hpZnQoKTtcblxuICAgICAgICBpZiAob2xkTGFzdFJvdyA+IGxhc3RSb3cpXG4gICAgICAgICAgICBmb3IgKHZhciByb3c9dGhpcy5zZXNzaW9uLmdldEZvbGRlZFJvd0NvdW50KGxhc3RSb3cgKyAxLCBvbGRMYXN0Um93KTsgcm93PjA7IHJvdy0tKVxuICAgICAgICAgICAgICAgIHRoaXMuJGxpbmVzLnBvcCgpO1xuXG4gICAgICAgIGlmIChjb25maWcuZmlyc3RSb3cgPCBvbGRDb25maWcuZmlyc3RSb3cpIHtcbiAgICAgICAgICAgIHRoaXMuJGxpbmVzLnVuc2hpZnQodGhpcy4kcmVuZGVyTGluZXMoY29uZmlnLCBjb25maWcuZmlyc3RSb3csIG9sZENvbmZpZy5maXJzdFJvdyAtIDEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsYXN0Um93ID4gb2xkTGFzdFJvdykge1xuICAgICAgICAgICAgdGhpcy4kbGluZXMucHVzaCh0aGlzLiRyZW5kZXJMaW5lcyhjb25maWcsIG9sZExhc3RSb3cgKyAxLCBsYXN0Um93KSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlTGluZUhpZ2hsaWdodCgpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiYWZ0ZXJSZW5kZXJcIik7XG4gICAgICAgIHRoaXMuJHVwZGF0ZUd1dHRlcldpZHRoKGNvbmZpZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllckNvbmZpZ30gY29uZmlnXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZpcnN0Um93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxhc3RSb3dcbiAgICAgKi9cbiAgICAkcmVuZGVyTGluZXMoY29uZmlnLCBmaXJzdFJvdywgbGFzdFJvdykge1xuICAgICAgICB2YXIgZnJhZ21lbnQgPSBbXTtcbiAgICAgICAgdmFyIHJvdyA9IGZpcnN0Um93O1xuICAgICAgICB2YXIgZm9sZExpbmUgPSB0aGlzLnNlc3Npb24uZ2V0TmV4dEZvbGRMaW5lKHJvdyk7XG4gICAgICAgIHZhciBmb2xkU3RhcnQgPSBmb2xkTGluZSA/IGZvbGRMaW5lLnN0YXJ0LnJvdyA6IEluZmluaXR5O1xuXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAocm93ID4gZm9sZFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcm93ID0gZm9sZExpbmUuZW5kLnJvdysxO1xuICAgICAgICAgICAgICAgIGZvbGRMaW5lID0gdGhpcy5zZXNzaW9uLmdldE5leHRGb2xkTGluZShyb3csIGZvbGRMaW5lKTtcbiAgICAgICAgICAgICAgICBmb2xkU3RhcnQgPSBmb2xkTGluZSA/IGZvbGRMaW5lLnN0YXJ0LnJvdyA6IEluZmluaXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdyA+IGxhc3RSb3cpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIHZhciBjZWxsID0gdGhpcy4kbGluZXMuY3JlYXRlQ2VsbChyb3csIGNvbmZpZywgdGhpcy5zZXNzaW9uLCBvbkNyZWF0ZUNlbGwpO1xuICAgICAgICAgICAgdGhpcy4kcmVuZGVyQ2VsbChjZWxsLCBjb25maWcsIGZvbGRMaW5lLCByb3cpO1xuICAgICAgICAgICAgZnJhZ21lbnQucHVzaChjZWxsKTtcblxuICAgICAgICAgICAgcm93Kys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYWdtZW50O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthbnl9IGNlbGxcbiAgICAgKiBAcGFyYW0ge0xheWVyQ29uZmlnfSBjb25maWdcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuSVJhbmdlIHwgdW5kZWZpbmVkfSBmb2xkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqL1xuICAgICRyZW5kZXJDZWxsKGNlbGwsIGNvbmZpZywgZm9sZCwgcm93KSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gY2VsbC5lbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIFxuICAgICAgICB2YXIgdGV4dE5vZGUgPSBlbGVtZW50LmNoaWxkTm9kZXNbMF07XG4gICAgICAgIHZhciBmb2xkV2lkZ2V0ID0gZWxlbWVudC5jaGlsZE5vZGVzWzFdO1xuICAgICAgICB2YXIgYW5ub3RhdGlvbk5vZGUgPSBlbGVtZW50LmNoaWxkTm9kZXNbMl07XG4gICAgICAgIHZhciBhbm5vdGF0aW9uSWNvbk5vZGUgPSBhbm5vdGF0aW9uTm9kZS5maXJzdENoaWxkO1xuXG4gICAgICAgIHZhciBmaXJzdExpbmVOdW1iZXIgPSBzZXNzaW9uLiRmaXJzdExpbmVOdW1iZXI7XG4gICAgICAgIFxuICAgICAgICB2YXIgYnJlYWtwb2ludHMgPSBzZXNzaW9uLiRicmVha3BvaW50cztcbiAgICAgICAgdmFyIGRlY29yYXRpb25zID0gc2Vzc2lvbi4kZGVjb3JhdGlvbnM7XG4gICAgICAgIHZhciBndXR0ZXJSZW5kZXJlciA9IHNlc3Npb24uZ3V0dGVyUmVuZGVyZXIgfHwgdGhpcy4kcmVuZGVyZXI7XG4gICAgICAgIHZhciBmb2xkV2lkZ2V0cyA9IHRoaXMuJHNob3dGb2xkV2lkZ2V0cyAmJiBzZXNzaW9uLmZvbGRXaWRnZXRzO1xuICAgICAgICB2YXIgZm9sZFN0YXJ0ID0gZm9sZCA/IGZvbGQuc3RhcnQucm93IDogTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgXG4gICAgICAgIHZhciBsaW5lSGVpZ2h0ID0gY29uZmlnLmxpbmVIZWlnaHQgKyBcInB4XCI7XG5cbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuJHVzZVN2Z0d1dHRlckljb25zID8gXCJhY2VfZ3V0dGVyLWNlbGxfc3ZnLWljb25zIFwiIDogXCJhY2VfZ3V0dGVyLWNlbGwgXCI7XG4gICAgICAgIHZhciBpY29uQ2xhc3NOYW1lID0gdGhpcy4kdXNlU3ZnR3V0dGVySWNvbnMgPyBcImFjZV9pY29uX3N2Z1wiIDogXCJhY2VfaWNvblwiO1xuICAgICAgICBcbiAgICAgICAgdmFyIHJvd1RleHQgPSAoZ3V0dGVyUmVuZGVyZXJcbiAgICAgICAgICAgID8gZ3V0dGVyUmVuZGVyZXIuZ2V0VGV4dChzZXNzaW9uLCByb3cpXG4gICAgICAgICAgICA6IHJvdyArIGZpcnN0TGluZU51bWJlcikudG9TdHJpbmcoKTtcblxuICAgICAgICBpZiAodGhpcy4kaGlnaGxpZ2h0R3V0dGVyTGluZSkge1xuICAgICAgICAgICAgaWYgKHJvdyA9PSB0aGlzLiRjdXJzb3JSb3cgfHwgKGZvbGQgJiYgcm93IDwgdGhpcy4kY3Vyc29yUm93ICYmIHJvdyA+PSBmb2xkU3RhcnQgJiYgIHRoaXMuJGN1cnNvclJvdyA8PSBmb2xkLmVuZC5yb3cpKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lICs9IFwiYWNlX2d1dHRlci1hY3RpdmUtbGluZSBcIjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kY3Vyc29yQ2VsbCAhPSBjZWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiRjdXJzb3JDZWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY3Vyc29yQ2VsbC5lbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuJGN1cnNvckNlbGwuZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShcImFjZV9ndXR0ZXItYWN0aXZlLWxpbmUgXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjdXJzb3JDZWxsID0gY2VsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChicmVha3BvaW50c1tyb3ddKVxuICAgICAgICAgICAgY2xhc3NOYW1lICs9IGJyZWFrcG9pbnRzW3Jvd107XG4gICAgICAgIGlmIChkZWNvcmF0aW9uc1tyb3ddKVxuICAgICAgICAgICAgY2xhc3NOYW1lICs9IGRlY29yYXRpb25zW3Jvd107XG4gICAgICAgIGlmICh0aGlzLiRhbm5vdGF0aW9uc1tyb3ddICYmIHJvdyAhPT0gZm9sZFN0YXJ0KVxuICAgICAgICAgICAgY2xhc3NOYW1lICs9IHRoaXMuJGFubm90YXRpb25zW3Jvd10uY2xhc3NOYW1lO1xuXG4gICAgICAgIGlmIChmb2xkV2lkZ2V0cykge1xuICAgICAgICAgICAgdmFyIGMgPSBmb2xkV2lkZ2V0c1tyb3ddO1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgY2FjaGVkIHZhbHVlIGlzIGludmFsaWRhdGVkIGFuZCB3ZSBuZWVkIHRvIHJlY29tcHV0ZVxuICAgICAgICAgICAgaWYgKGMgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjID0gZm9sZFdpZGdldHNbcm93XSA9IHNlc3Npb24uZ2V0Rm9sZFdpZGdldChyb3cpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGMpIHtcbiAgICAgICAgICAgIHZhciBmb2xkQ2xhc3MgPSBcImFjZV9mb2xkLXdpZGdldCBhY2VfXCIgKyBjO1xuICAgICAgICAgICAgdmFyIGlzQ2xvc2VkRm9sZCA9IGMgPT0gXCJzdGFydFwiICYmIHJvdyA9PSBmb2xkU3RhcnQgJiYgcm93IDwgZm9sZC5lbmQucm93O1xuICAgICAgICAgICAgaWYgKGlzQ2xvc2VkRm9sZCkge1xuICAgICAgICAgICAgICAgIGZvbGRDbGFzcyArPSBcIiBhY2VfY2xvc2VkXCI7XG4gICAgICAgICAgICAgICAgdmFyIGZvbGRBbm5vdGF0aW9uQ2xhc3MgPSBcIlwiO1xuICAgICAgICAgICAgICAgIHZhciBhbm5vdGF0aW9uSW5Gb2xkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gcm93ICsgMTsgaSA8PSBmb2xkLmVuZC5yb3c7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJGFubm90YXRpb25zW2ldKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy4kYW5ub3RhdGlvbnNbaV0uY2xhc3NOYW1lID09PSBcIiBhY2VfZXJyb3JcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbkluRm9sZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkQW5ub3RhdGlvbkNsYXNzID0gXCIgYWNlX2Vycm9yX2ZvbGRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJGFubm90YXRpb25zW2ldLmNsYXNzTmFtZSA9PT0gXCIgYWNlX3NlY3VyaXR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFubm90YXRpb25JbkZvbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZEFubm90YXRpb25DbGFzcyA9IFwiIGFjZV9zZWN1cml0eV9mb2xkXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRhbm5vdGF0aW9uc1tpXS5jbGFzc05hbWUgPT09IFwiIGFjZV93YXJuaW5nXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRBbm5vdGF0aW9uQ2xhc3MgIT09IFwiIGFjZV9zZWN1cml0eV9mb2xkXCJcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uSW5Gb2xkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRBbm5vdGF0aW9uQ2xhc3MgPSBcIiBhY2Vfd2FybmluZ19mb2xkXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgKz0gZm9sZEFubm90YXRpb25DbGFzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBmb2xkQ2xhc3MgKz0gXCIgYWNlX29wZW5cIjtcbiAgICAgICAgICAgIGlmIChmb2xkV2lkZ2V0LmNsYXNzTmFtZSAhPSBmb2xkQ2xhc3MpXG4gICAgICAgICAgICAgICAgZm9sZFdpZGdldC5jbGFzc05hbWUgPSBmb2xkQ2xhc3M7XG5cbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZShmb2xkV2lkZ2V0LnN0eWxlLCBcImhlaWdodFwiLCBsaW5lSGVpZ2h0KTtcbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZShmb2xkV2lkZ2V0LnN0eWxlLCBcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XG5cbiAgICAgICAgICAgIC8vIFNldCBhMTF5IHByb3BlcnRpZXMuXG4gICAgICAgICAgICBmb2xkV2lkZ2V0LnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJidXR0b25cIik7XG4gICAgICAgICAgICBmb2xkV2lkZ2V0LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgICAgICAgICB2YXIgZm9sZFJhbmdlID0gc2Vzc2lvbi5nZXRGb2xkV2lkZ2V0UmFuZ2Uocm93KTtcblxuICAgICAgICAgICAgLy8gZ2V0Rm9sZFdpZGdldFJhbmdlIGlzIG9wdGlvbmFsIHRvIGJlIGltcGxlbWVudGVkIGJ5IGZvbGQgbW9kZXMsIGlmIG5vdCBhdmFpbGFibGUgd2UgZmFsbC1iYWNrLlxuICAgICAgICAgICAgaWYgKGZvbGRSYW5nZSlcbiAgICAgICAgICAgICAgICBmb2xkV2lkZ2V0LnNldEF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgIG5scyhcImd1dHRlci5jb2RlLWZvbGRpbmcucmFuZ2UuYXJpYS1sYWJlbFwiLCBcIlRvZ2dsZSBjb2RlIGZvbGRpbmcsIHJvd3MgJDAgdGhyb3VnaCAkMVwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkUmFuZ2Uuc3RhcnQucm93ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRSYW5nZS5lbmQucm93ICsgMVxuICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9sZClcbiAgICAgICAgICAgICAgICAgICAgZm9sZFdpZGdldC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFyaWEtbGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5scyhcImd1dHRlci5jb2RlLWZvbGRpbmcuY2xvc2VkLmFyaWEtbGFiZWxcIiwgXCJUb2dnbGUgY29kZSBmb2xkaW5nLCByb3dzICQwIHRocm91Z2ggJDFcIiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbGQuc3RhcnQucm93ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xkLmVuZC5yb3cgKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZm9sZFdpZGdldC5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFyaWEtbGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5scyhcImd1dHRlci5jb2RlLWZvbGRpbmcub3Blbi5hcmlhLWxhYmVsXCIsIFwiVG9nZ2xlIGNvZGUgZm9sZGluZywgcm93ICQwXCIsIFtyb3cgKyAxXSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzQ2xvc2VkRm9sZCkge1xuICAgICAgICAgICAgICAgIGZvbGRXaWRnZXQuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgIGZvbGRXaWRnZXQuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbmxzKFwiZ3V0dGVyLmNvZGUtZm9sZGluZy5jbG9zZWQudGl0bGVcIiwgXCJVbmZvbGQgY29kZVwiKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvbGRXaWRnZXQuc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgZm9sZFdpZGdldC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBubHMoXCJndXR0ZXIuY29kZS1mb2xkaW5nLm9wZW4udGl0bGVcIiwgXCJGb2xkIGNvZGVcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGZvbGRXaWRnZXQpIHtcbiAgICAgICAgICAgICAgICBkb20uc2V0U3R5bGUoZm9sZFdpZGdldC5zdHlsZSwgXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgICAgICBmb2xkV2lkZ2V0LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgICAgICAgICAgICAgICBmb2xkV2lkZ2V0LnJlbW92ZUF0dHJpYnV0ZShcInJvbGVcIik7XG4gICAgICAgICAgICAgICAgZm9sZFdpZGdldC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFubm90YXRpb25JbkZvbGQgJiYgdGhpcy4kc2hvd0ZvbGRlZEFubm90YXRpb25zKXtcbiAgICAgICAgICAgIGFubm90YXRpb25Ob2RlLmNsYXNzTmFtZSA9IFwiYWNlX2d1dHRlcl9hbm5vdGF0aW9uXCI7XG4gICAgICAgICAgICBhbm5vdGF0aW9uSWNvbk5vZGUuY2xhc3NOYW1lID0gaWNvbkNsYXNzTmFtZTtcbiAgICAgICAgICAgIGFubm90YXRpb25JY29uTm9kZS5jbGFzc05hbWUgKz0gZm9sZEFubm90YXRpb25DbGFzcztcblxuICAgICAgICAgICAgZG9tLnNldFN0eWxlKGFubm90YXRpb25JY29uTm9kZS5zdHlsZSwgXCJoZWlnaHRcIiwgbGluZUhlaWdodCk7XG4gICAgICAgICAgICBkb20uc2V0U3R5bGUoYW5ub3RhdGlvbk5vZGUuc3R5bGUsIFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgICAgZG9tLnNldFN0eWxlKGFubm90YXRpb25Ob2RlLnN0eWxlLCBcImhlaWdodFwiLCBsaW5lSGVpZ2h0KTtcbiAgICAgICAgICAgIHZhciBhcmlhTGFiZWw7XG4gICAgICAgICAgICBzd2l0Y2goZm9sZEFubm90YXRpb25DbGFzcykge1xuICAgICAgICAgICAgICAgIGNhc2UgXCIgYWNlX2Vycm9yX2ZvbGRcIjpcbiAgICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsID0gbmxzKFwiZ3V0dGVyLmFubm90YXRpb24uYXJpYS1sYWJlbC5lcnJvclwiLCBcIkVycm9yLCByZWFkIGFubm90YXRpb25zIHJvdyAkMFwiLCBbcm93VGV4dF0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgXCIgYWNlX3NlY3VyaXR5X2ZvbGRcIjpcbiAgICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsID0gbmxzKFwiZ3V0dGVyLmFubm90YXRpb24uYXJpYS1sYWJlbC5zZWN1cml0eVwiLCBcIlNlY3VyaXR5IGZpbmRpbmcsIHJlYWQgYW5ub3RhdGlvbnMgcm93ICQwXCIsIFtyb3dUZXh0XSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBcIiBhY2Vfd2FybmluZ19mb2xkXCI6XG4gICAgICAgICAgICAgICAgICAgIGFyaWFMYWJlbCA9IG5scyhcImd1dHRlci5hbm5vdGF0aW9uLmFyaWEtbGFiZWwud2FybmluZ1wiLCBcIldhcm5pbmcsIHJlYWQgYW5ub3RhdGlvbnMgcm93ICQwXCIsIFtyb3dUZXh0XSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5ub3RhdGlvbk5vZGUuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBhcmlhTGFiZWwpO1xuICAgICAgICAgICAgYW5ub3RhdGlvbk5vZGUuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgICAgICAgICAgIGFubm90YXRpb25Ob2RlLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJidXR0b25cIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy4kYW5ub3RhdGlvbnNbcm93XSl7XG4gICAgICAgICAgICBhbm5vdGF0aW9uTm9kZS5jbGFzc05hbWUgPSBcImFjZV9ndXR0ZXJfYW5ub3RhdGlvblwiO1xuICAgICAgICAgICAgYW5ub3RhdGlvbkljb25Ob2RlLmNsYXNzTmFtZSA9IGljb25DbGFzc05hbWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLiR1c2VTdmdHdXR0ZXJJY29ucylcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uSWNvbk5vZGUuY2xhc3NOYW1lICs9IHRoaXMuJGFubm90YXRpb25zW3Jvd10uY2xhc3NOYW1lO1xuICAgICAgICAgICAgZWxzZSBcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy4kYW5ub3RhdGlvbnNbcm93XS5jbGFzc05hbWUucmVwbGFjZShcIiBcIiwgXCJcIikpO1xuXG4gICAgICAgICAgICBkb20uc2V0U3R5bGUoYW5ub3RhdGlvbkljb25Ob2RlLnN0eWxlLCBcImhlaWdodFwiLCBsaW5lSGVpZ2h0KTtcbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZShhbm5vdGF0aW9uTm9kZS5zdHlsZSwgXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgICAgICBkb20uc2V0U3R5bGUoYW5ub3RhdGlvbk5vZGUuc3R5bGUsIFwiaGVpZ2h0XCIsIGxpbmVIZWlnaHQpO1xuICAgICAgICAgICAgdmFyIGFyaWFMYWJlbDtcbiAgICAgICAgICAgIHN3aXRjaCh0aGlzLiRhbm5vdGF0aW9uc1tyb3ddLmNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCIgYWNlX2Vycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgIGFyaWFMYWJlbCA9IG5scyhcImd1dHRlci5hbm5vdGF0aW9uLmFyaWEtbGFiZWwuZXJyb3JcIiwgXCJFcnJvciwgcmVhZCBhbm5vdGF0aW9ucyByb3cgJDBcIiwgW3Jvd1RleHRdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFwiIGFjZV9zZWN1cml0eVwiOlxuICAgICAgICAgICAgICAgICAgICBhcmlhTGFiZWwgPSBubHMoXCJndXR0ZXIuYW5ub3RhdGlvbi5hcmlhLWxhYmVsLnNlY3VyaXR5XCIsIFwiU2VjdXJpdHkgZmluZGluZywgcmVhZCBhbm5vdGF0aW9ucyByb3cgJDBcIiwgW3Jvd1RleHRdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFwiIGFjZV93YXJuaW5nXCI6XG4gICAgICAgICAgICAgICAgICAgIGFyaWFMYWJlbCA9IG5scyhcImd1dHRlci5hbm5vdGF0aW9uLmFyaWEtbGFiZWwud2FybmluZ1wiLCBcIldhcm5pbmcsIHJlYWQgYW5ub3RhdGlvbnMgcm93ICQwXCIsIFtyb3dUZXh0XSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBcIiBhY2VfaW5mb1wiOlxuICAgICAgICAgICAgICAgICAgICBhcmlhTGFiZWwgPSBubHMoXCJndXR0ZXIuYW5ub3RhdGlvbi5hcmlhLWxhYmVsLmluZm9cIiwgXCJJbmZvLCByZWFkIGFubm90YXRpb25zIHJvdyAkMFwiLCBbcm93VGV4dF0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgXCIgYWNlX2hpbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsID0gbmxzKFwiZ3V0dGVyLmFubm90YXRpb24uYXJpYS1sYWJlbC5oaW50XCIsIFwiU3VnZ2VzdGlvbiwgcmVhZCBhbm5vdGF0aW9ucyByb3cgJDBcIiwgW3Jvd1RleHRdKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbm5vdGF0aW9uTm9kZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIGFyaWFMYWJlbCk7XG4gICAgICAgICAgICBhbm5vdGF0aW9uTm9kZS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIi0xXCIpO1xuICAgICAgICAgICAgYW5ub3RhdGlvbk5vZGUuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZShhbm5vdGF0aW9uTm9kZS5zdHlsZSwgXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgIGFubm90YXRpb25Ob2RlLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIik7XG4gICAgICAgICAgICBhbm5vdGF0aW9uTm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJyb2xlXCIpO1xuICAgICAgICAgICAgYW5ub3RhdGlvbk5vZGUuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3dUZXh0ICE9PSB0ZXh0Tm9kZS5kYXRhKSB7XG4gICAgICAgICAgICB0ZXh0Tm9kZS5kYXRhID0gcm93VGV4dDtcbiAgICAgICAgfSBcblxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc05hbWUgIT0gY2xhc3NOYW1lKVxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICAgIGRvbS5zZXRTdHlsZShjZWxsLmVsZW1lbnQuc3R5bGUsIFwiaGVpZ2h0XCIsIHRoaXMuJGxpbmVzLmNvbXB1dGVMaW5lSGVpZ2h0KHJvdywgY29uZmlnLCBzZXNzaW9uKSArIFwicHhcIik7XG4gICAgICAgIGRvbS5zZXRTdHlsZShjZWxsLmVsZW1lbnQuc3R5bGUsIFwidG9wXCIsIHRoaXMuJGxpbmVzLmNvbXB1dGVMaW5lVG9wKHJvdywgY29uZmlnLCBzZXNzaW9uKSArIFwicHhcIik7XG4gICAgICAgIFxuICAgICAgICBjZWxsLnRleHQgPSByb3dUZXh0O1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBhbm5vdGF0aW9ucyBvciBmb2xkIHdpZGdldHMgaW4gdGhlIGd1dHRlciBjZWxsLCBoaWRlIGl0IGZyb20gYXNzaXN0aXZlIHRlY2guXG4gICAgICAgIGlmIChhbm5vdGF0aW9uTm9kZS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiAmJiBmb2xkV2lkZ2V0LnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKVxuICAgICAgICAgICAgY2VsbC5lbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIHRydWUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjZWxsLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgZmFsc2UpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNlbGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBoaWdobGlnaHRHdXR0ZXJMaW5lXG4gICAgICovXG4gICAgc2V0SGlnaGxpZ2h0R3V0dGVyTGluZShoaWdobGlnaHRHdXR0ZXJMaW5lKSB7XG4gICAgICAgIHRoaXMuJGhpZ2hsaWdodEd1dHRlckxpbmUgPSBoaWdobGlnaHRHdXR0ZXJMaW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvd1xuICAgICAqL1xuICAgIHNldFNob3dMaW5lTnVtYmVycyhzaG93KSB7XG4gICAgICAgIHRoaXMuJHJlbmRlcmVyID0gIXNob3cgJiYge1xuICAgICAgICAgICAgZ2V0V2lkdGg6IGZ1bmN0aW9uKCkge3JldHVybiAwO30sXG4gICAgICAgICAgICBnZXRUZXh0OiBmdW5jdGlvbigpIHtyZXR1cm4gXCJcIjt9XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGdldFNob3dMaW5lTnVtYmVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHNob3dMaW5lTnVtYmVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzaG93XVxuICAgICAqL1xuICAgIHNldFNob3dGb2xkV2lkZ2V0cyhzaG93KSB7XG4gICAgICAgIGlmIChzaG93KVxuICAgICAgICAgICAgZG9tLmFkZENzc0NsYXNzKHRoaXMuZWxlbWVudCwgXCJhY2VfZm9sZGluZy1lbmFibGVkXCIpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBkb20ucmVtb3ZlQ3NzQ2xhc3ModGhpcy5lbGVtZW50LCBcImFjZV9mb2xkaW5nLWVuYWJsZWRcIik7XG5cbiAgICAgICAgdGhpcy4kc2hvd0ZvbGRXaWRnZXRzID0gc2hvdztcbiAgICAgICAgdGhpcy4kcGFkZGluZyA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIGdldFNob3dGb2xkV2lkZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHNob3dGb2xkV2lkZ2V0cztcbiAgICB9XG5cbiAgICAkY29tcHV0ZVBhZGRpbmcoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICByZXR1cm4ge2xlZnQ6IDAsIHJpZ2h0OiAwfTtcbiAgICAgICAgdmFyIHN0eWxlID0gZG9tLmNvbXB1dGVkU3R5bGUoLyoqQHR5cGV7RWxlbWVudH0qLyh0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCkpO1xuICAgICAgICB0aGlzLiRwYWRkaW5nID0ge307XG4gICAgICAgIHRoaXMuJHBhZGRpbmcubGVmdCA9IChwYXJzZUludChzdHlsZS5ib3JkZXJMZWZ0V2lkdGgpIHx8IDApXG4gICAgICAgICAgICArIChwYXJzZUludChzdHlsZS5wYWRkaW5nTGVmdCkgfHwgMCkgKyAxO1xuICAgICAgICB0aGlzLiRwYWRkaW5nLnJpZ2h0ID0gKHBhcnNlSW50KHN0eWxlLmJvcmRlclJpZ2h0V2lkdGgpIHx8IDApXG4gICAgICAgICAgICArIChwYXJzZUludChzdHlsZS5wYWRkaW5nUmlnaHQpIHx8IDApO1xuICAgICAgICByZXR1cm4gdGhpcy4kcGFkZGluZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3sgeDogbnVtYmVyOyB9fSBwb2ludFxuICAgICAqL1xuICAgIGdldFJlZ2lvbihwb2ludCkge1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMuJHBhZGRpbmcgfHwgdGhpcy4kY29tcHV0ZVBhZGRpbmcoKTtcbiAgICAgICAgdmFyIHJlY3QgPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChwb2ludC54IDwgcGFkZGluZy5sZWZ0ICsgcmVjdC5sZWZ0KVxuICAgICAgICAgICAgcmV0dXJuIFwibWFya2Vyc1wiO1xuICAgICAgICBpZiAodGhpcy4kc2hvd0ZvbGRXaWRnZXRzICYmIHBvaW50LnggPiByZWN0LnJpZ2h0IC0gcGFkZGluZy5yaWdodClcbiAgICAgICAgICAgIHJldHVybiBcImZvbGRXaWRnZXRzXCI7XG4gICAgfVxuXG59XG5cbkd1dHRlci5wcm90b3R5cGUuJGZpeGVkV2lkdGggPSBmYWxzZTtcbkd1dHRlci5wcm90b3R5cGUuJGhpZ2hsaWdodEd1dHRlckxpbmUgPSB0cnVlO1xuR3V0dGVyLnByb3RvdHlwZS4kcmVuZGVyZXIgPSBcIlwiO1xuR3V0dGVyLnByb3RvdHlwZS4kc2hvd0xpbmVOdW1iZXJzID0gdHJ1ZTtcbkd1dHRlci5wcm90b3R5cGUuJHNob3dGb2xkV2lkZ2V0cyA9IHRydWU7XG5cbm9vcC5pbXBsZW1lbnQoR3V0dGVyLnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyKTtcblxuZnVuY3Rpb24gb25DcmVhdGVDZWxsKGVsZW1lbnQpIHtcbiAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSk7XG4gICAgXG4gICAgdmFyIGZvbGRXaWRnZXQgPSBkb20uY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChmb2xkV2lkZ2V0KTtcblxuICAgIHZhciBhbm5vdGF0aW9uTm9kZSA9IGRvbS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKGFubm90YXRpb25Ob2RlKTtcblxuICAgIHZhciBhbm5vdGF0aW9uSWNvbk5vZGUgPSBkb20uY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgYW5ub3RhdGlvbk5vZGUuYXBwZW5kQ2hpbGQoYW5ub3RhdGlvbkljb25Ob2RlKTtcbiAgICBcbiAgICByZXR1cm4gZWxlbWVudDtcbn1cblxuZXhwb3J0cy5HdXR0ZXIgPSBHdXR0ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/layer/gutter.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/layer/lines.js":
/*!**************************************************!*\
  !*** ./node_modules/ace-code/src/layer/lines.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../edit_session\").EditSession} EditSession\n * @typedef {import(\"../../ace-internal\").Ace.LayerConfig} LayerConfig\n */\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\n\nclass Lines {\n    /**\n     * @param {HTMLElement} element\n     * @param {number} [canvasHeight]\n     */\n    constructor(element, canvasHeight) {\n        this.element = element;\n        this.canvasHeight = canvasHeight || 500000;\n        this.element.style.height = (this.canvasHeight * 2) + \"px\";\n\n        this.cells = [];\n        this.cellCache = [];\n        this.$offsetCoefficient = 0;\n    }\n\n    /**\n     * @param {LayerConfig} config\n     */\n    moveContainer(config) {\n        dom.translate(this.element, 0, -((config.firstRowScreen * config.lineHeight) % this.canvasHeight) - config.offset * this.$offsetCoefficient);\n    }\n\n    /**\n     * @param {LayerConfig} oldConfig\n     * @param {LayerConfig} newConfig\n     */\n    pageChanged(oldConfig, newConfig) {\n        return (\n            Math.floor((oldConfig.firstRowScreen * oldConfig.lineHeight) / this.canvasHeight) !==\n            Math.floor((newConfig.firstRowScreen * newConfig.lineHeight) / this.canvasHeight)\n        );\n    }\n\n    /**\n     * @param {number} row\n     * @param {Partial<LayerConfig>} config\n     * @param {EditSession} session\n     */\n    computeLineTop(row, config, session) {\n        var screenTop = config.firstRowScreen * config.lineHeight;\n        var screenPage = Math.floor(screenTop / this.canvasHeight);\n        var lineTop = session.documentToScreenRow(row, 0) * config.lineHeight;\n        return lineTop - (screenPage * this.canvasHeight);\n    }\n\n    /**\n     * @param {number} row\n     * @param {LayerConfig} config\n     * @param {EditSession} session\n     */\n    computeLineHeight(row, config, session) {\n        return config.lineHeight * session.getRowLineCount(row);\n    }\n    \n    getLength() {\n        return this.cells.length;\n    }\n\n    /**\n     * @param {number} index\n     */\n    get(index) {\n        return this.cells[index];\n    }\n    \n    shift() {\n        this.$cacheCell(this.cells.shift());\n    }\n    \n    pop() {\n        this.$cacheCell(this.cells.pop());\n    }\n    \n    push(cell) {\n        if (Array.isArray(cell)) {\n            this.cells.push.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i=0; i<cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            this.element.appendChild(fragment);\n        } else {\n            this.cells.push(cell);\n            this.element.appendChild(cell.element);\n        }\n    }\n    \n    unshift(cell) {\n        if (Array.isArray(cell)) {\n            this.cells.unshift.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i=0; i<cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            if (this.element.firstChild)\n                this.element.insertBefore(fragment, this.element.firstChild);\n            else\n                this.element.appendChild(fragment);\n        } else {\n            this.cells.unshift(cell);\n            this.element.insertAdjacentElement(\"afterbegin\", cell.element);\n        }\n    }\n    \n    last() {\n        if (this.cells.length)\n            return this.cells[this.cells.length-1];\n        else\n            return null;\n    }\n    \n    $cacheCell(cell) {\n        if (!cell)\n            return;\n            \n        cell.element.remove();\n        this.cellCache.push(cell);\n    }\n    \n    createCell(row, config, session, initElement) {\n        var cell = this.cellCache.pop();\n        if (!cell) {\n            var element = dom.createElement(\"div\");\n            if (initElement)\n                initElement(element);\n            \n            this.element.appendChild(element);\n            \n            cell = {\n                element: element,\n                text: \"\",\n                row: row\n            };\n        }\n        cell.row = row;\n        \n        return cell;\n    }\n    \n}\n\nexports.Lines = Lines;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL2xpbmVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxhQUFhLHVDQUF1QztBQUNwRCxhQUFhLDhDQUE4QztBQUMzRDtBQUNBLFVBQVUsbUJBQU8sQ0FBQywwREFBWTs7QUFFOUI7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QixlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxzQkFBc0I7QUFDckMsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsYUFBYTtBQUM1QixlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGVBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixlQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9sYXllci9saW5lcy5qcz82MjM0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuTGF5ZXJDb25maWd9IExheWVyQ29uZmlnXG4gKi9cbnZhciBkb20gPSByZXF1aXJlKFwiLi4vbGliL2RvbVwiKTtcblxuY2xhc3MgTGluZXMge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2NhbnZhc0hlaWdodF1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBjYW52YXNIZWlnaHQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5jYW52YXNIZWlnaHQgPSBjYW52YXNIZWlnaHQgfHwgNTAwMDAwO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuY2FudmFzSGVpZ2h0ICogMikgKyBcInB4XCI7XG5cbiAgICAgICAgdGhpcy5jZWxscyA9IFtdO1xuICAgICAgICB0aGlzLmNlbGxDYWNoZSA9IFtdO1xuICAgICAgICB0aGlzLiRvZmZzZXRDb2VmZmljaWVudCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllckNvbmZpZ30gY29uZmlnXG4gICAgICovXG4gICAgbW92ZUNvbnRhaW5lcihjb25maWcpIHtcbiAgICAgICAgZG9tLnRyYW5zbGF0ZSh0aGlzLmVsZW1lbnQsIDAsIC0oKGNvbmZpZy5maXJzdFJvd1NjcmVlbiAqIGNvbmZpZy5saW5lSGVpZ2h0KSAlIHRoaXMuY2FudmFzSGVpZ2h0KSAtIGNvbmZpZy5vZmZzZXQgKiB0aGlzLiRvZmZzZXRDb2VmZmljaWVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllckNvbmZpZ30gb2xkQ29uZmlnXG4gICAgICogQHBhcmFtIHtMYXllckNvbmZpZ30gbmV3Q29uZmlnXG4gICAgICovXG4gICAgcGFnZUNoYW5nZWQob2xkQ29uZmlnLCBuZXdDb25maWcpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIE1hdGguZmxvb3IoKG9sZENvbmZpZy5maXJzdFJvd1NjcmVlbiAqIG9sZENvbmZpZy5saW5lSGVpZ2h0KSAvIHRoaXMuY2FudmFzSGVpZ2h0KSAhPT1cbiAgICAgICAgICAgIE1hdGguZmxvb3IoKG5ld0NvbmZpZy5maXJzdFJvd1NjcmVlbiAqIG5ld0NvbmZpZy5saW5lSGVpZ2h0KSAvIHRoaXMuY2FudmFzSGVpZ2h0KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcGFyYW0ge1BhcnRpYWw8TGF5ZXJDb25maWc+fSBjb25maWdcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uXG4gICAgICovXG4gICAgY29tcHV0ZUxpbmVUb3Aocm93LCBjb25maWcsIHNlc3Npb24pIHtcbiAgICAgICAgdmFyIHNjcmVlblRvcCA9IGNvbmZpZy5maXJzdFJvd1NjcmVlbiAqIGNvbmZpZy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgc2NyZWVuUGFnZSA9IE1hdGguZmxvb3Ioc2NyZWVuVG9wIC8gdGhpcy5jYW52YXNIZWlnaHQpO1xuICAgICAgICB2YXIgbGluZVRvcCA9IHNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblJvdyhyb3csIDApICogY29uZmlnLmxpbmVIZWlnaHQ7XG4gICAgICAgIHJldHVybiBsaW5lVG9wIC0gKHNjcmVlblBhZ2UgKiB0aGlzLmNhbnZhc0hlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7TGF5ZXJDb25maWd9IGNvbmZpZ1xuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IHNlc3Npb25cbiAgICAgKi9cbiAgICBjb21wdXRlTGluZUhlaWdodChyb3csIGNvbmZpZywgc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4gY29uZmlnLmxpbmVIZWlnaHQgKiBzZXNzaW9uLmdldFJvd0xpbmVDb3VudChyb3cpO1xuICAgIH1cbiAgICBcbiAgICBnZXRMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlbGxzLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICAgKi9cbiAgICBnZXQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2VsbHNbaW5kZXhdO1xuICAgIH1cbiAgICBcbiAgICBzaGlmdCgpIHtcbiAgICAgICAgdGhpcy4kY2FjaGVDZWxsKHRoaXMuY2VsbHMuc2hpZnQoKSk7XG4gICAgfVxuICAgIFxuICAgIHBvcCgpIHtcbiAgICAgICAgdGhpcy4kY2FjaGVDZWxsKHRoaXMuY2VsbHMucG9wKCkpO1xuICAgIH1cbiAgICBcbiAgICBwdXNoKGNlbGwpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2VsbCkpIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbHMucHVzaC5hcHBseSh0aGlzLmNlbGxzLCBjZWxsKTtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGRvbS5jcmVhdGVGcmFnbWVudCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGNlbGwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjZWxsW2ldLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbHMucHVzaChjZWxsKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjZWxsLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHVuc2hpZnQoY2VsbCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsKSkge1xuICAgICAgICAgICAgdGhpcy5jZWxscy51bnNoaWZ0LmFwcGx5KHRoaXMuY2VsbHMsIGNlbGwpO1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gZG9tLmNyZWF0ZUZyYWdtZW50KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8Y2VsbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGNlbGxbaV0uZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZShmcmFnbWVudCwgdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxzLnVuc2hpZnQoY2VsbCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBjZWxsLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGxhc3QoKSB7XG4gICAgICAgIGlmICh0aGlzLmNlbGxzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNlbGxzW3RoaXMuY2VsbHMubGVuZ3RoLTFdO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgJGNhY2hlQ2VsbChjZWxsKSB7XG4gICAgICAgIGlmICghY2VsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICBjZWxsLmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuY2VsbENhY2hlLnB1c2goY2VsbCk7XG4gICAgfVxuICAgIFxuICAgIGNyZWF0ZUNlbGwocm93LCBjb25maWcsIHNlc3Npb24sIGluaXRFbGVtZW50KSB7XG4gICAgICAgIHZhciBjZWxsID0gdGhpcy5jZWxsQ2FjaGUucG9wKCk7XG4gICAgICAgIGlmICghY2VsbCkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb20uY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGlmIChpbml0RWxlbWVudClcbiAgICAgICAgICAgICAgICBpbml0RWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjZWxsID0ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICByb3c6IHJvd1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjZWxsLnJvdyA9IHJvdztcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjZWxsO1xuICAgIH1cbiAgICBcbn1cblxuZXhwb3J0cy5MaW5lcyA9IExpbmVzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/layer/lines.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/layer/marker.js":
/*!***************************************************!*\
  !*** ./node_modules/ace-code/src/layer/marker.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../edit_session\").EditSession} EditSession\n * @typedef {import(\"../../ace-internal\").Ace.LayerConfig} LayerConfig\n */\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\n\n\nclass Marker {\n    /**\n     * @param {HTMLElement} parentEl\n     */\n    constructor(parentEl) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_layer ace_marker-layer\";\n        parentEl.appendChild(this.element);\n    }\n\n    /**\n     * @param {number} padding\n     */\n    setPadding(padding) {\n        this.$padding = padding;\n    }\n\n    /**\n     * @param {EditSession} session\n     */\n    setSession(session) {\n        this.session = session;\n    }\n\n    /**\n     * @param {{ [x: number]: import(\"../../ace-internal\").Ace.MarkerLike; }} markers\n     */\n    setMarkers(markers) {\n        this.markers = markers;\n    }\n\n    /**\n     * @param {string} className\n     * @param {string} css\n     */\n    elt(className, css) {\n        /**@type {any}*/\n        var x = this.i != -1 && this.element.childNodes[this.i];\n        if (!x) {\n            x = document.createElement(\"div\");\n            this.element.appendChild(x);\n            this.i = -1;\n        } else {\n            this.i++;\n        }\n        x.style.cssText = css;\n        x.className = className;\n    }\n\n    /**\n     * @param {LayerConfig} config\n     */\n    update(config) {\n        if (!config) return;\n\n        this.config = config;\n\n        this.i = 0;\n        var html;\n        for (var key in this.markers) {\n            var marker = this.markers[key];\n\n            if (!marker.range) {\n                marker.update(html, this, this.session, config);\n                continue;\n            }\n\n            var range = marker.range.clipRows(config.firstRow, config.lastRow);\n            if (range.isEmpty()) continue;\n\n            range = range.toScreenRange(this.session);\n            if (marker.renderer) {\n                var top = this.$getTop(range.start.row, config);\n                var left = this.$padding + range.start.column * config.characterWidth;\n                marker.renderer(html, range, left, top, config);\n            } else if (marker.type == \"fullLine\") {\n                this.drawFullLineMarker(html, range, marker.clazz, config);\n            } else if (marker.type == \"screenLine\") {\n                this.drawScreenLineMarker(html, range, marker.clazz, config);\n            } else if (range.isMultiLine()) {\n                if (marker.type == \"text\")\n                    this.drawTextMarker(html, range, marker.clazz, config);\n                else\n                    this.drawMultiLineMarker(html, range, marker.clazz, config);\n            } else {\n                this.drawSingleLineMarker(html, range, marker.clazz + \" ace_start\" + \" ace_br15\", config);\n            }\n        }\n        if (this.i !=-1) {\n            while (this.i < this.element.childElementCount)\n                this.element.removeChild(this.element.lastChild);\n        }\n    }\n\n    /**\n     * @param {number} row\n     * @param {Partial<LayerConfig>} layerConfig\n     */\n    $getTop(row, layerConfig) {\n        return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;\n    }\n\n\n    // Draws a marker, which spans a range of text on multiple lines \n    /**\n     * @param {undefined} stringBuilder\n     * @param {Range} range\n     * @param {string} clazz\n     * @param {Partial<LayerConfig>} layerConfig\n     * @param {string} [extraStyle]\n     */\n    drawTextMarker(stringBuilder, range, clazz, layerConfig, extraStyle) {\n        var session = this.session;\n        var start = range.start.row;\n        var end = range.end.row;\n        var row = start;\n        var prev = 0; \n        var curr = 0;\n        var next = session.getScreenLastRowColumn(row);\n        var lineRange = new Range(row, range.start.column, row, curr);\n        for (; row <= end; row++) {\n            lineRange.start.row = lineRange.end.row = row;\n            lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);\n            lineRange.end.column = next;\n            prev = curr;\n            curr = next;\n            next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;\n            this.drawSingleLineMarker(stringBuilder, lineRange, \n                clazz + (row == start  ? \" ace_start\" : \"\") + \" ace_br\"\n                    + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end),\n                layerConfig, row == end ? 0 : 1, extraStyle);\n        }\n    }\n\n    // Draws a multi line marker, where lines span the full width\n    /**\n     * @param {undefined} stringBuilder\n     * @param {Range} range\n     * @param {string} clazz\n     * @param {LayerConfig} config\n     * @param {string} [extraStyle]\n     */\n    drawMultiLineMarker(stringBuilder, range, clazz, config, extraStyle) {\n        // from selection start to the end of the line\n        var padding = this.$padding;\n        var height = config.lineHeight;\n        var top = this.$getTop(range.start.row, config);\n        var left = padding + range.start.column * config.characterWidth;\n        extraStyle = extraStyle || \"\";\n\n        if (this.session.$bidiHandler.isBidiRow(range.start.row)) {\n           var range1 = range.clone();\n           range1.end.row = range1.start.row;\n           range1.end.column = this.session.getLine(range1.start.row).length;\n           this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br1 ace_start\", config, null, extraStyle);\n        } else {\n            this.elt(\n                clazz + \" ace_br1 ace_start\",\n                \"height:\"+ height+ \"px;\"+ \"right:\" + padding + \"px;\"+ \"top:\"+top+ \"px;left:\"+ left+ \"px;\" + (extraStyle || \"\")\n            );\n        }\n        // from start of the last line to the selection end\n        if (this.session.$bidiHandler.isBidiRow(range.end.row)) {\n           var range1 = range.clone();\n           range1.start.row = range1.end.row;\n           range1.start.column = 0;\n           this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br12\", config, null, extraStyle);\n        } else {\n            top = this.$getTop(range.end.row, config);\n            var width = range.end.column * config.characterWidth;\n\n            this.elt(\n                clazz + \" ace_br12\",\n                \"height:\"+ height+ \"px;\"+\n                \"width:\"+ width+ \"px;\"+\n                \"top:\"+ top+ \"px;\"+\n                \"left:\"+ padding+ \"px;\"+ (extraStyle || \"\")\n            );\n        }\n        // all the complete lines\n        height = (range.end.row - range.start.row - 1) * config.lineHeight;\n        if (height <= 0)\n            return;\n        top = this.$getTop(range.start.row + 1, config);\n        \n        var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);\n\n        this.elt(\n            clazz + (radiusClass ? \" ace_br\" + radiusClass : \"\"),\n            \"height:\"+ height+ \"px;\"+\n            \"right:\" + padding + \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:\"+ padding+ \"px;\"+ (extraStyle || \"\")\n        );\n    }\n\n    // Draws a marker which covers part or whole width of a single screen line\n    /**\n     * @param {undefined} stringBuilder\n     * @param {Range} range\n     * @param {string} clazz\n     * @param {Partial<LayerConfig>} config\n     * @param {number} [extraLength]\n     * @param {string} [extraStyle]\n     */\n    drawSingleLineMarker(stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        if (this.session.$bidiHandler.isBidiRow(range.start.row))\n            return this.drawBidiSingleLineMarker(stringBuilder, range, clazz, config, extraLength, extraStyle);\n        var height = config.lineHeight;\n        var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;\n\n        var top = this.$getTop(range.start.row, config);\n        var left = this.$padding + range.start.column * config.characterWidth;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"width:\"+ width+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:\"+ left+ \"px;\"+ (extraStyle || \"\")\n        );\n    }\n\n    // Draws Bidi marker which covers part or whole width of a single screen line\n    /**\n     * @param {undefined} stringBuilder\n     * @param {Range} range\n     * @param {string} clazz\n     * @param {Partial<LayerConfig>} config\n     * @param {number} extraLength\n     * @param {string} extraStyle\n     */\n    drawBidiSingleLineMarker(stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        var height = config.lineHeight, top = this.$getTop(range.start.row, config), padding = this.$padding;\n        var selections = this.session.$bidiHandler.getSelections(range.start.column, range.end.column);\n\n        selections.forEach(function(selection) {\n            this.elt(\n                clazz,\n                \"height:\" + height + \"px;\" +\n                \"width:\" + (selection.width + (extraLength || 0)) + \"px;\" +\n                \"top:\" + top + \"px;\" +\n                \"left:\" + (padding + selection.left) + \"px;\" + (extraStyle || \"\")\n            );\n        }, this);\n    }\n\n    /**\n     * @param {undefined} stringBuilder\n     * @param {Range} range\n     * @param {string} clazz\n     * @param {Partial<LayerConfig>} config\n     * @param {undefined} [extraStyle]\n     */\n    drawFullLineMarker(stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n        if (range.start.row != range.end.row)\n            height += this.$getTop(range.end.row, config) - top;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:0;right:0;\"+ (extraStyle || \"\")\n        );\n    }\n\n    /**\n     * @param {undefined} stringBuilder\n     * @param {Range} range\n     * @param {string} clazz\n     * @param {Partial<LayerConfig>} config\n     * @param {undefined} [extraStyle]\n     */\n    drawScreenLineMarker(stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:0;right:0;\"+ (extraStyle || \"\")\n        );\n    }\n\n}\n\nMarker.prototype.$padding = 0;\n\nfunction getBorderClass(tl, tr, br, bl) {\n    return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);\n}\n\nexports.Marker = Marker;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL21hcmtlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsYUFBYSx1Q0FBdUM7QUFDcEQsYUFBYSw4Q0FBOEM7QUFDM0Q7QUFDQSxZQUFZLG1GQUF5QjtBQUNyQyxVQUFVLG1CQUFPLENBQUMsMERBQVk7OztBQUc5QjtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQiw2REFBNkQ7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxrQkFBa0IsSUFBSTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLGNBQWM7QUFDZDtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsZUFBZSxXQUFXO0FBQzFCLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxzQkFBc0I7QUFDckMsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxXQUFXO0FBQzFCLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxhQUFhO0FBQzVCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLHVDQUF1Qyw0QkFBNEIsbUJBQW1CLGtCQUFrQjtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyxxQ0FBcUM7QUFDckMsaUNBQWlDO0FBQ2pDLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxxQ0FBcUM7QUFDckMsNkJBQTZCO0FBQzdCLGtDQUFrQztBQUNsQztBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QixlQUFlLHNCQUFzQjtBQUNyQyxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QiwrQkFBK0I7QUFDL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxXQUFXO0FBQzFCLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxzQkFBc0I7QUFDckMsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekMsd0VBQXdFO0FBQ3hFLG1DQUFtQztBQUNuQywyREFBMkQ7QUFDM0Q7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQSxlQUFlLFdBQVc7QUFDMUIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QixlQUFlLHNCQUFzQjtBQUNyQyxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkMsNkJBQTZCO0FBQzdCLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFdBQVc7QUFDMUIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QixlQUFlLHNCQUFzQjtBQUNyQyxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyw2QkFBNkI7QUFDN0Isb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL21hcmtlci5qcz83OTBkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuTGF5ZXJDb25maWd9IExheWVyQ29uZmlnXG4gKi9cbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuLi9yYW5nZVwiKS5SYW5nZTtcbnZhciBkb20gPSByZXF1aXJlKFwiLi4vbGliL2RvbVwiKTtcblxuXG5jbGFzcyBNYXJrZXIge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHBhcmVudEVsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50RWwpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBcImFjZV9sYXllciBhY2VfbWFya2VyLWxheWVyXCI7XG4gICAgICAgIHBhcmVudEVsLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBhZGRpbmdcbiAgICAgKi9cbiAgICBzZXRQYWRkaW5nKHBhZGRpbmcpIHtcbiAgICAgICAgdGhpcy4kcGFkZGluZyA9IHBhZGRpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFZGl0U2Vzc2lvbn0gc2Vzc2lvblxuICAgICAqL1xuICAgIHNldFNlc3Npb24oc2Vzc2lvbikge1xuICAgICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7eyBbeDogbnVtYmVyXTogaW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5NYXJrZXJMaWtlOyB9fSBtYXJrZXJzXG4gICAgICovXG4gICAgc2V0TWFya2VycyhtYXJrZXJzKSB7XG4gICAgICAgIHRoaXMubWFya2VycyA9IG1hcmtlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjc3NcbiAgICAgKi9cbiAgICBlbHQoY2xhc3NOYW1lLCBjc3MpIHtcbiAgICAgICAgLyoqQHR5cGUge2FueX0qL1xuICAgICAgICB2YXIgeCA9IHRoaXMuaSAhPSAtMSAmJiB0aGlzLmVsZW1lbnQuY2hpbGROb2Rlc1t0aGlzLmldO1xuICAgICAgICBpZiAoIXgpIHtcbiAgICAgICAgICAgIHggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHgpO1xuICAgICAgICAgICAgdGhpcy5pID0gLTE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmkrKztcbiAgICAgICAgfVxuICAgICAgICB4LnN0eWxlLmNzc1RleHQgPSBjc3M7XG4gICAgICAgIHguY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TGF5ZXJDb25maWd9IGNvbmZpZ1xuICAgICAqL1xuICAgIHVwZGF0ZShjb25maWcpIHtcbiAgICAgICAgaWYgKCFjb25maWcpIHJldHVybjtcblxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcblxuICAgICAgICB0aGlzLmkgPSAwO1xuICAgICAgICB2YXIgaHRtbDtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMubWFya2Vycykge1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoaXMubWFya2Vyc1trZXldO1xuXG4gICAgICAgICAgICBpZiAoIW1hcmtlci5yYW5nZSkge1xuICAgICAgICAgICAgICAgIG1hcmtlci51cGRhdGUoaHRtbCwgdGhpcywgdGhpcy5zZXNzaW9uLCBjb25maWcpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBtYXJrZXIucmFuZ2UuY2xpcFJvd3MoY29uZmlnLmZpcnN0Um93LCBjb25maWcubGFzdFJvdyk7XG4gICAgICAgICAgICBpZiAocmFuZ2UuaXNFbXB0eSgpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgcmFuZ2UgPSByYW5nZS50b1NjcmVlblJhbmdlKHRoaXMuc2Vzc2lvbik7XG4gICAgICAgICAgICBpZiAobWFya2VyLnJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IHRoaXMuJGdldFRvcChyYW5nZS5zdGFydC5yb3csIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgdmFyIGxlZnQgPSB0aGlzLiRwYWRkaW5nICsgcmFuZ2Uuc3RhcnQuY29sdW1uICogY29uZmlnLmNoYXJhY3RlcldpZHRoO1xuICAgICAgICAgICAgICAgIG1hcmtlci5yZW5kZXJlcihodG1sLCByYW5nZSwgbGVmdCwgdG9wLCBjb25maWcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXJrZXIudHlwZSA9PSBcImZ1bGxMaW5lXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdGdWxsTGluZU1hcmtlcihodG1sLCByYW5nZSwgbWFya2VyLmNsYXp6LCBjb25maWcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXJrZXIudHlwZSA9PSBcInNjcmVlbkxpbmVcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1NjcmVlbkxpbmVNYXJrZXIoaHRtbCwgcmFuZ2UsIG1hcmtlci5jbGF6eiwgY29uZmlnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmFuZ2UuaXNNdWx0aUxpbmUoKSkge1xuICAgICAgICAgICAgICAgIGlmIChtYXJrZXIudHlwZSA9PSBcInRleHRcIilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3VGV4dE1hcmtlcihodG1sLCByYW5nZSwgbWFya2VyLmNsYXp6LCBjb25maWcpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3TXVsdGlMaW5lTWFya2VyKGh0bWwsIHJhbmdlLCBtYXJrZXIuY2xhenosIGNvbmZpZyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1NpbmdsZUxpbmVNYXJrZXIoaHRtbCwgcmFuZ2UsIG1hcmtlci5jbGF6eiArIFwiIGFjZV9zdGFydFwiICsgXCIgYWNlX2JyMTVcIiwgY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pICE9LTEpIHtcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmkgPCB0aGlzLmVsZW1lbnQuY2hpbGRFbGVtZW50Q291bnQpXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudC5sYXN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7UGFydGlhbDxMYXllckNvbmZpZz59IGxheWVyQ29uZmlnXG4gICAgICovXG4gICAgJGdldFRvcChyb3csIGxheWVyQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiAocm93IC0gbGF5ZXJDb25maWcuZmlyc3RSb3dTY3JlZW4pICogbGF5ZXJDb25maWcubGluZUhlaWdodDtcbiAgICB9XG5cblxuICAgIC8vIERyYXdzIGEgbWFya2VyLCB3aGljaCBzcGFucyBhIHJhbmdlIG9mIHRleHQgb24gbXVsdGlwbGUgbGluZXMgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHt1bmRlZmluZWR9IHN0cmluZ0J1aWxkZXJcbiAgICAgKiBAcGFyYW0ge1JhbmdlfSByYW5nZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGF6elxuICAgICAqIEBwYXJhbSB7UGFydGlhbDxMYXllckNvbmZpZz59IGxheWVyQ29uZmlnXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtleHRyYVN0eWxlXVxuICAgICAqL1xuICAgIGRyYXdUZXh0TWFya2VyKHN0cmluZ0J1aWxkZXIsIHJhbmdlLCBjbGF6eiwgbGF5ZXJDb25maWcsIGV4dHJhU3R5bGUpIHtcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIHZhciBzdGFydCA9IHJhbmdlLnN0YXJ0LnJvdztcbiAgICAgICAgdmFyIGVuZCA9IHJhbmdlLmVuZC5yb3c7XG4gICAgICAgIHZhciByb3cgPSBzdGFydDtcbiAgICAgICAgdmFyIHByZXYgPSAwOyBcbiAgICAgICAgdmFyIGN1cnIgPSAwO1xuICAgICAgICB2YXIgbmV4dCA9IHNlc3Npb24uZ2V0U2NyZWVuTGFzdFJvd0NvbHVtbihyb3cpO1xuICAgICAgICB2YXIgbGluZVJhbmdlID0gbmV3IFJhbmdlKHJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uLCByb3csIGN1cnIpO1xuICAgICAgICBmb3IgKDsgcm93IDw9IGVuZDsgcm93KyspIHtcbiAgICAgICAgICAgIGxpbmVSYW5nZS5zdGFydC5yb3cgPSBsaW5lUmFuZ2UuZW5kLnJvdyA9IHJvdztcbiAgICAgICAgICAgIGxpbmVSYW5nZS5zdGFydC5jb2x1bW4gPSByb3cgPT0gc3RhcnQgPyByYW5nZS5zdGFydC5jb2x1bW4gOiBzZXNzaW9uLmdldFJvd1dyYXBJbmRlbnQocm93KTtcbiAgICAgICAgICAgIGxpbmVSYW5nZS5lbmQuY29sdW1uID0gbmV4dDtcbiAgICAgICAgICAgIHByZXYgPSBjdXJyO1xuICAgICAgICAgICAgY3VyciA9IG5leHQ7XG4gICAgICAgICAgICBuZXh0ID0gcm93ICsgMSA8IGVuZCA/IHNlc3Npb24uZ2V0U2NyZWVuTGFzdFJvd0NvbHVtbihyb3cgKyAxKSA6IHJvdyA9PSBlbmQgPyAwIDogcmFuZ2UuZW5kLmNvbHVtbjtcbiAgICAgICAgICAgIHRoaXMuZHJhd1NpbmdsZUxpbmVNYXJrZXIoc3RyaW5nQnVpbGRlciwgbGluZVJhbmdlLCBcbiAgICAgICAgICAgICAgICBjbGF6eiArIChyb3cgPT0gc3RhcnQgID8gXCIgYWNlX3N0YXJ0XCIgOiBcIlwiKSArIFwiIGFjZV9iclwiXG4gICAgICAgICAgICAgICAgICAgICsgZ2V0Qm9yZGVyQ2xhc3Mocm93ID09IHN0YXJ0IHx8IHJvdyA9PSBzdGFydCArIDEgJiYgcmFuZ2Uuc3RhcnQuY29sdW1uLCBwcmV2IDwgY3VyciwgY3VyciA+IG5leHQsIHJvdyA9PSBlbmQpLFxuICAgICAgICAgICAgICAgIGxheWVyQ29uZmlnLCByb3cgPT0gZW5kID8gMCA6IDEsIGV4dHJhU3R5bGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRHJhd3MgYSBtdWx0aSBsaW5lIG1hcmtlciwgd2hlcmUgbGluZXMgc3BhbiB0aGUgZnVsbCB3aWR0aFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7dW5kZWZpbmVkfSBzdHJpbmdCdWlsZGVyXG4gICAgICogQHBhcmFtIHtSYW5nZX0gcmFuZ2VcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhenpcbiAgICAgKiBAcGFyYW0ge0xheWVyQ29uZmlnfSBjb25maWdcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4dHJhU3R5bGVdXG4gICAgICovXG4gICAgZHJhd011bHRpTGluZU1hcmtlcihzdHJpbmdCdWlsZGVyLCByYW5nZSwgY2xhenosIGNvbmZpZywgZXh0cmFTdHlsZSkge1xuICAgICAgICAvLyBmcm9tIHNlbGVjdGlvbiBzdGFydCB0byB0aGUgZW5kIG9mIHRoZSBsaW5lXG4gICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy4kcGFkZGluZztcbiAgICAgICAgdmFyIGhlaWdodCA9IGNvbmZpZy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgdG9wID0gdGhpcy4kZ2V0VG9wKHJhbmdlLnN0YXJ0LnJvdywgY29uZmlnKTtcbiAgICAgICAgdmFyIGxlZnQgPSBwYWRkaW5nICsgcmFuZ2Uuc3RhcnQuY29sdW1uICogY29uZmlnLmNoYXJhY3RlcldpZHRoO1xuICAgICAgICBleHRyYVN0eWxlID0gZXh0cmFTdHlsZSB8fCBcIlwiO1xuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLmlzQmlkaVJvdyhyYW5nZS5zdGFydC5yb3cpKSB7XG4gICAgICAgICAgIHZhciByYW5nZTEgPSByYW5nZS5jbG9uZSgpO1xuICAgICAgICAgICByYW5nZTEuZW5kLnJvdyA9IHJhbmdlMS5zdGFydC5yb3c7XG4gICAgICAgICAgIHJhbmdlMS5lbmQuY29sdW1uID0gdGhpcy5zZXNzaW9uLmdldExpbmUocmFuZ2UxLnN0YXJ0LnJvdykubGVuZ3RoO1xuICAgICAgICAgICB0aGlzLmRyYXdCaWRpU2luZ2xlTGluZU1hcmtlcihzdHJpbmdCdWlsZGVyLCByYW5nZTEsIGNsYXp6ICsgXCIgYWNlX2JyMSBhY2Vfc3RhcnRcIiwgY29uZmlnLCBudWxsLCBleHRyYVN0eWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWx0KFxuICAgICAgICAgICAgICAgIGNsYXp6ICsgXCIgYWNlX2JyMSBhY2Vfc3RhcnRcIixcbiAgICAgICAgICAgICAgICBcImhlaWdodDpcIisgaGVpZ2h0KyBcInB4O1wiKyBcInJpZ2h0OlwiICsgcGFkZGluZyArIFwicHg7XCIrIFwidG9wOlwiK3RvcCsgXCJweDtsZWZ0OlwiKyBsZWZ0KyBcInB4O1wiICsgKGV4dHJhU3R5bGUgfHwgXCJcIilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZnJvbSBzdGFydCBvZiB0aGUgbGFzdCBsaW5lIHRvIHRoZSBzZWxlY3Rpb24gZW5kXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLmlzQmlkaVJvdyhyYW5nZS5lbmQucm93KSkge1xuICAgICAgICAgICB2YXIgcmFuZ2UxID0gcmFuZ2UuY2xvbmUoKTtcbiAgICAgICAgICAgcmFuZ2UxLnN0YXJ0LnJvdyA9IHJhbmdlMS5lbmQucm93O1xuICAgICAgICAgICByYW5nZTEuc3RhcnQuY29sdW1uID0gMDtcbiAgICAgICAgICAgdGhpcy5kcmF3QmlkaVNpbmdsZUxpbmVNYXJrZXIoc3RyaW5nQnVpbGRlciwgcmFuZ2UxLCBjbGF6eiArIFwiIGFjZV9icjEyXCIsIGNvbmZpZywgbnVsbCwgZXh0cmFTdHlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b3AgPSB0aGlzLiRnZXRUb3AocmFuZ2UuZW5kLnJvdywgY29uZmlnKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHJhbmdlLmVuZC5jb2x1bW4gKiBjb25maWcuY2hhcmFjdGVyV2lkdGg7XG5cbiAgICAgICAgICAgIHRoaXMuZWx0KFxuICAgICAgICAgICAgICAgIGNsYXp6ICsgXCIgYWNlX2JyMTJcIixcbiAgICAgICAgICAgICAgICBcImhlaWdodDpcIisgaGVpZ2h0KyBcInB4O1wiK1xuICAgICAgICAgICAgICAgIFwid2lkdGg6XCIrIHdpZHRoKyBcInB4O1wiK1xuICAgICAgICAgICAgICAgIFwidG9wOlwiKyB0b3ArIFwicHg7XCIrXG4gICAgICAgICAgICAgICAgXCJsZWZ0OlwiKyBwYWRkaW5nKyBcInB4O1wiKyAoZXh0cmFTdHlsZSB8fCBcIlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhbGwgdGhlIGNvbXBsZXRlIGxpbmVzXG4gICAgICAgIGhlaWdodCA9IChyYW5nZS5lbmQucm93IC0gcmFuZ2Uuc3RhcnQucm93IC0gMSkgKiBjb25maWcubGluZUhlaWdodDtcbiAgICAgICAgaWYgKGhlaWdodCA8PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0b3AgPSB0aGlzLiRnZXRUb3AocmFuZ2Uuc3RhcnQucm93ICsgMSwgY29uZmlnKTtcbiAgICAgICAgXG4gICAgICAgIHZhciByYWRpdXNDbGFzcyA9IChyYW5nZS5zdGFydC5jb2x1bW4gPyAxIDogMCkgfCAocmFuZ2UuZW5kLmNvbHVtbiA/IDAgOiA4KTtcblxuICAgICAgICB0aGlzLmVsdChcbiAgICAgICAgICAgIGNsYXp6ICsgKHJhZGl1c0NsYXNzID8gXCIgYWNlX2JyXCIgKyByYWRpdXNDbGFzcyA6IFwiXCIpLFxuICAgICAgICAgICAgXCJoZWlnaHQ6XCIrIGhlaWdodCsgXCJweDtcIitcbiAgICAgICAgICAgIFwicmlnaHQ6XCIgKyBwYWRkaW5nICsgXCJweDtcIitcbiAgICAgICAgICAgIFwidG9wOlwiKyB0b3ArIFwicHg7XCIrXG4gICAgICAgICAgICBcImxlZnQ6XCIrIHBhZGRpbmcrIFwicHg7XCIrIChleHRyYVN0eWxlIHx8IFwiXCIpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gRHJhd3MgYSBtYXJrZXIgd2hpY2ggY292ZXJzIHBhcnQgb3Igd2hvbGUgd2lkdGggb2YgYSBzaW5nbGUgc2NyZWVuIGxpbmVcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3VuZGVmaW5lZH0gc3RyaW5nQnVpbGRlclxuICAgICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXp6XG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPExheWVyQ29uZmlnPn0gY29uZmlnXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtleHRyYUxlbmd0aF1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4dHJhU3R5bGVdXG4gICAgICovXG4gICAgZHJhd1NpbmdsZUxpbmVNYXJrZXIoc3RyaW5nQnVpbGRlciwgcmFuZ2UsIGNsYXp6LCBjb25maWcsIGV4dHJhTGVuZ3RoLCBleHRyYVN0eWxlKSB7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLmlzQmlkaVJvdyhyYW5nZS5zdGFydC5yb3cpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHJhd0JpZGlTaW5nbGVMaW5lTWFya2VyKHN0cmluZ0J1aWxkZXIsIHJhbmdlLCBjbGF6eiwgY29uZmlnLCBleHRyYUxlbmd0aCwgZXh0cmFTdHlsZSk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBjb25maWcubGluZUhlaWdodDtcbiAgICAgICAgdmFyIHdpZHRoID0gKHJhbmdlLmVuZC5jb2x1bW4gKyAoZXh0cmFMZW5ndGggfHwgMCkgLSByYW5nZS5zdGFydC5jb2x1bW4pICogY29uZmlnLmNoYXJhY3RlcldpZHRoO1xuXG4gICAgICAgIHZhciB0b3AgPSB0aGlzLiRnZXRUb3AocmFuZ2Uuc3RhcnQucm93LCBjb25maWcpO1xuICAgICAgICB2YXIgbGVmdCA9IHRoaXMuJHBhZGRpbmcgKyByYW5nZS5zdGFydC5jb2x1bW4gKiBjb25maWcuY2hhcmFjdGVyV2lkdGg7XG5cbiAgICAgICAgdGhpcy5lbHQoXG4gICAgICAgICAgICBjbGF6eixcbiAgICAgICAgICAgIFwiaGVpZ2h0OlwiKyBoZWlnaHQrIFwicHg7XCIrXG4gICAgICAgICAgICBcIndpZHRoOlwiKyB3aWR0aCsgXCJweDtcIitcbiAgICAgICAgICAgIFwidG9wOlwiKyB0b3ArIFwicHg7XCIrXG4gICAgICAgICAgICBcImxlZnQ6XCIrIGxlZnQrIFwicHg7XCIrIChleHRyYVN0eWxlIHx8IFwiXCIpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gRHJhd3MgQmlkaSBtYXJrZXIgd2hpY2ggY292ZXJzIHBhcnQgb3Igd2hvbGUgd2lkdGggb2YgYSBzaW5nbGUgc2NyZWVuIGxpbmVcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3VuZGVmaW5lZH0gc3RyaW5nQnVpbGRlclxuICAgICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXp6XG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPExheWVyQ29uZmlnPn0gY29uZmlnXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGV4dHJhTGVuZ3RoXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4dHJhU3R5bGVcbiAgICAgKi9cbiAgICBkcmF3QmlkaVNpbmdsZUxpbmVNYXJrZXIoc3RyaW5nQnVpbGRlciwgcmFuZ2UsIGNsYXp6LCBjb25maWcsIGV4dHJhTGVuZ3RoLCBleHRyYVN0eWxlKSB7XG4gICAgICAgIHZhciBoZWlnaHQgPSBjb25maWcubGluZUhlaWdodCwgdG9wID0gdGhpcy4kZ2V0VG9wKHJhbmdlLnN0YXJ0LnJvdywgY29uZmlnKSwgcGFkZGluZyA9IHRoaXMuJHBhZGRpbmc7XG4gICAgICAgIHZhciBzZWxlY3Rpb25zID0gdGhpcy5zZXNzaW9uLiRiaWRpSGFuZGxlci5nZXRTZWxlY3Rpb25zKHJhbmdlLnN0YXJ0LmNvbHVtbiwgcmFuZ2UuZW5kLmNvbHVtbik7XG5cbiAgICAgICAgc2VsZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5lbHQoXG4gICAgICAgICAgICAgICAgY2xhenosXG4gICAgICAgICAgICAgICAgXCJoZWlnaHQ6XCIgKyBoZWlnaHQgKyBcInB4O1wiICtcbiAgICAgICAgICAgICAgICBcIndpZHRoOlwiICsgKHNlbGVjdGlvbi53aWR0aCArIChleHRyYUxlbmd0aCB8fCAwKSkgKyBcInB4O1wiICtcbiAgICAgICAgICAgICAgICBcInRvcDpcIiArIHRvcCArIFwicHg7XCIgK1xuICAgICAgICAgICAgICAgIFwibGVmdDpcIiArIChwYWRkaW5nICsgc2VsZWN0aW9uLmxlZnQpICsgXCJweDtcIiArIChleHRyYVN0eWxlIHx8IFwiXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3VuZGVmaW5lZH0gc3RyaW5nQnVpbGRlclxuICAgICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXp6XG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPExheWVyQ29uZmlnPn0gY29uZmlnXG4gICAgICogQHBhcmFtIHt1bmRlZmluZWR9IFtleHRyYVN0eWxlXVxuICAgICAqL1xuICAgIGRyYXdGdWxsTGluZU1hcmtlcihzdHJpbmdCdWlsZGVyLCByYW5nZSwgY2xhenosIGNvbmZpZywgZXh0cmFTdHlsZSkge1xuICAgICAgICB2YXIgdG9wID0gdGhpcy4kZ2V0VG9wKHJhbmdlLnN0YXJ0LnJvdywgY29uZmlnKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IGNvbmZpZy5saW5lSGVpZ2h0O1xuICAgICAgICBpZiAocmFuZ2Uuc3RhcnQucm93ICE9IHJhbmdlLmVuZC5yb3cpXG4gICAgICAgICAgICBoZWlnaHQgKz0gdGhpcy4kZ2V0VG9wKHJhbmdlLmVuZC5yb3csIGNvbmZpZykgLSB0b3A7XG5cbiAgICAgICAgdGhpcy5lbHQoXG4gICAgICAgICAgICBjbGF6eixcbiAgICAgICAgICAgIFwiaGVpZ2h0OlwiKyBoZWlnaHQrIFwicHg7XCIrXG4gICAgICAgICAgICBcInRvcDpcIisgdG9wKyBcInB4O1wiK1xuICAgICAgICAgICAgXCJsZWZ0OjA7cmlnaHQ6MDtcIisgKGV4dHJhU3R5bGUgfHwgXCJcIilcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3VuZGVmaW5lZH0gc3RyaW5nQnVpbGRlclxuICAgICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXp6XG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPExheWVyQ29uZmlnPn0gY29uZmlnXG4gICAgICogQHBhcmFtIHt1bmRlZmluZWR9IFtleHRyYVN0eWxlXVxuICAgICAqL1xuICAgIGRyYXdTY3JlZW5MaW5lTWFya2VyKHN0cmluZ0J1aWxkZXIsIHJhbmdlLCBjbGF6eiwgY29uZmlnLCBleHRyYVN0eWxlKSB7XG4gICAgICAgIHZhciB0b3AgPSB0aGlzLiRnZXRUb3AocmFuZ2Uuc3RhcnQucm93LCBjb25maWcpO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gY29uZmlnLmxpbmVIZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5lbHQoXG4gICAgICAgICAgICBjbGF6eixcbiAgICAgICAgICAgIFwiaGVpZ2h0OlwiKyBoZWlnaHQrIFwicHg7XCIrXG4gICAgICAgICAgICBcInRvcDpcIisgdG9wKyBcInB4O1wiK1xuICAgICAgICAgICAgXCJsZWZ0OjA7cmlnaHQ6MDtcIisgKGV4dHJhU3R5bGUgfHwgXCJcIilcbiAgICAgICAgKTtcbiAgICB9XG5cbn1cblxuTWFya2VyLnByb3RvdHlwZS4kcGFkZGluZyA9IDA7XG5cbmZ1bmN0aW9uIGdldEJvcmRlckNsYXNzKHRsLCB0ciwgYnIsIGJsKSB7XG4gICAgcmV0dXJuICh0bCA/IDEgOiAwKSB8ICh0ciA/IDIgOiAwKSB8IChiciA/IDQgOiAwKSB8IChibCA/IDggOiAwKTtcbn1cblxuZXhwb3J0cy5NYXJrZXIgPSBNYXJrZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/layer/marker.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/layer/text.js":
/*!*************************************************!*\
  !*** ./node_modules/ace-code/src/layer/text.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../../ace-internal\").Ace.LayerConfig} LayerConfig\n * @typedef {import(\"../edit_session\").EditSession} EditSession\n */\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar lang = __webpack_require__(/*! ../lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar Lines = (__webpack_require__(/*! ./lines */ \"./node_modules/ace-code/src/layer/lines.js\").Lines);\nvar EventEmitter = (__webpack_require__(/*! ../lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nvar nls = (__webpack_require__(/*! ../config */ \"./node_modules/ace-code/src/config.js\").nls);\nconst isTextToken = (__webpack_require__(/*! ./text_util */ \"./node_modules/ace-code/src/layer/text_util.js\").isTextToken);\n\nclass Text {\n    /**\n     * @param {HTMLElement} parentEl\n     */\n    constructor(parentEl) {\n        this.dom = dom;\n        this.element = this.dom.createElement(\"div\");\n        this.element.className = \"ace_layer ace_text-layer\";\n        parentEl.appendChild(this.element);\n        this.$updateEolChar = this.$updateEolChar.bind(this);\n        this.$lines = new Lines(this.element);\n    }\n    \n    $updateEolChar() {\n        var doc = this.session.doc;\n        var unixMode = doc.getNewLineCharacter() == \"\\n\" && doc.getNewLineMode() != \"windows\";\n        var EOL_CHAR = unixMode ? this.EOL_CHAR_LF : this.EOL_CHAR_CRLF;\n        if (this.EOL_CHAR != EOL_CHAR) {\n            this.EOL_CHAR = EOL_CHAR;\n            return true;\n        }\n    }\n\n    /**\n     * @param {number} padding\n     */\n    setPadding(padding) {\n        this.$padding = padding;\n        this.element.style.margin = \"0 \" + padding + \"px\";\n    }\n    \n    /**\n     * @returns {number}\n     */\n    getLineHeight() {\n        return this.$fontMetrics.$characterSize.height || 0;\n    }\n\n    /**\n     * @returns {number}\n     */\n    getCharacterWidth() {\n        return this.$fontMetrics.$characterSize.width || 0;\n    }\n\n    /**\n     * @param {any} measure\n     */\n    $setFontMetrics(measure) {\n        this.$fontMetrics = measure;\n        this.$fontMetrics.on(\"changeCharacterSize\",\n            /**\n             * @this {Text}\n             */\n            function (e) {\n                this._signal(\"changeCharacterSize\", e);\n        }.bind(this));\n        this.$pollSizeChanges();\n    }\n\n    checkForSizeChanges() {\n        this.$fontMetrics.checkForSizeChanges();\n    }\n    $pollSizeChanges() {\n        return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();\n    }\n\n    /**\n     * @param {EditSession} session\n     */\n    setSession(session) {\n        /**@type {EditSession}*/\n        this.session = session;\n        if (session)\n            this.$computeTabString();\n    }\n\n    /**\n     * @param {string} showInvisibles\n     */\n    setShowInvisibles(showInvisibles) {\n        if (this.showInvisibles == showInvisibles)\n            return false;\n\n        this.showInvisibles = showInvisibles;\n        if (typeof showInvisibles == \"string\") {\n            this.showSpaces = /tab/i.test(showInvisibles);\n            this.showTabs = /space/i.test(showInvisibles);\n            this.showEOL = /eol/i.test(showInvisibles);\n        } else {\n            this.showSpaces = this.showTabs = this.showEOL = showInvisibles;\n        }\n        this.$computeTabString();\n        return true;\n    }\n\n    /**\n     * @param {boolean} display\n     */\n    setDisplayIndentGuides(display) {\n        if (this.displayIndentGuides == display)\n            return false;\n\n        this.displayIndentGuides = display;\n        this.$computeTabString();\n        return true;\n    }\n\n    /**\n     * @param {boolean} highlight\n     */\n    setHighlightIndentGuides(highlight) {\n        if (this.$highlightIndentGuides === highlight) return false;\n\n        this.$highlightIndentGuides = highlight;\n        return highlight;\n    }\n    \n    $computeTabString() {\n        var tabSize = this.session.getTabSize();\n        this.tabSize = tabSize;\n        /**@type{any}*/var tabStr = this.$tabStrings = [0];\n        for (var i = 1; i < tabSize + 1; i++) {\n            if (this.showTabs) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_tab\";\n                span.textContent = lang.stringRepeat(this.TAB_CHAR, i);\n                tabStr.push(span);\n            } else {\n                tabStr.push(this.dom.createTextNode(lang.stringRepeat(\" \", i), this.element));\n            }\n        }\n        if (this.displayIndentGuides) {\n            this.$indentGuideRe =  /\\s\\S| \\t|\\t |\\s$/;\n            var className = \"ace_indent-guide\";\n            var spaceClass = this.showSpaces ? \" ace_invisible ace_invisible_space\" : \"\";\n            var spaceContent = this.showSpaces\n                ? lang.stringRepeat(this.SPACE_CHAR, this.tabSize)\n                : lang.stringRepeat(\" \", this.tabSize);\n\n            var tabClass = this.showTabs ? \" ace_invisible ace_invisible_tab\" : \"\";\n            var tabContent = this.showTabs\n                ? lang.stringRepeat(this.TAB_CHAR, this.tabSize)\n                : spaceContent;\n\n            var span = this.dom.createElement(\"span\");\n            span.className = className + spaceClass;\n            span.textContent = spaceContent;\n            this.$tabStrings[\" \"] = span;\n\n            var span = this.dom.createElement(\"span\");\n            span.className = className + tabClass;\n            span.textContent = tabContent;\n            this.$tabStrings[\"\\t\"] = span;\n        }\n    }\n\n    /**\n     * @param {LayerConfig} config\n     * @param {number} firstRow\n     * @param {number} lastRow\n     */\n    updateLines(config, firstRow, lastRow) {\n        // Due to wrap line changes there can be new lines if e.g.\n        // the line to updated wrapped in the meantime.\n        if (this.config.lastRow != config.lastRow ||\n            this.config.firstRow != config.firstRow) {\n            return this.update(config);\n        }\n\n        this.config = config;\n\n        var first = Math.max(firstRow, config.firstRow);\n        var last = Math.min(lastRow, config.lastRow);\n\n        var lineElements = this.element.childNodes;\n        var lineElementsIdx = 0;\n\n        for (var row = config.firstRow; row < first; row++) {\n            var foldLine = this.session.getFoldLine(row);\n            if (foldLine) {\n                if (foldLine.containsRow(first)) {\n                    first = foldLine.start.row;\n                    break;\n                } else {\n                    row = foldLine.end.row;\n                }\n            }\n            lineElementsIdx ++;\n        }\n\n        var heightChanged = false;\n        var row = first;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row :Infinity;\n            }\n            if (row > last)\n                break;\n\n            /**@type{any}*/var lineElement = lineElements[lineElementsIdx++];\n            if (lineElement) {\n                this.dom.removeChildren(lineElement);\n                this.$renderLine(\n                    lineElement, row, row == foldStart ? foldLine : false\n                );\n\n                if (heightChanged)\n                    lineElement.style.top = this.$lines.computeLineTop(row, config, this.session) + \"px\";\n\n                var height = (config.lineHeight * this.session.getRowLength(row)) + \"px\";\n                if (lineElement.style.height != height) {\n                    heightChanged = true;\n                    lineElement.style.height = height;\n                }\n            }\n            row++;\n        }\n        if (heightChanged) {\n            while (lineElementsIdx < this.$lines.cells.length) {\n                var cell = this.$lines.cells[lineElementsIdx++];\n                cell.element.style.top = this.$lines.computeLineTop(cell.row, config, this.session) + \"px\";\n            }\n        }\n    }\n\n    /**\n     * @param {LayerConfig} config\n     */\n    scrollLines(config) {\n        var oldConfig = this.config;\n        this.config = config;\n\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n\n        this.$lines.moveContainer(config);\n\n        var lastRow = config.lastRow;\n        var oldLastRow = oldConfig ? oldConfig.lastRow : -1;\n\n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (!oldConfig || oldConfig.lastRow < config.firstRow)\n            return this.update(config);\n\n        if (config.lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)\n                this.$lines.shift();\n\n        if (oldConfig.lastRow > config.lastRow)\n            for (var row=this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row>0; row--)\n                this.$lines.pop();\n\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n\n        if (config.lastRow > oldConfig.lastRow) {\n            this.$lines.push(this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow));\n        }\n        this.$highlightIndentGuide();\n    }\n\n    /**\n     * @param {LayerConfig} config\n     * @param {number} firstRow\n     * @param {number} lastRow\n     */\n    $renderLinesFragment(config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n\n            var line = this.$lines.createCell(row, config, this.session);\n\n            var lineEl = line.element;\n            this.dom.removeChildren(lineEl);\n            dom.setStyle(lineEl.style, \"height\", this.$lines.computeLineHeight(row, config, this.session) + \"px\");\n            dom.setStyle(lineEl.style, \"top\", this.$lines.computeLineTop(row, config, this.session) + \"px\");\n\n            // Get the tokens per line as there might be some lines in between\n            // beeing folded.\n            this.$renderLine(lineEl, row, row == foldStart ? foldLine : false);\n\n            if (this.$useLineGroups()) {\n                lineEl.className = \"ace_line_group\";\n            } else {\n                lineEl.className = \"ace_line\";\n            }\n            fragment.push(line);\n\n            row++;\n        }\n        return fragment;\n    }\n\n    /**\n     * @param {LayerConfig} config\n     */\n    update(config) {\n        this.$lines.moveContainer(config);\n\n        this.config = config;\n\n        var firstRow = config.firstRow;\n        var lastRow = config.lastRow;\n\n        var lines = this.$lines;\n        while (lines.getLength())\n            lines.pop();\n\n        lines.push(this.$renderLinesFragment(config, firstRow, lastRow));\n    }\n\n    $renderToken(parent, screenColumn, token, value) {\n        var self = this;\n        var re = /(\\t)|( +)|([\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\uFEFF\\uFFF9-\\uFFFC\\u2066\\u2067\\u2068\\u202A\\u202B\\u202D\\u202E\\u202C\\u2069\\u2060\\u2061\\u2062\\u2063\\u2064\\u206A\\u206B\\u206B\\u206C\\u206D\\u206E\\u206F]+)|(\\u3000)|([\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3001-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g;\n\n        var valueFragment = this.dom.createFragment(this.element);\n\n        var m;\n        var i = 0;\n        while (m = re.exec(value)) {\n            var tab = m[1];\n            var simpleSpace = m[2];\n            var controlCharacter = m[3];\n            var cjkSpace = m[4];\n            var cjk = m[5];\n\n            if (!self.showSpaces && simpleSpace)\n                continue;\n\n            var before = i != m.index ? value.slice(i, m.index) : \"\";\n\n            i = m.index + m[0].length;\n\n            if (before) {\n                valueFragment.appendChild(this.dom.createTextNode(before, this.element));\n            }\n\n            if (tab) {\n                var tabSize = self.session.getScreenTabSize(screenColumn + m.index);\n                valueFragment.appendChild(self.$tabStrings[tabSize].cloneNode(true));\n                screenColumn += tabSize - 1;\n            } else if (simpleSpace) {\n                if (self.showSpaces) {\n                    var span = this.dom.createElement(\"span\");\n                    span.className = \"ace_invisible ace_invisible_space\";\n                    span.textContent = lang.stringRepeat(self.SPACE_CHAR, simpleSpace.length);\n                    valueFragment.appendChild(span);\n                } else {\n                    valueFragment.appendChild(this.dom.createTextNode(simpleSpace, this.element));\n                }\n            } else if (controlCharacter) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_space ace_invalid\";\n                span.textContent = lang.stringRepeat(self.SPACE_CHAR, controlCharacter.length);\n                valueFragment.appendChild(span);\n            } else if (cjkSpace) {\n                // U+3000 is both invisible AND full-width, so must be handled uniquely\n                screenColumn += 1;\n\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = self.showSpaces ? \"ace_cjk ace_invisible ace_invisible_space\" : \"ace_cjk\";\n                span.textContent = self.showSpaces ? self.SPACE_CHAR : cjkSpace;\n                valueFragment.appendChild(span);\n            } else if (cjk) {\n                screenColumn += 1;\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = \"ace_cjk\";\n                span.textContent = cjk;\n                valueFragment.appendChild(span);\n            }\n        }\n\n        valueFragment.appendChild(this.dom.createTextNode(i ? value.slice(i) : value, this.element));\n\n        if (!isTextToken(token.type)) {\n            var classes = \"ace_\" + token.type.replace(/\\./g, \" ace_\");\n            var span = this.dom.createElement(\"span\");\n            if (token.type == \"fold\"){\n                span.style.width = (token.value.length * this.config.characterWidth) + \"px\";\n                span.setAttribute(\"title\", nls(\"inline-fold.closed.title\", \"Unfold code\"));\n            }\n\n            span.className = classes;\n            span.appendChild(valueFragment);\n\n            parent.appendChild(span);\n        }\n        else {\n            parent.appendChild(valueFragment);\n        }\n\n        return screenColumn + value.length;\n    }\n\n    renderIndentGuide(parent, value, max) {\n        var cols = value.search(this.$indentGuideRe);\n        if (cols <= 0 || cols >= max)\n            return value;\n        if (value[0] == \" \") {\n            cols -= cols % this.tabSize;\n            var count = cols/this.tabSize;\n            for (var i=0; i<count; i++) {\n                parent.appendChild(this.$tabStrings[\" \"].cloneNode(true));\n            }\n            this.$highlightIndentGuide();\n            return value.substr(cols);\n        } else if (value[0] == \"\\t\") {\n            for (var i=0; i<cols; i++) {\n                parent.appendChild(this.$tabStrings[\"\\t\"].cloneNode(true));\n            }\n            this.$highlightIndentGuide();\n            return value.substr(cols);\n        }\n        this.$highlightIndentGuide();\n        return value;\n    }\n\n    $highlightIndentGuide() {\n        if (!this.$highlightIndentGuides || !this.displayIndentGuides) return;\n        /**@type {{ indentLevel?: number; start?: number; end?: number; dir?: number; }}*/\n        this.$highlightIndentGuideMarker = {\n            indentLevel: undefined,\n            start: undefined,\n            end: undefined,\n            dir: undefined\n        };\n        var lines = this.session.doc.$lines;\n        if (!lines) return;\n\n        var cursor = this.session.selection.getCursor();\n        var initialIndent = /^\\s*/.exec(this.session.doc.getLine(cursor.row))[0].length;\n        var elementIndentLevel = Math.floor(initialIndent / this.tabSize);\n        this.$highlightIndentGuideMarker = {\n            indentLevel: elementIndentLevel,\n            start: cursor.row\n        };\n\n        var bracketHighlight = this.session.$bracketHighlight;\n        if (bracketHighlight) {\n            var ranges = this.session.$bracketHighlight.ranges;\n            for (var i = 0; i < ranges.length; i++) {\n                if (cursor.row !== ranges[i].start.row) {\n                    this.$highlightIndentGuideMarker.end = ranges[i].start.row;\n                    if (cursor.row > ranges[i].start.row) {\n                        this.$highlightIndentGuideMarker.dir = -1;\n                    }\n                    else {\n                        this.$highlightIndentGuideMarker.dir = 1;\n                    }\n                    break;\n                }\n            }\n        }\n\n        if (!this.$highlightIndentGuideMarker.end) {\n            if (lines[cursor.row] !== '' && cursor.column === lines[cursor.row].length) {\n                this.$highlightIndentGuideMarker.dir = 1;\n                for (var i = cursor.row + 1; i < lines.length; i++) {\n                    var line = lines[i];\n                    var currentIndent = /^\\s*/.exec(line)[0].length;\n                    if (line !== '') {\n                        this.$highlightIndentGuideMarker.end = i;\n                        if (currentIndent <= initialIndent) break;\n                    }\n                }\n            }\n        }\n\n        this.$renderHighlightIndentGuide();\n    }\n\n    $clearActiveIndentGuide() {\n        var cells = this.$lines.cells;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            var childNodes = cell.element.childNodes;\n            if (childNodes.length > 0) {\n                for (var j = 0; j < childNodes.length; j++) {\n                    if (childNodes[j].classList && childNodes[j].classList.contains(\"ace_indent-guide-active\")) {\n                        childNodes[j].classList.remove(\"ace_indent-guide-active\");\n                        break;\n                    }\n                }\n            }\n        }\n    }\n\n    $setIndentGuideActive(cell, indentLevel) {\n        var line = this.session.doc.getLine(cell.row);\n        if (line !== \"\") {\n            var childNodes = cell.element.childNodes;\n            if (childNodes) {\n                let node = childNodes[indentLevel - 1];\n                if (node && node.classList && node.classList.contains(\"ace_indent-guide\")) node.classList.add(\n                    \"ace_indent-guide-active\");\n            }\n        }\n    }\n\n    $renderHighlightIndentGuide() {\n        if (!this.$lines) return;\n        var cells = this.$lines.cells;\n        this.$clearActiveIndentGuide();\n        var indentLevel = this.$highlightIndentGuideMarker.indentLevel;\n        if (indentLevel !== 0) {\n            if (this.$highlightIndentGuideMarker.dir === 1) {\n                for (var i = 0; i < cells.length; i++) {\n                    var cell = cells[i];\n                    if (this.$highlightIndentGuideMarker.end && cell.row >= this.$highlightIndentGuideMarker.start\n                        + 1) {\n                        if (cell.row >= this.$highlightIndentGuideMarker.end) break;\n                        this.$setIndentGuideActive(cell, indentLevel);\n                    }\n                }\n            }\n            else {\n                for (var i = cells.length - 1; i >= 0; i--) {\n                    var cell = cells[i];\n                    if (this.$highlightIndentGuideMarker.end && cell.row < this.$highlightIndentGuideMarker.start) {\n                        if (cell.row <= this.$highlightIndentGuideMarker.end) break;\n                        this.$setIndentGuideActive(cell, indentLevel);\n                    }\n                }\n            }\n        }\n    }\n\n    $createLineElement(parent) {\n        var lineEl = this.dom.createElement(\"div\");\n        lineEl.className = \"ace_line\";\n        lineEl.style.height = this.config.lineHeight + \"px\";\n\n        return lineEl;\n    }\n\n    $renderWrappedLine(parent, tokens, splits) {\n        var chars = 0;\n        var split = 0;\n        var splitChars = splits[0];\n        var screenColumn = 0;\n\n        var lineEl = this.$createLineElement();\n        parent.appendChild(lineEl);\n\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                chars = value.length;\n                value = this.renderIndentGuide(lineEl, value, splitChars);\n                if (!value)\n                    continue;\n                chars -= value.length;\n            }\n\n            if (chars + value.length < splitChars) {\n                screenColumn = this.$renderToken(lineEl, screenColumn, token, value);\n                chars += value.length;\n            } else {\n                while (chars + value.length >= splitChars) {\n                    screenColumn = this.$renderToken(\n                        lineEl, screenColumn,\n                        token, value.substring(0, splitChars - chars)\n                    );\n                    value = value.substring(splitChars - chars);\n                    chars = splitChars;\n\n                    lineEl = this.$createLineElement();\n                    parent.appendChild(lineEl);\n\n                    lineEl.appendChild(this.dom.createTextNode(lang.stringRepeat(\"\\xa0\", splits.indent), this.element));\n\n                    split ++;\n                    screenColumn = 0;\n                    splitChars = splits[split] || Number.MAX_VALUE;\n                }\n                if (value.length != 0) {\n                    chars += value.length;\n                    screenColumn = this.$renderToken(\n                        lineEl, screenColumn, token, value\n                    );\n                }\n            }\n        }\n\n        if (splits[splits.length - 1] > this.MAX_LINE_LENGTH)\n            this.$renderOverflowMessage(lineEl, screenColumn, null, \"\", true);\n    }\n\n    $renderSimpleLine(parent, tokens) {\n        var screenColumn = 0;\n\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                value = this.renderIndentGuide(parent, value);\n                if (!value)\n                    continue;\n            }\n            if (screenColumn + value.length > this.MAX_LINE_LENGTH)\n                return this.$renderOverflowMessage(parent, screenColumn, token, value);\n            screenColumn = this.$renderToken(parent, screenColumn, token, value);\n        }\n    }\n\n    $renderOverflowMessage(parent, screenColumn, token, value, hide) {\n        token && this.$renderToken(parent, screenColumn, token,\n            value.slice(0, this.MAX_LINE_LENGTH - screenColumn));\n\n        var overflowEl = this.dom.createElement(\"span\");\n        overflowEl.className = \"ace_inline_button ace_keyword ace_toggle_wrap\";\n        overflowEl.textContent = hide ? \"<hide>\" : \"<click to see more...>\";\n\n        parent.appendChild(overflowEl);\n    }\n\n    // row is either first row of foldline or not in fold\n    $renderLine(parent, row, foldLine) {\n        if (!foldLine && foldLine != false)\n            foldLine = this.session.getFoldLine(row);\n\n        if (foldLine)\n            var tokens = this.$getFoldLineTokens(row, foldLine);\n        else\n            var tokens = this.session.getTokens(row);\n\n        var lastLineEl = parent;\n        if (tokens.length) {\n            var splits = this.session.getRowSplitData(row);\n            if (splits && splits.length) {\n                this.$renderWrappedLine(parent, tokens, splits);\n                var lastLineEl = parent.lastChild;\n            } else {\n                var lastLineEl = parent;\n                if (this.$useLineGroups()) {\n                    lastLineEl = this.$createLineElement();\n                    parent.appendChild(lastLineEl);\n                }\n                this.$renderSimpleLine(lastLineEl, tokens);\n            }\n        } else if (this.$useLineGroups()) {\n            lastLineEl = this.$createLineElement();\n            parent.appendChild(lastLineEl);\n        }\n\n        if (this.showEOL && lastLineEl) {\n            if (foldLine)\n                row = foldLine.end.row;\n\n            var invisibleEl = this.dom.createElement(\"span\");\n            invisibleEl.className = \"ace_invisible ace_invisible_eol\";\n            invisibleEl.textContent = row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR;\n\n            lastLineEl.appendChild(invisibleEl);\n        }\n    }\n\n    /**\n     * @param {number} row\n     * @param {import(\"../../ace-internal\").Ace.FoldLine} foldLine\n     * @return {import(\"../../ace-internal\").Ace.Token[]}\n     */\n    $getFoldLineTokens(row, foldLine) {\n        var session = this.session;\n        var renderTokens = [];\n\n        function addTokens(tokens, from, to) {\n            var idx = 0, col = 0;\n            while ((col + tokens[idx].value.length) < from) {\n                col += tokens[idx].value.length;\n                idx++;\n\n                if (idx == tokens.length)\n                    return;\n            }\n            if (col != from) {\n                var value = tokens[idx].value.substring(from - col);\n                // Check if the token value is longer then the from...to spacing.\n                if (value.length > (to - from))\n                    value = value.substring(0, to - from);\n\n                renderTokens.push({\n                    type: tokens[idx].type,\n                    value: value\n                });\n\n                col = from + value.length;\n                idx += 1;\n            }\n\n            while (col < to && idx < tokens.length) {\n                var value = tokens[idx].value;\n                if (value.length + col > to) {\n                    renderTokens.push({\n                        type: tokens[idx].type,\n                        value: value.substring(0, to - col)\n                    });\n                } else\n                    renderTokens.push(tokens[idx]);\n                col += value.length;\n                idx += 1;\n            }\n        }\n\n        var tokens = session.getTokens(row);\n        foldLine.walk(function(placeholder, row, column, lastColumn, isNewRow) {\n            if (placeholder != null) {\n                renderTokens.push({\n                    type: \"fold\",\n                    value: placeholder\n                });\n            } else {\n                if (isNewRow)\n                    tokens = session.getTokens(row);\n\n                if (tokens.length)\n                    addTokens(tokens, lastColumn, column);\n            }\n        }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);\n\n        return renderTokens;\n    }\n\n    $useLineGroups() {\n        // For the updateLines function to work correctly, it's important that the\n        // child nodes of this.element correspond on a 1-to-1 basis to rows in the\n        // document (as distinct from lines on the screen). For sessions that are\n        // wrapped, this means we need to add a layer to the node hierarchy (tagged\n        // with the class name ace_line_group).\n        return this.session.getUseWrapMode();\n    }\n}\n\nText.prototype.EOF_CHAR = \"\\xB6\";\nText.prototype.EOL_CHAR_LF = \"\\xAC\";\nText.prototype.EOL_CHAR_CRLF = \"\\xa4\";\nText.prototype.EOL_CHAR = Text.prototype.EOL_CHAR_LF;\nText.prototype.TAB_CHAR = \"\\u2014\"; //\"\\u21E5\";\nText.prototype.SPACE_CHAR = \"\\xB7\";\nText.prototype.$padding = 0;\nText.prototype.MAX_LINE_LENGTH = 10000;\nText.prototype.showInvisibles = false;\nText.prototype.showSpaces = false;\nText.prototype.showTabs = false;\nText.prototype.showEOL = false;\nText.prototype.displayIndentGuides = true;\nText.prototype.$highlightIndentGuides = true;\nText.prototype.$tabStrings = [];\nText.prototype.destroy = {};\nText.prototype.onChangeTabSize = Text.prototype.$computeTabString;\n\noop.implement(Text.prototype, EventEmitter);\n\nexports.Text = Text;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL3RleHQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsOENBQThDO0FBQzNELGFBQWEsdUNBQXVDO0FBQ3BEO0FBQ0EsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLFVBQVUsbUJBQU8sQ0FBQywwREFBWTtBQUM5QixXQUFXLG1CQUFPLENBQUMsNERBQWE7QUFDaEMsWUFBWSx3RkFBd0I7QUFDcEMsbUJBQW1CLGtIQUE0QztBQUMvRCxVQUFVLG1GQUF3QjtBQUNsQyxvQkFBb0Isc0dBQWtDOztBQUV0RDtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLElBQUk7QUFDckIsd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdDQUF3QyxhQUFhO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixJQUFJO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxrR0FBa0csT0FBTztBQUN6Rzs7QUFFQTtBQUNBLGdHQUFnRyxPQUFPO0FBQ3ZHOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixTQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDBCQUEwQixRQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0IsZ0JBQWdCLGNBQWMsZ0JBQWdCO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtCQUFrQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsdUJBQXVCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrQkFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QixtQkFBbUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLDJDQUEyQztBQUMxRCxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsWUFBWSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL3RleHQuanM/ODRkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuTGF5ZXJDb25maWd9IExheWVyQ29uZmlnXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICovXG52YXIgb29wID0gcmVxdWlyZShcIi4uL2xpYi9vb3BcIik7XG52YXIgZG9tID0gcmVxdWlyZShcIi4uL2xpYi9kb21cIik7XG52YXIgbGFuZyA9IHJlcXVpcmUoXCIuLi9saWIvbGFuZ1wiKTtcbnZhciBMaW5lcyA9IHJlcXVpcmUoXCIuL2xpbmVzXCIpLkxpbmVzO1xudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoXCIuLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG52YXIgbmxzID0gcmVxdWlyZShcIi4uL2NvbmZpZ1wiKS5ubHM7XG5jb25zdCBpc1RleHRUb2tlbiA9IHJlcXVpcmUoXCIuL3RleHRfdXRpbFwiKS5pc1RleHRUb2tlbjtcblxuY2xhc3MgVGV4dCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50RWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRFbCkge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5kb20uY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNlX2xheWVyIGFjZV90ZXh0LWxheWVyXCI7XG4gICAgICAgIHBhcmVudEVsLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMuJHVwZGF0ZUVvbENoYXIgPSB0aGlzLiR1cGRhdGVFb2xDaGFyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuJGxpbmVzID0gbmV3IExpbmVzKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICAgIFxuICAgICR1cGRhdGVFb2xDaGFyKCkge1xuICAgICAgICB2YXIgZG9jID0gdGhpcy5zZXNzaW9uLmRvYztcbiAgICAgICAgdmFyIHVuaXhNb2RlID0gZG9jLmdldE5ld0xpbmVDaGFyYWN0ZXIoKSA9PSBcIlxcblwiICYmIGRvYy5nZXROZXdMaW5lTW9kZSgpICE9IFwid2luZG93c1wiO1xuICAgICAgICB2YXIgRU9MX0NIQVIgPSB1bml4TW9kZSA/IHRoaXMuRU9MX0NIQVJfTEYgOiB0aGlzLkVPTF9DSEFSX0NSTEY7XG4gICAgICAgIGlmICh0aGlzLkVPTF9DSEFSICE9IEVPTF9DSEFSKSB7XG4gICAgICAgICAgICB0aGlzLkVPTF9DSEFSID0gRU9MX0NIQVI7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwYWRkaW5nXG4gICAgICovXG4gICAgc2V0UGFkZGluZyhwYWRkaW5nKSB7XG4gICAgICAgIHRoaXMuJHBhZGRpbmcgPSBwYWRkaW5nO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubWFyZ2luID0gXCIwIFwiICsgcGFkZGluZyArIFwicHhcIjtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXRMaW5lSGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kZm9udE1ldHJpY3MuJGNoYXJhY3RlclNpemUuaGVpZ2h0IHx8IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXRDaGFyYWN0ZXJXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZvbnRNZXRyaWNzLiRjaGFyYWN0ZXJTaXplLndpZHRoIHx8IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthbnl9IG1lYXN1cmVcbiAgICAgKi9cbiAgICAkc2V0Rm9udE1ldHJpY3MobWVhc3VyZSkge1xuICAgICAgICB0aGlzLiRmb250TWV0cmljcyA9IG1lYXN1cmU7XG4gICAgICAgIHRoaXMuJGZvbnRNZXRyaWNzLm9uKFwiY2hhbmdlQ2hhcmFjdGVyU2l6ZVwiLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAdGhpcyB7VGV4dH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zaWduYWwoXCJjaGFuZ2VDaGFyYWN0ZXJTaXplXCIsIGUpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLiRwb2xsU2l6ZUNoYW5nZXMoKTtcbiAgICB9XG5cbiAgICBjaGVja0ZvclNpemVDaGFuZ2VzKCkge1xuICAgICAgICB0aGlzLiRmb250TWV0cmljcy5jaGVja0ZvclNpemVDaGFuZ2VzKCk7XG4gICAgfVxuICAgICRwb2xsU2l6ZUNoYW5nZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRwb2xsU2l6ZUNoYW5nZXNUaW1lciA9IHRoaXMuJGZvbnRNZXRyaWNzLiRwb2xsU2l6ZUNoYW5nZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uXG4gICAgICovXG4gICAgc2V0U2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgICAgIC8qKkB0eXBlIHtFZGl0U2Vzc2lvbn0qL1xuICAgICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgICAgICBpZiAoc2Vzc2lvbilcbiAgICAgICAgICAgIHRoaXMuJGNvbXB1dGVUYWJTdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2hvd0ludmlzaWJsZXNcbiAgICAgKi9cbiAgICBzZXRTaG93SW52aXNpYmxlcyhzaG93SW52aXNpYmxlcykge1xuICAgICAgICBpZiAodGhpcy5zaG93SW52aXNpYmxlcyA9PSBzaG93SW52aXNpYmxlcylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB0aGlzLnNob3dJbnZpc2libGVzID0gc2hvd0ludmlzaWJsZXM7XG4gICAgICAgIGlmICh0eXBlb2Ygc2hvd0ludmlzaWJsZXMgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5zaG93U3BhY2VzID0gL3RhYi9pLnRlc3Qoc2hvd0ludmlzaWJsZXMpO1xuICAgICAgICAgICAgdGhpcy5zaG93VGFicyA9IC9zcGFjZS9pLnRlc3Qoc2hvd0ludmlzaWJsZXMpO1xuICAgICAgICAgICAgdGhpcy5zaG93RU9MID0gL2VvbC9pLnRlc3Qoc2hvd0ludmlzaWJsZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93U3BhY2VzID0gdGhpcy5zaG93VGFicyA9IHRoaXMuc2hvd0VPTCA9IHNob3dJbnZpc2libGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGNvbXB1dGVUYWJTdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBkaXNwbGF5XG4gICAgICovXG4gICAgc2V0RGlzcGxheUluZGVudEd1aWRlcyhkaXNwbGF5KSB7XG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlJbmRlbnRHdWlkZXMgPT0gZGlzcGxheSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB0aGlzLmRpc3BsYXlJbmRlbnRHdWlkZXMgPSBkaXNwbGF5O1xuICAgICAgICB0aGlzLiRjb21wdXRlVGFiU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGlnaGxpZ2h0XG4gICAgICovXG4gICAgc2V0SGlnaGxpZ2h0SW5kZW50R3VpZGVzKGhpZ2hsaWdodCkge1xuICAgICAgICBpZiAodGhpcy4kaGlnaGxpZ2h0SW5kZW50R3VpZGVzID09PSBoaWdobGlnaHQpIHJldHVybiBmYWxzZTtcblxuICAgICAgICB0aGlzLiRoaWdobGlnaHRJbmRlbnRHdWlkZXMgPSBoaWdobGlnaHQ7XG4gICAgICAgIHJldHVybiBoaWdobGlnaHQ7XG4gICAgfVxuICAgIFxuICAgICRjb21wdXRlVGFiU3RyaW5nKCkge1xuICAgICAgICB2YXIgdGFiU2l6ZSA9IHRoaXMuc2Vzc2lvbi5nZXRUYWJTaXplKCk7XG4gICAgICAgIHRoaXMudGFiU2l6ZSA9IHRhYlNpemU7XG4gICAgICAgIC8qKkB0eXBle2FueX0qL3ZhciB0YWJTdHIgPSB0aGlzLiR0YWJTdHJpbmdzID0gWzBdO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRhYlNpemUgKyAxOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dUYWJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmRvbS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IFwiYWNlX2ludmlzaWJsZSBhY2VfaW52aXNpYmxlX3RhYlwiO1xuICAgICAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBsYW5nLnN0cmluZ1JlcGVhdCh0aGlzLlRBQl9DSEFSLCBpKTtcbiAgICAgICAgICAgICAgICB0YWJTdHIucHVzaChzcGFuKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFiU3RyLnB1c2godGhpcy5kb20uY3JlYXRlVGV4dE5vZGUobGFuZy5zdHJpbmdSZXBlYXQoXCIgXCIsIGkpLCB0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXNwbGF5SW5kZW50R3VpZGVzKSB7XG4gICAgICAgICAgICB0aGlzLiRpbmRlbnRHdWlkZVJlID0gIC9cXHNcXFN8IFxcdHxcXHQgfFxccyQvO1xuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IFwiYWNlX2luZGVudC1ndWlkZVwiO1xuICAgICAgICAgICAgdmFyIHNwYWNlQ2xhc3MgPSB0aGlzLnNob3dTcGFjZXMgPyBcIiBhY2VfaW52aXNpYmxlIGFjZV9pbnZpc2libGVfc3BhY2VcIiA6IFwiXCI7XG4gICAgICAgICAgICB2YXIgc3BhY2VDb250ZW50ID0gdGhpcy5zaG93U3BhY2VzXG4gICAgICAgICAgICAgICAgPyBsYW5nLnN0cmluZ1JlcGVhdCh0aGlzLlNQQUNFX0NIQVIsIHRoaXMudGFiU2l6ZSlcbiAgICAgICAgICAgICAgICA6IGxhbmcuc3RyaW5nUmVwZWF0KFwiIFwiLCB0aGlzLnRhYlNpemUpO1xuXG4gICAgICAgICAgICB2YXIgdGFiQ2xhc3MgPSB0aGlzLnNob3dUYWJzID8gXCIgYWNlX2ludmlzaWJsZSBhY2VfaW52aXNpYmxlX3RhYlwiIDogXCJcIjtcbiAgICAgICAgICAgIHZhciB0YWJDb250ZW50ID0gdGhpcy5zaG93VGFic1xuICAgICAgICAgICAgICAgID8gbGFuZy5zdHJpbmdSZXBlYXQodGhpcy5UQUJfQ0hBUiwgdGhpcy50YWJTaXplKVxuICAgICAgICAgICAgICAgIDogc3BhY2VDb250ZW50O1xuXG4gICAgICAgICAgICB2YXIgc3BhbiA9IHRoaXMuZG9tLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyBzcGFjZUNsYXNzO1xuICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHNwYWNlQ29udGVudDtcbiAgICAgICAgICAgIHRoaXMuJHRhYlN0cmluZ3NbXCIgXCJdID0gc3BhbjtcblxuICAgICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmRvbS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gY2xhc3NOYW1lICsgdGFiQ2xhc3M7XG4gICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gdGFiQ29udGVudDtcbiAgICAgICAgICAgIHRoaXMuJHRhYlN0cmluZ3NbXCJcXHRcIl0gPSBzcGFuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllckNvbmZpZ30gY29uZmlnXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZpcnN0Um93XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxhc3RSb3dcbiAgICAgKi9cbiAgICB1cGRhdGVMaW5lcyhjb25maWcsIGZpcnN0Um93LCBsYXN0Um93KSB7XG4gICAgICAgIC8vIER1ZSB0byB3cmFwIGxpbmUgY2hhbmdlcyB0aGVyZSBjYW4gYmUgbmV3IGxpbmVzIGlmIGUuZy5cbiAgICAgICAgLy8gdGhlIGxpbmUgdG8gdXBkYXRlZCB3cmFwcGVkIGluIHRoZSBtZWFudGltZS5cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxhc3RSb3cgIT0gY29uZmlnLmxhc3RSb3cgfHxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmZpcnN0Um93ICE9IGNvbmZpZy5maXJzdFJvdykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcblxuICAgICAgICB2YXIgZmlyc3QgPSBNYXRoLm1heChmaXJzdFJvdywgY29uZmlnLmZpcnN0Um93KTtcbiAgICAgICAgdmFyIGxhc3QgPSBNYXRoLm1pbihsYXN0Um93LCBjb25maWcubGFzdFJvdyk7XG5cbiAgICAgICAgdmFyIGxpbmVFbGVtZW50cyA9IHRoaXMuZWxlbWVudC5jaGlsZE5vZGVzO1xuICAgICAgICB2YXIgbGluZUVsZW1lbnRzSWR4ID0gMDtcblxuICAgICAgICBmb3IgKHZhciByb3cgPSBjb25maWcuZmlyc3RSb3c7IHJvdyA8IGZpcnN0OyByb3crKykge1xuICAgICAgICAgICAgdmFyIGZvbGRMaW5lID0gdGhpcy5zZXNzaW9uLmdldEZvbGRMaW5lKHJvdyk7XG4gICAgICAgICAgICBpZiAoZm9sZExpbmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9sZExpbmUuY29udGFpbnNSb3coZmlyc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZm9sZExpbmUuc3RhcnQucm93O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb3cgPSBmb2xkTGluZS5lbmQucm93O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmVFbGVtZW50c0lkeCArKztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoZWlnaHRDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIHZhciByb3cgPSBmaXJzdDtcbiAgICAgICAgdmFyIGZvbGRMaW5lID0gdGhpcy5zZXNzaW9uLmdldE5leHRGb2xkTGluZShyb3cpO1xuICAgICAgICB2YXIgZm9sZFN0YXJ0ID0gZm9sZExpbmUgPyBmb2xkTGluZS5zdGFydC5yb3cgOiBJbmZpbml0eTtcblxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHJvdyA+IGZvbGRTdGFydCkge1xuICAgICAgICAgICAgICAgIHJvdyA9IGZvbGRMaW5lLmVuZC5yb3crMTtcbiAgICAgICAgICAgICAgICBmb2xkTGluZSA9IHRoaXMuc2Vzc2lvbi5nZXROZXh0Rm9sZExpbmUocm93LCBmb2xkTGluZSk7XG4gICAgICAgICAgICAgICAgZm9sZFN0YXJ0ID0gZm9sZExpbmUgPyBmb2xkTGluZS5zdGFydC5yb3cgOkluZmluaXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJvdyA+IGxhc3QpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIC8qKkB0eXBle2FueX0qL3ZhciBsaW5lRWxlbWVudCA9IGxpbmVFbGVtZW50c1tsaW5lRWxlbWVudHNJZHgrK107XG4gICAgICAgICAgICBpZiAobGluZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5yZW1vdmVDaGlsZHJlbihsaW5lRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVuZGVyTGluZShcbiAgICAgICAgICAgICAgICAgICAgbGluZUVsZW1lbnQsIHJvdywgcm93ID09IGZvbGRTdGFydCA/IGZvbGRMaW5lIDogZmFsc2VcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKGhlaWdodENoYW5nZWQpXG4gICAgICAgICAgICAgICAgICAgIGxpbmVFbGVtZW50LnN0eWxlLnRvcCA9IHRoaXMuJGxpbmVzLmNvbXB1dGVMaW5lVG9wKHJvdywgY29uZmlnLCB0aGlzLnNlc3Npb24pICsgXCJweFwiO1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IChjb25maWcubGluZUhlaWdodCAqIHRoaXMuc2Vzc2lvbi5nZXRSb3dMZW5ndGgocm93KSkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVFbGVtZW50LnN0eWxlLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0Q2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVFbGVtZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3crKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVpZ2h0Q2hhbmdlZCkge1xuICAgICAgICAgICAgd2hpbGUgKGxpbmVFbGVtZW50c0lkeCA8IHRoaXMuJGxpbmVzLmNlbGxzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBjZWxsID0gdGhpcy4kbGluZXMuY2VsbHNbbGluZUVsZW1lbnRzSWR4KytdO1xuICAgICAgICAgICAgICAgIGNlbGwuZWxlbWVudC5zdHlsZS50b3AgPSB0aGlzLiRsaW5lcy5jb21wdXRlTGluZVRvcChjZWxsLnJvdywgY29uZmlnLCB0aGlzLnNlc3Npb24pICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllckNvbmZpZ30gY29uZmlnXG4gICAgICovXG4gICAgc2Nyb2xsTGluZXMoY29uZmlnKSB7XG4gICAgICAgIHZhciBvbGRDb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG5cbiAgICAgICAgaWYgKHRoaXMuJGxpbmVzLnBhZ2VDaGFuZ2VkKG9sZENvbmZpZywgY29uZmlnKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZShjb25maWcpO1xuXG4gICAgICAgIHRoaXMuJGxpbmVzLm1vdmVDb250YWluZXIoY29uZmlnKTtcblxuICAgICAgICB2YXIgbGFzdFJvdyA9IGNvbmZpZy5sYXN0Um93O1xuICAgICAgICB2YXIgb2xkTGFzdFJvdyA9IG9sZENvbmZpZyA/IG9sZENvbmZpZy5sYXN0Um93IDogLTE7XG5cbiAgICAgICAgaWYgKCFvbGRDb25maWcgfHwgb2xkTGFzdFJvdyA8IGNvbmZpZy5maXJzdFJvdylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZShjb25maWcpO1xuXG4gICAgICAgIGlmIChsYXN0Um93IDwgb2xkQ29uZmlnLmZpcnN0Um93KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKGNvbmZpZyk7XG5cbiAgICAgICAgaWYgKCFvbGRDb25maWcgfHwgb2xkQ29uZmlnLmxhc3RSb3cgPCBjb25maWcuZmlyc3RSb3cpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUoY29uZmlnKTtcblxuICAgICAgICBpZiAoY29uZmlnLmxhc3RSb3cgPCBvbGRDb25maWcuZmlyc3RSb3cpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUoY29uZmlnKTtcblxuICAgICAgICBpZiAob2xkQ29uZmlnLmZpcnN0Um93IDwgY29uZmlnLmZpcnN0Um93KVxuICAgICAgICAgICAgZm9yICh2YXIgcm93PXRoaXMuc2Vzc2lvbi5nZXRGb2xkZWRSb3dDb3VudChvbGRDb25maWcuZmlyc3RSb3csIGNvbmZpZy5maXJzdFJvdyAtIDEpOyByb3c+MDsgcm93LS0pXG4gICAgICAgICAgICAgICAgdGhpcy4kbGluZXMuc2hpZnQoKTtcblxuICAgICAgICBpZiAob2xkQ29uZmlnLmxhc3RSb3cgPiBjb25maWcubGFzdFJvdylcbiAgICAgICAgICAgIGZvciAodmFyIHJvdz10aGlzLnNlc3Npb24uZ2V0Rm9sZGVkUm93Q291bnQoY29uZmlnLmxhc3RSb3cgKyAxLCBvbGRDb25maWcubGFzdFJvdyk7IHJvdz4wOyByb3ctLSlcbiAgICAgICAgICAgICAgICB0aGlzLiRsaW5lcy5wb3AoKTtcblxuICAgICAgICBpZiAoY29uZmlnLmZpcnN0Um93IDwgb2xkQ29uZmlnLmZpcnN0Um93KSB7XG4gICAgICAgICAgICB0aGlzLiRsaW5lcy51bnNoaWZ0KHRoaXMuJHJlbmRlckxpbmVzRnJhZ21lbnQoY29uZmlnLCBjb25maWcuZmlyc3RSb3csIG9sZENvbmZpZy5maXJzdFJvdyAtIDEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcubGFzdFJvdyA+IG9sZENvbmZpZy5sYXN0Um93KSB7XG4gICAgICAgICAgICB0aGlzLiRsaW5lcy5wdXNoKHRoaXMuJHJlbmRlckxpbmVzRnJhZ21lbnQoY29uZmlnLCBvbGRDb25maWcubGFzdFJvdyArIDEsIGNvbmZpZy5sYXN0Um93KSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kaGlnaGxpZ2h0SW5kZW50R3VpZGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheWVyQ29uZmlnfSBjb25maWdcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZmlyc3RSb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGFzdFJvd1xuICAgICAqL1xuICAgICRyZW5kZXJMaW5lc0ZyYWdtZW50KGNvbmZpZywgZmlyc3RSb3csIGxhc3RSb3cpIHtcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gW107XG4gICAgICAgIHZhciByb3cgPSBmaXJzdFJvdztcbiAgICAgICAgdmFyIGZvbGRMaW5lID0gdGhpcy5zZXNzaW9uLmdldE5leHRGb2xkTGluZShyb3cpO1xuICAgICAgICB2YXIgZm9sZFN0YXJ0ID0gZm9sZExpbmUgPyBmb2xkTGluZS5zdGFydC5yb3cgOiBJbmZpbml0eTtcblxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHJvdyA+IGZvbGRTdGFydCkge1xuICAgICAgICAgICAgICAgIHJvdyA9IGZvbGRMaW5lLmVuZC5yb3crMTtcbiAgICAgICAgICAgICAgICBmb2xkTGluZSA9IHRoaXMuc2Vzc2lvbi5nZXROZXh0Rm9sZExpbmUocm93LCBmb2xkTGluZSk7XG4gICAgICAgICAgICAgICAgZm9sZFN0YXJ0ID0gZm9sZExpbmUgPyBmb2xkTGluZS5zdGFydC5yb3cgOiBJbmZpbml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyb3cgPiBsYXN0Um93KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB2YXIgbGluZSA9IHRoaXMuJGxpbmVzLmNyZWF0ZUNlbGwocm93LCBjb25maWcsIHRoaXMuc2Vzc2lvbik7XG5cbiAgICAgICAgICAgIHZhciBsaW5lRWwgPSBsaW5lLmVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmRvbS5yZW1vdmVDaGlsZHJlbihsaW5lRWwpO1xuICAgICAgICAgICAgZG9tLnNldFN0eWxlKGxpbmVFbC5zdHlsZSwgXCJoZWlnaHRcIiwgdGhpcy4kbGluZXMuY29tcHV0ZUxpbmVIZWlnaHQocm93LCBjb25maWcsIHRoaXMuc2Vzc2lvbikgKyBcInB4XCIpO1xuICAgICAgICAgICAgZG9tLnNldFN0eWxlKGxpbmVFbC5zdHlsZSwgXCJ0b3BcIiwgdGhpcy4kbGluZXMuY29tcHV0ZUxpbmVUb3Aocm93LCBjb25maWcsIHRoaXMuc2Vzc2lvbikgKyBcInB4XCIpO1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHRva2VucyBwZXIgbGluZSBhcyB0aGVyZSBtaWdodCBiZSBzb21lIGxpbmVzIGluIGJldHdlZW5cbiAgICAgICAgICAgIC8vIGJlZWluZyBmb2xkZWQuXG4gICAgICAgICAgICB0aGlzLiRyZW5kZXJMaW5lKGxpbmVFbCwgcm93LCByb3cgPT0gZm9sZFN0YXJ0ID8gZm9sZExpbmUgOiBmYWxzZSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLiR1c2VMaW5lR3JvdXBzKCkpIHtcbiAgICAgICAgICAgICAgICBsaW5lRWwuY2xhc3NOYW1lID0gXCJhY2VfbGluZV9ncm91cFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaW5lRWwuY2xhc3NOYW1lID0gXCJhY2VfbGluZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnJhZ21lbnQucHVzaChsaW5lKTtcblxuICAgICAgICAgICAgcm93Kys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYWdtZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TGF5ZXJDb25maWd9IGNvbmZpZ1xuICAgICAqL1xuICAgIHVwZGF0ZShjb25maWcpIHtcbiAgICAgICAgdGhpcy4kbGluZXMubW92ZUNvbnRhaW5lcihjb25maWcpO1xuXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXG4gICAgICAgIHZhciBmaXJzdFJvdyA9IGNvbmZpZy5maXJzdFJvdztcbiAgICAgICAgdmFyIGxhc3RSb3cgPSBjb25maWcubGFzdFJvdztcblxuICAgICAgICB2YXIgbGluZXMgPSB0aGlzLiRsaW5lcztcbiAgICAgICAgd2hpbGUgKGxpbmVzLmdldExlbmd0aCgpKVxuICAgICAgICAgICAgbGluZXMucG9wKCk7XG5cbiAgICAgICAgbGluZXMucHVzaCh0aGlzLiRyZW5kZXJMaW5lc0ZyYWdtZW50KGNvbmZpZywgZmlyc3RSb3csIGxhc3RSb3cpKTtcbiAgICB9XG5cbiAgICAkcmVuZGVyVG9rZW4ocGFyZW50LCBzY3JlZW5Db2x1bW4sIHRva2VuLCB2YWx1ZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciByZSA9IC8oXFx0KXwoICspfChbXFx4MDAtXFx4MWZcXHg4MC1cXHhhMFxceGFkXFx1MTY4MFxcdTE4MEVcXHUyMDAwLVxcdTIwMGZcXHUyMDI4XFx1MjAyOVxcdTIwMkZcXHUyMDVGXFx1RkVGRlxcdUZGRjktXFx1RkZGQ1xcdTIwNjZcXHUyMDY3XFx1MjA2OFxcdTIwMkFcXHUyMDJCXFx1MjAyRFxcdTIwMkVcXHUyMDJDXFx1MjA2OVxcdTIwNjBcXHUyMDYxXFx1MjA2MlxcdTIwNjNcXHUyMDY0XFx1MjA2QVxcdTIwNkJcXHUyMDZCXFx1MjA2Q1xcdTIwNkRcXHUyMDZFXFx1MjA2Rl0rKXwoXFx1MzAwMCl8KFtcXHUxMTAwLVxcdTExNUZcXHUxMUEzLVxcdTExQTdcXHUxMUZBLVxcdTExRkZcXHUyMzI5LVxcdTIzMkFcXHUyRTgwLVxcdTJFOTlcXHUyRTlCLVxcdTJFRjNcXHUyRjAwLVxcdTJGRDVcXHUyRkYwLVxcdTJGRkJcXHUzMDAxLVxcdTMwM0VcXHUzMDQxLVxcdTMwOTZcXHUzMDk5LVxcdTMwRkZcXHUzMTA1LVxcdTMxMkRcXHUzMTMxLVxcdTMxOEVcXHUzMTkwLVxcdTMxQkFcXHUzMUMwLVxcdTMxRTNcXHUzMUYwLVxcdTMyMUVcXHUzMjIwLVxcdTMyNDdcXHUzMjUwLVxcdTMyRkVcXHUzMzAwLVxcdTREQkZcXHU0RTAwLVxcdUE0OENcXHVBNDkwLVxcdUE0QzZcXHVBOTYwLVxcdUE5N0NcXHVBQzAwLVxcdUQ3QTNcXHVEN0IwLVxcdUQ3QzZcXHVEN0NCLVxcdUQ3RkJcXHVGOTAwLVxcdUZBRkZcXHVGRTEwLVxcdUZFMTlcXHVGRTMwLVxcdUZFNTJcXHVGRTU0LVxcdUZFNjZcXHVGRTY4LVxcdUZFNkJcXHVGRjAxLVxcdUZGNjBcXHVGRkUwLVxcdUZGRTZdfFtcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0pL2c7XG5cbiAgICAgICAgdmFyIHZhbHVlRnJhZ21lbnQgPSB0aGlzLmRvbS5jcmVhdGVGcmFnbWVudCh0aGlzLmVsZW1lbnQpO1xuXG4gICAgICAgIHZhciBtO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChtID0gcmUuZXhlYyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhciB0YWIgPSBtWzFdO1xuICAgICAgICAgICAgdmFyIHNpbXBsZVNwYWNlID0gbVsyXTtcbiAgICAgICAgICAgIHZhciBjb250cm9sQ2hhcmFjdGVyID0gbVszXTtcbiAgICAgICAgICAgIHZhciBjamtTcGFjZSA9IG1bNF07XG4gICAgICAgICAgICB2YXIgY2prID0gbVs1XTtcblxuICAgICAgICAgICAgaWYgKCFzZWxmLnNob3dTcGFjZXMgJiYgc2ltcGxlU3BhY2UpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIHZhciBiZWZvcmUgPSBpICE9IG0uaW5kZXggPyB2YWx1ZS5zbGljZShpLCBtLmluZGV4KSA6IFwiXCI7XG5cbiAgICAgICAgICAgIGkgPSBtLmluZGV4ICsgbVswXS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChiZWZvcmUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZUZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuZG9tLmNyZWF0ZVRleHROb2RlKGJlZm9yZSwgdGhpcy5lbGVtZW50KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0YWIpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFiU2l6ZSA9IHNlbGYuc2Vzc2lvbi5nZXRTY3JlZW5UYWJTaXplKHNjcmVlbkNvbHVtbiArIG0uaW5kZXgpO1xuICAgICAgICAgICAgICAgIHZhbHVlRnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2VsZi4kdGFiU3RyaW5nc1t0YWJTaXplXS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgICAgIHNjcmVlbkNvbHVtbiArPSB0YWJTaXplIC0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2ltcGxlU3BhY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5zaG93U3BhY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGFuID0gdGhpcy5kb20uY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJhY2VfaW52aXNpYmxlIGFjZV9pbnZpc2libGVfc3BhY2VcIjtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGxhbmcuc3RyaW5nUmVwZWF0KHNlbGYuU1BBQ0VfQ0hBUiwgc2ltcGxlU3BhY2UubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGcmFnbWVudC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZUZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuZG9tLmNyZWF0ZVRleHROb2RlKHNpbXBsZVNwYWNlLCB0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRyb2xDaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IHRoaXMuZG9tLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJhY2VfaW52aXNpYmxlIGFjZV9pbnZpc2libGVfc3BhY2UgYWNlX2ludmFsaWRcIjtcbiAgICAgICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gbGFuZy5zdHJpbmdSZXBlYXQoc2VsZi5TUEFDRV9DSEFSLCBjb250cm9sQ2hhcmFjdGVyLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdmFsdWVGcmFnbWVudC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2prU3BhY2UpIHtcbiAgICAgICAgICAgICAgICAvLyBVKzMwMDAgaXMgYm90aCBpbnZpc2libGUgQU5EIGZ1bGwtd2lkdGgsIHNvIG11c3QgYmUgaGFuZGxlZCB1bmlxdWVseVxuICAgICAgICAgICAgICAgIHNjcmVlbkNvbHVtbiArPSAxO1xuXG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmRvbS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICBzcGFuLnN0eWxlLndpZHRoID0gKHNlbGYuY29uZmlnLmNoYXJhY3RlcldpZHRoICogMikgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBzZWxmLnNob3dTcGFjZXMgPyBcImFjZV9jamsgYWNlX2ludmlzaWJsZSBhY2VfaW52aXNpYmxlX3NwYWNlXCIgOiBcImFjZV9jamtcIjtcbiAgICAgICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gc2VsZi5zaG93U3BhY2VzID8gc2VsZi5TUEFDRV9DSEFSIDogY2prU3BhY2U7XG4gICAgICAgICAgICAgICAgdmFsdWVGcmFnbWVudC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2prKSB7XG4gICAgICAgICAgICAgICAgc2NyZWVuQ29sdW1uICs9IDE7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmRvbS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICBzcGFuLnN0eWxlLndpZHRoID0gKHNlbGYuY29uZmlnLmNoYXJhY3RlcldpZHRoICogMikgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBcImFjZV9jamtcIjtcbiAgICAgICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gY2prO1xuICAgICAgICAgICAgICAgIHZhbHVlRnJhZ21lbnQuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YWx1ZUZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuZG9tLmNyZWF0ZVRleHROb2RlKGkgPyB2YWx1ZS5zbGljZShpKSA6IHZhbHVlLCB0aGlzLmVsZW1lbnQpKTtcblxuICAgICAgICBpZiAoIWlzVGV4dFRva2VuKHRva2VuLnR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgY2xhc3NlcyA9IFwiYWNlX1wiICsgdG9rZW4udHlwZS5yZXBsYWNlKC9cXC4vZywgXCIgYWNlX1wiKTtcbiAgICAgICAgICAgIHZhciBzcGFuID0gdGhpcy5kb20uY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PSBcImZvbGRcIil7XG4gICAgICAgICAgICAgICAgc3Bhbi5zdHlsZS53aWR0aCA9ICh0b2tlbi52YWx1ZS5sZW5ndGggKiB0aGlzLmNvbmZpZy5jaGFyYWN0ZXJXaWR0aCkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBubHMoXCJpbmxpbmUtZm9sZC5jbG9zZWQudGl0bGVcIiwgXCJVbmZvbGQgY29kZVwiKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gY2xhc3NlcztcbiAgICAgICAgICAgIHNwYW4uYXBwZW5kQ2hpbGQodmFsdWVGcmFnbWVudCk7XG5cbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh2YWx1ZUZyYWdtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzY3JlZW5Db2x1bW4gKyB2YWx1ZS5sZW5ndGg7XG4gICAgfVxuXG4gICAgcmVuZGVySW5kZW50R3VpZGUocGFyZW50LCB2YWx1ZSwgbWF4KSB7XG4gICAgICAgIHZhciBjb2xzID0gdmFsdWUuc2VhcmNoKHRoaXMuJGluZGVudEd1aWRlUmUpO1xuICAgICAgICBpZiAoY29scyA8PSAwIHx8IGNvbHMgPj0gbWF4KVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBpZiAodmFsdWVbMF0gPT0gXCIgXCIpIHtcbiAgICAgICAgICAgIGNvbHMgLT0gY29scyAlIHRoaXMudGFiU2l6ZTtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IGNvbHMvdGhpcy50YWJTaXplO1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy4kdGFiU3RyaW5nc1tcIiBcIl0uY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGhpZ2hsaWdodEluZGVudEd1aWRlKCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc3Vic3RyKGNvbHMpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlWzBdID09IFwiXFx0XCIpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxjb2xzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy4kdGFiU3RyaW5nc1tcIlxcdFwiXS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kaGlnaGxpZ2h0SW5kZW50R3VpZGUoKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5zdWJzdHIoY29scyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kaGlnaGxpZ2h0SW5kZW50R3VpZGUoKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgICRoaWdobGlnaHRJbmRlbnRHdWlkZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiRoaWdobGlnaHRJbmRlbnRHdWlkZXMgfHwgIXRoaXMuZGlzcGxheUluZGVudEd1aWRlcykgcmV0dXJuO1xuICAgICAgICAvKipAdHlwZSB7eyBpbmRlbnRMZXZlbD86IG51bWJlcjsgc3RhcnQ/OiBudW1iZXI7IGVuZD86IG51bWJlcjsgZGlyPzogbnVtYmVyOyB9fSovXG4gICAgICAgIHRoaXMuJGhpZ2hsaWdodEluZGVudEd1aWRlTWFya2VyID0ge1xuICAgICAgICAgICAgaW5kZW50TGV2ZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0YXJ0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGRpcjogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIHZhciBsaW5lcyA9IHRoaXMuc2Vzc2lvbi5kb2MuJGxpbmVzO1xuICAgICAgICBpZiAoIWxpbmVzKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuc2Vzc2lvbi5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCk7XG4gICAgICAgIHZhciBpbml0aWFsSW5kZW50ID0gL15cXHMqLy5leGVjKHRoaXMuc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93KSlbMF0ubGVuZ3RoO1xuICAgICAgICB2YXIgZWxlbWVudEluZGVudExldmVsID0gTWF0aC5mbG9vcihpbml0aWFsSW5kZW50IC8gdGhpcy50YWJTaXplKTtcbiAgICAgICAgdGhpcy4kaGlnaGxpZ2h0SW5kZW50R3VpZGVNYXJrZXIgPSB7XG4gICAgICAgICAgICBpbmRlbnRMZXZlbDogZWxlbWVudEluZGVudExldmVsLFxuICAgICAgICAgICAgc3RhcnQ6IGN1cnNvci5yb3dcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYnJhY2tldEhpZ2hsaWdodCA9IHRoaXMuc2Vzc2lvbi4kYnJhY2tldEhpZ2hsaWdodDtcbiAgICAgICAgaWYgKGJyYWNrZXRIaWdobGlnaHQpIHtcbiAgICAgICAgICAgIHZhciByYW5nZXMgPSB0aGlzLnNlc3Npb24uJGJyYWNrZXRIaWdobGlnaHQucmFuZ2VzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLnJvdyAhPT0gcmFuZ2VzW2ldLnN0YXJ0LnJvdykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRoaWdobGlnaHRJbmRlbnRHdWlkZU1hcmtlci5lbmQgPSByYW5nZXNbaV0uc3RhcnQucm93O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLnJvdyA+IHJhbmdlc1tpXS5zdGFydC5yb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGhpZ2hsaWdodEluZGVudEd1aWRlTWFya2VyLmRpciA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kaGlnaGxpZ2h0SW5kZW50R3VpZGVNYXJrZXIuZGlyID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuJGhpZ2hsaWdodEluZGVudEd1aWRlTWFya2VyLmVuZCkge1xuICAgICAgICAgICAgaWYgKGxpbmVzW2N1cnNvci5yb3ddICE9PSAnJyAmJiBjdXJzb3IuY29sdW1uID09PSBsaW5lc1tjdXJzb3Iucm93XS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRoaWdobGlnaHRJbmRlbnRHdWlkZU1hcmtlci5kaXIgPSAxO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjdXJzb3Iucm93ICsgMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lID0gbGluZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZW50ID0gL15cXHMqLy5leGVjKGxpbmUpWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRoaWdobGlnaHRJbmRlbnRHdWlkZU1hcmtlci5lbmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRlbnQgPD0gaW5pdGlhbEluZGVudCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRyZW5kZXJIaWdobGlnaHRJbmRlbnRHdWlkZSgpO1xuICAgIH1cblxuICAgICRjbGVhckFjdGl2ZUluZGVudEd1aWRlKCkge1xuICAgICAgICB2YXIgY2VsbHMgPSB0aGlzLiRsaW5lcy5jZWxscztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNlbGwgPSBjZWxsc1tpXTtcbiAgICAgICAgICAgIHZhciBjaGlsZE5vZGVzID0gY2VsbC5lbGVtZW50LmNoaWxkTm9kZXM7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaGlsZE5vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZE5vZGVzW2pdLmNsYXNzTGlzdCAmJiBjaGlsZE5vZGVzW2pdLmNsYXNzTGlzdC5jb250YWlucyhcImFjZV9pbmRlbnQtZ3VpZGUtYWN0aXZlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGVzW2pdLmNsYXNzTGlzdC5yZW1vdmUoXCJhY2VfaW5kZW50LWd1aWRlLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNldEluZGVudEd1aWRlQWN0aXZlKGNlbGwsIGluZGVudExldmVsKSB7XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5zZXNzaW9uLmRvYy5nZXRMaW5lKGNlbGwucm93KTtcbiAgICAgICAgaWYgKGxpbmUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHZhciBjaGlsZE5vZGVzID0gY2VsbC5lbGVtZW50LmNoaWxkTm9kZXM7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgICAgIGxldCBub2RlID0gY2hpbGROb2Rlc1tpbmRlbnRMZXZlbCAtIDFdO1xuICAgICAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUuY2xhc3NMaXN0ICYmIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWNlX2luZGVudC1ndWlkZVwiKSkgbm9kZS5jbGFzc0xpc3QuYWRkKFxuICAgICAgICAgICAgICAgICAgICBcImFjZV9pbmRlbnQtZ3VpZGUtYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHJlbmRlckhpZ2hsaWdodEluZGVudEd1aWRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuJGxpbmVzKSByZXR1cm47XG4gICAgICAgIHZhciBjZWxscyA9IHRoaXMuJGxpbmVzLmNlbGxzO1xuICAgICAgICB0aGlzLiRjbGVhckFjdGl2ZUluZGVudEd1aWRlKCk7XG4gICAgICAgIHZhciBpbmRlbnRMZXZlbCA9IHRoaXMuJGhpZ2hsaWdodEluZGVudEd1aWRlTWFya2VyLmluZGVudExldmVsO1xuICAgICAgICBpZiAoaW5kZW50TGV2ZWwgIT09IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRoaWdobGlnaHRJbmRlbnRHdWlkZU1hcmtlci5kaXIgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNlbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gY2VsbHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiRoaWdobGlnaHRJbmRlbnRHdWlkZU1hcmtlci5lbmQgJiYgY2VsbC5yb3cgPj0gdGhpcy4kaGlnaGxpZ2h0SW5kZW50R3VpZGVNYXJrZXIuc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICsgMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGwucm93ID49IHRoaXMuJGhpZ2hsaWdodEluZGVudEd1aWRlTWFya2VyLmVuZCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXRJbmRlbnRHdWlkZUFjdGl2ZShjZWxsLCBpbmRlbnRMZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gY2VsbHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBjZWxsc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJGhpZ2hsaWdodEluZGVudEd1aWRlTWFya2VyLmVuZCAmJiBjZWxsLnJvdyA8IHRoaXMuJGhpZ2hsaWdodEluZGVudEd1aWRlTWFya2VyLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbC5yb3cgPD0gdGhpcy4kaGlnaGxpZ2h0SW5kZW50R3VpZGVNYXJrZXIuZW5kKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldEluZGVudEd1aWRlQWN0aXZlKGNlbGwsIGluZGVudExldmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgICRjcmVhdGVMaW5lRWxlbWVudChwYXJlbnQpIHtcbiAgICAgICAgdmFyIGxpbmVFbCA9IHRoaXMuZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGxpbmVFbC5jbGFzc05hbWUgPSBcImFjZV9saW5lXCI7XG4gICAgICAgIGxpbmVFbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbmZpZy5saW5lSGVpZ2h0ICsgXCJweFwiO1xuXG4gICAgICAgIHJldHVybiBsaW5lRWw7XG4gICAgfVxuXG4gICAgJHJlbmRlcldyYXBwZWRMaW5lKHBhcmVudCwgdG9rZW5zLCBzcGxpdHMpIHtcbiAgICAgICAgdmFyIGNoYXJzID0gMDtcbiAgICAgICAgdmFyIHNwbGl0ID0gMDtcbiAgICAgICAgdmFyIHNwbGl0Q2hhcnMgPSBzcGxpdHNbMF07XG4gICAgICAgIHZhciBzY3JlZW5Db2x1bW4gPSAwO1xuXG4gICAgICAgIHZhciBsaW5lRWwgPSB0aGlzLiRjcmVhdGVMaW5lRWxlbWVudCgpO1xuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQobGluZUVsKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdG9rZW4udmFsdWU7XG4gICAgICAgICAgICBpZiAoaSA9PSAwICYmIHRoaXMuZGlzcGxheUluZGVudEd1aWRlcykge1xuICAgICAgICAgICAgICAgIGNoYXJzID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5yZW5kZXJJbmRlbnRHdWlkZShsaW5lRWwsIHZhbHVlLCBzcGxpdENoYXJzKTtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjaGFycyAtPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjaGFycyArIHZhbHVlLmxlbmd0aCA8IHNwbGl0Q2hhcnMpIHtcbiAgICAgICAgICAgICAgICBzY3JlZW5Db2x1bW4gPSB0aGlzLiRyZW5kZXJUb2tlbihsaW5lRWwsIHNjcmVlbkNvbHVtbiwgdG9rZW4sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBjaGFycyArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlIChjaGFycyArIHZhbHVlLmxlbmd0aCA+PSBzcGxpdENoYXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbkNvbHVtbiA9IHRoaXMuJHJlbmRlclRva2VuKFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUVsLCBzY3JlZW5Db2x1bW4sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiwgdmFsdWUuc3Vic3RyaW5nKDAsIHNwbGl0Q2hhcnMgLSBjaGFycylcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoc3BsaXRDaGFycyAtIGNoYXJzKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnMgPSBzcGxpdENoYXJzO1xuXG4gICAgICAgICAgICAgICAgICAgIGxpbmVFbCA9IHRoaXMuJGNyZWF0ZUxpbmVFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChsaW5lRWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxpbmVFbC5hcHBlbmRDaGlsZCh0aGlzLmRvbS5jcmVhdGVUZXh0Tm9kZShsYW5nLnN0cmluZ1JlcGVhdChcIlxceGEwXCIsIHNwbGl0cy5pbmRlbnQpLCB0aGlzLmVsZW1lbnQpKTtcblxuICAgICAgICAgICAgICAgICAgICBzcGxpdCArKztcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuQ29sdW1uID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc3BsaXRDaGFycyA9IHNwbGl0c1tzcGxpdF0gfHwgTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJzICs9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuQ29sdW1uID0gdGhpcy4kcmVuZGVyVG9rZW4oXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lRWwsIHNjcmVlbkNvbHVtbiwgdG9rZW4sIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNwbGl0c1tzcGxpdHMubGVuZ3RoIC0gMV0gPiB0aGlzLk1BWF9MSU5FX0xFTkdUSClcbiAgICAgICAgICAgIHRoaXMuJHJlbmRlck92ZXJmbG93TWVzc2FnZShsaW5lRWwsIHNjcmVlbkNvbHVtbiwgbnVsbCwgXCJcIiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgJHJlbmRlclNpbXBsZUxpbmUocGFyZW50LCB0b2tlbnMpIHtcbiAgICAgICAgdmFyIHNjcmVlbkNvbHVtbiA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuICAgICAgICAgICAgaWYgKGkgPT0gMCAmJiB0aGlzLmRpc3BsYXlJbmRlbnRHdWlkZXMpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucmVuZGVySW5kZW50R3VpZGUocGFyZW50LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2NyZWVuQ29sdW1uICsgdmFsdWUubGVuZ3RoID4gdGhpcy5NQVhfTElORV9MRU5HVEgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJlbmRlck92ZXJmbG93TWVzc2FnZShwYXJlbnQsIHNjcmVlbkNvbHVtbiwgdG9rZW4sIHZhbHVlKTtcbiAgICAgICAgICAgIHNjcmVlbkNvbHVtbiA9IHRoaXMuJHJlbmRlclRva2VuKHBhcmVudCwgc2NyZWVuQ29sdW1uLCB0b2tlbiwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHJlbmRlck92ZXJmbG93TWVzc2FnZShwYXJlbnQsIHNjcmVlbkNvbHVtbiwgdG9rZW4sIHZhbHVlLCBoaWRlKSB7XG4gICAgICAgIHRva2VuICYmIHRoaXMuJHJlbmRlclRva2VuKHBhcmVudCwgc2NyZWVuQ29sdW1uLCB0b2tlbixcbiAgICAgICAgICAgIHZhbHVlLnNsaWNlKDAsIHRoaXMuTUFYX0xJTkVfTEVOR1RIIC0gc2NyZWVuQ29sdW1uKSk7XG5cbiAgICAgICAgdmFyIG92ZXJmbG93RWwgPSB0aGlzLmRvbS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgb3ZlcmZsb3dFbC5jbGFzc05hbWUgPSBcImFjZV9pbmxpbmVfYnV0dG9uIGFjZV9rZXl3b3JkIGFjZV90b2dnbGVfd3JhcFwiO1xuICAgICAgICBvdmVyZmxvd0VsLnRleHRDb250ZW50ID0gaGlkZSA/IFwiPGhpZGU+XCIgOiBcIjxjbGljayB0byBzZWUgbW9yZS4uLj5cIjtcblxuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQob3ZlcmZsb3dFbCk7XG4gICAgfVxuXG4gICAgLy8gcm93IGlzIGVpdGhlciBmaXJzdCByb3cgb2YgZm9sZGxpbmUgb3Igbm90IGluIGZvbGRcbiAgICAkcmVuZGVyTGluZShwYXJlbnQsIHJvdywgZm9sZExpbmUpIHtcbiAgICAgICAgaWYgKCFmb2xkTGluZSAmJiBmb2xkTGluZSAhPSBmYWxzZSlcbiAgICAgICAgICAgIGZvbGRMaW5lID0gdGhpcy5zZXNzaW9uLmdldEZvbGRMaW5lKHJvdyk7XG5cbiAgICAgICAgaWYgKGZvbGRMaW5lKVxuICAgICAgICAgICAgdmFyIHRva2VucyA9IHRoaXMuJGdldEZvbGRMaW5lVG9rZW5zKHJvdywgZm9sZExpbmUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB2YXIgdG9rZW5zID0gdGhpcy5zZXNzaW9uLmdldFRva2Vucyhyb3cpO1xuXG4gICAgICAgIHZhciBsYXN0TGluZUVsID0gcGFyZW50O1xuICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHNwbGl0cyA9IHRoaXMuc2Vzc2lvbi5nZXRSb3dTcGxpdERhdGEocm93KTtcbiAgICAgICAgICAgIGlmIChzcGxpdHMgJiYgc3BsaXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHJlbmRlcldyYXBwZWRMaW5lKHBhcmVudCwgdG9rZW5zLCBzcGxpdHMpO1xuICAgICAgICAgICAgICAgIHZhciBsYXN0TGluZUVsID0gcGFyZW50Lmxhc3RDaGlsZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGxhc3RMaW5lRWwgPSBwYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJHVzZUxpbmVHcm91cHMoKSkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0TGluZUVsID0gdGhpcy4kY3JlYXRlTGluZUVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGxhc3RMaW5lRWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLiRyZW5kZXJTaW1wbGVMaW5lKGxhc3RMaW5lRWwsIHRva2Vucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy4kdXNlTGluZUdyb3VwcygpKSB7XG4gICAgICAgICAgICBsYXN0TGluZUVsID0gdGhpcy4kY3JlYXRlTGluZUVsZW1lbnQoKTtcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChsYXN0TGluZUVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNob3dFT0wgJiYgbGFzdExpbmVFbCkge1xuICAgICAgICAgICAgaWYgKGZvbGRMaW5lKVxuICAgICAgICAgICAgICAgIHJvdyA9IGZvbGRMaW5lLmVuZC5yb3c7XG5cbiAgICAgICAgICAgIHZhciBpbnZpc2libGVFbCA9IHRoaXMuZG9tLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgaW52aXNpYmxlRWwuY2xhc3NOYW1lID0gXCJhY2VfaW52aXNpYmxlIGFjZV9pbnZpc2libGVfZW9sXCI7XG4gICAgICAgICAgICBpbnZpc2libGVFbC50ZXh0Q29udGVudCA9IHJvdyA9PSB0aGlzLnNlc3Npb24uZ2V0TGVuZ3RoKCkgLSAxID8gdGhpcy5FT0ZfQ0hBUiA6IHRoaXMuRU9MX0NIQVI7XG5cbiAgICAgICAgICAgIGxhc3RMaW5lRWwuYXBwZW5kQ2hpbGQoaW52aXNpYmxlRWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5Gb2xkTGluZX0gZm9sZExpbmVcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLlRva2VuW119XG4gICAgICovXG4gICAgJGdldEZvbGRMaW5lVG9rZW5zKHJvdywgZm9sZExpbmUpIHtcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIHZhciByZW5kZXJUb2tlbnMgPSBbXTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRUb2tlbnModG9rZW5zLCBmcm9tLCB0bykge1xuICAgICAgICAgICAgdmFyIGlkeCA9IDAsIGNvbCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoKGNvbCArIHRva2Vuc1tpZHhdLnZhbHVlLmxlbmd0aCkgPCBmcm9tKSB7XG4gICAgICAgICAgICAgICAgY29sICs9IHRva2Vuc1tpZHhdLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZHgrKztcblxuICAgICAgICAgICAgICAgIGlmIChpZHggPT0gdG9rZW5zLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbCAhPSBmcm9tKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdG9rZW5zW2lkeF0udmFsdWUuc3Vic3RyaW5nKGZyb20gLSBjb2wpO1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB0b2tlbiB2YWx1ZSBpcyBsb25nZXIgdGhlbiB0aGUgZnJvbS4uLnRvIHNwYWNpbmcuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+ICh0byAtIGZyb20pKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygwLCB0byAtIGZyb20pO1xuXG4gICAgICAgICAgICAgICAgcmVuZGVyVG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0b2tlbnNbaWR4XS50eXBlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbCA9IGZyb20gKyB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdoaWxlIChjb2wgPCB0byAmJiBpZHggPCB0b2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdG9rZW5zW2lkeF0udmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCArIGNvbCA+IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRva2Vuc1tpZHhdLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUuc3Vic3RyaW5nKDAsIHRvIC0gY29sKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyVG9rZW5zLnB1c2godG9rZW5zW2lkeF0pO1xuICAgICAgICAgICAgICAgIGNvbCArPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9rZW5zID0gc2Vzc2lvbi5nZXRUb2tlbnMocm93KTtcbiAgICAgICAgZm9sZExpbmUud2FsayhmdW5jdGlvbihwbGFjZWhvbGRlciwgcm93LCBjb2x1bW4sIGxhc3RDb2x1bW4sIGlzTmV3Um93KSB7XG4gICAgICAgICAgICBpZiAocGxhY2Vob2xkZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlbmRlclRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmb2xkXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOZXdSb3cpXG4gICAgICAgICAgICAgICAgICAgIHRva2VucyA9IHNlc3Npb24uZ2V0VG9rZW5zKHJvdyk7XG5cbiAgICAgICAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgYWRkVG9rZW5zKHRva2VucywgbGFzdENvbHVtbiwgY29sdW1uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZm9sZExpbmUuZW5kLnJvdywgdGhpcy5zZXNzaW9uLmdldExpbmUoZm9sZExpbmUuZW5kLnJvdykubGVuZ3RoKTtcblxuICAgICAgICByZXR1cm4gcmVuZGVyVG9rZW5zO1xuICAgIH1cblxuICAgICR1c2VMaW5lR3JvdXBzKCkge1xuICAgICAgICAvLyBGb3IgdGhlIHVwZGF0ZUxpbmVzIGZ1bmN0aW9uIHRvIHdvcmsgY29ycmVjdGx5LCBpdCdzIGltcG9ydGFudCB0aGF0IHRoZVxuICAgICAgICAvLyBjaGlsZCBub2RlcyBvZiB0aGlzLmVsZW1lbnQgY29ycmVzcG9uZCBvbiBhIDEtdG8tMSBiYXNpcyB0byByb3dzIGluIHRoZVxuICAgICAgICAvLyBkb2N1bWVudCAoYXMgZGlzdGluY3QgZnJvbSBsaW5lcyBvbiB0aGUgc2NyZWVuKS4gRm9yIHNlc3Npb25zIHRoYXQgYXJlXG4gICAgICAgIC8vIHdyYXBwZWQsIHRoaXMgbWVhbnMgd2UgbmVlZCB0byBhZGQgYSBsYXllciB0byB0aGUgbm9kZSBoaWVyYXJjaHkgKHRhZ2dlZFxuICAgICAgICAvLyB3aXRoIHRoZSBjbGFzcyBuYW1lIGFjZV9saW5lX2dyb3VwKS5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5nZXRVc2VXcmFwTW9kZSgpO1xuICAgIH1cbn1cblxuVGV4dC5wcm90b3R5cGUuRU9GX0NIQVIgPSBcIlxceEI2XCI7XG5UZXh0LnByb3RvdHlwZS5FT0xfQ0hBUl9MRiA9IFwiXFx4QUNcIjtcblRleHQucHJvdG90eXBlLkVPTF9DSEFSX0NSTEYgPSBcIlxceGE0XCI7XG5UZXh0LnByb3RvdHlwZS5FT0xfQ0hBUiA9IFRleHQucHJvdG90eXBlLkVPTF9DSEFSX0xGO1xuVGV4dC5wcm90b3R5cGUuVEFCX0NIQVIgPSBcIlxcdTIwMTRcIjsgLy9cIlxcdTIxRTVcIjtcblRleHQucHJvdG90eXBlLlNQQUNFX0NIQVIgPSBcIlxceEI3XCI7XG5UZXh0LnByb3RvdHlwZS4kcGFkZGluZyA9IDA7XG5UZXh0LnByb3RvdHlwZS5NQVhfTElORV9MRU5HVEggPSAxMDAwMDtcblRleHQucHJvdG90eXBlLnNob3dJbnZpc2libGVzID0gZmFsc2U7XG5UZXh0LnByb3RvdHlwZS5zaG93U3BhY2VzID0gZmFsc2U7XG5UZXh0LnByb3RvdHlwZS5zaG93VGFicyA9IGZhbHNlO1xuVGV4dC5wcm90b3R5cGUuc2hvd0VPTCA9IGZhbHNlO1xuVGV4dC5wcm90b3R5cGUuZGlzcGxheUluZGVudEd1aWRlcyA9IHRydWU7XG5UZXh0LnByb3RvdHlwZS4kaGlnaGxpZ2h0SW5kZW50R3VpZGVzID0gdHJ1ZTtcblRleHQucHJvdG90eXBlLiR0YWJTdHJpbmdzID0gW107XG5UZXh0LnByb3RvdHlwZS5kZXN0cm95ID0ge307XG5UZXh0LnByb3RvdHlwZS5vbkNoYW5nZVRhYlNpemUgPSBUZXh0LnByb3RvdHlwZS4kY29tcHV0ZVRhYlN0cmluZztcblxub29wLmltcGxlbWVudChUZXh0LnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyKTtcblxuZXhwb3J0cy5UZXh0ID0gVGV4dDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/layer/text.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/layer/text_util.js":
/*!******************************************************!*\
  !*** ./node_modules/ace-code/src/layer/text_util.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("// Tokens for which Ace just uses a simple TextNode and does not add any special className.\nconst textTokens = new Set([\"text\", \"rparen\", \"lparen\"]);\n\nexports.isTextToken = function(tokenType) {\n    return textTokens.has(tokenType);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xheWVyL3RleHRfdXRpbC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBLG1CQUFtQjtBQUNuQjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbGF5ZXIvdGV4dF91dGlsLmpzPzU5YjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVG9rZW5zIGZvciB3aGljaCBBY2UganVzdCB1c2VzIGEgc2ltcGxlIFRleHROb2RlIGFuZCBkb2VzIG5vdCBhZGQgYW55IHNwZWNpYWwgY2xhc3NOYW1lLlxuY29uc3QgdGV4dFRva2VucyA9IG5ldyBTZXQoW1widGV4dFwiLCBcInJwYXJlblwiLCBcImxwYXJlblwiXSk7XG5cbmV4cG9ydHMuaXNUZXh0VG9rZW4gPSBmdW5jdGlvbih0b2tlblR5cGUpIHtcbiAgICByZXR1cm4gdGV4dFRva2Vucy5oYXModG9rZW5UeXBlKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/layer/text_util.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/app_config.js":
/*!*****************************************************!*\
  !*** ./node_modules/ace-code/src/lib/app_config.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\"no use strict\";\nvar oop = __webpack_require__(/*! ./oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar EventEmitter = (__webpack_require__(/*! ./event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nconst reportError = (__webpack_require__(/*! ./report_error */ \"./node_modules/ace-code/src/lib/report_error.js\").reportError);\nconst defaultEnglishMessages = (__webpack_require__(/*! ./default_english_messages */ \"./node_modules/ace-code/src/lib/default_english_messages.js\").defaultEnglishMessages);\n\nvar optionsProvider = {\n    setOptions: function(optList) {\n        Object.keys(optList).forEach(function(key) {\n            this.setOption(key, optList[key]);\n        }, this);\n    },\n    getOptions: function(optionNames) {\n        var result = {};\n        if (!optionNames) {\n            var options = this.$options;\n            optionNames = Object.keys(options).filter(function(key) {\n                return !options[key].hidden;\n            });\n        } else if (!Array.isArray(optionNames)) {\n            result = optionNames;\n            optionNames = Object.keys(result);\n        }\n        optionNames.forEach(function(key) {\n            result[key] = this.getOption(key);\n        }, this);\n        return result;\n    },\n    setOption: function(name, value) {\n        if (this[\"$\" + name] === value)\n            return;\n        //@ts-ignore\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);\n\n        if (!opt.handlesSet)\n            this[\"$\" + name] = value;\n        if (opt && opt.set)\n            opt.set.call(this, value);\n    },\n    getOption: function(name) {\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);\n        return opt && opt.get ? opt.get.call(this) : this[\"$\" + name];\n    }\n};\n\nfunction warn(message) {\n    if (typeof console != \"undefined\" && console.warn)\n        console.warn.apply(console, arguments);\n}\n\nvar messages;\nvar nlsPlaceholders;\n\nclass AppConfig {\n    constructor() {\n            this.$defaultOptions = {};\n            messages = defaultEnglishMessages;\n            nlsPlaceholders = \"dollarSigns\";\n        }\n\n    /**\n     * @param {Object} obj\n     * @param {string} path\n     * @param {{ [key: string]: any }} options\n     * @returns {import(\"../../ace-internal\").Ace.AppConfig}\n     */\n    defineOptions(obj, path, options) {\n        if (!obj.$options)\n            this.$defaultOptions[path] = obj.$options = {};\n\n        Object.keys(options).forEach(function(key) {\n            var opt = options[key];\n            if (typeof opt == \"string\")\n                opt = {forwardTo: opt};\n\n            opt.name || (opt.name = key);\n            obj.$options[opt.name] = opt;\n            if (\"initialValue\" in opt)\n                obj[\"$\" + opt.name] = opt.initialValue;\n        });\n\n        // implement option provider interface\n        oop.implement(obj, optionsProvider);\n\n        return this;\n    }\n\n    /**\n     * @param {Object} obj\n     */\n    resetOptions(obj) {\n        Object.keys(obj.$options).forEach(function(key) {\n            var opt = obj.$options[key];\n            if (\"value\" in opt)\n                obj.setOption(key, opt.value);\n        });\n    }\n\n    /**\n     * @param {string} path\n     * @param {string} name\n     * @param {any} value\n     */\n    setDefaultValue(path, name, value) {\n        if (!path) {\n            for (path in this.$defaultOptions)\n                if (this.$defaultOptions[path][name])\n                    break;\n            if (!this.$defaultOptions[path][name])\n                return false;\n        }\n        var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {});\n        if (opts[name]) {\n            if (opts.forwardTo)\n                this.setDefaultValue(opts.forwardTo, name, value);\n            else\n                opts[name].value = value;\n        }\n    }\n\n    /**\n     * @param {string} path\n     * @param {{ [key: string]: any; }} optionHash\n     */\n    setDefaultValues(path, optionHash) {\n        Object.keys(optionHash).forEach(function(key) {\n            this.setDefaultValue(path, key, optionHash[key]);\n        }, this);\n    }\n\n    /**\n     * @param {any} value\n     * @param {{placeholders?: \"dollarSigns\" | \"curlyBrackets\"}} [options]\n     */\n    setMessages(value, options) {\n        messages = value;\n        if (options && options.placeholders) {\n            nlsPlaceholders = options.placeholders;\n        }\n    }\n\n    /**\n     * @param {string} key\n     * @param {string} defaultString\n     * @param {{ [x: string]: any; }} [params]\n     */\n    nls(key, defaultString, params) {\n        if (!messages[key])  {\n            warn(\"No message found for the key '\" + key + \"' in the provided messages, trying to find a translation for the default string '\" + defaultString + \"'.\");\n            if (!messages[defaultString]) {\n                warn(\"No message found for the default string '\" + defaultString + \"' in the provided messages. Falling back to the default English message.\");\n            }\n        }\n\n        var translated = messages[key] || messages[defaultString] || defaultString;\n        if (params) {\n            // We support both $n or {n} as placeholder indicators in the provided translated strings\n            if (nlsPlaceholders === \"dollarSigns\") {\n                // Replace $n with the nth element in params\n                translated = translated.replace(/\\$(\\$|[\\d]+)/g, function(_, dollarMatch) {\n                    if (dollarMatch == \"$\") return \"$\";\n                    return params[dollarMatch];\n                });\n            }\n            if (nlsPlaceholders === \"curlyBrackets\") {\n                // Replace {n} with the nth element in params\n                translated = translated.replace(/\\{([^\\}]+)\\}/g, function(_, curlyBracketMatch) {\n                    return params[curlyBracketMatch];\n                });\n            }\n        }\n        return translated;\n    }\n}\nAppConfig.prototype.warn = warn;\nAppConfig.prototype.reportError = reportError;\n\n// module loading\noop.implement(AppConfig.prototype, EventEmitter);\n\nexports.AppConfig = AppConfig;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9hcHBfY29uZmlnLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsVUFBVSxtQkFBTyxDQUFDLHFEQUFPO0FBQ3pCLG1CQUFtQiw2R0FBdUM7QUFDMUQsb0JBQW9CLDBHQUFxQztBQUN6RCwrQkFBK0IsNklBQTREOztBQUUzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsc0JBQXNCO0FBQ3ZDLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7O0FBRXZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQix1QkFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQSxlQUFlLEtBQUs7QUFDcEIsZ0JBQWdCLGlEQUFpRDtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLHFCQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0MsR0FBRztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSw0QkFBNEIsR0FBRztBQUMvQixtREFBbUQsS0FBSyxLQUFLO0FBQzdEO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbGliL2FwcF9jb25maWcuanM/NGJiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcIm5vIHVzZSBzdHJpY3RcIjtcbnZhciBvb3AgPSByZXF1aXJlKFwiLi9vb3BcIik7XG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcIi4vZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG5jb25zdCByZXBvcnRFcnJvciA9IHJlcXVpcmUoXCIuL3JlcG9ydF9lcnJvclwiKS5yZXBvcnRFcnJvcjtcbmNvbnN0IGRlZmF1bHRFbmdsaXNoTWVzc2FnZXMgPSByZXF1aXJlKFwiLi9kZWZhdWx0X2VuZ2xpc2hfbWVzc2FnZXNcIikuZGVmYXVsdEVuZ2xpc2hNZXNzYWdlcztcblxudmFyIG9wdGlvbnNQcm92aWRlciA9IHtcbiAgICBzZXRPcHRpb25zOiBmdW5jdGlvbihvcHRMaXN0KSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG9wdExpc3QpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICB0aGlzLnNldE9wdGlvbihrZXksIG9wdExpc3Rba2V5XSk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gICAgZ2V0T3B0aW9uczogZnVuY3Rpb24ob3B0aW9uTmFtZXMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICBpZiAoIW9wdGlvbk5hbWVzKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25OYW1lcyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpLmZpbHRlcihmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIW9wdGlvbnNba2V5XS5oaWRkZW47XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShvcHRpb25OYW1lcykpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG9wdGlvbk5hbWVzO1xuICAgICAgICAgICAgb3B0aW9uTmFtZXMgPSBPYmplY3Qua2V5cyhyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbk5hbWVzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IHRoaXMuZ2V0T3B0aW9uKGtleSk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gICAgc2V0T3B0aW9uOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICBpZiAodGhpc1tcIiRcIiArIG5hbWVdID09PSB2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgIHZhciBvcHQgPSB0aGlzLiRvcHRpb25zW25hbWVdO1xuICAgICAgICBpZiAoIW9wdCkge1xuICAgICAgICAgICAgcmV0dXJuIHdhcm4oJ21pc3NwZWxsZWQgb3B0aW9uIFwiJyArIG5hbWUgKyAnXCInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0LmZvcndhcmRUbylcbiAgICAgICAgICAgIHJldHVybiB0aGlzW29wdC5mb3J3YXJkVG9dICYmIHRoaXNbb3B0LmZvcndhcmRUb10uc2V0T3B0aW9uKG5hbWUsIHZhbHVlKTtcblxuICAgICAgICBpZiAoIW9wdC5oYW5kbGVzU2V0KVxuICAgICAgICAgICAgdGhpc1tcIiRcIiArIG5hbWVdID0gdmFsdWU7XG4gICAgICAgIGlmIChvcHQgJiYgb3B0LnNldClcbiAgICAgICAgICAgIG9wdC5zZXQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgfSxcbiAgICBnZXRPcHRpb246IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdmFyIG9wdCA9IHRoaXMuJG9wdGlvbnNbbmFtZV07XG4gICAgICAgIGlmICghb3B0KSB7XG4gICAgICAgICAgICByZXR1cm4gd2FybignbWlzc3BlbGxlZCBvcHRpb24gXCInICsgbmFtZSArICdcIicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHQuZm9yd2FyZFRvKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXNbb3B0LmZvcndhcmRUb10gJiYgdGhpc1tvcHQuZm9yd2FyZFRvXS5nZXRPcHRpb24obmFtZSk7XG4gICAgICAgIHJldHVybiBvcHQgJiYgb3B0LmdldCA/IG9wdC5nZXQuY2FsbCh0aGlzKSA6IHRoaXNbXCIkXCIgKyBuYW1lXTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiB3YXJuKG1lc3NhZ2UpIHtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlLndhcm4pXG4gICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xufVxuXG52YXIgbWVzc2FnZXM7XG52YXIgbmxzUGxhY2Vob2xkZXJzO1xuXG5jbGFzcyBBcHBDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy4kZGVmYXVsdE9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIG1lc3NhZ2VzID0gZGVmYXVsdEVuZ2xpc2hNZXNzYWdlcztcbiAgICAgICAgICAgIG5sc1BsYWNlaG9sZGVycyA9IFwiZG9sbGFyU2lnbnNcIjtcbiAgICAgICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHt7IFtrZXk6IHN0cmluZ106IGFueSB9fSBvcHRpb25zXG4gICAgICogQHJldHVybnMge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuQXBwQ29uZmlnfVxuICAgICAqL1xuICAgIGRlZmluZU9wdGlvbnMob2JqLCBwYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb2JqLiRvcHRpb25zKVxuICAgICAgICAgICAgdGhpcy4kZGVmYXVsdE9wdGlvbnNbcGF0aF0gPSBvYmouJG9wdGlvbnMgPSB7fTtcblxuICAgICAgICBPYmplY3Qua2V5cyhvcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgdmFyIG9wdCA9IG9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0ID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgb3B0ID0ge2ZvcndhcmRUbzogb3B0fTtcblxuICAgICAgICAgICAgb3B0Lm5hbWUgfHwgKG9wdC5uYW1lID0ga2V5KTtcbiAgICAgICAgICAgIG9iai4kb3B0aW9uc1tvcHQubmFtZV0gPSBvcHQ7XG4gICAgICAgICAgICBpZiAoXCJpbml0aWFsVmFsdWVcIiBpbiBvcHQpXG4gICAgICAgICAgICAgICAgb2JqW1wiJFwiICsgb3B0Lm5hbWVdID0gb3B0LmluaXRpYWxWYWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gaW1wbGVtZW50IG9wdGlvbiBwcm92aWRlciBpbnRlcmZhY2VcbiAgICAgICAgb29wLmltcGxlbWVudChvYmosIG9wdGlvbnNQcm92aWRlcik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgICAqL1xuICAgIHJlc2V0T3B0aW9ucyhvYmopIHtcbiAgICAgICAgT2JqZWN0LmtleXMob2JqLiRvcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgdmFyIG9wdCA9IG9iai4kb3B0aW9uc1trZXldO1xuICAgICAgICAgICAgaWYgKFwidmFsdWVcIiBpbiBvcHQpXG4gICAgICAgICAgICAgICAgb2JqLnNldE9wdGlvbihrZXksIG9wdC52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge2FueX0gdmFsdWVcbiAgICAgKi9cbiAgICBzZXREZWZhdWx0VmFsdWUocGF0aCwgbmFtZSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICBmb3IgKHBhdGggaW4gdGhpcy4kZGVmYXVsdE9wdGlvbnMpXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuJGRlZmF1bHRPcHRpb25zW3BhdGhdW25hbWVdKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmICghdGhpcy4kZGVmYXVsdE9wdGlvbnNbcGF0aF1bbmFtZV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcHRzID0gdGhpcy4kZGVmYXVsdE9wdGlvbnNbcGF0aF0gfHwgKHRoaXMuJGRlZmF1bHRPcHRpb25zW3BhdGhdID0ge30pO1xuICAgICAgICBpZiAob3B0c1tuYW1lXSkge1xuICAgICAgICAgICAgaWYgKG9wdHMuZm9yd2FyZFRvKVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdFZhbHVlKG9wdHMuZm9yd2FyZFRvLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb3B0c1tuYW1lXS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge3sgW2tleTogc3RyaW5nXTogYW55OyB9fSBvcHRpb25IYXNoXG4gICAgICovXG4gICAgc2V0RGVmYXVsdFZhbHVlcyhwYXRoLCBvcHRpb25IYXNoKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG9wdGlvbkhhc2gpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICB0aGlzLnNldERlZmF1bHRWYWx1ZShwYXRoLCBrZXksIG9wdGlvbkhhc2hba2V5XSk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7YW55fSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7e3BsYWNlaG9sZGVycz86IFwiZG9sbGFyU2lnbnNcIiB8IFwiY3VybHlCcmFja2V0c1wifX0gW29wdGlvbnNdXG4gICAgICovXG4gICAgc2V0TWVzc2FnZXModmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgbWVzc2FnZXMgPSB2YWx1ZTtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wbGFjZWhvbGRlcnMpIHtcbiAgICAgICAgICAgIG5sc1BsYWNlaG9sZGVycyA9IG9wdGlvbnMucGxhY2Vob2xkZXJzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0U3RyaW5nXG4gICAgICogQHBhcmFtIHt7IFt4OiBzdHJpbmddOiBhbnk7IH19IFtwYXJhbXNdXG4gICAgICovXG4gICAgbmxzKGtleSwgZGVmYXVsdFN0cmluZywgcGFyYW1zKSB7XG4gICAgICAgIGlmICghbWVzc2FnZXNba2V5XSkgIHtcbiAgICAgICAgICAgIHdhcm4oXCJObyBtZXNzYWdlIGZvdW5kIGZvciB0aGUga2V5ICdcIiArIGtleSArIFwiJyBpbiB0aGUgcHJvdmlkZWQgbWVzc2FnZXMsIHRyeWluZyB0byBmaW5kIGEgdHJhbnNsYXRpb24gZm9yIHRoZSBkZWZhdWx0IHN0cmluZyAnXCIgKyBkZWZhdWx0U3RyaW5nICsgXCInLlwiKTtcbiAgICAgICAgICAgIGlmICghbWVzc2FnZXNbZGVmYXVsdFN0cmluZ10pIHtcbiAgICAgICAgICAgICAgICB3YXJuKFwiTm8gbWVzc2FnZSBmb3VuZCBmb3IgdGhlIGRlZmF1bHQgc3RyaW5nICdcIiArIGRlZmF1bHRTdHJpbmcgKyBcIicgaW4gdGhlIHByb3ZpZGVkIG1lc3NhZ2VzLiBGYWxsaW5nIGJhY2sgdG8gdGhlIGRlZmF1bHQgRW5nbGlzaCBtZXNzYWdlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0cmFuc2xhdGVkID0gbWVzc2FnZXNba2V5XSB8fCBtZXNzYWdlc1tkZWZhdWx0U3RyaW5nXSB8fCBkZWZhdWx0U3RyaW5nO1xuICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICAvLyBXZSBzdXBwb3J0IGJvdGggJG4gb3Ige259IGFzIHBsYWNlaG9sZGVyIGluZGljYXRvcnMgaW4gdGhlIHByb3ZpZGVkIHRyYW5zbGF0ZWQgc3RyaW5nc1xuICAgICAgICAgICAgaWYgKG5sc1BsYWNlaG9sZGVycyA9PT0gXCJkb2xsYXJTaWduc1wiKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVwbGFjZSAkbiB3aXRoIHRoZSBudGggZWxlbWVudCBpbiBwYXJhbXNcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVkID0gdHJhbnNsYXRlZC5yZXBsYWNlKC9cXCQoXFwkfFtcXGRdKykvZywgZnVuY3Rpb24oXywgZG9sbGFyTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbGxhck1hdGNoID09IFwiJFwiKSByZXR1cm4gXCIkXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXNbZG9sbGFyTWF0Y2hdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5sc1BsYWNlaG9sZGVycyA9PT0gXCJjdXJseUJyYWNrZXRzXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHtufSB3aXRoIHRoZSBudGggZWxlbWVudCBpbiBwYXJhbXNcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVkID0gdHJhbnNsYXRlZC5yZXBsYWNlKC9cXHsoW15cXH1dKylcXH0vZywgZnVuY3Rpb24oXywgY3VybHlCcmFja2V0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtc1tjdXJseUJyYWNrZXRNYXRjaF07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZWQ7XG4gICAgfVxufVxuQXBwQ29uZmlnLnByb3RvdHlwZS53YXJuID0gd2FybjtcbkFwcENvbmZpZy5wcm90b3R5cGUucmVwb3J0RXJyb3IgPSByZXBvcnRFcnJvcjtcblxuLy8gbW9kdWxlIGxvYWRpbmdcbm9vcC5pbXBsZW1lbnQoQXBwQ29uZmlnLnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyKTtcblxuZXhwb3J0cy5BcHBDb25maWcgPSBBcHBDb25maWc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/app_config.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/bidiutil.js":
/*!***************************************************!*\
  !*** ./node_modules/ace-code/src/lib/bidiutil.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nvar ArabicAlefBetIntervalsBegine = ['\\u0621', '\\u0641'];\nvar ArabicAlefBetIntervalsEnd = ['\\u063A', '\\u064a'];\nvar dir = 0, hiLevel = 0;\nvar lastArabic = false, hasUBAT_AL = false,  hasUBAT_B = false,  hasUBAT_S = false, hasBlockSep = false, hasSegSep = false;\n\nvar impTab_LTR = [\n\t\t\t\t/*\t\tL,\t\tR,\t\tEN,\t\tAN,\t\tN,\t\tIL,\t\tCond */\n/* 0 LTR text\t*/\t[\t0,\t\t3,\t\t0,\t\t1,\t\t0,\t\t0,\t\t0\t],\n/* 1 LTR+AN\t\t*/\t[\t0,\t\t3,\t\t0,\t\t1,\t\t2,\t\t2,\t\t0\t],\n/* 2 LTR+AN+N\t*/\t[\t0,\t\t3,\t\t0,\t\t0x11,\t\t2,\t\t0,\t\t1\t],\n/* 3 RTL text\t*/\t[\t0,\t\t3,\t\t5,\t\t5,\t\t4,\t\t1,\t\t0\t],\n/* 4 RTL cont\t*/\t[\t0,\t\t3,\t\t0x15,\t\t0x15,\t\t4,\t\t0,\t\t1\t],\n/* 5 RTL+EN/AN\t*/\t[\t0,\t\t3,\t\t5,\t\t5,\t\t4,\t\t2,\t\t0\t]\n];\n\nvar impTab_RTL = [\n\t\t/*\t\tL,\t\tR,\t\tEN,\t\tAN,\t\tN,\t\tIL,\t\tCond */\n/* 0 RTL text\t*/\t[\t2,\t\t0,\t\t1,\t\t1,\t\t0,\t\t1,\t\t0\t],\n/* 1 RTL+EN/AN\t*/\t[\t2,\t\t0,\t\t1,\t\t1,\t\t0,\t\t2,\t\t0\t],\n/* 2 LTR text\t*/\t[\t2,\t\t0,\t\t2,\t\t1,\t\t3,\t\t2,\t\t0\t],\n/* 3 LTR+cont\t*/\t[\t2,\t\t0,\t\t2,\t\t0x21,\t\t3,\t\t1,\t\t1\t]\n];\n\nvar LTR = 0, RTL = 1;\n\nvar L = 0; /* left to right */\nvar R = 1; /* right to left */\nvar EN = 2; /* European digit */\nvar AN = 3; /* Arabic-Indic digit */\nvar ON = 4; /* neutral */\nvar B = 5; /* block separator */\nvar S = 6; /* segment separator */\nvar AL = 7; /* Arabic Letter */\nvar WS = 8; /* white space */\nvar CS = 9; /* common digit separator */\nvar ES = 10; /* European digit separator */\nvar ET = 11; /* European digit terminator */\nvar NSM = 12; /* Non Spacing Mark */\nvar LRE = 13; /* LRE */\nvar RLE = 14; /* RLE */\nvar PDF = 15; /* PDF */\nvar LRO = 16; /* LRO */\nvar RLO = 17; /* RLO */\nvar BN = 18; /* Boundary Neutral */\n\nvar UnicodeTBL00 = [\nBN,BN,BN,BN,BN,BN,BN,BN,BN,S,B,S,WS,B,BN,BN,\nBN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,B,B,B,S,\nWS,ON,ON,ET,ET,ET,ON,ON,ON,ON,ON,ES,CS,ES,CS,CS,\nEN,EN,EN,EN,EN,EN,EN,EN,EN,EN,CS,ON,ON,ON,ON,ON,\nON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,\nL,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,ON,\nON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,\nL,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,BN,\nBN,BN,BN,BN,BN,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,\nBN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,\nCS,ON,ET,ET,ET,ET,ON,ON,ON,ON,L,ON,ON,BN,ON,ON,\nET,ET,EN,EN,ON,L,ON,ON,ON,EN,L,ON,ON,ON,ON,ON\n];\n\nvar UnicodeTBL20 = [\nWS,WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,BN,BN,BN,L,R\t,\nON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,ON,ON,ON,ON,WS,B,LRE,RLE,PDF,LRO,RLO,CS,\nET,ET,ET,ET,ET,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,CS,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS\n];\n\nfunction _computeLevels(chars, levels, len, charTypes) {\n\tvar impTab = dir ? impTab_RTL : impTab_LTR\n\t\t, prevState = null, newClass = null, newLevel = null, newState = 0\n\t\t, action = null, cond = null, condPos = -1, i = null, ix = null, classes = [];\n\n\tif (!charTypes) {\n\t\tfor (i = 0, charTypes = []; i < len; i++) {\n\t\t\tcharTypes[i] = _getCharacterType(chars[i]);\n\t\t}\n\t}\n\thiLevel = dir;\n\tlastArabic = false;\n\thasUBAT_AL = false;\n\thasUBAT_B = false;\n\thasUBAT_S = false;\n\tfor (ix = 0; ix < len; ix++){\n\t\tprevState = newState;\n\t\tclasses[ix] = newClass = _getCharClass(chars, charTypes, classes, ix);\n\t\tnewState = impTab[prevState][newClass];\n\t\taction = newState & 0xF0;\n\t\tnewState &= 0x0F;\n\t\tlevels[ix] = newLevel = impTab[newState][5];\n\t\tif (action > 0){\n\t\t\tif (action == 0x10){\n\t\t\t\tfor(i = condPos; i < ix; i++){\n\t\t\t\t\tlevels[i] = 1;\n\t\t\t\t}\n\t\t\t\tcondPos = -1;\n\t\t\t} else {\n\t\t\t\tcondPos = -1;\n\t\t\t}\n\t\t}\n\t\tcond = impTab[newState][6];\n\t\tif (cond){\n\t\t\tif(condPos == -1){\n\t\t\t\tcondPos = ix;\n\t\t\t}\n\t\t}else{\n\t\t\tif (condPos > -1){\n\t\t\t\tfor(i = condPos; i < ix; i++){\n\t\t\t\t\tlevels[i] = newLevel;\n\t\t\t\t}\n\t\t\t\tcondPos = -1;\n\t\t\t}\n\t\t}\n\t\tif (charTypes[ix] == B){\n\t\t\tlevels[ix] = 0;\n\t\t}\n\t\thiLevel |= newLevel;\n\t}\n\tif (hasUBAT_S){\n\t\tfor(i = 0; i < len; i++){\n\t\t\tif(charTypes[i] == S){\n\t\t\t\tlevels[i] = dir;\n\t\t\t\tfor(var j = i - 1; j >= 0; j--){\n\t\t\t\t\tif(charTypes[j] == WS){\n\t\t\t\t\t\tlevels[j] = dir;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction _invertLevel(lev, levels, _array) {\n\tif (hiLevel < lev){\n\t\treturn;\n\t}\n\tif (lev == 1 && dir == RTL && !hasUBAT_B){\n\t\t_array.reverse();\n\t\treturn;\n\t}\n\tvar len = _array.length, start = 0, end, lo, hi, tmp;\n\twhile(start < len){\n\t\tif (levels[start] >= lev){\n\t\t\tend = start + 1;\n\t\twhile(end < len && levels[end] >= lev){\n\t\t\tend++;\n\t\t}\n\t\tfor(lo = start, hi = end - 1 ; lo < hi; lo++, hi--){\n\t\t\ttmp = _array[lo];\n\t\t\t_array[lo] = _array[hi];\n\t\t\t_array[hi] = tmp;\n\t\t}\n\t\tstart = end;\n\t}\n\tstart++;\n\t}\n}\n\nfunction _getCharClass(chars, types, classes, ix) {\t\t\t\n\tvar cType = types[ix], wType, nType, len, i;\n\tswitch(cType){\n\t\tcase L:\n\t\tcase R:\n\t\t\tlastArabic = false;\n\t\tcase ON:\n\t\tcase AN:\n\t\t\treturn cType;\n\t\tcase EN:\n\t\t\treturn lastArabic ? AN : EN;\n\t\tcase AL:\n\t\t\tlastArabic = true;\n\t\t\thasUBAT_AL = true;\n\t\t\treturn R;\n\t\tcase WS:\n\t\t\treturn ON;\n\t\tcase CS:\n\t\t\tif (ix < 1 || (ix + 1) >= types.length ||\n\t\t\t\t((wType = classes[ix - 1]) != EN && wType != AN) ||\n\t\t\t\t((nType = types[ix + 1]) != EN && nType != AN)){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\tif (lastArabic){nType = AN;}\n\t\t\treturn nType == wType ? nType : ON;\n\t\tcase ES:\n\t\t\twType = ix > 0 ? classes[ix - 1] : B;\n\t\t\tif (wType == EN && (ix + 1) < types.length && types[ix + 1] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\treturn ON;\n\t\tcase ET:\n\t\t\tif (ix > 0 && classes[ix - 1] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\tif (lastArabic){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\ti = ix + 1;\n\t\t\tlen = types.length;\n\t\t\twhile (i < len && types[i] == ET){\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (i < len && types[i] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\treturn ON;\n\t\tcase NSM:\n\t\t\tlen = types.length;\n\t\t\ti = ix + 1;\n\t\t\twhile (i < len && types[i] == NSM){\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (i < len){\n\t\t\t\tvar c = chars[ix], rtlCandidate = (c >= 0x0591 && c <= 0x08FF) || c == 0xFB1E;\n\t\t\t\t\n\t\t\t\twType = types[i];\n\t\t\t\tif (rtlCandidate && (wType == R || wType == AL)){\n\t\t\t\t\treturn R;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ix < 1 || (wType = types[ix - 1]) == B){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\treturn classes[ix - 1];\n\t\tcase B:\n\t\t\tlastArabic = false;\n\t\t\thasUBAT_B = true;\n\t\t\treturn dir;\n\t\tcase S:\n\t\t\thasUBAT_S = true;\n\t\t\treturn ON;\n\t\tcase LRE:\n\t\tcase RLE:\n\t\tcase LRO:\n\t\tcase RLO:\n\t\tcase PDF:\n\t\t\tlastArabic = false;\n\t\tcase BN:\n\t\t\treturn ON;\n\t}\n}\n\nfunction _getCharacterType( ch ) {\t\t\n\tvar uc = ch.charCodeAt(0), hi = uc >> 8;\n\t\n\tif (hi == 0) {\t\t\n\t\treturn ((uc > 0x00BF) ? L : UnicodeTBL00[uc]);\n\t} else if (hi == 5) {\n\t\treturn (/[\\u0591-\\u05f4]/.test(ch) ? R : L);\n\t} else if (hi == 6) {\n\t\tif (/[\\u0610-\\u061a\\u064b-\\u065f\\u06d6-\\u06e4\\u06e7-\\u06ed]/.test(ch))\n\t\t\treturn NSM;\n\t\telse if (/[\\u0660-\\u0669\\u066b-\\u066c]/.test(ch))\n\t\t\treturn AN;\n\t\telse if (uc == 0x066A)\n\t\t\treturn ET;\n\t\telse if (/[\\u06f0-\\u06f9]/.test(ch))\n\t\t\treturn EN;\t\t\t\n\t\telse\n\t\t\treturn AL;\n\t} else if (hi == 0x20 && uc <= 0x205F) {\n\t\treturn UnicodeTBL20[uc & 0xFF];\n\t} else if (hi == 0xFE) {\n\t\treturn (uc >= 0xFE70 ? AL : ON);\n\t}\t\t\n\treturn ON;\t\n}\n\nfunction _isArabicDiacritics( ch ) {\n\treturn (ch >= '\\u064b' && ch <= '\\u0655');\n}\n\n/* Strong LTR character (0 - even), regular width */\nexports.L = L;\n/* Strong RTL character (1 - odd), Bidi width */\nexports.R = R;\n/* European digit (2 - even), regular width */\nexports.EN = EN;\n/* Neutral RTL-by-context character (3 - odd), regular width */\nexports.ON_R = 3;\n/* Hindi (Arabic) digit (4 - even), Bidi width */\nexports.AN = 4;\n/* Arabic LamAlef (5 - odd), Half Bidi width */\nexports.R_H = 5;\n/* invisible EOL (6 - even), zero width */\nexports.B = 6;\n/* invisible RLE (7 - odd), zero width */\nexports.RLE = 7;\n\nexports.DOT = \"\\xB7\";\n\n/**\n * Performs text reordering by implementing Unicode Bidi algorithm\n * with aim to produce logical<->visual map and Bidi levels\n * @param {String} text string to be reordered\n * @param {Array} textCharTypes unicode character types produced by call to 'hasBidiCharacters'\n * @param {Boolean} isRtl 'true' for right-to-left text direction, otherwise 'false'\n *\n * @return {Object} An object containing logicalFromVisual map and Bidi levels\n **/\nexports.doBidiReorder = function(text, textCharTypes, isRtl) {\n\tif (text.length < 2)\n\t\treturn {};\n\t\t\n\tvar chars = text.split(\"\"), logicalFromVisual = new Array(chars.length),\n\t\tbidiLevels = new Array(chars.length), levels = []; \n\n\tdir = isRtl ? RTL : LTR;\n\n\t_computeLevels(chars, levels, chars.length, textCharTypes);\n\n\tfor (var i = 0; i < logicalFromVisual.length; logicalFromVisual[i] = i, i++);\n\n\t_invertLevel(2, levels, logicalFromVisual);\n\t_invertLevel(1, levels, logicalFromVisual);\n\n\tfor (var i = 0; i < logicalFromVisual.length - 1; i++) { //fix levels to reflect character width\n\t\tif (textCharTypes[i] === AN) {\n\t\t\tlevels[i] = exports.AN;\n\t\t} else if (levels[i] === R && ((textCharTypes[i] > AL && textCharTypes[i] < LRE) \n\t\t\t|| textCharTypes[i] === ON || textCharTypes[i] === BN)) {\n\t\t\tlevels[i] = exports.ON_R;\n\t\t} else if ((i > 0 && chars[i - 1] === '\\u0644') && /\\u0622|\\u0623|\\u0625|\\u0627/.test(chars[i])) {\n\t\t\tlevels[i - 1] = levels[i] = exports.R_H;\n\t\t\ti++;\n\t\t}\n\t}\n\t/* fix level to mark zero length EOL */\n\tif (chars[chars.length - 1] === exports.DOT)\n\t\tlevels[chars.length - 1] = exports.B;\n\t\t\t\t\n\tif (chars[0] === '\\u202B')\n\t\tlevels[0] = exports.RLE;\n\t\t\t\t\n\tfor (var i = 0; i < logicalFromVisual.length; i++) {\n\t\tbidiLevels[i] = levels[logicalFromVisual[i]];\n\t}\n\n\treturn {'logicalFromVisual': logicalFromVisual, 'bidiLevels': bidiLevels};\n};\t\n\n/**\n * Performs character classification, to be used in Unicode Bidi algorithm.\n * @param {String} text string to be reordered\n * @param {Array} textCharTypes unicode character types (to be filled by this method)\n *\n * @return {Boolean} 'true' if text contains Bidi characters, otherwise 'false' \n **/\nexports.hasBidiCharacters = function(text, textCharTypes){\n\tvar ret = false;\n\tfor (var i = 0; i < text.length; i++){\n\t\ttextCharTypes[i] = _getCharacterType(text.charAt(i));\n\t\tif (!ret && (textCharTypes[i] == R || textCharTypes[i] == AL || textCharTypes[i] == AN))\n\t\t\tret = true;\n\t}\n\treturn ret;\n};\n\n/**\n * Returns visual index corresponding to logical index basing on logicalFromvisual \n * map provided by Unicode Bidi algorithm.\n * @param {Number} logIdx logical index of character in text buffer\n * @param {Object} rowMap object containing logicalFromVisual map\n *\n * @return {Number} visual index (on display) corresponding to logical index\n **/\t\nexports.getVisualFromLogicalIdx = function(logIdx, rowMap) {\n\tfor (var i = 0; i < rowMap.logicalFromVisual.length; i++) {\n\t\tif (rowMap.logicalFromVisual[i] == logIdx)\n\t\t\treturn i;\n\t}\n\treturn 0;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9iaWRpdXRpbC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsV0FBVztBQUNYLFdBQVc7QUFDWCxZQUFZO0FBQ1osWUFBWTtBQUNaLFlBQVk7QUFDWixXQUFXO0FBQ1gsV0FBVztBQUNYLFlBQVk7QUFDWixZQUFZO0FBQ1osWUFBWTtBQUNaLGFBQWE7QUFDYixhQUFhO0FBQ2IsY0FBYztBQUNkLGNBQWM7QUFDZCxjQUFjO0FBQ2QsY0FBYztBQUNkLGNBQWM7QUFDZCxjQUFjO0FBQ2QsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsU0FBUztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxVQUFVO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsUUFBUTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFNBQVM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsV0FBVztBQUNYO0FBQ0EsU0FBUztBQUNUO0FBQ0EsV0FBVzs7QUFFWCxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsaUJBQWlCLDhCQUE4Qjs7QUFFL0M7QUFDQTs7QUFFQSxpQkFBaUIsa0NBQWtDLE9BQU87QUFDMUQ7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOEJBQThCO0FBQy9DO0FBQ0E7O0FBRUEsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCLGlCQUFpQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQjtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBLCtCQUErQjtBQUMvQixpQkFBaUIscUNBQXFDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9saWIvYmlkaXV0aWwuanM/ZDExMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIEFyYWJpY0FsZWZCZXRJbnRlcnZhbHNCZWdpbmUgPSBbJ1xcdTA2MjEnLCAnXFx1MDY0MSddO1xudmFyIEFyYWJpY0FsZWZCZXRJbnRlcnZhbHNFbmQgPSBbJ1xcdTA2M0EnLCAnXFx1MDY0YSddO1xudmFyIGRpciA9IDAsIGhpTGV2ZWwgPSAwO1xudmFyIGxhc3RBcmFiaWMgPSBmYWxzZSwgaGFzVUJBVF9BTCA9IGZhbHNlLCAgaGFzVUJBVF9CID0gZmFsc2UsICBoYXNVQkFUX1MgPSBmYWxzZSwgaGFzQmxvY2tTZXAgPSBmYWxzZSwgaGFzU2VnU2VwID0gZmFsc2U7XG5cbnZhciBpbXBUYWJfTFRSID0gW1xuXHRcdFx0XHQvKlx0XHRMLFx0XHRSLFx0XHRFTixcdFx0QU4sXHRcdE4sXHRcdElMLFx0XHRDb25kICovXG4vKiAwIExUUiB0ZXh0XHQqL1x0W1x0MCxcdFx0MyxcdFx0MCxcdFx0MSxcdFx0MCxcdFx0MCxcdFx0MFx0XSxcbi8qIDEgTFRSK0FOXHRcdCovXHRbXHQwLFx0XHQzLFx0XHQwLFx0XHQxLFx0XHQyLFx0XHQyLFx0XHQwXHRdLFxuLyogMiBMVFIrQU4rTlx0Ki9cdFtcdDAsXHRcdDMsXHRcdDAsXHRcdDB4MTEsXHRcdDIsXHRcdDAsXHRcdDFcdF0sXG4vKiAzIFJUTCB0ZXh0XHQqL1x0W1x0MCxcdFx0MyxcdFx0NSxcdFx0NSxcdFx0NCxcdFx0MSxcdFx0MFx0XSxcbi8qIDQgUlRMIGNvbnRcdCovXHRbXHQwLFx0XHQzLFx0XHQweDE1LFx0XHQweDE1LFx0XHQ0LFx0XHQwLFx0XHQxXHRdLFxuLyogNSBSVEwrRU4vQU5cdCovXHRbXHQwLFx0XHQzLFx0XHQ1LFx0XHQ1LFx0XHQ0LFx0XHQyLFx0XHQwXHRdXG5dO1xuXG52YXIgaW1wVGFiX1JUTCA9IFtcblx0XHQvKlx0XHRMLFx0XHRSLFx0XHRFTixcdFx0QU4sXHRcdE4sXHRcdElMLFx0XHRDb25kICovXG4vKiAwIFJUTCB0ZXh0XHQqL1x0W1x0MixcdFx0MCxcdFx0MSxcdFx0MSxcdFx0MCxcdFx0MSxcdFx0MFx0XSxcbi8qIDEgUlRMK0VOL0FOXHQqL1x0W1x0MixcdFx0MCxcdFx0MSxcdFx0MSxcdFx0MCxcdFx0MixcdFx0MFx0XSxcbi8qIDIgTFRSIHRleHRcdCovXHRbXHQyLFx0XHQwLFx0XHQyLFx0XHQxLFx0XHQzLFx0XHQyLFx0XHQwXHRdLFxuLyogMyBMVFIrY29udFx0Ki9cdFtcdDIsXHRcdDAsXHRcdDIsXHRcdDB4MjEsXHRcdDMsXHRcdDEsXHRcdDFcdF1cbl07XG5cbnZhciBMVFIgPSAwLCBSVEwgPSAxO1xuXG52YXIgTCA9IDA7IC8qIGxlZnQgdG8gcmlnaHQgKi9cbnZhciBSID0gMTsgLyogcmlnaHQgdG8gbGVmdCAqL1xudmFyIEVOID0gMjsgLyogRXVyb3BlYW4gZGlnaXQgKi9cbnZhciBBTiA9IDM7IC8qIEFyYWJpYy1JbmRpYyBkaWdpdCAqL1xudmFyIE9OID0gNDsgLyogbmV1dHJhbCAqL1xudmFyIEIgPSA1OyAvKiBibG9jayBzZXBhcmF0b3IgKi9cbnZhciBTID0gNjsgLyogc2VnbWVudCBzZXBhcmF0b3IgKi9cbnZhciBBTCA9IDc7IC8qIEFyYWJpYyBMZXR0ZXIgKi9cbnZhciBXUyA9IDg7IC8qIHdoaXRlIHNwYWNlICovXG52YXIgQ1MgPSA5OyAvKiBjb21tb24gZGlnaXQgc2VwYXJhdG9yICovXG52YXIgRVMgPSAxMDsgLyogRXVyb3BlYW4gZGlnaXQgc2VwYXJhdG9yICovXG52YXIgRVQgPSAxMTsgLyogRXVyb3BlYW4gZGlnaXQgdGVybWluYXRvciAqL1xudmFyIE5TTSA9IDEyOyAvKiBOb24gU3BhY2luZyBNYXJrICovXG52YXIgTFJFID0gMTM7IC8qIExSRSAqL1xudmFyIFJMRSA9IDE0OyAvKiBSTEUgKi9cbnZhciBQREYgPSAxNTsgLyogUERGICovXG52YXIgTFJPID0gMTY7IC8qIExSTyAqL1xudmFyIFJMTyA9IDE3OyAvKiBSTE8gKi9cbnZhciBCTiA9IDE4OyAvKiBCb3VuZGFyeSBOZXV0cmFsICovXG5cbnZhciBVbmljb2RlVEJMMDAgPSBbXG5CTixCTixCTixCTixCTixCTixCTixCTixCTixTLEIsUyxXUyxCLEJOLEJOLFxuQk4sQk4sQk4sQk4sQk4sQk4sQk4sQk4sQk4sQk4sQk4sQk4sQixCLEIsUyxcbldTLE9OLE9OLEVULEVULEVULE9OLE9OLE9OLE9OLE9OLEVTLENTLEVTLENTLENTLFxuRU4sRU4sRU4sRU4sRU4sRU4sRU4sRU4sRU4sRU4sQ1MsT04sT04sT04sT04sT04sXG5PTixMLEwsTCxMLEwsTCxMLEwsTCxMLEwsTCxMLEwsTCxcbkwsTCxMLEwsTCxMLEwsTCxMLEwsTCxPTixPTixPTixPTixPTixcbk9OLEwsTCxMLEwsTCxMLEwsTCxMLEwsTCxMLEwsTCxMLFxuTCxMLEwsTCxMLEwsTCxMLEwsTCxMLE9OLE9OLE9OLE9OLEJOLFxuQk4sQk4sQk4sQk4sQk4sQixCTixCTixCTixCTixCTixCTixCTixCTixCTixCTixcbkJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLEJOLFxuQ1MsT04sRVQsRVQsRVQsRVQsT04sT04sT04sT04sTCxPTixPTixCTixPTixPTixcbkVULEVULEVOLEVOLE9OLEwsT04sT04sT04sRU4sTCxPTixPTixPTixPTixPTlxuXTtcblxudmFyIFVuaWNvZGVUQkwyMCA9IFtcbldTLFdTLFdTLFdTLFdTLFdTLFdTLFdTLFdTLFdTLFdTLEJOLEJOLEJOLEwsUlx0LFxuT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sXG5PTixPTixPTixPTixPTixPTixPTixPTixXUyxCLExSRSxSTEUsUERGLExSTyxSTE8sQ1MsXG5FVCxFVCxFVCxFVCxFVCxPTixPTixPTixPTixPTixPTixPTixPTixPTixPTixPTixcbk9OLE9OLE9OLE9OLENTLE9OLE9OLE9OLE9OLE9OLE9OLE9OLE9OLE9OLE9OLE9OLFxuT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sT04sV1Ncbl07XG5cbmZ1bmN0aW9uIF9jb21wdXRlTGV2ZWxzKGNoYXJzLCBsZXZlbHMsIGxlbiwgY2hhclR5cGVzKSB7XG5cdHZhciBpbXBUYWIgPSBkaXIgPyBpbXBUYWJfUlRMIDogaW1wVGFiX0xUUlxuXHRcdCwgcHJldlN0YXRlID0gbnVsbCwgbmV3Q2xhc3MgPSBudWxsLCBuZXdMZXZlbCA9IG51bGwsIG5ld1N0YXRlID0gMFxuXHRcdCwgYWN0aW9uID0gbnVsbCwgY29uZCA9IG51bGwsIGNvbmRQb3MgPSAtMSwgaSA9IG51bGwsIGl4ID0gbnVsbCwgY2xhc3NlcyA9IFtdO1xuXG5cdGlmICghY2hhclR5cGVzKSB7XG5cdFx0Zm9yIChpID0gMCwgY2hhclR5cGVzID0gW107IGkgPCBsZW47IGkrKykge1xuXHRcdFx0Y2hhclR5cGVzW2ldID0gX2dldENoYXJhY3RlclR5cGUoY2hhcnNbaV0pO1xuXHRcdH1cblx0fVxuXHRoaUxldmVsID0gZGlyO1xuXHRsYXN0QXJhYmljID0gZmFsc2U7XG5cdGhhc1VCQVRfQUwgPSBmYWxzZTtcblx0aGFzVUJBVF9CID0gZmFsc2U7XG5cdGhhc1VCQVRfUyA9IGZhbHNlO1xuXHRmb3IgKGl4ID0gMDsgaXggPCBsZW47IGl4Kyspe1xuXHRcdHByZXZTdGF0ZSA9IG5ld1N0YXRlO1xuXHRcdGNsYXNzZXNbaXhdID0gbmV3Q2xhc3MgPSBfZ2V0Q2hhckNsYXNzKGNoYXJzLCBjaGFyVHlwZXMsIGNsYXNzZXMsIGl4KTtcblx0XHRuZXdTdGF0ZSA9IGltcFRhYltwcmV2U3RhdGVdW25ld0NsYXNzXTtcblx0XHRhY3Rpb24gPSBuZXdTdGF0ZSAmIDB4RjA7XG5cdFx0bmV3U3RhdGUgJj0gMHgwRjtcblx0XHRsZXZlbHNbaXhdID0gbmV3TGV2ZWwgPSBpbXBUYWJbbmV3U3RhdGVdWzVdO1xuXHRcdGlmIChhY3Rpb24gPiAwKXtcblx0XHRcdGlmIChhY3Rpb24gPT0gMHgxMCl7XG5cdFx0XHRcdGZvcihpID0gY29uZFBvczsgaSA8IGl4OyBpKyspe1xuXHRcdFx0XHRcdGxldmVsc1tpXSA9IDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uZFBvcyA9IC0xO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uZFBvcyA9IC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25kID0gaW1wVGFiW25ld1N0YXRlXVs2XTtcblx0XHRpZiAoY29uZCl7XG5cdFx0XHRpZihjb25kUG9zID09IC0xKXtcblx0XHRcdFx0Y29uZFBvcyA9IGl4O1xuXHRcdFx0fVxuXHRcdH1lbHNle1xuXHRcdFx0aWYgKGNvbmRQb3MgPiAtMSl7XG5cdFx0XHRcdGZvcihpID0gY29uZFBvczsgaSA8IGl4OyBpKyspe1xuXHRcdFx0XHRcdGxldmVsc1tpXSA9IG5ld0xldmVsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbmRQb3MgPSAtMTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGNoYXJUeXBlc1tpeF0gPT0gQil7XG5cdFx0XHRsZXZlbHNbaXhdID0gMDtcblx0XHR9XG5cdFx0aGlMZXZlbCB8PSBuZXdMZXZlbDtcblx0fVxuXHRpZiAoaGFzVUJBVF9TKXtcblx0XHRmb3IoaSA9IDA7IGkgPCBsZW47IGkrKyl7XG5cdFx0XHRpZihjaGFyVHlwZXNbaV0gPT0gUyl7XG5cdFx0XHRcdGxldmVsc1tpXSA9IGRpcjtcblx0XHRcdFx0Zm9yKHZhciBqID0gaSAtIDE7IGogPj0gMDsgai0tKXtcblx0XHRcdFx0XHRpZihjaGFyVHlwZXNbal0gPT0gV1Mpe1xuXHRcdFx0XHRcdFx0bGV2ZWxzW2pdID0gZGlyO1xuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIF9pbnZlcnRMZXZlbChsZXYsIGxldmVscywgX2FycmF5KSB7XG5cdGlmIChoaUxldmVsIDwgbGV2KXtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYgKGxldiA9PSAxICYmIGRpciA9PSBSVEwgJiYgIWhhc1VCQVRfQil7XG5cdFx0X2FycmF5LnJldmVyc2UoKTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIGxlbiA9IF9hcnJheS5sZW5ndGgsIHN0YXJ0ID0gMCwgZW5kLCBsbywgaGksIHRtcDtcblx0d2hpbGUoc3RhcnQgPCBsZW4pe1xuXHRcdGlmIChsZXZlbHNbc3RhcnRdID49IGxldil7XG5cdFx0XHRlbmQgPSBzdGFydCArIDE7XG5cdFx0d2hpbGUoZW5kIDwgbGVuICYmIGxldmVsc1tlbmRdID49IGxldil7XG5cdFx0XHRlbmQrKztcblx0XHR9XG5cdFx0Zm9yKGxvID0gc3RhcnQsIGhpID0gZW5kIC0gMSA7IGxvIDwgaGk7IGxvKyssIGhpLS0pe1xuXHRcdFx0dG1wID0gX2FycmF5W2xvXTtcblx0XHRcdF9hcnJheVtsb10gPSBfYXJyYXlbaGldO1xuXHRcdFx0X2FycmF5W2hpXSA9IHRtcDtcblx0XHR9XG5cdFx0c3RhcnQgPSBlbmQ7XG5cdH1cblx0c3RhcnQrKztcblx0fVxufVxuXG5mdW5jdGlvbiBfZ2V0Q2hhckNsYXNzKGNoYXJzLCB0eXBlcywgY2xhc3NlcywgaXgpIHtcdFx0XHRcblx0dmFyIGNUeXBlID0gdHlwZXNbaXhdLCB3VHlwZSwgblR5cGUsIGxlbiwgaTtcblx0c3dpdGNoKGNUeXBlKXtcblx0XHRjYXNlIEw6XG5cdFx0Y2FzZSBSOlxuXHRcdFx0bGFzdEFyYWJpYyA9IGZhbHNlO1xuXHRcdGNhc2UgT046XG5cdFx0Y2FzZSBBTjpcblx0XHRcdHJldHVybiBjVHlwZTtcblx0XHRjYXNlIEVOOlxuXHRcdFx0cmV0dXJuIGxhc3RBcmFiaWMgPyBBTiA6IEVOO1xuXHRcdGNhc2UgQUw6XG5cdFx0XHRsYXN0QXJhYmljID0gdHJ1ZTtcblx0XHRcdGhhc1VCQVRfQUwgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIFI7XG5cdFx0Y2FzZSBXUzpcblx0XHRcdHJldHVybiBPTjtcblx0XHRjYXNlIENTOlxuXHRcdFx0aWYgKGl4IDwgMSB8fCAoaXggKyAxKSA+PSB0eXBlcy5sZW5ndGggfHxcblx0XHRcdFx0KCh3VHlwZSA9IGNsYXNzZXNbaXggLSAxXSkgIT0gRU4gJiYgd1R5cGUgIT0gQU4pIHx8XG5cdFx0XHRcdCgoblR5cGUgPSB0eXBlc1tpeCArIDFdKSAhPSBFTiAmJiBuVHlwZSAhPSBBTikpe1xuXHRcdFx0XHRyZXR1cm4gT047XG5cdFx0XHR9XG5cdFx0XHRpZiAobGFzdEFyYWJpYyl7blR5cGUgPSBBTjt9XG5cdFx0XHRyZXR1cm4gblR5cGUgPT0gd1R5cGUgPyBuVHlwZSA6IE9OO1xuXHRcdGNhc2UgRVM6XG5cdFx0XHR3VHlwZSA9IGl4ID4gMCA/IGNsYXNzZXNbaXggLSAxXSA6IEI7XG5cdFx0XHRpZiAod1R5cGUgPT0gRU4gJiYgKGl4ICsgMSkgPCB0eXBlcy5sZW5ndGggJiYgdHlwZXNbaXggKyAxXSA9PSBFTil7XG5cdFx0XHRcdHJldHVybiBFTjtcblx0XHRcdH1cblx0XHRcdHJldHVybiBPTjtcblx0XHRjYXNlIEVUOlxuXHRcdFx0aWYgKGl4ID4gMCAmJiBjbGFzc2VzW2l4IC0gMV0gPT0gRU4pe1xuXHRcdFx0XHRyZXR1cm4gRU47XG5cdFx0XHR9XG5cdFx0XHRpZiAobGFzdEFyYWJpYyl7XG5cdFx0XHRcdHJldHVybiBPTjtcblx0XHRcdH1cblx0XHRcdGkgPSBpeCArIDE7XG5cdFx0XHRsZW4gPSB0eXBlcy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoaSA8IGxlbiAmJiB0eXBlc1tpXSA9PSBFVCl7XG5cdFx0XHRcdGkrKztcblx0XHRcdH1cblx0XHRcdGlmIChpIDwgbGVuICYmIHR5cGVzW2ldID09IEVOKXtcblx0XHRcdFx0cmV0dXJuIEVOO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIE9OO1xuXHRcdGNhc2UgTlNNOlxuXHRcdFx0bGVuID0gdHlwZXMubGVuZ3RoO1xuXHRcdFx0aSA9IGl4ICsgMTtcblx0XHRcdHdoaWxlIChpIDwgbGVuICYmIHR5cGVzW2ldID09IE5TTSl7XG5cdFx0XHRcdGkrKztcblx0XHRcdH1cblx0XHRcdGlmIChpIDwgbGVuKXtcblx0XHRcdFx0dmFyIGMgPSBjaGFyc1tpeF0sIHJ0bENhbmRpZGF0ZSA9IChjID49IDB4MDU5MSAmJiBjIDw9IDB4MDhGRikgfHwgYyA9PSAweEZCMUU7XG5cdFx0XHRcdFxuXHRcdFx0XHR3VHlwZSA9IHR5cGVzW2ldO1xuXHRcdFx0XHRpZiAocnRsQ2FuZGlkYXRlICYmICh3VHlwZSA9PSBSIHx8IHdUeXBlID09IEFMKSl7XG5cdFx0XHRcdFx0cmV0dXJuIFI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKGl4IDwgMSB8fCAod1R5cGUgPSB0eXBlc1tpeCAtIDFdKSA9PSBCKXtcblx0XHRcdFx0cmV0dXJuIE9OO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNsYXNzZXNbaXggLSAxXTtcblx0XHRjYXNlIEI6XG5cdFx0XHRsYXN0QXJhYmljID0gZmFsc2U7XG5cdFx0XHRoYXNVQkFUX0IgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIGRpcjtcblx0XHRjYXNlIFM6XG5cdFx0XHRoYXNVQkFUX1MgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIE9OO1xuXHRcdGNhc2UgTFJFOlxuXHRcdGNhc2UgUkxFOlxuXHRcdGNhc2UgTFJPOlxuXHRcdGNhc2UgUkxPOlxuXHRcdGNhc2UgUERGOlxuXHRcdFx0bGFzdEFyYWJpYyA9IGZhbHNlO1xuXHRcdGNhc2UgQk46XG5cdFx0XHRyZXR1cm4gT047XG5cdH1cbn1cblxuZnVuY3Rpb24gX2dldENoYXJhY3RlclR5cGUoIGNoICkge1x0XHRcblx0dmFyIHVjID0gY2guY2hhckNvZGVBdCgwKSwgaGkgPSB1YyA+PiA4O1xuXHRcblx0aWYgKGhpID09IDApIHtcdFx0XG5cdFx0cmV0dXJuICgodWMgPiAweDAwQkYpID8gTCA6IFVuaWNvZGVUQkwwMFt1Y10pO1xuXHR9IGVsc2UgaWYgKGhpID09IDUpIHtcblx0XHRyZXR1cm4gKC9bXFx1MDU5MS1cXHUwNWY0XS8udGVzdChjaCkgPyBSIDogTCk7XG5cdH0gZWxzZSBpZiAoaGkgPT0gNikge1xuXHRcdGlmICgvW1xcdTA2MTAtXFx1MDYxYVxcdTA2NGItXFx1MDY1ZlxcdTA2ZDYtXFx1MDZlNFxcdTA2ZTctXFx1MDZlZF0vLnRlc3QoY2gpKVxuXHRcdFx0cmV0dXJuIE5TTTtcblx0XHRlbHNlIGlmICgvW1xcdTA2NjAtXFx1MDY2OVxcdTA2NmItXFx1MDY2Y10vLnRlc3QoY2gpKVxuXHRcdFx0cmV0dXJuIEFOO1xuXHRcdGVsc2UgaWYgKHVjID09IDB4MDY2QSlcblx0XHRcdHJldHVybiBFVDtcblx0XHRlbHNlIGlmICgvW1xcdTA2ZjAtXFx1MDZmOV0vLnRlc3QoY2gpKVxuXHRcdFx0cmV0dXJuIEVOO1x0XHRcdFxuXHRcdGVsc2Vcblx0XHRcdHJldHVybiBBTDtcblx0fSBlbHNlIGlmIChoaSA9PSAweDIwICYmIHVjIDw9IDB4MjA1Rikge1xuXHRcdHJldHVybiBVbmljb2RlVEJMMjBbdWMgJiAweEZGXTtcblx0fSBlbHNlIGlmIChoaSA9PSAweEZFKSB7XG5cdFx0cmV0dXJuICh1YyA+PSAweEZFNzAgPyBBTCA6IE9OKTtcblx0fVx0XHRcblx0cmV0dXJuIE9OO1x0XG59XG5cbmZ1bmN0aW9uIF9pc0FyYWJpY0RpYWNyaXRpY3MoIGNoICkge1xuXHRyZXR1cm4gKGNoID49ICdcXHUwNjRiJyAmJiBjaCA8PSAnXFx1MDY1NScpO1xufVxuXG4vKiBTdHJvbmcgTFRSIGNoYXJhY3RlciAoMCAtIGV2ZW4pLCByZWd1bGFyIHdpZHRoICovXG5leHBvcnRzLkwgPSBMO1xuLyogU3Ryb25nIFJUTCBjaGFyYWN0ZXIgKDEgLSBvZGQpLCBCaWRpIHdpZHRoICovXG5leHBvcnRzLlIgPSBSO1xuLyogRXVyb3BlYW4gZGlnaXQgKDIgLSBldmVuKSwgcmVndWxhciB3aWR0aCAqL1xuZXhwb3J0cy5FTiA9IEVOO1xuLyogTmV1dHJhbCBSVEwtYnktY29udGV4dCBjaGFyYWN0ZXIgKDMgLSBvZGQpLCByZWd1bGFyIHdpZHRoICovXG5leHBvcnRzLk9OX1IgPSAzO1xuLyogSGluZGkgKEFyYWJpYykgZGlnaXQgKDQgLSBldmVuKSwgQmlkaSB3aWR0aCAqL1xuZXhwb3J0cy5BTiA9IDQ7XG4vKiBBcmFiaWMgTGFtQWxlZiAoNSAtIG9kZCksIEhhbGYgQmlkaSB3aWR0aCAqL1xuZXhwb3J0cy5SX0ggPSA1O1xuLyogaW52aXNpYmxlIEVPTCAoNiAtIGV2ZW4pLCB6ZXJvIHdpZHRoICovXG5leHBvcnRzLkIgPSA2O1xuLyogaW52aXNpYmxlIFJMRSAoNyAtIG9kZCksIHplcm8gd2lkdGggKi9cbmV4cG9ydHMuUkxFID0gNztcblxuZXhwb3J0cy5ET1QgPSBcIlxceEI3XCI7XG5cbi8qKlxuICogUGVyZm9ybXMgdGV4dCByZW9yZGVyaW5nIGJ5IGltcGxlbWVudGluZyBVbmljb2RlIEJpZGkgYWxnb3JpdGhtXG4gKiB3aXRoIGFpbSB0byBwcm9kdWNlIGxvZ2ljYWw8LT52aXN1YWwgbWFwIGFuZCBCaWRpIGxldmVsc1xuICogQHBhcmFtIHtTdHJpbmd9IHRleHQgc3RyaW5nIHRvIGJlIHJlb3JkZXJlZFxuICogQHBhcmFtIHtBcnJheX0gdGV4dENoYXJUeXBlcyB1bmljb2RlIGNoYXJhY3RlciB0eXBlcyBwcm9kdWNlZCBieSBjYWxsIHRvICdoYXNCaWRpQ2hhcmFjdGVycydcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNSdGwgJ3RydWUnIGZvciByaWdodC10by1sZWZ0IHRleHQgZGlyZWN0aW9uLCBvdGhlcndpc2UgJ2ZhbHNlJ1xuICpcbiAqIEByZXR1cm4ge09iamVjdH0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgbG9naWNhbEZyb21WaXN1YWwgbWFwIGFuZCBCaWRpIGxldmVsc1xuICoqL1xuZXhwb3J0cy5kb0JpZGlSZW9yZGVyID0gZnVuY3Rpb24odGV4dCwgdGV4dENoYXJUeXBlcywgaXNSdGwpIHtcblx0aWYgKHRleHQubGVuZ3RoIDwgMilcblx0XHRyZXR1cm4ge307XG5cdFx0XG5cdHZhciBjaGFycyA9IHRleHQuc3BsaXQoXCJcIiksIGxvZ2ljYWxGcm9tVmlzdWFsID0gbmV3IEFycmF5KGNoYXJzLmxlbmd0aCksXG5cdFx0YmlkaUxldmVscyA9IG5ldyBBcnJheShjaGFycy5sZW5ndGgpLCBsZXZlbHMgPSBbXTsgXG5cblx0ZGlyID0gaXNSdGwgPyBSVEwgOiBMVFI7XG5cblx0X2NvbXB1dGVMZXZlbHMoY2hhcnMsIGxldmVscywgY2hhcnMubGVuZ3RoLCB0ZXh0Q2hhclR5cGVzKTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxvZ2ljYWxGcm9tVmlzdWFsLmxlbmd0aDsgbG9naWNhbEZyb21WaXN1YWxbaV0gPSBpLCBpKyspO1xuXG5cdF9pbnZlcnRMZXZlbCgyLCBsZXZlbHMsIGxvZ2ljYWxGcm9tVmlzdWFsKTtcblx0X2ludmVydExldmVsKDEsIGxldmVscywgbG9naWNhbEZyb21WaXN1YWwpO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbG9naWNhbEZyb21WaXN1YWwubGVuZ3RoIC0gMTsgaSsrKSB7IC8vZml4IGxldmVscyB0byByZWZsZWN0IGNoYXJhY3RlciB3aWR0aFxuXHRcdGlmICh0ZXh0Q2hhclR5cGVzW2ldID09PSBBTikge1xuXHRcdFx0bGV2ZWxzW2ldID0gZXhwb3J0cy5BTjtcblx0XHR9IGVsc2UgaWYgKGxldmVsc1tpXSA9PT0gUiAmJiAoKHRleHRDaGFyVHlwZXNbaV0gPiBBTCAmJiB0ZXh0Q2hhclR5cGVzW2ldIDwgTFJFKSBcblx0XHRcdHx8IHRleHRDaGFyVHlwZXNbaV0gPT09IE9OIHx8IHRleHRDaGFyVHlwZXNbaV0gPT09IEJOKSkge1xuXHRcdFx0bGV2ZWxzW2ldID0gZXhwb3J0cy5PTl9SO1xuXHRcdH0gZWxzZSBpZiAoKGkgPiAwICYmIGNoYXJzW2kgLSAxXSA9PT0gJ1xcdTA2NDQnKSAmJiAvXFx1MDYyMnxcXHUwNjIzfFxcdTA2MjV8XFx1MDYyNy8udGVzdChjaGFyc1tpXSkpIHtcblx0XHRcdGxldmVsc1tpIC0gMV0gPSBsZXZlbHNbaV0gPSBleHBvcnRzLlJfSDtcblx0XHRcdGkrKztcblx0XHR9XG5cdH1cblx0LyogZml4IGxldmVsIHRvIG1hcmsgemVybyBsZW5ndGggRU9MICovXG5cdGlmIChjaGFyc1tjaGFycy5sZW5ndGggLSAxXSA9PT0gZXhwb3J0cy5ET1QpXG5cdFx0bGV2ZWxzW2NoYXJzLmxlbmd0aCAtIDFdID0gZXhwb3J0cy5CO1xuXHRcdFx0XHRcblx0aWYgKGNoYXJzWzBdID09PSAnXFx1MjAyQicpXG5cdFx0bGV2ZWxzWzBdID0gZXhwb3J0cy5STEU7XG5cdFx0XHRcdFxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxvZ2ljYWxGcm9tVmlzdWFsLmxlbmd0aDsgaSsrKSB7XG5cdFx0YmlkaUxldmVsc1tpXSA9IGxldmVsc1tsb2dpY2FsRnJvbVZpc3VhbFtpXV07XG5cdH1cblxuXHRyZXR1cm4geydsb2dpY2FsRnJvbVZpc3VhbCc6IGxvZ2ljYWxGcm9tVmlzdWFsLCAnYmlkaUxldmVscyc6IGJpZGlMZXZlbHN9O1xufTtcdFxuXG4vKipcbiAqIFBlcmZvcm1zIGNoYXJhY3RlciBjbGFzc2lmaWNhdGlvbiwgdG8gYmUgdXNlZCBpbiBVbmljb2RlIEJpZGkgYWxnb3JpdGhtLlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHQgc3RyaW5nIHRvIGJlIHJlb3JkZXJlZFxuICogQHBhcmFtIHtBcnJheX0gdGV4dENoYXJUeXBlcyB1bmljb2RlIGNoYXJhY3RlciB0eXBlcyAodG8gYmUgZmlsbGVkIGJ5IHRoaXMgbWV0aG9kKVxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59ICd0cnVlJyBpZiB0ZXh0IGNvbnRhaW5zIEJpZGkgY2hhcmFjdGVycywgb3RoZXJ3aXNlICdmYWxzZScgXG4gKiovXG5leHBvcnRzLmhhc0JpZGlDaGFyYWN0ZXJzID0gZnVuY3Rpb24odGV4dCwgdGV4dENoYXJUeXBlcyl7XG5cdHZhciByZXQgPSBmYWxzZTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKXtcblx0XHR0ZXh0Q2hhclR5cGVzW2ldID0gX2dldENoYXJhY3RlclR5cGUodGV4dC5jaGFyQXQoaSkpO1xuXHRcdGlmICghcmV0ICYmICh0ZXh0Q2hhclR5cGVzW2ldID09IFIgfHwgdGV4dENoYXJUeXBlc1tpXSA9PSBBTCB8fCB0ZXh0Q2hhclR5cGVzW2ldID09IEFOKSlcblx0XHRcdHJldCA9IHRydWU7XG5cdH1cblx0cmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogUmV0dXJucyB2aXN1YWwgaW5kZXggY29ycmVzcG9uZGluZyB0byBsb2dpY2FsIGluZGV4IGJhc2luZyBvbiBsb2dpY2FsRnJvbXZpc3VhbCBcbiAqIG1hcCBwcm92aWRlZCBieSBVbmljb2RlIEJpZGkgYWxnb3JpdGhtLlxuICogQHBhcmFtIHtOdW1iZXJ9IGxvZ0lkeCBsb2dpY2FsIGluZGV4IG9mIGNoYXJhY3RlciBpbiB0ZXh0IGJ1ZmZlclxuICogQHBhcmFtIHtPYmplY3R9IHJvd01hcCBvYmplY3QgY29udGFpbmluZyBsb2dpY2FsRnJvbVZpc3VhbCBtYXBcbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHZpc3VhbCBpbmRleCAob24gZGlzcGxheSkgY29ycmVzcG9uZGluZyB0byBsb2dpY2FsIGluZGV4XG4gKiovXHRcbmV4cG9ydHMuZ2V0VmlzdWFsRnJvbUxvZ2ljYWxJZHggPSBmdW5jdGlvbihsb2dJZHgsIHJvd01hcCkge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHJvd01hcC5sb2dpY2FsRnJvbVZpc3VhbC5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChyb3dNYXAubG9naWNhbEZyb21WaXN1YWxbaV0gPT0gbG9nSWR4KVxuXHRcdFx0cmV0dXJuIGk7XG5cdH1cblx0cmV0dXJuIDA7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/bidiutil.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/deep_copy.js":
/*!****************************************************!*\
  !*** ./node_modules/ace-code/src/lib/deep_copy.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("exports.deepCopy = function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj)\n        return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n        copy = [];\n        for (let key = 0; key < obj.length; key++) {\n            copy[key] = deepCopy(obj[key]);\n        }\n        return copy;\n    }\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\n        return obj;\n    \n    copy = {};\n    for (let key in obj)\n        copy[key] = deepCopy(obj[key]);\n    return copy;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9kZWVwX2NvcHkuanMiLCJtYXBwaW5ncyI6IkFBQUEsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0JBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9kZWVwX2NvcHkuanM/ZDAzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnRzLmRlZXBDb3B5ID0gZnVuY3Rpb24gZGVlcENvcHkob2JqKSB7XG4gICAgaWYgKHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgfHwgIW9iailcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB2YXIgY29weTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIGNvcHkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQga2V5ID0gMDsga2V5IDwgb2JqLmxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgICAgIGNvcHlba2V5XSA9IGRlZXBDb3B5KG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29weTtcbiAgICB9XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopICE9PSBcIltvYmplY3QgT2JqZWN0XVwiKVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIFxuICAgIGNvcHkgPSB7fTtcbiAgICBmb3IgKGxldCBrZXkgaW4gb2JqKVxuICAgICAgICBjb3B5W2tleV0gPSBkZWVwQ29weShvYmpba2V5XSk7XG4gICAgcmV0dXJuIGNvcHk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/deep_copy.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/default_english_messages.js":
/*!*******************************************************************!*\
  !*** ./node_modules/ace-code/src/lib/default_english_messages.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("var defaultEnglishMessages = {\n    \"autocomplete.popup.aria-roledescription\": \"Autocomplete suggestions\",\n    \"autocomplete.popup.aria-label\": \"Autocomplete suggestions\",\n    \"autocomplete.popup.item.aria-roledescription\": \"item\",\n    \"autocomplete.loading\": \"Loading...\",\n    \"editor.scroller.aria-roledescription\": \"editor\",\n    \"editor.scroller.aria-label\": \"Editor content, press Enter to start editing, press Escape to exit\",\n    \"editor.gutter.aria-roledescription\": \"editor\",\n    \"editor.gutter.aria-label\": \"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit\",\n    \"error-marker.good-state\": \"Looks good!\",\n    \"prompt.recently-used\": \"Recently used\",\n    \"prompt.other-commands\": \"Other commands\",\n    \"prompt.no-matching-commands\": \"No matching commands\",\n    \"search-box.find.placeholder\": \"Search for\",\n    \"search-box.find-all.text\": \"All\",\n    \"search-box.replace.placeholder\": \"Replace with\",\n    \"search-box.replace-next.text\": \"Replace\",\n    \"search-box.replace-all.text\": \"All\",\n    \"search-box.toggle-replace.title\": \"Toggle Replace mode\",\n    \"search-box.toggle-regexp.title\": \"RegExp Search\",\n    \"search-box.toggle-case.title\": \"CaseSensitive Search\",\n    \"search-box.toggle-whole-word.title\": \"Whole Word Search\",\n    \"search-box.toggle-in-selection.title\": \"Search In Selection\",\n    \"search-box.search-counter\": \"$0 of $1\",\n    \"text-input.aria-roledescription\": \"editor\",\n    \"text-input.aria-label\": \"Cursor at row $0\",\n    \"gutter.code-folding.range.aria-label\": \"Toggle code folding, rows $0 through $1\",\n    \"gutter.code-folding.closed.aria-label\": \"Toggle code folding, rows $0 through $1\",\n    \"gutter.code-folding.open.aria-label\": \"Toggle code folding, row $0\",\n    \"gutter.code-folding.closed.title\": \"Unfold code\",\n    \"gutter.code-folding.open.title\": \"Fold code\",\n    \"gutter.annotation.aria-label.error\": \"Error, read annotations row $0\",\n    \"gutter.annotation.aria-label.warning\": \"Warning, read annotations row $0\",\n    \"gutter.annotation.aria-label.info\": \"Info, read annotations row $0\",\n    \"inline-fold.closed.title\": \"Unfold code\",\n    \"gutter-tooltip.aria-label.error.singular\": \"error\",\n    \"gutter-tooltip.aria-label.error.plural\": \"errors\",\n    \"gutter-tooltip.aria-label.warning.singular\": \"warning\",\n    \"gutter-tooltip.aria-label.warning.plural\": \"warnings\",\n    \"gutter-tooltip.aria-label.info.singular\": \"information message\",\n    \"gutter-tooltip.aria-label.info.plural\": \"information messages\",\n    \"gutter.annotation.aria-label.security\": \"Security finding, read annotations row $0\",\n    \"gutter.annotation.aria-label.hint\": \"Suggestion, read annotations row $0\",\n    \"gutter-tooltip.aria-label.security.singular\": \"security finding\",\n    \"gutter-tooltip.aria-label.security.plural\": \"security findings\",\n    \"gutter-tooltip.aria-label.hint.singular\": \"suggestion\",\n    \"gutter-tooltip.aria-label.hint.plural\": \"suggestions\"\n}\n\nexports.defaultEnglishMessages = defaultEnglishMessages;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9kZWZhdWx0X2VuZ2xpc2hfbWVzc2FnZXMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9kZWZhdWx0X2VuZ2xpc2hfbWVzc2FnZXMuanM/YzIyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVmYXVsdEVuZ2xpc2hNZXNzYWdlcyA9IHtcbiAgICBcImF1dG9jb21wbGV0ZS5wb3B1cC5hcmlhLXJvbGVkZXNjcmlwdGlvblwiOiBcIkF1dG9jb21wbGV0ZSBzdWdnZXN0aW9uc1wiLFxuICAgIFwiYXV0b2NvbXBsZXRlLnBvcHVwLmFyaWEtbGFiZWxcIjogXCJBdXRvY29tcGxldGUgc3VnZ2VzdGlvbnNcIixcbiAgICBcImF1dG9jb21wbGV0ZS5wb3B1cC5pdGVtLmFyaWEtcm9sZWRlc2NyaXB0aW9uXCI6IFwiaXRlbVwiLFxuICAgIFwiYXV0b2NvbXBsZXRlLmxvYWRpbmdcIjogXCJMb2FkaW5nLi4uXCIsXG4gICAgXCJlZGl0b3Iuc2Nyb2xsZXIuYXJpYS1yb2xlZGVzY3JpcHRpb25cIjogXCJlZGl0b3JcIixcbiAgICBcImVkaXRvci5zY3JvbGxlci5hcmlhLWxhYmVsXCI6IFwiRWRpdG9yIGNvbnRlbnQsIHByZXNzIEVudGVyIHRvIHN0YXJ0IGVkaXRpbmcsIHByZXNzIEVzY2FwZSB0byBleGl0XCIsXG4gICAgXCJlZGl0b3IuZ3V0dGVyLmFyaWEtcm9sZWRlc2NyaXB0aW9uXCI6IFwiZWRpdG9yXCIsXG4gICAgXCJlZGl0b3IuZ3V0dGVyLmFyaWEtbGFiZWxcIjogXCJFZGl0b3IgZ3V0dGVyLCBwcmVzcyBFbnRlciB0byBpbnRlcmFjdCB3aXRoIGNvbnRyb2xzIHVzaW5nIGFycm93IGtleXMsIHByZXNzIEVzY2FwZSB0byBleGl0XCIsXG4gICAgXCJlcnJvci1tYXJrZXIuZ29vZC1zdGF0ZVwiOiBcIkxvb2tzIGdvb2QhXCIsXG4gICAgXCJwcm9tcHQucmVjZW50bHktdXNlZFwiOiBcIlJlY2VudGx5IHVzZWRcIixcbiAgICBcInByb21wdC5vdGhlci1jb21tYW5kc1wiOiBcIk90aGVyIGNvbW1hbmRzXCIsXG4gICAgXCJwcm9tcHQubm8tbWF0Y2hpbmctY29tbWFuZHNcIjogXCJObyBtYXRjaGluZyBjb21tYW5kc1wiLFxuICAgIFwic2VhcmNoLWJveC5maW5kLnBsYWNlaG9sZGVyXCI6IFwiU2VhcmNoIGZvclwiLFxuICAgIFwic2VhcmNoLWJveC5maW5kLWFsbC50ZXh0XCI6IFwiQWxsXCIsXG4gICAgXCJzZWFyY2gtYm94LnJlcGxhY2UucGxhY2Vob2xkZXJcIjogXCJSZXBsYWNlIHdpdGhcIixcbiAgICBcInNlYXJjaC1ib3gucmVwbGFjZS1uZXh0LnRleHRcIjogXCJSZXBsYWNlXCIsXG4gICAgXCJzZWFyY2gtYm94LnJlcGxhY2UtYWxsLnRleHRcIjogXCJBbGxcIixcbiAgICBcInNlYXJjaC1ib3gudG9nZ2xlLXJlcGxhY2UudGl0bGVcIjogXCJUb2dnbGUgUmVwbGFjZSBtb2RlXCIsXG4gICAgXCJzZWFyY2gtYm94LnRvZ2dsZS1yZWdleHAudGl0bGVcIjogXCJSZWdFeHAgU2VhcmNoXCIsXG4gICAgXCJzZWFyY2gtYm94LnRvZ2dsZS1jYXNlLnRpdGxlXCI6IFwiQ2FzZVNlbnNpdGl2ZSBTZWFyY2hcIixcbiAgICBcInNlYXJjaC1ib3gudG9nZ2xlLXdob2xlLXdvcmQudGl0bGVcIjogXCJXaG9sZSBXb3JkIFNlYXJjaFwiLFxuICAgIFwic2VhcmNoLWJveC50b2dnbGUtaW4tc2VsZWN0aW9uLnRpdGxlXCI6IFwiU2VhcmNoIEluIFNlbGVjdGlvblwiLFxuICAgIFwic2VhcmNoLWJveC5zZWFyY2gtY291bnRlclwiOiBcIiQwIG9mICQxXCIsXG4gICAgXCJ0ZXh0LWlucHV0LmFyaWEtcm9sZWRlc2NyaXB0aW9uXCI6IFwiZWRpdG9yXCIsXG4gICAgXCJ0ZXh0LWlucHV0LmFyaWEtbGFiZWxcIjogXCJDdXJzb3IgYXQgcm93ICQwXCIsXG4gICAgXCJndXR0ZXIuY29kZS1mb2xkaW5nLnJhbmdlLmFyaWEtbGFiZWxcIjogXCJUb2dnbGUgY29kZSBmb2xkaW5nLCByb3dzICQwIHRocm91Z2ggJDFcIixcbiAgICBcImd1dHRlci5jb2RlLWZvbGRpbmcuY2xvc2VkLmFyaWEtbGFiZWxcIjogXCJUb2dnbGUgY29kZSBmb2xkaW5nLCByb3dzICQwIHRocm91Z2ggJDFcIixcbiAgICBcImd1dHRlci5jb2RlLWZvbGRpbmcub3Blbi5hcmlhLWxhYmVsXCI6IFwiVG9nZ2xlIGNvZGUgZm9sZGluZywgcm93ICQwXCIsXG4gICAgXCJndXR0ZXIuY29kZS1mb2xkaW5nLmNsb3NlZC50aXRsZVwiOiBcIlVuZm9sZCBjb2RlXCIsXG4gICAgXCJndXR0ZXIuY29kZS1mb2xkaW5nLm9wZW4udGl0bGVcIjogXCJGb2xkIGNvZGVcIixcbiAgICBcImd1dHRlci5hbm5vdGF0aW9uLmFyaWEtbGFiZWwuZXJyb3JcIjogXCJFcnJvciwgcmVhZCBhbm5vdGF0aW9ucyByb3cgJDBcIixcbiAgICBcImd1dHRlci5hbm5vdGF0aW9uLmFyaWEtbGFiZWwud2FybmluZ1wiOiBcIldhcm5pbmcsIHJlYWQgYW5ub3RhdGlvbnMgcm93ICQwXCIsXG4gICAgXCJndXR0ZXIuYW5ub3RhdGlvbi5hcmlhLWxhYmVsLmluZm9cIjogXCJJbmZvLCByZWFkIGFubm90YXRpb25zIHJvdyAkMFwiLFxuICAgIFwiaW5saW5lLWZvbGQuY2xvc2VkLnRpdGxlXCI6IFwiVW5mb2xkIGNvZGVcIixcbiAgICBcImd1dHRlci10b29sdGlwLmFyaWEtbGFiZWwuZXJyb3Iuc2luZ3VsYXJcIjogXCJlcnJvclwiLFxuICAgIFwiZ3V0dGVyLXRvb2x0aXAuYXJpYS1sYWJlbC5lcnJvci5wbHVyYWxcIjogXCJlcnJvcnNcIixcbiAgICBcImd1dHRlci10b29sdGlwLmFyaWEtbGFiZWwud2FybmluZy5zaW5ndWxhclwiOiBcIndhcm5pbmdcIixcbiAgICBcImd1dHRlci10b29sdGlwLmFyaWEtbGFiZWwud2FybmluZy5wbHVyYWxcIjogXCJ3YXJuaW5nc1wiLFxuICAgIFwiZ3V0dGVyLXRvb2x0aXAuYXJpYS1sYWJlbC5pbmZvLnNpbmd1bGFyXCI6IFwiaW5mb3JtYXRpb24gbWVzc2FnZVwiLFxuICAgIFwiZ3V0dGVyLXRvb2x0aXAuYXJpYS1sYWJlbC5pbmZvLnBsdXJhbFwiOiBcImluZm9ybWF0aW9uIG1lc3NhZ2VzXCIsXG4gICAgXCJndXR0ZXIuYW5ub3RhdGlvbi5hcmlhLWxhYmVsLnNlY3VyaXR5XCI6IFwiU2VjdXJpdHkgZmluZGluZywgcmVhZCBhbm5vdGF0aW9ucyByb3cgJDBcIixcbiAgICBcImd1dHRlci5hbm5vdGF0aW9uLmFyaWEtbGFiZWwuaGludFwiOiBcIlN1Z2dlc3Rpb24sIHJlYWQgYW5ub3RhdGlvbnMgcm93ICQwXCIsXG4gICAgXCJndXR0ZXItdG9vbHRpcC5hcmlhLWxhYmVsLnNlY3VyaXR5LnNpbmd1bGFyXCI6IFwic2VjdXJpdHkgZmluZGluZ1wiLFxuICAgIFwiZ3V0dGVyLXRvb2x0aXAuYXJpYS1sYWJlbC5zZWN1cml0eS5wbHVyYWxcIjogXCJzZWN1cml0eSBmaW5kaW5nc1wiLFxuICAgIFwiZ3V0dGVyLXRvb2x0aXAuYXJpYS1sYWJlbC5oaW50LnNpbmd1bGFyXCI6IFwic3VnZ2VzdGlvblwiLFxuICAgIFwiZ3V0dGVyLXRvb2x0aXAuYXJpYS1sYWJlbC5oaW50LnBsdXJhbFwiOiBcInN1Z2dlc3Rpb25zXCJcbn1cblxuZXhwb3J0cy5kZWZhdWx0RW5nbGlzaE1lc3NhZ2VzID0gZGVmYXVsdEVuZ2xpc2hNZXNzYWdlczsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/default_english_messages.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/dom.js":
/*!**********************************************!*\
  !*** ./node_modules/ace-code/src/lib/dom.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar useragent = __webpack_require__(/*! ./useragent */ \"./node_modules/ace-code/src/lib/useragent.js\"); \nvar XHTML_NS = \"http://www.w3.org/1999/xhtml\";\n\n/**\n * \n * @param {any} arr\n * @param {HTMLElement} [parent]\n * @param [refs]\n * @returns {HTMLElement | Text | any[]} \n */\nexports.buildDom = function buildDom(arr, parent, refs) {\n    if (typeof arr == \"string\" && arr) {\n        var txt = document.createTextNode(arr);\n        if (parent)\n            parent.appendChild(txt);\n        return txt;\n    }\n    \n    if (!Array.isArray(arr)) {\n        if (arr && arr.appendChild && parent)\n            parent.appendChild(arr);\n        return arr;\n    }\n    if (typeof arr[0] != \"string\" || !arr[0]) {\n        var els = [];\n        for (var i = 0; i < arr.length; i++) {\n            var ch = buildDom(arr[i], parent, refs);\n            ch && els.push(ch);\n        }\n        return els;\n    }\n    \n    var el = document.createElement(arr[0]);\n    var options = arr[1];\n    var childIndex = 1;\n    if (options && typeof options == \"object\" && !Array.isArray(options))\n        childIndex = 2;\n    for (var i = childIndex; i < arr.length; i++)\n        buildDom(arr[i], el, refs);\n    if (childIndex == 2) {\n        Object.keys(options).forEach(function(n) {\n            var val = options[n];\n            if (n === \"class\") {\n                el.className = Array.isArray(val) ? val.join(\" \") : val;\n            } else if (typeof val == \"function\" || n == \"value\" || n[0] == \"$\") {\n                el[n] = val;\n            } else if (n === \"ref\") {\n                if (refs) refs[val] = el;\n            } else if (n === \"style\") {\n                if (typeof val == \"string\") el.style.cssText = val;\n            } else if (val != null) {\n                el.setAttribute(n, val);\n            }\n        });\n    }\n    if (parent)\n        parent.appendChild(el);\n    return el;\n};\n\n/**\n * \n * @param {Document} [doc]\n * @returns {HTMLHeadElement|HTMLElement}\n */\nexports.getDocumentHead = function(doc) {\n    if (!doc)\n        doc = document;\n    return doc.head || doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\n};\n\n\n/**\n * @template {keyof HTMLElementTagNameMap} T\n * @param {T | string} tag\n * @param {string} [ns]\n * @returns {HTMLElementTagNameMap[T]}\n */\nexports.createElement = function(tag, ns) {\n    // @ts-ignore\n    return document.createElementNS ?\n            document.createElementNS(ns || XHTML_NS, tag) :\n            document.createElement(tag);\n};\n\n/**\n * @param {HTMLElement} element\n */\nexports.removeChildren = function(element) {\n    element.innerHTML = \"\";\n};\n\n/**\n * @param {string} textContent\n * @param {HTMLElement} [element]\n * @returns {Text}\n */\nexports.createTextNode = function(textContent, element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createTextNode(textContent);\n};\n\n/**\n * @param {HTMLElement} [element]\n * @returns {DocumentFragment}\n */\nexports.createFragment = function(element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createDocumentFragment();\n};\n\n/**\n * @param {HTMLElement} el\n * @param {string} name\n * @returns {boolean}\n */\nexports.hasCssClass = function(el, name) {\n    var classes = (el.className + \"\").split(/\\s+/g);\n    return classes.indexOf(name) !== -1;\n};\n\n/**\n * Add a CSS class to the list of classes on the given node\n * @param {HTMLElement} el\n * @param {string} name\n*/\nexports.addCssClass = function(el, name) {\n    if (!exports.hasCssClass(el, name)) {\n        el.className += \" \" + name;\n    }\n};\n\n/**\n * Remove a CSS class from the list of classes on the given node\n * @param {HTMLElement} el\n * @param {string} name\n */\nexports.removeCssClass = function(el, name) {\n    var classes = el.className.split(/\\s+/g);\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        classes.splice(index, 1);\n    }\n    el.className = classes.join(\" \");\n};\n\n/**\n * @param {HTMLElement} el\n * @param {string} name\n * @returns {boolean}\n */\nexports.toggleCssClass = function(el, name) {\n    var classes = el.className.split(/\\s+/g), add = true;\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        add = false;\n        classes.splice(index, 1);\n    }\n    if (add)\n        classes.push(name);\n\n    el.className = classes.join(\" \");\n    return add;\n};\n\n/**\n * Add or remove a CSS class from the list of classes on the given node\n * depending on the value of <tt>include</tt>\n * @param {HTMLElement} node\n * @param {string} className\n * @param {boolean} include\n */\nexports.setCssClass = function(node, className, include) {\n    if (include) {\n        exports.addCssClass(node, className);\n    } else {\n        exports.removeCssClass(node, className);\n    }\n};\n\n/**\n * @param {string} id\n * @param {Document} [doc]\n * @returns {boolean}\n */\nexports.hasCssString = function(id, doc) {\n    var index = 0, sheets;\n    doc = doc || document;\n    if ((sheets = doc.querySelectorAll(\"style\"))) {\n        while (index < sheets.length) {\n            if (sheets[index++].id === id) {\n                return true;\n            }\n        }\n    }\n};\n\n/**\n * @param {string} id\n * @param {Document} [doc]\n */\nexports.removeElementById = function(id, doc) {\n    doc = doc || document;\n    if(doc.getElementById(id)) {\n        doc.getElementById(id).remove();\n    }\n};\n\nvar strictCSP;\nvar cssCache = [];\nexports.useStrictCSP = function(value) {\n    strictCSP = value;\n    if (value == false) insertPendingStyles();\n    else if (!cssCache) cssCache = [];\n};\n\nfunction insertPendingStyles() {\n    var cache = cssCache;\n    cssCache = null;\n    cache && cache.forEach(function(item) {\n        importCssString(item[0], item[1]);\n    });\n}\n\nfunction importCssString(cssText, id, target) {\n    if (typeof document == \"undefined\")\n        return;\n    if (cssCache) {\n        if (target) {\n            insertPendingStyles();\n        } else if (target === false) {\n            return cssCache.push([cssText, id]);\n        }\n    }\n    if (strictCSP) return;\n\n    var container = target;\n    if (!target || !target.getRootNode) {\n        container = document;\n    } else {\n        container = target.getRootNode();\n        if (!container || container == target)\n            container = document;\n    }\n    \n    var doc = container.ownerDocument || container;\n    \n    // If style is already imported return immediately.\n    if (id && exports.hasCssString(id, container))\n        return null;\n    \n    if (id)\n        cssText += \"\\n/*# sourceURL=ace/css/\" + id + \" */\";\n    \n    var style = exports.createElement(\"style\");\n    style.appendChild(doc.createTextNode(cssText));\n    if (id)\n        style.id = id;\n\n    if (container == doc)\n        container = exports.getDocumentHead(doc);\n    container.insertBefore(style, container.firstChild);\n}\nexports.importCssString = importCssString;\n\n/**\n * @param {string} uri\n * @param {Document} [doc]\n */\nexports.importCssStylsheet = function(uri, doc) {\n    exports.buildDom([\"link\", {rel: \"stylesheet\", href: uri}], exports.getDocumentHead(doc));\n};\n\n/**\n * @param {Document} [doc]\n * @returns {number}\n */\nexports.scrollbarWidth = function(doc) {\n    var inner = exports.createElement(\"ace_inner\");\n    inner.style.width = \"100%\";\n    inner.style.minWidth = \"0px\";\n    inner.style.height = \"200px\";\n    inner.style.display = \"block\";\n\n    var outer = exports.createElement(\"ace_outer\");\n    var style = outer.style;\n\n    style.position = \"absolute\";\n    style.left = \"-10000px\";\n    style.overflow = \"hidden\";\n    style.width = \"200px\";\n    style.minWidth = \"0px\";\n    style.height = \"150px\";\n    style.display = \"block\";\n\n    outer.appendChild(inner);\n\n    var body = (doc && doc.documentElement) || (document && document.documentElement);\n    if (!body) return 0;\n\n    body.appendChild(outer);\n\n    var noScrollbar = inner.offsetWidth;\n\n    style.overflow = \"scroll\";\n    var withScrollbar = inner.offsetWidth;\n\n    if (noScrollbar === withScrollbar) {\n        withScrollbar = outer.clientWidth;\n    }\n\n    body.removeChild(outer);\n\n    return noScrollbar - withScrollbar;\n};\n\n/**\n * @param {Element} element\n * @param [style]\n * @returns {Partial<CSSStyleDeclaration>}\n */\nexports.computedStyle = function(element, style) {\n    return window.getComputedStyle(element, \"\") || {};\n};\n\n/**\n * \n * @param {CSSStyleDeclaration} styles\n * @param {string} property\n * @param {string} value\n */\nexports.setStyle = function(styles, property, value) {\n    if (styles[property] !== value) {\n        //console.log(\"set style\", property, styles[property], value);\n        styles[property] = value;\n    }\n};\n\nexports.HAS_CSS_ANIMATION = false;\nexports.HAS_CSS_TRANSFORMS = false;\nexports.HI_DPI = useragent.isWin\n    ? typeof window !== \"undefined\" && window.devicePixelRatio >= 1.5\n    : true;\n\nif (useragent.isChromeOS) exports.HI_DPI = false;\n\nif (typeof document !== \"undefined\") {\n    // detect CSS transformation support\n    var div = document.createElement(\"div\");\n    if (exports.HI_DPI && div.style.transform  !== undefined)\n        exports.HAS_CSS_TRANSFORMS = true;\n    if (!useragent.isEdge && typeof div.style.animationName !== \"undefined\")\n        exports.HAS_CSS_ANIMATION = true;\n    div = null;\n}\n\nif (exports.HAS_CSS_TRANSFORMS) {\n    exports.translate = function(element, tx, ty) {\n        element.style.transform = \"translate(\" + Math.round(tx) + \"px, \" + Math.round(ty) +\"px)\";\n    };\n} else {\n    exports.translate = function(element, tx, ty) {\n        element.style.top = Math.round(ty) + \"px\";\n        element.style.left = Math.round(tx) + \"px\";\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9kb20uanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZ0JBQWdCLG1CQUFPLENBQUMsaUVBQWE7QUFDckM7O0FBRUE7QUFDQTtBQUNBLFdBQVcsS0FBSztBQUNoQixXQUFXLGFBQWE7QUFDeEI7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixnQkFBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLGFBQWE7QUFDYjtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxjQUFjLDZCQUE2QjtBQUMzQyxXQUFXLFlBQVk7QUFDdkIsV0FBVyxRQUFRO0FBQ25CLGFBQWE7QUFDYjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxhQUFhO0FBQ3hCLGFBQWE7QUFDYjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLGFBQWE7QUFDeEIsYUFBYTtBQUNiO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsYUFBYTtBQUN4QixXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsUUFBUTtBQUNuQjtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsUUFBUTtBQUNuQjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsYUFBYTtBQUN4QixXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QixXQUFXLFFBQVE7QUFDbkIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsVUFBVTtBQUNyQixhQUFhO0FBQ2I7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCOztBQUV2QjtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVU7QUFDckI7QUFDQSwwQkFBMEI7QUFDMUIsK0JBQStCLDZCQUE2QjtBQUM1RDs7QUFFQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixhQUFhO0FBQ2I7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLGFBQWE7QUFDYjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQyxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCO0FBQ3pCLDBCQUEwQjtBQUMxQixjQUFjO0FBQ2Q7QUFDQTs7QUFFQSwwQkFBMEIsY0FBYzs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBCQUEwQjtBQUNsQztBQUNBLFFBQVEseUJBQXlCO0FBQ2pDO0FBQ0E7O0FBRUE7QUFDQSxJQUFJLGlCQUFpQjtBQUNyQjtBQUNBO0FBQ0EsRUFBRTtBQUNGLElBQUksaUJBQWlCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbGliL2RvbS5qcz8yN2JlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgdXNlcmFnZW50ID0gcmVxdWlyZShcIi4vdXNlcmFnZW50XCIpOyBcbnZhciBYSFRNTF9OUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG4vKipcbiAqIFxuICogQHBhcmFtIHthbnl9IGFyclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gW3BhcmVudF1cbiAqIEBwYXJhbSBbcmVmc11cbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudCB8IFRleHQgfCBhbnlbXX0gXG4gKi9cbmV4cG9ydHMuYnVpbGREb20gPSBmdW5jdGlvbiBidWlsZERvbShhcnIsIHBhcmVudCwgcmVmcykge1xuICAgIGlmICh0eXBlb2YgYXJyID09IFwic3RyaW5nXCIgJiYgYXJyKSB7XG4gICAgICAgIHZhciB0eHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhcnIpO1xuICAgICAgICBpZiAocGFyZW50KVxuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHR4dCk7XG4gICAgICAgIHJldHVybiB0eHQ7XG4gICAgfVxuICAgIFxuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICAgIGlmIChhcnIgJiYgYXJyLmFwcGVuZENoaWxkICYmIHBhcmVudClcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChhcnIpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGFyclswXSAhPSBcInN0cmluZ1wiIHx8ICFhcnJbMF0pIHtcbiAgICAgICAgdmFyIGVscyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNoID0gYnVpbGREb20oYXJyW2ldLCBwYXJlbnQsIHJlZnMpO1xuICAgICAgICAgICAgY2ggJiYgZWxzLnB1c2goY2gpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbHM7XG4gICAgfVxuICAgIFxuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYXJyWzBdKTtcbiAgICB2YXIgb3B0aW9ucyA9IGFyclsxXTtcbiAgICB2YXIgY2hpbGRJbmRleCA9IDE7XG4gICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMgPT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShvcHRpb25zKSlcbiAgICAgICAgY2hpbGRJbmRleCA9IDI7XG4gICAgZm9yICh2YXIgaSA9IGNoaWxkSW5kZXg7IGkgPCBhcnIubGVuZ3RoOyBpKyspXG4gICAgICAgIGJ1aWxkRG9tKGFycltpXSwgZWwsIHJlZnMpO1xuICAgIGlmIChjaGlsZEluZGV4ID09IDIpIHtcbiAgICAgICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gb3B0aW9uc1tuXTtcbiAgICAgICAgICAgIGlmIChuID09PSBcImNsYXNzXCIpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc05hbWUgPSBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwuam9pbihcIiBcIikgOiB2YWw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT0gXCJmdW5jdGlvblwiIHx8IG4gPT0gXCJ2YWx1ZVwiIHx8IG5bMF0gPT0gXCIkXCIpIHtcbiAgICAgICAgICAgICAgICBlbFtuXSA9IHZhbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiA9PT0gXCJyZWZcIikge1xuICAgICAgICAgICAgICAgIGlmIChyZWZzKSByZWZzW3ZhbF0gPSBlbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiA9PT0gXCJzdHlsZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT0gXCJzdHJpbmdcIikgZWwuc3R5bGUuY3NzVGV4dCA9IHZhbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUobiwgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChwYXJlbnQpXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG4gICAgcmV0dXJuIGVsO1xufTtcblxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7RG9jdW1lbnR9IFtkb2NdXG4gKiBAcmV0dXJucyB7SFRNTEhlYWRFbGVtZW50fEhUTUxFbGVtZW50fVxuICovXG5leHBvcnRzLmdldERvY3VtZW50SGVhZCA9IGZ1bmN0aW9uKGRvYykge1xuICAgIGlmICghZG9jKVxuICAgICAgICBkb2MgPSBkb2N1bWVudDtcbiAgICByZXR1cm4gZG9jLmhlYWQgfHwgZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSB8fCBkb2MuZG9jdW1lbnRFbGVtZW50O1xufTtcblxuXG4vKipcbiAqIEB0ZW1wbGF0ZSB7a2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwfSBUXG4gKiBAcGFyYW0ge1QgfCBzdHJpbmd9IHRhZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtuc11cbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudFRhZ05hbWVNYXBbVF19XG4gKi9cbmV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKHRhZywgbnMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyA/XG4gICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMgfHwgWEhUTUxfTlMsIHRhZykgOlxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydHMucmVtb3ZlQ2hpbGRyZW4gPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dENvbnRlbnRcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtlbGVtZW50XVxuICogQHJldHVybnMge1RleHR9XG4gKi9cbmV4cG9ydHMuY3JlYXRlVGV4dE5vZGUgPSBmdW5jdGlvbih0ZXh0Q29udGVudCwgZWxlbWVudCkge1xuICAgIHZhciBkb2MgPSBlbGVtZW50ID8gZWxlbWVudC5vd25lckRvY3VtZW50IDogZG9jdW1lbnQ7XG4gICAgcmV0dXJuIGRvYy5jcmVhdGVUZXh0Tm9kZSh0ZXh0Q29udGVudCk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtlbGVtZW50XVxuICogQHJldHVybnMge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cbmV4cG9ydHMuY3JlYXRlRnJhZ21lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgdmFyIGRvYyA9IGVsZW1lbnQgPyBlbGVtZW50Lm93bmVyRG9jdW1lbnQgOiBkb2N1bWVudDtcbiAgICByZXR1cm4gZG9jLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0cy5oYXNDc3NDbGFzcyA9IGZ1bmN0aW9uKGVsLCBuYW1lKSB7XG4gICAgdmFyIGNsYXNzZXMgPSAoZWwuY2xhc3NOYW1lICsgXCJcIikuc3BsaXQoL1xccysvZyk7XG4gICAgcmV0dXJuIGNsYXNzZXMuaW5kZXhPZihuYW1lKSAhPT0gLTE7XG59O1xuXG4vKipcbiAqIEFkZCBhIENTUyBjbGFzcyB0byB0aGUgbGlzdCBvZiBjbGFzc2VzIG9uIHRoZSBnaXZlbiBub2RlXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiovXG5leHBvcnRzLmFkZENzc0NsYXNzID0gZnVuY3Rpb24oZWwsIG5hbWUpIHtcbiAgICBpZiAoIWV4cG9ydHMuaGFzQ3NzQ2xhc3MoZWwsIG5hbWUpKSB7XG4gICAgICAgIGVsLmNsYXNzTmFtZSArPSBcIiBcIiArIG5hbWU7XG4gICAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgYSBDU1MgY2xhc3MgZnJvbSB0aGUgbGlzdCBvZiBjbGFzc2VzIG9uIHRoZSBnaXZlbiBub2RlXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbFxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqL1xuZXhwb3J0cy5yZW1vdmVDc3NDbGFzcyA9IGZ1bmN0aW9uKGVsLCBuYW1lKSB7XG4gICAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoL1xccysvZyk7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gY2xhc3Nlcy5pbmRleE9mKG5hbWUpO1xuICAgICAgICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNsYXNzZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKFwiIFwiKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0cy50b2dnbGVDc3NDbGFzcyA9IGZ1bmN0aW9uKGVsLCBuYW1lKSB7XG4gICAgdmFyIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoL1xccysvZyksIGFkZCA9IHRydWU7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gY2xhc3Nlcy5pbmRleE9mKG5hbWUpO1xuICAgICAgICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGFkZCA9IGZhbHNlO1xuICAgICAgICBjbGFzc2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIGlmIChhZGQpXG4gICAgICAgIGNsYXNzZXMucHVzaChuYW1lKTtcblxuICAgIGVsLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbihcIiBcIik7XG4gICAgcmV0dXJuIGFkZDtcbn07XG5cbi8qKlxuICogQWRkIG9yIHJlbW92ZSBhIENTUyBjbGFzcyBmcm9tIHRoZSBsaXN0IG9mIGNsYXNzZXMgb24gdGhlIGdpdmVuIG5vZGVcbiAqIGRlcGVuZGluZyBvbiB0aGUgdmFsdWUgb2YgPHR0PmluY2x1ZGU8L3R0PlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZVxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZVxuICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlXG4gKi9cbmV4cG9ydHMuc2V0Q3NzQ2xhc3MgPSBmdW5jdGlvbihub2RlLCBjbGFzc05hbWUsIGluY2x1ZGUpIHtcbiAgICBpZiAoaW5jbHVkZSkge1xuICAgICAgICBleHBvcnRzLmFkZENzc0NsYXNzKG5vZGUsIGNsYXNzTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZXhwb3J0cy5yZW1vdmVDc3NDbGFzcyhub2RlLCBjbGFzc05hbWUpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0ge0RvY3VtZW50fSBbZG9jXVxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydHMuaGFzQ3NzU3RyaW5nID0gZnVuY3Rpb24oaWQsIGRvYykge1xuICAgIHZhciBpbmRleCA9IDAsIHNoZWV0cztcbiAgICBkb2MgPSBkb2MgfHwgZG9jdW1lbnQ7XG4gICAgaWYgKChzaGVldHMgPSBkb2MucXVlcnlTZWxlY3RvckFsbChcInN0eWxlXCIpKSkge1xuICAgICAgICB3aGlsZSAoaW5kZXggPCBzaGVldHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoc2hlZXRzW2luZGV4KytdLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7RG9jdW1lbnR9IFtkb2NdXG4gKi9cbmV4cG9ydHMucmVtb3ZlRWxlbWVudEJ5SWQgPSBmdW5jdGlvbihpZCwgZG9jKSB7XG4gICAgZG9jID0gZG9jIHx8IGRvY3VtZW50O1xuICAgIGlmKGRvYy5nZXRFbGVtZW50QnlJZChpZCkpIHtcbiAgICAgICAgZG9jLmdldEVsZW1lbnRCeUlkKGlkKS5yZW1vdmUoKTtcbiAgICB9XG59O1xuXG52YXIgc3RyaWN0Q1NQO1xudmFyIGNzc0NhY2hlID0gW107XG5leHBvcnRzLnVzZVN0cmljdENTUCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgc3RyaWN0Q1NQID0gdmFsdWU7XG4gICAgaWYgKHZhbHVlID09IGZhbHNlKSBpbnNlcnRQZW5kaW5nU3R5bGVzKCk7XG4gICAgZWxzZSBpZiAoIWNzc0NhY2hlKSBjc3NDYWNoZSA9IFtdO1xufTtcblxuZnVuY3Rpb24gaW5zZXJ0UGVuZGluZ1N0eWxlcygpIHtcbiAgICB2YXIgY2FjaGUgPSBjc3NDYWNoZTtcbiAgICBjc3NDYWNoZSA9IG51bGw7XG4gICAgY2FjaGUgJiYgY2FjaGUuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIGltcG9ydENzc1N0cmluZyhpdGVtWzBdLCBpdGVtWzFdKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaW1wb3J0Q3NzU3RyaW5nKGNzc1RleHQsIGlkLCB0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoY3NzQ2FjaGUpIHtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgICAgaW5zZXJ0UGVuZGluZ1N0eWxlcygpO1xuICAgICAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBjc3NDYWNoZS5wdXNoKFtjc3NUZXh0LCBpZF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzdHJpY3RDU1ApIHJldHVybjtcblxuICAgIHZhciBjb250YWluZXIgPSB0YXJnZXQ7XG4gICAgaWYgKCF0YXJnZXQgfHwgIXRhcmdldC5nZXRSb290Tm9kZSkge1xuICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb250YWluZXIgPSB0YXJnZXQuZ2V0Um9vdE5vZGUoKTtcbiAgICAgICAgaWYgKCFjb250YWluZXIgfHwgY29udGFpbmVyID09IHRhcmdldClcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50O1xuICAgIH1cbiAgICBcbiAgICB2YXIgZG9jID0gY29udGFpbmVyLm93bmVyRG9jdW1lbnQgfHwgY29udGFpbmVyO1xuICAgIFxuICAgIC8vIElmIHN0eWxlIGlzIGFscmVhZHkgaW1wb3J0ZWQgcmV0dXJuIGltbWVkaWF0ZWx5LlxuICAgIGlmIChpZCAmJiBleHBvcnRzLmhhc0Nzc1N0cmluZyhpZCwgY29udGFpbmVyKSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgaWYgKGlkKVxuICAgICAgICBjc3NUZXh0ICs9IFwiXFxuLyojIHNvdXJjZVVSTD1hY2UvY3NzL1wiICsgaWQgKyBcIiAqL1wiO1xuICAgIFxuICAgIHZhciBzdHlsZSA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVUZXh0Tm9kZShjc3NUZXh0KSk7XG4gICAgaWYgKGlkKVxuICAgICAgICBzdHlsZS5pZCA9IGlkO1xuXG4gICAgaWYgKGNvbnRhaW5lciA9PSBkb2MpXG4gICAgICAgIGNvbnRhaW5lciA9IGV4cG9ydHMuZ2V0RG9jdW1lbnRIZWFkKGRvYyk7XG4gICAgY29udGFpbmVyLmluc2VydEJlZm9yZShzdHlsZSwgY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xufVxuZXhwb3J0cy5pbXBvcnRDc3NTdHJpbmcgPSBpbXBvcnRDc3NTdHJpbmc7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVyaVxuICogQHBhcmFtIHtEb2N1bWVudH0gW2RvY11cbiAqL1xuZXhwb3J0cy5pbXBvcnRDc3NTdHlsc2hlZXQgPSBmdW5jdGlvbih1cmksIGRvYykge1xuICAgIGV4cG9ydHMuYnVpbGREb20oW1wibGlua1wiLCB7cmVsOiBcInN0eWxlc2hlZXRcIiwgaHJlZjogdXJpfV0sIGV4cG9ydHMuZ2V0RG9jdW1lbnRIZWFkKGRvYykpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge0RvY3VtZW50fSBbZG9jXVxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZXhwb3J0cy5zY3JvbGxiYXJXaWR0aCA9IGZ1bmN0aW9uKGRvYykge1xuICAgIHZhciBpbm5lciA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudChcImFjZV9pbm5lclwiKTtcbiAgICBpbm5lci5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgIGlubmVyLnN0eWxlLm1pbldpZHRoID0gXCIwcHhcIjtcbiAgICBpbm5lci5zdHlsZS5oZWlnaHQgPSBcIjIwMHB4XCI7XG4gICAgaW5uZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgIHZhciBvdXRlciA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudChcImFjZV9vdXRlclwiKTtcbiAgICB2YXIgc3R5bGUgPSBvdXRlci5zdHlsZTtcblxuICAgIHN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIHN0eWxlLmxlZnQgPSBcIi0xMDAwMHB4XCI7XG4gICAgc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgIHN0eWxlLndpZHRoID0gXCIyMDBweFwiO1xuICAgIHN0eWxlLm1pbldpZHRoID0gXCIwcHhcIjtcbiAgICBzdHlsZS5oZWlnaHQgPSBcIjE1MHB4XCI7XG4gICAgc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgIG91dGVyLmFwcGVuZENoaWxkKGlubmVyKTtcblxuICAgIHZhciBib2R5ID0gKGRvYyAmJiBkb2MuZG9jdW1lbnRFbGVtZW50KSB8fCAoZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgICBpZiAoIWJvZHkpIHJldHVybiAwO1xuXG4gICAgYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG5cbiAgICB2YXIgbm9TY3JvbGxiYXIgPSBpbm5lci5vZmZzZXRXaWR0aDtcblxuICAgIHN0eWxlLm92ZXJmbG93ID0gXCJzY3JvbGxcIjtcbiAgICB2YXIgd2l0aFNjcm9sbGJhciA9IGlubmVyLm9mZnNldFdpZHRoO1xuXG4gICAgaWYgKG5vU2Nyb2xsYmFyID09PSB3aXRoU2Nyb2xsYmFyKSB7XG4gICAgICAgIHdpdGhTY3JvbGxiYXIgPSBvdXRlci5jbGllbnRXaWR0aDtcbiAgICB9XG5cbiAgICBib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcblxuICAgIHJldHVybiBub1Njcm9sbGJhciAtIHdpdGhTY3JvbGxiYXI7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIFtzdHlsZV1cbiAqIEByZXR1cm5zIHtQYXJ0aWFsPENTU1N0eWxlRGVjbGFyYXRpb24+fVxuICovXG5leHBvcnRzLmNvbXB1dGVkU3R5bGUgPSBmdW5jdGlvbihlbGVtZW50LCBzdHlsZSkge1xuICAgIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBcIlwiKSB8fCB7fTtcbn07XG5cbi8qKlxuICogXG4gKiBAcGFyYW0ge0NTU1N0eWxlRGVjbGFyYXRpb259IHN0eWxlc1xuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqL1xuZXhwb3J0cy5zZXRTdHlsZSA9IGZ1bmN0aW9uKHN0eWxlcywgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgaWYgKHN0eWxlc1twcm9wZXJ0eV0gIT09IHZhbHVlKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJzZXQgc3R5bGVcIiwgcHJvcGVydHksIHN0eWxlc1twcm9wZXJ0eV0sIHZhbHVlKTtcbiAgICAgICAgc3R5bGVzW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuSEFTX0NTU19BTklNQVRJT04gPSBmYWxzZTtcbmV4cG9ydHMuSEFTX0NTU19UUkFOU0ZPUk1TID0gZmFsc2U7XG5leHBvcnRzLkhJX0RQSSA9IHVzZXJhZ2VudC5pc1dpblxuICAgID8gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+PSAxLjVcbiAgICA6IHRydWU7XG5cbmlmICh1c2VyYWdlbnQuaXNDaHJvbWVPUykgZXhwb3J0cy5ISV9EUEkgPSBmYWxzZTtcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vIGRldGVjdCBDU1MgdHJhbnNmb3JtYXRpb24gc3VwcG9ydFxuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGlmIChleHBvcnRzLkhJX0RQSSAmJiBkaXYuc3R5bGUudHJhbnNmb3JtICAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBleHBvcnRzLkhBU19DU1NfVFJBTlNGT1JNUyA9IHRydWU7XG4gICAgaWYgKCF1c2VyYWdlbnQuaXNFZGdlICYmIHR5cGVvZiBkaXYuc3R5bGUuYW5pbWF0aW9uTmFtZSAhPT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgZXhwb3J0cy5IQVNfQ1NTX0FOSU1BVElPTiA9IHRydWU7XG4gICAgZGl2ID0gbnVsbDtcbn1cblxuaWYgKGV4cG9ydHMuSEFTX0NTU19UUkFOU0ZPUk1TKSB7XG4gICAgZXhwb3J0cy50cmFuc2xhdGUgPSBmdW5jdGlvbihlbGVtZW50LCB0eCwgdHkpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZShcIiArIE1hdGgucm91bmQodHgpICsgXCJweCwgXCIgKyBNYXRoLnJvdW5kKHR5KSArXCJweClcIjtcbiAgICB9O1xufSBlbHNlIHtcbiAgICBleHBvcnRzLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHR4LCB0eSkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IE1hdGgucm91bmQodHkpICsgXCJweFwiO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSBNYXRoLnJvdW5kKHR4KSArIFwicHhcIjtcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/dom.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/event.js":
/*!************************************************!*\
  !*** ./node_modules/ace-code/src/lib/event.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\n/** @type {any} */var keys = __webpack_require__(/*! ./keys */ \"./node_modules/ace-code/src/lib/keys.js\");\nvar useragent = __webpack_require__(/*! ./useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\n\nvar pressedKeys = null;\nvar ts = 0;\n\nvar activeListenerOptions;\nfunction detectListenerOptionsSupport() {\n    activeListenerOptions = false;\n    try {\n        document.createComment(\"\").addEventListener(\"test\", function() {}, { \n            get passive() { \n                activeListenerOptions = {passive: false};\n                return true;\n            }\n        });\n    } catch(e) {}\n}\n\nfunction getListenerOptions() {\n    if (activeListenerOptions == undefined)\n        detectListenerOptionsSupport();\n    return activeListenerOptions;\n}\n\nfunction EventListener(elem, type, callback) {\n    this.elem = elem;\n    this.type = type;\n    this.callback = callback;\n}\nEventListener.prototype.destroy = function() {\n    removeListener(this.elem, this.type, this.callback);\n    this.elem = this.type = this.callback = undefined;\n};\n\nvar addListener = exports.addListener = function(elem, type, callback, /**@type{any?}*/destroyer) {\n    elem.addEventListener(type, callback, getListenerOptions());\n    if (destroyer)\n        destroyer.$toDestroy.push(new EventListener(elem, type, callback));\n};\n\nvar removeListener = exports.removeListener = function(elem, type, callback) {\n    elem.removeEventListener(type, callback, getListenerOptions());\n};\n\n/*\n* Prevents propagation and clobbers the default action of the passed event\n*/\nexports.stopEvent = function(e) {\n    exports.stopPropagation(e);\n    exports.preventDefault(e);\n    return false;\n};\n\nexports.stopPropagation = function(e) {\n    if (e.stopPropagation)\n        e.stopPropagation();\n};\n\nexports.preventDefault = function(e) {\n    if (e.preventDefault)\n        e.preventDefault();\n};\n\n/*\n * @return {Number} 0 for left button, 1 for middle button, 2 for right button\n */\nexports.getButton = function(e) {\n    if (e.type == \"dblclick\")\n        return 0;\n    if (e.type == \"contextmenu\" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))\n        return 2;\n\n    // DOM Event\n    return e.button;\n};\n\nexports.capture = function(el, eventHandler, releaseCaptureHandler) {\n    var ownerDocument = el && el.ownerDocument || document;\n    function onMouseUp(e) {\n        eventHandler && eventHandler(e);\n        releaseCaptureHandler && releaseCaptureHandler(e);\n\n        removeListener(ownerDocument, \"mousemove\", eventHandler);\n        removeListener(ownerDocument, \"mouseup\", onMouseUp);\n        removeListener(ownerDocument, \"dragstart\", onMouseUp);\n    }\n\n    addListener(ownerDocument, \"mousemove\", eventHandler);\n    addListener(ownerDocument, \"mouseup\", onMouseUp);\n    addListener(ownerDocument, \"dragstart\", onMouseUp);\n    \n    return onMouseUp;\n};\n\n/**\n * @param el\n * @param callback\n * @param [destroyer]\n */\nexports.addMouseWheelListener = function(el, callback, destroyer) {\n    addListener(el, \"wheel\",  function(e) {\n        var factor = 0.15;\n        // workaround for firefox changing deltaMode based on which property is accessed first\n        var deltaX = e.deltaX || 0;\n        var deltaY = e.deltaY || 0;\n        switch (e.deltaMode) {\n            case e.DOM_DELTA_PIXEL:\n                e.wheelX = deltaX * factor;\n                e.wheelY = deltaY * factor;\n                break;\n            case e.DOM_DELTA_LINE:\n                var linePixels = 15;\n                e.wheelX = deltaX * linePixels;\n                e.wheelY = deltaY * linePixels;\n                break;\n            case e.DOM_DELTA_PAGE:\n                var pagePixels = 150;\n                e.wheelX = deltaX * pagePixels;\n                e.wheelY = deltaY * pagePixels;\n                break;\n        }\n        callback(e);\n    }, destroyer);\n};\n\n/**\n * @param elements\n * @param timeouts\n * @param eventHandler\n * @param callbackName\n * @param [destroyer]\n */\nexports.addMultiMouseDownListener = function(elements, timeouts, eventHandler, callbackName, destroyer) {\n    var clicks = 0;\n    var startX, startY, timer; \n    var eventNames = {\n        2: \"dblclick\",\n        3: \"tripleclick\",\n        4: \"quadclick\"\n    };\n\n    function onMousedown(e) {\n        if (exports.getButton(e) !== 0) {\n            clicks = 0;\n        } else if (e.detail > 1) {\n            clicks++;\n            if (clicks > 4)\n                clicks = 1;\n        } else {\n            clicks = 1;\n        }\n        if (useragent.isIE) {\n            var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;\n            if (!timer || isNewClick)\n                clicks = 1;\n            if (timer)\n                clearTimeout(timer);\n            timer = setTimeout(function() {timer = null;}, timeouts[clicks - 1] || 600);\n\n            if (clicks == 1) {\n                startX = e.clientX;\n                startY = e.clientY;\n            }\n        }\n        \n        e._clicks = clicks;\n\n        eventHandler[callbackName](\"mousedown\", e);\n\n        if (clicks > 4)\n            clicks = 0;\n        else if (clicks > 1)\n            return eventHandler[callbackName](eventNames[clicks], e);\n    }\n    if (!Array.isArray(elements))\n        elements = [elements];\n    elements.forEach(function(el) {\n        addListener(el, \"mousedown\", onMousedown, destroyer);\n    });\n};\n\n/** @param {KeyboardEvent|MouseEvent} e */\nfunction getModifierHash(e) {\n    return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);\n}\n\n/**\n * @param {KeyboardEvent|MouseEvent} e\n * @returns string\n */\nexports.getModifierString = function(e) {\n    return keys.KEY_MODS[getModifierHash(e)];\n};\n\n/**\n * @param {(e: KeyboardEvent, hashId: number, keyCode: number)=> void } callback\n * @param {KeyboardEvent} e\n * @param {number} keyCode\n */\nfunction normalizeCommandKeys(callback, e, keyCode) {\n    var hashId = getModifierHash(e);\n\n    if (!keyCode && e.code) {\n        keyCode = keys.$codeToKeyCode[e.code] || keyCode;\n    }\n\n    if (!useragent.isMac && pressedKeys) {\n        if (e.getModifierState && (e.getModifierState(\"OS\") || e.getModifierState(\"Win\")))\n            hashId |= 8;\n        if (pressedKeys.altGr) {\n            if ((3 & hashId) != 3)\n                pressedKeys.altGr = 0;\n            else\n                return;\n        }\n        if (keyCode === 18 || keyCode === 17) {\n            var location = e.location;\n            if (keyCode === 17 && location === 1) {\n                if (pressedKeys[keyCode] == 1)\n                    ts = e.timeStamp;\n            } else if (keyCode === 18 && hashId === 3 && location === 2) {\n                var dt = e.timeStamp - ts;\n                if (dt < 50)\n                    pressedKeys.altGr = true;\n            }\n        }\n    }\n    \n    if (keyCode in keys.MODIFIER_KEYS) {\n        keyCode = -1;\n    }\n    \n    if (!hashId && keyCode === 13) {\n        if (e.location === 3) {\n            callback(e, hashId, -keyCode);\n            if (e.defaultPrevented)\n                return;\n        }\n    }\n    \n    if (useragent.isChromeOS && hashId & 8) {\n        callback(e, hashId, keyCode);\n        if (e.defaultPrevented)\n            return;\n        else\n            hashId &= ~8;\n    }\n\n    // If there is no hashId and the keyCode is not a function key, then\n    // we don't call the callback as we don't handle a command key here\n    // (it's a normal key/character input).\n    if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {\n        return false;\n    }\n    \n    return callback(e, hashId, keyCode);\n}\n\n/**\n * @param {EventTarget} el\n * @param {(e: KeyboardEvent, hashId: number, keyCode: number)=>void} callback\n * @param [destroyer]\n */\nexports.addCommandKeyListener = function(el, callback, destroyer) {\n    var lastDefaultPrevented = null;\n\n    addListener(el, \"keydown\", function(e) {\n        pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;\n        var result = normalizeCommandKeys(callback, e, e.keyCode);\n        lastDefaultPrevented = e.defaultPrevented;\n        return result;\n    }, destroyer);\n\n    addListener(el, \"keypress\", function(e) {\n        if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {\n            exports.stopEvent(e);\n            lastDefaultPrevented = null;\n        }\n    }, destroyer);\n\n    addListener(el, \"keyup\", function(e) {\n        pressedKeys[e.keyCode] = null;\n    }, destroyer);\n\n    if (!pressedKeys) {\n        resetPressedKeys();\n        addListener(window, \"focus\", resetPressedKeys);\n    }\n};\nfunction resetPressedKeys() {\n    pressedKeys = Object.create(null);\n}\n\nif (typeof window == \"object\" && window.postMessage && !useragent.isOldIE) {\n    var postMessageId = 1;\n    exports.nextTick = function(callback, win) {\n        win = win || window;\n        var messageName = \"zero-timeout-message-\" + (postMessageId++);\n        \n        var listener = function(e) {\n            if (e.data == messageName) {\n                exports.stopPropagation(e);\n                removeListener(win, \"message\", listener);\n                callback();\n            }\n        };\n        \n        addListener(win, \"message\", listener);\n        win.postMessage(messageName, \"*\");\n    };\n}\n\nexports.$idleBlocked = false;\nexports.onIdle = function(cb, timeout) {\n    return setTimeout(function handler() {\n        if (!exports.$idleBlocked) {\n            cb();\n        } else {\n            setTimeout(handler, 100);\n        }\n    }, timeout);\n};\n\nexports.$idleBlockId = null;\nexports.blockIdle = function(delay) {\n    if (exports.$idleBlockId)\n        clearTimeout(exports.$idleBlockId);\n        \n    exports.$idleBlocked = true;\n    exports.$idleBlockId = setTimeout(function() {\n        exports.$idleBlocked = false;\n    }, delay || 100);\n};\n\nexports.nextFrame = typeof window == \"object\" && (window.requestAnimationFrame\n    || window[\"mozRequestAnimationFrame\"]\n    || window[\"webkitRequestAnimationFrame\"]\n    || window[\"msRequestAnimationFrame\"]\n    || window[\"oRequestAnimationFrame\"]);\n\nif (exports.nextFrame)\n    exports.nextFrame = exports.nextFrame.bind(window);\nelse\n    exports.nextFrame = function(callback) {\n        setTimeout(callback, 17);\n    };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9ldmVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixXQUFXLEtBQUssYUFBYSxtQkFBTyxDQUFDLHVEQUFRO0FBQzdDLGdCQUFnQixtQkFBTyxDQUFDLGlFQUFhOztBQUVyQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFO0FBQ3pFO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixtQkFBbUIsMkNBQTJDLEtBQUs7QUFDckY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCLHNCQUFzQjtBQUMzQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBOztBQUVBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsY0FBYzs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBLFlBQVksMEJBQTBCO0FBQ3RDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsMEJBQTBCO0FBQ3JDO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBLFdBQVcsNkRBQTZEO0FBQ3hFLFdBQVcsZUFBZTtBQUMxQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxhQUFhO0FBQ3hCLFdBQVcsMkRBQTJEO0FBQ3RFO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSSxnQkFBZ0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQjtBQUNwQixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEsb0JBQW9CO0FBQ3BCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLG9CQUFvQjtBQUN4QixJQUFJLG9CQUFvQjtBQUN4QixRQUFRLG9CQUFvQjtBQUM1QixLQUFLO0FBQ0w7O0FBRUEsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxpQkFBaUI7QUFDckI7QUFDQSxJQUFJLGlCQUFpQjtBQUNyQjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbGliL2V2ZW50LmpzP2JlYWQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKiBAdHlwZSB7YW55fSAqL3ZhciBrZXlzID0gcmVxdWlyZShcIi4va2V5c1wiKTtcbnZhciB1c2VyYWdlbnQgPSByZXF1aXJlKFwiLi91c2VyYWdlbnRcIik7XG5cbnZhciBwcmVzc2VkS2V5cyA9IG51bGw7XG52YXIgdHMgPSAwO1xuXG52YXIgYWN0aXZlTGlzdGVuZXJPcHRpb25zO1xuZnVuY3Rpb24gZGV0ZWN0TGlzdGVuZXJPcHRpb25zU3VwcG9ydCgpIHtcbiAgICBhY3RpdmVMaXN0ZW5lck9wdGlvbnMgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsIGZ1bmN0aW9uKCkge30sIHsgXG4gICAgICAgICAgICBnZXQgcGFzc2l2ZSgpIHsgXG4gICAgICAgICAgICAgICAgYWN0aXZlTGlzdGVuZXJPcHRpb25zID0ge3Bhc3NpdmU6IGZhbHNlfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaChlKSB7fVxufVxuXG5mdW5jdGlvbiBnZXRMaXN0ZW5lck9wdGlvbnMoKSB7XG4gICAgaWYgKGFjdGl2ZUxpc3RlbmVyT3B0aW9ucyA9PSB1bmRlZmluZWQpXG4gICAgICAgIGRldGVjdExpc3RlbmVyT3B0aW9uc1N1cHBvcnQoKTtcbiAgICByZXR1cm4gYWN0aXZlTGlzdGVuZXJPcHRpb25zO1xufVxuXG5mdW5jdGlvbiBFdmVudExpc3RlbmVyKGVsZW0sIHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5lbGVtID0gZWxlbTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbn1cbkV2ZW50TGlzdGVuZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICByZW1vdmVMaXN0ZW5lcih0aGlzLmVsZW0sIHRoaXMudHlwZSwgdGhpcy5jYWxsYmFjayk7XG4gICAgdGhpcy5lbGVtID0gdGhpcy50eXBlID0gdGhpcy5jYWxsYmFjayA9IHVuZGVmaW5lZDtcbn07XG5cbnZhciBhZGRMaXN0ZW5lciA9IGV4cG9ydHMuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihlbGVtLCB0eXBlLCBjYWxsYmFjaywgLyoqQHR5cGV7YW55P30qL2Rlc3Ryb3llcikge1xuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaywgZ2V0TGlzdGVuZXJPcHRpb25zKCkpO1xuICAgIGlmIChkZXN0cm95ZXIpXG4gICAgICAgIGRlc3Ryb3llci4kdG9EZXN0cm95LnB1c2gobmV3IEV2ZW50TGlzdGVuZXIoZWxlbSwgdHlwZSwgY2FsbGJhY2spKTtcbn07XG5cbnZhciByZW1vdmVMaXN0ZW5lciA9IGV4cG9ydHMucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbihlbGVtLCB0eXBlLCBjYWxsYmFjaykge1xuICAgIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaywgZ2V0TGlzdGVuZXJPcHRpb25zKCkpO1xufTtcblxuLypcbiogUHJldmVudHMgcHJvcGFnYXRpb24gYW5kIGNsb2JiZXJzIHRoZSBkZWZhdWx0IGFjdGlvbiBvZiB0aGUgcGFzc2VkIGV2ZW50XG4qL1xuZXhwb3J0cy5zdG9wRXZlbnQgPSBmdW5jdGlvbihlKSB7XG4gICAgZXhwb3J0cy5zdG9wUHJvcGFnYXRpb24oZSk7XG4gICAgZXhwb3J0cy5wcmV2ZW50RGVmYXVsdChlKTtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5leHBvcnRzLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG59O1xuXG5leHBvcnRzLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnByZXZlbnREZWZhdWx0KVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG59O1xuXG4vKlxuICogQHJldHVybiB7TnVtYmVyfSAwIGZvciBsZWZ0IGJ1dHRvbiwgMSBmb3IgbWlkZGxlIGJ1dHRvbiwgMiBmb3IgcmlnaHQgYnV0dG9uXG4gKi9cbmV4cG9ydHMuZ2V0QnV0dG9uID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnR5cGUgPT0gXCJkYmxjbGlja1wiKVxuICAgICAgICByZXR1cm4gMDtcbiAgICBpZiAoZS50eXBlID09IFwiY29udGV4dG1lbnVcIiB8fCAodXNlcmFnZW50LmlzTWFjICYmIChlLmN0cmxLZXkgJiYgIWUuYWx0S2V5ICYmICFlLnNoaWZ0S2V5KSkpXG4gICAgICAgIHJldHVybiAyO1xuXG4gICAgLy8gRE9NIEV2ZW50XG4gICAgcmV0dXJuIGUuYnV0dG9uO1xufTtcblxuZXhwb3J0cy5jYXB0dXJlID0gZnVuY3Rpb24oZWwsIGV2ZW50SGFuZGxlciwgcmVsZWFzZUNhcHR1cmVIYW5kbGVyKSB7XG4gICAgdmFyIG93bmVyRG9jdW1lbnQgPSBlbCAmJiBlbC5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50O1xuICAgIGZ1bmN0aW9uIG9uTW91c2VVcChlKSB7XG4gICAgICAgIGV2ZW50SGFuZGxlciAmJiBldmVudEhhbmRsZXIoZSk7XG4gICAgICAgIHJlbGVhc2VDYXB0dXJlSGFuZGxlciAmJiByZWxlYXNlQ2FwdHVyZUhhbmRsZXIoZSk7XG5cbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIob3duZXJEb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgZXZlbnRIYW5kbGVyKTtcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXIob3duZXJEb2N1bWVudCwgXCJtb3VzZXVwXCIsIG9uTW91c2VVcCk7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVyKG93bmVyRG9jdW1lbnQsIFwiZHJhZ3N0YXJ0XCIsIG9uTW91c2VVcCk7XG4gICAgfVxuXG4gICAgYWRkTGlzdGVuZXIob3duZXJEb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgZXZlbnRIYW5kbGVyKTtcbiAgICBhZGRMaXN0ZW5lcihvd25lckRvY3VtZW50LCBcIm1vdXNldXBcIiwgb25Nb3VzZVVwKTtcbiAgICBhZGRMaXN0ZW5lcihvd25lckRvY3VtZW50LCBcImRyYWdzdGFydFwiLCBvbk1vdXNlVXApO1xuICAgIFxuICAgIHJldHVybiBvbk1vdXNlVXA7XG59O1xuXG4vKipcbiAqIEBwYXJhbSBlbFxuICogQHBhcmFtIGNhbGxiYWNrXG4gKiBAcGFyYW0gW2Rlc3Ryb3llcl1cbiAqL1xuZXhwb3J0cy5hZGRNb3VzZVdoZWVsTGlzdGVuZXIgPSBmdW5jdGlvbihlbCwgY2FsbGJhY2ssIGRlc3Ryb3llcikge1xuICAgIGFkZExpc3RlbmVyKGVsLCBcIndoZWVsXCIsICBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBmYWN0b3IgPSAwLjE1O1xuICAgICAgICAvLyB3b3JrYXJvdW5kIGZvciBmaXJlZm94IGNoYW5naW5nIGRlbHRhTW9kZSBiYXNlZCBvbiB3aGljaCBwcm9wZXJ0eSBpcyBhY2Nlc3NlZCBmaXJzdFxuICAgICAgICB2YXIgZGVsdGFYID0gZS5kZWx0YVggfHwgMDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGUuZGVsdGFZIHx8IDA7XG4gICAgICAgIHN3aXRjaCAoZS5kZWx0YU1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgZS5ET01fREVMVEFfUElYRUw6XG4gICAgICAgICAgICAgICAgZS53aGVlbFggPSBkZWx0YVggKiBmYWN0b3I7XG4gICAgICAgICAgICAgICAgZS53aGVlbFkgPSBkZWx0YVkgKiBmYWN0b3I7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGUuRE9NX0RFTFRBX0xJTkU6XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVQaXhlbHMgPSAxNTtcbiAgICAgICAgICAgICAgICBlLndoZWVsWCA9IGRlbHRhWCAqIGxpbmVQaXhlbHM7XG4gICAgICAgICAgICAgICAgZS53aGVlbFkgPSBkZWx0YVkgKiBsaW5lUGl4ZWxzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlLkRPTV9ERUxUQV9QQUdFOlxuICAgICAgICAgICAgICAgIHZhciBwYWdlUGl4ZWxzID0gMTUwO1xuICAgICAgICAgICAgICAgIGUud2hlZWxYID0gZGVsdGFYICogcGFnZVBpeGVscztcbiAgICAgICAgICAgICAgICBlLndoZWVsWSA9IGRlbHRhWSAqIHBhZ2VQaXhlbHM7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soZSk7XG4gICAgfSwgZGVzdHJveWVyKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIGVsZW1lbnRzXG4gKiBAcGFyYW0gdGltZW91dHNcbiAqIEBwYXJhbSBldmVudEhhbmRsZXJcbiAqIEBwYXJhbSBjYWxsYmFja05hbWVcbiAqIEBwYXJhbSBbZGVzdHJveWVyXVxuICovXG5leHBvcnRzLmFkZE11bHRpTW91c2VEb3duTGlzdGVuZXIgPSBmdW5jdGlvbihlbGVtZW50cywgdGltZW91dHMsIGV2ZW50SGFuZGxlciwgY2FsbGJhY2tOYW1lLCBkZXN0cm95ZXIpIHtcbiAgICB2YXIgY2xpY2tzID0gMDtcbiAgICB2YXIgc3RhcnRYLCBzdGFydFksIHRpbWVyOyBcbiAgICB2YXIgZXZlbnROYW1lcyA9IHtcbiAgICAgICAgMjogXCJkYmxjbGlja1wiLFxuICAgICAgICAzOiBcInRyaXBsZWNsaWNrXCIsXG4gICAgICAgIDQ6IFwicXVhZGNsaWNrXCJcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gb25Nb3VzZWRvd24oZSkge1xuICAgICAgICBpZiAoZXhwb3J0cy5nZXRCdXR0b24oZSkgIT09IDApIHtcbiAgICAgICAgICAgIGNsaWNrcyA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5kZXRhaWwgPiAxKSB7XG4gICAgICAgICAgICBjbGlja3MrKztcbiAgICAgICAgICAgIGlmIChjbGlja3MgPiA0KVxuICAgICAgICAgICAgICAgIGNsaWNrcyA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbGlja3MgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyYWdlbnQuaXNJRSkge1xuICAgICAgICAgICAgdmFyIGlzTmV3Q2xpY2sgPSBNYXRoLmFicyhlLmNsaWVudFggLSBzdGFydFgpID4gNSB8fCBNYXRoLmFicyhlLmNsaWVudFkgLSBzdGFydFkpID4gNTtcbiAgICAgICAgICAgIGlmICghdGltZXIgfHwgaXNOZXdDbGljaylcbiAgICAgICAgICAgICAgICBjbGlja3MgPSAxO1xuICAgICAgICAgICAgaWYgKHRpbWVyKVxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7dGltZXIgPSBudWxsO30sIHRpbWVvdXRzW2NsaWNrcyAtIDFdIHx8IDYwMCk7XG5cbiAgICAgICAgICAgIGlmIChjbGlja3MgPT0gMSkge1xuICAgICAgICAgICAgICAgIHN0YXJ0WCA9IGUuY2xpZW50WDtcbiAgICAgICAgICAgICAgICBzdGFydFkgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGUuX2NsaWNrcyA9IGNsaWNrcztcblxuICAgICAgICBldmVudEhhbmRsZXJbY2FsbGJhY2tOYW1lXShcIm1vdXNlZG93blwiLCBlKTtcblxuICAgICAgICBpZiAoY2xpY2tzID4gNClcbiAgICAgICAgICAgIGNsaWNrcyA9IDA7XG4gICAgICAgIGVsc2UgaWYgKGNsaWNrcyA+IDEpXG4gICAgICAgICAgICByZXR1cm4gZXZlbnRIYW5kbGVyW2NhbGxiYWNrTmFtZV0oZXZlbnROYW1lc1tjbGlja3NdLCBlKTtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGVsZW1lbnRzKSlcbiAgICAgICAgZWxlbWVudHMgPSBbZWxlbWVudHNdO1xuICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgYWRkTGlzdGVuZXIoZWwsIFwibW91c2Vkb3duXCIsIG9uTW91c2Vkb3duLCBkZXN0cm95ZXIpO1xuICAgIH0pO1xufTtcblxuLyoqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fSBlICovXG5mdW5jdGlvbiBnZXRNb2RpZmllckhhc2goZSkge1xuICAgIHJldHVybiAwIHwgKGUuY3RybEtleSA/IDEgOiAwKSB8IChlLmFsdEtleSA/IDIgOiAwKSB8IChlLnNoaWZ0S2V5ID8gNCA6IDApIHwgKGUubWV0YUtleSA/IDggOiAwKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudH0gZVxuICogQHJldHVybnMgc3RyaW5nXG4gKi9cbmV4cG9ydHMuZ2V0TW9kaWZpZXJTdHJpbmcgPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIGtleXMuS0VZX01PRFNbZ2V0TW9kaWZpZXJIYXNoKGUpXTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHsoZTogS2V5Ym9hcmRFdmVudCwgaGFzaElkOiBudW1iZXIsIGtleUNvZGU6IG51bWJlcik9PiB2b2lkIH0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZVxuICogQHBhcmFtIHtudW1iZXJ9IGtleUNvZGVcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplQ29tbWFuZEtleXMoY2FsbGJhY2ssIGUsIGtleUNvZGUpIHtcbiAgICB2YXIgaGFzaElkID0gZ2V0TW9kaWZpZXJIYXNoKGUpO1xuXG4gICAgaWYgKCFrZXlDb2RlICYmIGUuY29kZSkge1xuICAgICAgICBrZXlDb2RlID0ga2V5cy4kY29kZVRvS2V5Q29kZVtlLmNvZGVdIHx8IGtleUNvZGU7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyYWdlbnQuaXNNYWMgJiYgcHJlc3NlZEtleXMpIHtcbiAgICAgICAgaWYgKGUuZ2V0TW9kaWZpZXJTdGF0ZSAmJiAoZS5nZXRNb2RpZmllclN0YXRlKFwiT1NcIikgfHwgZS5nZXRNb2RpZmllclN0YXRlKFwiV2luXCIpKSlcbiAgICAgICAgICAgIGhhc2hJZCB8PSA4O1xuICAgICAgICBpZiAocHJlc3NlZEtleXMuYWx0R3IpIHtcbiAgICAgICAgICAgIGlmICgoMyAmIGhhc2hJZCkgIT0gMylcbiAgICAgICAgICAgICAgICBwcmVzc2VkS2V5cy5hbHRHciA9IDA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXlDb2RlID09PSAxOCB8fCBrZXlDb2RlID09PSAxNykge1xuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gZS5sb2NhdGlvbjtcbiAgICAgICAgICAgIGlmIChrZXlDb2RlID09PSAxNyAmJiBsb2NhdGlvbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChwcmVzc2VkS2V5c1trZXlDb2RlXSA9PSAxKVxuICAgICAgICAgICAgICAgICAgICB0cyA9IGUudGltZVN0YW1wO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSAxOCAmJiBoYXNoSWQgPT09IDMgJiYgbG9jYXRpb24gPT09IDIpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHQgPSBlLnRpbWVTdGFtcCAtIHRzO1xuICAgICAgICAgICAgICAgIGlmIChkdCA8IDUwKVxuICAgICAgICAgICAgICAgICAgICBwcmVzc2VkS2V5cy5hbHRHciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKGtleUNvZGUgaW4ga2V5cy5NT0RJRklFUl9LRVlTKSB7XG4gICAgICAgIGtleUNvZGUgPSAtMTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCFoYXNoSWQgJiYga2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgaWYgKGUubG9jYXRpb24gPT09IDMpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGUsIGhhc2hJZCwgLWtleUNvZGUpO1xuICAgICAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKHVzZXJhZ2VudC5pc0Nocm9tZU9TICYmIGhhc2hJZCAmIDgpIHtcbiAgICAgICAgY2FsbGJhY2soZSwgaGFzaElkLCBrZXlDb2RlKTtcbiAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaGFzaElkICY9IH44O1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGhhc2hJZCBhbmQgdGhlIGtleUNvZGUgaXMgbm90IGEgZnVuY3Rpb24ga2V5LCB0aGVuXG4gICAgLy8gd2UgZG9uJ3QgY2FsbCB0aGUgY2FsbGJhY2sgYXMgd2UgZG9uJ3QgaGFuZGxlIGEgY29tbWFuZCBrZXkgaGVyZVxuICAgIC8vIChpdCdzIGEgbm9ybWFsIGtleS9jaGFyYWN0ZXIgaW5wdXQpLlxuICAgIGlmICghaGFzaElkICYmICEoa2V5Q29kZSBpbiBrZXlzLkZVTkNUSU9OX0tFWVMpICYmICEoa2V5Q29kZSBpbiBrZXlzLlBSSU5UQUJMRV9LRVlTKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjYWxsYmFjayhlLCBoYXNoSWQsIGtleUNvZGUpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IGVsXG4gKiBAcGFyYW0geyhlOiBLZXlib2FyZEV2ZW50LCBoYXNoSWQ6IG51bWJlciwga2V5Q29kZTogbnVtYmVyKT0+dm9pZH0gY2FsbGJhY2tcbiAqIEBwYXJhbSBbZGVzdHJveWVyXVxuICovXG5leHBvcnRzLmFkZENvbW1hbmRLZXlMaXN0ZW5lciA9IGZ1bmN0aW9uKGVsLCBjYWxsYmFjaywgZGVzdHJveWVyKSB7XG4gICAgdmFyIGxhc3REZWZhdWx0UHJldmVudGVkID0gbnVsbDtcblxuICAgIGFkZExpc3RlbmVyKGVsLCBcImtleWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBwcmVzc2VkS2V5c1tlLmtleUNvZGVdID0gKHByZXNzZWRLZXlzW2Uua2V5Q29kZV0gfHwgMCkgKyAxO1xuICAgICAgICB2YXIgcmVzdWx0ID0gbm9ybWFsaXplQ29tbWFuZEtleXMoY2FsbGJhY2ssIGUsIGUua2V5Q29kZSk7XG4gICAgICAgIGxhc3REZWZhdWx0UHJldmVudGVkID0gZS5kZWZhdWx0UHJldmVudGVkO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sIGRlc3Ryb3llcik7XG5cbiAgICBhZGRMaXN0ZW5lcihlbCwgXCJrZXlwcmVzc1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChsYXN0RGVmYXVsdFByZXZlbnRlZCAmJiAoZS5jdHJsS2V5IHx8IGUuYWx0S2V5IHx8IGUuc2hpZnRLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICAgICAgZXhwb3J0cy5zdG9wRXZlbnQoZSk7XG4gICAgICAgICAgICBsYXN0RGVmYXVsdFByZXZlbnRlZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9LCBkZXN0cm95ZXIpO1xuXG4gICAgYWRkTGlzdGVuZXIoZWwsIFwia2V5dXBcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBwcmVzc2VkS2V5c1tlLmtleUNvZGVdID0gbnVsbDtcbiAgICB9LCBkZXN0cm95ZXIpO1xuXG4gICAgaWYgKCFwcmVzc2VkS2V5cykge1xuICAgICAgICByZXNldFByZXNzZWRLZXlzKCk7XG4gICAgICAgIGFkZExpc3RlbmVyKHdpbmRvdywgXCJmb2N1c1wiLCByZXNldFByZXNzZWRLZXlzKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcmVzZXRQcmVzc2VkS2V5cygpIHtcbiAgICBwcmVzc2VkS2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbmlmICh0eXBlb2Ygd2luZG93ID09IFwib2JqZWN0XCIgJiYgd2luZG93LnBvc3RNZXNzYWdlICYmICF1c2VyYWdlbnQuaXNPbGRJRSkge1xuICAgIHZhciBwb3N0TWVzc2FnZUlkID0gMTtcbiAgICBleHBvcnRzLm5leHRUaWNrID0gZnVuY3Rpb24oY2FsbGJhY2ssIHdpbikge1xuICAgICAgICB3aW4gPSB3aW4gfHwgd2luZG93O1xuICAgICAgICB2YXIgbWVzc2FnZU5hbWUgPSBcInplcm8tdGltZW91dC1tZXNzYWdlLVwiICsgKHBvc3RNZXNzYWdlSWQrKyk7XG4gICAgICAgIFxuICAgICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5kYXRhID09IG1lc3NhZ2VOYW1lKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5zdG9wUHJvcGFnYXRpb24oZSk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIod2luLCBcIm1lc3NhZ2VcIiwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBhZGRMaXN0ZW5lcih3aW4sIFwibWVzc2FnZVwiLCBsaXN0ZW5lcik7XG4gICAgICAgIHdpbi5wb3N0TWVzc2FnZShtZXNzYWdlTmFtZSwgXCIqXCIpO1xuICAgIH07XG59XG5cbmV4cG9ydHMuJGlkbGVCbG9ja2VkID0gZmFsc2U7XG5leHBvcnRzLm9uSWRsZSA9IGZ1bmN0aW9uKGNiLCB0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKCFleHBvcnRzLiRpZGxlQmxvY2tlZCkge1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoaGFuZGxlciwgMTAwKTtcbiAgICAgICAgfVxuICAgIH0sIHRpbWVvdXQpO1xufTtcblxuZXhwb3J0cy4kaWRsZUJsb2NrSWQgPSBudWxsO1xuZXhwb3J0cy5ibG9ja0lkbGUgPSBmdW5jdGlvbihkZWxheSkge1xuICAgIGlmIChleHBvcnRzLiRpZGxlQmxvY2tJZClcbiAgICAgICAgY2xlYXJUaW1lb3V0KGV4cG9ydHMuJGlkbGVCbG9ja0lkKTtcbiAgICAgICAgXG4gICAgZXhwb3J0cy4kaWRsZUJsb2NrZWQgPSB0cnVlO1xuICAgIGV4cG9ydHMuJGlkbGVCbG9ja0lkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwb3J0cy4kaWRsZUJsb2NrZWQgPSBmYWxzZTtcbiAgICB9LCBkZWxheSB8fCAxMDApO1xufTtcblxuZXhwb3J0cy5uZXh0RnJhbWUgPSB0eXBlb2Ygd2luZG93ID09IFwib2JqZWN0XCIgJiYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICB8fCB3aW5kb3dbXCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl1cbiAgICB8fCB3aW5kb3dbXCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl1cbiAgICB8fCB3aW5kb3dbXCJtc1JlcXVlc3RBbmltYXRpb25GcmFtZVwiXVxuICAgIHx8IHdpbmRvd1tcIm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0pO1xuXG5pZiAoZXhwb3J0cy5uZXh0RnJhbWUpXG4gICAgZXhwb3J0cy5uZXh0RnJhbWUgPSBleHBvcnRzLm5leHRGcmFtZS5iaW5kKHdpbmRvdyk7XG5lbHNlXG4gICAgZXhwb3J0cy5uZXh0RnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxNyk7XG4gICAgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/event.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/event_emitter.js":
/*!********************************************************!*\
  !*** ./node_modules/ace-code/src/lib/event_emitter.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n/**@type {any}*/\nvar EventEmitter = {};\nvar stopPropagation = function() { this.propagationStopped = true; };\nvar preventDefault = function() { this.defaultPrevented = true; };\n\nEventEmitter._emit =\nEventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {});\n    this._defaultHandlers || (this._defaultHandlers = {});\n\n    var listeners = this._eventRegistry[eventName] || [];\n    var defaultHandler = this._defaultHandlers[eventName];\n    if (!listeners.length && !defaultHandler)\n        return;\n\n    if (typeof e != \"object\" || !e)\n        e = {};\n\n    if (!e.type)\n        e.type = eventName;\n    if (!e.stopPropagation)\n        e.stopPropagation = stopPropagation;\n    if (!e.preventDefault)\n        e.preventDefault = preventDefault;\n\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++) {\n        listeners[i](e, this);\n        if (e.propagationStopped)\n            break;\n    }\n    \n    if (defaultHandler && !e.defaultPrevented)\n        return defaultHandler(e, this);\n};\n\n\nEventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++)\n        listeners[i](e, this);\n};\n\nEventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    this.on(eventName, function newCallback() {\n        _self.off(eventName, newCallback);\n        callback.apply(null, arguments);\n    });\n    if (!callback) {\n        /*global Promise*/\n        return new Promise(function(resolve) {\n            callback = resolve;\n        });\n    }\n};\n\n\nEventEmitter.setDefaultHandler = function(eventName, callback) {\n    /**@type {any}*/\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        handlers = this._defaultHandlers = {_disabled_: {}};\n    \n    if (handlers[eventName]) {\n        var old = handlers[eventName];\n        var disabled = handlers._disabled_[eventName];\n        if (!disabled)\n            handlers._disabled_[eventName] = disabled = [];\n        disabled.push(old);\n        var i = disabled.indexOf(callback);\n        if (i != -1) \n            disabled.splice(i, 1);\n    }\n    handlers[eventName] = callback;\n};\nEventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        return;\n    var disabled = handlers._disabled_[eventName];\n    \n    if (handlers[eventName] == callback) {\n        if (disabled)\n            this.setDefaultHandler(eventName, disabled.pop());\n    } else if (disabled) {\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n};\n\nEventEmitter.on =\nEventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        listeners = this._eventRegistry[eventName] = [];\n\n    if (listeners.indexOf(callback) == -1)\n        listeners[capturing ? \"unshift\" : \"push\"](callback);\n    return callback;\n};\n\nEventEmitter.off =\nEventEmitter.removeListener =\nEventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        return;\n\n    var index = listeners.indexOf(callback);\n    if (index !== -1)\n        listeners.splice(index, 1);\n};\n/**\n * @this {EventEmitter}\n */\nEventEmitter.removeAllListeners = function(eventName) {\n    if (!eventName) this._eventRegistry = this._defaultHandlers = undefined;\n    if (this._eventRegistry) this._eventRegistry[eventName] = undefined;\n    if (this._defaultHandlers) this._defaultHandlers[eventName] = undefined;\n};\n\nexports.EventEmitter = EventEmitter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9ldmVudF9lbWl0dGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsVUFBVSxJQUFJO0FBQ2Q7QUFDQSxtQ0FBbUM7QUFDbkMsa0NBQWtDOztBQUVsQztBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BELHdEQUF3RDs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7OztBQUdBO0FBQ0EsY0FBYyxJQUFJO0FBQ2xCO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9saWIvZXZlbnRfZW1pdHRlci5qcz8wMTRmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqQHR5cGUge2FueX0qL1xudmFyIEV2ZW50RW1pdHRlciA9IHt9O1xudmFyIHN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCkgeyB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7IH07XG52YXIgcHJldmVudERlZmF1bHQgPSBmdW5jdGlvbigpIHsgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsgfTtcblxuRXZlbnRFbWl0dGVyLl9lbWl0ID1cbkV2ZW50RW1pdHRlci5fZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xuICAgIHRoaXMuX2V2ZW50UmVnaXN0cnkgfHwgKHRoaXMuX2V2ZW50UmVnaXN0cnkgPSB7fSk7XG4gICAgdGhpcy5fZGVmYXVsdEhhbmRsZXJzIHx8ICh0aGlzLl9kZWZhdWx0SGFuZGxlcnMgPSB7fSk7XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRSZWdpc3RyeVtldmVudE5hbWVdIHx8IFtdO1xuICAgIHZhciBkZWZhdWx0SGFuZGxlciA9IHRoaXMuX2RlZmF1bHRIYW5kbGVyc1tldmVudE5hbWVdO1xuICAgIGlmICghbGlzdGVuZXJzLmxlbmd0aCAmJiAhZGVmYXVsdEhhbmRsZXIpXG4gICAgICAgIHJldHVybjtcblxuICAgIGlmICh0eXBlb2YgZSAhPSBcIm9iamVjdFwiIHx8ICFlKVxuICAgICAgICBlID0ge307XG5cbiAgICBpZiAoIWUudHlwZSlcbiAgICAgICAgZS50eXBlID0gZXZlbnROYW1lO1xuICAgIGlmICghZS5zdG9wUHJvcGFnYXRpb24pXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gc3RvcFByb3BhZ2F0aW9uO1xuICAgIGlmICghZS5wcmV2ZW50RGVmYXVsdClcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCA9IHByZXZlbnREZWZhdWx0O1xuXG4gICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLnNsaWNlKCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0ZW5lcnNbaV0oZSwgdGhpcyk7XG4gICAgICAgIGlmIChlLnByb3BhZ2F0aW9uU3RvcHBlZClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZGVmYXVsdEhhbmRsZXIgJiYgIWUuZGVmYXVsdFByZXZlbnRlZClcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRIYW5kbGVyKGUsIHRoaXMpO1xufTtcblxuXG5FdmVudEVtaXR0ZXIuX3NpZ25hbCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZSkge1xuICAgIHZhciBsaXN0ZW5lcnMgPSAodGhpcy5fZXZlbnRSZWdpc3RyeSB8fCB7fSlbZXZlbnROYW1lXTtcbiAgICBpZiAoIWxpc3RlbmVycylcbiAgICAgICAgcmV0dXJuO1xuICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5zbGljZSgpO1xuICAgIGZvciAodmFyIGk9MDsgaTxsaXN0ZW5lcnMubGVuZ3RoOyBpKyspXG4gICAgICAgIGxpc3RlbmVyc1tpXShlLCB0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5vbmNlID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5vbihldmVudE5hbWUsIGZ1bmN0aW9uIG5ld0NhbGxiYWNrKCkge1xuICAgICAgICBfc2VsZi5vZmYoZXZlbnROYW1lLCBuZXdDYWxsYmFjayk7XG4gICAgICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfSk7XG4gICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAvKmdsb2JhbCBQcm9taXNlKi9cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuXG5FdmVudEVtaXR0ZXIuc2V0RGVmYXVsdEhhbmRsZXIgPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgLyoqQHR5cGUge2FueX0qL1xuICAgIHZhciBoYW5kbGVycyA9IHRoaXMuX2RlZmF1bHRIYW5kbGVycztcbiAgICBpZiAoIWhhbmRsZXJzKVxuICAgICAgICBoYW5kbGVycyA9IHRoaXMuX2RlZmF1bHRIYW5kbGVycyA9IHtfZGlzYWJsZWRfOiB7fX07XG4gICAgXG4gICAgaWYgKGhhbmRsZXJzW2V2ZW50TmFtZV0pIHtcbiAgICAgICAgdmFyIG9sZCA9IGhhbmRsZXJzW2V2ZW50TmFtZV07XG4gICAgICAgIHZhciBkaXNhYmxlZCA9IGhhbmRsZXJzLl9kaXNhYmxlZF9bZXZlbnROYW1lXTtcbiAgICAgICAgaWYgKCFkaXNhYmxlZClcbiAgICAgICAgICAgIGhhbmRsZXJzLl9kaXNhYmxlZF9bZXZlbnROYW1lXSA9IGRpc2FibGVkID0gW107XG4gICAgICAgIGRpc2FibGVkLnB1c2gob2xkKTtcbiAgICAgICAgdmFyIGkgPSBkaXNhYmxlZC5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgaWYgKGkgIT0gLTEpIFxuICAgICAgICAgICAgZGlzYWJsZWQuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgICBoYW5kbGVyc1tldmVudE5hbWVdID0gY2FsbGJhY2s7XG59O1xuRXZlbnRFbWl0dGVyLnJlbW92ZURlZmF1bHRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBoYW5kbGVycyA9IHRoaXMuX2RlZmF1bHRIYW5kbGVycztcbiAgICBpZiAoIWhhbmRsZXJzKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIGRpc2FibGVkID0gaGFuZGxlcnMuX2Rpc2FibGVkX1tldmVudE5hbWVdO1xuICAgIFxuICAgIGlmIChoYW5kbGVyc1tldmVudE5hbWVdID09IGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChkaXNhYmxlZClcbiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdEhhbmRsZXIoZXZlbnROYW1lLCBkaXNhYmxlZC5wb3AoKSk7XG4gICAgfSBlbHNlIGlmIChkaXNhYmxlZCkge1xuICAgICAgICB2YXIgaSA9IGRpc2FibGVkLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICBpZiAoaSAhPSAtMSlcbiAgICAgICAgICAgIGRpc2FibGVkLnNwbGljZShpLCAxKTtcbiAgICB9XG59O1xuXG5FdmVudEVtaXR0ZXIub24gPVxuRXZlbnRFbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudE5hbWUsIGNhbGxiYWNrLCBjYXB0dXJpbmcpIHtcbiAgICB0aGlzLl9ldmVudFJlZ2lzdHJ5ID0gdGhpcy5fZXZlbnRSZWdpc3RyeSB8fCB7fTtcblxuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5W2V2ZW50TmFtZV07XG4gICAgaWYgKCFsaXN0ZW5lcnMpXG4gICAgICAgIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50UmVnaXN0cnlbZXZlbnROYW1lXSA9IFtdO1xuXG4gICAgaWYgKGxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKSA9PSAtMSlcbiAgICAgICAgbGlzdGVuZXJzW2NhcHR1cmluZyA/IFwidW5zaGlmdFwiIDogXCJwdXNoXCJdKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gY2FsbGJhY2s7XG59O1xuXG5FdmVudEVtaXR0ZXIub2ZmID1cbkV2ZW50RW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9XG5FdmVudEVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLl9ldmVudFJlZ2lzdHJ5ID0gdGhpcy5fZXZlbnRSZWdpc3RyeSB8fCB7fTtcblxuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5W2V2ZW50TmFtZV07XG4gICAgaWYgKCFsaXN0ZW5lcnMpXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbn07XG4vKipcbiAqIEB0aGlzIHtFdmVudEVtaXR0ZXJ9XG4gKi9cbkV2ZW50RW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgICBpZiAoIWV2ZW50TmFtZSkgdGhpcy5fZXZlbnRSZWdpc3RyeSA9IHRoaXMuX2RlZmF1bHRIYW5kbGVycyA9IHVuZGVmaW5lZDtcbiAgICBpZiAodGhpcy5fZXZlbnRSZWdpc3RyeSkgdGhpcy5fZXZlbnRSZWdpc3RyeVtldmVudE5hbWVdID0gdW5kZWZpbmVkO1xuICAgIGlmICh0aGlzLl9kZWZhdWx0SGFuZGxlcnMpIHRoaXMuX2RlZmF1bHRIYW5kbGVyc1tldmVudE5hbWVdID0gdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0cy5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/event_emitter.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/keys.js":
/*!***********************************************!*\
  !*** ./node_modules/ace-code/src/lib/keys.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ./oop */ \"./node_modules/ace-code/src/lib/oop.js\");\n\n\nvar Keys = {\n    MODIFIER_KEYS: {\n        16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta',\n        91: 'MetaLeft', 92: 'MetaRight', 93: 'ContextMenu'\n    },\n\n    KEY_MODS: {\n        \"ctrl\": 1, \"alt\": 2, \"option\" : 2, \"shift\": 4,\n        \"super\": 8, \"meta\": 8, \"command\": 8, \"cmd\": 8, \n        \"control\": 1\n    },\n\n    FUNCTION_KEYS : {\n        8  : \"Backspace\",\n        9  : \"Tab\",\n        13 : \"Return\",\n        19 : \"Pause\",\n        27 : \"Esc\",\n        32 : \"Space\",\n        33 : \"PageUp\",\n        34 : \"PageDown\",\n        35 : \"End\",\n        36 : \"Home\",\n        37 : \"Left\",\n        38 : \"Up\",\n        39 : \"Right\",\n        40 : \"Down\",\n        44 : \"Print\",\n        45 : \"Insert\",\n        46 : \"Delete\",\n        '-13': \"NumpadEnter\",\n        144: \"Numlock\",\n        145: \"Scrolllock\"\n    },\n\n    PRINTABLE_KEYS: {\n        32: ' ',  59: ';',  61: '=', 107: '+', 109: '-', 110: '.',\n        186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',\n        219: '[', 220: '\\\\',221: ']', 222: \"'\", 111: '/', 106: '*'\n    }\n};\n\nvar codeToKeyCode = {\n    Command: 224,\n    Backspace: 8,\n    Tab: 9,\n    Return: 13,\n    Enter: 13,\n    Pause: 19,\n    Escape: 27,\n    PageUp: 33,\n    PageDown: 34,\n    End: 35,\n    Home: 36,\n    Insert: 45,\n    Delete: 46,\n    ArrowLeft: 37,\n    ArrowUp: 38,\n    ArrowRight: 39,\n    ArrowDown: 40,\n    // special keys\n    Backquote: 192,\n    Minus: 189,\n    Equal: 187,\n    BracketLeft: 219,\n    Backslash: 220,\n    BracketRight: 221,\n    Semicolon: 186,\n    Quote: 222,\n    Comma: 188,\n    Period: 190,\n    Slash: 191,\n    Space: 32,\n    NumpadAdd: 107,\n    NumpadDecimal: 110,\n    NumpadSubtract: 109,\n    NumpadDivide: 111,\n    NumpadMultiply: 106\n};\nfor (var i = 0; i < 10; i++) {\n    codeToKeyCode[\"Digit\" + i] = 48 + i;\n    codeToKeyCode[\"Numpad\" + i] = 96 + i;\n    Keys.PRINTABLE_KEYS[48 + i] = \"\" + i;\n    Keys.FUNCTION_KEYS[96 + i] = \"Numpad\" + i;\n}\nfor (var i = 65; i < 91; i++) {\n    var chr = String.fromCharCode(i + 32);\n    codeToKeyCode[\"Key\" + chr.toUpperCase()] = i;\n    Keys.PRINTABLE_KEYS[i] = chr;\n}\nfor (var i = 1; i < 13; i++) {\n    codeToKeyCode[\"F\" + i] = 111 + i;\n    Keys.FUNCTION_KEYS[111 + i] = \"F\" + i;\n}\nvar modifiers = { \n    Shift: 16,\n    Control: 17,\n    Alt: 18,\n    Meta: 224\n};\nfor (var mod in modifiers) {\n    codeToKeyCode[mod] = codeToKeyCode[mod + \"Left\"]\n        = codeToKeyCode[mod + \"Right\"] = modifiers[mod];\n}\nexports.$codeToKeyCode = codeToKeyCode;\n\n// workaround for firefox bug\nKeys.PRINTABLE_KEYS[173] = '-';\n\n// A reverse map of FUNCTION_KEYS\nfor (var j in Keys.FUNCTION_KEYS) {\n    var name = Keys.FUNCTION_KEYS[j].toLowerCase();\n    Keys[name] = parseInt(j, 10);\n}\n\n// A reverse map of PRINTABLE_KEYS\nfor (var j in Keys.PRINTABLE_KEYS) {\n    var name = Keys.PRINTABLE_KEYS[j].toLowerCase();\n    Keys[name] = parseInt(j, 10);\n}\n\n// Add the MODIFIER_KEYS, FUNCTION_KEYS and PRINTABLE_KEYS to the KEY\n// variables as well.\noop.mixin(Keys, Keys.MODIFIER_KEYS);\noop.mixin(Keys, Keys.PRINTABLE_KEYS);\noop.mixin(Keys, Keys.FUNCTION_KEYS);\n\n// aliases\nKeys.enter = Keys[\"return\"];\nKeys.escape = Keys.esc;\nKeys.del = Keys[\"delete\"];\n\n(function() {\n    var mods = [\"cmd\", \"ctrl\", \"alt\", \"shift\"];\n    for (var i = Math.pow(2, mods.length); i--;) {\n        Keys.KEY_MODS[i] = mods.filter(function(x) {\n            return i & Keys.KEY_MODS[x];\n        }).join(\"-\") + \"-\";\n    }\n})();\n\nKeys.KEY_MODS[0] = \"\";\nKeys.KEY_MODS[-1] = \"input-\";\n\n\noop.mixin(exports, Keys);\n\nexports[\"default\"] = exports;\n\n// @ts-ignore\nexports.keyCodeToString = function(keyCode) {\n    // Language-switching keystroke in Chrome/Linux emits keyCode 0.\n    var keyString = Keys[keyCode];\n    if (typeof keyString != \"string\")\n        keyString = String.fromCharCode(keyCode);\n    return keyString.toLowerCase();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9rZXlzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQyxxREFBTzs7O0FBR3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLHdCQUF3QjtBQUN4QixlQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7O0FBRXRCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyxJQUFJO0FBQy9DO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxDQUFDOztBQUVEO0FBQ0E7OztBQUdBOztBQUVBLGtCQUFlOztBQUVmO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9rZXlzLmpzPzNlMTMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBvb3AgPSByZXF1aXJlKFwiLi9vb3BcIik7XG5cblxudmFyIEtleXMgPSB7XG4gICAgTU9ESUZJRVJfS0VZUzoge1xuICAgICAgICAxNjogJ1NoaWZ0JywgMTc6ICdDdHJsJywgMTg6ICdBbHQnLCAyMjQ6ICdNZXRhJyxcbiAgICAgICAgOTE6ICdNZXRhTGVmdCcsIDkyOiAnTWV0YVJpZ2h0JywgOTM6ICdDb250ZXh0TWVudSdcbiAgICB9LFxuXG4gICAgS0VZX01PRFM6IHtcbiAgICAgICAgXCJjdHJsXCI6IDEsIFwiYWx0XCI6IDIsIFwib3B0aW9uXCIgOiAyLCBcInNoaWZ0XCI6IDQsXG4gICAgICAgIFwic3VwZXJcIjogOCwgXCJtZXRhXCI6IDgsIFwiY29tbWFuZFwiOiA4LCBcImNtZFwiOiA4LCBcbiAgICAgICAgXCJjb250cm9sXCI6IDFcbiAgICB9LFxuXG4gICAgRlVOQ1RJT05fS0VZUyA6IHtcbiAgICAgICAgOCAgOiBcIkJhY2tzcGFjZVwiLFxuICAgICAgICA5ICA6IFwiVGFiXCIsXG4gICAgICAgIDEzIDogXCJSZXR1cm5cIixcbiAgICAgICAgMTkgOiBcIlBhdXNlXCIsXG4gICAgICAgIDI3IDogXCJFc2NcIixcbiAgICAgICAgMzIgOiBcIlNwYWNlXCIsXG4gICAgICAgIDMzIDogXCJQYWdlVXBcIixcbiAgICAgICAgMzQgOiBcIlBhZ2VEb3duXCIsXG4gICAgICAgIDM1IDogXCJFbmRcIixcbiAgICAgICAgMzYgOiBcIkhvbWVcIixcbiAgICAgICAgMzcgOiBcIkxlZnRcIixcbiAgICAgICAgMzggOiBcIlVwXCIsXG4gICAgICAgIDM5IDogXCJSaWdodFwiLFxuICAgICAgICA0MCA6IFwiRG93blwiLFxuICAgICAgICA0NCA6IFwiUHJpbnRcIixcbiAgICAgICAgNDUgOiBcIkluc2VydFwiLFxuICAgICAgICA0NiA6IFwiRGVsZXRlXCIsXG4gICAgICAgICctMTMnOiBcIk51bXBhZEVudGVyXCIsXG4gICAgICAgIDE0NDogXCJOdW1sb2NrXCIsXG4gICAgICAgIDE0NTogXCJTY3JvbGxsb2NrXCJcbiAgICB9LFxuXG4gICAgUFJJTlRBQkxFX0tFWVM6IHtcbiAgICAgICAgMzI6ICcgJywgIDU5OiAnOycsICA2MTogJz0nLCAxMDc6ICcrJywgMTA5OiAnLScsIDExMDogJy4nLFxuICAgICAgICAxODY6ICc7JywgMTg3OiAnPScsIDE4ODogJywnLCAxODk6ICctJywgMTkwOiAnLicsIDE5MTogJy8nLCAxOTI6ICdgJyxcbiAgICAgICAgMjE5OiAnWycsIDIyMDogJ1xcXFwnLDIyMTogJ10nLCAyMjI6IFwiJ1wiLCAxMTE6ICcvJywgMTA2OiAnKidcbiAgICB9XG59O1xuXG52YXIgY29kZVRvS2V5Q29kZSA9IHtcbiAgICBDb21tYW5kOiAyMjQsXG4gICAgQmFja3NwYWNlOiA4LFxuICAgIFRhYjogOSxcbiAgICBSZXR1cm46IDEzLFxuICAgIEVudGVyOiAxMyxcbiAgICBQYXVzZTogMTksXG4gICAgRXNjYXBlOiAyNyxcbiAgICBQYWdlVXA6IDMzLFxuICAgIFBhZ2VEb3duOiAzNCxcbiAgICBFbmQ6IDM1LFxuICAgIEhvbWU6IDM2LFxuICAgIEluc2VydDogNDUsXG4gICAgRGVsZXRlOiA0NixcbiAgICBBcnJvd0xlZnQ6IDM3LFxuICAgIEFycm93VXA6IDM4LFxuICAgIEFycm93UmlnaHQ6IDM5LFxuICAgIEFycm93RG93bjogNDAsXG4gICAgLy8gc3BlY2lhbCBrZXlzXG4gICAgQmFja3F1b3RlOiAxOTIsXG4gICAgTWludXM6IDE4OSxcbiAgICBFcXVhbDogMTg3LFxuICAgIEJyYWNrZXRMZWZ0OiAyMTksXG4gICAgQmFja3NsYXNoOiAyMjAsXG4gICAgQnJhY2tldFJpZ2h0OiAyMjEsXG4gICAgU2VtaWNvbG9uOiAxODYsXG4gICAgUXVvdGU6IDIyMixcbiAgICBDb21tYTogMTg4LFxuICAgIFBlcmlvZDogMTkwLFxuICAgIFNsYXNoOiAxOTEsXG4gICAgU3BhY2U6IDMyLFxuICAgIE51bXBhZEFkZDogMTA3LFxuICAgIE51bXBhZERlY2ltYWw6IDExMCxcbiAgICBOdW1wYWRTdWJ0cmFjdDogMTA5LFxuICAgIE51bXBhZERpdmlkZTogMTExLFxuICAgIE51bXBhZE11bHRpcGx5OiAxMDZcbn07XG5mb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICBjb2RlVG9LZXlDb2RlW1wiRGlnaXRcIiArIGldID0gNDggKyBpO1xuICAgIGNvZGVUb0tleUNvZGVbXCJOdW1wYWRcIiArIGldID0gOTYgKyBpO1xuICAgIEtleXMuUFJJTlRBQkxFX0tFWVNbNDggKyBpXSA9IFwiXCIgKyBpO1xuICAgIEtleXMuRlVOQ1RJT05fS0VZU1s5NiArIGldID0gXCJOdW1wYWRcIiArIGk7XG59XG5mb3IgKHZhciBpID0gNjU7IGkgPCA5MTsgaSsrKSB7XG4gICAgdmFyIGNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoaSArIDMyKTtcbiAgICBjb2RlVG9LZXlDb2RlW1wiS2V5XCIgKyBjaHIudG9VcHBlckNhc2UoKV0gPSBpO1xuICAgIEtleXMuUFJJTlRBQkxFX0tFWVNbaV0gPSBjaHI7XG59XG5mb3IgKHZhciBpID0gMTsgaSA8IDEzOyBpKyspIHtcbiAgICBjb2RlVG9LZXlDb2RlW1wiRlwiICsgaV0gPSAxMTEgKyBpO1xuICAgIEtleXMuRlVOQ1RJT05fS0VZU1sxMTEgKyBpXSA9IFwiRlwiICsgaTtcbn1cbnZhciBtb2RpZmllcnMgPSB7IFxuICAgIFNoaWZ0OiAxNixcbiAgICBDb250cm9sOiAxNyxcbiAgICBBbHQ6IDE4LFxuICAgIE1ldGE6IDIyNFxufTtcbmZvciAodmFyIG1vZCBpbiBtb2RpZmllcnMpIHtcbiAgICBjb2RlVG9LZXlDb2RlW21vZF0gPSBjb2RlVG9LZXlDb2RlW21vZCArIFwiTGVmdFwiXVxuICAgICAgICA9IGNvZGVUb0tleUNvZGVbbW9kICsgXCJSaWdodFwiXSA9IG1vZGlmaWVyc1ttb2RdO1xufVxuZXhwb3J0cy4kY29kZVRvS2V5Q29kZSA9IGNvZGVUb0tleUNvZGU7XG5cbi8vIHdvcmthcm91bmQgZm9yIGZpcmVmb3ggYnVnXG5LZXlzLlBSSU5UQUJMRV9LRVlTWzE3M10gPSAnLSc7XG5cbi8vIEEgcmV2ZXJzZSBtYXAgb2YgRlVOQ1RJT05fS0VZU1xuZm9yICh2YXIgaiBpbiBLZXlzLkZVTkNUSU9OX0tFWVMpIHtcbiAgICB2YXIgbmFtZSA9IEtleXMuRlVOQ1RJT05fS0VZU1tqXS50b0xvd2VyQ2FzZSgpO1xuICAgIEtleXNbbmFtZV0gPSBwYXJzZUludChqLCAxMCk7XG59XG5cbi8vIEEgcmV2ZXJzZSBtYXAgb2YgUFJJTlRBQkxFX0tFWVNcbmZvciAodmFyIGogaW4gS2V5cy5QUklOVEFCTEVfS0VZUykge1xuICAgIHZhciBuYW1lID0gS2V5cy5QUklOVEFCTEVfS0VZU1tqXS50b0xvd2VyQ2FzZSgpO1xuICAgIEtleXNbbmFtZV0gPSBwYXJzZUludChqLCAxMCk7XG59XG5cbi8vIEFkZCB0aGUgTU9ESUZJRVJfS0VZUywgRlVOQ1RJT05fS0VZUyBhbmQgUFJJTlRBQkxFX0tFWVMgdG8gdGhlIEtFWVxuLy8gdmFyaWFibGVzIGFzIHdlbGwuXG5vb3AubWl4aW4oS2V5cywgS2V5cy5NT0RJRklFUl9LRVlTKTtcbm9vcC5taXhpbihLZXlzLCBLZXlzLlBSSU5UQUJMRV9LRVlTKTtcbm9vcC5taXhpbihLZXlzLCBLZXlzLkZVTkNUSU9OX0tFWVMpO1xuXG4vLyBhbGlhc2VzXG5LZXlzLmVudGVyID0gS2V5c1tcInJldHVyblwiXTtcbktleXMuZXNjYXBlID0gS2V5cy5lc2M7XG5LZXlzLmRlbCA9IEtleXNbXCJkZWxldGVcIl07XG5cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgbW9kcyA9IFtcImNtZFwiLCBcImN0cmxcIiwgXCJhbHRcIiwgXCJzaGlmdFwiXTtcbiAgICBmb3IgKHZhciBpID0gTWF0aC5wb3coMiwgbW9kcy5sZW5ndGgpOyBpLS07KSB7XG4gICAgICAgIEtleXMuS0VZX01PRFNbaV0gPSBtb2RzLmZpbHRlcihmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICByZXR1cm4gaSAmIEtleXMuS0VZX01PRFNbeF07XG4gICAgICAgIH0pLmpvaW4oXCItXCIpICsgXCItXCI7XG4gICAgfVxufSkoKTtcblxuS2V5cy5LRVlfTU9EU1swXSA9IFwiXCI7XG5LZXlzLktFWV9NT0RTWy0xXSA9IFwiaW5wdXQtXCI7XG5cblxub29wLm1peGluKGV4cG9ydHMsIEtleXMpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBleHBvcnRzO1xuXG4vLyBAdHMtaWdub3JlXG5leHBvcnRzLmtleUNvZGVUb1N0cmluZyA9IGZ1bmN0aW9uKGtleUNvZGUpIHtcbiAgICAvLyBMYW5ndWFnZS1zd2l0Y2hpbmcga2V5c3Ryb2tlIGluIENocm9tZS9MaW51eCBlbWl0cyBrZXlDb2RlIDAuXG4gICAgdmFyIGtleVN0cmluZyA9IEtleXNba2V5Q29kZV07XG4gICAgaWYgKHR5cGVvZiBrZXlTdHJpbmcgIT0gXCJzdHJpbmdcIilcbiAgICAgICAga2V5U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZShrZXlDb2RlKTtcbiAgICByZXR1cm4ga2V5U3RyaW5nLnRvTG93ZXJDYXNlKCk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/keys.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/lang.js":
/*!***********************************************!*\
  !*** ./node_modules/ace-code/src/lib/lang.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nexports.last = function(a) {\n    return a[a.length - 1];\n};\n\n\n/** @param {string} string */\nexports.stringReverse = function(string) {\n    return string.split(\"\").reverse().join(\"\");\n};\n\nexports.stringRepeat = function (string, count) {\n    var result = '';\n    while (count > 0) {\n        if (count & 1)\n            result += string;\n\n        if (count >>= 1)\n            string += string;\n    }\n    return result;\n};\n\nvar trimBeginRegexp = /^\\s\\s*/;\nvar trimEndRegexp = /\\s\\s*$/;\n\nexports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n};\n\nexports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n};\n/**\n * @template T\n * @param {T} obj\n * @return {T}\n */\nexports.copyObject = function(obj) {\n    /** @type Object*/\n    var copy = {};\n    for (var key in obj) {\n        copy[key] = obj[key];\n    }\n    return copy;\n};\n\nexports.copyArray = function(array){\n    var copy = [];\n    for (var i=0, l=array.length; i<l; i++) {\n        if (array[i] && typeof array[i] == \"object\")\n            copy[i] = this.copyObject(array[i]);\n        else\n            copy[i] = array[i];\n    }\n    return copy;\n};\n\nexports.deepCopy = __webpack_require__(/*! ./deep_copy */ \"./node_modules/ace-code/src/lib/deep_copy.js\").deepCopy;\n\nexports.arrayToMap = function(arr) {\n    var map = {};\n    for (var i=0; i<arr.length; i++) {\n        map[arr[i]] = 1;\n    }\n    return map;\n\n};\n\nexports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) {\n        map[i] = props[i];\n    }\n    return map;\n};\n\n/*\n * splice out of 'array' anything that === 'value'\n */\nexports.arrayRemove = function(array, value) {\n  for (var i = 0; i <= array.length; i++) {\n    if (value === array[i]) {\n      array.splice(i, 1);\n    }\n  }\n};\n\nexports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\n\nexports.escapeHTML = function(str) {\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n};\n\nexports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n\n    string.replace(regExp, function(str) {\n        matches.push({\n            offset: arguments[arguments.length-2],\n            length: str.length\n        });\n    });\n\n    return matches;\n};\n\n/* deprecated */\nexports.deferredCall = function(fcn) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var deferred = function(timeout) {\n        deferred.cancel();\n        timer = setTimeout(callback, timeout || 0);\n        return deferred;\n    };\n\n    deferred.schedule = deferred;\n\n    deferred.call = function() {\n        this.cancel();\n        fcn();\n        return deferred;\n    };\n\n    deferred.cancel = function() {\n        clearTimeout(timer);\n        timer = null;\n        return deferred;\n    };\n\n    deferred.isPending = function() {\n        return timer;\n    };\n\n    return deferred;\n};\n\n\nexports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var _self = function(timeout) {\n        if (timer == null)\n            timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n\n    _self.delay = function(timeout) {\n        timer && clearTimeout(timer);\n        timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.schedule = _self;\n\n    _self.call = function() {\n        this.cancel();\n        fcn();\n    };\n\n    _self.cancel = function() {\n        timer && clearTimeout(timer);\n        timer = null;\n    };\n\n    _self.isPending = function() {\n        return timer;\n    };\n\n    return _self;\n};\n\nexports.supportsLookbehind = function () {\n    try {\n        new RegExp('(?<=.)');\n    } catch (e) {\n        return false;\n    }\n    return true;\n};\n\nexports.skipEmptyMatch = function(line, last, supportsUnicodeFlag) {\n    return supportsUnicodeFlag && line.codePointAt(last) > 0xffff ? 2 : 1;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9sYW5nLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFlBQVk7QUFDWjtBQUNBOzs7QUFHQSxZQUFZLFFBQVE7QUFDcEIscUJBQXFCO0FBQ3JCO0FBQ0E7O0FBRUEsb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxzQkFBc0I7QUFDdEI7QUFDQTs7QUFFQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZCxZQUFZO0FBQ1o7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCO0FBQ2pCO0FBQ0Esa0NBQWtDLEtBQUs7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0hBQWtEOztBQUVsRCxrQkFBa0I7QUFDbEI7QUFDQSxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQjtBQUNwQixrQ0FBa0M7QUFDbEM7O0FBRUEsa0JBQWtCO0FBQ2xCLDBDQUEwQyx1QkFBdUIsdUJBQXVCLHVCQUF1QjtBQUMvRzs7QUFFQSx1QkFBdUI7QUFDdkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCO0FBQ3RCO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9saWIvbGFuZy5qcz9kMjA4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLmxhc3QgPSBmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIGFbYS5sZW5ndGggLSAxXTtcbn07XG5cblxuLyoqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgKi9cbmV4cG9ydHMuc3RyaW5nUmV2ZXJzZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcuc3BsaXQoXCJcIikucmV2ZXJzZSgpLmpvaW4oXCJcIik7XG59O1xuXG5leHBvcnRzLnN0cmluZ1JlcGVhdCA9IGZ1bmN0aW9uIChzdHJpbmcsIGNvdW50KSB7XG4gICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgIHdoaWxlIChjb3VudCA+IDApIHtcbiAgICAgICAgaWYgKGNvdW50ICYgMSlcbiAgICAgICAgICAgIHJlc3VsdCArPSBzdHJpbmc7XG5cbiAgICAgICAgaWYgKGNvdW50ID4+PSAxKVxuICAgICAgICAgICAgc3RyaW5nICs9IHN0cmluZztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbnZhciB0cmltQmVnaW5SZWdleHAgPSAvXlxcc1xccyovO1xudmFyIHRyaW1FbmRSZWdleHAgPSAvXFxzXFxzKiQvO1xuXG5leHBvcnRzLnN0cmluZ1RyaW1MZWZ0ID0gZnVuY3Rpb24gKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSh0cmltQmVnaW5SZWdleHAsICcnKTtcbn07XG5cbmV4cG9ydHMuc3RyaW5nVHJpbVJpZ2h0ID0gZnVuY3Rpb24gKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSh0cmltRW5kUmVnZXhwLCAnJyk7XG59O1xuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUfSBvYmpcbiAqIEByZXR1cm4ge1R9XG4gKi9cbmV4cG9ydHMuY29weU9iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIC8qKiBAdHlwZSBPYmplY3QqL1xuICAgIHZhciBjb3B5ID0ge307XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICBjb3B5W2tleV0gPSBvYmpba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIGNvcHk7XG59O1xuXG5leHBvcnRzLmNvcHlBcnJheSA9IGZ1bmN0aW9uKGFycmF5KXtcbiAgICB2YXIgY29weSA9IFtdO1xuICAgIGZvciAodmFyIGk9MCwgbD1hcnJheS5sZW5ndGg7IGk8bDsgaSsrKSB7XG4gICAgICAgIGlmIChhcnJheVtpXSAmJiB0eXBlb2YgYXJyYXlbaV0gPT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgIGNvcHlbaV0gPSB0aGlzLmNvcHlPYmplY3QoYXJyYXlbaV0pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjb3B5W2ldID0gYXJyYXlbaV07XG4gICAgfVxuICAgIHJldHVybiBjb3B5O1xufTtcblxuZXhwb3J0cy5kZWVwQ29weSA9IHJlcXVpcmUoXCIuL2RlZXBfY29weVwiKS5kZWVwQ29weTtcblxuZXhwb3J0cy5hcnJheVRvTWFwID0gZnVuY3Rpb24oYXJyKSB7XG4gICAgdmFyIG1hcCA9IHt9O1xuICAgIGZvciAodmFyIGk9MDsgaTxhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWFwW2FycltpXV0gPSAxO1xuICAgIH1cbiAgICByZXR1cm4gbWFwO1xuXG59O1xuXG5leHBvcnRzLmNyZWF0ZU1hcCA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gICAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZm9yICh2YXIgaSBpbiBwcm9wcykge1xuICAgICAgICBtYXBbaV0gPSBwcm9wc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbn07XG5cbi8qXG4gKiBzcGxpY2Ugb3V0IG9mICdhcnJheScgYW55dGhpbmcgdGhhdCA9PT0gJ3ZhbHVlJ1xuICovXG5leHBvcnRzLmFycmF5UmVtb3ZlID0gZnVuY3Rpb24oYXJyYXksIHZhbHVlKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDw9IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHZhbHVlID09PSBhcnJheVtpXSkge1xuICAgICAgYXJyYXkuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0cy5lc2NhcGVSZWdFeHAgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbLiorP14ke30oKXxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKTtcbn07XG5cbmV4cG9ydHMuZXNjYXBlSFRNTCA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiAoXCJcIiArIHN0cikucmVwbGFjZSgvJi9nLCBcIiYjMzg7XCIpLnJlcGxhY2UoL1wiL2csIFwiJiMzNDtcIikucmVwbGFjZSgvJy9nLCBcIiYjMzk7XCIpLnJlcGxhY2UoLzwvZywgXCImIzYwO1wiKTtcbn07XG5cbmV4cG9ydHMuZ2V0TWF0Y2hPZmZzZXRzID0gZnVuY3Rpb24oc3RyaW5nLCByZWdFeHApIHtcbiAgICB2YXIgbWF0Y2hlcyA9IFtdO1xuXG4gICAgc3RyaW5nLnJlcGxhY2UocmVnRXhwLCBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgbWF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgIG9mZnNldDogYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMl0sXG4gICAgICAgICAgICBsZW5ndGg6IHN0ci5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWF0Y2hlcztcbn07XG5cbi8qIGRlcHJlY2F0ZWQgKi9cbmV4cG9ydHMuZGVmZXJyZWRDYWxsID0gZnVuY3Rpb24oZmNuKSB7XG4gICAgdmFyIHRpbWVyID0gbnVsbDtcbiAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZXIgPSBudWxsO1xuICAgICAgICBmY24oKTtcbiAgICB9O1xuXG4gICAgdmFyIGRlZmVycmVkID0gZnVuY3Rpb24odGltZW91dCkge1xuICAgICAgICBkZWZlcnJlZC5jYW5jZWwoKTtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCB0aW1lb3V0IHx8IDApO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XG4gICAgfTtcblxuICAgIGRlZmVycmVkLnNjaGVkdWxlID0gZGVmZXJyZWQ7XG5cbiAgICBkZWZlcnJlZC5jYWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIGZjbigpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XG4gICAgfTtcblxuICAgIGRlZmVycmVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZDtcbiAgICB9O1xuXG4gICAgZGVmZXJyZWQuaXNQZW5kaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aW1lcjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRlZmVycmVkO1xufTtcblxuXG5leHBvcnRzLmRlbGF5ZWRDYWxsID0gZnVuY3Rpb24oZmNuLCBkZWZhdWx0VGltZW91dCkge1xuICAgIHZhciB0aW1lciA9IG51bGw7XG4gICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgZmNuKCk7XG4gICAgfTtcblxuICAgIHZhciBfc2VsZiA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVyID09IG51bGwpXG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIHRpbWVvdXQgfHwgZGVmYXVsdFRpbWVvdXQpO1xuICAgIH07XG5cbiAgICBfc2VsZi5kZWxheSA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgICAgICAgdGltZXIgJiYgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCB0aW1lb3V0IHx8IGRlZmF1bHRUaW1lb3V0KTtcbiAgICB9O1xuICAgIF9zZWxmLnNjaGVkdWxlID0gX3NlbGY7XG5cbiAgICBfc2VsZi5jYWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIGZjbigpO1xuICAgIH07XG5cbiAgICBfc2VsZi5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZXIgJiYgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgdGltZXIgPSBudWxsO1xuICAgIH07XG5cbiAgICBfc2VsZi5pc1BlbmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRpbWVyO1xuICAgIH07XG5cbiAgICByZXR1cm4gX3NlbGY7XG59O1xuXG5leHBvcnRzLnN1cHBvcnRzTG9va2JlaGluZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBuZXcgUmVnRXhwKCcoPzw9LiknKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5leHBvcnRzLnNraXBFbXB0eU1hdGNoID0gZnVuY3Rpb24obGluZSwgbGFzdCwgc3VwcG9ydHNVbmljb2RlRmxhZykge1xuICAgIHJldHVybiBzdXBwb3J0c1VuaWNvZGVGbGFnICYmIGxpbmUuY29kZVBvaW50QXQobGFzdCkgPiAweGZmZmYgPyAyIDogMTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/lang.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/net.js":
/*!**********************************************!*\
  !*** ./node_modules/ace-code/src/lib/net.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("/*\n * based on code from:\n *\n * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/requirejs for details\n */\n\n\nvar dom = __webpack_require__(/*! ./dom */ \"./node_modules/ace-code/src/lib/dom.js\");\n\nexports.get = function (url, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onreadystatechange = function () {\n        //Do not explicitly handle errors, those should be\n        //visible via console output in the browser.\n        if (xhr.readyState === 4) {\n            callback(xhr.responseText);\n        }\n    };\n    xhr.send(null);\n};\n\nexports.loadScript = function(path, callback) {\n    var head = dom.getDocumentHead();\n    /**@type {HTMLScriptElement & {onload?: Function, onreadystatechange?: Function, readyState?: string}}*/\n    var s = document.createElement('script');\n\n    s.src = path;\n    head.appendChild(s);\n\n    s.onload = s.onreadystatechange = function(_, isAbort) {\n        if (isAbort || !s.readyState || s.readyState == \"loaded\" || s.readyState == \"complete\") {\n            s = s.onload = s.onreadystatechange = null;\n            if (!isAbort)\n                callback();\n        }\n    };\n};\n\n/*\n * Convert a url into a fully qualified absolute URL\n * This function does not work in IE6\n */\nexports.qualifyURL = function(url) {\n    var a = document.createElement('a');\n    a.href = url;\n    return a.href;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9uZXQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7QUFDYixVQUFVLG1CQUFPLENBQUMscURBQU87O0FBRXpCLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQjtBQUNsQjtBQUNBLGNBQWMscUJBQXFCLHVFQUF1RTtBQUMxRzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9saWIvbmV0LmpzP2MxZWYiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIGJhc2VkIG9uIGNvZGUgZnJvbTpcbiAqXG4gKiBAbGljZW5zZSBSZXF1aXJlSlMgdGV4dCAwLjI1LjAgQ29weXJpZ2h0IChjKSAyMDEwLTIwMTEsIFRoZSBEb2pvIEZvdW5kYXRpb24gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIEF2YWlsYWJsZSB2aWEgdGhlIE1JVCBvciBuZXcgQlNEIGxpY2Vuc2UuXG4gKiBzZWU6IGh0dHA6Ly9naXRodWIuY29tL2pyYnVya2UvcmVxdWlyZWpzIGZvciBkZXRhaWxzXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgZG9tID0gcmVxdWlyZShcIi4vZG9tXCIpO1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uICh1cmwsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vRG8gbm90IGV4cGxpY2l0bHkgaGFuZGxlIGVycm9ycywgdGhvc2Ugc2hvdWxkIGJlXG4gICAgICAgIC8vdmlzaWJsZSB2aWEgY29uc29sZSBvdXRwdXQgaW4gdGhlIGJyb3dzZXIuXG4gICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgY2FsbGJhY2soeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHhoci5zZW5kKG51bGwpO1xufTtcblxuZXhwb3J0cy5sb2FkU2NyaXB0ID0gZnVuY3Rpb24ocGF0aCwgY2FsbGJhY2spIHtcbiAgICB2YXIgaGVhZCA9IGRvbS5nZXREb2N1bWVudEhlYWQoKTtcbiAgICAvKipAdHlwZSB7SFRNTFNjcmlwdEVsZW1lbnQgJiB7b25sb2FkPzogRnVuY3Rpb24sIG9ucmVhZHlzdGF0ZWNoYW5nZT86IEZ1bmN0aW9uLCByZWFkeVN0YXRlPzogc3RyaW5nfX0qL1xuICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICBzLnNyYyA9IHBhdGg7XG4gICAgaGVhZC5hcHBlbmRDaGlsZChzKTtcblxuICAgIHMub25sb2FkID0gcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbihfLCBpc0Fib3J0KSB7XG4gICAgICAgIGlmIChpc0Fib3J0IHx8ICFzLnJlYWR5U3RhdGUgfHwgcy5yZWFkeVN0YXRlID09IFwibG9hZGVkXCIgfHwgcy5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgcyA9IHMub25sb2FkID0gcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgaWYgKCFpc0Fib3J0KVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuLypcbiAqIENvbnZlcnQgYSB1cmwgaW50byBhIGZ1bGx5IHF1YWxpZmllZCBhYnNvbHV0ZSBVUkxcbiAqIFRoaXMgZnVuY3Rpb24gZG9lcyBub3Qgd29yayBpbiBJRTZcbiAqL1xuZXhwb3J0cy5xdWFsaWZ5VVJMID0gZnVuY3Rpb24odXJsKSB7XG4gICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5ocmVmID0gdXJsO1xuICAgIHJldHVybiBhLmhyZWY7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/net.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/oop.js":
/*!**********************************************!*\
  !*** ./node_modules/ace-code/src/lib/oop.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nexports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n};\n\n/**\n * Implements mixin properties into the prototype of an object.\n * @template T\n * @param {T} obj - The prototype of the target object.\n * @param {Object} mixin - The source object.\n * @returns {T & Object} The merged prototype.\n */\nexports.mixin = function(obj, mixin) {\n    for (var key in mixin) {\n        obj[key] = mixin[key];\n    }\n    return obj;\n};\n\n/**\n * Implements mixin properties into the prototype of an object.\n * @template T\n * @param {T} proto - The prototype of the target object.\n * @param {Object} mixin - The source object.\n * @returns {T & Object} The merged prototype.\n */\nexports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9vb3AuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2QsV0FBVyxRQUFRO0FBQ25CLGFBQWEsWUFBWTtBQUN6QjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkLFdBQVcsUUFBUTtBQUNuQixhQUFhLFlBQVk7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9vb3AuanM/ZTZmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5pbmhlcml0cyA9IGZ1bmN0aW9uKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yO1xuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuLyoqXG4gKiBJbXBsZW1lbnRzIG1peGluIHByb3BlcnRpZXMgaW50byB0aGUgcHJvdG90eXBlIG9mIGFuIG9iamVjdC5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1R9IG9iaiAtIFRoZSBwcm90b3R5cGUgb2YgdGhlIHRhcmdldCBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gbWl4aW4gLSBUaGUgc291cmNlIG9iamVjdC5cbiAqIEByZXR1cm5zIHtUICYgT2JqZWN0fSBUaGUgbWVyZ2VkIHByb3RvdHlwZS5cbiAqL1xuZXhwb3J0cy5taXhpbiA9IGZ1bmN0aW9uKG9iaiwgbWl4aW4pIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gbWl4aW4pIHtcbiAgICAgICAgb2JqW2tleV0gPSBtaXhpbltrZXldO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufTtcblxuLyoqXG4gKiBJbXBsZW1lbnRzIG1peGluIHByb3BlcnRpZXMgaW50byB0aGUgcHJvdG90eXBlIG9mIGFuIG9iamVjdC5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1R9IHByb3RvIC0gVGhlIHByb3RvdHlwZSBvZiB0aGUgdGFyZ2V0IG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBtaXhpbiAtIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHJldHVybnMge1QgJiBPYmplY3R9IFRoZSBtZXJnZWQgcHJvdG90eXBlLlxuICovXG5leHBvcnRzLmltcGxlbWVudCA9IGZ1bmN0aW9uKHByb3RvLCBtaXhpbikge1xuICAgIGV4cG9ydHMubWl4aW4ocHJvdG8sIG1peGluKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/oop.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/report_error.js":
/*!*******************************************************!*\
  !*** ./node_modules/ace-code/src/lib/report_error.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nexports.reportError = function reportError(msg, data) {\n    var e = new Error(msg);\n    e[\"data\"] = data;\n    if (typeof console == \"object\" && console.error)\n        console.error(e);\n    setTimeout(function() { throw e; });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9yZXBvcnRfZXJyb3IuanMiLCJtYXBwaW5ncyI6IjtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVO0FBQ3RDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbGliL3JlcG9ydF9lcnJvci5qcz80ZTM0Il0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0cy5yZXBvcnRFcnJvciA9IGZ1bmN0aW9uIHJlcG9ydEVycm9yKG1zZywgZGF0YSkge1xuICAgIHZhciBlID0gbmV3IEVycm9yKG1zZyk7XG4gICAgZVtcImRhdGFcIl0gPSBkYXRhO1xuICAgIGlmICh0eXBlb2YgY29uc29sZSA9PSBcIm9iamVjdFwiICYmIGNvbnNvbGUuZXJyb3IpXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgdGhyb3cgZTsgfSk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/report_error.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/scroll.js":
/*!*************************************************!*\
  !*** ./node_modules/ace-code/src/lib/scroll.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("exports.preventParentScroll = function preventParentScroll(event) {\n    event.stopPropagation();\n    var target = event.currentTarget;\n    var contentOverflows = target.scrollHeight > target.clientHeight;\n    if (!contentOverflows) {\n        event.preventDefault();\n    }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi9zY3JvbGwuanMiLCJtYXBwaW5ncyI6IkFBQUEsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbGliL3Njcm9sbC5qcz9mMmEwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydHMucHJldmVudFBhcmVudFNjcm9sbCA9IGZ1bmN0aW9uIHByZXZlbnRQYXJlbnRTY3JvbGwoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICB2YXIgY29udGVudE92ZXJmbG93cyA9IHRhcmdldC5zY3JvbGxIZWlnaHQgPiB0YXJnZXQuY2xpZW50SGVpZ2h0O1xuICAgIGlmICghY29udGVudE92ZXJmbG93cykge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbn07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/scroll.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/lib/useragent.js":
/*!****************************************************!*\
  !*** ./node_modules/ace-code/src/lib/useragent.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\n/*\n * I hate doing this, but we need some way to determine if the user is on a Mac\n * The reason is that users have different expectations of their key combinations.\n *\n * Take copy as an example, Mac people expect to use CMD or APPLE + C\n * Windows folks expect to use CTRL + C\n */\nexports.OS = {\n    LINUX: \"LINUX\",\n    MAC: \"MAC\",\n    WINDOWS: \"WINDOWS\"\n};\n\n/*\n * Return an exports.OS constant\n */\nexports.getOS = function() {\n    if (exports.isMac) {\n        return exports.OS.MAC;\n    } else if (exports.isLinux) {\n        return exports.OS.LINUX;\n    } else {\n        return exports.OS.WINDOWS;\n    }\n};\n\n// this can be called in non browser environments (e.g. from ace/requirejs/text)\nvar _navigator = typeof navigator == \"object\" ? navigator : {};\n\nvar os = (/mac|win|linux/i.exec(_navigator.platform) || [\"other\"])[0].toLowerCase();\nvar ua = _navigator.userAgent || \"\";\nvar appName = _navigator.appName || \"\";\n\n// Is the user using a browser that identifies itself as Windows\nexports.isWin = (os == \"win\");\n\n// Is the user using a browser that identifies itself as Mac OS\nexports.isMac = (os == \"mac\");\n\n// Is the user using a browser that identifies itself as Linux\nexports.isLinux = (os == \"linux\");\n\n// Windows Store JavaScript apps (aka Metro apps written in HTML5 and JavaScript) do not use the \"Microsoft Internet Explorer\" string in their user agent, but \"MSAppHost\" instead.\nexports.isIE = \n    (appName == \"Microsoft Internet Explorer\" || appName.indexOf(\"MSAppHost\") >= 0)\n    ? parseFloat((ua.match(/(?:MSIE |Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1])\n    : parseFloat((ua.match(/(?:Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1]); // for ie\n    \nexports.isOldIE = exports.isIE && exports.isIE < 9;\n\n// Is this Firefox or related?\nexports.isGecko = exports.isMozilla = ua.match(/ Gecko\\/\\d+/);\n\n// Is this Opera \n// @ts-expect-error\nexports.isOpera = typeof opera == \"object\" && Object.prototype.toString.call(window[\"opera\"]) == \"[object Opera]\";\n\n// Is the user using a browser that identifies itself as WebKit \nexports.isWebKit = parseFloat(ua.split(\"WebKit/\")[1]) || undefined;\n\nexports.isChrome = parseFloat(ua.split(\" Chrome/\")[1]) || undefined;\n\nexports.isSafari = parseFloat(ua.split(\" Safari/\")[1]) && !exports.isChrome || undefined;\n\nexports.isEdge = parseFloat(ua.split(\" Edge/\")[1]) || undefined;\n\nexports.isAIR = ua.indexOf(\"AdobeAIR\") >= 0;\n\nexports.isAndroid = ua.indexOf(\"Android\") >= 0;\n\nexports.isChromeOS = ua.indexOf(\" CrOS \") >= 0;\n\nexports.isIOS = /iPad|iPhone|iPod/.test(ua) && !window[\"MSStream\"];\n\nif (exports.isIOS) exports.isMac = true;\n\nexports.isMobile = exports.isIOS || exports.isAndroid;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi91c2VyYWdlbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBLGFBQWE7O0FBRWI7QUFDQSxlQUFlOztBQUVmO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsNkRBQTZEO0FBQzdELHVEQUF1RCxtQ0FBbUM7QUFDMUY7QUFDQSxlQUFlOztBQUVmO0FBQ0EsZUFBZSxHQUFHLGlCQUFpQjs7QUFFbkM7QUFDQTtBQUNBLGVBQWU7O0FBRWY7QUFDQSxnQkFBZ0I7O0FBRWhCLGdCQUFnQjs7QUFFaEIsZ0JBQWdCOztBQUVoQixjQUFjOztBQUVkLGFBQWE7O0FBRWIsaUJBQWlCOztBQUVqQixrQkFBa0I7O0FBRWxCLGFBQWE7O0FBRWIsbUJBQW1CLGFBQWE7O0FBRWhDLGdCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpYi91c2VyYWdlbnQuanM/ZTgyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAqIEkgaGF0ZSBkb2luZyB0aGlzLCBidXQgd2UgbmVlZCBzb21lIHdheSB0byBkZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgb24gYSBNYWNcbiAqIFRoZSByZWFzb24gaXMgdGhhdCB1c2VycyBoYXZlIGRpZmZlcmVudCBleHBlY3RhdGlvbnMgb2YgdGhlaXIga2V5IGNvbWJpbmF0aW9ucy5cbiAqXG4gKiBUYWtlIGNvcHkgYXMgYW4gZXhhbXBsZSwgTWFjIHBlb3BsZSBleHBlY3QgdG8gdXNlIENNRCBvciBBUFBMRSArIENcbiAqIFdpbmRvd3MgZm9sa3MgZXhwZWN0IHRvIHVzZSBDVFJMICsgQ1xuICovXG5leHBvcnRzLk9TID0ge1xuICAgIExJTlVYOiBcIkxJTlVYXCIsXG4gICAgTUFDOiBcIk1BQ1wiLFxuICAgIFdJTkRPV1M6IFwiV0lORE9XU1wiXG59O1xuXG4vKlxuICogUmV0dXJuIGFuIGV4cG9ydHMuT1MgY29uc3RhbnRcbiAqL1xuZXhwb3J0cy5nZXRPUyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChleHBvcnRzLmlzTWFjKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLk9TLk1BQztcbiAgICB9IGVsc2UgaWYgKGV4cG9ydHMuaXNMaW51eCkge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PUy5MSU5VWDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZXhwb3J0cy5PUy5XSU5ET1dTO1xuICAgIH1cbn07XG5cbi8vIHRoaXMgY2FuIGJlIGNhbGxlZCBpbiBub24gYnJvd3NlciBlbnZpcm9ubWVudHMgKGUuZy4gZnJvbSBhY2UvcmVxdWlyZWpzL3RleHQpXG52YXIgX25hdmlnYXRvciA9IHR5cGVvZiBuYXZpZ2F0b3IgPT0gXCJvYmplY3RcIiA/IG5hdmlnYXRvciA6IHt9O1xuXG52YXIgb3MgPSAoL21hY3x3aW58bGludXgvaS5leGVjKF9uYXZpZ2F0b3IucGxhdGZvcm0pIHx8IFtcIm90aGVyXCJdKVswXS50b0xvd2VyQ2FzZSgpO1xudmFyIHVhID0gX25hdmlnYXRvci51c2VyQWdlbnQgfHwgXCJcIjtcbnZhciBhcHBOYW1lID0gX25hdmlnYXRvci5hcHBOYW1lIHx8IFwiXCI7XG5cbi8vIElzIHRoZSB1c2VyIHVzaW5nIGEgYnJvd3NlciB0aGF0IGlkZW50aWZpZXMgaXRzZWxmIGFzIFdpbmRvd3NcbmV4cG9ydHMuaXNXaW4gPSAob3MgPT0gXCJ3aW5cIik7XG5cbi8vIElzIHRoZSB1c2VyIHVzaW5nIGEgYnJvd3NlciB0aGF0IGlkZW50aWZpZXMgaXRzZWxmIGFzIE1hYyBPU1xuZXhwb3J0cy5pc01hYyA9IChvcyA9PSBcIm1hY1wiKTtcblxuLy8gSXMgdGhlIHVzZXIgdXNpbmcgYSBicm93c2VyIHRoYXQgaWRlbnRpZmllcyBpdHNlbGYgYXMgTGludXhcbmV4cG9ydHMuaXNMaW51eCA9IChvcyA9PSBcImxpbnV4XCIpO1xuXG4vLyBXaW5kb3dzIFN0b3JlIEphdmFTY3JpcHQgYXBwcyAoYWthIE1ldHJvIGFwcHMgd3JpdHRlbiBpbiBIVE1MNSBhbmQgSmF2YVNjcmlwdCkgZG8gbm90IHVzZSB0aGUgXCJNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXJcIiBzdHJpbmcgaW4gdGhlaXIgdXNlciBhZ2VudCwgYnV0IFwiTVNBcHBIb3N0XCIgaW5zdGVhZC5cbmV4cG9ydHMuaXNJRSA9IFxuICAgIChhcHBOYW1lID09IFwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCIgfHwgYXBwTmFtZS5pbmRleE9mKFwiTVNBcHBIb3N0XCIpID49IDApXG4gICAgPyBwYXJzZUZsb2F0KCh1YS5tYXRjaCgvKD86TVNJRSB8VHJpZGVudFxcL1swLTldK1tcXC4wLTldKzsuKnJ2OikoWzAtOV0rW1xcLjAtOV0rKS8pfHxbXSlbMV0pXG4gICAgOiBwYXJzZUZsb2F0KCh1YS5tYXRjaCgvKD86VHJpZGVudFxcL1swLTldK1tcXC4wLTldKzsuKnJ2OikoWzAtOV0rW1xcLjAtOV0rKS8pfHxbXSlbMV0pOyAvLyBmb3IgaWVcbiAgICBcbmV4cG9ydHMuaXNPbGRJRSA9IGV4cG9ydHMuaXNJRSAmJiBleHBvcnRzLmlzSUUgPCA5O1xuXG4vLyBJcyB0aGlzIEZpcmVmb3ggb3IgcmVsYXRlZD9cbmV4cG9ydHMuaXNHZWNrbyA9IGV4cG9ydHMuaXNNb3ppbGxhID0gdWEubWF0Y2goLyBHZWNrb1xcL1xcZCsvKTtcblxuLy8gSXMgdGhpcyBPcGVyYSBcbi8vIEB0cy1leHBlY3QtZXJyb3JcbmV4cG9ydHMuaXNPcGVyYSA9IHR5cGVvZiBvcGVyYSA9PSBcIm9iamVjdFwiICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3dbXCJvcGVyYVwiXSkgPT0gXCJbb2JqZWN0IE9wZXJhXVwiO1xuXG4vLyBJcyB0aGUgdXNlciB1c2luZyBhIGJyb3dzZXIgdGhhdCBpZGVudGlmaWVzIGl0c2VsZiBhcyBXZWJLaXQgXG5leHBvcnRzLmlzV2ViS2l0ID0gcGFyc2VGbG9hdCh1YS5zcGxpdChcIldlYktpdC9cIilbMV0pIHx8IHVuZGVmaW5lZDtcblxuZXhwb3J0cy5pc0Nocm9tZSA9IHBhcnNlRmxvYXQodWEuc3BsaXQoXCIgQ2hyb21lL1wiKVsxXSkgfHwgdW5kZWZpbmVkO1xuXG5leHBvcnRzLmlzU2FmYXJpID0gcGFyc2VGbG9hdCh1YS5zcGxpdChcIiBTYWZhcmkvXCIpWzFdKSAmJiAhZXhwb3J0cy5pc0Nocm9tZSB8fCB1bmRlZmluZWQ7XG5cbmV4cG9ydHMuaXNFZGdlID0gcGFyc2VGbG9hdCh1YS5zcGxpdChcIiBFZGdlL1wiKVsxXSkgfHwgdW5kZWZpbmVkO1xuXG5leHBvcnRzLmlzQUlSID0gdWEuaW5kZXhPZihcIkFkb2JlQUlSXCIpID49IDA7XG5cbmV4cG9ydHMuaXNBbmRyb2lkID0gdWEuaW5kZXhPZihcIkFuZHJvaWRcIikgPj0gMDtcblxuZXhwb3J0cy5pc0Nocm9tZU9TID0gdWEuaW5kZXhPZihcIiBDck9TIFwiKSA+PSAwO1xuXG5leHBvcnRzLmlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QodWEpICYmICF3aW5kb3dbXCJNU1N0cmVhbVwiXTtcblxuaWYgKGV4cG9ydHMuaXNJT1MpIGV4cG9ydHMuaXNNYWMgPSB0cnVlO1xuXG5leHBvcnRzLmlzTW9iaWxlID0gZXhwb3J0cy5pc0lPUyB8fCBleHBvcnRzLmlzQW5kcm9pZDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/lib/useragent.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/line_widgets.js":
/*!***************************************************!*\
  !*** ./node_modules/ace-code/src/line_widgets.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n * @typedef {import(\"./editor\").Editor} Editor\n * @typedef {import(\"./virtual_renderer\").VirtualRenderer} VirtualRenderer\n * @typedef {import(\"../ace-internal\").Ace.LineWidget} LineWidget\n */\n\nvar dom = __webpack_require__(/*! ./lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\n\n\nclass LineWidgets {\n    /**\n     * @param {EditSession} session\n     */\n    constructor(session) {\n        this.session = session;\n        this.session.widgetManager = this;\n        this.session.getRowLength = this.getRowLength;\n        this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;\n        this.updateOnChange = this.updateOnChange.bind(this);\n        this.renderWidgets = this.renderWidgets.bind(this);\n        this.measureWidgets = this.measureWidgets.bind(this);\n        this.session._changedWidgets = [];\n        this.$onChangeEditor = this.$onChangeEditor.bind(this);\n\n        this.session.on(\"change\", this.updateOnChange);\n        this.session.on(\"changeFold\", this.updateOnFold);\n        this.session.on(\"changeEditor\", this.$onChangeEditor);\n    }\n\n    /**\n     * @param {number} row\n     * @return {number}\n     */\n    getRowLength(row) {\n        var h;\n        if (this.lineWidgets)\n            h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        else\n            h = 0;\n        if (!this[\"$useWrapMode\"] || !this[\"$wrapData\"][row]) {\n            return 1 + h;\n        } else {\n            return this[\"$wrapData\"][row].length + 1 + h;\n        }\n    }\n\n    /**\n     * @return {number}\n     */\n    $getWidgetScreenLength() {\n        var screenRows = 0;\n        this.lineWidgets.forEach(function(w){\n            if (w && w.rowCount && !w.hidden)\n                screenRows += w.rowCount;\n        });\n        return screenRows;\n    }\n\n    $onChangeEditor(e) {\n        this.attach(e.editor);\n    }\n\n    /**\n     *\n     * @param {Editor} editor\n     */\n    attach(editor) {\n        if (editor  && editor.widgetManager && editor.widgetManager != this)\n            editor.widgetManager.detach();\n\n        if (this.editor == editor)\n            return;\n\n        this.detach();\n        /**@type {Editor} */\n        this.editor = editor;\n\n        if (editor) {\n            editor.widgetManager = this;\n            editor.renderer.on(\"beforeRender\", this.measureWidgets);\n            editor.renderer.on(\"afterRender\", this.renderWidgets);\n        }\n    }\n    detach(e) {\n        var editor = this.editor;\n        if (!editor)\n            return;\n\n        this.editor = null;\n        editor.widgetManager = null;\n\n        editor.renderer.off(\"beforeRender\", this.measureWidgets);\n        editor.renderer.off(\"afterRender\", this.renderWidgets);\n        var lineWidgets = this.session.lineWidgets;\n        lineWidgets && lineWidgets.forEach(function(w) {\n            if (w && w.el && w.el.parentNode) {\n                w._inDocument = false;\n                w.el.parentNode.removeChild(w.el);\n            }\n        });\n    }\n\n    /**\n     *\n     * @param e\n     * @param {EditSession} session\n     */\n    updateOnFold(e, session) {\n        var lineWidgets = session.lineWidgets;\n        if (!lineWidgets || !e.action)\n            return;\n        var fold = e.data;\n        var start = fold.start.row;\n        var end = fold.end.row;\n        var hide = e.action == \"add\";\n        for (var i = start + 1; i < end; i++) {\n            if (lineWidgets[i])\n                lineWidgets[i].hidden = hide;\n        }\n        if (lineWidgets[end]) {\n            if (hide) {\n                if (!lineWidgets[start])\n                    lineWidgets[start] = lineWidgets[end];\n                else\n                    lineWidgets[end].hidden = hide;\n            } else {\n                if (lineWidgets[start] == lineWidgets[end])\n                    lineWidgets[start] = undefined;\n                lineWidgets[end].hidden = hide;\n            }\n        }\n    }\n\n    /**\n     *\n     * @param {import(\"../ace-internal\").Ace.Delta} delta\n     */\n    updateOnChange(delta) {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets) return;\n\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n\n        if (len === 0) {\n            // return\n        } else if (delta.action == \"remove\") {\n            var removed = lineWidgets.splice(startRow + 1, len);\n            if (!lineWidgets[startRow] && removed[removed.length - 1]) {\n                lineWidgets[startRow] = removed.pop();\n            }\n            removed.forEach(function(w) {\n                w && this.removeLineWidget(w);\n            }, this);\n            this.$updateRows();\n        } else {\n            var args = new Array(len);\n            if (lineWidgets[startRow] && lineWidgets[startRow].column != null) {\n                if (delta.start.column > lineWidgets[startRow].column)\n                    startRow++;\n            }\n            args.unshift(startRow, 0);\n            lineWidgets.splice.apply(lineWidgets, args);\n            this.$updateRows();\n        }\n    }\n\n    $updateRows() {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets) return;\n        var noWidgets = true;\n        lineWidgets.forEach(function(w, i) {\n            if (w) {\n                noWidgets = false;\n                w.row = i;\n                while (w.$oldWidget) {\n                    w.$oldWidget.row = i;\n                    w = w.$oldWidget;\n                }\n            }\n        });\n        if (noWidgets)\n            this.session.lineWidgets = null;\n    }\n\n    /**\n     *\n     * @param {LineWidget} w\n     * @return {LineWidget}\n     */\n    $registerLineWidget(w) {\n        if (!this.session.lineWidgets)\n            this.session.lineWidgets = new Array(this.session.getLength());\n\n        var old = this.session.lineWidgets[w.row];\n        if (old) {\n            w.$oldWidget = old;\n            if (old.el && old.el.parentNode) {\n                old.el.parentNode.removeChild(old.el);\n                old._inDocument = false;\n            }\n        }\n\n        this.session.lineWidgets[w.row] = w;\n        return w;\n    }\n\n    /**\n     *\n     * @param {LineWidget} w\n     * @return {LineWidget}\n     */\n    addLineWidget(w) {\n        this.$registerLineWidget(w);\n        w.session = this.session;\n\n        if (!this.editor) return w;\n\n        var renderer = this.editor.renderer;\n        if (w.html && !w.el) {\n            w.el = dom.createElement(\"div\");\n            w.el.innerHTML = w.html;\n        }\n        if (w.text && !w.el) {\n            w.el = dom.createElement(\"div\");\n            w.el.textContent = w.text;\n        }\n        if (w.el) {\n            dom.addCssClass(w.el, \"ace_lineWidgetContainer\");\n            if (w.className) {\n                dom.addCssClass(w.el, w.className);\n            }\n            w.el.style.position = \"absolute\";\n            w.el.style.zIndex = \"5\";\n            renderer.container.appendChild(w.el);\n            w._inDocument = true;\n\n            if (!w.coverGutter) {\n                w.el.style.zIndex = \"3\";\n            }\n            if (w.pixelHeight == null) {\n                w.pixelHeight = w.el.offsetHeight;\n            }\n        }\n        if (w.rowCount == null) {\n            w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;\n        }\n\n        var fold = this.session.getFoldAt(w.row, 0);\n        w.$fold = fold;\n        if (fold) {\n            var lineWidgets = this.session.lineWidgets;\n            if (w.row == fold.end.row && !lineWidgets[fold.start.row])\n                lineWidgets[fold.start.row] = w;\n            else\n                w.hidden = true;\n        }\n\n        this.session._emit(\"changeFold\", {data:{start:{row: w.row}}});\n\n        this.$updateRows();\n        this.renderWidgets(null, renderer);\n        this.onWidgetChanged(w);\n        return w;\n    }\n\n    /**\n     * @param {LineWidget} w\n     */\n    removeLineWidget(w) {\n        w._inDocument = false;\n        w.session = null;\n        if (w.el && w.el.parentNode)\n            w.el.parentNode.removeChild(w.el);\n        if (w.editor && w.editor.destroy) try {\n            w.editor.destroy();\n        } catch(e){}\n        if (this.session.lineWidgets) {\n            var w1 = this.session.lineWidgets[w.row];\n            if (w1 == w) {\n                this.session.lineWidgets[w.row] = w.$oldWidget;\n                if (w.$oldWidget)\n                    this.onWidgetChanged(w.$oldWidget);\n            } else {\n                while (w1) {\n                    if (w1.$oldWidget == w) {\n                        w1.$oldWidget = w.$oldWidget;\n                        break;\n                    }\n                    w1 = w1.$oldWidget;\n                }\n            }\n        }\n        this.session._emit(\"changeFold\", {data:{start:{row: w.row}}});\n        this.$updateRows();\n    }\n\n    /**\n     *\n     * @param {number} row\n     * @return {LineWidget[]}\n     */\n    getWidgetsAtRow(row) {\n        var lineWidgets = this.session.lineWidgets;\n        var w = lineWidgets && lineWidgets[row];\n        var list = [];\n        while (w) {\n            list.push(w);\n            w = w.$oldWidget;\n        }\n        return list;\n    }\n\n    /**\n     * @param {LineWidget} w\n     * @internal\n     */\n    onWidgetChanged(w) {\n        this.session._changedWidgets.push(w);\n        this.editor && this.editor.renderer.updateFull();\n    }\n\n    /**\n     * @param {any} e\n     * @param {VirtualRenderer} renderer\n     */\n    measureWidgets(e, renderer) {\n        var changedWidgets = this.session._changedWidgets;\n        var config = renderer.layerConfig;\n\n        if (!changedWidgets || !changedWidgets.length) return;\n        var min = Infinity;\n        for (var i = 0; i < changedWidgets.length; i++) {\n            var w = changedWidgets[i];\n            if (!w || !w.el) continue;\n            if (w.session != this.session) continue;\n            if (!w._inDocument) {\n                if (this.session.lineWidgets[w.row] != w)\n                    continue;\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n\n            w.h = w.el.offsetHeight;\n\n            if (!w.fixedWidth) {\n                w.w = w.el.offsetWidth;\n                w.screenWidth = Math.ceil(w.w / config.characterWidth);\n            }\n\n            var rowCount = w.h / config.lineHeight;\n            if (w.coverLine) {\n                rowCount -= this.session.getRowLineCount(w.row);\n                if (rowCount < 0)\n                    rowCount = 0;\n            }\n            if (w.rowCount != rowCount) {\n                w.rowCount = rowCount;\n                if (w.row < min)\n                    min = w.row;\n            }\n        }\n        if (min != Infinity) {\n            this.session._emit(\"changeFold\", {data:{start:{row: min}}});\n            this.session.lineWidgetWidth = null;\n        }\n        this.session._changedWidgets = [];\n    }\n\n    /**\n     * @param {any} e\n     * @param {VirtualRenderer} renderer\n     */\n    renderWidgets(e, renderer) {\n        var config = renderer.layerConfig;\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var first = Math.min(this.firstRow, config.firstRow);\n        var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);\n\n        while (first > 0 && !lineWidgets[first])\n            first--;\n\n        this.firstRow = config.firstRow;\n        this.lastRow = config.lastRow;\n\n        renderer.$cursorLayer.config = config;\n        for (var i = first; i <= last; i++) {\n            /**@type{LineWidget}*/\n            var w = lineWidgets[i];\n            if (!w || !w.el) continue;\n            if (w.hidden) {\n                w.el.style.top = -100 - (w.pixelHeight || 0) + \"px\";\n                continue;\n            }\n            if (!w._inDocument) {\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            var top = renderer.$cursorLayer.getPixelPosition({row: i, column:0}, true).top;\n            if (!w.coverLine)\n                top += config.lineHeight * this.session.getRowLineCount(w.row);\n            w.el.style.top = top - config.offset + \"px\";\n\n            var left = w.coverGutter ? 0 : renderer.gutterWidth;\n            if (!w.fixedWidth)\n                left -= renderer.scrollLeft;\n            w.el.style.left = left + \"px\";\n\n            if (w.fullWidth && w.screenWidth) {\n                w.el.style.minWidth = config.width + 2 * config.padding + \"px\";\n            }\n\n            if (w.fixedWidth) {\n                w.el.style.right = renderer.scrollBar.getWidth() + \"px\";\n            } else {\n                w.el.style.right = \"\";\n            }\n        }\n    }\n\n}\n\n\nexports.LineWidgets = LineWidgets;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpbmVfd2lkZ2V0cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsYUFBYSxzQ0FBc0M7QUFDbkQsYUFBYSwyQkFBMkI7QUFDeEMsYUFBYSw4Q0FBOEM7QUFDM0QsYUFBYSwwQ0FBMEM7QUFDdkQ7O0FBRUEsVUFBVSxtQkFBTyxDQUFDLHlEQUFXOzs7QUFHN0I7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsUUFBUTtBQUMxQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFlBQVk7QUFDM0IsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFlBQVk7QUFDM0IsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMENBQTBDLE1BQU0sT0FBTyxhQUFhOztBQUVwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxNQUFNLE9BQU8sYUFBYTtBQUNwRTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFlBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsaUJBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsMkJBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxNQUFNLE9BQU8sV0FBVztBQUN0RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsS0FBSztBQUNwQixlQUFlLGlCQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDRCQUE0QixXQUFXO0FBQ3ZDLHFCQUFxQixXQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELGlCQUFpQjtBQUMvRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBLG1CQUFtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL2xpbmVfd2lkZ2V0cy5qcz8wODM4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9lZGl0X3Nlc3Npb25cIikuRWRpdFNlc3Npb259IEVkaXRTZXNzaW9uXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9lZGl0b3JcIikuRWRpdG9yfSBFZGl0b3JcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL3ZpcnR1YWxfcmVuZGVyZXJcIikuVmlydHVhbFJlbmRlcmVyfSBWaXJ0dWFsUmVuZGVyZXJcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkxpbmVXaWRnZXR9IExpbmVXaWRnZXRcbiAqL1xuXG52YXIgZG9tID0gcmVxdWlyZShcIi4vbGliL2RvbVwiKTtcblxuXG5jbGFzcyBMaW5lV2lkZ2V0cyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFZGl0U2Vzc2lvbn0gc2Vzc2lvblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb24pIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgICAgdGhpcy5zZXNzaW9uLndpZGdldE1hbmFnZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLnNlc3Npb24uZ2V0Um93TGVuZ3RoID0gdGhpcy5nZXRSb3dMZW5ndGg7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi4kZ2V0V2lkZ2V0U2NyZWVuTGVuZ3RoID0gdGhpcy4kZ2V0V2lkZ2V0U2NyZWVuTGVuZ3RoO1xuICAgICAgICB0aGlzLnVwZGF0ZU9uQ2hhbmdlID0gdGhpcy51cGRhdGVPbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlbmRlcldpZGdldHMgPSB0aGlzLnJlbmRlcldpZGdldHMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5tZWFzdXJlV2lkZ2V0cyA9IHRoaXMubWVhc3VyZVdpZGdldHMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLl9jaGFuZ2VkV2lkZ2V0cyA9IFtdO1xuICAgICAgICB0aGlzLiRvbkNoYW5nZUVkaXRvciA9IHRoaXMuJG9uQ2hhbmdlRWRpdG9yLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zZXNzaW9uLm9uKFwiY2hhbmdlXCIsIHRoaXMudXBkYXRlT25DaGFuZ2UpO1xuICAgICAgICB0aGlzLnNlc3Npb24ub24oXCJjaGFuZ2VGb2xkXCIsIHRoaXMudXBkYXRlT25Gb2xkKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLm9uKFwiY2hhbmdlRWRpdG9yXCIsIHRoaXMuJG9uQ2hhbmdlRWRpdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm93XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldFJvd0xlbmd0aChyb3cpIHtcbiAgICAgICAgdmFyIGg7XG4gICAgICAgIGlmICh0aGlzLmxpbmVXaWRnZXRzKVxuICAgICAgICAgICAgaCA9IHRoaXMubGluZVdpZGdldHNbcm93XSAmJiB0aGlzLmxpbmVXaWRnZXRzW3Jvd10ucm93Q291bnQgfHwgMDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaCA9IDA7XG4gICAgICAgIGlmICghdGhpc1tcIiR1c2VXcmFwTW9kZVwiXSB8fCAhdGhpc1tcIiR3cmFwRGF0YVwiXVtyb3ddKSB7XG4gICAgICAgICAgICByZXR1cm4gMSArIGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1tcIiR3cmFwRGF0YVwiXVtyb3ddLmxlbmd0aCArIDEgKyBoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgICRnZXRXaWRnZXRTY3JlZW5MZW5ndGgoKSB7XG4gICAgICAgIHZhciBzY3JlZW5Sb3dzID0gMDtcbiAgICAgICAgdGhpcy5saW5lV2lkZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHcpe1xuICAgICAgICAgICAgaWYgKHcgJiYgdy5yb3dDb3VudCAmJiAhdy5oaWRkZW4pXG4gICAgICAgICAgICAgICAgc2NyZWVuUm93cyArPSB3LnJvd0NvdW50O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNjcmVlblJvd3M7XG4gICAgfVxuXG4gICAgJG9uQ2hhbmdlRWRpdG9yKGUpIHtcbiAgICAgICAgdGhpcy5hdHRhY2goZS5lZGl0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvclxuICAgICAqL1xuICAgIGF0dGFjaChlZGl0b3IpIHtcbiAgICAgICAgaWYgKGVkaXRvciAgJiYgZWRpdG9yLndpZGdldE1hbmFnZXIgJiYgZWRpdG9yLndpZGdldE1hbmFnZXIgIT0gdGhpcylcbiAgICAgICAgICAgIGVkaXRvci53aWRnZXRNYW5hZ2VyLmRldGFjaCgpO1xuXG4gICAgICAgIGlmICh0aGlzLmVkaXRvciA9PSBlZGl0b3IpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy5kZXRhY2goKTtcbiAgICAgICAgLyoqQHR5cGUge0VkaXRvcn0gKi9cbiAgICAgICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG5cbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgICAgZWRpdG9yLndpZGdldE1hbmFnZXIgPSB0aGlzO1xuICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLm9uKFwiYmVmb3JlUmVuZGVyXCIsIHRoaXMubWVhc3VyZVdpZGdldHMpO1xuICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLm9uKFwiYWZ0ZXJSZW5kZXJcIiwgdGhpcy5yZW5kZXJXaWRnZXRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRhY2goZSkge1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG4gICAgICAgIGlmICghZWRpdG9yKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuZWRpdG9yID0gbnVsbDtcbiAgICAgICAgZWRpdG9yLndpZGdldE1hbmFnZXIgPSBudWxsO1xuXG4gICAgICAgIGVkaXRvci5yZW5kZXJlci5vZmYoXCJiZWZvcmVSZW5kZXJcIiwgdGhpcy5tZWFzdXJlV2lkZ2V0cyk7XG4gICAgICAgIGVkaXRvci5yZW5kZXJlci5vZmYoXCJhZnRlclJlbmRlclwiLCB0aGlzLnJlbmRlcldpZGdldHMpO1xuICAgICAgICB2YXIgbGluZVdpZGdldHMgPSB0aGlzLnNlc3Npb24ubGluZVdpZGdldHM7XG4gICAgICAgIGxpbmVXaWRnZXRzICYmIGxpbmVXaWRnZXRzLmZvckVhY2goZnVuY3Rpb24odykge1xuICAgICAgICAgICAgaWYgKHcgJiYgdy5lbCAmJiB3LmVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB3Ll9pbkRvY3VtZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdy5lbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHcuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICogQHBhcmFtIHtFZGl0U2Vzc2lvbn0gc2Vzc2lvblxuICAgICAqL1xuICAgIHVwZGF0ZU9uRm9sZChlLCBzZXNzaW9uKSB7XG4gICAgICAgIHZhciBsaW5lV2lkZ2V0cyA9IHNlc3Npb24ubGluZVdpZGdldHM7XG4gICAgICAgIGlmICghbGluZVdpZGdldHMgfHwgIWUuYWN0aW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgZm9sZCA9IGUuZGF0YTtcbiAgICAgICAgdmFyIHN0YXJ0ID0gZm9sZC5zdGFydC5yb3c7XG4gICAgICAgIHZhciBlbmQgPSBmb2xkLmVuZC5yb3c7XG4gICAgICAgIHZhciBoaWRlID0gZS5hY3Rpb24gPT0gXCJhZGRcIjtcbiAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0ICsgMTsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGluZVdpZGdldHNbaV0pXG4gICAgICAgICAgICAgICAgbGluZVdpZGdldHNbaV0uaGlkZGVuID0gaGlkZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGluZVdpZGdldHNbZW5kXSkge1xuICAgICAgICAgICAgaWYgKGhpZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxpbmVXaWRnZXRzW3N0YXJ0XSlcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZGdldHNbc3RhcnRdID0gbGluZVdpZGdldHNbZW5kXTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGxpbmVXaWRnZXRzW2VuZF0uaGlkZGVuID0gaGlkZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVXaWRnZXRzW3N0YXJ0XSA9PSBsaW5lV2lkZ2V0c1tlbmRdKVxuICAgICAgICAgICAgICAgICAgICBsaW5lV2lkZ2V0c1tzdGFydF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgbGluZVdpZGdldHNbZW5kXS5oaWRkZW4gPSBoaWRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuRGVsdGF9IGRlbHRhXG4gICAgICovXG4gICAgdXBkYXRlT25DaGFuZ2UoZGVsdGEpIHtcbiAgICAgICAgdmFyIGxpbmVXaWRnZXRzID0gdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzO1xuICAgICAgICBpZiAoIWxpbmVXaWRnZXRzKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHN0YXJ0Um93ID0gZGVsdGEuc3RhcnQucm93O1xuICAgICAgICB2YXIgbGVuID0gZGVsdGEuZW5kLnJvdyAtIHN0YXJ0Um93O1xuXG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIC8vIHJldHVyblxuICAgICAgICB9IGVsc2UgaWYgKGRlbHRhLmFjdGlvbiA9PSBcInJlbW92ZVwiKSB7XG4gICAgICAgICAgICB2YXIgcmVtb3ZlZCA9IGxpbmVXaWRnZXRzLnNwbGljZShzdGFydFJvdyArIDEsIGxlbik7XG4gICAgICAgICAgICBpZiAoIWxpbmVXaWRnZXRzW3N0YXJ0Um93XSAmJiByZW1vdmVkW3JlbW92ZWQubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgICAgICBsaW5lV2lkZ2V0c1tzdGFydFJvd10gPSByZW1vdmVkLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVtb3ZlZC5mb3JFYWNoKGZ1bmN0aW9uKHcpIHtcbiAgICAgICAgICAgICAgICB3ICYmIHRoaXMucmVtb3ZlTGluZVdpZGdldCh3KTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy4kdXBkYXRlUm93cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgICAgIGlmIChsaW5lV2lkZ2V0c1tzdGFydFJvd10gJiYgbGluZVdpZGdldHNbc3RhcnRSb3ddLmNvbHVtbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlbHRhLnN0YXJ0LmNvbHVtbiA+IGxpbmVXaWRnZXRzW3N0YXJ0Um93XS5jb2x1bW4pXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Um93Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzLnVuc2hpZnQoc3RhcnRSb3csIDApO1xuICAgICAgICAgICAgbGluZVdpZGdldHMuc3BsaWNlLmFwcGx5KGxpbmVXaWRnZXRzLCBhcmdzKTtcbiAgICAgICAgICAgIHRoaXMuJHVwZGF0ZVJvd3MoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICR1cGRhdGVSb3dzKCkge1xuICAgICAgICB2YXIgbGluZVdpZGdldHMgPSB0aGlzLnNlc3Npb24ubGluZVdpZGdldHM7XG4gICAgICAgIGlmICghbGluZVdpZGdldHMpIHJldHVybjtcbiAgICAgICAgdmFyIG5vV2lkZ2V0cyA9IHRydWU7XG4gICAgICAgIGxpbmVXaWRnZXRzLmZvckVhY2goZnVuY3Rpb24odywgaSkge1xuICAgICAgICAgICAgaWYgKHcpIHtcbiAgICAgICAgICAgICAgICBub1dpZGdldHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB3LnJvdyA9IGk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHcuJG9sZFdpZGdldCkge1xuICAgICAgICAgICAgICAgICAgICB3LiRvbGRXaWRnZXQucm93ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgdyA9IHcuJG9sZFdpZGdldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobm9XaWRnZXRzKVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TGluZVdpZGdldH0gd1xuICAgICAqIEByZXR1cm4ge0xpbmVXaWRnZXR9XG4gICAgICovXG4gICAgJHJlZ2lzdGVyTGluZVdpZGdldCh3KSB7XG4gICAgICAgIGlmICghdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzKVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzID0gbmV3IEFycmF5KHRoaXMuc2Vzc2lvbi5nZXRMZW5ndGgoKSk7XG5cbiAgICAgICAgdmFyIG9sZCA9IHRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0c1t3LnJvd107XG4gICAgICAgIGlmIChvbGQpIHtcbiAgICAgICAgICAgIHcuJG9sZFdpZGdldCA9IG9sZDtcbiAgICAgICAgICAgIGlmIChvbGQuZWwgJiYgb2xkLmVsLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICBvbGQuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGQuZWwpO1xuICAgICAgICAgICAgICAgIG9sZC5faW5Eb2N1bWVudCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzW3cucm93XSA9IHc7XG4gICAgICAgIHJldHVybiB3O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtMaW5lV2lkZ2V0fSB3XG4gICAgICogQHJldHVybiB7TGluZVdpZGdldH1cbiAgICAgKi9cbiAgICBhZGRMaW5lV2lkZ2V0KHcpIHtcbiAgICAgICAgdGhpcy4kcmVnaXN0ZXJMaW5lV2lkZ2V0KHcpO1xuICAgICAgICB3LnNlc3Npb24gPSB0aGlzLnNlc3Npb247XG5cbiAgICAgICAgaWYgKCF0aGlzLmVkaXRvcikgcmV0dXJuIHc7XG5cbiAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5lZGl0b3IucmVuZGVyZXI7XG4gICAgICAgIGlmICh3Lmh0bWwgJiYgIXcuZWwpIHtcbiAgICAgICAgICAgIHcuZWwgPSBkb20uY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHcuZWwuaW5uZXJIVE1MID0gdy5odG1sO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3LnRleHQgJiYgIXcuZWwpIHtcbiAgICAgICAgICAgIHcuZWwgPSBkb20uY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHcuZWwudGV4dENvbnRlbnQgPSB3LnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHcuZWwpIHtcbiAgICAgICAgICAgIGRvbS5hZGRDc3NDbGFzcyh3LmVsLCBcImFjZV9saW5lV2lkZ2V0Q29udGFpbmVyXCIpO1xuICAgICAgICAgICAgaWYgKHcuY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgZG9tLmFkZENzc0NsYXNzKHcuZWwsIHcuY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHcuZWwuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICB3LmVsLnN0eWxlLnpJbmRleCA9IFwiNVwiO1xuICAgICAgICAgICAgcmVuZGVyZXIuY29udGFpbmVyLmFwcGVuZENoaWxkKHcuZWwpO1xuICAgICAgICAgICAgdy5faW5Eb2N1bWVudCA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmICghdy5jb3Zlckd1dHRlcikge1xuICAgICAgICAgICAgICAgIHcuZWwuc3R5bGUuekluZGV4ID0gXCIzXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAody5waXhlbEhlaWdodCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdy5waXhlbEhlaWdodCA9IHcuZWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh3LnJvd0NvdW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIHcucm93Q291bnQgPSB3LnBpeGVsSGVpZ2h0IC8gcmVuZGVyZXIubGF5ZXJDb25maWcubGluZUhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmb2xkID0gdGhpcy5zZXNzaW9uLmdldEZvbGRBdCh3LnJvdywgMCk7XG4gICAgICAgIHcuJGZvbGQgPSBmb2xkO1xuICAgICAgICBpZiAoZm9sZCkge1xuICAgICAgICAgICAgdmFyIGxpbmVXaWRnZXRzID0gdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzO1xuICAgICAgICAgICAgaWYgKHcucm93ID09IGZvbGQuZW5kLnJvdyAmJiAhbGluZVdpZGdldHNbZm9sZC5zdGFydC5yb3ddKVxuICAgICAgICAgICAgICAgIGxpbmVXaWRnZXRzW2ZvbGQuc3RhcnQucm93XSA9IHc7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdy5oaWRkZW4gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXNzaW9uLl9lbWl0KFwiY2hhbmdlRm9sZFwiLCB7ZGF0YTp7c3RhcnQ6e3Jvdzogdy5yb3d9fX0pO1xuXG4gICAgICAgIHRoaXMuJHVwZGF0ZVJvd3MoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXRzKG51bGwsIHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5vbldpZGdldENoYW5nZWQodyk7XG4gICAgICAgIHJldHVybiB3O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TGluZVdpZGdldH0gd1xuICAgICAqL1xuICAgIHJlbW92ZUxpbmVXaWRnZXQodykge1xuICAgICAgICB3Ll9pbkRvY3VtZW50ID0gZmFsc2U7XG4gICAgICAgIHcuc2Vzc2lvbiA9IG51bGw7XG4gICAgICAgIGlmICh3LmVsICYmIHcuZWwucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIHcuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh3LmVsKTtcbiAgICAgICAgaWYgKHcuZWRpdG9yICYmIHcuZWRpdG9yLmRlc3Ryb3kpIHRyeSB7XG4gICAgICAgICAgICB3LmVkaXRvci5kZXN0cm95KCk7XG4gICAgICAgIH0gY2F0Y2goZSl7fVxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzKSB7XG4gICAgICAgICAgICB2YXIgdzEgPSB0aGlzLnNlc3Npb24ubGluZVdpZGdldHNbdy5yb3ddO1xuICAgICAgICAgICAgaWYgKHcxID09IHcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb24ubGluZVdpZGdldHNbdy5yb3ddID0gdy4kb2xkV2lkZ2V0O1xuICAgICAgICAgICAgICAgIGlmICh3LiRvbGRXaWRnZXQpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25XaWRnZXRDaGFuZ2VkKHcuJG9sZFdpZGdldCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlICh3MSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodzEuJG9sZFdpZGdldCA9PSB3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3MS4kb2xkV2lkZ2V0ID0gdy4kb2xkV2lkZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdzEgPSB3MS4kb2xkV2lkZ2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlc3Npb24uX2VtaXQoXCJjaGFuZ2VGb2xkXCIsIHtkYXRhOntzdGFydDp7cm93OiB3LnJvd319fSk7XG4gICAgICAgIHRoaXMuJHVwZGF0ZVJvd3MoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcmV0dXJuIHtMaW5lV2lkZ2V0W119XG4gICAgICovXG4gICAgZ2V0V2lkZ2V0c0F0Um93KHJvdykge1xuICAgICAgICB2YXIgbGluZVdpZGdldHMgPSB0aGlzLnNlc3Npb24ubGluZVdpZGdldHM7XG4gICAgICAgIHZhciB3ID0gbGluZVdpZGdldHMgJiYgbGluZVdpZGdldHNbcm93XTtcbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcbiAgICAgICAgd2hpbGUgKHcpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaCh3KTtcbiAgICAgICAgICAgIHcgPSB3LiRvbGRXaWRnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMaW5lV2lkZ2V0fSB3XG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgb25XaWRnZXRDaGFuZ2VkKHcpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLl9jaGFuZ2VkV2lkZ2V0cy5wdXNoKHcpO1xuICAgICAgICB0aGlzLmVkaXRvciAmJiB0aGlzLmVkaXRvci5yZW5kZXJlci51cGRhdGVGdWxsKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthbnl9IGVcbiAgICAgKiBAcGFyYW0ge1ZpcnR1YWxSZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBtZWFzdXJlV2lkZ2V0cyhlLCByZW5kZXJlcikge1xuICAgICAgICB2YXIgY2hhbmdlZFdpZGdldHMgPSB0aGlzLnNlc3Npb24uX2NoYW5nZWRXaWRnZXRzO1xuICAgICAgICB2YXIgY29uZmlnID0gcmVuZGVyZXIubGF5ZXJDb25maWc7XG5cbiAgICAgICAgaWYgKCFjaGFuZ2VkV2lkZ2V0cyB8fCAhY2hhbmdlZFdpZGdldHMubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHZhciBtaW4gPSBJbmZpbml0eTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2VkV2lkZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHcgPSBjaGFuZ2VkV2lkZ2V0c1tpXTtcbiAgICAgICAgICAgIGlmICghdyB8fCAhdy5lbCkgY29udGludWU7XG4gICAgICAgICAgICBpZiAody5zZXNzaW9uICE9IHRoaXMuc2Vzc2lvbikgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIXcuX2luRG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzW3cucm93XSAhPSB3KVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB3Ll9pbkRvY3VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5jb250YWluZXIuYXBwZW5kQ2hpbGQody5lbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHcuaCA9IHcuZWwub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICBpZiAoIXcuZml4ZWRXaWR0aCkge1xuICAgICAgICAgICAgICAgIHcudyA9IHcuZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgdy5zY3JlZW5XaWR0aCA9IE1hdGguY2VpbCh3LncgLyBjb25maWcuY2hhcmFjdGVyV2lkdGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcm93Q291bnQgPSB3LmggLyBjb25maWcubGluZUhlaWdodDtcbiAgICAgICAgICAgIGlmICh3LmNvdmVyTGluZSkge1xuICAgICAgICAgICAgICAgIHJvd0NvdW50IC09IHRoaXMuc2Vzc2lvbi5nZXRSb3dMaW5lQ291bnQody5yb3cpO1xuICAgICAgICAgICAgICAgIGlmIChyb3dDb3VudCA8IDApXG4gICAgICAgICAgICAgICAgICAgIHJvd0NvdW50ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3LnJvd0NvdW50ICE9IHJvd0NvdW50KSB7XG4gICAgICAgICAgICAgICAgdy5yb3dDb3VudCA9IHJvd0NvdW50O1xuICAgICAgICAgICAgICAgIGlmICh3LnJvdyA8IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gdy5yb3c7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1pbiAhPSBJbmZpbml0eSkge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLl9lbWl0KFwiY2hhbmdlRm9sZFwiLCB7ZGF0YTp7c3RhcnQ6e3JvdzogbWlufX19KTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0V2lkdGggPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5fY2hhbmdlZFdpZGdldHMgPSBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2FueX0gZVxuICAgICAqIEBwYXJhbSB7VmlydHVhbFJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqL1xuICAgIHJlbmRlcldpZGdldHMoZSwgcmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IHJlbmRlcmVyLmxheWVyQ29uZmlnO1xuICAgICAgICB2YXIgbGluZVdpZGdldHMgPSB0aGlzLnNlc3Npb24ubGluZVdpZGdldHM7XG4gICAgICAgIGlmICghbGluZVdpZGdldHMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBmaXJzdCA9IE1hdGgubWluKHRoaXMuZmlyc3RSb3csIGNvbmZpZy5maXJzdFJvdyk7XG4gICAgICAgIHZhciBsYXN0ID0gTWF0aC5tYXgodGhpcy5sYXN0Um93LCBjb25maWcubGFzdFJvdywgbGluZVdpZGdldHMubGVuZ3RoKTtcblxuICAgICAgICB3aGlsZSAoZmlyc3QgPiAwICYmICFsaW5lV2lkZ2V0c1tmaXJzdF0pXG4gICAgICAgICAgICBmaXJzdC0tO1xuXG4gICAgICAgIHRoaXMuZmlyc3RSb3cgPSBjb25maWcuZmlyc3RSb3c7XG4gICAgICAgIHRoaXMubGFzdFJvdyA9IGNvbmZpZy5sYXN0Um93O1xuXG4gICAgICAgIHJlbmRlcmVyLiRjdXJzb3JMYXllci5jb25maWcgPSBjb25maWc7XG4gICAgICAgIGZvciAodmFyIGkgPSBmaXJzdDsgaSA8PSBsYXN0OyBpKyspIHtcbiAgICAgICAgICAgIC8qKkB0eXBle0xpbmVXaWRnZXR9Ki9cbiAgICAgICAgICAgIHZhciB3ID0gbGluZVdpZGdldHNbaV07XG4gICAgICAgICAgICBpZiAoIXcgfHwgIXcuZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHcuaGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgdy5lbC5zdHlsZS50b3AgPSAtMTAwIC0gKHcucGl4ZWxIZWlnaHQgfHwgMCkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXcuX2luRG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICB3Ll9pbkRvY3VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5jb250YWluZXIuYXBwZW5kQ2hpbGQody5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdG9wID0gcmVuZGVyZXIuJGN1cnNvckxheWVyLmdldFBpeGVsUG9zaXRpb24oe3JvdzogaSwgY29sdW1uOjB9LCB0cnVlKS50b3A7XG4gICAgICAgICAgICBpZiAoIXcuY292ZXJMaW5lKVxuICAgICAgICAgICAgICAgIHRvcCArPSBjb25maWcubGluZUhlaWdodCAqIHRoaXMuc2Vzc2lvbi5nZXRSb3dMaW5lQ291bnQody5yb3cpO1xuICAgICAgICAgICAgdy5lbC5zdHlsZS50b3AgPSB0b3AgLSBjb25maWcub2Zmc2V0ICsgXCJweFwiO1xuXG4gICAgICAgICAgICB2YXIgbGVmdCA9IHcuY292ZXJHdXR0ZXIgPyAwIDogcmVuZGVyZXIuZ3V0dGVyV2lkdGg7XG4gICAgICAgICAgICBpZiAoIXcuZml4ZWRXaWR0aClcbiAgICAgICAgICAgICAgICBsZWZ0IC09IHJlbmRlcmVyLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICB3LmVsLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuXG4gICAgICAgICAgICBpZiAody5mdWxsV2lkdGggJiYgdy5zY3JlZW5XaWR0aCkge1xuICAgICAgICAgICAgICAgIHcuZWwuc3R5bGUubWluV2lkdGggPSBjb25maWcud2lkdGggKyAyICogY29uZmlnLnBhZGRpbmcgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh3LmZpeGVkV2lkdGgpIHtcbiAgICAgICAgICAgICAgICB3LmVsLnN0eWxlLnJpZ2h0ID0gcmVuZGVyZXIuc2Nyb2xsQmFyLmdldFdpZHRoKCkgKyBcInB4XCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHcuZWwuc3R5bGUucmlnaHQgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59XG5cblxuZXhwb3J0cy5MaW5lV2lkZ2V0cyA9IExpbmVXaWRnZXRzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/line_widgets.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/behaviour.js":
/*!*****************************************************!*\
  !*** ./node_modules/ace-code/src/mode/behaviour.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nvar Behaviour;\nBehaviour = function() {\n   this.$behaviours = {};\n};\n\n(function () {\n\n    /**\n     * @this {Behaviour & this}\n     */\n    this.add = function (name, action, callback) {\n        switch (undefined) {\n          case this.$behaviours:\n              this.$behaviours = {};\n          case this.$behaviours[name]:\n              this.$behaviours[name] = {};\n        }\n        this.$behaviours[name][action] = callback;\n    };\n\n    /**\n     * @this {Behaviour & this}\n     */\n    this.addBehaviours = function (behaviours) {\n        for (var key in behaviours) {\n            for (var action in behaviours[key]) {\n                this.add(key, action, behaviours[key][action]);\n            }\n        }\n    };\n\n    /**\n     * @this {Behaviour & this}\n     */\n    this.remove = function (name) {\n        if (this.$behaviours && this.$behaviours[name]) {\n            delete this.$behaviours[name];\n        }\n    };\n\n    /**\n     * @this {Behaviour & this}\n     */\n    this.inherit = function (mode, filter) {\n        if (typeof mode === \"function\") {\n            var behaviours = new mode().getBehaviours(filter);\n        } else {\n            var behaviours = mode.getBehaviours(filter);\n        }\n        this.addBehaviours(behaviours);\n    };\n\n    /**\n     *\n     * @param [filter]\n     * @returns {{}|*}\n     * @this {Behaviour & this}\n     */\n    this.getBehaviours = function (filter) {\n        if (!filter) {\n            return this.$behaviours;\n        } else {\n            var ret = {};\n            for (var i = 0; i < filter.length; i++) {\n                if (this.$behaviours[filter[i]]) {\n                    ret[filter[i]] = this.$behaviours[filter[i]];\n                }\n            }\n            return ret;\n        }\n    };\n\n}).call(Behaviour.prototype);\n\nexports.Behaviour = Behaviour;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvYmVoYXZpb3VyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSw0QkFBNEIsbUJBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW9kZS9iZWhhdmlvdXIuanM/NjY0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIEJlaGF2aW91cjtcbkJlaGF2aW91ciA9IGZ1bmN0aW9uKCkge1xuICAgdGhpcy4kYmVoYXZpb3VycyA9IHt9O1xufTtcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtCZWhhdmlvdXIgJiB0aGlzfVxuICAgICAqL1xuICAgIHRoaXMuYWRkID0gZnVuY3Rpb24gKG5hbWUsIGFjdGlvbiwgY2FsbGJhY2spIHtcbiAgICAgICAgc3dpdGNoICh1bmRlZmluZWQpIHtcbiAgICAgICAgICBjYXNlIHRoaXMuJGJlaGF2aW91cnM6XG4gICAgICAgICAgICAgIHRoaXMuJGJlaGF2aW91cnMgPSB7fTtcbiAgICAgICAgICBjYXNlIHRoaXMuJGJlaGF2aW91cnNbbmFtZV06XG4gICAgICAgICAgICAgIHRoaXMuJGJlaGF2aW91cnNbbmFtZV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRiZWhhdmlvdXJzW25hbWVdW2FjdGlvbl0gPSBjYWxsYmFjaztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHRoaXMge0JlaGF2aW91ciAmIHRoaXN9XG4gICAgICovXG4gICAgdGhpcy5hZGRCZWhhdmlvdXJzID0gZnVuY3Rpb24gKGJlaGF2aW91cnMpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGJlaGF2aW91cnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGFjdGlvbiBpbiBiZWhhdmlvdXJzW2tleV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChrZXksIGFjdGlvbiwgYmVoYXZpb3Vyc1trZXldW2FjdGlvbl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtCZWhhdmlvdXIgJiB0aGlzfVxuICAgICAqL1xuICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuJGJlaGF2aW91cnMgJiYgdGhpcy4kYmVoYXZpb3Vyc1tuYW1lXSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuJGJlaGF2aW91cnNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHRoaXMge0JlaGF2aW91ciAmIHRoaXN9XG4gICAgICovXG4gICAgdGhpcy5pbmhlcml0ID0gZnVuY3Rpb24gKG1vZGUsIGZpbHRlcikge1xuICAgICAgICBpZiAodHlwZW9mIG1vZGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFyIGJlaGF2aW91cnMgPSBuZXcgbW9kZSgpLmdldEJlaGF2aW91cnMoZmlsdGVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBiZWhhdmlvdXJzID0gbW9kZS5nZXRCZWhhdmlvdXJzKGZpbHRlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRCZWhhdmlvdXJzKGJlaGF2aW91cnMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBbZmlsdGVyXVxuICAgICAqIEByZXR1cm5zIHt7fXwqfVxuICAgICAqIEB0aGlzIHtCZWhhdmlvdXIgJiB0aGlzfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0QmVoYXZpb3VycyA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcbiAgICAgICAgaWYgKCFmaWx0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRiZWhhdmlvdXJzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWx0ZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kYmVoYXZpb3Vyc1tmaWx0ZXJbaV1dKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldFtmaWx0ZXJbaV1dID0gdGhpcy4kYmVoYXZpb3Vyc1tmaWx0ZXJbaV1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG59KS5jYWxsKEJlaGF2aW91ci5wcm90b3R5cGUpO1xuXG5leHBvcnRzLkJlaGF2aW91ciA9IEJlaGF2aW91cjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/behaviour.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/behaviour/cstyle.js":
/*!************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/behaviour/cstyle.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nvar oop = __webpack_require__(/*! ../../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar Behaviour = (__webpack_require__(/*! ../behaviour */ \"./node_modules/ace-code/src/mode/behaviour.js\").Behaviour);\nvar TokenIterator = (__webpack_require__(/*! ../../token_iterator */ \"./node_modules/ace-code/src/token_iterator.js\").TokenIterator);\nvar lang = __webpack_require__(/*! ../../lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\n\nvar SAFE_INSERT_IN_TOKENS =\n    [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\"];\nvar SAFE_INSERT_BEFORE_TOKENS =\n    [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\", \"comment\"];\n\nvar context;\nvar contextCache = {};\nvar defaultQuotes = {'\"' : '\"', \"'\" : \"'\"};\n\nvar initContext = function(editor) {\n    var id = -1;\n    if (editor.multiSelect) {\n        id = editor.selection.index;\n        if (contextCache.rangeCount != editor.multiSelect.rangeCount)\n            contextCache = {rangeCount: editor.multiSelect.rangeCount};\n    }\n    if (contextCache[id])\n        return context = contextCache[id];\n    context = contextCache[id] = {\n        autoInsertedBrackets: 0,\n        autoInsertedRow: -1,\n        autoInsertedLineEnd: \"\",\n        maybeInsertedBrackets: 0,\n        maybeInsertedRow: -1,\n        maybeInsertedLineStart: \"\",\n        maybeInsertedLineEnd: \"\"\n    };\n};\n\nvar getWrapped = function(selection, selected, opening, closing) {\n    var rowDiff = selection.end.row - selection.start.row;\n    return {\n        text: opening + selected + closing,\n        selection: [\n                0,\n                selection.start.column + 1,\n                rowDiff,\n                selection.end.column + (rowDiff ? 0 : 1)\n            ]\n    };\n};\n/**\n * Creates a new Cstyle behaviour object with the specified options.\n * @param {Object} [options] - The options for the Cstyle behaviour object.\n * @param {boolean} [options.braces] - Whether to force braces auto-pairing.\n * @param {boolean} [options.closeDocComment] - enables automatic insertion of closing tags for documentation comments.\n */\nvar CstyleBehaviour;\nCstyleBehaviour = function(options) {\n    options = options || {};\n    this.add(\"braces\", \"insertion\", function(state, action, editor, session, text) {\n        var cursor = editor.getCursorPosition();\n        var line = session.doc.getLine(cursor.row);\n        if (text == '{') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            var token = session.getTokenAt(cursor.row, cursor.column);\n            if (selected !== \"\" && selected !== \"{\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '{', '}');\n            }\n            else if (token && /(?:string)\\.quasi|\\.xml/.test(token.type)) {\n                let excludeTokens = [\n                    /tag\\-(?:open|name)/, /attribute\\-name/\n                ];\n                if (excludeTokens.some((el) => el.test(token.type)) || /(string)\\.quasi/.test(token.type)\n                    && token.value[cursor.column - token.start - 1] !== '$') return;\n\n                CstyleBehaviour.recordAutoInsert(editor, session, \"}\");\n                return {\n                    text: '{}',\n                    selection: [1, 1]\n                };\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                if (/[\\]\\}\\)]/.test(line[cursor.column]) || editor.inMultiSelectMode || options.braces) {\n                    CstyleBehaviour.recordAutoInsert(editor, session, \"}\");\n                    return {\n                        text: '{}',\n                        selection: [1, 1]\n                    };\n                } else {\n                    CstyleBehaviour.recordMaybeInsert(editor, session, \"{\");\n                    return {\n                        text: '{',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        } else if (text == '}') {\n            initContext(editor);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == '}') {\n                var matching = session.$findOpeningBracket('}', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        } else if (text == \"\\n\" || text == \"\\r\\n\") {\n            initContext(editor);\n            var closing = \"\";\n            if (CstyleBehaviour.isMaybeInsertedClosing(cursor, line)) {\n                closing = lang.stringRepeat(\"}\", context.maybeInsertedBrackets);\n                CstyleBehaviour.clearMaybeInsertedClosing();\n            }\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar === '}') {\n                var openBracePos = session.findMatchingBracket({row: cursor.row, column: cursor.column+1}, '}');\n                if (!openBracePos)\n                     return null;\n                var next_indent = this.$getIndent(session.getLine(openBracePos.row));\n            } else if (closing) {\n                var next_indent = this.$getIndent(line);\n            } else {\n                CstyleBehaviour.clearMaybeInsertedClosing();\n                return;\n            }\n            var indent = next_indent + session.getTabString();\n\n            return {\n                text: '\\n' + indent + '\\n' + next_indent + closing,\n                selection: [1, indent.length, 1, indent.length]\n            };\n        } else {\n            CstyleBehaviour.clearMaybeInsertedClosing();\n        }\n    });\n\n    this.add(\"braces\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '{') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.end.column, range.end.column + 1);\n            if (rightChar == '}') {\n                range.end.column++;\n                return range;\n            } else {\n                context.maybeInsertedBrackets--;\n            }\n        }\n    });\n\n    this.add(\"parens\", \"insertion\", function(state, action, editor, session, text) {\n        if (text == '(') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '(', ')');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \")\");\n                return {\n                    text: '()',\n                    selection: [1, 1]\n                };\n            }\n        } else if (text == ')') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ')') {\n                var matching = session.$findOpeningBracket(')', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"parens\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '(') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ')') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"brackets\", \"insertion\", function(state, action, editor, session, text) {\n        if (text == '[') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '[', ']');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \"]\");\n                return {\n                    text: '[]',\n                    selection: [1, 1]\n                };\n            }\n        } else if (text == ']') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ']') {\n                var matching = session.$findOpeningBracket(']', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"brackets\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '[') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ']') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"insertion\", function(state, action, editor, session, text) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n        if (text.length == 1 && quotes[text]) {\n            if (this.lineCommentStart && this.lineCommentStart.indexOf(text) != -1)\n                return;\n            initContext(editor);\n            var quote = text;\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && (selected.length != 1 || !quotes[selected]) && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, quote, quote);\n            } else if (!selected) {\n                var cursor = editor.getCursorPosition();\n                var line = session.doc.getLine(cursor.row);\n                var leftChar = line.substring(cursor.column-1, cursor.column);\n                var rightChar = line.substring(cursor.column, cursor.column + 1);\n\n                var token = session.getTokenAt(cursor.row, cursor.column);\n                var rightToken = session.getTokenAt(cursor.row, cursor.column + 1);\n                // We're escaped.\n                if (leftChar == \"\\\\\" && token && /escape/.test(token.type))\n                    return null;\n\n                var stringBefore = token && /string|escape/.test(token.type);\n                var stringAfter = !rightToken || /string|escape/.test(rightToken.type);\n\n                var pair;\n                if (rightChar == quote) {\n                    pair = stringBefore !== stringAfter;\n                    if (pair && /string\\.end/.test(rightToken.type))\n                        pair = false;\n                } else {\n                    if (stringBefore && !stringAfter)\n                        return null; // wrap string with different quote\n                    if (stringBefore && stringAfter)\n                        return null; // do not pair quotes inside strings\n                    var wordRe = session.$mode.tokenRe;\n                    wordRe.lastIndex = 0;\n                    var isWordBefore = wordRe.test(leftChar);\n                    wordRe.lastIndex = 0;\n                    var isWordAfter = wordRe.test(rightChar);\n\n                    var pairQuotesAfter = session.$mode.$pairQuotesAfter;\n                    var shouldPairQuotes = pairQuotesAfter && pairQuotesAfter[quote] && pairQuotesAfter[quote].test(leftChar);\n\n                    if ((!shouldPairQuotes && isWordBefore) || isWordAfter)\n                        return null; // before or after alphanumeric\n                    if (rightChar && !/[\\s;,.})\\]\\\\]/.test(rightChar))\n                        return null; // there is rightChar and it isn't closing\n                    var charBefore = line[cursor.column - 2];\n                    if (leftChar == quote &&  (charBefore == quote || wordRe.test(charBefore)))\n                        return null;\n                    pair = true;\n                }\n                return {\n                    text: pair ? quote + quote : \"\",\n                    selection: [1,1]\n                };\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"deletion\", function(state, action, editor, session, range) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && quotes.hasOwnProperty(selected)) {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == selected) {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    if (options.closeDocComment !== false) {\n        this.add(\"doc comment end\", \"insertion\", function (state, action, editor, session, text) {\n            if (state === \"doc-start\" && (text === \"\\n\" || text === \"\\r\\n\") && editor.selection.isEmpty()) {\n                var cursor = editor.getCursorPosition();\n                if (cursor.column === 0) {\n                    return;\n                }\n                var line = session.doc.getLine(cursor.row);\n                var nextLine = session.doc.getLine(cursor.row + 1);\n                var tokens = session.getTokens(cursor.row);\n                var index = 0;\n                for (var i = 0; i < tokens.length; i++) {\n                    index += tokens[i].value.length;\n                    var currentToken = tokens[i];\n                    if (index >= cursor.column) {\n                        if (index === cursor.column) {\n                            if (!/\\.doc/.test(currentToken.type)) {\n                                return;\n                            }\n                            if (/\\*\\//.test(currentToken.value)) {\n                                var nextToken = tokens[i + 1];\n                                if (!nextToken || !/\\.doc/.test(nextToken.type)) {\n                                    return;\n                                }\n                            }\n                        }\n                        var cursorPosInToken = cursor.column - (index - currentToken.value.length);\n\n                        // Check for the pattern `*/` followed by `/**` within the token\n                        var closeDocPos = currentToken.value.indexOf(\"*/\");\n                        var openDocPos = currentToken.value.indexOf(\"/**\", closeDocPos > - 1 ? closeDocPos + 2 : 0);\n\n                        if (openDocPos !== -1 && cursorPosInToken > openDocPos && cursorPosInToken < openDocPos + 3) {\n                            return;\n                        }\n                        if (closeDocPos !== -1 && openDocPos !== -1 && cursorPosInToken >= closeDocPos\n                            && cursorPosInToken <= openDocPos || !/\\.doc/.test(currentToken.type)) {\n                            return;\n                        }\n                        break;\n                    }\n                }\n                var indent = this.$getIndent(line);\n                if (/\\s*\\*/.test(nextLine)) {\n                    if (/^\\s*\\*/.test(line)) {\n                        return {\n                            text: text + indent + \"* \",\n                            selection: [1, 2 + indent.length, 1, 2 + indent.length]\n                        };\n                    }\n                    else {\n                        return {\n                            text: text + indent + \" * \",\n                            selection: [1, 3 + indent.length, 1, 3 + indent.length]\n                        };\n                    }\n\n                }\n                if (/\\/\\*\\*/.test(line.substring(0, cursor.column))) {\n                    return {\n                        text: text + indent + \" * \" + text + \" \" + indent + \"*/\",\n                        selection: [1, 4 + indent.length, 1, 4 + indent.length]\n                    };\n                }\n            }\n        });\n    }\n};\n\n/**\n * @this {CstyleBehaviour}\n */\n// @ts-ignore\nCstyleBehaviour.isSaneInsertion = function(editor, session) {\n    var cursor = editor.getCursorPosition();\n    var iterator = new TokenIterator(session, cursor.row, cursor.column);\n\n    // Don't insert in the middle of a keyword/identifier/lexical\n    if (!this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS)) {\n        if (/[)}\\]]/.test(editor.session.getLine(cursor.row)[cursor.column]))\n            return true;\n        // Look ahead in case we're at the end of a token\n        var iterator2 = new TokenIterator(session, cursor.row, cursor.column + 1);\n        if (!this.$matchTokenType(iterator2.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS))\n            return false;\n    }\n\n    // Only insert in front of whitespace/comments\n    iterator.stepForward();\n    return iterator.getCurrentTokenRow() !== cursor.row ||\n        this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_BEFORE_TOKENS);\n};\nCstyleBehaviour[\"$matchTokenType\"] = function(token, types) {\n    return types.indexOf(token.type || token) > -1;\n};\n\nCstyleBehaviour[\"recordAutoInsert\"] = function(editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    // Reset previous state if text or context changed too much\n    if (!this[\"isAutoInsertedClosing\"](cursor, line, context.autoInsertedLineEnd[0]))\n        context.autoInsertedBrackets = 0;\n    context.autoInsertedRow = cursor.row;\n    context.autoInsertedLineEnd = bracket + line.substr(cursor.column);\n    context.autoInsertedBrackets++;\n};\n\nCstyleBehaviour[\"recordMaybeInsert\"] = function(editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this[\"isMaybeInsertedClosing\"](cursor, line))\n        context.maybeInsertedBrackets = 0;\n    context.maybeInsertedRow = cursor.row;\n    context.maybeInsertedLineStart = line.substr(0, cursor.column) + bracket;\n    context.maybeInsertedLineEnd = line.substr(cursor.column);\n    context.maybeInsertedBrackets++;\n};\n\nCstyleBehaviour[\"isAutoInsertedClosing\"] = function(cursor, line, bracket) {\n    return context.autoInsertedBrackets > 0 &&\n        cursor.row === context.autoInsertedRow &&\n        bracket === context.autoInsertedLineEnd[0] &&\n        line.substr(cursor.column) === context.autoInsertedLineEnd;\n};\n\nCstyleBehaviour[\"isMaybeInsertedClosing\"] = function(cursor, line) {\n    return context.maybeInsertedBrackets > 0 &&\n        cursor.row === context.maybeInsertedRow &&\n        line.substr(cursor.column) === context.maybeInsertedLineEnd &&\n        line.substr(0, cursor.column) == context.maybeInsertedLineStart;\n};\n\nCstyleBehaviour[\"popAutoInsertedClosing\"] = function() {\n    context.autoInsertedLineEnd = context.autoInsertedLineEnd.substr(1);\n    context.autoInsertedBrackets--;\n};\n\nCstyleBehaviour[\"clearMaybeInsertedClosing\"] = function() {\n    if (context) {\n        context.maybeInsertedBrackets = 0;\n        context.maybeInsertedRow = -1;\n    }\n};\n\n\n\noop.inherits(CstyleBehaviour, Behaviour);\n\nexports.CstyleBehaviour = CstyleBehaviour;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvYmVoYXZpb3VyL2NzdHlsZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLFVBQVUsbUJBQU8sQ0FBQyw2REFBZTtBQUNqQyxnQkFBZ0Isb0dBQWlDO0FBQ2pELG9CQUFvQixnSEFBNkM7QUFDakUsV0FBVyxtQkFBTyxDQUFDLCtEQUFnQjs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQixXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQseURBQXlELEtBQUs7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0VBQW9FO0FBQ3BFO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsMEJBQTBCO0FBQzFCLHdFQUF3RTtBQUN4RTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLHlFQUF5RTtBQUN6RTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUJBQW1CO0FBQzdCO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0IsNkRBQTZELElBQUksMkNBQTJDO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQyxnRUFBZ0UseUNBQXlDLElBQUk7QUFDN0c7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSwyQ0FBMkM7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSwyQ0FBMkM7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQztBQUNyQywyQ0FBMkMsR0FBRztBQUM5QyxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxtQkFBbUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBOztBQUVBLHVCQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvYmVoYXZpb3VyL2NzdHlsZS5qcz9kNzk4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIG9vcCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvb29wXCIpO1xudmFyIEJlaGF2aW91ciA9IHJlcXVpcmUoXCIuLi9iZWhhdmlvdXJcIikuQmVoYXZpb3VyO1xudmFyIFRva2VuSXRlcmF0b3IgPSByZXF1aXJlKFwiLi4vLi4vdG9rZW5faXRlcmF0b3JcIikuVG9rZW5JdGVyYXRvcjtcbnZhciBsYW5nID0gcmVxdWlyZShcIi4uLy4uL2xpYi9sYW5nXCIpO1xuXG52YXIgU0FGRV9JTlNFUlRfSU5fVE9LRU5TID1cbiAgICBbXCJ0ZXh0XCIsIFwicGFyZW4ucnBhcmVuXCIsIFwicnBhcmVuXCIsIFwicGFyZW5cIiwgXCJwdW5jdHVhdGlvbi5vcGVyYXRvclwiXTtcbnZhciBTQUZFX0lOU0VSVF9CRUZPUkVfVE9LRU5TID1cbiAgICBbXCJ0ZXh0XCIsIFwicGFyZW4ucnBhcmVuXCIsIFwicnBhcmVuXCIsIFwicGFyZW5cIiwgXCJwdW5jdHVhdGlvbi5vcGVyYXRvclwiLCBcImNvbW1lbnRcIl07XG5cbnZhciBjb250ZXh0O1xudmFyIGNvbnRleHRDYWNoZSA9IHt9O1xudmFyIGRlZmF1bHRRdW90ZXMgPSB7J1wiJyA6ICdcIicsIFwiJ1wiIDogXCInXCJ9O1xuXG52YXIgaW5pdENvbnRleHQgPSBmdW5jdGlvbihlZGl0b3IpIHtcbiAgICB2YXIgaWQgPSAtMTtcbiAgICBpZiAoZWRpdG9yLm11bHRpU2VsZWN0KSB7XG4gICAgICAgIGlkID0gZWRpdG9yLnNlbGVjdGlvbi5pbmRleDtcbiAgICAgICAgaWYgKGNvbnRleHRDYWNoZS5yYW5nZUNvdW50ICE9IGVkaXRvci5tdWx0aVNlbGVjdC5yYW5nZUNvdW50KVxuICAgICAgICAgICAgY29udGV4dENhY2hlID0ge3JhbmdlQ291bnQ6IGVkaXRvci5tdWx0aVNlbGVjdC5yYW5nZUNvdW50fTtcbiAgICB9XG4gICAgaWYgKGNvbnRleHRDYWNoZVtpZF0pXG4gICAgICAgIHJldHVybiBjb250ZXh0ID0gY29udGV4dENhY2hlW2lkXTtcbiAgICBjb250ZXh0ID0gY29udGV4dENhY2hlW2lkXSA9IHtcbiAgICAgICAgYXV0b0luc2VydGVkQnJhY2tldHM6IDAsXG4gICAgICAgIGF1dG9JbnNlcnRlZFJvdzogLTEsXG4gICAgICAgIGF1dG9JbnNlcnRlZExpbmVFbmQ6IFwiXCIsXG4gICAgICAgIG1heWJlSW5zZXJ0ZWRCcmFja2V0czogMCxcbiAgICAgICAgbWF5YmVJbnNlcnRlZFJvdzogLTEsXG4gICAgICAgIG1heWJlSW5zZXJ0ZWRMaW5lU3RhcnQ6IFwiXCIsXG4gICAgICAgIG1heWJlSW5zZXJ0ZWRMaW5lRW5kOiBcIlwiXG4gICAgfTtcbn07XG5cbnZhciBnZXRXcmFwcGVkID0gZnVuY3Rpb24oc2VsZWN0aW9uLCBzZWxlY3RlZCwgb3BlbmluZywgY2xvc2luZykge1xuICAgIHZhciByb3dEaWZmID0gc2VsZWN0aW9uLmVuZC5yb3cgLSBzZWxlY3Rpb24uc3RhcnQucm93O1xuICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IG9wZW5pbmcgKyBzZWxlY3RlZCArIGNsb3NpbmcsXG4gICAgICAgIHNlbGVjdGlvbjogW1xuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uLnN0YXJ0LmNvbHVtbiArIDEsXG4gICAgICAgICAgICAgICAgcm93RGlmZixcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24uZW5kLmNvbHVtbiArIChyb3dEaWZmID8gMCA6IDEpXG4gICAgICAgICAgICBdXG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgQ3N0eWxlIGJlaGF2aW91ciBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIG9wdGlvbnMuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBDc3R5bGUgYmVoYXZpb3VyIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuYnJhY2VzXSAtIFdoZXRoZXIgdG8gZm9yY2UgYnJhY2VzIGF1dG8tcGFpcmluZy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2xvc2VEb2NDb21tZW50XSAtIGVuYWJsZXMgYXV0b21hdGljIGluc2VydGlvbiBvZiBjbG9zaW5nIHRhZ3MgZm9yIGRvY3VtZW50YXRpb24gY29tbWVudHMuXG4gKi9cbnZhciBDc3R5bGVCZWhhdmlvdXI7XG5Dc3R5bGVCZWhhdmlvdXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy5hZGQoXCJicmFjZXNcIiwgXCJpbnNlcnRpb25cIiwgZnVuY3Rpb24oc3RhdGUsIGFjdGlvbiwgZWRpdG9yLCBzZXNzaW9uLCB0ZXh0KSB7XG4gICAgICAgIHZhciBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKTtcbiAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmRvYy5nZXRMaW5lKGN1cnNvci5yb3cpO1xuICAgICAgICBpZiAodGV4dCA9PSAneycpIHtcbiAgICAgICAgICAgIGluaXRDb250ZXh0KGVkaXRvcik7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IHNlc3Npb24uZ2V0VG9rZW5BdChjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZCAhPT0gXCJcIiAmJiBzZWxlY3RlZCAhPT0gXCJ7XCIgJiYgZWRpdG9yLmdldFdyYXBCZWhhdmlvdXJzRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFdyYXBwZWQoc2VsZWN0aW9uLCBzZWxlY3RlZCwgJ3snLCAnfScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodG9rZW4gJiYgLyg/OnN0cmluZylcXC5xdWFzaXxcXC54bWwvLnRlc3QodG9rZW4udHlwZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXhjbHVkZVRva2VucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgL3RhZ1xcLSg/Om9wZW58bmFtZSkvLCAvYXR0cmlidXRlXFwtbmFtZS9cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGlmIChleGNsdWRlVG9rZW5zLnNvbWUoKGVsKSA9PiBlbC50ZXN0KHRva2VuLnR5cGUpKSB8fCAvKHN0cmluZylcXC5xdWFzaS8udGVzdCh0b2tlbi50eXBlKVxuICAgICAgICAgICAgICAgICAgICAmJiB0b2tlbi52YWx1ZVtjdXJzb3IuY29sdW1uIC0gdG9rZW4uc3RhcnQgLSAxXSAhPT0gJyQnKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBDc3R5bGVCZWhhdmlvdXIucmVjb3JkQXV0b0luc2VydChlZGl0b3IsIHNlc3Npb24sIFwifVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAne30nLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLCAxXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKENzdHlsZUJlaGF2aW91ci5pc1NhbmVJbnNlcnRpb24oZWRpdG9yLCBzZXNzaW9uKSkge1xuICAgICAgICAgICAgICAgIGlmICgvW1xcXVxcfVxcKV0vLnRlc3QobGluZVtjdXJzb3IuY29sdW1uXSkgfHwgZWRpdG9yLmluTXVsdGlTZWxlY3RNb2RlIHx8IG9wdGlvbnMuYnJhY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5yZWNvcmRBdXRvSW5zZXJ0KGVkaXRvciwgc2Vzc2lvbiwgXCJ9XCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ3t9JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsIDFdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgQ3N0eWxlQmVoYXZpb3VyLnJlY29yZE1heWJlSW5zZXJ0KGVkaXRvciwgc2Vzc2lvbiwgXCJ7XCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ3snLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBbMSwgMV1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGV4dCA9PSAnfScpIHtcbiAgICAgICAgICAgIGluaXRDb250ZXh0KGVkaXRvcik7XG4gICAgICAgICAgICB2YXIgcmlnaHRDaGFyID0gbGluZS5zdWJzdHJpbmcoY3Vyc29yLmNvbHVtbiwgY3Vyc29yLmNvbHVtbiArIDEpO1xuICAgICAgICAgICAgaWYgKHJpZ2h0Q2hhciA9PSAnfScpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hpbmcgPSBzZXNzaW9uLiRmaW5kT3BlbmluZ0JyYWNrZXQoJ30nLCB7Y29sdW1uOiBjdXJzb3IuY29sdW1uICsgMSwgcm93OiBjdXJzb3Iucm93fSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nICE9PSBudWxsICYmIENzdHlsZUJlaGF2aW91ci5pc0F1dG9JbnNlcnRlZENsb3NpbmcoY3Vyc29yLCBsaW5lLCB0ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICBDc3R5bGVCZWhhdmlvdXIucG9wQXV0b0luc2VydGVkQ2xvc2luZygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLCAxXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0ZXh0ID09IFwiXFxuXCIgfHwgdGV4dCA9PSBcIlxcclxcblwiKSB7XG4gICAgICAgICAgICBpbml0Q29udGV4dChlZGl0b3IpO1xuICAgICAgICAgICAgdmFyIGNsb3NpbmcgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKENzdHlsZUJlaGF2aW91ci5pc01heWJlSW5zZXJ0ZWRDbG9zaW5nKGN1cnNvciwgbGluZSkpIHtcbiAgICAgICAgICAgICAgICBjbG9zaW5nID0gbGFuZy5zdHJpbmdSZXBlYXQoXCJ9XCIsIGNvbnRleHQubWF5YmVJbnNlcnRlZEJyYWNrZXRzKTtcbiAgICAgICAgICAgICAgICBDc3R5bGVCZWhhdmlvdXIuY2xlYXJNYXliZUluc2VydGVkQ2xvc2luZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJpZ2h0Q2hhciA9IGxpbmUuc3Vic3RyaW5nKGN1cnNvci5jb2x1bW4sIGN1cnNvci5jb2x1bW4gKyAxKTtcbiAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT09ICd9Jykge1xuICAgICAgICAgICAgICAgIHZhciBvcGVuQnJhY2VQb3MgPSBzZXNzaW9uLmZpbmRNYXRjaGluZ0JyYWNrZXQoe3JvdzogY3Vyc29yLnJvdywgY29sdW1uOiBjdXJzb3IuY29sdW1uKzF9LCAnfScpO1xuICAgICAgICAgICAgICAgIGlmICghb3BlbkJyYWNlUG9zKVxuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRfaW5kZW50ID0gdGhpcy4kZ2V0SW5kZW50KHNlc3Npb24uZ2V0TGluZShvcGVuQnJhY2VQb3Mucm93KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNsb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dF9pbmRlbnQgPSB0aGlzLiRnZXRJbmRlbnQobGluZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5jbGVhck1heWJlSW5zZXJ0ZWRDbG9zaW5nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGVudCA9IG5leHRfaW5kZW50ICsgc2Vzc2lvbi5nZXRUYWJTdHJpbmcoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXFxuJyArIGluZGVudCArICdcXG4nICsgbmV4dF9pbmRlbnQgKyBjbG9zaW5nLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsIGluZGVudC5sZW5ndGgsIDEsIGluZGVudC5sZW5ndGhdXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ3N0eWxlQmVoYXZpb3VyLmNsZWFyTWF5YmVJbnNlcnRlZENsb3NpbmcoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGQoXCJicmFjZXNcIiwgXCJkZWxldGlvblwiLCBmdW5jdGlvbihzdGF0ZSwgYWN0aW9uLCBlZGl0b3IsIHNlc3Npb24sIHJhbmdlKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZCA9IHNlc3Npb24uZG9jLmdldFRleHRSYW5nZShyYW5nZSk7XG4gICAgICAgIGlmICghcmFuZ2UuaXNNdWx0aUxpbmUoKSAmJiBzZWxlY3RlZCA9PSAneycpIHtcbiAgICAgICAgICAgIGluaXRDb250ZXh0KGVkaXRvcik7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZG9jLmdldExpbmUocmFuZ2Uuc3RhcnQucm93KTtcbiAgICAgICAgICAgIHZhciByaWdodENoYXIgPSBsaW5lLnN1YnN0cmluZyhyYW5nZS5lbmQuY29sdW1uLCByYW5nZS5lbmQuY29sdW1uICsgMSk7XG4gICAgICAgICAgICBpZiAocmlnaHRDaGFyID09ICd9Jykge1xuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4rKztcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHQubWF5YmVJbnNlcnRlZEJyYWNrZXRzLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkKFwicGFyZW5zXCIsIFwiaW5zZXJ0aW9uXCIsIGZ1bmN0aW9uKHN0YXRlLCBhY3Rpb24sIGVkaXRvciwgc2Vzc2lvbiwgdGV4dCkge1xuICAgICAgICBpZiAodGV4dCA9PSAnKCcpIHtcbiAgICAgICAgICAgIGluaXRDb250ZXh0KGVkaXRvcik7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZCAhPT0gXCJcIiAmJiBlZGl0b3IuZ2V0V3JhcEJlaGF2aW91cnNFbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0V3JhcHBlZChzZWxlY3Rpb24sIHNlbGVjdGVkLCAnKCcsICcpJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKENzdHlsZUJlaGF2aW91ci5pc1NhbmVJbnNlcnRpb24oZWRpdG9yLCBzZXNzaW9uKSkge1xuICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5yZWNvcmRBdXRvSW5zZXJ0KGVkaXRvciwgc2Vzc2lvbiwgXCIpXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICcoKScsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsIDFdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0ZXh0ID09ICcpJykge1xuICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTtcbiAgICAgICAgICAgIHZhciBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKTtcbiAgICAgICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93KTtcbiAgICAgICAgICAgIHZhciByaWdodENoYXIgPSBsaW5lLnN1YnN0cmluZyhjdXJzb3IuY29sdW1uLCBjdXJzb3IuY29sdW1uICsgMSk7XG4gICAgICAgICAgICBpZiAocmlnaHRDaGFyID09ICcpJykge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaGluZyA9IHNlc3Npb24uJGZpbmRPcGVuaW5nQnJhY2tldCgnKScsIHtjb2x1bW46IGN1cnNvci5jb2x1bW4gKyAxLCByb3c6IGN1cnNvci5yb3d9KTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmcgIT09IG51bGwgJiYgQ3N0eWxlQmVoYXZpb3VyLmlzQXV0b0luc2VydGVkQ2xvc2luZyhjdXJzb3IsIGxpbmUsIHRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5wb3BBdXRvSW5zZXJ0ZWRDbG9zaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsIDFdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZChcInBhcmVuc1wiLCBcImRlbGV0aW9uXCIsIGZ1bmN0aW9uKHN0YXRlLCBhY3Rpb24sIGVkaXRvciwgc2Vzc2lvbiwgcmFuZ2UpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gc2Vzc2lvbi5kb2MuZ2V0VGV4dFJhbmdlKHJhbmdlKTtcbiAgICAgICAgaWYgKCFyYW5nZS5pc011bHRpTGluZSgpICYmIHNlbGVjdGVkID09ICcoJykge1xuICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTtcbiAgICAgICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShyYW5nZS5zdGFydC5yb3cpO1xuICAgICAgICAgICAgdmFyIHJpZ2h0Q2hhciA9IGxpbmUuc3Vic3RyaW5nKHJhbmdlLnN0YXJ0LmNvbHVtbiArIDEsIHJhbmdlLnN0YXJ0LmNvbHVtbiArIDIpO1xuICAgICAgICAgICAgaWYgKHJpZ2h0Q2hhciA9PSAnKScpIHtcbiAgICAgICAgICAgICAgICByYW5nZS5lbmQuY29sdW1uKys7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZChcImJyYWNrZXRzXCIsIFwiaW5zZXJ0aW9uXCIsIGZ1bmN0aW9uKHN0YXRlLCBhY3Rpb24sIGVkaXRvciwgc2Vzc2lvbiwgdGV4dCkge1xuICAgICAgICBpZiAodGV4dCA9PSAnWycpIHtcbiAgICAgICAgICAgIGluaXRDb250ZXh0KGVkaXRvcik7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZCAhPT0gXCJcIiAmJiBlZGl0b3IuZ2V0V3JhcEJlaGF2aW91cnNFbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0V3JhcHBlZChzZWxlY3Rpb24sIHNlbGVjdGVkLCAnWycsICddJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKENzdHlsZUJlaGF2aW91ci5pc1NhbmVJbnNlcnRpb24oZWRpdG9yLCBzZXNzaW9uKSkge1xuICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5yZWNvcmRBdXRvSW5zZXJ0KGVkaXRvciwgc2Vzc2lvbiwgXCJdXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdbXScsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsIDFdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0ZXh0ID09ICddJykge1xuICAgICAgICAgICAgaW5pdENvbnRleHQoZWRpdG9yKTtcbiAgICAgICAgICAgIHZhciBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yUG9zaXRpb24oKTtcbiAgICAgICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93KTtcbiAgICAgICAgICAgIHZhciByaWdodENoYXIgPSBsaW5lLnN1YnN0cmluZyhjdXJzb3IuY29sdW1uLCBjdXJzb3IuY29sdW1uICsgMSk7XG4gICAgICAgICAgICBpZiAocmlnaHRDaGFyID09ICddJykge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaGluZyA9IHNlc3Npb24uJGZpbmRPcGVuaW5nQnJhY2tldCgnXScsIHtjb2x1bW46IGN1cnNvci5jb2x1bW4gKyAxLCByb3c6IGN1cnNvci5yb3d9KTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmcgIT09IG51bGwgJiYgQ3N0eWxlQmVoYXZpb3VyLmlzQXV0b0luc2VydGVkQ2xvc2luZyhjdXJzb3IsIGxpbmUsIHRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIENzdHlsZUJlaGF2aW91ci5wb3BBdXRvSW5zZXJ0ZWRDbG9zaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogWzEsIDFdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZChcImJyYWNrZXRzXCIsIFwiZGVsZXRpb25cIiwgZnVuY3Rpb24oc3RhdGUsIGFjdGlvbiwgZWRpdG9yLCBzZXNzaW9uLCByYW5nZSkge1xuICAgICAgICB2YXIgc2VsZWN0ZWQgPSBzZXNzaW9uLmRvYy5nZXRUZXh0UmFuZ2UocmFuZ2UpO1xuICAgICAgICBpZiAoIXJhbmdlLmlzTXVsdGlMaW5lKCkgJiYgc2VsZWN0ZWQgPT0gJ1snKSB7XG4gICAgICAgICAgICBpbml0Q29udGV4dChlZGl0b3IpO1xuICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmRvYy5nZXRMaW5lKHJhbmdlLnN0YXJ0LnJvdyk7XG4gICAgICAgICAgICB2YXIgcmlnaHRDaGFyID0gbGluZS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uICsgMSwgcmFuZ2Uuc3RhcnQuY29sdW1uICsgMik7XG4gICAgICAgICAgICBpZiAocmlnaHRDaGFyID09ICddJykge1xuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4rKztcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkKFwic3RyaW5nX2RxdW90ZXNcIiwgXCJpbnNlcnRpb25cIiwgZnVuY3Rpb24oc3RhdGUsIGFjdGlvbiwgZWRpdG9yLCBzZXNzaW9uLCB0ZXh0KSB7XG4gICAgICAgIHZhciBxdW90ZXMgPSBzZXNzaW9uLiRtb2RlLiRxdW90ZXMgfHwgZGVmYXVsdFF1b3RlcztcbiAgICAgICAgaWYgKHRleHQubGVuZ3RoID09IDEgJiYgcXVvdGVzW3RleHRdKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5lQ29tbWVudFN0YXJ0ICYmIHRoaXMubGluZUNvbW1lbnRTdGFydC5pbmRleE9mKHRleHQpICE9IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGluaXRDb250ZXh0KGVkaXRvcik7XG4gICAgICAgICAgICB2YXIgcXVvdGUgPSB0ZXh0O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gc2Vzc2lvbi5kb2MuZ2V0VGV4dFJhbmdlKHNlbGVjdGlvbik7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWQgIT09IFwiXCIgJiYgKHNlbGVjdGVkLmxlbmd0aCAhPSAxIHx8ICFxdW90ZXNbc2VsZWN0ZWRdKSAmJiBlZGl0b3IuZ2V0V3JhcEJlaGF2aW91cnNFbmFibGVkKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0V3JhcHBlZChzZWxlY3Rpb24sIHNlbGVjdGVkLCBxdW90ZSwgcXVvdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmRvYy5nZXRMaW5lKGN1cnNvci5yb3cpO1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0Q2hhciA9IGxpbmUuc3Vic3RyaW5nKGN1cnNvci5jb2x1bW4tMSwgY3Vyc29yLmNvbHVtbik7XG4gICAgICAgICAgICAgICAgdmFyIHJpZ2h0Q2hhciA9IGxpbmUuc3Vic3RyaW5nKGN1cnNvci5jb2x1bW4sIGN1cnNvci5jb2x1bW4gKyAxKTtcblxuICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHNlc3Npb24uZ2V0VG9rZW5BdChjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uKTtcbiAgICAgICAgICAgICAgICB2YXIgcmlnaHRUb2tlbiA9IHNlc3Npb24uZ2V0VG9rZW5BdChjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uICsgMSk7XG4gICAgICAgICAgICAgICAgLy8gV2UncmUgZXNjYXBlZC5cbiAgICAgICAgICAgICAgICBpZiAobGVmdENoYXIgPT0gXCJcXFxcXCIgJiYgdG9rZW4gJiYgL2VzY2FwZS8udGVzdCh0b2tlbi50eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgICAgICB2YXIgc3RyaW5nQmVmb3JlID0gdG9rZW4gJiYgL3N0cmluZ3xlc2NhcGUvLnRlc3QodG9rZW4udHlwZSk7XG4gICAgICAgICAgICAgICAgdmFyIHN0cmluZ0FmdGVyID0gIXJpZ2h0VG9rZW4gfHwgL3N0cmluZ3xlc2NhcGUvLnRlc3QocmlnaHRUb2tlbi50eXBlKTtcblxuICAgICAgICAgICAgICAgIHZhciBwYWlyO1xuICAgICAgICAgICAgICAgIGlmIChyaWdodENoYXIgPT0gcXVvdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpciA9IHN0cmluZ0JlZm9yZSAhPT0gc3RyaW5nQWZ0ZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWlyICYmIC9zdHJpbmdcXC5lbmQvLnRlc3QocmlnaHRUb2tlbi50eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhaXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nQmVmb3JlICYmICFzdHJpbmdBZnRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyB3cmFwIHN0cmluZyB3aXRoIGRpZmZlcmVudCBxdW90ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nQmVmb3JlICYmIHN0cmluZ0FmdGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIGRvIG5vdCBwYWlyIHF1b3RlcyBpbnNpZGUgc3RyaW5nc1xuICAgICAgICAgICAgICAgICAgICB2YXIgd29yZFJlID0gc2Vzc2lvbi4kbW9kZS50b2tlblJlO1xuICAgICAgICAgICAgICAgICAgICB3b3JkUmUubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzV29yZEJlZm9yZSA9IHdvcmRSZS50ZXN0KGxlZnRDaGFyKTtcbiAgICAgICAgICAgICAgICAgICAgd29yZFJlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1dvcmRBZnRlciA9IHdvcmRSZS50ZXN0KHJpZ2h0Q2hhcik7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhaXJRdW90ZXNBZnRlciA9IHNlc3Npb24uJG1vZGUuJHBhaXJRdW90ZXNBZnRlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3VsZFBhaXJRdW90ZXMgPSBwYWlyUXVvdGVzQWZ0ZXIgJiYgcGFpclF1b3Rlc0FmdGVyW3F1b3RlXSAmJiBwYWlyUXVvdGVzQWZ0ZXJbcXVvdGVdLnRlc3QobGVmdENoYXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoIXNob3VsZFBhaXJRdW90ZXMgJiYgaXNXb3JkQmVmb3JlKSB8fCBpc1dvcmRBZnRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBiZWZvcmUgb3IgYWZ0ZXIgYWxwaGFudW1lcmljXG4gICAgICAgICAgICAgICAgICAgIGlmIChyaWdodENoYXIgJiYgIS9bXFxzOywufSlcXF1cXFxcXS8udGVzdChyaWdodENoYXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIHRoZXJlIGlzIHJpZ2h0Q2hhciBhbmQgaXQgaXNuJ3QgY2xvc2luZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hhckJlZm9yZSA9IGxpbmVbY3Vyc29yLmNvbHVtbiAtIDJdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVmdENoYXIgPT0gcXVvdGUgJiYgIChjaGFyQmVmb3JlID09IHF1b3RlIHx8IHdvcmRSZS50ZXN0KGNoYXJCZWZvcmUpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBwYWlyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcGFpciA/IHF1b3RlICsgcXVvdGUgOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLDFdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGQoXCJzdHJpbmdfZHF1b3Rlc1wiLCBcImRlbGV0aW9uXCIsIGZ1bmN0aW9uKHN0YXRlLCBhY3Rpb24sIGVkaXRvciwgc2Vzc2lvbiwgcmFuZ2UpIHtcbiAgICAgICAgdmFyIHF1b3RlcyA9IHNlc3Npb24uJG1vZGUuJHF1b3RlcyB8fCBkZWZhdWx0UXVvdGVzO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZCA9IHNlc3Npb24uZG9jLmdldFRleHRSYW5nZShyYW5nZSk7XG4gICAgICAgIGlmICghcmFuZ2UuaXNNdWx0aUxpbmUoKSAmJiBxdW90ZXMuaGFzT3duUHJvcGVydHkoc2VsZWN0ZWQpKSB7XG4gICAgICAgICAgICBpbml0Q29udGV4dChlZGl0b3IpO1xuICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmRvYy5nZXRMaW5lKHJhbmdlLnN0YXJ0LnJvdyk7XG4gICAgICAgICAgICB2YXIgcmlnaHRDaGFyID0gbGluZS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uICsgMSwgcmFuZ2Uuc3RhcnQuY29sdW1uICsgMik7XG4gICAgICAgICAgICBpZiAocmlnaHRDaGFyID09IHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2UuZW5kLmNvbHVtbisrO1xuICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKG9wdGlvbnMuY2xvc2VEb2NDb21tZW50ICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmFkZChcImRvYyBjb21tZW50IGVuZFwiLCBcImluc2VydGlvblwiLCBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbiwgZWRpdG9yLCBzZXNzaW9uLCB0ZXh0KSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IFwiZG9jLXN0YXJ0XCIgJiYgKHRleHQgPT09IFwiXFxuXCIgfHwgdGV4dCA9PT0gXCJcXHJcXG5cIikgJiYgZWRpdG9yLnNlbGVjdGlvbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnNvci5jb2x1bW4gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZG9jLmdldExpbmUoY3Vyc29yLnJvdyk7XG4gICAgICAgICAgICAgICAgdmFyIG5leHRMaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93ICsgMSk7XG4gICAgICAgICAgICAgICAgdmFyIHRva2VucyA9IHNlc3Npb24uZ2V0VG9rZW5zKGN1cnNvci5yb3cpO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggKz0gdG9rZW5zW2ldLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRUb2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IGN1cnNvci5jb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gY3Vyc29yLmNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghL1xcLmRvYy8udGVzdChjdXJyZW50VG9rZW4udHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoL1xcKlxcLy8udGVzdChjdXJyZW50VG9rZW4udmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXh0VG9rZW4gPSB0b2tlbnNbaSArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5leHRUb2tlbiB8fCAhL1xcLmRvYy8udGVzdChuZXh0VG9rZW4udHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3JQb3NJblRva2VuID0gY3Vyc29yLmNvbHVtbiAtIChpbmRleCAtIGN1cnJlbnRUb2tlbi52YWx1ZS5sZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgdGhlIHBhdHRlcm4gYCovYCBmb2xsb3dlZCBieSBgLyoqYCB3aXRoaW4gdGhlIHRva2VuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VEb2NQb3MgPSBjdXJyZW50VG9rZW4udmFsdWUuaW5kZXhPZihcIiovXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5Eb2NQb3MgPSBjdXJyZW50VG9rZW4udmFsdWUuaW5kZXhPZihcIi8qKlwiLCBjbG9zZURvY1BvcyA+IC0gMSA/IGNsb3NlRG9jUG9zICsgMiA6IDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlbkRvY1BvcyAhPT0gLTEgJiYgY3Vyc29yUG9zSW5Ub2tlbiA+IG9wZW5Eb2NQb3MgJiYgY3Vyc29yUG9zSW5Ub2tlbiA8IG9wZW5Eb2NQb3MgKyAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlRG9jUG9zICE9PSAtMSAmJiBvcGVuRG9jUG9zICE9PSAtMSAmJiBjdXJzb3JQb3NJblRva2VuID49IGNsb3NlRG9jUG9zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgY3Vyc29yUG9zSW5Ub2tlbiA8PSBvcGVuRG9jUG9zIHx8ICEvXFwuZG9jLy50ZXN0KGN1cnJlbnRUb2tlbi50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpbmRlbnQgPSB0aGlzLiRnZXRJbmRlbnQobGluZSk7XG4gICAgICAgICAgICAgICAgaWYgKC9cXHMqXFwqLy50ZXN0KG5leHRMaW5lKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoL15cXHMqXFwqLy50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHQgKyBpbmRlbnQgKyBcIiogXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBbMSwgMiArIGluZGVudC5sZW5ndGgsIDEsIDIgKyBpbmRlbnQubGVuZ3RoXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dCArIGluZGVudCArIFwiICogXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBbMSwgMyArIGluZGVudC5sZW5ndGgsIDEsIDMgKyBpbmRlbnQubGVuZ3RoXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgvXFwvXFwqXFwqLy50ZXN0KGxpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jb2x1bW4pKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dCArIGluZGVudCArIFwiICogXCIgKyB0ZXh0ICsgXCIgXCIgKyBpbmRlbnQgKyBcIiovXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb246IFsxLCA0ICsgaW5kZW50Lmxlbmd0aCwgMSwgNCArIGluZGVudC5sZW5ndGhdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEB0aGlzIHtDc3R5bGVCZWhhdmlvdXJ9XG4gKi9cbi8vIEB0cy1pZ25vcmVcbkNzdHlsZUJlaGF2aW91ci5pc1NhbmVJbnNlcnRpb24gPSBmdW5jdGlvbihlZGl0b3IsIHNlc3Npb24pIHtcbiAgICB2YXIgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgdmFyIGl0ZXJhdG9yID0gbmV3IFRva2VuSXRlcmF0b3Ioc2Vzc2lvbiwgY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbik7XG5cbiAgICAvLyBEb24ndCBpbnNlcnQgaW4gdGhlIG1pZGRsZSBvZiBhIGtleXdvcmQvaWRlbnRpZmllci9sZXhpY2FsXG4gICAgaWYgKCF0aGlzLiRtYXRjaFRva2VuVHlwZShpdGVyYXRvci5nZXRDdXJyZW50VG9rZW4oKSB8fCBcInRleHRcIiwgU0FGRV9JTlNFUlRfSU5fVE9LRU5TKSkge1xuICAgICAgICBpZiAoL1spfVxcXV0vLnRlc3QoZWRpdG9yLnNlc3Npb24uZ2V0TGluZShjdXJzb3Iucm93KVtjdXJzb3IuY29sdW1uXSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgLy8gTG9vayBhaGVhZCBpbiBjYXNlIHdlJ3JlIGF0IHRoZSBlbmQgb2YgYSB0b2tlblxuICAgICAgICB2YXIgaXRlcmF0b3IyID0gbmV3IFRva2VuSXRlcmF0b3Ioc2Vzc2lvbiwgY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbiArIDEpO1xuICAgICAgICBpZiAoIXRoaXMuJG1hdGNoVG9rZW5UeXBlKGl0ZXJhdG9yMi5nZXRDdXJyZW50VG9rZW4oKSB8fCBcInRleHRcIiwgU0FGRV9JTlNFUlRfSU5fVE9LRU5TKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGluc2VydCBpbiBmcm9udCBvZiB3aGl0ZXNwYWNlL2NvbW1lbnRzXG4gICAgaXRlcmF0b3Iuc3RlcEZvcndhcmQoKTtcbiAgICByZXR1cm4gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCkgIT09IGN1cnNvci5yb3cgfHxcbiAgICAgICAgdGhpcy4kbWF0Y2hUb2tlblR5cGUoaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuKCkgfHwgXCJ0ZXh0XCIsIFNBRkVfSU5TRVJUX0JFRk9SRV9UT0tFTlMpO1xufTtcbkNzdHlsZUJlaGF2aW91cltcIiRtYXRjaFRva2VuVHlwZVwiXSA9IGZ1bmN0aW9uKHRva2VuLCB0eXBlcykge1xuICAgIHJldHVybiB0eXBlcy5pbmRleE9mKHRva2VuLnR5cGUgfHwgdG9rZW4pID4gLTE7XG59O1xuXG5Dc3R5bGVCZWhhdmlvdXJbXCJyZWNvcmRBdXRvSW5zZXJ0XCJdID0gZnVuY3Rpb24oZWRpdG9yLCBzZXNzaW9uLCBicmFja2V0KSB7XG4gICAgdmFyIGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3JQb3NpdGlvbigpO1xuICAgIHZhciBsaW5lID0gc2Vzc2lvbi5kb2MuZ2V0TGluZShjdXJzb3Iucm93KTtcbiAgICAvLyBSZXNldCBwcmV2aW91cyBzdGF0ZSBpZiB0ZXh0IG9yIGNvbnRleHQgY2hhbmdlZCB0b28gbXVjaFxuICAgIGlmICghdGhpc1tcImlzQXV0b0luc2VydGVkQ2xvc2luZ1wiXShjdXJzb3IsIGxpbmUsIGNvbnRleHQuYXV0b0luc2VydGVkTGluZUVuZFswXSkpXG4gICAgICAgIGNvbnRleHQuYXV0b0luc2VydGVkQnJhY2tldHMgPSAwO1xuICAgIGNvbnRleHQuYXV0b0luc2VydGVkUm93ID0gY3Vyc29yLnJvdztcbiAgICBjb250ZXh0LmF1dG9JbnNlcnRlZExpbmVFbmQgPSBicmFja2V0ICsgbGluZS5zdWJzdHIoY3Vyc29yLmNvbHVtbik7XG4gICAgY29udGV4dC5hdXRvSW5zZXJ0ZWRCcmFja2V0cysrO1xufTtcblxuQ3N0eWxlQmVoYXZpb3VyW1wicmVjb3JkTWF5YmVJbnNlcnRcIl0gPSBmdW5jdGlvbihlZGl0b3IsIHNlc3Npb24sIGJyYWNrZXQpIHtcbiAgICB2YXIgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvclBvc2l0aW9uKCk7XG4gICAgdmFyIGxpbmUgPSBzZXNzaW9uLmRvYy5nZXRMaW5lKGN1cnNvci5yb3cpO1xuICAgIGlmICghdGhpc1tcImlzTWF5YmVJbnNlcnRlZENsb3NpbmdcIl0oY3Vyc29yLCBsaW5lKSlcbiAgICAgICAgY29udGV4dC5tYXliZUluc2VydGVkQnJhY2tldHMgPSAwO1xuICAgIGNvbnRleHQubWF5YmVJbnNlcnRlZFJvdyA9IGN1cnNvci5yb3c7XG4gICAgY29udGV4dC5tYXliZUluc2VydGVkTGluZVN0YXJ0ID0gbGluZS5zdWJzdHIoMCwgY3Vyc29yLmNvbHVtbikgKyBicmFja2V0O1xuICAgIGNvbnRleHQubWF5YmVJbnNlcnRlZExpbmVFbmQgPSBsaW5lLnN1YnN0cihjdXJzb3IuY29sdW1uKTtcbiAgICBjb250ZXh0Lm1heWJlSW5zZXJ0ZWRCcmFja2V0cysrO1xufTtcblxuQ3N0eWxlQmVoYXZpb3VyW1wiaXNBdXRvSW5zZXJ0ZWRDbG9zaW5nXCJdID0gZnVuY3Rpb24oY3Vyc29yLCBsaW5lLCBicmFja2V0KSB7XG4gICAgcmV0dXJuIGNvbnRleHQuYXV0b0luc2VydGVkQnJhY2tldHMgPiAwICYmXG4gICAgICAgIGN1cnNvci5yb3cgPT09IGNvbnRleHQuYXV0b0luc2VydGVkUm93ICYmXG4gICAgICAgIGJyYWNrZXQgPT09IGNvbnRleHQuYXV0b0luc2VydGVkTGluZUVuZFswXSAmJlxuICAgICAgICBsaW5lLnN1YnN0cihjdXJzb3IuY29sdW1uKSA9PT0gY29udGV4dC5hdXRvSW5zZXJ0ZWRMaW5lRW5kO1xufTtcblxuQ3N0eWxlQmVoYXZpb3VyW1wiaXNNYXliZUluc2VydGVkQ2xvc2luZ1wiXSA9IGZ1bmN0aW9uKGN1cnNvciwgbGluZSkge1xuICAgIHJldHVybiBjb250ZXh0Lm1heWJlSW5zZXJ0ZWRCcmFja2V0cyA+IDAgJiZcbiAgICAgICAgY3Vyc29yLnJvdyA9PT0gY29udGV4dC5tYXliZUluc2VydGVkUm93ICYmXG4gICAgICAgIGxpbmUuc3Vic3RyKGN1cnNvci5jb2x1bW4pID09PSBjb250ZXh0Lm1heWJlSW5zZXJ0ZWRMaW5lRW5kICYmXG4gICAgICAgIGxpbmUuc3Vic3RyKDAsIGN1cnNvci5jb2x1bW4pID09IGNvbnRleHQubWF5YmVJbnNlcnRlZExpbmVTdGFydDtcbn07XG5cbkNzdHlsZUJlaGF2aW91cltcInBvcEF1dG9JbnNlcnRlZENsb3NpbmdcIl0gPSBmdW5jdGlvbigpIHtcbiAgICBjb250ZXh0LmF1dG9JbnNlcnRlZExpbmVFbmQgPSBjb250ZXh0LmF1dG9JbnNlcnRlZExpbmVFbmQuc3Vic3RyKDEpO1xuICAgIGNvbnRleHQuYXV0b0luc2VydGVkQnJhY2tldHMtLTtcbn07XG5cbkNzdHlsZUJlaGF2aW91cltcImNsZWFyTWF5YmVJbnNlcnRlZENsb3NpbmdcIl0gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0Lm1heWJlSW5zZXJ0ZWRCcmFja2V0cyA9IDA7XG4gICAgICAgIGNvbnRleHQubWF5YmVJbnNlcnRlZFJvdyA9IC0xO1xuICAgIH1cbn07XG5cblxuXG5vb3AuaW5oZXJpdHMoQ3N0eWxlQmVoYXZpb3VyLCBCZWhhdmlvdXIpO1xuXG5leHBvcnRzLkNzdHlsZUJlaGF2aW91ciA9IENzdHlsZUJlaGF2aW91cjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/behaviour/cstyle.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/c_cpp.js":
/*!*************************************************!*\
  !*** ./node_modules/ace-code/src/mode/c_cpp.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar TextMode = (__webpack_require__(/*! ./text */ \"./node_modules/ace-code/src/mode/text.js\").Mode);\nvar c_cppHighlightRules = (__webpack_require__(/*! ./c_cpp_highlight_rules */ \"./node_modules/ace-code/src/mode/c_cpp_highlight_rules.js\").c_cppHighlightRules);\nvar MatchingBraceOutdent = (__webpack_require__(/*! ./matching_brace_outdent */ \"./node_modules/ace-code/src/mode/matching_brace_outdent.js\").MatchingBraceOutdent);\nvar CStyleFoldMode = (__webpack_require__(/*! ./folding/cstyle */ \"./node_modules/ace-code/src/mode/folding/cstyle.js\").FoldMode);\n\nvar Mode = function() {\n    this.HighlightRules = c_cppHighlightRules;\n\n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = this.$defaultBehaviour;\n\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.lineCommentStart = \"//\";\n    this.blockComment = {start: \"/*\", end: \"*/\"};\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        var tokenizedLine = this.getTokenizer().getLineTokens(line, state);\n        var tokens = tokenizedLine.tokens;\n        var endState = tokenizedLine.state;\n\n        if (tokens.length && tokens[tokens.length-1].type == \"comment\") {\n            return indent;\n        }\n\n        if (state == \"start\") {\n            var match = line.match(/^.*[\\{\\(\\[]\\s*$/);\n            if (match) {\n                indent += tab;\n            }\n        } else if (state == \"doc-start\") {\n            if (endState == \"start\") {\n                return \"\";\n            }\n            var match = line.match(/^\\s*(\\/?)\\*/);\n            if (match) {\n                if (match[1]) {\n                    indent += \" \";\n                }\n                indent += \"* \";\n            }\n        }\n\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n\n    this.$id = \"ace/mode/c_cpp\";\n    this.snippetFileId = \"ace/snippets/c_cpp\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvY19jcHAuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLGVBQWUsb0ZBQXNCO0FBQ3JDLDBCQUEwQixxSUFBc0Q7QUFDaEYsMkJBQTJCLHdJQUF3RDtBQUNuRixxQkFBcUIsNEdBQW9DOztBQUV6RDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EseUJBQXlCOztBQUV6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELFlBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9tb2RlL2NfY3BwLmpzP2EyMzAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBvb3AgPSByZXF1aXJlKFwiLi4vbGliL29vcFwiKTtcbnZhciBUZXh0TW9kZSA9IHJlcXVpcmUoXCIuL3RleHRcIikuTW9kZTtcbnZhciBjX2NwcEhpZ2hsaWdodFJ1bGVzID0gcmVxdWlyZShcIi4vY19jcHBfaGlnaGxpZ2h0X3J1bGVzXCIpLmNfY3BwSGlnaGxpZ2h0UnVsZXM7XG52YXIgTWF0Y2hpbmdCcmFjZU91dGRlbnQgPSByZXF1aXJlKFwiLi9tYXRjaGluZ19icmFjZV9vdXRkZW50XCIpLk1hdGNoaW5nQnJhY2VPdXRkZW50O1xudmFyIENTdHlsZUZvbGRNb2RlID0gcmVxdWlyZShcIi4vZm9sZGluZy9jc3R5bGVcIikuRm9sZE1vZGU7XG5cbnZhciBNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5IaWdobGlnaHRSdWxlcyA9IGNfY3BwSGlnaGxpZ2h0UnVsZXM7XG5cbiAgICB0aGlzLiRvdXRkZW50ID0gbmV3IE1hdGNoaW5nQnJhY2VPdXRkZW50KCk7XG4gICAgdGhpcy4kYmVoYXZpb3VyID0gdGhpcy4kZGVmYXVsdEJlaGF2aW91cjtcblxuICAgIHRoaXMuZm9sZGluZ1J1bGVzID0gbmV3IENTdHlsZUZvbGRNb2RlKCk7XG59O1xub29wLmluaGVyaXRzKE1vZGUsIFRleHRNb2RlKTtcblxuKGZ1bmN0aW9uKCkge1xuXG4gICAgdGhpcy5saW5lQ29tbWVudFN0YXJ0ID0gXCIvL1wiO1xuICAgIHRoaXMuYmxvY2tDb21tZW50ID0ge3N0YXJ0OiBcIi8qXCIsIGVuZDogXCIqL1wifTtcblxuICAgIHRoaXMuZ2V0TmV4dExpbmVJbmRlbnQgPSBmdW5jdGlvbihzdGF0ZSwgbGluZSwgdGFiKSB7XG4gICAgICAgIHZhciBpbmRlbnQgPSB0aGlzLiRnZXRJbmRlbnQobGluZSk7XG5cbiAgICAgICAgdmFyIHRva2VuaXplZExpbmUgPSB0aGlzLmdldFRva2VuaXplcigpLmdldExpbmVUb2tlbnMobGluZSwgc3RhdGUpO1xuICAgICAgICB2YXIgdG9rZW5zID0gdG9rZW5pemVkTGluZS50b2tlbnM7XG4gICAgICAgIHZhciBlbmRTdGF0ZSA9IHRva2VuaXplZExpbmUuc3RhdGU7XG5cbiAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggJiYgdG9rZW5zW3Rva2Vucy5sZW5ndGgtMV0udHlwZSA9PSBcImNvbW1lbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIGluZGVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGF0ZSA9PSBcInN0YXJ0XCIpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IGxpbmUubWF0Y2goL14uKltcXHtcXChcXFtdXFxzKiQvKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGluZGVudCArPSB0YWI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gXCJkb2Mtc3RhcnRcIikge1xuICAgICAgICAgICAgaWYgKGVuZFN0YXRlID09IFwic3RhcnRcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1hdGNoID0gbGluZS5tYXRjaCgvXlxccyooXFwvPylcXCovKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKz0gXCIgXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZGVudCArPSBcIiogXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5kZW50O1xuICAgIH07XG5cbiAgICB0aGlzLmNoZWNrT3V0ZGVudCA9IGZ1bmN0aW9uKHN0YXRlLCBsaW5lLCBpbnB1dCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kb3V0ZGVudC5jaGVja091dGRlbnQobGluZSwgaW5wdXQpO1xuICAgIH07XG5cbiAgICB0aGlzLmF1dG9PdXRkZW50ID0gZnVuY3Rpb24oc3RhdGUsIGRvYywgcm93KSB7XG4gICAgICAgIHRoaXMuJG91dGRlbnQuYXV0b091dGRlbnQoZG9jLCByb3cpO1xuICAgIH07XG5cbiAgICB0aGlzLiRpZCA9IFwiYWNlL21vZGUvY19jcHBcIjtcbiAgICB0aGlzLnNuaXBwZXRGaWxlSWQgPSBcImFjZS9zbmlwcGV0cy9jX2NwcFwiO1xufSkuY2FsbChNb2RlLnByb3RvdHlwZSk7XG5cbmV4cG9ydHMuTW9kZSA9IE1vZGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/c_cpp.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/c_cpp_highlight_rules.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/c_cpp_highlight_rules.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar DocCommentHighlightRules = (__webpack_require__(/*! ./doc_comment_highlight_rules */ \"./node_modules/ace-code/src/mode/doc_comment_highlight_rules.js\").DocCommentHighlightRules);\nvar TextHighlightRules = (__webpack_require__(/*! ./text_highlight_rules */ \"./node_modules/ace-code/src/mode/text_highlight_rules.js\").TextHighlightRules);\n\n// used by objective-c\nvar cFunctions = exports.cFunctions = \"hypot|hypotf|hypotl|sscanf|system|snprintf|scanf|scalbn|scalbnf|scalbnl|scalbln|scalblnf|scalblnl|sin|sinh|sinhf|sinhl|sinf|sinl|signal|signbit|strstr|strspn|strncpy|strncat|strncmp|strcspn|strchr|strcoll|strcpy|strcat|strcmp|strtoimax|strtod|strtoul|strtoull|strtoumax|strtok|strtof|strtol|strtold|strtoll|strerror|strpbrk|strftime|strlen|strrchr|strxfrm|sprintf|setjmp|setvbuf|setlocale|setbuf|sqrt|sqrtf|sqrtl|swscanf|swprintf|srand|nearbyint|nearbyintf|nearbyintl|nexttoward|nexttowardf|nexttowardl|nextafter|nextafterf|nextafterl|nan|nanf|nanl|csin|csinh|csinhf|csinhl|csinf|csinl|csqrt|csqrtf|csqrtl|ccos|ccosh|ccoshf|ccosf|ccosl|cimag|cimagf|cimagl|ctime|ctan|ctanh|ctanhf|ctanhl|ctanf|ctanl|cos|cosh|coshf|coshl|cosf|cosl|conj|conjf|conjl|copysign|copysignf|copysignl|cpow|cpowf|cpowl|cproj|cprojf|cprojl|ceil|ceilf|ceill|cexp|cexpf|cexpl|clock|clog|clogf|clogl|clearerr|casin|casinh|casinhf|casinhl|casinf|casinl|cacos|cacosh|cacoshf|cacoshl|cacosf|cacosl|catan|catanh|catanhf|catanhl|catanf|catanl|calloc|carg|cargf|cargl|cabs|cabsf|cabsl|creal|crealf|creall|cbrt|cbrtf|cbrtl|time|toupper|tolower|tan|tanh|tanhf|tanhl|tanf|tanl|trunc|truncf|truncl|tgamma|tgammaf|tgammal|tmpnam|tmpfile|isspace|isnormal|isnan|iscntrl|isinf|isdigit|isunordered|isupper|ispunct|isprint|isfinite|iswspace|iswcntrl|iswctype|iswdigit|iswupper|iswpunct|iswprint|iswlower|iswalnum|iswalpha|iswgraph|iswxdigit|iswblank|islower|isless|islessequal|islessgreater|isalnum|isalpha|isgreater|isgreaterequal|isgraph|isxdigit|isblank|ilogb|ilogbf|ilogbl|imaxdiv|imaxabs|div|difftime|_Exit|ungetc|ungetwc|pow|powf|powl|puts|putc|putchar|putwc|putwchar|perror|printf|erf|erfc|erfcf|erfcl|erff|erfl|exit|exp|exp2|exp2f|exp2l|expf|expl|expm1|expm1f|expm1l|vsscanf|vsnprintf|vscanf|vsprintf|vswscanf|vswprintf|vprintf|vfscanf|vfprintf|vfwscanf|vfwprintf|vwscanf|vwprintf|va_start|va_copy|va_end|va_arg|qsort|fscanf|fsetpos|fseek|fclose|ftell|fopen|fdim|fdimf|fdiml|fpclassify|fputs|fputc|fputws|fputwc|fprintf|feholdexcept|fesetenv|fesetexceptflag|fesetround|feclearexcept|fetestexcept|feof|feupdateenv|feraiseexcept|ferror|fegetenv|fegetexceptflag|fegetround|fflush|fwscanf|fwide|fwprintf|fwrite|floor|floorf|floorl|fabs|fabsf|fabsl|fgets|fgetc|fgetpos|fgetws|fgetwc|freopen|free|fread|frexp|frexpf|frexpl|fmin|fminf|fminl|fmod|fmodf|fmodl|fma|fmaf|fmal|fmax|fmaxf|fmaxl|ldiv|ldexp|ldexpf|ldexpl|longjmp|localtime|localeconv|log|log1p|log1pf|log1pl|log10|log10f|log10l|log2|log2f|log2l|logf|logl|logb|logbf|logbl|labs|lldiv|llabs|llrint|llrintf|llrintl|llround|llroundf|llroundl|lrint|lrintf|lrintl|lround|lroundf|lroundl|lgamma|lgammaf|lgammal|wscanf|wcsstr|wcsspn|wcsncpy|wcsncat|wcsncmp|wcscspn|wcschr|wcscoll|wcscpy|wcscat|wcscmp|wcstoimax|wcstod|wcstoul|wcstoull|wcstoumax|wcstok|wcstof|wcstol|wcstold|wcstoll|wcstombs|wcspbrk|wcsftime|wcslen|wcsrchr|wcsrtombs|wcsxfrm|wctob|wctomb|wcrtomb|wprintf|wmemset|wmemchr|wmemcpy|wmemcmp|wmemmove|assert|asctime|asin|asinh|asinhf|asinhl|asinf|asinl|acos|acosh|acoshf|acoshl|acosf|acosl|atoi|atof|atol|atoll|atexit|atan|atanh|atanhf|atanhl|atan2|atan2f|atan2l|atanf|atanl|abs|abort|gets|getc|getchar|getenv|getwc|getwchar|gmtime|rint|rintf|rintl|round|roundf|roundl|rename|realloc|rewind|remove|remquo|remquof|remquol|remainder|remainderf|remainderl|rand|raise|bsearch|btowc|modf|modff|modfl|memset|memchr|memcpy|memcmp|memmove|mktime|malloc|mbsinit|mbstowcs|mbsrtowcs|mbtowc|mblen|mbrtowc|mbrlen\";\n\nvar c_cppHighlightRules = function(extraKeywords) {\n\n    var keywordControls = (\n        \"break|case|continue|default|do|else|for|goto|if|_Pragma|\" +\n        \"return|switch|while|catch|operator|try|throw|using\"\n    );\n    \n    var storageType = (\n        \"asm|__asm__|auto|bool|_Bool|char|_Complex|double|enum|float|\" +\n        \"_Imaginary|int|int8_t|int16_t|int32_t|int64_t|long|short|signed|size_t|struct|typedef|uint8_t|uint16_t|uint32_t|uint64_t|union|unsigned|void|\" +\n        \"class|wchar_t|template|char16_t|char32_t\"\n    );\n\n    var storageModifiers = (\n        \"const|extern|register|restrict|static|volatile|inline|private|\" +\n        \"protected|public|friend|explicit|virtual|export|mutable|typename|\" +\n        \"constexpr|new|delete|alignas|alignof|decltype|noexcept|thread_local\"\n    );\n\n    var keywordOperators = (\n        \"and|and_eq|bitand|bitor|compl|not|not_eq|or|or_eq|typeid|xor|xor_eq|\" +\n        \"const_cast|dynamic_cast|reinterpret_cast|static_cast|sizeof|namespace\"\n    );\n\n    var builtinConstants = (\n        \"NULL|true|false|TRUE|FALSE|nullptr\"\n    );\n\n    var keywordMapper = this.$keywords = this.createKeywordMapper(Object.assign({\n        \"keyword.control\" : keywordControls,\n        \"storage.type\" : storageType,\n        \"storage.modifier\" : storageModifiers,\n        \"keyword.operator\" : keywordOperators,\n        \"variable.language\": \"this\",\n        \"constant.language\": builtinConstants,\n        \"support.function.C99.c\": cFunctions\n    }, extraKeywords), \"identifier\");\n\n    var identifierRe = \"[a-zA-Z\\\\$_\\u00a1-\\uffff][a-zA-Z\\\\d\\\\$_\\u00a1-\\uffff]*\\\\b\";\n    var escapeRe = /\\\\(?:['\"?\\\\abfnrtv]|[0-7]{1,3}|x[a-fA-F\\d]{2}|u[a-fA-F\\d]{4}U[a-fA-F\\d]{8}|.)/.source;\n    var formatRe = \"%\"\n          + /(\\d+\\$)?/.source // field (argument #)\n          + /[#0\\- +']*/.source // flags\n          + /[,;:_]?/.source // separator character (AltiVec)\n          + /((-?\\d+)|\\*(-?\\d+\\$)?)?/.source // minimum field width\n          + /(\\.((-?\\d+)|\\*(-?\\d+\\$)?)?)?/.source // precision\n          + /(hh|h|ll|l|j|t|z|q|L|vh|vl|v|hv|hl)?/.source // length modifier\n          + /(\\[[^\"\\]]+\\]|[diouxXDOUeEfFgGaACcSspn%])/.source; // conversion type\n          \n    // regexp must not have capturing parentheses. Use (?:) instead.\n    // regexps are ordered -> the first match is used\n\n    this.$rules = { \n        \"start\" : [\n            {\n                token : \"comment\",\n                regex : \"//$\",\n                next : \"start\"\n            }, {\n                token : \"comment\",\n                regex : \"//\",\n                next : \"singleLineComment\"\n            },\n            DocCommentHighlightRules.getStartRule(\"doc-start\"),\n            {\n                token : \"comment\", // multi line comment\n                regex : \"\\\\/\\\\*\",\n                next : \"comment\"\n            }, {\n                token : \"string\", // character\n                regex : \"'(?:\" + escapeRe + \"|.)?'\"\n            }, {\n                token : \"string.start\",\n                regex : '\"', \n                stateName: \"qqstring\",\n                next: [\n                    { token: \"string\", regex: /\\\\\\s*$/, next: \"qqstring\" },\n                    { token: \"constant.language.escape\", regex: escapeRe },\n                    { token: \"constant.language.escape\", regex: formatRe },\n                    { token: \"string.end\", regex: '\"|$', next: \"start\" },\n                    { defaultToken: \"string\"}\n                ]\n            }, {\n                token : \"string.start\",\n                regex : 'R\"\\\\(', \n                stateName: \"rawString\",\n                next: [\n                    { token: \"string.end\", regex: '\\\\)\"', next: \"start\" },\n                    { defaultToken: \"string\"}\n                ]\n            }, {\n                token : \"constant.numeric\", // hex\n                regex : \"0[xX][0-9a-fA-F]+(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\\\b\"\n            }, {\n                token : \"constant.numeric\", // float\n                regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\\\b\"\n            }, {\n                token : \"keyword\", // pre-compiler directives\n                regex : \"#\\\\s*(?:include|import|pragma|line|define|undef)\\\\b\",\n                next  : \"directive\"\n            }, {\n                token : \"keyword\", // special case pre-compiler directive\n                regex : \"#\\\\s*(?:endif|if|ifdef|else|elif|ifndef)\\\\b\"\n            }, {\n                token : keywordMapper,\n                regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\"\n            }, {\n                token : \"keyword.operator\",\n                regex : /--|\\+\\+|<<=|>>=|>>>=|<>|&&|\\|\\||\\?:|[*%\\/+\\-&\\^|~!<>=]=?/\n            }, {\n              token : \"punctuation.operator\",\n              regex : \"\\\\?|\\\\:|\\\\,|\\\\;|\\\\.\"\n            }, {\n                token : \"paren.lparen\",\n                regex : \"[[({]\"\n            }, {\n                token : \"paren.rparen\",\n                regex : \"[\\\\])}]\"\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+\"\n            }\n        ],\n        \"comment\" : [\n            {\n                token : \"comment\", // closing comment\n                regex : \"\\\\*\\\\/\",\n                next : \"start\"\n            }, {\n                defaultToken : \"comment\"\n            }\n        ],\n        \"singleLineComment\" : [\n            {\n                token : \"comment\",\n                regex : /\\\\$/,\n                next : \"singleLineComment\"\n            }, {\n                token : \"comment\",\n                regex : /$/,\n                next : \"start\"\n            }, {\n                defaultToken: \"comment\"\n            }\n        ],\n        \"directive\" : [\n            {\n                token : \"constant.other.multiline\",\n                regex : /\\\\/\n            },\n            {\n                token : \"constant.other.multiline\",\n                regex : /.*\\\\/\n            },\n            {\n                token : \"constant.other\",\n                regex : \"\\\\s*<.+?>\",\n                next : \"start\"\n            },\n            {\n                token : \"constant.other\", // single line\n                regex : '\\\\s*[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]',\n                next : \"start\"\n            }, \n            {\n                token : \"constant.other\", // single line\n                regex : \"\\\\s*['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\",\n                next : \"start\"\n            },\n            // \"\\\" implies multiline, while \"/\" implies comment\n            {\n                token : \"constant.other\",\n                regex : /[^\\\\\\/]+/,\n                next : \"start\"\n            }\n        ]\n    };\n\n    this.embedRules(DocCommentHighlightRules, \"doc-\",\n        [ DocCommentHighlightRules.getEndRule(\"start\") ]);\n    this.normalizeRules();\n};\n\noop.inherits(c_cppHighlightRules, TextHighlightRules);\n\nexports.c_cppHighlightRules = c_cppHighlightRules;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvY19jcHBfaGlnaGxpZ2h0X3J1bGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQywwREFBWTtBQUM5QiwrQkFBK0Isc0pBQWlFO0FBQ2hHLHlCQUF5QixrSUFBb0Q7O0FBRTdFO0FBQ0EsaUJBQWlCLGtCQUFrQjs7QUFFbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSw4Q0FBOEMsSUFBSSxhQUFhLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRTtBQUM5RjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvREFBb0Q7QUFDMUUsc0JBQXNCLG9EQUFvRDtBQUMxRSxzQkFBc0Isb0RBQW9EO0FBQzFFLHNCQUFzQixrREFBa0Q7QUFDeEUsc0JBQXNCO0FBQ3RCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG1EQUFtRDtBQUN6RSxzQkFBc0I7QUFDdEI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHNDQUFzQztBQUN0QyxhQUFhO0FBQ2I7QUFDQSw2QkFBNkI7QUFDN0IsYUFBYTtBQUNiO0FBQ0EsK0JBQStCO0FBQy9CLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsMkJBQTJCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW9kZS9jX2NwcF9oaWdobGlnaHRfcnVsZXMuanM/MjZhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIG9vcCA9IHJlcXVpcmUoXCIuLi9saWIvb29wXCIpO1xudmFyIERvY0NvbW1lbnRIaWdobGlnaHRSdWxlcyA9IHJlcXVpcmUoXCIuL2RvY19jb21tZW50X2hpZ2hsaWdodF9ydWxlc1wiKS5Eb2NDb21tZW50SGlnaGxpZ2h0UnVsZXM7XG52YXIgVGV4dEhpZ2hsaWdodFJ1bGVzID0gcmVxdWlyZShcIi4vdGV4dF9oaWdobGlnaHRfcnVsZXNcIikuVGV4dEhpZ2hsaWdodFJ1bGVzO1xuXG4vLyB1c2VkIGJ5IG9iamVjdGl2ZS1jXG52YXIgY0Z1bmN0aW9ucyA9IGV4cG9ydHMuY0Z1bmN0aW9ucyA9IFwiaHlwb3R8aHlwb3RmfGh5cG90bHxzc2NhbmZ8c3lzdGVtfHNucHJpbnRmfHNjYW5mfHNjYWxibnxzY2FsYm5mfHNjYWxibmx8c2NhbGJsbnxzY2FsYmxuZnxzY2FsYmxubHxzaW58c2luaHxzaW5oZnxzaW5obHxzaW5mfHNpbmx8c2lnbmFsfHNpZ25iaXR8c3Ryc3RyfHN0cnNwbnxzdHJuY3B5fHN0cm5jYXR8c3RybmNtcHxzdHJjc3BufHN0cmNocnxzdHJjb2xsfHN0cmNweXxzdHJjYXR8c3RyY21wfHN0cnRvaW1heHxzdHJ0b2R8c3RydG91bHxzdHJ0b3VsbHxzdHJ0b3VtYXh8c3RydG9rfHN0cnRvZnxzdHJ0b2x8c3RydG9sZHxzdHJ0b2xsfHN0cmVycm9yfHN0cnBicmt8c3RyZnRpbWV8c3RybGVufHN0cnJjaHJ8c3RyeGZybXxzcHJpbnRmfHNldGptcHxzZXR2YnVmfHNldGxvY2FsZXxzZXRidWZ8c3FydHxzcXJ0ZnxzcXJ0bHxzd3NjYW5mfHN3cHJpbnRmfHNyYW5kfG5lYXJieWludHxuZWFyYnlpbnRmfG5lYXJieWludGx8bmV4dHRvd2FyZHxuZXh0dG93YXJkZnxuZXh0dG93YXJkbHxuZXh0YWZ0ZXJ8bmV4dGFmdGVyZnxuZXh0YWZ0ZXJsfG5hbnxuYW5mfG5hbmx8Y3Npbnxjc2luaHxjc2luaGZ8Y3NpbmhsfGNzaW5mfGNzaW5sfGNzcXJ0fGNzcXJ0Znxjc3FydGx8Y2Nvc3xjY29zaHxjY29zaGZ8Y2Nvc2Z8Y2Nvc2x8Y2ltYWd8Y2ltYWdmfGNpbWFnbHxjdGltZXxjdGFufGN0YW5ofGN0YW5oZnxjdGFuaGx8Y3RhbmZ8Y3Rhbmx8Y29zfGNvc2h8Y29zaGZ8Y29zaGx8Y29zZnxjb3NsfGNvbmp8Y29uamZ8Y29uamx8Y29weXNpZ258Y29weXNpZ25mfGNvcHlzaWdubHxjcG93fGNwb3dmfGNwb3dsfGNwcm9qfGNwcm9qZnxjcHJvamx8Y2VpbHxjZWlsZnxjZWlsbHxjZXhwfGNleHBmfGNleHBsfGNsb2NrfGNsb2d8Y2xvZ2Z8Y2xvZ2x8Y2xlYXJlcnJ8Y2FzaW58Y2FzaW5ofGNhc2luaGZ8Y2FzaW5obHxjYXNpbmZ8Y2FzaW5sfGNhY29zfGNhY29zaHxjYWNvc2hmfGNhY29zaGx8Y2Fjb3NmfGNhY29zbHxjYXRhbnxjYXRhbmh8Y2F0YW5oZnxjYXRhbmhsfGNhdGFuZnxjYXRhbmx8Y2FsbG9jfGNhcmd8Y2FyZ2Z8Y2FyZ2x8Y2Fic3xjYWJzZnxjYWJzbHxjcmVhbHxjcmVhbGZ8Y3JlYWxsfGNicnR8Y2JydGZ8Y2JydGx8dGltZXx0b3VwcGVyfHRvbG93ZXJ8dGFufHRhbmh8dGFuaGZ8dGFuaGx8dGFuZnx0YW5sfHRydW5jfHRydW5jZnx0cnVuY2x8dGdhbW1hfHRnYW1tYWZ8dGdhbW1hbHx0bXBuYW18dG1wZmlsZXxpc3NwYWNlfGlzbm9ybWFsfGlzbmFufGlzY250cmx8aXNpbmZ8aXNkaWdpdHxpc3Vub3JkZXJlZHxpc3VwcGVyfGlzcHVuY3R8aXNwcmludHxpc2Zpbml0ZXxpc3dzcGFjZXxpc3djbnRybHxpc3djdHlwZXxpc3dkaWdpdHxpc3d1cHBlcnxpc3dwdW5jdHxpc3dwcmludHxpc3dsb3dlcnxpc3dhbG51bXxpc3dhbHBoYXxpc3dncmFwaHxpc3d4ZGlnaXR8aXN3Ymxhbmt8aXNsb3dlcnxpc2xlc3N8aXNsZXNzZXF1YWx8aXNsZXNzZ3JlYXRlcnxpc2FsbnVtfGlzYWxwaGF8aXNncmVhdGVyfGlzZ3JlYXRlcmVxdWFsfGlzZ3JhcGh8aXN4ZGlnaXR8aXNibGFua3xpbG9nYnxpbG9nYmZ8aWxvZ2JsfGltYXhkaXZ8aW1heGFic3xkaXZ8ZGlmZnRpbWV8X0V4aXR8dW5nZXRjfHVuZ2V0d2N8cG93fHBvd2Z8cG93bHxwdXRzfHB1dGN8cHV0Y2hhcnxwdXR3Y3xwdXR3Y2hhcnxwZXJyb3J8cHJpbnRmfGVyZnxlcmZjfGVyZmNmfGVyZmNsfGVyZmZ8ZXJmbHxleGl0fGV4cHxleHAyfGV4cDJmfGV4cDJsfGV4cGZ8ZXhwbHxleHBtMXxleHBtMWZ8ZXhwbTFsfHZzc2NhbmZ8dnNucHJpbnRmfHZzY2FuZnx2c3ByaW50Znx2c3dzY2FuZnx2c3dwcmludGZ8dnByaW50Znx2ZnNjYW5mfHZmcHJpbnRmfHZmd3NjYW5mfHZmd3ByaW50Znx2d3NjYW5mfHZ3cHJpbnRmfHZhX3N0YXJ0fHZhX2NvcHl8dmFfZW5kfHZhX2FyZ3xxc29ydHxmc2NhbmZ8ZnNldHBvc3xmc2Vla3xmY2xvc2V8ZnRlbGx8Zm9wZW58ZmRpbXxmZGltZnxmZGltbHxmcGNsYXNzaWZ5fGZwdXRzfGZwdXRjfGZwdXR3c3xmcHV0d2N8ZnByaW50ZnxmZWhvbGRleGNlcHR8ZmVzZXRlbnZ8ZmVzZXRleGNlcHRmbGFnfGZlc2V0cm91bmR8ZmVjbGVhcmV4Y2VwdHxmZXRlc3RleGNlcHR8ZmVvZnxmZXVwZGF0ZWVudnxmZXJhaXNlZXhjZXB0fGZlcnJvcnxmZWdldGVudnxmZWdldGV4Y2VwdGZsYWd8ZmVnZXRyb3VuZHxmZmx1c2h8ZndzY2FuZnxmd2lkZXxmd3ByaW50Znxmd3JpdGV8Zmxvb3J8Zmxvb3JmfGZsb29ybHxmYWJzfGZhYnNmfGZhYnNsfGZnZXRzfGZnZXRjfGZnZXRwb3N8ZmdldHdzfGZnZXR3Y3xmcmVvcGVufGZyZWV8ZnJlYWR8ZnJleHB8ZnJleHBmfGZyZXhwbHxmbWlufGZtaW5mfGZtaW5sfGZtb2R8Zm1vZGZ8Zm1vZGx8Zm1hfGZtYWZ8Zm1hbHxmbWF4fGZtYXhmfGZtYXhsfGxkaXZ8bGRleHB8bGRleHBmfGxkZXhwbHxsb25nam1wfGxvY2FsdGltZXxsb2NhbGVjb252fGxvZ3xsb2cxcHxsb2cxcGZ8bG9nMXBsfGxvZzEwfGxvZzEwZnxsb2cxMGx8bG9nMnxsb2cyZnxsb2cybHxsb2dmfGxvZ2x8bG9nYnxsb2diZnxsb2dibHxsYWJzfGxsZGl2fGxsYWJzfGxscmludHxsbHJpbnRmfGxscmludGx8bGxyb3VuZHxsbHJvdW5kZnxsbHJvdW5kbHxscmludHxscmludGZ8bHJpbnRsfGxyb3VuZHxscm91bmRmfGxyb3VuZGx8bGdhbW1hfGxnYW1tYWZ8bGdhbW1hbHx3c2NhbmZ8d2Nzc3RyfHdjc3Nwbnx3Y3NuY3B5fHdjc25jYXR8d2NzbmNtcHx3Y3Njc3BufHdjc2Nocnx3Y3Njb2xsfHdjc2NweXx3Y3NjYXR8d2NzY21wfHdjc3RvaW1heHx3Y3N0b2R8d2NzdG91bHx3Y3N0b3VsbHx3Y3N0b3VtYXh8d2NzdG9rfHdjc3RvZnx3Y3N0b2x8d2NzdG9sZHx3Y3N0b2xsfHdjc3RvbWJzfHdjc3Bicmt8d2NzZnRpbWV8d2NzbGVufHdjc3JjaHJ8d2NzcnRvbWJzfHdjc3hmcm18d2N0b2J8d2N0b21ifHdjcnRvbWJ8d3ByaW50Znx3bWVtc2V0fHdtZW1jaHJ8d21lbWNweXx3bWVtY21wfHdtZW1tb3ZlfGFzc2VydHxhc2N0aW1lfGFzaW58YXNpbmh8YXNpbmhmfGFzaW5obHxhc2luZnxhc2lubHxhY29zfGFjb3NofGFjb3NoZnxhY29zaGx8YWNvc2Z8YWNvc2x8YXRvaXxhdG9mfGF0b2x8YXRvbGx8YXRleGl0fGF0YW58YXRhbmh8YXRhbmhmfGF0YW5obHxhdGFuMnxhdGFuMmZ8YXRhbjJsfGF0YW5mfGF0YW5sfGFic3xhYm9ydHxnZXRzfGdldGN8Z2V0Y2hhcnxnZXRlbnZ8Z2V0d2N8Z2V0d2NoYXJ8Z210aW1lfHJpbnR8cmludGZ8cmludGx8cm91bmR8cm91bmRmfHJvdW5kbHxyZW5hbWV8cmVhbGxvY3xyZXdpbmR8cmVtb3ZlfHJlbXF1b3xyZW1xdW9mfHJlbXF1b2x8cmVtYWluZGVyfHJlbWFpbmRlcmZ8cmVtYWluZGVybHxyYW5kfHJhaXNlfGJzZWFyY2h8YnRvd2N8bW9kZnxtb2RmZnxtb2RmbHxtZW1zZXR8bWVtY2hyfG1lbWNweXxtZW1jbXB8bWVtbW92ZXxta3RpbWV8bWFsbG9jfG1ic2luaXR8bWJzdG93Y3N8bWJzcnRvd2NzfG1idG93Y3xtYmxlbnxtYnJ0b3djfG1icmxlblwiO1xuXG52YXIgY19jcHBIaWdobGlnaHRSdWxlcyA9IGZ1bmN0aW9uKGV4dHJhS2V5d29yZHMpIHtcblxuICAgIHZhciBrZXl3b3JkQ29udHJvbHMgPSAoXG4gICAgICAgIFwiYnJlYWt8Y2FzZXxjb250aW51ZXxkZWZhdWx0fGRvfGVsc2V8Zm9yfGdvdG98aWZ8X1ByYWdtYXxcIiArXG4gICAgICAgIFwicmV0dXJufHN3aXRjaHx3aGlsZXxjYXRjaHxvcGVyYXRvcnx0cnl8dGhyb3d8dXNpbmdcIlxuICAgICk7XG4gICAgXG4gICAgdmFyIHN0b3JhZ2VUeXBlID0gKFxuICAgICAgICBcImFzbXxfX2FzbV9ffGF1dG98Ym9vbHxfQm9vbHxjaGFyfF9Db21wbGV4fGRvdWJsZXxlbnVtfGZsb2F0fFwiICtcbiAgICAgICAgXCJfSW1hZ2luYXJ5fGludHxpbnQ4X3R8aW50MTZfdHxpbnQzMl90fGludDY0X3R8bG9uZ3xzaG9ydHxzaWduZWR8c2l6ZV90fHN0cnVjdHx0eXBlZGVmfHVpbnQ4X3R8dWludDE2X3R8dWludDMyX3R8dWludDY0X3R8dW5pb258dW5zaWduZWR8dm9pZHxcIiArXG4gICAgICAgIFwiY2xhc3N8d2NoYXJfdHx0ZW1wbGF0ZXxjaGFyMTZfdHxjaGFyMzJfdFwiXG4gICAgKTtcblxuICAgIHZhciBzdG9yYWdlTW9kaWZpZXJzID0gKFxuICAgICAgICBcImNvbnN0fGV4dGVybnxyZWdpc3RlcnxyZXN0cmljdHxzdGF0aWN8dm9sYXRpbGV8aW5saW5lfHByaXZhdGV8XCIgK1xuICAgICAgICBcInByb3RlY3RlZHxwdWJsaWN8ZnJpZW5kfGV4cGxpY2l0fHZpcnR1YWx8ZXhwb3J0fG11dGFibGV8dHlwZW5hbWV8XCIgK1xuICAgICAgICBcImNvbnN0ZXhwcnxuZXd8ZGVsZXRlfGFsaWduYXN8YWxpZ25vZnxkZWNsdHlwZXxub2V4Y2VwdHx0aHJlYWRfbG9jYWxcIlxuICAgICk7XG5cbiAgICB2YXIga2V5d29yZE9wZXJhdG9ycyA9IChcbiAgICAgICAgXCJhbmR8YW5kX2VxfGJpdGFuZHxiaXRvcnxjb21wbHxub3R8bm90X2VxfG9yfG9yX2VxfHR5cGVpZHx4b3J8eG9yX2VxfFwiICtcbiAgICAgICAgXCJjb25zdF9jYXN0fGR5bmFtaWNfY2FzdHxyZWludGVycHJldF9jYXN0fHN0YXRpY19jYXN0fHNpemVvZnxuYW1lc3BhY2VcIlxuICAgICk7XG5cbiAgICB2YXIgYnVpbHRpbkNvbnN0YW50cyA9IChcbiAgICAgICAgXCJOVUxMfHRydWV8ZmFsc2V8VFJVRXxGQUxTRXxudWxscHRyXCJcbiAgICApO1xuXG4gICAgdmFyIGtleXdvcmRNYXBwZXIgPSB0aGlzLiRrZXl3b3JkcyA9IHRoaXMuY3JlYXRlS2V5d29yZE1hcHBlcihPYmplY3QuYXNzaWduKHtcbiAgICAgICAgXCJrZXl3b3JkLmNvbnRyb2xcIiA6IGtleXdvcmRDb250cm9scyxcbiAgICAgICAgXCJzdG9yYWdlLnR5cGVcIiA6IHN0b3JhZ2VUeXBlLFxuICAgICAgICBcInN0b3JhZ2UubW9kaWZpZXJcIiA6IHN0b3JhZ2VNb2RpZmllcnMsXG4gICAgICAgIFwia2V5d29yZC5vcGVyYXRvclwiIDoga2V5d29yZE9wZXJhdG9ycyxcbiAgICAgICAgXCJ2YXJpYWJsZS5sYW5ndWFnZVwiOiBcInRoaXNcIixcbiAgICAgICAgXCJjb25zdGFudC5sYW5ndWFnZVwiOiBidWlsdGluQ29uc3RhbnRzLFxuICAgICAgICBcInN1cHBvcnQuZnVuY3Rpb24uQzk5LmNcIjogY0Z1bmN0aW9uc1xuICAgIH0sIGV4dHJhS2V5d29yZHMpLCBcImlkZW50aWZpZXJcIik7XG5cbiAgICB2YXIgaWRlbnRpZmllclJlID0gXCJbYS16QS1aXFxcXCRfXFx1MDBhMS1cXHVmZmZmXVthLXpBLVpcXFxcZFxcXFwkX1xcdTAwYTEtXFx1ZmZmZl0qXFxcXGJcIjtcbiAgICB2YXIgZXNjYXBlUmUgPSAvXFxcXCg/OlsnXCI/XFxcXGFiZm5ydHZdfFswLTddezEsM318eFthLWZBLUZcXGRdezJ9fHVbYS1mQS1GXFxkXXs0fVVbYS1mQS1GXFxkXXs4fXwuKS8uc291cmNlO1xuICAgIHZhciBmb3JtYXRSZSA9IFwiJVwiXG4gICAgICAgICAgKyAvKFxcZCtcXCQpPy8uc291cmNlIC8vIGZpZWxkIChhcmd1bWVudCAjKVxuICAgICAgICAgICsgL1sjMFxcLSArJ10qLy5zb3VyY2UgLy8gZmxhZ3NcbiAgICAgICAgICArIC9bLDs6X10/Ly5zb3VyY2UgLy8gc2VwYXJhdG9yIGNoYXJhY3RlciAoQWx0aVZlYylcbiAgICAgICAgICArIC8oKC0/XFxkKyl8XFwqKC0/XFxkK1xcJCk/KT8vLnNvdXJjZSAvLyBtaW5pbXVtIGZpZWxkIHdpZHRoXG4gICAgICAgICAgKyAvKFxcLigoLT9cXGQrKXxcXCooLT9cXGQrXFwkKT8pPyk/Ly5zb3VyY2UgLy8gcHJlY2lzaW9uXG4gICAgICAgICAgKyAvKGhofGh8bGx8bHxqfHR8enxxfEx8dmh8dmx8dnxodnxobCk/Ly5zb3VyY2UgLy8gbGVuZ3RoIG1vZGlmaWVyXG4gICAgICAgICAgKyAvKFxcW1teXCJcXF1dK1xcXXxbZGlvdXhYRE9VZUVmRmdHYUFDY1NzcG4lXSkvLnNvdXJjZTsgLy8gY29udmVyc2lvbiB0eXBlXG4gICAgICAgICAgXG4gICAgLy8gcmVnZXhwIG11c3Qgbm90IGhhdmUgY2FwdHVyaW5nIHBhcmVudGhlc2VzLiBVc2UgKD86KSBpbnN0ZWFkLlxuICAgIC8vIHJlZ2V4cHMgYXJlIG9yZGVyZWQgLT4gdGhlIGZpcnN0IG1hdGNoIGlzIHVzZWRcblxuICAgIHRoaXMuJHJ1bGVzID0geyBcbiAgICAgICAgXCJzdGFydFwiIDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJjb21tZW50XCIsXG4gICAgICAgICAgICAgICAgcmVnZXggOiBcIi8vJFwiLFxuICAgICAgICAgICAgICAgIG5leHQgOiBcInN0YXJ0XCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwiY29tbWVudFwiLFxuICAgICAgICAgICAgICAgIHJlZ2V4IDogXCIvL1wiLFxuICAgICAgICAgICAgICAgIG5leHQgOiBcInNpbmdsZUxpbmVDb21tZW50XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBEb2NDb21tZW50SGlnaGxpZ2h0UnVsZXMuZ2V0U3RhcnRSdWxlKFwiZG9jLXN0YXJ0XCIpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJjb21tZW50XCIsIC8vIG11bHRpIGxpbmUgY29tbWVudFxuICAgICAgICAgICAgICAgIHJlZ2V4IDogXCJcXFxcL1xcXFwqXCIsXG4gICAgICAgICAgICAgICAgbmV4dCA6IFwiY29tbWVudFwiXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdG9rZW4gOiBcInN0cmluZ1wiLCAvLyBjaGFyYWN0ZXJcbiAgICAgICAgICAgICAgICByZWdleCA6IFwiJyg/OlwiICsgZXNjYXBlUmUgKyBcInwuKT8nXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwic3RyaW5nLnN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgcmVnZXggOiAnXCInLCBcbiAgICAgICAgICAgICAgICBzdGF0ZU5hbWU6IFwicXFzdHJpbmdcIixcbiAgICAgICAgICAgICAgICBuZXh0OiBbXG4gICAgICAgICAgICAgICAgICAgIHsgdG9rZW46IFwic3RyaW5nXCIsIHJlZ2V4OiAvXFxcXFxccyokLywgbmV4dDogXCJxcXN0cmluZ1wiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgdG9rZW46IFwiY29uc3RhbnQubGFuZ3VhZ2UuZXNjYXBlXCIsIHJlZ2V4OiBlc2NhcGVSZSB9LFxuICAgICAgICAgICAgICAgICAgICB7IHRva2VuOiBcImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZVwiLCByZWdleDogZm9ybWF0UmUgfSxcbiAgICAgICAgICAgICAgICAgICAgeyB0b2tlbjogXCJzdHJpbmcuZW5kXCIsIHJlZ2V4OiAnXCJ8JCcsIG5leHQ6IFwic3RhcnRcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IGRlZmF1bHRUb2tlbjogXCJzdHJpbmdcIn1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdG9rZW4gOiBcInN0cmluZy5zdGFydFwiLFxuICAgICAgICAgICAgICAgIHJlZ2V4IDogJ1JcIlxcXFwoJywgXG4gICAgICAgICAgICAgICAgc3RhdGVOYW1lOiBcInJhd1N0cmluZ1wiLFxuICAgICAgICAgICAgICAgIG5leHQ6IFtcbiAgICAgICAgICAgICAgICAgICAgeyB0b2tlbjogXCJzdHJpbmcuZW5kXCIsIHJlZ2V4OiAnXFxcXClcIicsIG5leHQ6IFwic3RhcnRcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IGRlZmF1bHRUb2tlbjogXCJzdHJpbmdcIn1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdG9rZW4gOiBcImNvbnN0YW50Lm51bWVyaWNcIiwgLy8gaGV4XG4gICAgICAgICAgICAgICAgcmVnZXggOiBcIjBbeFhdWzAtOWEtZkEtRl0rKEx8bHxVTHx1bHx1fFV8RnxmfGxsfExMfHVsbHxVTEwpP1xcXFxiXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwiY29uc3RhbnQubnVtZXJpY1wiLCAvLyBmbG9hdFxuICAgICAgICAgICAgICAgIHJlZ2V4IDogXCJbKy1dP1xcXFxkKyg/Oig/OlxcXFwuXFxcXGQqKT8oPzpbZUVdWystXT9cXFxcZCspPyk/KEx8bHxVTHx1bHx1fFV8RnxmfGxsfExMfHVsbHxVTEwpP1xcXFxiXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwia2V5d29yZFwiLCAvLyBwcmUtY29tcGlsZXIgZGlyZWN0aXZlc1xuICAgICAgICAgICAgICAgIHJlZ2V4IDogXCIjXFxcXHMqKD86aW5jbHVkZXxpbXBvcnR8cHJhZ21hfGxpbmV8ZGVmaW5lfHVuZGVmKVxcXFxiXCIsXG4gICAgICAgICAgICAgICAgbmV4dCAgOiBcImRpcmVjdGl2ZVwiXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdG9rZW4gOiBcImtleXdvcmRcIiwgLy8gc3BlY2lhbCBjYXNlIHByZS1jb21waWxlciBkaXJlY3RpdmVcbiAgICAgICAgICAgICAgICByZWdleCA6IFwiI1xcXFxzKig/OmVuZGlmfGlmfGlmZGVmfGVsc2V8ZWxpZnxpZm5kZWYpXFxcXGJcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRva2VuIDoga2V5d29yZE1hcHBlcixcbiAgICAgICAgICAgICAgICByZWdleCA6IFwiW2EtekEtWl8kXVthLXpBLVowLTlfJF0qXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwia2V5d29yZC5vcGVyYXRvclwiLFxuICAgICAgICAgICAgICAgIHJlZ2V4IDogLy0tfFxcK1xcK3w8PD18Pj49fD4+Pj18PD58JiZ8XFx8XFx8fFxcPzp8WyolXFwvK1xcLSZcXF58fiE8Pj1dPT8vXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIHRva2VuIDogXCJwdW5jdHVhdGlvbi5vcGVyYXRvclwiLFxuICAgICAgICAgICAgICByZWdleCA6IFwiXFxcXD98XFxcXDp8XFxcXCx8XFxcXDt8XFxcXC5cIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJwYXJlbi5scGFyZW5cIixcbiAgICAgICAgICAgICAgICByZWdleCA6IFwiW1soe11cIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJwYXJlbi5ycGFyZW5cIixcbiAgICAgICAgICAgICAgICByZWdleCA6IFwiW1xcXFxdKX1dXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgIHJlZ2V4IDogXCJcXFxccytcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcImNvbW1lbnRcIiA6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwiY29tbWVudFwiLCAvLyBjbG9zaW5nIGNvbW1lbnRcbiAgICAgICAgICAgICAgICByZWdleCA6IFwiXFxcXCpcXFxcL1wiLFxuICAgICAgICAgICAgICAgIG5leHQgOiBcInN0YXJ0XCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0VG9rZW4gOiBcImNvbW1lbnRcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcInNpbmdsZUxpbmVDb21tZW50XCIgOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdG9rZW4gOiBcImNvbW1lbnRcIixcbiAgICAgICAgICAgICAgICByZWdleCA6IC9cXFxcJC8sXG4gICAgICAgICAgICAgICAgbmV4dCA6IFwic2luZ2xlTGluZUNvbW1lbnRcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJjb21tZW50XCIsXG4gICAgICAgICAgICAgICAgcmVnZXggOiAvJC8sXG4gICAgICAgICAgICAgICAgbmV4dCA6IFwic3RhcnRcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRUb2tlbjogXCJjb21tZW50XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJkaXJlY3RpdmVcIiA6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwiY29uc3RhbnQub3RoZXIubXVsdGlsaW5lXCIsXG4gICAgICAgICAgICAgICAgcmVnZXggOiAvXFxcXC9cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdG9rZW4gOiBcImNvbnN0YW50Lm90aGVyLm11bHRpbGluZVwiLFxuICAgICAgICAgICAgICAgIHJlZ2V4IDogLy4qXFxcXC9cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdG9rZW4gOiBcImNvbnN0YW50Lm90aGVyXCIsXG4gICAgICAgICAgICAgICAgcmVnZXggOiBcIlxcXFxzKjwuKz8+XCIsXG4gICAgICAgICAgICAgICAgbmV4dCA6IFwic3RhcnRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwiY29uc3RhbnQub3RoZXJcIiwgLy8gc2luZ2xlIGxpbmVcbiAgICAgICAgICAgICAgICByZWdleCA6ICdcXFxccypbXCJdKD86KD86XFxcXFxcXFwuKXwoPzpbXlwiXFxcXFxcXFxdKSkqP1tcIl0nLFxuICAgICAgICAgICAgICAgIG5leHQgOiBcInN0YXJ0XCJcbiAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJjb25zdGFudC5vdGhlclwiLCAvLyBzaW5nbGUgbGluZVxuICAgICAgICAgICAgICAgIHJlZ2V4IDogXCJcXFxccypbJ10oPzooPzpcXFxcXFxcXC4pfCg/OlteJ1xcXFxcXFxcXSkpKj9bJ11cIixcbiAgICAgICAgICAgICAgICBuZXh0IDogXCJzdGFydFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gXCJcXFwiIGltcGxpZXMgbXVsdGlsaW5lLCB3aGlsZSBcIi9cIiBpbXBsaWVzIGNvbW1lbnRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwiY29uc3RhbnQub3RoZXJcIixcbiAgICAgICAgICAgICAgICByZWdleCA6IC9bXlxcXFxcXC9dKy8sXG4gICAgICAgICAgICAgICAgbmV4dCA6IFwic3RhcnRcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfTtcblxuICAgIHRoaXMuZW1iZWRSdWxlcyhEb2NDb21tZW50SGlnaGxpZ2h0UnVsZXMsIFwiZG9jLVwiLFxuICAgICAgICBbIERvY0NvbW1lbnRIaWdobGlnaHRSdWxlcy5nZXRFbmRSdWxlKFwic3RhcnRcIikgXSk7XG4gICAgdGhpcy5ub3JtYWxpemVSdWxlcygpO1xufTtcblxub29wLmluaGVyaXRzKGNfY3BwSGlnaGxpZ2h0UnVsZXMsIFRleHRIaWdobGlnaHRSdWxlcyk7XG5cbmV4cG9ydHMuY19jcHBIaWdobGlnaHRSdWxlcyA9IGNfY3BwSGlnaGxpZ2h0UnVsZXM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/c_cpp_highlight_rules.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/doc_comment_highlight_rules.js":
/*!***********************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/doc_comment_highlight_rules.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar TextHighlightRules = (__webpack_require__(/*! ./text_highlight_rules */ \"./node_modules/ace-code/src/mode/text_highlight_rules.js\").TextHighlightRules);\n\nvar DocCommentHighlightRules = function () {\n    this.$rules = {\n        \"start\": [\n            {\n                token: \"comment.doc.tag\",\n                regex: \"@\\\\w+(?=\\\\s|$)\"\n            }, DocCommentHighlightRules.getTagRule(), {\n                defaultToken: \"comment.doc.body\",\n                caseInsensitive: true\n            }\n        ]\n    };\n};\n\noop.inherits(DocCommentHighlightRules, TextHighlightRules);\n\nDocCommentHighlightRules.getTagRule = function(start) {\n    return {\n        token : \"comment.doc.tag.storage.type\",\n        regex : \"\\\\b(?:TODO|FIXME|XXX|HACK)\\\\b\"\n    };\n};\n\nDocCommentHighlightRules.getStartRule = function(start) {\n    return {\n        token : \"comment.doc\", // doc comment\n        regex: /\\/\\*\\*(?!\\/)/,\n        next  : start\n    };\n};\n\nDocCommentHighlightRules.getEndRule = function (start) {\n    return {\n        token : \"comment.doc\", // closing comment\n        regex : \"\\\\*\\\\/\",\n        next  : start\n    };\n};\n\n\nexports.DocCommentHighlightRules = DocCommentHighlightRules;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvZG9jX2NvbW1lbnRfaGlnaGxpZ2h0X3J1bGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQywwREFBWTtBQUM5Qix5QkFBeUIsa0lBQW9EOztBQUU3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0EsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW9kZS9kb2NfY29tbWVudF9oaWdobGlnaHRfcnVsZXMuanM/Njg2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIG9vcCA9IHJlcXVpcmUoXCIuLi9saWIvb29wXCIpO1xudmFyIFRleHRIaWdobGlnaHRSdWxlcyA9IHJlcXVpcmUoXCIuL3RleHRfaGlnaGxpZ2h0X3J1bGVzXCIpLlRleHRIaWdobGlnaHRSdWxlcztcblxudmFyIERvY0NvbW1lbnRIaWdobGlnaHRSdWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRydWxlcyA9IHtcbiAgICAgICAgXCJzdGFydFwiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdG9rZW46IFwiY29tbWVudC5kb2MudGFnXCIsXG4gICAgICAgICAgICAgICAgcmVnZXg6IFwiQFxcXFx3Kyg/PVxcXFxzfCQpXCJcbiAgICAgICAgICAgIH0sIERvY0NvbW1lbnRIaWdobGlnaHRSdWxlcy5nZXRUYWdSdWxlKCksIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwiY29tbWVudC5kb2MuYm9keVwiLFxuICAgICAgICAgICAgICAgIGNhc2VJbnNlbnNpdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfTtcbn07XG5cbm9vcC5pbmhlcml0cyhEb2NDb21tZW50SGlnaGxpZ2h0UnVsZXMsIFRleHRIaWdobGlnaHRSdWxlcyk7XG5cbkRvY0NvbW1lbnRIaWdobGlnaHRSdWxlcy5nZXRUYWdSdWxlID0gZnVuY3Rpb24oc3RhcnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b2tlbiA6IFwiY29tbWVudC5kb2MudGFnLnN0b3JhZ2UudHlwZVwiLFxuICAgICAgICByZWdleCA6IFwiXFxcXGIoPzpUT0RPfEZJWE1FfFhYWHxIQUNLKVxcXFxiXCJcbiAgICB9O1xufTtcblxuRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzLmdldFN0YXJ0UnVsZSA9IGZ1bmN0aW9uKHN0YXJ0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9rZW4gOiBcImNvbW1lbnQuZG9jXCIsIC8vIGRvYyBjb21tZW50XG4gICAgICAgIHJlZ2V4OiAvXFwvXFwqXFwqKD8hXFwvKS8sXG4gICAgICAgIG5leHQgIDogc3RhcnRcbiAgICB9O1xufTtcblxuRG9jQ29tbWVudEhpZ2hsaWdodFJ1bGVzLmdldEVuZFJ1bGUgPSBmdW5jdGlvbiAoc3RhcnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b2tlbiA6IFwiY29tbWVudC5kb2NcIiwgLy8gY2xvc2luZyBjb21tZW50XG4gICAgICAgIHJlZ2V4IDogXCJcXFxcKlxcXFwvXCIsXG4gICAgICAgIG5leHQgIDogc3RhcnRcbiAgICB9O1xufTtcblxuXG5leHBvcnRzLkRvY0NvbW1lbnRIaWdobGlnaHRSdWxlcyA9IERvY0NvbW1lbnRIaWdobGlnaHRSdWxlcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/doc_comment_highlight_rules.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/folding/cstyle.js":
/*!**********************************************************!*\
  !*** ./node_modules/ace-code/src/mode/folding/cstyle.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ../../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar Range = (__webpack_require__(/*! ../../range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar BaseFoldMode = (__webpack_require__(/*! ./fold_mode */ \"./node_modules/ace-code/src/mode/folding/fold_mode.js\").FoldMode);\n\nvar FoldMode = exports.FoldMode = function(commentRegex) {\n    if (commentRegex) {\n        this.foldingStartMarker = new RegExp(\n            this.foldingStartMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.start)\n        );\n        this.foldingStopMarker = new RegExp(\n            this.foldingStopMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.end)\n        );\n    }\n};\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n    \n    this.foldingStartMarker = /([\\{\\[\\(])[^\\}\\]\\)]*$|^\\s*(\\/\\*)/;\n    this.foldingStopMarker = /^[^\\[\\{\\(]*([\\}\\]\\)])|^[\\s\\*]*(\\*\\/)/;\n    this.singleLineBlockCommentRe= /^\\s*(\\/\\*).*\\*\\/\\s*$/;\n    this.tripleStarBlockCommentRe = /^\\s*(\\/\\*\\*\\*).*\\*\\/\\s*$/;\n    this.startRegionRe = /^\\s*(\\/\\*|\\/\\/)#?region\\b/;\n    \n    //prevent naming conflict with any modes that inherit from cstyle and override this (like csharp)\n    this._getFoldWidgetBase = this.getFoldWidget;\n    \n    /**\n     * Gets fold widget with some non-standard extras:\n     *\n     * @example lineCommentRegionStart\n     *      //#region [optional description]\n     *\n     * @example blockCommentRegionStart\n     *      /*#region [optional description] *[/]\n     *\n     * @example tripleStarFoldingSection\n     *      /*** this folds even though 1 line because it has 3 stars ***[/]\n     * \n     * @note the pound symbol for region tags is optional\n     */\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n    \n        if (this.singleLineBlockCommentRe.test(line)) {\n            // No widget for single line block comment unless region or triple star\n            if (!this.startRegionRe.test(line) && !this.tripleStarBlockCommentRe.test(line))\n                return \"\";\n        }\n    \n        var fw = this._getFoldWidgetBase(session, foldStyle, row);\n    \n        if (!fw && this.startRegionRe.test(line))\n            return \"start\"; // lineCommentRegionStart\n    \n        return fw;\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row, forceMultiline) {\n        var line = session.getLine(row);\n        \n        if (this.startRegionRe.test(line))\n            return this.getCommentRegionBlock(session, line, row);\n        \n        var match = line.match(this.foldingStartMarker);\n        if (match) {\n            var i = match.index;\n\n            if (match[1])\n                return this.openingBracketBlock(session, match[1], row, i);\n                \n            var range = session.getCommentFoldRange(row, i + match[0].length, 1);\n            \n            if (range && !range.isMultiLine()) {\n                if (forceMultiline) {\n                    range = this.getSectionRange(session, row);\n                } else if (foldStyle != \"all\")\n                    range = null;\n            }\n            \n            return range;\n        }\n\n        if (foldStyle === \"markbegin\")\n            return;\n\n        var match = line.match(this.foldingStopMarker);\n        if (match) {\n            var i = match.index + match[0].length;\n\n            if (match[1])\n                return this.closingBracketBlock(session, match[1], row, i);\n\n            return session.getCommentFoldRange(row, i, -1);\n        }\n    };\n    \n    this.getSectionRange = function(session, row) {\n        var line = session.getLine(row);\n        var startIndent = line.search(/\\S/);\n        var startRow = row;\n        var startColumn = line.length;\n        row = row + 1;\n        var endRow = row;\n        var maxRow = session.getLength();\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var indent = line.search(/\\S/);\n            if (indent === -1)\n                continue;\n            if  (startIndent > indent)\n                break;\n            var subRange = this.getFoldWidgetRange(session, \"all\", row);\n            \n            if (subRange) {\n                if (subRange.start.row <= startRow) {\n                    break;\n                } else if (subRange.isMultiLine()) {\n                    row = subRange.end.row;\n                } else if (startIndent == indent) {\n                    break;\n                }\n            }\n            endRow = row;\n        }\n        \n        return new Range(startRow, startColumn, endRow, session.getLine(endRow).length);\n    };\n    \n    /**\n     * gets comment region block with end region assumed to be start of comment in any cstyle mode or SQL mode (--) which inherits from this.\n     * There may optionally be a pound symbol before the region/endregion statement\n     */\n    this.getCommentRegionBlock = function(session, line, row) {\n        var startColumn = line.search(/\\s*$/);\n        var maxRow = session.getLength();\n        var startRow = row;\n        \n        var re = /^\\s*(?:\\/\\*|\\/\\/|--)#?(end)?region\\b/;\n        var depth = 1;\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var m = re.exec(line);\n            if (!m) continue;\n            if (m[1]) depth--;\n            else depth++;\n\n            if (!depth) break;\n        }\n\n        var endRow = row;\n        if (endRow > startRow) {\n            return new Range(startRow, startColumn, endRow, line.length);\n        }\n    };\n\n}).call(FoldMode.prototype);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvZm9sZGluZy9jc3R5bGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsVUFBVSxtQkFBTyxDQUFDLDZEQUFlO0FBQ2pDLFlBQVksc0ZBQTRCO0FBQ3hDLG1CQUFtQiwwR0FBK0I7O0FBRWxELGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQ0FBbUMsVUFBVTtBQUM3QyxxQ0FBcUMsUUFBUTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvZm9sZGluZy9jc3R5bGUuanM/Njc0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIG9vcCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvb29wXCIpO1xudmFyIFJhbmdlID0gcmVxdWlyZShcIi4uLy4uL3JhbmdlXCIpLlJhbmdlO1xudmFyIEJhc2VGb2xkTW9kZSA9IHJlcXVpcmUoXCIuL2ZvbGRfbW9kZVwiKS5Gb2xkTW9kZTtcblxudmFyIEZvbGRNb2RlID0gZXhwb3J0cy5Gb2xkTW9kZSA9IGZ1bmN0aW9uKGNvbW1lbnRSZWdleCkge1xuICAgIGlmIChjb21tZW50UmVnZXgpIHtcbiAgICAgICAgdGhpcy5mb2xkaW5nU3RhcnRNYXJrZXIgPSBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgdGhpcy5mb2xkaW5nU3RhcnRNYXJrZXIuc291cmNlLnJlcGxhY2UoL1xcfFtefF0qPyQvLCBcInxcIiArIGNvbW1lbnRSZWdleC5zdGFydClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5mb2xkaW5nU3RvcE1hcmtlciA9IG5ldyBSZWdFeHAoXG4gICAgICAgICAgICB0aGlzLmZvbGRpbmdTdG9wTWFya2VyLnNvdXJjZS5yZXBsYWNlKC9cXHxbXnxdKj8kLywgXCJ8XCIgKyBjb21tZW50UmVnZXguZW5kKVxuICAgICAgICApO1xuICAgIH1cbn07XG5vb3AuaW5oZXJpdHMoRm9sZE1vZGUsIEJhc2VGb2xkTW9kZSk7XG5cbihmdW5jdGlvbigpIHtcbiAgICBcbiAgICB0aGlzLmZvbGRpbmdTdGFydE1hcmtlciA9IC8oW1xce1xcW1xcKF0pW15cXH1cXF1cXCldKiR8XlxccyooXFwvXFwqKS87XG4gICAgdGhpcy5mb2xkaW5nU3RvcE1hcmtlciA9IC9eW15cXFtcXHtcXChdKihbXFx9XFxdXFwpXSl8XltcXHNcXCpdKihcXCpcXC8pLztcbiAgICB0aGlzLnNpbmdsZUxpbmVCbG9ja0NvbW1lbnRSZT0gL15cXHMqKFxcL1xcKikuKlxcKlxcL1xccyokLztcbiAgICB0aGlzLnRyaXBsZVN0YXJCbG9ja0NvbW1lbnRSZSA9IC9eXFxzKihcXC9cXCpcXCpcXCopLipcXCpcXC9cXHMqJC87XG4gICAgdGhpcy5zdGFydFJlZ2lvblJlID0gL15cXHMqKFxcL1xcKnxcXC9cXC8pIz9yZWdpb25cXGIvO1xuICAgIFxuICAgIC8vcHJldmVudCBuYW1pbmcgY29uZmxpY3Qgd2l0aCBhbnkgbW9kZXMgdGhhdCBpbmhlcml0IGZyb20gY3N0eWxlIGFuZCBvdmVycmlkZSB0aGlzIChsaWtlIGNzaGFycClcbiAgICB0aGlzLl9nZXRGb2xkV2lkZ2V0QmFzZSA9IHRoaXMuZ2V0Rm9sZFdpZGdldDtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZXRzIGZvbGQgd2lkZ2V0IHdpdGggc29tZSBub24tc3RhbmRhcmQgZXh0cmFzOlxuICAgICAqXG4gICAgICogQGV4YW1wbGUgbGluZUNvbW1lbnRSZWdpb25TdGFydFxuICAgICAqICAgICAgLy8jcmVnaW9uIFtvcHRpb25hbCBkZXNjcmlwdGlvbl1cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIGJsb2NrQ29tbWVudFJlZ2lvblN0YXJ0XG4gICAgICogICAgICAvKiNyZWdpb24gW29wdGlvbmFsIGRlc2NyaXB0aW9uXSAqWy9dXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSB0cmlwbGVTdGFyRm9sZGluZ1NlY3Rpb25cbiAgICAgKiAgICAgIC8qKiogdGhpcyBmb2xkcyBldmVuIHRob3VnaCAxIGxpbmUgYmVjYXVzZSBpdCBoYXMgMyBzdGFycyAqKipbL11cbiAgICAgKiBcbiAgICAgKiBAbm90ZSB0aGUgcG91bmQgc3ltYm9sIGZvciByZWdpb24gdGFncyBpcyBvcHRpb25hbFxuICAgICAqL1xuICAgIHRoaXMuZ2V0Rm9sZFdpZGdldCA9IGZ1bmN0aW9uKHNlc3Npb24sIGZvbGRTdHlsZSwgcm93KSB7XG4gICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5nZXRMaW5lKHJvdyk7XG4gICAgXG4gICAgICAgIGlmICh0aGlzLnNpbmdsZUxpbmVCbG9ja0NvbW1lbnRSZS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAvLyBObyB3aWRnZXQgZm9yIHNpbmdsZSBsaW5lIGJsb2NrIGNvbW1lbnQgdW5sZXNzIHJlZ2lvbiBvciB0cmlwbGUgc3RhclxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0UmVnaW9uUmUudGVzdChsaW5lKSAmJiAhdGhpcy50cmlwbGVTdGFyQmxvY2tDb21tZW50UmUudGVzdChsaW5lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICB2YXIgZncgPSB0aGlzLl9nZXRGb2xkV2lkZ2V0QmFzZShzZXNzaW9uLCBmb2xkU3R5bGUsIHJvdyk7XG4gICAgXG4gICAgICAgIGlmICghZncgJiYgdGhpcy5zdGFydFJlZ2lvblJlLnRlc3QobGluZSkpXG4gICAgICAgICAgICByZXR1cm4gXCJzdGFydFwiOyAvLyBsaW5lQ29tbWVudFJlZ2lvblN0YXJ0XG4gICAgXG4gICAgICAgIHJldHVybiBmdztcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRGb2xkV2lkZ2V0UmFuZ2UgPSBmdW5jdGlvbihzZXNzaW9uLCBmb2xkU3R5bGUsIHJvdywgZm9yY2VNdWx0aWxpbmUpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUocm93KTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0UmVnaW9uUmUudGVzdChsaW5lKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbW1lbnRSZWdpb25CbG9jayhzZXNzaW9uLCBsaW5lLCByb3cpO1xuICAgICAgICBcbiAgICAgICAgdmFyIG1hdGNoID0gbGluZS5tYXRjaCh0aGlzLmZvbGRpbmdTdGFydE1hcmtlcik7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgdmFyIGkgPSBtYXRjaC5pbmRleDtcblxuICAgICAgICAgICAgaWYgKG1hdGNoWzFdKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZW5pbmdCcmFja2V0QmxvY2soc2Vzc2lvbiwgbWF0Y2hbMV0sIHJvdywgaSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZXNzaW9uLmdldENvbW1lbnRGb2xkUmFuZ2Uocm93LCBpICsgbWF0Y2hbMF0ubGVuZ3RoLCAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJhbmdlICYmICFyYW5nZS5pc011bHRpTGluZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcmNlTXVsdGlsaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gdGhpcy5nZXRTZWN0aW9uUmFuZ2Uoc2Vzc2lvbiwgcm93KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZvbGRTdHlsZSAhPSBcImFsbFwiKVxuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiByYW5nZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb2xkU3R5bGUgPT09IFwibWFya2JlZ2luXCIpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIG1hdGNoID0gbGluZS5tYXRjaCh0aGlzLmZvbGRpbmdTdG9wTWFya2VyKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAobWF0Y2hbMV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2luZ0JyYWNrZXRCbG9jayhzZXNzaW9uLCBtYXRjaFsxXSwgcm93LCBpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb24uZ2V0Q29tbWVudEZvbGRSYW5nZShyb3csIGksIC0xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdGhpcy5nZXRTZWN0aW9uUmFuZ2UgPSBmdW5jdGlvbihzZXNzaW9uLCByb3cpIHtcbiAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUocm93KTtcbiAgICAgICAgdmFyIHN0YXJ0SW5kZW50ID0gbGluZS5zZWFyY2goL1xcUy8pO1xuICAgICAgICB2YXIgc3RhcnRSb3cgPSByb3c7XG4gICAgICAgIHZhciBzdGFydENvbHVtbiA9IGxpbmUubGVuZ3RoO1xuICAgICAgICByb3cgPSByb3cgKyAxO1xuICAgICAgICB2YXIgZW5kUm93ID0gcm93O1xuICAgICAgICB2YXIgbWF4Um93ID0gc2Vzc2lvbi5nZXRMZW5ndGgoKTtcbiAgICAgICAgd2hpbGUgKCsrcm93IDwgbWF4Um93KSB7XG4gICAgICAgICAgICBsaW5lID0gc2Vzc2lvbi5nZXRMaW5lKHJvdyk7XG4gICAgICAgICAgICB2YXIgaW5kZW50ID0gbGluZS5zZWFyY2goL1xcUy8pO1xuICAgICAgICAgICAgaWYgKGluZGVudCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAgKHN0YXJ0SW5kZW50ID4gaW5kZW50KVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgdmFyIHN1YlJhbmdlID0gdGhpcy5nZXRGb2xkV2lkZ2V0UmFuZ2Uoc2Vzc2lvbiwgXCJhbGxcIiwgcm93KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHN1YlJhbmdlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1YlJhbmdlLnN0YXJ0LnJvdyA8PSBzdGFydFJvdykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1YlJhbmdlLmlzTXVsdGlMaW5lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gc3ViUmFuZ2UuZW5kLnJvdztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0SW5kZW50ID09IGluZGVudCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmRSb3cgPSByb3c7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgUmFuZ2Uoc3RhcnRSb3csIHN0YXJ0Q29sdW1uLCBlbmRSb3csIHNlc3Npb24uZ2V0TGluZShlbmRSb3cpLmxlbmd0aCk7XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBnZXRzIGNvbW1lbnQgcmVnaW9uIGJsb2NrIHdpdGggZW5kIHJlZ2lvbiBhc3N1bWVkIHRvIGJlIHN0YXJ0IG9mIGNvbW1lbnQgaW4gYW55IGNzdHlsZSBtb2RlIG9yIFNRTCBtb2RlICgtLSkgd2hpY2ggaW5oZXJpdHMgZnJvbSB0aGlzLlxuICAgICAqIFRoZXJlIG1heSBvcHRpb25hbGx5IGJlIGEgcG91bmQgc3ltYm9sIGJlZm9yZSB0aGUgcmVnaW9uL2VuZHJlZ2lvbiBzdGF0ZW1lbnRcbiAgICAgKi9cbiAgICB0aGlzLmdldENvbW1lbnRSZWdpb25CbG9jayA9IGZ1bmN0aW9uKHNlc3Npb24sIGxpbmUsIHJvdykge1xuICAgICAgICB2YXIgc3RhcnRDb2x1bW4gPSBsaW5lLnNlYXJjaCgvXFxzKiQvKTtcbiAgICAgICAgdmFyIG1heFJvdyA9IHNlc3Npb24uZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHZhciBzdGFydFJvdyA9IHJvdztcbiAgICAgICAgXG4gICAgICAgIHZhciByZSA9IC9eXFxzKig/OlxcL1xcKnxcXC9cXC98LS0pIz8oZW5kKT9yZWdpb25cXGIvO1xuICAgICAgICB2YXIgZGVwdGggPSAxO1xuICAgICAgICB3aGlsZSAoKytyb3cgPCBtYXhSb3cpIHtcbiAgICAgICAgICAgIGxpbmUgPSBzZXNzaW9uLmdldExpbmUocm93KTtcbiAgICAgICAgICAgIHZhciBtID0gcmUuZXhlYyhsaW5lKTtcbiAgICAgICAgICAgIGlmICghbSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAobVsxXSkgZGVwdGgtLTtcbiAgICAgICAgICAgIGVsc2UgZGVwdGgrKztcblxuICAgICAgICAgICAgaWYgKCFkZXB0aCkgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZW5kUm93ID0gcm93O1xuICAgICAgICBpZiAoZW5kUm93ID4gc3RhcnRSb3cpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2Uoc3RhcnRSb3csIHN0YXJ0Q29sdW1uLCBlbmRSb3csIGxpbmUubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pLmNhbGwoRm9sZE1vZGUucHJvdG90eXBlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/folding/cstyle.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/folding/fold_mode.js":
/*!*************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/folding/fold_mode.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar Range = (__webpack_require__(/*! ../../range */ \"./node_modules/ace-code/src/range.js\").Range);\n\nvar FoldMode = exports.FoldMode = function() {};\n\n(function() {\n\n    this.foldingStartMarker = null;\n    this.foldingStopMarker = null;\n\n    // must return \"\" if there's no fold, to enable caching\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        if (this.foldingStartMarker.test(line))\n            return \"start\";\n        if (foldStyle == \"markbeginend\"\n                && this.foldingStopMarker\n                && this.foldingStopMarker.test(line))\n            return \"end\";\n        return \"\";\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        return null;\n    };\n\n    this.indentationBlock = function(session, row, column) {\n        var re = /\\S/;\n        var line = session.getLine(row);\n        var startLevel = line.search(re);\n        if (startLevel == -1)\n            return;\n\n        var startColumn = column || line.length;\n        var maxRow = session.getLength();\n        var startRow = row;\n        var endRow = row;\n\n        while (++row < maxRow) {\n            var level = session.getLine(row).search(re);\n\n            if (level == -1)\n                continue;\n\n            if (level <= startLevel) {\n                var token = session.getTokenAt(row, 0);\n                if (!token || token.type !== \"string\")\n                    break;\n            }\n\n            endRow = row;\n        }\n\n        if (endRow > startRow) {\n            var endColumn = session.getLine(endRow).length;\n            return new Range(startRow, startColumn, endRow, endColumn);\n        }\n    };\n\n    this.openingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var start = {row: row, column: column + 1};\n        var end = session.$findClosingBracket(bracket, start, typeRe);\n        if (!end)\n            return;\n\n        var fw = session.foldWidgets[end.row];\n        if (fw == null)\n            fw = session.getFoldWidget(end.row);\n\n        if (fw == \"start\" && end.row > start.row) {\n            end.row --;\n            end.column = session.getLine(end.row).length;\n        }\n        return Range.fromPoints(start, end);\n    };\n\n    this.closingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var end = {row: row, column: column};\n        var start = session.$findOpeningBracket(bracket, end);\n\n        if (!start)\n            return;\n\n        start.column++;\n        end.column--;\n\n        return  Range.fromPoints(start, end);\n    };\n}).call(FoldMode.prototype);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvZm9sZGluZy9mb2xkX21vZGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsWUFBWSxzRkFBNEI7O0FBRXhDLGVBQWUsZ0JBQWdCOztBQUUvQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUI7QUFDbkI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW9kZS9mb2xkaW5nL2ZvbGRfbW9kZS5qcz9lYjhiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgUmFuZ2UgPSByZXF1aXJlKFwiLi4vLi4vcmFuZ2VcIikuUmFuZ2U7XG5cbnZhciBGb2xkTW9kZSA9IGV4cG9ydHMuRm9sZE1vZGUgPSBmdW5jdGlvbigpIHt9O1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgICB0aGlzLmZvbGRpbmdTdGFydE1hcmtlciA9IG51bGw7XG4gICAgdGhpcy5mb2xkaW5nU3RvcE1hcmtlciA9IG51bGw7XG5cbiAgICAvLyBtdXN0IHJldHVybiBcIlwiIGlmIHRoZXJlJ3Mgbm8gZm9sZCwgdG8gZW5hYmxlIGNhY2hpbmdcbiAgICB0aGlzLmdldEZvbGRXaWRnZXQgPSBmdW5jdGlvbihzZXNzaW9uLCBmb2xkU3R5bGUsIHJvdykge1xuICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShyb3cpO1xuICAgICAgICBpZiAodGhpcy5mb2xkaW5nU3RhcnRNYXJrZXIudGVzdChsaW5lKSlcbiAgICAgICAgICAgIHJldHVybiBcInN0YXJ0XCI7XG4gICAgICAgIGlmIChmb2xkU3R5bGUgPT0gXCJtYXJrYmVnaW5lbmRcIlxuICAgICAgICAgICAgICAgICYmIHRoaXMuZm9sZGluZ1N0b3BNYXJrZXJcbiAgICAgICAgICAgICAgICAmJiB0aGlzLmZvbGRpbmdTdG9wTWFya2VyLnRlc3QobGluZSkpXG4gICAgICAgICAgICByZXR1cm4gXCJlbmRcIjtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0Rm9sZFdpZGdldFJhbmdlID0gZnVuY3Rpb24oc2Vzc2lvbiwgZm9sZFN0eWxlLCByb3cpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIHRoaXMuaW5kZW50YXRpb25CbG9jayA9IGZ1bmN0aW9uKHNlc3Npb24sIHJvdywgY29sdW1uKSB7XG4gICAgICAgIHZhciByZSA9IC9cXFMvO1xuICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShyb3cpO1xuICAgICAgICB2YXIgc3RhcnRMZXZlbCA9IGxpbmUuc2VhcmNoKHJlKTtcbiAgICAgICAgaWYgKHN0YXJ0TGV2ZWwgPT0gLTEpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIHN0YXJ0Q29sdW1uID0gY29sdW1uIHx8IGxpbmUubGVuZ3RoO1xuICAgICAgICB2YXIgbWF4Um93ID0gc2Vzc2lvbi5nZXRMZW5ndGgoKTtcbiAgICAgICAgdmFyIHN0YXJ0Um93ID0gcm93O1xuICAgICAgICB2YXIgZW5kUm93ID0gcm93O1xuXG4gICAgICAgIHdoaWxlICgrK3JvdyA8IG1heFJvdykge1xuICAgICAgICAgICAgdmFyIGxldmVsID0gc2Vzc2lvbi5nZXRMaW5lKHJvdykuc2VhcmNoKHJlKTtcblxuICAgICAgICAgICAgaWYgKGxldmVsID09IC0xKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAobGV2ZWwgPD0gc3RhcnRMZXZlbCkge1xuICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHNlc3Npb24uZ2V0VG9rZW5BdChyb3csIDApO1xuICAgICAgICAgICAgICAgIGlmICghdG9rZW4gfHwgdG9rZW4udHlwZSAhPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVuZFJvdyA9IHJvdztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmRSb3cgPiBzdGFydFJvdykge1xuICAgICAgICAgICAgdmFyIGVuZENvbHVtbiA9IHNlc3Npb24uZ2V0TGluZShlbmRSb3cpLmxlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2Uoc3RhcnRSb3csIHN0YXJ0Q29sdW1uLCBlbmRSb3csIGVuZENvbHVtbik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5vcGVuaW5nQnJhY2tldEJsb2NrID0gZnVuY3Rpb24oc2Vzc2lvbiwgYnJhY2tldCwgcm93LCBjb2x1bW4sIHR5cGVSZSkge1xuICAgICAgICB2YXIgc3RhcnQgPSB7cm93OiByb3csIGNvbHVtbjogY29sdW1uICsgMX07XG4gICAgICAgIHZhciBlbmQgPSBzZXNzaW9uLiRmaW5kQ2xvc2luZ0JyYWNrZXQoYnJhY2tldCwgc3RhcnQsIHR5cGVSZSk7XG4gICAgICAgIGlmICghZW5kKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBmdyA9IHNlc3Npb24uZm9sZFdpZGdldHNbZW5kLnJvd107XG4gICAgICAgIGlmIChmdyA9PSBudWxsKVxuICAgICAgICAgICAgZncgPSBzZXNzaW9uLmdldEZvbGRXaWRnZXQoZW5kLnJvdyk7XG5cbiAgICAgICAgaWYgKGZ3ID09IFwic3RhcnRcIiAmJiBlbmQucm93ID4gc3RhcnQucm93KSB7XG4gICAgICAgICAgICBlbmQucm93IC0tO1xuICAgICAgICAgICAgZW5kLmNvbHVtbiA9IHNlc3Npb24uZ2V0TGluZShlbmQucm93KS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHMoc3RhcnQsIGVuZCk7XG4gICAgfTtcblxuICAgIHRoaXMuY2xvc2luZ0JyYWNrZXRCbG9jayA9IGZ1bmN0aW9uKHNlc3Npb24sIGJyYWNrZXQsIHJvdywgY29sdW1uLCB0eXBlUmUpIHtcbiAgICAgICAgdmFyIGVuZCA9IHtyb3c6IHJvdywgY29sdW1uOiBjb2x1bW59O1xuICAgICAgICB2YXIgc3RhcnQgPSBzZXNzaW9uLiRmaW5kT3BlbmluZ0JyYWNrZXQoYnJhY2tldCwgZW5kKTtcblxuICAgICAgICBpZiAoIXN0YXJ0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHN0YXJ0LmNvbHVtbisrO1xuICAgICAgICBlbmQuY29sdW1uLS07XG5cbiAgICAgICAgcmV0dXJuICBSYW5nZS5mcm9tUG9pbnRzKHN0YXJ0LCBlbmQpO1xuICAgIH07XG59KS5jYWxsKEZvbGRNb2RlLnByb3RvdHlwZSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/folding/fold_mode.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/folding/pythonic.js":
/*!************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/folding/pythonic.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ../../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar BaseFoldMode = (__webpack_require__(/*! ./fold_mode */ \"./node_modules/ace-code/src/mode/folding/fold_mode.js\").FoldMode);\n\nvar FoldMode = exports.FoldMode = function(markers) {\n    this.foldingStartMarker = new RegExp(\"([\\\\[{])(?:\\\\s*)$|(\" + markers + \")(?:\\\\s*)(?:#.*)?$\");\n};\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        var match = line.match(this.foldingStartMarker);\n        if (match) {\n            if (match[1])\n                return this.openingBracketBlock(session, match[1], row, match.index);\n            if (match[2])\n                return this.indentationBlock(session, row, match.index + match[2].length);\n            return this.indentationBlock(session, row);\n        }\n    };\n\n}).call(FoldMode.prototype);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvZm9sZGluZy9weXRob25pYy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixVQUFVLG1CQUFPLENBQUMsNkRBQWU7QUFDakMsbUJBQW1CLDBHQUErQjs7QUFFbEQsZUFBZSxnQkFBZ0I7QUFDL0IsZ0RBQWdEO0FBQ2hEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW9kZS9mb2xkaW5nL3B5dGhvbmljLmpzPzAzNDMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBvb3AgPSByZXF1aXJlKFwiLi4vLi4vbGliL29vcFwiKTtcbnZhciBCYXNlRm9sZE1vZGUgPSByZXF1aXJlKFwiLi9mb2xkX21vZGVcIikuRm9sZE1vZGU7XG5cbnZhciBGb2xkTW9kZSA9IGV4cG9ydHMuRm9sZE1vZGUgPSBmdW5jdGlvbihtYXJrZXJzKSB7XG4gICAgdGhpcy5mb2xkaW5nU3RhcnRNYXJrZXIgPSBuZXcgUmVnRXhwKFwiKFtcXFxcW3tdKSg/OlxcXFxzKikkfChcIiArIG1hcmtlcnMgKyBcIikoPzpcXFxccyopKD86Iy4qKT8kXCIpO1xufTtcbm9vcC5pbmhlcml0cyhGb2xkTW9kZSwgQmFzZUZvbGRNb2RlKTtcblxuKGZ1bmN0aW9uKCkge1xuXG4gICAgdGhpcy5nZXRGb2xkV2lkZ2V0UmFuZ2UgPSBmdW5jdGlvbihzZXNzaW9uLCBmb2xkU3R5bGUsIHJvdykge1xuICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShyb3cpO1xuICAgICAgICB2YXIgbWF0Y2ggPSBsaW5lLm1hdGNoKHRoaXMuZm9sZGluZ1N0YXJ0TWFya2VyKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBpZiAobWF0Y2hbMV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3BlbmluZ0JyYWNrZXRCbG9jayhzZXNzaW9uLCBtYXRjaFsxXSwgcm93LCBtYXRjaC5pbmRleCk7XG4gICAgICAgICAgICBpZiAobWF0Y2hbMl0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZW50YXRpb25CbG9jayhzZXNzaW9uLCByb3csIG1hdGNoLmluZGV4ICsgbWF0Y2hbMl0ubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGVudGF0aW9uQmxvY2soc2Vzc2lvbiwgcm93KTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pLmNhbGwoRm9sZE1vZGUucHJvdG90eXBlKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/folding/pythonic.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/matching_brace_outdent.js":
/*!******************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/matching_brace_outdent.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\n\nvar MatchingBraceOutdent = function() {};\n\n(function() {\n\n    this.checkOutdent = function(line, input) {\n        if (! /^\\s+$/.test(line))\n            return false;\n\n        return /^\\s*\\}/.test(input);\n    };\n\n    this.autoOutdent = function(doc, row) {\n        var line = doc.getLine(row);\n        var match = line.match(/^(\\s*\\})/);\n\n        if (!match) return 0;\n\n        var column = match[1].length;\n        var openBracePos = doc.findMatchingBracket({row: row, column: column});\n\n        if (!openBracePos || openBracePos.row == row) return 0;\n\n        var indent = this.$getIndent(doc.getLine(openBracePos.row));\n        doc.replace(new Range(row, 0, row, column-1), indent);\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n}).call(MatchingBraceOutdent.prototype);\n\nexports.MatchingBraceOutdent = MatchingBraceOutdent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvbWF0Y2hpbmdfYnJhY2Vfb3V0ZGVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixZQUFZLG1GQUF5Qjs7QUFFckM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHNCQUFzQjtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0EsdUNBQXVDOztBQUV2Qzs7QUFFQTtBQUNBLG9EQUFvRCx5QkFBeUI7O0FBRTdFOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRCw0QkFBNEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9tb2RlL21hdGNoaW5nX2JyYWNlX291dGRlbnQuanM/MDhlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIFJhbmdlID0gcmVxdWlyZShcIi4uL3JhbmdlXCIpLlJhbmdlO1xuXG52YXIgTWF0Y2hpbmdCcmFjZU91dGRlbnQgPSBmdW5jdGlvbigpIHt9O1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgICB0aGlzLmNoZWNrT3V0ZGVudCA9IGZ1bmN0aW9uKGxpbmUsIGlucHV0KSB7XG4gICAgICAgIGlmICghIC9eXFxzKyQvLnRlc3QobGluZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJuIC9eXFxzKlxcfS8udGVzdChpbnB1dCk7XG4gICAgfTtcblxuICAgIHRoaXMuYXV0b091dGRlbnQgPSBmdW5jdGlvbihkb2MsIHJvdykge1xuICAgICAgICB2YXIgbGluZSA9IGRvYy5nZXRMaW5lKHJvdyk7XG4gICAgICAgIHZhciBtYXRjaCA9IGxpbmUubWF0Y2goL14oXFxzKlxcfSkvKTtcblxuICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm4gMDtcblxuICAgICAgICB2YXIgY29sdW1uID0gbWF0Y2hbMV0ubGVuZ3RoO1xuICAgICAgICB2YXIgb3BlbkJyYWNlUG9zID0gZG9jLmZpbmRNYXRjaGluZ0JyYWNrZXQoe3Jvdzogcm93LCBjb2x1bW46IGNvbHVtbn0pO1xuXG4gICAgICAgIGlmICghb3BlbkJyYWNlUG9zIHx8IG9wZW5CcmFjZVBvcy5yb3cgPT0gcm93KSByZXR1cm4gMDtcblxuICAgICAgICB2YXIgaW5kZW50ID0gdGhpcy4kZ2V0SW5kZW50KGRvYy5nZXRMaW5lKG9wZW5CcmFjZVBvcy5yb3cpKTtcbiAgICAgICAgZG9jLnJlcGxhY2UobmV3IFJhbmdlKHJvdywgMCwgcm93LCBjb2x1bW4tMSksIGluZGVudCk7XG4gICAgfTtcblxuICAgIHRoaXMuJGdldEluZGVudCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgcmV0dXJuIGxpbmUubWF0Y2goL15cXHMqLylbMF07XG4gICAgfTtcblxufSkuY2FsbChNYXRjaGluZ0JyYWNlT3V0ZGVudC5wcm90b3R5cGUpO1xuXG5leHBvcnRzLk1hdGNoaW5nQnJhY2VPdXRkZW50ID0gTWF0Y2hpbmdCcmFjZU91dGRlbnQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/matching_brace_outdent.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/python.js":
/*!**************************************************!*\
  !*** ./node_modules/ace-code/src/mode/python.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar TextMode = (__webpack_require__(/*! ./text */ \"./node_modules/ace-code/src/mode/text.js\").Mode);\nvar PythonHighlightRules = (__webpack_require__(/*! ./python_highlight_rules */ \"./node_modules/ace-code/src/mode/python_highlight_rules.js\").PythonHighlightRules);\nvar PythonFoldMode = (__webpack_require__(/*! ./folding/pythonic */ \"./node_modules/ace-code/src/mode/folding/pythonic.js\").FoldMode);\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\n\nvar Mode = function() {\n    this.HighlightRules = PythonHighlightRules;\n    this.foldingRules = new PythonFoldMode(\"\\\\:\");\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.lineCommentStart = \"#\";\n    this.$pairQuotesAfter = {\n        \"'\": /[ruf]/i,\n        '\"': /[ruf]/i\n    };\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        var tokenizedLine = this.getTokenizer().getLineTokens(line, state);\n        var tokens = tokenizedLine.tokens;\n\n        if (tokens.length && tokens[tokens.length-1].type == \"comment\") {\n            return indent;\n        }\n\n        if (state == \"start\") {\n            var match = line.match(/^.*[\\{\\(\\[:]\\s*$/);\n            if (match) {\n                indent += tab;\n            }\n        }\n\n        return indent;\n    };\n\n    var outdents = {\n        \"pass\": 1,\n        \"return\": 1,\n        \"raise\": 1,\n        \"break\": 1,\n        \"continue\": 1\n    };\n    \n    this.checkOutdent = function(state, line, input) {\n        if (input !== \"\\r\\n\" && input !== \"\\r\" && input !== \"\\n\")\n            return false;\n\n        var tokens = this.getTokenizer().getLineTokens(line.trim(), state).tokens;\n        \n        if (!tokens)\n            return false;\n        \n        // ignore trailing comments\n        do {\n            var last = tokens.pop();\n        } while (last && (last.type == \"comment\" || (last.type == \"text\" && last.value.match(/^\\s+$/))));\n        \n        if (!last)\n            return false;\n        \n        return (last.type == \"keyword\" && outdents[last.value]);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        // outdenting in python is slightly different because it always applies\n        // to the next line and only of a new line is inserted\n        \n        row += 1;\n        var indent = this.$getIndent(doc.getLine(row));\n        var tab = doc.getTabString();\n        if (indent.slice(-tab.length) == tab)\n            doc.remove(new Range(row, indent.length-tab.length, row, indent.length));\n    };\n\n    this.$id = \"ace/mode/python\";\n    this.snippetFileId = \"ace/snippets/python\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvcHl0aG9uLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQywwREFBWTtBQUM5QixlQUFlLG9GQUFzQjtBQUNyQywyQkFBMkIsd0lBQXdEO0FBQ25GLHFCQUFxQixnSEFBc0M7QUFDM0QsWUFBWSxtRkFBeUI7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELFlBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9tb2RlL3B5dGhvbi5qcz9kYTFiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgb29wID0gcmVxdWlyZShcIi4uL2xpYi9vb3BcIik7XG52YXIgVGV4dE1vZGUgPSByZXF1aXJlKFwiLi90ZXh0XCIpLk1vZGU7XG52YXIgUHl0aG9uSGlnaGxpZ2h0UnVsZXMgPSByZXF1aXJlKFwiLi9weXRob25faGlnaGxpZ2h0X3J1bGVzXCIpLlB5dGhvbkhpZ2hsaWdodFJ1bGVzO1xudmFyIFB5dGhvbkZvbGRNb2RlID0gcmVxdWlyZShcIi4vZm9sZGluZy9weXRob25pY1wiKS5Gb2xkTW9kZTtcbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuLi9yYW5nZVwiKS5SYW5nZTtcblxudmFyIE1vZGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLkhpZ2hsaWdodFJ1bGVzID0gUHl0aG9uSGlnaGxpZ2h0UnVsZXM7XG4gICAgdGhpcy5mb2xkaW5nUnVsZXMgPSBuZXcgUHl0aG9uRm9sZE1vZGUoXCJcXFxcOlwiKTtcbiAgICB0aGlzLiRiZWhhdmlvdXIgPSB0aGlzLiRkZWZhdWx0QmVoYXZpb3VyO1xufTtcbm9vcC5pbmhlcml0cyhNb2RlLCBUZXh0TW9kZSk7XG5cbihmdW5jdGlvbigpIHtcblxuICAgIHRoaXMubGluZUNvbW1lbnRTdGFydCA9IFwiI1wiO1xuICAgIHRoaXMuJHBhaXJRdW90ZXNBZnRlciA9IHtcbiAgICAgICAgXCInXCI6IC9bcnVmXS9pLFxuICAgICAgICAnXCInOiAvW3J1Zl0vaVxuICAgIH07XG5cbiAgICB0aGlzLmdldE5leHRMaW5lSW5kZW50ID0gZnVuY3Rpb24oc3RhdGUsIGxpbmUsIHRhYikge1xuICAgICAgICB2YXIgaW5kZW50ID0gdGhpcy4kZ2V0SW5kZW50KGxpbmUpO1xuXG4gICAgICAgIHZhciB0b2tlbml6ZWRMaW5lID0gdGhpcy5nZXRUb2tlbml6ZXIoKS5nZXRMaW5lVG9rZW5zKGxpbmUsIHN0YXRlKTtcbiAgICAgICAgdmFyIHRva2VucyA9IHRva2VuaXplZExpbmUudG9rZW5zO1xuXG4gICAgICAgIGlmICh0b2tlbnMubGVuZ3RoICYmIHRva2Vuc1t0b2tlbnMubGVuZ3RoLTFdLnR5cGUgPT0gXCJjb21tZW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpbmRlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RhdGUgPT0gXCJzdGFydFwiKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBsaW5lLm1hdGNoKC9eLipbXFx7XFwoXFxbOl1cXHMqJC8pO1xuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgaW5kZW50ICs9IHRhYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbmRlbnQ7XG4gICAgfTtcblxuICAgIHZhciBvdXRkZW50cyA9IHtcbiAgICAgICAgXCJwYXNzXCI6IDEsXG4gICAgICAgIFwicmV0dXJuXCI6IDEsXG4gICAgICAgIFwicmFpc2VcIjogMSxcbiAgICAgICAgXCJicmVha1wiOiAxLFxuICAgICAgICBcImNvbnRpbnVlXCI6IDFcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuY2hlY2tPdXRkZW50ID0gZnVuY3Rpb24oc3RhdGUsIGxpbmUsIGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCAhPT0gXCJcXHJcXG5cIiAmJiBpbnB1dCAhPT0gXCJcXHJcIiAmJiBpbnB1dCAhPT0gXCJcXG5cIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB2YXIgdG9rZW5zID0gdGhpcy5nZXRUb2tlbml6ZXIoKS5nZXRMaW5lVG9rZW5zKGxpbmUudHJpbSgpLCBzdGF0ZSkudG9rZW5zO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0b2tlbnMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICAvLyBpZ25vcmUgdHJhaWxpbmcgY29tbWVudHNcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdmFyIGxhc3QgPSB0b2tlbnMucG9wKCk7XG4gICAgICAgIH0gd2hpbGUgKGxhc3QgJiYgKGxhc3QudHlwZSA9PSBcImNvbW1lbnRcIiB8fCAobGFzdC50eXBlID09IFwidGV4dFwiICYmIGxhc3QudmFsdWUubWF0Y2goL15cXHMrJC8pKSkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFsYXN0KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChsYXN0LnR5cGUgPT0gXCJrZXl3b3JkXCIgJiYgb3V0ZGVudHNbbGFzdC52YWx1ZV0pO1xuICAgIH07XG5cbiAgICB0aGlzLmF1dG9PdXRkZW50ID0gZnVuY3Rpb24oc3RhdGUsIGRvYywgcm93KSB7XG4gICAgICAgIC8vIG91dGRlbnRpbmcgaW4gcHl0aG9uIGlzIHNsaWdodGx5IGRpZmZlcmVudCBiZWNhdXNlIGl0IGFsd2F5cyBhcHBsaWVzXG4gICAgICAgIC8vIHRvIHRoZSBuZXh0IGxpbmUgYW5kIG9ubHkgb2YgYSBuZXcgbGluZSBpcyBpbnNlcnRlZFxuICAgICAgICBcbiAgICAgICAgcm93ICs9IDE7XG4gICAgICAgIHZhciBpbmRlbnQgPSB0aGlzLiRnZXRJbmRlbnQoZG9jLmdldExpbmUocm93KSk7XG4gICAgICAgIHZhciB0YWIgPSBkb2MuZ2V0VGFiU3RyaW5nKCk7XG4gICAgICAgIGlmIChpbmRlbnQuc2xpY2UoLXRhYi5sZW5ndGgpID09IHRhYilcbiAgICAgICAgICAgIGRvYy5yZW1vdmUobmV3IFJhbmdlKHJvdywgaW5kZW50Lmxlbmd0aC10YWIubGVuZ3RoLCByb3csIGluZGVudC5sZW5ndGgpKTtcbiAgICB9O1xuXG4gICAgdGhpcy4kaWQgPSBcImFjZS9tb2RlL3B5dGhvblwiO1xuICAgIHRoaXMuc25pcHBldEZpbGVJZCA9IFwiYWNlL3NuaXBwZXRzL3B5dGhvblwiO1xufSkuY2FsbChNb2RlLnByb3RvdHlwZSk7XG5cbmV4cG9ydHMuTW9kZSA9IE1vZGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/python.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/python_highlight_rules.js":
/*!******************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/python_highlight_rules.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("/*\n * TODO: python delimiters\n */\n\n\n\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar TextHighlightRules = (__webpack_require__(/*! ./text_highlight_rules */ \"./node_modules/ace-code/src/mode/text_highlight_rules.js\").TextHighlightRules);\n\nvar PythonHighlightRules = function() {\n\n    var keywords = (\n        \"and|as|assert|break|class|continue|def|del|elif|else|except|exec|\" +\n        \"finally|for|from|global|if|import|in|is|lambda|not|or|pass|print|\" +\n        \"raise|return|try|while|with|yield|async|await|nonlocal\"\n    );\n\n    var builtinConstants = (\n        \"True|False|None|NotImplemented|Ellipsis|__debug__\"\n    );\n\n    var builtinFunctions = (\n        \"abs|divmod|input|open|staticmethod|all|enumerate|int|ord|str|any|\" +\n        \"eval|isinstance|pow|sum|basestring|execfile|issubclass|print|super|\" +\n        \"binfile|bin|iter|property|tuple|bool|filter|len|range|type|bytearray|\" +\n        \"float|list|raw_input|unichr|callable|format|locals|reduce|unicode|\" +\n        \"chr|frozenset|long|reload|vars|classmethod|getattr|map|repr|xrange|\" +\n        \"cmp|globals|max|reversed|zip|compile|hasattr|memoryview|round|\" +\n        \"__import__|complex|hash|min|apply|delattr|help|next|setattr|set|\" +\n        \"buffer|dict|hex|object|slice|coerce|dir|id|oct|sorted|intern|\" +\n        \"ascii|breakpoint|bytes\"\n    );\n\n    //var futureReserved = \"\";\n    var keywordMapper = this.createKeywordMapper({\n        \"invalid.deprecated\": \"debugger\",\n        \"support.function\": builtinFunctions,\n        \"variable.language\": \"self|cls\",\n        \"constant.language\": builtinConstants,\n        \"keyword\": keywords\n    }, \"identifier\");\n\n    var strPre = \"[uU]?\";\n    var strRawPre = \"[rR]\";\n    var strFormatPre = \"[fF]\";\n    var strRawFormatPre = \"(?:[rR][fF]|[fF][rR])\";\n    var decimalInteger = \"(?:(?:[1-9]\\\\d*)|(?:0))\";\n    var octInteger = \"(?:0[oO]?[0-7]+)\";\n    var hexInteger = \"(?:0[xX][\\\\dA-Fa-f]+)\";\n    var binInteger = \"(?:0[bB][01]+)\";\n    var integer = \"(?:\" + decimalInteger + \"|\" + octInteger + \"|\" + hexInteger + \"|\" + binInteger + \")\";\n\n    var exponent = \"(?:[eE][+-]?\\\\d+)\";\n    var fraction = \"(?:\\\\.\\\\d+)\";\n    var intPart = \"(?:\\\\d+)\";\n    var pointFloat = \"(?:(?:\" + intPart + \"?\" + fraction + \")|(?:\" + intPart + \"\\\\.))\";\n    var exponentFloat = \"(?:(?:\" + pointFloat + \"|\" + intPart + \")\" + exponent + \")\";\n    var floatNumber = \"(?:\" + exponentFloat + \"|\" + pointFloat + \")\";\n\n    var stringEscape = \"\\\\\\\\(x[0-9A-Fa-f]{2}|[0-7]{3}|[\\\\\\\\abfnrtv'\\\"]|U[0-9A-Fa-f]{8}|u[0-9A-Fa-f]{4})\";\n\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment\",\n            regex : \"#.*$\"\n        }, {\n            token : \"string\",           // multi line \"\"\" string start\n            regex : strPre + '\"{3}',\n            next : \"qqstring3\"\n        }, {\n            token : \"string\",           // \" string\n            regex : strPre + '\"(?=.)',\n            next : \"qqstring\"\n        }, {\n            token : \"string\",           // multi line ''' string start\n            regex : strPre + \"'{3}\",\n            next : \"qstring3\"\n        }, {\n            token : \"string\",           // ' string\n            regex : strPre + \"'(?=.)\",\n            next : \"qstring\"\n        }, {\n            token: \"string\",\n            regex: strRawPre + '\"{3}',\n            next: \"rawqqstring3\"\n        }, {\n            token: \"string\", \n            regex: strRawPre + '\"(?=.)',\n            next: \"rawqqstring\"\n        }, {\n            token: \"string\",\n            regex: strRawPre + \"'{3}\",\n            next: \"rawqstring3\"\n        }, {\n            token: \"string\",\n            regex: strRawPre + \"'(?=.)\",\n            next: \"rawqstring\"\n        }, {\n            token: \"string\",\n            regex: strFormatPre + '\"{3}',\n            next: \"fqqstring3\"\n        }, {\n            token: \"string\",\n            regex: strFormatPre + '\"(?=.)',\n            next: \"fqqstring\"\n        }, {\n            token: \"string\",\n            regex: strFormatPre + \"'{3}\",\n            next: \"fqstring3\"\n        }, {\n            token: \"string\",\n            regex: strFormatPre + \"'(?=.)\",\n            next: \"fqstring\"\n        },{\n            token: \"string\",\n            regex: strRawFormatPre + '\"{3}',\n            next: \"rfqqstring3\"\n        }, {\n            token: \"string\",\n            regex: strRawFormatPre + '\"(?=.)',\n            next: \"rfqqstring\"\n        }, {\n            token: \"string\",\n            regex: strRawFormatPre + \"'{3}\",\n            next: \"rfqstring3\"\n        }, {\n            token: \"string\",\n            regex: strRawFormatPre + \"'(?=.)\",\n            next: \"rfqstring\"\n        }, {\n            token: \"keyword.operator\",\n            regex: \"\\\\+|\\\\-|\\\\*|\\\\*\\\\*|\\\\/|\\\\/\\\\/|%|@|<<|>>|&|\\\\||\\\\^|~|<|>|<=|=>|==|!=|<>|=\"\n        }, {\n            token: \"punctuation\",\n            regex: \",|:|;|\\\\->|\\\\+=|\\\\-=|\\\\*=|\\\\/=|\\\\/\\\\/=|%=|@=|&=|\\\\|=|^=|>>=|<<=|\\\\*\\\\*=\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"[\\\\[\\\\(\\\\{]\"\n        }, {\n            token: \"paren.rparen\",\n            regex: \"[\\\\]\\\\)\\\\}]\"\n        }, {\n            token: [\"keyword\", \"text\", \"entity.name.function\"],\n            regex: \"(def|class)(\\\\s+)([\\\\u00BF-\\\\u1FFF\\\\u2C00-\\\\uD7FF\\\\w]+)\"\n         }, {\n            token: \"text\",\n            regex: \"\\\\s+\"\n        }, {\n            include: \"constants\"\n        }],\n        \"qqstring3\": [{\n            token: \"constant.language.escape\",\n            regex: stringEscape\n        }, {\n            token: \"string\", // multi line \"\"\" string end\n            regex: '\"{3}',\n            next: \"start\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"qstring3\": [{\n            token: \"constant.language.escape\",\n            regex: stringEscape\n        }, {\n            token: \"string\",  // multi line ''' string end\n            regex: \"'{3}\",\n            next: \"start\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"qqstring\": [{\n            token: \"constant.language.escape\",\n            regex: stringEscape\n        }, {\n            token: \"string\",\n            regex: \"\\\\\\\\$\",\n            next: \"qqstring\"\n        }, {\n            token: \"string\",\n            regex: '\"|$',\n            next: \"start\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"qstring\": [{\n            token: \"constant.language.escape\",\n            regex: stringEscape\n        }, {\n            token: \"string\",\n            regex: \"\\\\\\\\$\",\n            next: \"qstring\"\n        }, {\n            token: \"string\",\n            regex: \"'|$\",\n            next: \"start\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"rawqqstring3\": [{\n            token: \"string\", // multi line \"\"\" string end\n            regex: '\"{3}',\n            next: \"start\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"rawqstring3\": [{\n            token: \"string\",  // multi line ''' string end\n            regex: \"'{3}\",\n            next: \"start\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"rawqqstring\": [{\n            token: \"string\",\n            regex: \"\\\\\\\\$\",\n            next: \"rawqqstring\"\n        }, {\n            token: \"string\",\n            regex: '\"|$',\n            next: \"start\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"rawqstring\": [{\n            token: \"string\",\n            regex: \"\\\\\\\\$\",\n            next: \"rawqstring\"\n        }, {\n            token: \"string\",\n            regex: \"'|$\",\n            next: \"start\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"fqqstring3\": [{\n            token: \"constant.language.escape\",\n            regex: stringEscape\n        }, {\n            token: \"string\", // multi line \"\"\" string end\n            regex: '\"{3}',\n            next: \"start\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"fqstring3\": [{\n            token: \"constant.language.escape\",\n            regex: stringEscape\n        }, {\n            token: \"string\",  // multi line ''' string end\n            regex: \"'{3}\",\n            next: \"start\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"fqqstring\": [{\n            token: \"constant.language.escape\",\n            regex: stringEscape\n        }, {\n            token: \"string\",\n            regex: \"\\\\\\\\$\",\n            next: \"fqqstring\"\n        }, {\n            token: \"string\",\n            regex: '\"|$',\n            next: \"start\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"fqstring\": [{\n            token: \"constant.language.escape\",\n            regex: stringEscape\n        }, {\n            token: \"string\",\n            regex: \"'|$\",\n            next: \"start\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"rfqqstring3\": [{\n            token: \"string\", // multi line \"\"\" string end\n            regex: '\"{3}',\n            next: \"start\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"rfqstring3\": [{\n            token: \"string\",  // multi line ''' string end\n            regex: \"'{3}\",\n            next: \"start\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"rfqqstring\": [{\n            token: \"string\",\n            regex: \"\\\\\\\\$\",\n            next: \"rfqqstring\"\n        }, {\n            token: \"string\",\n            regex: '\"|$',\n            next: \"start\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"rfqstring\": [{\n            token: \"string\",\n            regex: \"'|$\",\n            next: \"start\"\n        }, {\n            token: \"paren.lparen\",\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }, {\n            defaultToken: \"string\"\n        }],\n        \"fqstringParRules\": [{//TODO: nested {}\n            token: \"paren.lparen\",\n            regex: \"[\\\\[\\\\(]\"\n        }, {\n            token: \"paren.rparen\",\n            regex: \"[\\\\]\\\\)]\"\n        }, {\n            token: \"string\",\n            regex: \"\\\\s+\"\n        }, {\n            token: \"string\",\n            regex: \"'[^']*'\"\n        }, {\n            token: \"string\",\n            regex: '\"[^\"]*\"'\n        }, {\n            token: \"function.support\",\n            regex: \"(!s|!r|!a)\"\n        }, {\n            include: \"constants\"\n        },{\n            token: 'paren.rparen',\n            regex: \"}\",\n            next: 'pop'\n        },{\n            token: 'paren.lparen',\n            regex: \"{\",\n            push: \"fqstringParRules\"\n        }],\n        \"constants\": [{\n            token: \"constant.numeric\", // imaginary\n            regex: \"(?:\" + floatNumber + \"|\\\\d+)[jJ]\\\\b\"\n        }, {\n            token: \"constant.numeric\", // float\n            regex: floatNumber\n        }, {\n            token: \"constant.numeric\", // long integer\n            regex: integer + \"[lL]\\\\b\"\n        }, {\n            token: \"constant.numeric\", // integer\n            regex: integer + \"\\\\b\"\n        }, {\n            token: [\"punctuation\", \"function.support\"],// method\n            regex: \"(\\\\.)([a-zA-Z_]+)\\\\b\"\n        }, {\n            token: keywordMapper,\n            regex: \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }]\n    };\n    this.normalizeRules();\n};\n\noop.inherits(PythonHighlightRules, TextHighlightRules);\n\nexports.PythonHighlightRules = PythonHighlightRules;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvcHl0aG9uX2hpZ2hsaWdodF9ydWxlcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRWIsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLHlCQUF5QixrSUFBb0Q7O0FBRTdFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMENBQTBDLEVBQUUsT0FBTyxFQUFFLCtCQUErQixFQUFFLGNBQWMsRUFBRTs7QUFFdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxnQ0FBZ0MsRUFBRTtBQUNsQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxnQ0FBZ0MsRUFBRTtBQUNsQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrQ0FBa0MsRUFBRTtBQUNwQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrQ0FBa0MsRUFBRTtBQUNwQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxxQ0FBcUMsRUFBRTtBQUN2QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxxQ0FBcUMsRUFBRTtBQUN2QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx3Q0FBd0MsRUFBRTtBQUMxQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx3Q0FBd0MsRUFBRTtBQUMxQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHlCQUF5QjtBQUN6QixTQUFTO0FBQ1Q7QUFDQSw4QkFBOEI7QUFDOUIsU0FBUztBQUNUO0FBQ0EsOEJBQThCO0FBQzlCLFNBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esc0JBQXNCLEVBQUU7QUFDeEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esc0JBQXNCLEVBQUU7QUFDeEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNCQUFzQixFQUFFO0FBQ3hCO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzQkFBc0IsRUFBRTtBQUN4QjtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHNCQUFzQixFQUFFO0FBQ3hCO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHNCQUFzQixFQUFFO0FBQ3hCO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHNCQUFzQixFQUFFO0FBQ3hCO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxzQkFBc0IsRUFBRTtBQUN4QjtBQUNBLFNBQVM7QUFDVDtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1QsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBOztBQUVBLDRCQUE0QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvcHl0aG9uX2hpZ2hsaWdodF9ydWxlcy5qcz8xYjhhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBUT0RPOiBweXRob24gZGVsaW1pdGVyc1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgb29wID0gcmVxdWlyZShcIi4uL2xpYi9vb3BcIik7XG52YXIgVGV4dEhpZ2hsaWdodFJ1bGVzID0gcmVxdWlyZShcIi4vdGV4dF9oaWdobGlnaHRfcnVsZXNcIikuVGV4dEhpZ2hsaWdodFJ1bGVzO1xuXG52YXIgUHl0aG9uSGlnaGxpZ2h0UnVsZXMgPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBrZXl3b3JkcyA9IChcbiAgICAgICAgXCJhbmR8YXN8YXNzZXJ0fGJyZWFrfGNsYXNzfGNvbnRpbnVlfGRlZnxkZWx8ZWxpZnxlbHNlfGV4Y2VwdHxleGVjfFwiICtcbiAgICAgICAgXCJmaW5hbGx5fGZvcnxmcm9tfGdsb2JhbHxpZnxpbXBvcnR8aW58aXN8bGFtYmRhfG5vdHxvcnxwYXNzfHByaW50fFwiICtcbiAgICAgICAgXCJyYWlzZXxyZXR1cm58dHJ5fHdoaWxlfHdpdGh8eWllbGR8YXN5bmN8YXdhaXR8bm9ubG9jYWxcIlxuICAgICk7XG5cbiAgICB2YXIgYnVpbHRpbkNvbnN0YW50cyA9IChcbiAgICAgICAgXCJUcnVlfEZhbHNlfE5vbmV8Tm90SW1wbGVtZW50ZWR8RWxsaXBzaXN8X19kZWJ1Z19fXCJcbiAgICApO1xuXG4gICAgdmFyIGJ1aWx0aW5GdW5jdGlvbnMgPSAoXG4gICAgICAgIFwiYWJzfGRpdm1vZHxpbnB1dHxvcGVufHN0YXRpY21ldGhvZHxhbGx8ZW51bWVyYXRlfGludHxvcmR8c3RyfGFueXxcIiArXG4gICAgICAgIFwiZXZhbHxpc2luc3RhbmNlfHBvd3xzdW18YmFzZXN0cmluZ3xleGVjZmlsZXxpc3N1YmNsYXNzfHByaW50fHN1cGVyfFwiICtcbiAgICAgICAgXCJiaW5maWxlfGJpbnxpdGVyfHByb3BlcnR5fHR1cGxlfGJvb2x8ZmlsdGVyfGxlbnxyYW5nZXx0eXBlfGJ5dGVhcnJheXxcIiArXG4gICAgICAgIFwiZmxvYXR8bGlzdHxyYXdfaW5wdXR8dW5pY2hyfGNhbGxhYmxlfGZvcm1hdHxsb2NhbHN8cmVkdWNlfHVuaWNvZGV8XCIgK1xuICAgICAgICBcImNocnxmcm96ZW5zZXR8bG9uZ3xyZWxvYWR8dmFyc3xjbGFzc21ldGhvZHxnZXRhdHRyfG1hcHxyZXByfHhyYW5nZXxcIiArXG4gICAgICAgIFwiY21wfGdsb2JhbHN8bWF4fHJldmVyc2VkfHppcHxjb21waWxlfGhhc2F0dHJ8bWVtb3J5dmlld3xyb3VuZHxcIiArXG4gICAgICAgIFwiX19pbXBvcnRfX3xjb21wbGV4fGhhc2h8bWlufGFwcGx5fGRlbGF0dHJ8aGVscHxuZXh0fHNldGF0dHJ8c2V0fFwiICtcbiAgICAgICAgXCJidWZmZXJ8ZGljdHxoZXh8b2JqZWN0fHNsaWNlfGNvZXJjZXxkaXJ8aWR8b2N0fHNvcnRlZHxpbnRlcm58XCIgK1xuICAgICAgICBcImFzY2lpfGJyZWFrcG9pbnR8Ynl0ZXNcIlxuICAgICk7XG5cbiAgICAvL3ZhciBmdXR1cmVSZXNlcnZlZCA9IFwiXCI7XG4gICAgdmFyIGtleXdvcmRNYXBwZXIgPSB0aGlzLmNyZWF0ZUtleXdvcmRNYXBwZXIoe1xuICAgICAgICBcImludmFsaWQuZGVwcmVjYXRlZFwiOiBcImRlYnVnZ2VyXCIsXG4gICAgICAgIFwic3VwcG9ydC5mdW5jdGlvblwiOiBidWlsdGluRnVuY3Rpb25zLFxuICAgICAgICBcInZhcmlhYmxlLmxhbmd1YWdlXCI6IFwic2VsZnxjbHNcIixcbiAgICAgICAgXCJjb25zdGFudC5sYW5ndWFnZVwiOiBidWlsdGluQ29uc3RhbnRzLFxuICAgICAgICBcImtleXdvcmRcIjoga2V5d29yZHNcbiAgICB9LCBcImlkZW50aWZpZXJcIik7XG5cbiAgICB2YXIgc3RyUHJlID0gXCJbdVVdP1wiO1xuICAgIHZhciBzdHJSYXdQcmUgPSBcIltyUl1cIjtcbiAgICB2YXIgc3RyRm9ybWF0UHJlID0gXCJbZkZdXCI7XG4gICAgdmFyIHN0clJhd0Zvcm1hdFByZSA9IFwiKD86W3JSXVtmRl18W2ZGXVtyUl0pXCI7XG4gICAgdmFyIGRlY2ltYWxJbnRlZ2VyID0gXCIoPzooPzpbMS05XVxcXFxkKil8KD86MCkpXCI7XG4gICAgdmFyIG9jdEludGVnZXIgPSBcIig/OjBbb09dP1swLTddKylcIjtcbiAgICB2YXIgaGV4SW50ZWdlciA9IFwiKD86MFt4WF1bXFxcXGRBLUZhLWZdKylcIjtcbiAgICB2YXIgYmluSW50ZWdlciA9IFwiKD86MFtiQl1bMDFdKylcIjtcbiAgICB2YXIgaW50ZWdlciA9IFwiKD86XCIgKyBkZWNpbWFsSW50ZWdlciArIFwifFwiICsgb2N0SW50ZWdlciArIFwifFwiICsgaGV4SW50ZWdlciArIFwifFwiICsgYmluSW50ZWdlciArIFwiKVwiO1xuXG4gICAgdmFyIGV4cG9uZW50ID0gXCIoPzpbZUVdWystXT9cXFxcZCspXCI7XG4gICAgdmFyIGZyYWN0aW9uID0gXCIoPzpcXFxcLlxcXFxkKylcIjtcbiAgICB2YXIgaW50UGFydCA9IFwiKD86XFxcXGQrKVwiO1xuICAgIHZhciBwb2ludEZsb2F0ID0gXCIoPzooPzpcIiArIGludFBhcnQgKyBcIj9cIiArIGZyYWN0aW9uICsgXCIpfCg/OlwiICsgaW50UGFydCArIFwiXFxcXC4pKVwiO1xuICAgIHZhciBleHBvbmVudEZsb2F0ID0gXCIoPzooPzpcIiArIHBvaW50RmxvYXQgKyBcInxcIiArIGludFBhcnQgKyBcIilcIiArIGV4cG9uZW50ICsgXCIpXCI7XG4gICAgdmFyIGZsb2F0TnVtYmVyID0gXCIoPzpcIiArIGV4cG9uZW50RmxvYXQgKyBcInxcIiArIHBvaW50RmxvYXQgKyBcIilcIjtcblxuICAgIHZhciBzdHJpbmdFc2NhcGUgPSBcIlxcXFxcXFxcKHhbMC05QS1GYS1mXXsyfXxbMC03XXszfXxbXFxcXFxcXFxhYmZucnR2J1xcXCJdfFVbMC05QS1GYS1mXXs4fXx1WzAtOUEtRmEtZl17NH0pXCI7XG5cbiAgICB0aGlzLiRydWxlcyA9IHtcbiAgICAgICAgXCJzdGFydFwiIDogWyB7XG4gICAgICAgICAgICB0b2tlbiA6IFwiY29tbWVudFwiLFxuICAgICAgICAgICAgcmVnZXggOiBcIiMuKiRcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbiA6IFwic3RyaW5nXCIsICAgICAgICAgICAvLyBtdWx0aSBsaW5lIFwiXCJcIiBzdHJpbmcgc3RhcnRcbiAgICAgICAgICAgIHJlZ2V4IDogc3RyUHJlICsgJ1wiezN9JyxcbiAgICAgICAgICAgIG5leHQgOiBcInFxc3RyaW5nM1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJzdHJpbmdcIiwgICAgICAgICAgIC8vIFwiIHN0cmluZ1xuICAgICAgICAgICAgcmVnZXggOiBzdHJQcmUgKyAnXCIoPz0uKScsXG4gICAgICAgICAgICBuZXh0IDogXCJxcXN0cmluZ1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJzdHJpbmdcIiwgICAgICAgICAgIC8vIG11bHRpIGxpbmUgJycnIHN0cmluZyBzdGFydFxuICAgICAgICAgICAgcmVnZXggOiBzdHJQcmUgKyBcIid7M31cIixcbiAgICAgICAgICAgIG5leHQgOiBcInFzdHJpbmczXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW4gOiBcInN0cmluZ1wiLCAgICAgICAgICAgLy8gJyBzdHJpbmdcbiAgICAgICAgICAgIHJlZ2V4IDogc3RyUHJlICsgXCInKD89LilcIixcbiAgICAgICAgICAgIG5leHQgOiBcInFzdHJpbmdcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBzdHJSYXdQcmUgKyAnXCJ7M30nLFxuICAgICAgICAgICAgbmV4dDogXCJyYXdxcXN0cmluZzNcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIiwgXG4gICAgICAgICAgICByZWdleDogc3RyUmF3UHJlICsgJ1wiKD89LiknLFxuICAgICAgICAgICAgbmV4dDogXCJyYXdxcXN0cmluZ1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgcmVnZXg6IHN0clJhd1ByZSArIFwiJ3szfVwiLFxuICAgICAgICAgICAgbmV4dDogXCJyYXdxc3RyaW5nM1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgcmVnZXg6IHN0clJhd1ByZSArIFwiJyg/PS4pXCIsXG4gICAgICAgICAgICBuZXh0OiBcInJhd3FzdHJpbmdcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBzdHJGb3JtYXRQcmUgKyAnXCJ7M30nLFxuICAgICAgICAgICAgbmV4dDogXCJmcXFzdHJpbmczXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogc3RyRm9ybWF0UHJlICsgJ1wiKD89LiknLFxuICAgICAgICAgICAgbmV4dDogXCJmcXFzdHJpbmdcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBzdHJGb3JtYXRQcmUgKyBcIid7M31cIixcbiAgICAgICAgICAgIG5leHQ6IFwiZnFzdHJpbmczXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogc3RyRm9ybWF0UHJlICsgXCInKD89LilcIixcbiAgICAgICAgICAgIG5leHQ6IFwiZnFzdHJpbmdcIlxuICAgICAgICB9LHtcbiAgICAgICAgICAgIHRva2VuOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgcmVnZXg6IHN0clJhd0Zvcm1hdFByZSArICdcInszfScsXG4gICAgICAgICAgICBuZXh0OiBcInJmcXFzdHJpbmczXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogc3RyUmF3Rm9ybWF0UHJlICsgJ1wiKD89LiknLFxuICAgICAgICAgICAgbmV4dDogXCJyZnFxc3RyaW5nXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogc3RyUmF3Rm9ybWF0UHJlICsgXCInezN9XCIsXG4gICAgICAgICAgICBuZXh0OiBcInJmcXN0cmluZzNcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBzdHJSYXdGb3JtYXRQcmUgKyBcIicoPz0uKVwiLFxuICAgICAgICAgICAgbmV4dDogXCJyZnFzdHJpbmdcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJrZXl3b3JkLm9wZXJhdG9yXCIsXG4gICAgICAgICAgICByZWdleDogXCJcXFxcK3xcXFxcLXxcXFxcKnxcXFxcKlxcXFwqfFxcXFwvfFxcXFwvXFxcXC98JXxAfDw8fD4+fCZ8XFxcXHx8XFxcXF58fnw8fD58PD18PT58PT18IT18PD58PVwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcInB1bmN0dWF0aW9uXCIsXG4gICAgICAgICAgICByZWdleDogXCIsfDp8O3xcXFxcLT58XFxcXCs9fFxcXFwtPXxcXFxcKj18XFxcXC89fFxcXFwvXFxcXC89fCU9fEA9fCY9fFxcXFx8PXxePXw+Pj18PDw9fFxcXFwqXFxcXCo9XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwicGFyZW4ubHBhcmVuXCIsXG4gICAgICAgICAgICByZWdleDogXCJbXFxcXFtcXFxcKFxcXFx7XVwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcInBhcmVuLnJwYXJlblwiLFxuICAgICAgICAgICAgcmVnZXg6IFwiW1xcXFxdXFxcXClcXFxcfV1cIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogW1wia2V5d29yZFwiLCBcInRleHRcIiwgXCJlbnRpdHkubmFtZS5mdW5jdGlvblwiXSxcbiAgICAgICAgICAgIHJlZ2V4OiBcIihkZWZ8Y2xhc3MpKFxcXFxzKykoW1xcXFx1MDBCRi1cXFxcdTFGRkZcXFxcdTJDMDAtXFxcXHVEN0ZGXFxcXHddKylcIlxuICAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwidGV4dFwiLFxuICAgICAgICAgICAgcmVnZXg6IFwiXFxcXHMrXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgaW5jbHVkZTogXCJjb25zdGFudHNcIlxuICAgICAgICB9XSxcbiAgICAgICAgXCJxcXN0cmluZzNcIjogW3tcbiAgICAgICAgICAgIHRva2VuOiBcImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZVwiLFxuICAgICAgICAgICAgcmVnZXg6IHN0cmluZ0VzY2FwZVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIiwgLy8gbXVsdGkgbGluZSBcIlwiXCIgc3RyaW5nIGVuZFxuICAgICAgICAgICAgcmVnZXg6ICdcInszfScsXG4gICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdFRva2VuOiBcInN0cmluZ1wiXG4gICAgICAgIH1dLFxuICAgICAgICBcInFzdHJpbmczXCI6IFt7XG4gICAgICAgICAgICB0b2tlbjogXCJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGVcIixcbiAgICAgICAgICAgIHJlZ2V4OiBzdHJpbmdFc2NhcGVcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsICAvLyBtdWx0aSBsaW5lICcnJyBzdHJpbmcgZW5kXG4gICAgICAgICAgICByZWdleDogXCInezN9XCIsXG4gICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdFRva2VuOiBcInN0cmluZ1wiXG4gICAgICAgIH1dLFxuICAgICAgICBcInFxc3RyaW5nXCI6IFt7XG4gICAgICAgICAgICB0b2tlbjogXCJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGVcIixcbiAgICAgICAgICAgIHJlZ2V4OiBzdHJpbmdFc2NhcGVcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogXCJcXFxcXFxcXCRcIixcbiAgICAgICAgICAgIG5leHQ6IFwicXFzdHJpbmdcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiAnXCJ8JCcsXG4gICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdFRva2VuOiBcInN0cmluZ1wiXG4gICAgICAgIH1dLFxuICAgICAgICBcInFzdHJpbmdcIjogW3tcbiAgICAgICAgICAgIHRva2VuOiBcImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZVwiLFxuICAgICAgICAgICAgcmVnZXg6IHN0cmluZ0VzY2FwZVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIlxcXFxcXFxcJFwiLFxuICAgICAgICAgICAgbmV4dDogXCJxc3RyaW5nXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogXCInfCRcIixcbiAgICAgICAgICAgIG5leHQ6IFwic3RhcnRcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwic3RyaW5nXCJcbiAgICAgICAgfV0sXG4gICAgICAgIFwicmF3cXFzdHJpbmczXCI6IFt7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIiwgLy8gbXVsdGkgbGluZSBcIlwiXCIgc3RyaW5nIGVuZFxuICAgICAgICAgICAgcmVnZXg6ICdcInszfScsXG4gICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdFRva2VuOiBcInN0cmluZ1wiXG4gICAgICAgIH1dLFxuICAgICAgICBcInJhd3FzdHJpbmczXCI6IFt7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIiwgIC8vIG11bHRpIGxpbmUgJycnIHN0cmluZyBlbmRcbiAgICAgICAgICAgIHJlZ2V4OiBcIid7M31cIixcbiAgICAgICAgICAgIG5leHQ6IFwic3RhcnRcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwic3RyaW5nXCJcbiAgICAgICAgfV0sXG4gICAgICAgIFwicmF3cXFzdHJpbmdcIjogW3tcbiAgICAgICAgICAgIHRva2VuOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgcmVnZXg6IFwiXFxcXFxcXFwkXCIsXG4gICAgICAgICAgICBuZXh0OiBcInJhd3Fxc3RyaW5nXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogJ1wifCQnLFxuICAgICAgICAgICAgbmV4dDogXCJzdGFydFwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRlZmF1bHRUb2tlbjogXCJzdHJpbmdcIlxuICAgICAgICB9XSxcbiAgICAgICAgXCJyYXdxc3RyaW5nXCI6IFt7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIlxcXFxcXFxcJFwiLFxuICAgICAgICAgICAgbmV4dDogXCJyYXdxc3RyaW5nXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogXCInfCRcIixcbiAgICAgICAgICAgIG5leHQ6IFwic3RhcnRcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwic3RyaW5nXCJcbiAgICAgICAgfV0sXG4gICAgICAgIFwiZnFxc3RyaW5nM1wiOiBbe1xuICAgICAgICAgICAgdG9rZW46IFwiY29uc3RhbnQubGFuZ3VhZ2UuZXNjYXBlXCIsXG4gICAgICAgICAgICByZWdleDogc3RyaW5nRXNjYXBlXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcInN0cmluZ1wiLCAvLyBtdWx0aSBsaW5lIFwiXCJcIiBzdHJpbmcgZW5kXG4gICAgICAgICAgICByZWdleDogJ1wiezN9JyxcbiAgICAgICAgICAgIG5leHQ6IFwic3RhcnRcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJwYXJlbi5scGFyZW5cIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIntcIixcbiAgICAgICAgICAgIHB1c2g6IFwiZnFzdHJpbmdQYXJSdWxlc1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRlZmF1bHRUb2tlbjogXCJzdHJpbmdcIlxuICAgICAgICB9XSxcbiAgICAgICAgXCJmcXN0cmluZzNcIjogW3tcbiAgICAgICAgICAgIHRva2VuOiBcImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZVwiLFxuICAgICAgICAgICAgcmVnZXg6IHN0cmluZ0VzY2FwZVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIiwgIC8vIG11bHRpIGxpbmUgJycnIHN0cmluZyBlbmRcbiAgICAgICAgICAgIHJlZ2V4OiBcIid7M31cIixcbiAgICAgICAgICAgIG5leHQ6IFwic3RhcnRcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJwYXJlbi5scGFyZW5cIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIntcIixcbiAgICAgICAgICAgIHB1c2g6IFwiZnFzdHJpbmdQYXJSdWxlc1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRlZmF1bHRUb2tlbjogXCJzdHJpbmdcIlxuICAgICAgICB9XSxcbiAgICAgICAgXCJmcXFzdHJpbmdcIjogW3tcbiAgICAgICAgICAgIHRva2VuOiBcImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZVwiLFxuICAgICAgICAgICAgcmVnZXg6IHN0cmluZ0VzY2FwZVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIlxcXFxcXFxcJFwiLFxuICAgICAgICAgICAgbmV4dDogXCJmcXFzdHJpbmdcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiAnXCJ8JCcsXG4gICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwicGFyZW4ubHBhcmVuXCIsXG4gICAgICAgICAgICByZWdleDogXCJ7XCIsXG4gICAgICAgICAgICBwdXNoOiBcImZxc3RyaW5nUGFyUnVsZXNcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwic3RyaW5nXCJcbiAgICAgICAgfV0sXG4gICAgICAgIFwiZnFzdHJpbmdcIjogW3tcbiAgICAgICAgICAgIHRva2VuOiBcImNvbnN0YW50Lmxhbmd1YWdlLmVzY2FwZVwiLFxuICAgICAgICAgICAgcmVnZXg6IHN0cmluZ0VzY2FwZVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIid8JFwiLFxuICAgICAgICAgICAgbmV4dDogXCJzdGFydFwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcInBhcmVuLmxwYXJlblwiLFxuICAgICAgICAgICAgcmVnZXg6IFwie1wiLFxuICAgICAgICAgICAgcHVzaDogXCJmcXN0cmluZ1BhclJ1bGVzXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdFRva2VuOiBcInN0cmluZ1wiXG4gICAgICAgIH1dLFxuICAgICAgICBcInJmcXFzdHJpbmczXCI6IFt7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIiwgLy8gbXVsdGkgbGluZSBcIlwiXCIgc3RyaW5nIGVuZFxuICAgICAgICAgICAgcmVnZXg6ICdcInszfScsXG4gICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwicGFyZW4ubHBhcmVuXCIsXG4gICAgICAgICAgICByZWdleDogXCJ7XCIsXG4gICAgICAgICAgICBwdXNoOiBcImZxc3RyaW5nUGFyUnVsZXNcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwic3RyaW5nXCJcbiAgICAgICAgfV0sXG4gICAgICAgIFwicmZxc3RyaW5nM1wiOiBbe1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsICAvLyBtdWx0aSBsaW5lICcnJyBzdHJpbmcgZW5kXG4gICAgICAgICAgICByZWdleDogXCInezN9XCIsXG4gICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwicGFyZW4ubHBhcmVuXCIsXG4gICAgICAgICAgICByZWdleDogXCJ7XCIsXG4gICAgICAgICAgICBwdXNoOiBcImZxc3RyaW5nUGFyUnVsZXNcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwic3RyaW5nXCJcbiAgICAgICAgfV0sXG4gICAgICAgIFwicmZxcXN0cmluZ1wiOiBbe1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogXCJcXFxcXFxcXCRcIixcbiAgICAgICAgICAgIG5leHQ6IFwicmZxcXN0cmluZ1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgcmVnZXg6ICdcInwkJyxcbiAgICAgICAgICAgIG5leHQ6IFwic3RhcnRcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJwYXJlbi5scGFyZW5cIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIntcIixcbiAgICAgICAgICAgIHB1c2g6IFwiZnFzdHJpbmdQYXJSdWxlc1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRlZmF1bHRUb2tlbjogXCJzdHJpbmdcIlxuICAgICAgICB9XSxcbiAgICAgICAgXCJyZnFzdHJpbmdcIjogW3tcbiAgICAgICAgICAgIHRva2VuOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgcmVnZXg6IFwiJ3wkXCIsXG4gICAgICAgICAgICBuZXh0OiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwicGFyZW4ubHBhcmVuXCIsXG4gICAgICAgICAgICByZWdleDogXCJ7XCIsXG4gICAgICAgICAgICBwdXNoOiBcImZxc3RyaW5nUGFyUnVsZXNcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwic3RyaW5nXCJcbiAgICAgICAgfV0sXG4gICAgICAgIFwiZnFzdHJpbmdQYXJSdWxlc1wiOiBbey8vVE9ETzogbmVzdGVkIHt9XG4gICAgICAgICAgICB0b2tlbjogXCJwYXJlbi5scGFyZW5cIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIltcXFxcW1xcXFwoXVwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcInBhcmVuLnJwYXJlblwiLFxuICAgICAgICAgICAgcmVnZXg6IFwiW1xcXFxdXFxcXCldXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogXCJcXFxccytcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIidbXiddKidcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiAnXCJbXlwiXSpcIidcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwiZnVuY3Rpb24uc3VwcG9ydFwiLFxuICAgICAgICAgICAgcmVnZXg6IFwiKCFzfCFyfCFhKVwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGluY2x1ZGU6IFwiY29uc3RhbnRzXCJcbiAgICAgICAgfSx7XG4gICAgICAgICAgICB0b2tlbjogJ3BhcmVuLnJwYXJlbicsXG4gICAgICAgICAgICByZWdleDogXCJ9XCIsXG4gICAgICAgICAgICBuZXh0OiAncG9wJ1xuICAgICAgICB9LHtcbiAgICAgICAgICAgIHRva2VuOiAncGFyZW4ubHBhcmVuJyxcbiAgICAgICAgICAgIHJlZ2V4OiBcIntcIixcbiAgICAgICAgICAgIHB1c2g6IFwiZnFzdHJpbmdQYXJSdWxlc1wiXG4gICAgICAgIH1dLFxuICAgICAgICBcImNvbnN0YW50c1wiOiBbe1xuICAgICAgICAgICAgdG9rZW46IFwiY29uc3RhbnQubnVtZXJpY1wiLCAvLyBpbWFnaW5hcnlcbiAgICAgICAgICAgIHJlZ2V4OiBcIig/OlwiICsgZmxvYXROdW1iZXIgKyBcInxcXFxcZCspW2pKXVxcXFxiXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwiY29uc3RhbnQubnVtZXJpY1wiLCAvLyBmbG9hdFxuICAgICAgICAgICAgcmVnZXg6IGZsb2F0TnVtYmVyXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuOiBcImNvbnN0YW50Lm51bWVyaWNcIiwgLy8gbG9uZyBpbnRlZ2VyXG4gICAgICAgICAgICByZWdleDogaW50ZWdlciArIFwiW2xMXVxcXFxiXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IFwiY29uc3RhbnQubnVtZXJpY1wiLCAvLyBpbnRlZ2VyXG4gICAgICAgICAgICByZWdleDogaW50ZWdlciArIFwiXFxcXGJcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbjogW1wicHVuY3R1YXRpb25cIiwgXCJmdW5jdGlvbi5zdXBwb3J0XCJdLC8vIG1ldGhvZFxuICAgICAgICAgICAgcmVnZXg6IFwiKFxcXFwuKShbYS16QS1aX10rKVxcXFxiXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW46IGtleXdvcmRNYXBwZXIsXG4gICAgICAgICAgICByZWdleDogXCJbYS16QS1aXyRdW2EtekEtWjAtOV8kXSpcXFxcYlwiXG4gICAgICAgIH1dXG4gICAgfTtcbiAgICB0aGlzLm5vcm1hbGl6ZVJ1bGVzKCk7XG59O1xuXG5vb3AuaW5oZXJpdHMoUHl0aG9uSGlnaGxpZ2h0UnVsZXMsIFRleHRIaWdobGlnaHRSdWxlcyk7XG5cbmV4cG9ydHMuUHl0aG9uSGlnaGxpZ2h0UnVsZXMgPSBQeXRob25IaWdobGlnaHRSdWxlcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/python_highlight_rules.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/sh.js":
/*!**********************************************!*\
  !*** ./node_modules/ace-code/src/mode/sh.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar TextMode = (__webpack_require__(/*! ./text */ \"./node_modules/ace-code/src/mode/text.js\").Mode);\nvar ShHighlightRules = (__webpack_require__(/*! ./sh_highlight_rules */ \"./node_modules/ace-code/src/mode/sh_highlight_rules.js\").ShHighlightRules);\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar CStyleFoldMode = (__webpack_require__(/*! ./folding/cstyle */ \"./node_modules/ace-code/src/mode/folding/cstyle.js\").FoldMode);\n\nvar Mode = function() {\n    this.HighlightRules = ShHighlightRules;\n    this.foldingRules = new CStyleFoldMode();\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n   \n    this.lineCommentStart = \"#\";\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        var tokenizedLine = this.getTokenizer().getLineTokens(line, state);\n        var tokens = tokenizedLine.tokens;\n\n        if (tokens.length && tokens[tokens.length-1].type == \"comment\") {\n            return indent;\n        }\n\n        if (state == \"start\") {\n            var match = line.match(/^.*[\\{\\(\\[:]\\s*$/);\n            if (match) {\n                indent += tab;\n            }\n        }\n\n        return indent;\n    };\n\n    var outdents = {\n        \"pass\": 1,\n        \"return\": 1,\n        \"raise\": 1,\n        \"break\": 1,\n        \"continue\": 1\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        if (input !== \"\\r\\n\" && input !== \"\\r\" && input !== \"\\n\")\n            return false;\n\n        var tokens = this.getTokenizer().getLineTokens(line.trim(), state).tokens;\n\n        if (!tokens)\n            return false;\n\n        // ignore trailing comments\n        do {\n            var last = tokens.pop();\n        } while (last && (last.type == \"comment\" || (last.type == \"text\" && last.value.match(/^\\s+$/))));\n\n        if (!last)\n            return false;\n\n        return (last.type == \"keyword\" && outdents[last.value]);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        // outdenting in sh is slightly different because it always applies\n        // to the next line and only of a new line is inserted\n\n        row += 1;\n        var indent = this.$getIndent(doc.getLine(row));\n        var tab = doc.getTabString();\n        if (indent.slice(-tab.length) == tab)\n            doc.remove(new Range(row, indent.length-tab.length, row, indent.length));\n    };\n\n    this.$id = \"ace/mode/sh\";\n    this.snippetFileId = \"ace/snippets/sh\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvc2guanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLGVBQWUsb0ZBQXNCO0FBQ3JDLHVCQUF1Qiw0SEFBZ0Q7QUFDdkUsWUFBWSxtRkFBeUI7QUFDckMscUJBQXFCLDRHQUFvQzs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7O0FBRVY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQsWUFBWSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvc2guanM/YWFhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIG9vcCA9IHJlcXVpcmUoXCIuLi9saWIvb29wXCIpO1xudmFyIFRleHRNb2RlID0gcmVxdWlyZShcIi4vdGV4dFwiKS5Nb2RlO1xudmFyIFNoSGlnaGxpZ2h0UnVsZXMgPSByZXF1aXJlKFwiLi9zaF9oaWdobGlnaHRfcnVsZXNcIikuU2hIaWdobGlnaHRSdWxlcztcbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuLi9yYW5nZVwiKS5SYW5nZTtcbnZhciBDU3R5bGVGb2xkTW9kZSA9IHJlcXVpcmUoXCIuL2ZvbGRpbmcvY3N0eWxlXCIpLkZvbGRNb2RlO1xuXG52YXIgTW9kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuSGlnaGxpZ2h0UnVsZXMgPSBTaEhpZ2hsaWdodFJ1bGVzO1xuICAgIHRoaXMuZm9sZGluZ1J1bGVzID0gbmV3IENTdHlsZUZvbGRNb2RlKCk7XG4gICAgdGhpcy4kYmVoYXZpb3VyID0gdGhpcy4kZGVmYXVsdEJlaGF2aW91cjtcbn07XG5vb3AuaW5oZXJpdHMoTW9kZSwgVGV4dE1vZGUpO1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgIFxuICAgIHRoaXMubGluZUNvbW1lbnRTdGFydCA9IFwiI1wiO1xuXG4gICAgdGhpcy5nZXROZXh0TGluZUluZGVudCA9IGZ1bmN0aW9uKHN0YXRlLCBsaW5lLCB0YWIpIHtcbiAgICAgICAgdmFyIGluZGVudCA9IHRoaXMuJGdldEluZGVudChsaW5lKTtcblxuICAgICAgICB2YXIgdG9rZW5pemVkTGluZSA9IHRoaXMuZ2V0VG9rZW5pemVyKCkuZ2V0TGluZVRva2VucyhsaW5lLCBzdGF0ZSk7XG4gICAgICAgIHZhciB0b2tlbnMgPSB0b2tlbml6ZWRMaW5lLnRva2VucztcblxuICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCAmJiB0b2tlbnNbdG9rZW5zLmxlbmd0aC0xXS50eXBlID09IFwiY29tbWVudFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlID09IFwic3RhcnRcIikge1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gbGluZS5tYXRjaCgvXi4qW1xce1xcKFxcWzpdXFxzKiQvKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGluZGVudCArPSB0YWI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5kZW50O1xuICAgIH07XG5cbiAgICB2YXIgb3V0ZGVudHMgPSB7XG4gICAgICAgIFwicGFzc1wiOiAxLFxuICAgICAgICBcInJldHVyblwiOiAxLFxuICAgICAgICBcInJhaXNlXCI6IDEsXG4gICAgICAgIFwiYnJlYWtcIjogMSxcbiAgICAgICAgXCJjb250aW51ZVwiOiAxXG4gICAgfTtcblxuICAgIHRoaXMuY2hlY2tPdXRkZW50ID0gZnVuY3Rpb24oc3RhdGUsIGxpbmUsIGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCAhPT0gXCJcXHJcXG5cIiAmJiBpbnB1dCAhPT0gXCJcXHJcIiAmJiBpbnB1dCAhPT0gXCJcXG5cIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB2YXIgdG9rZW5zID0gdGhpcy5nZXRUb2tlbml6ZXIoKS5nZXRMaW5lVG9rZW5zKGxpbmUudHJpbSgpLCBzdGF0ZSkudG9rZW5zO1xuXG4gICAgICAgIGlmICghdG9rZW5zKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIGlnbm9yZSB0cmFpbGluZyBjb21tZW50c1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB2YXIgbGFzdCA9IHRva2Vucy5wb3AoKTtcbiAgICAgICAgfSB3aGlsZSAobGFzdCAmJiAobGFzdC50eXBlID09IFwiY29tbWVudFwiIHx8IChsYXN0LnR5cGUgPT0gXCJ0ZXh0XCIgJiYgbGFzdC52YWx1ZS5tYXRjaCgvXlxccyskLykpKSk7XG5cbiAgICAgICAgaWYgKCFsYXN0KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIHJldHVybiAobGFzdC50eXBlID09IFwia2V5d29yZFwiICYmIG91dGRlbnRzW2xhc3QudmFsdWVdKTtcbiAgICB9O1xuXG4gICAgdGhpcy5hdXRvT3V0ZGVudCA9IGZ1bmN0aW9uKHN0YXRlLCBkb2MsIHJvdykge1xuICAgICAgICAvLyBvdXRkZW50aW5nIGluIHNoIGlzIHNsaWdodGx5IGRpZmZlcmVudCBiZWNhdXNlIGl0IGFsd2F5cyBhcHBsaWVzXG4gICAgICAgIC8vIHRvIHRoZSBuZXh0IGxpbmUgYW5kIG9ubHkgb2YgYSBuZXcgbGluZSBpcyBpbnNlcnRlZFxuXG4gICAgICAgIHJvdyArPSAxO1xuICAgICAgICB2YXIgaW5kZW50ID0gdGhpcy4kZ2V0SW5kZW50KGRvYy5nZXRMaW5lKHJvdykpO1xuICAgICAgICB2YXIgdGFiID0gZG9jLmdldFRhYlN0cmluZygpO1xuICAgICAgICBpZiAoaW5kZW50LnNsaWNlKC10YWIubGVuZ3RoKSA9PSB0YWIpXG4gICAgICAgICAgICBkb2MucmVtb3ZlKG5ldyBSYW5nZShyb3csIGluZGVudC5sZW5ndGgtdGFiLmxlbmd0aCwgcm93LCBpbmRlbnQubGVuZ3RoKSk7XG4gICAgfTtcblxuICAgIHRoaXMuJGlkID0gXCJhY2UvbW9kZS9zaFwiO1xuICAgIHRoaXMuc25pcHBldEZpbGVJZCA9IFwiYWNlL3NuaXBwZXRzL3NoXCI7XG59KS5jYWxsKE1vZGUucHJvdG90eXBlKTtcblxuZXhwb3J0cy5Nb2RlID0gTW9kZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/sh.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/sh_highlight_rules.js":
/*!**************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/sh_highlight_rules.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ../lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar TextHighlightRules = (__webpack_require__(/*! ./text_highlight_rules */ \"./node_modules/ace-code/src/mode/text_highlight_rules.js\").TextHighlightRules);\n\nvar reservedKeywords = exports.reservedKeywords = (\n        '!|{|}|case|do|done|elif|else|'+\n        'esac|fi|for|if|in|then|until|while|'+\n        '&|;|export|local|read|typeset|unset|'+\n        'elif|select|set|function|declare|readonly'\n    );\n\nvar languageConstructs = exports.languageConstructs = (\n    '[|]|alias|bg|bind|break|builtin|'+\n     'cd|command|compgen|complete|continue|'+\n     'dirs|disown|echo|enable|eval|exec|'+\n     'exit|fc|fg|getopts|hash|help|history|'+\n     'jobs|kill|let|logout|popd|printf|pushd|'+\n     'pwd|return|set|shift|shopt|source|'+\n     'suspend|test|times|trap|type|ulimit|'+\n     'umask|unalias|wait'\n);\n\nvar ShHighlightRules = function() {\n    var keywordMapper = this.createKeywordMapper({\n        \"keyword\": reservedKeywords,\n        \"support.function.builtin\": languageConstructs,\n        \"invalid.deprecated\": \"debugger\"\n    }, \"identifier\");\n\n    var integer = \"(?:(?:[1-9]\\\\d*)|(?:0))\";\n    // var integer = \"(?:\" + decimalInteger + \")\";\n\n    var fraction = \"(?:\\\\.\\\\d+)\";\n    var intPart = \"(?:\\\\d+)\";\n    var pointFloat = \"(?:(?:\" + intPart + \"?\" + fraction + \")|(?:\" + intPart + \"\\\\.))\";\n    var exponentFloat = \"(?:(?:\" + pointFloat + \"|\" +  intPart + \")\" + \")\";\n    var floatNumber = \"(?:\" + exponentFloat + \"|\" + pointFloat + \")\";\n    var fileDescriptor = \"(?:&\" + intPart + \")\";\n\n    var variableName = \"[a-zA-Z_][a-zA-Z0-9_]*\";\n    var variable = \"(?:\" + variableName + \"(?==))\";\n\n    var builtinVariable = \"(?:\\\\$(?:SHLVL|\\\\$|\\\\!|\\\\?))\";\n\n    var func = \"(?:\" + variableName + \"\\\\s*\\\\(\\\\))\";\n\n    this.$rules = {\n        \"start\" : [{\n            token : \"constant\",\n            regex : /\\\\./\n        }, {\n            token : [\"text\", \"comment\"],\n            regex : /(^|\\s)(#.*)$/\n        }, {\n            token : \"string.start\",\n            regex : '\"',\n            push : [{\n                token : \"constant.language.escape\",\n                regex : /\\\\(?:[$`\"\\\\]|$)/\n            }, {\n                include : \"variables\"\n            }, {\n                token : \"keyword.operator\",\n                regex : /`/ // TODO highlight `\n            }, {\n                token : \"string.end\",\n                regex : '\"',\n                next: \"pop\"\n            }, {\n                defaultToken: \"string\"\n            }]\n        }, {\n            token : \"string\",\n            regex : \"\\\\$'\",\n            push : [{\n                token : \"constant.language.escape\",\n                regex : /\\\\(?:[abeEfnrtv\\\\'\"]|x[a-fA-F\\d]{1,2}|u[a-fA-F\\d]{4}([a-fA-F\\d]{4})?|c.|\\d{1,3})/\n            }, {\n                token : \"string\",\n                regex : \"'\",\n                next: \"pop\"\n            }, {\n                defaultToken: \"string\"\n            }]\n        }, {\n            regex : \"<<<\",\n            token : \"keyword.operator\"\n        }, {\n            stateName: \"heredoc\",\n            regex : \"(<<-?)(\\\\s*)(['\\\"`]?)([\\\\w\\\\-]+)(['\\\"`]?)\",\n            onMatch : function(value, currentState, stack) {\n                var next = value[2] == '-' ? \"indentedHeredoc\" : \"heredoc\";\n                var tokens = value.split(this.splitRegex);\n                stack.push(next, tokens[4]);\n                return [\n                    {type:\"constant\", value: tokens[1]},\n                    {type:\"text\", value: tokens[2]},\n                    {type:\"string\", value: tokens[3]},\n                    {type:\"support.class\", value: tokens[4]},\n                    {type:\"string\", value: tokens[5]}\n                ];\n            },\n            rules: {\n                heredoc: [{\n                    onMatch:  function(value, currentState, stack) {\n                        if (value === stack[1]) {\n                            stack.shift();\n                            stack.shift();\n                            this.next = stack[0] || \"start\";\n                            return \"support.class\";\n                        }\n                        this.next = \"\";\n                        return \"string\";\n                    },\n                    regex: \".*$\",\n                    next: \"start\"\n                }],\n                indentedHeredoc: [{\n                    token: \"string\",\n                    regex: \"^\\t+\"\n                }, {\n                    onMatch:  function(value, currentState, stack) {\n                        if (value === stack[1]) {\n                            stack.shift();\n                            stack.shift();\n                            this.next = stack[0] || \"start\";\n                            return \"support.class\";\n                        }\n                        this.next = \"\";\n                        return \"string\";\n                    },\n                    regex: \".*$\",\n                    next: \"start\"\n                }]\n            }\n        }, {\n            regex : \"$\",\n            token : \"empty\",\n            next : function(currentState, stack) {\n                if (stack[0] === \"heredoc\" || stack[0] === \"indentedHeredoc\")\n                    return stack[0];\n                return currentState;\n            }\n        }, {\n            token : [\"keyword\", \"text\", \"text\", \"text\", \"variable\"],\n            regex : /(declare|local|readonly)(\\s+)(?:(-[fixar]+)(\\s+))?([a-zA-Z_][a-zA-Z0-9_]*\\b)/\n        }, {\n            token : \"variable.language\",\n            regex : builtinVariable\n        }, {\n            token : \"variable\",\n            regex : variable\n        }, {\n            include : \"variables\"\n        }, {\n            token : \"support.function\",\n            regex : func\n        }, {\n            token : \"support.function\",\n            regex : fileDescriptor\n        }, {\n            token : \"string\",           // ' string\n            start : \"'\", end : \"'\"\n        }, {\n            token : \"constant.numeric\", // float\n            regex : floatNumber\n        }, {\n            token : \"constant.numeric\", // integer\n            regex : integer + \"\\\\b\"\n        }, {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_][a-zA-Z0-9_]*\\\\b\"\n        }, {\n            token : \"keyword.operator\",\n            regex : \"\\\\+|\\\\-|\\\\*|\\\\*\\\\*|\\\\/|\\\\/\\\\/|~|<|>|<=|=>|=|!=|[%&|`]\"\n        }, {\n            token : \"punctuation.operator\",\n            regex : \";\"\n        }, {\n            token : \"paren.lparen\",\n            regex : \"[\\\\[\\\\(\\\\{]\"\n        }, {\n            token : \"paren.rparen\",\n            regex : \"[\\\\]]\"\n        }, {\n            token : \"paren.rparen\",\n            regex : \"[\\\\)\\\\}]\",\n            next : \"pop\"\n        }],\n        variables: [{\n            token : \"variable\",\n            regex : /(\\$)(\\w+)/\n        }, {\n            token : [\"variable\", \"paren.lparen\"],\n            regex : /(\\$)(\\()/,\n            push : \"start\"\n        }, {\n            token : [\"variable\", \"paren.lparen\", \"keyword.operator\", \"variable\", \"keyword.operator\"],\n            regex : /(\\$)(\\{)([#!]?)(\\w+|[*@#?\\-$!0_])(:[?+\\-=]?|##?|%%?|,,?\\/|\\^\\^?)?/,\n            push : \"start\"\n        }, {\n            token : \"variable\",\n            regex : /\\$[*@#?\\-$!0_]/\n        }, {\n            token : [\"variable\", \"paren.lparen\"],\n            regex : /(\\$)(\\{)/,\n            push : \"start\"\n        }]\n    };\n    \n    this.normalizeRules();\n};\n\noop.inherits(ShHighlightRules, TextHighlightRules);\n\nexports.ShHighlightRules = ShHighlightRules;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvc2hfaGlnaGxpZ2h0X3J1bGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFVBQVUsbUJBQU8sQ0FBQywwREFBWTtBQUM5Qix5QkFBeUIsa0lBQW9EOztBQUU3RSx1QkFBdUIsd0JBQXdCO0FBQy9DLFlBQVksRUFBRTtBQUNkO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7O0FBRUEseUJBQXlCLDBCQUEwQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELElBQUksYUFBYSxFQUFFLFlBQVksRUFBRSxTQUFTLElBQUk7QUFDeEcsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixrQ0FBa0M7QUFDdkQscUJBQXFCLDhCQUE4QjtBQUNuRCxxQkFBcUIsZ0NBQWdDO0FBQ3JELHFCQUFxQix1Q0FBdUM7QUFDNUQscUJBQXFCO0FBQ3JCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHNCQUFzQjtBQUN0QixTQUFTO0FBQ1Q7QUFDQSwrQkFBK0I7QUFDL0IsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHdCQUF3QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvc2hfaGlnaGxpZ2h0X3J1bGVzLmpzPzFmZTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBvb3AgPSByZXF1aXJlKFwiLi4vbGliL29vcFwiKTtcbnZhciBUZXh0SGlnaGxpZ2h0UnVsZXMgPSByZXF1aXJlKFwiLi90ZXh0X2hpZ2hsaWdodF9ydWxlc1wiKS5UZXh0SGlnaGxpZ2h0UnVsZXM7XG5cbnZhciByZXNlcnZlZEtleXdvcmRzID0gZXhwb3J0cy5yZXNlcnZlZEtleXdvcmRzID0gKFxuICAgICAgICAnIXx7fH18Y2FzZXxkb3xkb25lfGVsaWZ8ZWxzZXwnK1xuICAgICAgICAnZXNhY3xmaXxmb3J8aWZ8aW58dGhlbnx1bnRpbHx3aGlsZXwnK1xuICAgICAgICAnJnw7fGV4cG9ydHxsb2NhbHxyZWFkfHR5cGVzZXR8dW5zZXR8JytcbiAgICAgICAgJ2VsaWZ8c2VsZWN0fHNldHxmdW5jdGlvbnxkZWNsYXJlfHJlYWRvbmx5J1xuICAgICk7XG5cbnZhciBsYW5ndWFnZUNvbnN0cnVjdHMgPSBleHBvcnRzLmxhbmd1YWdlQ29uc3RydWN0cyA9IChcbiAgICAnW3xdfGFsaWFzfGJnfGJpbmR8YnJlYWt8YnVpbHRpbnwnK1xuICAgICAnY2R8Y29tbWFuZHxjb21wZ2VufGNvbXBsZXRlfGNvbnRpbnVlfCcrXG4gICAgICdkaXJzfGRpc293bnxlY2hvfGVuYWJsZXxldmFsfGV4ZWN8JytcbiAgICAgJ2V4aXR8ZmN8Zmd8Z2V0b3B0c3xoYXNofGhlbHB8aGlzdG9yeXwnK1xuICAgICAnam9ic3xraWxsfGxldHxsb2dvdXR8cG9wZHxwcmludGZ8cHVzaGR8JytcbiAgICAgJ3B3ZHxyZXR1cm58c2V0fHNoaWZ0fHNob3B0fHNvdXJjZXwnK1xuICAgICAnc3VzcGVuZHx0ZXN0fHRpbWVzfHRyYXB8dHlwZXx1bGltaXR8JytcbiAgICAgJ3VtYXNrfHVuYWxpYXN8d2FpdCdcbik7XG5cbnZhciBTaEhpZ2hsaWdodFJ1bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGtleXdvcmRNYXBwZXIgPSB0aGlzLmNyZWF0ZUtleXdvcmRNYXBwZXIoe1xuICAgICAgICBcImtleXdvcmRcIjogcmVzZXJ2ZWRLZXl3b3JkcyxcbiAgICAgICAgXCJzdXBwb3J0LmZ1bmN0aW9uLmJ1aWx0aW5cIjogbGFuZ3VhZ2VDb25zdHJ1Y3RzLFxuICAgICAgICBcImludmFsaWQuZGVwcmVjYXRlZFwiOiBcImRlYnVnZ2VyXCJcbiAgICB9LCBcImlkZW50aWZpZXJcIik7XG5cbiAgICB2YXIgaW50ZWdlciA9IFwiKD86KD86WzEtOV1cXFxcZCopfCg/OjApKVwiO1xuICAgIC8vIHZhciBpbnRlZ2VyID0gXCIoPzpcIiArIGRlY2ltYWxJbnRlZ2VyICsgXCIpXCI7XG5cbiAgICB2YXIgZnJhY3Rpb24gPSBcIig/OlxcXFwuXFxcXGQrKVwiO1xuICAgIHZhciBpbnRQYXJ0ID0gXCIoPzpcXFxcZCspXCI7XG4gICAgdmFyIHBvaW50RmxvYXQgPSBcIig/Oig/OlwiICsgaW50UGFydCArIFwiP1wiICsgZnJhY3Rpb24gKyBcIil8KD86XCIgKyBpbnRQYXJ0ICsgXCJcXFxcLikpXCI7XG4gICAgdmFyIGV4cG9uZW50RmxvYXQgPSBcIig/Oig/OlwiICsgcG9pbnRGbG9hdCArIFwifFwiICsgIGludFBhcnQgKyBcIilcIiArIFwiKVwiO1xuICAgIHZhciBmbG9hdE51bWJlciA9IFwiKD86XCIgKyBleHBvbmVudEZsb2F0ICsgXCJ8XCIgKyBwb2ludEZsb2F0ICsgXCIpXCI7XG4gICAgdmFyIGZpbGVEZXNjcmlwdG9yID0gXCIoPzomXCIgKyBpbnRQYXJ0ICsgXCIpXCI7XG5cbiAgICB2YXIgdmFyaWFibGVOYW1lID0gXCJbYS16QS1aX11bYS16QS1aMC05X10qXCI7XG4gICAgdmFyIHZhcmlhYmxlID0gXCIoPzpcIiArIHZhcmlhYmxlTmFtZSArIFwiKD89PSkpXCI7XG5cbiAgICB2YXIgYnVpbHRpblZhcmlhYmxlID0gXCIoPzpcXFxcJCg/OlNITFZMfFxcXFwkfFxcXFwhfFxcXFw/KSlcIjtcblxuICAgIHZhciBmdW5jID0gXCIoPzpcIiArIHZhcmlhYmxlTmFtZSArIFwiXFxcXHMqXFxcXChcXFxcKSlcIjtcblxuICAgIHRoaXMuJHJ1bGVzID0ge1xuICAgICAgICBcInN0YXJ0XCIgOiBbe1xuICAgICAgICAgICAgdG9rZW4gOiBcImNvbnN0YW50XCIsXG4gICAgICAgICAgICByZWdleCA6IC9cXFxcLi9cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW4gOiBbXCJ0ZXh0XCIsIFwiY29tbWVudFwiXSxcbiAgICAgICAgICAgIHJlZ2V4IDogLyhefFxccykoIy4qKSQvXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJzdHJpbmcuc3RhcnRcIixcbiAgICAgICAgICAgIHJlZ2V4IDogJ1wiJyxcbiAgICAgICAgICAgIHB1c2ggOiBbe1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGVcIixcbiAgICAgICAgICAgICAgICByZWdleCA6IC9cXFxcKD86WyRgXCJcXFxcXXwkKS9cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlIDogXCJ2YXJpYWJsZXNcIlxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJrZXl3b3JkLm9wZXJhdG9yXCIsXG4gICAgICAgICAgICAgICAgcmVnZXggOiAvYC8gLy8gVE9ETyBoaWdobGlnaHQgYFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJzdHJpbmcuZW5kXCIsXG4gICAgICAgICAgICAgICAgcmVnZXggOiAnXCInLFxuICAgICAgICAgICAgICAgIG5leHQ6IFwicG9wXCJcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0VG9rZW46IFwic3RyaW5nXCJcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4IDogXCJcXFxcJCdcIixcbiAgICAgICAgICAgIHB1c2ggOiBbe1xuICAgICAgICAgICAgICAgIHRva2VuIDogXCJjb25zdGFudC5sYW5ndWFnZS5lc2NhcGVcIixcbiAgICAgICAgICAgICAgICByZWdleCA6IC9cXFxcKD86W2FiZUVmbnJ0dlxcXFwnXCJdfHhbYS1mQS1GXFxkXXsxLDJ9fHVbYS1mQS1GXFxkXXs0fShbYS1mQS1GXFxkXXs0fSk/fGMufFxcZHsxLDN9KS9cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgcmVnZXggOiBcIidcIixcbiAgICAgICAgICAgICAgICBuZXh0OiBcInBvcFwiXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFRva2VuOiBcInN0cmluZ1wiXG4gICAgICAgICAgICB9XVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICByZWdleCA6IFwiPDw8XCIsXG4gICAgICAgICAgICB0b2tlbiA6IFwia2V5d29yZC5vcGVyYXRvclwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHN0YXRlTmFtZTogXCJoZXJlZG9jXCIsXG4gICAgICAgICAgICByZWdleCA6IFwiKDw8LT8pKFxcXFxzKikoWydcXFwiYF0/KShbXFxcXHdcXFxcLV0rKShbJ1xcXCJgXT8pXCIsXG4gICAgICAgICAgICBvbk1hdGNoIDogZnVuY3Rpb24odmFsdWUsIGN1cnJlbnRTdGF0ZSwgc3RhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IHZhbHVlWzJdID09ICctJyA/IFwiaW5kZW50ZWRIZXJlZG9jXCIgOiBcImhlcmVkb2NcIjtcbiAgICAgICAgICAgICAgICB2YXIgdG9rZW5zID0gdmFsdWUuc3BsaXQodGhpcy5zcGxpdFJlZ2V4KTtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKG5leHQsIHRva2Vuc1s0XSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAge3R5cGU6XCJjb25zdGFudFwiLCB2YWx1ZTogdG9rZW5zWzFdfSxcbiAgICAgICAgICAgICAgICAgICAge3R5cGU6XCJ0ZXh0XCIsIHZhbHVlOiB0b2tlbnNbMl19LFxuICAgICAgICAgICAgICAgICAgICB7dHlwZTpcInN0cmluZ1wiLCB2YWx1ZTogdG9rZW5zWzNdfSxcbiAgICAgICAgICAgICAgICAgICAge3R5cGU6XCJzdXBwb3J0LmNsYXNzXCIsIHZhbHVlOiB0b2tlbnNbNF19LFxuICAgICAgICAgICAgICAgICAgICB7dHlwZTpcInN0cmluZ1wiLCB2YWx1ZTogdG9rZW5zWzVdfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAgICAgICBoZXJlZG9jOiBbe1xuICAgICAgICAgICAgICAgICAgICBvbk1hdGNoOiAgZnVuY3Rpb24odmFsdWUsIGN1cnJlbnRTdGF0ZSwgc3RhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gc3RhY2tbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0ID0gc3RhY2tbMF0gfHwgXCJzdGFydFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN1cHBvcnQuY2xhc3NcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVnZXg6IFwiLiokXCIsXG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IFwic3RhcnRcIlxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGluZGVudGVkSGVyZWRvYzogW3tcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIHJlZ2V4OiBcIl5cXHQrXCJcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIG9uTWF0Y2g6ICBmdW5jdGlvbih2YWx1ZSwgY3VycmVudFN0YXRlLCBzdGFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBzdGFja1sxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2suc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHQgPSBzdGFja1swXSB8fCBcInN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwic3VwcG9ydC5jbGFzc1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZWdleDogXCIuKiRcIixcbiAgICAgICAgICAgICAgICAgICAgbmV4dDogXCJzdGFydFwiXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgcmVnZXggOiBcIiRcIixcbiAgICAgICAgICAgIHRva2VuIDogXCJlbXB0eVwiLFxuICAgICAgICAgICAgbmV4dCA6IGZ1bmN0aW9uKGN1cnJlbnRTdGF0ZSwgc3RhY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2tbMF0gPT09IFwiaGVyZWRvY1wiIHx8IHN0YWNrWzBdID09PSBcImluZGVudGVkSGVyZWRvY1wiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2tbMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW4gOiBbXCJrZXl3b3JkXCIsIFwidGV4dFwiLCBcInRleHRcIiwgXCJ0ZXh0XCIsIFwidmFyaWFibGVcIl0sXG4gICAgICAgICAgICByZWdleCA6IC8oZGVjbGFyZXxsb2NhbHxyZWFkb25seSkoXFxzKykoPzooLVtmaXhhcl0rKShcXHMrKSk/KFthLXpBLVpfXVthLXpBLVowLTlfXSpcXGIpL1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbiA6IFwidmFyaWFibGUubGFuZ3VhZ2VcIixcbiAgICAgICAgICAgIHJlZ2V4IDogYnVpbHRpblZhcmlhYmxlXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJ2YXJpYWJsZVwiLFxuICAgICAgICAgICAgcmVnZXggOiB2YXJpYWJsZVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBpbmNsdWRlIDogXCJ2YXJpYWJsZXNcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbiA6IFwic3VwcG9ydC5mdW5jdGlvblwiLFxuICAgICAgICAgICAgcmVnZXggOiBmdW5jXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJzdXBwb3J0LmZ1bmN0aW9uXCIsXG4gICAgICAgICAgICByZWdleCA6IGZpbGVEZXNjcmlwdG9yXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJzdHJpbmdcIiwgICAgICAgICAgIC8vICcgc3RyaW5nXG4gICAgICAgICAgICBzdGFydCA6IFwiJ1wiLCBlbmQgOiBcIidcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbiA6IFwiY29uc3RhbnQubnVtZXJpY1wiLCAvLyBmbG9hdFxuICAgICAgICAgICAgcmVnZXggOiBmbG9hdE51bWJlclxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbiA6IFwiY29uc3RhbnQubnVtZXJpY1wiLCAvLyBpbnRlZ2VyXG4gICAgICAgICAgICByZWdleCA6IGludGVnZXIgKyBcIlxcXFxiXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW4gOiBrZXl3b3JkTWFwcGVyLFxuICAgICAgICAgICAgcmVnZXggOiBcIlthLXpBLVpfXVthLXpBLVowLTlfXSpcXFxcYlwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJrZXl3b3JkLm9wZXJhdG9yXCIsXG4gICAgICAgICAgICByZWdleCA6IFwiXFxcXCt8XFxcXC18XFxcXCp8XFxcXCpcXFxcKnxcXFxcL3xcXFxcL1xcXFwvfH58PHw+fDw9fD0+fD18IT18WyUmfGBdXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW4gOiBcInB1bmN0dWF0aW9uLm9wZXJhdG9yXCIsXG4gICAgICAgICAgICByZWdleCA6IFwiO1wiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJwYXJlbi5scGFyZW5cIixcbiAgICAgICAgICAgIHJlZ2V4IDogXCJbXFxcXFtcXFxcKFxcXFx7XVwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogXCJwYXJlbi5ycGFyZW5cIixcbiAgICAgICAgICAgIHJlZ2V4IDogXCJbXFxcXF1dXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW4gOiBcInBhcmVuLnJwYXJlblwiLFxuICAgICAgICAgICAgcmVnZXggOiBcIltcXFxcKVxcXFx9XVwiLFxuICAgICAgICAgICAgbmV4dCA6IFwicG9wXCJcbiAgICAgICAgfV0sXG4gICAgICAgIHZhcmlhYmxlczogW3tcbiAgICAgICAgICAgIHRva2VuIDogXCJ2YXJpYWJsZVwiLFxuICAgICAgICAgICAgcmVnZXggOiAvKFxcJCkoXFx3KykvXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuIDogW1widmFyaWFibGVcIiwgXCJwYXJlbi5scGFyZW5cIl0sXG4gICAgICAgICAgICByZWdleCA6IC8oXFwkKShcXCgpLyxcbiAgICAgICAgICAgIHB1c2ggOiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW4gOiBbXCJ2YXJpYWJsZVwiLCBcInBhcmVuLmxwYXJlblwiLCBcImtleXdvcmQub3BlcmF0b3JcIiwgXCJ2YXJpYWJsZVwiLCBcImtleXdvcmQub3BlcmF0b3JcIl0sXG4gICAgICAgICAgICByZWdleCA6IC8oXFwkKShcXHspKFsjIV0/KShcXHcrfFsqQCM/XFwtJCEwX10pKDpbPytcXC09XT98IyM/fCUlP3wsLD9cXC98XFxeXFxePyk/LyxcbiAgICAgICAgICAgIHB1c2ggOiBcInN0YXJ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdG9rZW4gOiBcInZhcmlhYmxlXCIsXG4gICAgICAgICAgICByZWdleCA6IC9cXCRbKkAjP1xcLSQhMF9dL1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICB0b2tlbiA6IFtcInZhcmlhYmxlXCIsIFwicGFyZW4ubHBhcmVuXCJdLFxuICAgICAgICAgICAgcmVnZXggOiAvKFxcJCkoXFx7KS8sXG4gICAgICAgICAgICBwdXNoIDogXCJzdGFydFwiXG4gICAgICAgIH1dXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLm5vcm1hbGl6ZVJ1bGVzKCk7XG59O1xuXG5vb3AuaW5oZXJpdHMoU2hIaWdobGlnaHRSdWxlcywgVGV4dEhpZ2hsaWdodFJ1bGVzKTtcblxuZXhwb3J0cy5TaEhpZ2hsaWdodFJ1bGVzID0gU2hIaWdobGlnaHRSdWxlcztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/sh_highlight_rules.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/text.js":
/*!************************************************!*\
  !*** ./node_modules/ace-code/src/mode/text.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../../ace-internal\").Ace.SyntaxMode} SyntaxMode\n */\n\nvar config = __webpack_require__(/*! ../config */ \"./node_modules/ace-code/src/config.js\");\n\nvar Tokenizer = (__webpack_require__(/*! ../tokenizer */ \"./node_modules/ace-code/src/tokenizer.js\").Tokenizer);\n\nvar TextHighlightRules = (__webpack_require__(/*! ./text_highlight_rules */ \"./node_modules/ace-code/src/mode/text_highlight_rules.js\").TextHighlightRules);\nvar CstyleBehaviour = (__webpack_require__(/*! ./behaviour/cstyle */ \"./node_modules/ace-code/src/mode/behaviour/cstyle.js\").CstyleBehaviour);\nvar unicode = __webpack_require__(/*! ../unicode */ \"./node_modules/ace-code/src/unicode.js\");\nvar lang = __webpack_require__(/*! ../lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar TokenIterator = (__webpack_require__(/*! ../token_iterator */ \"./node_modules/ace-code/src/token_iterator.js\").TokenIterator);\nvar Range = (__webpack_require__(/*! ../range */ \"./node_modules/ace-code/src/range.js\").Range);\n\nvar Mode;\nMode = function() {\n    this.HighlightRules = TextHighlightRules;\n};\n\n(function() {\n    this.$defaultBehaviour = new CstyleBehaviour();\n\n    this.tokenRe = new RegExp(\"^[\" + unicode.wordChars + \"\\\\$_]+\", \"g\");\n\n    this.nonTokenRe = new RegExp(\"^(?:[^\" + unicode.wordChars + \"\\\\$_]|\\\\s])+\", \"g\");\n\n    /**\n     * @this {SyntaxMode}\n     */\n    this.getTokenizer = function() {\n        if (!this.$tokenizer) {\n            this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);\n            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());\n        }\n        return this.$tokenizer;\n    };\n\n    this.lineCommentStart = \"\";\n    this.blockComment = \"\";\n\n    /**\n     * @this {SyntaxMode}\n     */\n    this.toggleCommentLines = function(state, session, startRow, endRow) {\n        var doc = session.doc;\n\n        var ignoreBlankLines = true;\n        var shouldRemove = true;\n        var minIndent = Infinity;\n        var tabSize = session.getTabSize();\n        var insertAtTabStop = false;\n\n        if (!this.lineCommentStart) {\n            if (!this.blockComment)\n                return false;\n            /**@type {any}*/\n            var lineCommentStart = this.blockComment.start;\n            var lineCommentEnd = this.blockComment.end;\n            /**@type {any}*/\n            var regexpStart = new RegExp(\"^(\\\\s*)(?:\" + lang.escapeRegExp(lineCommentStart) + \")\");\n            var regexpEnd = new RegExp(\"(?:\" + lang.escapeRegExp(lineCommentEnd) + \")\\\\s*$\");\n\n            var comment = function(line, i) {\n                if (testRemove(line, i))\n                    return;\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    doc.insertInLine({row: i, column: line.length}, lineCommentEnd);\n                    doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n\n            var uncomment = function(line, i) {\n                var m;\n                if (m = line.match(regexpEnd))\n                    doc.removeInLine(i, line.length - m[0].length, line.length);\n                if (m = line.match(regexpStart))\n                    doc.removeInLine(i, m[1].length, m[0].length);\n            };\n\n            /**@type {any}*/\n            var testRemove = function(line, row) {\n                if (regexpStart.test(line))\n                    return true;\n                var tokens = session.getTokens(row);\n                for (var i = 0; i < tokens.length; i++) {\n                    if (tokens[i].type === \"comment\")\n                        return true;\n                }\n            };\n        } else {\n            if (Array.isArray(this.lineCommentStart)) {\n                /**@type {any}*/\n                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join(\"|\");\n                /**@type {any}*/\n                var lineCommentStart = this.lineCommentStart[0];\n            } else {\n                var regexpStart = lang.escapeRegExp(this.lineCommentStart);\n                /**@type {any}*/\n                var lineCommentStart = this.lineCommentStart;\n            }\n            regexpStart = new RegExp(\"^(\\\\s*)(?:\" + regexpStart + \") ?\");\n\n            insertAtTabStop = session.getUseSoftTabs();\n\n            var uncomment = function(line, i) {\n                var m = line.match(regexpStart);\n                if (!m) return;\n                var start = m[1].length, end = m[0].length;\n                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == \" \")\n                    end--;\n                doc.removeInLine(i, start, end);\n            };\n            var commentWithSpace = lineCommentStart + \" \";\n            var comment = function(line, i) {\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    if (shouldInsertSpace(line, minIndent, minIndent))\n                        doc.insertInLine({row: i, column: minIndent}, commentWithSpace);\n                    else\n                        doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n            /**@type {any}*/\n            var testRemove = function(line, i) {\n                return regexpStart.test(line);\n            };\n\n            var shouldInsertSpace = function(line, before, after) {\n                var spaces = 0;\n                while (before-- && line.charAt(before) == \" \")\n                    spaces++;\n                if (spaces % tabSize != 0)\n                    return false;\n                var spaces = 0;\n                while (line.charAt(after++) == \" \")\n                    spaces++;\n                if (tabSize > 2)\n                    return spaces % tabSize != tabSize - 1;\n                else\n                    return spaces % tabSize == 0;\n            };\n        }\n\n        function iter(fun) {\n            for (var i = startRow; i <= endRow; i++)\n                fun(doc.getLine(i), i);\n        }\n\n\n        var minEmptyLength = Infinity;\n        iter(function(line, i) {\n            var indent = line.search(/\\S/);\n            if (indent !== -1) {\n                if (indent < minIndent)\n                    minIndent = indent;\n                if (shouldRemove && !testRemove(line, i))\n                    shouldRemove = false;\n            } else if (minEmptyLength > line.length) {\n                minEmptyLength = line.length;\n            }\n        });\n\n        if (minIndent == Infinity) {\n            minIndent = minEmptyLength;\n            ignoreBlankLines = false;\n            shouldRemove = false;\n        }\n\n        if (insertAtTabStop && minIndent % tabSize != 0)\n            minIndent = Math.floor(minIndent / tabSize) * tabSize;\n\n        iter(shouldRemove ? uncomment : comment);\n    };\n\n    /**\n     * @this {SyntaxMode}\n     */\n    this.toggleBlockComment = function(state, session, range, cursor) {\n        var comment = this.blockComment;\n        if (!comment)\n            return;\n        if (!comment.start && comment[0])\n            comment = comment[0];\n\n        var iterator = new TokenIterator(session, cursor.row, cursor.column);\n        var token = iterator.getCurrentToken();\n\n        var sel = session.selection;\n        var initialRange = session.selection.toOrientedRange();\n        var startRow, colDiff;\n\n        if (token && /comment/.test(token.type)) {\n            var startRange, endRange;\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.start);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    startRange = new Range(row, column, row, column + comment.start.length);\n                    break;\n                }\n                token = iterator.stepBackward();\n            }\n\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.end);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    endRange = new Range(row, column, row, column + comment.end.length);\n                    break;\n                }\n                token = iterator.stepForward();\n            }\n            if (endRange)\n                session.remove(endRange);\n            if (startRange) {\n                session.remove(startRange);\n                startRow = startRange.start.row;\n                colDiff = -comment.start.length;\n            }\n        } else {\n            colDiff = comment.start.length;\n            startRow = range.start.row;\n            session.insert(range.end, comment.end);\n            session.insert(range.start, comment.start);\n        }\n        // todo: selection should have ended up in the right place automatically!\n        if (initialRange.start.row == startRow)\n            initialRange.start.column += colDiff;\n        if (initialRange.end.row == startRow)\n            initialRange.end.column += colDiff;\n        session.selection.fromOrientedRange(initialRange);\n    };\n\n    this.getNextLineIndent = function(state, line, tab) {\n        return this.$getIndent(line);\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return false;\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n    this.createWorker = function(session) {\n        return null;\n    };\n\n    this.createModeDelegates = function (mapping) {\n        this.$embeds = [];\n        this.$modes = {};\n        for (let i in mapping) {\n            if (mapping[i]) {\n                var Mode = mapping[i];\n                var id = Mode.prototype.$id;\n                var mode = config.$modes[id];\n                if (!mode)\n                    config.$modes[id] = mode = new Mode();\n                if (!config.$modes[i])\n                    config.$modes[i] = mode;\n                this.$embeds.push(i);\n                this.$modes[i] = mode;\n            }\n        }\n\n        var delegations = [\"toggleBlockComment\", \"toggleCommentLines\", \"getNextLineIndent\",\n            \"checkOutdent\", \"autoOutdent\", \"transformAction\", \"getCompletions\"];\n\n        for (let i = 0; i < delegations.length; i++) {\n            (function(scope) {\n              var functionName = delegations[i];\n              var defaultHandler = scope[functionName];\n              scope[delegations[i]] =\n                  /** @this {import(\"../../ace-internal\").Ace.SyntaxMode} */\n                  function () {\n                      return this.$delegator(functionName, arguments, defaultHandler);\n                  };\n            }(this));\n        }\n    };\n\n    /**\n     * @this {SyntaxMode}\n     */\n    this.$delegator = function(method, args, defaultHandler) {\n        var state = args[0] || \"start\";\n        if (typeof state != \"string\") {\n            if (Array.isArray(state[2])) {\n                var language = state[2][state[2].length - 1];\n                var mode = this.$modes[language];\n                if (mode)\n                    return mode[method].apply(mode, [state[1]].concat([].slice.call(args, 1)));\n            }\n            state = state[0] || \"start\";\n        }\n\n        for (var i = 0; i < this.$embeds.length; i++) {\n            if (!this.$modes[this.$embeds[i]]) continue;\n\n            var split = state.split(this.$embeds[i]);\n            if (!split[0] && split[1]) {\n                args[0] = split[1];\n                var mode = this.$modes[this.$embeds[i]];\n                return mode[method].apply(mode, args);\n            }\n        }\n        var ret = defaultHandler.apply(this, args);\n        return defaultHandler ? ret : undefined;\n    };\n\n    /**\n     * @this {SyntaxMode}\n     */\n    this.transformAction = function(state, action, editor, session, param) {\n        if (this.$behaviour) {\n            var behaviours = this.$behaviour.getBehaviours();\n            for (var key in behaviours) {\n                if (behaviours[key][action]) {\n                    var ret = behaviours[key][action].apply(this, arguments);\n                    if (ret) {\n                        return ret;\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * @this {SyntaxMode}\n     */\n    this.getKeywords = function(append) {\n        // this is for autocompletion to pick up regexp'ed keywords\n        if (!this.completionKeywords) {\n            var rules = this.$tokenizer[\"rules\"];\n            var completionKeywords = [];\n            for (var rule in rules) {\n                var ruleItr = rules[rule];\n                for (var r = 0, l = ruleItr.length; r < l; r++) {\n                    if (typeof ruleItr[r].token === \"string\") {\n                        if (/keyword|support|storage/.test(ruleItr[r].token))\n                            completionKeywords.push(ruleItr[r].regex);\n                    }\n                    else if (typeof ruleItr[r].token === \"object\") {\n                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {\n                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {\n                                // drop surrounding parens\n                                var rule = ruleItr[r].regex.match(/\\(.+?\\)/g)[a];\n                                completionKeywords.push(rule.substr(1, rule.length - 2));\n                            }\n                        }\n                    }\n                }\n            }\n            this.completionKeywords = completionKeywords;\n        }\n        // this is for highlighting embed rules, like HAML/Ruby or Obj-C/C\n        if (!append)\n            return this.$keywordList;\n        return completionKeywords.concat(this.$keywordList || []);\n    };\n\n    /**\n     * @this {SyntaxMode}\n     */\n    this.$createKeywordList = function() {\n        if (!this.$highlightRules)\n            this.getTokenizer();\n        return this.$keywordList = this.$highlightRules.$keywordList || [];\n    };\n\n    /**\n     * @this {SyntaxMode}\n     */\n    this.getCompletions = function(state, session, pos, prefix) {\n        var keywords = this.$keywordList || this.$createKeywordList();\n        return keywords.map(function(word) {\n            return {\n                name: word,\n                value: word,\n                score: 0,\n                meta: \"keyword\"\n            };\n        });\n    };\n\n    this.$id = \"ace/mode/text\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvdGV4dC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsYUFBYSw2Q0FBNkM7QUFDMUQ7O0FBRUEsYUFBYSxtQkFBTyxDQUFDLHdEQUFXOztBQUVoQyxnQkFBZ0IsK0ZBQWlDOztBQUVqRCx5QkFBeUIsa0lBQW9EO0FBQzdFLHNCQUFzQix1SEFBNkM7QUFDbkUsY0FBYyxtQkFBTyxDQUFDLDBEQUFZO0FBQ2xDLFdBQVcsbUJBQU8sQ0FBQyw0REFBYTtBQUNoQyxvQkFBb0IsNkdBQTBDO0FBQzlELFlBQVksbUZBQXlCOztBQUVyQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsSUFBSTtBQUMxQjtBQUNBO0FBQ0Esc0JBQXNCLElBQUk7QUFDMUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw0QkFBNEI7QUFDbEUsc0NBQXNDLDBCQUEwQjtBQUNoRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQixJQUFJO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG1CQUFtQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLDBCQUEwQixJQUFJO0FBQzlCO0FBQ0EsMEJBQTBCLElBQUk7QUFDOUI7QUFDQSxjQUFjO0FBQ2Q7QUFDQSwwQkFBMEIsSUFBSTtBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLDBCQUEwQjtBQUNwRTtBQUNBLDBDQUEwQywwQkFBMEI7QUFDcEU7QUFDQTtBQUNBLHNCQUFzQixJQUFJO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsYUFBYTtBQUNoRDtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx3QkFBd0Isd0JBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZDQUE2QztBQUMxRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLHlCQUF5QjtBQUNqRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsT0FBTztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGFBQWE7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRCxZQUFZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW9kZS90ZXh0LmpzPzU3ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLlN5bnRheE1vZGV9IFN5bnRheE1vZGVcbiAqL1xuXG52YXIgY29uZmlnID0gcmVxdWlyZShcIi4uL2NvbmZpZ1wiKTtcblxudmFyIFRva2VuaXplciA9IHJlcXVpcmUoXCIuLi90b2tlbml6ZXJcIikuVG9rZW5pemVyO1xuXG52YXIgVGV4dEhpZ2hsaWdodFJ1bGVzID0gcmVxdWlyZShcIi4vdGV4dF9oaWdobGlnaHRfcnVsZXNcIikuVGV4dEhpZ2hsaWdodFJ1bGVzO1xudmFyIENzdHlsZUJlaGF2aW91ciA9IHJlcXVpcmUoXCIuL2JlaGF2aW91ci9jc3R5bGVcIikuQ3N0eWxlQmVoYXZpb3VyO1xudmFyIHVuaWNvZGUgPSByZXF1aXJlKFwiLi4vdW5pY29kZVwiKTtcbnZhciBsYW5nID0gcmVxdWlyZShcIi4uL2xpYi9sYW5nXCIpO1xudmFyIFRva2VuSXRlcmF0b3IgPSByZXF1aXJlKFwiLi4vdG9rZW5faXRlcmF0b3JcIikuVG9rZW5JdGVyYXRvcjtcbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuLi9yYW5nZVwiKS5SYW5nZTtcblxudmFyIE1vZGU7XG5Nb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5IaWdobGlnaHRSdWxlcyA9IFRleHRIaWdobGlnaHRSdWxlcztcbn07XG5cbihmdW5jdGlvbigpIHtcbiAgICB0aGlzLiRkZWZhdWx0QmVoYXZpb3VyID0gbmV3IENzdHlsZUJlaGF2aW91cigpO1xuXG4gICAgdGhpcy50b2tlblJlID0gbmV3IFJlZ0V4cChcIl5bXCIgKyB1bmljb2RlLndvcmRDaGFycyArIFwiXFxcXCRfXStcIiwgXCJnXCIpO1xuXG4gICAgdGhpcy5ub25Ub2tlblJlID0gbmV3IFJlZ0V4cChcIl4oPzpbXlwiICsgdW5pY29kZS53b3JkQ2hhcnMgKyBcIlxcXFwkX118XFxcXHNdKStcIiwgXCJnXCIpO1xuXG4gICAgLyoqXG4gICAgICogQHRoaXMge1N5bnRheE1vZGV9XG4gICAgICovXG4gICAgdGhpcy5nZXRUb2tlbml6ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLiR0b2tlbml6ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuJGhpZ2hsaWdodFJ1bGVzID0gdGhpcy4kaGlnaGxpZ2h0UnVsZXMgfHwgbmV3IHRoaXMuSGlnaGxpZ2h0UnVsZXModGhpcy4kaGlnaGxpZ2h0UnVsZUNvbmZpZyk7XG4gICAgICAgICAgICB0aGlzLiR0b2tlbml6ZXIgPSBuZXcgVG9rZW5pemVyKHRoaXMuJGhpZ2hsaWdodFJ1bGVzLmdldFJ1bGVzKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLiR0b2tlbml6ZXI7XG4gICAgfTtcblxuICAgIHRoaXMubGluZUNvbW1lbnRTdGFydCA9IFwiXCI7XG4gICAgdGhpcy5ibG9ja0NvbW1lbnQgPSBcIlwiO1xuXG4gICAgLyoqXG4gICAgICogQHRoaXMge1N5bnRheE1vZGV9XG4gICAgICovXG4gICAgdGhpcy50b2dnbGVDb21tZW50TGluZXMgPSBmdW5jdGlvbihzdGF0ZSwgc2Vzc2lvbiwgc3RhcnRSb3csIGVuZFJvdykge1xuICAgICAgICB2YXIgZG9jID0gc2Vzc2lvbi5kb2M7XG5cbiAgICAgICAgdmFyIGlnbm9yZUJsYW5rTGluZXMgPSB0cnVlO1xuICAgICAgICB2YXIgc2hvdWxkUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgdmFyIG1pbkluZGVudCA9IEluZmluaXR5O1xuICAgICAgICB2YXIgdGFiU2l6ZSA9IHNlc3Npb24uZ2V0VGFiU2l6ZSgpO1xuICAgICAgICB2YXIgaW5zZXJ0QXRUYWJTdG9wID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCF0aGlzLmxpbmVDb21tZW50U3RhcnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ibG9ja0NvbW1lbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgLyoqQHR5cGUge2FueX0qL1xuICAgICAgICAgICAgdmFyIGxpbmVDb21tZW50U3RhcnQgPSB0aGlzLmJsb2NrQ29tbWVudC5zdGFydDtcbiAgICAgICAgICAgIHZhciBsaW5lQ29tbWVudEVuZCA9IHRoaXMuYmxvY2tDb21tZW50LmVuZDtcbiAgICAgICAgICAgIC8qKkB0eXBlIHthbnl9Ki9cbiAgICAgICAgICAgIHZhciByZWdleHBTdGFydCA9IG5ldyBSZWdFeHAoXCJeKFxcXFxzKikoPzpcIiArIGxhbmcuZXNjYXBlUmVnRXhwKGxpbmVDb21tZW50U3RhcnQpICsgXCIpXCIpO1xuICAgICAgICAgICAgdmFyIHJlZ2V4cEVuZCA9IG5ldyBSZWdFeHAoXCIoPzpcIiArIGxhbmcuZXNjYXBlUmVnRXhwKGxpbmVDb21tZW50RW5kKSArIFwiKVxcXFxzKiRcIik7XG5cbiAgICAgICAgICAgIHZhciBjb21tZW50ID0gZnVuY3Rpb24obGluZSwgaSkge1xuICAgICAgICAgICAgICAgIGlmICh0ZXN0UmVtb3ZlKGxpbmUsIGkpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKCFpZ25vcmVCbGFua0xpbmVzIHx8IC9cXFMvLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jLmluc2VydEluTGluZSh7cm93OiBpLCBjb2x1bW46IGxpbmUubGVuZ3RofSwgbGluZUNvbW1lbnRFbmQpO1xuICAgICAgICAgICAgICAgICAgICBkb2MuaW5zZXJ0SW5MaW5lKHtyb3c6IGksIGNvbHVtbjogbWluSW5kZW50fSwgbGluZUNvbW1lbnRTdGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHVuY29tbWVudCA9IGZ1bmN0aW9uKGxpbmUsIGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbTtcbiAgICAgICAgICAgICAgICBpZiAobSA9IGxpbmUubWF0Y2gocmVnZXhwRW5kKSlcbiAgICAgICAgICAgICAgICAgICAgZG9jLnJlbW92ZUluTGluZShpLCBsaW5lLmxlbmd0aCAtIG1bMF0ubGVuZ3RoLCBsaW5lLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKG0gPSBsaW5lLm1hdGNoKHJlZ2V4cFN0YXJ0KSlcbiAgICAgICAgICAgICAgICAgICAgZG9jLnJlbW92ZUluTGluZShpLCBtWzFdLmxlbmd0aCwgbVswXS5sZW5ndGgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqQHR5cGUge2FueX0qL1xuICAgICAgICAgICAgdmFyIHRlc3RSZW1vdmUgPSBmdW5jdGlvbihsaW5lLCByb3cpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVnZXhwU3RhcnQudGVzdChsaW5lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHRva2VucyA9IHNlc3Npb24uZ2V0VG9rZW5zKHJvdyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2Vuc1tpXS50eXBlID09PSBcImNvbW1lbnRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmxpbmVDb21tZW50U3RhcnQpKSB7XG4gICAgICAgICAgICAgICAgLyoqQHR5cGUge2FueX0qL1xuICAgICAgICAgICAgICAgIHZhciByZWdleHBTdGFydCA9IHRoaXMubGluZUNvbW1lbnRTdGFydC5tYXAobGFuZy5lc2NhcGVSZWdFeHApLmpvaW4oXCJ8XCIpO1xuICAgICAgICAgICAgICAgIC8qKkB0eXBlIHthbnl9Ki9cbiAgICAgICAgICAgICAgICB2YXIgbGluZUNvbW1lbnRTdGFydCA9IHRoaXMubGluZUNvbW1lbnRTdGFydFswXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZ2V4cFN0YXJ0ID0gbGFuZy5lc2NhcGVSZWdFeHAodGhpcy5saW5lQ29tbWVudFN0YXJ0KTtcbiAgICAgICAgICAgICAgICAvKipAdHlwZSB7YW55fSovXG4gICAgICAgICAgICAgICAgdmFyIGxpbmVDb21tZW50U3RhcnQgPSB0aGlzLmxpbmVDb21tZW50U3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWdleHBTdGFydCA9IG5ldyBSZWdFeHAoXCJeKFxcXFxzKikoPzpcIiArIHJlZ2V4cFN0YXJ0ICsgXCIpID9cIik7XG5cbiAgICAgICAgICAgIGluc2VydEF0VGFiU3RvcCA9IHNlc3Npb24uZ2V0VXNlU29mdFRhYnMoKTtcblxuICAgICAgICAgICAgdmFyIHVuY29tbWVudCA9IGZ1bmN0aW9uKGxpbmUsIGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbSA9IGxpbmUubWF0Y2gocmVnZXhwU3RhcnQpO1xuICAgICAgICAgICAgICAgIGlmICghbSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IG1bMV0ubGVuZ3RoLCBlbmQgPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoIXNob3VsZEluc2VydFNwYWNlKGxpbmUsIHN0YXJ0LCBlbmQpICYmIG1bMF1bZW5kIC0gMV0gPT0gXCIgXCIpXG4gICAgICAgICAgICAgICAgICAgIGVuZC0tO1xuICAgICAgICAgICAgICAgIGRvYy5yZW1vdmVJbkxpbmUoaSwgc3RhcnQsIGVuZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNvbW1lbnRXaXRoU3BhY2UgPSBsaW5lQ29tbWVudFN0YXJ0ICsgXCIgXCI7XG4gICAgICAgICAgICB2YXIgY29tbWVudCA9IGZ1bmN0aW9uKGxpbmUsIGkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlnbm9yZUJsYW5rTGluZXMgfHwgL1xcUy8udGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkSW5zZXJ0U3BhY2UobGluZSwgbWluSW5kZW50LCBtaW5JbmRlbnQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmluc2VydEluTGluZSh7cm93OiBpLCBjb2x1bW46IG1pbkluZGVudH0sIGNvbW1lbnRXaXRoU3BhY2UpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MuaW5zZXJ0SW5MaW5lKHtyb3c6IGksIGNvbHVtbjogbWluSW5kZW50fSwgbGluZUNvbW1lbnRTdGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKkB0eXBlIHthbnl9Ki9cbiAgICAgICAgICAgIHZhciB0ZXN0UmVtb3ZlID0gZnVuY3Rpb24obGluZSwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWdleHBTdGFydC50ZXN0KGxpbmUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIHNob3VsZEluc2VydFNwYWNlID0gZnVuY3Rpb24obGluZSwgYmVmb3JlLCBhZnRlcikge1xuICAgICAgICAgICAgICAgIHZhciBzcGFjZXMgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChiZWZvcmUtLSAmJiBsaW5lLmNoYXJBdChiZWZvcmUpID09IFwiIFwiKVxuICAgICAgICAgICAgICAgICAgICBzcGFjZXMrKztcbiAgICAgICAgICAgICAgICBpZiAoc3BhY2VzICUgdGFiU2l6ZSAhPSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIHNwYWNlcyA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGxpbmUuY2hhckF0KGFmdGVyKyspID09IFwiIFwiKVxuICAgICAgICAgICAgICAgICAgICBzcGFjZXMrKztcbiAgICAgICAgICAgICAgICBpZiAodGFiU2l6ZSA+IDIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzcGFjZXMgJSB0YWJTaXplICE9IHRhYlNpemUgLSAxO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNwYWNlcyAlIHRhYlNpemUgPT0gMDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpdGVyKGZ1bikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0Um93OyBpIDw9IGVuZFJvdzsgaSsrKVxuICAgICAgICAgICAgICAgIGZ1bihkb2MuZ2V0TGluZShpKSwgaSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHZhciBtaW5FbXB0eUxlbmd0aCA9IEluZmluaXR5O1xuICAgICAgICBpdGVyKGZ1bmN0aW9uKGxpbmUsIGkpIHtcbiAgICAgICAgICAgIHZhciBpbmRlbnQgPSBsaW5lLnNlYXJjaCgvXFxTLyk7XG4gICAgICAgICAgICBpZiAoaW5kZW50ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRlbnQgPCBtaW5JbmRlbnQpXG4gICAgICAgICAgICAgICAgICAgIG1pbkluZGVudCA9IGluZGVudDtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmVtb3ZlICYmICF0ZXN0UmVtb3ZlKGxpbmUsIGkpKVxuICAgICAgICAgICAgICAgICAgICBzaG91bGRSZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWluRW1wdHlMZW5ndGggPiBsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG1pbkVtcHR5TGVuZ3RoID0gbGluZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChtaW5JbmRlbnQgPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIG1pbkluZGVudCA9IG1pbkVtcHR5TGVuZ3RoO1xuICAgICAgICAgICAgaWdub3JlQmxhbmtMaW5lcyA9IGZhbHNlO1xuICAgICAgICAgICAgc2hvdWxkUmVtb3ZlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5zZXJ0QXRUYWJTdG9wICYmIG1pbkluZGVudCAlIHRhYlNpemUgIT0gMClcbiAgICAgICAgICAgIG1pbkluZGVudCA9IE1hdGguZmxvb3IobWluSW5kZW50IC8gdGFiU2l6ZSkgKiB0YWJTaXplO1xuXG4gICAgICAgIGl0ZXIoc2hvdWxkUmVtb3ZlID8gdW5jb21tZW50IDogY29tbWVudCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtTeW50YXhNb2RlfVxuICAgICAqL1xuICAgIHRoaXMudG9nZ2xlQmxvY2tDb21tZW50ID0gZnVuY3Rpb24oc3RhdGUsIHNlc3Npb24sIHJhbmdlLCBjdXJzb3IpIHtcbiAgICAgICAgdmFyIGNvbW1lbnQgPSB0aGlzLmJsb2NrQ29tbWVudDtcbiAgICAgICAgaWYgKCFjb21tZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIWNvbW1lbnQuc3RhcnQgJiYgY29tbWVudFswXSlcbiAgICAgICAgICAgIGNvbW1lbnQgPSBjb21tZW50WzBdO1xuXG4gICAgICAgIHZhciBpdGVyYXRvciA9IG5ldyBUb2tlbkl0ZXJhdG9yKHNlc3Npb24sIGN1cnNvci5yb3csIGN1cnNvci5jb2x1bW4pO1xuICAgICAgICB2YXIgdG9rZW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW4oKTtcblxuICAgICAgICB2YXIgc2VsID0gc2Vzc2lvbi5zZWxlY3Rpb247XG4gICAgICAgIHZhciBpbml0aWFsUmFuZ2UgPSBzZXNzaW9uLnNlbGVjdGlvbi50b09yaWVudGVkUmFuZ2UoKTtcbiAgICAgICAgdmFyIHN0YXJ0Um93LCBjb2xEaWZmO1xuXG4gICAgICAgIGlmICh0b2tlbiAmJiAvY29tbWVudC8udGVzdCh0b2tlbi50eXBlKSkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0UmFuZ2UsIGVuZFJhbmdlO1xuICAgICAgICAgICAgd2hpbGUgKHRva2VuICYmIC9jb21tZW50Ly50ZXN0KHRva2VuLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0b2tlbi52YWx1ZS5pbmRleE9mKGNvbW1lbnQuc3RhcnQpO1xuICAgICAgICAgICAgICAgIGlmIChpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Sb3coKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpICsgaTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRSYW5nZSA9IG5ldyBSYW5nZShyb3csIGNvbHVtbiwgcm93LCBjb2x1bW4gKyBjb21tZW50LnN0YXJ0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBCYWNrd2FyZCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBuZXcgVG9rZW5JdGVyYXRvcihzZXNzaW9uLCBjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uKTtcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IGl0ZXJhdG9yLmdldEN1cnJlbnRUb2tlbigpO1xuICAgICAgICAgICAgd2hpbGUgKHRva2VuICYmIC9jb21tZW50Ly50ZXN0KHRva2VuLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0b2tlbi52YWx1ZS5pbmRleE9mKGNvbW1lbnQuZW5kKTtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gaXRlcmF0b3IuZ2V0Q3VycmVudFRva2VuUm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2x1bW4gPSBpdGVyYXRvci5nZXRDdXJyZW50VG9rZW5Db2x1bW4oKSArIGk7XG4gICAgICAgICAgICAgICAgICAgIGVuZFJhbmdlID0gbmV3IFJhbmdlKHJvdywgY29sdW1uLCByb3csIGNvbHVtbiArIGNvbW1lbnQuZW5kLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b2tlbiA9IGl0ZXJhdG9yLnN0ZXBGb3J3YXJkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW5kUmFuZ2UpXG4gICAgICAgICAgICAgICAgc2Vzc2lvbi5yZW1vdmUoZW5kUmFuZ2UpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0UmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLnJlbW92ZShzdGFydFJhbmdlKTtcbiAgICAgICAgICAgICAgICBzdGFydFJvdyA9IHN0YXJ0UmFuZ2Uuc3RhcnQucm93O1xuICAgICAgICAgICAgICAgIGNvbERpZmYgPSAtY29tbWVudC5zdGFydC5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xEaWZmID0gY29tbWVudC5zdGFydC5sZW5ndGg7XG4gICAgICAgICAgICBzdGFydFJvdyA9IHJhbmdlLnN0YXJ0LnJvdztcbiAgICAgICAgICAgIHNlc3Npb24uaW5zZXJ0KHJhbmdlLmVuZCwgY29tbWVudC5lbmQpO1xuICAgICAgICAgICAgc2Vzc2lvbi5pbnNlcnQocmFuZ2Uuc3RhcnQsIGNvbW1lbnQuc3RhcnQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRvZG86IHNlbGVjdGlvbiBzaG91bGQgaGF2ZSBlbmRlZCB1cCBpbiB0aGUgcmlnaHQgcGxhY2UgYXV0b21hdGljYWxseSFcbiAgICAgICAgaWYgKGluaXRpYWxSYW5nZS5zdGFydC5yb3cgPT0gc3RhcnRSb3cpXG4gICAgICAgICAgICBpbml0aWFsUmFuZ2Uuc3RhcnQuY29sdW1uICs9IGNvbERpZmY7XG4gICAgICAgIGlmIChpbml0aWFsUmFuZ2UuZW5kLnJvdyA9PSBzdGFydFJvdylcbiAgICAgICAgICAgIGluaXRpYWxSYW5nZS5lbmQuY29sdW1uICs9IGNvbERpZmY7XG4gICAgICAgIHNlc3Npb24uc2VsZWN0aW9uLmZyb21PcmllbnRlZFJhbmdlKGluaXRpYWxSYW5nZSk7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0TmV4dExpbmVJbmRlbnQgPSBmdW5jdGlvbihzdGF0ZSwgbGluZSwgdGFiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRnZXRJbmRlbnQobGluZSk7XG4gICAgfTtcblxuICAgIHRoaXMuY2hlY2tPdXRkZW50ID0gZnVuY3Rpb24oc3RhdGUsIGxpbmUsIGlucHV0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5hdXRvT3V0ZGVudCA9IGZ1bmN0aW9uKHN0YXRlLCBkb2MsIHJvdykge1xuICAgIH07XG5cbiAgICB0aGlzLiRnZXRJbmRlbnQgPSBmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHJldHVybiBsaW5lLm1hdGNoKC9eXFxzKi8pWzBdO1xuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZVdvcmtlciA9IGZ1bmN0aW9uKHNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlTW9kZURlbGVnYXRlcyA9IGZ1bmN0aW9uIChtYXBwaW5nKSB7XG4gICAgICAgIHRoaXMuJGVtYmVkcyA9IFtdO1xuICAgICAgICB0aGlzLiRtb2RlcyA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpIGluIG1hcHBpbmcpIHtcbiAgICAgICAgICAgIGlmIChtYXBwaW5nW2ldKSB7XG4gICAgICAgICAgICAgICAgdmFyIE1vZGUgPSBtYXBwaW5nW2ldO1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IE1vZGUucHJvdG90eXBlLiRpZDtcbiAgICAgICAgICAgICAgICB2YXIgbW9kZSA9IGNvbmZpZy4kbW9kZXNbaWRdO1xuICAgICAgICAgICAgICAgIGlmICghbW9kZSlcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLiRtb2Rlc1tpZF0gPSBtb2RlID0gbmV3IE1vZGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy4kbW9kZXNbaV0pXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy4kbW9kZXNbaV0gPSBtb2RlO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVtYmVkcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuJG1vZGVzW2ldID0gbW9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWxlZ2F0aW9ucyA9IFtcInRvZ2dsZUJsb2NrQ29tbWVudFwiLCBcInRvZ2dsZUNvbW1lbnRMaW5lc1wiLCBcImdldE5leHRMaW5lSW5kZW50XCIsXG4gICAgICAgICAgICBcImNoZWNrT3V0ZGVudFwiLCBcImF1dG9PdXRkZW50XCIsIFwidHJhbnNmb3JtQWN0aW9uXCIsIFwiZ2V0Q29tcGxldGlvbnNcIl07XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWxlZ2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgKGZ1bmN0aW9uKHNjb3BlKSB7XG4gICAgICAgICAgICAgIHZhciBmdW5jdGlvbk5hbWUgPSBkZWxlZ2F0aW9uc1tpXTtcbiAgICAgICAgICAgICAgdmFyIGRlZmF1bHRIYW5kbGVyID0gc2NvcGVbZnVuY3Rpb25OYW1lXTtcbiAgICAgICAgICAgICAgc2NvcGVbZGVsZWdhdGlvbnNbaV1dID1cbiAgICAgICAgICAgICAgICAgIC8qKiBAdGhpcyB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5TeW50YXhNb2RlfSAqL1xuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkZWxlZ2F0b3IoZnVuY3Rpb25OYW1lLCBhcmd1bWVudHMsIGRlZmF1bHRIYW5kbGVyKTtcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7U3ludGF4TW9kZX1cbiAgICAgKi9cbiAgICB0aGlzLiRkZWxlZ2F0b3IgPSBmdW5jdGlvbihtZXRob2QsIGFyZ3MsIGRlZmF1bHRIYW5kbGVyKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IGFyZ3NbMF0gfHwgXCJzdGFydFwiO1xuICAgICAgICBpZiAodHlwZW9mIHN0YXRlICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN0YXRlWzJdKSkge1xuICAgICAgICAgICAgICAgIHZhciBsYW5ndWFnZSA9IHN0YXRlWzJdW3N0YXRlWzJdLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIHZhciBtb2RlID0gdGhpcy4kbW9kZXNbbGFuZ3VhZ2VdO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kZVttZXRob2RdLmFwcGx5KG1vZGUsIFtzdGF0ZVsxXV0uY29uY2F0KFtdLnNsaWNlLmNhbGwoYXJncywgMSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXRlID0gc3RhdGVbMF0gfHwgXCJzdGFydFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRlbWJlZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghdGhpcy4kbW9kZXNbdGhpcy4kZW1iZWRzW2ldXSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHZhciBzcGxpdCA9IHN0YXRlLnNwbGl0KHRoaXMuJGVtYmVkc1tpXSk7XG4gICAgICAgICAgICBpZiAoIXNwbGl0WzBdICYmIHNwbGl0WzFdKSB7XG4gICAgICAgICAgICAgICAgYXJnc1swXSA9IHNwbGl0WzFdO1xuICAgICAgICAgICAgICAgIHZhciBtb2RlID0gdGhpcy4kbW9kZXNbdGhpcy4kZW1iZWRzW2ldXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kZVttZXRob2RdLmFwcGx5KG1vZGUsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciByZXQgPSBkZWZhdWx0SGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRIYW5kbGVyID8gcmV0IDogdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7U3ludGF4TW9kZX1cbiAgICAgKi9cbiAgICB0aGlzLnRyYW5zZm9ybUFjdGlvbiA9IGZ1bmN0aW9uKHN0YXRlLCBhY3Rpb24sIGVkaXRvciwgc2Vzc2lvbiwgcGFyYW0pIHtcbiAgICAgICAgaWYgKHRoaXMuJGJlaGF2aW91cikge1xuICAgICAgICAgICAgdmFyIGJlaGF2aW91cnMgPSB0aGlzLiRiZWhhdmlvdXIuZ2V0QmVoYXZpb3VycygpO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGJlaGF2aW91cnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmVoYXZpb3Vyc1trZXldW2FjdGlvbl0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IGJlaGF2aW91cnNba2V5XVthY3Rpb25dLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHRoaXMge1N5bnRheE1vZGV9XG4gICAgICovXG4gICAgdGhpcy5nZXRLZXl3b3JkcyA9IGZ1bmN0aW9uKGFwcGVuZCkge1xuICAgICAgICAvLyB0aGlzIGlzIGZvciBhdXRvY29tcGxldGlvbiB0byBwaWNrIHVwIHJlZ2V4cCdlZCBrZXl3b3Jkc1xuICAgICAgICBpZiAoIXRoaXMuY29tcGxldGlvbktleXdvcmRzKSB7XG4gICAgICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLiR0b2tlbml6ZXJbXCJydWxlc1wiXTtcbiAgICAgICAgICAgIHZhciBjb21wbGV0aW9uS2V5d29yZHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIHJ1bGUgaW4gcnVsZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcnVsZUl0ciA9IHJ1bGVzW3J1bGVdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSAwLCBsID0gcnVsZUl0ci5sZW5ndGg7IHIgPCBsOyByKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBydWxlSXRyW3JdLnRva2VuID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoL2tleXdvcmR8c3VwcG9ydHxzdG9yYWdlLy50ZXN0KHJ1bGVJdHJbcl0udG9rZW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25LZXl3b3Jkcy5wdXNoKHJ1bGVJdHJbcl0ucmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBydWxlSXRyW3JdLnRva2VuID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gMCwgYUxlbmd0aCA9IHJ1bGVJdHJbcl0udG9rZW4ubGVuZ3RoOyBhIDwgYUxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9rZXl3b3JkfHN1cHBvcnR8c3RvcmFnZS8udGVzdChydWxlSXRyW3JdLnRva2VuW2FdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkcm9wIHN1cnJvdW5kaW5nIHBhcmVuc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHJ1bGVJdHJbcl0ucmVnZXgubWF0Y2goL1xcKC4rP1xcKS9nKVthXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbktleXdvcmRzLnB1c2gocnVsZS5zdWJzdHIoMSwgcnVsZS5sZW5ndGggLSAyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb21wbGV0aW9uS2V5d29yZHMgPSBjb21wbGV0aW9uS2V5d29yZHM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyBmb3IgaGlnaGxpZ2h0aW5nIGVtYmVkIHJ1bGVzLCBsaWtlIEhBTUwvUnVieSBvciBPYmotQy9DXG4gICAgICAgIGlmICghYXBwZW5kKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGtleXdvcmRMaXN0O1xuICAgICAgICByZXR1cm4gY29tcGxldGlvbktleXdvcmRzLmNvbmNhdCh0aGlzLiRrZXl3b3JkTGlzdCB8fCBbXSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtTeW50YXhNb2RlfVxuICAgICAqL1xuICAgIHRoaXMuJGNyZWF0ZUtleXdvcmRMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy4kaGlnaGxpZ2h0UnVsZXMpXG4gICAgICAgICAgICB0aGlzLmdldFRva2VuaXplcigpO1xuICAgICAgICByZXR1cm4gdGhpcy4ka2V5d29yZExpc3QgPSB0aGlzLiRoaWdobGlnaHRSdWxlcy4ka2V5d29yZExpc3QgfHwgW107XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtTeW50YXhNb2RlfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0Q29tcGxldGlvbnMgPSBmdW5jdGlvbihzdGF0ZSwgc2Vzc2lvbiwgcG9zLCBwcmVmaXgpIHtcbiAgICAgICAgdmFyIGtleXdvcmRzID0gdGhpcy4ka2V5d29yZExpc3QgfHwgdGhpcy4kY3JlYXRlS2V5d29yZExpc3QoKTtcbiAgICAgICAgcmV0dXJuIGtleXdvcmRzLm1hcChmdW5jdGlvbih3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHdvcmQsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHdvcmQsXG4gICAgICAgICAgICAgICAgc2NvcmU6IDAsXG4gICAgICAgICAgICAgICAgbWV0YTogXCJrZXl3b3JkXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLiRpZCA9IFwiYWNlL21vZGUvdGV4dFwiO1xufSkuY2FsbChNb2RlLnByb3RvdHlwZSk7XG5cbmV4cG9ydHMuTW9kZSA9IE1vZGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/text.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mode/text_highlight_rules.js":
/*!****************************************************************!*\
  !*** ./node_modules/ace-code/src/mode/text_highlight_rules.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nconst deepCopy = (__webpack_require__(/*! ../lib/deep_copy */ \"./node_modules/ace-code/src/lib/deep_copy.js\").deepCopy);\n\n/**@type {(new() => Partial<import(\"../../ace-internal\").Ace.HighlightRules>) & {prototype: import(\"../../ace-internal\").Ace.HighlightRules}}*/\nvar TextHighlightRules;\nTextHighlightRules = function() {\n\n    // regexp must not have capturing parentheses\n    // regexps are ordered -> the first match is used\n\n    this.$rules = {\n        \"start\" : [{\n            token : \"empty_line\",\n            regex : '^$'\n        }, {\n            defaultToken : \"text\"\n        }]\n    };\n};\n\n(function() {\n\n    /**\n     * @param {import(\"../../ace-internal\").Ace.HighlightRulesMap} rules\n     * @param {string} [prefix]\n     * @this {import(\"../../ace-internal\").Ace.HighlightRules}\n     */\n    this.addRules = function(rules, prefix) {\n        if (!prefix) {\n            for (var key in rules)\n                this.$rules[key] = rules[key];\n            return;\n        }\n        for (var key in rules) {\n            var state = rules[key];\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                if (rule.next || rule.onMatch) {\n                    if (typeof rule.next == \"string\") {\n                        if (rule.next.indexOf(prefix) !== 0)\n                            rule.next = prefix + rule.next;\n                    }\n                    if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)\n                        rule.nextState = prefix + rule.nextState;\n                }\n            }\n            this.$rules[prefix + key] = state;\n        }\n    };\n\n    /**\n     * @returns {import(\"../../ace-internal\").Ace.HighlightRulesMap}\n     * @this {import(\"../../ace-internal\").Ace.HighlightRules}\n     */\n    this.getRules = function() {\n        return this.$rules;\n    };\n\n    /**\n     * @param HighlightRules\n     * @param prefix\n     * @param escapeRules\n     * @param states\n     * @param append\n     * @this {import(\"../../ace-internal\").Ace.HighlightRules}\n     */\n    this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {\n        var embedRules = typeof HighlightRules == \"function\"\n            ? new HighlightRules().getRules()\n            : HighlightRules;\n        if (states) {\n            for (var i = 0; i < states.length; i++)\n                states[i] = prefix + states[i];\n        } else {\n            states = [];\n            for (var key in embedRules)\n                states.push(prefix + key);\n        }\n\n        this.addRules(embedRules, prefix);\n\n        if (escapeRules) {\n            var addRules = Array.prototype[append ? \"push\" : \"unshift\"];\n            for (var i = 0; i < states.length; i++)\n                addRules.apply(this.$rules[states[i]], deepCopy(escapeRules));\n        }\n\n        if (!this.$embeds)\n            this.$embeds = [];\n        this.$embeds.push(prefix);\n    };\n\n    /**\n     * @this {import(\"../../ace-internal\").Ace.HighlightRules}\n     */\n    this.getEmbeds = function() {\n        return this.$embeds;\n    };\n\n    var pushState = function(currentState, stack) {\n        if (currentState != \"start\" || stack.length)\n            stack.unshift(this.nextState, currentState);\n        return this.nextState;\n    };\n    var popState = function(currentState, stack) {\n        // if (stack[0] === currentState)\n        stack.shift();\n        return stack.shift() || \"start\";\n    };\n\n    /**\n     * @this {import(\"../../ace-internal\").Ace.HighlightRules}\n     */\n    this.normalizeRules = function() {\n        var id = 0;\n        var rules = this.$rules;\n        function processState(key) {\n            var state = rules[key];\n            state[\"processed\"] = true;\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                var toInsert = null;\n                if (Array.isArray(rule)) {\n                    toInsert = rule;\n                    // @ts-ignore\n                    rule = {};\n                }\n                if (!rule.regex && rule.start) {\n                    rule.regex = rule.start;\n                    if (!rule.next)\n                        rule.next = [];\n                    rule.next.push({\n                        defaultToken: rule.token\n                    }, {\n                        token: rule.token + \".end\",\n                        regex: rule.end || rule.start,\n                        next: \"pop\"\n                    });\n                    rule.token = rule.token + \".start\";\n                    rule.push = true;\n                }\n                var next = rule.next || rule.push;\n                if (next && Array.isArray(next)) {\n                    var stateName = rule.stateName;\n                    if (!stateName)  {\n                        stateName = rule.token;\n                        if (typeof stateName != \"string\")\n                            stateName = stateName[0] || \"\";\n                        if (rules[stateName])\n                            stateName += id++;\n                    }\n                    rules[stateName] = next;\n                    rule.next = stateName;\n                    processState(stateName);\n                } else if (next == \"pop\") {\n                    rule.next = popState;\n                }\n\n                if (rule.push) {\n                    rule.nextState = rule.next || rule.push;\n                    rule.next = pushState;\n                    delete rule.push;\n                }\n\n                if (rule.rules) {\n                    for (var r in rule.rules) {\n                        if (rules[r]) {\n                            if (rules[r].push)\n                                rules[r].push.apply(rules[r], rule.rules[r]);\n                        } else {\n                            rules[r] = rule.rules[r];\n                        }\n                    }\n                }\n                var includeName = typeof rule == \"string\" ? rule : rule.include;\n                if (includeName) {\n                    if (includeName === \"$self\")\n                        includeName = \"start\";\n                    if (Array.isArray(includeName))\n                        toInsert = includeName.map(function(x) { return rules[x]; });\n                    else\n                        toInsert = rules[includeName];\n                }\n\n                if (toInsert) {\n                    /**\n                     * @type{any[]}\n                     */\n                    // @ts-ignore\n                    var args = [i, 1].concat(toInsert);\n                    if (rule.noEscape)\n                        args = args.filter(function(x) {return !x.next;});\n                    state.splice.apply(state, args);\n                    // skip included rules since they are already processed\n                    //i += args.length - 3;\n                    i--;\n                }\n                \n                if (rule.keywordMap) {\n                    rule.token = this.createKeywordMapper(\n                        rule.keywordMap, rule.defaultToken || \"text\", rule.caseInsensitive\n                    );\n                    delete rule.defaultToken;\n                }\n            }\n        }\n        Object.keys(rules).forEach(processState, this);\n    };\n\n    this.createKeywordMapper = function(map, defaultToken, ignoreCase, splitChar) {\n        var keywords = Object.create(null);\n        this.$keywordList = [];\n        Object.keys(map).forEach(function(className) {\n            var a = map[className];\n            var list = a.split(splitChar || \"|\");\n            for (var i = list.length; i--; ) {\n                var word = list[i];\n                this.$keywordList.push(word);\n                if (ignoreCase)\n                    word = word.toLowerCase(); \n                keywords[word] = className;\n            }\n        }, this);\n        map = null;\n        return ignoreCase\n            ? function(value) {return keywords[value.toLowerCase()] || defaultToken; }\n            : function(value) {return keywords[value] || defaultToken; };\n    };\n\n    /**\n     * @this {import(\"../../ace-internal\").Ace.HighlightRules}\n     */\n    this.getKeywords = function() {\n        return this.$keywords;\n    };\n\n}).call(TextHighlightRules.prototype);\n\nexports.TextHighlightRules = TextHighlightRules;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vZGUvdGV4dF9oaWdobGlnaHRfcnVsZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsaUJBQWlCLHNHQUFvQzs7QUFFckQsVUFBVSx1RUFBdUUsNERBQTREO0FBQzdJO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZUFBZSxvREFBb0Q7QUFDbkUsZUFBZSxRQUFRO0FBQ3ZCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0JBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGtCQUFrQjtBQUNuRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxnQkFBZ0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLEtBQUs7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0IsK0JBQStCO0FBQy9COztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQsMEJBQTBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW9kZS90ZXh0X2hpZ2hsaWdodF9ydWxlcy5qcz9lNTcxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBkZWVwQ29weSA9IHJlcXVpcmUoXCIuLi9saWIvZGVlcF9jb3B5XCIpLmRlZXBDb3B5O1xuXG4vKipAdHlwZSB7KG5ldygpID0+IFBhcnRpYWw8aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5IaWdobGlnaHRSdWxlcz4pICYge3Byb3RvdHlwZTogaW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5IaWdobGlnaHRSdWxlc319Ki9cbnZhciBUZXh0SGlnaGxpZ2h0UnVsZXM7XG5UZXh0SGlnaGxpZ2h0UnVsZXMgPSBmdW5jdGlvbigpIHtcblxuICAgIC8vIHJlZ2V4cCBtdXN0IG5vdCBoYXZlIGNhcHR1cmluZyBwYXJlbnRoZXNlc1xuICAgIC8vIHJlZ2V4cHMgYXJlIG9yZGVyZWQgLT4gdGhlIGZpcnN0IG1hdGNoIGlzIHVzZWRcblxuICAgIHRoaXMuJHJ1bGVzID0ge1xuICAgICAgICBcInN0YXJ0XCIgOiBbe1xuICAgICAgICAgICAgdG9rZW4gOiBcImVtcHR5X2xpbmVcIixcbiAgICAgICAgICAgIHJlZ2V4IDogJ14kJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkZWZhdWx0VG9rZW4gOiBcInRleHRcIlxuICAgICAgICB9XVxuICAgIH07XG59O1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuSGlnaGxpZ2h0UnVsZXNNYXB9IHJ1bGVzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtwcmVmaXhdXG4gICAgICogQHRoaXMge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuSGlnaGxpZ2h0UnVsZXN9XG4gICAgICovXG4gICAgdGhpcy5hZGRSdWxlcyA9IGZ1bmN0aW9uKHJ1bGVzLCBwcmVmaXgpIHtcbiAgICAgICAgaWYgKCFwcmVmaXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBydWxlcylcbiAgICAgICAgICAgICAgICB0aGlzLiRydWxlc1trZXldID0gcnVsZXNba2V5XTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcnVsZXMpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHJ1bGVzW2tleV07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSBzdGF0ZVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocnVsZS5uZXh0IHx8IHJ1bGUub25NYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUubmV4dCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVsZS5uZXh0LmluZGV4T2YocHJlZml4KSAhPT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlLm5leHQgPSBwcmVmaXggKyBydWxlLm5leHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUubmV4dFN0YXRlICYmIHJ1bGUubmV4dFN0YXRlLmluZGV4T2YocHJlZml4KSAhPT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUubmV4dFN0YXRlID0gcHJlZml4ICsgcnVsZS5uZXh0U3RhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kcnVsZXNbcHJlZml4ICsga2V5XSA9IHN0YXRlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLkhpZ2hsaWdodFJ1bGVzTWFwfVxuICAgICAqIEB0aGlzIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLkhpZ2hsaWdodFJ1bGVzfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0UnVsZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHJ1bGVzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gSGlnaGxpZ2h0UnVsZXNcbiAgICAgKiBAcGFyYW0gcHJlZml4XG4gICAgICogQHBhcmFtIGVzY2FwZVJ1bGVzXG4gICAgICogQHBhcmFtIHN0YXRlc1xuICAgICAqIEBwYXJhbSBhcHBlbmRcbiAgICAgKiBAdGhpcyB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5IaWdobGlnaHRSdWxlc31cbiAgICAgKi9cbiAgICB0aGlzLmVtYmVkUnVsZXMgPSBmdW5jdGlvbiAoSGlnaGxpZ2h0UnVsZXMsIHByZWZpeCwgZXNjYXBlUnVsZXMsIHN0YXRlcywgYXBwZW5kKSB7XG4gICAgICAgIHZhciBlbWJlZFJ1bGVzID0gdHlwZW9mIEhpZ2hsaWdodFJ1bGVzID09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBuZXcgSGlnaGxpZ2h0UnVsZXMoKS5nZXRSdWxlcygpXG4gICAgICAgICAgICA6IEhpZ2hsaWdodFJ1bGVzO1xuICAgICAgICBpZiAoc3RhdGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBzdGF0ZXNbaV0gPSBwcmVmaXggKyBzdGF0ZXNbaV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBlbWJlZFJ1bGVzKVxuICAgICAgICAgICAgICAgIHN0YXRlcy5wdXNoKHByZWZpeCArIGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFkZFJ1bGVzKGVtYmVkUnVsZXMsIHByZWZpeCk7XG5cbiAgICAgICAgaWYgKGVzY2FwZVJ1bGVzKSB7XG4gICAgICAgICAgICB2YXIgYWRkUnVsZXMgPSBBcnJheS5wcm90b3R5cGVbYXBwZW5kID8gXCJwdXNoXCIgOiBcInVuc2hpZnRcIl07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBhZGRSdWxlcy5hcHBseSh0aGlzLiRydWxlc1tzdGF0ZXNbaV1dLCBkZWVwQ29weShlc2NhcGVSdWxlcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLiRlbWJlZHMpXG4gICAgICAgICAgICB0aGlzLiRlbWJlZHMgPSBbXTtcbiAgICAgICAgdGhpcy4kZW1iZWRzLnB1c2gocHJlZml4KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHRoaXMge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuSGlnaGxpZ2h0UnVsZXN9XG4gICAgICovXG4gICAgdGhpcy5nZXRFbWJlZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGVtYmVkcztcbiAgICB9O1xuXG4gICAgdmFyIHB1c2hTdGF0ZSA9IGZ1bmN0aW9uKGN1cnJlbnRTdGF0ZSwgc3RhY2spIHtcbiAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSAhPSBcInN0YXJ0XCIgfHwgc3RhY2subGVuZ3RoKVxuICAgICAgICAgICAgc3RhY2sudW5zaGlmdCh0aGlzLm5leHRTdGF0ZSwgY3VycmVudFN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dFN0YXRlO1xuICAgIH07XG4gICAgdmFyIHBvcFN0YXRlID0gZnVuY3Rpb24oY3VycmVudFN0YXRlLCBzdGFjaykge1xuICAgICAgICAvLyBpZiAoc3RhY2tbMF0gPT09IGN1cnJlbnRTdGF0ZSlcbiAgICAgICAgc3RhY2suc2hpZnQoKTtcbiAgICAgICAgcmV0dXJuIHN0YWNrLnNoaWZ0KCkgfHwgXCJzdGFydFwiO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7aW1wb3J0KFwiLi4vLi4vYWNlLWludGVybmFsXCIpLkFjZS5IaWdobGlnaHRSdWxlc31cbiAgICAgKi9cbiAgICB0aGlzLm5vcm1hbGl6ZVJ1bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpZCA9IDA7XG4gICAgICAgIHZhciBydWxlcyA9IHRoaXMuJHJ1bGVzO1xuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzU3RhdGUoa2V5KSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBydWxlc1trZXldO1xuICAgICAgICAgICAgc3RhdGVbXCJwcm9jZXNzZWRcIl0gPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGF0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBydWxlID0gc3RhdGVbaV07XG4gICAgICAgICAgICAgICAgdmFyIHRvSW5zZXJ0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShydWxlKSkge1xuICAgICAgICAgICAgICAgICAgICB0b0luc2VydCA9IHJ1bGU7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgcnVsZSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXJ1bGUucmVnZXggJiYgcnVsZS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBydWxlLnJlZ2V4ID0gcnVsZS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFydWxlLm5leHQpXG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLm5leHQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5uZXh0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFRva2VuOiBydWxlLnRva2VuXG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBydWxlLnRva2VuICsgXCIuZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleDogcnVsZS5lbmQgfHwgcnVsZS5zdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IFwicG9wXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJ1bGUudG9rZW4gPSBydWxlLnRva2VuICsgXCIuc3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5wdXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG5leHQgPSBydWxlLm5leHQgfHwgcnVsZS5wdXNoO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0ICYmIEFycmF5LmlzQXJyYXkobmV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlTmFtZSA9IHJ1bGUuc3RhdGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlTmFtZSkgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlTmFtZSA9IHJ1bGUudG9rZW47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0YXRlTmFtZSAhPSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlTmFtZSA9IHN0YXRlTmFtZVswXSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGVzW3N0YXRlTmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVOYW1lICs9IGlkKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcnVsZXNbc3RhdGVOYW1lXSA9IG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIHJ1bGUubmV4dCA9IHN0YXRlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1N0YXRlKHN0YXRlTmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXh0ID09IFwicG9wXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5uZXh0ID0gcG9wU3RhdGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUucHVzaCkge1xuICAgICAgICAgICAgICAgICAgICBydWxlLm5leHRTdGF0ZSA9IHJ1bGUubmV4dCB8fCBydWxlLnB1c2g7XG4gICAgICAgICAgICAgICAgICAgIHJ1bGUubmV4dCA9IHB1c2hTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJ1bGUucHVzaDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocnVsZS5ydWxlcykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByIGluIHJ1bGUucnVsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydWxlc1tyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydWxlc1tyXS5wdXNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlc1tyXS5wdXNoLmFwcGx5KHJ1bGVzW3JdLCBydWxlLnJ1bGVzW3JdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZXNbcl0gPSBydWxlLnJ1bGVzW3JdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlTmFtZSA9IHR5cGVvZiBydWxlID09IFwic3RyaW5nXCIgPyBydWxlIDogcnVsZS5pbmNsdWRlO1xuICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZU5hbWUgPT09IFwiJHNlbGZcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVOYW1lID0gXCJzdGFydFwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbmNsdWRlTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0luc2VydCA9IGluY2x1ZGVOYW1lLm1hcChmdW5jdGlvbih4KSB7IHJldHVybiBydWxlc1t4XTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvSW5zZXJ0ID0gcnVsZXNbaW5jbHVkZU5hbWVdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0b0luc2VydCkge1xuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQHR5cGV7YW55W119XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW2ksIDFdLmNvbmNhdCh0b0luc2VydCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChydWxlLm5vRXNjYXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IGFyZ3MuZmlsdGVyKGZ1bmN0aW9uKHgpIHtyZXR1cm4gIXgubmV4dDt9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuc3BsaWNlLmFwcGx5KHN0YXRlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2tpcCBpbmNsdWRlZCBydWxlcyBzaW5jZSB0aGV5IGFyZSBhbHJlYWR5IHByb2Nlc3NlZFxuICAgICAgICAgICAgICAgICAgICAvL2kgKz0gYXJncy5sZW5ndGggLSAzO1xuICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChydWxlLmtleXdvcmRNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS50b2tlbiA9IHRoaXMuY3JlYXRlS2V5d29yZE1hcHBlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUua2V5d29yZE1hcCwgcnVsZS5kZWZhdWx0VG9rZW4gfHwgXCJ0ZXh0XCIsIHJ1bGUuY2FzZUluc2Vuc2l0aXZlXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBydWxlLmRlZmF1bHRUb2tlbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmtleXMocnVsZXMpLmZvckVhY2gocHJvY2Vzc1N0YXRlLCB0aGlzKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jcmVhdGVLZXl3b3JkTWFwcGVyID0gZnVuY3Rpb24obWFwLCBkZWZhdWx0VG9rZW4sIGlnbm9yZUNhc2UsIHNwbGl0Q2hhcikge1xuICAgICAgICB2YXIga2V5d29yZHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLiRrZXl3b3JkTGlzdCA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyhtYXApLmZvckVhY2goZnVuY3Rpb24oY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgYSA9IG1hcFtjbGFzc05hbWVdO1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBhLnNwbGl0KHNwbGl0Q2hhciB8fCBcInxcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gbGlzdC5sZW5ndGg7IGktLTsgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdvcmQgPSBsaXN0W2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuJGtleXdvcmRMaXN0LnB1c2god29yZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlnbm9yZUNhc2UpXG4gICAgICAgICAgICAgICAgICAgIHdvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKCk7IFxuICAgICAgICAgICAgICAgIGtleXdvcmRzW3dvcmRdID0gY2xhc3NOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgbWFwID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGlnbm9yZUNhc2VcbiAgICAgICAgICAgID8gZnVuY3Rpb24odmFsdWUpIHtyZXR1cm4ga2V5d29yZHNbdmFsdWUudG9Mb3dlckNhc2UoKV0gfHwgZGVmYXVsdFRva2VuOyB9XG4gICAgICAgICAgICA6IGZ1bmN0aW9uKHZhbHVlKSB7cmV0dXJuIGtleXdvcmRzW3ZhbHVlXSB8fCBkZWZhdWx0VG9rZW47IH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtpbXBvcnQoXCIuLi8uLi9hY2UtaW50ZXJuYWxcIikuQWNlLkhpZ2hsaWdodFJ1bGVzfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0S2V5d29yZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGtleXdvcmRzO1xuICAgIH07XG5cbn0pLmNhbGwoVGV4dEhpZ2hsaWdodFJ1bGVzLnByb3RvdHlwZSk7XG5cbmV4cG9ydHMuVGV4dEhpZ2hsaWdodFJ1bGVzID0gVGV4dEhpZ2hsaWdodFJ1bGVzO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mode/text_highlight_rules.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mouse/default_gutter_handler.js":
/*!*******************************************************************!*\
  !*** ./node_modules/ace-code/src/mouse/default_gutter_handler.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./mouse_handler\").MouseHandler} MouseHandler\n */\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar Tooltip = (__webpack_require__(/*! ../tooltip */ \"./node_modules/ace-code/src/tooltip.js\").Tooltip);\nvar nls = (__webpack_require__(/*! ../config */ \"./node_modules/ace-code/src/config.js\").nls);\nvar lang = __webpack_require__(/*! ../lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\n\n/**\n * @param {MouseHandler} mouseHandler\n * @this {MouseHandler}\n */\nfunction GutterHandler(mouseHandler) {\n    var editor = mouseHandler.editor;\n    var gutter = editor.renderer.$gutterLayer;\n    var tooltip = new GutterTooltip(editor);\n\n    mouseHandler.editor.setDefaultHandler(\"guttermousedown\", function(e) {\n        if (!editor.isFocused() || e.getButton() != 0)\n            return;\n        var gutterRegion = gutter.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\")\n            return;\n\n        var row = e.getDocumentPosition().row;\n        var selection = editor.session.selection;\n\n        if (e.getShiftKey())\n            selection.selectTo(row, 0);\n        else {\n            if (e.domEvent.detail == 2) {\n                editor.selectAll();\n                return e.preventDefault();\n            }\n            mouseHandler.$clickSelection = editor.selection.getLineRange(row);\n        }\n        mouseHandler.setState(\"selectByLines\");\n        mouseHandler.captureMouse(e);\n        return e.preventDefault();\n    });\n\n    var tooltipTimeout, mouseEvent;\n\n    function showTooltip() {\n        var row = mouseEvent.getDocumentPosition().row;\n\n        var maxRow = editor.session.getLength();\n        if (row == maxRow) {\n            var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;\n            var pos = mouseEvent.$pos;\n            if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column))\n                return hideTooltip();\n        }\n\n        tooltip.showTooltip(row);\n\n        if (!tooltip.isOpen)\n            return;\n\n        editor.on(\"mousewheel\", hideTooltip);\n\n        if (mouseHandler.$tooltipFollowsMouse) {\n            moveTooltip(mouseEvent);\n        } else {\n            var gutterRow = mouseEvent.getGutterRow();\n            var gutterCell = gutter.$lines.get(gutterRow);\n            if (gutterCell) {\n                var gutterElement = gutterCell.element.querySelector(\".ace_gutter_annotation\");\n                var rect = gutterElement.getBoundingClientRect();\n                var style = tooltip.getElement().style;\n                style.left = rect.right + \"px\";\n                style.top = rect.bottom + \"px\";\n            } else {\n                moveTooltip(mouseEvent);\n            }\n        }\n    }\n\n    function hideTooltip() {\n        if (tooltipTimeout)\n            tooltipTimeout = clearTimeout(tooltipTimeout);\n        if (tooltip.isOpen) {\n            tooltip.hideTooltip();\n            editor.off(\"mousewheel\", hideTooltip);\n        }\n    }\n\n    function moveTooltip(e) {\n        tooltip.setPosition(e.x, e.y);\n    }\n\n    mouseHandler.editor.setDefaultHandler(\"guttermousemove\", function(e) {\n        var target = e.domEvent.target || e.domEvent.srcElement;\n        if (dom.hasCssClass(target, \"ace_fold-widget\"))\n            return hideTooltip();\n\n        if (tooltip.isOpen && mouseHandler.$tooltipFollowsMouse)\n            moveTooltip(e);\n\n        mouseEvent = e;\n        if (tooltipTimeout)\n            return;\n        tooltipTimeout = setTimeout(function() {\n            tooltipTimeout = null;\n            if (mouseEvent && !mouseHandler.isMousePressed)\n                showTooltip();\n            else\n                hideTooltip();\n        }, 50);\n    });\n\n    event.addListener(editor.renderer.$gutter, \"mouseout\", function(e) {\n        mouseEvent = null;\n        if (!tooltip.isOpen || tooltipTimeout)\n            return;\n\n        tooltipTimeout = setTimeout(function() {\n            tooltipTimeout = null;\n            hideTooltip();\n        }, 50);\n    }, editor);\n    \n    editor.on(\"changeSession\", hideTooltip);\n    editor.on(\"input\", hideTooltip);\n}\n\nexports.GutterHandler = GutterHandler;\n\nclass GutterTooltip extends Tooltip {\n    constructor(editor) {\n        super(editor.container);\n        this.editor = editor;\n    }\n\n    setPosition(x, y) {\n        var windowWidth = window.innerWidth || document.documentElement.clientWidth;\n        var windowHeight = window.innerHeight || document.documentElement.clientHeight;\n        var width = this.getWidth();\n        var height = this.getHeight();\n        x += 15;\n        y += 15;\n        if (x + width > windowWidth) {\n            x -= (x + width) - windowWidth;\n        }\n        if (y + height > windowHeight) {\n            y -= 20 + height;\n        }\n        Tooltip.prototype.setPosition.call(this, x, y);\n    }\n    \n    static get annotationLabels() {\n        return {\n            error: {\n                singular: nls(\"gutter-tooltip.aria-label.error.singular\", \"error\"),\n                plural: nls(\"gutter-tooltip.aria-label.error.plural\", \"errors\")\n            },\n            security: {\n                singular: nls(\"gutter-tooltip.aria-label.security.singular\", \"security finding\"),\n                plural: nls(\"gutter-tooltip.aria-label.security.plural\", \"security findings\")\n            },\n            warning: {\n                singular: nls(\"gutter-tooltip.aria-label.warning.singular\", \"warning\"),\n                plural: nls(\"gutter-tooltip.aria-label.warning.plural\", \"warnings\")\n            },\n            info: {\n                singular: nls(\"gutter-tooltip.aria-label.info.singular\", \"information message\"),\n                plural: nls(\"gutter-tooltip.aria-label.info.plural\", \"information messages\")\n            },\n            hint: {\n                singular: nls(\"gutter-tooltip.aria-label.hint.singular\", \"suggestion\"),\n                plural: nls(\"gutter-tooltip.aria-label.hint.plural\", \"suggestions\")\n            }\n        };\n    }\n\n    showTooltip(row) {\n        var gutter = this.editor.renderer.$gutterLayer;\n        var annotationsInRow = gutter.$annotations[row];\n        var annotation;\n\n        if (annotationsInRow)\n            annotation = {\n                displayText: Array.from(annotationsInRow.displayText),\n                type: Array.from(annotationsInRow.type)\n            };\n        else annotation = {displayText: [], type: []};\n\n        // If the tooltip is for a row which has a closed fold, check whether there are\n        // annotations in the folded lines. If so, add a summary to the list of annotations.\n        var fold = gutter.session.getFoldLine(row);\n        if (fold && gutter.$showFoldedAnnotations) {\n            var annotationsInFold = {error: [], security: [], warning: [], info: [], hint: []};\n            var severityRank = {error: 1, security: 2, warning: 3, info: 4, hint: 5};\n            var mostSevereAnnotationTypeInFold;\n\n            for (let i = row + 1; i <= fold.end.row; i++) {\n                if (!gutter.$annotations[i]) continue;\n\n                for (var j = 0; j < gutter.$annotations[i].text.length; j++) {\n                    var annotationType = gutter.$annotations[i].type[j];\n                    annotationsInFold[annotationType].push(gutter.$annotations[i].text[j]);\n\n                    if (\n                        !mostSevereAnnotationTypeInFold ||\n                        severityRank[annotationType] < severityRank[mostSevereAnnotationTypeInFold]\n                    ) {\n                        mostSevereAnnotationTypeInFold = annotationType;\n                    }\n                }\n            }\n\n            if ([\"error\", \"security\", \"warning\"].includes(mostSevereAnnotationTypeInFold)) {\n                var summaryFoldedAnnotations = `${GutterTooltip.annotationsToSummaryString(\n                    annotationsInFold\n                )} in folded code.`;\n\n                annotation.displayText.push(summaryFoldedAnnotations);\n                annotation.type.push(mostSevereAnnotationTypeInFold + \"_fold\");\n            }\n        }\n\n        if (annotation.displayText.length === 0) return this.hide();\n\n        var annotationMessages = {error: [], security: [], warning: [], info: [], hint: []};\n        var iconClassName = gutter.$useSvgGutterIcons ? \"ace_icon_svg\" : \"ace_icon\";\n\n        // Construct the contents of the tooltip.\n        for (let i = 0; i < annotation.displayText.length; i++) {\n            var lineElement = dom.createElement(\"span\");\n\n            var iconElement = dom.createElement(\"span\");\n            iconElement.classList.add(...[`ace_${annotation.type[i]}`, iconClassName]);\n            iconElement.setAttribute(\n                \"aria-label\",\n                `${GutterTooltip.annotationLabels[annotation.type[i].replace(\"_fold\", \"\")].singular}`\n            );\n            iconElement.setAttribute(\"role\", \"img\");\n            // Set empty content to the img span to get it to show up\n            iconElement.appendChild(dom.createTextNode(\" \"));\n\n            lineElement.appendChild(iconElement);\n            lineElement.appendChild(dom.createTextNode(annotation.displayText[i]));\n            lineElement.appendChild(dom.createElement(\"br\"));\n\n            annotationMessages[annotation.type[i].replace(\"_fold\", \"\")].push(lineElement);\n        }\n\n        // Clear the current tooltip content\n        var tooltipElement = this.getElement();\n        dom.removeChildren(tooltipElement);\n\n        // Update the tooltip content\n        annotationMessages.error.forEach((el) => tooltipElement.appendChild(el));\n        annotationMessages.security.forEach((el) => tooltipElement.appendChild(el));\n        annotationMessages.warning.forEach((el) => tooltipElement.appendChild(el));\n        annotationMessages.info.forEach((el) => tooltipElement.appendChild(el));\n        annotationMessages.hint.forEach((el) => tooltipElement.appendChild(el));\n\n        tooltipElement.setAttribute(\"aria-live\", \"polite\");\n\n        if (!this.isOpen) {\n            this.setTheme(this.editor.renderer.theme);\n            this.setClassName(\"ace_gutter-tooltip\");\n        }\n\n        this.show();\n        this.editor._signal(\"showGutterTooltip\", this);\n    }\n\n    hideTooltip() {\n        this.$element.removeAttribute(\"aria-live\");\n        this.hide();\n        this.editor._signal(\"hideGutterTooltip\", this);\n    }\n\n    static annotationsToSummaryString(annotations) {\n        const summary = [];\n        const annotationTypes = [\"error\", \"security\", \"warning\", \"info\", \"hint\"];\n        for (const annotationType of annotationTypes) {\n            if (!annotations[annotationType].length) continue;\n            const label = annotations[annotationType].length === 1 ? GutterTooltip.annotationLabels[annotationType].singular : GutterTooltip.annotationLabels[annotationType].plural;\n            summary.push(`${annotations[annotationType].length} ${label}`);\n        }\n        return summary.join(\", \");\n    }\n}\n\nexports.GutterTooltip = GutterTooltip;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL2RlZmF1bHRfZ3V0dGVyX2hhbmRsZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsd0NBQXdDO0FBQ3JEO0FBQ0EsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLFlBQVksbUJBQU8sQ0FBQyw4REFBYztBQUNsQyxjQUFjLHlGQUE2QjtBQUMzQyxVQUFVLG1GQUF3QjtBQUNsQyxXQUFXLG1CQUFPLENBQUMsNERBQWE7O0FBRWhDO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLGdDQUFnQztBQUNoQzs7QUFFQSxrQ0FBa0MsbUJBQW1CO0FBQ3JEOztBQUVBLGdDQUFnQyx3Q0FBd0M7QUFDeEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0EsbUJBQW1COztBQUVuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxrQ0FBa0M7QUFDbEM7O0FBRUE7QUFDQSx3QkFBd0IsbUNBQW1DO0FBQzNEOztBQUVBO0FBQ0EsaURBQWlELG1CQUFtQjtBQUNwRTtBQUNBO0FBQ0EsbUJBQW1CLGlGQUFpRjtBQUNwRztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixvQ0FBb0MsRUFBRSxNQUFNO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL2RlZmF1bHRfZ3V0dGVyX2hhbmRsZXIuanM/OTJmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vbW91c2VfaGFuZGxlclwiKS5Nb3VzZUhhbmRsZXJ9IE1vdXNlSGFuZGxlclxuICovXG52YXIgZG9tID0gcmVxdWlyZShcIi4uL2xpYi9kb21cIik7XG52YXIgZXZlbnQgPSByZXF1aXJlKFwiLi4vbGliL2V2ZW50XCIpO1xudmFyIFRvb2x0aXAgPSByZXF1aXJlKFwiLi4vdG9vbHRpcFwiKS5Ub29sdGlwO1xudmFyIG5scyA9IHJlcXVpcmUoXCIuLi9jb25maWdcIikubmxzO1xudmFyIGxhbmcgPSByZXF1aXJlKFwiLi4vbGliL2xhbmdcIik7XG5cbi8qKlxuICogQHBhcmFtIHtNb3VzZUhhbmRsZXJ9IG1vdXNlSGFuZGxlclxuICogQHRoaXMge01vdXNlSGFuZGxlcn1cbiAqL1xuZnVuY3Rpb24gR3V0dGVySGFuZGxlcihtb3VzZUhhbmRsZXIpIHtcbiAgICB2YXIgZWRpdG9yID0gbW91c2VIYW5kbGVyLmVkaXRvcjtcbiAgICB2YXIgZ3V0dGVyID0gZWRpdG9yLnJlbmRlcmVyLiRndXR0ZXJMYXllcjtcbiAgICB2YXIgdG9vbHRpcCA9IG5ldyBHdXR0ZXJUb29sdGlwKGVkaXRvcik7XG5cbiAgICBtb3VzZUhhbmRsZXIuZWRpdG9yLnNldERlZmF1bHRIYW5kbGVyKFwiZ3V0dGVybW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCFlZGl0b3IuaXNGb2N1c2VkKCkgfHwgZS5nZXRCdXR0b24oKSAhPSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgZ3V0dGVyUmVnaW9uID0gZ3V0dGVyLmdldFJlZ2lvbihlKTtcblxuICAgICAgICBpZiAoZ3V0dGVyUmVnaW9uID09IFwiZm9sZFdpZGdldHNcIilcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB2YXIgcm93ID0gZS5nZXREb2N1bWVudFBvc2l0aW9uKCkucm93O1xuICAgICAgICB2YXIgc2VsZWN0aW9uID0gZWRpdG9yLnNlc3Npb24uc2VsZWN0aW9uO1xuXG4gICAgICAgIGlmIChlLmdldFNoaWZ0S2V5KCkpXG4gICAgICAgICAgICBzZWxlY3Rpb24uc2VsZWN0VG8ocm93LCAwKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZS5kb21FdmVudC5kZXRhaWwgPT0gMikge1xuICAgICAgICAgICAgICAgIGVkaXRvci5zZWxlY3RBbGwoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW91c2VIYW5kbGVyLiRjbGlja1NlbGVjdGlvbiA9IGVkaXRvci5zZWxlY3Rpb24uZ2V0TGluZVJhbmdlKHJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgbW91c2VIYW5kbGVyLnNldFN0YXRlKFwic2VsZWN0QnlMaW5lc1wiKTtcbiAgICAgICAgbW91c2VIYW5kbGVyLmNhcHR1cmVNb3VzZShlKTtcbiAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHZhciB0b29sdGlwVGltZW91dCwgbW91c2VFdmVudDtcblxuICAgIGZ1bmN0aW9uIHNob3dUb29sdGlwKCkge1xuICAgICAgICB2YXIgcm93ID0gbW91c2VFdmVudC5nZXREb2N1bWVudFBvc2l0aW9uKCkucm93O1xuXG4gICAgICAgIHZhciBtYXhSb3cgPSBlZGl0b3Iuc2Vzc2lvbi5nZXRMZW5ndGgoKTtcbiAgICAgICAgaWYgKHJvdyA9PSBtYXhSb3cpIHtcbiAgICAgICAgICAgIHZhciBzY3JlZW5Sb3cgPSBlZGl0b3IucmVuZGVyZXIucGl4ZWxUb1NjcmVlbkNvb3JkaW5hdGVzKDAsIG1vdXNlRXZlbnQueSkucm93O1xuICAgICAgICAgICAgdmFyIHBvcyA9IG1vdXNlRXZlbnQuJHBvcztcbiAgICAgICAgICAgIGlmIChzY3JlZW5Sb3cgPiBlZGl0b3Iuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUm93KHBvcy5yb3csIHBvcy5jb2x1bW4pKVxuICAgICAgICAgICAgICAgIHJldHVybiBoaWRlVG9vbHRpcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9vbHRpcC5zaG93VG9vbHRpcChyb3cpO1xuXG4gICAgICAgIGlmICghdG9vbHRpcC5pc09wZW4pXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgZWRpdG9yLm9uKFwibW91c2V3aGVlbFwiLCBoaWRlVG9vbHRpcCk7XG5cbiAgICAgICAgaWYgKG1vdXNlSGFuZGxlci4kdG9vbHRpcEZvbGxvd3NNb3VzZSkge1xuICAgICAgICAgICAgbW92ZVRvb2x0aXAobW91c2VFdmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZ3V0dGVyUm93ID0gbW91c2VFdmVudC5nZXRHdXR0ZXJSb3coKTtcbiAgICAgICAgICAgIHZhciBndXR0ZXJDZWxsID0gZ3V0dGVyLiRsaW5lcy5nZXQoZ3V0dGVyUm93KTtcbiAgICAgICAgICAgIGlmIChndXR0ZXJDZWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGd1dHRlckVsZW1lbnQgPSBndXR0ZXJDZWxsLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2VfZ3V0dGVyX2Fubm90YXRpb25cIik7XG4gICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBndXR0ZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHRvb2x0aXAuZ2V0RWxlbWVudCgpLnN0eWxlO1xuICAgICAgICAgICAgICAgIHN0eWxlLmxlZnQgPSByZWN0LnJpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHN0eWxlLnRvcCA9IHJlY3QuYm90dG9tICsgXCJweFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb3ZlVG9vbHRpcChtb3VzZUV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhpZGVUb29sdGlwKCkge1xuICAgICAgICBpZiAodG9vbHRpcFRpbWVvdXQpXG4gICAgICAgICAgICB0b29sdGlwVGltZW91dCA9IGNsZWFyVGltZW91dCh0b29sdGlwVGltZW91dCk7XG4gICAgICAgIGlmICh0b29sdGlwLmlzT3Blbikge1xuICAgICAgICAgICAgdG9vbHRpcC5oaWRlVG9vbHRpcCgpO1xuICAgICAgICAgICAgZWRpdG9yLm9mZihcIm1vdXNld2hlZWxcIiwgaGlkZVRvb2x0aXApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW92ZVRvb2x0aXAoZSkge1xuICAgICAgICB0b29sdGlwLnNldFBvc2l0aW9uKGUueCwgZS55KTtcbiAgICB9XG5cbiAgICBtb3VzZUhhbmRsZXIuZWRpdG9yLnNldERlZmF1bHRIYW5kbGVyKFwiZ3V0dGVybW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IGUuZG9tRXZlbnQudGFyZ2V0IHx8IGUuZG9tRXZlbnQuc3JjRWxlbWVudDtcbiAgICAgICAgaWYgKGRvbS5oYXNDc3NDbGFzcyh0YXJnZXQsIFwiYWNlX2ZvbGQtd2lkZ2V0XCIpKVxuICAgICAgICAgICAgcmV0dXJuIGhpZGVUb29sdGlwKCk7XG5cbiAgICAgICAgaWYgKHRvb2x0aXAuaXNPcGVuICYmIG1vdXNlSGFuZGxlci4kdG9vbHRpcEZvbGxvd3NNb3VzZSlcbiAgICAgICAgICAgIG1vdmVUb29sdGlwKGUpO1xuXG4gICAgICAgIG1vdXNlRXZlbnQgPSBlO1xuICAgICAgICBpZiAodG9vbHRpcFRpbWVvdXQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRvb2x0aXBUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRvb2x0aXBUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChtb3VzZUV2ZW50ICYmICFtb3VzZUhhbmRsZXIuaXNNb3VzZVByZXNzZWQpXG4gICAgICAgICAgICAgICAgc2hvd1Rvb2x0aXAoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBoaWRlVG9vbHRpcCgpO1xuICAgICAgICB9LCA1MCk7XG4gICAgfSk7XG5cbiAgICBldmVudC5hZGRMaXN0ZW5lcihlZGl0b3IucmVuZGVyZXIuJGd1dHRlciwgXCJtb3VzZW91dFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIG1vdXNlRXZlbnQgPSBudWxsO1xuICAgICAgICBpZiAoIXRvb2x0aXAuaXNPcGVuIHx8IHRvb2x0aXBUaW1lb3V0KVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHRvb2x0aXBUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRvb2x0aXBUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgIGhpZGVUb29sdGlwKCk7XG4gICAgICAgIH0sIDUwKTtcbiAgICB9LCBlZGl0b3IpO1xuICAgIFxuICAgIGVkaXRvci5vbihcImNoYW5nZVNlc3Npb25cIiwgaGlkZVRvb2x0aXApO1xuICAgIGVkaXRvci5vbihcImlucHV0XCIsIGhpZGVUb29sdGlwKTtcbn1cblxuZXhwb3J0cy5HdXR0ZXJIYW5kbGVyID0gR3V0dGVySGFuZGxlcjtcblxuY2xhc3MgR3V0dGVyVG9vbHRpcCBleHRlbmRzIFRvb2x0aXAge1xuICAgIGNvbnN0cnVjdG9yKGVkaXRvcikge1xuICAgICAgICBzdXBlcihlZGl0b3IuY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgfVxuXG4gICAgc2V0UG9zaXRpb24oeCwgeSkge1xuICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5nZXRXaWR0aCgpO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoKTtcbiAgICAgICAgeCArPSAxNTtcbiAgICAgICAgeSArPSAxNTtcbiAgICAgICAgaWYgKHggKyB3aWR0aCA+IHdpbmRvd1dpZHRoKSB7XG4gICAgICAgICAgICB4IC09ICh4ICsgd2lkdGgpIC0gd2luZG93V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHkgKyBoZWlnaHQgPiB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICAgIHkgLT0gMjAgKyBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgVG9vbHRpcC5wcm90b3R5cGUuc2V0UG9zaXRpb24uY2FsbCh0aGlzLCB4LCB5KTtcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGdldCBhbm5vdGF0aW9uTGFiZWxzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICBzaW5ndWxhcjogbmxzKFwiZ3V0dGVyLXRvb2x0aXAuYXJpYS1sYWJlbC5lcnJvci5zaW5ndWxhclwiLCBcImVycm9yXCIpLFxuICAgICAgICAgICAgICAgIHBsdXJhbDogbmxzKFwiZ3V0dGVyLXRvb2x0aXAuYXJpYS1sYWJlbC5lcnJvci5wbHVyYWxcIiwgXCJlcnJvcnNcIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWN1cml0eToge1xuICAgICAgICAgICAgICAgIHNpbmd1bGFyOiBubHMoXCJndXR0ZXItdG9vbHRpcC5hcmlhLWxhYmVsLnNlY3VyaXR5LnNpbmd1bGFyXCIsIFwic2VjdXJpdHkgZmluZGluZ1wiKSxcbiAgICAgICAgICAgICAgICBwbHVyYWw6IG5scyhcImd1dHRlci10b29sdGlwLmFyaWEtbGFiZWwuc2VjdXJpdHkucGx1cmFsXCIsIFwic2VjdXJpdHkgZmluZGluZ3NcIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3YXJuaW5nOiB7XG4gICAgICAgICAgICAgICAgc2luZ3VsYXI6IG5scyhcImd1dHRlci10b29sdGlwLmFyaWEtbGFiZWwud2FybmluZy5zaW5ndWxhclwiLCBcIndhcm5pbmdcIiksXG4gICAgICAgICAgICAgICAgcGx1cmFsOiBubHMoXCJndXR0ZXItdG9vbHRpcC5hcmlhLWxhYmVsLndhcm5pbmcucGx1cmFsXCIsIFwid2FybmluZ3NcIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgICAgICAgc2luZ3VsYXI6IG5scyhcImd1dHRlci10b29sdGlwLmFyaWEtbGFiZWwuaW5mby5zaW5ndWxhclwiLCBcImluZm9ybWF0aW9uIG1lc3NhZ2VcIiksXG4gICAgICAgICAgICAgICAgcGx1cmFsOiBubHMoXCJndXR0ZXItdG9vbHRpcC5hcmlhLWxhYmVsLmluZm8ucGx1cmFsXCIsIFwiaW5mb3JtYXRpb24gbWVzc2FnZXNcIilcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoaW50OiB7XG4gICAgICAgICAgICAgICAgc2luZ3VsYXI6IG5scyhcImd1dHRlci10b29sdGlwLmFyaWEtbGFiZWwuaGludC5zaW5ndWxhclwiLCBcInN1Z2dlc3Rpb25cIiksXG4gICAgICAgICAgICAgICAgcGx1cmFsOiBubHMoXCJndXR0ZXItdG9vbHRpcC5hcmlhLWxhYmVsLmhpbnQucGx1cmFsXCIsIFwic3VnZ2VzdGlvbnNcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzaG93VG9vbHRpcChyb3cpIHtcbiAgICAgICAgdmFyIGd1dHRlciA9IHRoaXMuZWRpdG9yLnJlbmRlcmVyLiRndXR0ZXJMYXllcjtcbiAgICAgICAgdmFyIGFubm90YXRpb25zSW5Sb3cgPSBndXR0ZXIuJGFubm90YXRpb25zW3Jvd107XG4gICAgICAgIHZhciBhbm5vdGF0aW9uO1xuXG4gICAgICAgIGlmIChhbm5vdGF0aW9uc0luUm93KVxuICAgICAgICAgICAgYW5ub3RhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogQXJyYXkuZnJvbShhbm5vdGF0aW9uc0luUm93LmRpc3BsYXlUZXh0KSxcbiAgICAgICAgICAgICAgICB0eXBlOiBBcnJheS5mcm9tKGFubm90YXRpb25zSW5Sb3cudHlwZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIGVsc2UgYW5ub3RhdGlvbiA9IHtkaXNwbGF5VGV4dDogW10sIHR5cGU6IFtdfTtcblxuICAgICAgICAvLyBJZiB0aGUgdG9vbHRpcCBpcyBmb3IgYSByb3cgd2hpY2ggaGFzIGEgY2xvc2VkIGZvbGQsIGNoZWNrIHdoZXRoZXIgdGhlcmUgYXJlXG4gICAgICAgIC8vIGFubm90YXRpb25zIGluIHRoZSBmb2xkZWQgbGluZXMuIElmIHNvLCBhZGQgYSBzdW1tYXJ5IHRvIHRoZSBsaXN0IG9mIGFubm90YXRpb25zLlxuICAgICAgICB2YXIgZm9sZCA9IGd1dHRlci5zZXNzaW9uLmdldEZvbGRMaW5lKHJvdyk7XG4gICAgICAgIGlmIChmb2xkICYmIGd1dHRlci4kc2hvd0ZvbGRlZEFubm90YXRpb25zKSB7XG4gICAgICAgICAgICB2YXIgYW5ub3RhdGlvbnNJbkZvbGQgPSB7ZXJyb3I6IFtdLCBzZWN1cml0eTogW10sIHdhcm5pbmc6IFtdLCBpbmZvOiBbXSwgaGludDogW119O1xuICAgICAgICAgICAgdmFyIHNldmVyaXR5UmFuayA9IHtlcnJvcjogMSwgc2VjdXJpdHk6IDIsIHdhcm5pbmc6IDMsIGluZm86IDQsIGhpbnQ6IDV9O1xuICAgICAgICAgICAgdmFyIG1vc3RTZXZlcmVBbm5vdGF0aW9uVHlwZUluRm9sZDtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHJvdyArIDE7IGkgPD0gZm9sZC5lbmQucm93OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWd1dHRlci4kYW5ub3RhdGlvbnNbaV0pIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBndXR0ZXIuJGFubm90YXRpb25zW2ldLnRleHQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFubm90YXRpb25UeXBlID0gZ3V0dGVyLiRhbm5vdGF0aW9uc1tpXS50eXBlW2pdO1xuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uc0luRm9sZFthbm5vdGF0aW9uVHlwZV0ucHVzaChndXR0ZXIuJGFubm90YXRpb25zW2ldLnRleHRbal0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICFtb3N0U2V2ZXJlQW5ub3RhdGlvblR5cGVJbkZvbGQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldmVyaXR5UmFua1thbm5vdGF0aW9uVHlwZV0gPCBzZXZlcml0eVJhbmtbbW9zdFNldmVyZUFubm90YXRpb25UeXBlSW5Gb2xkXVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RTZXZlcmVBbm5vdGF0aW9uVHlwZUluRm9sZCA9IGFubm90YXRpb25UeXBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoW1wiZXJyb3JcIiwgXCJzZWN1cml0eVwiLCBcIndhcm5pbmdcIl0uaW5jbHVkZXMobW9zdFNldmVyZUFubm90YXRpb25UeXBlSW5Gb2xkKSkge1xuICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5Rm9sZGVkQW5ub3RhdGlvbnMgPSBgJHtHdXR0ZXJUb29sdGlwLmFubm90YXRpb25zVG9TdW1tYXJ5U3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uc0luRm9sZFxuICAgICAgICAgICAgICAgICl9IGluIGZvbGRlZCBjb2RlLmA7XG5cbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uLmRpc3BsYXlUZXh0LnB1c2goc3VtbWFyeUZvbGRlZEFubm90YXRpb25zKTtcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uLnR5cGUucHVzaChtb3N0U2V2ZXJlQW5ub3RhdGlvblR5cGVJbkZvbGQgKyBcIl9mb2xkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFubm90YXRpb24uZGlzcGxheVRleHQubGVuZ3RoID09PSAwKSByZXR1cm4gdGhpcy5oaWRlKCk7XG5cbiAgICAgICAgdmFyIGFubm90YXRpb25NZXNzYWdlcyA9IHtlcnJvcjogW10sIHNlY3VyaXR5OiBbXSwgd2FybmluZzogW10sIGluZm86IFtdLCBoaW50OiBbXX07XG4gICAgICAgIHZhciBpY29uQ2xhc3NOYW1lID0gZ3V0dGVyLiR1c2VTdmdHdXR0ZXJJY29ucyA/IFwiYWNlX2ljb25fc3ZnXCIgOiBcImFjZV9pY29uXCI7XG5cbiAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBjb250ZW50cyBvZiB0aGUgdG9vbHRpcC5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbm5vdGF0aW9uLmRpc3BsYXlUZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGluZUVsZW1lbnQgPSBkb20uY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cbiAgICAgICAgICAgIHZhciBpY29uRWxlbWVudCA9IGRvbS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIGljb25FbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4uW2BhY2VfJHthbm5vdGF0aW9uLnR5cGVbaV19YCwgaWNvbkNsYXNzTmFtZV0pO1xuICAgICAgICAgICAgaWNvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiLFxuICAgICAgICAgICAgICAgIGAke0d1dHRlclRvb2x0aXAuYW5ub3RhdGlvbkxhYmVsc1thbm5vdGF0aW9uLnR5cGVbaV0ucmVwbGFjZShcIl9mb2xkXCIsIFwiXCIpXS5zaW5ndWxhcn1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWNvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImltZ1wiKTtcbiAgICAgICAgICAgIC8vIFNldCBlbXB0eSBjb250ZW50IHRvIHRoZSBpbWcgc3BhbiB0byBnZXQgaXQgdG8gc2hvdyB1cFxuICAgICAgICAgICAgaWNvbkVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9tLmNyZWF0ZVRleHROb2RlKFwiIFwiKSk7XG5cbiAgICAgICAgICAgIGxpbmVFbGVtZW50LmFwcGVuZENoaWxkKGljb25FbGVtZW50KTtcbiAgICAgICAgICAgIGxpbmVFbGVtZW50LmFwcGVuZENoaWxkKGRvbS5jcmVhdGVUZXh0Tm9kZShhbm5vdGF0aW9uLmRpc3BsYXlUZXh0W2ldKSk7XG4gICAgICAgICAgICBsaW5lRWxlbWVudC5hcHBlbmRDaGlsZChkb20uY3JlYXRlRWxlbWVudChcImJyXCIpKTtcblxuICAgICAgICAgICAgYW5ub3RhdGlvbk1lc3NhZ2VzW2Fubm90YXRpb24udHlwZVtpXS5yZXBsYWNlKFwiX2ZvbGRcIiwgXCJcIildLnB1c2gobGluZUVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2xlYXIgdGhlIGN1cnJlbnQgdG9vbHRpcCBjb250ZW50XG4gICAgICAgIHZhciB0b29sdGlwRWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudCgpO1xuICAgICAgICBkb20ucmVtb3ZlQ2hpbGRyZW4odG9vbHRpcEVsZW1lbnQpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdG9vbHRpcCBjb250ZW50XG4gICAgICAgIGFubm90YXRpb25NZXNzYWdlcy5lcnJvci5mb3JFYWNoKChlbCkgPT4gdG9vbHRpcEVsZW1lbnQuYXBwZW5kQ2hpbGQoZWwpKTtcbiAgICAgICAgYW5ub3RhdGlvbk1lc3NhZ2VzLnNlY3VyaXR5LmZvckVhY2goKGVsKSA9PiB0b29sdGlwRWxlbWVudC5hcHBlbmRDaGlsZChlbCkpO1xuICAgICAgICBhbm5vdGF0aW9uTWVzc2FnZXMud2FybmluZy5mb3JFYWNoKChlbCkgPT4gdG9vbHRpcEVsZW1lbnQuYXBwZW5kQ2hpbGQoZWwpKTtcbiAgICAgICAgYW5ub3RhdGlvbk1lc3NhZ2VzLmluZm8uZm9yRWFjaCgoZWwpID0+IHRvb2x0aXBFbGVtZW50LmFwcGVuZENoaWxkKGVsKSk7XG4gICAgICAgIGFubm90YXRpb25NZXNzYWdlcy5oaW50LmZvckVhY2goKGVsKSA9PiB0b29sdGlwRWxlbWVudC5hcHBlbmRDaGlsZChlbCkpO1xuXG4gICAgICAgIHRvb2x0aXBFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGl2ZVwiLCBcInBvbGl0ZVwiKTtcblxuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLnNldFRoZW1lKHRoaXMuZWRpdG9yLnJlbmRlcmVyLnRoZW1lKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2xhc3NOYW1lKFwiYWNlX2d1dHRlci10b29sdGlwXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIHRoaXMuZWRpdG9yLl9zaWduYWwoXCJzaG93R3V0dGVyVG9vbHRpcFwiLCB0aGlzKTtcbiAgICB9XG5cbiAgICBoaWRlVG9vbHRpcCgpIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIik7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB0aGlzLmVkaXRvci5fc2lnbmFsKFwiaGlkZUd1dHRlclRvb2x0aXBcIiwgdGhpcyk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFubm90YXRpb25zVG9TdW1tYXJ5U3RyaW5nKGFubm90YXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSBbXTtcbiAgICAgICAgY29uc3QgYW5ub3RhdGlvblR5cGVzID0gW1wiZXJyb3JcIiwgXCJzZWN1cml0eVwiLCBcIndhcm5pbmdcIiwgXCJpbmZvXCIsIFwiaGludFwiXTtcbiAgICAgICAgZm9yIChjb25zdCBhbm5vdGF0aW9uVHlwZSBvZiBhbm5vdGF0aW9uVHlwZXMpIHtcbiAgICAgICAgICAgIGlmICghYW5ub3RhdGlvbnNbYW5ub3RhdGlvblR5cGVdLmxlbmd0aCkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGFubm90YXRpb25zW2Fubm90YXRpb25UeXBlXS5sZW5ndGggPT09IDEgPyBHdXR0ZXJUb29sdGlwLmFubm90YXRpb25MYWJlbHNbYW5ub3RhdGlvblR5cGVdLnNpbmd1bGFyIDogR3V0dGVyVG9vbHRpcC5hbm5vdGF0aW9uTGFiZWxzW2Fubm90YXRpb25UeXBlXS5wbHVyYWw7XG4gICAgICAgICAgICBzdW1tYXJ5LnB1c2goYCR7YW5ub3RhdGlvbnNbYW5ub3RhdGlvblR5cGVdLmxlbmd0aH0gJHtsYWJlbH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VtbWFyeS5qb2luKFwiLCBcIik7XG4gICAgfVxufVxuXG5leHBvcnRzLkd1dHRlclRvb2x0aXAgPSBHdXR0ZXJUb29sdGlwO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mouse/default_gutter_handler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mouse/default_handlers.js":
/*!*************************************************************!*\
  !*** ./node_modules/ace-code/src/mouse/default_handlers.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./mouse_handler\").MouseHandler} MouseHandler\n * @typedef {import(\"./mouse_event\").MouseEvent} MouseEvent\n */\nvar useragent = __webpack_require__(/*! ../lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\n\nvar DRAG_OFFSET = 0; // pixels\nvar SCROLL_COOLDOWN_T = 550; // milliseconds\n\nclass DefaultHandlers {\n    /**\n     * @param {MouseHandler} mouseHandler\n     */\n    constructor(mouseHandler) {\n        mouseHandler.$clickSelection = null;\n\n        var editor = mouseHandler.editor;\n        editor.setDefaultHandler(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n        editor.setDefaultHandler(\"dblclick\", this.onDoubleClick.bind(mouseHandler));\n        editor.setDefaultHandler(\"tripleclick\", this.onTripleClick.bind(mouseHandler));\n        editor.setDefaultHandler(\"quadclick\", this.onQuadClick.bind(mouseHandler));\n        editor.setDefaultHandler(\"mousewheel\", this.onMouseWheel.bind(mouseHandler));\n\n        var exports = [\"select\", \"startSelect\", \"selectEnd\", \"selectAllEnd\", \"selectByWordsEnd\",\n            \"selectByLinesEnd\", \"dragWait\", \"dragWaitEnd\", \"focusWait\"];\n\n        exports.forEach(function(x) {\n            mouseHandler[x] = this[x];\n        }, this);\n\n        mouseHandler[\"selectByLines\"] = this.extendSelectionBy.bind(mouseHandler, \"getLineRange\");\n        mouseHandler[\"selectByWords\"] = this.extendSelectionBy.bind(mouseHandler, \"getWordRange\");\n    }\n\n    /**\n     * @param {MouseEvent} ev\n     * @this {MouseHandler}\n     */\n    onMouseDown(ev) {\n        var inSelection = ev.inSelection();\n        var pos = ev.getDocumentPosition();\n        this.mousedownEvent = ev;\n        var editor = this.editor;\n\n        var button = ev.getButton();\n        if (button !== 0) {\n            var selectionRange = editor.getSelectionRange();\n            var selectionEmpty = selectionRange.isEmpty();\n            if (selectionEmpty || button == 1)\n                editor.selection.moveToPosition(pos);\n            // 2: contextmenu, 1: linux paste\n            if (button == 2) {\n                editor.textInput.onContextMenu(ev.domEvent);\n                if (!useragent.isMozilla)\n                    ev.preventDefault();\n            }\n            // stopping event here breaks contextmenu on ff mac\n            // not stoping breaks it on chrome mac\n            return;\n        }\n\n        this.mousedownEvent.time = Date.now();\n        // if this click caused the editor to be focused should not clear the\n        // selection\n        if (inSelection && !editor.isFocused()) {\n            editor.focus();\n            if (this.$focusTimeout && !this.$clickSelection && !editor.inMultiSelectMode) {\n                this.setState(\"focusWait\");\n                this.captureMouse(ev);\n                return;\n            }\n        }\n\n        this.captureMouse(ev);\n        this.startSelect(pos, ev.domEvent._clicks > 1);\n        return ev.preventDefault();\n    }\n\n    /**\n     * \n     * @param {import(\"../../ace-internal\").Ace.Position} [pos]\n     * @param {boolean} [waitForClickSelection]\n     * @this {MouseHandler}\n     */\n    startSelect(pos, waitForClickSelection) {\n        pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var editor = this.editor;\n        if (!this.mousedownEvent) return;\n        // allow double/triple click handlers to change selection\n        if (this.mousedownEvent.getShiftKey())\n            editor.selection.selectToPosition(pos);\n        else if (!waitForClickSelection)\n            editor.selection.moveToPosition(pos);\n        if (!waitForClickSelection)\n            this.select();\n        editor.setStyle(\"ace_selecting\");\n        this.setState(\"select\");\n    }\n\n    /**\n     * @this {MouseHandler}\n     */\n    select() {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        if (this.$clickSelection) {\n            var cmp = this.$clickSelection.comparePoint(cursor);\n\n            if (cmp == -1) {\n                anchor = this.$clickSelection.end;\n            } else if (cmp == 1) {\n                anchor = this.$clickSelection.start;\n            } else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    }\n\n    /**\n     * @param {string | number} unitName\n     * @this {MouseHandler}\n     */\n    extendSelectionBy(unitName) {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var range = editor.selection[unitName](cursor.row, cursor.column);\n        if (this.$clickSelection) {\n            var cmpStart = this.$clickSelection.comparePoint(range.start);\n            var cmpEnd = this.$clickSelection.comparePoint(range.end);\n\n            if (cmpStart == -1 && cmpEnd <= 0) {\n                anchor = this.$clickSelection.end;\n                if (range.end.row != cursor.row || range.end.column != cursor.column)\n                    cursor = range.start;\n            } else if (cmpEnd == 1 && cmpStart >= 0) {\n                anchor = this.$clickSelection.start;\n                if (range.start.row != cursor.row || range.start.column != cursor.column)\n                    cursor = range.end;\n            } else if (cmpStart == -1 && cmpEnd == 1) {\n                cursor = range.end;\n                anchor = range.start;\n            } else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    }\n\n    /**\n     * @this {MouseHandler}\n     */\n    selectByLinesEnd() {\n        this.$clickSelection = null;\n        this.editor.unsetStyle(\"ace_selecting\");\n    }\n\n    /**\n     * @this {MouseHandler}\n     */\n    focusWait() {\n        var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n        var time = Date.now();\n\n        if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimeout)\n            this.startSelect(this.mousedownEvent.getDocumentPosition());\n    }\n    \n    /**\n     * @param {MouseEvent} ev\n     * @this {MouseHandler}\n     */\n    onDoubleClick(ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n        var session = editor.session;\n\n        var range = session.getBracketRange(pos);\n        if (range) {\n            if (range.isEmpty()) {\n                range.start.column--;\n                range.end.column++;\n            }\n            this.setState(\"select\");\n        } else {\n            range = editor.selection.getWordRange(pos.row, pos.column);\n            this.setState(\"selectByWords\");\n        }\n        this.$clickSelection = range;\n        this.select();\n    }\n\n    /**\n     * @param {MouseEvent} ev\n     * @this {MouseHandler}\n     */\n    onTripleClick(ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n\n        this.setState(\"selectByLines\");\n        var range = editor.getSelectionRange();\n        if (range.isMultiLine() && range.contains(pos.row, pos.column)) {\n            this.$clickSelection = editor.selection.getLineRange(range.start.row);\n            this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;\n        } else {\n            this.$clickSelection = editor.selection.getLineRange(pos.row);\n        }\n        this.select();\n    }\n\n    /**\n     * @param {MouseEvent} ev\n     * @this {MouseHandler}\n     */\n    onQuadClick(ev) {\n        var editor = this.editor;\n\n        editor.selectAll();\n        this.$clickSelection = editor.getSelectionRange();\n        this.setState(\"selectAll\");\n    }\n\n    /**\n     * @param {MouseEvent} ev\n     * @this {MouseHandler}\n     */\n    onMouseWheel(ev) {\n        if (ev.getAccelKey())\n            return;\n\n        // shift wheel to horizontal scroll\n        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {\n            ev.wheelX = ev.wheelY;\n            ev.wheelY = 0;\n        }\n        \n        var editor = this.editor;\n        \n        if (!this.$lastScroll)\n            this.$lastScroll = { t: 0, vx: 0, vy: 0, allowed: 0 };\n        \n        var prevScroll = this.$lastScroll;\n        var t = ev.domEvent.timeStamp;\n        var dt = t - prevScroll.t;\n        var vx = dt ? ev.wheelX / dt : prevScroll.vx;\n        var vy = dt ? ev.wheelY / dt : prevScroll.vy;\n        \n        // touchbar keeps sending scroll events after touchend, if we do not stop these events,\n        // users can't scrol editor without scrolling the parent node\n        if (dt < SCROLL_COOLDOWN_T) {\n            vx = (vx + prevScroll.vx) / 2;\n            vy = (vy + prevScroll.vy) / 2;\n        }\n        \n        var direction = Math.abs(vx / vy);\n        \n        var canScroll = false;\n        if (direction >= 1 && editor.renderer.isScrollableBy(ev.wheelX * ev.speed, 0))\n            canScroll = true;\n        if (direction <= 1 && editor.renderer.isScrollableBy(0, ev.wheelY * ev.speed))\n            canScroll = true;\n            \n        if (canScroll) {\n            prevScroll.allowed = t;\n        } else if (t - prevScroll.allowed < SCROLL_COOLDOWN_T) {\n            var isSlower = Math.abs(vx) <= 1.5 * Math.abs(prevScroll.vx)\n                && Math.abs(vy) <= 1.5 * Math.abs(prevScroll.vy);\n            if (isSlower) {\n                canScroll = true;\n                prevScroll.allowed = t;\n            }\n            else {\n                prevScroll.allowed = 0;\n            }\n        }\n        \n        prevScroll.t = t;\n        prevScroll.vx = vx;\n        prevScroll.vy = vy;\n\n        if (canScroll) {\n            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n            return ev.stop();\n        }\n    }\n\n}\nDefaultHandlers.prototype.selectEnd = DefaultHandlers.prototype.selectByLinesEnd;\nDefaultHandlers.prototype.selectAllEnd = DefaultHandlers.prototype.selectByLinesEnd;\nDefaultHandlers.prototype.selectByWordsEnd = DefaultHandlers.prototype.selectByLinesEnd;\n\nexports.DefaultHandlers = DefaultHandlers;\n\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\n\nfunction calcRangeOrientation(range, cursor) {\n    if (range.start.row == range.end.row)\n        var cmp = 2 * cursor.column - range.start.column - range.end.column;\n    else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)\n        var cmp = cursor.column - 4;\n    else\n        var cmp = 2 * cursor.row - range.start.row - range.end.row;\n\n    if (cmp < 0)\n        return {cursor: range.start, anchor: range.end};\n    else\n        return {cursor: range.end, anchor: range.start};\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL2RlZmF1bHRfaGFuZGxlcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsd0NBQXdDO0FBQ3JELGFBQWEsb0NBQW9DO0FBQ2pEO0FBQ0EsZ0JBQWdCLG1CQUFPLENBQUMsc0VBQWtCOztBQUUxQyxxQkFBcUI7QUFDckIsNkJBQTZCOztBQUU3QjtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFlBQVk7QUFDM0IsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLDJDQUEyQztBQUMxRCxlQUFlLFNBQVM7QUFDeEIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQyxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsWUFBWTtBQUMzQixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsWUFBWTtBQUMzQixjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUI7O0FBRXZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGdCQUFnQjtBQUNoQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL2RlZmF1bHRfaGFuZGxlcnMuanM/YThkMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vbW91c2VfaGFuZGxlclwiKS5Nb3VzZUhhbmRsZXJ9IE1vdXNlSGFuZGxlclxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vbW91c2VfZXZlbnRcIikuTW91c2VFdmVudH0gTW91c2VFdmVudFxuICovXG52YXIgdXNlcmFnZW50ID0gcmVxdWlyZShcIi4uL2xpYi91c2VyYWdlbnRcIik7XG5cbnZhciBEUkFHX09GRlNFVCA9IDA7IC8vIHBpeGVsc1xudmFyIFNDUk9MTF9DT09MRE9XTl9UID0gNTUwOyAvLyBtaWxsaXNlY29uZHNcblxuY2xhc3MgRGVmYXVsdEhhbmRsZXJzIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlSGFuZGxlcn0gbW91c2VIYW5kbGVyXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobW91c2VIYW5kbGVyKSB7XG4gICAgICAgIG1vdXNlSGFuZGxlci4kY2xpY2tTZWxlY3Rpb24gPSBudWxsO1xuXG4gICAgICAgIHZhciBlZGl0b3IgPSBtb3VzZUhhbmRsZXIuZWRpdG9yO1xuICAgICAgICBlZGl0b3Iuc2V0RGVmYXVsdEhhbmRsZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5vbk1vdXNlRG93bi5iaW5kKG1vdXNlSGFuZGxlcikpO1xuICAgICAgICBlZGl0b3Iuc2V0RGVmYXVsdEhhbmRsZXIoXCJkYmxjbGlja1wiLCB0aGlzLm9uRG91YmxlQ2xpY2suYmluZChtb3VzZUhhbmRsZXIpKTtcbiAgICAgICAgZWRpdG9yLnNldERlZmF1bHRIYW5kbGVyKFwidHJpcGxlY2xpY2tcIiwgdGhpcy5vblRyaXBsZUNsaWNrLmJpbmQobW91c2VIYW5kbGVyKSk7XG4gICAgICAgIGVkaXRvci5zZXREZWZhdWx0SGFuZGxlcihcInF1YWRjbGlja1wiLCB0aGlzLm9uUXVhZENsaWNrLmJpbmQobW91c2VIYW5kbGVyKSk7XG4gICAgICAgIGVkaXRvci5zZXREZWZhdWx0SGFuZGxlcihcIm1vdXNld2hlZWxcIiwgdGhpcy5vbk1vdXNlV2hlZWwuYmluZChtb3VzZUhhbmRsZXIpKTtcblxuICAgICAgICB2YXIgZXhwb3J0cyA9IFtcInNlbGVjdFwiLCBcInN0YXJ0U2VsZWN0XCIsIFwic2VsZWN0RW5kXCIsIFwic2VsZWN0QWxsRW5kXCIsIFwic2VsZWN0QnlXb3Jkc0VuZFwiLFxuICAgICAgICAgICAgXCJzZWxlY3RCeUxpbmVzRW5kXCIsIFwiZHJhZ1dhaXRcIiwgXCJkcmFnV2FpdEVuZFwiLCBcImZvY3VzV2FpdFwiXTtcblxuICAgICAgICBleHBvcnRzLmZvckVhY2goZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgbW91c2VIYW5kbGVyW3hdID0gdGhpc1t4XTtcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgbW91c2VIYW5kbGVyW1wic2VsZWN0QnlMaW5lc1wiXSA9IHRoaXMuZXh0ZW5kU2VsZWN0aW9uQnkuYmluZChtb3VzZUhhbmRsZXIsIFwiZ2V0TGluZVJhbmdlXCIpO1xuICAgICAgICBtb3VzZUhhbmRsZXJbXCJzZWxlY3RCeVdvcmRzXCJdID0gdGhpcy5leHRlbmRTZWxlY3Rpb25CeS5iaW5kKG1vdXNlSGFuZGxlciwgXCJnZXRXb3JkUmFuZ2VcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldlxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICovXG4gICAgb25Nb3VzZURvd24oZXYpIHtcbiAgICAgICAgdmFyIGluU2VsZWN0aW9uID0gZXYuaW5TZWxlY3Rpb24oKTtcbiAgICAgICAgdmFyIHBvcyA9IGV2LmdldERvY3VtZW50UG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy5tb3VzZWRvd25FdmVudCA9IGV2O1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG5cbiAgICAgICAgdmFyIGJ1dHRvbiA9IGV2LmdldEJ1dHRvbigpO1xuICAgICAgICBpZiAoYnV0dG9uICE9PSAwKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uUmFuZ2UgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb25FbXB0eSA9IHNlbGVjdGlvblJhbmdlLmlzRW1wdHkoKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25FbXB0eSB8fCBidXR0b24gPT0gMSlcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLm1vdmVUb1Bvc2l0aW9uKHBvcyk7XG4gICAgICAgICAgICAvLyAyOiBjb250ZXh0bWVudSwgMTogbGludXggcGFzdGVcbiAgICAgICAgICAgIGlmIChidXR0b24gPT0gMikge1xuICAgICAgICAgICAgICAgIGVkaXRvci50ZXh0SW5wdXQub25Db250ZXh0TWVudShldi5kb21FdmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VyYWdlbnQuaXNNb3ppbGxhKVxuICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc3RvcHBpbmcgZXZlbnQgaGVyZSBicmVha3MgY29udGV4dG1lbnUgb24gZmYgbWFjXG4gICAgICAgICAgICAvLyBub3Qgc3RvcGluZyBicmVha3MgaXQgb24gY2hyb21lIG1hY1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tb3VzZWRvd25FdmVudC50aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgLy8gaWYgdGhpcyBjbGljayBjYXVzZWQgdGhlIGVkaXRvciB0byBiZSBmb2N1c2VkIHNob3VsZCBub3QgY2xlYXIgdGhlXG4gICAgICAgIC8vIHNlbGVjdGlvblxuICAgICAgICBpZiAoaW5TZWxlY3Rpb24gJiYgIWVkaXRvci5pc0ZvY3VzZWQoKSkge1xuICAgICAgICAgICAgZWRpdG9yLmZvY3VzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kZm9jdXNUaW1lb3V0ICYmICF0aGlzLiRjbGlja1NlbGVjdGlvbiAmJiAhZWRpdG9yLmluTXVsdGlTZWxlY3RNb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcImZvY3VzV2FpdFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcHR1cmVNb3VzZShldik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYXB0dXJlTW91c2UoZXYpO1xuICAgICAgICB0aGlzLnN0YXJ0U2VsZWN0KHBvcywgZXYuZG9tRXZlbnQuX2NsaWNrcyA+IDEpO1xuICAgICAgICByZXR1cm4gZXYucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuUG9zaXRpb259IFtwb3NdXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbd2FpdEZvckNsaWNrU2VsZWN0aW9uXVxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICovXG4gICAgc3RhcnRTZWxlY3QocG9zLCB3YWl0Rm9yQ2xpY2tTZWxlY3Rpb24pIHtcbiAgICAgICAgcG9zID0gcG9zIHx8IHRoaXMuZWRpdG9yLnJlbmRlcmVyLnNjcmVlblRvVGV4dENvb3JkaW5hdGVzKHRoaXMueCwgdGhpcy55KTtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXMuZWRpdG9yO1xuICAgICAgICBpZiAoIXRoaXMubW91c2Vkb3duRXZlbnQpIHJldHVybjtcbiAgICAgICAgLy8gYWxsb3cgZG91YmxlL3RyaXBsZSBjbGljayBoYW5kbGVycyB0byBjaGFuZ2Ugc2VsZWN0aW9uXG4gICAgICAgIGlmICh0aGlzLm1vdXNlZG93bkV2ZW50LmdldFNoaWZ0S2V5KCkpXG4gICAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLnNlbGVjdFRvUG9zaXRpb24ocG9zKTtcbiAgICAgICAgZWxzZSBpZiAoIXdhaXRGb3JDbGlja1NlbGVjdGlvbilcbiAgICAgICAgICAgIGVkaXRvci5zZWxlY3Rpb24ubW92ZVRvUG9zaXRpb24ocG9zKTtcbiAgICAgICAgaWYgKCF3YWl0Rm9yQ2xpY2tTZWxlY3Rpb24pXG4gICAgICAgICAgICB0aGlzLnNlbGVjdCgpO1xuICAgICAgICBlZGl0b3Iuc2V0U3R5bGUoXCJhY2Vfc2VsZWN0aW5nXCIpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKFwic2VsZWN0XCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICovXG4gICAgc2VsZWN0KCkge1xuICAgICAgICB2YXIgYW5jaG9yLCBlZGl0b3IgPSB0aGlzLmVkaXRvcjtcbiAgICAgICAgdmFyIGN1cnNvciA9IGVkaXRvci5yZW5kZXJlci5zY3JlZW5Ub1RleHRDb29yZGluYXRlcyh0aGlzLngsIHRoaXMueSk7XG4gICAgICAgIGlmICh0aGlzLiRjbGlja1NlbGVjdGlvbikge1xuICAgICAgICAgICAgdmFyIGNtcCA9IHRoaXMuJGNsaWNrU2VsZWN0aW9uLmNvbXBhcmVQb2ludChjdXJzb3IpO1xuXG4gICAgICAgICAgICBpZiAoY21wID09IC0xKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yID0gdGhpcy4kY2xpY2tTZWxlY3Rpb24uZW5kO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjbXAgPT0gMSkge1xuICAgICAgICAgICAgICAgIGFuY2hvciA9IHRoaXMuJGNsaWNrU2VsZWN0aW9uLnN0YXJ0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZW50ZWRSYW5nZSA9IGNhbGNSYW5nZU9yaWVudGF0aW9uKHRoaXMuJGNsaWNrU2VsZWN0aW9uLCBjdXJzb3IpO1xuICAgICAgICAgICAgICAgIGN1cnNvciA9IG9yaWVudGVkUmFuZ2UuY3Vyc29yO1xuICAgICAgICAgICAgICAgIGFuY2hvciA9IG9yaWVudGVkUmFuZ2UuYW5jaG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25BbmNob3IoYW5jaG9yLnJvdywgYW5jaG9yLmNvbHVtbik7XG4gICAgICAgIH1cbiAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZWxlY3RUb1Bvc2l0aW9uKGN1cnNvcik7XG4gICAgICAgIGVkaXRvci5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVtYmVyfSB1bml0TmFtZVxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICovXG4gICAgZXh0ZW5kU2VsZWN0aW9uQnkodW5pdE5hbWUpIHtcbiAgICAgICAgdmFyIGFuY2hvciwgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG4gICAgICAgIHZhciBjdXJzb3IgPSBlZGl0b3IucmVuZGVyZXIuc2NyZWVuVG9UZXh0Q29vcmRpbmF0ZXModGhpcy54LCB0aGlzLnkpO1xuICAgICAgICB2YXIgcmFuZ2UgPSBlZGl0b3Iuc2VsZWN0aW9uW3VuaXROYW1lXShjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uKTtcbiAgICAgICAgaWYgKHRoaXMuJGNsaWNrU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY21wU3RhcnQgPSB0aGlzLiRjbGlja1NlbGVjdGlvbi5jb21wYXJlUG9pbnQocmFuZ2Uuc3RhcnQpO1xuICAgICAgICAgICAgdmFyIGNtcEVuZCA9IHRoaXMuJGNsaWNrU2VsZWN0aW9uLmNvbXBhcmVQb2ludChyYW5nZS5lbmQpO1xuXG4gICAgICAgICAgICBpZiAoY21wU3RhcnQgPT0gLTEgJiYgY21wRW5kIDw9IDApIHtcbiAgICAgICAgICAgICAgICBhbmNob3IgPSB0aGlzLiRjbGlja1NlbGVjdGlvbi5lbmQ7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlLmVuZC5yb3cgIT0gY3Vyc29yLnJvdyB8fCByYW5nZS5lbmQuY29sdW1uICE9IGN1cnNvci5jb2x1bW4pXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvciA9IHJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjbXBFbmQgPT0gMSAmJiBjbXBTdGFydCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYW5jaG9yID0gdGhpcy4kY2xpY2tTZWxlY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlLnN0YXJ0LnJvdyAhPSBjdXJzb3Iucm93IHx8IHJhbmdlLnN0YXJ0LmNvbHVtbiAhPSBjdXJzb3IuY29sdW1uKVxuICAgICAgICAgICAgICAgICAgICBjdXJzb3IgPSByYW5nZS5lbmQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNtcFN0YXJ0ID09IC0xICYmIGNtcEVuZCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgY3Vyc29yID0gcmFuZ2UuZW5kO1xuICAgICAgICAgICAgICAgIGFuY2hvciA9IHJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZW50ZWRSYW5nZSA9IGNhbGNSYW5nZU9yaWVudGF0aW9uKHRoaXMuJGNsaWNrU2VsZWN0aW9uLCBjdXJzb3IpO1xuICAgICAgICAgICAgICAgIGN1cnNvciA9IG9yaWVudGVkUmFuZ2UuY3Vyc29yO1xuICAgICAgICAgICAgICAgIGFuY2hvciA9IG9yaWVudGVkUmFuZ2UuYW5jaG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZXRTZWxlY3Rpb25BbmNob3IoYW5jaG9yLnJvdywgYW5jaG9yLmNvbHVtbik7XG4gICAgICAgIH1cbiAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZWxlY3RUb1Bvc2l0aW9uKGN1cnNvcik7XG4gICAgICAgIGVkaXRvci5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICovXG4gICAgc2VsZWN0QnlMaW5lc0VuZCgpIHtcbiAgICAgICAgdGhpcy4kY2xpY2tTZWxlY3Rpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmVkaXRvci51bnNldFN0eWxlKFwiYWNlX3NlbGVjdGluZ1wiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7TW91c2VIYW5kbGVyfVxuICAgICAqL1xuICAgIGZvY3VzV2FpdCgpIHtcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gY2FsY0Rpc3RhbmNlKHRoaXMubW91c2Vkb3duRXZlbnQueCwgdGhpcy5tb3VzZWRvd25FdmVudC55LCB0aGlzLngsIHRoaXMueSk7XG4gICAgICAgIHZhciB0aW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPiBEUkFHX09GRlNFVCB8fCB0aW1lIC0gdGhpcy5tb3VzZWRvd25FdmVudC50aW1lID4gdGhpcy4kZm9jdXNUaW1lb3V0KVxuICAgICAgICAgICAgdGhpcy5zdGFydFNlbGVjdCh0aGlzLm1vdXNlZG93bkV2ZW50LmdldERvY3VtZW50UG9zaXRpb24oKSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZcbiAgICAgKiBAdGhpcyB7TW91c2VIYW5kbGVyfVxuICAgICAqL1xuICAgIG9uRG91YmxlQ2xpY2soZXYpIHtcbiAgICAgICAgdmFyIHBvcyA9IGV2LmdldERvY3VtZW50UG9zaXRpb24oKTtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXMuZWRpdG9yO1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IGVkaXRvci5zZXNzaW9uO1xuXG4gICAgICAgIHZhciByYW5nZSA9IHNlc3Npb24uZ2V0QnJhY2tldFJhbmdlKHBvcyk7XG4gICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgaWYgKHJhbmdlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0LmNvbHVtbi0tO1xuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoXCJzZWxlY3RcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByYW5nZSA9IGVkaXRvci5zZWxlY3Rpb24uZ2V0V29yZFJhbmdlKHBvcy5yb3csIHBvcy5jb2x1bW4pO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcInNlbGVjdEJ5V29yZHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kY2xpY2tTZWxlY3Rpb24gPSByYW5nZTtcbiAgICAgICAgdGhpcy5zZWxlY3QoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2XG4gICAgICogQHRoaXMge01vdXNlSGFuZGxlcn1cbiAgICAgKi9cbiAgICBvblRyaXBsZUNsaWNrKGV2KSB7XG4gICAgICAgIHZhciBwb3MgPSBldi5nZXREb2N1bWVudFBvc2l0aW9uKCk7XG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzLmVkaXRvcjtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKFwic2VsZWN0QnlMaW5lc1wiKTtcbiAgICAgICAgdmFyIHJhbmdlID0gZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGlmIChyYW5nZS5pc011bHRpTGluZSgpICYmIHJhbmdlLmNvbnRhaW5zKHBvcy5yb3csIHBvcy5jb2x1bW4pKSB7XG4gICAgICAgICAgICB0aGlzLiRjbGlja1NlbGVjdGlvbiA9IGVkaXRvci5zZWxlY3Rpb24uZ2V0TGluZVJhbmdlKHJhbmdlLnN0YXJ0LnJvdyk7XG4gICAgICAgICAgICB0aGlzLiRjbGlja1NlbGVjdGlvbi5lbmQgPSBlZGl0b3Iuc2VsZWN0aW9uLmdldExpbmVSYW5nZShyYW5nZS5lbmQucm93KS5lbmQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRjbGlja1NlbGVjdGlvbiA9IGVkaXRvci5zZWxlY3Rpb24uZ2V0TGluZVJhbmdlKHBvcy5yb3cpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldlxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICovXG4gICAgb25RdWFkQ2xpY2soZXYpIHtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXMuZWRpdG9yO1xuXG4gICAgICAgIGVkaXRvci5zZWxlY3RBbGwoKTtcbiAgICAgICAgdGhpcy4kY2xpY2tTZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShcInNlbGVjdEFsbFwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2XG4gICAgICogQHRoaXMge01vdXNlSGFuZGxlcn1cbiAgICAgKi9cbiAgICBvbk1vdXNlV2hlZWwoZXYpIHtcbiAgICAgICAgaWYgKGV2LmdldEFjY2VsS2V5KCkpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgLy8gc2hpZnQgd2hlZWwgdG8gaG9yaXpvbnRhbCBzY3JvbGxcbiAgICAgICAgaWYgKGV2LmdldFNoaWZ0S2V5KCkgJiYgZXYud2hlZWxZICYmICFldi53aGVlbFgpIHtcbiAgICAgICAgICAgIGV2LndoZWVsWCA9IGV2LndoZWVsWTtcbiAgICAgICAgICAgIGV2LndoZWVsWSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBlZGl0b3IgPSB0aGlzLmVkaXRvcjtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy4kbGFzdFNjcm9sbClcbiAgICAgICAgICAgIHRoaXMuJGxhc3RTY3JvbGwgPSB7IHQ6IDAsIHZ4OiAwLCB2eTogMCwgYWxsb3dlZDogMCB9O1xuICAgICAgICBcbiAgICAgICAgdmFyIHByZXZTY3JvbGwgPSB0aGlzLiRsYXN0U2Nyb2xsO1xuICAgICAgICB2YXIgdCA9IGV2LmRvbUV2ZW50LnRpbWVTdGFtcDtcbiAgICAgICAgdmFyIGR0ID0gdCAtIHByZXZTY3JvbGwudDtcbiAgICAgICAgdmFyIHZ4ID0gZHQgPyBldi53aGVlbFggLyBkdCA6IHByZXZTY3JvbGwudng7XG4gICAgICAgIHZhciB2eSA9IGR0ID8gZXYud2hlZWxZIC8gZHQgOiBwcmV2U2Nyb2xsLnZ5O1xuICAgICAgICBcbiAgICAgICAgLy8gdG91Y2hiYXIga2VlcHMgc2VuZGluZyBzY3JvbGwgZXZlbnRzIGFmdGVyIHRvdWNoZW5kLCBpZiB3ZSBkbyBub3Qgc3RvcCB0aGVzZSBldmVudHMsXG4gICAgICAgIC8vIHVzZXJzIGNhbid0IHNjcm9sIGVkaXRvciB3aXRob3V0IHNjcm9sbGluZyB0aGUgcGFyZW50IG5vZGVcbiAgICAgICAgaWYgKGR0IDwgU0NST0xMX0NPT0xET1dOX1QpIHtcbiAgICAgICAgICAgIHZ4ID0gKHZ4ICsgcHJldlNjcm9sbC52eCkgLyAyO1xuICAgICAgICAgICAgdnkgPSAodnkgKyBwcmV2U2Nyb2xsLnZ5KSAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBNYXRoLmFicyh2eCAvIHZ5KTtcbiAgICAgICAgXG4gICAgICAgIHZhciBjYW5TY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA+PSAxICYmIGVkaXRvci5yZW5kZXJlci5pc1Njcm9sbGFibGVCeShldi53aGVlbFggKiBldi5zcGVlZCwgMCkpXG4gICAgICAgICAgICBjYW5TY3JvbGwgPSB0cnVlO1xuICAgICAgICBpZiAoZGlyZWN0aW9uIDw9IDEgJiYgZWRpdG9yLnJlbmRlcmVyLmlzU2Nyb2xsYWJsZUJ5KDAsIGV2LndoZWVsWSAqIGV2LnNwZWVkKSlcbiAgICAgICAgICAgIGNhblNjcm9sbCA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgaWYgKGNhblNjcm9sbCkge1xuICAgICAgICAgICAgcHJldlNjcm9sbC5hbGxvd2VkID0gdDtcbiAgICAgICAgfSBlbHNlIGlmICh0IC0gcHJldlNjcm9sbC5hbGxvd2VkIDwgU0NST0xMX0NPT0xET1dOX1QpIHtcbiAgICAgICAgICAgIHZhciBpc1Nsb3dlciA9IE1hdGguYWJzKHZ4KSA8PSAxLjUgKiBNYXRoLmFicyhwcmV2U2Nyb2xsLnZ4KVxuICAgICAgICAgICAgICAgICYmIE1hdGguYWJzKHZ5KSA8PSAxLjUgKiBNYXRoLmFicyhwcmV2U2Nyb2xsLnZ5KTtcbiAgICAgICAgICAgIGlmIChpc1Nsb3dlcikge1xuICAgICAgICAgICAgICAgIGNhblNjcm9sbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcHJldlNjcm9sbC5hbGxvd2VkID0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXZTY3JvbGwuYWxsb3dlZCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByZXZTY3JvbGwudCA9IHQ7XG4gICAgICAgIHByZXZTY3JvbGwudnggPSB2eDtcbiAgICAgICAgcHJldlNjcm9sbC52eSA9IHZ5O1xuXG4gICAgICAgIGlmIChjYW5TY3JvbGwpIHtcbiAgICAgICAgICAgIGVkaXRvci5yZW5kZXJlci5zY3JvbGxCeShldi53aGVlbFggKiBldi5zcGVlZCwgZXYud2hlZWxZICogZXYuc3BlZWQpO1xuICAgICAgICAgICAgcmV0dXJuIGV2LnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuRGVmYXVsdEhhbmRsZXJzLnByb3RvdHlwZS5zZWxlY3RFbmQgPSBEZWZhdWx0SGFuZGxlcnMucHJvdG90eXBlLnNlbGVjdEJ5TGluZXNFbmQ7XG5EZWZhdWx0SGFuZGxlcnMucHJvdG90eXBlLnNlbGVjdEFsbEVuZCA9IERlZmF1bHRIYW5kbGVycy5wcm90b3R5cGUuc2VsZWN0QnlMaW5lc0VuZDtcbkRlZmF1bHRIYW5kbGVycy5wcm90b3R5cGUuc2VsZWN0QnlXb3Jkc0VuZCA9IERlZmF1bHRIYW5kbGVycy5wcm90b3R5cGUuc2VsZWN0QnlMaW5lc0VuZDtcblxuZXhwb3J0cy5EZWZhdWx0SGFuZGxlcnMgPSBEZWZhdWx0SGFuZGxlcnM7XG5cbmZ1bmN0aW9uIGNhbGNEaXN0YW5jZShheCwgYXksIGJ4LCBieSkge1xuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYnggLSBheCwgMikgKyBNYXRoLnBvdyhieSAtIGF5LCAyKSk7XG59XG5cbmZ1bmN0aW9uIGNhbGNSYW5nZU9yaWVudGF0aW9uKHJhbmdlLCBjdXJzb3IpIHtcbiAgICBpZiAocmFuZ2Uuc3RhcnQucm93ID09IHJhbmdlLmVuZC5yb3cpXG4gICAgICAgIHZhciBjbXAgPSAyICogY3Vyc29yLmNvbHVtbiAtIHJhbmdlLnN0YXJ0LmNvbHVtbiAtIHJhbmdlLmVuZC5jb2x1bW47XG4gICAgZWxzZSBpZiAocmFuZ2Uuc3RhcnQucm93ID09IHJhbmdlLmVuZC5yb3cgLSAxICYmICFyYW5nZS5zdGFydC5jb2x1bW4gJiYgIXJhbmdlLmVuZC5jb2x1bW4pXG4gICAgICAgIHZhciBjbXAgPSBjdXJzb3IuY29sdW1uIC0gNDtcbiAgICBlbHNlXG4gICAgICAgIHZhciBjbXAgPSAyICogY3Vyc29yLnJvdyAtIHJhbmdlLnN0YXJ0LnJvdyAtIHJhbmdlLmVuZC5yb3c7XG5cbiAgICBpZiAoY21wIDwgMClcbiAgICAgICAgcmV0dXJuIHtjdXJzb3I6IHJhbmdlLnN0YXJ0LCBhbmNob3I6IHJhbmdlLmVuZH07XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4ge2N1cnNvcjogcmFuZ2UuZW5kLCBhbmNob3I6IHJhbmdlLnN0YXJ0fTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mouse/default_handlers.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mouse/dragdrop_handler.js":
/*!*************************************************************!*\
  !*** ./node_modules/ace-code/src/mouse/dragdrop_handler.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./mouse_handler\").MouseHandler} MouseHandler\n */\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar useragent = __webpack_require__(/*! ../lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\n\nvar AUTOSCROLL_DELAY = 200;\nvar SCROLL_CURSOR_DELAY = 200;\nvar SCROLL_CURSOR_HYSTERESIS = 5;\n\n/**\n * @param {MouseHandler} mouseHandler\n */\nfunction DragdropHandler(mouseHandler) {\n\n    var editor = mouseHandler.editor;\n\n    var dragImage = dom.createElement(\"div\");\n    dragImage.style.cssText = \"top:-100px;position:absolute;z-index:2147483647;opacity:0.5\";\n    dragImage.textContent = \"\\xa0\";\n\n    var exports = [\"dragWait\", \"dragWaitEnd\", \"startDrag\", \"dragReadyEnd\", \"onMouseDrag\"];\n\n    exports.forEach(function(x) {\n        mouseHandler[x] = this[x];\n    }, this);\n    // @ts-ignore\n    editor.on(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n\n    var mouseTarget = editor.container;\n    var dragSelectionMarker, x, y;\n    var timerId, range;\n    var dragCursor, counter = 0;\n    var dragOperation;\n    var isInternal;\n    var autoScrollStartTime;\n    var cursorMovedTime;\n    var cursorPointOnCaretMoved;\n    /**\n     * @param e\n     * @this {MouseHandler}\n     * @return {*}\n     */\n    this.onDragStart = function(e) {\n        // webkit workaround, see this.onMouseDown\n        if (this.cancelDrag || !mouseTarget.draggable) {\n            var self = this;\n            setTimeout(function(){\n                self.startSelect();\n                self.captureMouse(e);\n            }, 0);\n            return e.preventDefault();\n        }\n        range = editor.getSelectionRange();\n\n        var dataTransfer = e.dataTransfer;\n        dataTransfer.effectAllowed = editor.getReadOnly() ? \"copy\" : \"copyMove\";\n        editor.container.appendChild(dragImage);\n\n        dataTransfer.setDragImage && dataTransfer.setDragImage(dragImage, 0, 0);\n        setTimeout(function() {\n            editor.container.removeChild(dragImage);\n        });\n        // clear Opera garbage\n        dataTransfer.clearData();\n        dataTransfer.setData(\"Text\", editor.session.getTextRange());\n\n        isInternal = true;\n        this.setState(\"drag\");\n    };\n    /**\n     * @param e\n     * @this {MouseHandler}\n     * @return {*}\n     */\n    this.onDragEnd = function(e) {\n        mouseTarget.draggable = false;\n        isInternal = false;\n        this.setState(null);\n        if (!editor.getReadOnly()) {\n            var dropEffect = e.dataTransfer.dropEffect;\n            if (!dragOperation && dropEffect == \"move\")\n                // text was dragged outside the editor\n                editor.session.remove(editor.getSelectionRange());\n            editor.$resetCursorStyle();\n        }\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n    };\n    /**\n     * @param e\n     * @this {MouseHandler}\n     * @return {*}\n     */\n    this.onDragEnter = function(e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker)\n            addDragMarker();\n        counter++;\n        // dataTransfer object does not save dropEffect across events on IE, so we store it in dragOperation\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n    /**\n     * @param e\n     * @this {MouseHandler}\n     * @return {*}\n     */\n    this.onDragOver = function(e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        // Opera doesn't trigger dragenter event on drag start\n        if (!dragSelectionMarker) {\n            addDragMarker();\n            counter++;\n        }\n        if (onMouseMoveTimer !== null)\n            onMouseMoveTimer = null;\n\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n\n    this.onDragLeave = function(e) {\n        counter--;\n        if (counter <= 0 && dragSelectionMarker) {\n            clearDragMarker();\n            dragOperation = null;\n            return event.preventDefault(e);\n        }\n    };\n    /**\n     * @param e\n     * @this {MouseHandler}\n     * @return {*}\n     */\n    this.onDrop = function(e) {\n        if (!dragCursor)\n            return;\n        var dataTransfer = e.dataTransfer;\n        if (isInternal) {\n            switch (dragOperation) {\n                case \"move\":\n                    if (range.contains(dragCursor.row, dragCursor.column)) {\n                        // clear selection\n                        range = {\n                            start: dragCursor,\n                            end: dragCursor\n                        };\n                    } else {\n                        // move text\n                        range = editor.moveText(range, dragCursor);\n                    }\n                    break;\n                case \"copy\":\n                    // copy text\n                    range = editor.moveText(range, dragCursor, true);\n                    break;\n            }\n        } else {\n            var dropData = dataTransfer.getData('Text');\n            range = {\n                start: dragCursor,\n                end: editor.session.insert(dragCursor, dropData)\n            };\n            editor.focus();\n            dragOperation = null;\n        }\n        clearDragMarker();\n        return event.preventDefault(e);\n    };\n\n    event.addListener(mouseTarget, \"dragstart\", this.onDragStart.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragend\", this.onDragEnd.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragenter\", this.onDragEnter.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragover\", this.onDragOver.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragleave\", this.onDragLeave.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"drop\", this.onDrop.bind(mouseHandler), editor);\n\n    function scrollCursorIntoView(cursor, prevCursor) {\n        var now = Date.now();\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        var hMovement = !prevCursor || cursor.column != prevCursor.column;\n        if (!cursorMovedTime || vMovement || hMovement) {\n            editor.moveCursorToPosition(cursor);\n            cursorMovedTime = now;\n            cursorPointOnCaretMoved = {x: x, y: y};\n        } else {\n            var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);\n            if (distance > SCROLL_CURSOR_HYSTERESIS) {\n                cursorMovedTime = null;\n            } else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {\n                editor.renderer.scrollCursorIntoView();\n                cursorMovedTime = null;\n            }\n        }\n    }\n\n    function autoScroll(cursor, prevCursor) {\n        var now = Date.now();\n        var lineHeight = editor.renderer.layerConfig.lineHeight;\n        var characterWidth = editor.renderer.layerConfig.characterWidth;\n        var editorRect = editor.renderer.scroller.getBoundingClientRect();\n        var offsets = {\n           x: {\n               left: x - editorRect.left,\n               right: editorRect.right - x\n           },\n           y: {\n               top: y - editorRect.top,\n               bottom: editorRect.bottom - y\n           }\n        };\n        var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);\n        var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);\n        var scrollCursor = {row: cursor.row, column: cursor.column};\n        if (nearestXOffset / characterWidth <= 2) {\n            scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);\n        }\n        if (nearestYOffset / lineHeight <= 1) {\n            scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);\n        }\n        var vScroll = cursor.row != scrollCursor.row;\n        var hScroll = cursor.column != scrollCursor.column;\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        if (vScroll || (hScroll && !vMovement)) {\n            if (!autoScrollStartTime)\n                autoScrollStartTime = now;\n            else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)\n                editor.renderer.scrollCursorIntoView(scrollCursor);\n        } else {\n            autoScrollStartTime = null;\n        }\n    }\n\n    function onDragInterval() {\n        var prevCursor = dragCursor;\n        dragCursor = editor.renderer.screenToTextCoordinates(x, y);\n        scrollCursorIntoView(dragCursor, prevCursor);\n        autoScroll(dragCursor, prevCursor);\n    }\n\n    function addDragMarker() {\n        range = editor.selection.toOrientedRange();\n        dragSelectionMarker = editor.session.addMarker(range, \"ace_selection\", editor.getSelectionStyle());\n        editor.clearSelection();\n        if (editor.isFocused())\n            editor.renderer.$cursorLayer.setBlinking(false);\n        clearInterval(timerId);\n        onDragInterval();\n        timerId = setInterval(onDragInterval, 20);\n        counter = 0;\n        event.addListener(document, \"mousemove\", onMouseMove);\n    }\n\n    function clearDragMarker() {\n        clearInterval(timerId);\n        editor.session.removeMarker(dragSelectionMarker);\n        dragSelectionMarker = null;\n        editor.selection.fromOrientedRange(range);\n        if (editor.isFocused() && !isInternal)\n            editor.$resetCursorStyle();\n        range = null;\n        dragCursor = null;\n        counter = 0;\n        autoScrollStartTime = null;\n        cursorMovedTime = null;\n        event.removeListener(document, \"mousemove\", onMouseMove);\n    }\n\n    // sometimes other code on the page can stop dragleave event leaving editor stuck in the drag state\n    var onMouseMoveTimer = null;\n    function onMouseMove() {\n        if (onMouseMoveTimer == null) {\n            onMouseMoveTimer = setTimeout(function() {\n                if (onMouseMoveTimer != null && dragSelectionMarker)\n                    clearDragMarker();\n            }, 20);\n        }\n    }\n\n    function canAccept(dataTransfer) {\n        var types = dataTransfer.types;\n        return !types || Array.prototype.some.call(types, function(type) {\n            return type == 'text/plain' || type == 'Text';\n        });\n    }\n\n    function getDropEffect(e) {\n        var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];\n        var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];\n\n        var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;\n\n        // IE throws error while dragging from another app\n        var effectAllowed = \"uninitialized\";\n        try {\n            effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();\n        } catch (e) {}\n        var dropEffect = \"none\";\n\n        if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n        else if (moveAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"move\";\n        else if (copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n\n        return dropEffect;\n    }\n}\n\n/**\n * @this {MouseHandler}\n */\n(function() {\n\n    /**\n     * @this {MouseHandler & this}\n     */\n    this.dragWait = function() {\n        var interval = Date.now() - this.mousedownEvent.time;\n        if (interval > this.editor.getDragDelay())\n            this.startDrag();\n    };\n\n    /**\n     * @this {MouseHandler & this}\n     */\n    this.dragWaitEnd = function() {\n        var target = this.editor.container;\n        target.draggable = false;\n        this.startSelect(this.mousedownEvent.getDocumentPosition());\n        this.selectEnd();\n    };\n\n    /**\n     * @this {MouseHandler & this}\n     */\n    this.dragReadyEnd = function(e) {\n        this.editor.$resetCursorStyle();\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n        this.dragWaitEnd();\n    };\n\n    /**\n     * @this {MouseHandler & this}\n     */\n    this.startDrag = function(){\n        this.cancelDrag = false;\n        var editor = this.editor;\n        var target = editor.container;\n        target.draggable = true;\n        editor.renderer.$cursorLayer.setBlinking(false);\n        editor.setStyle(\"ace_dragging\");\n        var cursorStyle = useragent.isWin ? \"default\" : \"move\";\n        editor.renderer.setCursorStyle(cursorStyle);\n        this.setState(\"dragReady\");\n    };\n\n    /**\n     * @this {MouseHandler & this}\n     */\n    this.onMouseDrag = function(e) {\n        var target = this.editor.container;\n        if (useragent.isIE && this.state == \"dragReady\") {\n            // IE does not handle [draggable] attribute set after mousedown\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 3)\n                // @ts-ignore\n                target.dragDrop();\n        }\n        if (this.state === \"dragWait\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 0) {\n                target.draggable = false;\n                this.startSelect(this.mousedownEvent.getDocumentPosition());\n            }\n        }\n    };\n\n    /**\n     * @this {MouseHandler & this}\n     */\n    this.onMouseDown = function(e) {\n        if (!this.$dragEnabled)\n            return;\n        this.mousedownEvent = e;\n        var editor = this.editor;\n\n        var inSelection = e.inSelection();\n        var button = e.getButton();\n        var clickCount = e.domEvent.detail || 1;\n        if (clickCount === 1 && button === 0 && inSelection) {\n            if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))\n                return;\n            this.mousedownEvent.time = Date.now();\n            var eventTarget = e.domEvent.target || e.domEvent.srcElement;\n            if (\"unselectable\" in eventTarget)\n                eventTarget.unselectable = \"on\";\n            if (editor.getDragDelay()) {\n                // https://code.google.com/p/chromium/issues/detail?id=286700\n                if (useragent.isWebKit) {\n                    this.cancelDrag = true;\n                    var mouseTarget = editor.container;\n                    mouseTarget.draggable = true;\n                }\n                this.setState(\"dragWait\");\n            } else {\n                this.startDrag();\n            }\n            this.captureMouse(e, this.onMouseDrag.bind(this));\n            // TODO: a better way to prevent default handler without preventing browser default action\n            e.defaultPrevented = true;\n        }\n    };\n\n}).call(DragdropHandler.prototype);\n\n\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\n\nexports.DragdropHandler = DragdropHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL2RyYWdkcm9wX2hhbmRsZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsd0NBQXdDO0FBQ3JEO0FBQ0EsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCLFlBQVksbUJBQU8sQ0FBQyw4REFBYztBQUNsQyxnQkFBZ0IsbUJBQU8sQ0FBQyxzRUFBa0I7O0FBRTFDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsY0FBYztBQUN6QjtBQUNBOztBQUVBOztBQUVBO0FBQ0EsMENBQTBDLGtCQUFrQixtQkFBbUI7QUFDL0U7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW91c2UvZHJhZ2Ryb3BfaGFuZGxlci5qcz9lYTY2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9tb3VzZV9oYW5kbGVyXCIpLk1vdXNlSGFuZGxlcn0gTW91c2VIYW5kbGVyXG4gKi9cbnZhciBkb20gPSByZXF1aXJlKFwiLi4vbGliL2RvbVwiKTtcbnZhciBldmVudCA9IHJlcXVpcmUoXCIuLi9saWIvZXZlbnRcIik7XG52YXIgdXNlcmFnZW50ID0gcmVxdWlyZShcIi4uL2xpYi91c2VyYWdlbnRcIik7XG5cbnZhciBBVVRPU0NST0xMX0RFTEFZID0gMjAwO1xudmFyIFNDUk9MTF9DVVJTT1JfREVMQVkgPSAyMDA7XG52YXIgU0NST0xMX0NVUlNPUl9IWVNURVJFU0lTID0gNTtcblxuLyoqXG4gKiBAcGFyYW0ge01vdXNlSGFuZGxlcn0gbW91c2VIYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIERyYWdkcm9wSGFuZGxlcihtb3VzZUhhbmRsZXIpIHtcblxuICAgIHZhciBlZGl0b3IgPSBtb3VzZUhhbmRsZXIuZWRpdG9yO1xuXG4gICAgdmFyIGRyYWdJbWFnZSA9IGRvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRyYWdJbWFnZS5zdHlsZS5jc3NUZXh0ID0gXCJ0b3A6LTEwMHB4O3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MjE0NzQ4MzY0NztvcGFjaXR5OjAuNVwiO1xuICAgIGRyYWdJbWFnZS50ZXh0Q29udGVudCA9IFwiXFx4YTBcIjtcblxuICAgIHZhciBleHBvcnRzID0gW1wiZHJhZ1dhaXRcIiwgXCJkcmFnV2FpdEVuZFwiLCBcInN0YXJ0RHJhZ1wiLCBcImRyYWdSZWFkeUVuZFwiLCBcIm9uTW91c2VEcmFnXCJdO1xuXG4gICAgZXhwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgbW91c2VIYW5kbGVyW3hdID0gdGhpc1t4XTtcbiAgICB9LCB0aGlzKTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZWRpdG9yLm9uKFwibW91c2Vkb3duXCIsIHRoaXMub25Nb3VzZURvd24uYmluZChtb3VzZUhhbmRsZXIpKTtcblxuICAgIHZhciBtb3VzZVRhcmdldCA9IGVkaXRvci5jb250YWluZXI7XG4gICAgdmFyIGRyYWdTZWxlY3Rpb25NYXJrZXIsIHgsIHk7XG4gICAgdmFyIHRpbWVySWQsIHJhbmdlO1xuICAgIHZhciBkcmFnQ3Vyc29yLCBjb3VudGVyID0gMDtcbiAgICB2YXIgZHJhZ09wZXJhdGlvbjtcbiAgICB2YXIgaXNJbnRlcm5hbDtcbiAgICB2YXIgYXV0b1Njcm9sbFN0YXJ0VGltZTtcbiAgICB2YXIgY3Vyc29yTW92ZWRUaW1lO1xuICAgIHZhciBjdXJzb3JQb2ludE9uQ2FyZXRNb3ZlZDtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZVxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cbiAgICB0aGlzLm9uRHJhZ1N0YXJ0ID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyB3ZWJraXQgd29ya2Fyb3VuZCwgc2VlIHRoaXMub25Nb3VzZURvd25cbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsRHJhZyB8fCAhbW91c2VUYXJnZXQuZHJhZ2dhYmxlKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgc2VsZi5zdGFydFNlbGVjdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuY2FwdHVyZU1vdXNlKGUpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJhbmdlID0gZWRpdG9yLmdldFNlbGVjdGlvblJhbmdlKCk7XG5cbiAgICAgICAgdmFyIGRhdGFUcmFuc2ZlciA9IGUuZGF0YVRyYW5zZmVyO1xuICAgICAgICBkYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IGVkaXRvci5nZXRSZWFkT25seSgpID8gXCJjb3B5XCIgOiBcImNvcHlNb3ZlXCI7XG4gICAgICAgIGVkaXRvci5jb250YWluZXIuYXBwZW5kQ2hpbGQoZHJhZ0ltYWdlKTtcblxuICAgICAgICBkYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlICYmIGRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZHJhZ0ltYWdlLCAwLCAwKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGVkaXRvci5jb250YWluZXIucmVtb3ZlQ2hpbGQoZHJhZ0ltYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNsZWFyIE9wZXJhIGdhcmJhZ2VcbiAgICAgICAgZGF0YVRyYW5zZmVyLmNsZWFyRGF0YSgpO1xuICAgICAgICBkYXRhVHJhbnNmZXIuc2V0RGF0YShcIlRleHRcIiwgZWRpdG9yLnNlc3Npb24uZ2V0VGV4dFJhbmdlKCkpO1xuXG4gICAgICAgIGlzSW50ZXJuYWwgPSB0cnVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKFwiZHJhZ1wiKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICogQHRoaXMge01vdXNlSGFuZGxlcn1cbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqL1xuICAgIHRoaXMub25EcmFnRW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBtb3VzZVRhcmdldC5kcmFnZ2FibGUgPSBmYWxzZTtcbiAgICAgICAgaXNJbnRlcm5hbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKG51bGwpO1xuICAgICAgICBpZiAoIWVkaXRvci5nZXRSZWFkT25seSgpKSB7XG4gICAgICAgICAgICB2YXIgZHJvcEVmZmVjdCA9IGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3Q7XG4gICAgICAgICAgICBpZiAoIWRyYWdPcGVyYXRpb24gJiYgZHJvcEVmZmVjdCA9PSBcIm1vdmVcIilcbiAgICAgICAgICAgICAgICAvLyB0ZXh0IHdhcyBkcmFnZ2VkIG91dHNpZGUgdGhlIGVkaXRvclxuICAgICAgICAgICAgICAgIGVkaXRvci5zZXNzaW9uLnJlbW92ZShlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKSk7XG4gICAgICAgICAgICBlZGl0b3IuJHJlc2V0Q3Vyc29yU3R5bGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVkaXRvci51bnNldFN0eWxlKFwiYWNlX2RyYWdnaW5nXCIpO1xuICAgICAgICB0aGlzLmVkaXRvci5yZW5kZXJlci5zZXRDdXJzb3JTdHlsZShcIlwiKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICogQHRoaXMge01vdXNlSGFuZGxlcn1cbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqL1xuICAgIHRoaXMub25EcmFnRW50ZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlZGl0b3IuZ2V0UmVhZE9ubHkoKSB8fCAhY2FuQWNjZXB0KGUuZGF0YVRyYW5zZmVyKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgeCA9IGUuY2xpZW50WDtcbiAgICAgICAgeSA9IGUuY2xpZW50WTtcbiAgICAgICAgaWYgKCFkcmFnU2VsZWN0aW9uTWFya2VyKVxuICAgICAgICAgICAgYWRkRHJhZ01hcmtlcigpO1xuICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIC8vIGRhdGFUcmFuc2ZlciBvYmplY3QgZG9lcyBub3Qgc2F2ZSBkcm9wRWZmZWN0IGFjcm9zcyBldmVudHMgb24gSUUsIHNvIHdlIHN0b3JlIGl0IGluIGRyYWdPcGVyYXRpb25cbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IGRyYWdPcGVyYXRpb24gPSBnZXREcm9wRWZmZWN0KGUpO1xuICAgICAgICByZXR1cm4gZXZlbnQucHJldmVudERlZmF1bHQoZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZVxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cbiAgICB0aGlzLm9uRHJhZ092ZXIgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlZGl0b3IuZ2V0UmVhZE9ubHkoKSB8fCAhY2FuQWNjZXB0KGUuZGF0YVRyYW5zZmVyKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgeCA9IGUuY2xpZW50WDtcbiAgICAgICAgeSA9IGUuY2xpZW50WTtcbiAgICAgICAgLy8gT3BlcmEgZG9lc24ndCB0cmlnZ2VyIGRyYWdlbnRlciBldmVudCBvbiBkcmFnIHN0YXJ0XG4gICAgICAgIGlmICghZHJhZ1NlbGVjdGlvbk1hcmtlcikge1xuICAgICAgICAgICAgYWRkRHJhZ01hcmtlcigpO1xuICAgICAgICAgICAgY291bnRlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvbk1vdXNlTW92ZVRpbWVyICE9PSBudWxsKVxuICAgICAgICAgICAgb25Nb3VzZU1vdmVUaW1lciA9IG51bGw7XG5cbiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IGRyYWdPcGVyYXRpb24gPSBnZXREcm9wRWZmZWN0KGUpO1xuICAgICAgICByZXR1cm4gZXZlbnQucHJldmVudERlZmF1bHQoZSk7XG4gICAgfTtcblxuICAgIHRoaXMub25EcmFnTGVhdmUgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvdW50ZXItLTtcbiAgICAgICAgaWYgKGNvdW50ZXIgPD0gMCAmJiBkcmFnU2VsZWN0aW9uTWFya2VyKSB7XG4gICAgICAgICAgICBjbGVhckRyYWdNYXJrZXIoKTtcbiAgICAgICAgICAgIGRyYWdPcGVyYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZVxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cbiAgICB0aGlzLm9uRHJvcCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCFkcmFnQ3Vyc29yKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgZGF0YVRyYW5zZmVyID0gZS5kYXRhVHJhbnNmZXI7XG4gICAgICAgIGlmIChpc0ludGVybmFsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGRyYWdPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwibW92ZVwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UuY29udGFpbnMoZHJhZ0N1cnNvci5yb3csIGRyYWdDdXJzb3IuY29sdW1uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXIgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogZHJhZ0N1cnNvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGRyYWdDdXJzb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gZWRpdG9yLm1vdmVUZXh0KHJhbmdlLCBkcmFnQ3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY29weVwiOlxuICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHRleHRcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSBlZGl0b3IubW92ZVRleHQocmFuZ2UsIGRyYWdDdXJzb3IsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkcm9wRGF0YSA9IGRhdGFUcmFuc2Zlci5nZXREYXRhKCdUZXh0Jyk7XG4gICAgICAgICAgICByYW5nZSA9IHtcbiAgICAgICAgICAgICAgICBzdGFydDogZHJhZ0N1cnNvcixcbiAgICAgICAgICAgICAgICBlbmQ6IGVkaXRvci5zZXNzaW9uLmluc2VydChkcmFnQ3Vyc29yLCBkcm9wRGF0YSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgICAgIGRyYWdPcGVyYXRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyRHJhZ01hcmtlcigpO1xuICAgICAgICByZXR1cm4gZXZlbnQucHJldmVudERlZmF1bHQoZSk7XG4gICAgfTtcblxuICAgIGV2ZW50LmFkZExpc3RlbmVyKG1vdXNlVGFyZ2V0LCBcImRyYWdzdGFydFwiLCB0aGlzLm9uRHJhZ1N0YXJ0LmJpbmQobW91c2VIYW5kbGVyKSwgZWRpdG9yKTtcbiAgICBldmVudC5hZGRMaXN0ZW5lcihtb3VzZVRhcmdldCwgXCJkcmFnZW5kXCIsIHRoaXMub25EcmFnRW5kLmJpbmQobW91c2VIYW5kbGVyKSwgZWRpdG9yKTtcbiAgICBldmVudC5hZGRMaXN0ZW5lcihtb3VzZVRhcmdldCwgXCJkcmFnZW50ZXJcIiwgdGhpcy5vbkRyYWdFbnRlci5iaW5kKG1vdXNlSGFuZGxlciksIGVkaXRvcik7XG4gICAgZXZlbnQuYWRkTGlzdGVuZXIobW91c2VUYXJnZXQsIFwiZHJhZ292ZXJcIiwgdGhpcy5vbkRyYWdPdmVyLmJpbmQobW91c2VIYW5kbGVyKSwgZWRpdG9yKTtcbiAgICBldmVudC5hZGRMaXN0ZW5lcihtb3VzZVRhcmdldCwgXCJkcmFnbGVhdmVcIiwgdGhpcy5vbkRyYWdMZWF2ZS5iaW5kKG1vdXNlSGFuZGxlciksIGVkaXRvcik7XG4gICAgZXZlbnQuYWRkTGlzdGVuZXIobW91c2VUYXJnZXQsIFwiZHJvcFwiLCB0aGlzLm9uRHJvcC5iaW5kKG1vdXNlSGFuZGxlciksIGVkaXRvcik7XG5cbiAgICBmdW5jdGlvbiBzY3JvbGxDdXJzb3JJbnRvVmlldyhjdXJzb3IsIHByZXZDdXJzb3IpIHtcbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciB2TW92ZW1lbnQgPSAhcHJldkN1cnNvciB8fCBjdXJzb3Iucm93ICE9IHByZXZDdXJzb3Iucm93O1xuICAgICAgICB2YXIgaE1vdmVtZW50ID0gIXByZXZDdXJzb3IgfHwgY3Vyc29yLmNvbHVtbiAhPSBwcmV2Q3Vyc29yLmNvbHVtbjtcbiAgICAgICAgaWYgKCFjdXJzb3JNb3ZlZFRpbWUgfHwgdk1vdmVtZW50IHx8IGhNb3ZlbWVudCkge1xuICAgICAgICAgICAgZWRpdG9yLm1vdmVDdXJzb3JUb1Bvc2l0aW9uKGN1cnNvcik7XG4gICAgICAgICAgICBjdXJzb3JNb3ZlZFRpbWUgPSBub3c7XG4gICAgICAgICAgICBjdXJzb3JQb2ludE9uQ2FyZXRNb3ZlZCA9IHt4OiB4LCB5OiB5fTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IGNhbGNEaXN0YW5jZShjdXJzb3JQb2ludE9uQ2FyZXRNb3ZlZC54LCBjdXJzb3JQb2ludE9uQ2FyZXRNb3ZlZC55LCB4LCB5KTtcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+IFNDUk9MTF9DVVJTT1JfSFlTVEVSRVNJUykge1xuICAgICAgICAgICAgICAgIGN1cnNvck1vdmVkVGltZSA9IG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vdyAtIGN1cnNvck1vdmVkVGltZSA+PSBTQ1JPTExfQ1VSU09SX0RFTEFZKSB7XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KCk7XG4gICAgICAgICAgICAgICAgY3Vyc29yTW92ZWRUaW1lID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF1dG9TY3JvbGwoY3Vyc29yLCBwcmV2Q3Vyc29yKSB7XG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgbGluZUhlaWdodCA9IGVkaXRvci5yZW5kZXJlci5sYXllckNvbmZpZy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgY2hhcmFjdGVyV2lkdGggPSBlZGl0b3IucmVuZGVyZXIubGF5ZXJDb25maWcuY2hhcmFjdGVyV2lkdGg7XG4gICAgICAgIHZhciBlZGl0b3JSZWN0ID0gZWRpdG9yLnJlbmRlcmVyLnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgb2Zmc2V0cyA9IHtcbiAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICAgbGVmdDogeCAtIGVkaXRvclJlY3QubGVmdCxcbiAgICAgICAgICAgICAgIHJpZ2h0OiBlZGl0b3JSZWN0LnJpZ2h0IC0geFxuICAgICAgICAgICB9LFxuICAgICAgICAgICB5OiB7XG4gICAgICAgICAgICAgICB0b3A6IHkgLSBlZGl0b3JSZWN0LnRvcCxcbiAgICAgICAgICAgICAgIGJvdHRvbTogZWRpdG9yUmVjdC5ib3R0b20gLSB5XG4gICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG5lYXJlc3RYT2Zmc2V0ID0gTWF0aC5taW4ob2Zmc2V0cy54LmxlZnQsIG9mZnNldHMueC5yaWdodCk7XG4gICAgICAgIHZhciBuZWFyZXN0WU9mZnNldCA9IE1hdGgubWluKG9mZnNldHMueS50b3AsIG9mZnNldHMueS5ib3R0b20pO1xuICAgICAgICB2YXIgc2Nyb2xsQ3Vyc29yID0ge3JvdzogY3Vyc29yLnJvdywgY29sdW1uOiBjdXJzb3IuY29sdW1ufTtcbiAgICAgICAgaWYgKG5lYXJlc3RYT2Zmc2V0IC8gY2hhcmFjdGVyV2lkdGggPD0gMikge1xuICAgICAgICAgICAgc2Nyb2xsQ3Vyc29yLmNvbHVtbiArPSAob2Zmc2V0cy54LmxlZnQgPCBvZmZzZXRzLngucmlnaHQgPyAtMyA6ICsyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmVhcmVzdFlPZmZzZXQgLyBsaW5lSGVpZ2h0IDw9IDEpIHtcbiAgICAgICAgICAgIHNjcm9sbEN1cnNvci5yb3cgKz0gKG9mZnNldHMueS50b3AgPCBvZmZzZXRzLnkuYm90dG9tID8gLTEgOiArMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZTY3JvbGwgPSBjdXJzb3Iucm93ICE9IHNjcm9sbEN1cnNvci5yb3c7XG4gICAgICAgIHZhciBoU2Nyb2xsID0gY3Vyc29yLmNvbHVtbiAhPSBzY3JvbGxDdXJzb3IuY29sdW1uO1xuICAgICAgICB2YXIgdk1vdmVtZW50ID0gIXByZXZDdXJzb3IgfHwgY3Vyc29yLnJvdyAhPSBwcmV2Q3Vyc29yLnJvdztcbiAgICAgICAgaWYgKHZTY3JvbGwgfHwgKGhTY3JvbGwgJiYgIXZNb3ZlbWVudCkpIHtcbiAgICAgICAgICAgIGlmICghYXV0b1Njcm9sbFN0YXJ0VGltZSlcbiAgICAgICAgICAgICAgICBhdXRvU2Nyb2xsU3RhcnRUaW1lID0gbm93O1xuICAgICAgICAgICAgZWxzZSBpZiAobm93IC0gYXV0b1Njcm9sbFN0YXJ0VGltZSA+PSBBVVRPU0NST0xMX0RFTEFZKVxuICAgICAgICAgICAgICAgIGVkaXRvci5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldyhzY3JvbGxDdXJzb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXV0b1Njcm9sbFN0YXJ0VGltZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkRyYWdJbnRlcnZhbCgpIHtcbiAgICAgICAgdmFyIHByZXZDdXJzb3IgPSBkcmFnQ3Vyc29yO1xuICAgICAgICBkcmFnQ3Vyc29yID0gZWRpdG9yLnJlbmRlcmVyLnNjcmVlblRvVGV4dENvb3JkaW5hdGVzKHgsIHkpO1xuICAgICAgICBzY3JvbGxDdXJzb3JJbnRvVmlldyhkcmFnQ3Vyc29yLCBwcmV2Q3Vyc29yKTtcbiAgICAgICAgYXV0b1Njcm9sbChkcmFnQ3Vyc29yLCBwcmV2Q3Vyc29yKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGREcmFnTWFya2VyKCkge1xuICAgICAgICByYW5nZSA9IGVkaXRvci5zZWxlY3Rpb24udG9PcmllbnRlZFJhbmdlKCk7XG4gICAgICAgIGRyYWdTZWxlY3Rpb25NYXJrZXIgPSBlZGl0b3Iuc2Vzc2lvbi5hZGRNYXJrZXIocmFuZ2UsIFwiYWNlX3NlbGVjdGlvblwiLCBlZGl0b3IuZ2V0U2VsZWN0aW9uU3R5bGUoKSk7XG4gICAgICAgIGVkaXRvci5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICBpZiAoZWRpdG9yLmlzRm9jdXNlZCgpKVxuICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLiRjdXJzb3JMYXllci5zZXRCbGlua2luZyhmYWxzZSk7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgICAgIG9uRHJhZ0ludGVydmFsKCk7XG4gICAgICAgIHRpbWVySWQgPSBzZXRJbnRlcnZhbChvbkRyYWdJbnRlcnZhbCwgMjApO1xuICAgICAgICBjb3VudGVyID0gMDtcbiAgICAgICAgZXZlbnQuYWRkTGlzdGVuZXIoZG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIG9uTW91c2VNb3ZlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckRyYWdNYXJrZXIoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgICAgIGVkaXRvci5zZXNzaW9uLnJlbW92ZU1hcmtlcihkcmFnU2VsZWN0aW9uTWFya2VyKTtcbiAgICAgICAgZHJhZ1NlbGVjdGlvbk1hcmtlciA9IG51bGw7XG4gICAgICAgIGVkaXRvci5zZWxlY3Rpb24uZnJvbU9yaWVudGVkUmFuZ2UocmFuZ2UpO1xuICAgICAgICBpZiAoZWRpdG9yLmlzRm9jdXNlZCgpICYmICFpc0ludGVybmFsKVxuICAgICAgICAgICAgZWRpdG9yLiRyZXNldEN1cnNvclN0eWxlKCk7XG4gICAgICAgIHJhbmdlID0gbnVsbDtcbiAgICAgICAgZHJhZ0N1cnNvciA9IG51bGw7XG4gICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICBhdXRvU2Nyb2xsU3RhcnRUaW1lID0gbnVsbDtcbiAgICAgICAgY3Vyc29yTW92ZWRUaW1lID0gbnVsbDtcbiAgICAgICAgZXZlbnQucmVtb3ZlTGlzdGVuZXIoZG9jdW1lbnQsIFwibW91c2Vtb3ZlXCIsIG9uTW91c2VNb3ZlKTtcbiAgICB9XG5cbiAgICAvLyBzb21ldGltZXMgb3RoZXIgY29kZSBvbiB0aGUgcGFnZSBjYW4gc3RvcCBkcmFnbGVhdmUgZXZlbnQgbGVhdmluZyBlZGl0b3Igc3R1Y2sgaW4gdGhlIGRyYWcgc3RhdGVcbiAgICB2YXIgb25Nb3VzZU1vdmVUaW1lciA9IG51bGw7XG4gICAgZnVuY3Rpb24gb25Nb3VzZU1vdmUoKSB7XG4gICAgICAgIGlmIChvbk1vdXNlTW92ZVRpbWVyID09IG51bGwpIHtcbiAgICAgICAgICAgIG9uTW91c2VNb3ZlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChvbk1vdXNlTW92ZVRpbWVyICE9IG51bGwgJiYgZHJhZ1NlbGVjdGlvbk1hcmtlcilcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJEcmFnTWFya2VyKCk7XG4gICAgICAgICAgICB9LCAyMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5BY2NlcHQoZGF0YVRyYW5zZmVyKSB7XG4gICAgICAgIHZhciB0eXBlcyA9IGRhdGFUcmFuc2Zlci50eXBlcztcbiAgICAgICAgcmV0dXJuICF0eXBlcyB8fCBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKHR5cGVzLCBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZSA9PSAndGV4dC9wbGFpbicgfHwgdHlwZSA9PSAnVGV4dCc7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERyb3BFZmZlY3QoZSkge1xuICAgICAgICB2YXIgY29weUFsbG93ZWQgPSBbJ2NvcHknLCAnY29weW1vdmUnLCAnYWxsJywgJ3VuaW5pdGlhbGl6ZWQnXTtcbiAgICAgICAgdmFyIG1vdmVBbGxvd2VkID0gWydtb3ZlJywgJ2NvcHltb3ZlJywgJ2xpbmttb3ZlJywgJ2FsbCcsICd1bmluaXRpYWxpemVkJ107XG5cbiAgICAgICAgdmFyIGNvcHlNb2RpZmllclN0YXRlID0gdXNlcmFnZW50LmlzTWFjID8gZS5hbHRLZXkgOiBlLmN0cmxLZXk7XG5cbiAgICAgICAgLy8gSUUgdGhyb3dzIGVycm9yIHdoaWxlIGRyYWdnaW5nIGZyb20gYW5vdGhlciBhcHBcbiAgICAgICAgdmFyIGVmZmVjdEFsbG93ZWQgPSBcInVuaW5pdGlhbGl6ZWRcIjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGVmZmVjdEFsbG93ZWQgPSBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIHZhciBkcm9wRWZmZWN0ID0gXCJub25lXCI7XG5cbiAgICAgICAgaWYgKGNvcHlNb2RpZmllclN0YXRlICYmIGNvcHlBbGxvd2VkLmluZGV4T2YoZWZmZWN0QWxsb3dlZCkgPj0gMClcbiAgICAgICAgICAgIGRyb3BFZmZlY3QgPSBcImNvcHlcIjtcbiAgICAgICAgZWxzZSBpZiAobW92ZUFsbG93ZWQuaW5kZXhPZihlZmZlY3RBbGxvd2VkKSA+PSAwKVxuICAgICAgICAgICAgZHJvcEVmZmVjdCA9IFwibW92ZVwiO1xuICAgICAgICBlbHNlIGlmIChjb3B5QWxsb3dlZC5pbmRleE9mKGVmZmVjdEFsbG93ZWQpID49IDApXG4gICAgICAgICAgICBkcm9wRWZmZWN0ID0gXCJjb3B5XCI7XG5cbiAgICAgICAgcmV0dXJuIGRyb3BFZmZlY3Q7XG4gICAgfVxufVxuXG4vKipcbiAqIEB0aGlzIHtNb3VzZUhhbmRsZXJ9XG4gKi9cbihmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXIgJiB0aGlzfVxuICAgICAqL1xuICAgIHRoaXMuZHJhZ1dhaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGludGVydmFsID0gRGF0ZS5ub3coKSAtIHRoaXMubW91c2Vkb3duRXZlbnQudGltZTtcbiAgICAgICAgaWYgKGludGVydmFsID4gdGhpcy5lZGl0b3IuZ2V0RHJhZ0RlbGF5KCkpXG4gICAgICAgICAgICB0aGlzLnN0YXJ0RHJhZygpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7TW91c2VIYW5kbGVyICYgdGhpc31cbiAgICAgKi9cbiAgICB0aGlzLmRyYWdXYWl0RW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLmVkaXRvci5jb250YWluZXI7XG4gICAgICAgIHRhcmdldC5kcmFnZ2FibGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFydFNlbGVjdCh0aGlzLm1vdXNlZG93bkV2ZW50LmdldERvY3VtZW50UG9zaXRpb24oKSk7XG4gICAgICAgIHRoaXMuc2VsZWN0RW5kKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEB0aGlzIHtNb3VzZUhhbmRsZXIgJiB0aGlzfVxuICAgICAqL1xuICAgIHRoaXMuZHJhZ1JlYWR5RW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB0aGlzLmVkaXRvci4kcmVzZXRDdXJzb3JTdHlsZSgpO1xuICAgICAgICB0aGlzLmVkaXRvci51bnNldFN0eWxlKFwiYWNlX2RyYWdnaW5nXCIpO1xuICAgICAgICB0aGlzLmVkaXRvci5yZW5kZXJlci5zZXRDdXJzb3JTdHlsZShcIlwiKTtcbiAgICAgICAgdGhpcy5kcmFnV2FpdEVuZCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7TW91c2VIYW5kbGVyICYgdGhpc31cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0RHJhZyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuY2FuY2VsRHJhZyA9IGZhbHNlO1xuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG4gICAgICAgIHZhciB0YXJnZXQgPSBlZGl0b3IuY29udGFpbmVyO1xuICAgICAgICB0YXJnZXQuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgZWRpdG9yLnJlbmRlcmVyLiRjdXJzb3JMYXllci5zZXRCbGlua2luZyhmYWxzZSk7XG4gICAgICAgIGVkaXRvci5zZXRTdHlsZShcImFjZV9kcmFnZ2luZ1wiKTtcbiAgICAgICAgdmFyIGN1cnNvclN0eWxlID0gdXNlcmFnZW50LmlzV2luID8gXCJkZWZhdWx0XCIgOiBcIm1vdmVcIjtcbiAgICAgICAgZWRpdG9yLnJlbmRlcmVyLnNldEN1cnNvclN0eWxlKGN1cnNvclN0eWxlKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShcImRyYWdSZWFkeVwiKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHRoaXMge01vdXNlSGFuZGxlciAmIHRoaXN9XG4gICAgICovXG4gICAgdGhpcy5vbk1vdXNlRHJhZyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZWRpdG9yLmNvbnRhaW5lcjtcbiAgICAgICAgaWYgKHVzZXJhZ2VudC5pc0lFICYmIHRoaXMuc3RhdGUgPT0gXCJkcmFnUmVhZHlcIikge1xuICAgICAgICAgICAgLy8gSUUgZG9lcyBub3QgaGFuZGxlIFtkcmFnZ2FibGVdIGF0dHJpYnV0ZSBzZXQgYWZ0ZXIgbW91c2Vkb3duXG4gICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2UodGhpcy5tb3VzZWRvd25FdmVudC54LCB0aGlzLm1vdXNlZG93bkV2ZW50LnksIHRoaXMueCwgdGhpcy55KTtcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+IDMpXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHRhcmdldC5kcmFnRHJvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBcImRyYWdXYWl0XCIpIHtcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IGNhbGNEaXN0YW5jZSh0aGlzLm1vdXNlZG93bkV2ZW50LngsIHRoaXMubW91c2Vkb3duRXZlbnQueSwgdGhpcy54LCB0aGlzLnkpO1xuICAgICAgICAgICAgaWYgKGRpc3RhbmNlID4gMCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5kcmFnZ2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0U2VsZWN0KHRoaXMubW91c2Vkb3duRXZlbnQuZ2V0RG9jdW1lbnRQb3NpdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7TW91c2VIYW5kbGVyICYgdGhpc31cbiAgICAgKi9cbiAgICB0aGlzLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIXRoaXMuJGRyYWdFbmFibGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm1vdXNlZG93bkV2ZW50ID0gZTtcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXMuZWRpdG9yO1xuXG4gICAgICAgIHZhciBpblNlbGVjdGlvbiA9IGUuaW5TZWxlY3Rpb24oKTtcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGUuZ2V0QnV0dG9uKCk7XG4gICAgICAgIHZhciBjbGlja0NvdW50ID0gZS5kb21FdmVudC5kZXRhaWwgfHwgMTtcbiAgICAgICAgaWYgKGNsaWNrQ291bnQgPT09IDEgJiYgYnV0dG9uID09PSAwICYmIGluU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZS5lZGl0b3IuaW5NdWx0aVNlbGVjdE1vZGUgJiYgKGUuZ2V0QWNjZWxLZXkoKSB8fCBlLmdldFNoaWZ0S2V5KCkpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMubW91c2Vkb3duRXZlbnQudGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBlLmRvbUV2ZW50LnRhcmdldCB8fCBlLmRvbUV2ZW50LnNyY0VsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoXCJ1bnNlbGVjdGFibGVcIiBpbiBldmVudFRhcmdldClcbiAgICAgICAgICAgICAgICBldmVudFRhcmdldC51bnNlbGVjdGFibGUgPSBcIm9uXCI7XG4gICAgICAgICAgICBpZiAoZWRpdG9yLmdldERyYWdEZWxheSgpKSB7XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI4NjcwMFxuICAgICAgICAgICAgICAgIGlmICh1c2VyYWdlbnQuaXNXZWJLaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxEcmFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vdXNlVGFyZ2V0ID0gZWRpdG9yLmNvbnRhaW5lcjtcbiAgICAgICAgICAgICAgICAgICAgbW91c2VUYXJnZXQuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcImRyYWdXYWl0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RHJhZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jYXB0dXJlTW91c2UoZSwgdGhpcy5vbk1vdXNlRHJhZy5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIC8vIFRPRE86IGEgYmV0dGVyIHdheSB0byBwcmV2ZW50IGRlZmF1bHQgaGFuZGxlciB3aXRob3V0IHByZXZlbnRpbmcgYnJvd3NlciBkZWZhdWx0IGFjdGlvblxuICAgICAgICAgICAgZS5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pLmNhbGwoRHJhZ2Ryb3BIYW5kbGVyLnByb3RvdHlwZSk7XG5cblxuZnVuY3Rpb24gY2FsY0Rpc3RhbmNlKGF4LCBheSwgYngsIGJ5KSB7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhieCAtIGF4LCAyKSArIE1hdGgucG93KGJ5IC0gYXksIDIpKTtcbn1cblxuZXhwb3J0cy5EcmFnZHJvcEhhbmRsZXIgPSBEcmFnZHJvcEhhbmRsZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mouse/dragdrop_handler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mouse/fold_handler.js":
/*!*********************************************************!*\
  !*** ./node_modules/ace-code/src/mouse/fold_handler.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\n\nclass FoldHandler {\n    constructor(editor) {\n\n        editor.on(\"click\", function(e) {\n            var position = e.getDocumentPosition();\n            var session = editor.session;\n\n            // If the user clicked on a fold, then expand it.\n            var fold = session.getFoldAt(position.row, position.column, 1);\n            if (fold) {\n                if (e.getAccelKey())\n                    session.removeFold(fold);\n                else\n                    session.expandFold(fold);\n\n                e.stop();\n            }\n\n            var target = e.domEvent && e.domEvent.target;\n            if (target && dom.hasCssClass(target, \"ace_inline_button\")) {\n                if (dom.hasCssClass(target, \"ace_toggle_wrap\")) {\n                    session.setOption(\"wrap\", !session.getUseWrapMode());\n                    editor.renderer.scrollCursorIntoView();\n                }\n            }\n        });\n\n        editor.on(\"gutterclick\", function(e) {\n            var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n\n            if (gutterRegion == \"foldWidgets\") {\n                var row = e.getDocumentPosition().row;\n                var session = editor.session;\n                if (session.foldWidgets && session.foldWidgets[row])\n                    editor.session.onFoldWidgetClick(row, e);\n                if (!editor.isFocused())\n                    editor.focus();\n                e.stop();\n            }\n        });\n\n        editor.on(\"gutterdblclick\", function(e) {\n            var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n\n            if (gutterRegion == \"foldWidgets\") {\n                var row = e.getDocumentPosition().row;\n                var session = editor.session;\n                var data = session.getParentFoldRangeData(row, true);\n                var range = data.range || data.firstRange;\n\n                if (range) {\n                    row = range.start.row;\n                    var fold = session.getFoldAt(row, session.getLine(row).length, 1);\n\n                    if (fold) {\n                        session.removeFold(fold);\n                    } else {\n                        session.addFold(\"...\", range);\n                        editor.renderer.scrollCursorIntoView({row: range.start.row, column: 0});\n                    }\n                }\n                e.stop();\n            }\n        });\n    }\n}\n\nexports.FoldHandler = FoldHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL2ZvbGRfaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLFVBQVUsbUJBQU8sQ0FBQywwREFBWTs7QUFFOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLDhEQUE4RCxnQ0FBZ0M7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQSxtQkFBbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9tb3VzZS9mb2xkX2hhbmRsZXIuanM/YmVkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBkb20gPSByZXF1aXJlKFwiLi4vbGliL2RvbVwiKTtcblxuY2xhc3MgRm9sZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKGVkaXRvcikge1xuXG4gICAgICAgIGVkaXRvci5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGUuZ2V0RG9jdW1lbnRQb3NpdGlvbigpO1xuICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBlZGl0b3Iuc2Vzc2lvbjtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2xpY2tlZCBvbiBhIGZvbGQsIHRoZW4gZXhwYW5kIGl0LlxuICAgICAgICAgICAgdmFyIGZvbGQgPSBzZXNzaW9uLmdldEZvbGRBdChwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbiwgMSk7XG4gICAgICAgICAgICBpZiAoZm9sZCkge1xuICAgICAgICAgICAgICAgIGlmIChlLmdldEFjY2VsS2V5KCkpXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24ucmVtb3ZlRm9sZChmb2xkKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24uZXhwYW5kRm9sZChmb2xkKTtcblxuICAgICAgICAgICAgICAgIGUuc3RvcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS5kb21FdmVudCAmJiBlLmRvbUV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgZG9tLmhhc0Nzc0NsYXNzKHRhcmdldCwgXCJhY2VfaW5saW5lX2J1dHRvblwiKSkge1xuICAgICAgICAgICAgICAgIGlmIChkb20uaGFzQ3NzQ2xhc3ModGFyZ2V0LCBcImFjZV90b2dnbGVfd3JhcFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnNldE9wdGlvbihcIndyYXBcIiwgIXNlc3Npb24uZ2V0VXNlV3JhcE1vZGUoKSk7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZWRpdG9yLm9uKFwiZ3V0dGVyY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGd1dHRlclJlZ2lvbiA9IGVkaXRvci5yZW5kZXJlci4kZ3V0dGVyTGF5ZXIuZ2V0UmVnaW9uKGUpO1xuXG4gICAgICAgICAgICBpZiAoZ3V0dGVyUmVnaW9uID09IFwiZm9sZFdpZGdldHNcIikge1xuICAgICAgICAgICAgICAgIHZhciByb3cgPSBlLmdldERvY3VtZW50UG9zaXRpb24oKS5yb3c7XG4gICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBlZGl0b3Iuc2Vzc2lvbjtcbiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5mb2xkV2lkZ2V0cyAmJiBzZXNzaW9uLmZvbGRXaWRnZXRzW3Jvd10pXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXNzaW9uLm9uRm9sZFdpZGdldENsaWNrKHJvdywgZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFlZGl0b3IuaXNGb2N1c2VkKCkpXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGUuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBlZGl0b3Iub24oXCJndXR0ZXJkYmxjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgZ3V0dGVyUmVnaW9uID0gZWRpdG9yLnJlbmRlcmVyLiRndXR0ZXJMYXllci5nZXRSZWdpb24oZSk7XG5cbiAgICAgICAgICAgIGlmIChndXR0ZXJSZWdpb24gPT0gXCJmb2xkV2lkZ2V0c1wiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IGUuZ2V0RG9jdW1lbnRQb3NpdGlvbigpLnJvdztcbiAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IGVkaXRvci5zZXNzaW9uO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gc2Vzc2lvbi5nZXRQYXJlbnRGb2xkUmFuZ2VEYXRhKHJvdywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gZGF0YS5yYW5nZSB8fCBkYXRhLmZpcnN0UmFuZ2U7XG5cbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gcmFuZ2Uuc3RhcnQucm93O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm9sZCA9IHNlc3Npb24uZ2V0Rm9sZEF0KHJvdywgc2Vzc2lvbi5nZXRMaW5lKHJvdykubGVuZ3RoLCAxKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5yZW1vdmVGb2xkKGZvbGQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5hZGRGb2xkKFwiLi4uXCIsIHJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZW5kZXJlci5zY3JvbGxDdXJzb3JJbnRvVmlldyh7cm93OiByYW5nZS5zdGFydC5yb3csIGNvbHVtbjogMH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydHMuRm9sZEhhbmRsZXIgPSBGb2xkSGFuZGxlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mouse/fold_handler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mouse/mouse_event.js":
/*!********************************************************!*\
  !*** ./node_modules/ace-code/src/mouse/mouse_event.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar useragent = __webpack_require__(/*! ../lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\n\n/*\n * Custom Ace mouse event\n */\nclass MouseEvent {\n    constructor(domEvent, editor) {\n        /** @type {number} */this.speed;\n        /** @type {number} */this.wheelX;\n        /** @type {number} */this.wheelY;\n        this.domEvent = domEvent;\n        this.editor = editor;\n\n        this.x = this.clientX = domEvent.clientX;\n        this.y = this.clientY = domEvent.clientY;\n\n        this.$pos = null;\n        this.$inSelection = null;\n\n        this.propagationStopped = false;\n        this.defaultPrevented = false;\n    }\n    \n    stopPropagation() {\n        event.stopPropagation(this.domEvent);\n        this.propagationStopped = true;\n    }\n    \n    preventDefault() {\n        event.preventDefault(this.domEvent);\n        this.defaultPrevented = true;\n    }\n    \n    stop() {\n        this.stopPropagation();\n        this.preventDefault();\n    }\n\n    /**\n     * Get the document position below the mouse cursor\n     * \n     * @return {Object} 'row' and 'column' of the document position\n     */\n    getDocumentPosition() {\n        if (this.$pos)\n            return this.$pos;\n        \n        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);\n        return this.$pos;\n    }\n\n    /**\n     * Get the relative position within the gutter.\n     * \n     * @return {Number} 'row' within the gutter. \n     */\n    getGutterRow() {\n        var documentRow = this.getDocumentPosition().row;\n        var screenRow = this.editor.session.documentToScreenRow(documentRow, 0);\n        var screenTopRow = this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row, 0);\n        return screenRow - screenTopRow;\n    }\n    \n    /**\n     * Check if the mouse cursor is inside of the text selection\n     * \n     * @return {Boolean} whether the mouse cursor is inside of the selection\n     */\n    inSelection() {\n        if (this.$inSelection !== null)\n            return this.$inSelection;\n            \n        var editor = this.editor;\n        \n\n        var selectionRange = editor.getSelectionRange();\n        if (selectionRange.isEmpty())\n            this.$inSelection = false;\n        else {\n            var pos = this.getDocumentPosition();\n            this.$inSelection = selectionRange.contains(pos.row, pos.column);\n        }\n\n        return this.$inSelection;\n    }\n    \n    /**\n     * Get the clicked mouse button\n     * \n     * @return {Number} 0 for left button, 1 for middle button, 2 for right button\n     */\n    getButton() {\n        return event.getButton(this.domEvent);\n    }\n    \n    /**\n     * @return {Boolean} whether the shift key was pressed when the event was emitted\n     */\n    getShiftKey() {\n        return this.domEvent.shiftKey;\n    }\n\n    getAccelKey() {\n        return useragent.isMac ? this.domEvent.metaKey : this.domEvent.ctrlKey;\n    }\n}\n\nexports.MouseEvent = MouseEvent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL21vdXNlX2V2ZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLFlBQVksbUJBQU8sQ0FBQyw4REFBYztBQUNsQyxnQkFBZ0IsbUJBQU8sQ0FBQyxzRUFBa0I7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQixtQkFBbUIsUUFBUTtBQUMzQixtQkFBbUIsUUFBUTtBQUMzQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW91c2UvbW91c2VfZXZlbnQuanM/ODVhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIGV2ZW50ID0gcmVxdWlyZShcIi4uL2xpYi9ldmVudFwiKTtcbnZhciB1c2VyYWdlbnQgPSByZXF1aXJlKFwiLi4vbGliL3VzZXJhZ2VudFwiKTtcblxuLypcbiAqIEN1c3RvbSBBY2UgbW91c2UgZXZlbnRcbiAqL1xuY2xhc3MgTW91c2VFdmVudCB7XG4gICAgY29uc3RydWN0b3IoZG9tRXZlbnQsIGVkaXRvcikge1xuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi90aGlzLnNwZWVkO1xuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi90aGlzLndoZWVsWDtcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovdGhpcy53aGVlbFk7XG4gICAgICAgIHRoaXMuZG9tRXZlbnQgPSBkb21FdmVudDtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG5cbiAgICAgICAgdGhpcy54ID0gdGhpcy5jbGllbnRYID0gZG9tRXZlbnQuY2xpZW50WDtcbiAgICAgICAgdGhpcy55ID0gdGhpcy5jbGllbnRZID0gZG9tRXZlbnQuY2xpZW50WTtcblxuICAgICAgICB0aGlzLiRwb3MgPSBudWxsO1xuICAgICAgICB0aGlzLiRpblNlbGVjdGlvbiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIHN0b3BQcm9wYWdhdGlvbigpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKHRoaXMuZG9tRXZlbnQpO1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCh0aGlzLmRvbUV2ZW50KTtcbiAgICAgICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZG9jdW1lbnQgcG9zaXRpb24gYmVsb3cgdGhlIG1vdXNlIGN1cnNvclxuICAgICAqIFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gJ3JvdycgYW5kICdjb2x1bW4nIG9mIHRoZSBkb2N1bWVudCBwb3NpdGlvblxuICAgICAqL1xuICAgIGdldERvY3VtZW50UG9zaXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLiRwb3MpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcG9zO1xuICAgICAgICBcbiAgICAgICAgdGhpcy4kcG9zID0gdGhpcy5lZGl0b3IucmVuZGVyZXIuc2NyZWVuVG9UZXh0Q29vcmRpbmF0ZXModGhpcy5jbGllbnRYLCB0aGlzLmNsaWVudFkpO1xuICAgICAgICByZXR1cm4gdGhpcy4kcG9zO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVsYXRpdmUgcG9zaXRpb24gd2l0aGluIHRoZSBndXR0ZXIuXG4gICAgICogXG4gICAgICogQHJldHVybiB7TnVtYmVyfSAncm93JyB3aXRoaW4gdGhlIGd1dHRlci4gXG4gICAgICovXG4gICAgZ2V0R3V0dGVyUm93KCkge1xuICAgICAgICB2YXIgZG9jdW1lbnRSb3cgPSB0aGlzLmdldERvY3VtZW50UG9zaXRpb24oKS5yb3c7XG4gICAgICAgIHZhciBzY3JlZW5Sb3cgPSB0aGlzLmVkaXRvci5zZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Sb3coZG9jdW1lbnRSb3csIDApO1xuICAgICAgICB2YXIgc2NyZWVuVG9wUm93ID0gdGhpcy5lZGl0b3Iuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUm93KHRoaXMuZWRpdG9yLnJlbmRlcmVyLiRndXR0ZXJMYXllci4kbGluZXMuZ2V0KDApLnJvdywgMCk7XG4gICAgICAgIHJldHVybiBzY3JlZW5Sb3cgLSBzY3JlZW5Ub3BSb3c7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHRoZSBtb3VzZSBjdXJzb3IgaXMgaW5zaWRlIG9mIHRoZSB0ZXh0IHNlbGVjdGlvblxuICAgICAqIFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHdoZXRoZXIgdGhlIG1vdXNlIGN1cnNvciBpcyBpbnNpZGUgb2YgdGhlIHNlbGVjdGlvblxuICAgICAqL1xuICAgIGluU2VsZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy4kaW5TZWxlY3Rpb24gIT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kaW5TZWxlY3Rpb247XG4gICAgICAgICAgICBcbiAgICAgICAgdmFyIGVkaXRvciA9IHRoaXMuZWRpdG9yO1xuICAgICAgICBcblxuICAgICAgICB2YXIgc2VsZWN0aW9uUmFuZ2UgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uUmFuZ2UoKTtcbiAgICAgICAgaWYgKHNlbGVjdGlvblJhbmdlLmlzRW1wdHkoKSlcbiAgICAgICAgICAgIHRoaXMuJGluU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuZ2V0RG9jdW1lbnRQb3NpdGlvbigpO1xuICAgICAgICAgICAgdGhpcy4kaW5TZWxlY3Rpb24gPSBzZWxlY3Rpb25SYW5nZS5jb250YWlucyhwb3Mucm93LCBwb3MuY29sdW1uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLiRpblNlbGVjdGlvbjtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjbGlja2VkIG1vdXNlIGJ1dHRvblxuICAgICAqIFxuICAgICAqIEByZXR1cm4ge051bWJlcn0gMCBmb3IgbGVmdCBidXR0b24sIDEgZm9yIG1pZGRsZSBidXR0b24sIDIgZm9yIHJpZ2h0IGJ1dHRvblxuICAgICAqL1xuICAgIGdldEJ1dHRvbigpIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50LmdldEJ1dHRvbih0aGlzLmRvbUV2ZW50KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gd2hldGhlciB0aGUgc2hpZnQga2V5IHdhcyBwcmVzc2VkIHdoZW4gdGhlIGV2ZW50IHdhcyBlbWl0dGVkXG4gICAgICovXG4gICAgZ2V0U2hpZnRLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvbUV2ZW50LnNoaWZ0S2V5O1xuICAgIH1cblxuICAgIGdldEFjY2VsS2V5KCkge1xuICAgICAgICByZXR1cm4gdXNlcmFnZW50LmlzTWFjID8gdGhpcy5kb21FdmVudC5tZXRhS2V5IDogdGhpcy5kb21FdmVudC5jdHJsS2V5O1xuICAgIH1cbn1cblxuZXhwb3J0cy5Nb3VzZUV2ZW50ID0gTW91c2VFdmVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mouse/mouse_event.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mouse/mouse_handler.js":
/*!**********************************************************!*\
  !*** ./node_modules/ace-code/src/mouse/mouse_handler.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"../editor\").Editor} Editor\n */\nvar event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar useragent = __webpack_require__(/*! ../lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\nvar DefaultHandlers = (__webpack_require__(/*! ./default_handlers */ \"./node_modules/ace-code/src/mouse/default_handlers.js\").DefaultHandlers);\nvar DefaultGutterHandler = (__webpack_require__(/*! ./default_gutter_handler */ \"./node_modules/ace-code/src/mouse/default_gutter_handler.js\").GutterHandler);\nvar MouseEvent = (__webpack_require__(/*! ./mouse_event */ \"./node_modules/ace-code/src/mouse/mouse_event.js\").MouseEvent);\nvar DragdropHandler = (__webpack_require__(/*! ./dragdrop_handler */ \"./node_modules/ace-code/src/mouse/dragdrop_handler.js\").DragdropHandler);\nvar addTouchListeners = (__webpack_require__(/*! ./touch_handler */ \"./node_modules/ace-code/src/mouse/touch_handler.js\").addTouchListeners);\nvar config = __webpack_require__(/*! ../config */ \"./node_modules/ace-code/src/config.js\");\n\nclass MouseHandler {\n    /**\n     * @param {Editor} editor\n     */\n    constructor(editor) {\n        /** @type {boolean} */this.$dragDelay;\n        /** @type {boolean} */this.$dragEnabled;\n        /** @type {boolean} */this.$mouseMoved;\n        /** @type {MouseEvent} */this.mouseEvent;\n        /** @type {number} */this.$focusTimeout;\n        var _self = this;\n        this.editor = editor;\n\n        new DefaultHandlers(this);\n        new DefaultGutterHandler(this);\n        new DragdropHandler(this);\n\n        var focusEditor = function(e) {\n            // because we have to call event.preventDefault() any window on ie and iframes\n            // on other browsers do not get focus, so we have to call window.focus() here\n            var windowBlurred = !document.hasFocus || !document.hasFocus()\n                || !editor.isFocused() && document.activeElement == (editor.textInput && editor.textInput.getElement());\n            if (windowBlurred)\n                window.focus();\n            editor.focus();\n            // Without this editor is blurred after double click\n            setTimeout(function () {\n                if (!editor.isFocused()) editor.focus();\n            });\n        };\n\n        var mouseTarget = editor.renderer.getMouseEventTarget();\n        event.addListener(mouseTarget, \"click\", this.onMouseEvent.bind(this, \"click\"), editor);\n        event.addListener(mouseTarget, \"mousemove\", this.onMouseMove.bind(this, \"mousemove\"), editor);\n        event.addMultiMouseDownListener([\n            mouseTarget,\n            editor.renderer.scrollBarV && editor.renderer.scrollBarV.inner,\n            editor.renderer.scrollBarH && editor.renderer.scrollBarH.inner,\n            editor.textInput && editor.textInput.getElement()\n        ].filter(Boolean), [400, 300, 250], this, \"onMouseEvent\", editor);\n        event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, \"mousewheel\"), editor);\n        addTouchListeners(editor.container, editor);\n\n        var gutterEl = editor.renderer.$gutter;\n        event.addListener(gutterEl, \"mousedown\", this.onMouseEvent.bind(this, \"guttermousedown\"), editor);\n        event.addListener(gutterEl, \"click\", this.onMouseEvent.bind(this, \"gutterclick\"), editor);\n        event.addListener(gutterEl, \"dblclick\", this.onMouseEvent.bind(this, \"gutterdblclick\"), editor);\n        event.addListener(gutterEl, \"mousemove\", this.onMouseEvent.bind(this, \"guttermousemove\"), editor);\n\n        event.addListener(mouseTarget, \"mousedown\", focusEditor, editor);\n        event.addListener(gutterEl, \"mousedown\", focusEditor, editor);\n        if (useragent.isIE && editor.renderer.scrollBarV) {\n            event.addListener(editor.renderer.scrollBarV.element, \"mousedown\", focusEditor, editor);\n            event.addListener(editor.renderer.scrollBarH.element, \"mousedown\", focusEditor, editor);\n        }\n\n        editor.on(\"mousemove\", function(e){\n            if (_self.state || _self.$dragDelay || !_self.$dragEnabled)\n                return;\n\n            var character = editor.renderer.screenToTextCoordinates(e.x, e.y);\n            var range = editor.session.selection.getRange();\n            var renderer = editor.renderer;\n\n            if (!range.isEmpty() && range.insideStart(character.row, character.column)) {\n                renderer.setCursorStyle(\"default\");\n            } else {\n                renderer.setCursorStyle(\"\");\n            }\n\n        }, //@ts-expect-error TODO: seems mistyping - should be boolean\n            editor);\n    }\n\n    onMouseEvent(name, e) {\n        if (!this.editor.session) return;\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    }\n\n    onMouseMove(name, e) {\n        // optimization, because mousemove doesn't have a default handler.\n        var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;\n        if (!listeners || !listeners.length)\n            return;\n\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    }\n\n    /**\n     * @param {any} name\n     * @param {{ wheelX: number; wheelY: number; }} e\n     */\n    onMouseWheel(name, e) {\n        var mouseEvent = new MouseEvent(e, this.editor);\n        //@ts-expect-error TODO: couldn't find this property init in the ace codebase\n        mouseEvent.speed = this.$scrollSpeed * 2;\n        mouseEvent.wheelX = e.wheelX;\n        mouseEvent.wheelY = e.wheelY;\n\n        this.editor._emit(name, mouseEvent);\n    }\n\n    setState(state) {\n        this.state = state;\n    }\n\n    captureMouse(ev, mouseMoveHandler) {\n        this.x = ev.x;\n        this.y = ev.y;\n\n        this.isMousePressed = true;\n\n        // do not move textarea during selection\n        var editor = this.editor;\n        var renderer = this.editor.renderer;\n        renderer.$isMousePressed = true;\n\n        var self = this;\n        var onMouseMove = function(e) {\n            if (!e) return;\n            // if editor is loaded inside iframe, and mouseup event is outside\n            // we won't recieve it, so we cancel on first mousemove without button\n            if (useragent.isWebKit && !e.which && self.releaseMouse)\n                return self.releaseMouse();\n\n            self.x = e.clientX;\n            self.y = e.clientY;\n            mouseMoveHandler && mouseMoveHandler(e);\n            self.mouseEvent = new MouseEvent(e, self.editor);\n            self.$mouseMoved = true;\n        };\n\n        var onCaptureEnd = function(e) {\n            editor.off(\"beforeEndOperation\", onOperationEnd);\n            clearInterval(timerId);\n            if (editor.session) onCaptureInterval();\n            self[self.state + \"End\"] && self[self.state + \"End\"](e);\n            self.state = \"\";\n            self.isMousePressed = renderer.$isMousePressed = false;\n            if (renderer.$keepTextAreaAtCursor)\n                renderer.$moveTextAreaToCursor();\n            self.$onCaptureMouseMove = self.releaseMouse = null;\n            e && self.onMouseEvent(\"mouseup\", e);\n            editor.endOperation();\n        };\n\n        var onCaptureInterval = function() {\n            self[self.state] && self[self.state]();\n            self.$mouseMoved = false;\n        };\n\n        if (useragent.isOldIE && ev.domEvent.type == \"dblclick\") {\n            return setTimeout(function() {onCaptureEnd(ev);});\n        }\n\n        var onOperationEnd = function(e) {\n            if (!self.releaseMouse) return;\n            // some touchpads fire mouseup event after a slight delay,\n            // which can cause problems if user presses a keyboard shortcut quickly\n            if (editor.curOp.command.name && editor.curOp.selectionChanged) {\n                self[self.state + \"End\"] && self[self.state + \"End\"]();\n                self.state = \"\";\n                self.releaseMouse();\n            }\n        };\n\n        editor.on(\"beforeEndOperation\", onOperationEnd);\n        editor.startOperation({command: {name: \"mouse\"}});\n\n        self.$onCaptureMouseMove = onMouseMove;\n        self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);\n        var timerId = setInterval(onCaptureInterval, 20);\n    }\n    cancelContextMenu() {\n        var stop = function(e) {\n            if (e && e.domEvent && e.domEvent.type != \"contextmenu\")\n                return;\n            this.editor.off(\"nativecontextmenu\", stop);\n            if (e && e.domEvent)\n                event.stopEvent(e.domEvent);\n        }.bind(this);\n        setTimeout(stop, 10);\n        this.editor.on(\"nativecontextmenu\", stop);\n    }\n    destroy() {\n        if (this.releaseMouse) this.releaseMouse();\n    }\n}\n\nMouseHandler.prototype.releaseMouse = null;\n\nconfig.defineOptions(MouseHandler.prototype, \"mouseHandler\", {\n    scrollSpeed: {initialValue: 2},\n    dragDelay: {initialValue: (useragent.isMac ? 150 : 0)},\n    dragEnabled: {initialValue: true},\n    focusTimeout: {initialValue: 0},\n    tooltipFollowsMouse: {initialValue: true}\n});\n\n\nexports.MouseHandler = MouseHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL21vdXNlX2hhbmRsZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0EsWUFBWSxtQkFBTyxDQUFDLDhEQUFjO0FBQ2xDLGdCQUFnQixtQkFBTyxDQUFDLHNFQUFrQjtBQUMxQyxzQkFBc0Isd0hBQTZDO0FBQ25FLDJCQUEyQixrSUFBaUQ7QUFDNUUsaUJBQWlCLHlHQUFtQztBQUNwRCxzQkFBc0Isd0hBQTZDO0FBQ25FLHdCQUF3QixvSEFBNEM7QUFDcEUsYUFBYSxtQkFBTyxDQUFDLHdEQUFXOztBQUVoQztBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QixtQkFBbUIsU0FBUztBQUM1QixtQkFBbUIsU0FBUztBQUM1QixtQkFBbUIsWUFBWTtBQUMvQixtQkFBbUIsUUFBUTtBQUMzQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUEsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGlCQUFpQixnQkFBZ0IsbUJBQW1CO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEMsa0JBQWtCO0FBQzVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLFVBQVUsZUFBZTs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEMsZ0JBQWdCLDBDQUEwQztBQUMxRCxrQkFBa0IsbUJBQW1CO0FBQ3JDLG1CQUFtQixnQkFBZ0I7QUFDbkMsMEJBQTBCO0FBQzFCLENBQUM7OztBQUdELG9CQUFvQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL21vdXNlX2hhbmRsZXIuanM/NTk4NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2VkaXRvclwiKS5FZGl0b3J9IEVkaXRvclxuICovXG52YXIgZXZlbnQgPSByZXF1aXJlKFwiLi4vbGliL2V2ZW50XCIpO1xudmFyIHVzZXJhZ2VudCA9IHJlcXVpcmUoXCIuLi9saWIvdXNlcmFnZW50XCIpO1xudmFyIERlZmF1bHRIYW5kbGVycyA9IHJlcXVpcmUoXCIuL2RlZmF1bHRfaGFuZGxlcnNcIikuRGVmYXVsdEhhbmRsZXJzO1xudmFyIERlZmF1bHRHdXR0ZXJIYW5kbGVyID0gcmVxdWlyZShcIi4vZGVmYXVsdF9ndXR0ZXJfaGFuZGxlclwiKS5HdXR0ZXJIYW5kbGVyO1xudmFyIE1vdXNlRXZlbnQgPSByZXF1aXJlKFwiLi9tb3VzZV9ldmVudFwiKS5Nb3VzZUV2ZW50O1xudmFyIERyYWdkcm9wSGFuZGxlciA9IHJlcXVpcmUoXCIuL2RyYWdkcm9wX2hhbmRsZXJcIikuRHJhZ2Ryb3BIYW5kbGVyO1xudmFyIGFkZFRvdWNoTGlzdGVuZXJzID0gcmVxdWlyZShcIi4vdG91Y2hfaGFuZGxlclwiKS5hZGRUb3VjaExpc3RlbmVycztcbnZhciBjb25maWcgPSByZXF1aXJlKFwiLi4vY29uZmlnXCIpO1xuXG5jbGFzcyBNb3VzZUhhbmRsZXIge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWRpdG9yfSBlZGl0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlZGl0b3IpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL3RoaXMuJGRyYWdEZWxheTtcbiAgICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL3RoaXMuJGRyYWdFbmFibGVkO1xuICAgICAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovdGhpcy4kbW91c2VNb3ZlZDtcbiAgICAgICAgLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqL3RoaXMubW91c2VFdmVudDtcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovdGhpcy4kZm9jdXNUaW1lb3V0O1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcblxuICAgICAgICBuZXcgRGVmYXVsdEhhbmRsZXJzKHRoaXMpO1xuICAgICAgICBuZXcgRGVmYXVsdEd1dHRlckhhbmRsZXIodGhpcyk7XG4gICAgICAgIG5ldyBEcmFnZHJvcEhhbmRsZXIodGhpcyk7XG5cbiAgICAgICAgdmFyIGZvY3VzRWRpdG9yID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgLy8gYmVjYXVzZSB3ZSBoYXZlIHRvIGNhbGwgZXZlbnQucHJldmVudERlZmF1bHQoKSBhbnkgd2luZG93IG9uIGllIGFuZCBpZnJhbWVzXG4gICAgICAgICAgICAvLyBvbiBvdGhlciBicm93c2VycyBkbyBub3QgZ2V0IGZvY3VzLCBzbyB3ZSBoYXZlIHRvIGNhbGwgd2luZG93LmZvY3VzKCkgaGVyZVxuICAgICAgICAgICAgdmFyIHdpbmRvd0JsdXJyZWQgPSAhZG9jdW1lbnQuaGFzRm9jdXMgfHwgIWRvY3VtZW50Lmhhc0ZvY3VzKClcbiAgICAgICAgICAgICAgICB8fCAhZWRpdG9yLmlzRm9jdXNlZCgpICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT0gKGVkaXRvci50ZXh0SW5wdXQgJiYgZWRpdG9yLnRleHRJbnB1dC5nZXRFbGVtZW50KCkpO1xuICAgICAgICAgICAgaWYgKHdpbmRvd0JsdXJyZWQpXG4gICAgICAgICAgICAgICAgd2luZG93LmZvY3VzKCk7XG4gICAgICAgICAgICBlZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgICAgIC8vIFdpdGhvdXQgdGhpcyBlZGl0b3IgaXMgYmx1cnJlZCBhZnRlciBkb3VibGUgY2xpY2tcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghZWRpdG9yLmlzRm9jdXNlZCgpKSBlZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBtb3VzZVRhcmdldCA9IGVkaXRvci5yZW5kZXJlci5nZXRNb3VzZUV2ZW50VGFyZ2V0KCk7XG4gICAgICAgIGV2ZW50LmFkZExpc3RlbmVyKG1vdXNlVGFyZ2V0LCBcImNsaWNrXCIsIHRoaXMub25Nb3VzZUV2ZW50LmJpbmQodGhpcywgXCJjbGlja1wiKSwgZWRpdG9yKTtcbiAgICAgICAgZXZlbnQuYWRkTGlzdGVuZXIobW91c2VUYXJnZXQsIFwibW91c2Vtb3ZlXCIsIHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzLCBcIm1vdXNlbW92ZVwiKSwgZWRpdG9yKTtcbiAgICAgICAgZXZlbnQuYWRkTXVsdGlNb3VzZURvd25MaXN0ZW5lcihbXG4gICAgICAgICAgICBtb3VzZVRhcmdldCxcbiAgICAgICAgICAgIGVkaXRvci5yZW5kZXJlci5zY3JvbGxCYXJWICYmIGVkaXRvci5yZW5kZXJlci5zY3JvbGxCYXJWLmlubmVyLFxuICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLnNjcm9sbEJhckggJiYgZWRpdG9yLnJlbmRlcmVyLnNjcm9sbEJhckguaW5uZXIsXG4gICAgICAgICAgICBlZGl0b3IudGV4dElucHV0ICYmIGVkaXRvci50ZXh0SW5wdXQuZ2V0RWxlbWVudCgpXG4gICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pLCBbNDAwLCAzMDAsIDI1MF0sIHRoaXMsIFwib25Nb3VzZUV2ZW50XCIsIGVkaXRvcik7XG4gICAgICAgIGV2ZW50LmFkZE1vdXNlV2hlZWxMaXN0ZW5lcihlZGl0b3IuY29udGFpbmVyLCB0aGlzLm9uTW91c2VXaGVlbC5iaW5kKHRoaXMsIFwibW91c2V3aGVlbFwiKSwgZWRpdG9yKTtcbiAgICAgICAgYWRkVG91Y2hMaXN0ZW5lcnMoZWRpdG9yLmNvbnRhaW5lciwgZWRpdG9yKTtcblxuICAgICAgICB2YXIgZ3V0dGVyRWwgPSBlZGl0b3IucmVuZGVyZXIuJGd1dHRlcjtcbiAgICAgICAgZXZlbnQuYWRkTGlzdGVuZXIoZ3V0dGVyRWwsIFwibW91c2Vkb3duXCIsIHRoaXMub25Nb3VzZUV2ZW50LmJpbmQodGhpcywgXCJndXR0ZXJtb3VzZWRvd25cIiksIGVkaXRvcik7XG4gICAgICAgIGV2ZW50LmFkZExpc3RlbmVyKGd1dHRlckVsLCBcImNsaWNrXCIsIHRoaXMub25Nb3VzZUV2ZW50LmJpbmQodGhpcywgXCJndXR0ZXJjbGlja1wiKSwgZWRpdG9yKTtcbiAgICAgICAgZXZlbnQuYWRkTGlzdGVuZXIoZ3V0dGVyRWwsIFwiZGJsY2xpY2tcIiwgdGhpcy5vbk1vdXNlRXZlbnQuYmluZCh0aGlzLCBcImd1dHRlcmRibGNsaWNrXCIpLCBlZGl0b3IpO1xuICAgICAgICBldmVudC5hZGRMaXN0ZW5lcihndXR0ZXJFbCwgXCJtb3VzZW1vdmVcIiwgdGhpcy5vbk1vdXNlRXZlbnQuYmluZCh0aGlzLCBcImd1dHRlcm1vdXNlbW92ZVwiKSwgZWRpdG9yKTtcblxuICAgICAgICBldmVudC5hZGRMaXN0ZW5lcihtb3VzZVRhcmdldCwgXCJtb3VzZWRvd25cIiwgZm9jdXNFZGl0b3IsIGVkaXRvcik7XG4gICAgICAgIGV2ZW50LmFkZExpc3RlbmVyKGd1dHRlckVsLCBcIm1vdXNlZG93blwiLCBmb2N1c0VkaXRvciwgZWRpdG9yKTtcbiAgICAgICAgaWYgKHVzZXJhZ2VudC5pc0lFICYmIGVkaXRvci5yZW5kZXJlci5zY3JvbGxCYXJWKSB7XG4gICAgICAgICAgICBldmVudC5hZGRMaXN0ZW5lcihlZGl0b3IucmVuZGVyZXIuc2Nyb2xsQmFyVi5lbGVtZW50LCBcIm1vdXNlZG93blwiLCBmb2N1c0VkaXRvciwgZWRpdG9yKTtcbiAgICAgICAgICAgIGV2ZW50LmFkZExpc3RlbmVyKGVkaXRvci5yZW5kZXJlci5zY3JvbGxCYXJILmVsZW1lbnQsIFwibW91c2Vkb3duXCIsIGZvY3VzRWRpdG9yLCBlZGl0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWRpdG9yLm9uKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgaWYgKF9zZWxmLnN0YXRlIHx8IF9zZWxmLiRkcmFnRGVsYXkgfHwgIV9zZWxmLiRkcmFnRW5hYmxlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBjaGFyYWN0ZXIgPSBlZGl0b3IucmVuZGVyZXIuc2NyZWVuVG9UZXh0Q29vcmRpbmF0ZXMoZS54LCBlLnkpO1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gZWRpdG9yLnNlc3Npb24uc2VsZWN0aW9uLmdldFJhbmdlKCk7XG4gICAgICAgICAgICB2YXIgcmVuZGVyZXIgPSBlZGl0b3IucmVuZGVyZXI7XG5cbiAgICAgICAgICAgIGlmICghcmFuZ2UuaXNFbXB0eSgpICYmIHJhbmdlLmluc2lkZVN0YXJ0KGNoYXJhY3Rlci5yb3csIGNoYXJhY3Rlci5jb2x1bW4pKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2V0Q3Vyc29yU3R5bGUoXCJkZWZhdWx0XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRDdXJzb3JTdHlsZShcIlwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LCAvL0B0cy1leHBlY3QtZXJyb3IgVE9ETzogc2VlbXMgbWlzdHlwaW5nIC0gc2hvdWxkIGJlIGJvb2xlYW5cbiAgICAgICAgICAgIGVkaXRvcik7XG4gICAgfVxuXG4gICAgb25Nb3VzZUV2ZW50KG5hbWUsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVkaXRvci5zZXNzaW9uKSByZXR1cm47XG4gICAgICAgIHRoaXMuZWRpdG9yLl9lbWl0KG5hbWUsIG5ldyBNb3VzZUV2ZW50KGUsIHRoaXMuZWRpdG9yKSk7XG4gICAgfVxuXG4gICAgb25Nb3VzZU1vdmUobmFtZSwgZSkge1xuICAgICAgICAvLyBvcHRpbWl6YXRpb24sIGJlY2F1c2UgbW91c2Vtb3ZlIGRvZXNuJ3QgaGF2ZSBhIGRlZmF1bHQgaGFuZGxlci5cbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuZWRpdG9yLl9ldmVudFJlZ2lzdHJ5ICYmIHRoaXMuZWRpdG9yLl9ldmVudFJlZ2lzdHJ5Lm1vdXNlbW92ZTtcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy5lZGl0b3IuX2VtaXQobmFtZSwgbmV3IE1vdXNlRXZlbnQoZSwgdGhpcy5lZGl0b3IpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2FueX0gbmFtZVxuICAgICAqIEBwYXJhbSB7eyB3aGVlbFg6IG51bWJlcjsgd2hlZWxZOiBudW1iZXI7IH19IGVcbiAgICAgKi9cbiAgICBvbk1vdXNlV2hlZWwobmFtZSwgZSkge1xuICAgICAgICB2YXIgbW91c2VFdmVudCA9IG5ldyBNb3VzZUV2ZW50KGUsIHRoaXMuZWRpdG9yKTtcbiAgICAgICAgLy9AdHMtZXhwZWN0LWVycm9yIFRPRE86IGNvdWxkbid0IGZpbmQgdGhpcyBwcm9wZXJ0eSBpbml0IGluIHRoZSBhY2UgY29kZWJhc2VcbiAgICAgICAgbW91c2VFdmVudC5zcGVlZCA9IHRoaXMuJHNjcm9sbFNwZWVkICogMjtcbiAgICAgICAgbW91c2VFdmVudC53aGVlbFggPSBlLndoZWVsWDtcbiAgICAgICAgbW91c2VFdmVudC53aGVlbFkgPSBlLndoZWVsWTtcblxuICAgICAgICB0aGlzLmVkaXRvci5fZW1pdChuYW1lLCBtb3VzZUV2ZW50KTtcbiAgICB9XG5cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxuXG4gICAgY2FwdHVyZU1vdXNlKGV2LCBtb3VzZU1vdmVIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMueCA9IGV2Lng7XG4gICAgICAgIHRoaXMueSA9IGV2Lnk7XG5cbiAgICAgICAgdGhpcy5pc01vdXNlUHJlc3NlZCA9IHRydWU7XG5cbiAgICAgICAgLy8gZG8gbm90IG1vdmUgdGV4dGFyZWEgZHVyaW5nIHNlbGVjdGlvblxuICAgICAgICB2YXIgZWRpdG9yID0gdGhpcy5lZGl0b3I7XG4gICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMuZWRpdG9yLnJlbmRlcmVyO1xuICAgICAgICByZW5kZXJlci4kaXNNb3VzZVByZXNzZWQgPSB0cnVlO1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIG9uTW91c2VNb3ZlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm47XG4gICAgICAgICAgICAvLyBpZiBlZGl0b3IgaXMgbG9hZGVkIGluc2lkZSBpZnJhbWUsIGFuZCBtb3VzZXVwIGV2ZW50IGlzIG91dHNpZGVcbiAgICAgICAgICAgIC8vIHdlIHdvbid0IHJlY2lldmUgaXQsIHNvIHdlIGNhbmNlbCBvbiBmaXJzdCBtb3VzZW1vdmUgd2l0aG91dCBidXR0b25cbiAgICAgICAgICAgIGlmICh1c2VyYWdlbnQuaXNXZWJLaXQgJiYgIWUud2hpY2ggJiYgc2VsZi5yZWxlYXNlTW91c2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucmVsZWFzZU1vdXNlKCk7XG5cbiAgICAgICAgICAgIHNlbGYueCA9IGUuY2xpZW50WDtcbiAgICAgICAgICAgIHNlbGYueSA9IGUuY2xpZW50WTtcbiAgICAgICAgICAgIG1vdXNlTW92ZUhhbmRsZXIgJiYgbW91c2VNb3ZlSGFuZGxlcihlKTtcbiAgICAgICAgICAgIHNlbGYubW91c2VFdmVudCA9IG5ldyBNb3VzZUV2ZW50KGUsIHNlbGYuZWRpdG9yKTtcbiAgICAgICAgICAgIHNlbGYuJG1vdXNlTW92ZWQgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBvbkNhcHR1cmVFbmQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlZGl0b3Iub2ZmKFwiYmVmb3JlRW5kT3BlcmF0aW9uXCIsIG9uT3BlcmF0aW9uRW5kKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgICAgICAgICBpZiAoZWRpdG9yLnNlc3Npb24pIG9uQ2FwdHVyZUludGVydmFsKCk7XG4gICAgICAgICAgICBzZWxmW3NlbGYuc3RhdGUgKyBcIkVuZFwiXSAmJiBzZWxmW3NlbGYuc3RhdGUgKyBcIkVuZFwiXShlKTtcbiAgICAgICAgICAgIHNlbGYuc3RhdGUgPSBcIlwiO1xuICAgICAgICAgICAgc2VsZi5pc01vdXNlUHJlc3NlZCA9IHJlbmRlcmVyLiRpc01vdXNlUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHJlbmRlcmVyLiRrZWVwVGV4dEFyZWFBdEN1cnNvcilcbiAgICAgICAgICAgICAgICByZW5kZXJlci4kbW92ZVRleHRBcmVhVG9DdXJzb3IoKTtcbiAgICAgICAgICAgIHNlbGYuJG9uQ2FwdHVyZU1vdXNlTW92ZSA9IHNlbGYucmVsZWFzZU1vdXNlID0gbnVsbDtcbiAgICAgICAgICAgIGUgJiYgc2VsZi5vbk1vdXNlRXZlbnQoXCJtb3VzZXVwXCIsIGUpO1xuICAgICAgICAgICAgZWRpdG9yLmVuZE9wZXJhdGlvbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBvbkNhcHR1cmVJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZltzZWxmLnN0YXRlXSAmJiBzZWxmW3NlbGYuc3RhdGVdKCk7XG4gICAgICAgICAgICBzZWxmLiRtb3VzZU1vdmVkID0gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHVzZXJhZ2VudC5pc09sZElFICYmIGV2LmRvbUV2ZW50LnR5cGUgPT0gXCJkYmxjbGlja1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtvbkNhcHR1cmVFbmQoZXYpO30pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9uT3BlcmF0aW9uRW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKCFzZWxmLnJlbGVhc2VNb3VzZSkgcmV0dXJuO1xuICAgICAgICAgICAgLy8gc29tZSB0b3VjaHBhZHMgZmlyZSBtb3VzZXVwIGV2ZW50IGFmdGVyIGEgc2xpZ2h0IGRlbGF5LFxuICAgICAgICAgICAgLy8gd2hpY2ggY2FuIGNhdXNlIHByb2JsZW1zIGlmIHVzZXIgcHJlc3NlcyBhIGtleWJvYXJkIHNob3J0Y3V0IHF1aWNrbHlcbiAgICAgICAgICAgIGlmIChlZGl0b3IuY3VyT3AuY29tbWFuZC5uYW1lICYmIGVkaXRvci5jdXJPcC5zZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgc2VsZltzZWxmLnN0YXRlICsgXCJFbmRcIl0gJiYgc2VsZltzZWxmLnN0YXRlICsgXCJFbmRcIl0oKTtcbiAgICAgICAgICAgICAgICBzZWxmLnN0YXRlID0gXCJcIjtcbiAgICAgICAgICAgICAgICBzZWxmLnJlbGVhc2VNb3VzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGVkaXRvci5vbihcImJlZm9yZUVuZE9wZXJhdGlvblwiLCBvbk9wZXJhdGlvbkVuZCk7XG4gICAgICAgIGVkaXRvci5zdGFydE9wZXJhdGlvbih7Y29tbWFuZDoge25hbWU6IFwibW91c2VcIn19KTtcblxuICAgICAgICBzZWxmLiRvbkNhcHR1cmVNb3VzZU1vdmUgPSBvbk1vdXNlTW92ZTtcbiAgICAgICAgc2VsZi5yZWxlYXNlTW91c2UgPSBldmVudC5jYXB0dXJlKHRoaXMuZWRpdG9yLmNvbnRhaW5lciwgb25Nb3VzZU1vdmUsIG9uQ2FwdHVyZUVuZCk7XG4gICAgICAgIHZhciB0aW1lcklkID0gc2V0SW50ZXJ2YWwob25DYXB0dXJlSW50ZXJ2YWwsIDIwKTtcbiAgICB9XG4gICAgY2FuY2VsQ29udGV4dE1lbnUoKSB7XG4gICAgICAgIHZhciBzdG9wID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUgJiYgZS5kb21FdmVudCAmJiBlLmRvbUV2ZW50LnR5cGUgIT0gXCJjb250ZXh0bWVudVwiKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLm9mZihcIm5hdGl2ZWNvbnRleHRtZW51XCIsIHN0b3ApO1xuICAgICAgICAgICAgaWYgKGUgJiYgZS5kb21FdmVudClcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wRXZlbnQoZS5kb21FdmVudCk7XG4gICAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgICAgc2V0VGltZW91dChzdG9wLCAxMCk7XG4gICAgICAgIHRoaXMuZWRpdG9yLm9uKFwibmF0aXZlY29udGV4dG1lbnVcIiwgc3RvcCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbGVhc2VNb3VzZSkgdGhpcy5yZWxlYXNlTW91c2UoKTtcbiAgICB9XG59XG5cbk1vdXNlSGFuZGxlci5wcm90b3R5cGUucmVsZWFzZU1vdXNlID0gbnVsbDtcblxuY29uZmlnLmRlZmluZU9wdGlvbnMoTW91c2VIYW5kbGVyLnByb3RvdHlwZSwgXCJtb3VzZUhhbmRsZXJcIiwge1xuICAgIHNjcm9sbFNwZWVkOiB7aW5pdGlhbFZhbHVlOiAyfSxcbiAgICBkcmFnRGVsYXk6IHtpbml0aWFsVmFsdWU6ICh1c2VyYWdlbnQuaXNNYWMgPyAxNTAgOiAwKX0sXG4gICAgZHJhZ0VuYWJsZWQ6IHtpbml0aWFsVmFsdWU6IHRydWV9LFxuICAgIGZvY3VzVGltZW91dDoge2luaXRpYWxWYWx1ZTogMH0sXG4gICAgdG9vbHRpcEZvbGxvd3NNb3VzZToge2luaXRpYWxWYWx1ZTogdHJ1ZX1cbn0pO1xuXG5cbmV4cG9ydHMuTW91c2VIYW5kbGVyID0gTW91c2VIYW5kbGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mouse/mouse_handler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mouse/multi_select_handler.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ace-code/src/mouse/multi_select_handler.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("var event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar useragent = __webpack_require__(/*! ../lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\n\n// mouse\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\n\nfunction onMouseDown(e) {\n    var ev = e.domEvent;\n    var alt = ev.altKey;\n    var shift = ev.shiftKey;\n    var ctrl = ev.ctrlKey;\n    var accel = e.getAccelKey();\n    var button = e.getButton();\n    \n    if (ctrl && useragent.isMac)\n        button = ev.button;\n\n    if (e.editor.inMultiSelectMode && button == 2) {\n        e.editor.textInput.onContextMenu(e.domEvent);\n        return;\n    }\n    \n    if (!ctrl && !alt && !accel) {\n        if (button === 0 && e.editor.inMultiSelectMode)\n            e.editor.exitMultiSelectMode();\n        return;\n    }\n    \n    if (button !== 0)\n        return;\n\n    var editor = e.editor;\n    var selection = editor.selection;\n    var isMultiSelect = editor.inMultiSelectMode;\n    var pos = e.getDocumentPosition();\n    var cursor = selection.getCursor();\n    var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));\n\n    var mouseX = e.x, mouseY = e.y;\n    var onMouseSelection = function(e) {\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n    };\n    \n    var session = editor.session;\n    var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n    var screenCursor = screenAnchor;\n    \n    var selectionMode;\n    if (editor.$mouseHandler.$enableJumpToDef) {\n        if (ctrl && alt || accel && alt)\n            selectionMode = shift ? \"block\" : \"add\";\n        else if (alt && editor.$blockSelectEnabled)\n            selectionMode = \"block\";\n    } else {\n        if (accel && !alt) {\n            selectionMode = \"add\";\n            if (!isMultiSelect && shift)\n                return;\n        } else if (alt && editor.$blockSelectEnabled) {\n            selectionMode = \"block\";\n        }\n    }\n    \n    if (selectionMode && useragent.isMac && ev.ctrlKey) {\n        editor.$mouseHandler.cancelContextMenu();\n    }\n\n    if (selectionMode == \"add\") {\n        if (!isMultiSelect && inSelection)\n            return; // dragging\n\n        if (!isMultiSelect) {\n            var range = selection.toOrientedRange();\n            editor.addSelectionMarker(range);\n        }\n\n        var oldRange = selection.rangeList.rangeAtPoint(pos);\n        \n        editor.inVirtualSelectionMode = true;\n        \n        if (shift) {\n            oldRange = null;\n            range = selection.ranges[0] || range;\n            editor.removeSelectionMarker(range);\n        }\n        editor.once(\"mouseup\", function() {\n            var tmpSel = selection.toOrientedRange();\n\n            if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))\n                selection.substractPoint(tmpSel.cursor);\n            else {\n                if (shift) {\n                    selection.substractPoint(range.cursor);\n                } else if (range) {\n                    editor.removeSelectionMarker(range);\n                    selection.addRange(range);\n                }\n                selection.addRange(tmpSel);\n            }\n            editor.inVirtualSelectionMode = false;\n        });\n\n    } else if (selectionMode == \"block\") {\n        e.stop();\n        editor.inVirtualSelectionMode = true;        \n        var initialRange;\n        var rectSel = [];\n        var blockSelect = function() {\n            var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n            var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column, newCursor.offsetX);\n\n            if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))\n                return;\n            screenCursor = newCursor;\n            \n            editor.selection.moveToPosition(cursor);\n            editor.renderer.scrollCursorIntoView();\n\n            editor.removeSelectionMarkers(rectSel);\n            rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);\n            if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())\n                rectSel[0] = editor.$mouseHandler.$clickSelection.clone();\n            rectSel.forEach(editor.addSelectionMarker, editor);\n            editor.updateSelectionMarkers();\n        };\n        if (isMultiSelect && !accel) {\n            selection.toSingleRange();\n        } else if (!isMultiSelect && accel) {\n            initialRange = selection.toOrientedRange();\n            editor.addSelectionMarker(initialRange);\n        }\n        \n        if (shift)\n            screenAnchor = session.documentToScreenPosition(selection.lead);            \n        else\n            selection.moveToPosition(pos);\n        \n        screenCursor = {row: -1, column: -1};\n\n        var onMouseSelectionEnd = function(e) {\n            blockSelect();\n            clearInterval(timerId);\n            editor.removeSelectionMarkers(rectSel);\n            if (!rectSel.length)\n                rectSel = [selection.toOrientedRange()];\n            if (initialRange) {\n                editor.removeSelectionMarker(initialRange);\n                selection.toSingleRange(initialRange);\n            }\n            for (var i = 0; i < rectSel.length; i++)\n                selection.addRange(rectSel[i]);\n            editor.inVirtualSelectionMode = false;\n            editor.$mouseHandler.$clickSelection = null;\n        };\n\n        var onSelectionInterval = blockSelect;\n\n        event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);\n        var timerId = setInterval(function() {onSelectionInterval();}, 20);\n\n        return e.preventDefault();\n    }\n}\n\n\nexports.onMouseDown = onMouseDown;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL211bHRpX3NlbGVjdF9oYW5kbGVyLmpzIiwibWFwcGluZ3MiOiJBQUFBLFlBQVksbUJBQU8sQ0FBQyw4REFBYztBQUNsQyxnQkFBZ0IsbUJBQU8sQ0FBQyxzRUFBa0I7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9COztBQUVwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9CQUFvQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDhDQUE4Qyx1QkFBdUI7O0FBRXJFO0FBQ0E7QUFDQTs7O0FBR0EsbUJBQW1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvbW91c2UvbXVsdGlfc2VsZWN0X2hhbmRsZXIuanM/OWJhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXZlbnQgPSByZXF1aXJlKFwiLi4vbGliL2V2ZW50XCIpO1xudmFyIHVzZXJhZ2VudCA9IHJlcXVpcmUoXCIuLi9saWIvdXNlcmFnZW50XCIpO1xuXG4vLyBtb3VzZVxuZnVuY3Rpb24gaXNTYW1lUG9pbnQocDEsIHAyKSB7XG4gICAgcmV0dXJuIHAxLnJvdyA9PSBwMi5yb3cgJiYgcDEuY29sdW1uID09IHAyLmNvbHVtbjtcbn1cblxuZnVuY3Rpb24gb25Nb3VzZURvd24oZSkge1xuICAgIHZhciBldiA9IGUuZG9tRXZlbnQ7XG4gICAgdmFyIGFsdCA9IGV2LmFsdEtleTtcbiAgICB2YXIgc2hpZnQgPSBldi5zaGlmdEtleTtcbiAgICB2YXIgY3RybCA9IGV2LmN0cmxLZXk7XG4gICAgdmFyIGFjY2VsID0gZS5nZXRBY2NlbEtleSgpO1xuICAgIHZhciBidXR0b24gPSBlLmdldEJ1dHRvbigpO1xuICAgIFxuICAgIGlmIChjdHJsICYmIHVzZXJhZ2VudC5pc01hYylcbiAgICAgICAgYnV0dG9uID0gZXYuYnV0dG9uO1xuXG4gICAgaWYgKGUuZWRpdG9yLmluTXVsdGlTZWxlY3RNb2RlICYmIGJ1dHRvbiA9PSAyKSB7XG4gICAgICAgIGUuZWRpdG9yLnRleHRJbnB1dC5vbkNvbnRleHRNZW51KGUuZG9tRXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmICghY3RybCAmJiAhYWx0ICYmICFhY2NlbCkge1xuICAgICAgICBpZiAoYnV0dG9uID09PSAwICYmIGUuZWRpdG9yLmluTXVsdGlTZWxlY3RNb2RlKVxuICAgICAgICAgICAgZS5lZGl0b3IuZXhpdE11bHRpU2VsZWN0TW9kZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmIChidXR0b24gIT09IDApXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciBlZGl0b3IgPSBlLmVkaXRvcjtcbiAgICB2YXIgc2VsZWN0aW9uID0gZWRpdG9yLnNlbGVjdGlvbjtcbiAgICB2YXIgaXNNdWx0aVNlbGVjdCA9IGVkaXRvci5pbk11bHRpU2VsZWN0TW9kZTtcbiAgICB2YXIgcG9zID0gZS5nZXREb2N1bWVudFBvc2l0aW9uKCk7XG4gICAgdmFyIGN1cnNvciA9IHNlbGVjdGlvbi5nZXRDdXJzb3IoKTtcbiAgICB2YXIgaW5TZWxlY3Rpb24gPSBlLmluU2VsZWN0aW9uKCkgfHwgKHNlbGVjdGlvbi5pc0VtcHR5KCkgJiYgaXNTYW1lUG9pbnQocG9zLCBjdXJzb3IpKTtcblxuICAgIHZhciBtb3VzZVggPSBlLngsIG1vdXNlWSA9IGUueTtcbiAgICB2YXIgb25Nb3VzZVNlbGVjdGlvbiA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbW91c2VYID0gZS5jbGllbnRYO1xuICAgICAgICBtb3VzZVkgPSBlLmNsaWVudFk7XG4gICAgfTtcbiAgICBcbiAgICB2YXIgc2Vzc2lvbiA9IGVkaXRvci5zZXNzaW9uO1xuICAgIHZhciBzY3JlZW5BbmNob3IgPSBlZGl0b3IucmVuZGVyZXIucGl4ZWxUb1NjcmVlbkNvb3JkaW5hdGVzKG1vdXNlWCwgbW91c2VZKTtcbiAgICB2YXIgc2NyZWVuQ3Vyc29yID0gc2NyZWVuQW5jaG9yO1xuICAgIFxuICAgIHZhciBzZWxlY3Rpb25Nb2RlO1xuICAgIGlmIChlZGl0b3IuJG1vdXNlSGFuZGxlci4kZW5hYmxlSnVtcFRvRGVmKSB7XG4gICAgICAgIGlmIChjdHJsICYmIGFsdCB8fCBhY2NlbCAmJiBhbHQpXG4gICAgICAgICAgICBzZWxlY3Rpb25Nb2RlID0gc2hpZnQgPyBcImJsb2NrXCIgOiBcImFkZFwiO1xuICAgICAgICBlbHNlIGlmIChhbHQgJiYgZWRpdG9yLiRibG9ja1NlbGVjdEVuYWJsZWQpXG4gICAgICAgICAgICBzZWxlY3Rpb25Nb2RlID0gXCJibG9ja1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhY2NlbCAmJiAhYWx0KSB7XG4gICAgICAgICAgICBzZWxlY3Rpb25Nb2RlID0gXCJhZGRcIjtcbiAgICAgICAgICAgIGlmICghaXNNdWx0aVNlbGVjdCAmJiBzaGlmdClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAoYWx0ICYmIGVkaXRvci4kYmxvY2tTZWxlY3RFbmFibGVkKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb25Nb2RlID0gXCJibG9ja1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChzZWxlY3Rpb25Nb2RlICYmIHVzZXJhZ2VudC5pc01hYyAmJiBldi5jdHJsS2V5KSB7XG4gICAgICAgIGVkaXRvci4kbW91c2VIYW5kbGVyLmNhbmNlbENvbnRleHRNZW51KCk7XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGlvbk1vZGUgPT0gXCJhZGRcIikge1xuICAgICAgICBpZiAoIWlzTXVsdGlTZWxlY3QgJiYgaW5TZWxlY3Rpb24pXG4gICAgICAgICAgICByZXR1cm47IC8vIGRyYWdnaW5nXG5cbiAgICAgICAgaWYgKCFpc011bHRpU2VsZWN0KSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxlY3Rpb24udG9PcmllbnRlZFJhbmdlKCk7XG4gICAgICAgICAgICBlZGl0b3IuYWRkU2VsZWN0aW9uTWFya2VyKHJhbmdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvbGRSYW5nZSA9IHNlbGVjdGlvbi5yYW5nZUxpc3QucmFuZ2VBdFBvaW50KHBvcyk7XG4gICAgICAgIFxuICAgICAgICBlZGl0b3IuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZSA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2hpZnQpIHtcbiAgICAgICAgICAgIG9sZFJhbmdlID0gbnVsbDtcbiAgICAgICAgICAgIHJhbmdlID0gc2VsZWN0aW9uLnJhbmdlc1swXSB8fCByYW5nZTtcbiAgICAgICAgICAgIGVkaXRvci5yZW1vdmVTZWxlY3Rpb25NYXJrZXIocmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVkaXRvci5vbmNlKFwibW91c2V1cFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0bXBTZWwgPSBzZWxlY3Rpb24udG9PcmllbnRlZFJhbmdlKCk7XG5cbiAgICAgICAgICAgIGlmIChvbGRSYW5nZSAmJiB0bXBTZWwuaXNFbXB0eSgpICYmIGlzU2FtZVBvaW50KG9sZFJhbmdlLmN1cnNvciwgdG1wU2VsLmN1cnNvcikpXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uLnN1YnN0cmFjdFBvaW50KHRtcFNlbC5jdXJzb3IpO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHNoaWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5zdWJzdHJhY3RQb2ludChyYW5nZS5jdXJzb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlbW92ZVNlbGVjdGlvbk1hcmtlcihyYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZSh0bXBTZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWRpdG9yLmluVmlydHVhbFNlbGVjdGlvbk1vZGUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbk1vZGUgPT0gXCJibG9ja1wiKSB7XG4gICAgICAgIGUuc3RvcCgpO1xuICAgICAgICBlZGl0b3IuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZSA9IHRydWU7ICAgICAgICBcbiAgICAgICAgdmFyIGluaXRpYWxSYW5nZTtcbiAgICAgICAgdmFyIHJlY3RTZWwgPSBbXTtcbiAgICAgICAgdmFyIGJsb2NrU2VsZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmV3Q3Vyc29yID0gZWRpdG9yLnJlbmRlcmVyLnBpeGVsVG9TY3JlZW5Db29yZGluYXRlcyhtb3VzZVgsIG1vdXNlWSk7XG4gICAgICAgICAgICB2YXIgY3Vyc29yID0gc2Vzc2lvbi5zY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24obmV3Q3Vyc29yLnJvdywgbmV3Q3Vyc29yLmNvbHVtbiwgbmV3Q3Vyc29yLm9mZnNldFgpO1xuXG4gICAgICAgICAgICBpZiAoaXNTYW1lUG9pbnQoc2NyZWVuQ3Vyc29yLCBuZXdDdXJzb3IpICYmIGlzU2FtZVBvaW50KGN1cnNvciwgc2VsZWN0aW9uLmxlYWQpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHNjcmVlbkN1cnNvciA9IG5ld0N1cnNvcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5tb3ZlVG9Qb3NpdGlvbihjdXJzb3IpO1xuICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KCk7XG5cbiAgICAgICAgICAgIGVkaXRvci5yZW1vdmVTZWxlY3Rpb25NYXJrZXJzKHJlY3RTZWwpO1xuICAgICAgICAgICAgcmVjdFNlbCA9IHNlbGVjdGlvbi5yZWN0YW5ndWxhclJhbmdlQmxvY2soc2NyZWVuQ3Vyc29yLCBzY3JlZW5BbmNob3IpO1xuICAgICAgICAgICAgaWYgKGVkaXRvci4kbW91c2VIYW5kbGVyLiRjbGlja1NlbGVjdGlvbiAmJiByZWN0U2VsLmxlbmd0aCA9PSAxICYmIHJlY3RTZWxbMF0uaXNFbXB0eSgpKVxuICAgICAgICAgICAgICAgIHJlY3RTZWxbMF0gPSBlZGl0b3IuJG1vdXNlSGFuZGxlci4kY2xpY2tTZWxlY3Rpb24uY2xvbmUoKTtcbiAgICAgICAgICAgIHJlY3RTZWwuZm9yRWFjaChlZGl0b3IuYWRkU2VsZWN0aW9uTWFya2VyLCBlZGl0b3IpO1xuICAgICAgICAgICAgZWRpdG9yLnVwZGF0ZVNlbGVjdGlvbk1hcmtlcnMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGlzTXVsdGlTZWxlY3QgJiYgIWFjY2VsKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24udG9TaW5nbGVSYW5nZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc011bHRpU2VsZWN0ICYmIGFjY2VsKSB7XG4gICAgICAgICAgICBpbml0aWFsUmFuZ2UgPSBzZWxlY3Rpb24udG9PcmllbnRlZFJhbmdlKCk7XG4gICAgICAgICAgICBlZGl0b3IuYWRkU2VsZWN0aW9uTWFya2VyKGluaXRpYWxSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChzaGlmdClcbiAgICAgICAgICAgIHNjcmVlbkFuY2hvciA9IHNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uKHNlbGVjdGlvbi5sZWFkKTsgICAgICAgICAgICBcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgc2VsZWN0aW9uLm1vdmVUb1Bvc2l0aW9uKHBvcyk7XG4gICAgICAgIFxuICAgICAgICBzY3JlZW5DdXJzb3IgPSB7cm93OiAtMSwgY29sdW1uOiAtMX07XG5cbiAgICAgICAgdmFyIG9uTW91c2VTZWxlY3Rpb25FbmQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBibG9ja1NlbGVjdCgpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcbiAgICAgICAgICAgIGVkaXRvci5yZW1vdmVTZWxlY3Rpb25NYXJrZXJzKHJlY3RTZWwpO1xuICAgICAgICAgICAgaWYgKCFyZWN0U2VsLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZWN0U2VsID0gW3NlbGVjdGlvbi50b09yaWVudGVkUmFuZ2UoKV07XG4gICAgICAgICAgICBpZiAoaW5pdGlhbFJhbmdlKSB7XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlbW92ZVNlbGVjdGlvbk1hcmtlcihpbml0aWFsUmFuZ2UpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi50b1NpbmdsZVJhbmdlKGluaXRpYWxSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY3RTZWwubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJlY3RTZWxbaV0pO1xuICAgICAgICAgICAgZWRpdG9yLmluVmlydHVhbFNlbGVjdGlvbk1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGVkaXRvci4kbW91c2VIYW5kbGVyLiRjbGlja1NlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9uU2VsZWN0aW9uSW50ZXJ2YWwgPSBibG9ja1NlbGVjdDtcblxuICAgICAgICBldmVudC5jYXB0dXJlKGVkaXRvci5jb250YWluZXIsIG9uTW91c2VTZWxlY3Rpb24sIG9uTW91c2VTZWxlY3Rpb25FbmQpO1xuICAgICAgICB2YXIgdGltZXJJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge29uU2VsZWN0aW9uSW50ZXJ2YWwoKTt9LCAyMCk7XG5cbiAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG59XG5cblxuZXhwb3J0cy5vbk1vdXNlRG93biA9IG9uTW91c2VEb3duO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mouse/multi_select_handler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/mouse/touch_handler.js":
/*!**********************************************************!*\
  !*** ./node_modules/ace-code/src/mouse/touch_handler.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar MouseEvent = (__webpack_require__(/*! ./mouse_event */ \"./node_modules/ace-code/src/mouse/mouse_event.js\").MouseEvent);\nvar event = __webpack_require__(/*! ../lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\n\nexports.addTouchListeners = function(el, editor) {\n    var mode = \"scroll\";\n    var startX;\n    var startY;\n    var touchStartT;\n    var lastT;\n    var longTouchTimer;\n    var animationTimer;\n    var animationSteps = 0;\n    var pos;\n    var clickCount = 0;\n    var vX = 0;\n    var vY = 0;\n    var pressed;\n    var contextMenu;\n    \n    function createContextMenu() {\n        var clipboard = window.navigator && window.navigator.clipboard;\n        var isOpen = false;\n        var updateMenu = function() {\n            var selected = editor.getCopyText();\n            var hasUndo = editor.session.getUndoManager().hasUndo();\n            contextMenu.replaceChild(\n                dom.buildDom(isOpen ? [\"span\",\n                    !selected && canExecuteCommand(\"selectall\") && [\"span\", { class: \"ace_mobile-button\", action: \"selectall\" }, \"Select All\"],\n                    selected && canExecuteCommand(\"copy\") && [\"span\", { class: \"ace_mobile-button\", action: \"copy\" }, \"Copy\"],\n                    selected && canExecuteCommand(\"cut\") && [\"span\", { class: \"ace_mobile-button\", action: \"cut\" }, \"Cut\"],\n                    clipboard && canExecuteCommand(\"paste\") && [\"span\", { class: \"ace_mobile-button\", action: \"paste\" }, \"Paste\"],\n                    hasUndo && canExecuteCommand(\"undo\") && [\"span\", { class: \"ace_mobile-button\", action: \"undo\" }, \"Undo\"],\n                    canExecuteCommand(\"find\") && [\"span\", { class: \"ace_mobile-button\", action: \"find\" }, \"Find\"],\n                    canExecuteCommand(\"openCommandPalette\") && [\"span\", { class: \"ace_mobile-button\", action: \"openCommandPalette\" }, \"Palette\"]\n                ] : [\"span\"]),\n                contextMenu.firstChild\n            );\n        };\n        \n        var canExecuteCommand = function (/** @type {string} */ cmd) {\n            return editor.commands.canExecute(cmd, editor);\n        };\n        \n        var handleClick = function(e) {\n            var action = e.target.getAttribute(\"action\");\n\n            if (action == \"more\" || !isOpen) {\n                isOpen = !isOpen;\n                return updateMenu();\n            }\n            if (action == \"paste\") {\n                clipboard.readText().then(function (text) {\n                    editor.execCommand(action, text);\n                });\n            }\n            else if (action) {\n                if (action == \"cut\" || action == \"copy\") {\n                    if (clipboard)\n                        clipboard.writeText(editor.getCopyText());\n                    else\n                        document.execCommand(\"copy\");\n                }\n                editor.execCommand(action);\n            }\n            contextMenu.firstChild.style.display = \"none\";\n            isOpen = false;\n            if (action != \"openCommandPalette\")\n                editor.focus();\n        };\n        contextMenu = dom.buildDom([\"div\",\n            {\n                class: \"ace_mobile-menu\",\n                ontouchstart: function(e) {\n                    mode = \"menu\";\n                    e.stopPropagation();\n                    e.preventDefault();\n                    editor.textInput.focus();\n                },\n                ontouchend: function(e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    handleClick(e);\n                },\n                onclick: handleClick\n            },\n            [\"span\"],\n            [\"span\", { class: \"ace_mobile-button\", action: \"more\" }, \"...\"]\n        ], editor.container);\n    }\n    function showContextMenu() {\n        if (!editor.getOption(\"enableMobileMenu\")) {\n            if (contextMenu) {\n                hideContextMenu();\n            }\n            return;\n        }\n        if (!contextMenu) createContextMenu();\n        var cursor = editor.selection.cursor;\n        var pagePos = editor.renderer.textToScreenCoordinates(cursor.row, cursor.column);\n        var leftOffset = editor.renderer.textToScreenCoordinates(0, 0).pageX;\n        var scrollLeft = editor.renderer.scrollLeft;\n        var rect = editor.container.getBoundingClientRect();\n        contextMenu.style.top = pagePos.pageY - rect.top - 3 + \"px\";\n        if (pagePos.pageX - rect.left < rect.width - 70) {\n            contextMenu.style.left = \"\";\n            contextMenu.style.right = \"10px\";\n        } else {\n            contextMenu.style.right = \"\";\n            contextMenu.style.left = leftOffset + scrollLeft - rect.left + \"px\";\n        }\n        contextMenu.style.display = \"\";\n        contextMenu.firstChild.style.display = \"none\";\n        editor.on(\"input\", hideContextMenu);\n    }\n    function hideContextMenu(e) {\n        if (contextMenu)\n            contextMenu.style.display = \"none\";\n        editor.off(\"input\", hideContextMenu);\n    }\n\n    function handleLongTap() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        var range = editor.selection.getRange();\n        var inSelection = range.contains(pos.row, pos.column);\n        if (range.isEmpty() || !inSelection) {\n            editor.selection.moveToPosition(pos);\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n        showContextMenu();\n    }\n    function switchToSelectionMode() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        editor.selection.moveToPosition(pos);\n        var range = clickCount >= 2\n            ? editor.selection.getLineRange(pos.row)\n            : editor.session.getBracketRange(pos);\n        if (range && !range.isEmpty()) {\n            editor.selection.setRange(range);\n        } else {\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n    }\n    event.addListener(el, \"contextmenu\", function(e) {\n        if (!pressed) return;\n        var textarea = editor.textInput.getElement();\n        textarea.focus();\n    }, editor);\n    event.addListener(el, \"touchstart\", function (e) {\n        var touches = e.touches;\n        if (longTouchTimer || touches.length > 1) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n            touchStartT = -1;\n            mode = \"zoom\";\n            return;\n        }\n        \n        pressed = editor.$mouseHandler.isMousePressed = true;\n        var h = editor.renderer.layerConfig.lineHeight;\n        var w = editor.renderer.layerConfig.lineHeight;\n        var t = e.timeStamp;\n        lastT = t;\n        var touchObj = touches[0];\n        var x = touchObj.clientX;\n        var y = touchObj.clientY;\n        // reset clickCount if the new touch is far from the old one\n        if (Math.abs(startX - x) + Math.abs(startY - y) > h)\n            touchStartT = -1;\n        \n        startX = e.clientX = x;\n        startY = e.clientY = y;\n        vX = vY = 0;\n        \n        var ev = new MouseEvent(e, editor);\n        pos = ev.getDocumentPosition();\n\n        if (t - touchStartT < 500 && touches.length == 1 && !animationSteps) {\n            clickCount++;\n            e.preventDefault();\n            e.button = 0;\n            switchToSelectionMode();\n        } else {\n            clickCount = 0;\n            var cursor = editor.selection.cursor;\n            var anchor = editor.selection.isEmpty() ? cursor : editor.selection.anchor;\n            \n            var cursorPos = editor.renderer.$cursorLayer.getPixelPosition(cursor, true);\n            var anchorPos = editor.renderer.$cursorLayer.getPixelPosition(anchor, true);\n            var rect = editor.renderer.scroller.getBoundingClientRect();\n            var offsetTop = editor.renderer.layerConfig.offset;\n            var offsetLeft = editor.renderer.scrollLeft;\n            var weightedDistance = function(x, y) {\n                x = x / w;\n                y = y / h - 0.75;\n                return x * x + y * y;\n            };\n            \n            if (e.clientX < rect.left) {\n                mode = \"zoom\";\n                return;\n            }\n            \n            var diff1 = weightedDistance(\n                e.clientX - rect.left - cursorPos.left + offsetLeft,\n                e.clientY - rect.top - cursorPos.top + offsetTop\n            );\n            var diff2 = weightedDistance(\n                e.clientX - rect.left - anchorPos.left + offsetLeft,\n                e.clientY - rect.top - anchorPos.top + offsetTop\n            );\n            if (diff1 < 3.5 && diff2 < 3.5)\n                mode = diff1 > diff2 ? \"cursor\" : \"anchor\";\n                \n            if (diff2 < 3.5)\n                mode = \"anchor\";\n            else if (diff1 < 3.5)\n                mode = \"cursor\";\n            else\n                mode = \"scroll\";\n            longTouchTimer = setTimeout(handleLongTap, 450);\n        }\n        touchStartT = t;\n    }, editor);\n\n    event.addListener(el, \"touchend\", function (e) {\n        pressed = editor.$mouseHandler.isMousePressed = false;\n        if (animationTimer) clearInterval(animationTimer);\n        if (mode == \"zoom\") {\n            mode = \"\";\n            animationSteps = 0;\n        } else if (longTouchTimer) {\n            editor.selection.moveToPosition(pos);\n            animationSteps = 0;\n            showContextMenu();\n        } else if (mode == \"scroll\") {\n            animate();\n            hideContextMenu();\n        } else {\n            showContextMenu();\n        }\n        clearTimeout(longTouchTimer);\n        longTouchTimer = null;\n    }, editor);\n    event.addListener(el, \"touchmove\", function (e) {\n        if (longTouchTimer) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n        }\n        var touches = e.touches;\n        if (touches.length > 1 || mode == \"zoom\") return;\n\n        var touchObj = touches[0];\n\n        var wheelX = startX - touchObj.clientX;\n        var wheelY = startY - touchObj.clientY;\n\n        if (mode == \"wait\") {\n            if (wheelX * wheelX + wheelY * wheelY > 4)\n                mode = \"cursor\";\n            else\n                return e.preventDefault();\n        }\n\n        startX = touchObj.clientX;\n        startY = touchObj.clientY;\n\n        e.clientX = touchObj.clientX;\n        e.clientY = touchObj.clientY;\n\n        var t = e.timeStamp;\n        var dt = t - lastT;\n        lastT = t;\n        if (mode == \"scroll\") {\n            var mouseEvent = new MouseEvent(e, editor);\n            mouseEvent.speed = 1;\n            mouseEvent.wheelX = wheelX;\n            mouseEvent.wheelY = wheelY;\n            if (10 * Math.abs(wheelX) < Math.abs(wheelY)) wheelX = 0;\n            if (10 * Math.abs(wheelY) < Math.abs(wheelX)) wheelY = 0;\n            if (dt != 0) {\n                vX = wheelX / dt;\n                vY = wheelY / dt;\n            }\n            editor._emit(\"mousewheel\", mouseEvent);\n            if (!mouseEvent.propagationStopped) {\n                vX = vY = 0;\n            }\n        }\n        else {\n            var ev = new MouseEvent(e, editor);\n            var pos = ev.getDocumentPosition();\n            if (mode == \"cursor\")\n                editor.selection.moveCursorToPosition(pos);\n            else if (mode == \"anchor\")\n                editor.selection.setSelectionAnchor(pos.row, pos.column);\n            editor.renderer.scrollCursorIntoView(pos);\n            e.preventDefault();\n        }\n    }, editor);\n\n    function animate() {\n        animationSteps += 60;\n        animationTimer = setInterval(function() {\n            if (animationSteps-- <= 0) {\n                clearInterval(animationTimer);\n                animationTimer = null;\n            }\n            if (Math.abs(vX) < 0.01) vX = 0;\n            if (Math.abs(vY) < 0.01) vY = 0;\n            if (animationSteps < 20) vX = 0.9 * vX;\n            if (animationSteps < 20) vY = 0.9 * vY;\n            var oldScrollTop = editor.session.getScrollTop();\n            editor.renderer.scrollBy(10 * vX, 10 * vY);\n            if (oldScrollTop == editor.session.getScrollTop())\n                animationSteps = 0;\n        }, 10);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL21vdXNlL3RvdWNoX2hhbmRsZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsaUJBQWlCLHlHQUFtQztBQUNwRCxZQUFZLG1CQUFPLENBQUMsOERBQWM7QUFDbEMsVUFBVSxtQkFBTyxDQUFDLDBEQUFZOztBQUU5Qix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxpREFBaUQ7QUFDL0gsd0VBQXdFLDRDQUE0QztBQUNwSCx1RUFBdUUsMkNBQTJDO0FBQ2xILDBFQUEwRSw2Q0FBNkM7QUFDdkgsdUVBQXVFLDRDQUE0QztBQUNuSCw0REFBNEQsNENBQTRDO0FBQ3hHLDBFQUEwRSwwREFBMEQ7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxRQUFRO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBLHVCQUF1Qiw0Q0FBNEM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9tb3VzZS90b3VjaF9oYW5kbGVyLmpzP2FkMzEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBNb3VzZUV2ZW50ID0gcmVxdWlyZShcIi4vbW91c2VfZXZlbnRcIikuTW91c2VFdmVudDtcbnZhciBldmVudCA9IHJlcXVpcmUoXCIuLi9saWIvZXZlbnRcIik7XG52YXIgZG9tID0gcmVxdWlyZShcIi4uL2xpYi9kb21cIik7XG5cbmV4cG9ydHMuYWRkVG91Y2hMaXN0ZW5lcnMgPSBmdW5jdGlvbihlbCwgZWRpdG9yKSB7XG4gICAgdmFyIG1vZGUgPSBcInNjcm9sbFwiO1xuICAgIHZhciBzdGFydFg7XG4gICAgdmFyIHN0YXJ0WTtcbiAgICB2YXIgdG91Y2hTdGFydFQ7XG4gICAgdmFyIGxhc3RUO1xuICAgIHZhciBsb25nVG91Y2hUaW1lcjtcbiAgICB2YXIgYW5pbWF0aW9uVGltZXI7XG4gICAgdmFyIGFuaW1hdGlvblN0ZXBzID0gMDtcbiAgICB2YXIgcG9zO1xuICAgIHZhciBjbGlja0NvdW50ID0gMDtcbiAgICB2YXIgdlggPSAwO1xuICAgIHZhciB2WSA9IDA7XG4gICAgdmFyIHByZXNzZWQ7XG4gICAgdmFyIGNvbnRleHRNZW51O1xuICAgIFxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNvbnRleHRNZW51KCkge1xuICAgICAgICB2YXIgY2xpcGJvYXJkID0gd2luZG93Lm5hdmlnYXRvciAmJiB3aW5kb3cubmF2aWdhdG9yLmNsaXBib2FyZDtcbiAgICAgICAgdmFyIGlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB2YXIgdXBkYXRlTWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gZWRpdG9yLmdldENvcHlUZXh0KCk7XG4gICAgICAgICAgICB2YXIgaGFzVW5kbyA9IGVkaXRvci5zZXNzaW9uLmdldFVuZG9NYW5hZ2VyKCkuaGFzVW5kbygpO1xuICAgICAgICAgICAgY29udGV4dE1lbnUucmVwbGFjZUNoaWxkKFxuICAgICAgICAgICAgICAgIGRvbS5idWlsZERvbShpc09wZW4gPyBbXCJzcGFuXCIsXG4gICAgICAgICAgICAgICAgICAgICFzZWxlY3RlZCAmJiBjYW5FeGVjdXRlQ29tbWFuZChcInNlbGVjdGFsbFwiKSAmJiBbXCJzcGFuXCIsIHsgY2xhc3M6IFwiYWNlX21vYmlsZS1idXR0b25cIiwgYWN0aW9uOiBcInNlbGVjdGFsbFwiIH0sIFwiU2VsZWN0IEFsbFwiXSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgJiYgY2FuRXhlY3V0ZUNvbW1hbmQoXCJjb3B5XCIpICYmIFtcInNwYW5cIiwgeyBjbGFzczogXCJhY2VfbW9iaWxlLWJ1dHRvblwiLCBhY3Rpb246IFwiY29weVwiIH0sIFwiQ29weVwiXSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgJiYgY2FuRXhlY3V0ZUNvbW1hbmQoXCJjdXRcIikgJiYgW1wic3BhblwiLCB7IGNsYXNzOiBcImFjZV9tb2JpbGUtYnV0dG9uXCIsIGFjdGlvbjogXCJjdXRcIiB9LCBcIkN1dFwiXSxcbiAgICAgICAgICAgICAgICAgICAgY2xpcGJvYXJkICYmIGNhbkV4ZWN1dGVDb21tYW5kKFwicGFzdGVcIikgJiYgW1wic3BhblwiLCB7IGNsYXNzOiBcImFjZV9tb2JpbGUtYnV0dG9uXCIsIGFjdGlvbjogXCJwYXN0ZVwiIH0sIFwiUGFzdGVcIl0sXG4gICAgICAgICAgICAgICAgICAgIGhhc1VuZG8gJiYgY2FuRXhlY3V0ZUNvbW1hbmQoXCJ1bmRvXCIpICYmIFtcInNwYW5cIiwgeyBjbGFzczogXCJhY2VfbW9iaWxlLWJ1dHRvblwiLCBhY3Rpb246IFwidW5kb1wiIH0sIFwiVW5kb1wiXSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZUNvbW1hbmQoXCJmaW5kXCIpICYmIFtcInNwYW5cIiwgeyBjbGFzczogXCJhY2VfbW9iaWxlLWJ1dHRvblwiLCBhY3Rpb246IFwiZmluZFwiIH0sIFwiRmluZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZUNvbW1hbmQoXCJvcGVuQ29tbWFuZFBhbGV0dGVcIikgJiYgW1wic3BhblwiLCB7IGNsYXNzOiBcImFjZV9tb2JpbGUtYnV0dG9uXCIsIGFjdGlvbjogXCJvcGVuQ29tbWFuZFBhbGV0dGVcIiB9LCBcIlBhbGV0dGVcIl1cbiAgICAgICAgICAgICAgICBdIDogW1wic3BhblwiXSksXG4gICAgICAgICAgICAgICAgY29udGV4dE1lbnUuZmlyc3RDaGlsZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHZhciBjYW5FeGVjdXRlQ29tbWFuZCA9IGZ1bmN0aW9uICgvKiogQHR5cGUge3N0cmluZ30gKi8gY21kKSB7XG4gICAgICAgICAgICByZXR1cm4gZWRpdG9yLmNvbW1hbmRzLmNhbkV4ZWN1dGUoY21kLCBlZGl0b3IpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdmFyIGhhbmRsZUNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImFjdGlvblwiKTtcblxuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSBcIm1vcmVcIiB8fCAhaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgaXNPcGVuID0gIWlzT3BlbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlTWVudSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSBcInBhc3RlXCIpIHtcbiAgICAgICAgICAgICAgICBjbGlwYm9hcmQucmVhZFRleHQoKS50aGVuKGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5leGVjQ29tbWFuZChhY3Rpb24sIHRleHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSBcImN1dFwiIHx8IGFjdGlvbiA9PSBcImNvcHlcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xpcGJvYXJkKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpcGJvYXJkLndyaXRlVGV4dChlZGl0b3IuZ2V0Q29weVRleHQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWRpdG9yLmV4ZWNDb21tYW5kKGFjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0TWVudS5maXJzdENoaWxkLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIGlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGFjdGlvbiAhPSBcIm9wZW5Db21tYW5kUGFsZXR0ZVwiKVxuICAgICAgICAgICAgICAgIGVkaXRvci5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBjb250ZXh0TWVudSA9IGRvbS5idWlsZERvbShbXCJkaXZcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzczogXCJhY2VfbW9iaWxlLW1lbnVcIixcbiAgICAgICAgICAgICAgICBvbnRvdWNoc3RhcnQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZSA9IFwibWVudVwiO1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci50ZXh0SW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9udG91Y2hlbmQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVDbGljayhlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uY2xpY2s6IGhhbmRsZUNsaWNrXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW1wic3BhblwiXSxcbiAgICAgICAgICAgIFtcInNwYW5cIiwgeyBjbGFzczogXCJhY2VfbW9iaWxlLWJ1dHRvblwiLCBhY3Rpb246IFwibW9yZVwiIH0sIFwiLi4uXCJdXG4gICAgICAgIF0sIGVkaXRvci5jb250YWluZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzaG93Q29udGV4dE1lbnUoKSB7XG4gICAgICAgIGlmICghZWRpdG9yLmdldE9wdGlvbihcImVuYWJsZU1vYmlsZU1lbnVcIikpIHtcbiAgICAgICAgICAgIGlmIChjb250ZXh0TWVudSkge1xuICAgICAgICAgICAgICAgIGhpZGVDb250ZXh0TWVudSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29udGV4dE1lbnUpIGNyZWF0ZUNvbnRleHRNZW51KCk7XG4gICAgICAgIHZhciBjdXJzb3IgPSBlZGl0b3Iuc2VsZWN0aW9uLmN1cnNvcjtcbiAgICAgICAgdmFyIHBhZ2VQb3MgPSBlZGl0b3IucmVuZGVyZXIudGV4dFRvU2NyZWVuQ29vcmRpbmF0ZXMoY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbik7XG4gICAgICAgIHZhciBsZWZ0T2Zmc2V0ID0gZWRpdG9yLnJlbmRlcmVyLnRleHRUb1NjcmVlbkNvb3JkaW5hdGVzKDAsIDApLnBhZ2VYO1xuICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IGVkaXRvci5yZW5kZXJlci5zY3JvbGxMZWZ0O1xuICAgICAgICB2YXIgcmVjdCA9IGVkaXRvci5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnRleHRNZW51LnN0eWxlLnRvcCA9IHBhZ2VQb3MucGFnZVkgLSByZWN0LnRvcCAtIDMgKyBcInB4XCI7XG4gICAgICAgIGlmIChwYWdlUG9zLnBhZ2VYIC0gcmVjdC5sZWZ0IDwgcmVjdC53aWR0aCAtIDcwKSB7XG4gICAgICAgICAgICBjb250ZXh0TWVudS5zdHlsZS5sZWZ0ID0gXCJcIjtcbiAgICAgICAgICAgIGNvbnRleHRNZW51LnN0eWxlLnJpZ2h0ID0gXCIxMHB4XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0TWVudS5zdHlsZS5yaWdodCA9IFwiXCI7XG4gICAgICAgICAgICBjb250ZXh0TWVudS5zdHlsZS5sZWZ0ID0gbGVmdE9mZnNldCArIHNjcm9sbExlZnQgLSByZWN0LmxlZnQgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgIGNvbnRleHRNZW51LmZpcnN0Q2hpbGQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBlZGl0b3Iub24oXCJpbnB1dFwiLCBoaWRlQ29udGV4dE1lbnUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoaWRlQ29udGV4dE1lbnUoZSkge1xuICAgICAgICBpZiAoY29udGV4dE1lbnUpXG4gICAgICAgICAgICBjb250ZXh0TWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGVkaXRvci5vZmYoXCJpbnB1dFwiLCBoaWRlQ29udGV4dE1lbnUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUxvbmdUYXAoKSB7XG4gICAgICAgIGxvbmdUb3VjaFRpbWVyID0gbnVsbDtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGxvbmdUb3VjaFRpbWVyKTtcbiAgICAgICAgdmFyIHJhbmdlID0gZWRpdG9yLnNlbGVjdGlvbi5nZXRSYW5nZSgpO1xuICAgICAgICB2YXIgaW5TZWxlY3Rpb24gPSByYW5nZS5jb250YWlucyhwb3Mucm93LCBwb3MuY29sdW1uKTtcbiAgICAgICAgaWYgKHJhbmdlLmlzRW1wdHkoKSB8fCAhaW5TZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGVkaXRvci5zZWxlY3Rpb24ubW92ZVRvUG9zaXRpb24ocG9zKTtcbiAgICAgICAgICAgIGVkaXRvci5zZWxlY3Rpb24uc2VsZWN0V29yZCgpO1xuICAgICAgICB9XG4gICAgICAgIG1vZGUgPSBcIndhaXRcIjtcbiAgICAgICAgc2hvd0NvbnRleHRNZW51KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN3aXRjaFRvU2VsZWN0aW9uTW9kZSgpIHtcbiAgICAgICAgbG9uZ1RvdWNoVGltZXIgPSBudWxsO1xuICAgICAgICBjbGVhclRpbWVvdXQobG9uZ1RvdWNoVGltZXIpO1xuICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLm1vdmVUb1Bvc2l0aW9uKHBvcyk7XG4gICAgICAgIHZhciByYW5nZSA9IGNsaWNrQ291bnQgPj0gMlxuICAgICAgICAgICAgPyBlZGl0b3Iuc2VsZWN0aW9uLmdldExpbmVSYW5nZShwb3Mucm93KVxuICAgICAgICAgICAgOiBlZGl0b3Iuc2Vzc2lvbi5nZXRCcmFja2V0UmFuZ2UocG9zKTtcbiAgICAgICAgaWYgKHJhbmdlICYmICFyYW5nZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGVkaXRvci5zZWxlY3Rpb24uc2V0UmFuZ2UocmFuZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5zZWxlY3RXb3JkKCk7XG4gICAgICAgIH1cbiAgICAgICAgbW9kZSA9IFwid2FpdFwiO1xuICAgIH1cbiAgICBldmVudC5hZGRMaXN0ZW5lcihlbCwgXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghcHJlc3NlZCkgcmV0dXJuO1xuICAgICAgICB2YXIgdGV4dGFyZWEgPSBlZGl0b3IudGV4dElucHV0LmdldEVsZW1lbnQoKTtcbiAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICB9LCBlZGl0b3IpO1xuICAgIGV2ZW50LmFkZExpc3RlbmVyKGVsLCBcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHRvdWNoZXMgPSBlLnRvdWNoZXM7XG4gICAgICAgIGlmIChsb25nVG91Y2hUaW1lciB8fCB0b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChsb25nVG91Y2hUaW1lcik7XG4gICAgICAgICAgICBsb25nVG91Y2hUaW1lciA9IG51bGw7XG4gICAgICAgICAgICB0b3VjaFN0YXJ0VCA9IC0xO1xuICAgICAgICAgICAgbW9kZSA9IFwiem9vbVwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwcmVzc2VkID0gZWRpdG9yLiRtb3VzZUhhbmRsZXIuaXNNb3VzZVByZXNzZWQgPSB0cnVlO1xuICAgICAgICB2YXIgaCA9IGVkaXRvci5yZW5kZXJlci5sYXllckNvbmZpZy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgdyA9IGVkaXRvci5yZW5kZXJlci5sYXllckNvbmZpZy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgdCA9IGUudGltZVN0YW1wO1xuICAgICAgICBsYXN0VCA9IHQ7XG4gICAgICAgIHZhciB0b3VjaE9iaiA9IHRvdWNoZXNbMF07XG4gICAgICAgIHZhciB4ID0gdG91Y2hPYmouY2xpZW50WDtcbiAgICAgICAgdmFyIHkgPSB0b3VjaE9iai5jbGllbnRZO1xuICAgICAgICAvLyByZXNldCBjbGlja0NvdW50IGlmIHRoZSBuZXcgdG91Y2ggaXMgZmFyIGZyb20gdGhlIG9sZCBvbmVcbiAgICAgICAgaWYgKE1hdGguYWJzKHN0YXJ0WCAtIHgpICsgTWF0aC5hYnMoc3RhcnRZIC0geSkgPiBoKVxuICAgICAgICAgICAgdG91Y2hTdGFydFQgPSAtMTtcbiAgICAgICAgXG4gICAgICAgIHN0YXJ0WCA9IGUuY2xpZW50WCA9IHg7XG4gICAgICAgIHN0YXJ0WSA9IGUuY2xpZW50WSA9IHk7XG4gICAgICAgIHZYID0gdlkgPSAwO1xuICAgICAgICBcbiAgICAgICAgdmFyIGV2ID0gbmV3IE1vdXNlRXZlbnQoZSwgZWRpdG9yKTtcbiAgICAgICAgcG9zID0gZXYuZ2V0RG9jdW1lbnRQb3NpdGlvbigpO1xuXG4gICAgICAgIGlmICh0IC0gdG91Y2hTdGFydFQgPCA1MDAgJiYgdG91Y2hlcy5sZW5ndGggPT0gMSAmJiAhYW5pbWF0aW9uU3RlcHMpIHtcbiAgICAgICAgICAgIGNsaWNrQ291bnQrKztcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuYnV0dG9uID0gMDtcbiAgICAgICAgICAgIHN3aXRjaFRvU2VsZWN0aW9uTW9kZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xpY2tDb3VudCA9IDA7XG4gICAgICAgICAgICB2YXIgY3Vyc29yID0gZWRpdG9yLnNlbGVjdGlvbi5jdXJzb3I7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gZWRpdG9yLnNlbGVjdGlvbi5pc0VtcHR5KCkgPyBjdXJzb3IgOiBlZGl0b3Iuc2VsZWN0aW9uLmFuY2hvcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGN1cnNvclBvcyA9IGVkaXRvci5yZW5kZXJlci4kY3Vyc29yTGF5ZXIuZ2V0UGl4ZWxQb3NpdGlvbihjdXJzb3IsIHRydWUpO1xuICAgICAgICAgICAgdmFyIGFuY2hvclBvcyA9IGVkaXRvci5yZW5kZXJlci4kY3Vyc29yTGF5ZXIuZ2V0UGl4ZWxQb3NpdGlvbihhbmNob3IsIHRydWUpO1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBlZGl0b3IucmVuZGVyZXIuc2Nyb2xsZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0VG9wID0gZWRpdG9yLnJlbmRlcmVyLmxheWVyQ29uZmlnLm9mZnNldDtcbiAgICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gZWRpdG9yLnJlbmRlcmVyLnNjcm9sbExlZnQ7XG4gICAgICAgICAgICB2YXIgd2VpZ2h0ZWREaXN0YW5jZSA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgICAgICAgICB4ID0geCAvIHc7XG4gICAgICAgICAgICAgICAgeSA9IHkgLyBoIC0gMC43NTtcbiAgICAgICAgICAgICAgICByZXR1cm4geCAqIHggKyB5ICogeTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChlLmNsaWVudFggPCByZWN0LmxlZnQpIHtcbiAgICAgICAgICAgICAgICBtb2RlID0gXCJ6b29tXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgZGlmZjEgPSB3ZWlnaHRlZERpc3RhbmNlKFxuICAgICAgICAgICAgICAgIGUuY2xpZW50WCAtIHJlY3QubGVmdCAtIGN1cnNvclBvcy5sZWZ0ICsgb2Zmc2V0TGVmdCxcbiAgICAgICAgICAgICAgICBlLmNsaWVudFkgLSByZWN0LnRvcCAtIGN1cnNvclBvcy50b3AgKyBvZmZzZXRUb3BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB2YXIgZGlmZjIgPSB3ZWlnaHRlZERpc3RhbmNlKFxuICAgICAgICAgICAgICAgIGUuY2xpZW50WCAtIHJlY3QubGVmdCAtIGFuY2hvclBvcy5sZWZ0ICsgb2Zmc2V0TGVmdCxcbiAgICAgICAgICAgICAgICBlLmNsaWVudFkgLSByZWN0LnRvcCAtIGFuY2hvclBvcy50b3AgKyBvZmZzZXRUb3BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoZGlmZjEgPCAzLjUgJiYgZGlmZjIgPCAzLjUpXG4gICAgICAgICAgICAgICAgbW9kZSA9IGRpZmYxID4gZGlmZjIgPyBcImN1cnNvclwiIDogXCJhbmNob3JcIjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChkaWZmMiA8IDMuNSlcbiAgICAgICAgICAgICAgICBtb2RlID0gXCJhbmNob3JcIjtcbiAgICAgICAgICAgIGVsc2UgaWYgKGRpZmYxIDwgMy41KVxuICAgICAgICAgICAgICAgIG1vZGUgPSBcImN1cnNvclwiO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1vZGUgPSBcInNjcm9sbFwiO1xuICAgICAgICAgICAgbG9uZ1RvdWNoVGltZXIgPSBzZXRUaW1lb3V0KGhhbmRsZUxvbmdUYXAsIDQ1MCk7XG4gICAgICAgIH1cbiAgICAgICAgdG91Y2hTdGFydFQgPSB0O1xuICAgIH0sIGVkaXRvcik7XG5cbiAgICBldmVudC5hZGRMaXN0ZW5lcihlbCwgXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBwcmVzc2VkID0gZWRpdG9yLiRtb3VzZUhhbmRsZXIuaXNNb3VzZVByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGFuaW1hdGlvblRpbWVyKSBjbGVhckludGVydmFsKGFuaW1hdGlvblRpbWVyKTtcbiAgICAgICAgaWYgKG1vZGUgPT0gXCJ6b29tXCIpIHtcbiAgICAgICAgICAgIG1vZGUgPSBcIlwiO1xuICAgICAgICAgICAgYW5pbWF0aW9uU3RlcHMgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGxvbmdUb3VjaFRpbWVyKSB7XG4gICAgICAgICAgICBlZGl0b3Iuc2VsZWN0aW9uLm1vdmVUb1Bvc2l0aW9uKHBvcyk7XG4gICAgICAgICAgICBhbmltYXRpb25TdGVwcyA9IDA7XG4gICAgICAgICAgICBzaG93Q29udGV4dE1lbnUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09IFwic2Nyb2xsXCIpIHtcbiAgICAgICAgICAgIGFuaW1hdGUoKTtcbiAgICAgICAgICAgIGhpZGVDb250ZXh0TWVudSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hvd0NvbnRleHRNZW51KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJUaW1lb3V0KGxvbmdUb3VjaFRpbWVyKTtcbiAgICAgICAgbG9uZ1RvdWNoVGltZXIgPSBudWxsO1xuICAgIH0sIGVkaXRvcik7XG4gICAgZXZlbnQuYWRkTGlzdGVuZXIoZWwsIFwidG91Y2htb3ZlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChsb25nVG91Y2hUaW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGxvbmdUb3VjaFRpbWVyKTtcbiAgICAgICAgICAgIGxvbmdUb3VjaFRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdG91Y2hlcyA9IGUudG91Y2hlcztcbiAgICAgICAgaWYgKHRvdWNoZXMubGVuZ3RoID4gMSB8fCBtb2RlID09IFwiem9vbVwiKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHRvdWNoT2JqID0gdG91Y2hlc1swXTtcblxuICAgICAgICB2YXIgd2hlZWxYID0gc3RhcnRYIC0gdG91Y2hPYmouY2xpZW50WDtcbiAgICAgICAgdmFyIHdoZWVsWSA9IHN0YXJ0WSAtIHRvdWNoT2JqLmNsaWVudFk7XG5cbiAgICAgICAgaWYgKG1vZGUgPT0gXCJ3YWl0XCIpIHtcbiAgICAgICAgICAgIGlmICh3aGVlbFggKiB3aGVlbFggKyB3aGVlbFkgKiB3aGVlbFkgPiA0KVxuICAgICAgICAgICAgICAgIG1vZGUgPSBcImN1cnNvclwiO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFydFggPSB0b3VjaE9iai5jbGllbnRYO1xuICAgICAgICBzdGFydFkgPSB0b3VjaE9iai5jbGllbnRZO1xuXG4gICAgICAgIGUuY2xpZW50WCA9IHRvdWNoT2JqLmNsaWVudFg7XG4gICAgICAgIGUuY2xpZW50WSA9IHRvdWNoT2JqLmNsaWVudFk7XG5cbiAgICAgICAgdmFyIHQgPSBlLnRpbWVTdGFtcDtcbiAgICAgICAgdmFyIGR0ID0gdCAtIGxhc3RUO1xuICAgICAgICBsYXN0VCA9IHQ7XG4gICAgICAgIGlmIChtb2RlID09IFwic2Nyb2xsXCIpIHtcbiAgICAgICAgICAgIHZhciBtb3VzZUV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoZSwgZWRpdG9yKTtcbiAgICAgICAgICAgIG1vdXNlRXZlbnQuc3BlZWQgPSAxO1xuICAgICAgICAgICAgbW91c2VFdmVudC53aGVlbFggPSB3aGVlbFg7XG4gICAgICAgICAgICBtb3VzZUV2ZW50LndoZWVsWSA9IHdoZWVsWTtcbiAgICAgICAgICAgIGlmICgxMCAqIE1hdGguYWJzKHdoZWVsWCkgPCBNYXRoLmFicyh3aGVlbFkpKSB3aGVlbFggPSAwO1xuICAgICAgICAgICAgaWYgKDEwICogTWF0aC5hYnMod2hlZWxZKSA8IE1hdGguYWJzKHdoZWVsWCkpIHdoZWVsWSA9IDA7XG4gICAgICAgICAgICBpZiAoZHQgIT0gMCkge1xuICAgICAgICAgICAgICAgIHZYID0gd2hlZWxYIC8gZHQ7XG4gICAgICAgICAgICAgICAgdlkgPSB3aGVlbFkgLyBkdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVkaXRvci5fZW1pdChcIm1vdXNld2hlZWxcIiwgbW91c2VFdmVudCk7XG4gICAgICAgICAgICBpZiAoIW1vdXNlRXZlbnQucHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgdlggPSB2WSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXYgPSBuZXcgTW91c2VFdmVudChlLCBlZGl0b3IpO1xuICAgICAgICAgICAgdmFyIHBvcyA9IGV2LmdldERvY3VtZW50UG9zaXRpb24oKTtcbiAgICAgICAgICAgIGlmIChtb2RlID09IFwiY3Vyc29yXCIpXG4gICAgICAgICAgICAgICAgZWRpdG9yLnNlbGVjdGlvbi5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbihwb3MpO1xuICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PSBcImFuY2hvclwiKVxuICAgICAgICAgICAgICAgIGVkaXRvci5zZWxlY3Rpb24uc2V0U2VsZWN0aW9uQW5jaG9yKHBvcy5yb3csIHBvcy5jb2x1bW4pO1xuICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KHBvcyk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9LCBlZGl0b3IpO1xuXG4gICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICAgICAgYW5pbWF0aW9uU3RlcHMgKz0gNjA7XG4gICAgICAgIGFuaW1hdGlvblRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uU3RlcHMtLSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChhbmltYXRpb25UaW1lcik7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHZYKSA8IDAuMDEpIHZYID0gMDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh2WSkgPCAwLjAxKSB2WSA9IDA7XG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uU3RlcHMgPCAyMCkgdlggPSAwLjkgKiB2WDtcbiAgICAgICAgICAgIGlmIChhbmltYXRpb25TdGVwcyA8IDIwKSB2WSA9IDAuOSAqIHZZO1xuICAgICAgICAgICAgdmFyIG9sZFNjcm9sbFRvcCA9IGVkaXRvci5zZXNzaW9uLmdldFNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgZWRpdG9yLnJlbmRlcmVyLnNjcm9sbEJ5KDEwICogdlgsIDEwICogdlkpO1xuICAgICAgICAgICAgaWYgKG9sZFNjcm9sbFRvcCA9PSBlZGl0b3Iuc2Vzc2lvbi5nZXRTY3JvbGxUb3AoKSlcbiAgICAgICAgICAgICAgICBhbmltYXRpb25TdGVwcyA9IDA7XG4gICAgICAgIH0sIDEwKTtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/mouse/touch_handler.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/multi_select.js":
/*!***************************************************!*\
  !*** ./node_modules/ace-code/src/multi_select.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("/**\n * @typedef {import(\"./anchor\").Anchor} Anchor\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n * @typedef {import(\"../ace-internal\").Ace.ScreenCoordinates} ScreenCoordinates\n */\n\nvar RangeList = (__webpack_require__(/*! ./range_list */ \"./node_modules/ace-code/src/range_list.js\").RangeList);\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar Selection = (__webpack_require__(/*! ./selection */ \"./node_modules/ace-code/src/selection.js\").Selection);\nvar onMouseDown = (__webpack_require__(/*! ./mouse/multi_select_handler */ \"./node_modules/ace-code/src/mouse/multi_select_handler.js\").onMouseDown);\nvar event = __webpack_require__(/*! ./lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar commands = __webpack_require__(/*! ./commands/multi_select_commands */ \"./node_modules/ace-code/src/commands/multi_select_commands.js\");\nexports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);\n\n// Todo: session.find or editor.findVolatile that returns range\nvar Search = (__webpack_require__(/*! ./search */ \"./node_modules/ace-code/src/search.js\").Search);\nvar search = new Search();\n\n/**\n * @param {EditSession} session\n * @param {string | RegExp} needle\n * @param {number} dir\n */\nfunction find(session, needle, dir) {\n    search.$options.wrap = true;\n    search.$options.needle = needle;\n    search.$options.backwards = dir == -1;\n    return search.find(session);\n}\n\n// extend EditSession\nvar EditSession = (__webpack_require__(/*! ./edit_session */ \"./node_modules/ace-code/src/edit_session.js\").EditSession);\n(function() {\n    /**\n     * @this {EditSession}\n     */\n    this.getSelectionMarkers = function() {\n        return this.$selectionMarkers;\n    };\n}).call(EditSession.prototype);\n\n// extend Selection\n(function() {\n    // list of ranges in reverse addition order\n    this.ranges = null;\n\n    // automatically sorted list of ranges\n    /**@type {RangeList | null} */\n    this.rangeList = null;\n\n    /**\n     * Adds a range to a selection by entering multiselect mode, if necessary.\n     * @param {Range} range The new range to add\n     * @param {Boolean} $blockChangeEvents Whether or not to block changing events\n     * @this {Selection}\n     **/\n    this.addRange = function(range, $blockChangeEvents) {\n        if (!range)\n            return;\n\n        if (!this.inMultiSelectMode && this.rangeCount === 0) {\n            var oldRange = this.toOrientedRange();\n            this.rangeList.add(oldRange);\n            this.rangeList.add(range);\n            if (this.rangeList.ranges.length != 2) {\n                this.rangeList.removeAll();\n                return $blockChangeEvents || this.fromOrientedRange(range);\n            }\n            this.rangeList.removeAll();\n            this.rangeList.add(oldRange);\n            this.$onAddRange(oldRange);\n        }\n\n        if (!range.cursor)\n            range.cursor = range.end;\n\n        var removed = this.rangeList.add(range);\n\n        this.$onAddRange(range);\n\n        if (removed.length)\n            this.$onRemoveRange(removed);\n\n        if (this.rangeCount > 1 && !this.inMultiSelectMode) {\n            this._signal(\"multiSelect\");\n            this.inMultiSelectMode = true;\n            this.session.$undoSelect = false;\n            this.rangeList.attach(this.session);\n        }\n\n        return $blockChangeEvents || this.fromOrientedRange(range);\n    };\n\n    /**\n     * @param {Range} [range]\n     * @this {Selection}\n     **/\n    this.toSingleRange = function(range) {\n        range = range || this.ranges[0];\n        var removed = this.rangeList.removeAll();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n\n        range && this.fromOrientedRange(range);\n    };\n\n    /**\n     * Removes a Range containing pos (if it exists).\n     * @param {Point} pos The position to remove, as a `{row, column}` object\n     * @this {Selection}\n     **/\n    this.substractPoint = function(pos) {\n        var removed = this.rangeList.substractPoint(pos);\n        if (removed) {\n            this.$onRemoveRange(removed);\n            return removed[0];\n        }\n    };\n\n    /**\n     * Merges overlapping ranges ensuring consistency after changes\n     * @this {Selection}\n     **/\n    this.mergeOverlappingRanges = function() {\n        var removed = this.rangeList.merge();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n    };\n\n    /**\n     * @param {Range} range\n     * @this {Selection}\n     */\n    this.$onAddRange = function(range) {\n        this.rangeCount = this.rangeList.ranges.length;\n        this.ranges.unshift(range);\n        this._signal(\"addRange\", {range: range});\n    };\n\n    /**\n     * @param {Range[]} removed\n     * @this {Selection}\n     */\n    this.$onRemoveRange = function(removed) {\n        this.rangeCount = this.rangeList.ranges.length;\n        if (this.rangeCount == 1 && this.inMultiSelectMode) {\n            var lastRange = this.rangeList.ranges.pop();\n            removed.push(lastRange);\n            this.rangeCount = 0;\n        }\n\n        for (var i = removed.length; i--; ) {\n            var index = this.ranges.indexOf(removed[i]);\n            this.ranges.splice(index, 1);\n        }\n\n        this._signal(\"removeRange\", {ranges: removed});\n\n        if (this.rangeCount === 0 && this.inMultiSelectMode) {\n            this.inMultiSelectMode = false;\n            this._signal(\"singleSelect\");\n            this.session.$undoSelect = true;\n            // @ts-expect-error TODO: possible bug, no args in parameters\n            this.rangeList.detach(this.session);\n        }\n\n        lastRange = lastRange || this.ranges[0];\n        if (lastRange && !lastRange.isEqual(this.getRange()))\n            this.fromOrientedRange(lastRange);\n    };\n\n    /**\n     * adds multicursor support to selection\n     * @this {Selection}\n     */\n    this.$initRangeList = function() {\n        if (this.rangeList)\n            return;\n\n        this.rangeList = new RangeList();\n        this.ranges = [];\n        this.rangeCount = 0;\n    };\n\n    /**\n     * Returns a concatenation of all the ranges.\n     * @returns {Range[]}\n     * @this {Selection}\n     **/\n    this.getAllRanges = function() {\n        return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];\n    };\n\n    /**\n     * Splits all the ranges into lines.\n     * @this {Selection}\n     **/\n    this.splitIntoLines = function () {\n        var ranges = this.ranges.length ? this.ranges : [this.getRange()];\n        var newRanges = [];\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            var row = range.start.row;\n            var endRow = range.end.row;\n            if (row === endRow) {\n                newRanges.push(range.clone());\n            } else {\n                newRanges.push(new Range(row, range.start.column, row, this.session.getLine(row).length));\n                while (++row < endRow)\n                    newRanges.push(this.getLineRange(row, true));\n                newRanges.push(new Range(endRow, 0, endRow, range.end.column));\n            }\n            if (i == 0 && !this.isBackwards())\n                newRanges = newRanges.reverse();\n        }\n        this.toSingleRange();\n        for (var i = newRanges.length; i--;)\n            this.addRange(newRanges[i]);\n    };\n\n    /**\n     * @this {Selection}\n     */\n    this.joinSelections = function () {\n        var ranges = this.rangeList.ranges;\n        var lastRange = ranges[ranges.length - 1];\n        var range = Range.fromPoints(ranges[0].start, lastRange.end);\n\n        this.toSingleRange();\n        this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n    };\n\n    /**\n     * @this {Selection}\n     **/\n    this.toggleBlockSelection = function () {\n        if (this.rangeCount > 1) {\n            var ranges = this.rangeList.ranges;\n            var lastRange = ranges[ranges.length - 1];\n            var range = Range.fromPoints(ranges[0].start, lastRange.end);\n\n            this.toSingleRange();\n            this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n        } else {\n            var cursor = this.session.documentToScreenPosition(this.cursor);\n            var anchor = this.session.documentToScreenPosition(this.anchor);\n\n            var rectSel = this.rectangularRangeBlock(cursor, anchor);\n            // @ts-expect-error TODO: possible bug\n            rectSel.forEach(this.addRange, this);\n        }\n    };\n\n    /**\n     * Gets list of ranges composing rectangular block on the screen\n     *\n     * @param {ScreenCoordinates} screenCursor The cursor to use\n     * @param {ScreenCoordinates} screenAnchor The anchor to use\n     * @param {Boolean} [includeEmptyLines] If true, this includes ranges inside the block which are empty due to clipping\n     * @returns {Range[]}\n     * @this {Selection}\n     **/\n    this.rectangularRangeBlock = function(screenCursor, screenAnchor, includeEmptyLines) {\n        var rectSel = [];\n\n        var xBackwards = screenCursor.column < screenAnchor.column;\n        if (xBackwards) {\n            var startColumn = screenCursor.column;\n            var endColumn = screenAnchor.column;\n            var startOffsetX = screenCursor.offsetX;\n            var endOffsetX = screenAnchor.offsetX;\n        } else {\n            var startColumn = screenAnchor.column;\n            var endColumn = screenCursor.column;\n            var startOffsetX = screenAnchor.offsetX;\n            var endOffsetX = screenCursor.offsetX;\n        }\n\n        var yBackwards = screenCursor.row < screenAnchor.row;\n        if (yBackwards) {\n            var startRow = screenCursor.row;\n            var endRow = screenAnchor.row;\n        } else {\n            var startRow = screenAnchor.row;\n            var endRow = screenCursor.row;\n        }\n\n        if (startColumn < 0)\n            startColumn = 0;\n        if (startRow < 0)\n            startRow = 0;\n\n        if (startRow == endRow)\n            includeEmptyLines = true;\n\n        var docEnd;\n        for (var row = startRow; row <= endRow; row++) {\n            var range = Range.fromPoints(\n                this.session.screenToDocumentPosition(row, startColumn, startOffsetX),\n                this.session.screenToDocumentPosition(row, endColumn, endOffsetX)\n            );\n            if (range.isEmpty()) {\n                if (docEnd && isSamePoint(range.end, docEnd))\n                    break;\n                docEnd = range.end;\n            }\n            range.cursor = xBackwards ? range.start : range.end;\n            rectSel.push(range);\n        }\n\n        if (yBackwards)\n            rectSel.reverse();\n\n        if (!includeEmptyLines) {\n            var end = rectSel.length - 1;\n            while (rectSel[end].isEmpty() && end > 0)\n                end--;\n            if (end > 0) {\n                var start = 0;\n                while (rectSel[start].isEmpty())\n                    start++;\n            }\n            for (var i = end; i >= start; i--) {\n                if (rectSel[i].isEmpty())\n                    rectSel.splice(i, 1);\n            }\n        }\n\n        return rectSel;\n    };\n}).call(Selection.prototype);\n\n// extend Editor\nvar Editor = (__webpack_require__(/*! ./editor */ \"./node_modules/ace-code/src/editor.js\").Editor);\n(function() {\n\n    /**\n     *\n     * Updates the cursor and marker layers.\n     * @method Editor.updateSelectionMarkers\n     * @this {Editor}\n     **/\n    this.updateSelectionMarkers = function() {\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    /**\n     * Adds the selection and cursor.\n     * @param {Range & {marker?}} orientedRange A range containing a cursor\n     * @returns {Range & {marker?}}\n     * @this {Editor}\n     **/\n    this.addSelectionMarker = function(orientedRange) {\n        if (!orientedRange.cursor)\n            orientedRange.cursor = orientedRange.end;\n\n        var style = this.getSelectionStyle();\n        orientedRange.marker = this.session.addMarker(orientedRange, \"ace_selection\", style);\n\n        this.session.$selectionMarkers.push(orientedRange);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n        return orientedRange;\n    };\n\n    /**\n     * Removes the selection marker.\n     * @param {Range & {marker?}} range The selection range added with [[Editor.addSelectionMarker `addSelectionMarker()`]].\n     * @this {Editor}\n     **/\n    this.removeSelectionMarker = function(range) {\n        if (!range.marker)\n            return;\n        this.session.removeMarker(range.marker);\n        var index = this.session.$selectionMarkers.indexOf(range);\n        if (index != -1)\n            this.session.$selectionMarkers.splice(index, 1);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n    };\n\n    /**\n     * @param {(Range & {marker?})[]} ranges\n     * @this {Editor}\n     */\n    this.removeSelectionMarkers = function(ranges) {\n        var markerList = this.session.$selectionMarkers;\n        for (var i = ranges.length; i--; ) {\n            var range = ranges[i];\n            if (!range.marker)\n                continue;\n            this.session.removeMarker(range.marker);\n            var index = markerList.indexOf(range);\n            if (index != -1)\n                markerList.splice(index, 1);\n        }\n        this.session.selectionMarkerCount = markerList.length;\n    };\n\n    /**\n     * @param e\n     * @this {Editor}\n     */\n    this.$onAddRange = function(e) {\n        this.addSelectionMarker(e.range);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    /**\n     * @param e\n     * @this {Editor}\n     */\n    this.$onRemoveRange = function(e) {\n        this.removeSelectionMarkers(e.ranges);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    /**\n     * @param e\n     * @this {Editor}\n     */\n    this.$onMultiSelect = function(e) {\n        if (this.inMultiSelectMode)\n            return;\n        this.inMultiSelectMode = true;\n\n        this.setStyle(\"ace_multiselect\");\n        this.keyBinding.addKeyboardHandler(commands.keyboardHandler);\n        this.commands.setDefaultHandler(\"exec\", this.$onMultiSelectExec);\n\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    /**\n     * @param e\n     * @this {Editor}\n     */\n    this.$onSingleSelect = function(e) {\n        if (this.session.multiSelect.inVirtualMode)\n            return;\n        this.inMultiSelectMode = false;\n\n        this.unsetStyle(\"ace_multiselect\");\n        this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);\n\n        this.commands.removeDefaultHandler(\"exec\", this.$onMultiSelectExec);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n        this._emit(\"changeSelection\");\n    };\n\n    /**\n     * @param e\n     * @this {Editor}\n     */\n    this.$onMultiSelectExec = function(e) {\n        var command = e.command;\n        var editor = e.editor;\n        if (!editor.multiSelect)\n            return;\n        if (!command.multiSelectAction) {\n            var result = command.exec(editor, e.args || {});\n            editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());\n            editor.multiSelect.mergeOverlappingRanges();\n        } else if (command.multiSelectAction == \"forEach\") {\n            result = editor.forEachSelection(command, e.args);\n        } else if (command.multiSelectAction == \"forEachLine\") {\n            result = editor.forEachSelection(command, e.args, true);\n        } else if (command.multiSelectAction == \"single\") {\n            editor.exitMultiSelectMode();\n            result = command.exec(editor, e.args || {});\n        } else {\n            result = command.multiSelectAction(editor, e.args || {});\n        }\n        return result;\n    };\n\n    /**\n     * Executes a command for each selection range.\n     * @param {any} cmd The command to execute\n     * @param {String} [args] Any arguments for the command\n     * @param {Object|true} [options]\n     * @this {Editor}\n     **/\n    this.forEachSelection = function(cmd, args, options) {\n        if (this.inVirtualSelectionMode)\n            return;\n        var keepOrder = options && options.keepOrder;\n        var $byLines = options == true || options && options.$byLines;\n        var session = this.session;\n        var selection = this.selection;\n        var rangeList = selection.rangeList;\n        var ranges = (keepOrder ? selection : rangeList).ranges;\n        var result;\n\n        if (!ranges.length)\n            return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n\n        var reg = selection._eventRegistry;\n        selection._eventRegistry = {};\n        var tmpSel = new Selection(session);\n        this.inVirtualSelectionMode = true;\n        for (var i = ranges.length; i--;) {\n            if ($byLines) {\n                while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)\n                    i--;\n            }\n            tmpSel.fromOrientedRange(ranges[i]);\n            tmpSel.index = i;\n            this.selection = session.selection = tmpSel;\n            var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n            if (!result && cmdResult !== undefined)\n                result = cmdResult;\n            tmpSel.toOrientedRange(ranges[i]);\n        }\n        tmpSel.detach();\n\n        this.selection = session.selection = selection;\n        this.inVirtualSelectionMode = false;\n        selection._eventRegistry = reg;\n        selection.mergeOverlappingRanges();\n        if (selection.ranges[0])\n            selection.fromOrientedRange(selection.ranges[0]);\n\n        var anim = this.renderer.$scrollAnimation;\n        this.onCursorChange();\n        this.onSelectionChange();\n        if (anim && anim.from == anim.to)\n            this.renderer.animateScrolling(anim.from);\n\n        return result;\n    };\n\n    /**\n    * Removes all the selections except the last added one.\n    * @this {Editor}\n    **/\n    this.exitMultiSelectMode = function() {\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)\n            return;\n        this.multiSelect.toSingleRange();\n    };\n\n    /**\n     * @this {Editor}\n     * @return {string}\n     */\n    this.getSelectedText = function() {\n        var text = \"\";\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var ranges = this.multiSelect.rangeList.ranges;\n            var buf = [];\n            for (var i = 0; i < ranges.length; i++) {\n                buf.push(this.session.getTextRange(ranges[i]));\n            }\n            var nl = this.session.getDocument().getNewLineCharacter();\n            text = buf.join(nl);\n            if (text.length == (buf.length - 1) * nl.length)\n                text = \"\";\n        } else if (!this.selection.isEmpty()) {\n            text = this.session.getTextRange(this.getSelectionRange());\n        }\n        return text;\n    };\n\n    /**\n     * @param e\n     * @param {Anchor} anchor\n     * @this {Editor}\n     */\n    this.$checkMultiselectChange = function(e, anchor) {\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var range = this.multiSelect.ranges[0];\n            if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)\n                return;\n            var pos = anchor == this.multiSelect.anchor\n                ? range.cursor == range.start ? range.end : range.start\n                : range.cursor;\n            if (pos.row != anchor.row\n                || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column)\n                this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());\n            else\n                this.multiSelect.mergeOverlappingRanges();\n        }\n    };\n\n    /**\n     * Finds and selects all the occurrences of `needle`.\n     * @param {String} [needle] The text to find\n     * @param {Partial<import(\"../ace-internal\").Ace.SearchOptions>} [options] The search options\n     * @param {Boolean} [additive] keeps\n     *\n     * @returns {Number} The cumulative count of all found matches\n     * @this {Editor}\n     **/\n    this.findAll = function(needle, options, additive) {\n        options = options || {};\n        options.needle = needle || options.needle;\n        if (options.needle == undefined) {\n            var range = this.selection.isEmpty()\n                ? this.selection.getWordRange()\n                : this.selection.getRange();\n            options.needle = this.session.getTextRange(range);\n        }\n        this.$search.set(options);\n\n        var ranges = this.$search.findAll(this.session);\n        if (!ranges.length)\n            return 0;\n\n        var selection = this.multiSelect;\n\n        if (!additive)\n            selection.toSingleRange(ranges[0]);\n\n        for (var i = ranges.length; i--; )\n            selection.addRange(ranges[i], true);\n\n        // keep old selection as primary if possible\n        if (range && selection.rangeList.rangeAtPoint(range.start))\n            selection.addRange(range, true);\n\n        return ranges.length;\n    };\n\n    /**\n     * Adds a cursor above or below the active cursor.\n     *\n     * @param {Number} dir The direction of lines to select: -1 for up, 1 for down\n     * @param {Boolean} [skip] If `true`, removes the active selection range\n     *\n     * @this {Editor}\n     */\n    this.selectMoreLines = function(dir, skip) {\n        var range = this.selection.toOrientedRange();\n        var isBackwards = range.cursor == range.end;\n\n        var screenLead = this.session.documentToScreenPosition(range.cursor);\n        if (this.selection.$desiredColumn)\n            screenLead.column = this.selection.$desiredColumn;\n\n        var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);\n\n        if (!range.isEmpty()) {\n            var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);\n            var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);\n        } else {\n            var anchor = lead;\n        }\n\n        if (isBackwards) {\n            /**@type {Range & {desiredColumn?: number}}*/\n            var newRange = Range.fromPoints(lead, anchor);\n            newRange.cursor = newRange.start;\n        } else {\n            /**@type {Range & {desiredColumn?: number}}*/\n            var newRange = Range.fromPoints(anchor, lead);\n            newRange.cursor = newRange.end;\n        }\n\n        newRange.desiredColumn = screenLead.column;\n        if (!this.selection.inMultiSelectMode) {\n            this.selection.addRange(range);\n        } else {\n            if (skip)\n                var toRemove = range.cursor;\n        }\n\n        this.selection.addRange(newRange);\n        if (toRemove)\n            this.selection.substractPoint(toRemove);\n    };\n\n    /**\n     * Transposes the selected ranges.\n     * @param {Number} dir The direction to rotate selections\n     * @this {Editor}\n     **/\n    this.transposeSelections = function(dir) {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var all = sel.ranges;\n\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            if (range.isEmpty()) {\n                let tmp = session.getWordRange(range.start.row, range.start.column);\n                range.start.row = tmp.start.row;\n                range.start.column = tmp.start.column;\n                range.end.row = tmp.end.row;\n                range.end.column = tmp.end.column;\n            }\n        }\n        sel.mergeOverlappingRanges();\n\n        var words = [];\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            words.unshift(session.getTextRange(range));\n        }\n\n        if (dir < 0)\n            words.unshift(words.pop());\n        else\n            words.push(words.shift());\n\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            var tmp = range.clone();\n            session.replace(range, words[i]);\n            range.start.row = tmp.start.row;\n            range.start.column = tmp.start.column;\n        }\n        sel.fromOrientedRange(sel.ranges[0]);\n    };\n\n    /**\n     * Finds the next occurrence of text in an active selection and adds it to the selections.\n     * @param {Number} dir The direction of lines to select: -1 for up, 1 for down\n     * @param {Boolean} [skip] If `true`, removes the active selection range\n     * @param {Boolean} [stopAtFirst]\n     * @this {Editor}\n     **/\n    this.selectMore = function(dir, skip, stopAtFirst) {\n        var session = this.session;\n        var sel = session.multiSelect;\n\n        var range = sel.toOrientedRange();\n        if (range.isEmpty()) {\n            range = session.getWordRange(range.start.row, range.start.column);\n            range.cursor = dir == -1 ? range.start : range.end;\n            this.multiSelect.addRange(range);\n            if (stopAtFirst)\n                return;\n        }\n        var needle = session.getTextRange(range);\n\n        var newRange = find(session, needle, dir);\n        if (newRange) {\n            newRange.cursor = dir == -1 ? newRange.start : newRange.end;\n            this.session.unfold(newRange);\n            this.multiSelect.addRange(newRange);\n            this.renderer.scrollCursorIntoView(null, 0.5);\n        }\n        if (skip)\n            this.multiSelect.substractPoint(range.cursor);\n    };\n\n    /**\n     * Aligns the cursors or selected text.\n     * @this {Editor}\n     **/\n    this.alignCursors = function() {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var ranges = sel.ranges;\n        // filter out ranges on same row\n        var row = -1;\n        var sameRowRanges = ranges.filter(function(r) {\n            if (r.cursor.row == row)\n                return true;\n            row = r.cursor.row;\n        });\n\n        if (!ranges.length || sameRowRanges.length == ranges.length - 1) {\n            var range = this.selection.getRange();\n            var fr = range.start.row, lr = range.end.row;\n            var guessRange = fr == lr;\n            if (guessRange) {\n                var max = this.session.getLength();\n                var line;\n                do {\n                    line = this.session.getLine(lr);\n                } while (/[=:]/.test(line) && ++lr < max);\n                do {\n                    line = this.session.getLine(fr);\n                } while (/[=:]/.test(line) && --fr > 0);\n\n                if (fr < 0) fr = 0;\n                if (lr >= max) lr = max - 1;\n            }\n            var lines = this.session.removeFullLines(fr, lr);\n            lines = this.$reAlignText(lines, guessRange);\n            this.session.insert({row: fr, column: 0}, lines.join(\"\\n\") + \"\\n\");\n            if (!guessRange) {\n                range.start.column = 0;\n                range.end.column = lines[lines.length - 1].length;\n            }\n            this.selection.setRange(range);\n        } else {\n            sameRowRanges.forEach(function(r) {\n                sel.substractPoint(r.cursor);\n            });\n\n            var maxCol = 0;\n            var minSpace = Infinity;\n            var spaceOffsets = ranges.map(function(r) {\n                var p = r.cursor;\n                var line = session.getLine(p.row);\n                var spaceOffset = line.substr(p.column).search(/\\S/g);\n                if (spaceOffset == -1)\n                    spaceOffset = 0;\n\n                if (p.column > maxCol)\n                    maxCol = p.column;\n                if (spaceOffset < minSpace)\n                    minSpace = spaceOffset;\n                return spaceOffset;\n            });\n            ranges.forEach(function(r, i) {\n                var p = r.cursor;\n                var l = maxCol - p.column;\n                var d = spaceOffsets[i] - minSpace;\n                if (l > d)\n                    session.insert(p, lang.stringRepeat(\" \", l - d));\n                else\n                    session.remove(new Range(p.row, p.column, p.row, p.column - l + d));\n\n                r.start.column = r.end.column = maxCol;\n                r.start.row = r.end.row = p.row;\n                r.cursor = r.end;\n            });\n            sel.fromOrientedRange(ranges[0]);\n            this.renderer.updateCursor();\n            this.renderer.updateBackMarkers();\n        }\n    };\n\n    /**\n     * @param {string[]} lines\n     * @param {boolean} [forceLeft]\n     * @return {*}\n     * @this {Editor}\n     */\n    this.$reAlignText = function(lines, forceLeft) {\n        var isLeftAligned = true, isRightAligned = true;\n        var startW, textW, endW;\n\n        return lines.map(function(line) {\n            var m = line.match(/(\\s*)(.*?)(\\s*)([=:].*)/);\n            if (!m)\n                return [line];\n\n            if (startW == null) {\n                startW = m[1].length;\n                textW = m[2].length;\n                endW = m[3].length;\n                return m;\n            }\n\n            if (startW + textW + endW != m[1].length + m[2].length + m[3].length)\n                isRightAligned = false;\n            if (startW != m[1].length)\n                isLeftAligned = false;\n\n            if (startW > m[1].length)\n                startW = m[1].length;\n            if (textW < m[2].length)\n                textW = m[2].length;\n            if (endW > m[3].length)\n                endW = m[3].length;\n\n            return m;\n        }).map(forceLeft ? alignLeft :\n            isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);\n\n        function spaces(n) {\n            return lang.stringRepeat(\" \", n);\n        }\n\n        function alignLeft(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(textW - m[2].length + endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function alignRight(m) {\n            return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function unAlign(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n    };\n}).call(Editor.prototype);\n\n\n/** @param {Point} p1  @param {Point} p2 */\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\n\n\n/**\n * patch\n * adds multicursor support to a session\n * @this {Editor}\n * @type {(e: any) => void}\n */\nexports.onSessionChange = function(e) {\n    var session = e.session;\n    if (session && !session.multiSelect) {\n        session.$selectionMarkers = [];\n        session.selection.$initRangeList();\n        session.multiSelect = session.selection;\n    }\n    this.multiSelect = session && session.multiSelect;\n\n    var oldSession = e.oldSession;\n    if (oldSession) {\n        oldSession.multiSelect.off(\"addRange\", this.$onAddRange);\n        oldSession.multiSelect.off(\"removeRange\", this.$onRemoveRange);\n        oldSession.multiSelect.off(\"multiSelect\", this.$onMultiSelect);\n        oldSession.multiSelect.off(\"singleSelect\", this.$onSingleSelect);\n        oldSession.multiSelect.lead.off(\"change\", this.$checkMultiselectChange);\n        oldSession.multiSelect.anchor.off(\"change\", this.$checkMultiselectChange);\n    }\n\n    if (session) {\n        session.multiSelect.on(\"addRange\", this.$onAddRange);\n        session.multiSelect.on(\"removeRange\", this.$onRemoveRange);\n        session.multiSelect.on(\"multiSelect\", this.$onMultiSelect);\n        session.multiSelect.on(\"singleSelect\", this.$onSingleSelect);\n        session.multiSelect.lead.on(\"change\", this.$checkMultiselectChange);\n        session.multiSelect.anchor.on(\"change\", this.$checkMultiselectChange);\n    }\n\n    if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {\n        if (session.selection.inMultiSelectMode)\n            this.$onMultiSelect();\n        else\n            this.$onSingleSelect();\n    }\n};\n\n// MultiSelect(editor)\n// adds multiple selection support to the editor\n// (note: should be called only once for each editor instance)\n/**\n * @param {Editor} editor\n */\nfunction MultiSelect(editor) {\n    if (editor.$multiselectOnSessionChange)\n        return;\n    editor.$onAddRange = editor.$onAddRange.bind(editor);\n    editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);\n    editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);\n    editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);\n    editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);\n    editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);\n\n    editor.$multiselectOnSessionChange(editor);\n    editor.on(\"changeSession\", editor.$multiselectOnSessionChange);\n\n    editor.on(\"mousedown\", onMouseDown);\n    editor.commands.addCommands(commands.defaultCommands);\n\n    addAltCursorListeners(editor);\n}\n\n/**\n * @param {Editor} editor\n */\nfunction addAltCursorListeners(editor){\n    if (!editor.textInput) return;\n    var el = editor.textInput.getElement();\n    var altCursor = false;\n    event.addListener(el, \"keydown\", function(e) {\n        var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);\n        if (editor.$blockSelectEnabled && altDown) {\n            if (!altCursor) {\n                editor.renderer.setMouseCursor(\"crosshair\");\n                altCursor = true;\n            }\n        } else if (altCursor) {\n            reset();\n        }\n    }, editor);\n\n    event.addListener(el, \"keyup\", reset, editor);\n    event.addListener(el, \"blur\", reset, editor);\n    function reset(e) {\n        if (altCursor) {\n            editor.renderer.setMouseCursor(\"\");\n            altCursor = false;\n            // TODO disable menu popping up\n            // e && e.preventDefault()\n        }\n    }\n}\n\nexports.MultiSelect = MultiSelect;\n\n\n(__webpack_require__(/*! ./config */ \"./node_modules/ace-code/src/config.js\").defineOptions)(Editor.prototype, \"editor\", {\n    enableMultiselect: {\n        /**\n         * @param {boolean} val\n         * @this {Editor}\n         */\n        set: function(val) {\n            MultiSelect(this);\n            if (val) {\n                this.on(\"mousedown\", onMouseDown);\n            } else {\n                this.off(\"mousedown\", onMouseDown);\n            }\n        },\n        value: true\n    },\n    enableBlockSelect: {\n        set: function(val) {\n            this.$blockSelectEnabled = val;\n        },\n        value: true\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL211bHRpX3NlbGVjdC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBLGFBQWEsMkJBQTJCO0FBQ3hDLGFBQWEscUNBQXFDO0FBQ2xELGFBQWEsaURBQWlEO0FBQzlEOztBQUVBLGdCQUFnQixnR0FBaUM7QUFDakQsWUFBWSxrRkFBd0I7QUFDcEMsZ0JBQWdCLDhGQUFnQztBQUNoRCxrQkFBa0Isa0lBQW1EO0FBQ3JFLFlBQVksbUJBQU8sQ0FBQyw2REFBYTtBQUNqQyxXQUFXLG1CQUFPLENBQUMsMkRBQVk7QUFDL0IsZUFBZSxtQkFBTyxDQUFDLHVHQUFrQztBQUN6RCxnQkFBZ0I7O0FBRWhCO0FBQ0EsYUFBYSxxRkFBMEI7QUFDdkM7O0FBRUE7QUFDQSxXQUFXLGFBQWE7QUFDeEIsV0FBVyxpQkFBaUI7QUFDNUIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLHNHQUFxQztBQUN2RDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWMsa0JBQWtCO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxTQUFTO0FBQ3hCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPLG1DQUFtQyxZQUFZO0FBQ3JFLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxhQUFhO0FBQy9DOztBQUVBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDQUFxQyxLQUFLO0FBQzFDO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUMsZ0JBQWdCOztBQUVyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLElBQUk7QUFDM0M7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEMsZUFBZSxtQkFBbUI7QUFDbEMsZUFBZSxTQUFTO0FBQ3hCLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFlBQVk7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQSxhQUFhLHFGQUEwQjtBQUN2Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVMsVUFBVTtBQUNsQyxpQkFBaUIsU0FBUztBQUMxQixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTLFVBQVU7QUFDbEMsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxVQUFVLFFBQVEsS0FBSztBQUN0QyxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLEtBQUs7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxzREFBc0Q7QUFDdEQsVUFBVTtBQUNWLG1FQUFtRTtBQUNuRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsS0FBSztBQUNwQixlQUFlLFFBQVE7QUFDdkIsZUFBZSxhQUFhO0FBQzVCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdURBQXVELHdCQUF3Qjs7QUFFL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsSUFBSTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSx3QkFBd0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbUJBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsc0RBQXNEO0FBQ3JFLGVBQWUsU0FBUztBQUN4QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLG9DQUFvQyxLQUFLO0FBQ3pDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEI7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLFNBQVMsd0JBQXdCO0FBQ3ZEO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysc0JBQXNCLFNBQVMsd0JBQXdCO0FBQ3ZEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLEtBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsS0FBSztBQUN0QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLEtBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsU0FBUztBQUN4QixlQUFlLFNBQVM7QUFDeEIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0Esa0JBQWtCOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG1CQUFtQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxVQUFVO0FBQ3pCLGVBQWUsU0FBUztBQUN4QixnQkFBZ0I7QUFDaEIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7O0FBR0QsWUFBWSxPQUFPLFlBQVksT0FBTztBQUN0QztBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixVQUFVO0FBQ1Y7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1COzs7QUFHbkIsNEZBQWlDO0FBQ2pDO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL211bHRpX3NlbGVjdC5qcz9jZjBjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vYW5jaG9yXCIpLkFuY2hvcn0gQW5jaG9yXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludH0gUG9pbnRcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlNjcmVlbkNvb3JkaW5hdGVzfSBTY3JlZW5Db29yZGluYXRlc1xuICovXG5cbnZhciBSYW5nZUxpc3QgPSByZXF1aXJlKFwiLi9yYW5nZV9saXN0XCIpLlJhbmdlTGlzdDtcbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuL3JhbmdlXCIpLlJhbmdlO1xudmFyIFNlbGVjdGlvbiA9IHJlcXVpcmUoXCIuL3NlbGVjdGlvblwiKS5TZWxlY3Rpb247XG52YXIgb25Nb3VzZURvd24gPSByZXF1aXJlKFwiLi9tb3VzZS9tdWx0aV9zZWxlY3RfaGFuZGxlclwiKS5vbk1vdXNlRG93bjtcbnZhciBldmVudCA9IHJlcXVpcmUoXCIuL2xpYi9ldmVudFwiKTtcbnZhciBsYW5nID0gcmVxdWlyZShcIi4vbGliL2xhbmdcIik7XG52YXIgY29tbWFuZHMgPSByZXF1aXJlKFwiLi9jb21tYW5kcy9tdWx0aV9zZWxlY3RfY29tbWFuZHNcIik7XG5leHBvcnRzLmNvbW1hbmRzID0gY29tbWFuZHMuZGVmYXVsdENvbW1hbmRzLmNvbmNhdChjb21tYW5kcy5tdWx0aVNlbGVjdENvbW1hbmRzKTtcblxuLy8gVG9kbzogc2Vzc2lvbi5maW5kIG9yIGVkaXRvci5maW5kVm9sYXRpbGUgdGhhdCByZXR1cm5zIHJhbmdlXG52YXIgU2VhcmNoID0gcmVxdWlyZShcIi4vc2VhcmNoXCIpLlNlYXJjaDtcbnZhciBzZWFyY2ggPSBuZXcgU2VhcmNoKCk7XG5cbi8qKlxuICogQHBhcmFtIHtFZGl0U2Vzc2lvbn0gc2Vzc2lvblxuICogQHBhcmFtIHtzdHJpbmcgfCBSZWdFeHB9IG5lZWRsZVxuICogQHBhcmFtIHtudW1iZXJ9IGRpclxuICovXG5mdW5jdGlvbiBmaW5kKHNlc3Npb24sIG5lZWRsZSwgZGlyKSB7XG4gICAgc2VhcmNoLiRvcHRpb25zLndyYXAgPSB0cnVlO1xuICAgIHNlYXJjaC4kb3B0aW9ucy5uZWVkbGUgPSBuZWVkbGU7XG4gICAgc2VhcmNoLiRvcHRpb25zLmJhY2t3YXJkcyA9IGRpciA9PSAtMTtcbiAgICByZXR1cm4gc2VhcmNoLmZpbmQoc2Vzc2lvbik7XG59XG5cbi8vIGV4dGVuZCBFZGl0U2Vzc2lvblxudmFyIEVkaXRTZXNzaW9uID0gcmVxdWlyZShcIi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9uO1xuKGZ1bmN0aW9uKCkge1xuICAgIC8qKlxuICAgICAqIEB0aGlzIHtFZGl0U2Vzc2lvbn1cbiAgICAgKi9cbiAgICB0aGlzLmdldFNlbGVjdGlvbk1hcmtlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHNlbGVjdGlvbk1hcmtlcnM7XG4gICAgfTtcbn0pLmNhbGwoRWRpdFNlc3Npb24ucHJvdG90eXBlKTtcblxuLy8gZXh0ZW5kIFNlbGVjdGlvblxuKGZ1bmN0aW9uKCkge1xuICAgIC8vIGxpc3Qgb2YgcmFuZ2VzIGluIHJldmVyc2UgYWRkaXRpb24gb3JkZXJcbiAgICB0aGlzLnJhbmdlcyA9IG51bGw7XG5cbiAgICAvLyBhdXRvbWF0aWNhbGx5IHNvcnRlZCBsaXN0IG9mIHJhbmdlc1xuICAgIC8qKkB0eXBlIHtSYW5nZUxpc3QgfCBudWxsfSAqL1xuICAgIHRoaXMucmFuZ2VMaXN0ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSByYW5nZSB0byBhIHNlbGVjdGlvbiBieSBlbnRlcmluZyBtdWx0aXNlbGVjdCBtb2RlLCBpZiBuZWNlc3NhcnkuXG4gICAgICogQHBhcmFtIHtSYW5nZX0gcmFuZ2UgVGhlIG5ldyByYW5nZSB0byBhZGRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59ICRibG9ja0NoYW5nZUV2ZW50cyBXaGV0aGVyIG9yIG5vdCB0byBibG9jayBjaGFuZ2luZyBldmVudHNcbiAgICAgKiBAdGhpcyB7U2VsZWN0aW9ufVxuICAgICAqKi9cbiAgICB0aGlzLmFkZFJhbmdlID0gZnVuY3Rpb24ocmFuZ2UsICRibG9ja0NoYW5nZUV2ZW50cykge1xuICAgICAgICBpZiAoIXJhbmdlKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmICghdGhpcy5pbk11bHRpU2VsZWN0TW9kZSAmJiB0aGlzLnJhbmdlQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHZhciBvbGRSYW5nZSA9IHRoaXMudG9PcmllbnRlZFJhbmdlKCk7XG4gICAgICAgICAgICB0aGlzLnJhbmdlTGlzdC5hZGQob2xkUmFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5yYW5nZUxpc3QuYWRkKHJhbmdlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJhbmdlTGlzdC5yYW5nZXMubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlTGlzdC5yZW1vdmVBbGwoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGJsb2NrQ2hhbmdlRXZlbnRzIHx8IHRoaXMuZnJvbU9yaWVudGVkUmFuZ2UocmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yYW5nZUxpc3QucmVtb3ZlQWxsKCk7XG4gICAgICAgICAgICB0aGlzLnJhbmdlTGlzdC5hZGQob2xkUmFuZ2UpO1xuICAgICAgICAgICAgdGhpcy4kb25BZGRSYW5nZShvbGRSYW5nZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJhbmdlLmN1cnNvcilcbiAgICAgICAgICAgIHJhbmdlLmN1cnNvciA9IHJhbmdlLmVuZDtcblxuICAgICAgICB2YXIgcmVtb3ZlZCA9IHRoaXMucmFuZ2VMaXN0LmFkZChyYW5nZSk7XG5cbiAgICAgICAgdGhpcy4kb25BZGRSYW5nZShyYW5nZSk7XG5cbiAgICAgICAgaWYgKHJlbW92ZWQubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy4kb25SZW1vdmVSYW5nZShyZW1vdmVkKTtcblxuICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50ID4gMSAmJiAhdGhpcy5pbk11bHRpU2VsZWN0TW9kZSkge1xuICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwibXVsdGlTZWxlY3RcIik7XG4gICAgICAgICAgICB0aGlzLmluTXVsdGlTZWxlY3RNb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi4kdW5kb1NlbGVjdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yYW5nZUxpc3QuYXR0YWNoKHRoaXMuc2Vzc2lvbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJGJsb2NrQ2hhbmdlRXZlbnRzIHx8IHRoaXMuZnJvbU9yaWVudGVkUmFuZ2UocmFuZ2UpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1JhbmdlfSBbcmFuZ2VdXG4gICAgICogQHRoaXMge1NlbGVjdGlvbn1cbiAgICAgKiovXG4gICAgdGhpcy50b1NpbmdsZVJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICAgICAgcmFuZ2UgPSByYW5nZSB8fCB0aGlzLnJhbmdlc1swXTtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSB0aGlzLnJhbmdlTGlzdC5yZW1vdmVBbGwoKTtcbiAgICAgICAgaWYgKHJlbW92ZWQubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy4kb25SZW1vdmVSYW5nZShyZW1vdmVkKTtcblxuICAgICAgICByYW5nZSAmJiB0aGlzLmZyb21PcmllbnRlZFJhbmdlKHJhbmdlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIFJhbmdlIGNvbnRhaW5pbmcgcG9zIChpZiBpdCBleGlzdHMpLlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvcyBUaGUgcG9zaXRpb24gdG8gcmVtb3ZlLCBhcyBhIGB7cm93LCBjb2x1bW59YCBvYmplY3RcbiAgICAgKiBAdGhpcyB7U2VsZWN0aW9ufVxuICAgICAqKi9cbiAgICB0aGlzLnN1YnN0cmFjdFBvaW50ID0gZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gdGhpcy5yYW5nZUxpc3Quc3Vic3RyYWN0UG9pbnQocG9zKTtcbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuJG9uUmVtb3ZlUmFuZ2UocmVtb3ZlZCk7XG4gICAgICAgICAgICByZXR1cm4gcmVtb3ZlZFswXTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNZXJnZXMgb3ZlcmxhcHBpbmcgcmFuZ2VzIGVuc3VyaW5nIGNvbnNpc3RlbmN5IGFmdGVyIGNoYW5nZXNcbiAgICAgKiBAdGhpcyB7U2VsZWN0aW9ufVxuICAgICAqKi9cbiAgICB0aGlzLm1lcmdlT3ZlcmxhcHBpbmdSYW5nZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSB0aGlzLnJhbmdlTGlzdC5tZXJnZSgpO1xuICAgICAgICBpZiAocmVtb3ZlZC5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLiRvblJlbW92ZVJhbmdlKHJlbW92ZWQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1JhbmdlfSByYW5nZVxuICAgICAqIEB0aGlzIHtTZWxlY3Rpb259XG4gICAgICovXG4gICAgdGhpcy4kb25BZGRSYW5nZSA9IGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIHRoaXMucmFuZ2VDb3VudCA9IHRoaXMucmFuZ2VMaXN0LnJhbmdlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMucmFuZ2VzLnVuc2hpZnQocmFuZ2UpO1xuICAgICAgICB0aGlzLl9zaWduYWwoXCJhZGRSYW5nZVwiLCB7cmFuZ2U6IHJhbmdlfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UmFuZ2VbXX0gcmVtb3ZlZFxuICAgICAqIEB0aGlzIHtTZWxlY3Rpb259XG4gICAgICovXG4gICAgdGhpcy4kb25SZW1vdmVSYW5nZSA9IGZ1bmN0aW9uKHJlbW92ZWQpIHtcbiAgICAgICAgdGhpcy5yYW5nZUNvdW50ID0gdGhpcy5yYW5nZUxpc3QucmFuZ2VzLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMucmFuZ2VDb3VudCA9PSAxICYmIHRoaXMuaW5NdWx0aVNlbGVjdE1vZGUpIHtcbiAgICAgICAgICAgIHZhciBsYXN0UmFuZ2UgPSB0aGlzLnJhbmdlTGlzdC5yYW5nZXMucG9wKCk7XG4gICAgICAgICAgICByZW1vdmVkLnB1c2gobGFzdFJhbmdlKTtcbiAgICAgICAgICAgIHRoaXMucmFuZ2VDb3VudCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gcmVtb3ZlZC5sZW5ndGg7IGktLTsgKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnJhbmdlcy5pbmRleE9mKHJlbW92ZWRbaV0pO1xuICAgICAgICAgICAgdGhpcy5yYW5nZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NpZ25hbChcInJlbW92ZVJhbmdlXCIsIHtyYW5nZXM6IHJlbW92ZWR9KTtcblxuICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50ID09PSAwICYmIHRoaXMuaW5NdWx0aVNlbGVjdE1vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5NdWx0aVNlbGVjdE1vZGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX3NpZ25hbChcInNpbmdsZVNlbGVjdFwiKTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi4kdW5kb1NlbGVjdCA9IHRydWU7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IHBvc3NpYmxlIGJ1Zywgbm8gYXJncyBpbiBwYXJhbWV0ZXJzXG4gICAgICAgICAgICB0aGlzLnJhbmdlTGlzdC5kZXRhY2godGhpcy5zZXNzaW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxhc3RSYW5nZSA9IGxhc3RSYW5nZSB8fCB0aGlzLnJhbmdlc1swXTtcbiAgICAgICAgaWYgKGxhc3RSYW5nZSAmJiAhbGFzdFJhbmdlLmlzRXF1YWwodGhpcy5nZXRSYW5nZSgpKSlcbiAgICAgICAgICAgIHRoaXMuZnJvbU9yaWVudGVkUmFuZ2UobGFzdFJhbmdlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYWRkcyBtdWx0aWN1cnNvciBzdXBwb3J0IHRvIHNlbGVjdGlvblxuICAgICAqIEB0aGlzIHtTZWxlY3Rpb259XG4gICAgICovXG4gICAgdGhpcy4kaW5pdFJhbmdlTGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5yYW5nZUxpc3QpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy5yYW5nZUxpc3QgPSBuZXcgUmFuZ2VMaXN0KCk7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gW107XG4gICAgICAgIHRoaXMucmFuZ2VDb3VudCA9IDA7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb25jYXRlbmF0aW9uIG9mIGFsbCB0aGUgcmFuZ2VzLlxuICAgICAqIEByZXR1cm5zIHtSYW5nZVtdfVxuICAgICAqIEB0aGlzIHtTZWxlY3Rpb259XG4gICAgICoqL1xuICAgIHRoaXMuZ2V0QWxsUmFuZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlQ291bnQgPyB0aGlzLnJhbmdlTGlzdC5yYW5nZXMuY29uY2F0KCkgOiBbdGhpcy5nZXRSYW5nZSgpXTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGFsbCB0aGUgcmFuZ2VzIGludG8gbGluZXMuXG4gICAgICogQHRoaXMge1NlbGVjdGlvbn1cbiAgICAgKiovXG4gICAgdGhpcy5zcGxpdEludG9MaW5lcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJhbmdlcyA9IHRoaXMucmFuZ2VzLmxlbmd0aCA/IHRoaXMucmFuZ2VzIDogW3RoaXMuZ2V0UmFuZ2UoKV07XG4gICAgICAgIHZhciBuZXdSYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgIHZhciByb3cgPSByYW5nZS5zdGFydC5yb3c7XG4gICAgICAgICAgICB2YXIgZW5kUm93ID0gcmFuZ2UuZW5kLnJvdztcbiAgICAgICAgICAgIGlmIChyb3cgPT09IGVuZFJvdykge1xuICAgICAgICAgICAgICAgIG5ld1Jhbmdlcy5wdXNoKHJhbmdlLmNsb25lKCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdSYW5nZXMucHVzaChuZXcgUmFuZ2Uocm93LCByYW5nZS5zdGFydC5jb2x1bW4sIHJvdywgdGhpcy5zZXNzaW9uLmdldExpbmUocm93KS5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytyb3cgPCBlbmRSb3cpXG4gICAgICAgICAgICAgICAgICAgIG5ld1Jhbmdlcy5wdXNoKHRoaXMuZ2V0TGluZVJhbmdlKHJvdywgdHJ1ZSkpO1xuICAgICAgICAgICAgICAgIG5ld1Jhbmdlcy5wdXNoKG5ldyBSYW5nZShlbmRSb3csIDAsIGVuZFJvdywgcmFuZ2UuZW5kLmNvbHVtbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgPT0gMCAmJiAhdGhpcy5pc0JhY2t3YXJkcygpKVxuICAgICAgICAgICAgICAgIG5ld1JhbmdlcyA9IG5ld1Jhbmdlcy5yZXZlcnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b1NpbmdsZVJhbmdlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSBuZXdSYW5nZXMubGVuZ3RoOyBpLS07KVxuICAgICAgICAgICAgdGhpcy5hZGRSYW5nZShuZXdSYW5nZXNbaV0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7U2VsZWN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuam9pblNlbGVjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByYW5nZXMgPSB0aGlzLnJhbmdlTGlzdC5yYW5nZXM7XG4gICAgICAgIHZhciBsYXN0UmFuZ2UgPSByYW5nZXNbcmFuZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICB2YXIgcmFuZ2UgPSBSYW5nZS5mcm9tUG9pbnRzKHJhbmdlc1swXS5zdGFydCwgbGFzdFJhbmdlLmVuZCk7XG5cbiAgICAgICAgdGhpcy50b1NpbmdsZVJhbmdlKCk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2UocmFuZ2UsIGxhc3RSYW5nZS5jdXJzb3IgPT0gbGFzdFJhbmdlLnN0YXJ0KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHRoaXMge1NlbGVjdGlvbn1cbiAgICAgKiovXG4gICAgdGhpcy50b2dnbGVCbG9ja1NlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmFuZ2VDb3VudCA+IDEpIHtcbiAgICAgICAgICAgIHZhciByYW5nZXMgPSB0aGlzLnJhbmdlTGlzdC5yYW5nZXM7XG4gICAgICAgICAgICB2YXIgbGFzdFJhbmdlID0gcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IFJhbmdlLmZyb21Qb2ludHMocmFuZ2VzWzBdLnN0YXJ0LCBsYXN0UmFuZ2UuZW5kKTtcblxuICAgICAgICAgICAgdGhpcy50b1NpbmdsZVJhbmdlKCk7XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlLCBsYXN0UmFuZ2UuY3Vyc29yID09IGxhc3RSYW5nZS5zdGFydCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5zZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLmN1cnNvcik7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5zZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLmFuY2hvcik7XG5cbiAgICAgICAgICAgIHZhciByZWN0U2VsID0gdGhpcy5yZWN0YW5ndWxhclJhbmdlQmxvY2soY3Vyc29yLCBhbmNob3IpO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBwb3NzaWJsZSBidWdcbiAgICAgICAgICAgIHJlY3RTZWwuZm9yRWFjaCh0aGlzLmFkZFJhbmdlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGxpc3Qgb2YgcmFuZ2VzIGNvbXBvc2luZyByZWN0YW5ndWxhciBibG9jayBvbiB0aGUgc2NyZWVuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1NjcmVlbkNvb3JkaW5hdGVzfSBzY3JlZW5DdXJzb3IgVGhlIGN1cnNvciB0byB1c2VcbiAgICAgKiBAcGFyYW0ge1NjcmVlbkNvb3JkaW5hdGVzfSBzY3JlZW5BbmNob3IgVGhlIGFuY2hvciB0byB1c2VcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtpbmNsdWRlRW1wdHlMaW5lc10gSWYgdHJ1ZSwgdGhpcyBpbmNsdWRlcyByYW5nZXMgaW5zaWRlIHRoZSBibG9jayB3aGljaCBhcmUgZW1wdHkgZHVlIHRvIGNsaXBwaW5nXG4gICAgICogQHJldHVybnMge1JhbmdlW119XG4gICAgICogQHRoaXMge1NlbGVjdGlvbn1cbiAgICAgKiovXG4gICAgdGhpcy5yZWN0YW5ndWxhclJhbmdlQmxvY2sgPSBmdW5jdGlvbihzY3JlZW5DdXJzb3IsIHNjcmVlbkFuY2hvciwgaW5jbHVkZUVtcHR5TGluZXMpIHtcbiAgICAgICAgdmFyIHJlY3RTZWwgPSBbXTtcblxuICAgICAgICB2YXIgeEJhY2t3YXJkcyA9IHNjcmVlbkN1cnNvci5jb2x1bW4gPCBzY3JlZW5BbmNob3IuY29sdW1uO1xuICAgICAgICBpZiAoeEJhY2t3YXJkcykge1xuICAgICAgICAgICAgdmFyIHN0YXJ0Q29sdW1uID0gc2NyZWVuQ3Vyc29yLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBlbmRDb2x1bW4gPSBzY3JlZW5BbmNob3IuY29sdW1uO1xuICAgICAgICAgICAgdmFyIHN0YXJ0T2Zmc2V0WCA9IHNjcmVlbkN1cnNvci5vZmZzZXRYO1xuICAgICAgICAgICAgdmFyIGVuZE9mZnNldFggPSBzY3JlZW5BbmNob3Iub2Zmc2V0WDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzdGFydENvbHVtbiA9IHNjcmVlbkFuY2hvci5jb2x1bW47XG4gICAgICAgICAgICB2YXIgZW5kQ29sdW1uID0gc2NyZWVuQ3Vyc29yLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBzdGFydE9mZnNldFggPSBzY3JlZW5BbmNob3Iub2Zmc2V0WDtcbiAgICAgICAgICAgIHZhciBlbmRPZmZzZXRYID0gc2NyZWVuQ3Vyc29yLm9mZnNldFg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgeUJhY2t3YXJkcyA9IHNjcmVlbkN1cnNvci5yb3cgPCBzY3JlZW5BbmNob3Iucm93O1xuICAgICAgICBpZiAoeUJhY2t3YXJkcykge1xuICAgICAgICAgICAgdmFyIHN0YXJ0Um93ID0gc2NyZWVuQ3Vyc29yLnJvdztcbiAgICAgICAgICAgIHZhciBlbmRSb3cgPSBzY3JlZW5BbmNob3Iucm93O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHN0YXJ0Um93ID0gc2NyZWVuQW5jaG9yLnJvdztcbiAgICAgICAgICAgIHZhciBlbmRSb3cgPSBzY3JlZW5DdXJzb3Iucm93O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXJ0Q29sdW1uIDwgMClcbiAgICAgICAgICAgIHN0YXJ0Q29sdW1uID0gMDtcbiAgICAgICAgaWYgKHN0YXJ0Um93IDwgMClcbiAgICAgICAgICAgIHN0YXJ0Um93ID0gMDtcblxuICAgICAgICBpZiAoc3RhcnRSb3cgPT0gZW5kUm93KVxuICAgICAgICAgICAgaW5jbHVkZUVtcHR5TGluZXMgPSB0cnVlO1xuXG4gICAgICAgIHZhciBkb2NFbmQ7XG4gICAgICAgIGZvciAodmFyIHJvdyA9IHN0YXJ0Um93OyByb3cgPD0gZW5kUm93OyByb3crKykge1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gUmFuZ2UuZnJvbVBvaW50cyhcbiAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb24uc2NyZWVuVG9Eb2N1bWVudFBvc2l0aW9uKHJvdywgc3RhcnRDb2x1bW4sIHN0YXJ0T2Zmc2V0WCksXG4gICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihyb3csIGVuZENvbHVtbiwgZW5kT2Zmc2V0WClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAocmFuZ2UuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRvY0VuZCAmJiBpc1NhbWVQb2ludChyYW5nZS5lbmQsIGRvY0VuZCkpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRvY0VuZCA9IHJhbmdlLmVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJhbmdlLmN1cnNvciA9IHhCYWNrd2FyZHMgPyByYW5nZS5zdGFydCA6IHJhbmdlLmVuZDtcbiAgICAgICAgICAgIHJlY3RTZWwucHVzaChyYW5nZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoeUJhY2t3YXJkcylcbiAgICAgICAgICAgIHJlY3RTZWwucmV2ZXJzZSgpO1xuXG4gICAgICAgIGlmICghaW5jbHVkZUVtcHR5TGluZXMpIHtcbiAgICAgICAgICAgIHZhciBlbmQgPSByZWN0U2VsLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB3aGlsZSAocmVjdFNlbFtlbmRdLmlzRW1wdHkoKSAmJiBlbmQgPiAwKVxuICAgICAgICAgICAgICAgIGVuZC0tO1xuICAgICAgICAgICAgaWYgKGVuZCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZWN0U2VsW3N0YXJ0XS5pc0VtcHR5KCkpXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gZW5kOyBpID49IHN0YXJ0OyBpLS0pIHtcbiAgICAgICAgICAgICAgICBpZiAocmVjdFNlbFtpXS5pc0VtcHR5KCkpXG4gICAgICAgICAgICAgICAgICAgIHJlY3RTZWwuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlY3RTZWw7XG4gICAgfTtcbn0pLmNhbGwoU2VsZWN0aW9uLnByb3RvdHlwZSk7XG5cbi8vIGV4dGVuZCBFZGl0b3JcbnZhciBFZGl0b3IgPSByZXF1aXJlKFwiLi9lZGl0b3JcIikuRWRpdG9yO1xuKGZ1bmN0aW9uKCkge1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVcGRhdGVzIHRoZSBjdXJzb3IgYW5kIG1hcmtlciBsYXllcnMuXG4gICAgICogQG1ldGhvZCBFZGl0b3IudXBkYXRlU2VsZWN0aW9uTWFya2Vyc1xuICAgICAqIEB0aGlzIHtFZGl0b3J9XG4gICAgICoqL1xuICAgIHRoaXMudXBkYXRlU2VsZWN0aW9uTWFya2VycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZUN1cnNvcigpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZUJhY2tNYXJrZXJzKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHNlbGVjdGlvbiBhbmQgY3Vyc29yLlxuICAgICAqIEBwYXJhbSB7UmFuZ2UgJiB7bWFya2VyP319IG9yaWVudGVkUmFuZ2UgQSByYW5nZSBjb250YWluaW5nIGEgY3Vyc29yXG4gICAgICogQHJldHVybnMge1JhbmdlICYge21hcmtlcj99fVxuICAgICAqIEB0aGlzIHtFZGl0b3J9XG4gICAgICoqL1xuICAgIHRoaXMuYWRkU2VsZWN0aW9uTWFya2VyID0gZnVuY3Rpb24ob3JpZW50ZWRSYW5nZSkge1xuICAgICAgICBpZiAoIW9yaWVudGVkUmFuZ2UuY3Vyc29yKVxuICAgICAgICAgICAgb3JpZW50ZWRSYW5nZS5jdXJzb3IgPSBvcmllbnRlZFJhbmdlLmVuZDtcblxuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmdldFNlbGVjdGlvblN0eWxlKCk7XG4gICAgICAgIG9yaWVudGVkUmFuZ2UubWFya2VyID0gdGhpcy5zZXNzaW9uLmFkZE1hcmtlcihvcmllbnRlZFJhbmdlLCBcImFjZV9zZWxlY3Rpb25cIiwgc3R5bGUpO1xuXG4gICAgICAgIHRoaXMuc2Vzc2lvbi4kc2VsZWN0aW9uTWFya2Vycy5wdXNoKG9yaWVudGVkUmFuZ2UpO1xuICAgICAgICB0aGlzLnNlc3Npb24uc2VsZWN0aW9uTWFya2VyQ291bnQgPSB0aGlzLnNlc3Npb24uJHNlbGVjdGlvbk1hcmtlcnMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gb3JpZW50ZWRSYW5nZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc2VsZWN0aW9uIG1hcmtlci5cbiAgICAgKiBAcGFyYW0ge1JhbmdlICYge21hcmtlcj99fSByYW5nZSBUaGUgc2VsZWN0aW9uIHJhbmdlIGFkZGVkIHdpdGggW1tFZGl0b3IuYWRkU2VsZWN0aW9uTWFya2VyIGBhZGRTZWxlY3Rpb25NYXJrZXIoKWBdXS5cbiAgICAgKiBAdGhpcyB7RWRpdG9yfVxuICAgICAqKi9cbiAgICB0aGlzLnJlbW92ZVNlbGVjdGlvbk1hcmtlciA9IGZ1bmN0aW9uKHJhbmdlKSB7XG4gICAgICAgIGlmICghcmFuZ2UubWFya2VyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnNlc3Npb24ucmVtb3ZlTWFya2VyKHJhbmdlLm1hcmtlcik7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuc2Vzc2lvbi4kc2VsZWN0aW9uTWFya2Vycy5pbmRleE9mKHJhbmdlKTtcbiAgICAgICAgaWYgKGluZGV4ICE9IC0xKVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLiRzZWxlY3Rpb25NYXJrZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zZWxlY3Rpb25NYXJrZXJDb3VudCA9IHRoaXMuc2Vzc2lvbi4kc2VsZWN0aW9uTWFya2Vycy5sZW5ndGg7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7KFJhbmdlICYge21hcmtlcj99KVtdfSByYW5nZXNcbiAgICAgKiBAdGhpcyB7RWRpdG9yfVxuICAgICAqL1xuICAgIHRoaXMucmVtb3ZlU2VsZWN0aW9uTWFya2VycyA9IGZ1bmN0aW9uKHJhbmdlcykge1xuICAgICAgICB2YXIgbWFya2VyTGlzdCA9IHRoaXMuc2Vzc2lvbi4kc2VsZWN0aW9uTWFya2VycztcbiAgICAgICAgZm9yICh2YXIgaSA9IHJhbmdlcy5sZW5ndGg7IGktLTsgKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICAgICAgICBpZiAoIXJhbmdlLm1hcmtlcilcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmVNYXJrZXIocmFuZ2UubWFya2VyKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IG1hcmtlckxpc3QuaW5kZXhPZihyYW5nZSk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpXG4gICAgICAgICAgICAgICAgbWFya2VyTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zZWxlY3Rpb25NYXJrZXJDb3VudCA9IG1hcmtlckxpc3QubGVuZ3RoO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZVxuICAgICAqIEB0aGlzIHtFZGl0b3J9XG4gICAgICovXG4gICAgdGhpcy4kb25BZGRSYW5nZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5hZGRTZWxlY3Rpb25NYXJrZXIoZS5yYW5nZSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQ3Vyc29yKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQmFja01hcmtlcnMoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGVcbiAgICAgKiBAdGhpcyB7RWRpdG9yfVxuICAgICAqL1xuICAgIHRoaXMuJG9uUmVtb3ZlUmFuZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0aW9uTWFya2VycyhlLnJhbmdlcyk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQ3Vyc29yKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQmFja01hcmtlcnMoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGVcbiAgICAgKiBAdGhpcyB7RWRpdG9yfVxuICAgICAqL1xuICAgIHRoaXMuJG9uTXVsdGlTZWxlY3QgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICh0aGlzLmluTXVsdGlTZWxlY3RNb2RlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmluTXVsdGlTZWxlY3RNb2RlID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnNldFN0eWxlKFwiYWNlX211bHRpc2VsZWN0XCIpO1xuICAgICAgICB0aGlzLmtleUJpbmRpbmcuYWRkS2V5Ym9hcmRIYW5kbGVyKGNvbW1hbmRzLmtleWJvYXJkSGFuZGxlcik7XG4gICAgICAgIHRoaXMuY29tbWFuZHMuc2V0RGVmYXVsdEhhbmRsZXIoXCJleGVjXCIsIHRoaXMuJG9uTXVsdGlTZWxlY3RFeGVjKTtcblxuICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZUN1cnNvcigpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZUJhY2tNYXJrZXJzKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICogQHRoaXMge0VkaXRvcn1cbiAgICAgKi9cbiAgICB0aGlzLiRvblNpbmdsZVNlbGVjdCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbi5tdWx0aVNlbGVjdC5pblZpcnR1YWxNb2RlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmluTXVsdGlTZWxlY3RNb2RlID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy51bnNldFN0eWxlKFwiYWNlX211bHRpc2VsZWN0XCIpO1xuICAgICAgICB0aGlzLmtleUJpbmRpbmcucmVtb3ZlS2V5Ym9hcmRIYW5kbGVyKGNvbW1hbmRzLmtleWJvYXJkSGFuZGxlcik7XG5cbiAgICAgICAgdGhpcy5jb21tYW5kcy5yZW1vdmVEZWZhdWx0SGFuZGxlcihcImV4ZWNcIiwgdGhpcy4kb25NdWx0aVNlbGVjdEV4ZWMpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZUN1cnNvcigpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZUJhY2tNYXJrZXJzKCk7XG4gICAgICAgIHRoaXMuX2VtaXQoXCJjaGFuZ2VTZWxlY3Rpb25cIik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBlXG4gICAgICogQHRoaXMge0VkaXRvcn1cbiAgICAgKi9cbiAgICB0aGlzLiRvbk11bHRpU2VsZWN0RXhlYyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGNvbW1hbmQgPSBlLmNvbW1hbmQ7XG4gICAgICAgIHZhciBlZGl0b3IgPSBlLmVkaXRvcjtcbiAgICAgICAgaWYgKCFlZGl0b3IubXVsdGlTZWxlY3QpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghY29tbWFuZC5tdWx0aVNlbGVjdEFjdGlvbikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbW1hbmQuZXhlYyhlZGl0b3IsIGUuYXJncyB8fCB7fSk7XG4gICAgICAgICAgICBlZGl0b3IubXVsdGlTZWxlY3QuYWRkUmFuZ2UoZWRpdG9yLm11bHRpU2VsZWN0LnRvT3JpZW50ZWRSYW5nZSgpKTtcbiAgICAgICAgICAgIGVkaXRvci5tdWx0aVNlbGVjdC5tZXJnZU92ZXJsYXBwaW5nUmFuZ2VzKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZC5tdWx0aVNlbGVjdEFjdGlvbiA9PSBcImZvckVhY2hcIikge1xuICAgICAgICAgICAgcmVzdWx0ID0gZWRpdG9yLmZvckVhY2hTZWxlY3Rpb24oY29tbWFuZCwgZS5hcmdzKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLm11bHRpU2VsZWN0QWN0aW9uID09IFwiZm9yRWFjaExpbmVcIikge1xuICAgICAgICAgICAgcmVzdWx0ID0gZWRpdG9yLmZvckVhY2hTZWxlY3Rpb24oY29tbWFuZCwgZS5hcmdzLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLm11bHRpU2VsZWN0QWN0aW9uID09IFwic2luZ2xlXCIpIHtcbiAgICAgICAgICAgIGVkaXRvci5leGl0TXVsdGlTZWxlY3RNb2RlKCk7XG4gICAgICAgICAgICByZXN1bHQgPSBjb21tYW5kLmV4ZWMoZWRpdG9yLCBlLmFyZ3MgfHwge30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ID0gY29tbWFuZC5tdWx0aVNlbGVjdEFjdGlvbihlZGl0b3IsIGUuYXJncyB8fCB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgYSBjb21tYW5kIGZvciBlYWNoIHNlbGVjdGlvbiByYW5nZS5cbiAgICAgKiBAcGFyYW0ge2FueX0gY21kIFRoZSBjb21tYW5kIHRvIGV4ZWN1dGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2FyZ3NdIEFueSBhcmd1bWVudHMgZm9yIHRoZSBjb21tYW5kXG4gICAgICogQHBhcmFtIHtPYmplY3R8dHJ1ZX0gW29wdGlvbnNdXG4gICAgICogQHRoaXMge0VkaXRvcn1cbiAgICAgKiovXG4gICAgdGhpcy5mb3JFYWNoU2VsZWN0aW9uID0gZnVuY3Rpb24oY21kLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLmluVmlydHVhbFNlbGVjdGlvbk1vZGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBrZWVwT3JkZXIgPSBvcHRpb25zICYmIG9wdGlvbnMua2VlcE9yZGVyO1xuICAgICAgICB2YXIgJGJ5TGluZXMgPSBvcHRpb25zID09IHRydWUgfHwgb3B0aW9ucyAmJiBvcHRpb25zLiRieUxpbmVzO1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgdmFyIHNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uO1xuICAgICAgICB2YXIgcmFuZ2VMaXN0ID0gc2VsZWN0aW9uLnJhbmdlTGlzdDtcbiAgICAgICAgdmFyIHJhbmdlcyA9IChrZWVwT3JkZXIgPyBzZWxlY3Rpb24gOiByYW5nZUxpc3QpLnJhbmdlcztcbiAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICBpZiAoIXJhbmdlcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gY21kLmV4ZWMgPyBjbWQuZXhlYyh0aGlzLCBhcmdzIHx8IHt9KSA6IGNtZCh0aGlzLCBhcmdzIHx8IHt9KTtcblxuICAgICAgICB2YXIgcmVnID0gc2VsZWN0aW9uLl9ldmVudFJlZ2lzdHJ5O1xuICAgICAgICBzZWxlY3Rpb24uX2V2ZW50UmVnaXN0cnkgPSB7fTtcbiAgICAgICAgdmFyIHRtcFNlbCA9IG5ldyBTZWxlY3Rpb24oc2Vzc2lvbik7XG4gICAgICAgIHRoaXMuaW5WaXJ0dWFsU2VsZWN0aW9uTW9kZSA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSByYW5nZXMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgICAgICBpZiAoJGJ5TGluZXMpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA+IDAgJiYgcmFuZ2VzW2ldLnN0YXJ0LnJvdyA9PSByYW5nZXNbaSAtIDFdLmVuZC5yb3cpXG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRtcFNlbC5mcm9tT3JpZW50ZWRSYW5nZShyYW5nZXNbaV0pO1xuICAgICAgICAgICAgdG1wU2VsLmluZGV4ID0gaTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uID0gc2Vzc2lvbi5zZWxlY3Rpb24gPSB0bXBTZWw7XG4gICAgICAgICAgICB2YXIgY21kUmVzdWx0ID0gY21kLmV4ZWMgPyBjbWQuZXhlYyh0aGlzLCBhcmdzIHx8IHt9KSA6IGNtZCh0aGlzLCBhcmdzIHx8IHt9KTtcbiAgICAgICAgICAgIGlmICghcmVzdWx0ICYmIGNtZFJlc3VsdCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNtZFJlc3VsdDtcbiAgICAgICAgICAgIHRtcFNlbC50b09yaWVudGVkUmFuZ2UocmFuZ2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0bXBTZWwuZGV0YWNoKCk7XG5cbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBzZXNzaW9uLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICAgICAgdGhpcy5pblZpcnR1YWxTZWxlY3Rpb25Nb2RlID0gZmFsc2U7XG4gICAgICAgIHNlbGVjdGlvbi5fZXZlbnRSZWdpc3RyeSA9IHJlZztcbiAgICAgICAgc2VsZWN0aW9uLm1lcmdlT3ZlcmxhcHBpbmdSYW5nZXMoKTtcbiAgICAgICAgaWYgKHNlbGVjdGlvbi5yYW5nZXNbMF0pXG4gICAgICAgICAgICBzZWxlY3Rpb24uZnJvbU9yaWVudGVkUmFuZ2Uoc2VsZWN0aW9uLnJhbmdlc1swXSk7XG5cbiAgICAgICAgdmFyIGFuaW0gPSB0aGlzLnJlbmRlcmVyLiRzY3JvbGxBbmltYXRpb247XG4gICAgICAgIHRoaXMub25DdXJzb3JDaGFuZ2UoKTtcbiAgICAgICAgdGhpcy5vblNlbGVjdGlvbkNoYW5nZSgpO1xuICAgICAgICBpZiAoYW5pbSAmJiBhbmltLmZyb20gPT0gYW5pbS50bylcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYW5pbWF0ZVNjcm9sbGluZyhhbmltLmZyb20pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICogUmVtb3ZlcyBhbGwgdGhlIHNlbGVjdGlvbnMgZXhjZXB0IHRoZSBsYXN0IGFkZGVkIG9uZS5cbiAgICAqIEB0aGlzIHtFZGl0b3J9XG4gICAgKiovXG4gICAgdGhpcy5leGl0TXVsdGlTZWxlY3RNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5pbk11bHRpU2VsZWN0TW9kZSB8fCB0aGlzLmluVmlydHVhbFNlbGVjdGlvbk1vZGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMubXVsdGlTZWxlY3QudG9TaW5nbGVSYW5nZSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAdGhpcyB7RWRpdG9yfVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmdldFNlbGVjdGVkVGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdGV4dCA9IFwiXCI7XG4gICAgICAgIGlmICh0aGlzLmluTXVsdGlTZWxlY3RNb2RlICYmICF0aGlzLmluVmlydHVhbFNlbGVjdGlvbk1vZGUpIHtcbiAgICAgICAgICAgIHZhciByYW5nZXMgPSB0aGlzLm11bHRpU2VsZWN0LnJhbmdlTGlzdC5yYW5nZXM7XG4gICAgICAgICAgICB2YXIgYnVmID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGJ1Zi5wdXNoKHRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2UocmFuZ2VzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmwgPSB0aGlzLnNlc3Npb24uZ2V0RG9jdW1lbnQoKS5nZXROZXdMaW5lQ2hhcmFjdGVyKCk7XG4gICAgICAgICAgICB0ZXh0ID0gYnVmLmpvaW4obmwpO1xuICAgICAgICAgICAgaWYgKHRleHQubGVuZ3RoID09IChidWYubGVuZ3RoIC0gMSkgKiBubC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgdGV4dCA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuc2VsZWN0aW9uLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdGV4dCA9IHRoaXMuc2Vzc2lvbi5nZXRUZXh0UmFuZ2UodGhpcy5nZXRTZWxlY3Rpb25SYW5nZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGVcbiAgICAgKiBAcGFyYW0ge0FuY2hvcn0gYW5jaG9yXG4gICAgICogQHRoaXMge0VkaXRvcn1cbiAgICAgKi9cbiAgICB0aGlzLiRjaGVja011bHRpc2VsZWN0Q2hhbmdlID0gZnVuY3Rpb24oZSwgYW5jaG9yKSB7XG4gICAgICAgIGlmICh0aGlzLmluTXVsdGlTZWxlY3RNb2RlICYmICF0aGlzLmluVmlydHVhbFNlbGVjdGlvbk1vZGUpIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHRoaXMubXVsdGlTZWxlY3QucmFuZ2VzWzBdO1xuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlTZWxlY3QuaXNFbXB0eSgpICYmIGFuY2hvciA9PSB0aGlzLm11bHRpU2VsZWN0LmFuY2hvcilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgcG9zID0gYW5jaG9yID09IHRoaXMubXVsdGlTZWxlY3QuYW5jaG9yXG4gICAgICAgICAgICAgICAgPyByYW5nZS5jdXJzb3IgPT0gcmFuZ2Uuc3RhcnQgPyByYW5nZS5lbmQgOiByYW5nZS5zdGFydFxuICAgICAgICAgICAgICAgIDogcmFuZ2UuY3Vyc29yO1xuICAgICAgICAgICAgaWYgKHBvcy5yb3cgIT0gYW5jaG9yLnJvd1xuICAgICAgICAgICAgICAgIHx8IHRoaXMuc2Vzc2lvbi4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudChwb3Mucm93LCBwb3MuY29sdW1uKS5jb2x1bW4gIT0gYW5jaG9yLmNvbHVtbilcbiAgICAgICAgICAgICAgICB0aGlzLm11bHRpU2VsZWN0LnRvU2luZ2xlUmFuZ2UodGhpcy5tdWx0aVNlbGVjdC50b09yaWVudGVkUmFuZ2UoKSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5tdWx0aVNlbGVjdC5tZXJnZU92ZXJsYXBwaW5nUmFuZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRmluZHMgYW5kIHNlbGVjdHMgYWxsIHRoZSBvY2N1cnJlbmNlcyBvZiBgbmVlZGxlYC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW25lZWRsZV0gVGhlIHRleHQgdG8gZmluZFxuICAgICAqIEBwYXJhbSB7UGFydGlhbDxpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlNlYXJjaE9wdGlvbnM+fSBbb3B0aW9uc10gVGhlIHNlYXJjaCBvcHRpb25zXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbYWRkaXRpdmVdIGtlZXBzXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgY3VtdWxhdGl2ZSBjb3VudCBvZiBhbGwgZm91bmQgbWF0Y2hlc1xuICAgICAqIEB0aGlzIHtFZGl0b3J9XG4gICAgICoqL1xuICAgIHRoaXMuZmluZEFsbCA9IGZ1bmN0aW9uKG5lZWRsZSwgb3B0aW9ucywgYWRkaXRpdmUpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIG9wdGlvbnMubmVlZGxlID0gbmVlZGxlIHx8IG9wdGlvbnMubmVlZGxlO1xuICAgICAgICBpZiAob3B0aW9ucy5uZWVkbGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnNlbGVjdGlvbi5pc0VtcHR5KClcbiAgICAgICAgICAgICAgICA/IHRoaXMuc2VsZWN0aW9uLmdldFdvcmRSYW5nZSgpXG4gICAgICAgICAgICAgICAgOiB0aGlzLnNlbGVjdGlvbi5nZXRSYW5nZSgpO1xuICAgICAgICAgICAgb3B0aW9ucy5uZWVkbGUgPSB0aGlzLnNlc3Npb24uZ2V0VGV4dFJhbmdlKHJhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRzZWFyY2guc2V0KG9wdGlvbnMpO1xuXG4gICAgICAgIHZhciByYW5nZXMgPSB0aGlzLiRzZWFyY2guZmluZEFsbCh0aGlzLnNlc3Npb24pO1xuICAgICAgICBpZiAoIXJhbmdlcy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICB2YXIgc2VsZWN0aW9uID0gdGhpcy5tdWx0aVNlbGVjdDtcblxuICAgICAgICBpZiAoIWFkZGl0aXZlKVxuICAgICAgICAgICAgc2VsZWN0aW9uLnRvU2luZ2xlUmFuZ2UocmFuZ2VzWzBdKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gcmFuZ2VzLmxlbmd0aDsgaS0tOyApXG4gICAgICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2VzW2ldLCB0cnVlKTtcblxuICAgICAgICAvLyBrZWVwIG9sZCBzZWxlY3Rpb24gYXMgcHJpbWFyeSBpZiBwb3NzaWJsZVxuICAgICAgICBpZiAocmFuZ2UgJiYgc2VsZWN0aW9uLnJhbmdlTGlzdC5yYW5nZUF0UG9pbnQocmFuZ2Uuc3RhcnQpKVxuICAgICAgICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlLCB0cnVlKTtcblxuICAgICAgICByZXR1cm4gcmFuZ2VzLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGN1cnNvciBhYm92ZSBvciBiZWxvdyB0aGUgYWN0aXZlIGN1cnNvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkaXIgVGhlIGRpcmVjdGlvbiBvZiBsaW5lcyB0byBzZWxlY3Q6IC0xIGZvciB1cCwgMSBmb3IgZG93blxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NraXBdIElmIGB0cnVlYCwgcmVtb3ZlcyB0aGUgYWN0aXZlIHNlbGVjdGlvbiByYW5nZVxuICAgICAqXG4gICAgICogQHRoaXMge0VkaXRvcn1cbiAgICAgKi9cbiAgICB0aGlzLnNlbGVjdE1vcmVMaW5lcyA9IGZ1bmN0aW9uKGRpciwgc2tpcCkge1xuICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnNlbGVjdGlvbi50b09yaWVudGVkUmFuZ2UoKTtcbiAgICAgICAgdmFyIGlzQmFja3dhcmRzID0gcmFuZ2UuY3Vyc29yID09IHJhbmdlLmVuZDtcblxuICAgICAgICB2YXIgc2NyZWVuTGVhZCA9IHRoaXMuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24ocmFuZ2UuY3Vyc29yKTtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uLiRkZXNpcmVkQ29sdW1uKVxuICAgICAgICAgICAgc2NyZWVuTGVhZC5jb2x1bW4gPSB0aGlzLnNlbGVjdGlvbi4kZGVzaXJlZENvbHVtbjtcblxuICAgICAgICB2YXIgbGVhZCA9IHRoaXMuc2Vzc2lvbi5zY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24oc2NyZWVuTGVhZC5yb3cgKyBkaXIsIHNjcmVlbkxlYWQuY29sdW1uKTtcblxuICAgICAgICBpZiAoIXJhbmdlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdmFyIHNjcmVlbkFuY2hvciA9IHRoaXMuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24oaXNCYWNrd2FyZHMgPyByYW5nZS5lbmQgOiByYW5nZS5zdGFydCk7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5zZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihzY3JlZW5BbmNob3Iucm93ICsgZGlyLCBzY3JlZW5BbmNob3IuY29sdW1uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSBsZWFkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQmFja3dhcmRzKSB7XG4gICAgICAgICAgICAvKipAdHlwZSB7UmFuZ2UgJiB7ZGVzaXJlZENvbHVtbj86IG51bWJlcn19Ki9cbiAgICAgICAgICAgIHZhciBuZXdSYW5nZSA9IFJhbmdlLmZyb21Qb2ludHMobGVhZCwgYW5jaG9yKTtcbiAgICAgICAgICAgIG5ld1JhbmdlLmN1cnNvciA9IG5ld1JhbmdlLnN0YXJ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyoqQHR5cGUge1JhbmdlICYge2Rlc2lyZWRDb2x1bW4/OiBudW1iZXJ9fSovXG4gICAgICAgICAgICB2YXIgbmV3UmFuZ2UgPSBSYW5nZS5mcm9tUG9pbnRzKGFuY2hvciwgbGVhZCk7XG4gICAgICAgICAgICBuZXdSYW5nZS5jdXJzb3IgPSBuZXdSYW5nZS5lbmQ7XG4gICAgICAgIH1cblxuICAgICAgICBuZXdSYW5nZS5kZXNpcmVkQ29sdW1uID0gc2NyZWVuTGVhZC5jb2x1bW47XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3Rpb24uaW5NdWx0aVNlbGVjdE1vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChza2lwKVxuICAgICAgICAgICAgICAgIHZhciB0b1JlbW92ZSA9IHJhbmdlLmN1cnNvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLmFkZFJhbmdlKG5ld1JhbmdlKTtcbiAgICAgICAgaWYgKHRvUmVtb3ZlKVxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24uc3Vic3RyYWN0UG9pbnQodG9SZW1vdmUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc3Bvc2VzIHRoZSBzZWxlY3RlZCByYW5nZXMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRpciBUaGUgZGlyZWN0aW9uIHRvIHJvdGF0ZSBzZWxlY3Rpb25zXG4gICAgICogQHRoaXMge0VkaXRvcn1cbiAgICAgKiovXG4gICAgdGhpcy50cmFuc3Bvc2VTZWxlY3Rpb25zID0gZnVuY3Rpb24oZGlyKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICB2YXIgc2VsID0gc2Vzc2lvbi5tdWx0aVNlbGVjdDtcbiAgICAgICAgdmFyIGFsbCA9IHNlbC5yYW5nZXM7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGFsbC5sZW5ndGg7IGktLTsgKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBhbGxbaV07XG4gICAgICAgICAgICBpZiAocmFuZ2UuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRtcCA9IHNlc3Npb24uZ2V0V29yZFJhbmdlKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uKTtcbiAgICAgICAgICAgICAgICByYW5nZS5zdGFydC5yb3cgPSB0bXAuc3RhcnQucm93O1xuICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0LmNvbHVtbiA9IHRtcC5zdGFydC5jb2x1bW47XG4gICAgICAgICAgICAgICAgcmFuZ2UuZW5kLnJvdyA9IHRtcC5lbmQucm93O1xuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4gPSB0bXAuZW5kLmNvbHVtbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZWwubWVyZ2VPdmVybGFwcGluZ1JhbmdlcygpO1xuXG4gICAgICAgIHZhciB3b3JkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gYWxsLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IGFsbFtpXTtcbiAgICAgICAgICAgIHdvcmRzLnVuc2hpZnQoc2Vzc2lvbi5nZXRUZXh0UmFuZ2UocmFuZ2UpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXIgPCAwKVxuICAgICAgICAgICAgd29yZHMudW5zaGlmdCh3b3Jkcy5wb3AoKSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHdvcmRzLnB1c2god29yZHMuc2hpZnQoKSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGFsbC5sZW5ndGg7IGktLTsgKSB7XG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBhbGxbaV07XG4gICAgICAgICAgICB2YXIgdG1wID0gcmFuZ2UuY2xvbmUoKTtcbiAgICAgICAgICAgIHNlc3Npb24ucmVwbGFjZShyYW5nZSwgd29yZHNbaV0pO1xuICAgICAgICAgICAgcmFuZ2Uuc3RhcnQucm93ID0gdG1wLnN0YXJ0LnJvdztcbiAgICAgICAgICAgIHJhbmdlLnN0YXJ0LmNvbHVtbiA9IHRtcC5zdGFydC5jb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgc2VsLmZyb21PcmllbnRlZFJhbmdlKHNlbC5yYW5nZXNbMF0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgbmV4dCBvY2N1cnJlbmNlIG9mIHRleHQgaW4gYW4gYWN0aXZlIHNlbGVjdGlvbiBhbmQgYWRkcyBpdCB0byB0aGUgc2VsZWN0aW9ucy5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGlyIFRoZSBkaXJlY3Rpb24gb2YgbGluZXMgdG8gc2VsZWN0OiAtMSBmb3IgdXAsIDEgZm9yIGRvd25cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtza2lwXSBJZiBgdHJ1ZWAsIHJlbW92ZXMgdGhlIGFjdGl2ZSBzZWxlY3Rpb24gcmFuZ2VcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtzdG9wQXRGaXJzdF1cbiAgICAgKiBAdGhpcyB7RWRpdG9yfVxuICAgICAqKi9cbiAgICB0aGlzLnNlbGVjdE1vcmUgPSBmdW5jdGlvbihkaXIsIHNraXAsIHN0b3BBdEZpcnN0KSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICB2YXIgc2VsID0gc2Vzc2lvbi5tdWx0aVNlbGVjdDtcblxuICAgICAgICB2YXIgcmFuZ2UgPSBzZWwudG9PcmllbnRlZFJhbmdlKCk7XG4gICAgICAgIGlmIChyYW5nZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJhbmdlID0gc2Vzc2lvbi5nZXRXb3JkUmFuZ2UocmFuZ2Uuc3RhcnQucm93LCByYW5nZS5zdGFydC5jb2x1bW4pO1xuICAgICAgICAgICAgcmFuZ2UuY3Vyc29yID0gZGlyID09IC0xID8gcmFuZ2Uuc3RhcnQgOiByYW5nZS5lbmQ7XG4gICAgICAgICAgICB0aGlzLm11bHRpU2VsZWN0LmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgIGlmIChzdG9wQXRGaXJzdClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5lZWRsZSA9IHNlc3Npb24uZ2V0VGV4dFJhbmdlKHJhbmdlKTtcblxuICAgICAgICB2YXIgbmV3UmFuZ2UgPSBmaW5kKHNlc3Npb24sIG5lZWRsZSwgZGlyKTtcbiAgICAgICAgaWYgKG5ld1JhbmdlKSB7XG4gICAgICAgICAgICBuZXdSYW5nZS5jdXJzb3IgPSBkaXIgPT0gLTEgPyBuZXdSYW5nZS5zdGFydCA6IG5ld1JhbmdlLmVuZDtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi51bmZvbGQobmV3UmFuZ2UpO1xuICAgICAgICAgICAgdGhpcy5tdWx0aVNlbGVjdC5hZGRSYW5nZShuZXdSYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcm9sbEN1cnNvckludG9WaWV3KG51bGwsIDAuNSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNraXApXG4gICAgICAgICAgICB0aGlzLm11bHRpU2VsZWN0LnN1YnN0cmFjdFBvaW50KHJhbmdlLmN1cnNvcik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFsaWducyB0aGUgY3Vyc29ycyBvciBzZWxlY3RlZCB0ZXh0LlxuICAgICAqIEB0aGlzIHtFZGl0b3J9XG4gICAgICoqL1xuICAgIHRoaXMuYWxpZ25DdXJzb3JzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuICAgICAgICB2YXIgc2VsID0gc2Vzc2lvbi5tdWx0aVNlbGVjdDtcbiAgICAgICAgdmFyIHJhbmdlcyA9IHNlbC5yYW5nZXM7XG4gICAgICAgIC8vIGZpbHRlciBvdXQgcmFuZ2VzIG9uIHNhbWUgcm93XG4gICAgICAgIHZhciByb3cgPSAtMTtcbiAgICAgICAgdmFyIHNhbWVSb3dSYW5nZXMgPSByYW5nZXMuZmlsdGVyKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgIGlmIChyLmN1cnNvci5yb3cgPT0gcm93KVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgcm93ID0gci5jdXJzb3Iucm93O1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXJhbmdlcy5sZW5ndGggfHwgc2FtZVJvd1Jhbmdlcy5sZW5ndGggPT0gcmFuZ2VzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHRoaXMuc2VsZWN0aW9uLmdldFJhbmdlKCk7XG4gICAgICAgICAgICB2YXIgZnIgPSByYW5nZS5zdGFydC5yb3csIGxyID0gcmFuZ2UuZW5kLnJvdztcbiAgICAgICAgICAgIHZhciBndWVzc1JhbmdlID0gZnIgPT0gbHI7XG4gICAgICAgICAgICBpZiAoZ3Vlc3NSYW5nZSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXggPSB0aGlzLnNlc3Npb24uZ2V0TGVuZ3RoKCk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmU7XG4gICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBsaW5lID0gdGhpcy5zZXNzaW9uLmdldExpbmUobHIpO1xuICAgICAgICAgICAgICAgIH0gd2hpbGUgKC9bPTpdLy50ZXN0KGxpbmUpICYmICsrbHIgPCBtYXgpO1xuICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IHRoaXMuc2Vzc2lvbi5nZXRMaW5lKGZyKTtcbiAgICAgICAgICAgICAgICB9IHdoaWxlICgvWz06XS8udGVzdChsaW5lKSAmJiAtLWZyID4gMCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZnIgPCAwKSBmciA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGxyID49IG1heCkgbHIgPSBtYXggLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxpbmVzID0gdGhpcy5zZXNzaW9uLnJlbW92ZUZ1bGxMaW5lcyhmciwgbHIpO1xuICAgICAgICAgICAgbGluZXMgPSB0aGlzLiRyZUFsaWduVGV4dChsaW5lcywgZ3Vlc3NSYW5nZSk7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24uaW5zZXJ0KHtyb3c6IGZyLCBjb2x1bW46IDB9LCBsaW5lcy5qb2luKFwiXFxuXCIpICsgXCJcXG5cIik7XG4gICAgICAgICAgICBpZiAoIWd1ZXNzUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICByYW5nZS5zdGFydC5jb2x1bW4gPSAwO1xuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4gPSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbi5zZXRSYW5nZShyYW5nZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzYW1lUm93UmFuZ2VzLmZvckVhY2goZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgIHNlbC5zdWJzdHJhY3RQb2ludChyLmN1cnNvcik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG1heENvbCA9IDA7XG4gICAgICAgICAgICB2YXIgbWluU3BhY2UgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIHZhciBzcGFjZU9mZnNldHMgPSByYW5nZXMubWFwKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHIuY3Vyc29yO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lID0gc2Vzc2lvbi5nZXRMaW5lKHAucm93KTtcbiAgICAgICAgICAgICAgICB2YXIgc3BhY2VPZmZzZXQgPSBsaW5lLnN1YnN0cihwLmNvbHVtbikuc2VhcmNoKC9cXFMvZyk7XG4gICAgICAgICAgICAgICAgaWYgKHNwYWNlT2Zmc2V0ID09IC0xKVxuICAgICAgICAgICAgICAgICAgICBzcGFjZU9mZnNldCA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAocC5jb2x1bW4gPiBtYXhDb2wpXG4gICAgICAgICAgICAgICAgICAgIG1heENvbCA9IHAuY29sdW1uO1xuICAgICAgICAgICAgICAgIGlmIChzcGFjZU9mZnNldCA8IG1pblNwYWNlKVxuICAgICAgICAgICAgICAgICAgICBtaW5TcGFjZSA9IHNwYWNlT2Zmc2V0O1xuICAgICAgICAgICAgICAgIHJldHVybiBzcGFjZU9mZnNldDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmFuZ2VzLmZvckVhY2goZnVuY3Rpb24ociwgaSkge1xuICAgICAgICAgICAgICAgIHZhciBwID0gci5jdXJzb3I7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSBtYXhDb2wgLSBwLmNvbHVtbjtcbiAgICAgICAgICAgICAgICB2YXIgZCA9IHNwYWNlT2Zmc2V0c1tpXSAtIG1pblNwYWNlO1xuICAgICAgICAgICAgICAgIGlmIChsID4gZClcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5pbnNlcnQocCwgbGFuZy5zdHJpbmdSZXBlYXQoXCIgXCIsIGwgLSBkKSk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnJlbW92ZShuZXcgUmFuZ2UocC5yb3csIHAuY29sdW1uLCBwLnJvdywgcC5jb2x1bW4gLSBsICsgZCkpO1xuXG4gICAgICAgICAgICAgICAgci5zdGFydC5jb2x1bW4gPSByLmVuZC5jb2x1bW4gPSBtYXhDb2w7XG4gICAgICAgICAgICAgICAgci5zdGFydC5yb3cgPSByLmVuZC5yb3cgPSBwLnJvdztcbiAgICAgICAgICAgICAgICByLmN1cnNvciA9IHIuZW5kO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWwuZnJvbU9yaWVudGVkUmFuZ2UocmFuZ2VzWzBdKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlQ3Vyc29yKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZUJhY2tNYXJrZXJzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmdbXX0gbGluZXNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZUxlZnRdXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAdGhpcyB7RWRpdG9yfVxuICAgICAqL1xuICAgIHRoaXMuJHJlQWxpZ25UZXh0ID0gZnVuY3Rpb24obGluZXMsIGZvcmNlTGVmdCkge1xuICAgICAgICB2YXIgaXNMZWZ0QWxpZ25lZCA9IHRydWUsIGlzUmlnaHRBbGlnbmVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHN0YXJ0VywgdGV4dFcsIGVuZFc7XG5cbiAgICAgICAgcmV0dXJuIGxpbmVzLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICB2YXIgbSA9IGxpbmUubWF0Y2goLyhcXHMqKSguKj8pKFxccyopKFs9Ol0uKikvKTtcbiAgICAgICAgICAgIGlmICghbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gW2xpbmVdO1xuXG4gICAgICAgICAgICBpZiAoc3RhcnRXID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdGFydFcgPSBtWzFdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB0ZXh0VyA9IG1bMl0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGVuZFcgPSBtWzNdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICByZXR1cm4gbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0YXJ0VyArIHRleHRXICsgZW5kVyAhPSBtWzFdLmxlbmd0aCArIG1bMl0ubGVuZ3RoICsgbVszXS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgaXNSaWdodEFsaWduZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzdGFydFcgIT0gbVsxXS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgaXNMZWZ0QWxpZ25lZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoc3RhcnRXID4gbVsxXS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgc3RhcnRXID0gbVsxXS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGV4dFcgPCBtWzJdLmxlbmd0aClcbiAgICAgICAgICAgICAgICB0ZXh0VyA9IG1bMl0ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGVuZFcgPiBtWzNdLmxlbmd0aClcbiAgICAgICAgICAgICAgICBlbmRXID0gbVszXS5sZW5ndGg7XG5cbiAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICB9KS5tYXAoZm9yY2VMZWZ0ID8gYWxpZ25MZWZ0IDpcbiAgICAgICAgICAgIGlzTGVmdEFsaWduZWQgPyBpc1JpZ2h0QWxpZ25lZCA/IGFsaWduUmlnaHQgOiBhbGlnbkxlZnQgOiB1bkFsaWduKTtcblxuICAgICAgICBmdW5jdGlvbiBzcGFjZXMobikge1xuICAgICAgICAgICAgcmV0dXJuIGxhbmcuc3RyaW5nUmVwZWF0KFwiIFwiLCBuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFsaWduTGVmdChtKSB7XG4gICAgICAgICAgICByZXR1cm4gIW1bMl0gPyBtWzBdIDogc3BhY2VzKHN0YXJ0VykgKyBtWzJdXG4gICAgICAgICAgICAgICAgKyBzcGFjZXModGV4dFcgLSBtWzJdLmxlbmd0aCArIGVuZFcpXG4gICAgICAgICAgICAgICAgKyBtWzRdLnJlcGxhY2UoL14oWz06XSlcXHMrLywgXCIkMSBcIik7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYWxpZ25SaWdodChtKSB7XG4gICAgICAgICAgICByZXR1cm4gIW1bMl0gPyBtWzBdIDogc3BhY2VzKHN0YXJ0VyArIHRleHRXIC0gbVsyXS5sZW5ndGgpICsgbVsyXVxuICAgICAgICAgICAgICAgICsgc3BhY2VzKGVuZFcpXG4gICAgICAgICAgICAgICAgKyBtWzRdLnJlcGxhY2UoL14oWz06XSlcXHMrLywgXCIkMSBcIik7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gdW5BbGlnbihtKSB7XG4gICAgICAgICAgICByZXR1cm4gIW1bMl0gPyBtWzBdIDogc3BhY2VzKHN0YXJ0VykgKyBtWzJdXG4gICAgICAgICAgICAgICAgKyBzcGFjZXMoZW5kVylcbiAgICAgICAgICAgICAgICArIG1bNF0ucmVwbGFjZSgvXihbPTpdKVxccysvLCBcIiQxIFwiKTtcbiAgICAgICAgfVxuICAgIH07XG59KS5jYWxsKEVkaXRvci5wcm90b3R5cGUpO1xuXG5cbi8qKiBAcGFyYW0ge1BvaW50fSBwMSAgQHBhcmFtIHtQb2ludH0gcDIgKi9cbmZ1bmN0aW9uIGlzU2FtZVBvaW50KHAxLCBwMikge1xuICAgIHJldHVybiBwMS5yb3cgPT0gcDIucm93ICYmIHAxLmNvbHVtbiA9PSBwMi5jb2x1bW47XG59XG5cblxuLyoqXG4gKiBwYXRjaFxuICogYWRkcyBtdWx0aWN1cnNvciBzdXBwb3J0IHRvIGEgc2Vzc2lvblxuICogQHRoaXMge0VkaXRvcn1cbiAqIEB0eXBlIHsoZTogYW55KSA9PiB2b2lkfVxuICovXG5leHBvcnRzLm9uU2Vzc2lvbkNoYW5nZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgc2Vzc2lvbiA9IGUuc2Vzc2lvbjtcbiAgICBpZiAoc2Vzc2lvbiAmJiAhc2Vzc2lvbi5tdWx0aVNlbGVjdCkge1xuICAgICAgICBzZXNzaW9uLiRzZWxlY3Rpb25NYXJrZXJzID0gW107XG4gICAgICAgIHNlc3Npb24uc2VsZWN0aW9uLiRpbml0UmFuZ2VMaXN0KCk7XG4gICAgICAgIHNlc3Npb24ubXVsdGlTZWxlY3QgPSBzZXNzaW9uLnNlbGVjdGlvbjtcbiAgICB9XG4gICAgdGhpcy5tdWx0aVNlbGVjdCA9IHNlc3Npb24gJiYgc2Vzc2lvbi5tdWx0aVNlbGVjdDtcblxuICAgIHZhciBvbGRTZXNzaW9uID0gZS5vbGRTZXNzaW9uO1xuICAgIGlmIChvbGRTZXNzaW9uKSB7XG4gICAgICAgIG9sZFNlc3Npb24ubXVsdGlTZWxlY3Qub2ZmKFwiYWRkUmFuZ2VcIiwgdGhpcy4kb25BZGRSYW5nZSk7XG4gICAgICAgIG9sZFNlc3Npb24ubXVsdGlTZWxlY3Qub2ZmKFwicmVtb3ZlUmFuZ2VcIiwgdGhpcy4kb25SZW1vdmVSYW5nZSk7XG4gICAgICAgIG9sZFNlc3Npb24ubXVsdGlTZWxlY3Qub2ZmKFwibXVsdGlTZWxlY3RcIiwgdGhpcy4kb25NdWx0aVNlbGVjdCk7XG4gICAgICAgIG9sZFNlc3Npb24ubXVsdGlTZWxlY3Qub2ZmKFwic2luZ2xlU2VsZWN0XCIsIHRoaXMuJG9uU2luZ2xlU2VsZWN0KTtcbiAgICAgICAgb2xkU2Vzc2lvbi5tdWx0aVNlbGVjdC5sZWFkLm9mZihcImNoYW5nZVwiLCB0aGlzLiRjaGVja011bHRpc2VsZWN0Q2hhbmdlKTtcbiAgICAgICAgb2xkU2Vzc2lvbi5tdWx0aVNlbGVjdC5hbmNob3Iub2ZmKFwiY2hhbmdlXCIsIHRoaXMuJGNoZWNrTXVsdGlzZWxlY3RDaGFuZ2UpO1xuICAgIH1cblxuICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgIHNlc3Npb24ubXVsdGlTZWxlY3Qub24oXCJhZGRSYW5nZVwiLCB0aGlzLiRvbkFkZFJhbmdlKTtcbiAgICAgICAgc2Vzc2lvbi5tdWx0aVNlbGVjdC5vbihcInJlbW92ZVJhbmdlXCIsIHRoaXMuJG9uUmVtb3ZlUmFuZ2UpO1xuICAgICAgICBzZXNzaW9uLm11bHRpU2VsZWN0Lm9uKFwibXVsdGlTZWxlY3RcIiwgdGhpcy4kb25NdWx0aVNlbGVjdCk7XG4gICAgICAgIHNlc3Npb24ubXVsdGlTZWxlY3Qub24oXCJzaW5nbGVTZWxlY3RcIiwgdGhpcy4kb25TaW5nbGVTZWxlY3QpO1xuICAgICAgICBzZXNzaW9uLm11bHRpU2VsZWN0LmxlYWQub24oXCJjaGFuZ2VcIiwgdGhpcy4kY2hlY2tNdWx0aXNlbGVjdENoYW5nZSk7XG4gICAgICAgIHNlc3Npb24ubXVsdGlTZWxlY3QuYW5jaG9yLm9uKFwiY2hhbmdlXCIsIHRoaXMuJGNoZWNrTXVsdGlzZWxlY3RDaGFuZ2UpO1xuICAgIH1cblxuICAgIGlmIChzZXNzaW9uICYmIHRoaXMuaW5NdWx0aVNlbGVjdE1vZGUgIT0gc2Vzc2lvbi5zZWxlY3Rpb24uaW5NdWx0aVNlbGVjdE1vZGUpIHtcbiAgICAgICAgaWYgKHNlc3Npb24uc2VsZWN0aW9uLmluTXVsdGlTZWxlY3RNb2RlKVxuICAgICAgICAgICAgdGhpcy4kb25NdWx0aVNlbGVjdCgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLiRvblNpbmdsZVNlbGVjdCgpO1xuICAgIH1cbn07XG5cbi8vIE11bHRpU2VsZWN0KGVkaXRvcilcbi8vIGFkZHMgbXVsdGlwbGUgc2VsZWN0aW9uIHN1cHBvcnQgdG8gdGhlIGVkaXRvclxuLy8gKG5vdGU6IHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlIGZvciBlYWNoIGVkaXRvciBpbnN0YW5jZSlcbi8qKlxuICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvclxuICovXG5mdW5jdGlvbiBNdWx0aVNlbGVjdChlZGl0b3IpIHtcbiAgICBpZiAoZWRpdG9yLiRtdWx0aXNlbGVjdE9uU2Vzc2lvbkNoYW5nZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGVkaXRvci4kb25BZGRSYW5nZSA9IGVkaXRvci4kb25BZGRSYW5nZS5iaW5kKGVkaXRvcik7XG4gICAgZWRpdG9yLiRvblJlbW92ZVJhbmdlID0gZWRpdG9yLiRvblJlbW92ZVJhbmdlLmJpbmQoZWRpdG9yKTtcbiAgICBlZGl0b3IuJG9uTXVsdGlTZWxlY3QgPSBlZGl0b3IuJG9uTXVsdGlTZWxlY3QuYmluZChlZGl0b3IpO1xuICAgIGVkaXRvci4kb25TaW5nbGVTZWxlY3QgPSBlZGl0b3IuJG9uU2luZ2xlU2VsZWN0LmJpbmQoZWRpdG9yKTtcbiAgICBlZGl0b3IuJG11bHRpc2VsZWN0T25TZXNzaW9uQ2hhbmdlID0gZXhwb3J0cy5vblNlc3Npb25DaGFuZ2UuYmluZChlZGl0b3IpO1xuICAgIGVkaXRvci4kY2hlY2tNdWx0aXNlbGVjdENoYW5nZSA9IGVkaXRvci4kY2hlY2tNdWx0aXNlbGVjdENoYW5nZS5iaW5kKGVkaXRvcik7XG5cbiAgICBlZGl0b3IuJG11bHRpc2VsZWN0T25TZXNzaW9uQ2hhbmdlKGVkaXRvcik7XG4gICAgZWRpdG9yLm9uKFwiY2hhbmdlU2Vzc2lvblwiLCBlZGl0b3IuJG11bHRpc2VsZWN0T25TZXNzaW9uQ2hhbmdlKTtcblxuICAgIGVkaXRvci5vbihcIm1vdXNlZG93blwiLCBvbk1vdXNlRG93bik7XG4gICAgZWRpdG9yLmNvbW1hbmRzLmFkZENvbW1hbmRzKGNvbW1hbmRzLmRlZmF1bHRDb21tYW5kcyk7XG5cbiAgICBhZGRBbHRDdXJzb3JMaXN0ZW5lcnMoZWRpdG9yKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VkaXRvcn0gZWRpdG9yXG4gKi9cbmZ1bmN0aW9uIGFkZEFsdEN1cnNvckxpc3RlbmVycyhlZGl0b3Ipe1xuICAgIGlmICghZWRpdG9yLnRleHRJbnB1dCkgcmV0dXJuO1xuICAgIHZhciBlbCA9IGVkaXRvci50ZXh0SW5wdXQuZ2V0RWxlbWVudCgpO1xuICAgIHZhciBhbHRDdXJzb3IgPSBmYWxzZTtcbiAgICBldmVudC5hZGRMaXN0ZW5lcihlbCwgXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGFsdERvd24gPSBlLmtleUNvZGUgPT0gMTggJiYgIShlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLm1ldGFLZXkpO1xuICAgICAgICBpZiAoZWRpdG9yLiRibG9ja1NlbGVjdEVuYWJsZWQgJiYgYWx0RG93bikge1xuICAgICAgICAgICAgaWYgKCFhbHRDdXJzb3IpIHtcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVuZGVyZXIuc2V0TW91c2VDdXJzb3IoXCJjcm9zc2hhaXJcIik7XG4gICAgICAgICAgICAgICAgYWx0Q3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChhbHRDdXJzb3IpIHtcbiAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH1cbiAgICB9LCBlZGl0b3IpO1xuXG4gICAgZXZlbnQuYWRkTGlzdGVuZXIoZWwsIFwia2V5dXBcIiwgcmVzZXQsIGVkaXRvcik7XG4gICAgZXZlbnQuYWRkTGlzdGVuZXIoZWwsIFwiYmx1clwiLCByZXNldCwgZWRpdG9yKTtcbiAgICBmdW5jdGlvbiByZXNldChlKSB7XG4gICAgICAgIGlmIChhbHRDdXJzb3IpIHtcbiAgICAgICAgICAgIGVkaXRvci5yZW5kZXJlci5zZXRNb3VzZUN1cnNvcihcIlwiKTtcbiAgICAgICAgICAgIGFsdEN1cnNvciA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gVE9ETyBkaXNhYmxlIG1lbnUgcG9wcGluZyB1cFxuICAgICAgICAgICAgLy8gZSAmJiBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0cy5NdWx0aVNlbGVjdCA9IE11bHRpU2VsZWN0O1xuXG5cbnJlcXVpcmUoXCIuL2NvbmZpZ1wiKS5kZWZpbmVPcHRpb25zKEVkaXRvci5wcm90b3R5cGUsIFwiZWRpdG9yXCIsIHtcbiAgICBlbmFibGVNdWx0aXNlbGVjdDoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSB2YWxcbiAgICAgICAgICogQHRoaXMge0VkaXRvcn1cbiAgICAgICAgICovXG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICBNdWx0aVNlbGVjdCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uKFwibW91c2Vkb3duXCIsIG9uTW91c2VEb3duKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoXCJtb3VzZWRvd25cIiwgb25Nb3VzZURvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0sXG4gICAgZW5hYmxlQmxvY2tTZWxlY3Q6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuJGJsb2NrU2VsZWN0RW5hYmxlZCA9IHZhbDtcbiAgICAgICAgfSxcbiAgICAgICAgdmFsdWU6IHRydWVcbiAgICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/multi_select.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/placeholder.js":
/*!**************************************************!*\
  !*** ./node_modules/ace-code/src/placeholder.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n */\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\n\nclass PlaceHolder {\n    /**\n     * @param {EditSession} session\n     * @param {Number} length\n     * @param {import(\"../ace-internal\").Ace.Point} pos\n     * @param {any[]} others\n     * @param {String} mainClass\n     * @param {String} othersClass\n     **/\n    constructor(session, length, pos, others, mainClass, othersClass) {\n        var _self = this;\n        this.length = length;\n        this.session = session;\n        this.doc = session.getDocument();\n        this.mainClass = mainClass;\n        this.othersClass = othersClass;\n        this.$onUpdate = this.onUpdate.bind(this);\n        this.doc.on(\"change\", this.$onUpdate, true);\n        this.$others = others;\n\n        this.$onCursorChange = function() {\n            setTimeout(function() {\n                _self.onCursorChange();\n            });\n        };\n\n        this.$pos = pos;\n        // Used for reset\n        var undoStack = session.getUndoManager().$undoStack || session.getUndoManager()[\"$undostack\"] || {length: -1};\n        this.$undoStackDepth = undoStack.length;\n        this.setup();\n\n        session.selection.on(\"changeCursor\", this.$onCursorChange);\n    }\n\n    /**\n     * PlaceHolder.setup()\n     *\n     * TODO\n     *\n     **/\n    setup() {\n        var _self = this;\n        var doc = this.doc;\n        var session = this.session;\n\n        this.selectionBefore = session.selection.toJSON();\n        if (session.selection.inMultiSelectMode)\n            session.selection.toSingleRange();\n\n        this.pos = doc.createAnchor(this.$pos.row, this.$pos.column);\n        var pos = this.pos;\n        pos.$insertRight = true;\n        pos.detach();\n        pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);\n        this.others = [];\n        this.$others.forEach(function(other) {\n            var anchor = doc.createAnchor(other.row, other.column);\n            anchor.$insertRight = true;\n            anchor.detach();\n            _self.others.push(anchor);\n        });\n        session.setUndoSelect(false);\n    }\n\n    /**\n     * PlaceHolder.showOtherMarkers()\n     *\n     * TODO\n     *\n     **/\n    showOtherMarkers() {\n        if (this.othersActive) return;\n        var session = this.session;\n        var _self = this;\n        this.othersActive = true;\n        this.others.forEach(function(anchor) {\n            anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column+_self.length), _self.othersClass, null, false);\n        });\n    }\n\n    /**\n     * PlaceHolder.hideOtherMarkers()\n     *\n     * Hides all over markers in the [[EditSession `EditSession`]] that are not the currently selected one.\n     *\n     **/\n    hideOtherMarkers() {\n        if (!this.othersActive) return;\n        this.othersActive = false;\n        for (var i = 0; i < this.others.length; i++) {\n            this.session.removeMarker(this.others[i].markerId);\n        }\n    }\n\n    /**\n     * PlaceHolder@onUpdate(e)\n     *\n     * Emitted when the place holder updates.\n     * @param {import(\"../ace-internal\").Ace.Delta} delta\n     * @internal\n     */\n    onUpdate(delta) {\n        if (this.$updating)\n            return this.updateAnchors(delta);\n\n        var range = delta;\n        if (range.start.row !== range.end.row) return;\n        if (range.start.row !== this.pos.row) return;\n        this.$updating = true;\n        var lengthDiff = delta.action === \"insert\" ? range.end.column - range.start.column : range.start.column - range.end.column;\n        var inMainRange = range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1;\n        var distanceFromStart = range.start.column - this.pos.column;\n\n        this.updateAnchors(delta);\n\n        if (inMainRange)\n            this.length += lengthDiff;\n\n        if (inMainRange && !this.session.$fromUndo) {\n            if (delta.action === 'insert') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};\n                    this.doc.insertMergedLines(newPos, delta.lines);\n                }\n            } else if (delta.action === 'remove') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};\n                    this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));\n                }\n            }\n        }\n\n        this.$updating = false;\n        this.updateMarkers();\n    }\n\n    /**\n     * @param {import(\"../ace-internal\").Ace.Delta} delta\n     */\n    updateAnchors(delta) {\n        this.pos.onChange(delta);\n        for (var i = this.others.length; i--;)\n            this.others[i].onChange(delta);\n        this.updateMarkers();\n    }\n\n    updateMarkers() {\n        if (this.$updating)\n            return;\n        var _self = this;\n        var session = this.session;\n        var updateMarker = function(pos, className) {\n            session.removeMarker(pos.markerId);\n            pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column+_self.length), className, null, false);\n        };\n        updateMarker(this.pos, this.mainClass);\n        for (var i = this.others.length; i--;)\n            updateMarker(this.others[i], this.othersClass);\n    }\n\n\n    /**\n     * PlaceHolder@onCursorChange(e)\n     *\n     * Emitted when the cursor changes.\n     * @param {any} [event]\n     * @internal\n     */\n    onCursorChange(event) {\n        if (this.$updating || !this.session) return;\n        var pos = this.session.selection.getCursor();\n        if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {\n            this.showOtherMarkers();\n            this._emit(\"cursorEnter\", event);\n        } else {\n            this.hideOtherMarkers();\n            this._emit(\"cursorLeave\", event);\n        }\n    }\n\n    /**\n     * PlaceHolder.detach()\n     *\n     * TODO\n     *\n     **/\n    detach() {\n        this.session.removeMarker(this.pos && this.pos.markerId);\n        this.hideOtherMarkers();\n        this.doc.off(\"change\", this.$onUpdate);\n        this.session.selection.off(\"changeCursor\", this.$onCursorChange);\n        this.session.setUndoSelect(true);\n        this.session = null;\n    }\n\n    /**\n     * PlaceHolder.cancel()\n     *\n     * TODO\n     *\n     **/\n    cancel() {\n        if (this.$undoStackDepth === -1)\n            return;\n        var undoManager = this.session.getUndoManager();\n        var undosRequired = (undoManager.$undoStack || undoManager[\"$undostack\"]).length - this.$undoStackDepth;\n        for (var i = 0; i < undosRequired; i++) {\n            undoManager.undo(this.session, true);\n        }\n        if (this.selectionBefore)\n            this.session.selection.fromJSON(this.selectionBefore);\n    }\n}\n\noop.implement(PlaceHolder.prototype, EventEmitter);\n\nexports.PlaceHolder = PlaceHolder;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3BsYWNlaG9sZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxhQUFhLHNDQUFzQztBQUNuRDtBQUNBLFlBQVksa0ZBQXdCO0FBQ3BDLG1CQUFtQixpSEFBMkM7QUFDOUQsVUFBVSxtQkFBTyxDQUFDLHlEQUFXOztBQUU3QjtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCLGVBQWUsUUFBUTtBQUN2QixlQUFlLHFDQUFxQztBQUNwRCxlQUFlLE9BQU87QUFDdEIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0EsMEdBQTBHO0FBQzFHO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3QkFBd0I7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxxQ0FBcUM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxREFBcUQsUUFBUTtBQUM3RDtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsY0FBYztBQUNkLHFEQUFxRCxRQUFRO0FBQzdEO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxJQUFJO0FBQzdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxJQUFJO0FBQzdDO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsbUJBQW1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvcGxhY2Vob2xkZXIuanM/ZjhkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICovXG52YXIgUmFuZ2UgPSByZXF1aXJlKFwiLi9yYW5nZVwiKS5SYW5nZTtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG52YXIgb29wID0gcmVxdWlyZShcIi4vbGliL29vcFwiKTtcblxuY2xhc3MgUGxhY2VIb2xkZXIge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IHNlc3Npb25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGVuZ3RoXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlBvaW50fSBwb3NcbiAgICAgKiBAcGFyYW0ge2FueVtdfSBvdGhlcnNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFpbkNsYXNzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG90aGVyc0NsYXNzXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb24sIGxlbmd0aCwgcG9zLCBvdGhlcnMsIG1haW5DbGFzcywgb3RoZXJzQ2xhc3MpIHtcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIHRoaXMuZG9jID0gc2Vzc2lvbi5nZXREb2N1bWVudCgpO1xuICAgICAgICB0aGlzLm1haW5DbGFzcyA9IG1haW5DbGFzcztcbiAgICAgICAgdGhpcy5vdGhlcnNDbGFzcyA9IG90aGVyc0NsYXNzO1xuICAgICAgICB0aGlzLiRvblVwZGF0ZSA9IHRoaXMub25VcGRhdGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kb2Mub24oXCJjaGFuZ2VcIiwgdGhpcy4kb25VcGRhdGUsIHRydWUpO1xuICAgICAgICB0aGlzLiRvdGhlcnMgPSBvdGhlcnM7XG5cbiAgICAgICAgdGhpcy4kb25DdXJzb3JDaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX3NlbGYub25DdXJzb3JDaGFuZ2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuJHBvcyA9IHBvcztcbiAgICAgICAgLy8gVXNlZCBmb3IgcmVzZXRcbiAgICAgICAgdmFyIHVuZG9TdGFjayA9IHNlc3Npb24uZ2V0VW5kb01hbmFnZXIoKS4kdW5kb1N0YWNrIHx8IHNlc3Npb24uZ2V0VW5kb01hbmFnZXIoKVtcIiR1bmRvc3RhY2tcIl0gfHwge2xlbmd0aDogLTF9O1xuICAgICAgICB0aGlzLiR1bmRvU3RhY2tEZXB0aCA9IHVuZG9TdGFjay5sZW5ndGg7XG4gICAgICAgIHRoaXMuc2V0dXAoKTtcblxuICAgICAgICBzZXNzaW9uLnNlbGVjdGlvbi5vbihcImNoYW5nZUN1cnNvclwiLCB0aGlzLiRvbkN1cnNvckNoYW5nZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxhY2VIb2xkZXIuc2V0dXAoKVxuICAgICAqXG4gICAgICogVE9ET1xuICAgICAqXG4gICAgICoqL1xuICAgIHNldHVwKCkge1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZG9jID0gdGhpcy5kb2M7XG4gICAgICAgIHZhciBzZXNzaW9uID0gdGhpcy5zZXNzaW9uO1xuXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQmVmb3JlID0gc2Vzc2lvbi5zZWxlY3Rpb24udG9KU09OKCk7XG4gICAgICAgIGlmIChzZXNzaW9uLnNlbGVjdGlvbi5pbk11bHRpU2VsZWN0TW9kZSlcbiAgICAgICAgICAgIHNlc3Npb24uc2VsZWN0aW9uLnRvU2luZ2xlUmFuZ2UoKTtcblxuICAgICAgICB0aGlzLnBvcyA9IGRvYy5jcmVhdGVBbmNob3IodGhpcy4kcG9zLnJvdywgdGhpcy4kcG9zLmNvbHVtbik7XG4gICAgICAgIHZhciBwb3MgPSB0aGlzLnBvcztcbiAgICAgICAgcG9zLiRpbnNlcnRSaWdodCA9IHRydWU7XG4gICAgICAgIHBvcy5kZXRhY2goKTtcbiAgICAgICAgcG9zLm1hcmtlcklkID0gc2Vzc2lvbi5hZGRNYXJrZXIobmV3IFJhbmdlKHBvcy5yb3csIHBvcy5jb2x1bW4sIHBvcy5yb3csIHBvcy5jb2x1bW4gKyB0aGlzLmxlbmd0aCksIHRoaXMubWFpbkNsYXNzLCBudWxsLCBmYWxzZSk7XG4gICAgICAgIHRoaXMub3RoZXJzID0gW107XG4gICAgICAgIHRoaXMuJG90aGVycy5mb3JFYWNoKGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gZG9jLmNyZWF0ZUFuY2hvcihvdGhlci5yb3csIG90aGVyLmNvbHVtbik7XG4gICAgICAgICAgICBhbmNob3IuJGluc2VydFJpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGFuY2hvci5kZXRhY2goKTtcbiAgICAgICAgICAgIF9zZWxmLm90aGVycy5wdXNoKGFuY2hvcik7XG4gICAgICAgIH0pO1xuICAgICAgICBzZXNzaW9uLnNldFVuZG9TZWxlY3QoZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYWNlSG9sZGVyLnNob3dPdGhlck1hcmtlcnMoKVxuICAgICAqXG4gICAgICogVE9ET1xuICAgICAqXG4gICAgICoqL1xuICAgIHNob3dPdGhlck1hcmtlcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLm90aGVyc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5vdGhlcnNBY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLm90aGVycy5mb3JFYWNoKGZ1bmN0aW9uKGFuY2hvcikge1xuICAgICAgICAgICAgYW5jaG9yLm1hcmtlcklkID0gc2Vzc2lvbi5hZGRNYXJrZXIobmV3IFJhbmdlKGFuY2hvci5yb3csIGFuY2hvci5jb2x1bW4sIGFuY2hvci5yb3csIGFuY2hvci5jb2x1bW4rX3NlbGYubGVuZ3RoKSwgX3NlbGYub3RoZXJzQ2xhc3MsIG51bGwsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxhY2VIb2xkZXIuaGlkZU90aGVyTWFya2VycygpXG4gICAgICpcbiAgICAgKiBIaWRlcyBhbGwgb3ZlciBtYXJrZXJzIGluIHRoZSBbW0VkaXRTZXNzaW9uIGBFZGl0U2Vzc2lvbmBdXSB0aGF0IGFyZSBub3QgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBvbmUuXG4gICAgICpcbiAgICAgKiovXG4gICAgaGlkZU90aGVyTWFya2VycygpIHtcbiAgICAgICAgaWYgKCF0aGlzLm90aGVyc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLm90aGVyc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub3RoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ucmVtb3ZlTWFya2VyKHRoaXMub3RoZXJzW2ldLm1hcmtlcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYWNlSG9sZGVyQG9uVXBkYXRlKGUpXG4gICAgICpcbiAgICAgKiBFbWl0dGVkIHdoZW4gdGhlIHBsYWNlIGhvbGRlciB1cGRhdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5EZWx0YX0gZGVsdGFcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvblVwZGF0ZShkZWx0YSkge1xuICAgICAgICBpZiAodGhpcy4kdXBkYXRpbmcpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVBbmNob3JzKGRlbHRhKTtcblxuICAgICAgICB2YXIgcmFuZ2UgPSBkZWx0YTtcbiAgICAgICAgaWYgKHJhbmdlLnN0YXJ0LnJvdyAhPT0gcmFuZ2UuZW5kLnJvdykgcmV0dXJuO1xuICAgICAgICBpZiAocmFuZ2Uuc3RhcnQucm93ICE9PSB0aGlzLnBvcy5yb3cpIHJldHVybjtcbiAgICAgICAgdGhpcy4kdXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICB2YXIgbGVuZ3RoRGlmZiA9IGRlbHRhLmFjdGlvbiA9PT0gXCJpbnNlcnRcIiA/IHJhbmdlLmVuZC5jb2x1bW4gLSByYW5nZS5zdGFydC5jb2x1bW4gOiByYW5nZS5zdGFydC5jb2x1bW4gLSByYW5nZS5lbmQuY29sdW1uO1xuICAgICAgICB2YXIgaW5NYWluUmFuZ2UgPSByYW5nZS5zdGFydC5jb2x1bW4gPj0gdGhpcy5wb3MuY29sdW1uICYmIHJhbmdlLnN0YXJ0LmNvbHVtbiA8PSB0aGlzLnBvcy5jb2x1bW4gKyB0aGlzLmxlbmd0aCArIDE7XG4gICAgICAgIHZhciBkaXN0YW5jZUZyb21TdGFydCA9IHJhbmdlLnN0YXJ0LmNvbHVtbiAtIHRoaXMucG9zLmNvbHVtbjtcblxuICAgICAgICB0aGlzLnVwZGF0ZUFuY2hvcnMoZGVsdGEpO1xuXG4gICAgICAgIGlmIChpbk1haW5SYW5nZSlcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoICs9IGxlbmd0aERpZmY7XG5cbiAgICAgICAgaWYgKGluTWFpblJhbmdlICYmICF0aGlzLnNlc3Npb24uJGZyb21VbmRvKSB7XG4gICAgICAgICAgICBpZiAoZGVsdGEuYWN0aW9uID09PSAnaW5zZXJ0Jykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLm90aGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJQb3MgPSB0aGlzLm90aGVyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1BvcyA9IHtyb3c6IG90aGVyUG9zLnJvdywgY29sdW1uOiBvdGhlclBvcy5jb2x1bW4gKyBkaXN0YW5jZUZyb21TdGFydH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jLmluc2VydE1lcmdlZExpbmVzKG5ld1BvcywgZGVsdGEubGluZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVsdGEuYWN0aW9uID09PSAncmVtb3ZlJykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLm90aGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJQb3MgPSB0aGlzLm90aGVyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1BvcyA9IHtyb3c6IG90aGVyUG9zLnJvdywgY29sdW1uOiBvdGhlclBvcy5jb2x1bW4gKyBkaXN0YW5jZUZyb21TdGFydH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9jLnJlbW92ZShuZXcgUmFuZ2UobmV3UG9zLnJvdywgbmV3UG9zLmNvbHVtbiwgbmV3UG9zLnJvdywgbmV3UG9zLmNvbHVtbiAtIGxlbmd0aERpZmYpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiR1cGRhdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZU1hcmtlcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuRGVsdGF9IGRlbHRhXG4gICAgICovXG4gICAgdXBkYXRlQW5jaG9ycyhkZWx0YSkge1xuICAgICAgICB0aGlzLnBvcy5vbkNoYW5nZShkZWx0YSk7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLm90aGVycy5sZW5ndGg7IGktLTspXG4gICAgICAgICAgICB0aGlzLm90aGVyc1tpXS5vbkNoYW5nZShkZWx0YSk7XG4gICAgICAgIHRoaXMudXBkYXRlTWFya2VycygpO1xuICAgIH1cblxuICAgIHVwZGF0ZU1hcmtlcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLiR1cGRhdGluZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIHZhciB1cGRhdGVNYXJrZXIgPSBmdW5jdGlvbihwb3MsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgc2Vzc2lvbi5yZW1vdmVNYXJrZXIocG9zLm1hcmtlcklkKTtcbiAgICAgICAgICAgIHBvcy5tYXJrZXJJZCA9IHNlc3Npb24uYWRkTWFya2VyKG5ldyBSYW5nZShwb3Mucm93LCBwb3MuY29sdW1uLCBwb3Mucm93LCBwb3MuY29sdW1uK19zZWxmLmxlbmd0aCksIGNsYXNzTmFtZSwgbnVsbCwgZmFsc2UpO1xuICAgICAgICB9O1xuICAgICAgICB1cGRhdGVNYXJrZXIodGhpcy5wb3MsIHRoaXMubWFpbkNsYXNzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMub3RoZXJzLmxlbmd0aDsgaS0tOylcbiAgICAgICAgICAgIHVwZGF0ZU1hcmtlcih0aGlzLm90aGVyc1tpXSwgdGhpcy5vdGhlcnNDbGFzcyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBQbGFjZUhvbGRlckBvbkN1cnNvckNoYW5nZShlKVxuICAgICAqXG4gICAgICogRW1pdHRlZCB3aGVuIHRoZSBjdXJzb3IgY2hhbmdlcy5cbiAgICAgKiBAcGFyYW0ge2FueX0gW2V2ZW50XVxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uQ3Vyc29yQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLiR1cGRhdGluZyB8fCAhdGhpcy5zZXNzaW9uKSByZXR1cm47XG4gICAgICAgIHZhciBwb3MgPSB0aGlzLnNlc3Npb24uc2VsZWN0aW9uLmdldEN1cnNvcigpO1xuICAgICAgICBpZiAocG9zLnJvdyA9PT0gdGhpcy5wb3Mucm93ICYmIHBvcy5jb2x1bW4gPj0gdGhpcy5wb3MuY29sdW1uICYmIHBvcy5jb2x1bW4gPD0gdGhpcy5wb3MuY29sdW1uICsgdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd090aGVyTWFya2VycygpO1xuICAgICAgICAgICAgdGhpcy5fZW1pdChcImN1cnNvckVudGVyXCIsIGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZU90aGVyTWFya2VycygpO1xuICAgICAgICAgICAgdGhpcy5fZW1pdChcImN1cnNvckxlYXZlXCIsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYWNlSG9sZGVyLmRldGFjaCgpXG4gICAgICpcbiAgICAgKiBUT0RPXG4gICAgICpcbiAgICAgKiovXG4gICAgZGV0YWNoKCkge1xuICAgICAgICB0aGlzLnNlc3Npb24ucmVtb3ZlTWFya2VyKHRoaXMucG9zICYmIHRoaXMucG9zLm1hcmtlcklkKTtcbiAgICAgICAgdGhpcy5oaWRlT3RoZXJNYXJrZXJzKCk7XG4gICAgICAgIHRoaXMuZG9jLm9mZihcImNoYW5nZVwiLCB0aGlzLiRvblVwZGF0ZSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zZWxlY3Rpb24ub2ZmKFwiY2hhbmdlQ3Vyc29yXCIsIHRoaXMuJG9uQ3Vyc29yQ2hhbmdlKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnNldFVuZG9TZWxlY3QodHJ1ZSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxhY2VIb2xkZXIuY2FuY2VsKClcbiAgICAgKlxuICAgICAqIFRPRE9cbiAgICAgKlxuICAgICAqKi9cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLiR1bmRvU3RhY2tEZXB0aCA9PT0gLTEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciB1bmRvTWFuYWdlciA9IHRoaXMuc2Vzc2lvbi5nZXRVbmRvTWFuYWdlcigpO1xuICAgICAgICB2YXIgdW5kb3NSZXF1aXJlZCA9ICh1bmRvTWFuYWdlci4kdW5kb1N0YWNrIHx8IHVuZG9NYW5hZ2VyW1wiJHVuZG9zdGFja1wiXSkubGVuZ3RoIC0gdGhpcy4kdW5kb1N0YWNrRGVwdGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdW5kb3NSZXF1aXJlZDsgaSsrKSB7XG4gICAgICAgICAgICB1bmRvTWFuYWdlci51bmRvKHRoaXMuc2Vzc2lvbiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uQmVmb3JlKVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLnNlbGVjdGlvbi5mcm9tSlNPTih0aGlzLnNlbGVjdGlvbkJlZm9yZSk7XG4gICAgfVxufVxuXG5vb3AuaW1wbGVtZW50KFBsYWNlSG9sZGVyLnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyKTtcblxuZXhwb3J0cy5QbGFjZUhvbGRlciA9IFBsYWNlSG9sZGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/placeholder.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/range.js":
/*!********************************************!*\
  !*** ./node_modules/ace-code/src/range.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n * @typedef {import(\"../ace-internal\").Ace.IRange} IRange\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n */\n/**\n * This object is used in various places to indicate a region within the editor. To better visualize how this works, imagine a rectangle. Each quadrant of the rectangle is analogous to a range, as ranges contain a starting row and starting column, and an ending row, and ending column.\n **/\nclass Range {\n    /**\n     * Creates a new `Range` object with the given starting and ending rows and columns.\n     * @param {Number} [startRow] The starting row\n     * @param {Number} [startColumn] The starting column\n     * @param {Number} [endRow] The ending row\n     * @param {Number} [endColumn] The ending column\n     * @constructor\n     **/\n    constructor(startRow, startColumn, endRow, endColumn) {\n        /**@type {Point}*/\n        this.start = {\n            row: startRow,\n            column: startColumn\n        };\n        /**@type {Point}*/\n        this.end = {\n            row: endRow,\n            column: endColumn\n        };\n    }\n    \n    /**\n     * Returns `true` if and only if the starting row and column, and ending row and column, are equivalent to those given by `range`.\n     * @param {IRange} range A range to check against\n     * @return {Boolean}\n     **/\n    isEqual(range) {\n        return this.start.row === range.start.row &&\n            this.end.row === range.end.row &&\n            this.start.column === range.start.column &&\n            this.end.column === range.end.column;\n    }\n\n    /**\n     * Returns a string containing the range's row and column information, given like this:\n     * ```\n     *    [start.row/start.column] -> [end.row/end.column]\n     * ```\n     * @return {String}\n     **/\n    toString() {\n        return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\n            \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\n    }\n\n    /**\n     * Returns `true` if the `row` and `column` provided are within the given range. This can better be expressed as returning `true` if:\n     * ```javascript\n     *    this.start.row <= row <= this.end.row &&\n     *    this.start.column <= column <= this.end.column\n     * ```\n     * @param {Number} row A row to check for\n     * @param {Number} column A column to check for\n     * @returns {Boolean}\n     * @related [[Range.compare]]\n     **/\n\n    contains(row, column) {\n        return this.compare(row, column) == 0;\n    }\n\n    /**\n     * Compares `this` range (A) with another range (B).\n     * @param {IRange} range A range to compare with\n     * @related [[Range.compare]]\n     * @returns {Number} This method returns one of the following numbers:\n     * * `-2`: (B) is in front of (A), and doesn't intersect with (A)\n     * * `-1`: (B) begins before (A) but ends inside of (A)\n     * * `0`: (B) is completely inside of (A)\n     * * `+1`: (B) begins inside of (A) but ends outside of (A)\n     * * `+2`: (B) is after (A) and doesn't intersect with (A)\n     * * `42`: FTW state: (B) ends in (A) but starts outside of (A)\n     **/\n    compareRange(range) {\n        var cmp,\n            end = range.end,\n            start = range.start;\n\n        cmp = this.compare(end.row, end.column);\n        if (cmp == 1) {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == 1) {\n                return 2;\n            } else if (cmp == 0) {\n                return 1;\n            } else {\n                return 0;\n            }\n        } else if (cmp == -1) {\n            return -2;\n        } else {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == -1) {\n                return -1;\n            } else if (cmp == 1) {\n                return 42;\n            } else {\n                return 0;\n            }\n        }\n    }\n\n    /**\n     * Compares the row and column of `p` with the starting and ending [[Point]]'s of the calling range (by calling [[Range.compare]]).\n     * @param {Point} p A point to compare with\n     * @related [[Range.compare]]\n     * @returns {Number}\n     **/\n    comparePoint(p) {\n        return this.compare(p.row, p.column);\n    }\n\n    /**\n     * Checks the start and end [[Point]]'s of `range` and compares them to the calling range. Returns `true` if the `range` is contained within the caller's range.\n     * @param {IRange} range A range to compare with\n     * @returns {Boolean}\n     * @related [[Range.comparePoint]]\n     **/\n    containsRange(range) {\n        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\n    }\n\n    /**\n     * Returns `true` if passed in `range` intersects with the one calling this method.\n     * @param {IRange} range A range to compare with\n     * @returns {Boolean}\n     **/\n    intersects(range) {\n        var cmp = this.compareRange(range);\n        return (cmp == -1 || cmp == 0 || cmp == 1);\n    }\n\n    /**\n     * Returns `true` if the caller's ending row is the same as `row`, and if the caller's ending column is the same as `column`.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     **/\n    isEnd(row, column) {\n        return this.end.row == row && this.end.column == column;\n    }\n\n    /**\n     * Returns `true` if the caller's starting row is the same as `row`, and if the caller's starting column is the same as `column`.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     **/\n    isStart(row, column) {\n        return this.start.row == row && this.start.column == column;\n    }\n\n    /**\n     * Sets the starting row and column for the range.\n     * @param {Number|Point} row A row to set\n     * @param {Number} [column] A column to set\n     *\n     **/\n    setStart(row, column) {\n        if (typeof row == \"object\") {\n            this.start.column = row.column;\n            this.start.row = row.row;\n        } else {\n            this.start.row = row;\n            this.start.column = column;\n        }\n    }\n\n    /**\n     * Sets the starting row and column for the range.\n     * @param {Number|Point} row A row to set\n     * @param {Number} [column] A column to set\n     *\n     **/\n    setEnd(row, column) {\n        if (typeof row == \"object\") {\n            this.end.column = row.column;\n            this.end.row = row.row;\n        } else {\n            this.end.row = row;\n            this.end.column = column;\n        }\n    }\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     * @related [[Range.compare]]\n     **/\n    inside(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column) || this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range's starting [[Point]].\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     * @related [[Range.compare]]\n     **/\n    insideStart(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range's ending [[Point]].\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     * @related [[Range.compare]]\n     *\n     **/\n    insideEnd(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Compares the `row` and `column` with the starting and ending [[Point]]'s of the calling range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Number} This method returns one of the following numbers:\n     * * `1` if `row` is greater than the calling range\n     * * `-1` if `row` is less then the calling range\n     * * `0` otherwise\n     *\n     * If the starting row of the calling range is equal to `row`, and:\n     * * `column` is greater than or equal to the calling range's starting column, this returns `0`\n     * * Otherwise, it returns -1\n     *\n     * If the ending row of the calling range is equal to `row`, and:\n     * * `column` is less than or equal to the calling range's ending column, this returns `0`\n     * * Otherwise, it returns 1\n     **/\n    compare(row, column) {\n        if (!this.isMultiLine()) {\n            if (row === this.start.row) {\n                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n            }\n        }\n\n        if (row < this.start.row)\n            return -1;\n\n        if (row > this.end.row)\n            return 1;\n\n        if (this.start.row === row)\n            return column >= this.start.column ? 0 : -1;\n\n        if (this.end.row === row)\n            return column <= this.end.column ? 0 : 1;\n\n        return 0;\n    }\n\n    /**\n     * Compares the `row` and `column` with the starting and ending [[Point]]'s of the calling range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Number} This method returns one of the following numbers:\n     * * `-1` if calling range's starting column and calling range's starting row are equal `row` and `column`\n     * * Otherwise, it returns the value after calling [[Range.compare `compare()`]].\n     **/\n    compareStart(row, column) {\n        if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    }\n\n    /**\n     * Compares the `row` and `column` with the starting and ending [[Point]]'s of the calling range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Number} This method returns one of the following numbers:\n     * * `1` if calling range's ending column and calling range's ending row are equal `row` and `column`.\n     * * Otherwise, it returns the value after calling [[Range.compare `compare()`]].\n     */\n    compareEnd(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else {\n            return this.compare(row, column);\n        }\n    }\n\n    /**\n     * Compares the `row` and `column` with the start and end [[Point]]'s of the calling range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Number} This method returns one of the following numbers:\n     * * `1` if the ending row of the calling range is equal to `row`, and the ending column of the calling range is equal to `column`\n     * * `-1` if the starting row of the calling range is equal to `row`, and the starting column of the calling range is equal to `column`\n     * * Otherwise, it returns the value after calling [[Range.compare `compare()`]].\n     **/\n    compareInside(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    }\n\n    /**\n     * Returns the part of the current `Range` that occurs within the boundaries of `firstRow` and `lastRow` as a new `Range` object.\n     * @param {Number} firstRow The starting row\n     * @param {Number} lastRow The ending row\n     * @returns {Range}\n    **/\n    clipRows(firstRow, lastRow) {\n        if (this.end.row > lastRow)\n            var end = {row: lastRow + 1, column: 0};\n        else if (this.end.row < firstRow)\n            var end = {row: firstRow, column: 0};\n\n        if (this.start.row > lastRow)\n            var start = {row: lastRow + 1, column: 0};\n        else if (this.start.row < firstRow)\n            var start = {row: firstRow, column: 0};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    }\n\n    /**\n     * Changes the `row` and `column` for the calling range for both the starting and ending [[Point]]'s.\n     * @param {Number} row A new row to extend to\n     * @param {Number} column A new column to extend to\n     * @returns {Range} The original range with the new row\n    **/\n    extend(row, column) {\n        var cmp = this.compare(row, column);\n\n        if (cmp == 0)\n            return this;\n        else if (cmp == -1)\n            var start = {row: row, column: column};\n        else\n            var end = {row: row, column: column};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    }\n\n    /**\n     * Returns `true` if the calling range is empty (starting [[Point]] == ending [[Point]]).\n     * @returns {Boolean}\n     **/\n    isEmpty() {\n        return (this.start.row === this.end.row && this.start.column === this.end.column);\n    }\n\n    /**\n     * Returns `true` if the range spans across multiple lines.\n     * @returns {Boolean}\n    **/\n    isMultiLine() {\n        return (this.start.row !== this.end.row);\n    }\n\n    /**\n     * Returns a duplicate of the calling range.\n     * @returns {Range}\n    **/\n    clone() {\n        return Range.fromPoints(this.start, this.end);\n    }\n\n    /**\n     * Returns a range containing the starting and ending rows of the original range, but with a column value of `0`.\n     * @returns {Range}\n    **/\n    collapseRows() {\n        if (this.end.column == 0)\n            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0);\n        else\n            return new Range(this.start.row, 0, this.end.row, 0);\n    }\n\n    /**\n     * Given the current `Range`, this function converts those starting and ending [[Point]]'s into screen positions, and then returns a new `Range` object.\n     * @param {EditSession} session The `EditSession` to retrieve coordinates from\n     * @returns {Range}\n    **/\n    toScreenRange(session) {\n        var screenPosStart = session.documentToScreenPosition(this.start);\n        var screenPosEnd = session.documentToScreenPosition(this.end);\n\n        return new Range(\n            screenPosStart.row, screenPosStart.column,\n            screenPosEnd.row, screenPosEnd.column\n        );\n    }\n\n    /**\n     * Shift the calling range by `row` and `column` values.\n     * @param {Number} row\n     * @param {Number} column\n     * @experimental\n     */\n    moveBy(row, column) {\n        this.start.row += row;\n        this.start.column += column;\n        this.end.row += row;\n        this.end.column += column;\n    }\n\n}\n\n/**\n * Creates and returns a new `Range` based on the `start` [[Point]] and `end` [[Point]] of the given parameters.\n * @param {Point} start A starting point to use\n * @param {Point} end An ending point to use\n * @returns {Range}\n**/\nRange.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column);\n};\n\n/**\n * Compares `p1` and `p2` [[Point]]'s, useful for sorting\n * @param {Point} p1\n * @param {Point} p2\n * @returns {Number}\n */\nRange.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\n\nexports.Range = Range;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3JhbmdlLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0EsYUFBYSxzQ0FBc0M7QUFDbkQsYUFBYSxzQ0FBc0M7QUFDbkQsYUFBYSxxQ0FBcUM7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0IsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxjQUFjO0FBQzdCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBLHVCQUF1Qjs7QUFFdkI7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx5QkFBeUI7O0FBRXpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLE9BQU87QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHVCQUF1Qjs7QUFFdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9yYW5nZS5qcz83ZGExIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2VkaXRfc2Vzc2lvblwiKS5FZGl0U2Vzc2lvbn0gRWRpdFNlc3Npb25cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLklSYW5nZX0gSVJhbmdlXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludH0gUG9pbnRcbiAqL1xuLyoqXG4gKiBUaGlzIG9iamVjdCBpcyB1c2VkIGluIHZhcmlvdXMgcGxhY2VzIHRvIGluZGljYXRlIGEgcmVnaW9uIHdpdGhpbiB0aGUgZWRpdG9yLiBUbyBiZXR0ZXIgdmlzdWFsaXplIGhvdyB0aGlzIHdvcmtzLCBpbWFnaW5lIGEgcmVjdGFuZ2xlLiBFYWNoIHF1YWRyYW50IG9mIHRoZSByZWN0YW5nbGUgaXMgYW5hbG9nb3VzIHRvIGEgcmFuZ2UsIGFzIHJhbmdlcyBjb250YWluIGEgc3RhcnRpbmcgcm93IGFuZCBzdGFydGluZyBjb2x1bW4sIGFuZCBhbiBlbmRpbmcgcm93LCBhbmQgZW5kaW5nIGNvbHVtbi5cbiAqKi9cbmNsYXNzIFJhbmdlIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBSYW5nZWAgb2JqZWN0IHdpdGggdGhlIGdpdmVuIHN0YXJ0aW5nIGFuZCBlbmRpbmcgcm93cyBhbmQgY29sdW1ucy5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0Um93XSBUaGUgc3RhcnRpbmcgcm93XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydENvbHVtbl0gVGhlIHN0YXJ0aW5nIGNvbHVtblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbZW5kUm93XSBUaGUgZW5kaW5nIHJvd1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbZW5kQ29sdW1uXSBUaGUgZW5kaW5nIGNvbHVtblxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihzdGFydFJvdywgc3RhcnRDb2x1bW4sIGVuZFJvdywgZW5kQ29sdW1uKSB7XG4gICAgICAgIC8qKkB0eXBlIHtQb2ludH0qL1xuICAgICAgICB0aGlzLnN0YXJ0ID0ge1xuICAgICAgICAgICAgcm93OiBzdGFydFJvdyxcbiAgICAgICAgICAgIGNvbHVtbjogc3RhcnRDb2x1bW5cbiAgICAgICAgfTtcbiAgICAgICAgLyoqQHR5cGUge1BvaW50fSovXG4gICAgICAgIHRoaXMuZW5kID0ge1xuICAgICAgICAgICAgcm93OiBlbmRSb3csXG4gICAgICAgICAgICBjb2x1bW46IGVuZENvbHVtblxuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBhbmQgb25seSBpZiB0aGUgc3RhcnRpbmcgcm93IGFuZCBjb2x1bW4sIGFuZCBlbmRpbmcgcm93IGFuZCBjb2x1bW4sIGFyZSBlcXVpdmFsZW50IHRvIHRob3NlIGdpdmVuIGJ5IGByYW5nZWAuXG4gICAgICogQHBhcmFtIHtJUmFuZ2V9IHJhbmdlIEEgcmFuZ2UgdG8gY2hlY2sgYWdhaW5zdFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGlzRXF1YWwocmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQucm93ID09PSByYW5nZS5zdGFydC5yb3cgJiZcbiAgICAgICAgICAgIHRoaXMuZW5kLnJvdyA9PT0gcmFuZ2UuZW5kLnJvdyAmJlxuICAgICAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gPT09IHJhbmdlLnN0YXJ0LmNvbHVtbiAmJlxuICAgICAgICAgICAgdGhpcy5lbmQuY29sdW1uID09PSByYW5nZS5lbmQuY29sdW1uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgY29udGFpbmluZyB0aGUgcmFuZ2UncyByb3cgYW5kIGNvbHVtbiBpbmZvcm1hdGlvbiwgZ2l2ZW4gbGlrZSB0aGlzOlxuICAgICAqIGBgYFxuICAgICAqICAgIFtzdGFydC5yb3cvc3RhcnQuY29sdW1uXSAtPiBbZW5kLnJvdy9lbmQuY29sdW1uXVxuICAgICAqIGBgYFxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAoXCJSYW5nZTogW1wiICsgdGhpcy5zdGFydC5yb3cgKyBcIi9cIiArIHRoaXMuc3RhcnQuY29sdW1uICtcbiAgICAgICAgICAgIFwiXSAtPiBbXCIgKyB0aGlzLmVuZC5yb3cgKyBcIi9cIiArIHRoaXMuZW5kLmNvbHVtbiArIFwiXVwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIHByb3ZpZGVkIGFyZSB3aXRoaW4gdGhlIGdpdmVuIHJhbmdlLiBUaGlzIGNhbiBiZXR0ZXIgYmUgZXhwcmVzc2VkIGFzIHJldHVybmluZyBgdHJ1ZWAgaWY6XG4gICAgICogYGBgamF2YXNjcmlwdFxuICAgICAqICAgIHRoaXMuc3RhcnQucm93IDw9IHJvdyA8PSB0aGlzLmVuZC5yb3cgJiZcbiAgICAgKiAgICB0aGlzLnN0YXJ0LmNvbHVtbiA8PSBjb2x1bW4gPD0gdGhpcy5lbmQuY29sdW1uXG4gICAgICogYGBgXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyB0byBjaGVjayBmb3JcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIEEgY29sdW1uIHRvIGNoZWNrIGZvclxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqIEByZWxhdGVkIFtbUmFuZ2UuY29tcGFyZV1dXG4gICAgICoqL1xuXG4gICAgY29udGFpbnMocm93LCBjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbikgPT0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyBgdGhpc2AgcmFuZ2UgKEEpIHdpdGggYW5vdGhlciByYW5nZSAoQikuXG4gICAgICogQHBhcmFtIHtJUmFuZ2V9IHJhbmdlIEEgcmFuZ2UgdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHJlbGF0ZWQgW1tSYW5nZS5jb21wYXJlXV1cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGlzIG1ldGhvZCByZXR1cm5zIG9uZSBvZiB0aGUgZm9sbG93aW5nIG51bWJlcnM6XG4gICAgICogKiBgLTJgOiAoQikgaXMgaW4gZnJvbnQgb2YgKEEpLCBhbmQgZG9lc24ndCBpbnRlcnNlY3Qgd2l0aCAoQSlcbiAgICAgKiAqIGAtMWA6IChCKSBiZWdpbnMgYmVmb3JlIChBKSBidXQgZW5kcyBpbnNpZGUgb2YgKEEpXG4gICAgICogKiBgMGA6IChCKSBpcyBjb21wbGV0ZWx5IGluc2lkZSBvZiAoQSlcbiAgICAgKiAqIGArMWA6IChCKSBiZWdpbnMgaW5zaWRlIG9mIChBKSBidXQgZW5kcyBvdXRzaWRlIG9mIChBKVxuICAgICAqICogYCsyYDogKEIpIGlzIGFmdGVyIChBKSBhbmQgZG9lc24ndCBpbnRlcnNlY3Qgd2l0aCAoQSlcbiAgICAgKiAqIGA0MmA6IEZUVyBzdGF0ZTogKEIpIGVuZHMgaW4gKEEpIGJ1dCBzdGFydHMgb3V0c2lkZSBvZiAoQSlcbiAgICAgKiovXG4gICAgY29tcGFyZVJhbmdlKHJhbmdlKSB7XG4gICAgICAgIHZhciBjbXAsXG4gICAgICAgICAgICBlbmQgPSByYW5nZS5lbmQsXG4gICAgICAgICAgICBzdGFydCA9IHJhbmdlLnN0YXJ0O1xuXG4gICAgICAgIGNtcCA9IHRoaXMuY29tcGFyZShlbmQucm93LCBlbmQuY29sdW1uKTtcbiAgICAgICAgaWYgKGNtcCA9PSAxKSB7XG4gICAgICAgICAgICBjbXAgPSB0aGlzLmNvbXBhcmUoc3RhcnQucm93LCBzdGFydC5jb2x1bW4pO1xuICAgICAgICAgICAgaWYgKGNtcCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNtcCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGNtcCA9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIC0yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY21wID0gdGhpcy5jb21wYXJlKHN0YXJ0LnJvdywgc3RhcnQuY29sdW1uKTtcbiAgICAgICAgICAgIGlmIChjbXAgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNtcCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBhcmVzIHRoZSByb3cgYW5kIGNvbHVtbiBvZiBgcGAgd2l0aCB0aGUgc3RhcnRpbmcgYW5kIGVuZGluZyBbW1BvaW50XV0ncyBvZiB0aGUgY2FsbGluZyByYW5nZSAoYnkgY2FsbGluZyBbW1JhbmdlLmNvbXBhcmVdXSkuXG4gICAgICogQHBhcmFtIHtQb2ludH0gcCBBIHBvaW50IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEByZWxhdGVkIFtbUmFuZ2UuY29tcGFyZV1dXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgY29tcGFyZVBvaW50KHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShwLnJvdywgcC5jb2x1bW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGUgc3RhcnQgYW5kIGVuZCBbW1BvaW50XV0ncyBvZiBgcmFuZ2VgIGFuZCBjb21wYXJlcyB0aGVtIHRvIHRoZSBjYWxsaW5nIHJhbmdlLiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHJhbmdlYCBpcyBjb250YWluZWQgd2l0aGluIHRoZSBjYWxsZXIncyByYW5nZS5cbiAgICAgKiBAcGFyYW0ge0lSYW5nZX0gcmFuZ2UgQSByYW5nZSB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiBAcmVsYXRlZCBbW1JhbmdlLmNvbXBhcmVQb2ludF1dXG4gICAgICoqL1xuICAgIGNvbnRhaW5zUmFuZ2UocmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZVBvaW50KHJhbmdlLnN0YXJ0KSA9PSAwICYmIHRoaXMuY29tcGFyZVBvaW50KHJhbmdlLmVuZCkgPT0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBwYXNzZWQgaW4gYHJhbmdlYCBpbnRlcnNlY3RzIHdpdGggdGhlIG9uZSBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICAgICAqIEBwYXJhbSB7SVJhbmdlfSByYW5nZSBBIHJhbmdlIHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpbnRlcnNlY3RzKHJhbmdlKSB7XG4gICAgICAgIHZhciBjbXAgPSB0aGlzLmNvbXBhcmVSYW5nZShyYW5nZSk7XG4gICAgICAgIHJldHVybiAoY21wID09IC0xIHx8IGNtcCA9PSAwIHx8IGNtcCA9PSAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY2FsbGVyJ3MgZW5kaW5nIHJvdyBpcyB0aGUgc2FtZSBhcyBgcm93YCwgYW5kIGlmIHRoZSBjYWxsZXIncyBlbmRpbmcgY29sdW1uIGlzIHRoZSBzYW1lIGFzIGBjb2x1bW5gLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgQSByb3cgdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBBIGNvbHVtbiB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiovXG4gICAgaXNFbmQocm93LCBjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kLnJvdyA9PSByb3cgJiYgdGhpcy5lbmQuY29sdW1uID09IGNvbHVtbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgY2FsbGVyJ3Mgc3RhcnRpbmcgcm93IGlzIHRoZSBzYW1lIGFzIGByb3dgLCBhbmQgaWYgdGhlIGNhbGxlcidzIHN0YXJ0aW5nIGNvbHVtbiBpcyB0aGUgc2FtZSBhcyBgY29sdW1uYC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IEEgcm93IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gQSBjb2x1bW4gdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGlzU3RhcnQocm93LCBjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQucm93ID09IHJvdyAmJiB0aGlzLnN0YXJ0LmNvbHVtbiA9PSBjb2x1bW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RhcnRpbmcgcm93IGFuZCBjb2x1bW4gZm9yIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcnxQb2ludH0gcm93IEEgcm93IHRvIHNldFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbY29sdW1uXSBBIGNvbHVtbiB0byBzZXRcbiAgICAgKlxuICAgICAqKi9cbiAgICBzZXRTdGFydChyb3csIGNvbHVtbikge1xuICAgICAgICBpZiAodHlwZW9mIHJvdyA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0LmNvbHVtbiA9IHJvdy5jb2x1bW47XG4gICAgICAgICAgICB0aGlzLnN0YXJ0LnJvdyA9IHJvdy5yb3c7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0LnJvdyA9IHJvdztcbiAgICAgICAgICAgIHRoaXMuc3RhcnQuY29sdW1uID0gY29sdW1uO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RhcnRpbmcgcm93IGFuZCBjb2x1bW4gZm9yIHRoZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcnxQb2ludH0gcm93IEEgcm93IHRvIHNldFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbY29sdW1uXSBBIGNvbHVtbiB0byBzZXRcbiAgICAgKlxuICAgICAqKi9cbiAgICBzZXRFbmQocm93LCBjb2x1bW4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiByb3cgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhpcy5lbmQuY29sdW1uID0gcm93LmNvbHVtbjtcbiAgICAgICAgICAgIHRoaXMuZW5kLnJvdyA9IHJvdy5yb3c7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVuZC5yb3cgPSByb3c7XG4gICAgICAgICAgICB0aGlzLmVuZC5jb2x1bW4gPSBjb2x1bW47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIGFyZSB3aXRoaW4gdGhlIGdpdmVuIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgQSByb3cgdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBBIGNvbHVtbiB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiBAcmVsYXRlZCBbW1JhbmdlLmNvbXBhcmVdXVxuICAgICAqKi9cbiAgICBpbnNpZGUocm93LCBjb2x1bW4pIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGFyZShyb3csIGNvbHVtbikgPT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNFbmQocm93LCBjb2x1bW4pIHx8IHRoaXMuaXNTdGFydChyb3csIGNvbHVtbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIGFyZSB3aXRoaW4gdGhlIGdpdmVuIHJhbmdlJ3Mgc3RhcnRpbmcgW1tQb2ludF1dLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3cgQSByb3cgdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBBIGNvbHVtbiB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKiBAcmVsYXRlZCBbW1JhbmdlLmNvbXBhcmVdXVxuICAgICAqKi9cbiAgICBpbnNpZGVTdGFydChyb3csIGNvbHVtbikge1xuICAgICAgICBpZiAodGhpcy5jb21wYXJlKHJvdywgY29sdW1uKSA9PSAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0VuZChyb3csIGNvbHVtbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIGFyZSB3aXRoaW4gdGhlIGdpdmVuIHJhbmdlJ3MgZW5kaW5nIFtbUG9pbnRdXS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IEEgcm93IHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gQSBjb2x1bW4gdG8gY29tcGFyZSB3aXRoXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICogQHJlbGF0ZWQgW1tSYW5nZS5jb21wYXJlXV1cbiAgICAgKlxuICAgICAqKi9cbiAgICBpbnNpZGVFbmQocm93LCBjb2x1bW4pIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGFyZShyb3csIGNvbHVtbikgPT0gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNTdGFydChyb3csIGNvbHVtbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIHdpdGggdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgW1tQb2ludF1dJ3Mgb2YgdGhlIGNhbGxpbmcgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIEEgY29sdW1uIHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoaXMgbWV0aG9kIHJldHVybnMgb25lIG9mIHRoZSBmb2xsb3dpbmcgbnVtYmVyczpcbiAgICAgKiAqIGAxYCBpZiBgcm93YCBpcyBncmVhdGVyIHRoYW4gdGhlIGNhbGxpbmcgcmFuZ2VcbiAgICAgKiAqIGAtMWAgaWYgYHJvd2AgaXMgbGVzcyB0aGVuIHRoZSBjYWxsaW5nIHJhbmdlXG4gICAgICogKiBgMGAgb3RoZXJ3aXNlXG4gICAgICpcbiAgICAgKiBJZiB0aGUgc3RhcnRpbmcgcm93IG9mIHRoZSBjYWxsaW5nIHJhbmdlIGlzIGVxdWFsIHRvIGByb3dgLCBhbmQ6XG4gICAgICogKiBgY29sdW1uYCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGNhbGxpbmcgcmFuZ2UncyBzdGFydGluZyBjb2x1bW4sIHRoaXMgcmV0dXJucyBgMGBcbiAgICAgKiAqIE90aGVyd2lzZSwgaXQgcmV0dXJucyAtMVxuICAgICAqXG4gICAgICogSWYgdGhlIGVuZGluZyByb3cgb2YgdGhlIGNhbGxpbmcgcmFuZ2UgaXMgZXF1YWwgdG8gYHJvd2AsIGFuZDpcbiAgICAgKiAqIGBjb2x1bW5gIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgY2FsbGluZyByYW5nZSdzIGVuZGluZyBjb2x1bW4sIHRoaXMgcmV0dXJucyBgMGBcbiAgICAgKiAqIE90aGVyd2lzZSwgaXQgcmV0dXJucyAxXG4gICAgICoqL1xuICAgIGNvbXBhcmUocm93LCBjb2x1bW4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlMaW5lKCkpIHtcbiAgICAgICAgICAgIGlmIChyb3cgPT09IHRoaXMuc3RhcnQucm93KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbiA8IHRoaXMuc3RhcnQuY29sdW1uID8gLTEgOiAoY29sdW1uID4gdGhpcy5lbmQuY29sdW1uID8gMSA6IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJvdyA8IHRoaXMuc3RhcnQucm93KVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuXG4gICAgICAgIGlmIChyb3cgPiB0aGlzLmVuZC5yb3cpXG4gICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICBpZiAodGhpcy5zdGFydC5yb3cgPT09IHJvdylcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW4gPj0gdGhpcy5zdGFydC5jb2x1bW4gPyAwIDogLTE7XG5cbiAgICAgICAgaWYgKHRoaXMuZW5kLnJvdyA9PT0gcm93KVxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbiA8PSB0aGlzLmVuZC5jb2x1bW4gPyAwIDogMTtcblxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIHdpdGggdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgW1tQb2ludF1dJ3Mgb2YgdGhlIGNhbGxpbmcgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIEEgY29sdW1uIHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoaXMgbWV0aG9kIHJldHVybnMgb25lIG9mIHRoZSBmb2xsb3dpbmcgbnVtYmVyczpcbiAgICAgKiAqIGAtMWAgaWYgY2FsbGluZyByYW5nZSdzIHN0YXJ0aW5nIGNvbHVtbiBhbmQgY2FsbGluZyByYW5nZSdzIHN0YXJ0aW5nIHJvdyBhcmUgZXF1YWwgYHJvd2AgYW5kIGBjb2x1bW5gXG4gICAgICogKiBPdGhlcndpc2UsIGl0IHJldHVybnMgdGhlIHZhbHVlIGFmdGVyIGNhbGxpbmcgW1tSYW5nZS5jb21wYXJlIGBjb21wYXJlKClgXV0uXG4gICAgICoqL1xuICAgIGNvbXBhcmVTdGFydChyb3csIGNvbHVtbikge1xuICAgICAgICBpZiAodGhpcy5zdGFydC5yb3cgPT0gcm93ICYmIHRoaXMuc3RhcnQuY29sdW1uID09IGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIHdpdGggdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgW1tQb2ludF1dJ3Mgb2YgdGhlIGNhbGxpbmcgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIEEgY29sdW1uIHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoaXMgbWV0aG9kIHJldHVybnMgb25lIG9mIHRoZSBmb2xsb3dpbmcgbnVtYmVyczpcbiAgICAgKiAqIGAxYCBpZiBjYWxsaW5nIHJhbmdlJ3MgZW5kaW5nIGNvbHVtbiBhbmQgY2FsbGluZyByYW5nZSdzIGVuZGluZyByb3cgYXJlIGVxdWFsIGByb3dgIGFuZCBgY29sdW1uYC5cbiAgICAgKiAqIE90aGVyd2lzZSwgaXQgcmV0dXJucyB0aGUgdmFsdWUgYWZ0ZXIgY2FsbGluZyBbW1JhbmdlLmNvbXBhcmUgYGNvbXBhcmUoKWBdXS5cbiAgICAgKi9cbiAgICBjb21wYXJlRW5kKHJvdywgY29sdW1uKSB7XG4gICAgICAgIGlmICh0aGlzLmVuZC5yb3cgPT0gcm93ICYmIHRoaXMuZW5kLmNvbHVtbiA9PSBjb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wYXJlcyB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIHdpdGggdGhlIHN0YXJ0IGFuZCBlbmQgW1tQb2ludF1dJ3Mgb2YgdGhlIGNhbGxpbmcgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIHJvdyB0byBjb21wYXJlIHdpdGhcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIEEgY29sdW1uIHRvIGNvbXBhcmUgd2l0aFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoaXMgbWV0aG9kIHJldHVybnMgb25lIG9mIHRoZSBmb2xsb3dpbmcgbnVtYmVyczpcbiAgICAgKiAqIGAxYCBpZiB0aGUgZW5kaW5nIHJvdyBvZiB0aGUgY2FsbGluZyByYW5nZSBpcyBlcXVhbCB0byBgcm93YCwgYW5kIHRoZSBlbmRpbmcgY29sdW1uIG9mIHRoZSBjYWxsaW5nIHJhbmdlIGlzIGVxdWFsIHRvIGBjb2x1bW5gXG4gICAgICogKiBgLTFgIGlmIHRoZSBzdGFydGluZyByb3cgb2YgdGhlIGNhbGxpbmcgcmFuZ2UgaXMgZXF1YWwgdG8gYHJvd2AsIGFuZCB0aGUgc3RhcnRpbmcgY29sdW1uIG9mIHRoZSBjYWxsaW5nIHJhbmdlIGlzIGVxdWFsIHRvIGBjb2x1bW5gXG4gICAgICogKiBPdGhlcndpc2UsIGl0IHJldHVybnMgdGhlIHZhbHVlIGFmdGVyIGNhbGxpbmcgW1tSYW5nZS5jb21wYXJlIGBjb21wYXJlKClgXV0uXG4gICAgICoqL1xuICAgIGNvbXBhcmVJbnNpZGUocm93LCBjb2x1bW4pIHtcbiAgICAgICAgaWYgKHRoaXMuZW5kLnJvdyA9PSByb3cgJiYgdGhpcy5lbmQuY29sdW1uID09IGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGFydC5yb3cgPT0gcm93ICYmIHRoaXMuc3RhcnQuY29sdW1uID09IGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwYXJ0IG9mIHRoZSBjdXJyZW50IGBSYW5nZWAgdGhhdCBvY2N1cnMgd2l0aGluIHRoZSBib3VuZGFyaWVzIG9mIGBmaXJzdFJvd2AgYW5kIGBsYXN0Um93YCBhcyBhIG5ldyBgUmFuZ2VgIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZmlyc3RSb3cgVGhlIHN0YXJ0aW5nIHJvd1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsYXN0Um93IFRoZSBlbmRpbmcgcm93XG4gICAgICogQHJldHVybnMge1JhbmdlfVxuICAgICoqL1xuICAgIGNsaXBSb3dzKGZpcnN0Um93LCBsYXN0Um93KSB7XG4gICAgICAgIGlmICh0aGlzLmVuZC5yb3cgPiBsYXN0Um93KVxuICAgICAgICAgICAgdmFyIGVuZCA9IHtyb3c6IGxhc3RSb3cgKyAxLCBjb2x1bW46IDB9O1xuICAgICAgICBlbHNlIGlmICh0aGlzLmVuZC5yb3cgPCBmaXJzdFJvdylcbiAgICAgICAgICAgIHZhciBlbmQgPSB7cm93OiBmaXJzdFJvdywgY29sdW1uOiAwfTtcblxuICAgICAgICBpZiAodGhpcy5zdGFydC5yb3cgPiBsYXN0Um93KVxuICAgICAgICAgICAgdmFyIHN0YXJ0ID0ge3JvdzogbGFzdFJvdyArIDEsIGNvbHVtbjogMH07XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhcnQucm93IDwgZmlyc3RSb3cpXG4gICAgICAgICAgICB2YXIgc3RhcnQgPSB7cm93OiBmaXJzdFJvdywgY29sdW1uOiAwfTtcblxuICAgICAgICByZXR1cm4gUmFuZ2UuZnJvbVBvaW50cyhzdGFydCB8fCB0aGlzLnN0YXJ0LCBlbmQgfHwgdGhpcy5lbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGByb3dgIGFuZCBgY29sdW1uYCBmb3IgdGhlIGNhbGxpbmcgcmFuZ2UgZm9yIGJvdGggdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgW1tQb2ludF1dJ3MuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBBIG5ldyByb3cgdG8gZXh0ZW5kIHRvXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBBIG5ldyBjb2x1bW4gdG8gZXh0ZW5kIHRvXG4gICAgICogQHJldHVybnMge1JhbmdlfSBUaGUgb3JpZ2luYWwgcmFuZ2Ugd2l0aCB0aGUgbmV3IHJvd1xuICAgICoqL1xuICAgIGV4dGVuZChyb3csIGNvbHVtbikge1xuICAgICAgICB2YXIgY21wID0gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTtcblxuICAgICAgICBpZiAoY21wID09IDApXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgZWxzZSBpZiAoY21wID09IC0xKVxuICAgICAgICAgICAgdmFyIHN0YXJ0ID0ge3Jvdzogcm93LCBjb2x1bW46IGNvbHVtbn07XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHZhciBlbmQgPSB7cm93OiByb3csIGNvbHVtbjogY29sdW1ufTtcblxuICAgICAgICByZXR1cm4gUmFuZ2UuZnJvbVBvaW50cyhzdGFydCB8fCB0aGlzLnN0YXJ0LCBlbmQgfHwgdGhpcy5lbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBjYWxsaW5nIHJhbmdlIGlzIGVtcHR5IChzdGFydGluZyBbW1BvaW50XV0gPT0gZW5kaW5nIFtbUG9pbnRdXSkuXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5zdGFydC5yb3cgPT09IHRoaXMuZW5kLnJvdyAmJiB0aGlzLnN0YXJ0LmNvbHVtbiA9PT0gdGhpcy5lbmQuY29sdW1uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcmFuZ2Ugc3BhbnMgYWNyb3NzIG11bHRpcGxlIGxpbmVzLlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICoqL1xuICAgIGlzTXVsdGlMaW5lKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuc3RhcnQucm93ICE9PSB0aGlzLmVuZC5yb3cpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBkdXBsaWNhdGUgb2YgdGhlIGNhbGxpbmcgcmFuZ2UuXG4gICAgICogQHJldHVybnMge1JhbmdlfVxuICAgICoqL1xuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gUmFuZ2UuZnJvbVBvaW50cyh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHJhbmdlIGNvbnRhaW5pbmcgdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgcm93cyBvZiB0aGUgb3JpZ2luYWwgcmFuZ2UsIGJ1dCB3aXRoIGEgY29sdW1uIHZhbHVlIG9mIGAwYC5cbiAgICAgKiBAcmV0dXJucyB7UmFuZ2V9XG4gICAgKiovXG4gICAgY29sbGFwc2VSb3dzKCkge1xuICAgICAgICBpZiAodGhpcy5lbmQuY29sdW1uID09IDApXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHRoaXMuc3RhcnQucm93LCAwLCBNYXRoLm1heCh0aGlzLnN0YXJ0LnJvdywgdGhpcy5lbmQucm93LTEpLCAwKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSYW5nZSh0aGlzLnN0YXJ0LnJvdywgMCwgdGhpcy5lbmQucm93LCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiB0aGUgY3VycmVudCBgUmFuZ2VgLCB0aGlzIGZ1bmN0aW9uIGNvbnZlcnRzIHRob3NlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgW1tQb2ludF1dJ3MgaW50byBzY3JlZW4gcG9zaXRpb25zLCBhbmQgdGhlbiByZXR1cm5zIGEgbmV3IGBSYW5nZWAgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IHNlc3Npb24gVGhlIGBFZGl0U2Vzc2lvbmAgdG8gcmV0cmlldmUgY29vcmRpbmF0ZXMgZnJvbVxuICAgICAqIEByZXR1cm5zIHtSYW5nZX1cbiAgICAqKi9cbiAgICB0b1NjcmVlblJhbmdlKHNlc3Npb24pIHtcbiAgICAgICAgdmFyIHNjcmVlblBvc1N0YXJ0ID0gc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24odGhpcy5zdGFydCk7XG4gICAgICAgIHZhciBzY3JlZW5Qb3NFbmQgPSBzZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLmVuZCk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShcbiAgICAgICAgICAgIHNjcmVlblBvc1N0YXJ0LnJvdywgc2NyZWVuUG9zU3RhcnQuY29sdW1uLFxuICAgICAgICAgICAgc2NyZWVuUG9zRW5kLnJvdywgc2NyZWVuUG9zRW5kLmNvbHVtblxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNoaWZ0IHRoZSBjYWxsaW5nIHJhbmdlIGJ5IGByb3dgIGFuZCBgY29sdW1uYCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW5cbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICovXG4gICAgbW92ZUJ5KHJvdywgY29sdW1uKSB7XG4gICAgICAgIHRoaXMuc3RhcnQucm93ICs9IHJvdztcbiAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gKz0gY29sdW1uO1xuICAgICAgICB0aGlzLmVuZC5yb3cgKz0gcm93O1xuICAgICAgICB0aGlzLmVuZC5jb2x1bW4gKz0gY29sdW1uO1xuICAgIH1cblxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYFJhbmdlYCBiYXNlZCBvbiB0aGUgYHN0YXJ0YCBbW1BvaW50XV0gYW5kIGBlbmRgIFtbUG9pbnRdXSBvZiB0aGUgZ2l2ZW4gcGFyYW1ldGVycy5cbiAqIEBwYXJhbSB7UG9pbnR9IHN0YXJ0IEEgc3RhcnRpbmcgcG9pbnQgdG8gdXNlXG4gKiBAcGFyYW0ge1BvaW50fSBlbmQgQW4gZW5kaW5nIHBvaW50IHRvIHVzZVxuICogQHJldHVybnMge1JhbmdlfVxuKiovXG5SYW5nZS5mcm9tUG9pbnRzID0gZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBuZXcgUmFuZ2Uoc3RhcnQucm93LCBzdGFydC5jb2x1bW4sIGVuZC5yb3csIGVuZC5jb2x1bW4pO1xufTtcblxuLyoqXG4gKiBDb21wYXJlcyBgcDFgIGFuZCBgcDJgIFtbUG9pbnRdXSdzLCB1c2VmdWwgZm9yIHNvcnRpbmdcbiAqIEBwYXJhbSB7UG9pbnR9IHAxXG4gKiBAcGFyYW0ge1BvaW50fSBwMlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xuUmFuZ2UuY29tcGFyZVBvaW50cyA9IGZ1bmN0aW9uKHAxLCBwMikge1xuICAgIHJldHVybiBwMS5yb3cgLSBwMi5yb3cgfHwgcDEuY29sdW1uIC0gcDIuY29sdW1uO1xufTtcblxuZXhwb3J0cy5SYW5nZSA9IFJhbmdlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/range.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/range_list.js":
/*!*************************************************!*\
  !*** ./node_modules/ace-code/src/range_list.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n */\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar comparePoints = Range.comparePoints;\n\nclass RangeList {\n    \n    constructor() {\n        this.ranges = [];\n        this.$bias = 1;\n    }\n\n    /**\n     * @param {Point} pos\n     * @param {boolean} [excludeEdges]\n     * @param {number} [startIndex]\n     * @return {number}\n     */\n    pointIndex(pos, excludeEdges, startIndex) {\n        var list = this.ranges;\n\n        for (var i = startIndex || 0; i < list.length; i++) {\n            var range = list[i];\n            var cmpEnd = comparePoints(pos, range.end);\n            if (cmpEnd > 0)\n                continue;\n            var cmpStart = comparePoints(pos, range.start);\n            if (cmpEnd === 0)\n                return excludeEdges && cmpStart !== 0 ? -i-2 : i;\n            if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))\n                return i;\n\n            return -i-1;\n        }\n        return -i - 1;\n    }\n\n    /**\n     * @param {Range} range\n     */\n    add(range) {\n        var excludeEdges = !range.isEmpty();\n        var startIndex = this.pointIndex(range.start, excludeEdges);\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n\n        var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);\n\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n        else\n            endIndex++;\n        return this.ranges.splice(startIndex, endIndex - startIndex, range);\n    }\n\n    /**\n     * @param {Range[]} list\n     */\n    addList(list) {\n        var removed = [];\n        for (var i = list.length; i--; ) {\n            removed.push.apply(removed, this.add(list[i]));\n        }\n        return removed;\n    }\n\n    /**\n     * @param {Point} pos\n     */\n    substractPoint(pos) {\n        var i = this.pointIndex(pos);\n\n        if (i >= 0)\n            return this.ranges.splice(i, 1);\n    }\n\n    // merge overlapping ranges\n    merge() {\n        var removed = [];\n        var list = this.ranges;\n        \n        list = list.sort(function(a, b) {\n            return comparePoints(a.start, b.start);\n        });\n        \n        var next = list[0], range;\n        for (var i = 1; i < list.length; i++) {\n            range = next;\n            next = list[i];\n            var cmp = comparePoints(range.end, next.start);\n            if (cmp < 0)\n                continue;\n\n            if (cmp == 0 && !range.isEmpty() && !next.isEmpty())\n                continue;\n\n            if (comparePoints(range.end, next.end) < 0) {\n                range.end.row = next.end.row;\n                range.end.column = next.end.column;\n            }\n\n            list.splice(i, 1);\n            removed.push(next);\n            next = range;\n            i--;\n        }\n        \n        this.ranges = list;\n\n        return removed;\n    }\n\n    /**\n     * @param {number} row\n     * @param {number} column\n     */\n    contains(row, column) {\n        return this.pointIndex({row: row, column: column}) >= 0;\n    }\n\n    /**\n     * @param {Point} pos\n     */\n    containsPoint(pos) {\n        return this.pointIndex(pos) >= 0;\n    }\n\n    /**\n     * @param {Point} pos\n     */\n    rangeAtPoint(pos) {\n        var i = this.pointIndex(pos);\n        if (i >= 0)\n            return this.ranges[i];\n    }\n\n\n    /**\n     * @param {number} startRow\n     * @param {number} endRow\n     */\n    clipRows(startRow, endRow) {\n        var list = this.ranges;\n        if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)\n            return [];\n\n        var startIndex = this.pointIndex({row: startRow, column: 0});\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n        //@ts-expect-error TODO: potential wrong argument\n        var endIndex = this.pointIndex({row: endRow, column: 0}, startIndex);\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n\n        var clipped = [];\n        for (var i = startIndex; i < endIndex; i++) {\n            clipped.push(list[i]);\n        }\n        return clipped;\n    }\n\n    removeAll() {\n        return this.ranges.splice(0, this.ranges.length);\n    }\n\n    /**\n     * @param {EditSession} session\n     */\n    attach(session) {\n        if (this.session)\n            this.detach();\n\n        this.session = session;\n        this.onChange = this.$onChange.bind(this);\n\n        this.session.on('change', this.onChange);\n    }\n\n    detach() {\n        if (!this.session)\n            return;\n        this.session.removeListener('change', this.onChange);\n        this.session = null;\n    }\n\n    /**\n     * @param {import(\"../ace-internal\").Ace.Delta} delta\n     */\n    $onChange(delta) {\n        var start = delta.start;\n        var end = delta.end;\n        var startRow = start.row;\n        var endRow = end.row;\n        var ranges = this.ranges;\n        for (var i = 0, n = ranges.length; i < n; i++) {\n            var r = ranges[i];\n            if (r.end.row >= startRow)\n                break;\n        }\n        \n        if (delta.action == \"insert\") {\n            var lineDif = endRow - startRow;\n            var colDiff = -start.column + end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                if (r.start.row > startRow)\n                    break;\n    \n                if (r.start.row == startRow && r.start.column >= start.column) {\n                    if (r.start.column == start.column && this.$bias <= 0) {\n                        // do nothing\n                    } else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                if (r.end.row == startRow && r.end.column >= start.column) {\n                    if (r.end.column == start.column && this.$bias < 0) {\n                        continue;\n                    }\n                    // special handling for the case when two ranges share an edge\n                    if (r.end.column == start.column && colDiff > 0 && i < n - 1) {\n                        if (r.end.column > r.start.column && r.end.column == ranges[i+1].start.column)\n                            r.end.column -= colDiff;\n                    }\n                    r.end.column += colDiff;\n                    r.end.row += lineDif;\n                }\n            }\n        } else {\n            var lineDif = startRow - endRow;\n            var colDiff = start.column - end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                \n                if (r.start.row > endRow)\n                    break;\n                    \n                if (r.end.row < endRow\n                    && (\n                        startRow < r.end.row \n                        || startRow == r.end.row && start.column < r.end.column\n                    )\n                ) {\n                    r.end.row = startRow;\n                    r.end.column = start.column;\n                }\n                else if (r.end.row == endRow) {\n                    if (r.end.column <= end.column) {\n                        if (lineDif || r.end.column > start.column) {\n                            r.end.column = start.column;\n                            r.end.row = start.row;\n                        }\n                    }\n                    else {\n                        r.end.column += colDiff;\n                        r.end.row += lineDif;\n                    }\n                }\n                else if (r.end.row > endRow) {\n                    r.end.row += lineDif;\n                }\n                \n                if (r.start.row < endRow\n                    && (\n                        startRow < r.start.row \n                        || startRow == r.start.row && start.column < r.start.column\n                    )\n                ) {\n                    r.start.row = startRow;\n                    r.start.column = start.column;\n                }\n                else if (r.start.row == endRow) {\n                    if (r.start.column <= end.column) {\n                        if (lineDif || r.start.column > start.column) {\n                            r.start.column = start.column;\n                            r.start.row = start.row;\n                        }\n                    }\n                    else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                else if (r.start.row > endRow) {\n                    r.start.row += lineDif;\n                }\n            }\n        }\n\n        if (lineDif != 0 && i < n) {\n            for (; i < n; i++) {\n                var r = ranges[i];\n                r.start.row += lineDif;\n                r.end.row += lineDif;\n            }\n        }\n    }\n\n}\n\nRangeList.prototype.comparePoints = comparePoints;\n\nexports.RangeList = RangeList;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3JhbmdlX2xpc3QuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsc0NBQXNDO0FBQ25ELGFBQWEscUNBQXFDO0FBQ2xEO0FBQ0EsWUFBWSxrRkFBd0I7QUFDcEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsU0FBUztBQUN4QixlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTs7QUFFQSxzQ0FBc0MsaUJBQWlCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxLQUFLO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxnQ0FBZ0MseUJBQXlCO0FBQ3pEOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMENBQTBDLHlCQUF5QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsdUJBQXVCO0FBQy9EO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsY0FBYztBQUMvQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUscUNBQXFDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvcmFuZ2VfbGlzdC5qcz85NmRiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9lZGl0X3Nlc3Npb25cIikuRWRpdFNlc3Npb259IEVkaXRTZXNzaW9uXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludH0gUG9pbnRcbiAqL1xudmFyIFJhbmdlID0gcmVxdWlyZShcIi4vcmFuZ2VcIikuUmFuZ2U7XG52YXIgY29tcGFyZVBvaW50cyA9IFJhbmdlLmNvbXBhcmVQb2ludHM7XG5cbmNsYXNzIFJhbmdlTGlzdCB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gW107XG4gICAgICAgIHRoaXMuJGJpYXMgPSAxO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2V4Y2x1ZGVFZGdlc11cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0SW5kZXhdXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHBvaW50SW5kZXgocG9zLCBleGNsdWRlRWRnZXMsIHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLnJhbmdlcztcblxuICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleCB8fCAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gbGlzdFtpXTtcbiAgICAgICAgICAgIHZhciBjbXBFbmQgPSBjb21wYXJlUG9pbnRzKHBvcywgcmFuZ2UuZW5kKTtcbiAgICAgICAgICAgIGlmIChjbXBFbmQgPiAwKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdmFyIGNtcFN0YXJ0ID0gY29tcGFyZVBvaW50cyhwb3MsIHJhbmdlLnN0YXJ0KTtcbiAgICAgICAgICAgIGlmIChjbXBFbmQgPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4Y2x1ZGVFZGdlcyAmJiBjbXBTdGFydCAhPT0gMCA/IC1pLTIgOiBpO1xuICAgICAgICAgICAgaWYgKGNtcFN0YXJ0ID4gMCB8fCAoY21wU3RhcnQgPT09IDAgJiYgIWV4Y2x1ZGVFZGdlcykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG5cbiAgICAgICAgICAgIHJldHVybiAtaS0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtaSAtIDE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSYW5nZX0gcmFuZ2VcbiAgICAgKi9cbiAgICBhZGQocmFuZ2UpIHtcbiAgICAgICAgdmFyIGV4Y2x1ZGVFZGdlcyA9ICFyYW5nZS5pc0VtcHR5KCk7XG4gICAgICAgIHZhciBzdGFydEluZGV4ID0gdGhpcy5wb2ludEluZGV4KHJhbmdlLnN0YXJ0LCBleGNsdWRlRWRnZXMpO1xuICAgICAgICBpZiAoc3RhcnRJbmRleCA8IDApXG4gICAgICAgICAgICBzdGFydEluZGV4ID0gLXN0YXJ0SW5kZXggLSAxO1xuXG4gICAgICAgIHZhciBlbmRJbmRleCA9IHRoaXMucG9pbnRJbmRleChyYW5nZS5lbmQsIGV4Y2x1ZGVFZGdlcywgc3RhcnRJbmRleCk7XG5cbiAgICAgICAgaWYgKGVuZEluZGV4IDwgMClcbiAgICAgICAgICAgIGVuZEluZGV4ID0gLWVuZEluZGV4IC0gMTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZW5kSW5kZXgrKztcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzLnNwbGljZShzdGFydEluZGV4LCBlbmRJbmRleCAtIHN0YXJ0SW5kZXgsIHJhbmdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1JhbmdlW119IGxpc3RcbiAgICAgKi9cbiAgICBhZGRMaXN0KGxpc3QpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IGxpc3QubGVuZ3RoOyBpLS07ICkge1xuICAgICAgICAgICAgcmVtb3ZlZC5wdXNoLmFwcGx5KHJlbW92ZWQsIHRoaXMuYWRkKGxpc3RbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVtb3ZlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwb3NcbiAgICAgKi9cbiAgICBzdWJzdHJhY3RQb2ludChwb3MpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLnBvaW50SW5kZXgocG9zKTtcblxuICAgICAgICBpZiAoaSA+PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzLnNwbGljZShpLCAxKTtcbiAgICB9XG5cbiAgICAvLyBtZXJnZSBvdmVybGFwcGluZyByYW5nZXNcbiAgICBtZXJnZSgpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBbXTtcbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLnJhbmdlcztcbiAgICAgICAgXG4gICAgICAgIGxpc3QgPSBsaXN0LnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVQb2ludHMoYS5zdGFydCwgYi5zdGFydCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdmFyIG5leHQgPSBsaXN0WzBdLCByYW5nZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByYW5nZSA9IG5leHQ7XG4gICAgICAgICAgICBuZXh0ID0gbGlzdFtpXTtcbiAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJlUG9pbnRzKHJhbmdlLmVuZCwgbmV4dC5zdGFydCk7XG4gICAgICAgICAgICBpZiAoY21wIDwgMClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgaWYgKGNtcCA9PSAwICYmICFyYW5nZS5pc0VtcHR5KCkgJiYgIW5leHQuaXNFbXB0eSgpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAoY29tcGFyZVBvaW50cyhyYW5nZS5lbmQsIG5leHQuZW5kKSA8IDApIHtcbiAgICAgICAgICAgICAgICByYW5nZS5lbmQucm93ID0gbmV4dC5lbmQucm93O1xuICAgICAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4gPSBuZXh0LmVuZC5jb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKG5leHQpO1xuICAgICAgICAgICAgbmV4dCA9IHJhbmdlO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJhbmdlcyA9IGxpc3Q7XG5cbiAgICAgICAgcmV0dXJuIHJlbW92ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2x1bW5cbiAgICAgKi9cbiAgICBjb250YWlucyhyb3csIGNvbHVtbikge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2ludEluZGV4KHtyb3c6IHJvdywgY29sdW1uOiBjb2x1bW59KSA+PSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc1xuICAgICAqL1xuICAgIGNvbnRhaW5zUG9pbnQocG9zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvaW50SW5kZXgocG9zKSA+PSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc1xuICAgICAqL1xuICAgIHJhbmdlQXRQb2ludChwb3MpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLnBvaW50SW5kZXgocG9zKTtcbiAgICAgICAgaWYgKGkgPj0gMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJhbmdlc1tpXTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmRSb3dcbiAgICAgKi9cbiAgICBjbGlwUm93cyhzdGFydFJvdywgZW5kUm93KSB7XG4gICAgICAgIHZhciBsaXN0ID0gdGhpcy5yYW5nZXM7XG4gICAgICAgIGlmIChsaXN0WzBdLnN0YXJ0LnJvdyA+IGVuZFJvdyB8fCBsaXN0W2xpc3QubGVuZ3RoIC0gMV0uc3RhcnQucm93IDwgc3RhcnRSb3cpXG4gICAgICAgICAgICByZXR1cm4gW107XG5cbiAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLnBvaW50SW5kZXgoe3Jvdzogc3RhcnRSb3csIGNvbHVtbjogMH0pO1xuICAgICAgICBpZiAoc3RhcnRJbmRleCA8IDApXG4gICAgICAgICAgICBzdGFydEluZGV4ID0gLXN0YXJ0SW5kZXggLSAxO1xuICAgICAgICAvL0B0cy1leHBlY3QtZXJyb3IgVE9ETzogcG90ZW50aWFsIHdyb25nIGFyZ3VtZW50XG4gICAgICAgIHZhciBlbmRJbmRleCA9IHRoaXMucG9pbnRJbmRleCh7cm93OiBlbmRSb3csIGNvbHVtbjogMH0sIHN0YXJ0SW5kZXgpO1xuICAgICAgICBpZiAoZW5kSW5kZXggPCAwKVxuICAgICAgICAgICAgZW5kSW5kZXggPSAtZW5kSW5kZXggLSAxO1xuXG4gICAgICAgIHZhciBjbGlwcGVkID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKykge1xuICAgICAgICAgICAgY2xpcHBlZC5wdXNoKGxpc3RbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbGlwcGVkO1xuICAgIH1cblxuICAgIHJlbW92ZUFsbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzLnNwbGljZSgwLCB0aGlzLnJhbmdlcy5sZW5ndGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IHNlc3Npb25cbiAgICAgKi9cbiAgICBhdHRhY2goc2Vzc2lvbikge1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uKVxuICAgICAgICAgICAgdGhpcy5kZXRhY2goKTtcblxuICAgICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy4kb25DaGFuZ2UuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNlc3Npb24ub24oJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UpO1xuICAgIH1cblxuICAgIGRldGFjaCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb24pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmVMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vbkNoYW5nZSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkRlbHRhfSBkZWx0YVxuICAgICAqL1xuICAgICRvbkNoYW5nZShkZWx0YSkge1xuICAgICAgICB2YXIgc3RhcnQgPSBkZWx0YS5zdGFydDtcbiAgICAgICAgdmFyIGVuZCA9IGRlbHRhLmVuZDtcbiAgICAgICAgdmFyIHN0YXJ0Um93ID0gc3RhcnQucm93O1xuICAgICAgICB2YXIgZW5kUm93ID0gZW5kLnJvdztcbiAgICAgICAgdmFyIHJhbmdlcyA9IHRoaXMucmFuZ2VzO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbiA9IHJhbmdlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgaWYgKHIuZW5kLnJvdyA+PSBzdGFydFJvdylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlbHRhLmFjdGlvbiA9PSBcImluc2VydFwiKSB7XG4gICAgICAgICAgICB2YXIgbGluZURpZiA9IGVuZFJvdyAtIHN0YXJ0Um93O1xuICAgICAgICAgICAgdmFyIGNvbERpZmYgPSAtc3RhcnQuY29sdW1uICsgZW5kLmNvbHVtbjtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSByYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHIuc3RhcnQucm93ID4gc3RhcnRSb3cpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmIChyLnN0YXJ0LnJvdyA9PSBzdGFydFJvdyAmJiByLnN0YXJ0LmNvbHVtbiA+PSBzdGFydC5jb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuc3RhcnQuY29sdW1uID09IHN0YXJ0LmNvbHVtbiAmJiB0aGlzLiRiaWFzIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHIuc3RhcnQuY29sdW1uICs9IGNvbERpZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICByLnN0YXJ0LnJvdyArPSBsaW5lRGlmO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyLmVuZC5yb3cgPT0gc3RhcnRSb3cgJiYgci5lbmQuY29sdW1uID49IHN0YXJ0LmNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoci5lbmQuY29sdW1uID09IHN0YXJ0LmNvbHVtbiAmJiB0aGlzLiRiaWFzIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gc3BlY2lhbCBoYW5kbGluZyBmb3IgdGhlIGNhc2Ugd2hlbiB0d28gcmFuZ2VzIHNoYXJlIGFuIGVkZ2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuZW5kLmNvbHVtbiA9PSBzdGFydC5jb2x1bW4gJiYgY29sRGlmZiA+IDAgJiYgaSA8IG4gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoci5lbmQuY29sdW1uID4gci5zdGFydC5jb2x1bW4gJiYgci5lbmQuY29sdW1uID09IHJhbmdlc1tpKzFdLnN0YXJ0LmNvbHVtbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmVuZC5jb2x1bW4gLT0gY29sRGlmZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByLmVuZC5jb2x1bW4gKz0gY29sRGlmZjtcbiAgICAgICAgICAgICAgICAgICAgci5lbmQucm93ICs9IGxpbmVEaWY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGxpbmVEaWYgPSBzdGFydFJvdyAtIGVuZFJvdztcbiAgICAgICAgICAgIHZhciBjb2xEaWZmID0gc3RhcnQuY29sdW1uIC0gZW5kLmNvbHVtbjtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSByYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHIuc3RhcnQucm93ID4gZW5kUm93KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHIuZW5kLnJvdyA8IGVuZFJvd1xuICAgICAgICAgICAgICAgICAgICAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFJvdyA8IHIuZW5kLnJvdyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHN0YXJ0Um93ID09IHIuZW5kLnJvdyAmJiBzdGFydC5jb2x1bW4gPCByLmVuZC5jb2x1bW5cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByLmVuZC5yb3cgPSBzdGFydFJvdztcbiAgICAgICAgICAgICAgICAgICAgci5lbmQuY29sdW1uID0gc3RhcnQuY29sdW1uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyLmVuZC5yb3cgPT0gZW5kUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyLmVuZC5jb2x1bW4gPD0gZW5kLmNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVEaWYgfHwgci5lbmQuY29sdW1uID4gc3RhcnQuY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgci5lbmQuY29sdW1uID0gc3RhcnQuY29sdW1uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuZW5kLnJvdyA9IHN0YXJ0LnJvdztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHIuZW5kLmNvbHVtbiArPSBjb2xEaWZmO1xuICAgICAgICAgICAgICAgICAgICAgICAgci5lbmQucm93ICs9IGxpbmVEaWY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoci5lbmQucm93ID4gZW5kUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHIuZW5kLnJvdyArPSBsaW5lRGlmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoci5zdGFydC5yb3cgPCBlbmRSb3dcbiAgICAgICAgICAgICAgICAgICAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRSb3cgPCByLnN0YXJ0LnJvdyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHN0YXJ0Um93ID09IHIuc3RhcnQucm93ICYmIHN0YXJ0LmNvbHVtbiA8IHIuc3RhcnQuY29sdW1uXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgci5zdGFydC5yb3cgPSBzdGFydFJvdztcbiAgICAgICAgICAgICAgICAgICAgci5zdGFydC5jb2x1bW4gPSBzdGFydC5jb2x1bW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHIuc3RhcnQucm93ID09IGVuZFJvdykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoci5zdGFydC5jb2x1bW4gPD0gZW5kLmNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVEaWYgfHwgci5zdGFydC5jb2x1bW4gPiBzdGFydC5jb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnN0YXJ0LmNvbHVtbiA9IHN0YXJ0LmNvbHVtbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnN0YXJ0LnJvdyA9IHN0YXJ0LnJvdztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHIuc3RhcnQuY29sdW1uICs9IGNvbERpZmY7XG4gICAgICAgICAgICAgICAgICAgICAgICByLnN0YXJ0LnJvdyArPSBsaW5lRGlmO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHIuc3RhcnQucm93ID4gZW5kUm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHIuc3RhcnQucm93ICs9IGxpbmVEaWY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxpbmVEaWYgIT0gMCAmJiBpIDwgbikge1xuICAgICAgICAgICAgZm9yICg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgciA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgICAgICByLnN0YXJ0LnJvdyArPSBsaW5lRGlmO1xuICAgICAgICAgICAgICAgIHIuZW5kLnJvdyArPSBsaW5lRGlmO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59XG5cblJhbmdlTGlzdC5wcm90b3R5cGUuY29tcGFyZVBvaW50cyA9IGNvbXBhcmVQb2ludHM7XG5cbmV4cG9ydHMuUmFuZ2VMaXN0ID0gUmFuZ2VMaXN0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/range_list.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/renderloop.js":
/*!*************************************************!*\
  !*** ./node_modules/ace-code/src/renderloop.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar event = __webpack_require__(/*! ./lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\n\n/**\n * Batches changes (that force something to be redrawn) in the background.\n **/\nclass RenderLoop {\n    \n    constructor(onRender, win) {\n        this.onRender = onRender;\n        this.pending = false;\n        this.changes = 0;\n        this.$recursionLimit = 2;\n        this.window = win || window;\n        var _self = this;\n        this._flush = function (ts) {\n            _self.pending = false;\n            var changes = _self.changes;\n\n            if (changes) {\n                event.blockIdle(100);\n                _self.changes = 0;\n                _self.onRender(changes);\n            }\n\n            if (_self.changes) {\n                if (_self.$recursionLimit-- < 0) return;\n                _self.schedule();\n            }\n            else {\n                _self.$recursionLimit = 2;\n            }\n        };\n    }\n\n    schedule(change) {\n        this.changes = this.changes | change;\n        if (this.changes && !this.pending) {\n            event.nextFrame(this._flush);\n            this.pending = true;\n        }\n    }\n\n    clear(change) {\n        var changes = this.changes;\n        this.changes = 0;\n        return changes;\n    }\n    \n}\n\nexports.RenderLoop = RenderLoop;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3JlbmRlcmxvb3AuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsWUFBWSxtQkFBTyxDQUFDLDZEQUFhOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvcmVuZGVybG9vcC5qcz84OWM1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgZXZlbnQgPSByZXF1aXJlKFwiLi9saWIvZXZlbnRcIik7XG5cbi8qKlxuICogQmF0Y2hlcyBjaGFuZ2VzICh0aGF0IGZvcmNlIHNvbWV0aGluZyB0byBiZSByZWRyYXduKSBpbiB0aGUgYmFja2dyb3VuZC5cbiAqKi9cbmNsYXNzIFJlbmRlckxvb3Age1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKG9uUmVuZGVyLCB3aW4pIHtcbiAgICAgICAgdGhpcy5vblJlbmRlciA9IG9uUmVuZGVyO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gMDtcbiAgICAgICAgdGhpcy4kcmVjdXJzaW9uTGltaXQgPSAyO1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbiB8fCB3aW5kb3c7XG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2ZsdXNoID0gZnVuY3Rpb24gKHRzKSB7XG4gICAgICAgICAgICBfc2VsZi5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgY2hhbmdlcyA9IF9zZWxmLmNoYW5nZXM7XG5cbiAgICAgICAgICAgIGlmIChjaGFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQuYmxvY2tJZGxlKDEwMCk7XG4gICAgICAgICAgICAgICAgX3NlbGYuY2hhbmdlcyA9IDA7XG4gICAgICAgICAgICAgICAgX3NlbGYub25SZW5kZXIoY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChfc2VsZi5jaGFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9zZWxmLiRyZWN1cnNpb25MaW1pdC0tIDwgMCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIF9zZWxmLnNjaGVkdWxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfc2VsZi4kcmVjdXJzaW9uTGltaXQgPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHNjaGVkdWxlKGNoYW5nZSkge1xuICAgICAgICB0aGlzLmNoYW5nZXMgPSB0aGlzLmNoYW5nZXMgfCBjaGFuZ2U7XG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXMgJiYgIXRoaXMucGVuZGluZykge1xuICAgICAgICAgICAgZXZlbnQubmV4dEZyYW1lKHRoaXMuX2ZsdXNoKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhcihjaGFuZ2UpIHtcbiAgICAgICAgdmFyIGNoYW5nZXMgPSB0aGlzLmNoYW5nZXM7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IDA7XG4gICAgICAgIHJldHVybiBjaGFuZ2VzO1xuICAgIH1cbiAgICBcbn1cblxuZXhwb3J0cy5SZW5kZXJMb29wID0gUmVuZGVyTG9vcDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/renderloop.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/scrollbar.js":
/*!************************************************!*\
  !*** ./node_modules/ace-code/src/scrollbar.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar dom = __webpack_require__(/*! ./lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar event = __webpack_require__(/*! ./lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\n// on ie maximal element height is smaller than what we get from 4-5K line document\n// so scrollbar doesn't work, as a workaround we do not set height higher than MAX_SCROLL_H\n// and rescale scrolltop\nvar MAX_SCROLL_H = 0x8000;\n\n/**\n * An abstract class representing a native scrollbar control.\n **/\nclass Scrollbar {\n    /**\n     * Creates a new `ScrollBar`. `parent` is the owner of the scroll bar.\n     * @param {Element} parent A DOM element\n     * @param {string} classSuffix\n     **/\n    constructor(parent, classSuffix) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_scrollbar ace_scrollbar\" + classSuffix;\n\n        this.inner = dom.createElement(\"div\");\n        this.inner.className = \"ace_scrollbar-inner\";\n        // on safari scrollbar is not shown for empty elements\n        this.inner.textContent = \"\\xa0\";\n        this.element.appendChild(this.inner);\n\n        parent.appendChild(this.element);\n\n        this.setVisible(false);\n        this.skipEvent = false;\n\n        // @ts-expect-error\n        event.addListener(this.element, \"scroll\", this.onScroll.bind(this));\n        event.addListener(this.element, \"mousedown\", event.preventDefault);\n    }\n\n    setVisible(isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    }\n}\noop.implement(Scrollbar.prototype, EventEmitter);\n\n/**\n * Represents a vertical scroll bar.\n **/\nclass VScrollBar extends Scrollbar {\n    /**\n     * Creates a new `VScrollBar`. `parent` is the owner of the scroll bar.\n     * @param {Element} parent A DOM element\n     * @param {Object} renderer An editor renderer\n     **/\n    constructor(parent, renderer) {\n        super(parent, '-v');\n        this.scrollTop = 0;\n        this.scrollHeight = 0;\n\n        // in OSX lion the scrollbars appear to have no width. In this case resize the\n        // element to show the scrollbar but still pretend that the scrollbar has a width\n        // of 0px\n        // in Firefox 6+ scrollbar is hidden if element has the same width as scrollbar\n        // make element a little bit wider to retain scrollbar when page is zoomed\n        renderer.$scrollbarWidth =\n            this.width = dom.scrollbarWidth(parent.ownerDocument);\n        this.inner.style.width =\n            this.element.style.width = (this.width || 15) + 5 + \"px\";\n        this.$minWidth = 0;\n    }\n\n\n    /**\n     * Emitted when the scroll bar, well, scrolls.\n     * @event scroll\n     * @internal\n     **/\n\n    onScroll() {\n        if (!this.skipEvent) {\n            this.scrollTop = this.element.scrollTop;\n            if (this.coeff != 1) {\n                var h = this.element.clientHeight / this.scrollHeight;\n                this.scrollTop = this.scrollTop * (1 - h) / (this.coeff - h);\n            }\n            this._emit(\"scroll\", {data: this.scrollTop});\n        }\n        this.skipEvent = false;\n    }\n\n    /**\n     * Returns the width of the scroll bar.\n     * @returns {Number}\n     **/\n    getWidth() {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    }\n\n    /**\n     * Sets the height of the scroll bar, in pixels.\n     * @param {Number} height The new height\n     **/\n    setHeight(height) {\n        this.element.style.height = height + \"px\";\n    }\n\n    /**\n     * Sets the scroll height of the scroll bar, in pixels.\n     * @param {Number} height The new scroll height\n     **/\n    setScrollHeight(height) {\n        this.scrollHeight = height;\n        if (height > MAX_SCROLL_H) {\n            this.coeff = MAX_SCROLL_H / height;\n            height = MAX_SCROLL_H;\n        } else if (this.coeff != 1) {\n            this.coeff = 1;\n        }\n        this.inner.style.height = height + \"px\";\n    }\n\n\n    /**\n     * Sets the scroll top of the scroll bar.\n     * @param {Number} scrollTop The new scroll top\n     **/\n    setScrollTop(scrollTop) {\n        // on chrome 17+ for small zoom levels after calling this function\n        // this.element.scrollTop != scrollTop which makes page to scroll up.\n        if (this.scrollTop != scrollTop) {\n            this.skipEvent = true;\n            this.scrollTop = scrollTop;\n            this.element.scrollTop = scrollTop * this.coeff;\n        }\n    }\n\n}\n\n/**\n * Sets the inner height of the scroll bar, in pixels.\n * @param {Number} height The new inner height\n * @deprecated Use setScrollHeight instead\n **/\nVScrollBar.prototype.setInnerHeight = VScrollBar.prototype.setScrollHeight;\n\n/**\n * Represents a horisontal scroll bar.\n **/\nclass HScrollBar extends Scrollbar {\n    /**\n     * Creates a new `HScrollBar`. `parent` is the owner of the scroll bar.\n     * @param {Element} parent A DOM element\n     * @param {Object} renderer An editor renderer\n     **/\n    constructor(parent, renderer) {\n        super(parent, '-h');\n        this.scrollLeft = 0;\n\n        // in OSX lion the scrollbars appear to have no width. In this case resize the\n        // element to show the scrollbar but still pretend that the scrollbar has a width\n        // of 0px\n        // in Firefox 6+ scrollbar is hidden if element has the same width as scrollbar\n        // make element a little bit wider to retain scrollbar when page is zoomed\n        this.height = renderer.$scrollbarWidth;\n        this.inner.style.height =\n            this.element.style.height = (this.height || 15) + 5 + \"px\";\n    }\n\n    /**\n     * Emitted when the scroll bar, well, scrolls.\n     * @event scroll\n     * @internal\n     **/\n    onScroll() {\n        if (!this.skipEvent) {\n            this.scrollLeft = this.element.scrollLeft;\n            this._emit(\"scroll\", {data: this.scrollLeft});\n        }\n        this.skipEvent = false;\n    }\n\n    /**\n     * Returns the height of the scroll bar.\n     * @returns {Number}\n     **/\n    getHeight() {\n        return this.isVisible ? this.height : 0;\n    }\n\n    /**\n     * Sets the width of the scroll bar, in pixels.\n     * @param {Number} width The new width\n     **/\n    setWidth(width) {\n        this.element.style.width = width + \"px\";\n    }\n\n    /**\n     * Sets the inner width of the scroll bar, in pixels.\n     * @param {Number} width The new inner width\n     * @deprecated Use setScrollWidth instead\n     **/\n    setInnerWidth(width) {\n        this.inner.style.width = width + \"px\";\n    }\n\n    /**\n     * Sets the scroll width of the scroll bar, in pixels.\n     * @param {Number} width The new scroll width\n     **/\n    setScrollWidth(width) {\n        this.inner.style.width = width + \"px\";\n    }\n\n    /**\n     * Sets the scroll left of the scroll bar.\n     * @param {Number} scrollLeft The new scroll left\n     **/\n    setScrollLeft(scrollLeft) {\n        // on chrome 17+ for small zoom levels after calling this function\n        // this.element.scrollTop != scrollTop which makes page to scroll up.\n        if (this.scrollLeft != scrollLeft) {\n            this.skipEvent = true;\n            this.scrollLeft = this.element.scrollLeft = scrollLeft;\n        }\n    }\n\n}\n\n\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\n\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3Njcm9sbGJhci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixVQUFVLG1CQUFPLENBQUMseURBQVc7QUFDN0IsVUFBVSxtQkFBTyxDQUFDLHlEQUFXO0FBQzdCLFlBQVksbUJBQU8sQ0FBQyw2REFBYTtBQUNqQyxtQkFBbUIsaUhBQTJDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHFCQUFxQjtBQUN2RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBLGlCQUFpQixlQUFlO0FBQ2hDLGtCQUFrQixlQUFlO0FBQ2pDLGtCQUFrQixlQUFlOztBQUVqQyxrQkFBa0I7QUFDbEIsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvc2Nyb2xsYmFyLmpzP2FlOGEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBvb3AgPSByZXF1aXJlKFwiLi9saWIvb29wXCIpO1xudmFyIGRvbSA9IHJlcXVpcmUoXCIuL2xpYi9kb21cIik7XG52YXIgZXZlbnQgPSByZXF1aXJlKFwiLi9saWIvZXZlbnRcIik7XG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyO1xuLy8gb24gaWUgbWF4aW1hbCBlbGVtZW50IGhlaWdodCBpcyBzbWFsbGVyIHRoYW4gd2hhdCB3ZSBnZXQgZnJvbSA0LTVLIGxpbmUgZG9jdW1lbnRcbi8vIHNvIHNjcm9sbGJhciBkb2Vzbid0IHdvcmssIGFzIGEgd29ya2Fyb3VuZCB3ZSBkbyBub3Qgc2V0IGhlaWdodCBoaWdoZXIgdGhhbiBNQVhfU0NST0xMX0hcbi8vIGFuZCByZXNjYWxlIHNjcm9sbHRvcFxudmFyIE1BWF9TQ1JPTExfSCA9IDB4ODAwMDtcblxuLyoqXG4gKiBBbiBhYnN0cmFjdCBjbGFzcyByZXByZXNlbnRpbmcgYSBuYXRpdmUgc2Nyb2xsYmFyIGNvbnRyb2wuXG4gKiovXG5jbGFzcyBTY3JvbGxiYXIge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYFNjcm9sbEJhcmAuIGBwYXJlbnRgIGlzIHRoZSBvd25lciBvZiB0aGUgc2Nyb2xsIGJhci5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudCBBIERPTSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzU3VmZml4XG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgY2xhc3NTdWZmaXgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBcImFjZV9zY3JvbGxiYXIgYWNlX3Njcm9sbGJhclwiICsgY2xhc3NTdWZmaXg7XG5cbiAgICAgICAgdGhpcy5pbm5lciA9IGRvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmlubmVyLmNsYXNzTmFtZSA9IFwiYWNlX3Njcm9sbGJhci1pbm5lclwiO1xuICAgICAgICAvLyBvbiBzYWZhcmkgc2Nyb2xsYmFyIGlzIG5vdCBzaG93biBmb3IgZW1wdHkgZWxlbWVudHNcbiAgICAgICAgdGhpcy5pbm5lci50ZXh0Q29udGVudCA9IFwiXFx4YTBcIjtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaW5uZXIpO1xuXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuXG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHRoaXMuc2tpcEV2ZW50ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBldmVudC5hZGRMaXN0ZW5lcih0aGlzLmVsZW1lbnQsIFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwuYmluZCh0aGlzKSk7XG4gICAgICAgIGV2ZW50LmFkZExpc3RlbmVyKHRoaXMuZWxlbWVudCwgXCJtb3VzZWRvd25cIiwgZXZlbnQucHJldmVudERlZmF1bHQpO1xuICAgIH1cblxuICAgIHNldFZpc2libGUoaXNWaXNpYmxlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gXCJcIiA6IFwibm9uZVwiO1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGlzVmlzaWJsZTtcbiAgICAgICAgdGhpcy5jb2VmZiA9IDE7XG4gICAgfVxufVxub29wLmltcGxlbWVudChTY3JvbGxiYXIucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSB2ZXJ0aWNhbCBzY3JvbGwgYmFyLlxuICoqL1xuY2xhc3MgVlNjcm9sbEJhciBleHRlbmRzIFNjcm9sbGJhciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgVlNjcm9sbEJhcmAuIGBwYXJlbnRgIGlzIHRoZSBvd25lciBvZiB0aGUgc2Nyb2xsIGJhci5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudCBBIERPTSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlbmRlcmVyIEFuIGVkaXRvciByZW5kZXJlclxuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHJlbmRlcmVyKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgJy12Jyk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgdGhpcy5zY3JvbGxIZWlnaHQgPSAwO1xuXG4gICAgICAgIC8vIGluIE9TWCBsaW9uIHRoZSBzY3JvbGxiYXJzIGFwcGVhciB0byBoYXZlIG5vIHdpZHRoLiBJbiB0aGlzIGNhc2UgcmVzaXplIHRoZVxuICAgICAgICAvLyBlbGVtZW50IHRvIHNob3cgdGhlIHNjcm9sbGJhciBidXQgc3RpbGwgcHJldGVuZCB0aGF0IHRoZSBzY3JvbGxiYXIgaGFzIGEgd2lkdGhcbiAgICAgICAgLy8gb2YgMHB4XG4gICAgICAgIC8vIGluIEZpcmVmb3ggNisgc2Nyb2xsYmFyIGlzIGhpZGRlbiBpZiBlbGVtZW50IGhhcyB0aGUgc2FtZSB3aWR0aCBhcyBzY3JvbGxiYXJcbiAgICAgICAgLy8gbWFrZSBlbGVtZW50IGEgbGl0dGxlIGJpdCB3aWRlciB0byByZXRhaW4gc2Nyb2xsYmFyIHdoZW4gcGFnZSBpcyB6b29tZWRcbiAgICAgICAgcmVuZGVyZXIuJHNjcm9sbGJhcldpZHRoID1cbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBkb20uc2Nyb2xsYmFyV2lkdGgocGFyZW50Lm93bmVyRG9jdW1lbnQpO1xuICAgICAgICB0aGlzLmlubmVyLnN0eWxlLndpZHRoID1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9ICh0aGlzLndpZHRoIHx8IDE1KSArIDUgKyBcInB4XCI7XG4gICAgICAgIHRoaXMuJG1pbldpZHRoID0gMDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEVtaXR0ZWQgd2hlbiB0aGUgc2Nyb2xsIGJhciwgd2VsbCwgc2Nyb2xscy5cbiAgICAgKiBAZXZlbnQgc2Nyb2xsXG4gICAgICogQGludGVybmFsXG4gICAgICoqL1xuXG4gICAgb25TY3JvbGwoKSB7XG4gICAgICAgIGlmICghdGhpcy5za2lwRXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gdGhpcy5lbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvZWZmICE9IDEpIHtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgLyB0aGlzLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsVG9wICogKDEgLSBoKSAvICh0aGlzLmNvZWZmIC0gaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9lbWl0KFwic2Nyb2xsXCIsIHtkYXRhOiB0aGlzLnNjcm9sbFRvcH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2tpcEV2ZW50ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXIuXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0V2lkdGgoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLmlzVmlzaWJsZSA/IHRoaXMud2lkdGggOiAwLCB0aGlzLiRtaW5XaWR0aCB8fCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBoZWlnaHQgb2YgdGhlIHNjcm9sbCBiYXIsIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaGVpZ2h0IFRoZSBuZXcgaGVpZ2h0XG4gICAgICoqL1xuICAgIHNldEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzY3JvbGwgaGVpZ2h0IG9mIHRoZSBzY3JvbGwgYmFyLCBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodCBUaGUgbmV3IHNjcm9sbCBoZWlnaHRcbiAgICAgKiovXG4gICAgc2V0U2Nyb2xsSGVpZ2h0KGhlaWdodCkge1xuICAgICAgICB0aGlzLnNjcm9sbEhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgaWYgKGhlaWdodCA+IE1BWF9TQ1JPTExfSCkge1xuICAgICAgICAgICAgdGhpcy5jb2VmZiA9IE1BWF9TQ1JPTExfSCAvIGhlaWdodDtcbiAgICAgICAgICAgIGhlaWdodCA9IE1BWF9TQ1JPTExfSDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvZWZmICE9IDEpIHtcbiAgICAgICAgICAgIHRoaXMuY29lZmYgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5uZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2Nyb2xsIHRvcCBvZiB0aGUgc2Nyb2xsIGJhci5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc2Nyb2xsVG9wIFRoZSBuZXcgc2Nyb2xsIHRvcFxuICAgICAqKi9cbiAgICBzZXRTY3JvbGxUb3Aoc2Nyb2xsVG9wKSB7XG4gICAgICAgIC8vIG9uIGNocm9tZSAxNysgZm9yIHNtYWxsIHpvb20gbGV2ZWxzIGFmdGVyIGNhbGxpbmcgdGhpcyBmdW5jdGlvblxuICAgICAgICAvLyB0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wICE9IHNjcm9sbFRvcCB3aGljaCBtYWtlcyBwYWdlIHRvIHNjcm9sbCB1cC5cbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVG9wICE9IHNjcm9sbFRvcCkge1xuICAgICAgICAgICAgdGhpcy5za2lwRXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wICogdGhpcy5jb2VmZjtcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG4vKipcbiAqIFNldHMgdGhlIGlubmVyIGhlaWdodCBvZiB0aGUgc2Nyb2xsIGJhciwgaW4gcGl4ZWxzLlxuICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodCBUaGUgbmV3IGlubmVyIGhlaWdodFxuICogQGRlcHJlY2F0ZWQgVXNlIHNldFNjcm9sbEhlaWdodCBpbnN0ZWFkXG4gKiovXG5WU2Nyb2xsQmFyLnByb3RvdHlwZS5zZXRJbm5lckhlaWdodCA9IFZTY3JvbGxCYXIucHJvdG90eXBlLnNldFNjcm9sbEhlaWdodDtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgaG9yaXNvbnRhbCBzY3JvbGwgYmFyLlxuICoqL1xuY2xhc3MgSFNjcm9sbEJhciBleHRlbmRzIFNjcm9sbGJhciB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgSFNjcm9sbEJhcmAuIGBwYXJlbnRgIGlzIHRoZSBvd25lciBvZiB0aGUgc2Nyb2xsIGJhci5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudCBBIERPTSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlbmRlcmVyIEFuIGVkaXRvciByZW5kZXJlclxuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHJlbmRlcmVyKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgJy1oJyk7XG4gICAgICAgIHRoaXMuc2Nyb2xsTGVmdCA9IDA7XG5cbiAgICAgICAgLy8gaW4gT1NYIGxpb24gdGhlIHNjcm9sbGJhcnMgYXBwZWFyIHRvIGhhdmUgbm8gd2lkdGguIEluIHRoaXMgY2FzZSByZXNpemUgdGhlXG4gICAgICAgIC8vIGVsZW1lbnQgdG8gc2hvdyB0aGUgc2Nyb2xsYmFyIGJ1dCBzdGlsbCBwcmV0ZW5kIHRoYXQgdGhlIHNjcm9sbGJhciBoYXMgYSB3aWR0aFxuICAgICAgICAvLyBvZiAwcHhcbiAgICAgICAgLy8gaW4gRmlyZWZveCA2KyBzY3JvbGxiYXIgaXMgaGlkZGVuIGlmIGVsZW1lbnQgaGFzIHRoZSBzYW1lIHdpZHRoIGFzIHNjcm9sbGJhclxuICAgICAgICAvLyBtYWtlIGVsZW1lbnQgYSBsaXR0bGUgYml0IHdpZGVyIHRvIHJldGFpbiBzY3JvbGxiYXIgd2hlbiBwYWdlIGlzIHpvb21lZFxuICAgICAgICB0aGlzLmhlaWdodCA9IHJlbmRlcmVyLiRzY3JvbGxiYXJXaWR0aDtcbiAgICAgICAgdGhpcy5pbm5lci5zdHlsZS5oZWlnaHQgPVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9ICh0aGlzLmhlaWdodCB8fCAxNSkgKyA1ICsgXCJweFwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVtaXR0ZWQgd2hlbiB0aGUgc2Nyb2xsIGJhciwgd2VsbCwgc2Nyb2xscy5cbiAgICAgKiBAZXZlbnQgc2Nyb2xsXG4gICAgICogQGludGVybmFsXG4gICAgICoqL1xuICAgIG9uU2Nyb2xsKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2tpcEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbExlZnQgPSB0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgIHRoaXMuX2VtaXQoXCJzY3JvbGxcIiwge2RhdGE6IHRoaXMuc2Nyb2xsTGVmdH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2tpcEV2ZW50ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaGVpZ2h0IG9mIHRoZSBzY3JvbGwgYmFyLlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWaXNpYmxlID8gdGhpcy5oZWlnaHQgOiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyLCBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIFRoZSBuZXcgd2lkdGhcbiAgICAgKiovXG4gICAgc2V0V2lkdGgod2lkdGgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaW5uZXIgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXIsIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGggVGhlIG5ldyBpbm5lciB3aWR0aFxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBzZXRTY3JvbGxXaWR0aCBpbnN0ZWFkXG4gICAgICoqL1xuICAgIHNldElubmVyV2lkdGgod2lkdGgpIHtcbiAgICAgICAgdGhpcy5pbm5lci5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNjcm9sbCB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhciwgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCBUaGUgbmV3IHNjcm9sbCB3aWR0aFxuICAgICAqKi9cbiAgICBzZXRTY3JvbGxXaWR0aCh3aWR0aCkge1xuICAgICAgICB0aGlzLmlubmVyLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2Nyb2xsIGxlZnQgb2YgdGhlIHNjcm9sbCBiYXIuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjcm9sbExlZnQgVGhlIG5ldyBzY3JvbGwgbGVmdFxuICAgICAqKi9cbiAgICBzZXRTY3JvbGxMZWZ0KHNjcm9sbExlZnQpIHtcbiAgICAgICAgLy8gb24gY2hyb21lIDE3KyBmb3Igc21hbGwgem9vbSBsZXZlbHMgYWZ0ZXIgY2FsbGluZyB0aGlzIGZ1bmN0aW9uXG4gICAgICAgIC8vIHRoaXMuZWxlbWVudC5zY3JvbGxUb3AgIT0gc2Nyb2xsVG9wIHdoaWNoIG1ha2VzIHBhZ2UgdG8gc2Nyb2xsIHVwLlxuICAgICAgICBpZiAodGhpcy5zY3JvbGxMZWZ0ICE9IHNjcm9sbExlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2tpcEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsTGVmdCA9IHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5cbmV4cG9ydHMuU2Nyb2xsQmFyID0gVlNjcm9sbEJhcjsgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0cy5TY3JvbGxCYXJWID0gVlNjcm9sbEJhcjsgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0cy5TY3JvbGxCYXJIID0gSFNjcm9sbEJhcjsgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuXG5leHBvcnRzLlZTY3JvbGxCYXIgPSBWU2Nyb2xsQmFyO1xuZXhwb3J0cy5IU2Nyb2xsQmFyID0gSFNjcm9sbEJhcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/scrollbar.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/scrollbar_custom.js":
/*!*******************************************************!*\
  !*** ./node_modules/ace-code/src/scrollbar_custom.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar dom = __webpack_require__(/*! ./lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar event = __webpack_require__(/*! ./lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\n\ndom.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\n  position: absolute;\n  background: rgba(128, 128, 128, 0.6);\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: 1px solid #bbb;\n  border-radius: 2px;\n  z-index: 8;\n}\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\n  position: absolute;\n  z-index: 6;\n  background: none;\n  overflow: hidden!important;\n}\n.ace_editor>.ace_sb-v {\n  z-index: 6;\n  right: 0;\n  top: 0;\n  width: 12px;\n}\n.ace_editor>.ace_sb-v div {\n  z-index: 8;\n  right: 0;\n  width: 100%;\n}\n.ace_editor>.ace_sb-h {\n  bottom: 0;\n  left: 0;\n  height: 12px;\n}\n.ace_editor>.ace_sb-h div {\n  bottom: 0;\n  height: 100%;\n}\n.ace_editor>.ace_sb_grabbed {\n  z-index: 8;\n  background: #000;\n}`, \"ace_scrollbar.css\", false);\n\n/**\n * An abstract class representing a native scrollbar control.\n **/\nclass ScrollBar {\n    /**\n     * Creates a new `ScrollBar`. `parent` is the owner of the scroll bar.\n     * @param {Element} parent A DOM element\n     * @param {string} classSuffix\n     **/\n    constructor(parent, classSuffix) {\n        this.element = dom.createElement(\"div\");\n        this.element.className = \"ace_sb\" + classSuffix;\n        this.inner = dom.createElement(\"div\");\n        this.inner.className = \"\";\n        this.element.appendChild(this.inner);\n        this.VScrollWidth = 12;\n        this.HScrollHeight = 12;\n\n        parent.appendChild(this.element);\n        this.setVisible(false);\n        this.skipEvent = false;\n\n        event.addMultiMouseDownListener(this.element, [500, 300, 300], this, \"onMouseDown\");\n    }\n\n    setVisible(isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    }\n}\n\noop.implement(ScrollBar.prototype, EventEmitter);\n/**\n * Represents a vertical scroll bar.\n * @class VScrollBar\n **/\n\n/**\n * Creates a new `VScrollBar`. `parent` is the owner of the scroll bar.\n * @param {Element} parent A DOM element\n * @param {Object} renderer An editor renderer\n *\n * @constructor\n **/\nclass VScrollBar extends ScrollBar {\n\n    constructor(parent, renderer) {\n        super(parent, '-v');\n        this.scrollTop = 0;\n        this.scrollHeight = 0;\n        this.parent = parent;\n        this.width = this.VScrollWidth;\n        this.renderer = renderer;\n        this.inner.style.width = this.element.style.width = (this.width || 15) + \"px\";\n        this.$minWidth = 0;\n    }\n\n    /**\n     * Emitted when the scroll thumb dragged or scrollbar canvas clicked.\n     * @internal\n     **/\n    onMouseDown(eType, e) {\n        if (eType !== \"mousedown\") return;\n\n        if (event.getButton(e) !== 0 || e.detail === 2) {\n            return;\n        }\n\n        if (e.target === this.inner) {\n            var self = this;\n            var mousePageY = e.clientY;\n\n            var onMouseMove = function (e) {\n                mousePageY = e.clientY;\n            };\n\n            var onMouseUp = function () {\n                clearInterval(timerId);\n            };\n            var startY = e.clientY;\n            var startTop = this.thumbTop;\n\n            var onScrollInterval = function () {\n                if (mousePageY === undefined) return;\n                var scrollTop = self.scrollTopFromThumbTop(startTop + mousePageY - startY);\n                if (scrollTop === self.scrollTop) return;\n                self._emit(\"scroll\", {data: scrollTop});\n            };\n\n            event.capture(this.inner, onMouseMove, onMouseUp);\n            var timerId = setInterval(onScrollInterval, 20);\n            return event.preventDefault(e);\n        }\n        var top = e.clientY - this.element.getBoundingClientRect().top - this.thumbHeight / 2;\n        this._emit(\"scroll\", {data: this.scrollTopFromThumbTop(top)});\n        return event.preventDefault(e);\n    }\n\n    getHeight() {\n        return this.height;\n    }\n\n    /**\n     * Returns new top for scroll thumb\n     * @param {Number}thumbTop\n     * @returns {Number}\n     **/\n    scrollTopFromThumbTop(thumbTop) {\n        var scrollTop = thumbTop * (this.pageHeight - this.viewHeight) / (this.slideHeight - this.thumbHeight);\n        scrollTop = scrollTop >> 0;\n        if (scrollTop < 0) {\n            scrollTop = 0;\n        }\n        else if (scrollTop > this.pageHeight - this.viewHeight) {\n            scrollTop = this.pageHeight - this.viewHeight;\n        }\n        return scrollTop;\n    }\n\n    /**\n     * Returns the width of the scroll bar.\n     * @returns {Number}\n     **/\n    getWidth() {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    }\n\n    /**\n     * Sets the height of the scroll bar, in pixels.\n     * @param {Number} height The new height\n     **/\n    setHeight(height) {\n        this.height = Math.max(0, height);\n        this.slideHeight = this.height;\n        this.viewHeight = this.height;\n\n        this.setScrollHeight(this.pageHeight, true);\n    }\n\n    /**\n     * Sets the inner and scroll height of the scroll bar, in pixels.\n     * @param {Number} height The new inner height\n     *\n     * @param {boolean} force Forcely update height\n     **/\n    setScrollHeight(height, force) {\n        if (this.pageHeight === height && !force) return;\n        this.pageHeight = height;\n        this.thumbHeight = this.slideHeight * this.viewHeight / this.pageHeight;\n\n        if (this.thumbHeight > this.slideHeight) this.thumbHeight = this.slideHeight;\n        if (this.thumbHeight < 15) this.thumbHeight = 15;\n\n        this.inner.style.height = this.thumbHeight + \"px\";\n\n        if (this.scrollTop > (this.pageHeight - this.viewHeight)) {\n            this.scrollTop = (this.pageHeight - this.viewHeight);\n            if (this.scrollTop < 0) this.scrollTop = 0;\n            this._emit(\"scroll\", {data: this.scrollTop});\n        }\n    }\n\n    /**\n     * Sets the scroll top of the scroll bar.\n     * @param {Number} scrollTop The new scroll top\n     **/\n    setScrollTop(scrollTop) {\n        this.scrollTop = scrollTop;\n        if (scrollTop < 0) scrollTop = 0;\n        this.thumbTop = scrollTop * (this.slideHeight - this.thumbHeight) / (this.pageHeight - this.viewHeight);\n        this.inner.style.top = this.thumbTop + \"px\";\n    }\n}\n\nVScrollBar.prototype.setInnerHeight = VScrollBar.prototype.setScrollHeight;\n\n/**\n * Represents a horizontal scroll bar.\n **/\nclass HScrollBar extends ScrollBar {\n    /**\n     * Creates a new `HScrollBar`. `parent` is the owner of the scroll bar.\n     * @param {Element} parent A DOM element\n     * @param {Object} renderer An editor renderer\n     **/\n    constructor(parent, renderer) {\n        super(parent, '-h');\n        this.scrollLeft = 0;\n        this.scrollWidth = 0;\n        this.height = this.HScrollHeight;\n        this.inner.style.height = this.element.style.height = (this.height || 12) + \"px\";\n        this.renderer = renderer;\n    }\n\n    /**\n     * Emitted when the scroll thumb dragged or scrollbar canvas clicked.\n     * @internal\n     **/\n    onMouseDown(eType, e) {\n        if (eType !== \"mousedown\") return;\n\n        if (event.getButton(e) !== 0 || e.detail === 2) {\n            return;\n        }\n\n\n        if (e.target === this.inner) {\n            var self = this;\n            var mousePageX = e.clientX;\n\n            var onMouseMove = function (e) {\n                mousePageX = e.clientX;\n            };\n\n            var onMouseUp = function () {\n                clearInterval(timerId);\n            };\n            var startX = e.clientX;\n            var startLeft = this.thumbLeft;\n\n            var onScrollInterval = function () {\n                if (mousePageX === undefined) return;\n                var scrollLeft = self.scrollLeftFromThumbLeft(startLeft + mousePageX - startX);\n                if (scrollLeft === self.scrollLeft) return;\n                self._emit(\"scroll\", {data: scrollLeft});\n            };\n\n            event.capture(this.inner, onMouseMove, onMouseUp);\n            var timerId = setInterval(onScrollInterval, 20);\n            return event.preventDefault(e);\n        }\n\n        var left = e.clientX - this.element.getBoundingClientRect().left - this.thumbWidth / 2;\n        this._emit(\"scroll\", {data: this.scrollLeftFromThumbLeft(left)});\n        return event.preventDefault(e);\n    }\n\n    /**\n     * Returns the height of the scroll bar.\n     * @returns {Number}\n     **/\n    getHeight() {\n        return this.isVisible ? this.height : 0;\n    }\n\n    /**\n     * Returns new left for scroll thumb\n     * @param {Number} thumbLeft\n     * @returns {Number}\n     **/\n    scrollLeftFromThumbLeft(thumbLeft) {\n        var scrollLeft = thumbLeft * (this.pageWidth - this.viewWidth) / (this.slideWidth - this.thumbWidth);\n        scrollLeft = scrollLeft >> 0;\n        if (scrollLeft < 0) {\n            scrollLeft = 0;\n        }\n        else if (scrollLeft > this.pageWidth - this.viewWidth) {\n            scrollLeft = this.pageWidth - this.viewWidth;\n        }\n        return scrollLeft;\n    }\n\n    /**\n     * Sets the width of the scroll bar, in pixels.\n     * @param {Number} width The new width\n     **/\n    setWidth(width) {\n        this.width = Math.max(0, width);\n        this.element.style.width = this.width + \"px\";\n        this.slideWidth = this.width;\n        this.viewWidth = this.width;\n\n        this.setScrollWidth(this.pageWidth, true);\n    }\n\n    /**\n     * Sets the inner and scroll width of the scroll bar, in pixels.\n     * @param {Number} width The new inner width\n     * @param {boolean} force Forcely update width\n     **/\n     setScrollWidth(width, force) {\n        if (this.pageWidth === width && !force) return;\n        this.pageWidth = width;\n        this.thumbWidth = this.slideWidth * this.viewWidth / this.pageWidth;\n\n        if (this.thumbWidth > this.slideWidth) this.thumbWidth = this.slideWidth;\n        if (this.thumbWidth < 15) this.thumbWidth = 15;\n        this.inner.style.width = this.thumbWidth + \"px\";\n\n        if (this.scrollLeft > (this.pageWidth - this.viewWidth)) {\n            this.scrollLeft = (this.pageWidth - this.viewWidth);\n            if (this.scrollLeft < 0) this.scrollLeft = 0;\n            this._emit(\"scroll\", {data: this.scrollLeft});\n        }\n    }\n\n\n    /**\n     * Sets the scroll left of the scroll bar.\n     * @param {Number} scrollLeft The new scroll left\n     **/\n    setScrollLeft(scrollLeft) {\n        this.scrollLeft = scrollLeft;\n        if (scrollLeft < 0) scrollLeft = 0;\n        this.thumbLeft = scrollLeft * (this.slideWidth - this.thumbWidth) / (this.pageWidth - this.viewWidth);\n        this.inner.style.left = (this.thumbLeft) + \"px\";\n    }\n\n}\n\nHScrollBar.prototype.setInnerWidth = HScrollBar.prototype.setScrollWidth;\n\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\n\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3Njcm9sbGJhcl9jdXN0b20uanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsVUFBVSxtQkFBTyxDQUFDLHlEQUFXO0FBQzdCLFVBQVUsbUJBQU8sQ0FBQyx5REFBVztBQUM3QixZQUFZLG1CQUFPLENBQUMsNkRBQWE7QUFDakMsbUJBQW1CLGlIQUEyQzs7QUFFOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZ0JBQWdCO0FBQ3REOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsc0NBQXNDO0FBQ3BFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxxQkFBcUI7QUFDdkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGlCQUFpQjtBQUN2RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhCQUE4Qix5Q0FBeUM7QUFDdkU7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxzQkFBc0I7QUFDeEQ7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxpQkFBaUIsZUFBZTtBQUNoQyxrQkFBa0IsZUFBZTtBQUNqQyxrQkFBa0IsZUFBZTs7QUFFakMsa0JBQWtCO0FBQ2xCLGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3Njcm9sbGJhcl9jdXN0b20uanM/NzFkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIG9vcCA9IHJlcXVpcmUoXCIuL2xpYi9vb3BcIik7XG52YXIgZG9tID0gcmVxdWlyZShcIi4vbGliL2RvbVwiKTtcbnZhciBldmVudCA9IHJlcXVpcmUoXCIuL2xpYi9ldmVudFwiKTtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG5cbmRvbS5pbXBvcnRDc3NTdHJpbmcoYC5hY2VfZWRpdG9yPi5hY2Vfc2ItdiBkaXYsIC5hY2VfZWRpdG9yPi5hY2Vfc2ItaCBkaXZ7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYmFja2dyb3VuZDogcmdiYSgxMjgsIDEyOCwgMTI4LCAwLjYpO1xuICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNiYmI7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgei1pbmRleDogODtcbn1cbi5hY2VfZWRpdG9yPi5hY2Vfc2ItdiwgLmFjZV9lZGl0b3I+LmFjZV9zYi1oIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB6LWluZGV4OiA2O1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBvdmVyZmxvdzogaGlkZGVuIWltcG9ydGFudDtcbn1cbi5hY2VfZWRpdG9yPi5hY2Vfc2ItdiB7XG4gIHotaW5kZXg6IDY7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMnB4O1xufVxuLmFjZV9lZGl0b3I+LmFjZV9zYi12IGRpdiB7XG4gIHotaW5kZXg6IDg7XG4gIHJpZ2h0OiAwO1xuICB3aWR0aDogMTAwJTtcbn1cbi5hY2VfZWRpdG9yPi5hY2Vfc2ItaCB7XG4gIGJvdHRvbTogMDtcbiAgbGVmdDogMDtcbiAgaGVpZ2h0OiAxMnB4O1xufVxuLmFjZV9lZGl0b3I+LmFjZV9zYi1oIGRpdiB7XG4gIGJvdHRvbTogMDtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuLmFjZV9lZGl0b3I+LmFjZV9zYl9ncmFiYmVkIHtcbiAgei1pbmRleDogODtcbiAgYmFja2dyb3VuZDogIzAwMDtcbn1gLCBcImFjZV9zY3JvbGxiYXIuY3NzXCIsIGZhbHNlKTtcblxuLyoqXG4gKiBBbiBhYnN0cmFjdCBjbGFzcyByZXByZXNlbnRpbmcgYSBuYXRpdmUgc2Nyb2xsYmFyIGNvbnRyb2wuXG4gKiovXG5jbGFzcyBTY3JvbGxCYXIge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYFNjcm9sbEJhcmAuIGBwYXJlbnRgIGlzIHRoZSBvd25lciBvZiB0aGUgc2Nyb2xsIGJhci5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudCBBIERPTSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzU3VmZml4XG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgY2xhc3NTdWZmaXgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBcImFjZV9zYlwiICsgY2xhc3NTdWZmaXg7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBkb20uY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5pbm5lci5jbGFzc05hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5pbm5lcik7XG4gICAgICAgIHRoaXMuVlNjcm9sbFdpZHRoID0gMTI7XG4gICAgICAgIHRoaXMuSFNjcm9sbEhlaWdodCA9IDEyO1xuXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0aGlzLnNraXBFdmVudCA9IGZhbHNlO1xuXG4gICAgICAgIGV2ZW50LmFkZE11bHRpTW91c2VEb3duTGlzdGVuZXIodGhpcy5lbGVtZW50LCBbNTAwLCAzMDAsIDMwMF0sIHRoaXMsIFwib25Nb3VzZURvd25cIik7XG4gICAgfVxuXG4gICAgc2V0VmlzaWJsZShpc1Zpc2libGUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyBcIlwiIDogXCJub25lXCI7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gaXNWaXNpYmxlO1xuICAgICAgICB0aGlzLmNvZWZmID0gMTtcbiAgICB9XG59XG5cbm9vcC5pbXBsZW1lbnQoU2Nyb2xsQmFyLnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyKTtcbi8qKlxuICogUmVwcmVzZW50cyBhIHZlcnRpY2FsIHNjcm9sbCBiYXIuXG4gKiBAY2xhc3MgVlNjcm9sbEJhclxuICoqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYFZTY3JvbGxCYXJgLiBgcGFyZW50YCBpcyB0aGUgb3duZXIgb2YgdGhlIHNjcm9sbCBiYXIuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHBhcmVudCBBIERPTSBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gcmVuZGVyZXIgQW4gZWRpdG9yIHJlbmRlcmVyXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiovXG5jbGFzcyBWU2Nyb2xsQmFyIGV4dGVuZHMgU2Nyb2xsQmFyIHtcblxuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgcmVuZGVyZXIpIHtcbiAgICAgICAgc3VwZXIocGFyZW50LCAnLXYnKTtcbiAgICAgICAgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgICAgICB0aGlzLnNjcm9sbEhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5WU2Nyb2xsV2lkdGg7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5pbm5lci5zdHlsZS53aWR0aCA9IHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9ICh0aGlzLndpZHRoIHx8IDE1KSArIFwicHhcIjtcbiAgICAgICAgdGhpcy4kbWluV2lkdGggPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVtaXR0ZWQgd2hlbiB0aGUgc2Nyb2xsIHRodW1iIGRyYWdnZWQgb3Igc2Nyb2xsYmFyIGNhbnZhcyBjbGlja2VkLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqKi9cbiAgICBvbk1vdXNlRG93bihlVHlwZSwgZSkge1xuICAgICAgICBpZiAoZVR5cGUgIT09IFwibW91c2Vkb3duXCIpIHJldHVybjtcblxuICAgICAgICBpZiAoZXZlbnQuZ2V0QnV0dG9uKGUpICE9PSAwIHx8IGUuZGV0YWlsID09PSAyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuaW5uZXIpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciBtb3VzZVBhZ2VZID0gZS5jbGllbnRZO1xuXG4gICAgICAgICAgICB2YXIgb25Nb3VzZU1vdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIG1vdXNlUGFnZVkgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgb25Nb3VzZVVwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHN0YXJ0WSA9IGUuY2xpZW50WTtcbiAgICAgICAgICAgIHZhciBzdGFydFRvcCA9IHRoaXMudGh1bWJUb3A7XG5cbiAgICAgICAgICAgIHZhciBvblNjcm9sbEludGVydmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChtb3VzZVBhZ2VZID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gc2VsZi5zY3JvbGxUb3BGcm9tVGh1bWJUb3Aoc3RhcnRUb3AgKyBtb3VzZVBhZ2VZIC0gc3RhcnRZKTtcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsVG9wID09PSBzZWxmLnNjcm9sbFRvcCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoXCJzY3JvbGxcIiwge2RhdGE6IHNjcm9sbFRvcH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZXZlbnQuY2FwdHVyZSh0aGlzLmlubmVyLCBvbk1vdXNlTW92ZSwgb25Nb3VzZVVwKTtcbiAgICAgICAgICAgIHZhciB0aW1lcklkID0gc2V0SW50ZXJ2YWwob25TY3JvbGxJbnRlcnZhbCwgMjApO1xuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0b3AgPSBlLmNsaWVudFkgLSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gdGhpcy50aHVtYkhlaWdodCAvIDI7XG4gICAgICAgIHRoaXMuX2VtaXQoXCJzY3JvbGxcIiwge2RhdGE6IHRoaXMuc2Nyb2xsVG9wRnJvbVRodW1iVG9wKHRvcCl9KTtcbiAgICAgICAgcmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KGUpO1xuICAgIH1cblxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgbmV3IHRvcCBmb3Igc2Nyb2xsIHRodW1iXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9dGh1bWJUb3BcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBzY3JvbGxUb3BGcm9tVGh1bWJUb3AodGh1bWJUb3ApIHtcbiAgICAgICAgdmFyIHNjcm9sbFRvcCA9IHRodW1iVG9wICogKHRoaXMucGFnZUhlaWdodCAtIHRoaXMudmlld0hlaWdodCkgLyAodGhpcy5zbGlkZUhlaWdodCAtIHRoaXMudGh1bWJIZWlnaHQpO1xuICAgICAgICBzY3JvbGxUb3AgPSBzY3JvbGxUb3AgPj4gMDtcbiAgICAgICAgaWYgKHNjcm9sbFRvcCA8IDApIHtcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2Nyb2xsVG9wID4gdGhpcy5wYWdlSGVpZ2h0IC0gdGhpcy52aWV3SGVpZ2h0KSB7XG4gICAgICAgICAgICBzY3JvbGxUb3AgPSB0aGlzLnBhZ2VIZWlnaHQgLSB0aGlzLnZpZXdIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjcm9sbFRvcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhci5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHRoaXMuaXNWaXNpYmxlID8gdGhpcy53aWR0aCA6IDAsIHRoaXMuJG1pbldpZHRoIHx8IDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGhlaWdodCBvZiB0aGUgc2Nyb2xsIGJhciwgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHQgVGhlIG5ldyBoZWlnaHRcbiAgICAgKiovXG4gICAgc2V0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KDAsIGhlaWdodCk7XG4gICAgICAgIHRoaXMuc2xpZGVIZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgdGhpcy52aWV3SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5zZXRTY3JvbGxIZWlnaHQodGhpcy5wYWdlSGVpZ2h0LCB0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbm5lciBhbmQgc2Nyb2xsIGhlaWdodCBvZiB0aGUgc2Nyb2xsIGJhciwgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHQgVGhlIG5ldyBpbm5lciBoZWlnaHRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9yY2UgRm9yY2VseSB1cGRhdGUgaGVpZ2h0XG4gICAgICoqL1xuICAgIHNldFNjcm9sbEhlaWdodChoZWlnaHQsIGZvcmNlKSB7XG4gICAgICAgIGlmICh0aGlzLnBhZ2VIZWlnaHQgPT09IGhlaWdodCAmJiAhZm9yY2UpIHJldHVybjtcbiAgICAgICAgdGhpcy5wYWdlSGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLnRodW1iSGVpZ2h0ID0gdGhpcy5zbGlkZUhlaWdodCAqIHRoaXMudmlld0hlaWdodCAvIHRoaXMucGFnZUhlaWdodDtcblxuICAgICAgICBpZiAodGhpcy50aHVtYkhlaWdodCA+IHRoaXMuc2xpZGVIZWlnaHQpIHRoaXMudGh1bWJIZWlnaHQgPSB0aGlzLnNsaWRlSGVpZ2h0O1xuICAgICAgICBpZiAodGhpcy50aHVtYkhlaWdodCA8IDE1KSB0aGlzLnRodW1iSGVpZ2h0ID0gMTU7XG5cbiAgICAgICAgdGhpcy5pbm5lci5zdHlsZS5oZWlnaHQgPSB0aGlzLnRodW1iSGVpZ2h0ICsgXCJweFwiO1xuXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbFRvcCA+ICh0aGlzLnBhZ2VIZWlnaHQgLSB0aGlzLnZpZXdIZWlnaHQpKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCA9ICh0aGlzLnBhZ2VIZWlnaHQgLSB0aGlzLnZpZXdIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVG9wIDwgMCkgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgdGhpcy5fZW1pdChcInNjcm9sbFwiLCB7ZGF0YTogdGhpcy5zY3JvbGxUb3B9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNjcm9sbCB0b3Agb2YgdGhlIHNjcm9sbCBiYXIuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjcm9sbFRvcCBUaGUgbmV3IHNjcm9sbCB0b3BcbiAgICAgKiovXG4gICAgc2V0U2Nyb2xsVG9wKHNjcm9sbFRvcCkge1xuICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgICAgaWYgKHNjcm9sbFRvcCA8IDApIHNjcm9sbFRvcCA9IDA7XG4gICAgICAgIHRoaXMudGh1bWJUb3AgPSBzY3JvbGxUb3AgKiAodGhpcy5zbGlkZUhlaWdodCAtIHRoaXMudGh1bWJIZWlnaHQpIC8gKHRoaXMucGFnZUhlaWdodCAtIHRoaXMudmlld0hlaWdodCk7XG4gICAgICAgIHRoaXMuaW5uZXIuc3R5bGUudG9wID0gdGhpcy50aHVtYlRvcCArIFwicHhcIjtcbiAgICB9XG59XG5cblZTY3JvbGxCYXIucHJvdG90eXBlLnNldElubmVySGVpZ2h0ID0gVlNjcm9sbEJhci5wcm90b3R5cGUuc2V0U2Nyb2xsSGVpZ2h0O1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBob3Jpem9udGFsIHNjcm9sbCBiYXIuXG4gKiovXG5jbGFzcyBIU2Nyb2xsQmFyIGV4dGVuZHMgU2Nyb2xsQmFyIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBIU2Nyb2xsQmFyYC4gYHBhcmVudGAgaXMgdGhlIG93bmVyIG9mIHRoZSBzY3JvbGwgYmFyLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gcGFyZW50IEEgRE9NIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVuZGVyZXIgQW4gZWRpdG9yIHJlbmRlcmVyXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgcmVuZGVyZXIpIHtcbiAgICAgICAgc3VwZXIocGFyZW50LCAnLWgnKTtcbiAgICAgICAgdGhpcy5zY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgdGhpcy5zY3JvbGxXaWR0aCA9IDA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5IU2Nyb2xsSGVpZ2h0O1xuICAgICAgICB0aGlzLmlubmVyLnN0eWxlLmhlaWdodCA9IHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAodGhpcy5oZWlnaHQgfHwgMTIpICsgXCJweFwiO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW1pdHRlZCB3aGVuIHRoZSBzY3JvbGwgdGh1bWIgZHJhZ2dlZCBvciBzY3JvbGxiYXIgY2FudmFzIGNsaWNrZWQuXG4gICAgICogQGludGVybmFsXG4gICAgICoqL1xuICAgIG9uTW91c2VEb3duKGVUeXBlLCBlKSB7XG4gICAgICAgIGlmIChlVHlwZSAhPT0gXCJtb3VzZWRvd25cIikgcmV0dXJuO1xuXG4gICAgICAgIGlmIChldmVudC5nZXRCdXR0b24oZSkgIT09IDAgfHwgZS5kZXRhaWwgPT09IDIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLmlubmVyKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgbW91c2VQYWdlWCA9IGUuY2xpZW50WDtcblxuICAgICAgICAgICAgdmFyIG9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBtb3VzZVBhZ2VYID0gZS5jbGllbnRYO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG9uTW91c2VVcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBzdGFydFggPSBlLmNsaWVudFg7XG4gICAgICAgICAgICB2YXIgc3RhcnRMZWZ0ID0gdGhpcy50aHVtYkxlZnQ7XG5cbiAgICAgICAgICAgIHZhciBvblNjcm9sbEludGVydmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChtb3VzZVBhZ2VYID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IHNlbGYuc2Nyb2xsTGVmdEZyb21UaHVtYkxlZnQoc3RhcnRMZWZ0ICsgbW91c2VQYWdlWCAtIHN0YXJ0WCk7XG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbExlZnQgPT09IHNlbGYuc2Nyb2xsTGVmdCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoXCJzY3JvbGxcIiwge2RhdGE6IHNjcm9sbExlZnR9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGV2ZW50LmNhcHR1cmUodGhpcy5pbm5lciwgb25Nb3VzZU1vdmUsIG9uTW91c2VVcCk7XG4gICAgICAgICAgICB2YXIgdGltZXJJZCA9IHNldEludGVydmFsKG9uU2Nyb2xsSW50ZXJ2YWwsIDIwKTtcbiAgICAgICAgICAgIHJldHVybiBldmVudC5wcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsZWZ0ID0gZS5jbGllbnRYIC0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSB0aGlzLnRodW1iV2lkdGggLyAyO1xuICAgICAgICB0aGlzLl9lbWl0KFwic2Nyb2xsXCIsIHtkYXRhOiB0aGlzLnNjcm9sbExlZnRGcm9tVGh1bWJMZWZ0KGxlZnQpfSk7XG4gICAgICAgIHJldHVybiBldmVudC5wcmV2ZW50RGVmYXVsdChlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBoZWlnaHQgb2YgdGhlIHNjcm9sbCBiYXIuXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1Zpc2libGUgPyB0aGlzLmhlaWdodCA6IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBuZXcgbGVmdCBmb3Igc2Nyb2xsIHRodW1iXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRodW1iTGVmdFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIHNjcm9sbExlZnRGcm9tVGh1bWJMZWZ0KHRodW1iTGVmdCkge1xuICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IHRodW1iTGVmdCAqICh0aGlzLnBhZ2VXaWR0aCAtIHRoaXMudmlld1dpZHRoKSAvICh0aGlzLnNsaWRlV2lkdGggLSB0aGlzLnRodW1iV2lkdGgpO1xuICAgICAgICBzY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdCA+PiAwO1xuICAgICAgICBpZiAoc2Nyb2xsTGVmdCA8IDApIHtcbiAgICAgICAgICAgIHNjcm9sbExlZnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNjcm9sbExlZnQgPiB0aGlzLnBhZ2VXaWR0aCAtIHRoaXMudmlld1dpZHRoKSB7XG4gICAgICAgICAgICBzY3JvbGxMZWZ0ID0gdGhpcy5wYWdlV2lkdGggLSB0aGlzLnZpZXdXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Nyb2xsTGVmdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhciwgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB3aWR0aCBUaGUgbmV3IHdpZHRoXG4gICAgICoqL1xuICAgIHNldFdpZHRoKHdpZHRoKSB7XG4gICAgICAgIHRoaXMud2lkdGggPSBNYXRoLm1heCgwLCB3aWR0aCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyBcInB4XCI7XG4gICAgICAgIHRoaXMuc2xpZGVXaWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgIHRoaXMudmlld1dpZHRoID0gdGhpcy53aWR0aDtcblxuICAgICAgICB0aGlzLnNldFNjcm9sbFdpZHRoKHRoaXMucGFnZVdpZHRoLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbm5lciBhbmQgc2Nyb2xsIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyLCBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIFRoZSBuZXcgaW5uZXIgd2lkdGhcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlIEZvcmNlbHkgdXBkYXRlIHdpZHRoXG4gICAgICoqL1xuICAgICBzZXRTY3JvbGxXaWR0aCh3aWR0aCwgZm9yY2UpIHtcbiAgICAgICAgaWYgKHRoaXMucGFnZVdpZHRoID09PSB3aWR0aCAmJiAhZm9yY2UpIHJldHVybjtcbiAgICAgICAgdGhpcy5wYWdlV2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy50aHVtYldpZHRoID0gdGhpcy5zbGlkZVdpZHRoICogdGhpcy52aWV3V2lkdGggLyB0aGlzLnBhZ2VXaWR0aDtcblxuICAgICAgICBpZiAodGhpcy50aHVtYldpZHRoID4gdGhpcy5zbGlkZVdpZHRoKSB0aGlzLnRodW1iV2lkdGggPSB0aGlzLnNsaWRlV2lkdGg7XG4gICAgICAgIGlmICh0aGlzLnRodW1iV2lkdGggPCAxNSkgdGhpcy50aHVtYldpZHRoID0gMTU7XG4gICAgICAgIHRoaXMuaW5uZXIuc3R5bGUud2lkdGggPSB0aGlzLnRodW1iV2lkdGggKyBcInB4XCI7XG5cbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsTGVmdCA+ICh0aGlzLnBhZ2VXaWR0aCAtIHRoaXMudmlld1dpZHRoKSkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxMZWZ0ID0gKHRoaXMucGFnZVdpZHRoIC0gdGhpcy52aWV3V2lkdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsTGVmdCA8IDApIHRoaXMuc2Nyb2xsTGVmdCA9IDA7XG4gICAgICAgICAgICB0aGlzLl9lbWl0KFwic2Nyb2xsXCIsIHtkYXRhOiB0aGlzLnNjcm9sbExlZnR9KTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc2Nyb2xsIGxlZnQgb2YgdGhlIHNjcm9sbCBiYXIuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjcm9sbExlZnQgVGhlIG5ldyBzY3JvbGwgbGVmdFxuICAgICAqKi9cbiAgICBzZXRTY3JvbGxMZWZ0KHNjcm9sbExlZnQpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgICAgaWYgKHNjcm9sbExlZnQgPCAwKSBzY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgdGhpcy50aHVtYkxlZnQgPSBzY3JvbGxMZWZ0ICogKHRoaXMuc2xpZGVXaWR0aCAtIHRoaXMudGh1bWJXaWR0aCkgLyAodGhpcy5wYWdlV2lkdGggLSB0aGlzLnZpZXdXaWR0aCk7XG4gICAgICAgIHRoaXMuaW5uZXIuc3R5bGUubGVmdCA9ICh0aGlzLnRodW1iTGVmdCkgKyBcInB4XCI7XG4gICAgfVxuXG59XG5cbkhTY3JvbGxCYXIucHJvdG90eXBlLnNldElubmVyV2lkdGggPSBIU2Nyb2xsQmFyLnByb3RvdHlwZS5zZXRTY3JvbGxXaWR0aDtcblxuZXhwb3J0cy5TY3JvbGxCYXIgPSBWU2Nyb2xsQmFyOyAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5leHBvcnRzLlNjcm9sbEJhclYgPSBWU2Nyb2xsQmFyOyAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5leHBvcnRzLlNjcm9sbEJhckggPSBIU2Nyb2xsQmFyOyAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5cbmV4cG9ydHMuVlNjcm9sbEJhciA9IFZTY3JvbGxCYXI7XG5leHBvcnRzLkhTY3JvbGxCYXIgPSBIU2Nyb2xsQmFyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/scrollbar_custom.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/search.js":
/*!*********************************************!*\
  !*** ./node_modules/ace-code/src/search.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n * @typedef {import(\"../ace-internal\").Ace.SearchOptions} SearchOptions\n */\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\n\n/**\n * A class designed to handle all sorts of text searches within a [[Document `Document`]].\n **/\nclass Search {\n\n    constructor() {\n        /**@type {Partial<SearchOptions>}*/\n        this.$options = {};\n    }\n\n    /**\n     * Sets the search options via the `options` parameter.\n     * @param {Partial<SearchOptions>} options An object containing all the new search properties\n     * @returns {Search}\n     * @chainable\n    **/\n    set(options) {\n        oop.mixin(this.$options, options);\n        return this;\n    }\n\n    /**\n     * [Returns an object containing all the search options.]{: #Search.getOptions}\n     * @returns {Partial<SearchOptions>}\n    **/\n    getOptions() {\n        return lang.copyObject(this.$options);\n    }\n\n    /**\n     * Sets the search options via the `options` parameter.\n     * @param {Partial<SearchOptions>} options object containing all the search propertie\n     * @related Search.set\n    **/\n    setOptions(options) {\n        this.$options = options;\n    }\n\n    /**\n     * Searches for `options.needle`. If found, this method returns the [[Range `Range`]] where the text first occurs. If `options.backwards` is `true`, the search goes backwards in the session.\n     * @param {EditSession} session The session to search with\n     * @returns {Range|false}\n     **/\n    find(session) {\n        var options = this.$options;\n        var iterator = this.$matchIterator(session, options);\n        if (!iterator)\n            return false;\n\n        var firstRange = null;\n        iterator.forEach(function(sr, sc, er, ec) {\n            firstRange = new Range(sr, sc, er, ec);\n            if (sc == ec && options.start && /**@type{Range}*/(options.start).start\n                && options.skipCurrent != false && firstRange.isEqual(/**@type{Range}*/(options.start))\n            ) {\n                firstRange = null;\n                return false;\n            }\n\n            return true;\n        });\n\n        return firstRange;\n    }\n\n    /**\n     * Searches for all occurrances `options.needle`. If found, this method returns an array of [[Range `Range`s]] where the text first occurs. If `options.backwards` is `true`, the search goes backwards in the session.\n     * @param {EditSession} session The session to search with\n     * @returns {Range[]}\n    **/\n    findAll(session) {\n        var options = this.$options;\n        if (!options.needle)\n            return [];\n        this.$assembleRegExp(options);\n\n        var range = options.range;\n        var lines = range\n            ? session.getLines(range.start.row, range.end.row)\n            : session.doc.getAllLines();\n\n        var ranges = [];\n        var re = options.re;\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var maxRow = lines.length - len;\n            var prevRange;\n            outer: for (var row = re.offset || 0; row <= maxRow; row++) {\n                for (var j = 0; j < len; j++)\n                    if (lines[row + j].search(re[j]) == -1)\n                        continue outer;\n\n                var startLine = lines[row];\n                var line = lines[row + len - 1];\n                var startIndex = startLine.length - startLine.match(re[0])[0].length;\n                var endIndex = line.match(re[len - 1])[0].length;\n\n                if (prevRange && prevRange.end.row === row &&\n                    prevRange.end.column > startIndex\n                ) {\n                    continue;\n                }\n                ranges.push(prevRange = new Range(\n                    row, startIndex, row + len - 1, endIndex\n                ));\n                if (len > 2)\n                    row = row + len - 2;\n            }\n        } else {\n            for (var i = 0; i < lines.length; i++) {\n                var matches = lang.getMatchOffsets(lines[i], re);\n                for (var j = 0; j < matches.length; j++) {\n                    var match = matches[j];\n                    ranges.push(new Range(i, match.offset, i, match.offset + match.length));\n                }\n            }\n        }\n\n        if (range) {\n            var startColumn = range.start.column;\n            var endColumn = range.end.column;\n            var i = 0, j = ranges.length - 1;\n            while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == 0)\n                i++;\n\n            var endRow = range.end.row - range.start.row;\n            while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == endRow)\n                j--;\n\n            ranges = ranges.slice(i, j + 1);\n            for (i = 0, j = ranges.length; i < j; i++) {\n                ranges[i].start.row += range.start.row;\n                ranges[i].end.row += range.start.row;\n            }\n        }\n\n        return ranges;\n    }\n\n    /**\n     * Searches for `options.needle` in `input`, and, if found, replaces it with `replacement`.\n     * @param {String} input The text to search in\n     * @param {any} replacement The replacing text\n     * + (String): If `options.regExp` is `true`, this function returns `input` with the replacement already made. Otherwise, this function just returns `replacement`.<br/>\n     * If `options.needle` was not found, this function returns `null`.\n     *\n     *\n     * @returns {String}\n    **/\n    replace(input, replacement) {\n        var options = this.$options;\n\n        var re = this.$assembleRegExp(options);\n        if (options.$isMultiLine)\n            return replacement;\n\n        if (!re)\n            return;\n\n        var match = re.exec(input);\n        if (!match || match[0].length != input.length)\n            return null;\n        if (!options.regExp) {\n            replacement = replacement.replace(/\\$/g, \"$$$$\");\n        }\n\n        replacement = input.replace(re, replacement);\n        if (options.preserveCase) {\n            replacement = replacement.split(\"\");\n            for (var i = Math.min(input.length, input.length); i--; ) {\n                var ch = input[i];\n                if (ch && ch.toLowerCase() != ch)\n                    replacement[i] = replacement[i].toUpperCase();\n                else\n                    replacement[i] = replacement[i].toLowerCase();\n            }\n            replacement = replacement.join(\"\");\n        }\n\n        return replacement;\n    }\n\n    /**\n     *\n     * @param {Partial<SearchOptions>} options\n     * @param {boolean} [$disableFakeMultiline]\n     * @return {RegExp|boolean|*[]|*}\n     */\n    $assembleRegExp(options, $disableFakeMultiline) {\n        if (options.needle instanceof RegExp)\n            return options.re = options.needle;\n\n        var needle = options.needle;\n\n        if (!options.needle)\n            return options.re = false;\n\n        if (!options.regExp)\n            needle = lang.escapeRegExp(needle);\n\n        var modifier = options.caseSensitive ? \"gm\" : \"gmi\";\n\n        try {\n            new RegExp(needle, \"u\");\n            options.$supportsUnicodeFlag = true;\n            modifier += \"u\";\n        } catch (e) {\n            options.$supportsUnicodeFlag = false; //left for backward compatibility with previous versions for cases like /ab\\{2}/gu\n        }\n\n        if (options.wholeWord)\n            needle = addWordBoundary(needle, options);\n\n        options.$isMultiLine = !$disableFakeMultiline && /[\\n\\r]/.test(needle);\n        if (options.$isMultiLine)\n            return options.re = this.$assembleMultilineRegExp(needle, modifier);\n\n        try {\n            /**@type {RegExp|false}*/\n            var re = new RegExp(needle, modifier);\n        } catch(e) {\n            re = false;\n        }\n        return options.re = re;\n    }\n\n    /**\n     * @param {string} needle\n     * @param {string} modifier\n     */\n    $assembleMultilineRegExp(needle, modifier) {\n        var parts = needle.replace(/\\r\\n|\\r|\\n/g, \"$\\n^\").split(\"\\n\");\n        var re = [];\n        for (var i = 0; i < parts.length; i++) try {\n            re.push(new RegExp(parts[i], modifier));\n        } catch(e) {\n            return false;\n        }\n        return re;\n    }\n\n    /**\n     * @param {EditSession} session\n     */\n    $matchIterator(session, options) {\n        var re = this.$assembleRegExp(options);\n        if (!re)\n            return false;\n        var backwards = options.backwards == true;\n        var skipCurrent = options.skipCurrent != false;\n        var supportsUnicodeFlag = re.unicode;\n\n        var range = options.range;\n        var start = options.start;\n        if (!start)\n            start = range ? range[backwards ? \"end\" : \"start\"] : session.selection.getRange();\n\n        if (start.start)\n            start = start[skipCurrent != backwards ? \"end\" : \"start\"];\n\n        var firstRow = range ? range.start.row : 0;\n        var lastRow = range ? range.end.row : session.getLength() - 1;\n\n        if (backwards) {\n            var forEach = function(callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row--; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = lastRow, firstRow = start.row; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n            };\n        }\n        else {\n            var forEach = function(callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row = row + 1; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = firstRow, lastRow = start.row; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n            };\n        }\n\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var forEachInLine = function(row, offset, callback) {\n                var startRow = backwards ? row - len + 1 : row;\n                if (startRow < 0 || startRow + len > session.getLength()) return;\n                var line = session.getLine(startRow);\n                var startIndex = line.search(re[0]);\n                if (!backwards && startIndex < offset || startIndex === -1) return;\n                for (var i = 1; i < len; i++) {\n                    line = session.getLine(startRow + i);\n                    if (line.search(re[i]) == -1)\n                        return;\n                }\n                var endIndex = line.match(re[len - 1])[0].length;\n                if (backwards && endIndex > offset) return;\n                if (callback(startRow, startIndex, startRow + len - 1, endIndex))\n                    return true;\n            };\n        }\n        else if (backwards) {\n            var forEachInLine = function(row, endIndex, callback) {\n                var line = session.getLine(row);\n                var matches = [];\n                var m, last = 0;\n                re.lastIndex = 0;\n                while((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (!length) {\n                        if (last >= line.length) break;\n                        re.lastIndex = last += lang.skipEmptyMatch(line, last, supportsUnicodeFlag);\n                    }\n                    if (m.index + length > endIndex)\n                        break;\n                    matches.push(m.index, length);\n                }\n                for (var i = matches.length - 1; i >= 0; i -= 2) {\n                    var column = matches[i - 1];\n                    var length = matches[i];\n                    if (callback(row, column, row, column + length))\n                        return true;\n                }\n            };\n        }\n        else {\n            var forEachInLine = function(row, startIndex, callback) {\n                var line = session.getLine(row);\n                var last;\n                var m;\n                re.lastIndex = startIndex;\n                while((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (callback(row, last, row,last + length))\n                        return true;\n                    if (!length) {\n                        re.lastIndex = last += lang.skipEmptyMatch(line, last, supportsUnicodeFlag);\n                        if (last >= line.length) return false;\n                    }\n                }\n            };\n        }\n        return {forEach: forEach};\n    }\n\n}\n\n/**\n *\n * @param {string} needle\n * @param {Partial<SearchOptions>} options\n * @return {string}\n */\nfunction addWordBoundary(needle, options) {\n    let supportsLookbehind = lang.supportsLookbehind();\n\n    function wordBoundary(c, firstChar = true) {\n        let wordRegExp = supportsLookbehind && options.$supportsUnicodeFlag ? new RegExp(\"[\\\\p{L}\\\\p{N}_]\",\"u\") : new RegExp(\"\\\\w\");\n\n        if (wordRegExp.test(c) || options.regExp) {\n            if (supportsLookbehind && options.$supportsUnicodeFlag) {\n                if (firstChar) return \"(?<=^|[^\\\\p{L}\\\\p{N}_])\";\n                return \"(?=[^\\\\p{L}\\\\p{N}_]|$)\";\n            }\n            return \"\\\\b\";\n        }\n        return \"\";\n    }\n\n    let needleArray = Array.from(needle);\n    let firstChar = needleArray[0];\n    let lastChar = needleArray[needleArray.length - 1];\n\n    return wordBoundary(firstChar) + needle + wordBoundary(lastChar, false);\n}\n\nexports.Search = Search;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3NlYXJjaC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsYUFBYSxzQ0FBc0M7QUFDbkQsYUFBYSw2Q0FBNkM7QUFDMUQ7QUFDQSxXQUFXLG1CQUFPLENBQUMsMkRBQVk7QUFDL0IsVUFBVSxtQkFBTyxDQUFDLHlEQUFXO0FBQzdCLFlBQVksa0ZBQXdCOztBQUVwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQix1QkFBdUI7QUFDekM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUE4RDtBQUM5RCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsd0JBQXdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxNQUFNO0FBQzVELCtFQUErRSxNQUFNO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZUFBZTtBQUNqRSxnQ0FBZ0MsU0FBUztBQUN6QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBLGdDQUFnQyxvQkFBb0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxLQUFLO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSx3QkFBd0I7QUFDdkMsZUFBZSxTQUFTO0FBQ3hCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysa0RBQWtELDZFQUE2RSxFQUFFO0FBQ2pJOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLGFBQWE7QUFDbkM7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlCQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxpQkFBaUI7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdCQUFnQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxnQkFBZ0I7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxRQUFRO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyx3QkFBd0I7QUFDbkMsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtGQUErRixFQUFFLElBQUksRUFBRTs7QUFFdkc7QUFDQTtBQUNBLG1EQUFtRCxFQUFFLElBQUksRUFBRTtBQUMzRCxpQ0FBaUMsRUFBRSxJQUFJLEVBQUU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxjQUFjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvc2VhcmNoLmpzP2ZhNDAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2VkaXRfc2Vzc2lvblwiKS5FZGl0U2Vzc2lvbn0gRWRpdFNlc3Npb25cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlNlYXJjaE9wdGlvbnN9IFNlYXJjaE9wdGlvbnNcbiAqL1xudmFyIGxhbmcgPSByZXF1aXJlKFwiLi9saWIvbGFuZ1wiKTtcbnZhciBvb3AgPSByZXF1aXJlKFwiLi9saWIvb29wXCIpO1xudmFyIFJhbmdlID0gcmVxdWlyZShcIi4vcmFuZ2VcIikuUmFuZ2U7XG5cbi8qKlxuICogQSBjbGFzcyBkZXNpZ25lZCB0byBoYW5kbGUgYWxsIHNvcnRzIG9mIHRleHQgc2VhcmNoZXMgd2l0aGluIGEgW1tEb2N1bWVudCBgRG9jdW1lbnRgXV0uXG4gKiovXG5jbGFzcyBTZWFyY2gge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKkB0eXBlIHtQYXJ0aWFsPFNlYXJjaE9wdGlvbnM+fSovXG4gICAgICAgIHRoaXMuJG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzZWFyY2ggb3B0aW9ucyB2aWEgdGhlIGBvcHRpb25zYCBwYXJhbWV0ZXIuXG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPFNlYXJjaE9wdGlvbnM+fSBvcHRpb25zIEFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgbmV3IHNlYXJjaCBwcm9wZXJ0aWVzXG4gICAgICogQHJldHVybnMge1NlYXJjaH1cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgKiovXG4gICAgc2V0KG9wdGlvbnMpIHtcbiAgICAgICAgb29wLm1peGluKHRoaXMuJG9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIHNlYXJjaCBvcHRpb25zLl17OiAjU2VhcmNoLmdldE9wdGlvbnN9XG4gICAgICogQHJldHVybnMge1BhcnRpYWw8U2VhcmNoT3B0aW9ucz59XG4gICAgKiovXG4gICAgZ2V0T3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIGxhbmcuY29weU9iamVjdCh0aGlzLiRvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzZWFyY2ggb3B0aW9ucyB2aWEgdGhlIGBvcHRpb25zYCBwYXJhbWV0ZXIuXG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPFNlYXJjaE9wdGlvbnM+fSBvcHRpb25zIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgc2VhcmNoIHByb3BlcnRpZVxuICAgICAqIEByZWxhdGVkIFNlYXJjaC5zZXRcbiAgICAqKi9cbiAgICBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy4kb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoZXMgZm9yIGBvcHRpb25zLm5lZWRsZWAuIElmIGZvdW5kLCB0aGlzIG1ldGhvZCByZXR1cm5zIHRoZSBbW1JhbmdlIGBSYW5nZWBdXSB3aGVyZSB0aGUgdGV4dCBmaXJzdCBvY2N1cnMuIElmIGBvcHRpb25zLmJhY2t3YXJkc2AgaXMgYHRydWVgLCB0aGUgc2VhcmNoIGdvZXMgYmFja3dhcmRzIGluIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IHNlc3Npb24gVGhlIHNlc3Npb24gdG8gc2VhcmNoIHdpdGhcbiAgICAgKiBAcmV0dXJucyB7UmFuZ2V8ZmFsc2V9XG4gICAgICoqL1xuICAgIGZpbmQoc2Vzc2lvbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMuJG1hdGNoSXRlcmF0b3Ioc2Vzc2lvbiwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghaXRlcmF0b3IpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgdmFyIGZpcnN0UmFuZ2UgPSBudWxsO1xuICAgICAgICBpdGVyYXRvci5mb3JFYWNoKGZ1bmN0aW9uKHNyLCBzYywgZXIsIGVjKSB7XG4gICAgICAgICAgICBmaXJzdFJhbmdlID0gbmV3IFJhbmdlKHNyLCBzYywgZXIsIGVjKTtcbiAgICAgICAgICAgIGlmIChzYyA9PSBlYyAmJiBvcHRpb25zLnN0YXJ0ICYmIC8qKkB0eXBle1JhbmdlfSovKG9wdGlvbnMuc3RhcnQpLnN0YXJ0XG4gICAgICAgICAgICAgICAgJiYgb3B0aW9ucy5za2lwQ3VycmVudCAhPSBmYWxzZSAmJiBmaXJzdFJhbmdlLmlzRXF1YWwoLyoqQHR5cGV7UmFuZ2V9Ki8ob3B0aW9ucy5zdGFydCkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBmaXJzdFJhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZmlyc3RSYW5nZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2hlcyBmb3IgYWxsIG9jY3VycmFuY2VzIGBvcHRpb25zLm5lZWRsZWAuIElmIGZvdW5kLCB0aGlzIG1ldGhvZCByZXR1cm5zIGFuIGFycmF5IG9mIFtbUmFuZ2UgYFJhbmdlYHNdXSB3aGVyZSB0aGUgdGV4dCBmaXJzdCBvY2N1cnMuIElmIGBvcHRpb25zLmJhY2t3YXJkc2AgaXMgYHRydWVgLCB0aGUgc2VhcmNoIGdvZXMgYmFja3dhcmRzIGluIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IHNlc3Npb24gVGhlIHNlc3Npb24gdG8gc2VhcmNoIHdpdGhcbiAgICAgKiBAcmV0dXJucyB7UmFuZ2VbXX1cbiAgICAqKi9cbiAgICBmaW5kQWxsKHNlc3Npb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgICAgICBpZiAoIW9wdGlvbnMubmVlZGxlKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB0aGlzLiRhc3NlbWJsZVJlZ0V4cChvcHRpb25zKTtcblxuICAgICAgICB2YXIgcmFuZ2UgPSBvcHRpb25zLnJhbmdlO1xuICAgICAgICB2YXIgbGluZXMgPSByYW5nZVxuICAgICAgICAgICAgPyBzZXNzaW9uLmdldExpbmVzKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2UuZW5kLnJvdylcbiAgICAgICAgICAgIDogc2Vzc2lvbi5kb2MuZ2V0QWxsTGluZXMoKTtcblxuICAgICAgICB2YXIgcmFuZ2VzID0gW107XG4gICAgICAgIHZhciByZSA9IG9wdGlvbnMucmU7XG4gICAgICAgIGlmIChvcHRpb25zLiRpc011bHRpTGluZSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHJlLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBtYXhSb3cgPSBsaW5lcy5sZW5ndGggLSBsZW47XG4gICAgICAgICAgICB2YXIgcHJldlJhbmdlO1xuICAgICAgICAgICAgb3V0ZXI6IGZvciAodmFyIHJvdyA9IHJlLm9mZnNldCB8fCAwOyByb3cgPD0gbWF4Um93OyByb3crKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuOyBqKyspXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1tyb3cgKyBqXS5zZWFyY2gocmVbal0pID09IC0xKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG5cbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRMaW5lID0gbGluZXNbcm93XTtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW3JvdyArIGxlbiAtIDFdO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gc3RhcnRMaW5lLmxlbmd0aCAtIHN0YXJ0TGluZS5tYXRjaChyZVswXSlbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBlbmRJbmRleCA9IGxpbmUubWF0Y2gocmVbbGVuIC0gMV0pWzBdLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGlmIChwcmV2UmFuZ2UgJiYgcHJldlJhbmdlLmVuZC5yb3cgPT09IHJvdyAmJlxuICAgICAgICAgICAgICAgICAgICBwcmV2UmFuZ2UuZW5kLmNvbHVtbiA+IHN0YXJ0SW5kZXhcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKHByZXZSYW5nZSA9IG5ldyBSYW5nZShcbiAgICAgICAgICAgICAgICAgICAgcm93LCBzdGFydEluZGV4LCByb3cgKyBsZW4gLSAxLCBlbmRJbmRleFxuICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgIGlmIChsZW4gPiAyKVxuICAgICAgICAgICAgICAgICAgICByb3cgPSByb3cgKyBsZW4gLSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gbGFuZy5nZXRNYXRjaE9mZnNldHMobGluZXNbaV0sIHJlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1hdGNoZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbWF0Y2hlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV3IFJhbmdlKGksIG1hdGNoLm9mZnNldCwgaSwgbWF0Y2gub2Zmc2V0ICsgbWF0Y2gubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJhbmdlKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRDb2x1bW4gPSByYW5nZS5zdGFydC5jb2x1bW47XG4gICAgICAgICAgICB2YXIgZW5kQ29sdW1uID0gcmFuZ2UuZW5kLmNvbHVtbjtcbiAgICAgICAgICAgIHZhciBpID0gMCwgaiA9IHJhbmdlcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBqICYmIHJhbmdlc1tpXS5zdGFydC5jb2x1bW4gPCBzdGFydENvbHVtbiAmJiByYW5nZXNbaV0uc3RhcnQucm93ID09IDApXG4gICAgICAgICAgICAgICAgaSsrO1xuXG4gICAgICAgICAgICB2YXIgZW5kUm93ID0gcmFuZ2UuZW5kLnJvdyAtIHJhbmdlLnN0YXJ0LnJvdztcbiAgICAgICAgICAgIHdoaWxlIChpIDwgaiAmJiByYW5nZXNbal0uZW5kLmNvbHVtbiA+IGVuZENvbHVtbiAmJiByYW5nZXNbal0uZW5kLnJvdyA9PSBlbmRSb3cpXG4gICAgICAgICAgICAgICAgai0tO1xuXG4gICAgICAgICAgICByYW5nZXMgPSByYW5nZXMuc2xpY2UoaSwgaiArIDEpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaiA9IHJhbmdlcy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICAgICAgICByYW5nZXNbaV0uc3RhcnQucm93ICs9IHJhbmdlLnN0YXJ0LnJvdztcbiAgICAgICAgICAgICAgICByYW5nZXNbaV0uZW5kLnJvdyArPSByYW5nZS5zdGFydC5yb3c7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaGVzIGZvciBgb3B0aW9ucy5uZWVkbGVgIGluIGBpbnB1dGAsIGFuZCwgaWYgZm91bmQsIHJlcGxhY2VzIGl0IHdpdGggYHJlcGxhY2VtZW50YC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIHRleHQgdG8gc2VhcmNoIGluXG4gICAgICogQHBhcmFtIHthbnl9IHJlcGxhY2VtZW50IFRoZSByZXBsYWNpbmcgdGV4dFxuICAgICAqICsgKFN0cmluZyk6IElmIGBvcHRpb25zLnJlZ0V4cGAgaXMgYHRydWVgLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYGlucHV0YCB3aXRoIHRoZSByZXBsYWNlbWVudCBhbHJlYWR5IG1hZGUuIE90aGVyd2lzZSwgdGhpcyBmdW5jdGlvbiBqdXN0IHJldHVybnMgYHJlcGxhY2VtZW50YC48YnIvPlxuICAgICAqIElmIGBvcHRpb25zLm5lZWRsZWAgd2FzIG5vdCBmb3VuZCwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGBudWxsYC5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHJldHVybnMge1N0cmluZ31cbiAgICAqKi9cbiAgICByZXBsYWNlKGlucHV0LCByZXBsYWNlbWVudCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cbiAgICAgICAgdmFyIHJlID0gdGhpcy4kYXNzZW1ibGVSZWdFeHAob3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLiRpc011bHRpTGluZSlcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlbWVudDtcblxuICAgICAgICBpZiAoIXJlKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIHZhciBtYXRjaCA9IHJlLmV4ZWMoaW5wdXQpO1xuICAgICAgICBpZiAoIW1hdGNoIHx8IG1hdGNoWzBdLmxlbmd0aCAhPSBpbnB1dC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCFvcHRpb25zLnJlZ0V4cCkge1xuICAgICAgICAgICAgcmVwbGFjZW1lbnQgPSByZXBsYWNlbWVudC5yZXBsYWNlKC9cXCQvZywgXCIkJCQkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVwbGFjZW1lbnQgPSBpbnB1dC5yZXBsYWNlKHJlLCByZXBsYWNlbWVudCk7XG4gICAgICAgIGlmIChvcHRpb25zLnByZXNlcnZlQ2FzZSkge1xuICAgICAgICAgICAgcmVwbGFjZW1lbnQgPSByZXBsYWNlbWVudC5zcGxpdChcIlwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBNYXRoLm1pbihpbnB1dC5sZW5ndGgsIGlucHV0Lmxlbmd0aCk7IGktLTsgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoID0gaW5wdXRbaV07XG4gICAgICAgICAgICAgICAgaWYgKGNoICYmIGNoLnRvTG93ZXJDYXNlKCkgIT0gY2gpXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50W2ldID0gcmVwbGFjZW1lbnRbaV0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50W2ldID0gcmVwbGFjZW1lbnRbaV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnQuam9pbihcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXBsYWNlbWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UGFydGlhbDxTZWFyY2hPcHRpb25zPn0gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gWyRkaXNhYmxlRmFrZU11bHRpbGluZV1cbiAgICAgKiBAcmV0dXJuIHtSZWdFeHB8Ym9vbGVhbnwqW118Kn1cbiAgICAgKi9cbiAgICAkYXNzZW1ibGVSZWdFeHAob3B0aW9ucywgJGRpc2FibGVGYWtlTXVsdGlsaW5lKSB7XG4gICAgICAgIGlmIChvcHRpb25zLm5lZWRsZSBpbnN0YW5jZW9mIFJlZ0V4cClcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnJlID0gb3B0aW9ucy5uZWVkbGU7XG5cbiAgICAgICAgdmFyIG5lZWRsZSA9IG9wdGlvbnMubmVlZGxlO1xuXG4gICAgICAgIGlmICghb3B0aW9ucy5uZWVkbGUpXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5yZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghb3B0aW9ucy5yZWdFeHApXG4gICAgICAgICAgICBuZWVkbGUgPSBsYW5nLmVzY2FwZVJlZ0V4cChuZWVkbGUpO1xuXG4gICAgICAgIHZhciBtb2RpZmllciA9IG9wdGlvbnMuY2FzZVNlbnNpdGl2ZSA/IFwiZ21cIiA6IFwiZ21pXCI7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ldyBSZWdFeHAobmVlZGxlLCBcInVcIik7XG4gICAgICAgICAgICBvcHRpb25zLiRzdXBwb3J0c1VuaWNvZGVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIG1vZGlmaWVyICs9IFwidVwiO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvcHRpb25zLiRzdXBwb3J0c1VuaWNvZGVGbGFnID0gZmFsc2U7IC8vbGVmdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIHByZXZpb3VzIHZlcnNpb25zIGZvciBjYXNlcyBsaWtlIC9hYlxcezJ9L2d1XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy53aG9sZVdvcmQpXG4gICAgICAgICAgICBuZWVkbGUgPSBhZGRXb3JkQm91bmRhcnkobmVlZGxlLCBvcHRpb25zKTtcblxuICAgICAgICBvcHRpb25zLiRpc011bHRpTGluZSA9ICEkZGlzYWJsZUZha2VNdWx0aWxpbmUgJiYgL1tcXG5cXHJdLy50ZXN0KG5lZWRsZSk7XG4gICAgICAgIGlmIChvcHRpb25zLiRpc011bHRpTGluZSlcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnJlID0gdGhpcy4kYXNzZW1ibGVNdWx0aWxpbmVSZWdFeHAobmVlZGxlLCBtb2RpZmllcik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8qKkB0eXBlIHtSZWdFeHB8ZmFsc2V9Ki9cbiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAobmVlZGxlLCBtb2RpZmllcik7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgcmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucy5yZSA9IHJlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuZWVkbGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kaWZpZXJcbiAgICAgKi9cbiAgICAkYXNzZW1ibGVNdWx0aWxpbmVSZWdFeHAobmVlZGxlLCBtb2RpZmllcikge1xuICAgICAgICB2YXIgcGFydHMgPSBuZWVkbGUucmVwbGFjZSgvXFxyXFxufFxccnxcXG4vZywgXCIkXFxuXlwiKS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgdmFyIHJlID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHRyeSB7XG4gICAgICAgICAgICByZS5wdXNoKG5ldyBSZWdFeHAocGFydHNbaV0sIG1vZGlmaWVyKSk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uXG4gICAgICovXG4gICAgJG1hdGNoSXRlcmF0b3Ioc2Vzc2lvbiwgb3B0aW9ucykge1xuICAgICAgICB2YXIgcmUgPSB0aGlzLiRhc3NlbWJsZVJlZ0V4cChvcHRpb25zKTtcbiAgICAgICAgaWYgKCFyZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGJhY2t3YXJkcyA9IG9wdGlvbnMuYmFja3dhcmRzID09IHRydWU7XG4gICAgICAgIHZhciBza2lwQ3VycmVudCA9IG9wdGlvbnMuc2tpcEN1cnJlbnQgIT0gZmFsc2U7XG4gICAgICAgIHZhciBzdXBwb3J0c1VuaWNvZGVGbGFnID0gcmUudW5pY29kZTtcblxuICAgICAgICB2YXIgcmFuZ2UgPSBvcHRpb25zLnJhbmdlO1xuICAgICAgICB2YXIgc3RhcnQgPSBvcHRpb25zLnN0YXJ0O1xuICAgICAgICBpZiAoIXN0YXJ0KVxuICAgICAgICAgICAgc3RhcnQgPSByYW5nZSA/IHJhbmdlW2JhY2t3YXJkcyA/IFwiZW5kXCIgOiBcInN0YXJ0XCJdIDogc2Vzc2lvbi5zZWxlY3Rpb24uZ2V0UmFuZ2UoKTtcblxuICAgICAgICBpZiAoc3RhcnQuc3RhcnQpXG4gICAgICAgICAgICBzdGFydCA9IHN0YXJ0W3NraXBDdXJyZW50ICE9IGJhY2t3YXJkcyA/IFwiZW5kXCIgOiBcInN0YXJ0XCJdO1xuXG4gICAgICAgIHZhciBmaXJzdFJvdyA9IHJhbmdlID8gcmFuZ2Uuc3RhcnQucm93IDogMDtcbiAgICAgICAgdmFyIGxhc3RSb3cgPSByYW5nZSA/IHJhbmdlLmVuZC5yb3cgOiBzZXNzaW9uLmdldExlbmd0aCgpIC0gMTtcblxuICAgICAgICBpZiAoYmFja3dhcmRzKSB7XG4gICAgICAgICAgICB2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHN0YXJ0LnJvdztcbiAgICAgICAgICAgICAgICBpZiAoZm9yRWFjaEluTGluZShyb3csIHN0YXJ0LmNvbHVtbiwgY2FsbGJhY2spKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgZm9yIChyb3ctLTsgcm93ID49IGZpcnN0Um93OyByb3ctLSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvckVhY2hJbkxpbmUocm93LCBOdW1iZXIuTUFYX1ZBTFVFLCBjYWxsYmFjaykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMud3JhcCA9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGZvciAocm93ID0gbGFzdFJvdywgZmlyc3RSb3cgPSBzdGFydC5yb3c7IHJvdyA+PSBmaXJzdFJvdzsgcm93LS0pXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JFYWNoSW5MaW5lKHJvdywgTnVtYmVyLk1BWF9WQUxVRSwgY2FsbGJhY2spKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBmb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gc3RhcnQucm93O1xuICAgICAgICAgICAgICAgIGlmIChmb3JFYWNoSW5MaW5lKHJvdywgc3RhcnQuY29sdW1uLCBjYWxsYmFjaykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBmb3IgKHJvdyA9IHJvdyArIDE7IHJvdyA8PSBsYXN0Um93OyByb3crKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvckVhY2hJbkxpbmUocm93LCAwLCBjYWxsYmFjaykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMud3JhcCA9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGZvciAocm93ID0gZmlyc3RSb3csIGxhc3RSb3cgPSBzdGFydC5yb3c7IHJvdyA8PSBsYXN0Um93OyByb3crKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvckVhY2hJbkxpbmUocm93LCAwLCBjYWxsYmFjaykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuJGlzTXVsdGlMaW5lKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gcmUubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGZvckVhY2hJbkxpbmUgPSBmdW5jdGlvbihyb3csIG9mZnNldCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRSb3cgPSBiYWNrd2FyZHMgPyByb3cgLSBsZW4gKyAxIDogcm93O1xuICAgICAgICAgICAgICAgIGlmIChzdGFydFJvdyA8IDAgfHwgc3RhcnRSb3cgKyBsZW4gPiBzZXNzaW9uLmdldExlbmd0aCgpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUoc3RhcnRSb3cpO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gbGluZS5zZWFyY2gocmVbMF0pO1xuICAgICAgICAgICAgICAgIGlmICghYmFja3dhcmRzICYmIHN0YXJ0SW5kZXggPCBvZmZzZXQgfHwgc3RhcnRJbmRleCA9PT0gLTEpIHJldHVybjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSBzZXNzaW9uLmdldExpbmUoc3RhcnRSb3cgKyBpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuc2VhcmNoKHJlW2ldKSA9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGVuZEluZGV4ID0gbGluZS5tYXRjaChyZVtsZW4gLSAxXSlbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChiYWNrd2FyZHMgJiYgZW5kSW5kZXggPiBvZmZzZXQpIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soc3RhcnRSb3csIHN0YXJ0SW5kZXgsIHN0YXJ0Um93ICsgbGVuIC0gMSwgZW5kSW5kZXgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYmFja3dhcmRzKSB7XG4gICAgICAgICAgICB2YXIgZm9yRWFjaEluTGluZSA9IGZ1bmN0aW9uKHJvdywgZW5kSW5kZXgsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBzZXNzaW9uLmdldExpbmUocm93KTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBtLCBsYXN0ID0gMDtcbiAgICAgICAgICAgICAgICByZS5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlKChtID0gcmUuZXhlYyhsaW5lKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IG1bMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBsYXN0ID0gbS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0ID49IGxpbmUubGVuZ3RoKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlLmxhc3RJbmRleCA9IGxhc3QgKz0gbGFuZy5za2lwRW1wdHlNYXRjaChsaW5lLCBsYXN0LCBzdXBwb3J0c1VuaWNvZGVGbGFnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobS5pbmRleCArIGxlbmd0aCA+IGVuZEluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChtLmluZGV4LCBsZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gbWF0Y2hlcy5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gbWF0Y2hlc1tpIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBtYXRjaGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2socm93LCBjb2x1bW4sIHJvdywgY29sdW1uICsgbGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgZm9yRWFjaEluTGluZSA9IGZ1bmN0aW9uKHJvdywgc3RhcnRJbmRleCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IHNlc3Npb24uZ2V0TGluZShyb3cpO1xuICAgICAgICAgICAgICAgIHZhciBsYXN0O1xuICAgICAgICAgICAgICAgIHZhciBtO1xuICAgICAgICAgICAgICAgIHJlLmxhc3RJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICAgICAgd2hpbGUoKG0gPSByZS5leGVjKGxpbmUpKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gbVswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGxhc3QgPSBtLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2socm93LCBsYXN0LCByb3csbGFzdCArIGxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlLmxhc3RJbmRleCA9IGxhc3QgKz0gbGFuZy5za2lwRW1wdHlNYXRjaChsaW5lLCBsYXN0LCBzdXBwb3J0c1VuaWNvZGVGbGFnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0ID49IGxpbmUubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7Zm9yRWFjaDogZm9yRWFjaH07XG4gICAgfVxuXG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZWVkbGVcbiAqIEBwYXJhbSB7UGFydGlhbDxTZWFyY2hPcHRpb25zPn0gb3B0aW9uc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBhZGRXb3JkQm91bmRhcnkobmVlZGxlLCBvcHRpb25zKSB7XG4gICAgbGV0IHN1cHBvcnRzTG9va2JlaGluZCA9IGxhbmcuc3VwcG9ydHNMb29rYmVoaW5kKCk7XG5cbiAgICBmdW5jdGlvbiB3b3JkQm91bmRhcnkoYywgZmlyc3RDaGFyID0gdHJ1ZSkge1xuICAgICAgICBsZXQgd29yZFJlZ0V4cCA9IHN1cHBvcnRzTG9va2JlaGluZCAmJiBvcHRpb25zLiRzdXBwb3J0c1VuaWNvZGVGbGFnID8gbmV3IFJlZ0V4cChcIltcXFxccHtMfVxcXFxwe059X11cIixcInVcIikgOiBuZXcgUmVnRXhwKFwiXFxcXHdcIik7XG5cbiAgICAgICAgaWYgKHdvcmRSZWdFeHAudGVzdChjKSB8fCBvcHRpb25zLnJlZ0V4cCkge1xuICAgICAgICAgICAgaWYgKHN1cHBvcnRzTG9va2JlaGluZCAmJiBvcHRpb25zLiRzdXBwb3J0c1VuaWNvZGVGbGFnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Q2hhcikgcmV0dXJuIFwiKD88PV58W15cXFxccHtMfVxcXFxwe059X10pXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiKD89W15cXFxccHtMfVxcXFxwe059X118JClcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIlxcXFxiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuXG4gICAgbGV0IG5lZWRsZUFycmF5ID0gQXJyYXkuZnJvbShuZWVkbGUpO1xuICAgIGxldCBmaXJzdENoYXIgPSBuZWVkbGVBcnJheVswXTtcbiAgICBsZXQgbGFzdENoYXIgPSBuZWVkbGVBcnJheVtuZWVkbGVBcnJheS5sZW5ndGggLSAxXTtcblxuICAgIHJldHVybiB3b3JkQm91bmRhcnkoZmlyc3RDaGFyKSArIG5lZWRsZSArIHdvcmRCb3VuZGFyeShsYXN0Q2hhciwgZmFsc2UpO1xufVxuXG5leHBvcnRzLlNlYXJjaCA9IFNlYXJjaDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/search.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/search_highlight.js":
/*!*******************************************************!*\
  !*** ./node_modules/ace-code/src/search_highlight.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./layer/marker\").Marker} Marker\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n */\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\n\nclass SearchHighlight {\n    /**\n     * @param {any} regExp\n     * @param {string} clazz\n     */\n    constructor(regExp, clazz, type = \"text\") {\n        this.setRegexp(regExp);\n        this.clazz = clazz;\n        this.type = type;\n    }\n    \n    setRegexp(regExp) {\n        if (this.regExp+\"\" == regExp+\"\")\n            return;\n        this.regExp = regExp;\n        this.cache = [];\n    }\n\n    /**\n     * @param {any} html\n     * @param {Marker} markerLayer\n     * @param {EditSession} session\n     * @param {Partial<import(\"../ace-internal\").Ace.LayerConfig>} config\n     */\n    update(html, markerLayer, session, config) {\n        if (!this.regExp)\n            return;\n        var start = config.firstRow, end = config.lastRow;\n        var renderedMarkerRanges = {};\n\n        for (var i = start; i <= end; i++) {\n            var ranges = this.cache[i];\n            if (ranges == null) {\n                ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);\n                if (ranges.length > this.MAX_RANGES)\n                    ranges = ranges.slice(0, this.MAX_RANGES);\n                ranges = ranges.map(function(match) {\n                    return new Range(i, match.offset, i, match.offset + match.length);\n                });\n                this.cache[i] = ranges.length ? ranges : \"\";\n            }\n\n            for (var j = ranges.length; j --; ) {\n                var rangeToAddMarkerTo = ranges[j].toScreenRange(session);\n                var rangeAsString = rangeToAddMarkerTo.toString();\n                if (renderedMarkerRanges[rangeAsString]) continue;\n\n                renderedMarkerRanges[rangeAsString] = true;\n                markerLayer.drawSingleLineMarker(\n                    html, rangeToAddMarkerTo, this.clazz, config);\n            }\n        }\n    }\n\n}\n\n// needed to prevent long lines from freezing the browser\nSearchHighlight.prototype.MAX_RANGES = 500;\n\nexports.SearchHighlight = SearchHighlight;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3NlYXJjaF9oaWdobGlnaHQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsaUNBQWlDO0FBQzlDLGFBQWEsc0NBQXNDO0FBQ25EO0FBQ0EsV0FBVyxtQkFBTyxDQUFDLDJEQUFZO0FBQy9CLFlBQVksa0ZBQXdCOztBQUVwQztBQUNBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsS0FBSztBQUNwQixlQUFlLFFBQVE7QUFDdkIsZUFBZSxhQUFhO0FBQzVCLGVBQWUsb0RBQW9EO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw0QkFBNEIsVUFBVTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBLHdDQUF3QyxNQUFNO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSx1QkFBdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy9zZWFyY2hfaGlnaGxpZ2h0LmpzP2MxNjkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2xheWVyL21hcmtlclwiKS5NYXJrZXJ9IE1hcmtlclxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICovXG52YXIgbGFuZyA9IHJlcXVpcmUoXCIuL2xpYi9sYW5nXCIpO1xudmFyIFJhbmdlID0gcmVxdWlyZShcIi4vcmFuZ2VcIikuUmFuZ2U7XG5cbmNsYXNzIFNlYXJjaEhpZ2hsaWdodCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthbnl9IHJlZ0V4cFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGF6elxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHJlZ0V4cCwgY2xhenosIHR5cGUgPSBcInRleHRcIikge1xuICAgICAgICB0aGlzLnNldFJlZ2V4cChyZWdFeHApO1xuICAgICAgICB0aGlzLmNsYXp6ID0gY2xheno7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIFxuICAgIHNldFJlZ2V4cChyZWdFeHApIHtcbiAgICAgICAgaWYgKHRoaXMucmVnRXhwK1wiXCIgPT0gcmVnRXhwK1wiXCIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMucmVnRXhwID0gcmVnRXhwO1xuICAgICAgICB0aGlzLmNhY2hlID0gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthbnl9IGh0bWxcbiAgICAgKiBAcGFyYW0ge01hcmtlcn0gbWFya2VyTGF5ZXJcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uXG4gICAgICogQHBhcmFtIHtQYXJ0aWFsPGltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuTGF5ZXJDb25maWc+fSBjb25maWdcbiAgICAgKi9cbiAgICB1cGRhdGUoaHRtbCwgbWFya2VyTGF5ZXIsIHNlc3Npb24sIGNvbmZpZykge1xuICAgICAgICBpZiAoIXRoaXMucmVnRXhwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgc3RhcnQgPSBjb25maWcuZmlyc3RSb3csIGVuZCA9IGNvbmZpZy5sYXN0Um93O1xuICAgICAgICB2YXIgcmVuZGVyZWRNYXJrZXJSYW5nZXMgPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByYW5nZXMgPSB0aGlzLmNhY2hlW2ldO1xuICAgICAgICAgICAgaWYgKHJhbmdlcyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2VzID0gbGFuZy5nZXRNYXRjaE9mZnNldHMoc2Vzc2lvbi5nZXRMaW5lKGkpLCB0aGlzLnJlZ0V4cCk7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlcy5sZW5ndGggPiB0aGlzLk1BWF9SQU5HRVMpXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlcyA9IHJhbmdlcy5zbGljZSgwLCB0aGlzLk1BWF9SQU5HRVMpO1xuICAgICAgICAgICAgICAgIHJhbmdlcyA9IHJhbmdlcy5tYXAoZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShpLCBtYXRjaC5vZmZzZXQsIGksIG1hdGNoLm9mZnNldCArIG1hdGNoLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZVtpXSA9IHJhbmdlcy5sZW5ndGggPyByYW5nZXMgOiBcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gcmFuZ2VzLmxlbmd0aDsgaiAtLTsgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlVG9BZGRNYXJrZXJUbyA9IHJhbmdlc1tqXS50b1NjcmVlblJhbmdlKHNlc3Npb24pO1xuICAgICAgICAgICAgICAgIHZhciByYW5nZUFzU3RyaW5nID0gcmFuZ2VUb0FkZE1hcmtlclRvLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVkTWFya2VyUmFuZ2VzW3JhbmdlQXNTdHJpbmddKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIHJlbmRlcmVkTWFya2VyUmFuZ2VzW3JhbmdlQXNTdHJpbmddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtYXJrZXJMYXllci5kcmF3U2luZ2xlTGluZU1hcmtlcihcbiAgICAgICAgICAgICAgICAgICAgaHRtbCwgcmFuZ2VUb0FkZE1hcmtlclRvLCB0aGlzLmNsYXp6LCBjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59XG5cbi8vIG5lZWRlZCB0byBwcmV2ZW50IGxvbmcgbGluZXMgZnJvbSBmcmVlemluZyB0aGUgYnJvd3NlclxuU2VhcmNoSGlnaGxpZ2h0LnByb3RvdHlwZS5NQVhfUkFOR0VTID0gNTAwO1xuXG5leHBvcnRzLlNlYXJjaEhpZ2hsaWdodCA9IFNlYXJjaEhpZ2hsaWdodDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/search_highlight.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/selection.js":
/*!************************************************!*\
  !*** ./node_modules/ace-code/src/selection.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n * @typedef {import(\"./anchor\").Anchor} Anchor\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n */\n\nclass Selection {\n    /**\n     * Creates a new `Selection` object.\n     * @param {EditSession} session The session to use\n     * @constructor\n     **/\n    constructor(session) {\n        /**@type {EditSession}*/\n        this.session = session;\n        /**@type {import(\"./document\").Document}*/\n        this.doc = session.getDocument();\n    \n        this.clearSelection();\n        /**@type {Anchor}*/\n        this.cursor = this.lead = this.doc.createAnchor(0, 0);\n        /**@type {Anchor}*/\n        this.anchor = this.doc.createAnchor(0, 0);\n        this.$silent = false;\n    \n        var self = this;\n        this.cursor.on(\"change\", function(e) {\n            self.$cursorChanged = true;\n            if (!self.$silent)\n                self._emit(\"changeCursor\");\n            if (!self.$isEmpty && !self.$silent)\n                self._emit(\"changeSelection\");\n            if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)\n                self.$desiredColumn = null;\n        });\n    \n        this.anchor.on(\"change\", function() {\n            self.$anchorChanged = true;\n            if (!self.$isEmpty && !self.$silent)\n                self._emit(\"changeSelection\");\n        });\n    }\n    \n    /**\n     * Returns `true` if the selection is empty.\n     * @returns {Boolean}\n     **/\n   isEmpty() {\n        return this.$isEmpty || (\n            this.anchor.row == this.lead.row &&\n            this.anchor.column == this.lead.column\n        );\n    }\n\n    /**\n     * Returns `true` if the selection is a multi-line.\n     * @returns {Boolean}\n     **/\n    isMultiLine() {\n        return !this.$isEmpty && this.anchor.row != this.cursor.row;\n    }\n\n    /**\n     * Returns an object containing the `row` and `column` current position of the cursor.\n     * @returns {Point}\n     **/\n    getCursor() {\n        return this.lead.getPosition();\n    }\n\n    /**\n     * Sets the row and column position of the anchor. This function also emits the `'changeSelection'` event.\n     * @param {Number} row The new row\n     * @param {Number} column The new column\n     *\n     **/\n    setAnchor(row, column) {\n        this.$isEmpty = false;\n        this.anchor.setPosition(row, column);\n    }\n\n\n    /**\n     * Returns an object containing the `row` and `column` of the calling selection anchor.\n     *\n     * @returns {Point}\n     * @related Anchor.getPosition\n     **/\n    getAnchor() {\n        if (this.$isEmpty)\n            return this.getSelectionLead();\n\n        return this.anchor.getPosition();\n    }\n\n\n    /**\n     * Returns an object containing the `row` and `column` of the calling selection lead.\n     * @returns {Object}\n     **/\n    getSelectionLead() {\n        return this.lead.getPosition();\n    }\n\n    /**\n     * Returns `true` if the selection is going backwards in the document.\n     * @returns {Boolean}\n     **/\n    isBackwards() {\n        var anchor = this.anchor;\n        var lead = this.lead;\n        return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));\n    }\n\n    /**\n     * [Returns the [[Range]] for the selected text.]{: #Selection.getRange}\n     * @returns {Range}\n     **/\n    getRange() {\n        var anchor = this.anchor;\n        var lead = this.lead;\n\n        if (this.$isEmpty)\n            return Range.fromPoints(lead, lead);\n\n        return this.isBackwards()\n            ? Range.fromPoints(lead, anchor)\n            : Range.fromPoints(anchor, lead);\n    }\n\n    /**\n     * [Empties the selection (by de-selecting it). This function also emits the `'changeSelection'` event.]{: #Selection.clearSelection}\n     **/\n    clearSelection() {\n        if (!this.$isEmpty) {\n            this.$isEmpty = true;\n            this._emit(\"changeSelection\");\n        }\n    }\n\n    /**\n     * Selects all the text in the document.\n     **/\n    selectAll() {\n        this.$setSelection(0, 0, Number.MAX_VALUE, Number.MAX_VALUE);\n    }\n\n    /**\n     * Sets the selection to the provided range.\n     * @param {import(\"../ace-internal\").Ace.IRange} range The range of text to select\n     * @param {Boolean} [reverse] Indicates if the range should go backwards (`true`) or not\n     **/\n    setRange(range, reverse) {\n        var start = reverse ? range.end : range.start;\n        var end = reverse ? range.start : range.end;\n        this.$setSelection(start.row, start.column, end.row, end.column);\n    }\n\n    /**\n     * @param {number} anchorRow\n     * @param {number} anchorColumn\n     * @param {number} cursorRow\n     * @param {number} cursorColumn\n     */\n    $setSelection(anchorRow, anchorColumn, cursorRow, cursorColumn) {\n        if (this.$silent)\n            return;\n        var wasEmpty = this.$isEmpty;\n        var wasMultiselect = this.inMultiSelectMode;\n        this.$silent = true;\n        this.$cursorChanged = this.$anchorChanged = false;\n        this.anchor.setPosition(anchorRow, anchorColumn);\n        this.cursor.setPosition(cursorRow, cursorColumn);\n        this.$isEmpty = !Range.comparePoints(this.anchor, this.cursor);\n        this.$silent = false;\n        if (this.$cursorChanged)\n            this._emit(\"changeCursor\");\n        if (this.$cursorChanged || this.$anchorChanged || wasEmpty != this.$isEmpty || wasMultiselect)\n            this._emit(\"changeSelection\");\n    }\n\n    $moveSelection(mover) {\n        var lead = this.lead;\n        if (this.$isEmpty)\n            this.setSelectionAnchor(lead.row, lead.column);\n\n        mover.call(this);\n    }\n\n    /**\n     * Moves the selection cursor to the indicated row and column.\n     * @param {Number} row The row to select to\n     * @param {Number} column The column to select to\n     **/\n    selectTo(row, column) {\n        this.$moveSelection(function() {\n            this.moveCursorTo(row, column);\n        });\n    }\n\n    /**\n     * Moves the selection cursor to the row and column indicated by `pos`.\n     * @param {Point} pos An object containing the row and column\n     **/\n    selectToPosition(pos) {\n        this.$moveSelection(function() {\n            this.moveCursorToPosition(pos);\n        });\n    }\n\n    /**\n     * Moves the selection cursor to the indicated row and column.\n     * @param {Number} row The row to select to\n     * @param {Number} column The column to select to\n     **/\n    moveTo(row, column) {\n        this.clearSelection();\n        this.moveCursorTo(row, column);\n    }\n\n    /**\n     * Moves the selection cursor to the row and column indicated by `pos`.\n     * @param {Object} pos An object containing the row and column\n     **/\n    moveToPosition(pos) {\n        this.clearSelection();\n        this.moveCursorToPosition(pos);\n    }\n\n\n    /**\n     * Moves the selection up one row.\n     **/\n    selectUp() {\n        this.$moveSelection(this.moveCursorUp);\n    }\n\n    /**\n     * Moves the selection down one row.\n     **/\n    selectDown() {\n        this.$moveSelection(this.moveCursorDown);\n    }\n\n    /**\n     * Moves the selection right one column.\n     **/\n    selectRight() {\n        this.$moveSelection(this.moveCursorRight);\n    }\n\n    /**\n     * Moves the selection left one column.\n     **/\n    selectLeft() {\n        this.$moveSelection(this.moveCursorLeft);\n    }\n\n    /**\n     * Moves the selection to the beginning of the current line.\n     **/\n    selectLineStart() {\n        this.$moveSelection(this.moveCursorLineStart);\n    }\n\n    /**\n     * Moves the selection to the end of the current line.\n     **/\n    selectLineEnd() {\n        this.$moveSelection(this.moveCursorLineEnd);\n    }\n\n    /**\n     * Moves the selection to the end of the file.\n     **/\n    selectFileEnd() {\n        this.$moveSelection(this.moveCursorFileEnd);\n    }\n\n    /**\n     * Moves the selection to the start of the file.\n     **/\n    selectFileStart() {\n        this.$moveSelection(this.moveCursorFileStart);\n    }\n\n    /**\n     * Moves the selection to the first word on the right.\n     **/\n    selectWordRight() {\n        this.$moveSelection(this.moveCursorWordRight);\n    }\n\n    /**\n     * Moves the selection to the first word on the left.\n     **/\n    selectWordLeft() {\n        this.$moveSelection(this.moveCursorWordLeft);\n    }\n\n    /**\n     * Moves the selection to highlight the entire word.\n     * @related EditSession.getWordRange\n     **/\n    getWordRange(row, column) {\n        if (typeof column == \"undefined\") {\n            var cursor = row || this.lead;\n            row = cursor.row;\n            column = cursor.column;\n        }\n        return this.session.getWordRange(row, column);\n    }\n\n    /**\n     * Selects an entire word boundary.\n     **/\n    selectWord() {\n        this.setSelectionRange(this.getWordRange());\n    }\n\n    /**\n     * Selects a word, including its right whitespace.\n     * @related EditSession.getAWordRange\n     **/\n    selectAWord() {\n        var cursor = this.getCursor();\n        var range = this.session.getAWordRange(cursor.row, cursor.column);\n        this.setSelectionRange(range);\n    }\n\n    getLineRange(row, excludeLastChar) {\n        var rowStart = typeof row == \"number\" ? row : this.lead.row;\n        var rowEnd;\n\n        var foldLine = this.session.getFoldLine(rowStart);\n        if (foldLine) {\n            rowStart = foldLine.start.row;\n            rowEnd = foldLine.end.row;\n        } else {\n            rowEnd = rowStart;\n        }\n        if (excludeLastChar === true)\n            return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);\n        else\n            return new Range(rowStart, 0, rowEnd + 1, 0);\n    }\n\n    /**\n     * Selects the entire line.\n     **/\n    selectLine() {\n        this.setSelectionRange(this.getLineRange());\n    }\n\n    /**\n     * Moves the cursor up one row.\n     **/\n    moveCursorUp() {\n        this.moveCursorBy(-1, 0);\n    }\n\n    /**\n     * Moves the cursor down one row.\n     **/\n    moveCursorDown() {\n        this.moveCursorBy(1, 0);\n    }\n\n    /**\n     *\n     * Returns `true` if moving the character next to the cursor in the specified direction is a soft tab.\n     * @param {Point} cursor the current cursor position\n     * @param {Number} tabSize the tab size\n     * @param {Number} direction 1 for right, -1 for left\n     */\n    wouldMoveIntoSoftTab(cursor, tabSize, direction) {\n        var start = cursor.column;\n        var end = cursor.column + tabSize;\n\n        if (direction < 0) {\n            start = cursor.column - tabSize;\n            end = cursor.column;\n        }\n        return this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(start, end).split(\" \").length-1 == tabSize;\n    }\n\n    /**\n     * Moves the cursor left one column.\n     **/\n    moveCursorLeft() {\n        var cursor = this.lead.getPosition(),\n            fold;\n\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n        } else if (cursor.column === 0) {\n            // cursor is a line (start\n            if (cursor.row > 0) {\n                this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, -1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, -tabSize);\n            } else {\n                this.moveCursorBy(0, -1);\n            }\n        }\n    }\n\n    /**\n     * Moves the cursor right one column.\n     **/\n    moveCursorRight() {\n        var cursor = this.lead.getPosition(),\n            fold;\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n        }\n        else if (this.lead.column == this.doc.getLine(this.lead.row).length) {\n            if (this.lead.row < this.doc.getLength() - 1) {\n                this.moveCursorTo(this.lead.row + 1, 0);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            /**\n             * @type {Point}\n             */\n            var cursor = this.lead;\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, 1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, tabSize);\n            } else {\n                this.moveCursorBy(0, 1);\n            }\n        }\n    }\n\n    /**\n     * Moves the cursor to the start of the line.\n     **/\n    moveCursorLineStart() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var screenRow = this.session.documentToScreenRow(row, column);\n\n        // Determ the doc-position of the first character at the screen line.\n        var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);\n\n        // Determ the line\n        var beforeCursor = this.session.getDisplayLine(\n            row, null, firstColumnPosition.row,\n            firstColumnPosition.column\n        );\n\n        var leadingSpace = beforeCursor.match(/^\\s*/);\n        // TODO find better way for emacs mode to override selection behaviors\n        if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)\n            firstColumnPosition.column += leadingSpace[0].length;\n        this.moveCursorToPosition(firstColumnPosition);\n    }\n\n    /**\n     * Moves the cursor to the end of the line.\n     **/\n    moveCursorLineEnd() {\n        var lead = this.lead;\n        var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);\n        if (this.lead.column == lineEnd.column) {\n            var line = this.session.getLine(lineEnd.row);\n            if (lineEnd.column == line.length) {\n                var textEnd = line.search(/\\s+$/);\n                if (textEnd > 0)\n                    lineEnd.column = textEnd;\n            }\n        }\n\n        this.moveCursorTo(lineEnd.row, lineEnd.column);\n    }\n\n    /**\n     * Moves the cursor to the end of the file.\n     **/\n    moveCursorFileEnd() {\n        var row = this.doc.getLength() - 1;\n        var column = this.doc.getLine(row).length;\n        this.moveCursorTo(row, column);\n    }\n\n    /**\n     * Moves the cursor to the start of the file.\n     **/\n    moveCursorFileStart() {\n        this.moveCursorTo(0, 0);\n    }\n\n    /**\n     * Moves the cursor to the word on the right.\n     **/\n    moveCursorLongWordRight() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n\n        // skip folds\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n            return;\n        }\n\n        // first skip space\n        if (this.session.nonTokenRe.exec(rightOfCursor)) {\n            column += this.session.nonTokenRe.lastIndex;\n            this.session.nonTokenRe.lastIndex = 0;\n            rightOfCursor = line.substring(column);\n        }\n\n        // if at line end proceed with next line\n        if (column >= line.length) {\n            this.moveCursorTo(row, line.length);\n            this.moveCursorRight();\n            if (row < this.doc.getLength() - 1)\n                this.moveCursorWordRight();\n            return;\n        }\n\n        // advance to the end of the next token\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            column += this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n\n        this.moveCursorTo(row, column);\n    }\n\n    /**\n    *\n    * Moves the cursor to the word on the left.\n    **/\n    moveCursorLongWordLeft() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n\n        // skip folds\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n            return;\n        }\n\n        var str = this.session.getFoldStringAt(row, column, -1);\n        if (str == null) {\n            str = this.doc.getLine(row).substring(0, column);\n        }\n\n        var leftOfCursor = lang.stringReverse(str);\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n\n        // skip whitespace\n        if (this.session.nonTokenRe.exec(leftOfCursor)) {\n            column -= this.session.nonTokenRe.lastIndex;\n            leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);\n            this.session.nonTokenRe.lastIndex = 0;\n        }\n\n        // if at begin of the line proceed in line above\n        if (column <= 0) {\n            this.moveCursorTo(row, 0);\n            this.moveCursorLeft();\n            if (row > 0)\n                this.moveCursorWordLeft();\n            return;\n        }\n\n        // move to the begin of the word\n        if (this.session.tokenRe.exec(leftOfCursor)) {\n            column -= this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n\n        this.moveCursorTo(row, column);\n    }\n\n    $shortWordEndIndex(rightOfCursor) {\n        var index = 0, ch;\n        var whitespaceRe = /\\s/;\n        var tokenRe = this.session.tokenRe;\n\n        tokenRe.lastIndex = 0;\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            index = this.session.tokenRe.lastIndex;\n        } else {\n            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                index ++;\n\n            if (index < 1) {\n                tokenRe.lastIndex = 0;\n                 while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {\n                    tokenRe.lastIndex = 0;\n                    index ++;\n                    if (whitespaceRe.test(ch)) {\n                        if (index > 2) {\n                            index--;\n                            break;\n                        } else {\n                            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                                index ++;\n                            if (index > 2)\n                                break;\n                        }\n                    }\n                }\n            }\n        }\n        tokenRe.lastIndex = 0;\n\n        return index;\n    }\n\n    moveCursorShortWordRight() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold)\n            return this.moveCursorTo(fold.end.row, fold.end.column);\n\n        if (column == line.length) {\n            var l = this.doc.getLength();\n            do {\n                row++;\n                rightOfCursor = this.doc.getLine(row);\n            } while (row < l && /^\\s*$/.test(rightOfCursor));\n\n            if (!/^\\s+/.test(rightOfCursor))\n                rightOfCursor = \"\";\n            column = 0;\n        }\n\n        var index = this.$shortWordEndIndex(rightOfCursor);\n\n        this.moveCursorTo(row, column + index);\n    }\n\n    moveCursorShortWordLeft() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1))\n            return this.moveCursorTo(fold.start.row, fold.start.column);\n\n        var line = this.session.getLine(row).substring(0, column);\n        if (column === 0) {\n            do {\n                row--;\n                line = this.doc.getLine(row);\n            } while (row > 0 && /^\\s*$/.test(line));\n\n            column = line.length;\n            if (!/\\s+$/.test(line))\n                line = \"\";\n        }\n\n        var leftOfCursor = lang.stringReverse(line);\n        var index = this.$shortWordEndIndex(leftOfCursor);\n\n        return this.moveCursorTo(row, column - index);\n    }\n\n    moveCursorWordRight() {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordRight();\n        else\n            this.moveCursorShortWordRight();\n    }\n\n    moveCursorWordLeft() {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordLeft();\n        else\n            this.moveCursorShortWordLeft();\n    }\n\n    /**\n     * Moves the cursor to position indicated by the parameters. Negative numbers move the cursor backwards in the document.\n     * @param {Number} rows The number of rows to move by\n     * @param {Number} chars The number of characters to move by\n     *\n     * @related EditSession.documentToScreenPosition\n     **/\n    moveCursorBy(rows, chars) {\n        var screenPos = this.session.documentToScreenPosition(\n            this.lead.row,\n            this.lead.column\n        );\n\n        var offsetX;\n\n        if (chars === 0) {\n            if (rows !== 0) {\n                if (this.session.$bidiHandler.isBidiRow(screenPos.row, this.lead.row)) {\n                    offsetX = this.session.$bidiHandler.getPosLeft(screenPos.column);\n                    screenPos.column = Math.round(offsetX / this.session.$bidiHandler.charWidths[0]);\n                } else {\n                    offsetX = screenPos.column * this.session.$bidiHandler.charWidths[0];\n                }\n            }\n\n            if (this.$desiredColumn)\n                screenPos.column = this.$desiredColumn;\n            else\n                this.$desiredColumn = screenPos.column;\n        }\n\n        if (rows != 0 && this.session.lineWidgets && this.session.lineWidgets[this.lead.row]) {\n            var widget = this.session.lineWidgets[this.lead.row];\n            if (rows < 0)\n                rows -= widget.rowsAbove || 0;\n            else if (rows > 0)\n                rows += widget.rowCount - (widget.rowsAbove || 0);\n        }\n\n        var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column, offsetX);\n\n        if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {\n\n        }\n\n        // move the cursor and update the desired column\n        this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);\n    }\n\n    /**\n     * Moves the selection to the position indicated by its `row` and `column`.\n     * @param {Point} position The position to move to\n     **/\n    moveCursorToPosition(position) {\n        this.moveCursorTo(position.row, position.column);\n    }\n\n    /**\n     * Moves the cursor to the row and column provided. [If `preventUpdateDesiredColumn` is `true`, then the cursor stays in the same column position as its original point.]{: #preventUpdateBoolDesc}\n     * @param {Number} row The row to move to\n     * @param {Number} column The column to move to\n     * @param {Boolean} [keepDesiredColumn] [If `true`, the cursor move does not respect the previous column]{: #preventUpdateBool}\n     **/\n    moveCursorTo(row, column, keepDesiredColumn) {\n        // Ensure the row/column is not inside of a fold.\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            row = fold.start.row;\n            column = fold.start.column;\n        }\n\n        this.$keepDesiredColumnOnChange = true;\n        var line = this.session.getLine(row);\n        // do not allow putting cursor in the middle of surrogate pairs\n        if (/[\\uDC00-\\uDFFF]/.test(line.charAt(column)) && line.charAt(column - 1)) {\n            if (this.lead.row == row && this.lead.column == column + 1)\n                column = column - 1;\n            else\n                column = column + 1;\n        }\n        this.lead.setPosition(row, column);\n        this.$keepDesiredColumnOnChange = false;\n\n        if (!keepDesiredColumn)\n            this.$desiredColumn = null;\n    }\n\n    /**\n     * Moves the cursor to the screen position indicated by row and column. {:preventUpdateBoolDesc}\n     * @param {Number} row The row to move to\n     * @param {Number} column The column to move to\n     * @param {Boolean} keepDesiredColumn {:preventUpdateBool}\n     **/\n    moveCursorToScreen(row, column, keepDesiredColumn) {\n        var pos = this.session.screenToDocumentPosition(row, column);\n        this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);\n    }\n\n    // remove listeners from document\n    detach() {\n        this.lead.detach();\n        this.anchor.detach();\n    }\n\n    /**\n     * @param {Range & {desiredColumn?: number}} range\n     */\n    fromOrientedRange(range) {\n        this.setSelectionRange(range, range.cursor == range.start);\n        this.$desiredColumn = range.desiredColumn || this.$desiredColumn;\n    }\n\n    /**\n     * @param {Range & {desiredColumn?: number}} [range]\n     */\n    toOrientedRange(range) {\n        var r = this.getRange();\n        if (range) {\n            range.start.column = r.start.column;\n            range.start.row = r.start.row;\n            range.end.column = r.end.column;\n            range.end.row = r.end.row;\n        } else {\n            range = r;\n        }\n\n        range.cursor = this.isBackwards() ? range.start : range.end;\n        range.desiredColumn = this.$desiredColumn;\n        return range;\n    }\n\n    /**\n     * Saves the current cursor position and calls `func` that can change the cursor\n     * postion. The result is the range of the starting and eventual cursor position.\n     * Will reset the cursor position.\n     * @param {Function} func The callback that should change the cursor position\n     * @returns {Range}\n     **/\n    getRangeOfMovements(func) {\n        var start = this.getCursor();\n        try {\n            func(this);\n            var end = this.getCursor();\n            return Range.fromPoints(start, end);\n        } catch(e) {\n            return Range.fromPoints(start, start);\n        } finally {\n            this.moveCursorToPosition(start);\n        }\n    }\n\n    /**\n     * \n     * @returns {Range|Range[]}\n     */\n    toJSON() {\n        if (this.rangeCount) {\n            /**@type{Range|Range[]}*/var data = this.ranges.map(function(r) {\n                var r1 = r.clone();\n                r1.isBackwards = r.cursor == r.start;\n                return r1;\n            });\n        } else {\n            /**@type{Range|Range[]}*/var data = this.getRange();\n            data.isBackwards = this.isBackwards();\n        }\n        return data;\n    }\n\n    /**\n     * \n     * @param data\n     */\n    fromJSON(data) {\n        if (data.start == undefined) {\n            if (this.rangeList && data.length > 1) {\n                this.toSingleRange(data[0]);\n                for (var i = data.length; i--; ) {\n                    var r = Range.fromPoints(data[i].start, data[i].end);\n                    if (data[i].isBackwards)\n                        r.cursor = r.start;\n                    this.addRange(r, true);\n                }\n                return;\n            } else {\n                data = data[0];\n            }\n        }\n        if (this.rangeList)\n            this.toSingleRange(data);\n        this.setSelectionRange(data, data.isBackwards);\n    }\n\n    /**\n     * \n     * @param data\n     * @return {boolean}\n     */\n    isEqual(data) {\n        if ((data.length || this.rangeCount) && data.length != this.rangeCount)\n            return false;\n        if (!data.length || !this.ranges)\n            return this.getRange().isEqual(data);\n\n        for (var i = this.ranges.length; i--; ) {\n            if (!this.ranges[i].isEqual(data[i]))\n                return false;\n        }\n        return true;\n    }\n\n}\n\n/**\n * Left for backward compatibility\n * @deprecated\n */\nSelection.prototype.setSelectionAnchor = Selection.prototype.setAnchor;\n/**\n * Left for backward compatibility\n * @deprecated\n */\nSelection.prototype.getSelectionAnchor = Selection.prototype.getAnchor;\n\nSelection.prototype.setSelectionRange = Selection.prototype.setRange;\n\noop.implement(Selection.prototype, EventEmitter);\nexports.Selection = Selection;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3NlbGVjdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixVQUFVLG1CQUFPLENBQUMseURBQVc7QUFDN0IsV0FBVyxtQkFBTyxDQUFDLDJEQUFZO0FBQy9CLG1CQUFtQixpSEFBMkM7QUFDOUQsWUFBWSxrRkFBd0I7QUFDcEM7QUFDQSxhQUFhLHNDQUFzQztBQUNuRCxhQUFhLDJCQUEyQjtBQUN4QyxhQUFhLHFDQUFxQztBQUNsRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQSxrQkFBa0IsOEJBQThCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0Esa0JBQWtCLE9BQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNEQUFzRDtBQUN0RCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZHQUE2RztBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsc0NBQXNDO0FBQ3JELGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjOztBQUVkO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYzs7QUFFZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4S0FBOEs7QUFDOUssZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVMsc0ZBQXNGO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2RUFBNkU7QUFDN0UsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVMsbUJBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUyx5QkFBeUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUyx5QkFBeUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxVQUFVO0FBQ3pCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsY0FBYztBQUNuQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWLHFCQUFxQixjQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsS0FBSztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5Q0FBeUMsS0FBSztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvc2VsZWN0aW9uLmpzPzAwOTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBvb3AgPSByZXF1aXJlKFwiLi9saWIvb29wXCIpO1xudmFyIGxhbmcgPSByZXF1aXJlKFwiLi9saWIvbGFuZ1wiKTtcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiLi9saWIvZXZlbnRfZW1pdHRlclwiKS5FdmVudEVtaXR0ZXI7XG52YXIgUmFuZ2UgPSByZXF1aXJlKFwiLi9yYW5nZVwiKS5SYW5nZTtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vYW5jaG9yXCIpLkFuY2hvcn0gQW5jaG9yXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludH0gUG9pbnRcbiAqL1xuXG5jbGFzcyBTZWxlY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYFNlbGVjdGlvbmAgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IHNlc3Npb24gVGhlIHNlc3Npb24gdG8gdXNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb24pIHtcbiAgICAgICAgLyoqQHR5cGUge0VkaXRTZXNzaW9ufSovXG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIC8qKkB0eXBlIHtpbXBvcnQoXCIuL2RvY3VtZW50XCIpLkRvY3VtZW50fSovXG4gICAgICAgIHRoaXMuZG9jID0gc2Vzc2lvbi5nZXREb2N1bWVudCgpO1xuICAgIFxuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIC8qKkB0eXBlIHtBbmNob3J9Ki9cbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmxlYWQgPSB0aGlzLmRvYy5jcmVhdGVBbmNob3IoMCwgMCk7XG4gICAgICAgIC8qKkB0eXBlIHtBbmNob3J9Ki9cbiAgICAgICAgdGhpcy5hbmNob3IgPSB0aGlzLmRvYy5jcmVhdGVBbmNob3IoMCwgMCk7XG4gICAgICAgIHRoaXMuJHNpbGVudCA9IGZhbHNlO1xuICAgIFxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuY3Vyc29yLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHNlbGYuJGN1cnNvckNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCFzZWxmLiRzaWxlbnQpXG4gICAgICAgICAgICAgICAgc2VsZi5fZW1pdChcImNoYW5nZUN1cnNvclwiKTtcbiAgICAgICAgICAgIGlmICghc2VsZi4kaXNFbXB0eSAmJiAhc2VsZi4kc2lsZW50KVxuICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoXCJjaGFuZ2VTZWxlY3Rpb25cIik7XG4gICAgICAgICAgICBpZiAoIXNlbGYuJGtlZXBEZXNpcmVkQ29sdW1uT25DaGFuZ2UgJiYgZS5vbGQuY29sdW1uICE9IGUudmFsdWUuY29sdW1uKVxuICAgICAgICAgICAgICAgIHNlbGYuJGRlc2lyZWRDb2x1bW4gPSBudWxsO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgdGhpcy5hbmNob3Iub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLiRhbmNob3JDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghc2VsZi4kaXNFbXB0eSAmJiAhc2VsZi4kc2lsZW50KVxuICAgICAgICAgICAgICAgIHNlbGYuX2VtaXQoXCJjaGFuZ2VTZWxlY3Rpb25cIik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2VsZWN0aW9uIGlzIGVtcHR5LlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRpc0VtcHR5IHx8IChcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yLnJvdyA9PSB0aGlzLmxlYWQucm93ICYmXG4gICAgICAgICAgICB0aGlzLmFuY2hvci5jb2x1bW4gPT0gdGhpcy5sZWFkLmNvbHVtblxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzZWxlY3Rpb24gaXMgYSBtdWx0aS1saW5lLlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc011bHRpTGluZSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLiRpc0VtcHR5ICYmIHRoaXMuYW5jaG9yLnJvdyAhPSB0aGlzLmN1cnNvci5yb3c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGN1cnNvci5cbiAgICAgKiBAcmV0dXJucyB7UG9pbnR9XG4gICAgICoqL1xuICAgIGdldEN1cnNvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVhZC5nZXRQb3NpdGlvbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHJvdyBhbmQgY29sdW1uIHBvc2l0aW9uIG9mIHRoZSBhbmNob3IuIFRoaXMgZnVuY3Rpb24gYWxzbyBlbWl0cyB0aGUgYCdjaGFuZ2VTZWxlY3Rpb24nYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSBuZXcgcm93XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbHVtbiBUaGUgbmV3IGNvbHVtblxuICAgICAqXG4gICAgICoqL1xuICAgIHNldEFuY2hvcihyb3csIGNvbHVtbikge1xuICAgICAgICB0aGlzLiRpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYW5jaG9yLnNldFBvc2l0aW9uKHJvdywgY29sdW1uKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGByb3dgIGFuZCBgY29sdW1uYCBvZiB0aGUgY2FsbGluZyBzZWxlY3Rpb24gYW5jaG9yLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1BvaW50fVxuICAgICAqIEByZWxhdGVkIEFuY2hvci5nZXRQb3NpdGlvblxuICAgICAqKi9cbiAgICBnZXRBbmNob3IoKSB7XG4gICAgICAgIGlmICh0aGlzLiRpc0VtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VsZWN0aW9uTGVhZCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmFuY2hvci5nZXRQb3NpdGlvbigpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgYHJvd2AgYW5kIGBjb2x1bW5gIG9mIHRoZSBjYWxsaW5nIHNlbGVjdGlvbiBsZWFkLlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICoqL1xuICAgIGdldFNlbGVjdGlvbkxlYWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlYWQuZ2V0UG9zaXRpb24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2VsZWN0aW9uIGlzIGdvaW5nIGJhY2t3YXJkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGlzQmFja3dhcmRzKCkge1xuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgICAgIHZhciBsZWFkID0gdGhpcy5sZWFkO1xuICAgICAgICByZXR1cm4gKGFuY2hvci5yb3cgPiBsZWFkLnJvdyB8fCAoYW5jaG9yLnJvdyA9PSBsZWFkLnJvdyAmJiBhbmNob3IuY29sdW1uID4gbGVhZC5jb2x1bW4pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbUmV0dXJucyB0aGUgW1tSYW5nZV1dIGZvciB0aGUgc2VsZWN0ZWQgdGV4dC5dezogI1NlbGVjdGlvbi5nZXRSYW5nZX1cbiAgICAgKiBAcmV0dXJucyB7UmFuZ2V9XG4gICAgICoqL1xuICAgIGdldFJhbmdlKCkge1xuICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgICAgIHZhciBsZWFkID0gdGhpcy5sZWFkO1xuXG4gICAgICAgIGlmICh0aGlzLiRpc0VtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHMobGVhZCwgbGVhZCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaXNCYWNrd2FyZHMoKVxuICAgICAgICAgICAgPyBSYW5nZS5mcm9tUG9pbnRzKGxlYWQsIGFuY2hvcilcbiAgICAgICAgICAgIDogUmFuZ2UuZnJvbVBvaW50cyhhbmNob3IsIGxlYWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFtFbXB0aWVzIHRoZSBzZWxlY3Rpb24gKGJ5IGRlLXNlbGVjdGluZyBpdCkuIFRoaXMgZnVuY3Rpb24gYWxzbyBlbWl0cyB0aGUgYCdjaGFuZ2VTZWxlY3Rpb24nYCBldmVudC5dezogI1NlbGVjdGlvbi5jbGVhclNlbGVjdGlvbn1cbiAgICAgKiovXG4gICAgY2xlYXJTZWxlY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy4kaXNFbXB0eSkge1xuICAgICAgICAgICAgdGhpcy4kaXNFbXB0eSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9lbWl0KFwiY2hhbmdlU2VsZWN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0cyBhbGwgdGhlIHRleHQgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqKi9cbiAgICBzZWxlY3RBbGwoKSB7XG4gICAgICAgIHRoaXMuJHNldFNlbGVjdGlvbigwLCAwLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzZWxlY3Rpb24gdG8gdGhlIHByb3ZpZGVkIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5JUmFuZ2V9IHJhbmdlIFRoZSByYW5nZSBvZiB0ZXh0IHRvIHNlbGVjdFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JldmVyc2VdIEluZGljYXRlcyBpZiB0aGUgcmFuZ2Ugc2hvdWxkIGdvIGJhY2t3YXJkcyAoYHRydWVgKSBvciBub3RcbiAgICAgKiovXG4gICAgc2V0UmFuZ2UocmFuZ2UsIHJldmVyc2UpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gcmV2ZXJzZSA/IHJhbmdlLmVuZCA6IHJhbmdlLnN0YXJ0O1xuICAgICAgICB2YXIgZW5kID0gcmV2ZXJzZSA/IHJhbmdlLnN0YXJ0IDogcmFuZ2UuZW5kO1xuICAgICAgICB0aGlzLiRzZXRTZWxlY3Rpb24oc3RhcnQucm93LCBzdGFydC5jb2x1bW4sIGVuZC5yb3csIGVuZC5jb2x1bW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmNob3JSb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5jaG9yQ29sdW1uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnNvclJvd1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJzb3JDb2x1bW5cbiAgICAgKi9cbiAgICAkc2V0U2VsZWN0aW9uKGFuY2hvclJvdywgYW5jaG9yQ29sdW1uLCBjdXJzb3JSb3csIGN1cnNvckNvbHVtbikge1xuICAgICAgICBpZiAodGhpcy4kc2lsZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgd2FzRW1wdHkgPSB0aGlzLiRpc0VtcHR5O1xuICAgICAgICB2YXIgd2FzTXVsdGlzZWxlY3QgPSB0aGlzLmluTXVsdGlTZWxlY3RNb2RlO1xuICAgICAgICB0aGlzLiRzaWxlbnQgPSB0cnVlO1xuICAgICAgICB0aGlzLiRjdXJzb3JDaGFuZ2VkID0gdGhpcy4kYW5jaG9yQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFuY2hvci5zZXRQb3NpdGlvbihhbmNob3JSb3csIGFuY2hvckNvbHVtbik7XG4gICAgICAgIHRoaXMuY3Vyc29yLnNldFBvc2l0aW9uKGN1cnNvclJvdywgY3Vyc29yQ29sdW1uKTtcbiAgICAgICAgdGhpcy4kaXNFbXB0eSA9ICFSYW5nZS5jb21wYXJlUG9pbnRzKHRoaXMuYW5jaG9yLCB0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuJHNpbGVudCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy4kY3Vyc29yQ2hhbmdlZClcbiAgICAgICAgICAgIHRoaXMuX2VtaXQoXCJjaGFuZ2VDdXJzb3JcIik7XG4gICAgICAgIGlmICh0aGlzLiRjdXJzb3JDaGFuZ2VkIHx8IHRoaXMuJGFuY2hvckNoYW5nZWQgfHwgd2FzRW1wdHkgIT0gdGhpcy4kaXNFbXB0eSB8fCB3YXNNdWx0aXNlbGVjdClcbiAgICAgICAgICAgIHRoaXMuX2VtaXQoXCJjaGFuZ2VTZWxlY3Rpb25cIik7XG4gICAgfVxuXG4gICAgJG1vdmVTZWxlY3Rpb24obW92ZXIpIHtcbiAgICAgICAgdmFyIGxlYWQgPSB0aGlzLmxlYWQ7XG4gICAgICAgIGlmICh0aGlzLiRpc0VtcHR5KVxuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25BbmNob3IobGVhZC5yb3csIGxlYWQuY29sdW1uKTtcblxuICAgICAgICBtb3Zlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBzZWxlY3Rpb24gY3Vyc29yIHRvIHRoZSBpbmRpY2F0ZWQgcm93IGFuZCBjb2x1bW4uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IHRvIHNlbGVjdCB0b1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gVGhlIGNvbHVtbiB0byBzZWxlY3QgdG9cbiAgICAgKiovXG4gICAgc2VsZWN0VG8ocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdGhpcy4kbW92ZVNlbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvKHJvdywgY29sdW1uKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIHNlbGVjdGlvbiBjdXJzb3IgdG8gdGhlIHJvdyBhbmQgY29sdW1uIGluZGljYXRlZCBieSBgcG9zYC5cbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwb3MgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJvdyBhbmQgY29sdW1uXG4gICAgICoqL1xuICAgIHNlbGVjdFRvUG9zaXRpb24ocG9zKSB7XG4gICAgICAgIHRoaXMuJG1vdmVTZWxlY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JUb1Bvc2l0aW9uKHBvcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBzZWxlY3Rpb24gY3Vyc29yIHRvIHRoZSBpbmRpY2F0ZWQgcm93IGFuZCBjb2x1bW4uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IHRvIHNlbGVjdCB0b1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2x1bW4gVGhlIGNvbHVtbiB0byBzZWxlY3QgdG9cbiAgICAgKiovXG4gICAgbW92ZVRvKHJvdywgY29sdW1uKSB7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5tb3ZlQ3Vyc29yVG8ocm93LCBjb2x1bW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBzZWxlY3Rpb24gY3Vyc29yIHRvIHRoZSByb3cgYW5kIGNvbHVtbiBpbmRpY2F0ZWQgYnkgYHBvc2AuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBvcyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgcm93IGFuZCBjb2x1bW5cbiAgICAgKiovXG4gICAgbW92ZVRvUG9zaXRpb24ocG9zKSB7XG4gICAgICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgdGhpcy5tb3ZlQ3Vyc29yVG9Qb3NpdGlvbihwb3MpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIHNlbGVjdGlvbiB1cCBvbmUgcm93LlxuICAgICAqKi9cbiAgICBzZWxlY3RVcCgpIHtcbiAgICAgICAgdGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JVcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIHNlbGVjdGlvbiBkb3duIG9uZSByb3cuXG4gICAgICoqL1xuICAgIHNlbGVjdERvd24oKSB7XG4gICAgICAgIHRoaXMuJG1vdmVTZWxlY3Rpb24odGhpcy5tb3ZlQ3Vyc29yRG93bik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIHNlbGVjdGlvbiByaWdodCBvbmUgY29sdW1uLlxuICAgICAqKi9cbiAgICBzZWxlY3RSaWdodCgpIHtcbiAgICAgICAgdGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JSaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIHNlbGVjdGlvbiBsZWZ0IG9uZSBjb2x1bW4uXG4gICAgICoqL1xuICAgIHNlbGVjdExlZnQoKSB7XG4gICAgICAgIHRoaXMuJG1vdmVTZWxlY3Rpb24odGhpcy5tb3ZlQ3Vyc29yTGVmdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIHNlbGVjdGlvbiB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjdXJyZW50IGxpbmUuXG4gICAgICoqL1xuICAgIHNlbGVjdExpbmVTdGFydCgpIHtcbiAgICAgICAgdGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JMaW5lU3RhcnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBzZWxlY3Rpb24gdG8gdGhlIGVuZCBvZiB0aGUgY3VycmVudCBsaW5lLlxuICAgICAqKi9cbiAgICBzZWxlY3RMaW5lRW5kKCkge1xuICAgICAgICB0aGlzLiRtb3ZlU2VsZWN0aW9uKHRoaXMubW92ZUN1cnNvckxpbmVFbmQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBzZWxlY3Rpb24gdG8gdGhlIGVuZCBvZiB0aGUgZmlsZS5cbiAgICAgKiovXG4gICAgc2VsZWN0RmlsZUVuZCgpIHtcbiAgICAgICAgdGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JGaWxlRW5kKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgc2VsZWN0aW9uIHRvIHRoZSBzdGFydCBvZiB0aGUgZmlsZS5cbiAgICAgKiovXG4gICAgc2VsZWN0RmlsZVN0YXJ0KCkge1xuICAgICAgICB0aGlzLiRtb3ZlU2VsZWN0aW9uKHRoaXMubW92ZUN1cnNvckZpbGVTdGFydCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIHNlbGVjdGlvbiB0byB0aGUgZmlyc3Qgd29yZCBvbiB0aGUgcmlnaHQuXG4gICAgICoqL1xuICAgIHNlbGVjdFdvcmRSaWdodCgpIHtcbiAgICAgICAgdGhpcy4kbW92ZVNlbGVjdGlvbih0aGlzLm1vdmVDdXJzb3JXb3JkUmlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBzZWxlY3Rpb24gdG8gdGhlIGZpcnN0IHdvcmQgb24gdGhlIGxlZnQuXG4gICAgICoqL1xuICAgIHNlbGVjdFdvcmRMZWZ0KCkge1xuICAgICAgICB0aGlzLiRtb3ZlU2VsZWN0aW9uKHRoaXMubW92ZUN1cnNvcldvcmRMZWZ0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgc2VsZWN0aW9uIHRvIGhpZ2hsaWdodCB0aGUgZW50aXJlIHdvcmQuXG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24uZ2V0V29yZFJhbmdlXG4gICAgICoqL1xuICAgIGdldFdvcmRSYW5nZShyb3csIGNvbHVtbikge1xuICAgICAgICBpZiAodHlwZW9mIGNvbHVtbiA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB2YXIgY3Vyc29yID0gcm93IHx8IHRoaXMubGVhZDtcbiAgICAgICAgICAgIHJvdyA9IGN1cnNvci5yb3c7XG4gICAgICAgICAgICBjb2x1bW4gPSBjdXJzb3IuY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb24uZ2V0V29yZFJhbmdlKHJvdywgY29sdW1uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIGFuIGVudGlyZSB3b3JkIGJvdW5kYXJ5LlxuICAgICAqKi9cbiAgICBzZWxlY3RXb3JkKCkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGlvblJhbmdlKHRoaXMuZ2V0V29yZFJhbmdlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdHMgYSB3b3JkLCBpbmNsdWRpbmcgaXRzIHJpZ2h0IHdoaXRlc3BhY2UuXG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24uZ2V0QVdvcmRSYW5nZVxuICAgICAqKi9cbiAgICBzZWxlY3RBV29yZCgpIHtcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuZ2V0Q3Vyc29yKCk7XG4gICAgICAgIHZhciByYW5nZSA9IHRoaXMuc2Vzc2lvbi5nZXRBV29yZFJhbmdlKGN1cnNvci5yb3csIGN1cnNvci5jb2x1bW4pO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlKTtcbiAgICB9XG5cbiAgICBnZXRMaW5lUmFuZ2Uocm93LCBleGNsdWRlTGFzdENoYXIpIHtcbiAgICAgICAgdmFyIHJvd1N0YXJ0ID0gdHlwZW9mIHJvdyA9PSBcIm51bWJlclwiID8gcm93IDogdGhpcy5sZWFkLnJvdztcbiAgICAgICAgdmFyIHJvd0VuZDtcblxuICAgICAgICB2YXIgZm9sZExpbmUgPSB0aGlzLnNlc3Npb24uZ2V0Rm9sZExpbmUocm93U3RhcnQpO1xuICAgICAgICBpZiAoZm9sZExpbmUpIHtcbiAgICAgICAgICAgIHJvd1N0YXJ0ID0gZm9sZExpbmUuc3RhcnQucm93O1xuICAgICAgICAgICAgcm93RW5kID0gZm9sZExpbmUuZW5kLnJvdztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJvd0VuZCA9IHJvd1N0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChleGNsdWRlTGFzdENoYXIgPT09IHRydWUpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHJvd1N0YXJ0LCAwLCByb3dFbmQsIHRoaXMuc2Vzc2lvbi5nZXRMaW5lKHJvd0VuZCkubGVuZ3RoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShyb3dTdGFydCwgMCwgcm93RW5kICsgMSwgMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0cyB0aGUgZW50aXJlIGxpbmUuXG4gICAgICoqL1xuICAgIHNlbGVjdExpbmUoKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2UodGhpcy5nZXRMaW5lUmFuZ2UoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGN1cnNvciB1cCBvbmUgcm93LlxuICAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yVXAoKSB7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvckJ5KC0xLCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgY3Vyc29yIGRvd24gb25lIHJvdy5cbiAgICAgKiovXG4gICAgbW92ZUN1cnNvckRvd24oKSB7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvckJ5KDEsIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgbW92aW5nIHRoZSBjaGFyYWN0ZXIgbmV4dCB0byB0aGUgY3Vyc29yIGluIHRoZSBzcGVjaWZpZWQgZGlyZWN0aW9uIGlzIGEgc29mdCB0YWIuXG4gICAgICogQHBhcmFtIHtQb2ludH0gY3Vyc29yIHRoZSBjdXJyZW50IGN1cnNvciBwb3NpdGlvblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0YWJTaXplIHRoZSB0YWIgc2l6ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkaXJlY3Rpb24gMSBmb3IgcmlnaHQsIC0xIGZvciBsZWZ0XG4gICAgICovXG4gICAgd291bGRNb3ZlSW50b1NvZnRUYWIoY3Vyc29yLCB0YWJTaXplLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gY3Vyc29yLmNvbHVtbjtcbiAgICAgICAgdmFyIGVuZCA9IGN1cnNvci5jb2x1bW4gKyB0YWJTaXplO1xuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPCAwKSB7XG4gICAgICAgICAgICBzdGFydCA9IGN1cnNvci5jb2x1bW4gLSB0YWJTaXplO1xuICAgICAgICAgICAgZW5kID0gY3Vyc29yLmNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uLmlzVGFiU3RvcChjdXJzb3IpICYmIHRoaXMuZG9jLmdldExpbmUoY3Vyc29yLnJvdykuc2xpY2Uoc3RhcnQsIGVuZCkuc3BsaXQoXCIgXCIpLmxlbmd0aC0xID09IHRhYlNpemU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGN1cnNvciBsZWZ0IG9uZSBjb2x1bW4uXG4gICAgICoqL1xuICAgIG1vdmVDdXJzb3JMZWZ0KCkge1xuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5sZWFkLmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICBmb2xkO1xuXG4gICAgICAgIGlmIChmb2xkID0gdGhpcy5zZXNzaW9uLmdldEZvbGRBdChjdXJzb3Iucm93LCBjdXJzb3IuY29sdW1uLCAtMSkpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvKGZvbGQuc3RhcnQucm93LCBmb2xkLnN0YXJ0LmNvbHVtbik7XG4gICAgICAgIH0gZWxzZSBpZiAoY3Vyc29yLmNvbHVtbiA9PT0gMCkge1xuICAgICAgICAgICAgLy8gY3Vyc29yIGlzIGEgbGluZSAoc3RhcnRcbiAgICAgICAgICAgIGlmIChjdXJzb3Iucm93ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvKGN1cnNvci5yb3cgLSAxLCB0aGlzLmRvYy5nZXRMaW5lKGN1cnNvci5yb3cgLSAxKS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhYlNpemUgPSB0aGlzLnNlc3Npb24uZ2V0VGFiU2l6ZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMud291bGRNb3ZlSW50b1NvZnRUYWIoY3Vyc29yLCB0YWJTaXplLCAtMSkgJiYgIXRoaXMuc2Vzc2lvbi5nZXROYXZpZ2F0ZVdpdGhpblNvZnRUYWJzKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JCeSgwLCAtdGFiU2l6ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvckJ5KDAsIC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgcmlnaHQgb25lIGNvbHVtbi5cbiAgICAgKiovXG4gICAgbW92ZUN1cnNvclJpZ2h0KCkge1xuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5sZWFkLmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICBmb2xkO1xuICAgICAgICBpZiAoZm9sZCA9IHRoaXMuc2Vzc2lvbi5nZXRGb2xkQXQoY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbiwgMSkpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvKGZvbGQuZW5kLnJvdywgZm9sZC5lbmQuY29sdW1uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmxlYWQuY29sdW1uID09IHRoaXMuZG9jLmdldExpbmUodGhpcy5sZWFkLnJvdykubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sZWFkLnJvdyA8IHRoaXMuZG9jLmdldExlbmd0aCgpIC0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvKHRoaXMubGVhZC5yb3cgKyAxLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YWJTaXplID0gdGhpcy5zZXNzaW9uLmdldFRhYlNpemUoKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHR5cGUge1BvaW50fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5sZWFkO1xuICAgICAgICAgICAgaWYgKHRoaXMud291bGRNb3ZlSW50b1NvZnRUYWIoY3Vyc29yLCB0YWJTaXplLCAxKSAmJiAhdGhpcy5zZXNzaW9uLmdldE5hdmlnYXRlV2l0aGluU29mdFRhYnMoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvckJ5KDAsIHRhYlNpemUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JCeSgwLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIHN0YXJ0IG9mIHRoZSBsaW5lLlxuICAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yTGluZVN0YXJ0KCkge1xuICAgICAgICB2YXIgcm93ID0gdGhpcy5sZWFkLnJvdztcbiAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMubGVhZC5jb2x1bW47XG4gICAgICAgIHZhciBzY3JlZW5Sb3cgPSB0aGlzLnNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblJvdyhyb3csIGNvbHVtbik7XG5cbiAgICAgICAgLy8gRGV0ZXJtIHRoZSBkb2MtcG9zaXRpb24gb2YgdGhlIGZpcnN0IGNoYXJhY3RlciBhdCB0aGUgc2NyZWVuIGxpbmUuXG4gICAgICAgIHZhciBmaXJzdENvbHVtblBvc2l0aW9uID0gdGhpcy5zZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihzY3JlZW5Sb3csIDApO1xuXG4gICAgICAgIC8vIERldGVybSB0aGUgbGluZVxuICAgICAgICB2YXIgYmVmb3JlQ3Vyc29yID0gdGhpcy5zZXNzaW9uLmdldERpc3BsYXlMaW5lKFxuICAgICAgICAgICAgcm93LCBudWxsLCBmaXJzdENvbHVtblBvc2l0aW9uLnJvdyxcbiAgICAgICAgICAgIGZpcnN0Q29sdW1uUG9zaXRpb24uY29sdW1uXG4gICAgICAgICk7XG5cbiAgICAgICAgdmFyIGxlYWRpbmdTcGFjZSA9IGJlZm9yZUN1cnNvci5tYXRjaCgvXlxccyovKTtcbiAgICAgICAgLy8gVE9ETyBmaW5kIGJldHRlciB3YXkgZm9yIGVtYWNzIG1vZGUgdG8gb3ZlcnJpZGUgc2VsZWN0aW9uIGJlaGF2aW9yc1xuICAgICAgICBpZiAobGVhZGluZ1NwYWNlWzBdLmxlbmd0aCAhPSBjb2x1bW4gJiYgIXRoaXMuc2Vzc2lvbi4kdXNlRW1hY3NTdHlsZUxpbmVTdGFydClcbiAgICAgICAgICAgIGZpcnN0Q29sdW1uUG9zaXRpb24uY29sdW1uICs9IGxlYWRpbmdTcGFjZVswXS5sZW5ndGg7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvclRvUG9zaXRpb24oZmlyc3RDb2x1bW5Qb3NpdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGN1cnNvciB0byB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yTGluZUVuZCgpIHtcbiAgICAgICAgdmFyIGxlYWQgPSB0aGlzLmxlYWQ7XG4gICAgICAgIHZhciBsaW5lRW5kID0gdGhpcy5zZXNzaW9uLmdldERvY3VtZW50TGFzdFJvd0NvbHVtblBvc2l0aW9uKGxlYWQucm93LCBsZWFkLmNvbHVtbik7XG4gICAgICAgIGlmICh0aGlzLmxlYWQuY29sdW1uID09IGxpbmVFbmQuY29sdW1uKSB7XG4gICAgICAgICAgICB2YXIgbGluZSA9IHRoaXMuc2Vzc2lvbi5nZXRMaW5lKGxpbmVFbmQucm93KTtcbiAgICAgICAgICAgIGlmIChsaW5lRW5kLmNvbHVtbiA9PSBsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0RW5kID0gbGluZS5zZWFyY2goL1xccyskLyk7XG4gICAgICAgICAgICAgICAgaWYgKHRleHRFbmQgPiAwKVxuICAgICAgICAgICAgICAgICAgICBsaW5lRW5kLmNvbHVtbiA9IHRleHRFbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1vdmVDdXJzb3JUbyhsaW5lRW5kLnJvdywgbGluZUVuZC5jb2x1bW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIGVuZCBvZiB0aGUgZmlsZS5cbiAgICAgKiovXG4gICAgbW92ZUN1cnNvckZpbGVFbmQoKSB7XG4gICAgICAgIHZhciByb3cgPSB0aGlzLmRvYy5nZXRMZW5ndGgoKSAtIDE7XG4gICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLmRvYy5nZXRMaW5lKHJvdykubGVuZ3RoO1xuICAgICAgICB0aGlzLm1vdmVDdXJzb3JUbyhyb3csIGNvbHVtbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGN1cnNvciB0byB0aGUgc3RhcnQgb2YgdGhlIGZpbGUuXG4gICAgICoqL1xuICAgIG1vdmVDdXJzb3JGaWxlU3RhcnQoKSB7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvclRvKDAsIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIHdvcmQgb24gdGhlIHJpZ2h0LlxuICAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yTG9uZ1dvcmRSaWdodCgpIHtcbiAgICAgICAgdmFyIHJvdyA9IHRoaXMubGVhZC5yb3c7XG4gICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLmxlYWQuY29sdW1uO1xuICAgICAgICB2YXIgbGluZSA9IHRoaXMuZG9jLmdldExpbmUocm93KTtcbiAgICAgICAgdmFyIHJpZ2h0T2ZDdXJzb3IgPSBsaW5lLnN1YnN0cmluZyhjb2x1bW4pO1xuXG4gICAgICAgIHRoaXMuc2Vzc2lvbi5ub25Ub2tlblJlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi50b2tlblJlLmxhc3RJbmRleCA9IDA7XG5cbiAgICAgICAgLy8gc2tpcCBmb2xkc1xuICAgICAgICB2YXIgZm9sZCA9IHRoaXMuc2Vzc2lvbi5nZXRGb2xkQXQocm93LCBjb2x1bW4sIDEpO1xuICAgICAgICBpZiAoZm9sZCkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlQ3Vyc29yVG8oZm9sZC5lbmQucm93LCBmb2xkLmVuZC5jb2x1bW4pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmlyc3Qgc2tpcCBzcGFjZVxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uLm5vblRva2VuUmUuZXhlYyhyaWdodE9mQ3Vyc29yKSkge1xuICAgICAgICAgICAgY29sdW1uICs9IHRoaXMuc2Vzc2lvbi5ub25Ub2tlblJlLmxhc3RJbmRleDtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5ub25Ub2tlblJlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICByaWdodE9mQ3Vyc29yID0gbGluZS5zdWJzdHJpbmcoY29sdW1uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGF0IGxpbmUgZW5kIHByb2NlZWQgd2l0aCBuZXh0IGxpbmVcbiAgICAgICAgaWYgKGNvbHVtbiA+PSBsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlQ3Vyc29yVG8ocm93LCBsaW5lLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JSaWdodCgpO1xuICAgICAgICAgICAgaWYgKHJvdyA8IHRoaXMuZG9jLmdldExlbmd0aCgpIC0gMSlcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JXb3JkUmlnaHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkdmFuY2UgdG8gdGhlIGVuZCBvZiB0aGUgbmV4dCB0b2tlblxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uLnRva2VuUmUuZXhlYyhyaWdodE9mQ3Vyc29yKSkge1xuICAgICAgICAgICAgY29sdW1uICs9IHRoaXMuc2Vzc2lvbi50b2tlblJlLmxhc3RJbmRleDtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi50b2tlblJlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1vdmVDdXJzb3JUbyhyb3csIGNvbHVtbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKlxuICAgICogTW92ZXMgdGhlIGN1cnNvciB0byB0aGUgd29yZCBvbiB0aGUgbGVmdC5cbiAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yTG9uZ1dvcmRMZWZ0KCkge1xuICAgICAgICB2YXIgcm93ID0gdGhpcy5sZWFkLnJvdztcbiAgICAgICAgdmFyIGNvbHVtbiA9IHRoaXMubGVhZC5jb2x1bW47XG5cbiAgICAgICAgLy8gc2tpcCBmb2xkc1xuICAgICAgICB2YXIgZm9sZDtcbiAgICAgICAgaWYgKGZvbGQgPSB0aGlzLnNlc3Npb24uZ2V0Rm9sZEF0KHJvdywgY29sdW1uLCAtMSkpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvKGZvbGQuc3RhcnQucm93LCBmb2xkLnN0YXJ0LmNvbHVtbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3RyID0gdGhpcy5zZXNzaW9uLmdldEZvbGRTdHJpbmdBdChyb3csIGNvbHVtbiwgLTEpO1xuICAgICAgICBpZiAoc3RyID09IG51bGwpIHtcbiAgICAgICAgICAgIHN0ciA9IHRoaXMuZG9jLmdldExpbmUocm93KS5zdWJzdHJpbmcoMCwgY29sdW1uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsZWZ0T2ZDdXJzb3IgPSBsYW5nLnN0cmluZ1JldmVyc2Uoc3RyKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLm5vblRva2VuUmUubGFzdEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnRva2VuUmUubGFzdEluZGV4ID0gMDtcblxuICAgICAgICAvLyBza2lwIHdoaXRlc3BhY2VcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbi5ub25Ub2tlblJlLmV4ZWMobGVmdE9mQ3Vyc29yKSkge1xuICAgICAgICAgICAgY29sdW1uIC09IHRoaXMuc2Vzc2lvbi5ub25Ub2tlblJlLmxhc3RJbmRleDtcbiAgICAgICAgICAgIGxlZnRPZkN1cnNvciA9IGxlZnRPZkN1cnNvci5zbGljZSh0aGlzLnNlc3Npb24ubm9uVG9rZW5SZS5sYXN0SW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLm5vblRva2VuUmUubGFzdEluZGV4ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGF0IGJlZ2luIG9mIHRoZSBsaW5lIHByb2NlZWQgaW4gbGluZSBhYm92ZVxuICAgICAgICBpZiAoY29sdW1uIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvKHJvdywgMCk7XG4gICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JMZWZ0KCk7XG4gICAgICAgICAgICBpZiAocm93ID4gMClcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JXb3JkTGVmdCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbW92ZSB0byB0aGUgYmVnaW4gb2YgdGhlIHdvcmRcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbi50b2tlblJlLmV4ZWMobGVmdE9mQ3Vyc29yKSkge1xuICAgICAgICAgICAgY29sdW1uIC09IHRoaXMuc2Vzc2lvbi50b2tlblJlLmxhc3RJbmRleDtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi50b2tlblJlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1vdmVDdXJzb3JUbyhyb3csIGNvbHVtbik7XG4gICAgfVxuXG4gICAgJHNob3J0V29yZEVuZEluZGV4KHJpZ2h0T2ZDdXJzb3IpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMCwgY2g7XG4gICAgICAgIHZhciB3aGl0ZXNwYWNlUmUgPSAvXFxzLztcbiAgICAgICAgdmFyIHRva2VuUmUgPSB0aGlzLnNlc3Npb24udG9rZW5SZTtcblxuICAgICAgICB0b2tlblJlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24udG9rZW5SZS5leGVjKHJpZ2h0T2ZDdXJzb3IpKSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuc2Vzc2lvbi50b2tlblJlLmxhc3RJbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdoaWxlICgoY2ggPSByaWdodE9mQ3Vyc29yW2luZGV4XSkgJiYgd2hpdGVzcGFjZVJlLnRlc3QoY2gpKVxuICAgICAgICAgICAgICAgIGluZGV4ICsrO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAxKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5SZS5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICB3aGlsZSAoKGNoID0gcmlnaHRPZkN1cnNvcltpbmRleF0pICYmICF0b2tlblJlLnRlc3QoY2gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuUmUubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggKys7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3aGl0ZXNwYWNlUmUudGVzdChjaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKGNoID0gcmlnaHRPZkN1cnNvcltpbmRleF0pICYmIHdoaXRlc3BhY2VSZS50ZXN0KGNoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdG9rZW5SZS5sYXN0SW5kZXggPSAwO1xuXG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG5cbiAgICBtb3ZlQ3Vyc29yU2hvcnRXb3JkUmlnaHQoKSB7XG4gICAgICAgIHZhciByb3cgPSB0aGlzLmxlYWQucm93O1xuICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5sZWFkLmNvbHVtbjtcbiAgICAgICAgdmFyIGxpbmUgPSB0aGlzLmRvYy5nZXRMaW5lKHJvdyk7XG4gICAgICAgIHZhciByaWdodE9mQ3Vyc29yID0gbGluZS5zdWJzdHJpbmcoY29sdW1uKTtcblxuICAgICAgICB2YXIgZm9sZCA9IHRoaXMuc2Vzc2lvbi5nZXRGb2xkQXQocm93LCBjb2x1bW4sIDEpO1xuICAgICAgICBpZiAoZm9sZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vdmVDdXJzb3JUbyhmb2xkLmVuZC5yb3csIGZvbGQuZW5kLmNvbHVtbik7XG5cbiAgICAgICAgaWYgKGNvbHVtbiA9PSBsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGwgPSB0aGlzLmRvYy5nZXRMZW5ndGgoKTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICByb3crKztcbiAgICAgICAgICAgICAgICByaWdodE9mQ3Vyc29yID0gdGhpcy5kb2MuZ2V0TGluZShyb3cpO1xuICAgICAgICAgICAgfSB3aGlsZSAocm93IDwgbCAmJiAvXlxccyokLy50ZXN0KHJpZ2h0T2ZDdXJzb3IpKTtcblxuICAgICAgICAgICAgaWYgKCEvXlxccysvLnRlc3QocmlnaHRPZkN1cnNvcikpXG4gICAgICAgICAgICAgICAgcmlnaHRPZkN1cnNvciA9IFwiXCI7XG4gICAgICAgICAgICBjb2x1bW4gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy4kc2hvcnRXb3JkRW5kSW5kZXgocmlnaHRPZkN1cnNvcik7XG5cbiAgICAgICAgdGhpcy5tb3ZlQ3Vyc29yVG8ocm93LCBjb2x1bW4gKyBpbmRleCk7XG4gICAgfVxuXG4gICAgbW92ZUN1cnNvclNob3J0V29yZExlZnQoKSB7XG4gICAgICAgIHZhciByb3cgPSB0aGlzLmxlYWQucm93O1xuICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5sZWFkLmNvbHVtbjtcblxuICAgICAgICB2YXIgZm9sZDtcbiAgICAgICAgaWYgKGZvbGQgPSB0aGlzLnNlc3Npb24uZ2V0Rm9sZEF0KHJvdywgY29sdW1uLCAtMSkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb3ZlQ3Vyc29yVG8oZm9sZC5zdGFydC5yb3csIGZvbGQuc3RhcnQuY29sdW1uKTtcblxuICAgICAgICB2YXIgbGluZSA9IHRoaXMuc2Vzc2lvbi5nZXRMaW5lKHJvdykuc3Vic3RyaW5nKDAsIGNvbHVtbik7XG4gICAgICAgIGlmIChjb2x1bW4gPT09IDApIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICByb3ctLTtcbiAgICAgICAgICAgICAgICBsaW5lID0gdGhpcy5kb2MuZ2V0TGluZShyb3cpO1xuICAgICAgICAgICAgfSB3aGlsZSAocm93ID4gMCAmJiAvXlxccyokLy50ZXN0KGxpbmUpKTtcblxuICAgICAgICAgICAgY29sdW1uID0gbGluZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIS9cXHMrJC8udGVzdChsaW5lKSlcbiAgICAgICAgICAgICAgICBsaW5lID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsZWZ0T2ZDdXJzb3IgPSBsYW5nLnN0cmluZ1JldmVyc2UobGluZSk7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuJHNob3J0V29yZEVuZEluZGV4KGxlZnRPZkN1cnNvcik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubW92ZUN1cnNvclRvKHJvdywgY29sdW1uIC0gaW5kZXgpO1xuICAgIH1cblxuICAgIG1vdmVDdXJzb3JXb3JkUmlnaHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uJHNlbGVjdExvbmdXb3JkcylcbiAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvckxvbmdXb3JkUmlnaHQoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5tb3ZlQ3Vyc29yU2hvcnRXb3JkUmlnaHQoKTtcbiAgICB9XG5cbiAgICBtb3ZlQ3Vyc29yV29yZExlZnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uJHNlbGVjdExvbmdXb3JkcylcbiAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvckxvbmdXb3JkTGVmdCgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JTaG9ydFdvcmRMZWZ0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGN1cnNvciB0byBwb3NpdGlvbiBpbmRpY2F0ZWQgYnkgdGhlIHBhcmFtZXRlcnMuIE5lZ2F0aXZlIG51bWJlcnMgbW92ZSB0aGUgY3Vyc29yIGJhY2t3YXJkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvd3MgVGhlIG51bWJlciBvZiByb3dzIHRvIG1vdmUgYnlcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY2hhcnMgVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHRvIG1vdmUgYnlcbiAgICAgKlxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvblxuICAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yQnkocm93cywgY2hhcnMpIHtcbiAgICAgICAgdmFyIHNjcmVlblBvcyA9IHRoaXMuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24oXG4gICAgICAgICAgICB0aGlzLmxlYWQucm93LFxuICAgICAgICAgICAgdGhpcy5sZWFkLmNvbHVtblxuICAgICAgICApO1xuXG4gICAgICAgIHZhciBvZmZzZXRYO1xuXG4gICAgICAgIGlmIChjaGFycyA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHJvd3MgIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXNzaW9uLiRiaWRpSGFuZGxlci5pc0JpZGlSb3coc2NyZWVuUG9zLnJvdywgdGhpcy5sZWFkLnJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WCA9IHRoaXMuc2Vzc2lvbi4kYmlkaUhhbmRsZXIuZ2V0UG9zTGVmdChzY3JlZW5Qb3MuY29sdW1uKTtcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuUG9zLmNvbHVtbiA9IE1hdGgucm91bmQob2Zmc2V0WCAvIHRoaXMuc2Vzc2lvbi4kYmlkaUhhbmRsZXIuY2hhcldpZHRoc1swXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WCA9IHNjcmVlblBvcy5jb2x1bW4gKiB0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLmNoYXJXaWR0aHNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy4kZGVzaXJlZENvbHVtbilcbiAgICAgICAgICAgICAgICBzY3JlZW5Qb3MuY29sdW1uID0gdGhpcy4kZGVzaXJlZENvbHVtbjtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLiRkZXNpcmVkQ29sdW1uID0gc2NyZWVuUG9zLmNvbHVtbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyb3dzICE9IDAgJiYgdGhpcy5zZXNzaW9uLmxpbmVXaWRnZXRzICYmIHRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0c1t0aGlzLmxlYWQucm93XSkge1xuICAgICAgICAgICAgdmFyIHdpZGdldCA9IHRoaXMuc2Vzc2lvbi5saW5lV2lkZ2V0c1t0aGlzLmxlYWQucm93XTtcbiAgICAgICAgICAgIGlmIChyb3dzIDwgMClcbiAgICAgICAgICAgICAgICByb3dzIC09IHdpZGdldC5yb3dzQWJvdmUgfHwgMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHJvd3MgPiAwKVxuICAgICAgICAgICAgICAgIHJvd3MgKz0gd2lkZ2V0LnJvd0NvdW50IC0gKHdpZGdldC5yb3dzQWJvdmUgfHwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZG9jUG9zID0gdGhpcy5zZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihzY3JlZW5Qb3Mucm93ICsgcm93cywgc2NyZWVuUG9zLmNvbHVtbiwgb2Zmc2V0WCk7XG5cbiAgICAgICAgaWYgKHJvd3MgIT09IDAgJiYgY2hhcnMgPT09IDAgJiYgZG9jUG9zLnJvdyA9PT0gdGhpcy5sZWFkLnJvdyAmJiBkb2NQb3MuY29sdW1uID09PSB0aGlzLmxlYWQuY29sdW1uKSB7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vdmUgdGhlIGN1cnNvciBhbmQgdXBkYXRlIHRoZSBkZXNpcmVkIGNvbHVtblxuICAgICAgICB0aGlzLm1vdmVDdXJzb3JUbyhkb2NQb3Mucm93LCBkb2NQb3MuY29sdW1uICsgY2hhcnMsIGNoYXJzID09PSAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgc2VsZWN0aW9uIHRvIHRoZSBwb3NpdGlvbiBpbmRpY2F0ZWQgYnkgaXRzIGByb3dgIGFuZCBgY29sdW1uYC5cbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwb3NpdGlvbiBUaGUgcG9zaXRpb24gdG8gbW92ZSB0b1xuICAgICAqKi9cbiAgICBtb3ZlQ3Vyc29yVG9Qb3NpdGlvbihwb3NpdGlvbikge1xuICAgICAgICB0aGlzLm1vdmVDdXJzb3JUbyhwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGN1cnNvciB0byB0aGUgcm93IGFuZCBjb2x1bW4gcHJvdmlkZWQuIFtJZiBgcHJldmVudFVwZGF0ZURlc2lyZWRDb2x1bW5gIGlzIGB0cnVlYCwgdGhlbiB0aGUgY3Vyc29yIHN0YXlzIGluIHRoZSBzYW1lIGNvbHVtbiBwb3NpdGlvbiBhcyBpdHMgb3JpZ2luYWwgcG9pbnQuXXs6ICNwcmV2ZW50VXBkYXRlQm9vbERlc2N9XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IHRvIG1vdmUgdG9cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIFRoZSBjb2x1bW4gdG8gbW92ZSB0b1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2tlZXBEZXNpcmVkQ29sdW1uXSBbSWYgYHRydWVgLCB0aGUgY3Vyc29yIG1vdmUgZG9lcyBub3QgcmVzcGVjdCB0aGUgcHJldmlvdXMgY29sdW1uXXs6ICNwcmV2ZW50VXBkYXRlQm9vbH1cbiAgICAgKiovXG4gICAgbW92ZUN1cnNvclRvKHJvdywgY29sdW1uLCBrZWVwRGVzaXJlZENvbHVtbikge1xuICAgICAgICAvLyBFbnN1cmUgdGhlIHJvdy9jb2x1bW4gaXMgbm90IGluc2lkZSBvZiBhIGZvbGQuXG4gICAgICAgIHZhciBmb2xkID0gdGhpcy5zZXNzaW9uLmdldEZvbGRBdChyb3csIGNvbHVtbiwgMSk7XG4gICAgICAgIGlmIChmb2xkKSB7XG4gICAgICAgICAgICByb3cgPSBmb2xkLnN0YXJ0LnJvdztcbiAgICAgICAgICAgIGNvbHVtbiA9IGZvbGQuc3RhcnQuY29sdW1uO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4ka2VlcERlc2lyZWRDb2x1bW5PbkNoYW5nZSA9IHRydWU7XG4gICAgICAgIHZhciBsaW5lID0gdGhpcy5zZXNzaW9uLmdldExpbmUocm93KTtcbiAgICAgICAgLy8gZG8gbm90IGFsbG93IHB1dHRpbmcgY3Vyc29yIGluIHRoZSBtaWRkbGUgb2Ygc3Vycm9nYXRlIHBhaXJzXG4gICAgICAgIGlmICgvW1xcdURDMDAtXFx1REZGRl0vLnRlc3QobGluZS5jaGFyQXQoY29sdW1uKSkgJiYgbGluZS5jaGFyQXQoY29sdW1uIC0gMSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxlYWQucm93ID09IHJvdyAmJiB0aGlzLmxlYWQuY29sdW1uID09IGNvbHVtbiArIDEpXG4gICAgICAgICAgICAgICAgY29sdW1uID0gY29sdW1uIC0gMTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjb2x1bW4gPSBjb2x1bW4gKyAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGVhZC5zZXRQb3NpdGlvbihyb3csIGNvbHVtbik7XG4gICAgICAgIHRoaXMuJGtlZXBEZXNpcmVkQ29sdW1uT25DaGFuZ2UgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIWtlZXBEZXNpcmVkQ29sdW1uKVxuICAgICAgICAgICAgdGhpcy4kZGVzaXJlZENvbHVtbiA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGN1cnNvciB0byB0aGUgc2NyZWVuIHBvc2l0aW9uIGluZGljYXRlZCBieSByb3cgYW5kIGNvbHVtbi4gezpwcmV2ZW50VXBkYXRlQm9vbERlc2N9XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJvdyBUaGUgcm93IHRvIG1vdmUgdG9cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIFRoZSBjb2x1bW4gdG8gbW92ZSB0b1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0ga2VlcERlc2lyZWRDb2x1bW4gezpwcmV2ZW50VXBkYXRlQm9vbH1cbiAgICAgKiovXG4gICAgbW92ZUN1cnNvclRvU2NyZWVuKHJvdywgY29sdW1uLCBrZWVwRGVzaXJlZENvbHVtbikge1xuICAgICAgICB2YXIgcG9zID0gdGhpcy5zZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRQb3NpdGlvbihyb3csIGNvbHVtbik7XG4gICAgICAgIHRoaXMubW92ZUN1cnNvclRvKHBvcy5yb3csIHBvcy5jb2x1bW4sIGtlZXBEZXNpcmVkQ29sdW1uKTtcbiAgICB9XG5cbiAgICAvLyByZW1vdmUgbGlzdGVuZXJzIGZyb20gZG9jdW1lbnRcbiAgICBkZXRhY2goKSB7XG4gICAgICAgIHRoaXMubGVhZC5kZXRhY2goKTtcbiAgICAgICAgdGhpcy5hbmNob3IuZGV0YWNoKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSYW5nZSAmIHtkZXNpcmVkQ29sdW1uPzogbnVtYmVyfX0gcmFuZ2VcbiAgICAgKi9cbiAgICBmcm9tT3JpZW50ZWRSYW5nZShyYW5nZSkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGlvblJhbmdlKHJhbmdlLCByYW5nZS5jdXJzb3IgPT0gcmFuZ2Uuc3RhcnQpO1xuICAgICAgICB0aGlzLiRkZXNpcmVkQ29sdW1uID0gcmFuZ2UuZGVzaXJlZENvbHVtbiB8fCB0aGlzLiRkZXNpcmVkQ29sdW1uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UmFuZ2UgJiB7ZGVzaXJlZENvbHVtbj86IG51bWJlcn19IFtyYW5nZV1cbiAgICAgKi9cbiAgICB0b09yaWVudGVkUmFuZ2UocmFuZ2UpIHtcbiAgICAgICAgdmFyIHIgPSB0aGlzLmdldFJhbmdlKCk7XG4gICAgICAgIGlmIChyYW5nZSkge1xuICAgICAgICAgICAgcmFuZ2Uuc3RhcnQuY29sdW1uID0gci5zdGFydC5jb2x1bW47XG4gICAgICAgICAgICByYW5nZS5zdGFydC5yb3cgPSByLnN0YXJ0LnJvdztcbiAgICAgICAgICAgIHJhbmdlLmVuZC5jb2x1bW4gPSByLmVuZC5jb2x1bW47XG4gICAgICAgICAgICByYW5nZS5lbmQucm93ID0gci5lbmQucm93O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmFuZ2UgPSByO1xuICAgICAgICB9XG5cbiAgICAgICAgcmFuZ2UuY3Vyc29yID0gdGhpcy5pc0JhY2t3YXJkcygpID8gcmFuZ2Uuc3RhcnQgOiByYW5nZS5lbmQ7XG4gICAgICAgIHJhbmdlLmRlc2lyZWRDb2x1bW4gPSB0aGlzLiRkZXNpcmVkQ29sdW1uO1xuICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2F2ZXMgdGhlIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uIGFuZCBjYWxscyBgZnVuY2AgdGhhdCBjYW4gY2hhbmdlIHRoZSBjdXJzb3JcbiAgICAgKiBwb3N0aW9uLiBUaGUgcmVzdWx0IGlzIHRoZSByYW5nZSBvZiB0aGUgc3RhcnRpbmcgYW5kIGV2ZW50dWFsIGN1cnNvciBwb3NpdGlvbi5cbiAgICAgKiBXaWxsIHJlc2V0IHRoZSBjdXJzb3IgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgY2FsbGJhY2sgdGhhdCBzaG91bGQgY2hhbmdlIHRoZSBjdXJzb3IgcG9zaXRpb25cbiAgICAgKiBAcmV0dXJucyB7UmFuZ2V9XG4gICAgICoqL1xuICAgIGdldFJhbmdlT2ZNb3ZlbWVudHMoZnVuYykge1xuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLmdldEN1cnNvcigpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZnVuYyh0aGlzKTtcbiAgICAgICAgICAgIHZhciBlbmQgPSB0aGlzLmdldEN1cnNvcigpO1xuICAgICAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHMoc3RhcnQsIGVuZCk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgcmV0dXJuIFJhbmdlLmZyb21Qb2ludHMoc3RhcnQsIHN0YXJ0KTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvclRvUG9zaXRpb24oc3RhcnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHJldHVybnMge1JhbmdlfFJhbmdlW119XG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAodGhpcy5yYW5nZUNvdW50KSB7XG4gICAgICAgICAgICAvKipAdHlwZXtSYW5nZXxSYW5nZVtdfSovdmFyIGRhdGEgPSB0aGlzLnJhbmdlcy5tYXAoZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgIHZhciByMSA9IHIuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICByMS5pc0JhY2t3YXJkcyA9IHIuY3Vyc29yID09IHIuc3RhcnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIxO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvKipAdHlwZXtSYW5nZXxSYW5nZVtdfSovdmFyIGRhdGEgPSB0aGlzLmdldFJhbmdlKCk7XG4gICAgICAgICAgICBkYXRhLmlzQmFja3dhcmRzID0gdGhpcy5pc0JhY2t3YXJkcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICovXG4gICAgZnJvbUpTT04oZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5zdGFydCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJhbmdlTGlzdCAmJiBkYXRhLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvU2luZ2xlUmFuZ2UoZGF0YVswXSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGRhdGEubGVuZ3RoOyBpLS07ICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IFJhbmdlLmZyb21Qb2ludHMoZGF0YVtpXS5zdGFydCwgZGF0YVtpXS5lbmQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpXS5pc0JhY2t3YXJkcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHIuY3Vyc29yID0gci5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRSYW5nZShyLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yYW5nZUxpc3QpXG4gICAgICAgICAgICB0aGlzLnRvU2luZ2xlUmFuZ2UoZGF0YSk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uUmFuZ2UoZGF0YSwgZGF0YS5pc0JhY2t3YXJkcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzRXF1YWwoZGF0YSkge1xuICAgICAgICBpZiAoKGRhdGEubGVuZ3RoIHx8IHRoaXMucmFuZ2VDb3VudCkgJiYgZGF0YS5sZW5ndGggIT0gdGhpcy5yYW5nZUNvdW50KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRhdGEubGVuZ3RoIHx8ICF0aGlzLnJhbmdlcylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJhbmdlKCkuaXNFcXVhbChkYXRhKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5yYW5nZXMubGVuZ3RoOyBpLS07ICkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJhbmdlc1tpXS5pc0VxdWFsKGRhdGFbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbn1cblxuLyoqXG4gKiBMZWZ0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gKiBAZGVwcmVjYXRlZFxuICovXG5TZWxlY3Rpb24ucHJvdG90eXBlLnNldFNlbGVjdGlvbkFuY2hvciA9IFNlbGVjdGlvbi5wcm90b3R5cGUuc2V0QW5jaG9yO1xuLyoqXG4gKiBMZWZ0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gKiBAZGVwcmVjYXRlZFxuICovXG5TZWxlY3Rpb24ucHJvdG90eXBlLmdldFNlbGVjdGlvbkFuY2hvciA9IFNlbGVjdGlvbi5wcm90b3R5cGUuZ2V0QW5jaG9yO1xuXG5TZWxlY3Rpb24ucHJvdG90eXBlLnNldFNlbGVjdGlvblJhbmdlID0gU2VsZWN0aW9uLnByb3RvdHlwZS5zZXRSYW5nZTtcblxub29wLmltcGxlbWVudChTZWxlY3Rpb24ucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIpO1xuZXhwb3J0cy5TZWxlY3Rpb24gPSBTZWxlY3Rpb247XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/selection.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/theme/textmate-css.js":
/*!*********************************************************!*\
  !*** ./node_modules/ace-code/src/theme/textmate-css.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("module.exports = `.ace-tm .ace_gutter {\n  background: #f0f0f0;\n  color: #333;\n}\n\n.ace-tm .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-tm .ace_fold {\n    background-color: #6B72E6;\n}\n\n.ace-tm {\n  background-color: #FFFFFF;\n  color: black;\n}\n\n.ace-tm .ace_cursor {\n  color: black;\n}\n        \n.ace-tm .ace_invisible {\n  color: rgb(191, 191, 191);\n}\n\n.ace-tm .ace_storage,\n.ace-tm .ace_keyword {\n  color: blue;\n}\n\n.ace-tm .ace_constant {\n  color: rgb(197, 6, 11);\n}\n\n.ace-tm .ace_constant.ace_buildin {\n  color: rgb(88, 72, 246);\n}\n\n.ace-tm .ace_constant.ace_language {\n  color: rgb(88, 92, 246);\n}\n\n.ace-tm .ace_constant.ace_library {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_invalid {\n  background-color: rgba(255, 0, 0, 0.1);\n  color: red;\n}\n\n.ace-tm .ace_support.ace_function {\n  color: rgb(60, 76, 114);\n}\n\n.ace-tm .ace_support.ace_constant {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_support.ace_type,\n.ace-tm .ace_support.ace_class {\n  color: rgb(109, 121, 222);\n}\n\n.ace-tm .ace_keyword.ace_operator {\n  color: rgb(104, 118, 135);\n}\n\n.ace-tm .ace_string {\n  color: rgb(3, 106, 7);\n}\n\n.ace-tm .ace_comment {\n  color: rgb(76, 136, 107);\n}\n\n.ace-tm .ace_comment.ace_doc {\n  color: rgb(0, 102, 255);\n}\n\n.ace-tm .ace_comment.ace_doc.ace_tag {\n  color: rgb(128, 159, 191);\n}\n\n.ace-tm .ace_constant.ace_numeric {\n  color: rgb(0, 0, 205);\n}\n\n.ace-tm .ace_variable {\n  color: rgb(49, 132, 149);\n}\n\n.ace-tm .ace_xml-pe {\n  color: rgb(104, 104, 91);\n}\n\n.ace-tm .ace_entity.ace_name.ace_function {\n  color: #0000A2;\n}\n\n\n.ace-tm .ace_heading {\n  color: rgb(12, 7, 255);\n}\n\n.ace-tm .ace_list {\n  color:rgb(185, 6, 144);\n}\n\n.ace-tm .ace_meta.ace_tag {\n  color:rgb(0, 22, 142);\n}\n\n.ace-tm .ace_string.ace_regex {\n  color: rgb(255, 0, 0)\n}\n\n.ace-tm .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n.ace-tm.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n.ace-tm .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-tm .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-tm .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-tm .ace_marker-layer .ace_active-line {\n  background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-tm .ace_gutter-active-line {\n    background-color : #dcdcdc;\n}\n\n.ace-tm .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-tm .ace_indent-guide {\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\n}\n\n.ace-tm .ace_indent-guide-active {\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\") right repeat-y;\n}\n`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3RoZW1lL3RleHRtYXRlLWNzcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0M7QUFDbEM7O0FBRUE7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3RoZW1lL3RleHRtYXRlLWNzcy5qcz9mOTQwIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gYC5hY2UtdG0gLmFjZV9ndXR0ZXIge1xuICBiYWNrZ3JvdW5kOiAjZjBmMGYwO1xuICBjb2xvcjogIzMzMztcbn1cblxuLmFjZS10bSAuYWNlX3ByaW50LW1hcmdpbiB7XG4gIHdpZHRoOiAxcHg7XG4gIGJhY2tncm91bmQ6ICNlOGU4ZTg7XG59XG5cbi5hY2UtdG0gLmFjZV9mb2xkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNkI3MkU2O1xufVxuXG4uYWNlLXRtIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRjtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG4uYWNlLXRtIC5hY2VfY3Vyc29yIHtcbiAgY29sb3I6IGJsYWNrO1xufVxuICAgICAgICBcbi5hY2UtdG0gLmFjZV9pbnZpc2libGUge1xuICBjb2xvcjogcmdiKDE5MSwgMTkxLCAxOTEpO1xufVxuXG4uYWNlLXRtIC5hY2Vfc3RvcmFnZSxcbi5hY2UtdG0gLmFjZV9rZXl3b3JkIHtcbiAgY29sb3I6IGJsdWU7XG59XG5cbi5hY2UtdG0gLmFjZV9jb25zdGFudCB7XG4gIGNvbG9yOiByZ2IoMTk3LCA2LCAxMSk7XG59XG5cbi5hY2UtdG0gLmFjZV9jb25zdGFudC5hY2VfYnVpbGRpbiB7XG4gIGNvbG9yOiByZ2IoODgsIDcyLCAyNDYpO1xufVxuXG4uYWNlLXRtIC5hY2VfY29uc3RhbnQuYWNlX2xhbmd1YWdlIHtcbiAgY29sb3I6IHJnYig4OCwgOTIsIDI0Nik7XG59XG5cbi5hY2UtdG0gLmFjZV9jb25zdGFudC5hY2VfbGlicmFyeSB7XG4gIGNvbG9yOiByZ2IoNiwgMTUwLCAxNCk7XG59XG5cbi5hY2UtdG0gLmFjZV9pbnZhbGlkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDAsIDAsIDAuMSk7XG4gIGNvbG9yOiByZWQ7XG59XG5cbi5hY2UtdG0gLmFjZV9zdXBwb3J0LmFjZV9mdW5jdGlvbiB7XG4gIGNvbG9yOiByZ2IoNjAsIDc2LCAxMTQpO1xufVxuXG4uYWNlLXRtIC5hY2Vfc3VwcG9ydC5hY2VfY29uc3RhbnQge1xuICBjb2xvcjogcmdiKDYsIDE1MCwgMTQpO1xufVxuXG4uYWNlLXRtIC5hY2Vfc3VwcG9ydC5hY2VfdHlwZSxcbi5hY2UtdG0gLmFjZV9zdXBwb3J0LmFjZV9jbGFzcyB7XG4gIGNvbG9yOiByZ2IoMTA5LCAxMjEsIDIyMik7XG59XG5cbi5hY2UtdG0gLmFjZV9rZXl3b3JkLmFjZV9vcGVyYXRvciB7XG4gIGNvbG9yOiByZ2IoMTA0LCAxMTgsIDEzNSk7XG59XG5cbi5hY2UtdG0gLmFjZV9zdHJpbmcge1xuICBjb2xvcjogcmdiKDMsIDEwNiwgNyk7XG59XG5cbi5hY2UtdG0gLmFjZV9jb21tZW50IHtcbiAgY29sb3I6IHJnYig3NiwgMTM2LCAxMDcpO1xufVxuXG4uYWNlLXRtIC5hY2VfY29tbWVudC5hY2VfZG9jIHtcbiAgY29sb3I6IHJnYigwLCAxMDIsIDI1NSk7XG59XG5cbi5hY2UtdG0gLmFjZV9jb21tZW50LmFjZV9kb2MuYWNlX3RhZyB7XG4gIGNvbG9yOiByZ2IoMTI4LCAxNTksIDE5MSk7XG59XG5cbi5hY2UtdG0gLmFjZV9jb25zdGFudC5hY2VfbnVtZXJpYyB7XG4gIGNvbG9yOiByZ2IoMCwgMCwgMjA1KTtcbn1cblxuLmFjZS10bSAuYWNlX3ZhcmlhYmxlIHtcbiAgY29sb3I6IHJnYig0OSwgMTMyLCAxNDkpO1xufVxuXG4uYWNlLXRtIC5hY2VfeG1sLXBlIHtcbiAgY29sb3I6IHJnYigxMDQsIDEwNCwgOTEpO1xufVxuXG4uYWNlLXRtIC5hY2VfZW50aXR5LmFjZV9uYW1lLmFjZV9mdW5jdGlvbiB7XG4gIGNvbG9yOiAjMDAwMEEyO1xufVxuXG5cbi5hY2UtdG0gLmFjZV9oZWFkaW5nIHtcbiAgY29sb3I6IHJnYigxMiwgNywgMjU1KTtcbn1cblxuLmFjZS10bSAuYWNlX2xpc3Qge1xuICBjb2xvcjpyZ2IoMTg1LCA2LCAxNDQpO1xufVxuXG4uYWNlLXRtIC5hY2VfbWV0YS5hY2VfdGFnIHtcbiAgY29sb3I6cmdiKDAsIDIyLCAxNDIpO1xufVxuXG4uYWNlLXRtIC5hY2Vfc3RyaW5nLmFjZV9yZWdleCB7XG4gIGNvbG9yOiByZ2IoMjU1LCAwLCAwKVxufVxuXG4uYWNlLXRtIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc2VsZWN0aW9uIHtcbiAgYmFja2dyb3VuZDogcmdiKDE4MSwgMjEzLCAyNTUpO1xufVxuLmFjZS10bS5hY2VfbXVsdGlzZWxlY3QgLmFjZV9zZWxlY3Rpb24uYWNlX3N0YXJ0IHtcbiAgYm94LXNoYWRvdzogMCAwIDNweCAwcHggd2hpdGU7XG59XG4uYWNlLXRtIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc3RlcCB7XG4gIGJhY2tncm91bmQ6IHJnYigyNTIsIDI1NSwgMCk7XG59XG5cbi5hY2UtdG0gLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGFjayB7XG4gIGJhY2tncm91bmQ6IHJnYigxNjQsIDIyOSwgMTAxKTtcbn1cblxuLmFjZS10bSAuYWNlX21hcmtlci1sYXllciAuYWNlX2JyYWNrZXQge1xuICBtYXJnaW46IC0xcHggMCAwIC0xcHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYigxOTIsIDE5MiwgMTkyKTtcbn1cblxuLmFjZS10bSAuYWNlX21hcmtlci1sYXllciAuYWNlX2FjdGl2ZS1saW5lIHtcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA3KTtcbn1cblxuLmFjZS10bSAuYWNlX2d1dHRlci1hY3RpdmUtbGluZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvciA6ICNkY2RjZGM7XG59XG5cbi5hY2UtdG0gLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zZWxlY3RlZC13b3JkIHtcbiAgYmFja2dyb3VuZDogcmdiKDI1MCwgMjUwLCAyNTUpO1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMjAwLCAyMDAsIDI1MCk7XG59XG5cbi5hY2UtdG0gLmFjZV9pbmRlbnQtZ3VpZGUge1xuICBiYWNrZ3JvdW5kOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUNDQVlBQUFDWmdiWW5BQUFBRTBsRVFWUUltV1A0Ly8vL2Y0YkxseS8vQndBbVZnZDEvdzExL2dBQUFBQkpSVTVFcmtKZ2dnPT1cIikgcmlnaHQgcmVwZWF0LXk7XG59XG5cbi5hY2UtdG0gLmFjZV9pbmRlbnQtZ3VpZGUtYWN0aXZlIHtcbiAgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFJR05JVWswQUFIb2xBQUNBZ3dBQStmOEFBSURwQUFCMU1BQUE2bUFBQURxWUFBQVhiNUpmeFVZQUFBQVpTVVJCVkhqYVl2ai8vLzkvaGl2S3l2OEJBQUFBLy84REFDTHFCaGJ2aysvZUFBQUFBRWxGVGtTdVFtQ0NcIikgcmlnaHQgcmVwZWF0LXk7XG59XG5gO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/theme/textmate-css.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/theme/textmate.js":
/*!*****************************************************!*\
  !*** ./node_modules/ace-code/src/theme/textmate.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nexports.isDark = false;\nexports.cssClass = \"ace-tm\";\nexports.cssText = __webpack_require__(/*! ./textmate-css */ \"./node_modules/ace-code/src/theme/textmate-css.js\");\nexports.$id = \"ace/theme/textmate\";\n\nvar dom = __webpack_require__(/*! ../lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\ndom.importCssString(exports.cssText, exports.cssClass, false);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3RoZW1lL3RleHRtYXRlLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGNBQWM7QUFDZCxnQkFBZ0I7QUFDaEIsZ0hBQTJDO0FBQzNDLFdBQVc7O0FBRVgsVUFBVSxtQkFBTyxDQUFDLDBEQUFZO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvdGhlbWUvdGV4dG1hdGUuanM/Njk5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5pc0RhcmsgPSBmYWxzZTtcbmV4cG9ydHMuY3NzQ2xhc3MgPSBcImFjZS10bVwiO1xuZXhwb3J0cy5jc3NUZXh0ID0gcmVxdWlyZShcIi4vdGV4dG1hdGUtY3NzXCIpO1xuZXhwb3J0cy4kaWQgPSBcImFjZS90aGVtZS90ZXh0bWF0ZVwiO1xuXG52YXIgZG9tID0gcmVxdWlyZShcIi4uL2xpYi9kb21cIik7XG5kb20uaW1wb3J0Q3NzU3RyaW5nKGV4cG9ydHMuY3NzVGV4dCwgZXhwb3J0cy5jc3NDbGFzcywgZmFsc2UpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/theme/textmate.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/token_iterator.js":
/*!*****************************************************!*\
  !*** ./node_modules/ace-code/src/token_iterator.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n */\n\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\n\n/**\n * This class provides an essay way to treat the document as a stream of tokens, and provides methods to iterate over these tokens.\n **/\nclass TokenIterator {\n    /**\n     * Creates a new token iterator object. The inital token index is set to the provided row and column coordinates.\n     * @param {EditSession} session The session to associate with\n     * @param {Number} initialRow The row to start the tokenizing at\n     * @param {Number} initialColumn The column to start the tokenizing at\n     **/\n    constructor(session, initialRow, initialColumn) {\n        this.$session = session;\n        this.$row = initialRow;\n        this.$rowTokens = session.getTokens(initialRow);\n\n        var token = session.getTokenAt(initialRow, initialColumn);\n        this.$tokenIndex = token ? token.index : -1;\n    }\n    \n    /**\n     * Moves iterator position to the start of previous token.\n     * @returns {import(\"../ace-internal\").Ace.Token|null}\n     **/ \n    stepBackward() {\n        this.$tokenIndex -= 1;\n        \n        while (this.$tokenIndex < 0) {\n            this.$row -= 1;\n            if (this.$row < 0) {\n                this.$row = 0;\n                return null;\n            }\n                \n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = this.$rowTokens.length - 1;\n        }\n            \n        return this.$rowTokens[this.$tokenIndex];\n    }\n\n    /**\n     * Moves iterator position to the start of next token.\n     * @returns {import(\"../ace-internal\").Ace.Token|null}\n     **/   \n    stepForward() {\n        this.$tokenIndex += 1;\n        var rowCount;\n        while (this.$tokenIndex >= this.$rowTokens.length) {\n            this.$row += 1;\n            if (!rowCount)\n                rowCount = this.$session.getLength();\n            if (this.$row >= rowCount) {\n                this.$row = rowCount - 1;\n                return null;\n            }\n\n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = 0;\n        }\n            \n        return this.$rowTokens[this.$tokenIndex];\n    }\n \n    /**\n     * \n     * Returns current token.\n     * @returns {import(\"../ace-internal\").Ace.Token}\n     **/      \n    getCurrentToken() {\n        return this.$rowTokens[this.$tokenIndex];\n    }\n\n    /**\n     * \n     * Returns the current row.\n     * @returns {Number}\n     **/      \n    getCurrentTokenRow() {\n        return this.$row;\n    }\n\n    /**\n     * \n     * Returns the current column.\n     * @returns {Number}\n     **/     \n    getCurrentTokenColumn() {\n        var rowTokens = this.$rowTokens;\n        var tokenIndex = this.$tokenIndex;\n        \n        // If a column was cached by EditSession.getTokenAt, then use it\n        var column = rowTokens[tokenIndex].start;\n        if (column !== undefined)\n            return column;\n            \n        column = 0;\n        while (tokenIndex > 0) {\n            tokenIndex -= 1;\n            column += rowTokens[tokenIndex].value.length;\n        }\n        \n        return column;  \n    }\n\n    /**\n     * Return the current token position.\n     * @returns {import(\"../ace-internal\").Ace.Point}\n     */\n    getCurrentTokenPosition() {\n        return {row: this.$row, column: this.getCurrentTokenColumn()};\n    }\n    \n    /**\n     * Return the current token range.\n     * @returns {Range}\n     */\n    getCurrentTokenRange() {\n        var token = this.$rowTokens[this.$tokenIndex];\n        var column = this.getCurrentTokenColumn();\n        return new Range(this.$row, column, this.$row, column + token.value.length);\n    }\n    \n}\n\nexports.TokenIterator = TokenIterator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3Rva2VuX2l0ZXJhdG9yLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxhQUFhLHNDQUFzQztBQUNuRDs7QUFFQSxZQUFZLGtGQUF3Qjs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy90b2tlbl9pdGVyYXRvci5qcz8yMmIyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9lZGl0X3Nlc3Npb25cIikuRWRpdFNlc3Npb259IEVkaXRTZXNzaW9uXG4gKi9cblxudmFyIFJhbmdlID0gcmVxdWlyZShcIi4vcmFuZ2VcIikuUmFuZ2U7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBwcm92aWRlcyBhbiBlc3NheSB3YXkgdG8gdHJlYXQgdGhlIGRvY3VtZW50IGFzIGEgc3RyZWFtIG9mIHRva2VucywgYW5kIHByb3ZpZGVzIG1ldGhvZHMgdG8gaXRlcmF0ZSBvdmVyIHRoZXNlIHRva2Vucy5cbiAqKi9cbmNsYXNzIFRva2VuSXRlcmF0b3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdG9rZW4gaXRlcmF0b3Igb2JqZWN0LiBUaGUgaW5pdGFsIHRva2VuIGluZGV4IGlzIHNldCB0byB0aGUgcHJvdmlkZWQgcm93IGFuZCBjb2x1bW4gY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtFZGl0U2Vzc2lvbn0gc2Vzc2lvbiBUaGUgc2Vzc2lvbiB0byBhc3NvY2lhdGUgd2l0aFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbml0aWFsUm93IFRoZSByb3cgdG8gc3RhcnQgdGhlIHRva2VuaXppbmcgYXRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5pdGlhbENvbHVtbiBUaGUgY29sdW1uIHRvIHN0YXJ0IHRoZSB0b2tlbml6aW5nIGF0XG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHNlc3Npb24sIGluaXRpYWxSb3csIGluaXRpYWxDb2x1bW4pIHtcbiAgICAgICAgdGhpcy4kc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIHRoaXMuJHJvdyA9IGluaXRpYWxSb3c7XG4gICAgICAgIHRoaXMuJHJvd1Rva2VucyA9IHNlc3Npb24uZ2V0VG9rZW5zKGluaXRpYWxSb3cpO1xuXG4gICAgICAgIHZhciB0b2tlbiA9IHNlc3Npb24uZ2V0VG9rZW5BdChpbml0aWFsUm93LCBpbml0aWFsQ29sdW1uKTtcbiAgICAgICAgdGhpcy4kdG9rZW5JbmRleCA9IHRva2VuID8gdG9rZW4uaW5kZXggOiAtMTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogTW92ZXMgaXRlcmF0b3IgcG9zaXRpb24gdG8gdGhlIHN0YXJ0IG9mIHByZXZpb3VzIHRva2VuLlxuICAgICAqIEByZXR1cm5zIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlRva2VufG51bGx9XG4gICAgICoqLyBcbiAgICBzdGVwQmFja3dhcmQoKSB7XG4gICAgICAgIHRoaXMuJHRva2VuSW5kZXggLT0gMTtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlICh0aGlzLiR0b2tlbkluZGV4IDwgMCkge1xuICAgICAgICAgICAgdGhpcy4kcm93IC09IDE7XG4gICAgICAgICAgICBpZiAodGhpcy4kcm93IDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHJvdyA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLiRyb3dUb2tlbnMgPSB0aGlzLiRzZXNzaW9uLmdldFRva2Vucyh0aGlzLiRyb3cpO1xuICAgICAgICAgICAgdGhpcy4kdG9rZW5JbmRleCA9IHRoaXMuJHJvd1Rva2Vucy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuJHJvd1Rva2Vuc1t0aGlzLiR0b2tlbkluZGV4XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBpdGVyYXRvciBwb3NpdGlvbiB0byB0aGUgc3RhcnQgb2YgbmV4dCB0b2tlbi5cbiAgICAgKiBAcmV0dXJucyB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Ub2tlbnxudWxsfVxuICAgICAqKi8gICBcbiAgICBzdGVwRm9yd2FyZCgpIHtcbiAgICAgICAgdGhpcy4kdG9rZW5JbmRleCArPSAxO1xuICAgICAgICB2YXIgcm93Q291bnQ7XG4gICAgICAgIHdoaWxlICh0aGlzLiR0b2tlbkluZGV4ID49IHRoaXMuJHJvd1Rva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuJHJvdyArPSAxO1xuICAgICAgICAgICAgaWYgKCFyb3dDb3VudClcbiAgICAgICAgICAgICAgICByb3dDb3VudCA9IHRoaXMuJHNlc3Npb24uZ2V0TGVuZ3RoKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kcm93ID49IHJvd0NvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kcm93ID0gcm93Q291bnQgLSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLiRyb3dUb2tlbnMgPSB0aGlzLiRzZXNzaW9uLmdldFRva2Vucyh0aGlzLiRyb3cpO1xuICAgICAgICAgICAgdGhpcy4kdG9rZW5JbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy4kcm93VG9rZW5zW3RoaXMuJHRva2VuSW5kZXhdO1xuICAgIH1cbiBcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBSZXR1cm5zIGN1cnJlbnQgdG9rZW4uXG4gICAgICogQHJldHVybnMge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuVG9rZW59XG4gICAgICoqLyAgICAgIFxuICAgIGdldEN1cnJlbnRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHJvd1Rva2Vuc1t0aGlzLiR0b2tlbkluZGV4XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHJvdy5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi8gICAgICBcbiAgICBnZXRDdXJyZW50VG9rZW5Sb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRyb3c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb2x1bW4uXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovICAgICBcbiAgICBnZXRDdXJyZW50VG9rZW5Db2x1bW4oKSB7XG4gICAgICAgIHZhciByb3dUb2tlbnMgPSB0aGlzLiRyb3dUb2tlbnM7XG4gICAgICAgIHZhciB0b2tlbkluZGV4ID0gdGhpcy4kdG9rZW5JbmRleDtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGEgY29sdW1uIHdhcyBjYWNoZWQgYnkgRWRpdFNlc3Npb24uZ2V0VG9rZW5BdCwgdGhlbiB1c2UgaXRcbiAgICAgICAgdmFyIGNvbHVtbiA9IHJvd1Rva2Vuc1t0b2tlbkluZGV4XS5zdGFydDtcbiAgICAgICAgaWYgKGNvbHVtbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbjtcbiAgICAgICAgICAgIFxuICAgICAgICBjb2x1bW4gPSAwO1xuICAgICAgICB3aGlsZSAodG9rZW5JbmRleCA+IDApIHtcbiAgICAgICAgICAgIHRva2VuSW5kZXggLT0gMTtcbiAgICAgICAgICAgIGNvbHVtbiArPSByb3dUb2tlbnNbdG9rZW5JbmRleF0udmFsdWUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY29sdW1uOyAgXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjdXJyZW50IHRva2VuIHBvc2l0aW9uLlxuICAgICAqIEByZXR1cm5zIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlBvaW50fVxuICAgICAqL1xuICAgIGdldEN1cnJlbnRUb2tlblBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4ge3JvdzogdGhpcy4kcm93LCBjb2x1bW46IHRoaXMuZ2V0Q3VycmVudFRva2VuQ29sdW1uKCl9O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgdG9rZW4gcmFuZ2UuXG4gICAgICogQHJldHVybnMge1JhbmdlfVxuICAgICAqL1xuICAgIGdldEN1cnJlbnRUb2tlblJhbmdlKCkge1xuICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLiRyb3dUb2tlbnNbdGhpcy4kdG9rZW5JbmRleF07XG4gICAgICAgIHZhciBjb2x1bW4gPSB0aGlzLmdldEN1cnJlbnRUb2tlbkNvbHVtbigpO1xuICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHRoaXMuJHJvdywgY29sdW1uLCB0aGlzLiRyb3csIGNvbHVtbiArIHRva2VuLnZhbHVlLmxlbmd0aCk7XG4gICAgfVxuICAgIFxufVxuXG5leHBvcnRzLlRva2VuSXRlcmF0b3IgPSBUb2tlbkl0ZXJhdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/token_iterator.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/tokenizer.js":
/*!************************************************!*\
  !*** ./node_modules/ace-code/src/tokenizer.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nconst reportError = (__webpack_require__(/*! ./lib/report_error */ \"./node_modules/ace-code/src/lib/report_error.js\").reportError);\n\n// tokenizing lines longer than this makes editor very slow\nvar MAX_TOKEN_COUNT = 2000;\n/**\n * This class takes a set of highlighting rules, and creates a tokenizer out of them. For more information, see [the wiki on extending highlighters](https://github.com/ajaxorg/ace/wiki/Creating-or-Extending-an-Edit-Mode#wiki-extendingTheHighlighter).\n **/\nclass Tokenizer {\n    /**\n     * Constructs a new tokenizer based on the given rules and flags.\n     * @param {Object} rules The highlighting rules\n     **/\n    constructor(rules) {\n        /**@type {RegExp}*/\n        this.splitRegex;\n        this.states = rules;\n\n        this.regExps = {};\n        this.matchMappings = {};\n        for (var key in this.states) {\n            var state = this.states[key];\n            var ruleRegExps = [];\n            var matchTotal = 0;\n            var mapping = this.matchMappings[key] = {defaultToken: \"text\"};\n            var flag = \"g\";\n\n            var splitterRurles = [];\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                if (rule.defaultToken)\n                    mapping.defaultToken = rule.defaultToken;\n                if (rule.caseInsensitive && flag.indexOf(\"i\") === -1)\n                    flag += \"i\";\n                if (rule.unicode && flag.indexOf(\"u\") === -1)\n                    flag += \"u\";\n                if (rule.regex == null)\n                    continue;\n\n                if (rule.regex instanceof RegExp)\n                    rule.regex = rule.regex.toString().slice(1, -1);\n\n                // Count number of matching groups. 2 extra groups from the full match\n                // And the catch-all on the end (used to force a match);\n                var adjustedregex = rule.regex;\n                var matchcount = new RegExp(\"(?:(\" + adjustedregex + \")|(.))\").exec(\"a\").length - 2;\n                if (Array.isArray(rule.token)) {\n                    if (rule.token.length == 1 || matchcount == 1) {\n                        rule.token = rule.token[0];\n                    } else if (matchcount - 1 != rule.token.length) {\n                        this.reportError(\"number of classes and regexp groups doesn't match\", {\n                            rule: rule,\n                            groupCount: matchcount - 1\n                        });\n                        rule.token = rule.token[0];\n                    } else {\n                        rule.tokenArray = rule.token;\n                        rule.token = null;\n                        rule.onMatch = this.$arrayTokens;\n                    }\n                } else if (typeof rule.token == \"function\" && !rule.onMatch) {\n                    if (matchcount > 1)\n                        rule.onMatch = this.$applyToken;\n                    else\n                        rule.onMatch = rule.token;\n                }\n\n                if (matchcount > 1) {\n                    if (/\\\\\\d/.test(rule.regex)) {\n                        // Replace any backreferences and offset appropriately.\n                        adjustedregex = rule.regex.replace(/\\\\([0-9]+)/g, function(match, digit) {\n                            return \"\\\\\" + (parseInt(digit, 10) + matchTotal + 1);\n                        });\n                    } else {\n                        matchcount = 1;\n                        adjustedregex = this.removeCapturingGroups(rule.regex);\n                    }\n                    if (!rule.splitRegex && typeof rule.token != \"string\")\n                        splitterRurles.push(rule); // flag will be known only at the very end\n                }\n\n                mapping[matchTotal] = i;\n                matchTotal += matchcount;\n\n                ruleRegExps.push(adjustedregex);\n\n                // makes property access faster\n                if (!rule.onMatch)\n                    rule.onMatch = null;\n            }\n\n            if (!ruleRegExps.length) {\n                mapping[0] = 0;\n                ruleRegExps.push(\"$\");\n            }\n\n            splitterRurles.forEach(function(rule) {\n                rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);\n            }, this);\n\n            this.regExps[key] = new RegExp(\"(\" + ruleRegExps.join(\")|(\") + \")|($)\", flag);\n        }\n    }\n\n    /**\n     * @param {number} m\n     */\n    $setMaxTokenCount(m) {\n        MAX_TOKEN_COUNT = m | 0;\n    }\n\n    /**\n     * @param {string} str\n     * @return {import(\"../ace-internal\").Ace.Token[]}\n     */\n    $applyToken(str) {\n        var values = this.splitRegex.exec(str).slice(1);\n        //@ts-ignore\n        var types = this.token.apply(this, values);\n\n        // required for compatibility with old modes\n        if (typeof types === \"string\")\n            return [{type: types, value: str}];\n\n        var tokens = [];\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i]\n                };\n        }\n        return tokens;\n    }\n\n    /**\n     * @param {string} str\n     * @return {import(\"../ace-internal\").Ace.Token[] | string}\n     */\n    $arrayTokens(str) {\n        if (!str)\n            return [];\n        var values = this.splitRegex.exec(str);\n        if (!values)\n            return \"text\";\n        var tokens = [];\n        //@ts-ignore\n        var types = this.tokenArray;\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i + 1])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i + 1]\n                };\n        }\n        return tokens;\n    }\n\n    /**\n     * @param {string} src\n     * @returns {string}\n     */\n    removeCapturingGroups(src) {\n        var r = src.replace(\n            /\\\\.|\\[(?:\\\\.|[^\\\\\\]])*|\\(\\?[:=!<]|(\\()/g,\n            function(x, y) {return y ? \"(?:\" : x;}\n        );\n        return r;\n    }\n\n    /**\n     * @param {string} src\n     * @param {string} flag\n     */\n    createSplitterRegexp(src, flag) {\n        if (src.indexOf(\"(?=\") != -1) {\n            var stack = 0;\n            var inChClass = false;\n            var lastCapture = {};\n            src.replace(/(\\\\.)|(\\((?:\\?[=!])?)|(\\))|([\\[\\]])/g, function(\n                m, esc, parenOpen, parenClose, square, index\n            ) {\n                if (inChClass) {\n                    inChClass = square != \"]\";\n                } else if (square) {\n                    inChClass = true;\n                } else if (parenClose) {\n                    if (stack == lastCapture.stack) {\n                        lastCapture.end = index+1;\n                        lastCapture.stack = -1;\n                    }\n                    stack--;\n                } else if (parenOpen) {\n                    stack++;\n                    if (parenOpen.length != 1) {\n                        lastCapture.stack = stack;\n                        lastCapture.start = index;\n                    }\n                }\n                return m;\n            });\n\n            if (lastCapture.end != null && /^\\)*$/.test(src.substr(lastCapture.end)))\n                src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);\n        }\n        \n        // this is needed for regexps that can match in multiple ways\n        if (src.charAt(0) != \"^\") src = \"^\" + src;\n        if (src.charAt(src.length - 1) != \"$\") src += \"$\";\n        \n        return new RegExp(src, (flag||\"\").replace(\"g\", \"\"));\n    }\n\n    /**\n     * Returns an object containing two properties: `tokens`, which contains all the tokens; and `state`, the current state.\n     * @param {string} line\n     * @param {string | string[]} startState\n     * @returns {{tokens:import(\"../ace-internal\").Ace.Token[], state: string|string[]}}\n     */\n    getLineTokens(line, startState) {\n        if (startState && typeof startState != \"string\") {\n            /**@type {any[]}*/\n            var stack = startState.slice(0);\n            startState = stack[0];\n            if (startState === \"#tmp\") {\n                stack.shift();\n                startState = stack.shift();\n            }\n        } else\n            var stack = [];\n\n        var currentState = /**@type{string}*/(startState) || \"start\";\n        var state = this.states[currentState];\n        if (!state) {\n            currentState = \"start\";\n            state = this.states[currentState];\n        }\n        var mapping = this.matchMappings[currentState];\n        var re = this.regExps[currentState];\n        re.lastIndex = 0;\n\n        var match, tokens = [];\n        var lastIndex = 0;\n        var matchAttempts = 0;\n\n        var token = {type: null, value: \"\"};\n\n        while (match = re.exec(line)) {\n            var type = mapping.defaultToken;\n            var rule = null;\n            var value = match[0];\n            var index = re.lastIndex;\n\n            if (index - value.length > lastIndex) {\n                var skipped = line.substring(lastIndex, index - value.length);\n                if (token.type == type) {\n                    token.value += skipped;\n                } else {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {type: type, value: skipped};\n                }\n            }\n\n            for (var i = 0; i < match.length-2; i++) {\n                if (match[i + 1] === undefined)\n                    continue;\n\n                rule = state[mapping[i]];\n\n                if (rule.onMatch)\n                    type = rule.onMatch(value, currentState, stack, line);\n                else\n                    type = rule.token;\n\n                if (rule.next) {\n                    if (typeof rule.next == \"string\") {\n                        currentState = rule.next;\n                    } else {\n                        currentState = rule.next(currentState, stack);\n                    }\n                    \n                    state = this.states[currentState];\n                    if (!state) {\n                        this.reportError(\"state doesn't exist\", currentState);\n                        currentState = \"start\";\n                        state = this.states[currentState];\n                    }\n                    mapping = this.matchMappings[currentState];\n                    lastIndex = index;\n                    re = this.regExps[currentState];\n                    re.lastIndex = index;\n                }\n                if (rule.consumeLineEnd)\n                    lastIndex = index;\n                break;\n            }\n\n            if (value) {\n                if (typeof type === \"string\") {\n                    if ((!rule || rule.merge !== false) && token.type === type) {\n                        token.value += value;\n                    } else {\n                        if (token.type)\n                            tokens.push(token);\n                        token = {type: type, value: value};\n                    }\n                } else if (type) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {type: null, value: \"\"};\n                    for (var i = 0; i < type.length; i++)\n                        tokens.push(type[i]);\n                }\n            }\n\n            if (lastIndex == line.length)\n                break;\n\n            lastIndex = index;\n\n            if (matchAttempts++ > MAX_TOKEN_COUNT) {\n                if (matchAttempts > 2 * line.length) {\n                    this.reportError(\"infinite loop with in ace tokenizer\", {\n                        startState: startState,\n                        line: line\n                    });\n                }\n                // chrome doens't show contents of text nodes with very long text\n                while (lastIndex < line.length) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {\n                        value: line.substring(lastIndex, lastIndex += 500),\n                        type: \"overflow\"\n                    };\n                }\n                currentState = \"start\";\n                stack = [];\n                break;\n            }\n        }\n\n        if (token.type)\n            tokens.push(token);\n        \n        if (stack.length > 1) {\n            if (stack[0] !== currentState)\n                stack.unshift(\"#tmp\", currentState);\n        }\n        return {\n            tokens : tokens,\n            state : stack.length ? stack : currentState\n        };\n    }\n}\n\nTokenizer.prototype.reportError = reportError;\nexports.Tokenizer = Tokenizer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3Rva2VuaXplci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLG9CQUFvQiw4R0FBeUM7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEOztBQUVBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLHdCQUF3Qjs7QUFFN0M7QUFDQSwwQ0FBMEMsT0FBTztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxPQUFPO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZGQUE2RjtBQUM3RixlQUFlLFFBQVE7QUFDdkIsZUFBZSxtQkFBbUI7QUFDbEMsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixNQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQSxvQ0FBb0MsT0FBTztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUI7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBOztBQUVBLDRCQUE0QixvQkFBb0I7QUFDaEQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixvQ0FBb0MsaUJBQWlCO0FBQ3JEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvdG9rZW5pemVyLmpzPzhlMWQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCByZXBvcnRFcnJvciA9IHJlcXVpcmUoXCIuL2xpYi9yZXBvcnRfZXJyb3JcIikucmVwb3J0RXJyb3I7XG5cbi8vIHRva2VuaXppbmcgbGluZXMgbG9uZ2VyIHRoYW4gdGhpcyBtYWtlcyBlZGl0b3IgdmVyeSBzbG93XG52YXIgTUFYX1RPS0VOX0NPVU5UID0gMjAwMDtcbi8qKlxuICogVGhpcyBjbGFzcyB0YWtlcyBhIHNldCBvZiBoaWdobGlnaHRpbmcgcnVsZXMsIGFuZCBjcmVhdGVzIGEgdG9rZW5pemVyIG91dCBvZiB0aGVtLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIFt0aGUgd2lraSBvbiBleHRlbmRpbmcgaGlnaGxpZ2h0ZXJzXShodHRwczovL2dpdGh1Yi5jb20vYWpheG9yZy9hY2Uvd2lraS9DcmVhdGluZy1vci1FeHRlbmRpbmctYW4tRWRpdC1Nb2RlI3dpa2ktZXh0ZW5kaW5nVGhlSGlnaGxpZ2h0ZXIpLlxuICoqL1xuY2xhc3MgVG9rZW5pemVyIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IHRva2VuaXplciBiYXNlZCBvbiB0aGUgZ2l2ZW4gcnVsZXMgYW5kIGZsYWdzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBydWxlcyBUaGUgaGlnaGxpZ2h0aW5nIHJ1bGVzXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHJ1bGVzKSB7XG4gICAgICAgIC8qKkB0eXBlIHtSZWdFeHB9Ki9cbiAgICAgICAgdGhpcy5zcGxpdFJlZ2V4O1xuICAgICAgICB0aGlzLnN0YXRlcyA9IHJ1bGVzO1xuXG4gICAgICAgIHRoaXMucmVnRXhwcyA9IHt9O1xuICAgICAgICB0aGlzLm1hdGNoTWFwcGluZ3MgPSB7fTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuc3RhdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlc1trZXldO1xuICAgICAgICAgICAgdmFyIHJ1bGVSZWdFeHBzID0gW107XG4gICAgICAgICAgICB2YXIgbWF0Y2hUb3RhbCA9IDA7XG4gICAgICAgICAgICB2YXIgbWFwcGluZyA9IHRoaXMubWF0Y2hNYXBwaW5nc1trZXldID0ge2RlZmF1bHRUb2tlbjogXCJ0ZXh0XCJ9O1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBcImdcIjtcblxuICAgICAgICAgICAgdmFyIHNwbGl0dGVyUnVybGVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSBzdGF0ZVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocnVsZS5kZWZhdWx0VG9rZW4pXG4gICAgICAgICAgICAgICAgICAgIG1hcHBpbmcuZGVmYXVsdFRva2VuID0gcnVsZS5kZWZhdWx0VG9rZW47XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuY2FzZUluc2Vuc2l0aXZlICYmIGZsYWcuaW5kZXhPZihcImlcIikgPT09IC0xKVxuICAgICAgICAgICAgICAgICAgICBmbGFnICs9IFwiaVwiO1xuICAgICAgICAgICAgICAgIGlmIChydWxlLnVuaWNvZGUgJiYgZmxhZy5pbmRleE9mKFwidVwiKSA9PT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgKz0gXCJ1XCI7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUucmVnZXggPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBpZiAocnVsZS5yZWdleCBpbnN0YW5jZW9mIFJlZ0V4cClcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5yZWdleCA9IHJ1bGUucmVnZXgudG9TdHJpbmcoKS5zbGljZSgxLCAtMSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDb3VudCBudW1iZXIgb2YgbWF0Y2hpbmcgZ3JvdXBzLiAyIGV4dHJhIGdyb3VwcyBmcm9tIHRoZSBmdWxsIG1hdGNoXG4gICAgICAgICAgICAgICAgLy8gQW5kIHRoZSBjYXRjaC1hbGwgb24gdGhlIGVuZCAodXNlZCB0byBmb3JjZSBhIG1hdGNoKTtcbiAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ZWRyZWdleCA9IHJ1bGUucmVnZXg7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoY291bnQgPSBuZXcgUmVnRXhwKFwiKD86KFwiICsgYWRqdXN0ZWRyZWdleCArIFwiKXwoLikpXCIpLmV4ZWMoXCJhXCIpLmxlbmd0aCAtIDI7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocnVsZS50b2tlbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUudG9rZW4ubGVuZ3RoID09IDEgfHwgbWF0Y2hjb3VudCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLnRva2VuID0gcnVsZS50b2tlblswXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaGNvdW50IC0gMSAhPSBydWxlLnRva2VuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBvcnRFcnJvcihcIm51bWJlciBvZiBjbGFzc2VzIGFuZCByZWdleHAgZ3JvdXBzIGRvZXNuJ3QgbWF0Y2hcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGU6IHJ1bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBDb3VudDogbWF0Y2hjb3VudCAtIDFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS50b2tlbiA9IHJ1bGUudG9rZW5bMF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLnRva2VuQXJyYXkgPSBydWxlLnRva2VuO1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS50b2tlbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLm9uTWF0Y2ggPSB0aGlzLiRhcnJheVRva2VucztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJ1bGUudG9rZW4gPT0gXCJmdW5jdGlvblwiICYmICFydWxlLm9uTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoY291bnQgPiAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS5vbk1hdGNoID0gdGhpcy4kYXBwbHlUb2tlbjtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS5vbk1hdGNoID0gcnVsZS50b2tlbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hjb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC9cXFxcXFxkLy50ZXN0KHJ1bGUucmVnZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIGFueSBiYWNrcmVmZXJlbmNlcyBhbmQgb2Zmc2V0IGFwcHJvcHJpYXRlbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGp1c3RlZHJlZ2V4ID0gcnVsZS5yZWdleC5yZXBsYWNlKC9cXFxcKFswLTldKykvZywgZnVuY3Rpb24obWF0Y2gsIGRpZ2l0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiXFxcXFwiICsgKHBhcnNlSW50KGRpZ2l0LCAxMCkgKyBtYXRjaFRvdGFsICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoY291bnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRqdXN0ZWRyZWdleCA9IHRoaXMucmVtb3ZlQ2FwdHVyaW5nR3JvdXBzKHJ1bGUucmVnZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghcnVsZS5zcGxpdFJlZ2V4ICYmIHR5cGVvZiBydWxlLnRva2VuICE9IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGxpdHRlclJ1cmxlcy5wdXNoKHJ1bGUpOyAvLyBmbGFnIHdpbGwgYmUga25vd24gb25seSBhdCB0aGUgdmVyeSBlbmRcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXBwaW5nW21hdGNoVG90YWxdID0gaTtcbiAgICAgICAgICAgICAgICBtYXRjaFRvdGFsICs9IG1hdGNoY291bnQ7XG5cbiAgICAgICAgICAgICAgICBydWxlUmVnRXhwcy5wdXNoKGFkanVzdGVkcmVnZXgpO1xuXG4gICAgICAgICAgICAgICAgLy8gbWFrZXMgcHJvcGVydHkgYWNjZXNzIGZhc3RlclxuICAgICAgICAgICAgICAgIGlmICghcnVsZS5vbk1hdGNoKVxuICAgICAgICAgICAgICAgICAgICBydWxlLm9uTWF0Y2ggPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXJ1bGVSZWdFeHBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG1hcHBpbmdbMF0gPSAwO1xuICAgICAgICAgICAgICAgIHJ1bGVSZWdFeHBzLnB1c2goXCIkXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzcGxpdHRlclJ1cmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHJ1bGUpIHtcbiAgICAgICAgICAgICAgICBydWxlLnNwbGl0UmVnZXggPSB0aGlzLmNyZWF0ZVNwbGl0dGVyUmVnZXhwKHJ1bGUucmVnZXgsIGZsYWcpO1xuICAgICAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgICAgIHRoaXMucmVnRXhwc1trZXldID0gbmV3IFJlZ0V4cChcIihcIiArIHJ1bGVSZWdFeHBzLmpvaW4oXCIpfChcIikgKyBcIil8KCQpXCIsIGZsYWcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1cbiAgICAgKi9cbiAgICAkc2V0TWF4VG9rZW5Db3VudChtKSB7XG4gICAgICAgIE1BWF9UT0tFTl9DT1VOVCA9IG0gfCAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlRva2VuW119XG4gICAgICovXG4gICAgJGFwcGx5VG9rZW4oc3RyKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnNwbGl0UmVnZXguZXhlYyhzdHIpLnNsaWNlKDEpO1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgdmFyIHR5cGVzID0gdGhpcy50b2tlbi5hcHBseSh0aGlzLCB2YWx1ZXMpO1xuXG4gICAgICAgIC8vIHJlcXVpcmVkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggb2xkIG1vZGVzXG4gICAgICAgIGlmICh0eXBlb2YgdHlwZXMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICByZXR1cm4gW3t0eXBlOiB0eXBlcywgdmFsdWU6IHN0cn1dO1xuXG4gICAgICAgIHZhciB0b2tlbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0eXBlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbaV0pXG4gICAgICAgICAgICAgICAgdG9rZW5zW3Rva2Vucy5sZW5ndGhdID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlc1tpXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRva2VucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Ub2tlbltdIHwgc3RyaW5nfVxuICAgICAqL1xuICAgICRhcnJheVRva2VucyhzdHIpIHtcbiAgICAgICAgaWYgKCFzdHIpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnNwbGl0UmVnZXguZXhlYyhzdHIpO1xuICAgICAgICBpZiAoIXZhbHVlcylcbiAgICAgICAgICAgIHJldHVybiBcInRleHRcIjtcbiAgICAgICAgdmFyIHRva2VucyA9IFtdO1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgdmFyIHR5cGVzID0gdGhpcy50b2tlbkFycmF5O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHR5cGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1tpICsgMV0pXG4gICAgICAgICAgICAgICAgdG9rZW5zW3Rva2Vucy5sZW5ndGhdID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlc1tpICsgMV1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gICAgcmVtb3ZlQ2FwdHVyaW5nR3JvdXBzKHNyYykge1xuICAgICAgICB2YXIgciA9IHNyYy5yZXBsYWNlKFxuICAgICAgICAgICAgL1xcXFwufFxcWyg/OlxcXFwufFteXFxcXFxcXV0pKnxcXChcXD9bOj0hPF18KFxcKCkvZyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKHgsIHkpIHtyZXR1cm4geSA/IFwiKD86XCIgOiB4O31cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmbGFnXG4gICAgICovXG4gICAgY3JlYXRlU3BsaXR0ZXJSZWdleHAoc3JjLCBmbGFnKSB7XG4gICAgICAgIGlmIChzcmMuaW5kZXhPZihcIig/PVwiKSAhPSAtMSkge1xuICAgICAgICAgICAgdmFyIHN0YWNrID0gMDtcbiAgICAgICAgICAgIHZhciBpbkNoQ2xhc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBsYXN0Q2FwdHVyZSA9IHt9O1xuICAgICAgICAgICAgc3JjLnJlcGxhY2UoLyhcXFxcLil8KFxcKCg/OlxcP1s9IV0pPyl8KFxcKSl8KFtcXFtcXF1dKS9nLCBmdW5jdGlvbihcbiAgICAgICAgICAgICAgICBtLCBlc2MsIHBhcmVuT3BlbiwgcGFyZW5DbG9zZSwgc3F1YXJlLCBpbmRleFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluQ2hDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICBpbkNoQ2xhc3MgPSBzcXVhcmUgIT0gXCJdXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzcXVhcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5DaENsYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmVuQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrID09IGxhc3RDYXB0dXJlLnN0YWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q2FwdHVyZS5lbmQgPSBpbmRleCsxO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdENhcHR1cmUuc3RhY2sgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGFjay0tO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyZW5PcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbk9wZW4ubGVuZ3RoICE9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDYXB0dXJlLnN0YWNrID0gc3RhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q2FwdHVyZS5zdGFydCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChsYXN0Q2FwdHVyZS5lbmQgIT0gbnVsbCAmJiAvXlxcKSokLy50ZXN0KHNyYy5zdWJzdHIobGFzdENhcHR1cmUuZW5kKSkpXG4gICAgICAgICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZygwLCBsYXN0Q2FwdHVyZS5zdGFydCkgKyBzcmMuc3Vic3RyKGxhc3RDYXB0dXJlLmVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIHRoaXMgaXMgbmVlZGVkIGZvciByZWdleHBzIHRoYXQgY2FuIG1hdGNoIGluIG11bHRpcGxlIHdheXNcbiAgICAgICAgaWYgKHNyYy5jaGFyQXQoMCkgIT0gXCJeXCIpIHNyYyA9IFwiXlwiICsgc3JjO1xuICAgICAgICBpZiAoc3JjLmNoYXJBdChzcmMubGVuZ3RoIC0gMSkgIT0gXCIkXCIpIHNyYyArPSBcIiRcIjtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHNyYywgKGZsYWd8fFwiXCIpLnJlcGxhY2UoXCJnXCIsIFwiXCIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHR3byBwcm9wZXJ0aWVzOiBgdG9rZW5zYCwgd2hpY2ggY29udGFpbnMgYWxsIHRoZSB0b2tlbnM7IGFuZCBgc3RhdGVgLCB0aGUgY3VycmVudCBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGluZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IHN0YXJ0U3RhdGVcbiAgICAgKiBAcmV0dXJucyB7e3Rva2VuczppbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlRva2VuW10sIHN0YXRlOiBzdHJpbmd8c3RyaW5nW119fVxuICAgICAqL1xuICAgIGdldExpbmVUb2tlbnMobGluZSwgc3RhcnRTdGF0ZSkge1xuICAgICAgICBpZiAoc3RhcnRTdGF0ZSAmJiB0eXBlb2Ygc3RhcnRTdGF0ZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvKipAdHlwZSB7YW55W119Ki9cbiAgICAgICAgICAgIHZhciBzdGFjayA9IHN0YXJ0U3RhdGUuc2xpY2UoMCk7XG4gICAgICAgICAgICBzdGFydFN0YXRlID0gc3RhY2tbMF07XG4gICAgICAgICAgICBpZiAoc3RhcnRTdGF0ZSA9PT0gXCIjdG1wXCIpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHN0YXJ0U3RhdGUgPSBzdGFjay5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIHZhciBzdGFjayA9IFtdO1xuXG4gICAgICAgIHZhciBjdXJyZW50U3RhdGUgPSAvKipAdHlwZXtzdHJpbmd9Ki8oc3RhcnRTdGF0ZSkgfHwgXCJzdGFydFwiO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlc1tjdXJyZW50U3RhdGVdO1xuICAgICAgICBpZiAoIXN0YXRlKSB7XG4gICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBcInN0YXJ0XCI7XG4gICAgICAgICAgICBzdGF0ZSA9IHRoaXMuc3RhdGVzW2N1cnJlbnRTdGF0ZV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcHBpbmcgPSB0aGlzLm1hdGNoTWFwcGluZ3NbY3VycmVudFN0YXRlXTtcbiAgICAgICAgdmFyIHJlID0gdGhpcy5yZWdFeHBzW2N1cnJlbnRTdGF0ZV07XG4gICAgICAgIHJlLmxhc3RJbmRleCA9IDA7XG5cbiAgICAgICAgdmFyIG1hdGNoLCB0b2tlbnMgPSBbXTtcbiAgICAgICAgdmFyIGxhc3RJbmRleCA9IDA7XG4gICAgICAgIHZhciBtYXRjaEF0dGVtcHRzID0gMDtcblxuICAgICAgICB2YXIgdG9rZW4gPSB7dHlwZTogbnVsbCwgdmFsdWU6IFwiXCJ9O1xuXG4gICAgICAgIHdoaWxlIChtYXRjaCA9IHJlLmV4ZWMobGluZSkpIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gbWFwcGluZy5kZWZhdWx0VG9rZW47XG4gICAgICAgICAgICB2YXIgcnVsZSA9IG51bGw7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBtYXRjaFswXTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHJlLmxhc3RJbmRleDtcblxuICAgICAgICAgICAgaWYgKGluZGV4IC0gdmFsdWUubGVuZ3RoID4gbGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNraXBwZWQgPSBsaW5lLnN1YnN0cmluZyhsYXN0SW5kZXgsIGluZGV4IC0gdmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PSB0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuLnZhbHVlICs9IHNraXBwZWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuLnR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuID0ge3R5cGU6IHR5cGUsIHZhbHVlOiBza2lwcGVkfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2gubGVuZ3RoLTI7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaFtpICsgMV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBydWxlID0gc3RhdGVbbWFwcGluZ1tpXV07XG5cbiAgICAgICAgICAgICAgICBpZiAocnVsZS5vbk1hdGNoKVxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gcnVsZS5vbk1hdGNoKHZhbHVlLCBjdXJyZW50U3RhdGUsIHN0YWNrLCBsaW5lKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSBydWxlLnRva2VuO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUubmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUubmV4dCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBydWxlLm5leHQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBydWxlLm5leHQoY3VycmVudFN0YXRlLCBzdGFjayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gdGhpcy5zdGF0ZXNbY3VycmVudFN0YXRlXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBvcnRFcnJvcihcInN0YXRlIGRvZXNuJ3QgZXhpc3RcIiwgY3VycmVudFN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gdGhpcy5zdGF0ZXNbY3VycmVudFN0YXRlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXBwaW5nID0gdGhpcy5tYXRjaE1hcHBpbmdzW2N1cnJlbnRTdGF0ZV07XG4gICAgICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICByZSA9IHRoaXMucmVnRXhwc1tjdXJyZW50U3RhdGVdO1xuICAgICAgICAgICAgICAgICAgICByZS5sYXN0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuY29uc3VtZUxpbmVFbmQpXG4gICAgICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCghcnVsZSB8fCBydWxlLm1lcmdlICE9PSBmYWxzZSkgJiYgdG9rZW4udHlwZSA9PT0gdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4udmFsdWUgKz0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHt0eXBlOiB0eXBlLCB2YWx1ZTogdmFsdWV9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbi50eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHt0eXBlOiBudWxsLCB2YWx1ZTogXCJcIn07XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2Vucy5wdXNoKHR5cGVbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA9PSBsaW5lLmxlbmd0aClcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgbGFzdEluZGV4ID0gaW5kZXg7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaEF0dGVtcHRzKysgPiBNQVhfVE9LRU5fQ09VTlQpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hBdHRlbXB0cyA+IDIgKiBsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcG9ydEVycm9yKFwiaW5maW5pdGUgbG9vcCB3aXRoIGluIGFjZSB0b2tlbml6ZXJcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRTdGF0ZTogc3RhcnRTdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGxpbmVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGNocm9tZSBkb2Vucyd0IHNob3cgY29udGVudHMgb2YgdGV4dCBub2RlcyB3aXRoIHZlcnkgbG9uZyB0ZXh0XG4gICAgICAgICAgICAgICAgd2hpbGUgKGxhc3RJbmRleCA8IGxpbmUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbi50eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBsaW5lLnN1YnN0cmluZyhsYXN0SW5kZXgsIGxhc3RJbmRleCArPSA1MDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdmVyZmxvd1wiXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICBzdGFjayA9IFtdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRva2VuLnR5cGUpXG4gICAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3RhY2subGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgaWYgKHN0YWNrWzBdICE9PSBjdXJyZW50U3RhdGUpXG4gICAgICAgICAgICAgICAgc3RhY2sudW5zaGlmdChcIiN0bXBcIiwgY3VycmVudFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9rZW5zIDogdG9rZW5zLFxuICAgICAgICAgICAgc3RhdGUgOiBzdGFjay5sZW5ndGggPyBzdGFjayA6IGN1cnJlbnRTdGF0ZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuVG9rZW5pemVyLnByb3RvdHlwZS5yZXBvcnRFcnJvciA9IHJlcG9ydEVycm9yO1xuZXhwb3J0cy5Ub2tlbml6ZXIgPSBUb2tlbml6ZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/tokenizer.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/tooltip.js":
/*!**********************************************!*\
  !*** ./node_modules/ace-code/src/tooltip.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./editor\").Editor} Editor\n * @typedef {import(\"./mouse/mouse_event\").MouseEvent} MouseEvent\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n */\n\nvar dom = __webpack_require__(/*! ./lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar event = __webpack_require__(/*! ./lib/event */ \"./node_modules/ace-code/src/lib/event.js\");\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar preventParentScroll = (__webpack_require__(/*! ./lib/scroll */ \"./node_modules/ace-code/src/lib/scroll.js\").preventParentScroll);\n\nvar CLASSNAME = \"ace_tooltip\";\n\nclass Tooltip {\n    /**\n     * @param {Element} parentNode\n     **/\n    constructor(parentNode) {\n        this.isOpen = false;\n        this.$element = null;\n        this.$parentNode = parentNode;\n    }\n\n    $init() {\n        this.$element = dom.createElement(\"div\");\n        this.$element.className = CLASSNAME;\n        this.$element.style.display = \"none\";\n        this.$parentNode.appendChild(this.$element);\n        return this.$element;\n    }\n\n    /**\n     * @returns {HTMLElement}\n     **/\n    getElement() {\n        return this.$element || this.$init();\n    }\n\n    /**\n     * @param {String} text\n     **/\n    setText(text) {\n        this.getElement().textContent = text;\n    }\n\n    /**\n     * @param {String} html\n     **/\n    setHtml(html) {\n        this.getElement().innerHTML = html;\n    }\n\n    /**\n     * @param {Number} x\n     * @param {Number} y\n     **/\n    setPosition(x, y) {\n        this.getElement().style.left = x + \"px\";\n        this.getElement().style.top = y + \"px\";\n    }\n\n    /**\n     * @param {String} className\n     **/\n    setClassName(className) {\n        dom.addCssClass(this.getElement(), className);\n    }\n\n    /**\n     * @param {import(\"../ace-internal\").Ace.Theme} theme\n     */\n    setTheme(theme) {\n        this.$element.className = CLASSNAME + \" \" +\n            (theme.isDark? \"ace_dark \" : \"\") + (theme.cssClass || \"\");\n    }\n\n    /**\n     * @param {String} [text]\n     * @param {Number} [x]\n     * @param {Number} [y]\n     **/\n    show(text, x, y) {\n        if (text != null)\n            this.setText(text);\n        if (x != null && y != null)\n            this.setPosition(x, y);\n        if (!this.isOpen) {\n            this.getElement().style.display = \"block\";\n            this.isOpen = true;\n        }\n    }\n\n    hide(e) {\n        if (this.isOpen) {\n            this.getElement().style.display = \"none\";\n            this.getElement().className = CLASSNAME;\n            this.isOpen = false;\n        }\n    }\n\n    /**\n     * @returns {Number}\n     **/\n    getHeight() {\n        return this.getElement().offsetHeight;\n    }\n\n    /**\n     * @returns {Number}\n     **/\n    getWidth() {\n        return this.getElement().offsetWidth;\n    }\n\n    destroy() {\n        this.isOpen = false;\n        if (this.$element && this.$element.parentNode) {\n            this.$element.parentNode.removeChild(this.$element);\n        }\n    }\n\n}\n\nclass PopupManager {\n    constructor () {\n        /**@type{Tooltip[]} */\n        this.popups = [];\n    }\n\n    /**\n     * @param {Tooltip} popup\n     */\n    addPopup(popup) {\n        this.popups.push(popup);\n        this.updatePopups();\n    }\n\n    /**\n     * @param {Tooltip} popup\n     */\n    removePopup(popup) {\n        const index = this.popups.indexOf(popup);\n        if (index !== -1) {\n            this.popups.splice(index, 1);\n            this.updatePopups();\n        }\n    }\n\n    updatePopups() {\n        // @ts-expect-error TODO: could be actually an error\n        this.popups.sort((a, b) => b.priority - a.priority);\n        let visiblepopups = [];\n\n        for (let popup of this.popups) {\n            let shouldDisplay = true;\n            for (let visiblePopup of visiblepopups) {\n                if (this.doPopupsOverlap(visiblePopup, popup)) {\n                    shouldDisplay = false;\n                    break;\n                }\n            }\n\n            if (shouldDisplay) {\n                visiblepopups.push(popup);\n            } else {\n                popup.hide();\n            }\n        }\n    }\n\n    /**\n     * @param {Tooltip} popupA\n     * @param {Tooltip} popupB\n     * @return {boolean}\n     */\n    doPopupsOverlap (popupA, popupB) {\n        const rectA = popupA.getElement().getBoundingClientRect();\n        const rectB = popupB.getElement().getBoundingClientRect();\n\n        return (rectA.left < rectB.right && rectA.right > rectB.left && rectA.top < rectB.bottom && rectA.bottom\n            > rectB.top);\n    }\n}\n\nvar popupManager = new PopupManager();\nexports.popupManager = popupManager;\n\nexports.Tooltip = Tooltip;\n\n\nclass HoverTooltip extends Tooltip {\n    constructor(parentNode=document.body) {\n        super(parentNode);\n\n        this.timeout = undefined;\n        this.lastT = 0;\n        this.idleTime = 350;\n        this.lastEvent = undefined;\n\n        this.onMouseOut = this.onMouseOut.bind(this);\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.waitForHover = this.waitForHover.bind(this);\n        this.hide = this.hide.bind(this);\n\n        var el = this.getElement();\n        el.style.whiteSpace = \"pre-wrap\";\n        el.style.pointerEvents = \"auto\";\n        el.addEventListener(\"mouseout\", this.onMouseOut);\n        el.tabIndex = -1;\n\n        el.addEventListener(\"blur\", function() {\n            if (!el.contains(document.activeElement)) this.hide();\n        }.bind(this));\n\n        el.addEventListener(\"wheel\", preventParentScroll);\n    }\n\n    /**\n     * @param {Editor} editor\n     */\n    addToEditor(editor) {\n        editor.on(\"mousemove\", this.onMouseMove);\n        editor.on(\"mousedown\", this.hide);\n        editor.renderer.getMouseEventTarget().addEventListener(\"mouseout\", this.onMouseOut, true);\n    }\n\n    /**\n     * @param {Editor} editor\n     */\n    removeFromEditor(editor) {\n        editor.off(\"mousemove\", this.onMouseMove);\n        editor.off(\"mousedown\", this.hide);\n        editor.renderer.getMouseEventTarget().removeEventListener(\"mouseout\", this.onMouseOut, true);\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n    }\n\n    /**\n     * @param {MouseEvent} e\n     * @param {Editor} editor\n     * @internal\n     */\n    onMouseMove(e, editor) {\n        this.lastEvent = e;\n        this.lastT = Date.now();\n        var isMousePressed = editor.$mouseHandler.isMousePressed;\n        if (this.isOpen) {\n            var pos = this.lastEvent && this.lastEvent.getDocumentPosition();\n            if (\n                !this.range\n                || !this.range.contains(pos.row, pos.column)\n                || isMousePressed\n                || this.isOutsideOfText(this.lastEvent)\n            ) {\n                this.hide();\n            }\n        }\n        if (this.timeout || isMousePressed) return;\n        this.lastEvent = e;\n        this.timeout = setTimeout(this.waitForHover, this.idleTime);\n    }\n    waitForHover() {\n        if (this.timeout) clearTimeout(this.timeout);\n        var dt = Date.now() - this.lastT;\n        if (this.idleTime - dt > 10) {\n            this.timeout = setTimeout(this.waitForHover, this.idleTime - dt);\n            return;\n        }\n\n        this.timeout = null;\n        if (this.lastEvent && !this.isOutsideOfText(this.lastEvent)) {\n            this.$gatherData(this.lastEvent, this.lastEvent.editor);\n        }\n    }\n\n    /**\n     * @param {MouseEvent} e\n     */\n    isOutsideOfText(e) {\n        var editor = e.editor;\n        var docPos = e.getDocumentPosition();\n        var line = editor.session.getLine(docPos.row);\n        if (docPos.column == line.length) {\n            var screenPos = editor.renderer.pixelToScreenCoordinates(e.clientX, e.clientY);\n            var clippedPos = editor.session.documentToScreenPosition(docPos.row, docPos.column);\n            if (\n                clippedPos.column != screenPos.column\n                || clippedPos.row != screenPos.row\n            ) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @param {(event: MouseEvent, editor: Editor) => void} value\n     */\n    setDataProvider(value) {\n        this.$gatherData = value;\n    }\n\n    /**\n     * @param {Editor} editor\n     * @param {Range} range\n     * @param {HTMLElement} domNode\n     * @param {MouseEvent} startingEvent\n     */\n    showForRange(editor, range, domNode, startingEvent) {\n        var MARGIN = 10;\n        if (startingEvent && startingEvent != this.lastEvent) return;\n        if (this.isOpen && document.activeElement == this.getElement()) return;\n\n        var renderer = editor.renderer;\n        if (!this.isOpen) {\n            popupManager.addPopup(this);\n            this.$registerCloseEvents();\n            this.setTheme(renderer.theme);\n        }\n        this.isOpen = true;\n\n        this.addMarker(range, editor.session);\n        this.range = Range.fromPoints(range.start, range.end);\n        var position = renderer.textToScreenCoordinates(range.start.row, range.start.column);\n\n        var rect = renderer.scroller.getBoundingClientRect();\n        // clip position to visible area of the editor\n        if (position.pageX < rect.left)\n            position.pageX = rect.left;\n\n        var element = this.getElement();\n        element.innerHTML = \"\";\n        element.appendChild(domNode);\n\n        element.style.maxHeight = \"\";\n        element.style.display = \"block\";\n\n        // measure the size of tooltip, without constraints on its height\n        var labelHeight = element.clientHeight;\n        var labelWidth = element.clientWidth;\n        var spaceBelow = window.innerHeight - position.pageY - renderer.lineHeight;\n\n        // if tooltip fits above the line, or space below the line is smaller, show tooltip above\n        let isAbove = true;\n        if (position.pageY - labelHeight < 0 && position.pageY < spaceBelow) {\n            isAbove = false;\n        }\n\n        element.style.maxHeight = (isAbove ? position.pageY : spaceBelow) - MARGIN + \"px\";\n        element.style.top = isAbove ? \"\" : position.pageY + renderer.lineHeight + \"px\";\n        element.style.bottom = isAbove ?  window.innerHeight - position.pageY  + \"px\" : \"\";\n\n        // try to align tooltip left with the range, but keep it on screen\n        element.style.left = Math.min(position.pageX, window.innerWidth - labelWidth - MARGIN) + \"px\";\n    }\n\n    /**\n     * @param {Range} range\n     * @param {EditSession} [session]\n     */\n    addMarker(range, session) {\n        if (this.marker) {\n            this.$markerSession.removeMarker(this.marker);\n        }\n        this.$markerSession = session;\n        this.marker = session && session.addMarker(range, \"ace_highlight-marker\", \"text\");\n    }\n\n    hide(e) {\n        if (!e && document.activeElement == this.getElement())\n            return;\n        if (e && e.target && (e.type != \"keydown\" || e.ctrlKey || e.metaKey) && this.$element.contains(e.target))\n            return;\n        this.lastEvent = null;\n        if (this.timeout) clearTimeout(this.timeout);\n        this.timeout = null;\n        this.addMarker(null);\n        if (this.isOpen) {\n            this.$removeCloseEvents();\n            this.getElement().style.display = \"none\";\n            this.isOpen = false;\n            popupManager.removePopup(this);\n        }\n    }\n\n    $registerCloseEvents() {\n        window.addEventListener(\"keydown\", this.hide, true);\n        window.addEventListener(\"wheel\", this.hide, true);\n        window.addEventListener(\"mousedown\", this.hide, true);\n    }\n\n    $removeCloseEvents() {\n        window.removeEventListener(\"keydown\", this.hide, true);\n        window.removeEventListener(\"wheel\", this.hide, true);\n        window.removeEventListener(\"mousedown\", this.hide, true);\n    }\n\n    /**\n     * @internal\n     */\n    onMouseOut(e) {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.lastEvent = null;\n        if (!this.isOpen) return;\n\n        if (!e.relatedTarget || this.getElement().contains(e.relatedTarget)) return;\n\n        if (e && e.currentTarget.contains(e.relatedTarget)) return;\n        if (!e.relatedTarget.classList.contains(\"ace_content\")) this.hide();\n    }\n}\n\nexports.HoverTooltip = HoverTooltip;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3Rvb2x0aXAuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsMkJBQTJCO0FBQ3hDLGFBQWEsMENBQTBDO0FBQ3ZELGFBQWEsc0NBQXNDO0FBQ25EOztBQUVBLFVBQVUsbUJBQU8sQ0FBQyx5REFBVztBQUM3QixZQUFZLG1CQUFPLENBQUMsNkRBQWE7QUFDakMsWUFBWSxrRkFBd0I7QUFDcEMsMEJBQTBCLDBHQUEyQzs7QUFFckU7O0FBRUE7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLHFDQUFxQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixXQUFXO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUztBQUN4QixlQUFlLFNBQVM7QUFDeEIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9COztBQUVwQixlQUFlOzs7QUFHZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsWUFBWTtBQUMzQixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsWUFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSw2Q0FBNkM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsYUFBYTtBQUM1QixlQUFlLFlBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy90b29sdGlwLmpzPzY5ODEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2VkaXRvclwiKS5FZGl0b3J9IEVkaXRvclxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vbW91c2UvbW91c2VfZXZlbnRcIikuTW91c2VFdmVudH0gTW91c2VFdmVudFxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vZWRpdF9zZXNzaW9uXCIpLkVkaXRTZXNzaW9ufSBFZGl0U2Vzc2lvblxuICovXG5cbnZhciBkb20gPSByZXF1aXJlKFwiLi9saWIvZG9tXCIpO1xudmFyIGV2ZW50ID0gcmVxdWlyZShcIi4vbGliL2V2ZW50XCIpO1xudmFyIFJhbmdlID0gcmVxdWlyZShcIi4vcmFuZ2VcIikuUmFuZ2U7XG52YXIgcHJldmVudFBhcmVudFNjcm9sbCA9IHJlcXVpcmUoXCIuL2xpYi9zY3JvbGxcIikucHJldmVudFBhcmVudFNjcm9sbDtcblxudmFyIENMQVNTTkFNRSA9IFwiYWNlX3Rvb2x0aXBcIjtcblxuY2xhc3MgVG9vbHRpcCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBwYXJlbnROb2RlXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudE5vZGUpIHtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kZWxlbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuJHBhcmVudE5vZGUgPSBwYXJlbnROb2RlO1xuICAgIH1cblxuICAgICRpbml0KCkge1xuICAgICAgICB0aGlzLiRlbGVtZW50ID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQuY2xhc3NOYW1lID0gQ0xBU1NOQU1FO1xuICAgICAgICB0aGlzLiRlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgdGhpcy4kcGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLiRlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICAgICAqKi9cbiAgICBnZXRFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kZWxlbWVudCB8fCB0aGlzLiRpbml0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICAgKiovXG4gICAgc2V0VGV4dCh0ZXh0KSB7XG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaHRtbFxuICAgICAqKi9cbiAgICBzZXRIdG1sKGh0bWwpIHtcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50KCkuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge051bWJlcn0geFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gICAgICoqL1xuICAgIHNldFBvc2l0aW9uKHgsIHkpIHtcbiAgICAgICAgdGhpcy5nZXRFbGVtZW50KCkuc3R5bGUubGVmdCA9IHggKyBcInB4XCI7XG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnN0eWxlLnRvcCA9IHkgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZVxuICAgICAqKi9cbiAgICBzZXRDbGFzc05hbWUoY2xhc3NOYW1lKSB7XG4gICAgICAgIGRvbS5hZGRDc3NDbGFzcyh0aGlzLmdldEVsZW1lbnQoKSwgY2xhc3NOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuVGhlbWV9IHRoZW1lXG4gICAgICovXG4gICAgc2V0VGhlbWUodGhlbWUpIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudC5jbGFzc05hbWUgPSBDTEFTU05BTUUgKyBcIiBcIiArXG4gICAgICAgICAgICAodGhlbWUuaXNEYXJrPyBcImFjZV9kYXJrIFwiIDogXCJcIikgKyAodGhlbWUuY3NzQ2xhc3MgfHwgXCJcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFt0ZXh0XVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbeF1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3ldXG4gICAgICoqL1xuICAgIHNob3codGV4dCwgeCwgeSkge1xuICAgICAgICBpZiAodGV4dCAhPSBudWxsKVxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0KHRleHQpO1xuICAgICAgICBpZiAoeCAhPSBudWxsICYmIHkgIT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpb24oeCwgeSk7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoaWRlKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmdldEVsZW1lbnQoKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB0aGlzLmdldEVsZW1lbnQoKS5jbGFzc05hbWUgPSBDTEFTU05BTUU7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50KCkub2Zmc2V0SGVpZ2h0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldFdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50KCkub2Zmc2V0V2lkdGg7XG4gICAgfVxuXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuJGVsZW1lbnQgJiYgdGhpcy4kZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy4kZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuY2xhc3MgUG9wdXBNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgIC8qKkB0eXBle1Rvb2x0aXBbXX0gKi9cbiAgICAgICAgdGhpcy5wb3B1cHMgPSBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1Rvb2x0aXB9IHBvcHVwXG4gICAgICovXG4gICAgYWRkUG9wdXAocG9wdXApIHtcbiAgICAgICAgdGhpcy5wb3B1cHMucHVzaChwb3B1cCk7XG4gICAgICAgIHRoaXMudXBkYXRlUG9wdXBzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUb29sdGlwfSBwb3B1cFxuICAgICAqL1xuICAgIHJlbW92ZVBvcHVwKHBvcHVwKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wb3B1cHMuaW5kZXhPZihwb3B1cCk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBvcHVwcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlUG9wdXBzKCkge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IGNvdWxkIGJlIGFjdHVhbGx5IGFuIGVycm9yXG4gICAgICAgIHRoaXMucG9wdXBzLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KTtcbiAgICAgICAgbGV0IHZpc2libGVwb3B1cHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBwb3B1cCBvZiB0aGlzLnBvcHVwcykge1xuICAgICAgICAgICAgbGV0IHNob3VsZERpc3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgdmlzaWJsZVBvcHVwIG9mIHZpc2libGVwb3B1cHMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kb1BvcHVwc092ZXJsYXAodmlzaWJsZVBvcHVwLCBwb3B1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkRGlzcGxheSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzaG91bGREaXNwbGF5KSB7XG4gICAgICAgICAgICAgICAgdmlzaWJsZXBvcHVwcy5wdXNoKHBvcHVwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcG9wdXAuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUb29sdGlwfSBwb3B1cEFcbiAgICAgKiBAcGFyYW0ge1Rvb2x0aXB9IHBvcHVwQlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgZG9Qb3B1cHNPdmVybGFwIChwb3B1cEEsIHBvcHVwQikge1xuICAgICAgICBjb25zdCByZWN0QSA9IHBvcHVwQS5nZXRFbGVtZW50KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHJlY3RCID0gcG9wdXBCLmdldEVsZW1lbnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICByZXR1cm4gKHJlY3RBLmxlZnQgPCByZWN0Qi5yaWdodCAmJiByZWN0QS5yaWdodCA+IHJlY3RCLmxlZnQgJiYgcmVjdEEudG9wIDwgcmVjdEIuYm90dG9tICYmIHJlY3RBLmJvdHRvbVxuICAgICAgICAgICAgPiByZWN0Qi50b3ApO1xuICAgIH1cbn1cblxudmFyIHBvcHVwTWFuYWdlciA9IG5ldyBQb3B1cE1hbmFnZXIoKTtcbmV4cG9ydHMucG9wdXBNYW5hZ2VyID0gcG9wdXBNYW5hZ2VyO1xuXG5leHBvcnRzLlRvb2x0aXAgPSBUb29sdGlwO1xuXG5cbmNsYXNzIEhvdmVyVG9vbHRpcCBleHRlbmRzIFRvb2x0aXAge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudE5vZGU9ZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBzdXBlcihwYXJlbnROb2RlKTtcblxuICAgICAgICB0aGlzLnRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubGFzdFQgPSAwO1xuICAgICAgICB0aGlzLmlkbGVUaW1lID0gMzUwO1xuICAgICAgICB0aGlzLmxhc3RFdmVudCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLm9uTW91c2VPdXQgPSB0aGlzLm9uTW91c2VPdXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy53YWl0Rm9ySG92ZXIgPSB0aGlzLndhaXRGb3JIb3Zlci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhpZGUgPSB0aGlzLmhpZGUuYmluZCh0aGlzKTtcblxuICAgICAgICB2YXIgZWwgPSB0aGlzLmdldEVsZW1lbnQoKTtcbiAgICAgICAgZWwuc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlLXdyYXBcIjtcbiAgICAgICAgZWwuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdGhpcy5vbk1vdXNlT3V0KTtcbiAgICAgICAgZWwudGFiSW5kZXggPSAtMTtcblxuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghZWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHRoaXMuaGlkZSgpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBwcmV2ZW50UGFyZW50U2Nyb2xsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VkaXRvcn0gZWRpdG9yXG4gICAgICovXG4gICAgYWRkVG9FZGl0b3IoZWRpdG9yKSB7XG4gICAgICAgIGVkaXRvci5vbihcIm1vdXNlbW92ZVwiLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgZWRpdG9yLm9uKFwibW91c2Vkb3duXCIsIHRoaXMuaGlkZSk7XG4gICAgICAgIGVkaXRvci5yZW5kZXJlci5nZXRNb3VzZUV2ZW50VGFyZ2V0KCkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIHRoaXMub25Nb3VzZU91dCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvclxuICAgICAqL1xuICAgIHJlbW92ZUZyb21FZGl0b3IoZWRpdG9yKSB7XG4gICAgICAgIGVkaXRvci5vZmYoXCJtb3VzZW1vdmVcIiwgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgIGVkaXRvci5vZmYoXCJtb3VzZWRvd25cIiwgdGhpcy5oaWRlKTtcbiAgICAgICAgZWRpdG9yLnJlbmRlcmVyLmdldE1vdXNlRXZlbnRUYXJnZXQoKS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdGhpcy5vbk1vdXNlT3V0LCB0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXG4gICAgICogQHBhcmFtIHtFZGl0b3J9IGVkaXRvclxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uTW91c2VNb3ZlKGUsIGVkaXRvcikge1xuICAgICAgICB0aGlzLmxhc3RFdmVudCA9IGU7XG4gICAgICAgIHRoaXMubGFzdFQgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgaXNNb3VzZVByZXNzZWQgPSBlZGl0b3IuJG1vdXNlSGFuZGxlci5pc01vdXNlUHJlc3NlZDtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5sYXN0RXZlbnQgJiYgdGhpcy5sYXN0RXZlbnQuZ2V0RG9jdW1lbnRQb3NpdGlvbigpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0aGlzLnJhbmdlXG4gICAgICAgICAgICAgICAgfHwgIXRoaXMucmFuZ2UuY29udGFpbnMocG9zLnJvdywgcG9zLmNvbHVtbilcbiAgICAgICAgICAgICAgICB8fCBpc01vdXNlUHJlc3NlZFxuICAgICAgICAgICAgICAgIHx8IHRoaXMuaXNPdXRzaWRlT2ZUZXh0KHRoaXMubGFzdEV2ZW50KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGltZW91dCB8fCBpc01vdXNlUHJlc3NlZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmxhc3RFdmVudCA9IGU7XG4gICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQodGhpcy53YWl0Rm9ySG92ZXIsIHRoaXMuaWRsZVRpbWUpO1xuICAgIH1cbiAgICB3YWl0Rm9ySG92ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXQpIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICB2YXIgZHQgPSBEYXRlLm5vdygpIC0gdGhpcy5sYXN0VDtcbiAgICAgICAgaWYgKHRoaXMuaWRsZVRpbWUgLSBkdCA+IDEwKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMud2FpdEZvckhvdmVyLCB0aGlzLmlkbGVUaW1lIC0gZHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMubGFzdEV2ZW50ICYmICF0aGlzLmlzT3V0c2lkZU9mVGV4dCh0aGlzLmxhc3RFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuJGdhdGhlckRhdGEodGhpcy5sYXN0RXZlbnQsIHRoaXMubGFzdEV2ZW50LmVkaXRvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGVcbiAgICAgKi9cbiAgICBpc091dHNpZGVPZlRleHQoZSkge1xuICAgICAgICB2YXIgZWRpdG9yID0gZS5lZGl0b3I7XG4gICAgICAgIHZhciBkb2NQb3MgPSBlLmdldERvY3VtZW50UG9zaXRpb24oKTtcbiAgICAgICAgdmFyIGxpbmUgPSBlZGl0b3Iuc2Vzc2lvbi5nZXRMaW5lKGRvY1Bvcy5yb3cpO1xuICAgICAgICBpZiAoZG9jUG9zLmNvbHVtbiA9PSBsaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHNjcmVlblBvcyA9IGVkaXRvci5yZW5kZXJlci5waXhlbFRvU2NyZWVuQ29vcmRpbmF0ZXMoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xuICAgICAgICAgICAgdmFyIGNsaXBwZWRQb3MgPSBlZGl0b3Iuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24oZG9jUG9zLnJvdywgZG9jUG9zLmNvbHVtbik7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY2xpcHBlZFBvcy5jb2x1bW4gIT0gc2NyZWVuUG9zLmNvbHVtblxuICAgICAgICAgICAgICAgIHx8IGNsaXBwZWRQb3Mucm93ICE9IHNjcmVlblBvcy5yb3dcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyhldmVudDogTW91c2VFdmVudCwgZWRpdG9yOiBFZGl0b3IpID0+IHZvaWR9IHZhbHVlXG4gICAgICovXG4gICAgc2V0RGF0YVByb3ZpZGVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuJGdhdGhlckRhdGEgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VkaXRvcn0gZWRpdG9yXG4gICAgICogQHBhcmFtIHtSYW5nZX0gcmFuZ2VcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkb21Ob2RlXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBzdGFydGluZ0V2ZW50XG4gICAgICovXG4gICAgc2hvd0ZvclJhbmdlKGVkaXRvciwgcmFuZ2UsIGRvbU5vZGUsIHN0YXJ0aW5nRXZlbnQpIHtcbiAgICAgICAgdmFyIE1BUkdJTiA9IDEwO1xuICAgICAgICBpZiAoc3RhcnRpbmdFdmVudCAmJiBzdGFydGluZ0V2ZW50ICE9IHRoaXMubGFzdEV2ZW50KSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmlzT3BlbiAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09IHRoaXMuZ2V0RWxlbWVudCgpKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHJlbmRlcmVyID0gZWRpdG9yLnJlbmRlcmVyO1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICBwb3B1cE1hbmFnZXIuYWRkUG9wdXAodGhpcyk7XG4gICAgICAgICAgICB0aGlzLiRyZWdpc3RlckNsb3NlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnNldFRoZW1lKHJlbmRlcmVyLnRoZW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5hZGRNYXJrZXIocmFuZ2UsIGVkaXRvci5zZXNzaW9uKTtcbiAgICAgICAgdGhpcy5yYW5nZSA9IFJhbmdlLmZyb21Qb2ludHMocmFuZ2Uuc3RhcnQsIHJhbmdlLmVuZCk7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHJlbmRlcmVyLnRleHRUb1NjcmVlbkNvb3JkaW5hdGVzKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uKTtcblxuICAgICAgICB2YXIgcmVjdCA9IHJlbmRlcmVyLnNjcm9sbGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAvLyBjbGlwIHBvc2l0aW9uIHRvIHZpc2libGUgYXJlYSBvZiB0aGUgZWRpdG9yXG4gICAgICAgIGlmIChwb3NpdGlvbi5wYWdlWCA8IHJlY3QubGVmdClcbiAgICAgICAgICAgIHBvc2l0aW9uLnBhZ2VYID0gcmVjdC5sZWZ0O1xuXG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50KCk7XG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChkb21Ob2RlKTtcblxuICAgICAgICBlbGVtZW50LnN0eWxlLm1heEhlaWdodCA9IFwiXCI7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgICAvLyBtZWFzdXJlIHRoZSBzaXplIG9mIHRvb2x0aXAsIHdpdGhvdXQgY29uc3RyYWludHMgb24gaXRzIGhlaWdodFxuICAgICAgICB2YXIgbGFiZWxIZWlnaHQgPSBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgdmFyIGxhYmVsV2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgICB2YXIgc3BhY2VCZWxvdyA9IHdpbmRvdy5pbm5lckhlaWdodCAtIHBvc2l0aW9uLnBhZ2VZIC0gcmVuZGVyZXIubGluZUhlaWdodDtcblxuICAgICAgICAvLyBpZiB0b29sdGlwIGZpdHMgYWJvdmUgdGhlIGxpbmUsIG9yIHNwYWNlIGJlbG93IHRoZSBsaW5lIGlzIHNtYWxsZXIsIHNob3cgdG9vbHRpcCBhYm92ZVxuICAgICAgICBsZXQgaXNBYm92ZSA9IHRydWU7XG4gICAgICAgIGlmIChwb3NpdGlvbi5wYWdlWSAtIGxhYmVsSGVpZ2h0IDwgMCAmJiBwb3NpdGlvbi5wYWdlWSA8IHNwYWNlQmVsb3cpIHtcbiAgICAgICAgICAgIGlzQWJvdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gKGlzQWJvdmUgPyBwb3NpdGlvbi5wYWdlWSA6IHNwYWNlQmVsb3cpIC0gTUFSR0lOICsgXCJweFwiO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IGlzQWJvdmUgPyBcIlwiIDogcG9zaXRpb24ucGFnZVkgKyByZW5kZXJlci5saW5lSGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmJvdHRvbSA9IGlzQWJvdmUgPyAgd2luZG93LmlubmVySGVpZ2h0IC0gcG9zaXRpb24ucGFnZVkgICsgXCJweFwiIDogXCJcIjtcblxuICAgICAgICAvLyB0cnkgdG8gYWxpZ24gdG9vbHRpcCBsZWZ0IHdpdGggdGhlIHJhbmdlLCBidXQga2VlcCBpdCBvbiBzY3JlZW5cbiAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gTWF0aC5taW4ocG9zaXRpb24ucGFnZVgsIHdpbmRvdy5pbm5lcldpZHRoIC0gbGFiZWxXaWR0aCAtIE1BUkdJTikgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtSYW5nZX0gcmFuZ2VcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBbc2Vzc2lvbl1cbiAgICAgKi9cbiAgICBhZGRNYXJrZXIocmFuZ2UsIHNlc3Npb24pIHtcbiAgICAgICAgaWYgKHRoaXMubWFya2VyKSB7XG4gICAgICAgICAgICB0aGlzLiRtYXJrZXJTZXNzaW9uLnJlbW92ZU1hcmtlcih0aGlzLm1hcmtlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kbWFya2VyU2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIHRoaXMubWFya2VyID0gc2Vzc2lvbiAmJiBzZXNzaW9uLmFkZE1hcmtlcihyYW5nZSwgXCJhY2VfaGlnaGxpZ2h0LW1hcmtlclwiLCBcInRleHRcIik7XG4gICAgfVxuXG4gICAgaGlkZShlKSB7XG4gICAgICAgIGlmICghZSAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09IHRoaXMuZ2V0RWxlbWVudCgpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZSAmJiBlLnRhcmdldCAmJiAoZS50eXBlICE9IFwia2V5ZG93blwiIHx8IGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIHRoaXMuJGVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmxhc3RFdmVudCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXQpIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSBudWxsO1xuICAgICAgICB0aGlzLmFkZE1hcmtlcihudWxsKTtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLiRyZW1vdmVDbG9zZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5nZXRFbGVtZW50KCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHBvcHVwTWFuYWdlci5yZW1vdmVQb3B1cCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRyZWdpc3RlckNsb3NlRXZlbnRzKCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oaWRlLCB0cnVlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCB0aGlzLmhpZGUsIHRydWUpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLmhpZGUsIHRydWUpO1xuICAgIH1cblxuICAgICRyZW1vdmVDbG9zZUV2ZW50cygpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGlkZSwgdHJ1ZSk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy5oaWRlLCB0cnVlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5oaWRlLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbk1vdXNlT3V0KGUpIHtcbiAgICAgICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEV2ZW50ID0gbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3BlbikgcmV0dXJuO1xuXG4gICAgICAgIGlmICghZS5yZWxhdGVkVGFyZ2V0IHx8IHRoaXMuZ2V0RWxlbWVudCgpLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHJldHVybjtcblxuICAgICAgICBpZiAoZSAmJiBlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkgcmV0dXJuO1xuICAgICAgICBpZiAoIWUucmVsYXRlZFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY2VfY29udGVudFwiKSkgdGhpcy5oaWRlKCk7XG4gICAgfVxufVxuXG5leHBvcnRzLkhvdmVyVG9vbHRpcCA9IEhvdmVyVG9vbHRpcDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/tooltip.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/undomanager.js":
/*!**************************************************!*\
  !*** ./node_modules/ace-code/src/undomanager.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n * @typedef {import(\"../ace-internal\").Ace.Delta} Delta\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n * @typedef {import(\"../ace-internal\").Ace.IRange} IRange\n */\n\n/**\n * This object maintains the undo stack for an [[EditSession `EditSession`]].\n **/\nclass UndoManager {\n    /**\n     * Resets the current undo state and creates a new `UndoManager`.\n     **/\n    constructor() {\n        /**@type {boolean}*/\n        this.$keepRedoStack;\n        this.$maxRev = 0;\n        this.$fromUndo = false;\n        this.$undoDepth = Infinity;\n        this.reset();\n    }\n\n    /**\n     * \n     * @param {EditSession} session\n     */\n    addSession(session) {\n        this.$session = session;\n    }\n    /**\n     * Provides a means for implementing your own undo manager. `options` has one property, `args`, an [[Array `Array`]], with two elements:\n     *\n     * - `args[0]` is an array of deltas\n     * - `args[1]` is the document to associate with\n     *\n     * @param {import(\"../ace-internal\").Ace.Delta} delta\n     * @param {boolean} allowMerge\n     * @param {EditSession} [session]\n     **/\n    add(delta, allowMerge, session) {\n        if (this.$fromUndo) return;\n        if (delta == this.$lastDelta) return;\n        if (!this.$keepRedoStack) this.$redoStack.length = 0;\n        if (allowMerge === false || !this.lastDeltas) {\n            this.lastDeltas = [];\n            var undoStackLength = this.$undoStack.length;\n            if (undoStackLength > this.$undoDepth - 1) {\n                this.$undoStack.splice(0, undoStackLength - this.$undoDepth + 1);\n            }\n            this.$undoStack.push(this.lastDeltas);\n            delta.id = this.$rev = ++this.$maxRev;\n        }\n        if (delta.action == \"remove\" || delta.action == \"insert\")\n            this.$lastDelta = delta;\n        this.lastDeltas.push(delta);\n    }\n\n    /**\n     * \n     * @param {any} selection\n     * @param {number} [rev]\n     */\n    addSelection(selection, rev) {\n        this.selections.push({\n            value: selection,\n            rev: rev || this.$rev\n        });\n    }\n    \n    startNewGroup() {\n        this.lastDeltas = null;\n        return this.$rev;\n    }\n\n    /**\n     * \n     * @param {number} from\n     * @param {number} [to]\n     */\n    markIgnored(from, to) {\n        if (to == null) to = this.$rev + 1;\n        var stack = this.$undoStack;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id <= from)\n                break;\n            if (delta.id < to)\n                delta.ignore = true;\n        }\n        this.lastDeltas = null;\n    }\n\n    /**\n     * \n     * @param {number} rev\n     * @param {boolean} [after]\n     * @return {{ value: string, rev: number }}\n     */\n    getSelection(rev, after) {\n        var stack = this.selections;\n        for (var i = stack.length; i--;) {\n            var selection = stack[i];\n            if (selection.rev < rev) {\n                if (after)\n                    selection = stack[i + 1];\n                return selection;\n            }\n        }\n    }\n\n    /**\n     * @return {number}\n     */\n    getRevision() {\n        return this.$rev;\n    }\n\n    /**\n     * \n     * @param {number} from\n     * @param {number} [to]\n     * @return {import(\"../ace-internal\").Ace.Delta[]}\n     */\n    getDeltas(from, to) {\n        if (to == null) to = this.$rev + 1;\n        var stack = this.$undoStack;\n        var end = null, start = 0;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id < to && !end)\n                end = i+1;\n            if (delta.id <= from) {\n                start = i + 1;\n                break;\n            }\n        }\n        return stack.slice(start, end);\n    }\n\n    /**\n     * \n     * @param {number} from\n     * @param {number} [to]\n     */\n    getChangedRanges(from, to) {\n        if (to == null) to = this.$rev + 1;\n    }\n\n    /**\n     *\n     * @param {number} from\n     * @param {number} [to]\n     */\n    getChangedLines(from, to) {\n        if (to == null) to = this.$rev + 1;\n        \n    }\n\n    /**\n     * [Perform an undo operation on the document, reverting the last change.]{: #UndoManager.undo}\n     * @param {EditSession} session\n     * @param {Boolean} [dontSelect] {:dontSelect}\n     **/\n    undo(session, dontSelect) {\n        this.lastDeltas = null;\n        var stack = this.$undoStack;\n        \n        if (!rearrangeUndoStack(stack, stack.length))\n            return;\n        \n        if (!session)\n            session = this.$session;\n        \n        if (this.$redoStackBaseRev !== this.$rev && this.$redoStack.length)\n            this.$redoStack = [];\n        \n        this.$fromUndo = true;\n        \n        var deltaSet = stack.pop();\n        var undoSelectionRange = null;\n        if (deltaSet) {\n            undoSelectionRange = session.undoChanges(deltaSet, dontSelect);\n            this.$redoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        \n        this.$fromUndo = false;\n\n        return undoSelectionRange;\n    }\n    \n    /**\n     * [Perform a redo operation on the document, reimplementing the last change.]{: #UndoManager.redo}\n     * @param {EditSession} session\n     * @param {Boolean} [dontSelect] {:dontSelect}\n     *\n     **/\n    redo(session, dontSelect) {\n        this.lastDeltas = null;\n        \n        if (!session)\n            session = this.$session;\n        \n        this.$fromUndo = true;\n        if (this.$redoStackBaseRev != this.$rev) {\n            var diff = this.getDeltas(this.$redoStackBaseRev, this.$rev + 1);\n            rebaseRedoStack(this.$redoStack, diff);\n            this.$redoStackBaseRev = this.$rev;\n            this.$redoStack.forEach(function(x) {\n                x[0].id = ++this.$maxRev;\n            }, this);\n        }\n        var deltaSet = this.$redoStack.pop();\n        var redoSelectionRange = null;\n        \n        if (deltaSet) {\n            redoSelectionRange = session.redoChanges(deltaSet, dontSelect);\n            this.$undoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        this.$fromUndo = false;\n        \n        return redoSelectionRange;\n    }\n    \n    $syncRev() {\n        var stack = this.$undoStack;\n        var nextDelta = stack[stack.length - 1];\n        var id = nextDelta && nextDelta[0].id || 0;\n        this.$redoStackBaseRev = id;\n        this.$rev = id;\n    }\n\n    /**\n     * Destroys the stack of undo and redo redo operations.\n     **/\n    reset() {\n        this.lastDeltas = null;\n        this.$lastDelta = null;\n        this.$undoStack = [];\n        this.$redoStack = [];\n        this.$rev = 0;\n        this.mark = 0;\n        this.$redoStackBaseRev = this.$rev;\n        this.selections = [];\n    }\n\n    \n    /**\n     * Returns `true` if there are undo operations left to perform.\n     * @returns {Boolean}\n     **/\n    canUndo() {\n        return this.$undoStack.length > 0;\n    }\n\n    /**\n     * Returns `true` if there are redo operations left to perform.\n     * @returns {Boolean}\n     **/\n    canRedo() {\n        return this.$redoStack.length > 0;\n    }\n\n    /**\n     * Marks the current status clean\n     * @param {number} [rev]\n     */\n    bookmark(rev) {\n        if (rev == undefined)\n            rev = this.$rev;\n        this.mark = rev;\n    }\n\n    /**\n     * Returns if the current status is clean\n     * @returns {Boolean}\n     **/\n    isAtBookmark() {\n        return this.$rev === this.mark;\n    }\n    \n    /**\n     * Returns an object which can be safely stringified into JSON\n     * @returns {object}\n     */\n    toJSON() {\n        return {\n            $redoStack: this.$redoStack,\n            $undoStack: this.$undoStack\n        };\n    }\n\n    // NOTE: The above and below function require you to JSON.stringify and JSON.parse externally.\n    \n    /**\n     * Takes in an object which was returned from the toJSON method above,\n     * and resets the current undoManager instance to use the previously exported\n     * instance state.\n     * @param {object} json \n     */\n    fromJSON(json) {\n        this.reset();\n        this.$undoStack = json.$undoStack;\n        this.$redoStack = json.$redoStack;\n    }\n\n\n    /**\n     * @param {Delta} delta\n     */\n    $prettyPrint(delta) {\n        if (delta) return stringifyDelta(delta);\n        return stringifyDelta(this.$undoStack) + \"\\n---\\n\" + stringifyDelta(this.$redoStack);\n    }\n}\n\n\nUndoManager.prototype.hasUndo = UndoManager.prototype.canUndo;\nUndoManager.prototype.hasRedo = UndoManager.prototype.canRedo;\nUndoManager.prototype.isClean = UndoManager.prototype.isAtBookmark;\nUndoManager.prototype.markClean = UndoManager.prototype.bookmark;\n\n/**\n * @param {any[]} stack\n * @param {number} pos\n */\nfunction rearrangeUndoStack(stack, pos) {\n    for (var i = pos; i--; ) {\n        var deltaSet = stack[i];\n        if (deltaSet && !deltaSet[0].ignore) {\n            while(i < pos - 1) {\n                var swapped = swapGroups(stack[i], stack[i + 1]);\n                stack[i] = swapped[0];\n                stack[i + 1] = swapped[1];\n                i++;\n            }\n            return true;\n        }\n    }\n}\n\nvar Range = (__webpack_require__(/*! ./range */ \"./node_modules/ace-code/src/range.js\").Range);\nvar cmp = Range.comparePoints;\nvar comparePoints = Range.comparePoints;\n\n/**\n * @param {Delta} delta\n */\nfunction $updateMarkers(delta) {\n    var isInsert = delta.action == \"insert\";\n    var start = delta.start;\n    var end = delta.end;\n    var rowShift = (end.row - start.row) * (isInsert ? 1 : -1);\n    var colShift = (end.column - start.column) * (isInsert ? 1 : -1);\n    if (isInsert) end = start;\n\n    for (var i in this.marks) {\n        var point = this.marks[i];\n        var cmp = comparePoints(point, start);\n        if (cmp < 0) {\n            continue; // delta starts after the range\n        }\n        if (cmp === 0) {\n            if (isInsert) {\n                if (point.bias == 1) {\n                    cmp = 1;\n                }\n                else {\n                    point.bias == -1;\n                    continue;\n                }\n            }\n        }\n        var cmp2 = isInsert ? cmp : comparePoints(point, end);\n        if (cmp2 > 0) {\n            point.row += rowShift;\n            point.column += point.row == end.row ? colShift : 0;\n            continue;\n        }\n        if (!isInsert && cmp2 <= 0) {\n            point.row = start.row;\n            point.column = start.column;\n            if (cmp2 === 0)\n                point.bias = 1;\n        }\n    }\n}\n\n/**\n * @param {Point} pos\n */\nfunction clonePos(pos) {\n    return {row: pos.row,column: pos.column};\n}\n\n/**\n * @param {Delta} d\n */\nfunction cloneDelta(d) {\n    return {\n        start: clonePos(d.start),\n        end: clonePos(d.end),\n        action: d.action,\n        lines: d.lines.slice()\n    };\n}\nfunction stringifyDelta(d) {\n    d = d || this;\n    if (Array.isArray(d)) {\n        return d.map(stringifyDelta).join(\"\\n\");\n    }\n    var type = \"\";\n    if (d.action) {\n        type = d.action == \"insert\" ? \"+\" : \"-\";\n        type += \"[\" + d.lines + \"]\";\n    } else if (d.value) {\n        if (Array.isArray(d.value)) {\n            type = d.value.map(stringifyRange).join(\"\\n\");\n        } else {\n            type = stringifyRange(d.value);\n        }\n    }\n    if (d.start) {\n        type += stringifyRange(d);\n    }\n    if (d.id || d.rev) {\n        type += \"\\t(\" + (d.id || d.rev) + \")\";\n    }\n    return type;\n}\n\n/**\n * @param {Range} r\n * @return {string}\n */\nfunction stringifyRange(r) {\n    return r.start.row + \":\" + r.start.column \n        + \"=>\" + r.end.row + \":\" + r.end.column;\n}\n/*\n * i i  d1  d2\n *      |/  |/  d2.s >= d1.e shift(d2, d1, -1)\n *              d2.s <= d1.s shift(d1, d2, +1)\n *       d1.s < d2.s < d1.e // can split\n * \n * i r  d1  d2\n *      |/  |\\  d2.s >= d1.e shift(d2, d1, -1)\n *              d2.e <= d1.s shift(d1, d2, -1)\n *       else // can't swap\n * \n * r i  d1  d2\n *      |\\  |/  d2.s >= d1.s shift(d2, d1, +1)\n *              d2.s <= d1.s shift(d1, d2, +1)\n *       // no else\n * \n * r r  d1  d2\n *      |\\  |\\  d2.s >= d1.s shift(d2, d1, +1)\n *              d2.e <= d1.s shift(d1, d2, -1)\n *       d2.s < d1.s < d2.e // can split\n */\n\n/**\n * @param {Delta} d1\n * @param {Delta} d2\n */\nfunction swap(d1, d2) {\n    var i1 = d1.action == \"insert\";\n    var i2 = d2.action == \"insert\";\n    \n    if (i1 && i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        } else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        } else {\n            return null;\n        }\n    } else if (i1 && !i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        } else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        } else {\n            return null;\n        }\n    } else if (!i1 && i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        } else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        } else {\n            return null;\n        }\n    } else if (!i1 && !i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        } else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        } else {\n            return null;\n        }\n    }\n    return [d2, d1];\n}\nfunction swapGroups(ds1, ds2) {\n    for (var i = ds1.length; i--; ) {\n        for (var j = 0; j < ds2.length; j++) {\n            if (!swap(ds1[i], ds2[j])) {\n                // rollback, we have to undo ds2 first\n                while (i < ds1.length) {\n                    while (j--) {\n                        swap(ds2[j], ds1[i]);\n                    }\n                    j = ds2.length;\n                    i++;\n                }                \n                return [ds1, ds2];\n            }\n        }\n    }\n    ds1.selectionBefore = ds2.selectionBefore = \n    ds1.selectionAfter = ds2.selectionAfter = null;\n    return [ds2, ds1];\n}\n\n/*\n      d2          xform(d1, c1) = [d2, c2]\n    o<---o        xform(c1, d1) = [c2, d2]\n c2 |    | d1     \n    o<---o\n      c1\n*/\n/**\n * \n * @param {Delta} d1\n * @param {Delta} c1\n */\nfunction xform(d1, c1) {\n    var i1 = d1.action == \"insert\";\n    var i2 = c1.action == \"insert\";\n    \n    if (i1 && i2) {\n        if (cmp(d1.start, c1.start) < 0) {\n            shift(c1, d1, 1);\n        } else {\n            shift(d1, c1, 1);\n        }\n    } else if (i1 && !i2) {\n        if (cmp(d1.start, c1.end) >= 0) {\n            shift(d1, c1, -1);\n        } else if (cmp(d1.start, c1.start) <= 0) {\n            shift(c1, d1, +1);\n        } else {\n            shift(d1, Range.fromPoints(c1.start, d1.start), -1);\n            shift(c1, d1, +1);\n        }\n    } else if (!i1 && i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        } else if (cmp(c1.start, d1.start) <= 0) {\n            shift(d1, c1, +1);\n        } else {\n            shift(c1, Range.fromPoints(d1.start, c1.start), -1);\n            shift(d1, c1, +1);\n        }\n    } else if (!i1 && !i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        } else if (cmp(c1.end, d1.start) <= 0) {\n            shift(d1, c1, -1);\n        } else {\n            var before, after;\n            if (cmp(d1.start, c1.start) < 0) {\n                before = d1;\n                d1 = splitDelta(d1, c1.start);\n            }\n            if (cmp(d1.end, c1.end) > 0) {\n                after = splitDelta(d1, c1.end);\n            }\n\n            shiftPos(c1.end, d1.start, d1.end, -1);\n            if (after && !before) {\n                d1.lines = after.lines;\n                d1.start = after.start;\n                d1.end = after.end;\n                after = d1;\n            }\n\n            return [c1, before, after].filter(Boolean);\n        }\n    }\n    return [c1, d1];\n}\n\n/**\n * \n * @param {IRange} d1\n * @param {IRange} d2\n * @param {number} dir\n */\nfunction shift(d1, d2, dir) {\n    shiftPos(d1.start, d2.start, d2.end, dir);\n    shiftPos(d1.end, d2.start, d2.end, dir);\n}\n\n/**\n * \n * @param {Point} pos\n * @param {Point} start\n * @param {Point} end\n * @param {number} dir\n */\nfunction shiftPos(pos, start, end, dir) {\n    if (pos.row == (dir == 1 ? start : end).row) {\n        pos.column += dir * (end.column - start.column);\n    }\n    pos.row += dir * (end.row - start.row);\n}\n\n/**\n * \n * @param {Delta} c\n * @param {Point} pos\n * @return {Delta}\n */\nfunction splitDelta(c, pos) {\n    var lines = c.lines;\n    var end = c.end;\n    c.end = clonePos(pos);    \n    var rowsBefore = c.end.row - c.start.row;\n    var otherLines = lines.splice(rowsBefore, lines.length);\n    \n    var col = rowsBefore ? pos.column : pos.column - c.start.column;\n    lines.push(otherLines[0].substring(0, col));\n    otherLines[0] = otherLines[0].substr(col)   ; \n    var rest = {\n        start: clonePos(pos),\n        end: end,\n        lines: otherLines,\n        action: c.action\n    };\n    return rest;\n}\n\n/**\n * @param {any[]} redoStack\n * @param {Delta} d\n */\nfunction moveDeltasByOne(redoStack, d) {\n    d = cloneDelta(d);\n    for (var j = redoStack.length; j--;) {\n        var deltaSet = redoStack[j];\n        for (var i = 0; i < deltaSet.length; i++) {\n            var x = deltaSet[i];\n            var xformed = xform(x, d);\n            d = xformed[0];\n            if (xformed.length != 2) {\n                if (xformed[2]) {\n                    deltaSet.splice(i + 1, 1, xformed[1], xformed[2]);\n                    i++;\n                } else if (!xformed[1]) {\n                    deltaSet.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        if (!deltaSet.length) {\n            redoStack.splice(j, 1); \n        }\n    }\n    return redoStack;\n}\n\nfunction rebaseRedoStack(redoStack, deltaSets) {\n    for (var i = 0; i < deltaSets.length; i++) {\n        var deltas = deltaSets[i];\n        for (var j = 0; j < deltas.length; j++) {\n            moveDeltasByOne(redoStack, deltas[j]);\n        }\n    }\n}\nexports.UndoManager = UndoManager;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3VuZG9tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSxhQUFhLHNDQUFzQztBQUNuRCxhQUFhLHFDQUFxQztBQUNsRCxhQUFhLHFDQUFxQztBQUNsRCxhQUFhLHNDQUFzQztBQUNuRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFFBQVE7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHFDQUFxQztBQUNwRCxlQUFlLFNBQVM7QUFDeEIsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxJQUFJO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFNBQVM7QUFDeEIsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxJQUFJO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsSUFBSTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0VBQStFO0FBQy9FLGVBQWUsYUFBYTtBQUM1QixlQUFlLFNBQVMsY0FBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRixlQUFlLGFBQWE7QUFDNUIsZUFBZSxTQUFTLGNBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQSxzQkFBc0IsS0FBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsWUFBWSxrRkFBd0I7QUFDcEM7QUFDQTs7QUFFQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBLFlBQVk7QUFDWjs7QUFFQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixLQUFLO0FBQ2xDLHdCQUF3QixnQkFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxRQUFRO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLElBQUk7QUFDdkM7QUFDQSx3QkFBd0IscUJBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3VuZG9tYW5hZ2VyLmpzP2UxYmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2VkaXRfc2Vzc2lvblwiKS5FZGl0U2Vzc2lvbn0gRWRpdFNlc3Npb25cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkRlbHRhfSBEZWx0YVxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuUG9pbnR9IFBvaW50XG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5JUmFuZ2V9IElSYW5nZVxuICovXG5cbi8qKlxuICogVGhpcyBvYmplY3QgbWFpbnRhaW5zIHRoZSB1bmRvIHN0YWNrIGZvciBhbiBbW0VkaXRTZXNzaW9uIGBFZGl0U2Vzc2lvbmBdXS5cbiAqKi9cbmNsYXNzIFVuZG9NYW5hZ2VyIHtcbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGN1cnJlbnQgdW5kbyBzdGF0ZSBhbmQgY3JlYXRlcyBhIG5ldyBgVW5kb01hbmFnZXJgLlxuICAgICAqKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqQHR5cGUge2Jvb2xlYW59Ki9cbiAgICAgICAgdGhpcy4ka2VlcFJlZG9TdGFjaztcbiAgICAgICAgdGhpcy4kbWF4UmV2ID0gMDtcbiAgICAgICAgdGhpcy4kZnJvbVVuZG8gPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kdW5kb0RlcHRoID0gSW5maW5pdHk7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uXG4gICAgICovXG4gICAgYWRkU2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgICAgIHRoaXMuJHNlc3Npb24gPSBzZXNzaW9uO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhIG1lYW5zIGZvciBpbXBsZW1lbnRpbmcgeW91ciBvd24gdW5kbyBtYW5hZ2VyLiBgb3B0aW9uc2AgaGFzIG9uZSBwcm9wZXJ0eSwgYGFyZ3NgLCBhbiBbW0FycmF5IGBBcnJheWBdXSwgd2l0aCB0d28gZWxlbWVudHM6XG4gICAgICpcbiAgICAgKiAtIGBhcmdzWzBdYCBpcyBhbiBhcnJheSBvZiBkZWx0YXNcbiAgICAgKiAtIGBhcmdzWzFdYCBpcyB0aGUgZG9jdW1lbnQgdG8gYXNzb2NpYXRlIHdpdGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5EZWx0YX0gZGVsdGFcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFsbG93TWVyZ2VcbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBbc2Vzc2lvbl1cbiAgICAgKiovXG4gICAgYWRkKGRlbHRhLCBhbGxvd01lcmdlLCBzZXNzaW9uKSB7XG4gICAgICAgIGlmICh0aGlzLiRmcm9tVW5kbykgcmV0dXJuO1xuICAgICAgICBpZiAoZGVsdGEgPT0gdGhpcy4kbGFzdERlbHRhKSByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy4ka2VlcFJlZG9TdGFjaykgdGhpcy4kcmVkb1N0YWNrLmxlbmd0aCA9IDA7XG4gICAgICAgIGlmIChhbGxvd01lcmdlID09PSBmYWxzZSB8fCAhdGhpcy5sYXN0RGVsdGFzKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3REZWx0YXMgPSBbXTtcbiAgICAgICAgICAgIHZhciB1bmRvU3RhY2tMZW5ndGggPSB0aGlzLiR1bmRvU3RhY2subGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHVuZG9TdGFja0xlbmd0aCA+IHRoaXMuJHVuZG9EZXB0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiR1bmRvU3RhY2suc3BsaWNlKDAsIHVuZG9TdGFja0xlbmd0aCAtIHRoaXMuJHVuZG9EZXB0aCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kdW5kb1N0YWNrLnB1c2godGhpcy5sYXN0RGVsdGFzKTtcbiAgICAgICAgICAgIGRlbHRhLmlkID0gdGhpcy4kcmV2ID0gKyt0aGlzLiRtYXhSZXY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlbHRhLmFjdGlvbiA9PSBcInJlbW92ZVwiIHx8IGRlbHRhLmFjdGlvbiA9PSBcImluc2VydFwiKVxuICAgICAgICAgICAgdGhpcy4kbGFzdERlbHRhID0gZGVsdGE7XG4gICAgICAgIHRoaXMubGFzdERlbHRhcy5wdXNoKGRlbHRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2FueX0gc2VsZWN0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtyZXZdXG4gICAgICovXG4gICAgYWRkU2VsZWN0aW9uKHNlbGVjdGlvbiwgcmV2KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHZhbHVlOiBzZWxlY3Rpb24sXG4gICAgICAgICAgICByZXY6IHJldiB8fCB0aGlzLiRyZXZcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHN0YXJ0TmV3R3JvdXAoKSB7XG4gICAgICAgIHRoaXMubGFzdERlbHRhcyA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLiRyZXY7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RvXVxuICAgICAqL1xuICAgIG1hcmtJZ25vcmVkKGZyb20sIHRvKSB7XG4gICAgICAgIGlmICh0byA9PSBudWxsKSB0byA9IHRoaXMuJHJldiArIDE7XG4gICAgICAgIHZhciBzdGFjayA9IHRoaXMuJHVuZG9TdGFjaztcbiAgICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gc3RhY2tbaV1bMF07XG4gICAgICAgICAgICBpZiAoZGVsdGEuaWQgPD0gZnJvbSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChkZWx0YS5pZCA8IHRvKVxuICAgICAgICAgICAgICAgIGRlbHRhLmlnbm9yZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0RGVsdGFzID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmV2XG4gICAgICogQHBhcmFtIHtib29sZWFufSBbYWZ0ZXJdXG4gICAgICogQHJldHVybiB7eyB2YWx1ZTogc3RyaW5nLCByZXY6IG51bWJlciB9fVxuICAgICAqL1xuICAgIGdldFNlbGVjdGlvbihyZXYsIGFmdGVyKSB7XG4gICAgICAgIHZhciBzdGFjayA9IHRoaXMuc2VsZWN0aW9ucztcbiAgICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IHN0YWNrW2ldO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5yZXYgPCByZXYpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbiA9IHN0YWNrW2kgKyAxXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldFJldmlzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kcmV2O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt0b11cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkRlbHRhW119XG4gICAgICovXG4gICAgZ2V0RGVsdGFzKGZyb20sIHRvKSB7XG4gICAgICAgIGlmICh0byA9PSBudWxsKSB0byA9IHRoaXMuJHJldiArIDE7XG4gICAgICAgIHZhciBzdGFjayA9IHRoaXMuJHVuZG9TdGFjaztcbiAgICAgICAgdmFyIGVuZCA9IG51bGwsIHN0YXJ0ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gc3RhY2tbaV1bMF07XG4gICAgICAgICAgICBpZiAoZGVsdGEuaWQgPCB0byAmJiAhZW5kKVxuICAgICAgICAgICAgICAgIGVuZCA9IGkrMTtcbiAgICAgICAgICAgIGlmIChkZWx0YS5pZCA8PSBmcm9tKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhY2suc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RvXVxuICAgICAqL1xuICAgIGdldENoYW5nZWRSYW5nZXMoZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHRvID09IG51bGwpIHRvID0gdGhpcy4kcmV2ICsgMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt0b11cbiAgICAgKi9cbiAgICBnZXRDaGFuZ2VkTGluZXMoZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHRvID09IG51bGwpIHRvID0gdGhpcy4kcmV2ICsgMTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogW1BlcmZvcm0gYW4gdW5kbyBvcGVyYXRpb24gb24gdGhlIGRvY3VtZW50LCByZXZlcnRpbmcgdGhlIGxhc3QgY2hhbmdlLl17OiAjVW5kb01hbmFnZXIudW5kb31cbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZG9udFNlbGVjdF0gezpkb250U2VsZWN0fVxuICAgICAqKi9cbiAgICB1bmRvKHNlc3Npb24sIGRvbnRTZWxlY3QpIHtcbiAgICAgICAgdGhpcy5sYXN0RGVsdGFzID0gbnVsbDtcbiAgICAgICAgdmFyIHN0YWNrID0gdGhpcy4kdW5kb1N0YWNrO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFyZWFycmFuZ2VVbmRvU3RhY2soc3RhY2ssIHN0YWNrLmxlbmd0aCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBpZiAoIXNlc3Npb24pXG4gICAgICAgICAgICBzZXNzaW9uID0gdGhpcy4kc2Vzc2lvbjtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLiRyZWRvU3RhY2tCYXNlUmV2ICE9PSB0aGlzLiRyZXYgJiYgdGhpcy4kcmVkb1N0YWNrLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuJHJlZG9TdGFjayA9IFtdO1xuICAgICAgICBcbiAgICAgICAgdGhpcy4kZnJvbVVuZG8gPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgdmFyIGRlbHRhU2V0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIHZhciB1bmRvU2VsZWN0aW9uUmFuZ2UgPSBudWxsO1xuICAgICAgICBpZiAoZGVsdGFTZXQpIHtcbiAgICAgICAgICAgIHVuZG9TZWxlY3Rpb25SYW5nZSA9IHNlc3Npb24udW5kb0NoYW5nZXMoZGVsdGFTZXQsIGRvbnRTZWxlY3QpO1xuICAgICAgICAgICAgdGhpcy4kcmVkb1N0YWNrLnB1c2goZGVsdGFTZXQpO1xuICAgICAgICAgICAgdGhpcy4kc3luY1JldigpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLiRmcm9tVW5kbyA9IGZhbHNlO1xuXG4gICAgICAgIHJldHVybiB1bmRvU2VsZWN0aW9uUmFuZ2U7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFtQZXJmb3JtIGEgcmVkbyBvcGVyYXRpb24gb24gdGhlIGRvY3VtZW50LCByZWltcGxlbWVudGluZyB0aGUgbGFzdCBjaGFuZ2UuXXs6ICNVbmRvTWFuYWdlci5yZWRvfVxuICAgICAqIEBwYXJhbSB7RWRpdFNlc3Npb259IHNlc3Npb25cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtkb250U2VsZWN0XSB7OmRvbnRTZWxlY3R9XG4gICAgICpcbiAgICAgKiovXG4gICAgcmVkbyhzZXNzaW9uLCBkb250U2VsZWN0KSB7XG4gICAgICAgIHRoaXMubGFzdERlbHRhcyA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXNlc3Npb24pXG4gICAgICAgICAgICBzZXNzaW9uID0gdGhpcy4kc2Vzc2lvbjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuJGZyb21VbmRvID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuJHJlZG9TdGFja0Jhc2VSZXYgIT0gdGhpcy4kcmV2KSB7XG4gICAgICAgICAgICB2YXIgZGlmZiA9IHRoaXMuZ2V0RGVsdGFzKHRoaXMuJHJlZG9TdGFja0Jhc2VSZXYsIHRoaXMuJHJldiArIDEpO1xuICAgICAgICAgICAgcmViYXNlUmVkb1N0YWNrKHRoaXMuJHJlZG9TdGFjaywgZGlmZik7XG4gICAgICAgICAgICB0aGlzLiRyZWRvU3RhY2tCYXNlUmV2ID0gdGhpcy4kcmV2O1xuICAgICAgICAgICAgdGhpcy4kcmVkb1N0YWNrLmZvckVhY2goZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHhbMF0uaWQgPSArK3RoaXMuJG1heFJldjtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWx0YVNldCA9IHRoaXMuJHJlZG9TdGFjay5wb3AoKTtcbiAgICAgICAgdmFyIHJlZG9TZWxlY3Rpb25SYW5nZSA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGVsdGFTZXQpIHtcbiAgICAgICAgICAgIHJlZG9TZWxlY3Rpb25SYW5nZSA9IHNlc3Npb24ucmVkb0NoYW5nZXMoZGVsdGFTZXQsIGRvbnRTZWxlY3QpO1xuICAgICAgICAgICAgdGhpcy4kdW5kb1N0YWNrLnB1c2goZGVsdGFTZXQpO1xuICAgICAgICAgICAgdGhpcy4kc3luY1JldigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGZyb21VbmRvID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVkb1NlbGVjdGlvblJhbmdlO1xuICAgIH1cbiAgICBcbiAgICAkc3luY1JldigpIHtcbiAgICAgICAgdmFyIHN0YWNrID0gdGhpcy4kdW5kb1N0YWNrO1xuICAgICAgICB2YXIgbmV4dERlbHRhID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHZhciBpZCA9IG5leHREZWx0YSAmJiBuZXh0RGVsdGFbMF0uaWQgfHwgMDtcbiAgICAgICAgdGhpcy4kcmVkb1N0YWNrQmFzZVJldiA9IGlkO1xuICAgICAgICB0aGlzLiRyZXYgPSBpZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgc3RhY2sgb2YgdW5kbyBhbmQgcmVkbyByZWRvIG9wZXJhdGlvbnMuXG4gICAgICoqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmxhc3REZWx0YXMgPSBudWxsO1xuICAgICAgICB0aGlzLiRsYXN0RGVsdGEgPSBudWxsO1xuICAgICAgICB0aGlzLiR1bmRvU3RhY2sgPSBbXTtcbiAgICAgICAgdGhpcy4kcmVkb1N0YWNrID0gW107XG4gICAgICAgIHRoaXMuJHJldiA9IDA7XG4gICAgICAgIHRoaXMubWFyayA9IDA7XG4gICAgICAgIHRoaXMuJHJlZG9TdGFja0Jhc2VSZXYgPSB0aGlzLiRyZXY7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9ucyA9IFtdO1xuICAgIH1cblxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZXJlIGFyZSB1bmRvIG9wZXJhdGlvbnMgbGVmdCB0byBwZXJmb3JtLlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBjYW5VbmRvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdW5kb1N0YWNrLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlcmUgYXJlIHJlZG8gb3BlcmF0aW9ucyBsZWZ0IHRvIHBlcmZvcm0uXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICoqL1xuICAgIGNhblJlZG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRyZWRvU3RhY2subGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGUgY3VycmVudCBzdGF0dXMgY2xlYW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3Jldl1cbiAgICAgKi9cbiAgICBib29rbWFyayhyZXYpIHtcbiAgICAgICAgaWYgKHJldiA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXYgPSB0aGlzLiRyZXY7XG4gICAgICAgIHRoaXMubWFyayA9IHJldjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGlmIHRoZSBjdXJyZW50IHN0YXR1cyBpcyBjbGVhblxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc0F0Qm9va21hcmsoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRyZXYgPT09IHRoaXMubWFyaztcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBvYmplY3Qgd2hpY2ggY2FuIGJlIHNhZmVseSBzdHJpbmdpZmllZCBpbnRvIEpTT05cbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fVxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICRyZWRvU3RhY2s6IHRoaXMuJHJlZG9TdGFjayxcbiAgICAgICAgICAgICR1bmRvU3RhY2s6IHRoaXMuJHVuZG9TdGFja1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIE5PVEU6IFRoZSBhYm92ZSBhbmQgYmVsb3cgZnVuY3Rpb24gcmVxdWlyZSB5b3UgdG8gSlNPTi5zdHJpbmdpZnkgYW5kIEpTT04ucGFyc2UgZXh0ZXJuYWxseS5cbiAgICBcbiAgICAvKipcbiAgICAgKiBUYWtlcyBpbiBhbiBvYmplY3Qgd2hpY2ggd2FzIHJldHVybmVkIGZyb20gdGhlIHRvSlNPTiBtZXRob2QgYWJvdmUsXG4gICAgICogYW5kIHJlc2V0cyB0aGUgY3VycmVudCB1bmRvTWFuYWdlciBpbnN0YW5jZSB0byB1c2UgdGhlIHByZXZpb3VzbHkgZXhwb3J0ZWRcbiAgICAgKiBpbnN0YW5jZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0ganNvbiBcbiAgICAgKi9cbiAgICBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgdGhpcy4kdW5kb1N0YWNrID0ganNvbi4kdW5kb1N0YWNrO1xuICAgICAgICB0aGlzLiRyZWRvU3RhY2sgPSBqc29uLiRyZWRvU3RhY2s7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0RlbHRhfSBkZWx0YVxuICAgICAqL1xuICAgICRwcmV0dHlQcmludChkZWx0YSkge1xuICAgICAgICBpZiAoZGVsdGEpIHJldHVybiBzdHJpbmdpZnlEZWx0YShkZWx0YSk7XG4gICAgICAgIHJldHVybiBzdHJpbmdpZnlEZWx0YSh0aGlzLiR1bmRvU3RhY2spICsgXCJcXG4tLS1cXG5cIiArIHN0cmluZ2lmeURlbHRhKHRoaXMuJHJlZG9TdGFjayk7XG4gICAgfVxufVxuXG5cblVuZG9NYW5hZ2VyLnByb3RvdHlwZS5oYXNVbmRvID0gVW5kb01hbmFnZXIucHJvdG90eXBlLmNhblVuZG87XG5VbmRvTWFuYWdlci5wcm90b3R5cGUuaGFzUmVkbyA9IFVuZG9NYW5hZ2VyLnByb3RvdHlwZS5jYW5SZWRvO1xuVW5kb01hbmFnZXIucHJvdG90eXBlLmlzQ2xlYW4gPSBVbmRvTWFuYWdlci5wcm90b3R5cGUuaXNBdEJvb2ttYXJrO1xuVW5kb01hbmFnZXIucHJvdG90eXBlLm1hcmtDbGVhbiA9IFVuZG9NYW5hZ2VyLnByb3RvdHlwZS5ib29rbWFyaztcblxuLyoqXG4gKiBAcGFyYW0ge2FueVtdfSBzdGFja1xuICogQHBhcmFtIHtudW1iZXJ9IHBvc1xuICovXG5mdW5jdGlvbiByZWFycmFuZ2VVbmRvU3RhY2soc3RhY2ssIHBvcykge1xuICAgIGZvciAodmFyIGkgPSBwb3M7IGktLTsgKSB7XG4gICAgICAgIHZhciBkZWx0YVNldCA9IHN0YWNrW2ldO1xuICAgICAgICBpZiAoZGVsdGFTZXQgJiYgIWRlbHRhU2V0WzBdLmlnbm9yZSkge1xuICAgICAgICAgICAgd2hpbGUoaSA8IHBvcyAtIDEpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3dhcHBlZCA9IHN3YXBHcm91cHMoc3RhY2tbaV0sIHN0YWNrW2kgKyAxXSk7XG4gICAgICAgICAgICAgICAgc3RhY2tbaV0gPSBzd2FwcGVkWzBdO1xuICAgICAgICAgICAgICAgIHN0YWNrW2kgKyAxXSA9IHN3YXBwZWRbMV07XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciBSYW5nZSA9IHJlcXVpcmUoXCIuL3JhbmdlXCIpLlJhbmdlO1xudmFyIGNtcCA9IFJhbmdlLmNvbXBhcmVQb2ludHM7XG52YXIgY29tcGFyZVBvaW50cyA9IFJhbmdlLmNvbXBhcmVQb2ludHM7XG5cbi8qKlxuICogQHBhcmFtIHtEZWx0YX0gZGVsdGFcbiAqL1xuZnVuY3Rpb24gJHVwZGF0ZU1hcmtlcnMoZGVsdGEpIHtcbiAgICB2YXIgaXNJbnNlcnQgPSBkZWx0YS5hY3Rpb24gPT0gXCJpbnNlcnRcIjtcbiAgICB2YXIgc3RhcnQgPSBkZWx0YS5zdGFydDtcbiAgICB2YXIgZW5kID0gZGVsdGEuZW5kO1xuICAgIHZhciByb3dTaGlmdCA9IChlbmQucm93IC0gc3RhcnQucm93KSAqIChpc0luc2VydCA/IDEgOiAtMSk7XG4gICAgdmFyIGNvbFNoaWZ0ID0gKGVuZC5jb2x1bW4gLSBzdGFydC5jb2x1bW4pICogKGlzSW5zZXJ0ID8gMSA6IC0xKTtcbiAgICBpZiAoaXNJbnNlcnQpIGVuZCA9IHN0YXJ0O1xuXG4gICAgZm9yICh2YXIgaSBpbiB0aGlzLm1hcmtzKSB7XG4gICAgICAgIHZhciBwb2ludCA9IHRoaXMubWFya3NbaV07XG4gICAgICAgIHZhciBjbXAgPSBjb21wYXJlUG9pbnRzKHBvaW50LCBzdGFydCk7XG4gICAgICAgIGlmIChjbXAgPCAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTsgLy8gZGVsdGEgc3RhcnRzIGFmdGVyIHRoZSByYW5nZVxuICAgICAgICB9XG4gICAgICAgIGlmIChjbXAgPT09IDApIHtcbiAgICAgICAgICAgIGlmIChpc0luc2VydCkge1xuICAgICAgICAgICAgICAgIGlmIChwb2ludC5iaWFzID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY21wID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50LmJpYXMgPT0gLTE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY21wMiA9IGlzSW5zZXJ0ID8gY21wIDogY29tcGFyZVBvaW50cyhwb2ludCwgZW5kKTtcbiAgICAgICAgaWYgKGNtcDIgPiAwKSB7XG4gICAgICAgICAgICBwb2ludC5yb3cgKz0gcm93U2hpZnQ7XG4gICAgICAgICAgICBwb2ludC5jb2x1bW4gKz0gcG9pbnQucm93ID09IGVuZC5yb3cgPyBjb2xTaGlmdCA6IDA7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzSW5zZXJ0ICYmIGNtcDIgPD0gMCkge1xuICAgICAgICAgICAgcG9pbnQucm93ID0gc3RhcnQucm93O1xuICAgICAgICAgICAgcG9pbnQuY29sdW1uID0gc3RhcnQuY29sdW1uO1xuICAgICAgICAgICAgaWYgKGNtcDIgPT09IDApXG4gICAgICAgICAgICAgICAgcG9pbnQuYmlhcyA9IDE7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtQb2ludH0gcG9zXG4gKi9cbmZ1bmN0aW9uIGNsb25lUG9zKHBvcykge1xuICAgIHJldHVybiB7cm93OiBwb3Mucm93LGNvbHVtbjogcG9zLmNvbHVtbn07XG59XG5cbi8qKlxuICogQHBhcmFtIHtEZWx0YX0gZFxuICovXG5mdW5jdGlvbiBjbG9uZURlbHRhKGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdGFydDogY2xvbmVQb3MoZC5zdGFydCksXG4gICAgICAgIGVuZDogY2xvbmVQb3MoZC5lbmQpLFxuICAgICAgICBhY3Rpb246IGQuYWN0aW9uLFxuICAgICAgICBsaW5lczogZC5saW5lcy5zbGljZSgpXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeURlbHRhKGQpIHtcbiAgICBkID0gZCB8fCB0aGlzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGQpKSB7XG4gICAgICAgIHJldHVybiBkLm1hcChzdHJpbmdpZnlEZWx0YSkuam9pbihcIlxcblwiKTtcbiAgICB9XG4gICAgdmFyIHR5cGUgPSBcIlwiO1xuICAgIGlmIChkLmFjdGlvbikge1xuICAgICAgICB0eXBlID0gZC5hY3Rpb24gPT0gXCJpbnNlcnRcIiA/IFwiK1wiIDogXCItXCI7XG4gICAgICAgIHR5cGUgKz0gXCJbXCIgKyBkLmxpbmVzICsgXCJdXCI7XG4gICAgfSBlbHNlIGlmIChkLnZhbHVlKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGQudmFsdWUpKSB7XG4gICAgICAgICAgICB0eXBlID0gZC52YWx1ZS5tYXAoc3RyaW5naWZ5UmFuZ2UpLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gc3RyaW5naWZ5UmFuZ2UoZC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGQuc3RhcnQpIHtcbiAgICAgICAgdHlwZSArPSBzdHJpbmdpZnlSYW5nZShkKTtcbiAgICB9XG4gICAgaWYgKGQuaWQgfHwgZC5yZXYpIHtcbiAgICAgICAgdHlwZSArPSBcIlxcdChcIiArIChkLmlkIHx8IGQucmV2KSArIFwiKVwiO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JhbmdlfSByXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeVJhbmdlKHIpIHtcbiAgICByZXR1cm4gci5zdGFydC5yb3cgKyBcIjpcIiArIHIuc3RhcnQuY29sdW1uIFxuICAgICAgICArIFwiPT5cIiArIHIuZW5kLnJvdyArIFwiOlwiICsgci5lbmQuY29sdW1uO1xufVxuLypcbiAqIGkgaSAgZDEgIGQyXG4gKiAgICAgIHwvICB8LyAgZDIucyA+PSBkMS5lIHNoaWZ0KGQyLCBkMSwgLTEpXG4gKiAgICAgICAgICAgICAgZDIucyA8PSBkMS5zIHNoaWZ0KGQxLCBkMiwgKzEpXG4gKiAgICAgICBkMS5zIDwgZDIucyA8IGQxLmUgLy8gY2FuIHNwbGl0XG4gKiBcbiAqIGkgciAgZDEgIGQyXG4gKiAgICAgIHwvICB8XFwgIGQyLnMgPj0gZDEuZSBzaGlmdChkMiwgZDEsIC0xKVxuICogICAgICAgICAgICAgIGQyLmUgPD0gZDEucyBzaGlmdChkMSwgZDIsIC0xKVxuICogICAgICAgZWxzZSAvLyBjYW4ndCBzd2FwXG4gKiBcbiAqIHIgaSAgZDEgIGQyXG4gKiAgICAgIHxcXCAgfC8gIGQyLnMgPj0gZDEucyBzaGlmdChkMiwgZDEsICsxKVxuICogICAgICAgICAgICAgIGQyLnMgPD0gZDEucyBzaGlmdChkMSwgZDIsICsxKVxuICogICAgICAgLy8gbm8gZWxzZVxuICogXG4gKiByIHIgIGQxICBkMlxuICogICAgICB8XFwgIHxcXCAgZDIucyA+PSBkMS5zIHNoaWZ0KGQyLCBkMSwgKzEpXG4gKiAgICAgICAgICAgICAgZDIuZSA8PSBkMS5zIHNoaWZ0KGQxLCBkMiwgLTEpXG4gKiAgICAgICBkMi5zIDwgZDEucyA8IGQyLmUgLy8gY2FuIHNwbGl0XG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0RlbHRhfSBkMVxuICogQHBhcmFtIHtEZWx0YX0gZDJcbiAqL1xuZnVuY3Rpb24gc3dhcChkMSwgZDIpIHtcbiAgICB2YXIgaTEgPSBkMS5hY3Rpb24gPT0gXCJpbnNlcnRcIjtcbiAgICB2YXIgaTIgPSBkMi5hY3Rpb24gPT0gXCJpbnNlcnRcIjtcbiAgICBcbiAgICBpZiAoaTEgJiYgaTIpIHtcbiAgICAgICAgaWYgKGNtcChkMi5zdGFydCwgZDEuZW5kKSA+PSAwKSB7XG4gICAgICAgICAgICBzaGlmdChkMiwgZDEsIC0xKTtcbiAgICAgICAgfSBlbHNlIGlmIChjbXAoZDIuc3RhcnQsIGQxLnN0YXJ0KSA8PSAwKSB7XG4gICAgICAgICAgICBzaGlmdChkMSwgZDIsICsxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChpMSAmJiAhaTIpIHtcbiAgICAgICAgaWYgKGNtcChkMi5zdGFydCwgZDEuZW5kKSA+PSAwKSB7XG4gICAgICAgICAgICBzaGlmdChkMiwgZDEsIC0xKTtcbiAgICAgICAgfSBlbHNlIGlmIChjbXAoZDIuZW5kLCBkMS5zdGFydCkgPD0gMCkge1xuICAgICAgICAgICAgc2hpZnQoZDEsIGQyLCAtMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWkxICYmIGkyKSB7XG4gICAgICAgIGlmIChjbXAoZDIuc3RhcnQsIGQxLnN0YXJ0KSA+PSAwKSB7XG4gICAgICAgICAgICBzaGlmdChkMiwgZDEsICsxKTtcbiAgICAgICAgfSBlbHNlIGlmIChjbXAoZDIuc3RhcnQsIGQxLnN0YXJ0KSA8PSAwKSB7XG4gICAgICAgICAgICBzaGlmdChkMSwgZDIsICsxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICghaTEgJiYgIWkyKSB7XG4gICAgICAgIGlmIChjbXAoZDIuc3RhcnQsIGQxLnN0YXJ0KSA+PSAwKSB7XG4gICAgICAgICAgICBzaGlmdChkMiwgZDEsICsxKTtcbiAgICAgICAgfSBlbHNlIGlmIChjbXAoZDIuZW5kLCBkMS5zdGFydCkgPD0gMCkge1xuICAgICAgICAgICAgc2hpZnQoZDEsIGQyLCAtMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2QyLCBkMV07XG59XG5mdW5jdGlvbiBzd2FwR3JvdXBzKGRzMSwgZHMyKSB7XG4gICAgZm9yICh2YXIgaSA9IGRzMS5sZW5ndGg7IGktLTsgKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZHMyLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoIXN3YXAoZHMxW2ldLCBkczJbal0pKSB7XG4gICAgICAgICAgICAgICAgLy8gcm9sbGJhY2ssIHdlIGhhdmUgdG8gdW5kbyBkczIgZmlyc3RcbiAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGRzMS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dhcChkczJbal0sIGRzMVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaiA9IGRzMi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBbZHMxLCBkczJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRzMS5zZWxlY3Rpb25CZWZvcmUgPSBkczIuc2VsZWN0aW9uQmVmb3JlID0gXG4gICAgZHMxLnNlbGVjdGlvbkFmdGVyID0gZHMyLnNlbGVjdGlvbkFmdGVyID0gbnVsbDtcbiAgICByZXR1cm4gW2RzMiwgZHMxXTtcbn1cblxuLypcbiAgICAgIGQyICAgICAgICAgIHhmb3JtKGQxLCBjMSkgPSBbZDIsIGMyXVxuICAgIG88LS0tbyAgICAgICAgeGZvcm0oYzEsIGQxKSA9IFtjMiwgZDJdXG4gYzIgfCAgICB8IGQxICAgICBcbiAgICBvPC0tLW9cbiAgICAgIGMxXG4qL1xuLyoqXG4gKiBcbiAqIEBwYXJhbSB7RGVsdGF9IGQxXG4gKiBAcGFyYW0ge0RlbHRhfSBjMVxuICovXG5mdW5jdGlvbiB4Zm9ybShkMSwgYzEpIHtcbiAgICB2YXIgaTEgPSBkMS5hY3Rpb24gPT0gXCJpbnNlcnRcIjtcbiAgICB2YXIgaTIgPSBjMS5hY3Rpb24gPT0gXCJpbnNlcnRcIjtcbiAgICBcbiAgICBpZiAoaTEgJiYgaTIpIHtcbiAgICAgICAgaWYgKGNtcChkMS5zdGFydCwgYzEuc3RhcnQpIDwgMCkge1xuICAgICAgICAgICAgc2hpZnQoYzEsIGQxLCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNoaWZ0KGQxLCBjMSwgMSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGkxICYmICFpMikge1xuICAgICAgICBpZiAoY21wKGQxLnN0YXJ0LCBjMS5lbmQpID49IDApIHtcbiAgICAgICAgICAgIHNoaWZ0KGQxLCBjMSwgLTEpO1xuICAgICAgICB9IGVsc2UgaWYgKGNtcChkMS5zdGFydCwgYzEuc3RhcnQpIDw9IDApIHtcbiAgICAgICAgICAgIHNoaWZ0KGMxLCBkMSwgKzEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hpZnQoZDEsIFJhbmdlLmZyb21Qb2ludHMoYzEuc3RhcnQsIGQxLnN0YXJ0KSwgLTEpO1xuICAgICAgICAgICAgc2hpZnQoYzEsIGQxLCArMSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpMSAmJiBpMikge1xuICAgICAgICBpZiAoY21wKGMxLnN0YXJ0LCBkMS5lbmQpID49IDApIHtcbiAgICAgICAgICAgIHNoaWZ0KGMxLCBkMSwgLTEpO1xuICAgICAgICB9IGVsc2UgaWYgKGNtcChjMS5zdGFydCwgZDEuc3RhcnQpIDw9IDApIHtcbiAgICAgICAgICAgIHNoaWZ0KGQxLCBjMSwgKzEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hpZnQoYzEsIFJhbmdlLmZyb21Qb2ludHMoZDEuc3RhcnQsIGMxLnN0YXJ0KSwgLTEpO1xuICAgICAgICAgICAgc2hpZnQoZDEsIGMxLCArMSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpMSAmJiAhaTIpIHtcbiAgICAgICAgaWYgKGNtcChjMS5zdGFydCwgZDEuZW5kKSA+PSAwKSB7XG4gICAgICAgICAgICBzaGlmdChjMSwgZDEsIC0xKTtcbiAgICAgICAgfSBlbHNlIGlmIChjbXAoYzEuZW5kLCBkMS5zdGFydCkgPD0gMCkge1xuICAgICAgICAgICAgc2hpZnQoZDEsIGMxLCAtMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYmVmb3JlLCBhZnRlcjtcbiAgICAgICAgICAgIGlmIChjbXAoZDEuc3RhcnQsIGMxLnN0YXJ0KSA8IDApIHtcbiAgICAgICAgICAgICAgICBiZWZvcmUgPSBkMTtcbiAgICAgICAgICAgICAgICBkMSA9IHNwbGl0RGVsdGEoZDEsIGMxLnN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbXAoZDEuZW5kLCBjMS5lbmQpID4gMCkge1xuICAgICAgICAgICAgICAgIGFmdGVyID0gc3BsaXREZWx0YShkMSwgYzEuZW5kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2hpZnRQb3MoYzEuZW5kLCBkMS5zdGFydCwgZDEuZW5kLCAtMSk7XG4gICAgICAgICAgICBpZiAoYWZ0ZXIgJiYgIWJlZm9yZSkge1xuICAgICAgICAgICAgICAgIGQxLmxpbmVzID0gYWZ0ZXIubGluZXM7XG4gICAgICAgICAgICAgICAgZDEuc3RhcnQgPSBhZnRlci5zdGFydDtcbiAgICAgICAgICAgICAgICBkMS5lbmQgPSBhZnRlci5lbmQ7XG4gICAgICAgICAgICAgICAgYWZ0ZXIgPSBkMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFtjMSwgYmVmb3JlLCBhZnRlcl0uZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbYzEsIGQxXTtcbn1cblxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7SVJhbmdlfSBkMVxuICogQHBhcmFtIHtJUmFuZ2V9IGQyXG4gKiBAcGFyYW0ge251bWJlcn0gZGlyXG4gKi9cbmZ1bmN0aW9uIHNoaWZ0KGQxLCBkMiwgZGlyKSB7XG4gICAgc2hpZnRQb3MoZDEuc3RhcnQsIGQyLnN0YXJ0LCBkMi5lbmQsIGRpcik7XG4gICAgc2hpZnRQb3MoZDEuZW5kLCBkMi5zdGFydCwgZDIuZW5kLCBkaXIpO1xufVxuXG4vKipcbiAqIFxuICogQHBhcmFtIHtQb2ludH0gcG9zXG4gKiBAcGFyYW0ge1BvaW50fSBzdGFydFxuICogQHBhcmFtIHtQb2ludH0gZW5kXG4gKiBAcGFyYW0ge251bWJlcn0gZGlyXG4gKi9cbmZ1bmN0aW9uIHNoaWZ0UG9zKHBvcywgc3RhcnQsIGVuZCwgZGlyKSB7XG4gICAgaWYgKHBvcy5yb3cgPT0gKGRpciA9PSAxID8gc3RhcnQgOiBlbmQpLnJvdykge1xuICAgICAgICBwb3MuY29sdW1uICs9IGRpciAqIChlbmQuY29sdW1uIC0gc3RhcnQuY29sdW1uKTtcbiAgICB9XG4gICAgcG9zLnJvdyArPSBkaXIgKiAoZW5kLnJvdyAtIHN0YXJ0LnJvdyk7XG59XG5cbi8qKlxuICogXG4gKiBAcGFyYW0ge0RlbHRhfSBjXG4gKiBAcGFyYW0ge1BvaW50fSBwb3NcbiAqIEByZXR1cm4ge0RlbHRhfVxuICovXG5mdW5jdGlvbiBzcGxpdERlbHRhKGMsIHBvcykge1xuICAgIHZhciBsaW5lcyA9IGMubGluZXM7XG4gICAgdmFyIGVuZCA9IGMuZW5kO1xuICAgIGMuZW5kID0gY2xvbmVQb3MocG9zKTsgICAgXG4gICAgdmFyIHJvd3NCZWZvcmUgPSBjLmVuZC5yb3cgLSBjLnN0YXJ0LnJvdztcbiAgICB2YXIgb3RoZXJMaW5lcyA9IGxpbmVzLnNwbGljZShyb3dzQmVmb3JlLCBsaW5lcy5sZW5ndGgpO1xuICAgIFxuICAgIHZhciBjb2wgPSByb3dzQmVmb3JlID8gcG9zLmNvbHVtbiA6IHBvcy5jb2x1bW4gLSBjLnN0YXJ0LmNvbHVtbjtcbiAgICBsaW5lcy5wdXNoKG90aGVyTGluZXNbMF0uc3Vic3RyaW5nKDAsIGNvbCkpO1xuICAgIG90aGVyTGluZXNbMF0gPSBvdGhlckxpbmVzWzBdLnN1YnN0cihjb2wpICAgOyBcbiAgICB2YXIgcmVzdCA9IHtcbiAgICAgICAgc3RhcnQ6IGNsb25lUG9zKHBvcyksXG4gICAgICAgIGVuZDogZW5kLFxuICAgICAgICBsaW5lczogb3RoZXJMaW5lcyxcbiAgICAgICAgYWN0aW9uOiBjLmFjdGlvblxuICAgIH07XG4gICAgcmV0dXJuIHJlc3Q7XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnlbXX0gcmVkb1N0YWNrXG4gKiBAcGFyYW0ge0RlbHRhfSBkXG4gKi9cbmZ1bmN0aW9uIG1vdmVEZWx0YXNCeU9uZShyZWRvU3RhY2ssIGQpIHtcbiAgICBkID0gY2xvbmVEZWx0YShkKTtcbiAgICBmb3IgKHZhciBqID0gcmVkb1N0YWNrLmxlbmd0aDsgai0tOykge1xuICAgICAgICB2YXIgZGVsdGFTZXQgPSByZWRvU3RhY2tbal07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVsdGFTZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB4ID0gZGVsdGFTZXRbaV07XG4gICAgICAgICAgICB2YXIgeGZvcm1lZCA9IHhmb3JtKHgsIGQpO1xuICAgICAgICAgICAgZCA9IHhmb3JtZWRbMF07XG4gICAgICAgICAgICBpZiAoeGZvcm1lZC5sZW5ndGggIT0gMikge1xuICAgICAgICAgICAgICAgIGlmICh4Zm9ybWVkWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhU2V0LnNwbGljZShpICsgMSwgMSwgeGZvcm1lZFsxXSwgeGZvcm1lZFsyXSk7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF4Zm9ybWVkWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhU2V0LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlbHRhU2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcmVkb1N0YWNrLnNwbGljZShqLCAxKTsgXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlZG9TdGFjaztcbn1cblxuZnVuY3Rpb24gcmViYXNlUmVkb1N0YWNrKHJlZG9TdGFjaywgZGVsdGFTZXRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWx0YVNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGRlbHRhcyA9IGRlbHRhU2V0c1tpXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkZWx0YXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIG1vdmVEZWx0YXNCeU9uZShyZWRvU3RhY2ssIGRlbHRhc1tqXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLlVuZG9NYW5hZ2VyID0gVW5kb01hbmFnZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/undomanager.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/unicode.js":
/*!**********************************************!*\
  !*** ./node_modules/ace-code/src/unicode.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\n// generated by tool/unicode.js\nvar wordChars = [48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2];\n\nvar code = 0;\nvar str = [];\nfor (var i = 0; i < wordChars.length; i += 2) {\n    str.push(code += wordChars[i]);\n    if (wordChars[i + 1])\n        str.push(45, code += wordChars[i + 1]);\n}\n\nexports.wordChars = String.fromCharCode.apply(null, str);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3VuaWNvZGUuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2FjZS1jb2RlL3NyYy91bmljb2RlLmpzPzEwYzIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIGdlbmVyYXRlZCBieSB0b29sL3VuaWNvZGUuanNcbnZhciB3b3JkQ2hhcnMgPSBbNDgsOSw4LDI1LDUsMCwyLDI1LDQ4LDAsMTEsMCw1LDAsNiwyMiwyLDMwLDIsNDU3LDUsMTEsMTUsNCw4LDAsMiwwLDE4LDExNiwyLDEsMywzLDksMCwyLDIsMiwwLDIsMTksMiw4MiwyLDEzOCwyLDQsMywxNTUsMTIsMzcsMywwLDgsMzgsMTAsNDQsMiwwLDIsMSwyLDEsMiwwLDksMjYsNiwyLDMwLDEwLDcsNjEsMiw5LDUsMTAxLDIsNywzLDksMiwxOCwzLDAsMTcsNTgsMywxMDAsMTUsNTMsNSwwLDYsNDUsMjExLDU3LDMsMTgsMiw1LDMsMTEsMyw5LDIsMSw3LDYsMiwyLDIsNywzLDEsMywyMSwyLDYsMiwwLDQsMywzLDgsMywxLDMsMyw5LDAsNSwxLDIsNCwzLDExLDE2LDIsMiw1LDUsMSwzLDIxLDIsNiwyLDEsMiwxLDIsMSwzLDAsMiw0LDUsMSwzLDIsNCwwLDgsMywyLDAsOCwxNSwxMiwyLDIsOCwyLDIsMiwyMSwyLDYsMiwxLDIsNCwzLDksMiwyLDIsMiwzLDAsMTYsMywzLDksMTgsMiwyLDcsMywxLDMsMjEsMiw2LDIsMSwyLDQsMyw4LDMsMSwzLDIsOSwxLDUsMSwyLDQsMyw5LDIsMCwxNywxLDIsNSw0LDIsMiwzLDQsMSwyLDAsMiwxLDQsMSw0LDIsNCwxMSw1LDQsNCwyLDIsMywzLDAsNywwLDE1LDksMTgsMiwyLDcsMiwyLDIsMjIsMiw5LDIsNCw0LDcsMiwyLDIsMyw4LDEsMiwxLDcsMywzLDksMTksMSwyLDcsMiwyLDIsMjIsMiw5LDIsNCwzLDgsMiwyLDIsMyw4LDEsOCwwLDIsMywzLDksMTksMSwyLDcsMiwyLDIsMjIsMiwxNSw0LDcsMiwyLDIsMywxMCwwLDksMywzLDksMTEsNSwzLDEsMiwxNyw0LDIzLDIsOCwyLDAsMyw2LDQsMCw1LDUsMiwwLDIsNywxOSwxLDE0LDU3LDYsMTQsMiw5LDQwLDEsMiwwLDMsMSwyLDAsMywwLDcsMywyLDYsMiwyLDIsMCwyLDAsMywxLDIsMTIsMiwyLDMsNCwyLDAsMiw1LDMsOSwzLDEsMzUsMCwyNCwxLDcsOSwxMiwwLDIsMCwyLDAsNSw5LDIsMzUsNSwxOSwyLDUsNSw3LDIsMzUsMTAsMCw1OCw3Myw3LDc3LDMsMzcsMTEsNDIsMiwwLDQsMzI4LDIsMywzLDYsMiwwLDIsMywzLDQwLDIsMywzLDMyLDIsMywzLDYsMiwwLDIsMywzLDE0LDIsNTYsMiwzLDMsNjYsNSwwLDMzLDE1LDE3LDg0LDEzLDYxOSwzLDE2LDIsMjUsNiw3NCwyMiwxMiwyLDYsMTIsMjAsMTIsMTksMTMsMTIsMiwyLDIsMSwxMyw1MSwzLDI5LDQsMCw1LDEsMyw5LDM0LDIsMyw5LDcsODcsOSw0Miw2LDY5LDExLDI4LDQsMTEsNSwxMSwxMSwzOSwzLDQsMTIsNDMsNSwyNSw3LDEwLDM4LDI3LDUsNjIsMiwyOCwzLDEwLDcsOSwxNCwwLDg5LDc1LDUsOSwxOCw4LDEzLDQyLDQsMTEsNzEsNTUsOSw5LDQsNDgsODMsMiwyLDMwLDE0LDIzMCwyMywyODAsMyw1LDMsMzcsMyw1LDMsNywyLDAsMiwwLDIsMCwyLDMwLDMsNTIsMiw2LDIsMCw0LDIsMiw2LDQsMywzLDUsNSwxMiw2LDIsMiw2LDY3LDEsMjAsMCwyOSwwLDE0LDAsMTcsNCw2MCwxMiw1LDAsNCwxMSwxOCwwLDUsMCwzLDksMiwwLDQsNCw3LDAsMiwwLDIsMCwyLDMsMiwxMCwzLDMsNiw0LDUsMCw1MywxLDI2ODQsNDYsMiw0NiwyLDEzMiw3LDYsMTUsMzcsMTEsNTMsMTAsMCwxNywyMiwxMCw2LDIsNiwyLDYsMiw2LDIsNiwyLDYsMiw2LDIsNiwyLDMxLDQ4LDAsNDcwLDEsMzYsNSwyLDQsNiwxLDUsODUsMywxLDMsMiwyLDg5LDIsMyw2LDQwLDQsOTMsMTgsMjMsNTcsMTUsNTEzLDY1ODEsNzUsMjA5MzksNTMsMTE2NCw2OCw0NSwzLDI2OCw0LDI3LDIxLDMxLDMsMTMsMTMsMSwyLDI0LDksNjksMTEsMSwzOCw4LDMsMTAyLDMsMSwxMTEsNDQsMjUsNTEsMTMsNjgsMTIsOSw3LDIzLDQsMCw1LDQ1LDMsMzUsMTMsMjgsNCw2NCwxNSwxMCwzOSw1NCwxMCwxMywzLDksNywyMiw0LDEsNSw2NiwyNSwyLDIyNyw0MiwyLDEsMyw5LDcsMTExNzEsMTMsMjIsNSw0OCw4NDUzLDMwMSwzLDYxLDMsMTA1LDM5LDYsMTMsNCw2LDExLDIsMTIsMiw0LDIsMCwyLDEsMiwxLDIsMTA3LDM0LDM2MiwxOSw2MywzLDUzLDQxLDExLDUsMTUsMTcsNiwxMywxLDI1LDIsMzMsNCwyLDEzNCwyMCw5LDgsMjUsNSwwLDIsMjUsMTIsODgsNCw1LDMsNSwzLDUsMywyXTtcblxudmFyIGNvZGUgPSAwO1xudmFyIHN0ciA9IFtdO1xuZm9yICh2YXIgaSA9IDA7IGkgPCB3b3JkQ2hhcnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICBzdHIucHVzaChjb2RlICs9IHdvcmRDaGFyc1tpXSk7XG4gICAgaWYgKHdvcmRDaGFyc1tpICsgMV0pXG4gICAgICAgIHN0ci5wdXNoKDQ1LCBjb2RlICs9IHdvcmRDaGFyc1tpICsgMV0pO1xufVxuXG5leHBvcnRzLndvcmRDaGFycyA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgc3RyKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/unicode.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/virtual_renderer.js":
/*!*******************************************************!*\
  !*** ./node_modules/ace-code/src/virtual_renderer.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n/**\n * @typedef {import(\"./edit_session\").EditSession} EditSession\n * @typedef {import(\"../ace-internal\").Ace.Point} Point\n * @typedef {import(\"../ace-internal\").Ace.Theme} Theme\n */\nvar oop = __webpack_require__(/*! ./lib/oop */ \"./node_modules/ace-code/src/lib/oop.js\");\nvar dom = __webpack_require__(/*! ./lib/dom */ \"./node_modules/ace-code/src/lib/dom.js\");\nvar lang = __webpack_require__(/*! ./lib/lang */ \"./node_modules/ace-code/src/lib/lang.js\");\nvar config = __webpack_require__(/*! ./config */ \"./node_modules/ace-code/src/config.js\");\nvar GutterLayer = (__webpack_require__(/*! ./layer/gutter */ \"./node_modules/ace-code/src/layer/gutter.js\").Gutter);\nvar MarkerLayer = (__webpack_require__(/*! ./layer/marker */ \"./node_modules/ace-code/src/layer/marker.js\").Marker);\nvar TextLayer = (__webpack_require__(/*! ./layer/text */ \"./node_modules/ace-code/src/layer/text.js\").Text);\nvar CursorLayer = (__webpack_require__(/*! ./layer/cursor */ \"./node_modules/ace-code/src/layer/cursor.js\").Cursor);\nvar HScrollBar = (__webpack_require__(/*! ./scrollbar */ \"./node_modules/ace-code/src/scrollbar.js\").HScrollBar);\nvar VScrollBar = (__webpack_require__(/*! ./scrollbar */ \"./node_modules/ace-code/src/scrollbar.js\").VScrollBar);\nvar HScrollBarCustom = (__webpack_require__(/*! ./scrollbar_custom */ \"./node_modules/ace-code/src/scrollbar_custom.js\").HScrollBar);\nvar VScrollBarCustom = (__webpack_require__(/*! ./scrollbar_custom */ \"./node_modules/ace-code/src/scrollbar_custom.js\").VScrollBar);\nvar RenderLoop = (__webpack_require__(/*! ./renderloop */ \"./node_modules/ace-code/src/renderloop.js\").RenderLoop);\nvar FontMetrics = (__webpack_require__(/*! ./layer/font_metrics */ \"./node_modules/ace-code/src/layer/font_metrics.js\").FontMetrics);\nvar EventEmitter = (__webpack_require__(/*! ./lib/event_emitter */ \"./node_modules/ace-code/src/lib/event_emitter.js\").EventEmitter);\nvar editorCss = __webpack_require__(/*! ./css/editor-css */ \"./node_modules/ace-code/src/css/editor-css.js\");\nvar Decorator = (__webpack_require__(/*! ./layer/decorators */ \"./node_modules/ace-code/src/layer/decorators.js\").Decorator);\n\nvar useragent = __webpack_require__(/*! ./lib/useragent */ \"./node_modules/ace-code/src/lib/useragent.js\");\nconst isTextToken = (__webpack_require__(/*! ./layer/text_util */ \"./node_modules/ace-code/src/layer/text_util.js\").isTextToken);\n\ndom.importCssString(editorCss, \"ace_editor.css\", false);\n\n/**\n * The class that is responsible for drawing everything you see on the screen!\n * @related editor.renderer\n **/\nclass VirtualRenderer {\n    /**\n     * Constructs a new `VirtualRenderer` within the `container` specified, applying the given `theme`.\n     * @param {HTMLElement | null} [container] The root element of the editor\n     * @param {String} [theme] The starting theme\n\n     **/\n    constructor(container, theme) {\n        var _self = this;\n        this.container = container || dom.createElement(\"div\");\n\n        dom.addCssClass(this.container, \"ace_editor\");\n        if (dom.HI_DPI) dom.addCssClass(this.container, \"ace_hidpi\");\n\n        this.setTheme(theme);\n        if (config.get(\"useStrictCSP\") == null)\n            config.set(\"useStrictCSP\", false);\n\n        this.$gutter = dom.createElement(\"div\");\n        this.$gutter.className = \"ace_gutter\";\n        this.container.appendChild(this.$gutter);\n        this.$gutter.setAttribute(\"aria-hidden\", \"true\");\n        /**@type {HTMLElement}*/\n        this.scroller = dom.createElement(\"div\");\n        this.scroller.className = \"ace_scroller\";\n\n        this.container.appendChild(this.scroller);\n        /**@type {HTMLElement}*/\n        this.content = dom.createElement(\"div\");\n        this.content.className = \"ace_content\";\n        this.scroller.appendChild(this.content);\n\n        this.$gutterLayer = new GutterLayer(this.$gutter);\n        this.$gutterLayer.on(\"changeGutterWidth\", this.onGutterResize.bind(this));\n\n        this.$markerBack = new MarkerLayer(this.content);\n        var textLayer = this.$textLayer = new TextLayer(this.content);\n        this.canvas = textLayer.element;\n\n        this.$markerFront = new MarkerLayer(this.content);\n\n        this.$cursorLayer = new CursorLayer(this.content);\n\n        // Indicates whether the horizontal scrollbar is visible\n        this.$horizScroll = false;\n        this.$vScroll = false;\n\n        this.scrollBar =\n            this.scrollBarV = new VScrollBar(this.container, this);\n        this.scrollBarH = new HScrollBar(this.container, this);\n        this.scrollBarV.on(\"scroll\", function(e) {\n            if (!_self.$scrollAnimation)\n                _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n        });\n        this.scrollBarH.on(\"scroll\", function(e) {\n            if (!_self.$scrollAnimation)\n                _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n        });\n\n        this.scrollTop = 0;\n        this.scrollLeft = 0;\n\n        this.cursorPos = {\n            row : 0,\n            column : 0\n        };\n\n        this.$fontMetrics = new FontMetrics(this.container);\n        this.$textLayer.$setFontMetrics(this.$fontMetrics);\n        this.$textLayer.on(\"changeCharacterSize\", function(e) {\n            _self.updateCharacterSize();\n            _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);\n            _self._signal(\"changeCharacterSize\", e);\n        });\n\n        this.$size = {\n            width: 0,\n            height: 0,\n            scrollerHeight: 0,\n            scrollerWidth: 0,\n            $dirty: true\n        };\n\n        this.layerConfig = {\n            width : 1,\n            padding : 0,\n            firstRow : 0,\n            firstRowScreen: 0,\n            lastRow : 0,\n            lineHeight : 0,\n            characterWidth : 0,\n            minHeight : 1,\n            maxHeight : 1,\n            offset : 0,\n            height : 1,\n            gutterOffset: 1\n        };\n\n        this.scrollMargin = {\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0,\n            v: 0,\n            h: 0\n        };\n\n        this.margin = {\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0,\n            v: 0,\n            h: 0\n        };\n\n        this.$keepTextAreaAtCursor = !useragent.isIOS;\n\n        this.$loop = new RenderLoop(\n            this.$renderChanges.bind(this),\n            this.container.ownerDocument.defaultView\n        );\n        this.$loop.schedule(this.CHANGE_FULL);\n\n        this.updateCharacterSize();\n        this.setPadding(4);\n        this.$addResizeObserver();\n        config.resetOptions(this);\n        config._signal(\"renderer\", this);\n    }\n\n\n    // this.$logChanges = function(changes) {\n    //     var a = \"\"\n    //     if (changes & this.CHANGE_CURSOR) a += \" cursor\";\n    //     if (changes & this.CHANGE_MARKER) a += \" marker\";\n    //     if (changes & this.CHANGE_GUTTER) a += \" gutter\";\n    //     if (changes & this.CHANGE_SCROLL) a += \" scroll\";\n    //     if (changes & this.CHANGE_LINES) a += \" lines\";\n    //     if (changes & this.CHANGE_TEXT) a += \" text\";\n    //     if (changes & this.CHANGE_SIZE) a += \" size\";\n    //     if (changes & this.CHANGE_MARKER_BACK) a += \" marker_back\";\n    //     if (changes & this.CHANGE_MARKER_FRONT) a += \" marker_front\";\n    //     if (changes & this.CHANGE_FULL) a += \" full\";\n    //     if (changes & this.CHANGE_H_SCROLL) a += \" h_scroll\";\n    //     console.log(a.trim())\n    // };\n\n    updateCharacterSize() {\n        // @ts-expect-error TODO: missing property initialization anywhere in codebase\n        if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {\n            // @ts-expect-error TODO: missing property initialization anywhere in codebase\n            this.$allowBoldFonts = this.$textLayer.allowBoldFonts;\n            this.setStyle(\"ace_nobold\", !this.$allowBoldFonts);\n        }\n\n        this.layerConfig.characterWidth =\n        this.characterWidth = this.$textLayer.getCharacterWidth();\n        this.layerConfig.lineHeight =\n        this.lineHeight = this.$textLayer.getLineHeight();\n        this.$updatePrintMargin();\n        // set explicit line height to avoid normal resolving to different values based on text\n        dom.setStyle(this.scroller.style, \"line-height\", this.lineHeight + \"px\");\n    }\n\n    /**\n     *\n     * Associates the renderer with an [[EditSession `EditSession`]].\n     * @param {EditSession} session The session to associate with\n     **/\n    setSession(session) {\n        if (this.session)\n            this.session.doc.off(\"changeNewLineMode\", this.onChangeNewLineMode);\n\n        this.session = session;\n        if (session && this.scrollMargin.top && session.getScrollTop() <= 0)\n            session.setScrollTop(-this.scrollMargin.top);\n\n        this.$cursorLayer.setSession(session);\n        this.$markerBack.setSession(session);\n        this.$markerFront.setSession(session);\n        this.$gutterLayer.setSession(session);\n        this.$textLayer.setSession(session);\n        if (!session)\n            return;\n\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.session.$setFontMetrics(this.$fontMetrics);\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n\n        this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);\n        this.onChangeNewLineMode();\n        this.session.doc.on(\"changeNewLineMode\", this.onChangeNewLineMode);\n    }\n\n    /**\n     * Triggers a partial update of the text, from the range given by the two parameters.\n     * @param {Number} firstRow The first row to update\n     * @param {Number} lastRow The last row to update\n     * @param {boolean} [force]\n     **/\n    updateLines(firstRow, lastRow, force) {\n        if (lastRow === undefined)\n            lastRow = Infinity;\n\n        if (!this.$changedLines) {\n            this.$changedLines = {\n                firstRow: firstRow,\n                lastRow: lastRow\n            };\n        }\n        else {\n            if (this.$changedLines.firstRow > firstRow)\n                this.$changedLines.firstRow = firstRow;\n\n            if (this.$changedLines.lastRow < lastRow)\n                this.$changedLines.lastRow = lastRow;\n        }\n\n        // If the change happened offscreen above us then it's possible\n        // that a new line wrap will affect the position of the lines on our\n        // screen so they need redrawn.\n        // TODO: better solution is to not change scroll position when text is changed outside of visible area\n        if (this.$changedLines.lastRow < this.layerConfig.firstRow) {\n            if (force)\n                this.$changedLines.lastRow = this.layerConfig.lastRow;\n            else\n                return;\n        }\n        if (this.$changedLines.firstRow > this.layerConfig.lastRow)\n            return;\n        this.$loop.schedule(this.CHANGE_LINES);\n    }\n\n    /**\n     * @internal\n     */\n    onChangeNewLineMode() {\n        this.$loop.schedule(this.CHANGE_TEXT);\n        this.$textLayer.$updateEolChar();\n        this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);\n    }\n\n    /**\n     * @internal\n     */\n    onChangeTabSize() {\n        this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);\n        this.$textLayer.onChangeTabSize();\n    }\n\n    /**\n     * Triggers a full update of the text, for all the rows.\n     **/\n    updateText() {\n        this.$loop.schedule(this.CHANGE_TEXT);\n    }\n\n    /**\n     * Triggers a full update of all the layers, for all the rows.\n     * @param {Boolean} [force] If `true`, forces the changes through\n\n     **/\n    updateFull(force) {\n        if (force)\n            this.$renderChanges(this.CHANGE_FULL, true);\n        else\n            this.$loop.schedule(this.CHANGE_FULL);\n    }\n\n    /**\n     * Updates the font size.\n     **/\n    updateFontSize() {\n        this.$textLayer.checkForSizeChanges();\n    }\n\n    $updateSizeAsync() {\n        if (this.$loop.pending)\n            this.$size.$dirty = true;\n        else\n            this.onResize();\n    }\n    /**\n     * [Triggers a resize of the editor.]{: #VirtualRenderer.onResize}\n     * @param {Boolean} [force] If `true`, recomputes the size, even if the height and width haven't changed\n     * @param {Number} [gutterWidth] The width of the gutter in pixels\n     * @param {Number} [width] The width of the editor in pixels\n     * @param {Number} [height] The hiehgt of the editor, in pixels\n     * @internal\n     **/\n    onResize(force, gutterWidth, width, height) {\n        if (this.resizing > 2)\n            return;\n        else if (this.resizing > 0)\n            this.resizing++;\n        else\n            this.resizing = force ? 1 : 0;\n        // `|| el.scrollHeight` is required for autosizing editors on ie\n        // where elements with clientHeight = 0 also have clientWidth = 0\n        var el = this.container;\n        if (!height)\n            height = el.clientHeight || el.scrollHeight;\n        if (!height && this.$maxLines && this.lineHeight > 1) {\n            // if we are supposed to fit to content set height at least to 1\n            // so that render does not exit early before calling $autosize\n            if (!el.style.height || el.style.height == \"0px\") {\n                el.style.height = \"1px\";\n                height = el.clientHeight || el.scrollHeight;\n            }\n        }\n        if (!width)\n            width = el.clientWidth || el.scrollWidth;\n        var changes = this.$updateCachedSize(force, gutterWidth, width, height);\n\n        if (this.$resizeTimer) this.$resizeTimer.cancel();\n\n        if (!this.$size.scrollerHeight || (!width && !height))\n            return this.resizing = 0;\n\n        if (force)\n            this.$gutterLayer.$padding = null;\n\n        if (force)\n            this.$renderChanges(changes | this.$changes, true);\n        else\n            this.$loop.schedule(changes | this.$changes);\n\n        if (this.resizing)\n            this.resizing = 0;\n        // reset cached values on scrollbars, needs to be removed when switching to non-native scrollbars\n        // see https://github.com/ajaxorg/ace/issues/2195\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        if (this.$customScrollbar) {\n            this.$updateCustomScrollbar(true);\n        }\n    }\n\n    /**\n     * @param [force]\n     * @param [gutterWidth]\n     * @param [width]\n     * @param [height]\n     * @return {number}\n\n     */\n    $updateCachedSize(force, gutterWidth, width, height) {\n        height -= (this.$extraHeight || 0);\n        var changes = 0;\n        var size = this.$size;\n        var oldSize = {\n            width: size.width,\n            height: size.height,\n            scrollerHeight: size.scrollerHeight,\n            scrollerWidth: size.scrollerWidth\n        };\n        if (height && (force || size.height != height)) {\n            size.height = height;\n            changes |= this.CHANGE_SIZE;\n\n            size.scrollerHeight = size.height;\n            if (this.$horizScroll)\n                size.scrollerHeight -= this.scrollBarH.getHeight();\n\n            this.scrollBarV.setHeight(size.scrollerHeight);\n            this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + \"px\";\n\n            changes = changes | this.CHANGE_SCROLL;\n        }\n\n        if (width && (force || size.width != width)) {\n            changes |= this.CHANGE_SIZE;\n            size.width = width;\n\n            if (gutterWidth == null)\n                gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;\n\n            this.gutterWidth = gutterWidth;\n\n            dom.setStyle(this.scrollBarH.element.style, \"left\", gutterWidth + \"px\");\n            dom.setStyle(this.scroller.style, \"left\", gutterWidth + this.margin.left + \"px\");\n            size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth() - this.margin.h);\n            dom.setStyle(this.$gutter.style, \"left\", this.margin.left + \"px\");\n\n            var right = this.scrollBarV.getWidth() + \"px\";\n            dom.setStyle(this.scrollBarH.element.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"bottom\", this.scrollBarH.getHeight());\n\n            this.scrollBarH.setWidth(size.scrollerWidth);\n\n            if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force) {\n                changes |= this.CHANGE_FULL;\n            }\n        }\n\n        size.$dirty = !width || !height;\n\n        if (changes)\n            this._signal(\"resize\", oldSize);\n\n        return changes;\n    }\n\n    /**\n     *\n     * @param {number} width\n     * @internal\n     */\n    onGutterResize(width) {\n        var gutterWidth = this.$showGutter ? width : 0;\n        if (gutterWidth != this.gutterWidth)\n            this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);\n\n        if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        } else if (this.$size.$dirty) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        } else {\n            this.$computeLayerConfig();\n        }\n    }\n\n    /**\n     * Adjusts the wrap limit, which is the number of characters that can fit within the width of the edit area on screen.\n\n     **/\n    adjustWrapLimit() {\n        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;\n        var limit = Math.floor(availableWidth / this.characterWidth);\n        return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);\n    }\n\n    /**\n     * Identifies whether you want to have an animated scroll or not.\n     * @param {Boolean} shouldAnimate Set to `true` to show animated scrolls\n\n     **/\n    setAnimatedScroll(shouldAnimate){\n        this.setOption(\"animatedScroll\", shouldAnimate);\n    }\n\n    /**\n     * Returns whether an animated scroll happens or not.\n     * @returns {Boolean}\n\n     **/\n    getAnimatedScroll() {\n        return this.$animatedScroll;\n    }\n\n    /**\n     * Identifies whether you want to show invisible characters or not.\n     * @param {Boolean} showInvisibles Set to `true` to show invisibles\n\n     **/\n    setShowInvisibles(showInvisibles) {\n        this.setOption(\"showInvisibles\", showInvisibles);\n        this.session.$bidiHandler.setShowInvisibles(showInvisibles);\n    }\n\n    /**\n     * Returns whether invisible characters are being shown or not.\n     * @returns {Boolean}\n\n     **/\n    getShowInvisibles() {\n        return this.getOption(\"showInvisibles\");\n    }\n\n    /**\n     * @return {boolean}\n\n     */\n    getDisplayIndentGuides() {\n        return this.getOption(\"displayIndentGuides\");\n    }\n\n    /**\n     * @param {boolean} display\n\n     */\n    setDisplayIndentGuides(display) {\n        this.setOption(\"displayIndentGuides\", display);\n    }\n\n    /**\n\n     * @return {boolean}\n     */\n    getHighlightIndentGuides() {\n        return this.getOption(\"highlightIndentGuides\");\n    }\n\n    /**\n\n     * @param {boolean} highlight\n     */\n    setHighlightIndentGuides(highlight) {\n        this.setOption(\"highlightIndentGuides\", highlight);\n    }\n\n    /**\n     * Identifies whether you want to show the print margin or not.\n     * @param {Boolean} showPrintMargin Set to `true` to show the print margin\n\n     **/\n    setShowPrintMargin(showPrintMargin) {\n        this.setOption(\"showPrintMargin\", showPrintMargin);\n    }\n\n    /**\n     * Returns whether the print margin is being shown or not.\n     * @returns {Boolean}\n\n     **/\n    getShowPrintMargin() {\n        return this.getOption(\"showPrintMargin\");\n    }\n    /**\n     * Identifies whether you want to show the print margin column or not.\n     * @param {number} printMarginColumn Set to `true` to show the print margin column\n\n     **/\n    setPrintMarginColumn(printMarginColumn) {\n        this.setOption(\"printMarginColumn\", printMarginColumn);\n    }\n\n    /**\n     * Returns whether the print margin column is being shown or not.\n     * @returns {number}\n\n     **/\n    getPrintMarginColumn() {\n        return this.getOption(\"printMarginColumn\");\n    }\n\n    /**\n     * Returns `true` if the gutter is being shown.\n     * @returns {Boolean}\n\n     **/\n    getShowGutter(){\n        return this.getOption(\"showGutter\");\n    }\n\n    /**\n     * Identifies whether you want to show the gutter or not.\n     * @param {Boolean} show Set to `true` to show the gutter\n\n     **/\n    setShowGutter(show){\n        return this.setOption(\"showGutter\", show);\n    }\n\n    /**\n\n     * @returns {boolean}\n     */\n    getFadeFoldWidgets(){\n        return this.getOption(\"fadeFoldWidgets\");\n    }\n\n    /**\n\n     * @param {boolean} show\n     */\n    setFadeFoldWidgets(show) {\n        this.setOption(\"fadeFoldWidgets\", show);\n    }\n\n    /**\n      *\n     * @param {boolean} shouldHighlight\n     */\n    setHighlightGutterLine(shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    }\n\n    /**\n\n     * @returns {boolean}\n     */\n    getHighlightGutterLine() {\n        return this.getOption(\"highlightGutterLine\");\n    }\n\n    /**\n\n     */\n    $updatePrintMargin() {\n        if (!this.$showPrintMargin && !this.$printMarginEl)\n            return;\n\n        if (!this.$printMarginEl) {\n            var containerEl = dom.createElement(\"div\");\n            containerEl.className = \"ace_layer ace_print-margin-layer\";\n            this.$printMarginEl = dom.createElement(\"div\");\n            this.$printMarginEl.className = \"ace_print-margin\";\n            containerEl.appendChild(this.$printMarginEl);\n            this.content.insertBefore(containerEl, this.content.firstChild);\n        }\n\n        var style = this.$printMarginEl.style;\n        style.left = Math.round(this.characterWidth * this.$printMarginColumn + this.$padding) + \"px\";\n        style.visibility = this.$showPrintMargin ? \"visible\" : \"hidden\";\n\n        if (this.session && this.session.$wrap == -1)\n            this.adjustWrapLimit();\n    }\n\n    /**\n     *\n     * Returns the root element containing this renderer.\n     * @returns {HTMLElement}\n     **/\n    getContainerElement() {\n        return this.container;\n    }\n\n    /**\n     *\n     * Returns the element that the mouse events are attached to\n     * @returns {HTMLElement}\n     **/\n    getMouseEventTarget() {\n        return this.scroller;\n    }\n\n    /**\n     *\n     * Returns the element to which the hidden text area is added.\n     * @returns {HTMLElement}\n     **/\n    getTextAreaContainer() {\n        return this.container;\n    }\n\n    // move text input over the cursor\n    // this is required for IME\n    /**\n\n     */\n    $moveTextAreaToCursor() {\n        if (this.$isMousePressed) return;\n        var style = this.textarea.style;\n        var composition = this.$composition;\n        if (!this.$keepTextAreaAtCursor && !composition) {\n            dom.translate(this.textarea, -100, 0);\n            return;\n        }\n        var pixelPos = this.$cursorLayer.$pixelPos;\n        if (!pixelPos)\n            return;\n        if (composition && composition.markerRange)\n            pixelPos = this.$cursorLayer.getPixelPosition(composition.markerRange.start, true);\n\n        var config = this.layerConfig;\n        var posTop = pixelPos.top;\n        var posLeft = pixelPos.left;\n        posTop -= config.offset;\n\n        var h = composition && composition.useTextareaForIME || useragent.isMobile ? this.lineHeight : 1;\n        if (posTop < 0 || posTop > config.height - h) {\n            dom.translate(this.textarea, 0, 0);\n            return;\n        }\n\n        var w = 1;\n        var maxTop = this.$size.height - h;\n        if (!composition) {\n            posTop += this.lineHeight;\n        }\n        else {\n            if (composition.useTextareaForIME) {\n                var val = this.textarea.value;\n                w = this.characterWidth * (this.session.$getStringScreenWidth(val)[0]);\n            }\n            else {\n                posTop += this.lineHeight + 2;\n            }\n        }\n\n        posLeft -= this.scrollLeft;\n        if (posLeft > this.$size.scrollerWidth - w)\n            posLeft = this.$size.scrollerWidth - w;\n\n        posLeft += this.gutterWidth + this.margin.left;\n\n        dom.setStyle(style, \"height\", h + \"px\");\n        dom.setStyle(style, \"width\", w + \"px\");\n        dom.translate(this.textarea, Math.min(posLeft, this.$size.scrollerWidth - w), Math.min(posTop, maxTop));\n    }\n\n    /**\n     * [Returns the index of the first visible row.]{: #VirtualRenderer.getFirstVisibleRow}\n     * @returns {Number}\n     **/\n    getFirstVisibleRow() {\n        return this.layerConfig.firstRow;\n    }\n\n    /**\n     *\n     * Returns the index of the first fully visible row. \"Fully\" here means that the characters in the row are not truncated; that the top and the bottom of the row are on the screen.\n     * @returns {Number}\n     **/\n    getFirstFullyVisibleRow() {\n        return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);\n    }\n\n    /**\n     *\n     * Returns the index of the last fully visible row. \"Fully\" here means that the characters in the row are not truncated; that the top and the bottom of the row are on the screen.\n     * @returns {Number}\n     **/\n    getLastFullyVisibleRow() {\n        var config = this.layerConfig;\n        var lastRow = config.lastRow;\n        var top = this.session.documentToScreenRow(lastRow, 0) * config.lineHeight;\n        if (top - this.session.getScrollTop() > config.height - config.lineHeight)\n            return lastRow - 1;\n        return lastRow;\n    }\n\n    /**\n     *\n     * [Returns the index of the last visible row.]{: #VirtualRenderer.getLastVisibleRow}\n     * @returns {Number}\n     **/\n    getLastVisibleRow() {\n        return this.layerConfig.lastRow;\n    }\n\n    /**\n     * Sets the padding for all the layers.\n     * @param {Number} padding A new padding value (in pixels)\n\n     **/\n    setPadding(padding) {\n        this.$padding = padding;\n        this.$textLayer.setPadding(padding);\n        this.$cursorLayer.setPadding(padding);\n        this.$markerFront.setPadding(padding);\n        this.$markerBack.setPadding(padding);\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.$updatePrintMargin();\n    }\n\n    /**\n     *\n     * @param {number} [top]\n     * @param {number} [bottom]\n     * @param {number} [left]\n     * @param {number} [right]\n\n     */\n    setScrollMargin(top, bottom, left, right) {\n        var sm = this.scrollMargin;\n        sm.top = top|0;\n        sm.bottom = bottom|0;\n        sm.right = right|0;\n        sm.left = left|0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        if (sm.top && this.scrollTop <= 0 && this.session)\n            this.session.setScrollTop(-sm.top);\n        this.updateFull();\n    }\n\n    /**\n     *\n     * @param {number} [top]\n     * @param {number} [bottom]\n     * @param {number} [left]\n     * @param {number} [right]\n\n     */\n    setMargin(top, bottom, left, right) {\n        var sm = this.margin;\n        sm.top = top|0;\n        sm.bottom = bottom|0;\n        sm.right = right|0;\n        sm.left = left|0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        this.$updateCachedSize(true, this.gutterWidth, this.$size.width, this.$size.height);\n        this.updateFull();\n    }\n\n    /**\n     * Returns whether the horizontal scrollbar is set to be always visible.\n     * @returns {Boolean}\n\n     **/\n    getHScrollBarAlwaysVisible() {\n        return this.$hScrollBarAlwaysVisible;\n    }\n\n    /**\n     * Identifies whether you want to show the horizontal scrollbar or not.\n     * @param {Boolean} alwaysVisible Set to `true` to make the horizontal scroll bar visible\n\n     **/\n    setHScrollBarAlwaysVisible(alwaysVisible) {\n        this.setOption(\"hScrollBarAlwaysVisible\", alwaysVisible);\n    }\n    /**\n     * Returns whether the horizontal scrollbar is set to be always visible.\n     * @returns {Boolean}\n\n     **/\n    getVScrollBarAlwaysVisible() {\n        return this.$vScrollBarAlwaysVisible;\n    }\n\n    /**\n     * Identifies whether you want to show the horizontal scrollbar or not.\n     * @param {Boolean} alwaysVisible Set to `true` to make the horizontal scroll bar visible\n     **/\n    setVScrollBarAlwaysVisible(alwaysVisible) {\n        this.setOption(\"vScrollBarAlwaysVisible\", alwaysVisible);\n    }\n\n    /**\n\n     */\n    $updateScrollBarV() {\n        var scrollHeight = this.layerConfig.maxHeight;\n        var scrollerHeight = this.$size.scrollerHeight;\n        if (!this.$maxLines && this.$scrollPastEnd) {\n            scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;\n            if (this.scrollTop > scrollHeight - scrollerHeight) {\n                scrollHeight = this.scrollTop + scrollerHeight;\n                this.scrollBarV.scrollTop = null;\n            }\n        }\n        this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);\n        this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);\n    }\n    $updateScrollBarH() {\n        this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);\n        this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);\n    }\n\n    freeze() {\n        this.$frozen = true;\n    }\n\n    unfreeze() {\n        this.$frozen = false;\n    }\n\n    /**\n     *\n     * @param {number} changes\n     * @param {boolean} [force]\n     * @returns {number}\n\n     */\n    $renderChanges(changes, force) {\n        if (this.$changes) {\n            changes |= this.$changes;\n            this.$changes = 0;\n        }\n        if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {\n            this.$changes |= changes;\n            return;\n        }\n        if (this.$size.$dirty) {\n            this.$changes |= changes;\n            return this.onResize(true);\n        }\n        if (!this.lineHeight) {\n            this.$textLayer.checkForSizeChanges();\n        }\n        // this.$logChanges(changes);\n\n        this._signal(\"beforeRender\", changes);\n\n        if (this.session && this.session.$bidiHandler)\n            this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);\n\n        var config = this.layerConfig;\n        // text, scrolling and resize changes can cause the view port size to change\n        if (changes & this.CHANGE_FULL ||\n            changes & this.CHANGE_SIZE ||\n            changes & this.CHANGE_TEXT ||\n            changes & this.CHANGE_LINES ||\n            changes & this.CHANGE_SCROLL ||\n            changes & this.CHANGE_H_SCROLL\n        ) {\n            changes |= this.$computeLayerConfig() | this.$loop.clear();\n            // If a change is made offscreen and wrapMode is on, then the onscreen\n            // lines may have been pushed down. If so, the first screen row will not\n            // have changed, but the first actual row will. In that case, adjust\n            // scrollTop so that the cursor and onscreen content stays in the same place.\n            // TODO: find a better way to handle this, that works non wrapped case and doesn't compute layerConfig twice\n            if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {\n                var st = this.scrollTop + (config.firstRow - Math.max(this.layerConfig.firstRow, 0)) * this.lineHeight;\n                if (st > 0) {\n                    // this check is needed as a workaround for the documentToScreenRow returning -1 if document.length == 0\n                    this.scrollTop = st;\n                    changes = changes | this.CHANGE_SCROLL;\n                    changes |= this.$computeLayerConfig() | this.$loop.clear();\n                }\n            }\n            config = this.layerConfig;\n            // update scrollbar first to not lose scroll position when gutter calls resize\n            this.$updateScrollBarV();\n            if (changes & this.CHANGE_H_SCROLL)\n                this.$updateScrollBarH();\n\n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n\n            var width = config.width + 2 * this.$padding + \"px\";\n            var height = config.minHeight + \"px\";\n\n            dom.setStyle(this.content.style, \"width\", width);\n            dom.setStyle(this.content.style, \"height\", height);\n        }\n\n        // horizontal scrolling\n        if (changes & this.CHANGE_H_SCROLL) {\n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            this.scroller.className = this.scrollLeft <= 0 ? \"ace_scroller \" : \"ace_scroller ace_scroll-left \";\n            if (this.enableKeyboardAccessibility)\n                this.scroller.className += this.keyboardFocusClassName;\n        }\n\n        // full\n        if (changes & this.CHANGE_FULL) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n\n        // scrolling\n        if (changes & this.CHANGE_SCROLL) {\n            this.$changedLines = null;\n            if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)\n                this.$textLayer.update(config);\n            else\n                this.$textLayer.scrollLines(config);\n\n            if (this.$showGutter) {\n                if (changes & this.CHANGE_GUTTER || changes & this.CHANGE_LINES)\n                    this.$gutterLayer.update(config);\n                else\n                    this.$gutterLayer.scrollLines(config);\n            }\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n\n        if (changes & this.CHANGE_TEXT) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_LINES) {\n            if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_CURSOR) {\n            if (this.$highlightGutterLine)\n                // @ts-expect-error TODO: potential wrong param\n                this.$gutterLayer.updateLineHighlight(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n\n        if (changes & this.CHANGE_CURSOR) {\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n        }\n\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {\n            this.$markerFront.update(config);\n        }\n\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {\n            this.$markerBack.update(config);\n        }\n\n        this._signal(\"afterRender\", changes);\n    }\n\n    /**\n\n     */\n    $autosize() {\n        var height = this.session.getScreenLength() * this.lineHeight;\n        var maxHeight = this.$maxLines * this.lineHeight;\n        var desiredHeight = Math.min(maxHeight,\n            Math.max((this.$minLines || 1) * this.lineHeight, height)\n        ) + this.scrollMargin.v + (this.$extraHeight || 0);\n        if (this.$horizScroll)\n            desiredHeight += this.scrollBarH.getHeight();\n        if (this.$maxPixelHeight && desiredHeight > this.$maxPixelHeight)\n            desiredHeight = this.$maxPixelHeight;\n\n        var hideScrollbars = desiredHeight <= 2 * this.lineHeight;\n        var vScroll = !hideScrollbars && height > maxHeight;\n\n        if (desiredHeight != this.desiredHeight ||\n            this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {\n            if (vScroll != this.$vScroll) {\n                this.$vScroll = vScroll;\n                this.scrollBarV.setVisible(vScroll);\n            }\n\n            var w = this.container.clientWidth;\n            this.container.style.height = desiredHeight + \"px\";\n            this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);\n            // this.$loop.changes = 0;\n            this.desiredHeight = desiredHeight;\n\n            this._signal(\"autosize\");\n        }\n    }\n\n    /**\n\n     * @returns {number}\n     */\n    $computeLayerConfig() {\n        var session = this.session;\n        var size = this.$size;\n\n        var hideScrollbars = size.height <= 2 * this.lineHeight;\n        var screenLines = this.session.getScreenLength();\n        var maxHeight = screenLines * this.lineHeight;\n\n        var longestLine = this.$getLongestLine();\n\n        var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||\n            size.scrollerWidth - longestLine - 2 * this.$padding < 0);\n\n        var hScrollChanged = this.$horizScroll !== horizScroll;\n        if (hScrollChanged) {\n            this.$horizScroll = horizScroll;\n            this.scrollBarH.setVisible(horizScroll);\n        }\n        var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine\n        // autoresize only after updating hscroll to include scrollbar height in desired height\n        if (this.$maxLines && this.lineHeight > 1)\n            this.$autosize();\n\n        var minHeight = size.scrollerHeight + this.lineHeight;\n\n        var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd\n            ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd\n            : 0;\n        maxHeight += scrollPastEnd;\n\n        var sm = this.scrollMargin;\n        this.session.setScrollTop(Math.max(-sm.top,\n            Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));\n\n        this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft,\n            longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));\n\n        var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||\n            size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);\n        var vScrollChanged = vScrollBefore !== vScroll;\n        if (vScrollChanged) {\n            this.$vScroll = vScroll;\n            this.scrollBarV.setVisible(vScroll);\n        }\n\n        var offset = this.scrollTop % this.lineHeight;\n        var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;\n        var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));\n        var lastRow = firstRow + lineCount;\n\n        // Map lines on the screen to lines in the document.\n        var firstRowScreen, firstRowHeight;\n        var lineHeight = this.lineHeight;\n        firstRow = session.screenToDocumentRow(firstRow, 0);\n\n        // Check if firstRow is inside of a foldLine. If true, then use the first\n        // row of the foldLine.\n        var foldLine = session.getFoldLine(firstRow);\n        if (foldLine) {\n            firstRow = foldLine.start.row;\n        }\n\n        firstRowScreen = session.documentToScreenRow(firstRow, 0);\n        firstRowHeight = session.getRowLength(firstRow) * lineHeight;\n\n        lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);\n        minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +\n                                                firstRowHeight;\n\n        offset = this.scrollTop - firstRowScreen * lineHeight;\n\n        var changes = 0;\n        if (this.layerConfig.width != longestLine || hScrollChanged)\n            changes = this.CHANGE_H_SCROLL;\n        // Horizontal scrollbar visibility may have changed, which changes\n        // the client height of the scroller\n        if (hScrollChanged || vScrollChanged) {\n            changes |= this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);\n            this._signal(\"scrollbarVisibilityChanged\");\n            if (vScrollChanged)\n                longestLine = this.$getLongestLine();\n        }\n\n        this.layerConfig = {\n            width : longestLine,\n            padding : this.$padding,\n            firstRow : firstRow,\n            firstRowScreen: firstRowScreen,\n            lastRow : lastRow,\n            lineHeight : lineHeight,\n            characterWidth : this.characterWidth,\n            minHeight : minHeight,\n            maxHeight : maxHeight,\n            offset : offset,\n            gutterOffset : lineHeight ? Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)) : 0,\n            height : this.$size.scrollerHeight\n        };\n\n        if (this.session.$bidiHandler)\n            this.session.$bidiHandler.setContentWidth(longestLine - this.$padding);\n        // For debugging.\n        // console.log(JSON.stringify(this.layerConfig));\n\n        return changes;\n    }\n\n    /**\n     * @returns {boolean | undefined}\n\n     */\n    $updateLines() {\n        if (!this.$changedLines) return;\n        var firstRow = this.$changedLines.firstRow;\n        var lastRow = this.$changedLines.lastRow;\n        this.$changedLines = null;\n\n        var layerConfig = this.layerConfig;\n\n        if (firstRow > layerConfig.lastRow + 1) { return; }\n        if (lastRow < layerConfig.firstRow) { return; }\n\n        // if the last row is unknown -> redraw everything\n        if (lastRow === Infinity) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(layerConfig);\n            this.$textLayer.update(layerConfig);\n            return;\n        }\n\n        // else update only the changed rows\n        this.$textLayer.updateLines(layerConfig, firstRow, lastRow);\n        return true;\n    }\n\n    /**\n     *\n     * @returns {number}\n\n     */\n    $getLongestLine() {\n        var charCount = this.session.getScreenWidth();\n        if (this.showInvisibles && !this.session.$useWrapMode)\n            charCount += 1;\n\n        if (this.$textLayer && charCount > this.$textLayer.MAX_LINE_LENGTH)\n            charCount = this.$textLayer.MAX_LINE_LENGTH + 30;\n\n        return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));\n    }\n\n    /**\n     * Schedules an update to all the front markers in the document.\n     **/\n    updateFrontMarkers() {\n        this.$markerFront.setMarkers(this.session.getMarkers(true));\n        this.$loop.schedule(this.CHANGE_MARKER_FRONT);\n    }\n\n    /**\n     *\n     * Schedules an update to all the back markers in the document.\n     **/\n    updateBackMarkers() {\n        this.$markerBack.setMarkers(this.session.getMarkers());\n        this.$loop.schedule(this.CHANGE_MARKER_BACK);\n    }\n\n    /**\n     *\n     * Deprecated; (moved to [[EditSession]])\n     * @deprecated\n     **/\n    addGutterDecoration(row, className){\n        this.$gutterLayer.addGutterDecoration(row, className);\n    }\n\n    /**\n     * Deprecated; (moved to [[EditSession]])\n     * @deprecated\n     **/\n    removeGutterDecoration(row, className){\n        this.$gutterLayer.removeGutterDecoration(row, className);\n    }\n\n    /**\n     *\n     * Redraw breakpoints.\n     * @param {any} [rows]\n     */\n    updateBreakpoints(rows) {\n        this._rows = rows;\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    }\n\n    /**\n     * Sets annotations for the gutter.\n     * @param {import(\"../ace-internal\").Ace.Annotation[]} annotations An array containing annotations\n     *\n     **/\n    setAnnotations(annotations) {\n        this.$gutterLayer.setAnnotations(annotations);\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    }\n\n    /**\n     *\n     * Updates the cursor icon.\n     **/\n    updateCursor() {\n        this.$loop.schedule(this.CHANGE_CURSOR);\n    }\n\n    /**\n     *\n     * Hides the cursor icon.\n     **/\n    hideCursor() {\n        this.$cursorLayer.hideCursor();\n    }\n\n    /**\n     *\n     * Shows the cursor icon.\n     **/\n    showCursor() {\n        this.$cursorLayer.showCursor();\n    }\n\n    /**\n     *\n     * @param {Point} anchor\n     * @param {Point} lead\n     * @param {number} [offset]\n     */\n    scrollSelectionIntoView(anchor, lead, offset) {\n        // first scroll anchor into view then scroll lead into view\n        this.scrollCursorIntoView(anchor, offset);\n        this.scrollCursorIntoView(lead, offset);\n    }\n\n    /**\n     *\n     * Scrolls the cursor into the first visibile area of the editor\n     * @param {Point} [cursor]\n     * @param {number} [offset]\n     * @param {{ top?: any; bottom?: any; }} [$viewMargin]\n     */\n    scrollCursorIntoView(cursor, offset, $viewMargin) {\n        // the editor is not visible\n        if (this.$size.scrollerHeight === 0)\n            return;\n\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n\n        var newLeft = pos.left;\n        var newTop = pos.top;\n\n        var topMargin = $viewMargin && $viewMargin.top || 0;\n        var bottomMargin = $viewMargin && $viewMargin.bottom || 0;\n\n        if (this.$scrollAnimation) {\n            this.$stopAnimation = true;\n        }\n\n        var currentTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;\n\n        if (currentTop + topMargin > newTop) {\n            if (offset && currentTop + topMargin > newTop + this.lineHeight)\n                newTop -= offset * this.$size.scrollerHeight;\n            if (newTop === 0)\n                newTop = -this.scrollMargin.top;\n            this.session.setScrollTop(newTop);\n        } else if (currentTop + this.$size.scrollerHeight - bottomMargin < newTop + this.lineHeight) {\n            if (offset && currentTop + this.$size.scrollerHeight - bottomMargin < newTop -  this.lineHeight)\n                newTop += offset * this.$size.scrollerHeight;\n            this.session.setScrollTop(newTop + this.lineHeight + bottomMargin - this.$size.scrollerHeight);\n        }\n\n        var currentLeft = this.scrollLeft;\n        // Show 2 context characters of the line when moving to it\n        var twoCharsWidth = 2 * this.layerConfig.characterWidth;\n\n        if (newLeft - twoCharsWidth < currentLeft) {\n            newLeft -= twoCharsWidth;\n            if (newLeft < this.$padding + twoCharsWidth) {\n                newLeft = -this.scrollMargin.left;\n            }\n            this.session.setScrollLeft(newLeft);\n        } else {\n            newLeft += twoCharsWidth;\n            if (currentLeft + this.$size.scrollerWidth < newLeft + this.characterWidth) {\n                this.session.setScrollLeft(Math.round(newLeft + this.characterWidth - this.$size.scrollerWidth));\n            } else if (currentLeft <= this.$padding && newLeft - currentLeft < this.characterWidth) {\n                this.session.setScrollLeft(0);\n            }\n        }\n    }\n\n    /**\n     * {:EditSession.getScrollTop}\n     * @related EditSession.getScrollTop\n     * @returns {Number}\n     **/\n    getScrollTop() {\n        return this.session.getScrollTop();\n    }\n\n    /**\n     * {:EditSession.getScrollLeft}\n     * @related EditSession.getScrollLeft\n     * @returns {Number}\n     **/\n    getScrollLeft() {\n        return this.session.getScrollLeft();\n    }\n\n    /**\n     * Returns the first visible row, regardless of whether it's fully visible or not.\n     * @returns {Number}\n     **/\n    getScrollTopRow() {\n        return this.scrollTop / this.lineHeight;\n    }\n\n    /**\n     * Returns the last visible row, regardless of whether it's fully visible or not.\n     * @returns {Number}\n     **/\n    getScrollBottomRow() {\n        return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);\n    }\n\n    /**\n     * Gracefully scrolls from the top of the editor to the row indicated.\n     * @param {Number} row A row id\n     *\n     * @related EditSession.setScrollTop\n     **/\n    scrollToRow(row) {\n        this.session.setScrollTop(row * this.lineHeight);\n    }\n\n    /**\n     *\n     * @param {Point} cursor\n     * @param {number} [alignment]\n     * @returns {number}\n     */\n    alignCursor(cursor, alignment) {\n        if (typeof cursor == \"number\")\n            cursor = {row: cursor, column: 0};\n\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n        var h = this.$size.scrollerHeight - this.lineHeight;\n        var offset = pos.top - h * (alignment || 0);\n\n        this.session.setScrollTop(offset);\n        return offset;\n    }\n\n    /**\n     *\n     * @param {number} fromValue\n     * @param {number} toValue\n     * @returns {*[]}\n     */\n    $calcSteps(fromValue, toValue){\n        var i = 0;\n        var l = this.STEPS;\n        var steps = [];\n\n        var func  = function(t, x_min, dx) {\n            return dx * (Math.pow(t - 1, 3) + 1) + x_min;\n        };\n\n        for (i = 0; i < l; ++i)\n            steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));\n\n        return steps;\n    }\n\n    /**\n     * Gracefully scrolls the editor to the row indicated.\n     * @param {Number} line A line number\n     * @param {Boolean} center If `true`, centers the editor the to indicated line\n     * @param {Boolean} animate If `true` animates scrolling\n     * @param {() => void} [callback] Function to be called after the animation has finished\n\n     **/\n    scrollToLine(line, center, animate, callback) {\n        var pos = this.$cursorLayer.getPixelPosition({row: line, column: 0});\n        var offset = pos.top;\n        if (center)\n            offset -= this.$size.scrollerHeight / 2;\n\n        var initialScroll = this.scrollTop;\n        this.session.setScrollTop(offset);\n        if (animate !== false)\n            this.animateScrolling(initialScroll, callback);\n    }\n\n    /**\n     *\n     * @param fromValue\n     * @param [callback]\n\n     */\n    animateScrolling(fromValue, callback) {\n        var toValue = this.scrollTop;\n        if (!this.$animatedScroll)\n            return;\n        var _self = this;\n\n        if (fromValue == toValue)\n            return;\n\n        if (this.$scrollAnimation) {\n            var oldSteps = this.$scrollAnimation.steps;\n            if (oldSteps.length) {\n                fromValue = oldSteps[0];\n                if (fromValue == toValue)\n                    return;\n            }\n        }\n\n        var steps = _self.$calcSteps(fromValue, toValue);\n        this.$scrollAnimation = {from: fromValue, to: toValue, steps: steps};\n\n        clearInterval(this.$timer);\n\n        _self.session.setScrollTop(steps.shift());\n        // trick session to think it's already scrolled to not loose toValue\n        _self.session.$scrollTop = toValue;\n\n        function endAnimation() {\n            // @ts-ignore\n            _self.$timer = clearInterval(_self.$timer);\n            _self.$scrollAnimation = null;\n            _self.$stopAnimation = false;\n            callback && callback();\n        }\n\n        this.$timer = setInterval(function() {\n            if (_self.$stopAnimation) {\n                endAnimation();\n                return;\n            }\n\n            if (!_self.session)\n                return clearInterval(_self.$timer);\n            if (steps.length) {\n                _self.session.setScrollTop(steps.shift());\n                _self.session.$scrollTop = toValue;\n            } else if (toValue != null) {\n                _self.session.$scrollTop = -1;\n                _self.session.setScrollTop(toValue);\n                toValue = null;\n            } else {\n                // do this on separate step to not get spurious scroll event from scrollbar\n                endAnimation();\n            }\n        }, 10);\n    }\n\n    /**\n     * Scrolls the editor to the y pixel indicated.\n     * @param {Number} scrollTop The position to scroll to\n     **/\n    scrollToY(scrollTop) {\n        // after calling scrollBar.setScrollTop\n        // scrollbar sends us event with same scrollTop. ignore it\n        if (this.scrollTop !== scrollTop) {\n            this.$loop.schedule(this.CHANGE_SCROLL);\n            this.scrollTop = scrollTop;\n        }\n    }\n\n    /**\n     * Scrolls the editor across the x-axis to the pixel indicated.\n     * @param {Number} scrollLeft The position to scroll to\n     **/\n    scrollToX(scrollLeft) {\n        if (this.scrollLeft !== scrollLeft)\n            this.scrollLeft = scrollLeft;\n        this.$loop.schedule(this.CHANGE_H_SCROLL);\n    }\n\n    /**\n     * Scrolls the editor across both x- and y-axes.\n     * @param {Number} x The x value to scroll to\n     * @param {Number} y The y value to scroll to\n     **/\n    scrollTo(x, y) {\n        this.session.setScrollTop(y);\n        this.session.setScrollLeft(x);\n    }\n\n    /**\n     * Scrolls the editor across both x- and y-axes.\n     * @param {Number} deltaX The x value to scroll by\n     * @param {Number} deltaY The y value to scroll by\n     **/\n    scrollBy(deltaX, deltaY) {\n        deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);\n        deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);\n    }\n\n    /**\n     * Returns `true` if you can still scroll by either parameter; in other words, you haven't reached the end of the file or line.\n     * @param {Number} deltaX The x value to scroll by\n     * @param {Number} deltaY The y value to scroll by\n     *\n     * @returns {Boolean}\n     **/\n    isScrollableBy(deltaX, deltaY) {\n        if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)\n           return true;\n        if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight\n            - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)\n           return true;\n        if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)\n            return true;\n        if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth\n            - this.layerConfig.width < -1 + this.scrollMargin.right)\n           return true;\n    }\n\n    /**\n     *\n     * @param {number} x\n     * @param {number} y\n     * @returns {import(\"../ace-internal\").Ace.ScreenCoordinates}\n\n     */\n    pixelToScreenCoordinates(x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = {top:0, left: 0};\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        } else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n\n        return {row: row, column: col, side: offset - col > 0 ? 1 : -1, offsetX:  offsetX};\n    }\n\n    /**\n     *\n     * @param {number} x\n     * @param {number} y\n     * @returns {Point}\n\n     */\n    screenToTextCoordinates(x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = {top:0, left: 0};\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        } else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n\n        return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);\n    }\n\n    /**\n     * Returns an object containing the `pageX` and `pageY` coordinates of the document position.\n     * @param {Number} row The document row position\n     * @param {Number} column The document column position\n     *\n     * @returns {{ pageX: number, pageY: number}}\n     **/\n    textToScreenCoordinates(row, column) {\n        var canvasPos = this.scroller.getBoundingClientRect();\n        var pos = this.session.documentToScreenPosition(row, column);\n\n        var x = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, row)\n             ? this.session.$bidiHandler.getPosLeft(pos.column)\n             : Math.round(pos.column * this.characterWidth));\n\n        var y = pos.row * this.lineHeight;\n\n        return {\n            pageX: canvasPos.left + x - this.scrollLeft,\n            pageY: canvasPos.top + y - this.scrollTop\n        };\n    }\n\n    /**\n     *\n     * Focuses the current container.\n     **/\n    visualizeFocus() {\n        dom.addCssClass(this.container, \"ace_focus\");\n    }\n\n    /**\n     *\n     * Blurs the current container.\n     **/\n    visualizeBlur() {\n        dom.removeCssClass(this.container, \"ace_focus\");\n    }\n\n    /**\n     * @param {Object} composition\n\n     **/\n    showComposition(composition) {\n        this.$composition = composition;\n        if (!composition.cssText) {\n            composition.cssText = this.textarea.style.cssText;\n        }\n        if (composition.useTextareaForIME == undefined)\n            composition.useTextareaForIME = this.$useTextareaForIME;\n\n        if (this.$useTextareaForIME) {\n            dom.addCssClass(this.textarea, \"ace_composition\");\n            this.textarea.style.cssText = \"\";\n            this.$moveTextAreaToCursor();\n            this.$cursorLayer.element.style.display = \"none\";\n        }\n        else {\n            composition.markerId = this.session.addMarker(composition.markerRange, \"ace_composition_marker\", \"text\");\n        }\n    }\n\n    /**\n     * @param {String} text A string of text to use\n     *\n     * Sets the inner text of the current composition to `text`.\n\n     **/\n    setCompositionText(text) {\n        var cursor = this.session.selection.cursor;\n        this.addToken(text, \"composition_placeholder\", cursor.row, cursor.column);\n        this.$moveTextAreaToCursor();\n    }\n\n    /**\n     *\n     * Hides the current composition.\n\n     **/\n    hideComposition() {\n        if (!this.$composition)\n            return;\n\n        if (this.$composition.markerId)\n            this.session.removeMarker(this.$composition.markerId);\n\n        dom.removeCssClass(this.textarea, \"ace_composition\");\n        this.textarea.style.cssText = this.$composition.cssText;\n        var cursor = this.session.selection.cursor;\n        this.removeExtraToken(cursor.row, cursor.column);\n        this.$composition = null;\n        this.$cursorLayer.element.style.display = \"\";\n    }\n\n    /**\n     * @param {string} text\n     * @param {Point} [position]\n     */\n    setGhostText(text, position) {\n        var cursor = this.session.selection.cursor;\n        var insertPosition = position || { row: cursor.row, column: cursor.column };\n\n        this.removeGhostText();\n\n        var textChunks = this.$calculateWrappedTextChunks(text, insertPosition);\n        this.addToken(textChunks[0].text, \"ghost_text\", insertPosition.row, insertPosition.column);\n\n        this.$ghostText = {\n            text: text,\n            position: {\n                row: insertPosition.row,\n                column: insertPosition. column\n            }\n        };\n\n        var widgetDiv = dom.createElement(\"div\");\n        if (textChunks.length > 1) {\n            // If there are tokens to the right of the cursor, hide those.\n            var hiddenTokens = this.hideTokensAfterPosition(insertPosition.row, insertPosition.column);\n\n            var lastLineDiv;\n            textChunks.slice(1).forEach(el => {\n                var chunkDiv = dom.createElement(\"div\");\n                var chunkSpan = dom.createElement(\"span\");\n                chunkSpan.className = \"ace_ghost_text\";\n\n                // If the line is wider than the viewport, wrap the line\n                if (el.wrapped) chunkDiv.className = \"ghost_text_line_wrapped\";\n\n                // If a given line doesn't have text (e.g. it's a line of whitespace), set a space as the\n                // textcontent so that browsers render the empty line div.\n                if (el.text.length === 0) el.text = \" \";\n\n                chunkSpan.appendChild(dom.createTextNode(el.text));\n                chunkDiv.appendChild(chunkSpan);\n                widgetDiv.appendChild(chunkDiv);\n\n                // Overwrite lastLineDiv every iteration so at the end it points to\n                // the last added element.\n                lastLineDiv = chunkDiv;\n            });\n\n            // Add the hidden tokens to the last line of the ghost text.\n            hiddenTokens.forEach(token => {\n                var element = dom.createElement(\"span\");\n                if (!isTextToken(token.type)) element.className = \"ace_\" + token.type.replace(/\\./g, \" ace_\");\n                element.appendChild(dom.createTextNode(token.value));\n                lastLineDiv.appendChild(element);\n            });\n\n            this.$ghostTextWidget = {\n                el: widgetDiv,\n                row: insertPosition.row,\n                column: insertPosition.column,\n                className: \"ace_ghost_text_container\"\n            };\n            this.session.widgetManager.addLineWidget(this.$ghostTextWidget);\n\n            // Check wether the line widget fits in the part of the screen currently in view\n            var pixelPosition = this.$cursorLayer.getPixelPosition(insertPosition, true);\n            var el = this.container;\n            var height = el.getBoundingClientRect().height;\n            var ghostTextHeight = textChunks.length * this.lineHeight;\n            var fitsY = ghostTextHeight < (height - pixelPosition.top);\n\n            // If it fits, no action needed\n            if (fitsY) return;\n\n            // If it can fully fit in the screen, scroll down until it fits on the screen\n            // if it cannot fully fit, scroll so that the row with the cursor\n            // is at the top of the screen.\n            if (ghostTextHeight < height) {\n                this.scrollBy(0, (textChunks.length - 1) * this.lineHeight);\n            } else {\n                this.scrollToRow(insertPosition.row);\n            }\n        }\n\n    }\n\n    /**\n     * Calculates and organizes text into wrapped chunks. Initially splits the text by newline characters,\n     * then further processes each line based on display tokens and session settings for tab size and wrapping limits.\n     *\n     * @param {string} text\n     * @param {Point} position\n     * @return {{text: string, wrapped: boolean}[]}\n     */\n    $calculateWrappedTextChunks(text, position) {\n        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;\n        var limit = Math.floor(availableWidth / this.characterWidth) - 2;\n        limit = limit <= 0 ? 60 : limit; // this is a hack to prevent the editor from crashing when the window is too small\n\n        var textLines = text.split(/\\r?\\n/);\n        var textChunks = [];\n        for (var i = 0; i < textLines.length; i++) {\n            var displayTokens = this.session.$getDisplayTokens(textLines[i], position.column);\n            var wrapSplits = this.session.$computeWrapSplits(displayTokens, limit, this.session.$tabSize);\n\n            if (wrapSplits.length > 0) {\n                var start = 0;\n                wrapSplits.push(textLines[i].length);\n\n                for (var j = 0; j < wrapSplits.length; j++) {\n                    let textSlice = textLines[i].slice(start, wrapSplits[j]);\n                    textChunks.push({text: textSlice, wrapped: true});\n                    start = wrapSplits[j];\n                }\n            }\n            else {\n                textChunks.push({text: textLines[i], wrapped: false});\n            }\n        }\n        return textChunks;\n    }\n\n    removeGhostText() {\n        if (!this.$ghostText) return;\n\n        var position = this.$ghostText.position;\n        this.removeExtraToken(position.row, position.column);\n        if (this.$ghostTextWidget) {\n            this.session.widgetManager.removeLineWidget(this.$ghostTextWidget);\n            this.$ghostTextWidget = null;\n        }\n        this.$ghostText = null;\n    }\n\n    /**\n     * @param {string} text\n     * @param {string} type\n     * @param {number} row\n     * @param {number} [column]\n     */\n    addToken(text, type, row, column) {\n        var session = this.session;\n        session.bgTokenizer.lines[row] = null;\n        var newToken = {type: type, value: text};\n        var tokens = session.getTokens(row);\n        if (column == null || !tokens.length) {\n            tokens.push(newToken);\n        } else {\n            var l = 0;\n            for (var i =0; i < tokens.length; i++) {\n                var token = tokens[i];\n                l += token.value.length;\n                if (column <= l) {\n                    var diff = token.value.length - (l - column);\n                    var before = token.value.slice(0, diff);\n                    var after = token.value.slice(diff);\n\n                    tokens.splice(i, 1, {type: token.type, value: before},  newToken,  {type: token.type, value: after});\n                    break;\n                }\n            }\n        }\n        this.updateLines(row, row);\n    }\n\n    // Hide all non-ghost-text tokens to the right of a given position.\n    hideTokensAfterPosition(row, column) {\n        var tokens = this.session.getTokens(row);\n        var l = 0;\n        var hasPassedCursor = false;\n        var hiddenTokens = [];\n        // Loop over all tokens and track at what position in the line they end.\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            l += token.value.length;\n\n            if (token.type === \"ghost_text\") continue;\n\n            // If we've already passed the current cursor position, mark all of them as hidden.\n            if (hasPassedCursor) {\n                hiddenTokens.push({type: token.type, value: token.value});\n                token.type = \"hidden_token\";\n                continue;\n            }\n            // We call this method after we call addToken, so we are guaranteed a new token starts at the cursor position.\n            // Once we reached that point in the loop, flip the flag.\n            if (l === column) {\n                hasPassedCursor = true;\n            }\n        }\n        this.updateLines(row, row);\n        return hiddenTokens;\n    }\n\n    removeExtraToken(row, column) {\n        this.session.bgTokenizer.lines[row] = null;\n        this.updateLines(row, row);\n    }\n\n    /**\n     * [Sets a new theme for the editor. `theme` should exist, and be a directory path, like `ace/theme/textmate`.]{: #VirtualRenderer.setTheme}\n     * @param {String | Theme} [theme] The path to a theme\n     * @param {() => void} [cb] optional callback\n\n     **/\n    setTheme(theme, cb) {\n        var _self = this;\n        /**@type {any}*/\n        this.$themeId = theme;\n        _self._dispatchEvent('themeChange',{theme:theme});\n\n        if (!theme || typeof theme == \"string\") {\n            // @ts-ignore\n            var moduleName = theme || this.$options.theme.initialValue;\n            config.loadModule([\"theme\", moduleName], afterLoad);\n        } else {\n            afterLoad(theme);\n        }\n\n        /**\n         * @param {Theme} module\n         */\n        function afterLoad(module) {\n            if (_self.$themeId != theme)\n                return cb && cb();\n            if (!module || !module.cssClass)\n                throw new Error(\"couldn't load module \" + theme + \" or it didn't call define\");\n            if (module.$id)\n                _self.$themeId = module.$id;\n            dom.importCssString(\n                module.cssText,\n                module.cssClass,\n                _self.container\n            );\n            if (_self.theme)\n                dom.removeCssClass(_self.container, _self.theme.cssClass);\n            /**@type {any}*/\n            var padding = \"padding\" in module ? module.padding\n                : \"padding\" in (_self.theme || {}) ? 4 : _self.$padding;\n            if (_self.$padding && padding != _self.$padding)\n                _self.setPadding(padding);\n\n            // this is kept only for backwards compatibility\n            _self.$theme = module.cssClass;\n\n            _self.theme = module;\n            dom.addCssClass(_self.container, module.cssClass);\n            dom.setCssClass(_self.container, \"ace_dark\", module.isDark);\n\n            // force re-measure of the gutter width\n            if (_self.$size) {\n                _self.$size.width = 0;\n                _self.$updateSizeAsync();\n            }\n\n            _self._dispatchEvent('themeLoaded', {theme:module});\n            cb && cb();\n\n            // workaround for safari not redrawing the editor\n            // https://github.com/ajaxorg/ace/issues/5569\n            if (useragent.isSafari && _self.scroller) {\n                _self.scroller.style.background = \"red\";\n                _self.scroller.style.background = \"\";\n            }\n        }\n    }\n\n    /**\n     * [Returns the path of the current theme.]{: #VirtualRenderer.getTheme}\n     * @returns {String}\n     **/\n    getTheme() {\n        return this.$themeId;\n    }\n\n    // Methods allows to add / remove CSS classnames to the editor element.\n    // This feature can be used by plug-ins to provide a visual indication of\n    // a certain mode that editor is in.\n\n    /**\n     * [Adds a new class, `style`, to the editor.]{: #VirtualRenderer.setStyle}\n     * @param {String} style A class name\n     * @param {boolean}[include]\n     **/\n    setStyle(style, include) {\n        dom.setCssClass(this.container, style, include !== false);\n    }\n\n    /**\n     * [Removes the class `style` from the editor.]{: #VirtualRenderer.unsetStyle}\n     * @param {String} style A class name\n     *\n     **/\n    unsetStyle(style) {\n        dom.removeCssClass(this.container, style);\n    }\n\n    /**\n     * @param {string} style\n     */\n    setCursorStyle(style) {\n        dom.setStyle(this.scroller.style, \"cursor\", style);\n    }\n\n    /**\n     * @param {String} cursorStyle A css cursor style\n     **/\n    setMouseCursor(cursorStyle) {\n        dom.setStyle(this.scroller.style, \"cursor\", cursorStyle);\n    }\n\n    attachToShadowRoot() {\n        dom.importCssString(editorCss, \"ace_editor.css\", this.container);\n    }\n\n    /**\n     * Destroys the text and cursor layers for this renderer.\n\n     **/\n    destroy() {\n        this.freeze();\n        this.$fontMetrics.destroy();\n        this.$cursorLayer.destroy();\n        this.removeAllListeners();\n        this.container.textContent = \"\";\n        this.setOption(\"useResizeObserver\", false);\n    }\n\n    /**\n     *\n     * @param {boolean} [val]\n     */\n    $updateCustomScrollbar(val) {\n        var _self = this;\n        this.$horizScroll = this.$vScroll = null;\n        this.scrollBarV.element.remove();\n        this.scrollBarH.element.remove();\n        if (this.$scrollDecorator) {\n            delete this.$scrollDecorator;\n        }\n        if (val === true) {\n            /**@type {import(\"../ace-internal\").Ace.VScrollbar}*/\n            this.scrollBarV = new VScrollBarCustom(this.container, this);\n            /**@type {import(\"../ace-internal\").Ace.HScrollbar}*/\n            this.scrollBarH = new HScrollBarCustom(this.container, this);\n            this.scrollBarV.setHeight(this.$size.scrollerHeight);\n            this.scrollBarH.setWidth(this.$size.scrollerWidth);\n\n            this.scrollBarV.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation) _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n            });\n            this.scrollBarH.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation) _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n            });\n            this.$scrollDecorator = new Decorator(this.scrollBarV, this);\n            this.$scrollDecorator.$updateDecorators();\n        }\n        else {\n            this.scrollBarV = new VScrollBar(this.container, this);\n            this.scrollBarH = new HScrollBar(this.container, this);\n            this.scrollBarV.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation) _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n            });\n            this.scrollBarH.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation) _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n            });\n        }\n    }\n\n    /**\n\n     */\n    $addResizeObserver() {\n        if (!window.ResizeObserver || this.$resizeObserver) return;\n        var self = this;\n        this.$resizeTimer = lang.delayedCall(function() {\n            if (!self.destroyed)  self.onResize();\n        }, 50);\n        this.$resizeObserver = new window.ResizeObserver(function(e) {\n            var w = e[0].contentRect.width;\n            var h = e[0].contentRect.height;\n            if (\n                Math.abs(self.$size.width - w) > 1\n                || Math.abs(self.$size.height - h) > 1\n            ) {\n                self.$resizeTimer.delay();\n            } else {\n                self.$resizeTimer.cancel();\n            }\n        });\n        this.$resizeObserver.observe(this.container);\n    }\n\n}\n\nVirtualRenderer.prototype.CHANGE_CURSOR = 1;\nVirtualRenderer.prototype.CHANGE_MARKER = 2;\nVirtualRenderer.prototype.CHANGE_GUTTER = 4;\nVirtualRenderer.prototype.CHANGE_SCROLL = 8;\nVirtualRenderer.prototype.CHANGE_LINES = 16;\nVirtualRenderer.prototype.CHANGE_TEXT = 32;\nVirtualRenderer.prototype.CHANGE_SIZE = 64;\nVirtualRenderer.prototype.CHANGE_MARKER_BACK = 128;\nVirtualRenderer.prototype.CHANGE_MARKER_FRONT = 256;\nVirtualRenderer.prototype.CHANGE_FULL = 512;\nVirtualRenderer.prototype.CHANGE_H_SCROLL = 1024;\nVirtualRenderer.prototype.$changes = 0;\nVirtualRenderer.prototype.$padding = null;\nVirtualRenderer.prototype.$frozen = false;\nVirtualRenderer.prototype.STEPS = 8;\n\noop.implement(VirtualRenderer.prototype, EventEmitter);\n\nconfig.defineOptions(VirtualRenderer.prototype, \"renderer\", {\n    useResizeObserver: {\n        /**\n         * @param value\n         * @this{VirtualRenderer}\n         */\n        set: function(value) {\n            if (!value && this.$resizeObserver) {\n                this.$resizeObserver.disconnect();\n                this.$resizeTimer.cancel();\n                this.$resizeTimer = this.$resizeObserver = null;\n            } else if (value && !this.$resizeObserver) {\n                this.$addResizeObserver();\n            }\n        }\n    },\n    animatedScroll: {initialValue: false},\n    showInvisibles: {\n        set: function(value) {\n            if (this.$textLayer.setShowInvisibles(value))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: false\n    },\n    showPrintMargin: {\n        set: function() { this.$updatePrintMargin(); },\n        initialValue: true\n    },\n    printMarginColumn: {\n        set: function() { this.$updatePrintMargin(); },\n        initialValue: 80\n    },\n    printMargin: {\n        /**\n         * @param val\n         * @this{VirtualRenderer}\n         */\n        set: function(val) {\n            if (typeof val == \"number\")\n                this.$printMarginColumn = val;\n            this.$showPrintMargin = !!val;\n            this.$updatePrintMargin();\n        },\n        get: function() {\n            return this.$showPrintMargin && this.$printMarginColumn;\n        }\n    },\n    showGutter: {\n        set: function(show){\n            this.$gutter.style.display = show ? \"block\" : \"none\";\n            this.$loop.schedule(this.CHANGE_FULL);\n            this.onGutterResize();\n        },\n        initialValue: true\n    },\n    useSvgGutterIcons: {\n        set: function(value){\n            this.$gutterLayer.$useSvgGutterIcons = value;\n        },\n        initialValue: false\n    },\n    showFoldedAnnotations: {\n        set: function(value){\n            this.$gutterLayer.$showFoldedAnnotations = value;\n        },\n        initialValue: false\n    },\n    fadeFoldWidgets: {\n        set: function(show) {\n            dom.setCssClass(this.$gutter, \"ace_fade-fold-widgets\", show);\n        },\n        initialValue: false\n    },\n    showFoldWidgets: {\n        set: function(show) {\n            this.$gutterLayer.setShowFoldWidgets(show);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    displayIndentGuides: {\n        set: function(show) {\n            if (this.$textLayer.setDisplayIndentGuides(show))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: true\n    },\n    highlightIndentGuides: {\n        set: function (show) {\n            if (this.$textLayer.setHighlightIndentGuides(show) == true) {\n                this.$textLayer.$highlightIndentGuide();\n            }\n            else {\n                this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells);\n            }\n        },\n        initialValue: true\n    },\n    highlightGutterLine: {\n        set: function(shouldHighlight) {\n            this.$gutterLayer.setHighlightGutterLine(shouldHighlight);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    hScrollBarAlwaysVisible: {\n        set: function(val) {\n            if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    vScrollBarAlwaysVisible: {\n        set: function(val) {\n            if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    fontSize: {\n        set: function(size) {\n            if (typeof size == \"number\")\n                size = size + \"px\";\n            this.container.style.fontSize = size;\n            this.updateFontSize();\n        },\n        initialValue: 12\n    },\n    fontFamily: {\n        set: function(name) {\n            this.container.style.fontFamily = name;\n            this.updateFontSize();\n        }\n    },\n    maxLines: {\n        set: function(val) {\n            this.updateFull();\n        }\n    },\n    minLines: {\n        /**\n         * @param val\n         * @this{VirtualRenderer}\n         */\n        set: function(val) {\n            if (!(this.$minLines < 0x1ffffffffffff))\n                this.$minLines = 0;\n            this.updateFull();\n        }\n    },\n    maxPixelHeight: {\n        set: function(val) {\n            this.updateFull();\n        },\n        initialValue: 0\n    },\n    scrollPastEnd: {\n        /**\n         * @param val\n         * @this{VirtualRenderer}\n         */\n        set: function(val) {\n            val = +val || 0;\n            if (this.$scrollPastEnd == val)\n                return;\n            this.$scrollPastEnd = val;\n            this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: 0,\n        handlesSet: true\n    },\n    fixedWidthGutter: {\n        set: function(val) {\n            this.$gutterLayer.$fixedWidth = !!val;\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        }\n    },\n    customScrollbar: {\n        set: function(val) {\n            this.$updateCustomScrollbar(val);\n        },\n        initialValue: false\n    },\n    theme: {\n        set: function(val) { this.setTheme(val); },\n        get: function() { return this.$themeId || this.theme; },\n        initialValue: \"./theme/textmate\",\n        handlesSet: true\n    },\n    hasCssTransforms: {\n    },\n    useTextareaForIME: {\n        initialValue: !useragent.isMobile && !useragent.isIE\n    }\n});\n\nexports.VirtualRenderer = VirtualRenderer;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3ZpcnR1YWxfcmVuZGVyZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLGFBQWEsc0NBQXNDO0FBQ25ELGFBQWEscUNBQXFDO0FBQ2xELGFBQWEscUNBQXFDO0FBQ2xEO0FBQ0EsVUFBVSxtQkFBTyxDQUFDLHlEQUFXO0FBQzdCLFVBQVUsbUJBQU8sQ0FBQyx5REFBVztBQUM3QixXQUFXLG1CQUFPLENBQUMsMkRBQVk7QUFDL0IsYUFBYSxtQkFBTyxDQUFDLHVEQUFVO0FBQy9CLGtCQUFrQixpR0FBZ0M7QUFDbEQsa0JBQWtCLGlHQUFnQztBQUNsRCxnQkFBZ0IsMkZBQTRCO0FBQzVDLGtCQUFrQixpR0FBZ0M7QUFDbEQsaUJBQWlCLCtGQUFpQztBQUNsRCxpQkFBaUIsK0ZBQWlDO0FBQ2xELHVCQUF1Qiw2R0FBd0M7QUFDL0QsdUJBQXVCLDZHQUF3QztBQUMvRCxpQkFBaUIsaUdBQWtDO0FBQ25ELGtCQUFrQixrSEFBMkM7QUFDN0QsbUJBQW1CLGlIQUEyQztBQUM5RCxnQkFBZ0IsbUJBQU8sQ0FBQyx1RUFBa0I7QUFDMUMsZ0JBQWdCLDRHQUF1Qzs7QUFFdkQsZ0JBQWdCLG1CQUFPLENBQUMscUVBQWlCO0FBQ3pDLG9CQUFvQiw0R0FBd0M7O0FBRTVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkMsZUFBZSxRQUFROztBQUV2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUMsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjs7QUFFaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCOztBQUVoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsU0FBUzs7QUFFeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7O0FBRXZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxREFBcUQ7QUFDckQsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw4SEFBOEg7QUFDOUgsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2SEFBNkg7QUFDN0gsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFROztBQUV2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFROztBQUV2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFROztBQUV2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsU0FBUzs7QUFFeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxTQUFTO0FBQ3hCLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsa0RBQWtEO0FBQ2xELDhDQUE4Qzs7QUFFOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSw0Q0FBNEM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUIsV0FBVyxpQkFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVE7QUFDUjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjs7QUFFdEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLE9BQU87QUFDM0I7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsU0FBUztBQUN4QixlQUFlLFNBQVM7QUFDeEIsZUFBZSxZQUFZOztBQUUzQjtBQUNBO0FBQ0Esc0RBQXNELHFCQUFxQjtBQUMzRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUNBQWlDOztBQUVqQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUVBQW1FO0FBQ25FLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0I7QUFDaEI7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTs7QUFFdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDOztBQUUzQzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLE9BQU87QUFDdEIsaUJBQWlCLCtCQUErQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qzs7QUFFekM7QUFDQTtBQUNBLHdCQUF3QixzQkFBc0I7QUFDOUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsZ0NBQWdDLHVCQUF1QjtBQUN2RDtBQUNBLHFDQUFxQywrQkFBK0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsbUNBQW1DO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSwyQkFBMkIsbUJBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx5Q0FBeUMsZ0NBQWdDLGVBQWUsK0JBQStCO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtQkFBbUI7QUFDM0M7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsbUNBQW1DLHFDQUFxQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvSEFBb0g7QUFDcEgsZUFBZSxnQkFBZ0I7QUFDL0IsZUFBZSxZQUFZOztBQUUzQjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsSUFBSTtBQUN0QjtBQUNBLDRDQUE0QyxZQUFZOztBQUV4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLElBQUk7QUFDMUI7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlEQUFpRCxhQUFhO0FBQzlEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnREFBZ0Q7QUFDaEQsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRDtBQUNuRCxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0RBQW9EO0FBQ3BELGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHlDQUF5QztBQUMvRDtBQUNBLHNCQUFzQix5Q0FBeUM7QUFDL0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wscUJBQXFCLG9CQUFvQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLDBCQUEwQiw0QkFBNEI7QUFDdEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQSwwQkFBMEIsNEJBQTRCO0FBQ3REO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBLDZCQUE2QixxQkFBcUI7QUFDbEQsMEJBQTBCLHFDQUFxQztBQUMvRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsdUJBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL25vZGVfbW9kdWxlcy9hY2UtY29kZS9zcmMvdmlydHVhbF9yZW5kZXJlci5qcz81NjNlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9lZGl0X3Nlc3Npb25cIikuRWRpdFNlc3Npb259IEVkaXRTZXNzaW9uXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vYWNlLWludGVybmFsXCIpLkFjZS5Qb2ludH0gUG9pbnRcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLlRoZW1lfSBUaGVtZVxuICovXG52YXIgb29wID0gcmVxdWlyZShcIi4vbGliL29vcFwiKTtcbnZhciBkb20gPSByZXF1aXJlKFwiLi9saWIvZG9tXCIpO1xudmFyIGxhbmcgPSByZXF1aXJlKFwiLi9saWIvbGFuZ1wiKTtcbnZhciBjb25maWcgPSByZXF1aXJlKFwiLi9jb25maWdcIik7XG52YXIgR3V0dGVyTGF5ZXIgPSByZXF1aXJlKFwiLi9sYXllci9ndXR0ZXJcIikuR3V0dGVyO1xudmFyIE1hcmtlckxheWVyID0gcmVxdWlyZShcIi4vbGF5ZXIvbWFya2VyXCIpLk1hcmtlcjtcbnZhciBUZXh0TGF5ZXIgPSByZXF1aXJlKFwiLi9sYXllci90ZXh0XCIpLlRleHQ7XG52YXIgQ3Vyc29yTGF5ZXIgPSByZXF1aXJlKFwiLi9sYXllci9jdXJzb3JcIikuQ3Vyc29yO1xudmFyIEhTY3JvbGxCYXIgPSByZXF1aXJlKFwiLi9zY3JvbGxiYXJcIikuSFNjcm9sbEJhcjtcbnZhciBWU2Nyb2xsQmFyID0gcmVxdWlyZShcIi4vc2Nyb2xsYmFyXCIpLlZTY3JvbGxCYXI7XG52YXIgSFNjcm9sbEJhckN1c3RvbSA9IHJlcXVpcmUoXCIuL3Njcm9sbGJhcl9jdXN0b21cIikuSFNjcm9sbEJhcjtcbnZhciBWU2Nyb2xsQmFyQ3VzdG9tID0gcmVxdWlyZShcIi4vc2Nyb2xsYmFyX2N1c3RvbVwiKS5WU2Nyb2xsQmFyO1xudmFyIFJlbmRlckxvb3AgPSByZXF1aXJlKFwiLi9yZW5kZXJsb29wXCIpLlJlbmRlckxvb3A7XG52YXIgRm9udE1ldHJpY3MgPSByZXF1aXJlKFwiLi9sYXllci9mb250X21ldHJpY3NcIikuRm9udE1ldHJpY3M7XG52YXIgRXZlbnRFbWl0dGVyID0gcmVxdWlyZShcIi4vbGliL2V2ZW50X2VtaXR0ZXJcIikuRXZlbnRFbWl0dGVyO1xudmFyIGVkaXRvckNzcyA9IHJlcXVpcmUoXCIuL2Nzcy9lZGl0b3ItY3NzXCIpO1xudmFyIERlY29yYXRvciA9IHJlcXVpcmUoXCIuL2xheWVyL2RlY29yYXRvcnNcIikuRGVjb3JhdG9yO1xuXG52YXIgdXNlcmFnZW50ID0gcmVxdWlyZShcIi4vbGliL3VzZXJhZ2VudFwiKTtcbmNvbnN0IGlzVGV4dFRva2VuID0gcmVxdWlyZShcIi4vbGF5ZXIvdGV4dF91dGlsXCIpLmlzVGV4dFRva2VuO1xuXG5kb20uaW1wb3J0Q3NzU3RyaW5nKGVkaXRvckNzcywgXCJhY2VfZWRpdG9yLmNzc1wiLCBmYWxzZSk7XG5cbi8qKlxuICogVGhlIGNsYXNzIHRoYXQgaXMgcmVzcG9uc2libGUgZm9yIGRyYXdpbmcgZXZlcnl0aGluZyB5b3Ugc2VlIG9uIHRoZSBzY3JlZW4hXG4gKiBAcmVsYXRlZCBlZGl0b3IucmVuZGVyZXJcbiAqKi9cbmNsYXNzIFZpcnR1YWxSZW5kZXJlciB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBgVmlydHVhbFJlbmRlcmVyYCB3aXRoaW4gdGhlIGBjb250YWluZXJgIHNwZWNpZmllZCwgYXBwbHlpbmcgdGhlIGdpdmVuIGB0aGVtZWAuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudCB8IG51bGx9IFtjb250YWluZXJdIFRoZSByb290IGVsZW1lbnQgb2YgdGhlIGVkaXRvclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbdGhlbWVdIFRoZSBzdGFydGluZyB0aGVtZVxuXG4gICAgICoqL1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgdGhlbWUpIHtcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXIgfHwgZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICAgICAgZG9tLmFkZENzc0NsYXNzKHRoaXMuY29udGFpbmVyLCBcImFjZV9lZGl0b3JcIik7XG4gICAgICAgIGlmIChkb20uSElfRFBJKSBkb20uYWRkQ3NzQ2xhc3ModGhpcy5jb250YWluZXIsIFwiYWNlX2hpZHBpXCIpO1xuXG4gICAgICAgIHRoaXMuc2V0VGhlbWUodGhlbWUpO1xuICAgICAgICBpZiAoY29uZmlnLmdldChcInVzZVN0cmljdENTUFwiKSA9PSBudWxsKVxuICAgICAgICAgICAgY29uZmlnLnNldChcInVzZVN0cmljdENTUFwiLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy4kZ3V0dGVyID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuJGd1dHRlci5jbGFzc05hbWUgPSBcImFjZV9ndXR0ZXJcIjtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy4kZ3V0dGVyKTtcbiAgICAgICAgdGhpcy4kZ3V0dGVyLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgLyoqQHR5cGUge0hUTUxFbGVtZW50fSovXG4gICAgICAgIHRoaXMuc2Nyb2xsZXIgPSBkb20uY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5zY3JvbGxlci5jbGFzc05hbWUgPSBcImFjZV9zY3JvbGxlclwiO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc2Nyb2xsZXIpO1xuICAgICAgICAvKipAdHlwZSB7SFRNTEVsZW1lbnR9Ki9cbiAgICAgICAgdGhpcy5jb250ZW50ID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuY29udGVudC5jbGFzc05hbWUgPSBcImFjZV9jb250ZW50XCI7XG4gICAgICAgIHRoaXMuc2Nyb2xsZXIuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50KTtcblxuICAgICAgICB0aGlzLiRndXR0ZXJMYXllciA9IG5ldyBHdXR0ZXJMYXllcih0aGlzLiRndXR0ZXIpO1xuICAgICAgICB0aGlzLiRndXR0ZXJMYXllci5vbihcImNoYW5nZUd1dHRlcldpZHRoXCIsIHRoaXMub25HdXR0ZXJSZXNpemUuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy4kbWFya2VyQmFjayA9IG5ldyBNYXJrZXJMYXllcih0aGlzLmNvbnRlbnQpO1xuICAgICAgICB2YXIgdGV4dExheWVyID0gdGhpcy4kdGV4dExheWVyID0gbmV3IFRleHRMYXllcih0aGlzLmNvbnRlbnQpO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IHRleHRMYXllci5lbGVtZW50O1xuXG4gICAgICAgIHRoaXMuJG1hcmtlckZyb250ID0gbmV3IE1hcmtlckxheWVyKHRoaXMuY29udGVudCk7XG5cbiAgICAgICAgdGhpcy4kY3Vyc29yTGF5ZXIgPSBuZXcgQ3Vyc29yTGF5ZXIodGhpcy5jb250ZW50KTtcblxuICAgICAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXIgaXMgdmlzaWJsZVxuICAgICAgICB0aGlzLiRob3JpelNjcm9sbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiR2U2Nyb2xsID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5zY3JvbGxCYXIgPVxuICAgICAgICAgICAgdGhpcy5zY3JvbGxCYXJWID0gbmV3IFZTY3JvbGxCYXIodGhpcy5jb250YWluZXIsIHRoaXMpO1xuICAgICAgICB0aGlzLnNjcm9sbEJhckggPSBuZXcgSFNjcm9sbEJhcih0aGlzLmNvbnRhaW5lciwgdGhpcyk7XG4gICAgICAgIHRoaXMuc2Nyb2xsQmFyVi5vbihcInNjcm9sbFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoIV9zZWxmLiRzY3JvbGxBbmltYXRpb24pXG4gICAgICAgICAgICAgICAgX3NlbGYuc2Vzc2lvbi5zZXRTY3JvbGxUb3AoZS5kYXRhIC0gX3NlbGYuc2Nyb2xsTWFyZ2luLnRvcCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNjcm9sbEJhckgub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKCFfc2VsZi4kc2Nyb2xsQW5pbWF0aW9uKVxuICAgICAgICAgICAgICAgIF9zZWxmLnNlc3Npb24uc2V0U2Nyb2xsTGVmdChlLmRhdGEgLSBfc2VsZi5zY3JvbGxNYXJnaW4ubGVmdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgdGhpcy5zY3JvbGxMZWZ0ID0gMDtcblxuICAgICAgICB0aGlzLmN1cnNvclBvcyA9IHtcbiAgICAgICAgICAgIHJvdyA6IDAsXG4gICAgICAgICAgICBjb2x1bW4gOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy4kZm9udE1ldHJpY3MgPSBuZXcgRm9udE1ldHJpY3ModGhpcy5jb250YWluZXIpO1xuICAgICAgICB0aGlzLiR0ZXh0TGF5ZXIuJHNldEZvbnRNZXRyaWNzKHRoaXMuJGZvbnRNZXRyaWNzKTtcbiAgICAgICAgdGhpcy4kdGV4dExheWVyLm9uKFwiY2hhbmdlQ2hhcmFjdGVyU2l6ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBfc2VsZi51cGRhdGVDaGFyYWN0ZXJTaXplKCk7XG4gICAgICAgICAgICBfc2VsZi5vblJlc2l6ZSh0cnVlLCBfc2VsZi5ndXR0ZXJXaWR0aCwgX3NlbGYuJHNpemUud2lkdGgsIF9zZWxmLiRzaXplLmhlaWdodCk7XG4gICAgICAgICAgICBfc2VsZi5fc2lnbmFsKFwiY2hhbmdlQ2hhcmFjdGVyU2l6ZVwiLCBlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kc2l6ZSA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgc2Nyb2xsZXJIZWlnaHQ6IDAsXG4gICAgICAgICAgICBzY3JvbGxlcldpZHRoOiAwLFxuICAgICAgICAgICAgJGRpcnR5OiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5sYXllckNvbmZpZyA9IHtcbiAgICAgICAgICAgIHdpZHRoIDogMSxcbiAgICAgICAgICAgIHBhZGRpbmcgOiAwLFxuICAgICAgICAgICAgZmlyc3RSb3cgOiAwLFxuICAgICAgICAgICAgZmlyc3RSb3dTY3JlZW46IDAsXG4gICAgICAgICAgICBsYXN0Um93IDogMCxcbiAgICAgICAgICAgIGxpbmVIZWlnaHQgOiAwLFxuICAgICAgICAgICAgY2hhcmFjdGVyV2lkdGggOiAwLFxuICAgICAgICAgICAgbWluSGVpZ2h0IDogMSxcbiAgICAgICAgICAgIG1heEhlaWdodCA6IDEsXG4gICAgICAgICAgICBvZmZzZXQgOiAwLFxuICAgICAgICAgICAgaGVpZ2h0IDogMSxcbiAgICAgICAgICAgIGd1dHRlck9mZnNldDogMVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2Nyb2xsTWFyZ2luID0ge1xuICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgICAgdjogMCxcbiAgICAgICAgICAgIGg6IDBcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1hcmdpbiA9IHtcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgIHY6IDAsXG4gICAgICAgICAgICBoOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy4ka2VlcFRleHRBcmVhQXRDdXJzb3IgPSAhdXNlcmFnZW50LmlzSU9TO1xuXG4gICAgICAgIHRoaXMuJGxvb3AgPSBuZXcgUmVuZGVyTG9vcChcbiAgICAgICAgICAgIHRoaXMuJHJlbmRlckNoYW5nZXMuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXdcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9GVUxMKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUNoYXJhY3RlclNpemUoKTtcbiAgICAgICAgdGhpcy5zZXRQYWRkaW5nKDQpO1xuICAgICAgICB0aGlzLiRhZGRSZXNpemVPYnNlcnZlcigpO1xuICAgICAgICBjb25maWcucmVzZXRPcHRpb25zKHRoaXMpO1xuICAgICAgICBjb25maWcuX3NpZ25hbChcInJlbmRlcmVyXCIsIHRoaXMpO1xuICAgIH1cblxuXG4gICAgLy8gdGhpcy4kbG9nQ2hhbmdlcyA9IGZ1bmN0aW9uKGNoYW5nZXMpIHtcbiAgICAvLyAgICAgdmFyIGEgPSBcIlwiXG4gICAgLy8gICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfQ1VSU09SKSBhICs9IFwiIGN1cnNvclwiO1xuICAgIC8vICAgICBpZiAoY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX01BUktFUikgYSArPSBcIiBtYXJrZXJcIjtcbiAgICAvLyAgICAgaWYgKGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9HVVRURVIpIGEgKz0gXCIgZ3V0dGVyXCI7XG4gICAgLy8gICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfU0NST0xMKSBhICs9IFwiIHNjcm9sbFwiO1xuICAgIC8vICAgICBpZiAoY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX0xJTkVTKSBhICs9IFwiIGxpbmVzXCI7XG4gICAgLy8gICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfVEVYVCkgYSArPSBcIiB0ZXh0XCI7XG4gICAgLy8gICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfU0laRSkgYSArPSBcIiBzaXplXCI7XG4gICAgLy8gICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfTUFSS0VSX0JBQ0spIGEgKz0gXCIgbWFya2VyX2JhY2tcIjtcbiAgICAvLyAgICAgaWYgKGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9NQVJLRVJfRlJPTlQpIGEgKz0gXCIgbWFya2VyX2Zyb250XCI7XG4gICAgLy8gICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfRlVMTCkgYSArPSBcIiBmdWxsXCI7XG4gICAgLy8gICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfSF9TQ1JPTEwpIGEgKz0gXCIgaF9zY3JvbGxcIjtcbiAgICAvLyAgICAgY29uc29sZS5sb2coYS50cmltKCkpXG4gICAgLy8gfTtcblxuICAgIHVwZGF0ZUNoYXJhY3RlclNpemUoKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogbWlzc2luZyBwcm9wZXJ0eSBpbml0aWFsaXphdGlvbiBhbnl3aGVyZSBpbiBjb2RlYmFzZVxuICAgICAgICBpZiAodGhpcy4kdGV4dExheWVyLmFsbG93Qm9sZEZvbnRzICE9IHRoaXMuJGFsbG93Qm9sZEZvbnRzKSB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IG1pc3NpbmcgcHJvcGVydHkgaW5pdGlhbGl6YXRpb24gYW55d2hlcmUgaW4gY29kZWJhc2VcbiAgICAgICAgICAgIHRoaXMuJGFsbG93Qm9sZEZvbnRzID0gdGhpcy4kdGV4dExheWVyLmFsbG93Qm9sZEZvbnRzO1xuICAgICAgICAgICAgdGhpcy5zZXRTdHlsZShcImFjZV9ub2JvbGRcIiwgIXRoaXMuJGFsbG93Qm9sZEZvbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGF5ZXJDb25maWcuY2hhcmFjdGVyV2lkdGggPVxuICAgICAgICB0aGlzLmNoYXJhY3RlcldpZHRoID0gdGhpcy4kdGV4dExheWVyLmdldENoYXJhY3RlcldpZHRoKCk7XG4gICAgICAgIHRoaXMubGF5ZXJDb25maWcubGluZUhlaWdodCA9XG4gICAgICAgIHRoaXMubGluZUhlaWdodCA9IHRoaXMuJHRleHRMYXllci5nZXRMaW5lSGVpZ2h0KCk7XG4gICAgICAgIHRoaXMuJHVwZGF0ZVByaW50TWFyZ2luKCk7XG4gICAgICAgIC8vIHNldCBleHBsaWNpdCBsaW5lIGhlaWdodCB0byBhdm9pZCBub3JtYWwgcmVzb2x2aW5nIHRvIGRpZmZlcmVudCB2YWx1ZXMgYmFzZWQgb24gdGV4dFxuICAgICAgICBkb20uc2V0U3R5bGUodGhpcy5zY3JvbGxlci5zdHlsZSwgXCJsaW5lLWhlaWdodFwiLCB0aGlzLmxpbmVIZWlnaHQgKyBcInB4XCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQXNzb2NpYXRlcyB0aGUgcmVuZGVyZXIgd2l0aCBhbiBbW0VkaXRTZXNzaW9uIGBFZGl0U2Vzc2lvbmBdXS5cbiAgICAgKiBAcGFyYW0ge0VkaXRTZXNzaW9ufSBzZXNzaW9uIFRoZSBzZXNzaW9uIHRvIGFzc29jaWF0ZSB3aXRoXG4gICAgICoqL1xuICAgIHNldFNlc3Npb24oc2Vzc2lvbikge1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uKVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLmRvYy5vZmYoXCJjaGFuZ2VOZXdMaW5lTW9kZVwiLCB0aGlzLm9uQ2hhbmdlTmV3TGluZU1vZGUpO1xuXG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIGlmIChzZXNzaW9uICYmIHRoaXMuc2Nyb2xsTWFyZ2luLnRvcCAmJiBzZXNzaW9uLmdldFNjcm9sbFRvcCgpIDw9IDApXG4gICAgICAgICAgICBzZXNzaW9uLnNldFNjcm9sbFRvcCgtdGhpcy5zY3JvbGxNYXJnaW4udG9wKTtcblxuICAgICAgICB0aGlzLiRjdXJzb3JMYXllci5zZXRTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICB0aGlzLiRtYXJrZXJCYWNrLnNldFNlc3Npb24oc2Vzc2lvbik7XG4gICAgICAgIHRoaXMuJG1hcmtlckZyb250LnNldFNlc3Npb24oc2Vzc2lvbik7XG4gICAgICAgIHRoaXMuJGd1dHRlckxheWVyLnNldFNlc3Npb24oc2Vzc2lvbik7XG4gICAgICAgIHRoaXMuJHRleHRMYXllci5zZXRTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICBpZiAoIXNlc3Npb24pXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9GVUxMKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLiRzZXRGb250TWV0cmljcyh0aGlzLiRmb250TWV0cmljcyk7XG4gICAgICAgIHRoaXMuc2Nyb2xsQmFySC5zY3JvbGxMZWZ0ID0gdGhpcy5zY3JvbGxCYXJWLnNjcm9sbFRvcCA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5vbkNoYW5nZU5ld0xpbmVNb2RlID0gdGhpcy5vbkNoYW5nZU5ld0xpbmVNb2RlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25DaGFuZ2VOZXdMaW5lTW9kZSgpO1xuICAgICAgICB0aGlzLnNlc3Npb24uZG9jLm9uKFwiY2hhbmdlTmV3TGluZU1vZGVcIiwgdGhpcy5vbkNoYW5nZU5ld0xpbmVNb2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyBhIHBhcnRpYWwgdXBkYXRlIG9mIHRoZSB0ZXh0LCBmcm9tIHRoZSByYW5nZSBnaXZlbiBieSB0aGUgdHdvIHBhcmFtZXRlcnMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGZpcnN0Um93IFRoZSBmaXJzdCByb3cgdG8gdXBkYXRlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxhc3RSb3cgVGhlIGxhc3Qgcm93IHRvIHVwZGF0ZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ZvcmNlXVxuICAgICAqKi9cbiAgICB1cGRhdGVMaW5lcyhmaXJzdFJvdywgbGFzdFJvdywgZm9yY2UpIHtcbiAgICAgICAgaWYgKGxhc3RSb3cgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGxhc3RSb3cgPSBJbmZpbml0eTtcblxuICAgICAgICBpZiAoIXRoaXMuJGNoYW5nZWRMaW5lcykge1xuICAgICAgICAgICAgdGhpcy4kY2hhbmdlZExpbmVzID0ge1xuICAgICAgICAgICAgICAgIGZpcnN0Um93OiBmaXJzdFJvdyxcbiAgICAgICAgICAgICAgICBsYXN0Um93OiBsYXN0Um93XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuJGNoYW5nZWRMaW5lcy5maXJzdFJvdyA+IGZpcnN0Um93KVxuICAgICAgICAgICAgICAgIHRoaXMuJGNoYW5nZWRMaW5lcy5maXJzdFJvdyA9IGZpcnN0Um93O1xuXG4gICAgICAgICAgICBpZiAodGhpcy4kY2hhbmdlZExpbmVzLmxhc3RSb3cgPCBsYXN0Um93KVxuICAgICAgICAgICAgICAgIHRoaXMuJGNoYW5nZWRMaW5lcy5sYXN0Um93ID0gbGFzdFJvdztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBjaGFuZ2UgaGFwcGVuZWQgb2Zmc2NyZWVuIGFib3ZlIHVzIHRoZW4gaXQncyBwb3NzaWJsZVxuICAgICAgICAvLyB0aGF0IGEgbmV3IGxpbmUgd3JhcCB3aWxsIGFmZmVjdCB0aGUgcG9zaXRpb24gb2YgdGhlIGxpbmVzIG9uIG91clxuICAgICAgICAvLyBzY3JlZW4gc28gdGhleSBuZWVkIHJlZHJhd24uXG4gICAgICAgIC8vIFRPRE86IGJldHRlciBzb2x1dGlvbiBpcyB0byBub3QgY2hhbmdlIHNjcm9sbCBwb3NpdGlvbiB3aGVuIHRleHQgaXMgY2hhbmdlZCBvdXRzaWRlIG9mIHZpc2libGUgYXJlYVxuICAgICAgICBpZiAodGhpcy4kY2hhbmdlZExpbmVzLmxhc3RSb3cgPCB0aGlzLmxheWVyQ29uZmlnLmZpcnN0Um93KSB7XG4gICAgICAgICAgICBpZiAoZm9yY2UpXG4gICAgICAgICAgICAgICAgdGhpcy4kY2hhbmdlZExpbmVzLmxhc3RSb3cgPSB0aGlzLmxheWVyQ29uZmlnLmxhc3RSb3c7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiRjaGFuZ2VkTGluZXMuZmlyc3RSb3cgPiB0aGlzLmxheWVyQ29uZmlnLmxhc3RSb3cpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfTElORVMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIG9uQ2hhbmdlTmV3TGluZU1vZGUoKSB7XG4gICAgICAgIHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfVEVYVCk7XG4gICAgICAgIHRoaXMuJHRleHRMYXllci4kdXBkYXRlRW9sQ2hhcigpO1xuICAgICAgICB0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLnNldEVvbENoYXIodGhpcy4kdGV4dExheWVyLkVPTF9DSEFSKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkNoYW5nZVRhYlNpemUoKSB7XG4gICAgICAgIHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfVEVYVCB8IHRoaXMuQ0hBTkdFX01BUktFUik7XG4gICAgICAgIHRoaXMuJHRleHRMYXllci5vbkNoYW5nZVRhYlNpemUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyBhIGZ1bGwgdXBkYXRlIG9mIHRoZSB0ZXh0LCBmb3IgYWxsIHRoZSByb3dzLlxuICAgICAqKi9cbiAgICB1cGRhdGVUZXh0KCkge1xuICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX1RFWFQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJzIGEgZnVsbCB1cGRhdGUgb2YgYWxsIHRoZSBsYXllcnMsIGZvciBhbGwgdGhlIHJvd3MuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VdIElmIGB0cnVlYCwgZm9yY2VzIHRoZSBjaGFuZ2VzIHRocm91Z2hcblxuICAgICAqKi9cbiAgICB1cGRhdGVGdWxsKGZvcmNlKSB7XG4gICAgICAgIGlmIChmb3JjZSlcbiAgICAgICAgICAgIHRoaXMuJHJlbmRlckNoYW5nZXModGhpcy5DSEFOR0VfRlVMTCwgdHJ1ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfRlVMTCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgZm9udCBzaXplLlxuICAgICAqKi9cbiAgICB1cGRhdGVGb250U2l6ZSgpIHtcbiAgICAgICAgdGhpcy4kdGV4dExheWVyLmNoZWNrRm9yU2l6ZUNoYW5nZXMoKTtcbiAgICB9XG5cbiAgICAkdXBkYXRlU2l6ZUFzeW5jKCkge1xuICAgICAgICBpZiAodGhpcy4kbG9vcC5wZW5kaW5nKVxuICAgICAgICAgICAgdGhpcy4kc2l6ZS4kZGlydHkgPSB0cnVlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFtUcmlnZ2VycyBhIHJlc2l6ZSBvZiB0aGUgZWRpdG9yLl17OiAjVmlydHVhbFJlbmRlcmVyLm9uUmVzaXplfVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ZvcmNlXSBJZiBgdHJ1ZWAsIHJlY29tcHV0ZXMgdGhlIHNpemUsIGV2ZW4gaWYgdGhlIGhlaWdodCBhbmQgd2lkdGggaGF2ZW4ndCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtndXR0ZXJXaWR0aF0gVGhlIHdpZHRoIG9mIHRoZSBndXR0ZXIgaW4gcGl4ZWxzXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt3aWR0aF0gVGhlIHdpZHRoIG9mIHRoZSBlZGl0b3IgaW4gcGl4ZWxzXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtoZWlnaHRdIFRoZSBoaWVoZ3Qgb2YgdGhlIGVkaXRvciwgaW4gcGl4ZWxzXG4gICAgICogQGludGVybmFsXG4gICAgICoqL1xuICAgIG9uUmVzaXplKGZvcmNlLCBndXR0ZXJXaWR0aCwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICBpZiAodGhpcy5yZXNpemluZyA+IDIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucmVzaXppbmcgPiAwKVxuICAgICAgICAgICAgdGhpcy5yZXNpemluZysrO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnJlc2l6aW5nID0gZm9yY2UgPyAxIDogMDtcbiAgICAgICAgLy8gYHx8IGVsLnNjcm9sbEhlaWdodGAgaXMgcmVxdWlyZWQgZm9yIGF1dG9zaXppbmcgZWRpdG9ycyBvbiBpZVxuICAgICAgICAvLyB3aGVyZSBlbGVtZW50cyB3aXRoIGNsaWVudEhlaWdodCA9IDAgYWxzbyBoYXZlIGNsaWVudFdpZHRoID0gMFxuICAgICAgICB2YXIgZWwgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgaWYgKCFoZWlnaHQpXG4gICAgICAgICAgICBoZWlnaHQgPSBlbC5jbGllbnRIZWlnaHQgfHwgZWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICBpZiAoIWhlaWdodCAmJiB0aGlzLiRtYXhMaW5lcyAmJiB0aGlzLmxpbmVIZWlnaHQgPiAxKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSBhcmUgc3VwcG9zZWQgdG8gZml0IHRvIGNvbnRlbnQgc2V0IGhlaWdodCBhdCBsZWFzdCB0byAxXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHJlbmRlciBkb2VzIG5vdCBleGl0IGVhcmx5IGJlZm9yZSBjYWxsaW5nICRhdXRvc2l6ZVxuICAgICAgICAgICAgaWYgKCFlbC5zdHlsZS5oZWlnaHQgfHwgZWwuc3R5bGUuaGVpZ2h0ID09IFwiMHB4XCIpIHtcbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBcIjFweFwiO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IGVsLmNsaWVudEhlaWdodCB8fCBlbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3aWR0aClcbiAgICAgICAgICAgIHdpZHRoID0gZWwuY2xpZW50V2lkdGggfHwgZWwuc2Nyb2xsV2lkdGg7XG4gICAgICAgIHZhciBjaGFuZ2VzID0gdGhpcy4kdXBkYXRlQ2FjaGVkU2l6ZShmb3JjZSwgZ3V0dGVyV2lkdGgsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIGlmICh0aGlzLiRyZXNpemVUaW1lcikgdGhpcy4kcmVzaXplVGltZXIuY2FuY2VsKCk7XG5cbiAgICAgICAgaWYgKCF0aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0IHx8ICghd2lkdGggJiYgIWhlaWdodCkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNpemluZyA9IDA7XG5cbiAgICAgICAgaWYgKGZvcmNlKVxuICAgICAgICAgICAgdGhpcy4kZ3V0dGVyTGF5ZXIuJHBhZGRpbmcgPSBudWxsO1xuXG4gICAgICAgIGlmIChmb3JjZSlcbiAgICAgICAgICAgIHRoaXMuJHJlbmRlckNoYW5nZXMoY2hhbmdlcyB8IHRoaXMuJGNoYW5nZXMsIHRydWUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKGNoYW5nZXMgfCB0aGlzLiRjaGFuZ2VzKTtcblxuICAgICAgICBpZiAodGhpcy5yZXNpemluZylcbiAgICAgICAgICAgIHRoaXMucmVzaXppbmcgPSAwO1xuICAgICAgICAvLyByZXNldCBjYWNoZWQgdmFsdWVzIG9uIHNjcm9sbGJhcnMsIG5lZWRzIHRvIGJlIHJlbW92ZWQgd2hlbiBzd2l0Y2hpbmcgdG8gbm9uLW5hdGl2ZSBzY3JvbGxiYXJzXG4gICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYWpheG9yZy9hY2UvaXNzdWVzLzIxOTVcbiAgICAgICAgdGhpcy5zY3JvbGxCYXJILnNjcm9sbExlZnQgPSB0aGlzLnNjcm9sbEJhclYuc2Nyb2xsVG9wID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuJGN1c3RvbVNjcm9sbGJhcikge1xuICAgICAgICAgICAgdGhpcy4kdXBkYXRlQ3VzdG9tU2Nyb2xsYmFyKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIFtmb3JjZV1cbiAgICAgKiBAcGFyYW0gW2d1dHRlcldpZHRoXVxuICAgICAqIEBwYXJhbSBbd2lkdGhdXG4gICAgICogQHBhcmFtIFtoZWlnaHRdXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuXG4gICAgICovXG4gICAgJHVwZGF0ZUNhY2hlZFNpemUoZm9yY2UsIGd1dHRlcldpZHRoLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIGhlaWdodCAtPSAodGhpcy4kZXh0cmFIZWlnaHQgfHwgMCk7XG4gICAgICAgIHZhciBjaGFuZ2VzID0gMDtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLiRzaXplO1xuICAgICAgICB2YXIgb2xkU2l6ZSA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBzaXplLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBzaXplLmhlaWdodCxcbiAgICAgICAgICAgIHNjcm9sbGVySGVpZ2h0OiBzaXplLnNjcm9sbGVySGVpZ2h0LFxuICAgICAgICAgICAgc2Nyb2xsZXJXaWR0aDogc2l6ZS5zY3JvbGxlcldpZHRoXG4gICAgICAgIH07XG4gICAgICAgIGlmIChoZWlnaHQgJiYgKGZvcmNlIHx8IHNpemUuaGVpZ2h0ICE9IGhlaWdodCkpIHtcbiAgICAgICAgICAgIHNpemUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgY2hhbmdlcyB8PSB0aGlzLkNIQU5HRV9TSVpFO1xuXG4gICAgICAgICAgICBzaXplLnNjcm9sbGVySGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICBpZiAodGhpcy4kaG9yaXpTY3JvbGwpXG4gICAgICAgICAgICAgICAgc2l6ZS5zY3JvbGxlckhlaWdodCAtPSB0aGlzLnNjcm9sbEJhckguZ2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFyVi5zZXRIZWlnaHQoc2l6ZS5zY3JvbGxlckhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEJhclYuZWxlbWVudC5zdHlsZS5ib3R0b20gPSB0aGlzLnNjcm9sbEJhckguZ2V0SGVpZ2h0KCkgKyBcInB4XCI7XG5cbiAgICAgICAgICAgIGNoYW5nZXMgPSBjaGFuZ2VzIHwgdGhpcy5DSEFOR0VfU0NST0xMO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdpZHRoICYmIChmb3JjZSB8fCBzaXplLndpZHRoICE9IHdpZHRoKSkge1xuICAgICAgICAgICAgY2hhbmdlcyB8PSB0aGlzLkNIQU5HRV9TSVpFO1xuICAgICAgICAgICAgc2l6ZS53aWR0aCA9IHdpZHRoO1xuXG4gICAgICAgICAgICBpZiAoZ3V0dGVyV2lkdGggPT0gbnVsbClcbiAgICAgICAgICAgICAgICBndXR0ZXJXaWR0aCA9IHRoaXMuJHNob3dHdXR0ZXIgPyB0aGlzLiRndXR0ZXIub2Zmc2V0V2lkdGggOiAwO1xuXG4gICAgICAgICAgICB0aGlzLmd1dHRlcldpZHRoID0gZ3V0dGVyV2lkdGg7XG5cbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZSh0aGlzLnNjcm9sbEJhckguZWxlbWVudC5zdHlsZSwgXCJsZWZ0XCIsIGd1dHRlcldpZHRoICsgXCJweFwiKTtcbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZSh0aGlzLnNjcm9sbGVyLnN0eWxlLCBcImxlZnRcIiwgZ3V0dGVyV2lkdGggKyB0aGlzLm1hcmdpbi5sZWZ0ICsgXCJweFwiKTtcbiAgICAgICAgICAgIHNpemUuc2Nyb2xsZXJXaWR0aCA9IE1hdGgubWF4KDAsIHdpZHRoIC0gZ3V0dGVyV2lkdGggLSB0aGlzLnNjcm9sbEJhclYuZ2V0V2lkdGgoKSAtIHRoaXMubWFyZ2luLmgpO1xuICAgICAgICAgICAgZG9tLnNldFN0eWxlKHRoaXMuJGd1dHRlci5zdHlsZSwgXCJsZWZ0XCIsIHRoaXMubWFyZ2luLmxlZnQgKyBcInB4XCIpO1xuXG4gICAgICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLnNjcm9sbEJhclYuZ2V0V2lkdGgoKSArIFwicHhcIjtcbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZSh0aGlzLnNjcm9sbEJhckguZWxlbWVudC5zdHlsZSwgXCJyaWdodFwiLCByaWdodCk7XG4gICAgICAgICAgICBkb20uc2V0U3R5bGUodGhpcy5zY3JvbGxlci5zdHlsZSwgXCJyaWdodFwiLCByaWdodCk7XG4gICAgICAgICAgICBkb20uc2V0U3R5bGUodGhpcy5zY3JvbGxlci5zdHlsZSwgXCJib3R0b21cIiwgdGhpcy5zY3JvbGxCYXJILmdldEhlaWdodCgpKTtcblxuICAgICAgICAgICAgdGhpcy5zY3JvbGxCYXJILnNldFdpZHRoKHNpemUuc2Nyb2xsZXJXaWR0aCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNlc3Npb24gJiYgdGhpcy5zZXNzaW9uLmdldFVzZVdyYXBNb2RlKCkgJiYgdGhpcy5hZGp1c3RXcmFwTGltaXQoKSB8fCBmb3JjZSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZXMgfD0gdGhpcy5DSEFOR0VfRlVMTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNpemUuJGRpcnR5ID0gIXdpZHRoIHx8ICFoZWlnaHQ7XG5cbiAgICAgICAgaWYgKGNoYW5nZXMpXG4gICAgICAgICAgICB0aGlzLl9zaWduYWwoXCJyZXNpemVcIiwgb2xkU2l6ZSk7XG5cbiAgICAgICAgcmV0dXJuIGNoYW5nZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBvbkd1dHRlclJlc2l6ZSh3aWR0aCkge1xuICAgICAgICB2YXIgZ3V0dGVyV2lkdGggPSB0aGlzLiRzaG93R3V0dGVyID8gd2lkdGggOiAwO1xuICAgICAgICBpZiAoZ3V0dGVyV2lkdGggIT0gdGhpcy5ndXR0ZXJXaWR0aClcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMgfD0gdGhpcy4kdXBkYXRlQ2FjaGVkU2l6ZSh0cnVlLCBndXR0ZXJXaWR0aCwgdGhpcy4kc2l6ZS53aWR0aCwgdGhpcy4kc2l6ZS5oZWlnaHQpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uZ2V0VXNlV3JhcE1vZGUoKSAmJiB0aGlzLmFkanVzdFdyYXBMaW1pdCgpKSB7XG4gICAgICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX0ZVTEwpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuJHNpemUuJGRpcnR5KSB7XG4gICAgICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX0ZVTEwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kY29tcHV0ZUxheWVyQ29uZmlnKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSB3cmFwIGxpbWl0LCB3aGljaCBpcyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCBjYW4gZml0IHdpdGhpbiB0aGUgd2lkdGggb2YgdGhlIGVkaXQgYXJlYSBvbiBzY3JlZW4uXG5cbiAgICAgKiovXG4gICAgYWRqdXN0V3JhcExpbWl0KCkge1xuICAgICAgICB2YXIgYXZhaWxhYmxlV2lkdGggPSB0aGlzLiRzaXplLnNjcm9sbGVyV2lkdGggLSB0aGlzLiRwYWRkaW5nICogMjtcbiAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5mbG9vcihhdmFpbGFibGVXaWR0aCAvIHRoaXMuY2hhcmFjdGVyV2lkdGgpO1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uLmFkanVzdFdyYXBMaW1pdChsaW1pdCwgdGhpcy4kc2hvd1ByaW50TWFyZ2luICYmIHRoaXMuJHByaW50TWFyZ2luQ29sdW1uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVzIHdoZXRoZXIgeW91IHdhbnQgdG8gaGF2ZSBhbiBhbmltYXRlZCBzY3JvbGwgb3Igbm90LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdWxkQW5pbWF0ZSBTZXQgdG8gYHRydWVgIHRvIHNob3cgYW5pbWF0ZWQgc2Nyb2xsc1xuXG4gICAgICoqL1xuICAgIHNldEFuaW1hdGVkU2Nyb2xsKHNob3VsZEFuaW1hdGUpe1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcImFuaW1hdGVkU2Nyb2xsXCIsIHNob3VsZEFuaW1hdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhbiBhbmltYXRlZCBzY3JvbGwgaGFwcGVucyBvciBub3QuXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cbiAgICAgKiovXG4gICAgZ2V0QW5pbWF0ZWRTY3JvbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRhbmltYXRlZFNjcm9sbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVzIHdoZXRoZXIgeW91IHdhbnQgdG8gc2hvdyBpbnZpc2libGUgY2hhcmFjdGVycyBvciBub3QuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBzaG93SW52aXNpYmxlcyBTZXQgdG8gYHRydWVgIHRvIHNob3cgaW52aXNpYmxlc1xuXG4gICAgICoqL1xuICAgIHNldFNob3dJbnZpc2libGVzKHNob3dJbnZpc2libGVzKSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKFwic2hvd0ludmlzaWJsZXNcIiwgc2hvd0ludmlzaWJsZXMpO1xuICAgICAgICB0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLnNldFNob3dJbnZpc2libGVzKHNob3dJbnZpc2libGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgaW52aXNpYmxlIGNoYXJhY3RlcnMgYXJlIGJlaW5nIHNob3duIG9yIG5vdC5cbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblxuICAgICAqKi9cbiAgICBnZXRTaG93SW52aXNpYmxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwic2hvd0ludmlzaWJsZXNcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cblxuICAgICAqL1xuICAgIGdldERpc3BsYXlJbmRlbnRHdWlkZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbihcImRpc3BsYXlJbmRlbnRHdWlkZXNcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBkaXNwbGF5XG5cbiAgICAgKi9cbiAgICBzZXREaXNwbGF5SW5kZW50R3VpZGVzKGRpc3BsYXkpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJkaXNwbGF5SW5kZW50R3VpZGVzXCIsIGRpc3BsYXkpO1xuICAgIH1cblxuICAgIC8qKlxuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXRIaWdobGlnaHRJbmRlbnRHdWlkZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbihcImhpZ2hsaWdodEluZGVudEd1aWRlc1wiKTtcbiAgICB9XG5cbiAgICAvKipcblxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGlnaGxpZ2h0XG4gICAgICovXG4gICAgc2V0SGlnaGxpZ2h0SW5kZW50R3VpZGVzKGhpZ2hsaWdodCkge1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcImhpZ2hsaWdodEluZGVudEd1aWRlc1wiLCBoaWdobGlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElkZW50aWZpZXMgd2hldGhlciB5b3Ugd2FudCB0byBzaG93IHRoZSBwcmludCBtYXJnaW4gb3Igbm90LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvd1ByaW50TWFyZ2luIFNldCB0byBgdHJ1ZWAgdG8gc2hvdyB0aGUgcHJpbnQgbWFyZ2luXG5cbiAgICAgKiovXG4gICAgc2V0U2hvd1ByaW50TWFyZ2luKHNob3dQcmludE1hcmdpbikge1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcInNob3dQcmludE1hcmdpblwiLCBzaG93UHJpbnRNYXJnaW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgcHJpbnQgbWFyZ2luIGlzIGJlaW5nIHNob3duIG9yIG5vdC5cbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblxuICAgICAqKi9cbiAgICBnZXRTaG93UHJpbnRNYXJnaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbihcInNob3dQcmludE1hcmdpblwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWRlbnRpZmllcyB3aGV0aGVyIHlvdSB3YW50IHRvIHNob3cgdGhlIHByaW50IG1hcmdpbiBjb2x1bW4gb3Igbm90LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmludE1hcmdpbkNvbHVtbiBTZXQgdG8gYHRydWVgIHRvIHNob3cgdGhlIHByaW50IG1hcmdpbiBjb2x1bW5cblxuICAgICAqKi9cbiAgICBzZXRQcmludE1hcmdpbkNvbHVtbihwcmludE1hcmdpbkNvbHVtbikge1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcInByaW50TWFyZ2luQ29sdW1uXCIsIHByaW50TWFyZ2luQ29sdW1uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByaW50IG1hcmdpbiBjb2x1bW4gaXMgYmVpbmcgc2hvd24gb3Igbm90LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG5cbiAgICAgKiovXG4gICAgZ2V0UHJpbnRNYXJnaW5Db2x1bW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbihcInByaW50TWFyZ2luQ29sdW1uXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBndXR0ZXIgaXMgYmVpbmcgc2hvd24uXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cbiAgICAgKiovXG4gICAgZ2V0U2hvd0d1dHRlcigpe1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcHRpb24oXCJzaG93R3V0dGVyXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElkZW50aWZpZXMgd2hldGhlciB5b3Ugd2FudCB0byBzaG93IHRoZSBndXR0ZXIgb3Igbm90LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdyBTZXQgdG8gYHRydWVgIHRvIHNob3cgdGhlIGd1dHRlclxuXG4gICAgICoqL1xuICAgIHNldFNob3dHdXR0ZXIoc2hvdyl7XG4gICAgICAgIHJldHVybiB0aGlzLnNldE9wdGlvbihcInNob3dHdXR0ZXJcIiwgc2hvdyk7XG4gICAgfVxuXG4gICAgLyoqXG5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXRGYWRlRm9sZFdpZGdldHMoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3B0aW9uKFwiZmFkZUZvbGRXaWRnZXRzXCIpO1xuICAgIH1cblxuICAgIC8qKlxuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaG93XG4gICAgICovXG4gICAgc2V0RmFkZUZvbGRXaWRnZXRzKHNob3cpIHtcbiAgICAgICAgdGhpcy5zZXRPcHRpb24oXCJmYWRlRm9sZFdpZGdldHNcIiwgc2hvdyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaG91bGRIaWdobGlnaHRcbiAgICAgKi9cbiAgICBzZXRIaWdobGlnaHRHdXR0ZXJMaW5lKHNob3VsZEhpZ2hsaWdodCkge1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcImhpZ2hsaWdodEd1dHRlckxpbmVcIiwgc2hvdWxkSGlnaGxpZ2h0KTtcbiAgICB9XG5cbiAgICAvKipcblxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldEhpZ2hsaWdodEd1dHRlckxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbihcImhpZ2hsaWdodEd1dHRlckxpbmVcIik7XG4gICAgfVxuXG4gICAgLyoqXG5cbiAgICAgKi9cbiAgICAkdXBkYXRlUHJpbnRNYXJnaW4oKSB7XG4gICAgICAgIGlmICghdGhpcy4kc2hvd1ByaW50TWFyZ2luICYmICF0aGlzLiRwcmludE1hcmdpbkVsKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmICghdGhpcy4kcHJpbnRNYXJnaW5FbCkge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lckVsID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBjb250YWluZXJFbC5jbGFzc05hbWUgPSBcImFjZV9sYXllciBhY2VfcHJpbnQtbWFyZ2luLWxheWVyXCI7XG4gICAgICAgICAgICB0aGlzLiRwcmludE1hcmdpbkVsID0gZG9tLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLiRwcmludE1hcmdpbkVsLmNsYXNzTmFtZSA9IFwiYWNlX3ByaW50LW1hcmdpblwiO1xuICAgICAgICAgICAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGhpcy4kcHJpbnRNYXJnaW5FbCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lckVsLCB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLiRwcmludE1hcmdpbkVsLnN0eWxlO1xuICAgICAgICBzdHlsZS5sZWZ0ID0gTWF0aC5yb3VuZCh0aGlzLmNoYXJhY3RlcldpZHRoICogdGhpcy4kcHJpbnRNYXJnaW5Db2x1bW4gKyB0aGlzLiRwYWRkaW5nKSArIFwicHhcIjtcbiAgICAgICAgc3R5bGUudmlzaWJpbGl0eSA9IHRoaXMuJHNob3dQcmludE1hcmdpbiA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIjtcblxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uICYmIHRoaXMuc2Vzc2lvbi4kd3JhcCA9PSAtMSlcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0V3JhcExpbWl0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSByb290IGVsZW1lbnQgY29udGFpbmluZyB0aGlzIHJlbmRlcmVyLlxuICAgICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cbiAgICAgKiovXG4gICAgZ2V0Q29udGFpbmVyRWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgZWxlbWVudCB0aGF0IHRoZSBtb3VzZSBldmVudHMgYXJlIGF0dGFjaGVkIHRvXG4gICAgICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICAgICAqKi9cbiAgICBnZXRNb3VzZUV2ZW50VGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIGVsZW1lbnQgdG8gd2hpY2ggdGhlIGhpZGRlbiB0ZXh0IGFyZWEgaXMgYWRkZWQuXG4gICAgICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICAgICAqKi9cbiAgICBnZXRUZXh0QXJlYUNvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH1cblxuICAgIC8vIG1vdmUgdGV4dCBpbnB1dCBvdmVyIHRoZSBjdXJzb3JcbiAgICAvLyB0aGlzIGlzIHJlcXVpcmVkIGZvciBJTUVcbiAgICAvKipcblxuICAgICAqL1xuICAgICRtb3ZlVGV4dEFyZWFUb0N1cnNvcigpIHtcbiAgICAgICAgaWYgKHRoaXMuJGlzTW91c2VQcmVzc2VkKSByZXR1cm47XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMudGV4dGFyZWEuc3R5bGU7XG4gICAgICAgIHZhciBjb21wb3NpdGlvbiA9IHRoaXMuJGNvbXBvc2l0aW9uO1xuICAgICAgICBpZiAoIXRoaXMuJGtlZXBUZXh0QXJlYUF0Q3Vyc29yICYmICFjb21wb3NpdGlvbikge1xuICAgICAgICAgICAgZG9tLnRyYW5zbGF0ZSh0aGlzLnRleHRhcmVhLCAtMTAwLCAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGl4ZWxQb3MgPSB0aGlzLiRjdXJzb3JMYXllci4kcGl4ZWxQb3M7XG4gICAgICAgIGlmICghcGl4ZWxQb3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChjb21wb3NpdGlvbiAmJiBjb21wb3NpdGlvbi5tYXJrZXJSYW5nZSlcbiAgICAgICAgICAgIHBpeGVsUG9zID0gdGhpcy4kY3Vyc29yTGF5ZXIuZ2V0UGl4ZWxQb3NpdGlvbihjb21wb3NpdGlvbi5tYXJrZXJSYW5nZS5zdGFydCwgdHJ1ZSk7XG5cbiAgICAgICAgdmFyIGNvbmZpZyA9IHRoaXMubGF5ZXJDb25maWc7XG4gICAgICAgIHZhciBwb3NUb3AgPSBwaXhlbFBvcy50b3A7XG4gICAgICAgIHZhciBwb3NMZWZ0ID0gcGl4ZWxQb3MubGVmdDtcbiAgICAgICAgcG9zVG9wIC09IGNvbmZpZy5vZmZzZXQ7XG5cbiAgICAgICAgdmFyIGggPSBjb21wb3NpdGlvbiAmJiBjb21wb3NpdGlvbi51c2VUZXh0YXJlYUZvcklNRSB8fCB1c2VyYWdlbnQuaXNNb2JpbGUgPyB0aGlzLmxpbmVIZWlnaHQgOiAxO1xuICAgICAgICBpZiAocG9zVG9wIDwgMCB8fCBwb3NUb3AgPiBjb25maWcuaGVpZ2h0IC0gaCkge1xuICAgICAgICAgICAgZG9tLnRyYW5zbGF0ZSh0aGlzLnRleHRhcmVhLCAwLCAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB3ID0gMTtcbiAgICAgICAgdmFyIG1heFRvcCA9IHRoaXMuJHNpemUuaGVpZ2h0IC0gaDtcbiAgICAgICAgaWYgKCFjb21wb3NpdGlvbikge1xuICAgICAgICAgICAgcG9zVG9wICs9IHRoaXMubGluZUhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjb21wb3NpdGlvbi51c2VUZXh0YXJlYUZvcklNRSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLnRleHRhcmVhLnZhbHVlO1xuICAgICAgICAgICAgICAgIHcgPSB0aGlzLmNoYXJhY3RlcldpZHRoICogKHRoaXMuc2Vzc2lvbi4kZ2V0U3RyaW5nU2NyZWVuV2lkdGgodmFsKVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb3NUb3AgKz0gdGhpcy5saW5lSGVpZ2h0ICsgMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHBvc0xlZnQgLT0gdGhpcy5zY3JvbGxMZWZ0O1xuICAgICAgICBpZiAocG9zTGVmdCA+IHRoaXMuJHNpemUuc2Nyb2xsZXJXaWR0aCAtIHcpXG4gICAgICAgICAgICBwb3NMZWZ0ID0gdGhpcy4kc2l6ZS5zY3JvbGxlcldpZHRoIC0gdztcblxuICAgICAgICBwb3NMZWZ0ICs9IHRoaXMuZ3V0dGVyV2lkdGggKyB0aGlzLm1hcmdpbi5sZWZ0O1xuXG4gICAgICAgIGRvbS5zZXRTdHlsZShzdHlsZSwgXCJoZWlnaHRcIiwgaCArIFwicHhcIik7XG4gICAgICAgIGRvbS5zZXRTdHlsZShzdHlsZSwgXCJ3aWR0aFwiLCB3ICsgXCJweFwiKTtcbiAgICAgICAgZG9tLnRyYW5zbGF0ZSh0aGlzLnRleHRhcmVhLCBNYXRoLm1pbihwb3NMZWZ0LCB0aGlzLiRzaXplLnNjcm9sbGVyV2lkdGggLSB3KSwgTWF0aC5taW4ocG9zVG9wLCBtYXhUb3ApKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IHZpc2libGUgcm93Ll17OiAjVmlydHVhbFJlbmRlcmVyLmdldEZpcnN0VmlzaWJsZVJvd31cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRGaXJzdFZpc2libGVSb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVyQ29uZmlnLmZpcnN0Um93O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGZ1bGx5IHZpc2libGUgcm93LiBcIkZ1bGx5XCIgaGVyZSBtZWFucyB0aGF0IHRoZSBjaGFyYWN0ZXJzIGluIHRoZSByb3cgYXJlIG5vdCB0cnVuY2F0ZWQ7IHRoYXQgdGhlIHRvcCBhbmQgdGhlIGJvdHRvbSBvZiB0aGUgcm93IGFyZSBvbiB0aGUgc2NyZWVuLlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldEZpcnN0RnVsbHlWaXNpYmxlUm93KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXllckNvbmZpZy5maXJzdFJvdyArICh0aGlzLmxheWVyQ29uZmlnLm9mZnNldCA9PT0gMCA/IDAgOiAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGZ1bGx5IHZpc2libGUgcm93LiBcIkZ1bGx5XCIgaGVyZSBtZWFucyB0aGF0IHRoZSBjaGFyYWN0ZXJzIGluIHRoZSByb3cgYXJlIG5vdCB0cnVuY2F0ZWQ7IHRoYXQgdGhlIHRvcCBhbmQgdGhlIGJvdHRvbSBvZiB0aGUgcm93IGFyZSBvbiB0aGUgc2NyZWVuLlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldExhc3RGdWxseVZpc2libGVSb3coKSB7XG4gICAgICAgIHZhciBjb25maWcgPSB0aGlzLmxheWVyQ29uZmlnO1xuICAgICAgICB2YXIgbGFzdFJvdyA9IGNvbmZpZy5sYXN0Um93O1xuICAgICAgICB2YXIgdG9wID0gdGhpcy5zZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Sb3cobGFzdFJvdywgMCkgKiBjb25maWcubGluZUhlaWdodDtcbiAgICAgICAgaWYgKHRvcCAtIHRoaXMuc2Vzc2lvbi5nZXRTY3JvbGxUb3AoKSA+IGNvbmZpZy5oZWlnaHQgLSBjb25maWcubGluZUhlaWdodClcbiAgICAgICAgICAgIHJldHVybiBsYXN0Um93IC0gMTtcbiAgICAgICAgcmV0dXJuIGxhc3RSb3c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBbUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgdmlzaWJsZSByb3cuXXs6ICNWaXJ0dWFsUmVuZGVyZXIuZ2V0TGFzdFZpc2libGVSb3d9XG4gICAgICogQHJldHVybnMge051bWJlcn1cbiAgICAgKiovXG4gICAgZ2V0TGFzdFZpc2libGVSb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVyQ29uZmlnLmxhc3RSb3c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcGFkZGluZyBmb3IgYWxsIHRoZSBsYXllcnMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHBhZGRpbmcgQSBuZXcgcGFkZGluZyB2YWx1ZSAoaW4gcGl4ZWxzKVxuXG4gICAgICoqL1xuICAgIHNldFBhZGRpbmcocGFkZGluZykge1xuICAgICAgICB0aGlzLiRwYWRkaW5nID0gcGFkZGluZztcbiAgICAgICAgdGhpcy4kdGV4dExheWVyLnNldFBhZGRpbmcocGFkZGluZyk7XG4gICAgICAgIHRoaXMuJGN1cnNvckxheWVyLnNldFBhZGRpbmcocGFkZGluZyk7XG4gICAgICAgIHRoaXMuJG1hcmtlckZyb250LnNldFBhZGRpbmcocGFkZGluZyk7XG4gICAgICAgIHRoaXMuJG1hcmtlckJhY2suc2V0UGFkZGluZyhwYWRkaW5nKTtcbiAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9GVUxMKTtcbiAgICAgICAgdGhpcy4kdXBkYXRlUHJpbnRNYXJnaW4oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdG9wXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYm90dG9tXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVmdF1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JpZ2h0XVxuXG4gICAgICovXG4gICAgc2V0U2Nyb2xsTWFyZ2luKHRvcCwgYm90dG9tLCBsZWZ0LCByaWdodCkge1xuICAgICAgICB2YXIgc20gPSB0aGlzLnNjcm9sbE1hcmdpbjtcbiAgICAgICAgc20udG9wID0gdG9wfDA7XG4gICAgICAgIHNtLmJvdHRvbSA9IGJvdHRvbXwwO1xuICAgICAgICBzbS5yaWdodCA9IHJpZ2h0fDA7XG4gICAgICAgIHNtLmxlZnQgPSBsZWZ0fDA7XG4gICAgICAgIHNtLnYgPSBzbS50b3AgKyBzbS5ib3R0b207XG4gICAgICAgIHNtLmggPSBzbS5sZWZ0ICsgc20ucmlnaHQ7XG4gICAgICAgIGlmIChzbS50b3AgJiYgdGhpcy5zY3JvbGxUb3AgPD0gMCAmJiB0aGlzLnNlc3Npb24pXG4gICAgICAgICAgICB0aGlzLnNlc3Npb24uc2V0U2Nyb2xsVG9wKC1zbS50b3ApO1xuICAgICAgICB0aGlzLnVwZGF0ZUZ1bGwoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbdG9wXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYm90dG9tXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbGVmdF1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3JpZ2h0XVxuXG4gICAgICovXG4gICAgc2V0TWFyZ2luKHRvcCwgYm90dG9tLCBsZWZ0LCByaWdodCkge1xuICAgICAgICB2YXIgc20gPSB0aGlzLm1hcmdpbjtcbiAgICAgICAgc20udG9wID0gdG9wfDA7XG4gICAgICAgIHNtLmJvdHRvbSA9IGJvdHRvbXwwO1xuICAgICAgICBzbS5yaWdodCA9IHJpZ2h0fDA7XG4gICAgICAgIHNtLmxlZnQgPSBsZWZ0fDA7XG4gICAgICAgIHNtLnYgPSBzbS50b3AgKyBzbS5ib3R0b207XG4gICAgICAgIHNtLmggPSBzbS5sZWZ0ICsgc20ucmlnaHQ7XG4gICAgICAgIHRoaXMuJHVwZGF0ZUNhY2hlZFNpemUodHJ1ZSwgdGhpcy5ndXR0ZXJXaWR0aCwgdGhpcy4kc2l6ZS53aWR0aCwgdGhpcy4kc2l6ZS5oZWlnaHQpO1xuICAgICAgICB0aGlzLnVwZGF0ZUZ1bGwoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyIGlzIHNldCB0byBiZSBhbHdheXMgdmlzaWJsZS5cbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblxuICAgICAqKi9cbiAgICBnZXRIU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGhTY3JvbGxCYXJBbHdheXNWaXNpYmxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElkZW50aWZpZXMgd2hldGhlciB5b3Ugd2FudCB0byBzaG93IHRoZSBob3Jpem9udGFsIHNjcm9sbGJhciBvciBub3QuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBhbHdheXNWaXNpYmxlIFNldCB0byBgdHJ1ZWAgdG8gbWFrZSB0aGUgaG9yaXpvbnRhbCBzY3JvbGwgYmFyIHZpc2libGVcblxuICAgICAqKi9cbiAgICBzZXRIU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZShhbHdheXNWaXNpYmxlKSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKFwiaFNjcm9sbEJhckFsd2F5c1Zpc2libGVcIiwgYWx3YXlzVmlzaWJsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXIgaXMgc2V0IHRvIGJlIGFsd2F5cyB2aXNpYmxlLlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXG4gICAgICoqL1xuICAgIGdldFZTY3JvbGxCYXJBbHdheXNWaXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdlNjcm9sbEJhckFsd2F5c1Zpc2libGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWRlbnRpZmllcyB3aGV0aGVyIHlvdSB3YW50IHRvIHNob3cgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFsd2F5c1Zpc2libGUgU2V0IHRvIGB0cnVlYCB0byBtYWtlIHRoZSBob3Jpem9udGFsIHNjcm9sbCBiYXIgdmlzaWJsZVxuICAgICAqKi9cbiAgICBzZXRWU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZShhbHdheXNWaXNpYmxlKSB7XG4gICAgICAgIHRoaXMuc2V0T3B0aW9uKFwidlNjcm9sbEJhckFsd2F5c1Zpc2libGVcIiwgYWx3YXlzVmlzaWJsZSk7XG4gICAgfVxuXG4gICAgLyoqXG5cbiAgICAgKi9cbiAgICAkdXBkYXRlU2Nyb2xsQmFyVigpIHtcbiAgICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IHRoaXMubGF5ZXJDb25maWcubWF4SGVpZ2h0O1xuICAgICAgICB2YXIgc2Nyb2xsZXJIZWlnaHQgPSB0aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0O1xuICAgICAgICBpZiAoIXRoaXMuJG1heExpbmVzICYmIHRoaXMuJHNjcm9sbFBhc3RFbmQpIHtcbiAgICAgICAgICAgIHNjcm9sbEhlaWdodCAtPSAoc2Nyb2xsZXJIZWlnaHQgLSB0aGlzLmxpbmVIZWlnaHQpICogdGhpcy4kc2Nyb2xsUGFzdEVuZDtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbFRvcCA+IHNjcm9sbEhlaWdodCAtIHNjcm9sbGVySGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gdGhpcy5zY3JvbGxUb3AgKyBzY3JvbGxlckhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbEJhclYuc2Nyb2xsVG9wID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjcm9sbEJhclYuc2V0U2Nyb2xsSGVpZ2h0KHNjcm9sbEhlaWdodCArIHRoaXMuc2Nyb2xsTWFyZ2luLnYpO1xuICAgICAgICB0aGlzLnNjcm9sbEJhclYuc2V0U2Nyb2xsVG9wKHRoaXMuc2Nyb2xsVG9wICsgdGhpcy5zY3JvbGxNYXJnaW4udG9wKTtcbiAgICB9XG4gICAgJHVwZGF0ZVNjcm9sbEJhckgoKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsQmFySC5zZXRTY3JvbGxXaWR0aCh0aGlzLmxheWVyQ29uZmlnLndpZHRoICsgMiAqIHRoaXMuJHBhZGRpbmcgKyB0aGlzLnNjcm9sbE1hcmdpbi5oKTtcbiAgICAgICAgdGhpcy5zY3JvbGxCYXJILnNldFNjcm9sbExlZnQodGhpcy5zY3JvbGxMZWZ0ICsgdGhpcy5zY3JvbGxNYXJnaW4ubGVmdCk7XG4gICAgfVxuXG4gICAgZnJlZXplKCkge1xuICAgICAgICB0aGlzLiRmcm96ZW4gPSB0cnVlO1xuICAgIH1cblxuICAgIHVuZnJlZXplKCkge1xuICAgICAgICB0aGlzLiRmcm96ZW4gPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjaGFuZ2VzXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VdXG4gICAgICogQHJldHVybnMge251bWJlcn1cblxuICAgICAqL1xuICAgICRyZW5kZXJDaGFuZ2VzKGNoYW5nZXMsIGZvcmNlKSB7XG4gICAgICAgIGlmICh0aGlzLiRjaGFuZ2VzKSB7XG4gICAgICAgICAgICBjaGFuZ2VzIHw9IHRoaXMuJGNoYW5nZXM7XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VzID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKCF0aGlzLnNlc3Npb24gfHwgIXRoaXMuY29udGFpbmVyLm9mZnNldFdpZHRoIHx8IHRoaXMuJGZyb3plbikgfHwgKCFjaGFuZ2VzICYmICFmb3JjZSkpIHtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMgfD0gY2hhbmdlcztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4kc2l6ZS4kZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZXMgfD0gY2hhbmdlcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uUmVzaXplKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5saW5lSGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLiR0ZXh0TGF5ZXIuY2hlY2tGb3JTaXplQ2hhbmdlcygpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMuJGxvZ0NoYW5nZXMoY2hhbmdlcyk7XG5cbiAgICAgICAgdGhpcy5fc2lnbmFsKFwiYmVmb3JlUmVuZGVyXCIsIGNoYW5nZXMpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24gJiYgdGhpcy5zZXNzaW9uLiRiaWRpSGFuZGxlcilcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi4kYmlkaUhhbmRsZXIudXBkYXRlQ2hhcmFjdGVyV2lkdGhzKHRoaXMuJGZvbnRNZXRyaWNzKTtcblxuICAgICAgICB2YXIgY29uZmlnID0gdGhpcy5sYXllckNvbmZpZztcbiAgICAgICAgLy8gdGV4dCwgc2Nyb2xsaW5nIGFuZCByZXNpemUgY2hhbmdlcyBjYW4gY2F1c2UgdGhlIHZpZXcgcG9ydCBzaXplIHRvIGNoYW5nZVxuICAgICAgICBpZiAoY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX0ZVTEwgfHxcbiAgICAgICAgICAgIGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9TSVpFIHx8XG4gICAgICAgICAgICBjaGFuZ2VzICYgdGhpcy5DSEFOR0VfVEVYVCB8fFxuICAgICAgICAgICAgY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX0xJTkVTIHx8XG4gICAgICAgICAgICBjaGFuZ2VzICYgdGhpcy5DSEFOR0VfU0NST0xMIHx8XG4gICAgICAgICAgICBjaGFuZ2VzICYgdGhpcy5DSEFOR0VfSF9TQ1JPTExcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjaGFuZ2VzIHw9IHRoaXMuJGNvbXB1dGVMYXllckNvbmZpZygpIHwgdGhpcy4kbG9vcC5jbGVhcigpO1xuICAgICAgICAgICAgLy8gSWYgYSBjaGFuZ2UgaXMgbWFkZSBvZmZzY3JlZW4gYW5kIHdyYXBNb2RlIGlzIG9uLCB0aGVuIHRoZSBvbnNjcmVlblxuICAgICAgICAgICAgLy8gbGluZXMgbWF5IGhhdmUgYmVlbiBwdXNoZWQgZG93bi4gSWYgc28sIHRoZSBmaXJzdCBzY3JlZW4gcm93IHdpbGwgbm90XG4gICAgICAgICAgICAvLyBoYXZlIGNoYW5nZWQsIGJ1dCB0aGUgZmlyc3QgYWN0dWFsIHJvdyB3aWxsLiBJbiB0aGF0IGNhc2UsIGFkanVzdFxuICAgICAgICAgICAgLy8gc2Nyb2xsVG9wIHNvIHRoYXQgdGhlIGN1cnNvciBhbmQgb25zY3JlZW4gY29udGVudCBzdGF5cyBpbiB0aGUgc2FtZSBwbGFjZS5cbiAgICAgICAgICAgIC8vIFRPRE86IGZpbmQgYSBiZXR0ZXIgd2F5IHRvIGhhbmRsZSB0aGlzLCB0aGF0IHdvcmtzIG5vbiB3cmFwcGVkIGNhc2UgYW5kIGRvZXNuJ3QgY29tcHV0ZSBsYXllckNvbmZpZyB0d2ljZVxuICAgICAgICAgICAgaWYgKGNvbmZpZy5maXJzdFJvdyAhPSB0aGlzLmxheWVyQ29uZmlnLmZpcnN0Um93ICYmIGNvbmZpZy5maXJzdFJvd1NjcmVlbiA9PSB0aGlzLmxheWVyQ29uZmlnLmZpcnN0Um93U2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0ID0gdGhpcy5zY3JvbGxUb3AgKyAoY29uZmlnLmZpcnN0Um93IC0gTWF0aC5tYXgodGhpcy5sYXllckNvbmZpZy5maXJzdFJvdywgMCkpICogdGhpcy5saW5lSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGlmIChzdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBjaGVjayBpcyBuZWVkZWQgYXMgYSB3b3JrYXJvdW5kIGZvciB0aGUgZG9jdW1lbnRUb1NjcmVlblJvdyByZXR1cm5pbmcgLTEgaWYgZG9jdW1lbnQubGVuZ3RoID09IDBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb3AgPSBzdDtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyA9IGNoYW5nZXMgfCB0aGlzLkNIQU5HRV9TQ1JPTEw7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgfD0gdGhpcy4kY29tcHV0ZUxheWVyQ29uZmlnKCkgfCB0aGlzLiRsb29wLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlnID0gdGhpcy5sYXllckNvbmZpZztcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzY3JvbGxiYXIgZmlyc3QgdG8gbm90IGxvc2Ugc2Nyb2xsIHBvc2l0aW9uIHdoZW4gZ3V0dGVyIGNhbGxzIHJlc2l6ZVxuICAgICAgICAgICAgdGhpcy4kdXBkYXRlU2Nyb2xsQmFyVigpO1xuICAgICAgICAgICAgaWYgKGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9IX1NDUk9MTClcbiAgICAgICAgICAgICAgICB0aGlzLiR1cGRhdGVTY3JvbGxCYXJIKCk7XG5cbiAgICAgICAgICAgIGRvbS50cmFuc2xhdGUodGhpcy5jb250ZW50LCAtdGhpcy5zY3JvbGxMZWZ0LCAtY29uZmlnLm9mZnNldCk7XG5cbiAgICAgICAgICAgIHZhciB3aWR0aCA9IGNvbmZpZy53aWR0aCArIDIgKiB0aGlzLiRwYWRkaW5nICsgXCJweFwiO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IGNvbmZpZy5taW5IZWlnaHQgKyBcInB4XCI7XG5cbiAgICAgICAgICAgIGRvbS5zZXRTdHlsZSh0aGlzLmNvbnRlbnQuc3R5bGUsIFwid2lkdGhcIiwgd2lkdGgpO1xuICAgICAgICAgICAgZG9tLnNldFN0eWxlKHRoaXMuY29udGVudC5zdHlsZSwgXCJoZWlnaHRcIiwgaGVpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhvcml6b250YWwgc2Nyb2xsaW5nXG4gICAgICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfSF9TQ1JPTEwpIHtcbiAgICAgICAgICAgIGRvbS50cmFuc2xhdGUodGhpcy5jb250ZW50LCAtdGhpcy5zY3JvbGxMZWZ0LCAtY29uZmlnLm9mZnNldCk7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbGVyLmNsYXNzTmFtZSA9IHRoaXMuc2Nyb2xsTGVmdCA8PSAwID8gXCJhY2Vfc2Nyb2xsZXIgXCIgOiBcImFjZV9zY3JvbGxlciBhY2Vfc2Nyb2xsLWxlZnQgXCI7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVLZXlib2FyZEFjY2Vzc2liaWxpdHkpXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxlci5jbGFzc05hbWUgKz0gdGhpcy5rZXlib2FyZEZvY3VzQ2xhc3NOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZnVsbFxuICAgICAgICBpZiAoY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX0ZVTEwpIHtcbiAgICAgICAgICAgIHRoaXMuJGNoYW5nZWRMaW5lcyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLiR0ZXh0TGF5ZXIudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2hvd0d1dHRlcilcbiAgICAgICAgICAgICAgICB0aGlzLiRndXR0ZXJMYXllci51cGRhdGUoY29uZmlnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiRjdXN0b21TY3JvbGxiYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRzY3JvbGxEZWNvcmF0b3IuJHVwZGF0ZURlY29yYXRvcnMoY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJG1hcmtlckJhY2sudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgICAgICB0aGlzLiRtYXJrZXJGcm9udC51cGRhdGUoY29uZmlnKTtcbiAgICAgICAgICAgIHRoaXMuJGN1cnNvckxheWVyLnVwZGF0ZShjb25maWcpO1xuICAgICAgICAgICAgdGhpcy4kbW92ZVRleHRBcmVhVG9DdXJzb3IoKTtcbiAgICAgICAgICAgIHRoaXMuX3NpZ25hbChcImFmdGVyUmVuZGVyXCIsIGNoYW5nZXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2Nyb2xsaW5nXG4gICAgICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfU0NST0xMKSB7XG4gICAgICAgICAgICB0aGlzLiRjaGFuZ2VkTGluZXMgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9URVhUIHx8IGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9MSU5FUylcbiAgICAgICAgICAgICAgICB0aGlzLiR0ZXh0TGF5ZXIudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy4kdGV4dExheWVyLnNjcm9sbExpbmVzKGNvbmZpZyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLiRzaG93R3V0dGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9HVVRURVIgfHwgY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX0xJTkVTKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRndXR0ZXJMYXllci51cGRhdGUoY29uZmlnKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGd1dHRlckxheWVyLnNjcm9sbExpbmVzKGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy4kY3VzdG9tU2Nyb2xsYmFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2Nyb2xsRGVjb3JhdG9yLiR1cGRhdGVEZWNvcmF0b3JzKGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRtYXJrZXJCYWNrLnVwZGF0ZShjb25maWcpO1xuICAgICAgICAgICAgdGhpcy4kbWFya2VyRnJvbnQudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgICAgICB0aGlzLiRjdXJzb3JMYXllci51cGRhdGUoY29uZmlnKTtcbiAgICAgICAgICAgIHRoaXMuJG1vdmVUZXh0QXJlYVRvQ3Vyc29yKCk7XG4gICAgICAgICAgICB0aGlzLl9zaWduYWwoXCJhZnRlclJlbmRlclwiLCBjaGFuZ2VzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzICYgdGhpcy5DSEFOR0VfVEVYVCkge1xuICAgICAgICAgICAgdGhpcy4kY2hhbmdlZExpbmVzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuJHRleHRMYXllci51cGRhdGUoY29uZmlnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzaG93R3V0dGVyKVxuICAgICAgICAgICAgICAgIHRoaXMuJGd1dHRlckxheWVyLnVwZGF0ZShjb25maWcpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJGN1c3RvbVNjcm9sbGJhcikge1xuICAgICAgICAgICAgICAgIHRoaXMuJHNjcm9sbERlY29yYXRvci4kdXBkYXRlRGVjb3JhdG9ycyhjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9MSU5FUykge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHVwZGF0ZUxpbmVzKCkgfHwgKGNoYW5nZXMgJiB0aGlzLkNIQU5HRV9HVVRURVIpICYmIHRoaXMuJHNob3dHdXR0ZXIpXG4gICAgICAgICAgICAgICAgdGhpcy4kZ3V0dGVyTGF5ZXIudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgICAgICBpZiAodGhpcy4kY3VzdG9tU2Nyb2xsYmFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2Nyb2xsRGVjb3JhdG9yLiR1cGRhdGVEZWNvcmF0b3JzKGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX1RFWFQgfHwgY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX0dVVFRFUikge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNob3dHdXR0ZXIpXG4gICAgICAgICAgICAgICAgdGhpcy4kZ3V0dGVyTGF5ZXIudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgICAgICBpZiAodGhpcy4kY3VzdG9tU2Nyb2xsYmFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2Nyb2xsRGVjb3JhdG9yLiR1cGRhdGVEZWNvcmF0b3JzKGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX0NVUlNPUikge1xuICAgICAgICAgICAgaWYgKHRoaXMuJGhpZ2hsaWdodEd1dHRlckxpbmUpXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiBwb3RlbnRpYWwgd3JvbmcgcGFyYW1cbiAgICAgICAgICAgICAgICB0aGlzLiRndXR0ZXJMYXllci51cGRhdGVMaW5lSGlnaGxpZ2h0KGNvbmZpZyk7XG4gICAgICAgICAgICBpZiAodGhpcy4kY3VzdG9tU2Nyb2xsYmFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc2Nyb2xsRGVjb3JhdG9yLiR1cGRhdGVEZWNvcmF0b3JzKGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcyAmIHRoaXMuQ0hBTkdFX0NVUlNPUikge1xuICAgICAgICAgICAgdGhpcy4kY3Vyc29yTGF5ZXIudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgICAgICB0aGlzLiRtb3ZlVGV4dEFyZWFUb0N1cnNvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMgJiAodGhpcy5DSEFOR0VfTUFSS0VSIHwgdGhpcy5DSEFOR0VfTUFSS0VSX0ZST05UKSkge1xuICAgICAgICAgICAgdGhpcy4kbWFya2VyRnJvbnQudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcyAmICh0aGlzLkNIQU5HRV9NQVJLRVIgfCB0aGlzLkNIQU5HRV9NQVJLRVJfQkFDSykpIHtcbiAgICAgICAgICAgIHRoaXMuJG1hcmtlckJhY2sudXBkYXRlKGNvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zaWduYWwoXCJhZnRlclJlbmRlclwiLCBjaGFuZ2VzKTtcbiAgICB9XG5cbiAgICAvKipcblxuICAgICAqL1xuICAgICRhdXRvc2l6ZSgpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuc2Vzc2lvbi5nZXRTY3JlZW5MZW5ndGgoKSAqIHRoaXMubGluZUhlaWdodDtcbiAgICAgICAgdmFyIG1heEhlaWdodCA9IHRoaXMuJG1heExpbmVzICogdGhpcy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgZGVzaXJlZEhlaWdodCA9IE1hdGgubWluKG1heEhlaWdodCxcbiAgICAgICAgICAgIE1hdGgubWF4KCh0aGlzLiRtaW5MaW5lcyB8fCAxKSAqIHRoaXMubGluZUhlaWdodCwgaGVpZ2h0KVxuICAgICAgICApICsgdGhpcy5zY3JvbGxNYXJnaW4udiArICh0aGlzLiRleHRyYUhlaWdodCB8fCAwKTtcbiAgICAgICAgaWYgKHRoaXMuJGhvcml6U2Nyb2xsKVxuICAgICAgICAgICAgZGVzaXJlZEhlaWdodCArPSB0aGlzLnNjcm9sbEJhckguZ2V0SGVpZ2h0KCk7XG4gICAgICAgIGlmICh0aGlzLiRtYXhQaXhlbEhlaWdodCAmJiBkZXNpcmVkSGVpZ2h0ID4gdGhpcy4kbWF4UGl4ZWxIZWlnaHQpXG4gICAgICAgICAgICBkZXNpcmVkSGVpZ2h0ID0gdGhpcy4kbWF4UGl4ZWxIZWlnaHQ7XG5cbiAgICAgICAgdmFyIGhpZGVTY3JvbGxiYXJzID0gZGVzaXJlZEhlaWdodCA8PSAyICogdGhpcy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgdlNjcm9sbCA9ICFoaWRlU2Nyb2xsYmFycyAmJiBoZWlnaHQgPiBtYXhIZWlnaHQ7XG5cbiAgICAgICAgaWYgKGRlc2lyZWRIZWlnaHQgIT0gdGhpcy5kZXNpcmVkSGVpZ2h0IHx8XG4gICAgICAgICAgICB0aGlzLiRzaXplLmhlaWdodCAhPSB0aGlzLmRlc2lyZWRIZWlnaHQgfHwgdlNjcm9sbCAhPSB0aGlzLiR2U2Nyb2xsKSB7XG4gICAgICAgICAgICBpZiAodlNjcm9sbCAhPSB0aGlzLiR2U2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdlNjcm9sbCA9IHZTY3JvbGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxCYXJWLnNldFZpc2libGUodlNjcm9sbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB3ID0gdGhpcy5jb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBkZXNpcmVkSGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy4kdXBkYXRlQ2FjaGVkU2l6ZSh0cnVlLCB0aGlzLiRndXR0ZXJXaWR0aCwgdywgZGVzaXJlZEhlaWdodCk7XG4gICAgICAgICAgICAvLyB0aGlzLiRsb29wLmNoYW5nZXMgPSAwO1xuICAgICAgICAgICAgdGhpcy5kZXNpcmVkSGVpZ2h0ID0gZGVzaXJlZEhlaWdodDtcblxuICAgICAgICAgICAgdGhpcy5fc2lnbmFsKFwiYXV0b3NpemVcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcblxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgJGNvbXB1dGVMYXllckNvbmZpZygpIHtcbiAgICAgICAgdmFyIHNlc3Npb24gPSB0aGlzLnNlc3Npb247XG4gICAgICAgIHZhciBzaXplID0gdGhpcy4kc2l6ZTtcblxuICAgICAgICB2YXIgaGlkZVNjcm9sbGJhcnMgPSBzaXplLmhlaWdodCA8PSAyICogdGhpcy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgc2NyZWVuTGluZXMgPSB0aGlzLnNlc3Npb24uZ2V0U2NyZWVuTGVuZ3RoKCk7XG4gICAgICAgIHZhciBtYXhIZWlnaHQgPSBzY3JlZW5MaW5lcyAqIHRoaXMubGluZUhlaWdodDtcblxuICAgICAgICB2YXIgbG9uZ2VzdExpbmUgPSB0aGlzLiRnZXRMb25nZXN0TGluZSgpO1xuXG4gICAgICAgIHZhciBob3JpelNjcm9sbCA9ICFoaWRlU2Nyb2xsYmFycyAmJiAodGhpcy4kaFNjcm9sbEJhckFsd2F5c1Zpc2libGUgfHxcbiAgICAgICAgICAgIHNpemUuc2Nyb2xsZXJXaWR0aCAtIGxvbmdlc3RMaW5lIC0gMiAqIHRoaXMuJHBhZGRpbmcgPCAwKTtcblxuICAgICAgICB2YXIgaFNjcm9sbENoYW5nZWQgPSB0aGlzLiRob3JpelNjcm9sbCAhPT0gaG9yaXpTY3JvbGw7XG4gICAgICAgIGlmIChoU2Nyb2xsQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy4kaG9yaXpTY3JvbGwgPSBob3JpelNjcm9sbDtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFySC5zZXRWaXNpYmxlKGhvcml6U2Nyb2xsKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdlNjcm9sbEJlZm9yZSA9IHRoaXMuJHZTY3JvbGw7IC8vIGF1dG9zaXplIGNhbiBjaGFuZ2UgdnNjcm9sbCB2YWx1ZSBpbiB3aGljaCBjYXNlIHdlIG5lZWQgdG8gdXBkYXRlIGxvbmdlc3RMaW5lXG4gICAgICAgIC8vIGF1dG9yZXNpemUgb25seSBhZnRlciB1cGRhdGluZyBoc2Nyb2xsIHRvIGluY2x1ZGUgc2Nyb2xsYmFyIGhlaWdodCBpbiBkZXNpcmVkIGhlaWdodFxuICAgICAgICBpZiAodGhpcy4kbWF4TGluZXMgJiYgdGhpcy5saW5lSGVpZ2h0ID4gMSlcbiAgICAgICAgICAgIHRoaXMuJGF1dG9zaXplKCk7XG5cbiAgICAgICAgdmFyIG1pbkhlaWdodCA9IHNpemUuc2Nyb2xsZXJIZWlnaHQgKyB0aGlzLmxpbmVIZWlnaHQ7XG5cbiAgICAgICAgdmFyIHNjcm9sbFBhc3RFbmQgPSAhdGhpcy4kbWF4TGluZXMgJiYgdGhpcy4kc2Nyb2xsUGFzdEVuZFxuICAgICAgICAgICAgPyAoc2l6ZS5zY3JvbGxlckhlaWdodCAtIHRoaXMubGluZUhlaWdodCkgKiB0aGlzLiRzY3JvbGxQYXN0RW5kXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIG1heEhlaWdodCArPSBzY3JvbGxQYXN0RW5kO1xuXG4gICAgICAgIHZhciBzbSA9IHRoaXMuc2Nyb2xsTWFyZ2luO1xuICAgICAgICB0aGlzLnNlc3Npb24uc2V0U2Nyb2xsVG9wKE1hdGgubWF4KC1zbS50b3AsXG4gICAgICAgICAgICBNYXRoLm1pbih0aGlzLnNjcm9sbFRvcCwgbWF4SGVpZ2h0IC0gc2l6ZS5zY3JvbGxlckhlaWdodCArIHNtLmJvdHRvbSkpKTtcblxuICAgICAgICB0aGlzLnNlc3Npb24uc2V0U2Nyb2xsTGVmdChNYXRoLm1heCgtc20ubGVmdCwgTWF0aC5taW4odGhpcy5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgbG9uZ2VzdExpbmUgKyAyICogdGhpcy4kcGFkZGluZyAtIHNpemUuc2Nyb2xsZXJXaWR0aCArIHNtLnJpZ2h0KSkpO1xuXG4gICAgICAgIHZhciB2U2Nyb2xsID0gIWhpZGVTY3JvbGxiYXJzICYmICh0aGlzLiR2U2Nyb2xsQmFyQWx3YXlzVmlzaWJsZSB8fFxuICAgICAgICAgICAgc2l6ZS5zY3JvbGxlckhlaWdodCAtIG1heEhlaWdodCArIHNjcm9sbFBhc3RFbmQgPCAwIHx8IHRoaXMuc2Nyb2xsVG9wID4gc20udG9wKTtcbiAgICAgICAgdmFyIHZTY3JvbGxDaGFuZ2VkID0gdlNjcm9sbEJlZm9yZSAhPT0gdlNjcm9sbDtcbiAgICAgICAgaWYgKHZTY3JvbGxDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLiR2U2Nyb2xsID0gdlNjcm9sbDtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFyVi5zZXRWaXNpYmxlKHZTY3JvbGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuc2Nyb2xsVG9wICUgdGhpcy5saW5lSGVpZ2h0O1xuICAgICAgICB2YXIgbGluZUNvdW50ID0gTWF0aC5jZWlsKG1pbkhlaWdodCAvIHRoaXMubGluZUhlaWdodCkgLSAxO1xuICAgICAgICB2YXIgZmlyc3RSb3cgPSBNYXRoLm1heCgwLCBNYXRoLnJvdW5kKCh0aGlzLnNjcm9sbFRvcCAtIG9mZnNldCkgLyB0aGlzLmxpbmVIZWlnaHQpKTtcbiAgICAgICAgdmFyIGxhc3RSb3cgPSBmaXJzdFJvdyArIGxpbmVDb3VudDtcblxuICAgICAgICAvLyBNYXAgbGluZXMgb24gdGhlIHNjcmVlbiB0byBsaW5lcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICAgIHZhciBmaXJzdFJvd1NjcmVlbiwgZmlyc3RSb3dIZWlnaHQ7XG4gICAgICAgIHZhciBsaW5lSGVpZ2h0ID0gdGhpcy5saW5lSGVpZ2h0O1xuICAgICAgICBmaXJzdFJvdyA9IHNlc3Npb24uc2NyZWVuVG9Eb2N1bWVudFJvdyhmaXJzdFJvdywgMCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZmlyc3RSb3cgaXMgaW5zaWRlIG9mIGEgZm9sZExpbmUuIElmIHRydWUsIHRoZW4gdXNlIHRoZSBmaXJzdFxuICAgICAgICAvLyByb3cgb2YgdGhlIGZvbGRMaW5lLlxuICAgICAgICB2YXIgZm9sZExpbmUgPSBzZXNzaW9uLmdldEZvbGRMaW5lKGZpcnN0Um93KTtcbiAgICAgICAgaWYgKGZvbGRMaW5lKSB7XG4gICAgICAgICAgICBmaXJzdFJvdyA9IGZvbGRMaW5lLnN0YXJ0LnJvdztcbiAgICAgICAgfVxuXG4gICAgICAgIGZpcnN0Um93U2NyZWVuID0gc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUm93KGZpcnN0Um93LCAwKTtcbiAgICAgICAgZmlyc3RSb3dIZWlnaHQgPSBzZXNzaW9uLmdldFJvd0xlbmd0aChmaXJzdFJvdykgKiBsaW5lSGVpZ2h0O1xuXG4gICAgICAgIGxhc3RSb3cgPSBNYXRoLm1pbihzZXNzaW9uLnNjcmVlblRvRG9jdW1lbnRSb3cobGFzdFJvdywgMCksIHNlc3Npb24uZ2V0TGVuZ3RoKCkgLSAxKTtcbiAgICAgICAgbWluSGVpZ2h0ID0gc2l6ZS5zY3JvbGxlckhlaWdodCArIHNlc3Npb24uZ2V0Um93TGVuZ3RoKGxhc3RSb3cpICogbGluZUhlaWdodCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFJvd0hlaWdodDtcblxuICAgICAgICBvZmZzZXQgPSB0aGlzLnNjcm9sbFRvcCAtIGZpcnN0Um93U2NyZWVuICogbGluZUhlaWdodDtcblxuICAgICAgICB2YXIgY2hhbmdlcyA9IDA7XG4gICAgICAgIGlmICh0aGlzLmxheWVyQ29uZmlnLndpZHRoICE9IGxvbmdlc3RMaW5lIHx8IGhTY3JvbGxDaGFuZ2VkKVxuICAgICAgICAgICAgY2hhbmdlcyA9IHRoaXMuQ0hBTkdFX0hfU0NST0xMO1xuICAgICAgICAvLyBIb3Jpem9udGFsIHNjcm9sbGJhciB2aXNpYmlsaXR5IG1heSBoYXZlIGNoYW5nZWQsIHdoaWNoIGNoYW5nZXNcbiAgICAgICAgLy8gdGhlIGNsaWVudCBoZWlnaHQgb2YgdGhlIHNjcm9sbGVyXG4gICAgICAgIGlmIChoU2Nyb2xsQ2hhbmdlZCB8fCB2U2Nyb2xsQ2hhbmdlZCkge1xuICAgICAgICAgICAgY2hhbmdlcyB8PSB0aGlzLiR1cGRhdGVDYWNoZWRTaXplKHRydWUsIHRoaXMuZ3V0dGVyV2lkdGgsIHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuX3NpZ25hbChcInNjcm9sbGJhclZpc2liaWxpdHlDaGFuZ2VkXCIpO1xuICAgICAgICAgICAgaWYgKHZTY3JvbGxDaGFuZ2VkKVxuICAgICAgICAgICAgICAgIGxvbmdlc3RMaW5lID0gdGhpcy4kZ2V0TG9uZ2VzdExpbmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGF5ZXJDb25maWcgPSB7XG4gICAgICAgICAgICB3aWR0aCA6IGxvbmdlc3RMaW5lLFxuICAgICAgICAgICAgcGFkZGluZyA6IHRoaXMuJHBhZGRpbmcsXG4gICAgICAgICAgICBmaXJzdFJvdyA6IGZpcnN0Um93LFxuICAgICAgICAgICAgZmlyc3RSb3dTY3JlZW46IGZpcnN0Um93U2NyZWVuLFxuICAgICAgICAgICAgbGFzdFJvdyA6IGxhc3RSb3csXG4gICAgICAgICAgICBsaW5lSGVpZ2h0IDogbGluZUhlaWdodCxcbiAgICAgICAgICAgIGNoYXJhY3RlcldpZHRoIDogdGhpcy5jaGFyYWN0ZXJXaWR0aCxcbiAgICAgICAgICAgIG1pbkhlaWdodCA6IG1pbkhlaWdodCxcbiAgICAgICAgICAgIG1heEhlaWdodCA6IG1heEhlaWdodCxcbiAgICAgICAgICAgIG9mZnNldCA6IG9mZnNldCxcbiAgICAgICAgICAgIGd1dHRlck9mZnNldCA6IGxpbmVIZWlnaHQgPyBNYXRoLm1heCgwLCBNYXRoLmNlaWwoKG9mZnNldCArIHNpemUuaGVpZ2h0IC0gc2l6ZS5zY3JvbGxlckhlaWdodCkgLyBsaW5lSGVpZ2h0KSkgOiAwLFxuICAgICAgICAgICAgaGVpZ2h0IDogdGhpcy4kc2l6ZS5zY3JvbGxlckhlaWdodFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyKVxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLiRiaWRpSGFuZGxlci5zZXRDb250ZW50V2lkdGgobG9uZ2VzdExpbmUgLSB0aGlzLiRwYWRkaW5nKTtcbiAgICAgICAgLy8gRm9yIGRlYnVnZ2luZy5cbiAgICAgICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGhpcy5sYXllckNvbmZpZykpO1xuXG4gICAgICAgIHJldHVybiBjaGFuZ2VzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFuIHwgdW5kZWZpbmVkfVxuXG4gICAgICovXG4gICAgJHVwZGF0ZUxpbmVzKCkge1xuICAgICAgICBpZiAoIXRoaXMuJGNoYW5nZWRMaW5lcykgcmV0dXJuO1xuICAgICAgICB2YXIgZmlyc3RSb3cgPSB0aGlzLiRjaGFuZ2VkTGluZXMuZmlyc3RSb3c7XG4gICAgICAgIHZhciBsYXN0Um93ID0gdGhpcy4kY2hhbmdlZExpbmVzLmxhc3RSb3c7XG4gICAgICAgIHRoaXMuJGNoYW5nZWRMaW5lcyA9IG51bGw7XG5cbiAgICAgICAgdmFyIGxheWVyQ29uZmlnID0gdGhpcy5sYXllckNvbmZpZztcblxuICAgICAgICBpZiAoZmlyc3RSb3cgPiBsYXllckNvbmZpZy5sYXN0Um93ICsgMSkgeyByZXR1cm47IH1cbiAgICAgICAgaWYgKGxhc3RSb3cgPCBsYXllckNvbmZpZy5maXJzdFJvdykgeyByZXR1cm47IH1cblxuICAgICAgICAvLyBpZiB0aGUgbGFzdCByb3cgaXMgdW5rbm93biAtPiByZWRyYXcgZXZlcnl0aGluZ1xuICAgICAgICBpZiAobGFzdFJvdyA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzaG93R3V0dGVyKVxuICAgICAgICAgICAgICAgIHRoaXMuJGd1dHRlckxheWVyLnVwZGF0ZShsYXllckNvbmZpZyk7XG4gICAgICAgICAgICB0aGlzLiR0ZXh0TGF5ZXIudXBkYXRlKGxheWVyQ29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVsc2UgdXBkYXRlIG9ubHkgdGhlIGNoYW5nZWQgcm93c1xuICAgICAgICB0aGlzLiR0ZXh0TGF5ZXIudXBkYXRlTGluZXMobGF5ZXJDb25maWcsIGZpcnN0Um93LCBsYXN0Um93KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuXG4gICAgICovXG4gICAgJGdldExvbmdlc3RMaW5lKCkge1xuICAgICAgICB2YXIgY2hhckNvdW50ID0gdGhpcy5zZXNzaW9uLmdldFNjcmVlbldpZHRoKCk7XG4gICAgICAgIGlmICh0aGlzLnNob3dJbnZpc2libGVzICYmICF0aGlzLnNlc3Npb24uJHVzZVdyYXBNb2RlKVxuICAgICAgICAgICAgY2hhckNvdW50ICs9IDE7XG5cbiAgICAgICAgaWYgKHRoaXMuJHRleHRMYXllciAmJiBjaGFyQ291bnQgPiB0aGlzLiR0ZXh0TGF5ZXIuTUFYX0xJTkVfTEVOR1RIKVxuICAgICAgICAgICAgY2hhckNvdW50ID0gdGhpcy4kdGV4dExheWVyLk1BWF9MSU5FX0xFTkdUSCArIDMwO1xuXG4gICAgICAgIHJldHVybiBNYXRoLm1heCh0aGlzLiRzaXplLnNjcm9sbGVyV2lkdGggLSAyICogdGhpcy4kcGFkZGluZywgTWF0aC5yb3VuZChjaGFyQ291bnQgKiB0aGlzLmNoYXJhY3RlcldpZHRoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGFuIHVwZGF0ZSB0byBhbGwgdGhlIGZyb250IG1hcmtlcnMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqKi9cbiAgICB1cGRhdGVGcm9udE1hcmtlcnMoKSB7XG4gICAgICAgIHRoaXMuJG1hcmtlckZyb250LnNldE1hcmtlcnModGhpcy5zZXNzaW9uLmdldE1hcmtlcnModHJ1ZSkpO1xuICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX01BUktFUl9GUk9OVCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTY2hlZHVsZXMgYW4gdXBkYXRlIHRvIGFsbCB0aGUgYmFjayBtYXJrZXJzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKiovXG4gICAgdXBkYXRlQmFja01hcmtlcnMoKSB7XG4gICAgICAgIHRoaXMuJG1hcmtlckJhY2suc2V0TWFya2Vycyh0aGlzLnNlc3Npb24uZ2V0TWFya2VycygpKTtcbiAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9NQVJLRVJfQkFDSyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBEZXByZWNhdGVkOyAobW92ZWQgdG8gW1tFZGl0U2Vzc2lvbl1dKVxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICoqL1xuICAgIGFkZEd1dHRlckRlY29yYXRpb24ocm93LCBjbGFzc05hbWUpe1xuICAgICAgICB0aGlzLiRndXR0ZXJMYXllci5hZGRHdXR0ZXJEZWNvcmF0aW9uKHJvdywgY2xhc3NOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXByZWNhdGVkOyAobW92ZWQgdG8gW1tFZGl0U2Vzc2lvbl1dKVxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICoqL1xuICAgIHJlbW92ZUd1dHRlckRlY29yYXRpb24ocm93LCBjbGFzc05hbWUpe1xuICAgICAgICB0aGlzLiRndXR0ZXJMYXllci5yZW1vdmVHdXR0ZXJEZWNvcmF0aW9uKHJvdywgY2xhc3NOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJlZHJhdyBicmVha3BvaW50cy5cbiAgICAgKiBAcGFyYW0ge2FueX0gW3Jvd3NdXG4gICAgICovXG4gICAgdXBkYXRlQnJlYWtwb2ludHMocm93cykge1xuICAgICAgICB0aGlzLl9yb3dzID0gcm93cztcbiAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9HVVRURVIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYW5ub3RhdGlvbnMgZm9yIHRoZSBndXR0ZXIuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9hY2UtaW50ZXJuYWxcIikuQWNlLkFubm90YXRpb25bXX0gYW5ub3RhdGlvbnMgQW4gYXJyYXkgY29udGFpbmluZyBhbm5vdGF0aW9uc1xuICAgICAqXG4gICAgICoqL1xuICAgIHNldEFubm90YXRpb25zKGFubm90YXRpb25zKSB7XG4gICAgICAgIHRoaXMuJGd1dHRlckxheWVyLnNldEFubm90YXRpb25zKGFubm90YXRpb25zKTtcbiAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9HVVRURVIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXBkYXRlcyB0aGUgY3Vyc29yIGljb24uXG4gICAgICoqL1xuICAgIHVwZGF0ZUN1cnNvcigpIHtcbiAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9DVVJTT1IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSGlkZXMgdGhlIGN1cnNvciBpY29uLlxuICAgICAqKi9cbiAgICBoaWRlQ3Vyc29yKCkge1xuICAgICAgICB0aGlzLiRjdXJzb3JMYXllci5oaWRlQ3Vyc29yKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTaG93cyB0aGUgY3Vyc29yIGljb24uXG4gICAgICoqL1xuICAgIHNob3dDdXJzb3IoKSB7XG4gICAgICAgIHRoaXMuJGN1cnNvckxheWVyLnNob3dDdXJzb3IoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IGFuY2hvclxuICAgICAqIEBwYXJhbSB7UG9pbnR9IGxlYWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldF1cbiAgICAgKi9cbiAgICBzY3JvbGxTZWxlY3Rpb25JbnRvVmlldyhhbmNob3IsIGxlYWQsIG9mZnNldCkge1xuICAgICAgICAvLyBmaXJzdCBzY3JvbGwgYW5jaG9yIGludG8gdmlldyB0aGVuIHNjcm9sbCBsZWFkIGludG8gdmlld1xuICAgICAgICB0aGlzLnNjcm9sbEN1cnNvckludG9WaWV3KGFuY2hvciwgb2Zmc2V0KTtcbiAgICAgICAgdGhpcy5zY3JvbGxDdXJzb3JJbnRvVmlldyhsZWFkLCBvZmZzZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2Nyb2xscyB0aGUgY3Vyc29yIGludG8gdGhlIGZpcnN0IHZpc2liaWxlIGFyZWEgb2YgdGhlIGVkaXRvclxuICAgICAqIEBwYXJhbSB7UG9pbnR9IFtjdXJzb3JdXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXRdXG4gICAgICogQHBhcmFtIHt7IHRvcD86IGFueTsgYm90dG9tPzogYW55OyB9fSBbJHZpZXdNYXJnaW5dXG4gICAgICovXG4gICAgc2Nyb2xsQ3Vyc29ySW50b1ZpZXcoY3Vyc29yLCBvZmZzZXQsICR2aWV3TWFyZ2luKSB7XG4gICAgICAgIC8vIHRoZSBlZGl0b3IgaXMgbm90IHZpc2libGVcbiAgICAgICAgaWYgKHRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQgPT09IDApXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdmFyIHBvcyA9IHRoaXMuJGN1cnNvckxheWVyLmdldFBpeGVsUG9zaXRpb24oY3Vyc29yKTtcblxuICAgICAgICB2YXIgbmV3TGVmdCA9IHBvcy5sZWZ0O1xuICAgICAgICB2YXIgbmV3VG9wID0gcG9zLnRvcDtcblxuICAgICAgICB2YXIgdG9wTWFyZ2luID0gJHZpZXdNYXJnaW4gJiYgJHZpZXdNYXJnaW4udG9wIHx8IDA7XG4gICAgICAgIHZhciBib3R0b21NYXJnaW4gPSAkdmlld01hcmdpbiAmJiAkdmlld01hcmdpbi5ib3R0b20gfHwgMDtcblxuICAgICAgICBpZiAodGhpcy4kc2Nyb2xsQW5pbWF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLiRzdG9wQW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjdXJyZW50VG9wID0gdGhpcy4kc2Nyb2xsQW5pbWF0aW9uID8gdGhpcy5zZXNzaW9uLmdldFNjcm9sbFRvcCgpIDogdGhpcy5zY3JvbGxUb3A7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRUb3AgKyB0b3BNYXJnaW4gPiBuZXdUb3ApIHtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgJiYgY3VycmVudFRvcCArIHRvcE1hcmdpbiA+IG5ld1RvcCArIHRoaXMubGluZUhlaWdodClcbiAgICAgICAgICAgICAgICBuZXdUb3AgLT0gb2Zmc2V0ICogdGhpcy4kc2l6ZS5zY3JvbGxlckhlaWdodDtcbiAgICAgICAgICAgIGlmIChuZXdUb3AgPT09IDApXG4gICAgICAgICAgICAgICAgbmV3VG9wID0gLXRoaXMuc2Nyb2xsTWFyZ2luLnRvcDtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5zZXRTY3JvbGxUb3AobmV3VG9wKTtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VG9wICsgdGhpcy4kc2l6ZS5zY3JvbGxlckhlaWdodCAtIGJvdHRvbU1hcmdpbiA8IG5ld1RvcCArIHRoaXMubGluZUhlaWdodCkge1xuICAgICAgICAgICAgaWYgKG9mZnNldCAmJiBjdXJyZW50VG9wICsgdGhpcy4kc2l6ZS5zY3JvbGxlckhlaWdodCAtIGJvdHRvbU1hcmdpbiA8IG5ld1RvcCAtICB0aGlzLmxpbmVIZWlnaHQpXG4gICAgICAgICAgICAgICAgbmV3VG9wICs9IG9mZnNldCAqIHRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24uc2V0U2Nyb2xsVG9wKG5ld1RvcCArIHRoaXMubGluZUhlaWdodCArIGJvdHRvbU1hcmdpbiAtIHRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gdGhpcy5zY3JvbGxMZWZ0O1xuICAgICAgICAvLyBTaG93IDIgY29udGV4dCBjaGFyYWN0ZXJzIG9mIHRoZSBsaW5lIHdoZW4gbW92aW5nIHRvIGl0XG4gICAgICAgIHZhciB0d29DaGFyc1dpZHRoID0gMiAqIHRoaXMubGF5ZXJDb25maWcuY2hhcmFjdGVyV2lkdGg7XG5cbiAgICAgICAgaWYgKG5ld0xlZnQgLSB0d29DaGFyc1dpZHRoIDwgY3VycmVudExlZnQpIHtcbiAgICAgICAgICAgIG5ld0xlZnQgLT0gdHdvQ2hhcnNXaWR0aDtcbiAgICAgICAgICAgIGlmIChuZXdMZWZ0IDwgdGhpcy4kcGFkZGluZyArIHR3b0NoYXJzV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBuZXdMZWZ0ID0gLXRoaXMuc2Nyb2xsTWFyZ2luLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24uc2V0U2Nyb2xsTGVmdChuZXdMZWZ0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0xlZnQgKz0gdHdvQ2hhcnNXaWR0aDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGVmdCArIHRoaXMuJHNpemUuc2Nyb2xsZXJXaWR0aCA8IG5ld0xlZnQgKyB0aGlzLmNoYXJhY3RlcldpZHRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uLnNldFNjcm9sbExlZnQoTWF0aC5yb3VuZChuZXdMZWZ0ICsgdGhpcy5jaGFyYWN0ZXJXaWR0aCAtIHRoaXMuJHNpemUuc2Nyb2xsZXJXaWR0aCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50TGVmdCA8PSB0aGlzLiRwYWRkaW5nICYmIG5ld0xlZnQgLSBjdXJyZW50TGVmdCA8IHRoaXMuY2hhcmFjdGVyV2lkdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlc3Npb24uc2V0U2Nyb2xsTGVmdCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHs6RWRpdFNlc3Npb24uZ2V0U2Nyb2xsVG9wfVxuICAgICAqIEByZWxhdGVkIEVkaXRTZXNzaW9uLmdldFNjcm9sbFRvcFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldFNjcm9sbFRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5nZXRTY3JvbGxUb3AoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB7OkVkaXRTZXNzaW9uLmdldFNjcm9sbExlZnR9XG4gICAgICogQHJlbGF0ZWQgRWRpdFNlc3Npb24uZ2V0U2Nyb2xsTGVmdFxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICoqL1xuICAgIGdldFNjcm9sbExlZnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlc3Npb24uZ2V0U2Nyb2xsTGVmdCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IHZpc2libGUgcm93LCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgaXQncyBmdWxseSB2aXNpYmxlIG9yIG5vdC5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRTY3JvbGxUb3BSb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcm9sbFRvcCAvIHRoaXMubGluZUhlaWdodDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IHZpc2libGUgcm93LCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgaXQncyBmdWxseSB2aXNpYmxlIG9yIG5vdC5cbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgICAqKi9cbiAgICBnZXRTY3JvbGxCb3R0b21Sb3coKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLmZsb29yKCh0aGlzLnNjcm9sbFRvcCArIHRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQpIC8gdGhpcy5saW5lSGVpZ2h0KSAtIDEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdyYWNlZnVsbHkgc2Nyb2xscyBmcm9tIHRoZSB0b3Agb2YgdGhlIGVkaXRvciB0byB0aGUgcm93IGluZGljYXRlZC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IEEgcm93IGlkXG4gICAgICpcbiAgICAgKiBAcmVsYXRlZCBFZGl0U2Vzc2lvbi5zZXRTY3JvbGxUb3BcbiAgICAgKiovXG4gICAgc2Nyb2xsVG9Sb3cocm93KSB7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zZXRTY3JvbGxUb3Aocm93ICogdGhpcy5saW5lSGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IGN1cnNvclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYWxpZ25tZW50XVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgYWxpZ25DdXJzb3IoY3Vyc29yLCBhbGlnbm1lbnQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjdXJzb3IgPT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgIGN1cnNvciA9IHtyb3c6IGN1cnNvciwgY29sdW1uOiAwfTtcblxuICAgICAgICB2YXIgcG9zID0gdGhpcy4kY3Vyc29yTGF5ZXIuZ2V0UGl4ZWxQb3NpdGlvbihjdXJzb3IpO1xuICAgICAgICB2YXIgaCA9IHRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQgLSB0aGlzLmxpbmVIZWlnaHQ7XG4gICAgICAgIHZhciBvZmZzZXQgPSBwb3MudG9wIC0gaCAqIChhbGlnbm1lbnQgfHwgMCk7XG5cbiAgICAgICAgdGhpcy5zZXNzaW9uLnNldFNjcm9sbFRvcChvZmZzZXQpO1xuICAgICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21WYWx1ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b1ZhbHVlXG4gICAgICogQHJldHVybnMgeypbXX1cbiAgICAgKi9cbiAgICAkY2FsY1N0ZXBzKGZyb21WYWx1ZSwgdG9WYWx1ZSl7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGwgPSB0aGlzLlNURVBTO1xuICAgICAgICB2YXIgc3RlcHMgPSBbXTtcblxuICAgICAgICB2YXIgZnVuYyAgPSBmdW5jdGlvbih0LCB4X21pbiwgZHgpIHtcbiAgICAgICAgICAgIHJldHVybiBkeCAqIChNYXRoLnBvdyh0IC0gMSwgMykgKyAxKSArIHhfbWluO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyArK2kpXG4gICAgICAgICAgICBzdGVwcy5wdXNoKGZ1bmMoaSAvIHRoaXMuU1RFUFMsIGZyb21WYWx1ZSwgdG9WYWx1ZSAtIGZyb21WYWx1ZSkpO1xuXG4gICAgICAgIHJldHVybiBzdGVwcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHcmFjZWZ1bGx5IHNjcm9sbHMgdGhlIGVkaXRvciB0byB0aGUgcm93IGluZGljYXRlZC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGluZSBBIGxpbmUgbnVtYmVyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBjZW50ZXIgSWYgYHRydWVgLCBjZW50ZXJzIHRoZSBlZGl0b3IgdGhlIHRvIGluZGljYXRlZCBsaW5lXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBhbmltYXRlIElmIGB0cnVlYCBhbmltYXRlcyBzY3JvbGxpbmdcbiAgICAgKiBAcGFyYW0geygpID0+IHZvaWR9IFtjYWxsYmFja10gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFmdGVyIHRoZSBhbmltYXRpb24gaGFzIGZpbmlzaGVkXG5cbiAgICAgKiovXG4gICAgc2Nyb2xsVG9MaW5lKGxpbmUsIGNlbnRlciwgYW5pbWF0ZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHBvcyA9IHRoaXMuJGN1cnNvckxheWVyLmdldFBpeGVsUG9zaXRpb24oe3JvdzogbGluZSwgY29sdW1uOiAwfSk7XG4gICAgICAgIHZhciBvZmZzZXQgPSBwb3MudG9wO1xuICAgICAgICBpZiAoY2VudGVyKVxuICAgICAgICAgICAgb2Zmc2V0IC09IHRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHQgLyAyO1xuXG4gICAgICAgIHZhciBpbml0aWFsU2Nyb2xsID0gdGhpcy5zY3JvbGxUb3A7XG4gICAgICAgIHRoaXMuc2Vzc2lvbi5zZXRTY3JvbGxUb3Aob2Zmc2V0KTtcbiAgICAgICAgaWYgKGFuaW1hdGUgIT09IGZhbHNlKVxuICAgICAgICAgICAgdGhpcy5hbmltYXRlU2Nyb2xsaW5nKGluaXRpYWxTY3JvbGwsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmcm9tVmFsdWVcbiAgICAgKiBAcGFyYW0gW2NhbGxiYWNrXVxuXG4gICAgICovXG4gICAgYW5pbWF0ZVNjcm9sbGluZyhmcm9tVmFsdWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0b1ZhbHVlID0gdGhpcy5zY3JvbGxUb3A7XG4gICAgICAgIGlmICghdGhpcy4kYW5pbWF0ZWRTY3JvbGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGZyb21WYWx1ZSA9PSB0b1ZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLiRzY3JvbGxBbmltYXRpb24pIHtcbiAgICAgICAgICAgIHZhciBvbGRTdGVwcyA9IHRoaXMuJHNjcm9sbEFuaW1hdGlvbi5zdGVwcztcbiAgICAgICAgICAgIGlmIChvbGRTdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBmcm9tVmFsdWUgPSBvbGRTdGVwc1swXTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbVZhbHVlID09IHRvVmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdGVwcyA9IF9zZWxmLiRjYWxjU3RlcHMoZnJvbVZhbHVlLCB0b1ZhbHVlKTtcbiAgICAgICAgdGhpcy4kc2Nyb2xsQW5pbWF0aW9uID0ge2Zyb206IGZyb21WYWx1ZSwgdG86IHRvVmFsdWUsIHN0ZXBzOiBzdGVwc307XG5cbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLiR0aW1lcik7XG5cbiAgICAgICAgX3NlbGYuc2Vzc2lvbi5zZXRTY3JvbGxUb3Aoc3RlcHMuc2hpZnQoKSk7XG4gICAgICAgIC8vIHRyaWNrIHNlc3Npb24gdG8gdGhpbmsgaXQncyBhbHJlYWR5IHNjcm9sbGVkIHRvIG5vdCBsb29zZSB0b1ZhbHVlXG4gICAgICAgIF9zZWxmLnNlc3Npb24uJHNjcm9sbFRvcCA9IHRvVmFsdWU7XG5cbiAgICAgICAgZnVuY3Rpb24gZW5kQW5pbWF0aW9uKCkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgX3NlbGYuJHRpbWVyID0gY2xlYXJJbnRlcnZhbChfc2VsZi4kdGltZXIpO1xuICAgICAgICAgICAgX3NlbGYuJHNjcm9sbEFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgICAgICBfc2VsZi4kc3RvcEFuaW1hdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoX3NlbGYuJHN0b3BBbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICBlbmRBbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghX3NlbGYuc2Vzc2lvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xlYXJJbnRlcnZhbChfc2VsZi4kdGltZXIpO1xuICAgICAgICAgICAgaWYgKHN0ZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIF9zZWxmLnNlc3Npb24uc2V0U2Nyb2xsVG9wKHN0ZXBzLnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgIF9zZWxmLnNlc3Npb24uJHNjcm9sbFRvcCA9IHRvVmFsdWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRvVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIF9zZWxmLnNlc3Npb24uJHNjcm9sbFRvcCA9IC0xO1xuICAgICAgICAgICAgICAgIF9zZWxmLnNlc3Npb24uc2V0U2Nyb2xsVG9wKHRvVmFsdWUpO1xuICAgICAgICAgICAgICAgIHRvVmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBkbyB0aGlzIG9uIHNlcGFyYXRlIHN0ZXAgdG8gbm90IGdldCBzcHVyaW91cyBzY3JvbGwgZXZlbnQgZnJvbSBzY3JvbGxiYXJcbiAgICAgICAgICAgICAgICBlbmRBbmltYXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjcm9sbHMgdGhlIGVkaXRvciB0byB0aGUgeSBwaXhlbCBpbmRpY2F0ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjcm9sbFRvcCBUaGUgcG9zaXRpb24gdG8gc2Nyb2xsIHRvXG4gICAgICoqL1xuICAgIHNjcm9sbFRvWShzY3JvbGxUb3ApIHtcbiAgICAgICAgLy8gYWZ0ZXIgY2FsbGluZyBzY3JvbGxCYXIuc2V0U2Nyb2xsVG9wXG4gICAgICAgIC8vIHNjcm9sbGJhciBzZW5kcyB1cyBldmVudCB3aXRoIHNhbWUgc2Nyb2xsVG9wLiBpZ25vcmUgaXRcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVG9wICE9PSBzY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfU0NST0xMKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2Nyb2xscyB0aGUgZWRpdG9yIGFjcm9zcyB0aGUgeC1heGlzIHRvIHRoZSBwaXhlbCBpbmRpY2F0ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHNjcm9sbExlZnQgVGhlIHBvc2l0aW9uIHRvIHNjcm9sbCB0b1xuICAgICAqKi9cbiAgICBzY3JvbGxUb1goc2Nyb2xsTGVmdCkge1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxMZWZ0ICE9PSBzY3JvbGxMZWZ0KVxuICAgICAgICAgICAgdGhpcy5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9IX1NDUk9MTCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2Nyb2xscyB0aGUgZWRpdG9yIGFjcm9zcyBib3RoIHgtIGFuZCB5LWF4ZXMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHggdmFsdWUgdG8gc2Nyb2xsIHRvXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHkgVGhlIHkgdmFsdWUgdG8gc2Nyb2xsIHRvXG4gICAgICoqL1xuICAgIHNjcm9sbFRvKHgsIHkpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnNldFNjcm9sbFRvcCh5KTtcbiAgICAgICAgdGhpcy5zZXNzaW9uLnNldFNjcm9sbExlZnQoeCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2Nyb2xscyB0aGUgZWRpdG9yIGFjcm9zcyBib3RoIHgtIGFuZCB5LWF4ZXMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhWCBUaGUgeCB2YWx1ZSB0byBzY3JvbGwgYnlcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGVsdGFZIFRoZSB5IHZhbHVlIHRvIHNjcm9sbCBieVxuICAgICAqKi9cbiAgICBzY3JvbGxCeShkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICBkZWx0YVkgJiYgdGhpcy5zZXNzaW9uLnNldFNjcm9sbFRvcCh0aGlzLnNlc3Npb24uZ2V0U2Nyb2xsVG9wKCkgKyBkZWx0YVkpO1xuICAgICAgICBkZWx0YVggJiYgdGhpcy5zZXNzaW9uLnNldFNjcm9sbExlZnQodGhpcy5zZXNzaW9uLmdldFNjcm9sbExlZnQoKSArIGRlbHRhWCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgeW91IGNhbiBzdGlsbCBzY3JvbGwgYnkgZWl0aGVyIHBhcmFtZXRlcjsgaW4gb3RoZXIgd29yZHMsIHlvdSBoYXZlbid0IHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgZmlsZSBvciBsaW5lLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWx0YVggVGhlIHggdmFsdWUgdG8gc2Nyb2xsIGJ5XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbHRhWSBUaGUgeSB2YWx1ZSB0byBzY3JvbGwgYnlcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqKi9cbiAgICBpc1Njcm9sbGFibGVCeShkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICBpZiAoZGVsdGFZIDwgMCAmJiB0aGlzLnNlc3Npb24uZ2V0U2Nyb2xsVG9wKCkgPj0gMSAtIHRoaXMuc2Nyb2xsTWFyZ2luLnRvcClcbiAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkZWx0YVkgPiAwICYmIHRoaXMuc2Vzc2lvbi5nZXRTY3JvbGxUb3AoKSArIHRoaXMuJHNpemUuc2Nyb2xsZXJIZWlnaHRcbiAgICAgICAgICAgIC0gdGhpcy5sYXllckNvbmZpZy5tYXhIZWlnaHQgPCAtMSArIHRoaXMuc2Nyb2xsTWFyZ2luLmJvdHRvbSlcbiAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkZWx0YVggPCAwICYmIHRoaXMuc2Vzc2lvbi5nZXRTY3JvbGxMZWZ0KCkgPj0gMSAtIHRoaXMuc2Nyb2xsTWFyZ2luLmxlZnQpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKGRlbHRhWCA+IDAgJiYgdGhpcy5zZXNzaW9uLmdldFNjcm9sbExlZnQoKSArIHRoaXMuJHNpemUuc2Nyb2xsZXJXaWR0aFxuICAgICAgICAgICAgLSB0aGlzLmxheWVyQ29uZmlnLndpZHRoIDwgLTEgKyB0aGlzLnNjcm9sbE1hcmdpbi5yaWdodClcbiAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAgICogQHJldHVybnMge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuU2NyZWVuQ29vcmRpbmF0ZXN9XG5cbiAgICAgKi9cbiAgICBwaXhlbFRvU2NyZWVuQ29vcmRpbmF0ZXMoeCwgeSkge1xuICAgICAgICB2YXIgY2FudmFzUG9zO1xuICAgICAgICBpZiAodGhpcy4kaGFzQ3NzVHJhbnNmb3Jtcykge1xuICAgICAgICAgICAgY2FudmFzUG9zID0ge3RvcDowLCBsZWZ0OiAwfTtcbiAgICAgICAgICAgIHZhciBwID0gdGhpcy4kZm9udE1ldHJpY3MudHJhbnNmb3JtQ29vcmRpbmF0ZXMoW3gsIHldKTtcbiAgICAgICAgICAgIHggPSBwWzFdIC0gdGhpcy5ndXR0ZXJXaWR0aCAtIHRoaXMubWFyZ2luLmxlZnQ7XG4gICAgICAgICAgICB5ID0gcFswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbnZhc1BvcyA9IHRoaXMuc2Nyb2xsZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb2Zmc2V0WCA9IHggKyB0aGlzLnNjcm9sbExlZnQgLSBjYW52YXNQb3MubGVmdCAtIHRoaXMuJHBhZGRpbmc7XG4gICAgICAgIHZhciBvZmZzZXQgPSBvZmZzZXRYIC8gdGhpcy5jaGFyYWN0ZXJXaWR0aDtcbiAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKHkgKyB0aGlzLnNjcm9sbFRvcCAtIGNhbnZhc1Bvcy50b3ApIC8gdGhpcy5saW5lSGVpZ2h0KTtcbiAgICAgICAgdmFyIGNvbCA9IHRoaXMuJGJsb2NrQ3Vyc29yID8gTWF0aC5mbG9vcihvZmZzZXQpIDogTWF0aC5yb3VuZChvZmZzZXQpO1xuXG4gICAgICAgIHJldHVybiB7cm93OiByb3csIGNvbHVtbjogY29sLCBzaWRlOiBvZmZzZXQgLSBjb2wgPiAwID8gMSA6IC0xLCBvZmZzZXRYOiAgb2Zmc2V0WH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAgICogQHJldHVybnMge1BvaW50fVxuXG4gICAgICovXG4gICAgc2NyZWVuVG9UZXh0Q29vcmRpbmF0ZXMoeCwgeSkge1xuICAgICAgICB2YXIgY2FudmFzUG9zO1xuICAgICAgICBpZiAodGhpcy4kaGFzQ3NzVHJhbnNmb3Jtcykge1xuICAgICAgICAgICAgY2FudmFzUG9zID0ge3RvcDowLCBsZWZ0OiAwfTtcbiAgICAgICAgICAgIHZhciBwID0gdGhpcy4kZm9udE1ldHJpY3MudHJhbnNmb3JtQ29vcmRpbmF0ZXMoW3gsIHldKTtcbiAgICAgICAgICAgIHggPSBwWzFdIC0gdGhpcy5ndXR0ZXJXaWR0aCAtIHRoaXMubWFyZ2luLmxlZnQ7XG4gICAgICAgICAgICB5ID0gcFswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbnZhc1BvcyA9IHRoaXMuc2Nyb2xsZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb2Zmc2V0WCA9IHggKyB0aGlzLnNjcm9sbExlZnQgLSBjYW52YXNQb3MubGVmdCAtIHRoaXMuJHBhZGRpbmc7XG4gICAgICAgIHZhciBvZmZzZXQgPSBvZmZzZXRYIC8gdGhpcy5jaGFyYWN0ZXJXaWR0aDtcbiAgICAgICAgdmFyIGNvbCA9IHRoaXMuJGJsb2NrQ3Vyc29yID8gTWF0aC5mbG9vcihvZmZzZXQpIDogTWF0aC5yb3VuZChvZmZzZXQpO1xuXG4gICAgICAgIHZhciByb3cgPSBNYXRoLmZsb29yKCh5ICsgdGhpcy5zY3JvbGxUb3AgLSBjYW52YXNQb3MudG9wKSAvIHRoaXMubGluZUhlaWdodCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vzc2lvbi5zY3JlZW5Ub0RvY3VtZW50UG9zaXRpb24ocm93LCBNYXRoLm1heChjb2wsIDApLCBvZmZzZXRYKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBgcGFnZVhgIGFuZCBgcGFnZVlgIGNvb3JkaW5hdGVzIG9mIHRoZSBkb2N1bWVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcm93IFRoZSBkb2N1bWVudCByb3cgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29sdW1uIFRoZSBkb2N1bWVudCBjb2x1bW4gcG9zaXRpb25cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt7IHBhZ2VYOiBudW1iZXIsIHBhZ2VZOiBudW1iZXJ9fVxuICAgICAqKi9cbiAgICB0ZXh0VG9TY3JlZW5Db29yZGluYXRlcyhyb3csIGNvbHVtbikge1xuICAgICAgICB2YXIgY2FudmFzUG9zID0gdGhpcy5zY3JvbGxlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHBvcyA9IHRoaXMuc2Vzc2lvbi5kb2N1bWVudFRvU2NyZWVuUG9zaXRpb24ocm93LCBjb2x1bW4pO1xuXG4gICAgICAgIHZhciB4ID0gdGhpcy4kcGFkZGluZyArICh0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLmlzQmlkaVJvdyhwb3Mucm93LCByb3cpXG4gICAgICAgICAgICAgPyB0aGlzLnNlc3Npb24uJGJpZGlIYW5kbGVyLmdldFBvc0xlZnQocG9zLmNvbHVtbilcbiAgICAgICAgICAgICA6IE1hdGgucm91bmQocG9zLmNvbHVtbiAqIHRoaXMuY2hhcmFjdGVyV2lkdGgpKTtcblxuICAgICAgICB2YXIgeSA9IHBvcy5yb3cgKiB0aGlzLmxpbmVIZWlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhZ2VYOiBjYW52YXNQb3MubGVmdCArIHggLSB0aGlzLnNjcm9sbExlZnQsXG4gICAgICAgICAgICBwYWdlWTogY2FudmFzUG9zLnRvcCArIHkgLSB0aGlzLnNjcm9sbFRvcFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRm9jdXNlcyB0aGUgY3VycmVudCBjb250YWluZXIuXG4gICAgICoqL1xuICAgIHZpc3VhbGl6ZUZvY3VzKCkge1xuICAgICAgICBkb20uYWRkQ3NzQ2xhc3ModGhpcy5jb250YWluZXIsIFwiYWNlX2ZvY3VzXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQmx1cnMgdGhlIGN1cnJlbnQgY29udGFpbmVyLlxuICAgICAqKi9cbiAgICB2aXN1YWxpemVCbHVyKCkge1xuICAgICAgICBkb20ucmVtb3ZlQ3NzQ2xhc3ModGhpcy5jb250YWluZXIsIFwiYWNlX2ZvY3VzXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wb3NpdGlvblxuXG4gICAgICoqL1xuICAgIHNob3dDb21wb3NpdGlvbihjb21wb3NpdGlvbikge1xuICAgICAgICB0aGlzLiRjb21wb3NpdGlvbiA9IGNvbXBvc2l0aW9uO1xuICAgICAgICBpZiAoIWNvbXBvc2l0aW9uLmNzc1RleHQpIHtcbiAgICAgICAgICAgIGNvbXBvc2l0aW9uLmNzc1RleHQgPSB0aGlzLnRleHRhcmVhLnN0eWxlLmNzc1RleHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXBvc2l0aW9uLnVzZVRleHRhcmVhRm9ySU1FID09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGNvbXBvc2l0aW9uLnVzZVRleHRhcmVhRm9ySU1FID0gdGhpcy4kdXNlVGV4dGFyZWFGb3JJTUU7XG5cbiAgICAgICAgaWYgKHRoaXMuJHVzZVRleHRhcmVhRm9ySU1FKSB7XG4gICAgICAgICAgICBkb20uYWRkQ3NzQ2xhc3ModGhpcy50ZXh0YXJlYSwgXCJhY2VfY29tcG9zaXRpb25cIik7XG4gICAgICAgICAgICB0aGlzLnRleHRhcmVhLnN0eWxlLmNzc1RleHQgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy4kbW92ZVRleHRBcmVhVG9DdXJzb3IoKTtcbiAgICAgICAgICAgIHRoaXMuJGN1cnNvckxheWVyLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29tcG9zaXRpb24ubWFya2VySWQgPSB0aGlzLnNlc3Npb24uYWRkTWFya2VyKGNvbXBvc2l0aW9uLm1hcmtlclJhbmdlLCBcImFjZV9jb21wb3NpdGlvbl9tYXJrZXJcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgQSBzdHJpbmcgb2YgdGV4dCB0byB1c2VcbiAgICAgKlxuICAgICAqIFNldHMgdGhlIGlubmVyIHRleHQgb2YgdGhlIGN1cnJlbnQgY29tcG9zaXRpb24gdG8gYHRleHRgLlxuXG4gICAgICoqL1xuICAgIHNldENvbXBvc2l0aW9uVGV4dCh0ZXh0KSB7XG4gICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLnNlc3Npb24uc2VsZWN0aW9uLmN1cnNvcjtcbiAgICAgICAgdGhpcy5hZGRUb2tlbih0ZXh0LCBcImNvbXBvc2l0aW9uX3BsYWNlaG9sZGVyXCIsIGN1cnNvci5yb3csIGN1cnNvci5jb2x1bW4pO1xuICAgICAgICB0aGlzLiRtb3ZlVGV4dEFyZWFUb0N1cnNvcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSGlkZXMgdGhlIGN1cnJlbnQgY29tcG9zaXRpb24uXG5cbiAgICAgKiovXG4gICAgaGlkZUNvbXBvc2l0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuJGNvbXBvc2l0aW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLiRjb21wb3NpdGlvbi5tYXJrZXJJZClcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5yZW1vdmVNYXJrZXIodGhpcy4kY29tcG9zaXRpb24ubWFya2VySWQpO1xuXG4gICAgICAgIGRvbS5yZW1vdmVDc3NDbGFzcyh0aGlzLnRleHRhcmVhLCBcImFjZV9jb21wb3NpdGlvblwiKTtcbiAgICAgICAgdGhpcy50ZXh0YXJlYS5zdHlsZS5jc3NUZXh0ID0gdGhpcy4kY29tcG9zaXRpb24uY3NzVGV4dDtcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuc2Vzc2lvbi5zZWxlY3Rpb24uY3Vyc29yO1xuICAgICAgICB0aGlzLnJlbW92ZUV4dHJhVG9rZW4oY3Vyc29yLnJvdywgY3Vyc29yLmNvbHVtbik7XG4gICAgICAgIHRoaXMuJGNvbXBvc2l0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy4kY3Vyc29yTGF5ZXIuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgICAqIEBwYXJhbSB7UG9pbnR9IFtwb3NpdGlvbl1cbiAgICAgKi9cbiAgICBzZXRHaG9zdFRleHQodGV4dCwgcG9zaXRpb24pIHtcbiAgICAgICAgdmFyIGN1cnNvciA9IHRoaXMuc2Vzc2lvbi5zZWxlY3Rpb24uY3Vyc29yO1xuICAgICAgICB2YXIgaW5zZXJ0UG9zaXRpb24gPSBwb3NpdGlvbiB8fCB7IHJvdzogY3Vyc29yLnJvdywgY29sdW1uOiBjdXJzb3IuY29sdW1uIH07XG5cbiAgICAgICAgdGhpcy5yZW1vdmVHaG9zdFRleHQoKTtcblxuICAgICAgICB2YXIgdGV4dENodW5rcyA9IHRoaXMuJGNhbGN1bGF0ZVdyYXBwZWRUZXh0Q2h1bmtzKHRleHQsIGluc2VydFBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5hZGRUb2tlbih0ZXh0Q2h1bmtzWzBdLnRleHQsIFwiZ2hvc3RfdGV4dFwiLCBpbnNlcnRQb3NpdGlvbi5yb3csIGluc2VydFBvc2l0aW9uLmNvbHVtbik7XG5cbiAgICAgICAgdGhpcy4kZ2hvc3RUZXh0ID0ge1xuICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICAgICAgcm93OiBpbnNlcnRQb3NpdGlvbi5yb3csXG4gICAgICAgICAgICAgICAgY29sdW1uOiBpbnNlcnRQb3NpdGlvbi4gY29sdW1uXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHdpZGdldERpdiA9IGRvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBpZiAodGV4dENodW5rcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgdG9rZW5zIHRvIHRoZSByaWdodCBvZiB0aGUgY3Vyc29yLCBoaWRlIHRob3NlLlxuICAgICAgICAgICAgdmFyIGhpZGRlblRva2VucyA9IHRoaXMuaGlkZVRva2Vuc0FmdGVyUG9zaXRpb24oaW5zZXJ0UG9zaXRpb24ucm93LCBpbnNlcnRQb3NpdGlvbi5jb2x1bW4pO1xuXG4gICAgICAgICAgICB2YXIgbGFzdExpbmVEaXY7XG4gICAgICAgICAgICB0ZXh0Q2h1bmtzLnNsaWNlKDEpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBjaHVua0RpdiA9IGRvbS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHZhciBjaHVua1NwYW4gPSBkb20uY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgY2h1bmtTcGFuLmNsYXNzTmFtZSA9IFwiYWNlX2dob3N0X3RleHRcIjtcblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBsaW5lIGlzIHdpZGVyIHRoYW4gdGhlIHZpZXdwb3J0LCB3cmFwIHRoZSBsaW5lXG4gICAgICAgICAgICAgICAgaWYgKGVsLndyYXBwZWQpIGNodW5rRGl2LmNsYXNzTmFtZSA9IFwiZ2hvc3RfdGV4dF9saW5lX3dyYXBwZWRcIjtcblxuICAgICAgICAgICAgICAgIC8vIElmIGEgZ2l2ZW4gbGluZSBkb2Vzbid0IGhhdmUgdGV4dCAoZS5nLiBpdCdzIGEgbGluZSBvZiB3aGl0ZXNwYWNlKSwgc2V0IGEgc3BhY2UgYXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gdGV4dGNvbnRlbnQgc28gdGhhdCBicm93c2VycyByZW5kZXIgdGhlIGVtcHR5IGxpbmUgZGl2LlxuICAgICAgICAgICAgICAgIGlmIChlbC50ZXh0Lmxlbmd0aCA9PT0gMCkgZWwudGV4dCA9IFwiIFwiO1xuXG4gICAgICAgICAgICAgICAgY2h1bmtTcGFuLmFwcGVuZENoaWxkKGRvbS5jcmVhdGVUZXh0Tm9kZShlbC50ZXh0KSk7XG4gICAgICAgICAgICAgICAgY2h1bmtEaXYuYXBwZW5kQ2hpbGQoY2h1bmtTcGFuKTtcbiAgICAgICAgICAgICAgICB3aWRnZXREaXYuYXBwZW5kQ2hpbGQoY2h1bmtEaXYpO1xuXG4gICAgICAgICAgICAgICAgLy8gT3ZlcndyaXRlIGxhc3RMaW5lRGl2IGV2ZXJ5IGl0ZXJhdGlvbiBzbyBhdCB0aGUgZW5kIGl0IHBvaW50cyB0b1xuICAgICAgICAgICAgICAgIC8vIHRoZSBsYXN0IGFkZGVkIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgbGFzdExpbmVEaXYgPSBjaHVua0RpdjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGhpZGRlbiB0b2tlbnMgdG8gdGhlIGxhc3QgbGluZSBvZiB0aGUgZ2hvc3QgdGV4dC5cbiAgICAgICAgICAgIGhpZGRlblRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvbS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVGV4dFRva2VuKHRva2VuLnR5cGUpKSBlbGVtZW50LmNsYXNzTmFtZSA9IFwiYWNlX1wiICsgdG9rZW4udHlwZS5yZXBsYWNlKC9cXC4vZywgXCIgYWNlX1wiKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGRvbS5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSkpO1xuICAgICAgICAgICAgICAgIGxhc3RMaW5lRGl2LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuJGdob3N0VGV4dFdpZGdldCA9IHtcbiAgICAgICAgICAgICAgICBlbDogd2lkZ2V0RGl2LFxuICAgICAgICAgICAgICAgIHJvdzogaW5zZXJ0UG9zaXRpb24ucm93LFxuICAgICAgICAgICAgICAgIGNvbHVtbjogaW5zZXJ0UG9zaXRpb24uY29sdW1uLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJhY2VfZ2hvc3RfdGV4dF9jb250YWluZXJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi53aWRnZXRNYW5hZ2VyLmFkZExpbmVXaWRnZXQodGhpcy4kZ2hvc3RUZXh0V2lkZ2V0KTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgd2V0aGVyIHRoZSBsaW5lIHdpZGdldCBmaXRzIGluIHRoZSBwYXJ0IG9mIHRoZSBzY3JlZW4gY3VycmVudGx5IGluIHZpZXdcbiAgICAgICAgICAgIHZhciBwaXhlbFBvc2l0aW9uID0gdGhpcy4kY3Vyc29yTGF5ZXIuZ2V0UGl4ZWxQb3NpdGlvbihpbnNlcnRQb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gICAgICAgICAgICB2YXIgZ2hvc3RUZXh0SGVpZ2h0ID0gdGV4dENodW5rcy5sZW5ndGggKiB0aGlzLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICB2YXIgZml0c1kgPSBnaG9zdFRleHRIZWlnaHQgPCAoaGVpZ2h0IC0gcGl4ZWxQb3NpdGlvbi50b3ApO1xuXG4gICAgICAgICAgICAvLyBJZiBpdCBmaXRzLCBubyBhY3Rpb24gbmVlZGVkXG4gICAgICAgICAgICBpZiAoZml0c1kpIHJldHVybjtcblxuICAgICAgICAgICAgLy8gSWYgaXQgY2FuIGZ1bGx5IGZpdCBpbiB0aGUgc2NyZWVuLCBzY3JvbGwgZG93biB1bnRpbCBpdCBmaXRzIG9uIHRoZSBzY3JlZW5cbiAgICAgICAgICAgIC8vIGlmIGl0IGNhbm5vdCBmdWxseSBmaXQsIHNjcm9sbCBzbyB0aGF0IHRoZSByb3cgd2l0aCB0aGUgY3Vyc29yXG4gICAgICAgICAgICAvLyBpcyBhdCB0aGUgdG9wIG9mIHRoZSBzY3JlZW4uXG4gICAgICAgICAgICBpZiAoZ2hvc3RUZXh0SGVpZ2h0IDwgaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxCeSgwLCAodGV4dENodW5rcy5sZW5ndGggLSAxKSAqIHRoaXMubGluZUhlaWdodCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Sb3coaW5zZXJ0UG9zaXRpb24ucm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBhbmQgb3JnYW5pemVzIHRleHQgaW50byB3cmFwcGVkIGNodW5rcy4gSW5pdGlhbGx5IHNwbGl0cyB0aGUgdGV4dCBieSBuZXdsaW5lIGNoYXJhY3RlcnMsXG4gICAgICogdGhlbiBmdXJ0aGVyIHByb2Nlc3NlcyBlYWNoIGxpbmUgYmFzZWQgb24gZGlzcGxheSB0b2tlbnMgYW5kIHNlc3Npb24gc2V0dGluZ3MgZm9yIHRhYiBzaXplIGFuZCB3cmFwcGluZyBsaW1pdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHBvc2l0aW9uXG4gICAgICogQHJldHVybiB7e3RleHQ6IHN0cmluZywgd3JhcHBlZDogYm9vbGVhbn1bXX1cbiAgICAgKi9cbiAgICAkY2FsY3VsYXRlV3JhcHBlZFRleHRDaHVua3ModGV4dCwgcG9zaXRpb24pIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZVdpZHRoID0gdGhpcy4kc2l6ZS5zY3JvbGxlcldpZHRoIC0gdGhpcy4kcGFkZGluZyAqIDI7XG4gICAgICAgIHZhciBsaW1pdCA9IE1hdGguZmxvb3IoYXZhaWxhYmxlV2lkdGggLyB0aGlzLmNoYXJhY3RlcldpZHRoKSAtIDI7XG4gICAgICAgIGxpbWl0ID0gbGltaXQgPD0gMCA/IDYwIDogbGltaXQ7IC8vIHRoaXMgaXMgYSBoYWNrIHRvIHByZXZlbnQgdGhlIGVkaXRvciBmcm9tIGNyYXNoaW5nIHdoZW4gdGhlIHdpbmRvdyBpcyB0b28gc21hbGxcblxuICAgICAgICB2YXIgdGV4dExpbmVzID0gdGV4dC5zcGxpdCgvXFxyP1xcbi8pO1xuICAgICAgICB2YXIgdGV4dENodW5rcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGRpc3BsYXlUb2tlbnMgPSB0aGlzLnNlc3Npb24uJGdldERpc3BsYXlUb2tlbnModGV4dExpbmVzW2ldLCBwb3NpdGlvbi5jb2x1bW4pO1xuICAgICAgICAgICAgdmFyIHdyYXBTcGxpdHMgPSB0aGlzLnNlc3Npb24uJGNvbXB1dGVXcmFwU3BsaXRzKGRpc3BsYXlUb2tlbnMsIGxpbWl0LCB0aGlzLnNlc3Npb24uJHRhYlNpemUpO1xuXG4gICAgICAgICAgICBpZiAod3JhcFNwbGl0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB3cmFwU3BsaXRzLnB1c2godGV4dExpbmVzW2ldLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHdyYXBTcGxpdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHRTbGljZSA9IHRleHRMaW5lc1tpXS5zbGljZShzdGFydCwgd3JhcFNwbGl0c1tqXSk7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDaHVua3MucHVzaCh7dGV4dDogdGV4dFNsaWNlLCB3cmFwcGVkOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gd3JhcFNwbGl0c1tqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0Q2h1bmtzLnB1c2goe3RleHQ6IHRleHRMaW5lc1tpXSwgd3JhcHBlZDogZmFsc2V9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dENodW5rcztcbiAgICB9XG5cbiAgICByZW1vdmVHaG9zdFRleHQoKSB7XG4gICAgICAgIGlmICghdGhpcy4kZ2hvc3RUZXh0KSByZXR1cm47XG5cbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy4kZ2hvc3RUZXh0LnBvc2l0aW9uO1xuICAgICAgICB0aGlzLnJlbW92ZUV4dHJhVG9rZW4ocG9zaXRpb24ucm93LCBwb3NpdGlvbi5jb2x1bW4pO1xuICAgICAgICBpZiAodGhpcy4kZ2hvc3RUZXh0V2lkZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24ud2lkZ2V0TWFuYWdlci5yZW1vdmVMaW5lV2lkZ2V0KHRoaXMuJGdob3N0VGV4dFdpZGdldCk7XG4gICAgICAgICAgICB0aGlzLiRnaG9zdFRleHRXaWRnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGdob3N0VGV4dCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3dcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbHVtbl1cbiAgICAgKi9cbiAgICBhZGRUb2tlbih0ZXh0LCB0eXBlLCByb3csIGNvbHVtbikge1xuICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbjtcbiAgICAgICAgc2Vzc2lvbi5iZ1Rva2VuaXplci5saW5lc1tyb3ddID0gbnVsbDtcbiAgICAgICAgdmFyIG5ld1Rva2VuID0ge3R5cGU6IHR5cGUsIHZhbHVlOiB0ZXh0fTtcbiAgICAgICAgdmFyIHRva2VucyA9IHNlc3Npb24uZ2V0VG9rZW5zKHJvdyk7XG4gICAgICAgIGlmIChjb2x1bW4gPT0gbnVsbCB8fCAhdG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgdG9rZW5zLnB1c2gobmV3VG9rZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGwgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9MDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgICAgICAgICAgICBsICs9IHRva2VuLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uIDw9IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpZmYgPSB0b2tlbi52YWx1ZS5sZW5ndGggLSAobCAtIGNvbHVtbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiZWZvcmUgPSB0b2tlbi52YWx1ZS5zbGljZSgwLCBkaWZmKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFmdGVyID0gdG9rZW4udmFsdWUuc2xpY2UoZGlmZik7XG5cbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnNwbGljZShpLCAxLCB7dHlwZTogdG9rZW4udHlwZSwgdmFsdWU6IGJlZm9yZX0sICBuZXdUb2tlbiwgIHt0eXBlOiB0b2tlbi50eXBlLCB2YWx1ZTogYWZ0ZXJ9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlTGluZXMocm93LCByb3cpO1xuICAgIH1cblxuICAgIC8vIEhpZGUgYWxsIG5vbi1naG9zdC10ZXh0IHRva2VucyB0byB0aGUgcmlnaHQgb2YgYSBnaXZlbiBwb3NpdGlvbi5cbiAgICBoaWRlVG9rZW5zQWZ0ZXJQb3NpdGlvbihyb3csIGNvbHVtbikge1xuICAgICAgICB2YXIgdG9rZW5zID0gdGhpcy5zZXNzaW9uLmdldFRva2Vucyhyb3cpO1xuICAgICAgICB2YXIgbCA9IDA7XG4gICAgICAgIHZhciBoYXNQYXNzZWRDdXJzb3IgPSBmYWxzZTtcbiAgICAgICAgdmFyIGhpZGRlblRva2VucyA9IFtdO1xuICAgICAgICAvLyBMb29wIG92ZXIgYWxsIHRva2VucyBhbmQgdHJhY2sgYXQgd2hhdCBwb3NpdGlvbiBpbiB0aGUgbGluZSB0aGV5IGVuZC5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0b2tlbiA9IHRva2Vuc1tpXTtcbiAgICAgICAgICAgIGwgKz0gdG9rZW4udmFsdWUubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJnaG9zdF90ZXh0XCIpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHBhc3NlZCB0aGUgY3VycmVudCBjdXJzb3IgcG9zaXRpb24sIG1hcmsgYWxsIG9mIHRoZW0gYXMgaGlkZGVuLlxuICAgICAgICAgICAgaWYgKGhhc1Bhc3NlZEN1cnNvcikge1xuICAgICAgICAgICAgICAgIGhpZGRlblRva2Vucy5wdXNoKHt0eXBlOiB0b2tlbi50eXBlLCB2YWx1ZTogdG9rZW4udmFsdWV9KTtcbiAgICAgICAgICAgICAgICB0b2tlbi50eXBlID0gXCJoaWRkZW5fdG9rZW5cIjtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIGNhbGwgdGhpcyBtZXRob2QgYWZ0ZXIgd2UgY2FsbCBhZGRUb2tlbiwgc28gd2UgYXJlIGd1YXJhbnRlZWQgYSBuZXcgdG9rZW4gc3RhcnRzIGF0IHRoZSBjdXJzb3IgcG9zaXRpb24uXG4gICAgICAgICAgICAvLyBPbmNlIHdlIHJlYWNoZWQgdGhhdCBwb2ludCBpbiB0aGUgbG9vcCwgZmxpcCB0aGUgZmxhZy5cbiAgICAgICAgICAgIGlmIChsID09PSBjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICBoYXNQYXNzZWRDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlTGluZXMocm93LCByb3cpO1xuICAgICAgICByZXR1cm4gaGlkZGVuVG9rZW5zO1xuICAgIH1cblxuICAgIHJlbW92ZUV4dHJhVG9rZW4ocm93LCBjb2x1bW4pIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uLmJnVG9rZW5pemVyLmxpbmVzW3Jvd10gPSBudWxsO1xuICAgICAgICB0aGlzLnVwZGF0ZUxpbmVzKHJvdywgcm93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbU2V0cyBhIG5ldyB0aGVtZSBmb3IgdGhlIGVkaXRvci4gYHRoZW1lYCBzaG91bGQgZXhpc3QsIGFuZCBiZSBhIGRpcmVjdG9yeSBwYXRoLCBsaWtlIGBhY2UvdGhlbWUvdGV4dG1hdGVgLl17OiAjVmlydHVhbFJlbmRlcmVyLnNldFRoZW1lfVxuICAgICAqIEBwYXJhbSB7U3RyaW5nIHwgVGhlbWV9IFt0aGVtZV0gVGhlIHBhdGggdG8gYSB0aGVtZVxuICAgICAqIEBwYXJhbSB7KCkgPT4gdm9pZH0gW2NiXSBvcHRpb25hbCBjYWxsYmFja1xuXG4gICAgICoqL1xuICAgIHNldFRoZW1lKHRoZW1lLCBjYikge1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgICAvKipAdHlwZSB7YW55fSovXG4gICAgICAgIHRoaXMuJHRoZW1lSWQgPSB0aGVtZTtcbiAgICAgICAgX3NlbGYuX2Rpc3BhdGNoRXZlbnQoJ3RoZW1lQ2hhbmdlJyx7dGhlbWU6dGhlbWV9KTtcblxuICAgICAgICBpZiAoIXRoZW1lIHx8IHR5cGVvZiB0aGVtZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB2YXIgbW9kdWxlTmFtZSA9IHRoZW1lIHx8IHRoaXMuJG9wdGlvbnMudGhlbWUuaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgY29uZmlnLmxvYWRNb2R1bGUoW1widGhlbWVcIiwgbW9kdWxlTmFtZV0sIGFmdGVyTG9hZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhZnRlckxvYWQodGhlbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7VGhlbWV9IG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYWZ0ZXJMb2FkKG1vZHVsZSkge1xuICAgICAgICAgICAgaWYgKF9zZWxmLiR0aGVtZUlkICE9IHRoZW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYiAmJiBjYigpO1xuICAgICAgICAgICAgaWYgKCFtb2R1bGUgfHwgIW1vZHVsZS5jc3NDbGFzcylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb3VsZG4ndCBsb2FkIG1vZHVsZSBcIiArIHRoZW1lICsgXCIgb3IgaXQgZGlkbid0IGNhbGwgZGVmaW5lXCIpO1xuICAgICAgICAgICAgaWYgKG1vZHVsZS4kaWQpXG4gICAgICAgICAgICAgICAgX3NlbGYuJHRoZW1lSWQgPSBtb2R1bGUuJGlkO1xuICAgICAgICAgICAgZG9tLmltcG9ydENzc1N0cmluZyhcbiAgICAgICAgICAgICAgICBtb2R1bGUuY3NzVGV4dCxcbiAgICAgICAgICAgICAgICBtb2R1bGUuY3NzQ2xhc3MsXG4gICAgICAgICAgICAgICAgX3NlbGYuY29udGFpbmVyXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKF9zZWxmLnRoZW1lKVxuICAgICAgICAgICAgICAgIGRvbS5yZW1vdmVDc3NDbGFzcyhfc2VsZi5jb250YWluZXIsIF9zZWxmLnRoZW1lLmNzc0NsYXNzKTtcbiAgICAgICAgICAgIC8qKkB0eXBlIHthbnl9Ki9cbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gXCJwYWRkaW5nXCIgaW4gbW9kdWxlID8gbW9kdWxlLnBhZGRpbmdcbiAgICAgICAgICAgICAgICA6IFwicGFkZGluZ1wiIGluIChfc2VsZi50aGVtZSB8fCB7fSkgPyA0IDogX3NlbGYuJHBhZGRpbmc7XG4gICAgICAgICAgICBpZiAoX3NlbGYuJHBhZGRpbmcgJiYgcGFkZGluZyAhPSBfc2VsZi4kcGFkZGluZylcbiAgICAgICAgICAgICAgICBfc2VsZi5zZXRQYWRkaW5nKHBhZGRpbmcpO1xuXG4gICAgICAgICAgICAvLyB0aGlzIGlzIGtlcHQgb25seSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgIF9zZWxmLiR0aGVtZSA9IG1vZHVsZS5jc3NDbGFzcztcblxuICAgICAgICAgICAgX3NlbGYudGhlbWUgPSBtb2R1bGU7XG4gICAgICAgICAgICBkb20uYWRkQ3NzQ2xhc3MoX3NlbGYuY29udGFpbmVyLCBtb2R1bGUuY3NzQ2xhc3MpO1xuICAgICAgICAgICAgZG9tLnNldENzc0NsYXNzKF9zZWxmLmNvbnRhaW5lciwgXCJhY2VfZGFya1wiLCBtb2R1bGUuaXNEYXJrKTtcblxuICAgICAgICAgICAgLy8gZm9yY2UgcmUtbWVhc3VyZSBvZiB0aGUgZ3V0dGVyIHdpZHRoXG4gICAgICAgICAgICBpZiAoX3NlbGYuJHNpemUpIHtcbiAgICAgICAgICAgICAgICBfc2VsZi4kc2l6ZS53aWR0aCA9IDA7XG4gICAgICAgICAgICAgICAgX3NlbGYuJHVwZGF0ZVNpemVBc3luYygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfc2VsZi5fZGlzcGF0Y2hFdmVudCgndGhlbWVMb2FkZWQnLCB7dGhlbWU6bW9kdWxlfSk7XG4gICAgICAgICAgICBjYiAmJiBjYigpO1xuXG4gICAgICAgICAgICAvLyB3b3JrYXJvdW5kIGZvciBzYWZhcmkgbm90IHJlZHJhd2luZyB0aGUgZWRpdG9yXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYWpheG9yZy9hY2UvaXNzdWVzLzU1NjlcbiAgICAgICAgICAgIGlmICh1c2VyYWdlbnQuaXNTYWZhcmkgJiYgX3NlbGYuc2Nyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBfc2VsZi5zY3JvbGxlci5zdHlsZS5iYWNrZ3JvdW5kID0gXCJyZWRcIjtcbiAgICAgICAgICAgICAgICBfc2VsZi5zY3JvbGxlci5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFtSZXR1cm5zIHRoZSBwYXRoIG9mIHRoZSBjdXJyZW50IHRoZW1lLl17OiAjVmlydHVhbFJlbmRlcmVyLmdldFRoZW1lfVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAgICoqL1xuICAgIGdldFRoZW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdGhlbWVJZDtcbiAgICB9XG5cbiAgICAvLyBNZXRob2RzIGFsbG93cyB0byBhZGQgLyByZW1vdmUgQ1NTIGNsYXNzbmFtZXMgdG8gdGhlIGVkaXRvciBlbGVtZW50LlxuICAgIC8vIFRoaXMgZmVhdHVyZSBjYW4gYmUgdXNlZCBieSBwbHVnLWlucyB0byBwcm92aWRlIGEgdmlzdWFsIGluZGljYXRpb24gb2ZcbiAgICAvLyBhIGNlcnRhaW4gbW9kZSB0aGF0IGVkaXRvciBpcyBpbi5cblxuICAgIC8qKlxuICAgICAqIFtBZGRzIGEgbmV3IGNsYXNzLCBgc3R5bGVgLCB0byB0aGUgZWRpdG9yLl17OiAjVmlydHVhbFJlbmRlcmVyLnNldFN0eWxlfVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHlsZSBBIGNsYXNzIG5hbWVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59W2luY2x1ZGVdXG4gICAgICoqL1xuICAgIHNldFN0eWxlKHN0eWxlLCBpbmNsdWRlKSB7XG4gICAgICAgIGRvbS5zZXRDc3NDbGFzcyh0aGlzLmNvbnRhaW5lciwgc3R5bGUsIGluY2x1ZGUgIT09IGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbUmVtb3ZlcyB0aGUgY2xhc3MgYHN0eWxlYCBmcm9tIHRoZSBlZGl0b3IuXXs6ICNWaXJ0dWFsUmVuZGVyZXIudW5zZXRTdHlsZX1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3R5bGUgQSBjbGFzcyBuYW1lXG4gICAgICpcbiAgICAgKiovXG4gICAgdW5zZXRTdHlsZShzdHlsZSkge1xuICAgICAgICBkb20ucmVtb3ZlQ3NzQ2xhc3ModGhpcy5jb250YWluZXIsIHN0eWxlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3R5bGVcbiAgICAgKi9cbiAgICBzZXRDdXJzb3JTdHlsZShzdHlsZSkge1xuICAgICAgICBkb20uc2V0U3R5bGUodGhpcy5zY3JvbGxlci5zdHlsZSwgXCJjdXJzb3JcIiwgc3R5bGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjdXJzb3JTdHlsZSBBIGNzcyBjdXJzb3Igc3R5bGVcbiAgICAgKiovXG4gICAgc2V0TW91c2VDdXJzb3IoY3Vyc29yU3R5bGUpIHtcbiAgICAgICAgZG9tLnNldFN0eWxlKHRoaXMuc2Nyb2xsZXIuc3R5bGUsIFwiY3Vyc29yXCIsIGN1cnNvclN0eWxlKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUb1NoYWRvd1Jvb3QoKSB7XG4gICAgICAgIGRvbS5pbXBvcnRDc3NTdHJpbmcoZWRpdG9yQ3NzLCBcImFjZV9lZGl0b3IuY3NzXCIsIHRoaXMuY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgdGV4dCBhbmQgY3Vyc29yIGxheWVycyBmb3IgdGhpcyByZW5kZXJlci5cblxuICAgICAqKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmZyZWV6ZSgpO1xuICAgICAgICB0aGlzLiRmb250TWV0cmljcy5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuJGN1cnNvckxheWVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICB0aGlzLnNldE9wdGlvbihcInVzZVJlc2l6ZU9ic2VydmVyXCIsIGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3ZhbF1cbiAgICAgKi9cbiAgICAkdXBkYXRlQ3VzdG9tU2Nyb2xsYmFyKHZhbCkge1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLiRob3JpelNjcm9sbCA9IHRoaXMuJHZTY3JvbGwgPSBudWxsO1xuICAgICAgICB0aGlzLnNjcm9sbEJhclYuZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5zY3JvbGxCYXJILmVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIGlmICh0aGlzLiRzY3JvbGxEZWNvcmF0b3IpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLiRzY3JvbGxEZWNvcmF0b3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLyoqQHR5cGUge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuVlNjcm9sbGJhcn0qL1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxCYXJWID0gbmV3IFZTY3JvbGxCYXJDdXN0b20odGhpcy5jb250YWluZXIsIHRoaXMpO1xuICAgICAgICAgICAgLyoqQHR5cGUge2ltcG9ydChcIi4uL2FjZS1pbnRlcm5hbFwiKS5BY2UuSFNjcm9sbGJhcn0qL1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxCYXJIID0gbmV3IEhTY3JvbGxCYXJDdXN0b20odGhpcy5jb250YWluZXIsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxCYXJWLnNldEhlaWdodCh0aGlzLiRzaXplLnNjcm9sbGVySGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFySC5zZXRXaWR0aCh0aGlzLiRzaXplLnNjcm9sbGVyV2lkdGgpO1xuXG4gICAgICAgICAgICB0aGlzLnNjcm9sbEJhclYuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghX3NlbGYuJHNjcm9sbEFuaW1hdGlvbikgX3NlbGYuc2Vzc2lvbi5zZXRTY3JvbGxUb3AoZS5kYXRhIC0gX3NlbGYuc2Nyb2xsTWFyZ2luLnRvcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFySC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfc2VsZi4kc2Nyb2xsQW5pbWF0aW9uKSBfc2VsZi5zZXNzaW9uLnNldFNjcm9sbExlZnQoZS5kYXRhIC0gX3NlbGYuc2Nyb2xsTWFyZ2luLmxlZnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiRzY3JvbGxEZWNvcmF0b3IgPSBuZXcgRGVjb3JhdG9yKHRoaXMuc2Nyb2xsQmFyViwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLiRzY3JvbGxEZWNvcmF0b3IuJHVwZGF0ZURlY29yYXRvcnMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFyViA9IG5ldyBWU2Nyb2xsQmFyKHRoaXMuY29udGFpbmVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFySCA9IG5ldyBIU2Nyb2xsQmFyKHRoaXMuY29udGFpbmVyLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFyVi5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfc2VsZi4kc2Nyb2xsQW5pbWF0aW9uKSBfc2VsZi5zZXNzaW9uLnNldFNjcm9sbFRvcChlLmRhdGEgLSBfc2VsZi5zY3JvbGxNYXJnaW4udG9wKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxCYXJILmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9zZWxmLiRzY3JvbGxBbmltYXRpb24pIF9zZWxmLnNlc3Npb24uc2V0U2Nyb2xsTGVmdChlLmRhdGEgLSBfc2VsZi5zY3JvbGxNYXJnaW4ubGVmdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuXG4gICAgICovXG4gICAgJGFkZFJlc2l6ZU9ic2VydmVyKCkge1xuICAgICAgICBpZiAoIXdpbmRvdy5SZXNpemVPYnNlcnZlciB8fCB0aGlzLiRyZXNpemVPYnNlcnZlcikgcmV0dXJuO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuJHJlc2l6ZVRpbWVyID0gbGFuZy5kZWxheWVkQ2FsbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5kZXN0cm95ZWQpICBzZWxmLm9uUmVzaXplKCk7XG4gICAgICAgIH0sIDUwKTtcbiAgICAgICAgdGhpcy4kcmVzaXplT2JzZXJ2ZXIgPSBuZXcgd2luZG93LlJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciB3ID0gZVswXS5jb250ZW50UmVjdC53aWR0aDtcbiAgICAgICAgICAgIHZhciBoID0gZVswXS5jb250ZW50UmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoc2VsZi4kc2l6ZS53aWR0aCAtIHcpID4gMVxuICAgICAgICAgICAgICAgIHx8IE1hdGguYWJzKHNlbGYuJHNpemUuaGVpZ2h0IC0gaCkgPiAxXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBzZWxmLiRyZXNpemVUaW1lci5kZWxheSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZWxmLiRyZXNpemVUaW1lci5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuJHJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXIpO1xuICAgIH1cblxufVxuXG5WaXJ0dWFsUmVuZGVyZXIucHJvdG90eXBlLkNIQU5HRV9DVVJTT1IgPSAxO1xuVmlydHVhbFJlbmRlcmVyLnByb3RvdHlwZS5DSEFOR0VfTUFSS0VSID0gMjtcblZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUuQ0hBTkdFX0dVVFRFUiA9IDQ7XG5WaXJ0dWFsUmVuZGVyZXIucHJvdG90eXBlLkNIQU5HRV9TQ1JPTEwgPSA4O1xuVmlydHVhbFJlbmRlcmVyLnByb3RvdHlwZS5DSEFOR0VfTElORVMgPSAxNjtcblZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUuQ0hBTkdFX1RFWFQgPSAzMjtcblZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUuQ0hBTkdFX1NJWkUgPSA2NDtcblZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUuQ0hBTkdFX01BUktFUl9CQUNLID0gMTI4O1xuVmlydHVhbFJlbmRlcmVyLnByb3RvdHlwZS5DSEFOR0VfTUFSS0VSX0ZST05UID0gMjU2O1xuVmlydHVhbFJlbmRlcmVyLnByb3RvdHlwZS5DSEFOR0VfRlVMTCA9IDUxMjtcblZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUuQ0hBTkdFX0hfU0NST0xMID0gMTAyNDtcblZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUuJGNoYW5nZXMgPSAwO1xuVmlydHVhbFJlbmRlcmVyLnByb3RvdHlwZS4kcGFkZGluZyA9IG51bGw7XG5WaXJ0dWFsUmVuZGVyZXIucHJvdG90eXBlLiRmcm96ZW4gPSBmYWxzZTtcblZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUuU1RFUFMgPSA4O1xuXG5vb3AuaW1wbGVtZW50KFZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUsIEV2ZW50RW1pdHRlcik7XG5cbmNvbmZpZy5kZWZpbmVPcHRpb25zKFZpcnR1YWxSZW5kZXJlci5wcm90b3R5cGUsIFwicmVuZGVyZXJcIiwge1xuICAgIHVzZVJlc2l6ZU9ic2VydmVyOiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gdmFsdWVcbiAgICAgICAgICogQHRoaXN7VmlydHVhbFJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCF2YWx1ZSAmJiB0aGlzLiRyZXNpemVPYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuJHJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRyZXNpemVUaW1lci5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRyZXNpemVUaW1lciA9IHRoaXMuJHJlc2l6ZU9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgIXRoaXMuJHJlc2l6ZU9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kYWRkUmVzaXplT2JzZXJ2ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgYW5pbWF0ZWRTY3JvbGw6IHtpbml0aWFsVmFsdWU6IGZhbHNlfSxcbiAgICBzaG93SW52aXNpYmxlczoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kdGV4dExheWVyLnNldFNob3dJbnZpc2libGVzKHZhbHVlKSlcbiAgICAgICAgICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX1RFWFQpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IGZhbHNlXG4gICAgfSxcbiAgICBzaG93UHJpbnRNYXJnaW46IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbigpIHsgdGhpcy4kdXBkYXRlUHJpbnRNYXJnaW4oKTsgfSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiB0cnVlXG4gICAgfSxcbiAgICBwcmludE1hcmdpbkNvbHVtbjoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKCkgeyB0aGlzLiR1cGRhdGVQcmludE1hcmdpbigpOyB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IDgwXG4gICAgfSxcbiAgICBwcmludE1hcmdpbjoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHZhbFxuICAgICAgICAgKiBAdGhpc3tWaXJ0dWFsUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICB0aGlzLiRwcmludE1hcmdpbkNvbHVtbiA9IHZhbDtcbiAgICAgICAgICAgIHRoaXMuJHNob3dQcmludE1hcmdpbiA9ICEhdmFsO1xuICAgICAgICAgICAgdGhpcy4kdXBkYXRlUHJpbnRNYXJnaW4oKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzaG93UHJpbnRNYXJnaW4gJiYgdGhpcy4kcHJpbnRNYXJnaW5Db2x1bW47XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNob3dHdXR0ZXI6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbihzaG93KXtcbiAgICAgICAgICAgIHRoaXMuJGd1dHRlci5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9GVUxMKTtcbiAgICAgICAgICAgIHRoaXMub25HdXR0ZXJSZXNpemUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiB0cnVlXG4gICAgfSxcbiAgICB1c2VTdmdHdXR0ZXJJY29uczoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgIHRoaXMuJGd1dHRlckxheWVyLiR1c2VTdmdHdXR0ZXJJY29ucyA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IGZhbHNlXG4gICAgfSxcbiAgICBzaG93Rm9sZGVkQW5ub3RhdGlvbnM6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICB0aGlzLiRndXR0ZXJMYXllci4kc2hvd0ZvbGRlZEFubm90YXRpb25zID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogZmFsc2VcbiAgICB9LFxuICAgIGZhZGVGb2xkV2lkZ2V0czoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHNob3cpIHtcbiAgICAgICAgICAgIGRvbS5zZXRDc3NDbGFzcyh0aGlzLiRndXR0ZXIsIFwiYWNlX2ZhZGUtZm9sZC13aWRnZXRzXCIsIHNob3cpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IGZhbHNlXG4gICAgfSxcbiAgICBzaG93Rm9sZFdpZGdldHM6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbihzaG93KSB7XG4gICAgICAgICAgICB0aGlzLiRndXR0ZXJMYXllci5zZXRTaG93Rm9sZFdpZGdldHMoc2hvdyk7XG4gICAgICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX0dVVFRFUik7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogdHJ1ZVxuICAgIH0sXG4gICAgZGlzcGxheUluZGVudEd1aWRlczoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHNob3cpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiR0ZXh0TGF5ZXIuc2V0RGlzcGxheUluZGVudEd1aWRlcyhzaG93KSlcbiAgICAgICAgICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX1RFWFQpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IHRydWVcbiAgICB9LFxuICAgIGhpZ2hsaWdodEluZGVudEd1aWRlczoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChzaG93KSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kdGV4dExheWVyLnNldEhpZ2hsaWdodEluZGVudEd1aWRlcyhzaG93KSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdGV4dExheWVyLiRoaWdobGlnaHRJbmRlbnRHdWlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdGV4dExheWVyLiRjbGVhckFjdGl2ZUluZGVudEd1aWRlKHRoaXMuJHRleHRMYXllci4kbGluZXMuY2VsbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IHRydWVcbiAgICB9LFxuICAgIGhpZ2hsaWdodEd1dHRlckxpbmU6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbihzaG91bGRIaWdobGlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuJGd1dHRlckxheWVyLnNldEhpZ2hsaWdodEd1dHRlckxpbmUoc2hvdWxkSGlnaGxpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfR1VUVEVSKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiB0cnVlXG4gICAgfSxcbiAgICBoU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZToge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLiRoU2Nyb2xsQmFyQWx3YXlzVmlzaWJsZSB8fCAhdGhpcy4kaG9yaXpTY3JvbGwpXG4gICAgICAgICAgICAgICAgdGhpcy4kbG9vcC5zY2hlZHVsZSh0aGlzLkNIQU5HRV9TQ1JPTEwpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IGZhbHNlXG4gICAgfSxcbiAgICB2U2Nyb2xsQmFyQWx3YXlzVmlzaWJsZToge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLiR2U2Nyb2xsQmFyQWx3YXlzVmlzaWJsZSB8fCAhdGhpcy4kdlNjcm9sbClcbiAgICAgICAgICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX1NDUk9MTCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogZmFsc2VcbiAgICB9LFxuICAgIGZvbnRTaXplOiB7XG4gICAgICAgIHNldDogZnVuY3Rpb24oc2l6ZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaXplID09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgc2l6ZSA9IHNpemUgKyBcInB4XCI7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5mb250U2l6ZSA9IHNpemU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZvbnRTaXplKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogMTJcbiAgICB9LFxuICAgIGZvbnRGYW1pbHk6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5mb250RmFtaWx5ID0gbmFtZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRm9udFNpemUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbWF4TGluZXM6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRnVsbCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtaW5MaW5lczoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHZhbFxuICAgICAgICAgKiBAdGhpc3tWaXJ0dWFsUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgaWYgKCEodGhpcy4kbWluTGluZXMgPCAweDFmZmZmZmZmZmZmZmYpKVxuICAgICAgICAgICAgICAgIHRoaXMuJG1pbkxpbmVzID0gMDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRnVsbCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtYXhQaXhlbEhlaWdodDoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGdWxsKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogMFxuICAgIH0sXG4gICAgc2Nyb2xsUGFzdEVuZDoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHZhbFxuICAgICAgICAgKiBAdGhpc3tWaXJ0dWFsUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgdmFsID0gK3ZhbCB8fCAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjcm9sbFBhc3RFbmQgPT0gdmFsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuJHNjcm9sbFBhc3RFbmQgPSB2YWw7XG4gICAgICAgICAgICB0aGlzLiRsb29wLnNjaGVkdWxlKHRoaXMuQ0hBTkdFX1NDUk9MTCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxWYWx1ZTogMCxcbiAgICAgICAgaGFuZGxlc1NldDogdHJ1ZVxuICAgIH0sXG4gICAgZml4ZWRXaWR0aEd1dHRlcjoge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgdGhpcy4kZ3V0dGVyTGF5ZXIuJGZpeGVkV2lkdGggPSAhIXZhbDtcbiAgICAgICAgICAgIHRoaXMuJGxvb3Auc2NoZWR1bGUodGhpcy5DSEFOR0VfR1VUVEVSKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY3VzdG9tU2Nyb2xsYmFyOiB7XG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICB0aGlzLiR1cGRhdGVDdXN0b21TY3JvbGxiYXIodmFsKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbFZhbHVlOiBmYWxzZVxuICAgIH0sXG4gICAgdGhlbWU6IHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWwpIHsgdGhpcy5zZXRUaGVtZSh2YWwpOyB9LFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy4kdGhlbWVJZCB8fCB0aGlzLnRoZW1lOyB9LFxuICAgICAgICBpbml0aWFsVmFsdWU6IFwiLi90aGVtZS90ZXh0bWF0ZVwiLFxuICAgICAgICBoYW5kbGVzU2V0OiB0cnVlXG4gICAgfSxcbiAgICBoYXNDc3NUcmFuc2Zvcm1zOiB7XG4gICAgfSxcbiAgICB1c2VUZXh0YXJlYUZvcklNRToge1xuICAgICAgICBpbml0aWFsVmFsdWU6ICF1c2VyYWdlbnQuaXNNb2JpbGUgJiYgIXVzZXJhZ2VudC5pc0lFXG4gICAgfVxufSk7XG5cbmV4cG9ydHMuVmlydHVhbFJlbmRlcmVyID0gVmlydHVhbFJlbmRlcmVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/virtual_renderer.js\n");

/***/ }),

/***/ "./node_modules/ace-code/src/worker/worker_client.js":
/*!***********************************************************!*\
  !*** ./node_modules/ace-code/src/worker/worker_client.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("// not implemented\nvar WorkerClient;\nWorkerClient = function() {\n    this.attachToDocument = function() {};\n    this.on = function() {};\n    this.terminate = function() {};\n};\n\nexports.WorkerClient = WorkerClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3dvcmtlci93b3JrZXJfY2xpZW50LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvYWNlLWNvZGUvc3JjL3dvcmtlci93b3JrZXJfY2xpZW50LmpzPzE4ZDMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbm90IGltcGxlbWVudGVkXG52YXIgV29ya2VyQ2xpZW50O1xuV29ya2VyQ2xpZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5hdHRhY2hUb0RvY3VtZW50ID0gZnVuY3Rpb24oKSB7fTtcbiAgICB0aGlzLm9uID0gZnVuY3Rpb24oKSB7fTtcbiAgICB0aGlzLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uKCkge307XG59O1xuXG5leHBvcnRzLldvcmtlckNsaWVudCA9IFdvcmtlckNsaWVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/ace-code/src/worker/worker_client.js\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/@xterm/xterm/css/xterm.css":
/*!***************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/@xterm/xterm/css/xterm.css ***!
  \***************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../css-loader/dist/runtime/sourceMaps.js */ \"./node_modules/css-loader/dist/runtime/sourceMaps.js\");\n/* harmony import */ var _css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * https://github.com/chjj/term.js\n * @license MIT\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * Originally forked from (with the author's permission):\n *   Fabrice Bellard's javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n */\n\n/**\n *  Default styles for xterm.js\n */\n\n.xterm {\n    cursor: text;\n    position: relative;\n    user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n}\n\n.xterm.focus,\n.xterm:focus {\n    outline: none;\n}\n\n.xterm .xterm-helpers {\n    position: absolute;\n    top: 0;\n    /**\n     * The z-index of the helpers must be higher than the canvases in order for\n     * IMEs to appear on top.\n     */\n    z-index: 5;\n}\n\n.xterm .xterm-helper-textarea {\n    padding: 0;\n    border: 0;\n    margin: 0;\n    /* Move textarea out of the screen to the far left, so that the cursor is not visible */\n    position: absolute;\n    opacity: 0;\n    left: -9999em;\n    top: 0;\n    width: 0;\n    height: 0;\n    z-index: -5;\n    /** Prevent wrapping so the IME appears against the textarea at the correct position */\n    white-space: nowrap;\n    overflow: hidden;\n    resize: none;\n}\n\n.xterm .composition-view {\n    /* TODO: Composition position got messed up somewhere */\n    background: #000;\n    color: #FFF;\n    display: none;\n    position: absolute;\n    white-space: nowrap;\n    z-index: 1;\n}\n\n.xterm .composition-view.active {\n    display: block;\n}\n\n.xterm .xterm-viewport {\n    /* On OS X this is required in order for the scroll bar to appear fully opaque */\n    background-color: #000;\n    overflow-y: scroll;\n    cursor: default;\n    position: absolute;\n    right: 0;\n    left: 0;\n    top: 0;\n    bottom: 0;\n}\n\n.xterm .xterm-screen {\n    position: relative;\n}\n\n.xterm .xterm-screen canvas {\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n.xterm .xterm-scroll-area {\n    visibility: hidden;\n}\n\n.xterm-char-measure-element {\n    display: inline-block;\n    visibility: hidden;\n    position: absolute;\n    top: 0;\n    left: -9999em;\n    line-height: normal;\n}\n\n.xterm.enable-mouse-events {\n    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\n    cursor: default;\n}\n\n.xterm.xterm-cursor-pointer,\n.xterm .xterm-cursor-pointer {\n    cursor: pointer;\n}\n\n.xterm.column-select.focus {\n    /* Column selection mode */\n    cursor: crosshair;\n}\n\n.xterm .xterm-accessibility:not(.debug),\n.xterm .xterm-message {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 10;\n    color: transparent;\n    pointer-events: none;\n}\n\n.xterm .xterm-accessibility-tree:not(.debug) *::selection {\n  color: transparent;\n}\n\n.xterm .xterm-accessibility-tree {\n  user-select: text;\n  white-space: pre;\n}\n\n.xterm .live-region {\n    position: absolute;\n    left: -9999px;\n    width: 1px;\n    height: 1px;\n    overflow: hidden;\n}\n\n.xterm-dim {\n    /* Dim should not apply to background, so the opacity of the foreground color is applied\n     * explicitly in the generated class and reset to 1 here */\n    opacity: 1 !important;\n}\n\n.xterm-underline-1 { text-decoration: underline; }\n.xterm-underline-2 { text-decoration: double underline; }\n.xterm-underline-3 { text-decoration: wavy underline; }\n.xterm-underline-4 { text-decoration: dotted underline; }\n.xterm-underline-5 { text-decoration: dashed underline; }\n\n.xterm-overline {\n    text-decoration: overline;\n}\n\n.xterm-overline.xterm-underline-1 { text-decoration: overline underline; }\n.xterm-overline.xterm-underline-2 { text-decoration: overline double underline; }\n.xterm-overline.xterm-underline-3 { text-decoration: overline wavy underline; }\n.xterm-overline.xterm-underline-4 { text-decoration: overline dotted underline; }\n.xterm-overline.xterm-underline-5 { text-decoration: overline dashed underline; }\n\n.xterm-strikethrough {\n    text-decoration: line-through;\n}\n\n.xterm-screen .xterm-decoration-container .xterm-decoration {\n\tz-index: 6;\n\tposition: absolute;\n}\n\n.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer {\n\tz-index: 7;\n}\n\n.xterm-decoration-overview-ruler {\n    z-index: 8;\n    position: absolute;\n    top: 0;\n    right: 0;\n    pointer-events: none;\n}\n\n.xterm-decoration-top {\n    z-index: 2;\n    position: relative;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@xterm/xterm/css/xterm.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA+BE;;AAEF;;EAEE;;AAEF;IACI,YAAY;IACZ,kBAAkB;IAClB,iBAAiB;IACjB,qBAAqB;IACrB,yBAAyB;AAC7B;;AAEA;;IAEI,aAAa;AACjB;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN;;;MAGE;IACF,UAAU;AACd;;AAEA;IACI,UAAU;IACV,SAAS;IACT,SAAS;IACT,uFAAuF;IACvF,kBAAkB;IAClB,UAAU;IACV,aAAa;IACb,MAAM;IACN,QAAQ;IACR,SAAS;IACT,WAAW;IACX,sFAAsF;IACtF,mBAAmB;IACnB,gBAAgB;IAChB,YAAY;AAChB;;AAEA;IACI,uDAAuD;IACvD,gBAAgB;IAChB,WAAW;IACX,aAAa;IACb,kBAAkB;IAClB,mBAAmB;IACnB,UAAU;AACd;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,gFAAgF;IAChF,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,kBAAkB;IAClB,QAAQ;IACR,OAAO;IACP,MAAM;IACN,SAAS;AACb;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,kBAAkB;IAClB,OAAO;IACP,MAAM;AACV;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,qBAAqB;IACrB,kBAAkB;IAClB,kBAAkB;IAClB,MAAM;IACN,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,oFAAoF;IACpF,eAAe;AACnB;;AAEA;;IAEI,eAAe;AACnB;;AAEA;IACI,0BAA0B;IAC1B,iBAAiB;AACrB;;AAEA;;IAEI,kBAAkB;IAClB,OAAO;IACP,MAAM;IACN,SAAS;IACT,QAAQ;IACR,WAAW;IACX,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,gBAAgB;AAClB;;AAEA;IACI,kBAAkB;IAClB,aAAa;IACb,UAAU;IACV,WAAW;IACX,gBAAgB;AACpB;;AAEA;IACI;8DAC0D;IAC1D,qBAAqB;AACzB;;AAEA,qBAAqB,0BAA0B,EAAE;AACjD,qBAAqB,iCAAiC,EAAE;AACxD,qBAAqB,+BAA+B,EAAE;AACtD,qBAAqB,iCAAiC,EAAE;AACxD,qBAAqB,iCAAiC,EAAE;;AAExD;IACI,yBAAyB;AAC7B;;AAEA,oCAAoC,mCAAmC,EAAE;AACzE,oCAAoC,0CAA0C,EAAE;AAChF,oCAAoC,wCAAwC,EAAE;AAC9E,oCAAoC,0CAA0C,EAAE;AAChF,oCAAoC,0CAA0C,EAAE;;AAEhF;IACI,6BAA6B;AACjC;;AAEA;CACC,UAAU;CACV,kBAAkB;AACnB;;AAEA;CACC,UAAU;AACX;;AAEA;IACI,UAAU;IACV,kBAAkB;IAClB,MAAM;IACN,QAAQ;IACR,oBAAoB;AACxB;;AAEA;IACI,UAAU;IACV,kBAAkB;AACtB\",\"sourcesContent\":[\"/**\\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\\n * https://github.com/chjj/term.js\\n * @license MIT\\n *\\n * Permission is hereby granted, free of charge, to any person obtaining a copy\\n * of this software and associated documentation files (the \\\"Software\\\"), to deal\\n * in the Software without restriction, including without limitation the rights\\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\n * copies of the Software, and to permit persons to whom the Software is\\n * furnished to do so, subject to the following conditions:\\n *\\n * The above copyright notice and this permission notice shall be included in\\n * all copies or substantial portions of the Software.\\n *\\n * THE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\\n * THE SOFTWARE.\\n *\\n * Originally forked from (with the author's permission):\\n *   Fabrice Bellard's javascript vt100 for jslinux:\\n *   http://bellard.org/jslinux/\\n *   Copyright (c) 2011 Fabrice Bellard\\n *   The original design remains. The terminal itself\\n *   has been extended to include xterm CSI codes, among\\n *   other features.\\n */\\n\\n/**\\n *  Default styles for xterm.js\\n */\\n\\n.xterm {\\n    cursor: text;\\n    position: relative;\\n    user-select: none;\\n    -ms-user-select: none;\\n    -webkit-user-select: none;\\n}\\n\\n.xterm.focus,\\n.xterm:focus {\\n    outline: none;\\n}\\n\\n.xterm .xterm-helpers {\\n    position: absolute;\\n    top: 0;\\n    /**\\n     * The z-index of the helpers must be higher than the canvases in order for\\n     * IMEs to appear on top.\\n     */\\n    z-index: 5;\\n}\\n\\n.xterm .xterm-helper-textarea {\\n    padding: 0;\\n    border: 0;\\n    margin: 0;\\n    /* Move textarea out of the screen to the far left, so that the cursor is not visible */\\n    position: absolute;\\n    opacity: 0;\\n    left: -9999em;\\n    top: 0;\\n    width: 0;\\n    height: 0;\\n    z-index: -5;\\n    /** Prevent wrapping so the IME appears against the textarea at the correct position */\\n    white-space: nowrap;\\n    overflow: hidden;\\n    resize: none;\\n}\\n\\n.xterm .composition-view {\\n    /* TODO: Composition position got messed up somewhere */\\n    background: #000;\\n    color: #FFF;\\n    display: none;\\n    position: absolute;\\n    white-space: nowrap;\\n    z-index: 1;\\n}\\n\\n.xterm .composition-view.active {\\n    display: block;\\n}\\n\\n.xterm .xterm-viewport {\\n    /* On OS X this is required in order for the scroll bar to appear fully opaque */\\n    background-color: #000;\\n    overflow-y: scroll;\\n    cursor: default;\\n    position: absolute;\\n    right: 0;\\n    left: 0;\\n    top: 0;\\n    bottom: 0;\\n}\\n\\n.xterm .xterm-screen {\\n    position: relative;\\n}\\n\\n.xterm .xterm-screen canvas {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n}\\n\\n.xterm .xterm-scroll-area {\\n    visibility: hidden;\\n}\\n\\n.xterm-char-measure-element {\\n    display: inline-block;\\n    visibility: hidden;\\n    position: absolute;\\n    top: 0;\\n    left: -9999em;\\n    line-height: normal;\\n}\\n\\n.xterm.enable-mouse-events {\\n    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */\\n    cursor: default;\\n}\\n\\n.xterm.xterm-cursor-pointer,\\n.xterm .xterm-cursor-pointer {\\n    cursor: pointer;\\n}\\n\\n.xterm.column-select.focus {\\n    /* Column selection mode */\\n    cursor: crosshair;\\n}\\n\\n.xterm .xterm-accessibility:not(.debug),\\n.xterm .xterm-message {\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    bottom: 0;\\n    right: 0;\\n    z-index: 10;\\n    color: transparent;\\n    pointer-events: none;\\n}\\n\\n.xterm .xterm-accessibility-tree:not(.debug) *::selection {\\n  color: transparent;\\n}\\n\\n.xterm .xterm-accessibility-tree {\\n  user-select: text;\\n  white-space: pre;\\n}\\n\\n.xterm .live-region {\\n    position: absolute;\\n    left: -9999px;\\n    width: 1px;\\n    height: 1px;\\n    overflow: hidden;\\n}\\n\\n.xterm-dim {\\n    /* Dim should not apply to background, so the opacity of the foreground color is applied\\n     * explicitly in the generated class and reset to 1 here */\\n    opacity: 1 !important;\\n}\\n\\n.xterm-underline-1 { text-decoration: underline; }\\n.xterm-underline-2 { text-decoration: double underline; }\\n.xterm-underline-3 { text-decoration: wavy underline; }\\n.xterm-underline-4 { text-decoration: dotted underline; }\\n.xterm-underline-5 { text-decoration: dashed underline; }\\n\\n.xterm-overline {\\n    text-decoration: overline;\\n}\\n\\n.xterm-overline.xterm-underline-1 { text-decoration: overline underline; }\\n.xterm-overline.xterm-underline-2 { text-decoration: overline double underline; }\\n.xterm-overline.xterm-underline-3 { text-decoration: overline wavy underline; }\\n.xterm-overline.xterm-underline-4 { text-decoration: overline dotted underline; }\\n.xterm-overline.xterm-underline-5 { text-decoration: overline dashed underline; }\\n\\n.xterm-strikethrough {\\n    text-decoration: line-through;\\n}\\n\\n.xterm-screen .xterm-decoration-container .xterm-decoration {\\n\\tz-index: 6;\\n\\tposition: absolute;\\n}\\n\\n.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer {\\n\\tz-index: 7;\\n}\\n\\n.xterm-decoration-overview-ruler {\\n    z-index: 8;\\n    position: absolute;\\n    top: 0;\\n    right: 0;\\n    pointer-events: none;\\n}\\n\\n.xterm-decoration-top {\\n    z-index: 2;\\n    position: relative;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vY3NzL3h0ZXJtLmNzcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ21HO0FBQ2pCO0FBQ2xGLDhCQUE4QixzRUFBMkIsQ0FBQywrRUFBcUM7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUI7QUFDckIscUJBQXFCO0FBQ3JCLHFCQUFxQjtBQUNyQixxQkFBcUI7QUFDckIscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7O0FBRUEsb0NBQW9DO0FBQ3BDLG9DQUFvQztBQUNwQyxvQ0FBb0M7QUFDcEMsb0NBQW9DO0FBQ3BDLG9DQUFvQzs7QUFFcEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sd0lBQXdJLE9BQU8sTUFBTSxNQUFNLEtBQUssVUFBVSxZQUFZLGFBQWEsYUFBYSxhQUFhLE9BQU8sTUFBTSxVQUFVLE9BQU8sS0FBSyxZQUFZLFdBQVcsT0FBTyxLQUFLLFVBQVUsTUFBTSxLQUFLLFVBQVUsVUFBVSxVQUFVLFlBQVksYUFBYSxXQUFXLFVBQVUsVUFBVSxVQUFVLFVBQVUsVUFBVSxZQUFZLGFBQWEsYUFBYSxXQUFXLE9BQU8sS0FBSyxZQUFZLGFBQWEsV0FBVyxVQUFVLFlBQVksYUFBYSxXQUFXLE1BQU0sS0FBSyxVQUFVLE9BQU8sS0FBSyxZQUFZLGFBQWEsYUFBYSxXQUFXLFlBQVksV0FBVyxVQUFVLFVBQVUsVUFBVSxNQUFNLEtBQUssWUFBWSxPQUFPLEtBQUssWUFBWSxXQUFXLFVBQVUsTUFBTSxLQUFLLFlBQVksT0FBTyxLQUFLLFlBQVksYUFBYSxhQUFhLFdBQVcsVUFBVSxZQUFZLE9BQU8sS0FBSyxZQUFZLFdBQVcsT0FBTyxNQUFNLFVBQVUsT0FBTyxLQUFLLFlBQVksYUFBYSxPQUFPLE1BQU0sWUFBWSxXQUFXLFVBQVUsVUFBVSxVQUFVLFVBQVUsWUFBWSxhQUFhLE9BQU8sS0FBSyxZQUFZLE9BQU8sS0FBSyxZQUFZLGFBQWEsT0FBTyxLQUFLLFlBQVksV0FBVyxVQUFVLFVBQVUsWUFBWSxPQUFPLEtBQUssS0FBSyxPQUFPLGFBQWEsT0FBTyx3QkFBd0IseUJBQXlCLHlCQUF5Qix5QkFBeUIsMEJBQTBCLE1BQU0sWUFBWSxPQUFPLHdCQUF3Qix5QkFBeUIseUJBQXlCLHlCQUF5QiwwQkFBMEIsTUFBTSxZQUFZLE9BQU8sS0FBSyxVQUFVLFlBQVksT0FBTyxLQUFLLFVBQVUsTUFBTSxLQUFLLFVBQVUsWUFBWSxXQUFXLFVBQVUsWUFBWSxPQUFPLEtBQUssVUFBVSxZQUFZLGlxREFBaXFELG1CQUFtQix5QkFBeUIsd0JBQXdCLDRCQUE0QixnQ0FBZ0MsR0FBRyxpQ0FBaUMsb0JBQW9CLEdBQUcsMkJBQTJCLHlCQUF5QixhQUFhLG1KQUFtSixHQUFHLG1DQUFtQyxpQkFBaUIsZ0JBQWdCLGdCQUFnQix1SEFBdUgsaUJBQWlCLG9CQUFvQixhQUFhLGVBQWUsZ0JBQWdCLGtCQUFrQix1SEFBdUgsdUJBQXVCLG1CQUFtQixHQUFHLDhCQUE4QixxRkFBcUYsa0JBQWtCLG9CQUFvQix5QkFBeUIsMEJBQTBCLGlCQUFpQixHQUFHLHFDQUFxQyxxQkFBcUIsR0FBRyw0QkFBNEIsb0hBQW9ILHlCQUF5QixzQkFBc0IseUJBQXlCLGVBQWUsY0FBYyxhQUFhLGdCQUFnQixHQUFHLDBCQUEwQix5QkFBeUIsR0FBRyxpQ0FBaUMseUJBQXlCLGNBQWMsYUFBYSxHQUFHLCtCQUErQix5QkFBeUIsR0FBRyxpQ0FBaUMsNEJBQTRCLHlCQUF5Qix5QkFBeUIsYUFBYSxvQkFBb0IsMEJBQTBCLEdBQUcsZ0NBQWdDLGlIQUFpSCxHQUFHLGdFQUFnRSxzQkFBc0IsR0FBRyxnQ0FBZ0MseURBQXlELEdBQUcscUVBQXFFLHlCQUF5QixjQUFjLGFBQWEsZ0JBQWdCLGVBQWUsa0JBQWtCLHlCQUF5QiwyQkFBMkIsR0FBRywrREFBK0QsdUJBQXVCLEdBQUcsc0NBQXNDLHNCQUFzQixxQkFBcUIsR0FBRyx5QkFBeUIseUJBQXlCLG9CQUFvQixpQkFBaUIsa0JBQWtCLHVCQUF1QixHQUFHLGdCQUFnQiwyTEFBMkwsR0FBRyx5QkFBeUIsNkJBQTZCLHVCQUF1QixvQ0FBb0MsdUJBQXVCLGtDQUFrQyx1QkFBdUIsb0NBQW9DLHVCQUF1QixvQ0FBb0MscUJBQXFCLGdDQUFnQyxHQUFHLHdDQUF3QyxzQ0FBc0Msc0NBQXNDLDZDQUE2QyxzQ0FBc0MsMkNBQTJDLHNDQUFzQyw2Q0FBNkMsc0NBQXNDLDZDQUE2QywwQkFBMEIsb0NBQW9DLEdBQUcsaUVBQWlFLGVBQWUsdUJBQXVCLEdBQUcsNEZBQTRGLGVBQWUsR0FBRyxzQ0FBc0MsaUJBQWlCLHlCQUF5QixhQUFhLGVBQWUsMkJBQTJCLEdBQUcsMkJBQTJCLGlCQUFpQix5QkFBeUIsR0FBRyxxQkFBcUI7QUFDNzJPO0FBQ0EsaUVBQWUsdUJBQXVCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9jc3MveHRlcm0uY3NzPzQzMzQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGpqL3Rlcm0uanNcbiAqIEBsaWNlbnNlIE1JVFxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gKiBUSEUgU09GVFdBUkUuXG4gKlxuICogT3JpZ2luYWxseSBmb3JrZWQgZnJvbSAod2l0aCB0aGUgYXV0aG9yJ3MgcGVybWlzc2lvbik6XG4gKiAgIEZhYnJpY2UgQmVsbGFyZCdzIGphdmFzY3JpcHQgdnQxMDAgZm9yIGpzbGludXg6XG4gKiAgIGh0dHA6Ly9iZWxsYXJkLm9yZy9qc2xpbnV4L1xuICogICBDb3B5cmlnaHQgKGMpIDIwMTEgRmFicmljZSBCZWxsYXJkXG4gKiAgIFRoZSBvcmlnaW5hbCBkZXNpZ24gcmVtYWlucy4gVGhlIHRlcm1pbmFsIGl0c2VsZlxuICogICBoYXMgYmVlbiBleHRlbmRlZCB0byBpbmNsdWRlIHh0ZXJtIENTSSBjb2RlcywgYW1vbmdcbiAqICAgb3RoZXIgZmVhdHVyZXMuXG4gKi9cblxuLyoqXG4gKiAgRGVmYXVsdCBzdHlsZXMgZm9yIHh0ZXJtLmpzXG4gKi9cblxuLnh0ZXJtIHtcbiAgICBjdXJzb3I6IHRleHQ7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xufVxuXG4ueHRlcm0uZm9jdXMsXG4ueHRlcm06Zm9jdXMge1xuICAgIG91dGxpbmU6IG5vbmU7XG59XG5cbi54dGVybSAueHRlcm0taGVscGVycyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICAvKipcbiAgICAgKiBUaGUgei1pbmRleCBvZiB0aGUgaGVscGVycyBtdXN0IGJlIGhpZ2hlciB0aGFuIHRoZSBjYW52YXNlcyBpbiBvcmRlciBmb3JcbiAgICAgKiBJTUVzIHRvIGFwcGVhciBvbiB0b3AuXG4gICAgICovXG4gICAgei1pbmRleDogNTtcbn1cblxuLnh0ZXJtIC54dGVybS1oZWxwZXItdGV4dGFyZWEge1xuICAgIHBhZGRpbmc6IDA7XG4gICAgYm9yZGVyOiAwO1xuICAgIG1hcmdpbjogMDtcbiAgICAvKiBNb3ZlIHRleHRhcmVhIG91dCBvZiB0aGUgc2NyZWVuIHRvIHRoZSBmYXIgbGVmdCwgc28gdGhhdCB0aGUgY3Vyc29yIGlzIG5vdCB2aXNpYmxlICovXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIG9wYWNpdHk6IDA7XG4gICAgbGVmdDogLTk5OTllbTtcbiAgICB0b3A6IDA7XG4gICAgd2lkdGg6IDA7XG4gICAgaGVpZ2h0OiAwO1xuICAgIHotaW5kZXg6IC01O1xuICAgIC8qKiBQcmV2ZW50IHdyYXBwaW5nIHNvIHRoZSBJTUUgYXBwZWFycyBhZ2FpbnN0IHRoZSB0ZXh0YXJlYSBhdCB0aGUgY29ycmVjdCBwb3NpdGlvbiAqL1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICByZXNpemU6IG5vbmU7XG59XG5cbi54dGVybSAuY29tcG9zaXRpb24tdmlldyB7XG4gICAgLyogVE9ETzogQ29tcG9zaXRpb24gcG9zaXRpb24gZ290IG1lc3NlZCB1cCBzb21ld2hlcmUgKi9cbiAgICBiYWNrZ3JvdW5kOiAjMDAwO1xuICAgIGNvbG9yOiAjRkZGO1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgei1pbmRleDogMTtcbn1cblxuLnh0ZXJtIC5jb21wb3NpdGlvbi12aWV3LmFjdGl2ZSB7XG4gICAgZGlzcGxheTogYmxvY2s7XG59XG5cbi54dGVybSAueHRlcm0tdmlld3BvcnQge1xuICAgIC8qIE9uIE9TIFggdGhpcyBpcyByZXF1aXJlZCBpbiBvcmRlciBmb3IgdGhlIHNjcm9sbCBiYXIgdG8gYXBwZWFyIGZ1bGx5IG9wYXF1ZSAqL1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG4gICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xuICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDA7XG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xufVxuXG4ueHRlcm0gLnh0ZXJtLXNjcmVlbiB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4ueHRlcm0gLnh0ZXJtLXNjcmVlbiBjYW52YXMge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiAwO1xuICAgIHRvcDogMDtcbn1cblxuLnh0ZXJtIC54dGVybS1zY3JvbGwtYXJlYSB7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xufVxuXG4ueHRlcm0tY2hhci1tZWFzdXJlLWVsZW1lbnQge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogMDtcbiAgICBsZWZ0OiAtOTk5OWVtO1xuICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG59XG5cbi54dGVybS5lbmFibGUtbW91c2UtZXZlbnRzIHtcbiAgICAvKiBXaGVuIG1vdXNlIGV2ZW50cyBhcmUgZW5hYmxlZCAoZWcuIHRtdXgpLCByZXZlcnQgdG8gdGhlIHN0YW5kYXJkIHBvaW50ZXIgY3Vyc29yICovXG4gICAgY3Vyc29yOiBkZWZhdWx0O1xufVxuXG4ueHRlcm0ueHRlcm0tY3Vyc29yLXBvaW50ZXIsXG4ueHRlcm0gLnh0ZXJtLWN1cnNvci1wb2ludGVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi54dGVybS5jb2x1bW4tc2VsZWN0LmZvY3VzIHtcbiAgICAvKiBDb2x1bW4gc2VsZWN0aW9uIG1vZGUgKi9cbiAgICBjdXJzb3I6IGNyb3NzaGFpcjtcbn1cblxuLnh0ZXJtIC54dGVybS1hY2Nlc3NpYmlsaXR5Om5vdCguZGVidWcpLFxuLnh0ZXJtIC54dGVybS1tZXNzYWdlIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogMDtcbiAgICB0b3A6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIHJpZ2h0OiAwO1xuICAgIHotaW5kZXg6IDEwO1xuICAgIGNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLnh0ZXJtIC54dGVybS1hY2Nlc3NpYmlsaXR5LXRyZWU6bm90KC5kZWJ1ZykgKjo6c2VsZWN0aW9uIHtcbiAgY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG4ueHRlcm0gLnh0ZXJtLWFjY2Vzc2liaWxpdHktdHJlZSB7XG4gIHVzZXItc2VsZWN0OiB0ZXh0O1xuICB3aGl0ZS1zcGFjZTogcHJlO1xufVxuXG4ueHRlcm0gLmxpdmUtcmVnaW9uIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgbGVmdDogLTk5OTlweDtcbiAgICB3aWR0aDogMXB4O1xuICAgIGhlaWdodDogMXB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi54dGVybS1kaW0ge1xuICAgIC8qIERpbSBzaG91bGQgbm90IGFwcGx5IHRvIGJhY2tncm91bmQsIHNvIHRoZSBvcGFjaXR5IG9mIHRoZSBmb3JlZ3JvdW5kIGNvbG9yIGlzIGFwcGxpZWRcbiAgICAgKiBleHBsaWNpdGx5IGluIHRoZSBnZW5lcmF0ZWQgY2xhc3MgYW5kIHJlc2V0IHRvIDEgaGVyZSAqL1xuICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDtcbn1cblxuLnh0ZXJtLXVuZGVybGluZS0xIHsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IH1cbi54dGVybS11bmRlcmxpbmUtMiB7IHRleHQtZGVjb3JhdGlvbjogZG91YmxlIHVuZGVybGluZTsgfVxuLnh0ZXJtLXVuZGVybGluZS0zIHsgdGV4dC1kZWNvcmF0aW9uOiB3YXZ5IHVuZGVybGluZTsgfVxuLnh0ZXJtLXVuZGVybGluZS00IHsgdGV4dC1kZWNvcmF0aW9uOiBkb3R0ZWQgdW5kZXJsaW5lOyB9XG4ueHRlcm0tdW5kZXJsaW5lLTUgeyB0ZXh0LWRlY29yYXRpb246IGRhc2hlZCB1bmRlcmxpbmU7IH1cblxuLnh0ZXJtLW92ZXJsaW5lIHtcbiAgICB0ZXh0LWRlY29yYXRpb246IG92ZXJsaW5lO1xufVxuXG4ueHRlcm0tb3ZlcmxpbmUueHRlcm0tdW5kZXJsaW5lLTEgeyB0ZXh0LWRlY29yYXRpb246IG92ZXJsaW5lIHVuZGVybGluZTsgfVxuLnh0ZXJtLW92ZXJsaW5lLnh0ZXJtLXVuZGVybGluZS0yIHsgdGV4dC1kZWNvcmF0aW9uOiBvdmVybGluZSBkb3VibGUgdW5kZXJsaW5lOyB9XG4ueHRlcm0tb3ZlcmxpbmUueHRlcm0tdW5kZXJsaW5lLTMgeyB0ZXh0LWRlY29yYXRpb246IG92ZXJsaW5lIHdhdnkgdW5kZXJsaW5lOyB9XG4ueHRlcm0tb3ZlcmxpbmUueHRlcm0tdW5kZXJsaW5lLTQgeyB0ZXh0LWRlY29yYXRpb246IG92ZXJsaW5lIGRvdHRlZCB1bmRlcmxpbmU7IH1cbi54dGVybS1vdmVybGluZS54dGVybS11bmRlcmxpbmUtNSB7IHRleHQtZGVjb3JhdGlvbjogb3ZlcmxpbmUgZGFzaGVkIHVuZGVybGluZTsgfVxuXG4ueHRlcm0tc3RyaWtldGhyb3VnaCB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG59XG5cbi54dGVybS1zY3JlZW4gLnh0ZXJtLWRlY29yYXRpb24tY29udGFpbmVyIC54dGVybS1kZWNvcmF0aW9uIHtcblx0ei1pbmRleDogNjtcblx0cG9zaXRpb246IGFic29sdXRlO1xufVxuXG4ueHRlcm0tc2NyZWVuIC54dGVybS1kZWNvcmF0aW9uLWNvbnRhaW5lciAueHRlcm0tZGVjb3JhdGlvbi54dGVybS1kZWNvcmF0aW9uLXRvcC1sYXllciB7XG5cdHotaW5kZXg6IDc7XG59XG5cbi54dGVybS1kZWNvcmF0aW9uLW92ZXJ2aWV3LXJ1bGVyIHtcbiAgICB6LWluZGV4OiA4O1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi54dGVybS1kZWNvcmF0aW9uLXRvcCB7XG4gICAgei1pbmRleDogMjtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vY3NzL3h0ZXJtLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQStCRTs7QUFFRjs7RUFFRTs7QUFFRjtJQUNJLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIsaUJBQWlCO0lBQ2pCLHFCQUFxQjtJQUNyQix5QkFBeUI7QUFDN0I7O0FBRUE7O0lBRUksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixNQUFNO0lBQ047OztNQUdFO0lBQ0YsVUFBVTtBQUNkOztBQUVBO0lBQ0ksVUFBVTtJQUNWLFNBQVM7SUFDVCxTQUFTO0lBQ1QsdUZBQXVGO0lBQ3ZGLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsYUFBYTtJQUNiLE1BQU07SUFDTixRQUFRO0lBQ1IsU0FBUztJQUNULFdBQVc7SUFDWCxzRkFBc0Y7SUFDdEYsbUJBQW1CO0lBQ25CLGdCQUFnQjtJQUNoQixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksdURBQXVEO0lBQ3ZELGdCQUFnQjtJQUNoQixXQUFXO0lBQ1gsYUFBYTtJQUNiLGtCQUFrQjtJQUNsQixtQkFBbUI7SUFDbkIsVUFBVTtBQUNkOztBQUVBO0lBQ0ksY0FBYztBQUNsQjs7QUFFQTtJQUNJLGdGQUFnRjtJQUNoRixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLGVBQWU7SUFDZixrQkFBa0I7SUFDbEIsUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sU0FBUztBQUNiOztBQUVBO0lBQ0ksa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLE9BQU87SUFDUCxNQUFNO0FBQ1Y7O0FBRUE7SUFDSSxrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxxQkFBcUI7SUFDckIsa0JBQWtCO0lBQ2xCLGtCQUFrQjtJQUNsQixNQUFNO0lBQ04sYUFBYTtJQUNiLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLG9GQUFvRjtJQUNwRixlQUFlO0FBQ25COztBQUVBOztJQUVJLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSwwQkFBMEI7SUFDMUIsaUJBQWlCO0FBQ3JCOztBQUVBOztJQUVJLGtCQUFrQjtJQUNsQixPQUFPO0lBQ1AsTUFBTTtJQUNOLFNBQVM7SUFDVCxRQUFRO0lBQ1IsV0FBVztJQUNYLGtCQUFrQjtJQUNsQixvQkFBb0I7QUFDeEI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsZ0JBQWdCO0FBQ2xCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYixVQUFVO0lBQ1YsV0FBVztJQUNYLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJOzhEQUMwRDtJQUMxRCxxQkFBcUI7QUFDekI7O0FBRUEscUJBQXFCLDBCQUEwQixFQUFFO0FBQ2pELHFCQUFxQixpQ0FBaUMsRUFBRTtBQUN4RCxxQkFBcUIsK0JBQStCLEVBQUU7QUFDdEQscUJBQXFCLGlDQUFpQyxFQUFFO0FBQ3hELHFCQUFxQixpQ0FBaUMsRUFBRTs7QUFFeEQ7SUFDSSx5QkFBeUI7QUFDN0I7O0FBRUEsb0NBQW9DLG1DQUFtQyxFQUFFO0FBQ3pFLG9DQUFvQywwQ0FBMEMsRUFBRTtBQUNoRixvQ0FBb0Msd0NBQXdDLEVBQUU7QUFDOUUsb0NBQW9DLDBDQUEwQyxFQUFFO0FBQ2hGLG9DQUFvQywwQ0FBMEMsRUFBRTs7QUFFaEY7SUFDSSw2QkFBNkI7QUFDakM7O0FBRUE7Q0FDQyxVQUFVO0NBQ1Ysa0JBQWtCO0FBQ25COztBQUVBO0NBQ0MsVUFBVTtBQUNYOztBQUVBO0lBQ0ksVUFBVTtJQUNWLGtCQUFrQjtJQUNsQixNQUFNO0lBQ04sUUFBUTtJQUNSLG9CQUFvQjtBQUN4Qjs7QUFFQTtJQUNJLFVBQVU7SUFDVixrQkFBa0I7QUFDdEJcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLyoqXFxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxcbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcXG4gKiBodHRwczovL2dpdGh1Yi5jb20vY2hqai90ZXJtLmpzXFxuICogQGxpY2Vuc2UgTUlUXFxuICpcXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XFxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXFxcIlNvZnR3YXJlXFxcIiksIHRvIGRlYWxcXG4gKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXFxuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xcbiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XFxuICpcXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxcbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxcbiAqXFxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFxcXCJBUyBJU1xcXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcXG4gKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXFxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcXG4gKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXFxuICogVEhFIFNPRlRXQVJFLlxcbiAqXFxuICogT3JpZ2luYWxseSBmb3JrZWQgZnJvbSAod2l0aCB0aGUgYXV0aG9yJ3MgcGVybWlzc2lvbik6XFxuICogICBGYWJyaWNlIEJlbGxhcmQncyBqYXZhc2NyaXB0IHZ0MTAwIGZvciBqc2xpbnV4OlxcbiAqICAgaHR0cDovL2JlbGxhcmQub3JnL2pzbGludXgvXFxuICogICBDb3B5cmlnaHQgKGMpIDIwMTEgRmFicmljZSBCZWxsYXJkXFxuICogICBUaGUgb3JpZ2luYWwgZGVzaWduIHJlbWFpbnMuIFRoZSB0ZXJtaW5hbCBpdHNlbGZcXG4gKiAgIGhhcyBiZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgeHRlcm0gQ1NJIGNvZGVzLCBhbW9uZ1xcbiAqICAgb3RoZXIgZmVhdHVyZXMuXFxuICovXFxuXFxuLyoqXFxuICogIERlZmF1bHQgc3R5bGVzIGZvciB4dGVybS5qc1xcbiAqL1xcblxcbi54dGVybSB7XFxuICAgIGN1cnNvcjogdGV4dDtcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcXG4gICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcbn1cXG5cXG4ueHRlcm0uZm9jdXMsXFxuLnh0ZXJtOmZvY3VzIHtcXG4gICAgb3V0bGluZTogbm9uZTtcXG59XFxuXFxuLnh0ZXJtIC54dGVybS1oZWxwZXJzIHtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICB0b3A6IDA7XFxuICAgIC8qKlxcbiAgICAgKiBUaGUgei1pbmRleCBvZiB0aGUgaGVscGVycyBtdXN0IGJlIGhpZ2hlciB0aGFuIHRoZSBjYW52YXNlcyBpbiBvcmRlciBmb3JcXG4gICAgICogSU1FcyB0byBhcHBlYXIgb24gdG9wLlxcbiAgICAgKi9cXG4gICAgei1pbmRleDogNTtcXG59XFxuXFxuLnh0ZXJtIC54dGVybS1oZWxwZXItdGV4dGFyZWEge1xcbiAgICBwYWRkaW5nOiAwO1xcbiAgICBib3JkZXI6IDA7XFxuICAgIG1hcmdpbjogMDtcXG4gICAgLyogTW92ZSB0ZXh0YXJlYSBvdXQgb2YgdGhlIHNjcmVlbiB0byB0aGUgZmFyIGxlZnQsIHNvIHRoYXQgdGhlIGN1cnNvciBpcyBub3QgdmlzaWJsZSAqL1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIG9wYWNpdHk6IDA7XFxuICAgIGxlZnQ6IC05OTk5ZW07XFxuICAgIHRvcDogMDtcXG4gICAgd2lkdGg6IDA7XFxuICAgIGhlaWdodDogMDtcXG4gICAgei1pbmRleDogLTU7XFxuICAgIC8qKiBQcmV2ZW50IHdyYXBwaW5nIHNvIHRoZSBJTUUgYXBwZWFycyBhZ2FpbnN0IHRoZSB0ZXh0YXJlYSBhdCB0aGUgY29ycmVjdCBwb3NpdGlvbiAqL1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgICByZXNpemU6IG5vbmU7XFxufVxcblxcbi54dGVybSAuY29tcG9zaXRpb24tdmlldyB7XFxuICAgIC8qIFRPRE86IENvbXBvc2l0aW9uIHBvc2l0aW9uIGdvdCBtZXNzZWQgdXAgc29tZXdoZXJlICovXFxuICAgIGJhY2tncm91bmQ6ICMwMDA7XFxuICAgIGNvbG9yOiAjRkZGO1xcbiAgICBkaXNwbGF5OiBub25lO1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICAgIHotaW5kZXg6IDE7XFxufVxcblxcbi54dGVybSAuY29tcG9zaXRpb24tdmlldy5hY3RpdmUge1xcbiAgICBkaXNwbGF5OiBibG9jaztcXG59XFxuXFxuLnh0ZXJtIC54dGVybS12aWV3cG9ydCB7XFxuICAgIC8qIE9uIE9TIFggdGhpcyBpcyByZXF1aXJlZCBpbiBvcmRlciBmb3IgdGhlIHNjcm9sbCBiYXIgdG8gYXBwZWFyIGZ1bGx5IG9wYXF1ZSAqL1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwO1xcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XFxuICAgIGN1cnNvcjogZGVmYXVsdDtcXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgICByaWdodDogMDtcXG4gICAgbGVmdDogMDtcXG4gICAgdG9wOiAwO1xcbiAgICBib3R0b206IDA7XFxufVxcblxcbi54dGVybSAueHRlcm0tc2NyZWVuIHtcXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG4ueHRlcm0gLnh0ZXJtLXNjcmVlbiBjYW52YXMge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGxlZnQ6IDA7XFxuICAgIHRvcDogMDtcXG59XFxuXFxuLnh0ZXJtIC54dGVybS1zY3JvbGwtYXJlYSB7XFxuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcXG59XFxuXFxuLnh0ZXJtLWNoYXItbWVhc3VyZS1lbGVtZW50IHtcXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgdG9wOiAwO1xcbiAgICBsZWZ0OiAtOTk5OWVtO1xcbiAgICBsaW5lLWhlaWdodDogbm9ybWFsO1xcbn1cXG5cXG4ueHRlcm0uZW5hYmxlLW1vdXNlLWV2ZW50cyB7XFxuICAgIC8qIFdoZW4gbW91c2UgZXZlbnRzIGFyZSBlbmFibGVkIChlZy4gdG11eCksIHJldmVydCB0byB0aGUgc3RhbmRhcmQgcG9pbnRlciBjdXJzb3IgKi9cXG4gICAgY3Vyc29yOiBkZWZhdWx0O1xcbn1cXG5cXG4ueHRlcm0ueHRlcm0tY3Vyc29yLXBvaW50ZXIsXFxuLnh0ZXJtIC54dGVybS1jdXJzb3ItcG9pbnRlciB7XFxuICAgIGN1cnNvcjogcG9pbnRlcjtcXG59XFxuXFxuLnh0ZXJtLmNvbHVtbi1zZWxlY3QuZm9jdXMge1xcbiAgICAvKiBDb2x1bW4gc2VsZWN0aW9uIG1vZGUgKi9cXG4gICAgY3Vyc29yOiBjcm9zc2hhaXI7XFxufVxcblxcbi54dGVybSAueHRlcm0tYWNjZXNzaWJpbGl0eTpub3QoLmRlYnVnKSxcXG4ueHRlcm0gLnh0ZXJtLW1lc3NhZ2Uge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGxlZnQ6IDA7XFxuICAgIHRvcDogMDtcXG4gICAgYm90dG9tOiAwO1xcbiAgICByaWdodDogMDtcXG4gICAgei1pbmRleDogMTA7XFxuICAgIGNvbG9yOiB0cmFuc3BhcmVudDtcXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcblxcbi54dGVybSAueHRlcm0tYWNjZXNzaWJpbGl0eS10cmVlOm5vdCguZGVidWcpICo6OnNlbGVjdGlvbiB7XFxuICBjb2xvcjogdHJhbnNwYXJlbnQ7XFxufVxcblxcbi54dGVybSAueHRlcm0tYWNjZXNzaWJpbGl0eS10cmVlIHtcXG4gIHVzZXItc2VsZWN0OiB0ZXh0O1xcbiAgd2hpdGUtc3BhY2U6IHByZTtcXG59XFxuXFxuLnh0ZXJtIC5saXZlLXJlZ2lvbiB7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgbGVmdDogLTk5OTlweDtcXG4gICAgd2lkdGg6IDFweDtcXG4gICAgaGVpZ2h0OiAxcHg7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxufVxcblxcbi54dGVybS1kaW0ge1xcbiAgICAvKiBEaW0gc2hvdWxkIG5vdCBhcHBseSB0byBiYWNrZ3JvdW5kLCBzbyB0aGUgb3BhY2l0eSBvZiB0aGUgZm9yZWdyb3VuZCBjb2xvciBpcyBhcHBsaWVkXFxuICAgICAqIGV4cGxpY2l0bHkgaW4gdGhlIGdlbmVyYXRlZCBjbGFzcyBhbmQgcmVzZXQgdG8gMSBoZXJlICovXFxuICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDtcXG59XFxuXFxuLnh0ZXJtLXVuZGVybGluZS0xIHsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IH1cXG4ueHRlcm0tdW5kZXJsaW5lLTIgeyB0ZXh0LWRlY29yYXRpb246IGRvdWJsZSB1bmRlcmxpbmU7IH1cXG4ueHRlcm0tdW5kZXJsaW5lLTMgeyB0ZXh0LWRlY29yYXRpb246IHdhdnkgdW5kZXJsaW5lOyB9XFxuLnh0ZXJtLXVuZGVybGluZS00IHsgdGV4dC1kZWNvcmF0aW9uOiBkb3R0ZWQgdW5kZXJsaW5lOyB9XFxuLnh0ZXJtLXVuZGVybGluZS01IHsgdGV4dC1kZWNvcmF0aW9uOiBkYXNoZWQgdW5kZXJsaW5lOyB9XFxuXFxuLnh0ZXJtLW92ZXJsaW5lIHtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBvdmVybGluZTtcXG59XFxuXFxuLnh0ZXJtLW92ZXJsaW5lLnh0ZXJtLXVuZGVybGluZS0xIHsgdGV4dC1kZWNvcmF0aW9uOiBvdmVybGluZSB1bmRlcmxpbmU7IH1cXG4ueHRlcm0tb3ZlcmxpbmUueHRlcm0tdW5kZXJsaW5lLTIgeyB0ZXh0LWRlY29yYXRpb246IG92ZXJsaW5lIGRvdWJsZSB1bmRlcmxpbmU7IH1cXG4ueHRlcm0tb3ZlcmxpbmUueHRlcm0tdW5kZXJsaW5lLTMgeyB0ZXh0LWRlY29yYXRpb246IG92ZXJsaW5lIHdhdnkgdW5kZXJsaW5lOyB9XFxuLnh0ZXJtLW92ZXJsaW5lLnh0ZXJtLXVuZGVybGluZS00IHsgdGV4dC1kZWNvcmF0aW9uOiBvdmVybGluZSBkb3R0ZWQgdW5kZXJsaW5lOyB9XFxuLnh0ZXJtLW92ZXJsaW5lLnh0ZXJtLXVuZGVybGluZS01IHsgdGV4dC1kZWNvcmF0aW9uOiBvdmVybGluZSBkYXNoZWQgdW5kZXJsaW5lOyB9XFxuXFxuLnh0ZXJtLXN0cmlrZXRocm91Z2gge1xcbiAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcXG59XFxuXFxuLnh0ZXJtLXNjcmVlbiAueHRlcm0tZGVjb3JhdGlvbi1jb250YWluZXIgLnh0ZXJtLWRlY29yYXRpb24ge1xcblxcdHotaW5kZXg6IDY7XFxuXFx0cG9zaXRpb246IGFic29sdXRlO1xcbn1cXG5cXG4ueHRlcm0tc2NyZWVuIC54dGVybS1kZWNvcmF0aW9uLWNvbnRhaW5lciAueHRlcm0tZGVjb3JhdGlvbi54dGVybS1kZWNvcmF0aW9uLXRvcC1sYXllciB7XFxuXFx0ei1pbmRleDogNztcXG59XFxuXFxuLnh0ZXJtLWRlY29yYXRpb24tb3ZlcnZpZXctcnVsZXIge1xcbiAgICB6LWluZGV4OiA4O1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIHRvcDogMDtcXG4gICAgcmlnaHQ6IDA7XFxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG5cXG4ueHRlcm0tZGVjb3JhdGlvbi10b3Age1xcbiAgICB6LWluZGV4OiAyO1xcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/cjs.js!./node_modules/@xterm/xterm/css/xterm.css\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./src/main.css":
/*!************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/main.css ***!
  \************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/sourceMaps.js */ \"./node_modules/css-loader/dist/runtime/sourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.docslabMoreInfo {\n    text-align: right;\n    display: flex;\n    flex-flow: column;\n    justify-content: end;\n    align-items: flex-end;\n}\n\n.docslabPowered {\n    font-size: 10pt;\n    color: #999;\n    display: flex;\n    align-items: end;\n}\n\n.docslab button {\n    height: 2em;\n    flex: 1 1 auto;\n    max-width: 12em;\n}\n\n.docslabPowered a {\n    color: #999;\n    padding-left: 0.3vw;\n}\n\n.docslabRepo {\n    color: #999;\n    font-size: 10pt;\n}\n\n.docslabStatus {\n    padding-left: 0.4vw;\n    flex: 1 1 auto;\n    display: flex;\n    align-items: center;\n    min-width: 5vw;\n}\n\n.docslabEditor {\n    height: 200px;\n}\n\n.docslabPanel {\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: space-between;\n}\n\n.docslab {\n    width: 100%;\n    border: 1px solid #999;\n    border-radius: 3px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/main.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,iBAAiB;IACjB,aAAa;IACb,iBAAiB;IACjB,oBAAoB;IACpB,qBAAqB;AACzB;;AAEA;IACI,eAAe;IACf,WAAW;IACX,aAAa;IACb,gBAAgB;AACpB;;AAEA;IACI,WAAW;IACX,cAAc;IACd,eAAe;AACnB;;AAEA;IACI,WAAW;IACX,mBAAmB;AACvB;;AAEA;IACI,WAAW;IACX,eAAe;AACnB;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,cAAc;AAClB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;AAClC;;AAEA;IACI,WAAW;IACX,sBAAsB;IACtB,kBAAkB;AACtB\",\"sourcesContent\":[\".docslabMoreInfo {\\n    text-align: right;\\n    display: flex;\\n    flex-flow: column;\\n    justify-content: end;\\n    align-items: flex-end;\\n}\\n\\n.docslabPowered {\\n    font-size: 10pt;\\n    color: #999;\\n    display: flex;\\n    align-items: end;\\n}\\n\\n.docslab button {\\n    height: 2em;\\n    flex: 1 1 auto;\\n    max-width: 12em;\\n}\\n\\n.docslabPowered a {\\n    color: #999;\\n    padding-left: 0.3vw;\\n}\\n\\n.docslabRepo {\\n    color: #999;\\n    font-size: 10pt;\\n}\\n\\n.docslabStatus {\\n    padding-left: 0.4vw;\\n    flex: 1 1 auto;\\n    display: flex;\\n    align-items: center;\\n    min-width: 5vw;\\n}\\n\\n.docslabEditor {\\n    height: 200px;\\n}\\n\\n.docslabPanel {\\n    display: flex;\\n    flex-flow: row wrap;\\n    justify-content: space-between;\\n}\\n\\n.docslab {\\n    width: 100%;\\n    border: 1px solid #999;\\n    border-radius: 3px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3NyYy9tYWluLmNzcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQzBHO0FBQ2pCO0FBQ3pGLDhCQUE4QixtRkFBMkIsQ0FBQyw0RkFBcUM7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTywrRUFBK0UsWUFBWSxXQUFXLFlBQVksYUFBYSxhQUFhLE9BQU8sS0FBSyxVQUFVLFVBQVUsVUFBVSxZQUFZLE9BQU8sS0FBSyxVQUFVLFVBQVUsVUFBVSxPQUFPLEtBQUssVUFBVSxZQUFZLE9BQU8sS0FBSyxVQUFVLFVBQVUsT0FBTyxLQUFLLFlBQVksV0FBVyxVQUFVLFlBQVksV0FBVyxPQUFPLEtBQUssVUFBVSxPQUFPLEtBQUssVUFBVSxZQUFZLGFBQWEsT0FBTyxLQUFLLFVBQVUsWUFBWSxhQUFhLDRDQUE0Qyx3QkFBd0Isb0JBQW9CLHdCQUF3QiwyQkFBMkIsNEJBQTRCLEdBQUcscUJBQXFCLHNCQUFzQixrQkFBa0Isb0JBQW9CLHVCQUF1QixHQUFHLHFCQUFxQixrQkFBa0IscUJBQXFCLHNCQUFzQixHQUFHLHVCQUF1QixrQkFBa0IsMEJBQTBCLEdBQUcsa0JBQWtCLGtCQUFrQixzQkFBc0IsR0FBRyxvQkFBb0IsMEJBQTBCLHFCQUFxQixvQkFBb0IsMEJBQTBCLHFCQUFxQixHQUFHLG9CQUFvQixvQkFBb0IsR0FBRyxtQkFBbUIsb0JBQW9CLDBCQUEwQixxQ0FBcUMsR0FBRyxjQUFjLGtCQUFrQiw2QkFBNkIseUJBQXlCLEdBQUcscUJBQXFCO0FBQ3IyQztBQUNBLGlFQUFlLHVCQUF1QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL3NyYy9tYWluLmNzcz8wOTljIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAuZG9jc2xhYk1vcmVJbmZvIHtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgIGp1c3RpZnktY29udGVudDogZW5kO1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbn1cblxuLmRvY3NsYWJQb3dlcmVkIHtcbiAgICBmb250LXNpemU6IDEwcHQ7XG4gICAgY29sb3I6ICM5OTk7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogZW5kO1xufVxuXG4uZG9jc2xhYiBidXR0b24ge1xuICAgIGhlaWdodDogMmVtO1xuICAgIGZsZXg6IDEgMSBhdXRvO1xuICAgIG1heC13aWR0aDogMTJlbTtcbn1cblxuLmRvY3NsYWJQb3dlcmVkIGEge1xuICAgIGNvbG9yOiAjOTk5O1xuICAgIHBhZGRpbmctbGVmdDogMC4zdnc7XG59XG5cbi5kb2NzbGFiUmVwbyB7XG4gICAgY29sb3I6ICM5OTk7XG4gICAgZm9udC1zaXplOiAxMHB0O1xufVxuXG4uZG9jc2xhYlN0YXR1cyB7XG4gICAgcGFkZGluZy1sZWZ0OiAwLjR2dztcbiAgICBmbGV4OiAxIDEgYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgbWluLXdpZHRoOiA1dnc7XG59XG5cbi5kb2NzbGFiRWRpdG9yIHtcbiAgICBoZWlnaHQ6IDIwMHB4O1xufVxuXG4uZG9jc2xhYlBhbmVsIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZmxvdzogcm93IHdyYXA7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4uZG9jc2xhYiB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG59XG5gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9tYWluLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtJQUNJLGlCQUFpQjtJQUNqQixhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLG9CQUFvQjtJQUNwQixxQkFBcUI7QUFDekI7O0FBRUE7SUFDSSxlQUFlO0lBQ2YsV0FBVztJQUNYLGFBQWE7SUFDYixnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxXQUFXO0lBQ1gsY0FBYztJQUNkLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxXQUFXO0lBQ1gsbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksV0FBVztJQUNYLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxtQkFBbUI7SUFDbkIsY0FBYztJQUNkLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsY0FBYztBQUNsQjs7QUFFQTtJQUNJLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLDhCQUE4QjtBQUNsQzs7QUFFQTtJQUNJLFdBQVc7SUFDWCxzQkFBc0I7SUFDdEIsa0JBQWtCO0FBQ3RCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi5kb2NzbGFiTW9yZUluZm8ge1xcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1mbG93OiBjb2x1bW47XFxuICAgIGp1c3RpZnktY29udGVudDogZW5kO1xcbiAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XFxufVxcblxcbi5kb2NzbGFiUG93ZXJlZCB7XFxuICAgIGZvbnQtc2l6ZTogMTBwdDtcXG4gICAgY29sb3I6ICM5OTk7XFxuICAgIGRpc3BsYXk6IGZsZXg7XFxuICAgIGFsaWduLWl0ZW1zOiBlbmQ7XFxufVxcblxcbi5kb2NzbGFiIGJ1dHRvbiB7XFxuICAgIGhlaWdodDogMmVtO1xcbiAgICBmbGV4OiAxIDEgYXV0bztcXG4gICAgbWF4LXdpZHRoOiAxMmVtO1xcbn1cXG5cXG4uZG9jc2xhYlBvd2VyZWQgYSB7XFxuICAgIGNvbG9yOiAjOTk5O1xcbiAgICBwYWRkaW5nLWxlZnQ6IDAuM3Z3O1xcbn1cXG5cXG4uZG9jc2xhYlJlcG8ge1xcbiAgICBjb2xvcjogIzk5OTtcXG4gICAgZm9udC1zaXplOiAxMHB0O1xcbn1cXG5cXG4uZG9jc2xhYlN0YXR1cyB7XFxuICAgIHBhZGRpbmctbGVmdDogMC40dnc7XFxuICAgIGZsZXg6IDEgMSBhdXRvO1xcbiAgICBkaXNwbGF5OiBmbGV4O1xcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgICBtaW4td2lkdGg6IDV2dztcXG59XFxuXFxuLmRvY3NsYWJFZGl0b3Ige1xcbiAgICBoZWlnaHQ6IDIwMHB4O1xcbn1cXG5cXG4uZG9jc2xhYlBhbmVsIHtcXG4gICAgZGlzcGxheTogZmxleDtcXG4gICAgZmxleC1mbG93OiByb3cgd3JhcDtcXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbn1cXG5cXG4uZG9jc2xhYiB7XFxuICAgIHdpZHRoOiAxMDAlO1xcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjOTk5O1xcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/cjs.js!./src/main.css\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0EscUZBQXFGO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpQkFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHFCQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixzRkFBc0YscUJBQXFCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixpREFBaUQscUJBQXFCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixzREFBc0QscUJBQXFCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcz8yNGZiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdO1xuXG4gIC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBcIlwiO1xuICAgICAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBpdGVtWzVdICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9O1xuXG4gIC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIGxpc3QuaSA9IGZ1bmN0aW9uIGkobW9kdWxlcywgbWVkaWEsIGRlZHVwZSwgc3VwcG9ydHMsIGxheWVyKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCB1bmRlZmluZWRdXTtcbiAgICB9XG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGlkID0gdGhpc1trXVswXTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG1vZHVsZXMubGVuZ3RoOyBfaysrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19rXSk7XG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdXBwb3J0cykge1xuICAgICAgICBpZiAoIWl0ZW1bNF0pIHtcbiAgICAgICAgICBpdGVtWzRdID0gXCJcIi5jb25jYXQoc3VwcG9ydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs0XSA9IHN1cHBvcnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gbGlzdDtcbn07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/runtime/api.js\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/sourceMaps.js":
/*!************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/sourceMaps.js ***!
  \************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELGNBQWM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcz9hZjEyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/runtime/sourceMaps.js\n");

/***/ }),

/***/ "./node_modules/pyodide/pyodide.js":
/*!*****************************************!*\
  !*** ./node_modules/pyodide/pyodide.js ***!
  \*****************************************/
/***/ ((module) => {

eval("module.exports = eval(\"\\\"use strict\\\";var loadPyodide=(()=>{var ne=Object.create;var I=Object.defineProperty;var re=Object.getOwnPropertyDescriptor;var ie=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,ae=Object.prototype.hasOwnProperty;var s=(e,t)=>I(e,\\\"name\\\",{value:t,configurable:!0}),p=(e=>typeof require<\\\"u\\\"?require:typeof Proxy<\\\"u\\\"?new Proxy(e,{get:(t,i)=>(typeof require<\\\"u\\\"?require:t)[i]}):e)(function(e){if(typeof require<\\\"u\\\")return require.apply(this,arguments);throw new Error('Dynamic require of \\\"'+e+'\\\" is not supported')});var se=(e,t)=>{for(var i in t)I(e,i,{get:t[i],enumerable:!0})},$=(e,t,i,r)=>{if(t&&typeof t==\\\"object\\\"||typeof t==\\\"function\\\")for(let a of ie(t))!ae.call(e,a)&&a!==i&&I(e,a,{get:()=>t[a],enumerable:!(r=re(t,a))||r.enumerable});return e};var b=(e,t,i)=>(i=e!=null?ne(oe(e)):{},$(t||!e||!e.__esModule?I(i,\\\"default\\\",{value:e,enumerable:!0}):i,e)),ce=e=>$(I({},\\\"__esModule\\\",{value:!0}),e);var Ie={};se(Ie,{loadPyodide:()=>B,version:()=>x});function le(e){return!isNaN(parseFloat(e))&&isFinite(e)}s(le,\\\"_isNumber\\\");function w(e){return e.charAt(0).toUpperCase()+e.substring(1)}s(w,\\\"_capitalize\\\");function L(e){return function(){return this[e]}}s(L,\\\"_getter\\\");var _=[\\\"isConstructor\\\",\\\"isEval\\\",\\\"isNative\\\",\\\"isToplevel\\\"],F=[\\\"columnNumber\\\",\\\"lineNumber\\\"],R=[\\\"fileName\\\",\\\"functionName\\\",\\\"source\\\"],de=[\\\"args\\\"],ue=[\\\"evalOrigin\\\"],k=_.concat(F,R,de,ue);function g(e){if(e)for(var t=0;t<k.length;t++)e[k[t]]!==void 0&&this[\\\"set\\\"+w(k[t])](e[k[t]])}s(g,\\\"StackFrame\\\");g.prototype={getArgs:function(){return this.args},setArgs:function(e){if(Object.prototype.toString.call(e)!==\\\"[object Array]\\\")throw new TypeError(\\\"Args must be an Array\\\");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof g)this.evalOrigin=e;else if(e instanceof Object)this.evalOrigin=new g(e);else throw new TypeError(\\\"Eval Origin must be an Object or StackFrame\\\")},toString:function(){var e=this.getFileName()||\\\"\\\",t=this.getLineNumber()||\\\"\\\",i=this.getColumnNumber()||\\\"\\\",r=this.getFunctionName()||\\\"\\\";return this.getIsEval()?e?\\\"[eval] (\\\"+e+\\\":\\\"+t+\\\":\\\"+i+\\\")\\\":\\\"[eval]:\\\"+t+\\\":\\\"+i:r?r+\\\" (\\\"+e+\\\":\\\"+t+\\\":\\\"+i+\\\")\\\":e+\\\":\\\"+t+\\\":\\\"+i}};g.fromString=s(function(t){var i=t.indexOf(\\\"(\\\"),r=t.lastIndexOf(\\\")\\\"),a=t.substring(0,i),n=t.substring(i+1,r).split(\\\",\\\"),o=t.substring(r+1);if(o.indexOf(\\\"@\\\")===0)var c=/@(.+?)(?::(\\\\d+))?(?::(\\\\d+))?$/.exec(o,\\\"\\\"),l=c[1],d=c[2],u=c[3];return new g({functionName:a,args:n||void 0,fileName:l,lineNumber:d||void 0,columnNumber:u||void 0})},\\\"StackFrame$$fromString\\\");for(h=0;h<_.length;h++)g.prototype[\\\"get\\\"+w(_[h])]=L(_[h]),g.prototype[\\\"set\\\"+w(_[h])]=function(e){return function(t){this[e]=!!t}}(_[h]);var h;for(E=0;E<F.length;E++)g.prototype[\\\"get\\\"+w(F[E])]=L(F[E]),g.prototype[\\\"set\\\"+w(F[E])]=function(e){return function(t){if(!le(t))throw new TypeError(e+\\\" must be a Number\\\");this[e]=Number(t)}}(F[E]);var E;for(S=0;S<R.length;S++)g.prototype[\\\"get\\\"+w(R[S])]=L(R[S]),g.prototype[\\\"set\\\"+w(R[S])]=function(e){return function(t){this[e]=String(t)}}(R[S]);var S,A=g;function fe(){var e=/^\\\\s*at .*(\\\\S+:\\\\d+|\\\\(native\\\\))/m,t=/^(eval@)?(\\\\[native code])?$/;return{parse:s(function(r){if(r.stack&&r.stack.match(e))return this.parseV8OrIE(r);if(r.stack)return this.parseFFOrSafari(r);throw new Error(\\\"Cannot parse given Error object\\\")},\\\"ErrorStackParser$$parse\\\"),extractLocation:s(function(r){if(r.indexOf(\\\":\\\")===-1)return[r];var a=/(.+?)(?::(\\\\d+))?(?::(\\\\d+))?$/,n=a.exec(r.replace(/[()]/g,\\\"\\\"));return[n[1],n[2]||void 0,n[3]||void 0]},\\\"ErrorStackParser$$extractLocation\\\"),parseV8OrIE:s(function(r){var a=r.stack.split(`\\n`).filter(function(n){return!!n.match(e)},this);return a.map(function(n){n.indexOf(\\\"(eval \\\")>-1&&(n=n.replace(/eval code/g,\\\"eval\\\").replace(/(\\\\(eval at [^()]*)|(,.*$)/g,\\\"\\\"));var o=n.replace(/^\\\\s+/,\\\"\\\").replace(/\\\\(eval code/g,\\\"(\\\").replace(/^.*?\\\\s+/,\\\"\\\"),c=o.match(/ (\\\\(.+\\\\)$)/);o=c?o.replace(c[0],\\\"\\\"):o;var l=this.extractLocation(c?c[1]:o),d=c&&o||void 0,u=[\\\"eval\\\",\\\"<anonymous>\\\"].indexOf(l[0])>-1?void 0:l[0];return new A({functionName:d,fileName:u,lineNumber:l[1],columnNumber:l[2],source:n})},this)},\\\"ErrorStackParser$$parseV8OrIE\\\"),parseFFOrSafari:s(function(r){var a=r.stack.split(`\\n`).filter(function(n){return!n.match(t)},this);return a.map(function(n){if(n.indexOf(\\\" > eval\\\")>-1&&(n=n.replace(/ line (\\\\d+)(?: > eval line \\\\d+)* > eval:\\\\d+:\\\\d+/g,\\\":$1\\\")),n.indexOf(\\\"@\\\")===-1&&n.indexOf(\\\":\\\")===-1)return new A({functionName:n});var o=/((.*\\\".+\\\"[^@]*)?[^@]*)(?:@)/,c=n.match(o),l=c&&c[1]?c[1]:void 0,d=this.extractLocation(n.replace(o,\\\"\\\"));return new A({functionName:l,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:n})},this)},\\\"ErrorStackParser$$parseFFOrSafari\\\")}}s(fe,\\\"ErrorStackParser\\\");var me=new fe;var j=me;var y=typeof process==\\\"object\\\"&&typeof process.versions==\\\"object\\\"&&typeof process.versions.node==\\\"string\\\"&&!process.browser,T=y&&typeof module<\\\"u\\\"&&typeof module.exports<\\\"u\\\"&&typeof p<\\\"u\\\"&&typeof __dirname<\\\"u\\\",H=y&&!T,Le=typeof globalThis.Bun<\\\"u\\\",pe=typeof Deno<\\\"u\\\",z=!y&&!pe,V=z&&typeof window==\\\"object\\\"&&typeof document==\\\"object\\\"&&typeof document.createElement==\\\"function\\\"&&\\\"sessionStorage\\\"in window&&typeof importScripts!=\\\"function\\\",q=z&&typeof importScripts==\\\"function\\\"&&typeof self==\\\"object\\\",Te=typeof navigator==\\\"object\\\"&&typeof navigator.userAgent==\\\"string\\\"&&navigator.userAgent.indexOf(\\\"Chrome\\\")==-1&&navigator.userAgent.indexOf(\\\"Safari\\\")>-1;var K,U,Y,J,M;async function C(){if(!y||(K=(await import(/* webpackIgnore */\\\"node:url\\\")).default,J=await import(/* webpackIgnore */\\\"node:fs\\\"),M=await import(/* webpackIgnore */\\\"node:fs/promises\\\"),Y=(await import(/* webpackIgnore */\\\"node:vm\\\")).default,U=await import(/* webpackIgnore */\\\"node:path\\\"),W=U.sep,typeof p<\\\"u\\\"))return;let e=J,t=await import(/* webpackIgnore */\\\"node:crypto\\\"),i=await import(/* webpackIgnore */\\\"ws\\\"),r=await import(/* webpackIgnore */\\\"node:child_process\\\"),a={fs:e,crypto:t,ws:i,child_process:r};({});}s(C,\\\"initNodeModules\\\");function ge(e,t){return U.resolve(t||\\\".\\\",e)}s(ge,\\\"node_resolvePath\\\");function ye(e,t){return t===void 0&&(t=location),new URL(e,t).toString()}s(ye,\\\"browser_resolvePath\\\");var D;y?D=ge:D=ye;var W;y||(W=\\\"/\\\");function be(e,t){return e.startsWith(\\\"file://\\\")&&(e=e.slice(7)),e.includes(\\\"://\\\")?{response:fetch(e)}:{binary:M.readFile(e).then(i=>new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}}s(be,\\\"node_getBinaryResponse\\\");function ve(e,t){let i=new URL(e,location);return{response:fetch(i,t?{integrity:t}:{})}}s(ve,\\\"browser_getBinaryResponse\\\");var P;y?P=be:P=ve;async function G(e,t){let{response:i,binary:r}=P(e,t);if(r)return r;let a=await i;if(!a.ok)throw new Error(`Failed to load '${e}': request failed.`);return new Uint8Array(await a.arrayBuffer())}s(G,\\\"loadBinaryFile\\\");var O;if(V)O=s(async e=>await import(/* webpackIgnore */e),\\\"loadScript\\\");else if(q)O=s(async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await import(/* webpackIgnore */e);else throw t}},\\\"loadScript\\\");else if(y)O=he;else throw new Error(\\\"Cannot determine runtime environment\\\");async function he(e){e.startsWith(\\\"file://\\\")&&(e=e.slice(7)),e.includes(\\\"://\\\")?Y.runInThisContext(await(await fetch(e)).text()):await import(/* webpackIgnore */K.pathToFileURL(e).href)}s(he,\\\"nodeLoadScript\\\");async function X(e){if(y){await C();let t=await M.readFile(e,{encoding:\\\"utf8\\\"});return JSON.parse(t)}else return await(await fetch(e)).json()}s(X,\\\"loadLockFile\\\");async function Q(){if(T)return __dirname;let e;try{throw new Error}catch(r){e=r}let t=j.parse(e)[0].fileName;if(y&&!t.startsWith(\\\"file://\\\")&&(t=`file://${t}`),H){let r=await import(/* webpackIgnore */\\\"node:path\\\");return(await import(/* webpackIgnore */\\\"node:url\\\")).fileURLToPath(r.dirname(t))}let i=t.lastIndexOf(W);if(i===-1)throw new Error(\\\"Could not extract indexURL path from pyodide module location\\\");return t.slice(0,i)}s(Q,\\\"calculateDirname\\\");function Z(e){let t=e.FS,i=e.FS.filesystems.MEMFS,r=e.PATH,a={DIR_MODE:16895,FILE_MODE:33279,mount:function(n){if(!n.opts.fileSystemHandle)throw new Error(\\\"opts.fileSystemHandle is required\\\");return i.mount.apply(null,arguments)},syncfs:async(n,o,c)=>{try{let l=a.getLocalSet(n),d=await a.getRemoteSet(n),u=o?d:l,m=o?l:d;await a.reconcile(n,u,m),c(null)}catch(l){c(l)}},getLocalSet:n=>{let o=Object.create(null);function c(u){return u!==\\\".\\\"&&u!==\\\"..\\\"}s(c,\\\"isRealDir\\\");function l(u){return m=>r.join2(u,m)}s(l,\\\"toAbsolute\\\");let d=t.readdir(n.mountpoint).filter(c).map(l(n.mountpoint));for(;d.length;){let u=d.pop(),m=t.stat(u);t.isDir(m.mode)&&d.push.apply(d,t.readdir(u).filter(c).map(l(u))),o[u]={timestamp:m.mtime,mode:m.mode}}return{type:\\\"local\\\",entries:o}},getRemoteSet:async n=>{let o=Object.create(null),c=await Ee(n.opts.fileSystemHandle);for(let[l,d]of c)l!==\\\".\\\"&&(o[r.join2(n.mountpoint,l)]={timestamp:d.kind===\\\"file\\\"?(await d.getFile()).lastModifiedDate:new Date,mode:d.kind===\\\"file\\\"?a.FILE_MODE:a.DIR_MODE});return{type:\\\"remote\\\",entries:o,handles:c}},loadLocalEntry:n=>{let c=t.lookupPath(n).node,l=t.stat(n);if(t.isDir(l.mode))return{timestamp:l.mtime,mode:l.mode};if(t.isFile(l.mode))return c.contents=i.getFileDataAsTypedArray(c),{timestamp:l.mtime,mode:l.mode,contents:c.contents};throw new Error(\\\"node type not supported\\\")},storeLocalEntry:(n,o)=>{if(t.isDir(o.mode))t.mkdirTree(n,o.mode);else if(t.isFile(o.mode))t.writeFile(n,o.contents,{canOwn:!0});else throw new Error(\\\"node type not supported\\\");t.chmod(n,o.mode),t.utime(n,o.timestamp,o.timestamp)},removeLocalEntry:n=>{var o=t.stat(n);t.isDir(o.mode)?t.rmdir(n):t.isFile(o.mode)&&t.unlink(n)},loadRemoteEntry:async n=>{if(n.kind===\\\"file\\\"){let o=await n.getFile();return{contents:new Uint8Array(await o.arrayBuffer()),mode:a.FILE_MODE,timestamp:o.lastModifiedDate}}else{if(n.kind===\\\"directory\\\")return{mode:a.DIR_MODE,timestamp:new Date};throw new Error(\\\"unknown kind: \\\"+n.kind)}},storeRemoteEntry:async(n,o,c)=>{let l=n.get(r.dirname(o)),d=t.isFile(c.mode)?await l.getFileHandle(r.basename(o),{create:!0}):await l.getDirectoryHandle(r.basename(o),{create:!0});if(d.kind===\\\"file\\\"){let u=await d.createWritable();await u.write(c.contents),await u.close()}n.set(o,d)},removeRemoteEntry:async(n,o)=>{await n.get(r.dirname(o)).removeEntry(r.basename(o)),n.delete(o)},reconcile:async(n,o,c)=>{let l=0,d=[];Object.keys(o.entries).forEach(function(f){let v=o.entries[f],N=c.entries[f];(!N||t.isFile(v.mode)&&v.timestamp.getTime()>N.timestamp.getTime())&&(d.push(f),l++)}),d.sort();let u=[];if(Object.keys(c.entries).forEach(function(f){o.entries[f]||(u.push(f),l++)}),u.sort().reverse(),!l)return;let m=o.type===\\\"remote\\\"?o.handles:c.handles;for(let f of d){let v=r.normalize(f.replace(n.mountpoint,\\\"/\\\")).substring(1);if(c.type===\\\"local\\\"){let N=m.get(v),te=await a.loadRemoteEntry(N);a.storeLocalEntry(f,te)}else{let N=a.loadLocalEntry(f);await a.storeRemoteEntry(m,v,N)}}for(let f of u)if(c.type===\\\"local\\\")a.removeLocalEntry(f);else{let v=r.normalize(f.replace(n.mountpoint,\\\"/\\\")).substring(1);await a.removeRemoteEntry(m,v)}}};e.FS.filesystems.NATIVEFS_ASYNC=a}s(Z,\\\"initializeNativeFS\\\");var Ee=s(async e=>{let t=[];async function i(a){for await(let n of a.values())t.push(n),n.kind===\\\"directory\\\"&&await i(n)}s(i,\\\"collect\\\"),await i(e);let r=new Map;r.set(\\\".\\\",e);for(let a of t){let n=(await e.resolve(a)).join(\\\"/\\\");r.set(n,a)}return r},\\\"getFsHandles\\\");function ee(e){let t={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:Fe(e),quit(i,r){throw t.exited={status:i,toThrow:r},r},print:e.stdout,printErr:e.stderr,arguments:e.args,API:{config:e},locateFile:i=>e.indexURL+i,instantiateWasm:Re(e.indexURL)};return t}s(ee,\\\"createSettings\\\");function Se(e){return function(t){let i=\\\"/\\\";try{t.FS.mkdirTree(e)}catch(r){console.error(`Error occurred while making a home directory '${e}':`),console.error(r),console.error(`Using '${i}' for a home directory instead`),e=i}t.FS.chdir(e)}}s(Se,\\\"createHomeDirectory\\\");function we(e){return function(t){Object.assign(t.ENV,e)}}s(we,\\\"setEnvironment\\\");function Ne(e){return t=>{for(let i of e)t.FS.mkdirTree(i),t.FS.mount(t.FS.filesystems.NODEFS,{root:i},i)}}s(Ne,\\\"mountLocalDirectories\\\");function _e(e){let t=G(e);return i=>{let r=i._py_version_major(),a=i._py_version_minor();i.FS.mkdirTree(\\\"/lib\\\"),i.FS.mkdirTree(`/lib/python${r}.${a}/site-packages`),i.addRunDependency(\\\"install-stdlib\\\"),t.then(n=>{i.FS.writeFile(`/lib/python${r}${a}.zip`,n)}).catch(n=>{console.error(\\\"Error occurred while installing the standard library:\\\"),console.error(n)}).finally(()=>{i.removeRunDependency(\\\"install-stdlib\\\")})}}s(_e,\\\"installStdlib\\\");function Fe(e){let t;return e.stdLibURL!=null?t=e.stdLibURL:t=e.indexURL+\\\"python_stdlib.zip\\\",[_e(t),Se(e.env.HOME),we(e.env),Ne(e._node_mounts),Z]}s(Fe,\\\"getFileSystemInitializationFuncs\\\");function Re(e){if(typeof WasmOffsetConverter<\\\"u\\\")return;let{binary:t,response:i}=P(e+\\\"pyodide.asm.wasm\\\");return function(r,a){return async function(){try{let n;i?n=await WebAssembly.instantiateStreaming(i,r):n=await WebAssembly.instantiate(await t,r);let{instance:o,module:c}=n;a(o,c)}catch(n){console.warn(\\\"wasm instantiation failed!\\\"),console.warn(n)}}(),{}}}s(Re,\\\"getInstantiateWasmFunc\\\");var x=\\\"0.27.2\\\";async function B(e={}){var u,m;await C();let t=e.indexURL||await Q();t=D(t),t.endsWith(\\\"/\\\")||(t+=\\\"/\\\"),e.indexURL=t;let i={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:t+\\\"pyodide-lock.json\\\",args:[],_node_mounts:[],env:{},packageCacheDir:t,packages:[],enableRunUntilComplete:!1,checkAPIVersion:!0,BUILD_ID:\\\"f88dc4abb40ec8e780c94a5f70bcef45ec9eb3c1aee1c99da527febfef1c6f3f\\\"},r=Object.assign(i,e);(u=r.env).HOME??(u.HOME=\\\"/home/pyodide\\\"),(m=r.env).PYTHONINSPECT??(m.PYTHONINSPECT=\\\"1\\\");let a=ee(r),n=a.API;if(n.lockFilePromise=X(r.lockFileURL),typeof _createPyodideModule!=\\\"function\\\"){let f=`${r.indexURL}pyodide.asm.js`;await O(f)}let o;if(e._loadSnapshot){let f=await e._loadSnapshot;ArrayBuffer.isView(f)?o=f:o=new Uint8Array(f),a.noInitialRun=!0,a.INITIAL_MEMORY=o.length}let c=await _createPyodideModule(a);if(a.exited)throw a.exited.toThrow;if(e.pyproxyToStringRepr&&n.setPyProxyToStringMethod(!0),n.version!==x&&r.checkAPIVersion)throw new Error(`Pyodide version does not match: '${x}' <==> '${n.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);c.locateFile=f=>{throw new Error(\\\"Didn't expect to load any more file_packager files!\\\")};let l;o&&(l=n.restoreSnapshot(o));let d=n.finalizeBootstrap(l,e._snapshotDeserializer);return n.sys.path.insert(0,n.config.env.HOME),d.version.includes(\\\"dev\\\")||n.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${d.version}/full/`),n._pyodide.set_excepthook(),await n.packageIndexReady,n.initializeStreams(r.stdin,r.stdout,r.stderr),d}s(B,\\\"loadPyodide\\\");({});return ce(Ie);})();\\ntry{Object.assign(exports,loadPyodide)}catch(_){}\\n({});\\nmodule.exports = {loadPyodide: loadPyodide.loadPyodide, version: loadPyodide.version};\\n//# sourceMappingURL=pyodide.js.map\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcHlvZGlkZS9weW9kaWRlLmpzIiwibWFwcGluZ3MiOiJBQUFBLHNDQUFzQyxzQkFBc0IscUJBQXFCLDRCQUE0Qix1Q0FBdUMsa0NBQWtDLGdFQUFnRSwyQkFBMkIsd0JBQXdCLHFFQUFxRSwrQ0FBK0MsaUJBQWlCLDZEQUE2RCxpRUFBaUUsRUFBRSxlQUFlLHNCQUFzQix1QkFBdUIsRUFBRSxlQUFlLG1HQUFtRyxtREFBbUQsRUFBRSxVQUFVLHNDQUFzQyx5Q0FBeUMsc0JBQXNCLG9CQUFvQixpQkFBaUIsU0FBUyxLQUFLLFVBQVUsT0FBTyxnQ0FBZ0MsRUFBRSxlQUFlLHlDQUF5QyxvQkFBb0IsY0FBYyxnREFBZ0QscUJBQXFCLGNBQWMsa0JBQWtCLGdCQUFnQixpQkFBaUIsME1BQTBNLGNBQWMsaUJBQWlCLFdBQVcscURBQXFELG9CQUFvQixhQUFhLG1CQUFtQixpQkFBaUIscUJBQXFCLHlHQUF5RyxZQUFZLDBCQUEwQix1QkFBdUIsMkJBQTJCLG9DQUFvQyxxREFBcUQsMEVBQTBFLHFCQUFxQiwwSEFBMEgsNElBQTRJLDJCQUEyQixzSEFBc0gsa0dBQWtHLGNBQWMscUZBQXFGLEVBQUUsNkJBQTZCLFFBQVEsV0FBVyxrRkFBa0YsbUJBQW1CLGFBQWEsT0FBTyxNQUFNLFFBQVEsV0FBVyxrRkFBa0YsbUJBQW1CLHVEQUF1RCxtQkFBbUIsT0FBTyxNQUFNLFFBQVEsV0FBVyxrRkFBa0YsbUJBQW1CLG1CQUFtQixPQUFPLFVBQVUsY0FBYyw2RUFBNkUsT0FBTyxvQkFBb0Isd0RBQXdELDBDQUEwQyxxREFBcUQsNERBQTRELG1DQUFtQyx5RUFBeUUsdUNBQXVDLGtFQUFrRSw2Q0FBNkMsbUJBQW1CLE9BQU8seUJBQXlCLDJHQUEyRyxnSEFBZ0gsMkJBQTJCLDhHQUE4RyxjQUFjLHFFQUFxRSxFQUFFLE9BQU8sa0VBQWtFLDZDQUE2QyxrQkFBa0IsT0FBTyx5QkFBeUIsdUtBQXVLLGVBQWUsRUFBRSxrSEFBa0gsY0FBYyx3RUFBd0UsRUFBRSxPQUFPLHlDQUF5QywyQkFBMkIsY0FBYyxTQUFTLGtyQkFBa3JCLGNBQWMsbUJBQW1CLGtUQUFrVCxrS0FBa0ssb0NBQW9DLEdBQUcsR0FBRyx5QkFBeUIsaUJBQWlCLDZCQUE2QiwyQkFBMkIsaUJBQWlCLHdEQUF3RCw4QkFBOEIsTUFBTSxZQUFZLE1BQU0sYUFBYSxpQkFBaUIsc0VBQXNFLGtCQUFrQixFQUFFLGtGQUFrRixpQ0FBaUMsaUJBQWlCLDBCQUEwQixPQUFPLG9CQUFvQixZQUFZLEdBQUcsR0FBRyxvQ0FBb0MsTUFBTSxZQUFZLHNCQUFzQixJQUFJLG9CQUFvQixRQUFRLGNBQWMsY0FBYyw0Q0FBNEMsRUFBRSxxQkFBcUIsNkNBQTZDLHdCQUF3QixNQUFNLHFFQUFxRSx3QkFBd0IsSUFBSSw0QkFBNEIsU0FBUyw2REFBNkQsY0FBYyxpQkFBaUIsZUFBZSwrREFBK0QscUJBQXFCLHdLQUF3Syx5QkFBeUIsb0JBQW9CLE1BQU0sVUFBVSwwQkFBMEIsa0JBQWtCLEVBQUUscUJBQXFCLHlDQUF5QyxzQkFBc0IsbUJBQW1CLHNCQUFzQixNQUFNLElBQUksZ0JBQWdCLFNBQVMsSUFBSSw2QkFBNkIsK0NBQStDLEVBQUUsTUFBTSxxREFBcUQsa0ZBQWtGLHVCQUF1Qiw0RkFBNEYsb0JBQW9CLDBCQUEwQixjQUFjLGdEQUFnRCxpREFBaUQsbUZBQW1GLHFDQUFxQyx1QkFBdUIsSUFBSSxpRUFBaUUsaUNBQWlDLFNBQVMsTUFBTSxpQkFBaUIsMEJBQTBCLGNBQWMsNkJBQTZCLG1CQUFtQixjQUFjLHVCQUF1QixvQkFBb0IsNkRBQTZELEtBQUssU0FBUyxFQUFFLDBCQUEwQix3RUFBd0UsK0JBQStCLE9BQU8sMEJBQTBCLHdCQUF3Qiw4REFBOEQseURBQXlELHdIQUF3SCxFQUFFLE9BQU8scUNBQXFDLG9CQUFvQix1Q0FBdUMsMEJBQTBCLCtCQUErQixvRUFBb0UsbURBQW1ELDZDQUE2Qyx5QkFBeUIseUNBQXlDLG1EQUFtRCxVQUFVLEVBQUUsa0RBQWtELHFEQUFxRCxzQkFBc0IsZ0JBQWdCLHlEQUF5RCwyQkFBMkIsc0JBQXNCLHdCQUF3QixPQUFPLDhGQUE4RixLQUFLLGlDQUFpQyxvQ0FBb0MsNENBQTRDLGlDQUFpQyxrRkFBa0YsVUFBVSw0Q0FBNEMsVUFBVSxFQUFFLHNCQUFzQiwrQkFBK0IsMENBQTBDLFdBQVcsZ0NBQWdDLGlFQUFpRSwwQkFBMEIsYUFBYSwyQ0FBMkMsa0NBQWtDLHFGQUFxRixXQUFXLFNBQVMsOENBQThDLDhCQUE4QiwrQkFBK0IsOENBQThDLGdCQUFnQiw4REFBOEQsdUJBQXVCLDZDQUE2Qyx3QkFBd0IsS0FBSywwQkFBMEIsaUNBQWlDLDJEQUEyRCxLQUFLLDhEQUE4RCxrQ0FBa0Msa0NBQWtDLDRCQUE0QixtQkFBbUIsU0FBUyxvQkFBb0IsMkVBQTJFLDRCQUE0QixjQUFjLGVBQWUsZ0JBQWdCLHVDQUF1QyxXQUFXLFNBQVMsbUJBQW1CLGVBQWUsT0FBTywrRUFBK0UsZ0JBQWdCLG1CQUFtQixHQUFHLHdEQUF3RCxTQUFTLDREQUE0RCxTQUFTLHlCQUF5QixlQUFlLG1CQUFtQixZQUFZLElBQUksa0JBQWtCLFNBQVMsK0RBQStELEVBQUUsOENBQThDLEVBQUUscUNBQXFDLGVBQWUsOEJBQThCLGVBQWUsbUJBQW1CLHdCQUF3Qix5QkFBeUIsZUFBZSxXQUFXLHFFQUFxRSxPQUFPLEtBQUssZ0NBQWdDLGVBQWUsV0FBVyxXQUFXLG9EQUFvRCxzREFBc0QsRUFBRSxHQUFHLEVBQUUsbUVBQW1FLDZCQUE2QixFQUFFLEVBQUUsRUFBRSxTQUFTLFlBQVksMEZBQTBGLGVBQWUsMENBQTBDLEdBQUcsd0JBQXdCLGVBQWUsTUFBTSxnSUFBZ0ksMkNBQTJDLGVBQWUsMkNBQTJDLElBQUksb0JBQW9CLDJCQUEyQixxQkFBcUIsd0JBQXdCLElBQUksTUFBTSwyRkFBMkYsSUFBSSxvQkFBb0IsR0FBRyxPQUFPLFNBQVMsOERBQThELE9BQU8saUNBQWlDLGlCQUFpQixxQkFBcUIsRUFBRSxRQUFRLFVBQVUsNEJBQTRCLGtEQUFrRCxPQUFPLHNKQUFzSiwwSkFBMEosc0JBQXNCLDRGQUE0RixvQkFBb0IsaUZBQWlGLFNBQVMsV0FBVyxnQkFBZ0IsV0FBVyxNQUFNLG9CQUFvQiw0QkFBNEIsMEZBQTBGLG9DQUFvQyxtQ0FBbUMsOElBQThJLEVBQUUsVUFBVSxVQUFVLG9IQUFvSCxpQkFBaUIsMEVBQTBFLE1BQU0sNEJBQTRCLHFEQUFxRCw0SEFBNEgsVUFBVSxnSEFBZ0gscUJBQXFCLEdBQUcsRUFBRSxlQUFlLElBQUksTUFBTSxtQ0FBbUMsVUFBVSxLQUFLLEVBQUUsb0JBQW9CLG9FQUFvRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvcHlvZGlkZS9weW9kaWRlLmpzPzAxZjQiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBldmFsKFwiXFxcInVzZSBzdHJpY3RcXFwiO3ZhciBsb2FkUHlvZGlkZT0oKCk9Pnt2YXIgbmU9T2JqZWN0LmNyZWF0ZTt2YXIgST1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIHJlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7dmFyIGllPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO3ZhciBvZT1PYmplY3QuZ2V0UHJvdG90eXBlT2YsYWU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt2YXIgcz0oZSx0KT0+SShlLFxcXCJuYW1lXFxcIix7dmFsdWU6dCxjb25maWd1cmFibGU6ITB9KSxwPShlPT50eXBlb2YgcmVxdWlyZTxcXFwidVxcXCI/cmVxdWlyZTp0eXBlb2YgUHJveHk8XFxcInVcXFwiP25ldyBQcm94eShlLHtnZXQ6KHQsaSk9Pih0eXBlb2YgcmVxdWlyZTxcXFwidVxcXCI/cmVxdWlyZTp0KVtpXX0pOmUpKGZ1bmN0aW9uKGUpe2lmKHR5cGVvZiByZXF1aXJlPFxcXCJ1XFxcIilyZXR1cm4gcmVxdWlyZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhyb3cgbmV3IEVycm9yKCdEeW5hbWljIHJlcXVpcmUgb2YgXFxcIicrZSsnXFxcIiBpcyBub3Qgc3VwcG9ydGVkJyl9KTt2YXIgc2U9KGUsdCk9Pntmb3IodmFyIGkgaW4gdClJKGUsaSx7Z2V0OnRbaV0sZW51bWVyYWJsZTohMH0pfSwkPShlLHQsaSxyKT0+e2lmKHQmJnR5cGVvZiB0PT1cXFwib2JqZWN0XFxcInx8dHlwZW9mIHQ9PVxcXCJmdW5jdGlvblxcXCIpZm9yKGxldCBhIG9mIGllKHQpKSFhZS5jYWxsKGUsYSkmJmEhPT1pJiZJKGUsYSx7Z2V0OigpPT50W2FdLGVudW1lcmFibGU6IShyPXJlKHQsYSkpfHxyLmVudW1lcmFibGV9KTtyZXR1cm4gZX07dmFyIGI9KGUsdCxpKT0+KGk9ZSE9bnVsbD9uZShvZShlKSk6e30sJCh0fHwhZXx8IWUuX19lc01vZHVsZT9JKGksXFxcImRlZmF1bHRcXFwiLHt2YWx1ZTplLGVudW1lcmFibGU6ITB9KTppLGUpKSxjZT1lPT4kKEkoe30sXFxcIl9fZXNNb2R1bGVcXFwiLHt2YWx1ZTohMH0pLGUpO3ZhciBJZT17fTtzZShJZSx7bG9hZFB5b2RpZGU6KCk9PkIsdmVyc2lvbjooKT0+eH0pO2Z1bmN0aW9uIGxlKGUpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KGUpKSYmaXNGaW5pdGUoZSl9cyhsZSxcXFwiX2lzTnVtYmVyXFxcIik7ZnVuY3Rpb24gdyhlKXtyZXR1cm4gZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnN1YnN0cmluZygxKX1zKHcsXFxcIl9jYXBpdGFsaXplXFxcIik7ZnVuY3Rpb24gTChlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlXX19cyhMLFxcXCJfZ2V0dGVyXFxcIik7dmFyIF89W1xcXCJpc0NvbnN0cnVjdG9yXFxcIixcXFwiaXNFdmFsXFxcIixcXFwiaXNOYXRpdmVcXFwiLFxcXCJpc1RvcGxldmVsXFxcIl0sRj1bXFxcImNvbHVtbk51bWJlclxcXCIsXFxcImxpbmVOdW1iZXJcXFwiXSxSPVtcXFwiZmlsZU5hbWVcXFwiLFxcXCJmdW5jdGlvbk5hbWVcXFwiLFxcXCJzb3VyY2VcXFwiXSxkZT1bXFxcImFyZ3NcXFwiXSx1ZT1bXFxcImV2YWxPcmlnaW5cXFwiXSxrPV8uY29uY2F0KEYsUixkZSx1ZSk7ZnVuY3Rpb24gZyhlKXtpZihlKWZvcih2YXIgdD0wO3Q8ay5sZW5ndGg7dCsrKWVba1t0XV0hPT12b2lkIDAmJnRoaXNbXFxcInNldFxcXCIrdyhrW3RdKV0oZVtrW3RdXSl9cyhnLFxcXCJTdGFja0ZyYW1lXFxcIik7Zy5wcm90b3R5cGU9e2dldEFyZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcmdzfSxzZXRBcmdzOmZ1bmN0aW9uKGUpe2lmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSE9PVxcXCJbb2JqZWN0IEFycmF5XVxcXCIpdGhyb3cgbmV3IFR5cGVFcnJvcihcXFwiQXJncyBtdXN0IGJlIGFuIEFycmF5XFxcIik7dGhpcy5hcmdzPWV9LGdldEV2YWxPcmlnaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ldmFsT3JpZ2lufSxzZXRFdmFsT3JpZ2luOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBnKXRoaXMuZXZhbE9yaWdpbj1lO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIE9iamVjdCl0aGlzLmV2YWxPcmlnaW49bmV3IGcoZSk7ZWxzZSB0aHJvdyBuZXcgVHlwZUVycm9yKFxcXCJFdmFsIE9yaWdpbiBtdXN0IGJlIGFuIE9iamVjdCBvciBTdGFja0ZyYW1lXFxcIil9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRGaWxlTmFtZSgpfHxcXFwiXFxcIix0PXRoaXMuZ2V0TGluZU51bWJlcigpfHxcXFwiXFxcIixpPXRoaXMuZ2V0Q29sdW1uTnVtYmVyKCl8fFxcXCJcXFwiLHI9dGhpcy5nZXRGdW5jdGlvbk5hbWUoKXx8XFxcIlxcXCI7cmV0dXJuIHRoaXMuZ2V0SXNFdmFsKCk/ZT9cXFwiW2V2YWxdIChcXFwiK2UrXFxcIjpcXFwiK3QrXFxcIjpcXFwiK2krXFxcIilcXFwiOlxcXCJbZXZhbF06XFxcIit0K1xcXCI6XFxcIitpOnI/citcXFwiIChcXFwiK2UrXFxcIjpcXFwiK3QrXFxcIjpcXFwiK2krXFxcIilcXFwiOmUrXFxcIjpcXFwiK3QrXFxcIjpcXFwiK2l9fTtnLmZyb21TdHJpbmc9cyhmdW5jdGlvbih0KXt2YXIgaT10LmluZGV4T2YoXFxcIihcXFwiKSxyPXQubGFzdEluZGV4T2YoXFxcIilcXFwiKSxhPXQuc3Vic3RyaW5nKDAsaSksbj10LnN1YnN0cmluZyhpKzEscikuc3BsaXQoXFxcIixcXFwiKSxvPXQuc3Vic3RyaW5nKHIrMSk7aWYoby5pbmRleE9mKFxcXCJAXFxcIik9PT0wKXZhciBjPS9AKC4rPykoPzo6KFxcXFxkKykpPyg/OjooXFxcXGQrKSk/JC8uZXhlYyhvLFxcXCJcXFwiKSxsPWNbMV0sZD1jWzJdLHU9Y1szXTtyZXR1cm4gbmV3IGcoe2Z1bmN0aW9uTmFtZTphLGFyZ3M6bnx8dm9pZCAwLGZpbGVOYW1lOmwsbGluZU51bWJlcjpkfHx2b2lkIDAsY29sdW1uTnVtYmVyOnV8fHZvaWQgMH0pfSxcXFwiU3RhY2tGcmFtZSQkZnJvbVN0cmluZ1xcXCIpO2ZvcihoPTA7aDxfLmxlbmd0aDtoKyspZy5wcm90b3R5cGVbXFxcImdldFxcXCIrdyhfW2hdKV09TChfW2hdKSxnLnByb3RvdHlwZVtcXFwic2V0XFxcIit3KF9baF0pXT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7dGhpc1tlXT0hIXR9fShfW2hdKTt2YXIgaDtmb3IoRT0wO0U8Ri5sZW5ndGg7RSsrKWcucHJvdG90eXBlW1xcXCJnZXRcXFwiK3coRltFXSldPUwoRltFXSksZy5wcm90b3R5cGVbXFxcInNldFxcXCIrdyhGW0VdKV09ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKCFsZSh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKGUrXFxcIiBtdXN0IGJlIGEgTnVtYmVyXFxcIik7dGhpc1tlXT1OdW1iZXIodCl9fShGW0VdKTt2YXIgRTtmb3IoUz0wO1M8Ui5sZW5ndGg7UysrKWcucHJvdG90eXBlW1xcXCJnZXRcXFwiK3coUltTXSldPUwoUltTXSksZy5wcm90b3R5cGVbXFxcInNldFxcXCIrdyhSW1NdKV09ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3RoaXNbZV09U3RyaW5nKHQpfX0oUltTXSk7dmFyIFMsQT1nO2Z1bmN0aW9uIGZlKCl7dmFyIGU9L15cXFxccyphdCAuKihcXFxcUys6XFxcXGQrfFxcXFwobmF0aXZlXFxcXCkpL20sdD0vXihldmFsQCk/KFxcXFxbbmF0aXZlIGNvZGVdKT8kLztyZXR1cm57cGFyc2U6cyhmdW5jdGlvbihyKXtpZihyLnN0YWNrJiZyLnN0YWNrLm1hdGNoKGUpKXJldHVybiB0aGlzLnBhcnNlVjhPcklFKHIpO2lmKHIuc3RhY2spcmV0dXJuIHRoaXMucGFyc2VGRk9yU2FmYXJpKHIpO3Rocm93IG5ldyBFcnJvcihcXFwiQ2Fubm90IHBhcnNlIGdpdmVuIEVycm9yIG9iamVjdFxcXCIpfSxcXFwiRXJyb3JTdGFja1BhcnNlciQkcGFyc2VcXFwiKSxleHRyYWN0TG9jYXRpb246cyhmdW5jdGlvbihyKXtpZihyLmluZGV4T2YoXFxcIjpcXFwiKT09PS0xKXJldHVybltyXTt2YXIgYT0vKC4rPykoPzo6KFxcXFxkKykpPyg/OjooXFxcXGQrKSk/JC8sbj1hLmV4ZWMoci5yZXBsYWNlKC9bKCldL2csXFxcIlxcXCIpKTtyZXR1cm5bblsxXSxuWzJdfHx2b2lkIDAsblszXXx8dm9pZCAwXX0sXFxcIkVycm9yU3RhY2tQYXJzZXIkJGV4dHJhY3RMb2NhdGlvblxcXCIpLHBhcnNlVjhPcklFOnMoZnVuY3Rpb24ocil7dmFyIGE9ci5zdGFjay5zcGxpdChgXFxuYCkuZmlsdGVyKGZ1bmN0aW9uKG4pe3JldHVybiEhbi5tYXRjaChlKX0sdGhpcyk7cmV0dXJuIGEubWFwKGZ1bmN0aW9uKG4pe24uaW5kZXhPZihcXFwiKGV2YWwgXFxcIik+LTEmJihuPW4ucmVwbGFjZSgvZXZhbCBjb2RlL2csXFxcImV2YWxcXFwiKS5yZXBsYWNlKC8oXFxcXChldmFsIGF0IFteKCldKil8KCwuKiQpL2csXFxcIlxcXCIpKTt2YXIgbz1uLnJlcGxhY2UoL15cXFxccysvLFxcXCJcXFwiKS5yZXBsYWNlKC9cXFxcKGV2YWwgY29kZS9nLFxcXCIoXFxcIikucmVwbGFjZSgvXi4qP1xcXFxzKy8sXFxcIlxcXCIpLGM9by5tYXRjaCgvIChcXFxcKC4rXFxcXCkkKS8pO289Yz9vLnJlcGxhY2UoY1swXSxcXFwiXFxcIik6bzt2YXIgbD10aGlzLmV4dHJhY3RMb2NhdGlvbihjP2NbMV06byksZD1jJiZvfHx2b2lkIDAsdT1bXFxcImV2YWxcXFwiLFxcXCI8YW5vbnltb3VzPlxcXCJdLmluZGV4T2YobFswXSk+LTE/dm9pZCAwOmxbMF07cmV0dXJuIG5ldyBBKHtmdW5jdGlvbk5hbWU6ZCxmaWxlTmFtZTp1LGxpbmVOdW1iZXI6bFsxXSxjb2x1bW5OdW1iZXI6bFsyXSxzb3VyY2U6bn0pfSx0aGlzKX0sXFxcIkVycm9yU3RhY2tQYXJzZXIkJHBhcnNlVjhPcklFXFxcIikscGFyc2VGRk9yU2FmYXJpOnMoZnVuY3Rpb24ocil7dmFyIGE9ci5zdGFjay5zcGxpdChgXFxuYCkuZmlsdGVyKGZ1bmN0aW9uKG4pe3JldHVybiFuLm1hdGNoKHQpfSx0aGlzKTtyZXR1cm4gYS5tYXAoZnVuY3Rpb24obil7aWYobi5pbmRleE9mKFxcXCIgPiBldmFsXFxcIik+LTEmJihuPW4ucmVwbGFjZSgvIGxpbmUgKFxcXFxkKykoPzogPiBldmFsIGxpbmUgXFxcXGQrKSogPiBldmFsOlxcXFxkKzpcXFxcZCsvZyxcXFwiOiQxXFxcIikpLG4uaW5kZXhPZihcXFwiQFxcXCIpPT09LTEmJm4uaW5kZXhPZihcXFwiOlxcXCIpPT09LTEpcmV0dXJuIG5ldyBBKHtmdW5jdGlvbk5hbWU6bn0pO3ZhciBvPS8oKC4qXFxcIi4rXFxcIlteQF0qKT9bXkBdKikoPzpAKS8sYz1uLm1hdGNoKG8pLGw9YyYmY1sxXT9jWzFdOnZvaWQgMCxkPXRoaXMuZXh0cmFjdExvY2F0aW9uKG4ucmVwbGFjZShvLFxcXCJcXFwiKSk7cmV0dXJuIG5ldyBBKHtmdW5jdGlvbk5hbWU6bCxmaWxlTmFtZTpkWzBdLGxpbmVOdW1iZXI6ZFsxXSxjb2x1bW5OdW1iZXI6ZFsyXSxzb3VyY2U6bn0pfSx0aGlzKX0sXFxcIkVycm9yU3RhY2tQYXJzZXIkJHBhcnNlRkZPclNhZmFyaVxcXCIpfX1zKGZlLFxcXCJFcnJvclN0YWNrUGFyc2VyXFxcIik7dmFyIG1lPW5ldyBmZTt2YXIgaj1tZTt2YXIgeT10eXBlb2YgcHJvY2Vzcz09XFxcIm9iamVjdFxcXCImJnR5cGVvZiBwcm9jZXNzLnZlcnNpb25zPT1cXFwib2JqZWN0XFxcIiYmdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZT09XFxcInN0cmluZ1xcXCImJiFwcm9jZXNzLmJyb3dzZXIsVD15JiZ0eXBlb2YgbW9kdWxlPFxcXCJ1XFxcIiYmdHlwZW9mIG1vZHVsZS5leHBvcnRzPFxcXCJ1XFxcIiYmdHlwZW9mIHA8XFxcInVcXFwiJiZ0eXBlb2YgX19kaXJuYW1lPFxcXCJ1XFxcIixIPXkmJiFULExlPXR5cGVvZiBnbG9iYWxUaGlzLkJ1bjxcXFwidVxcXCIscGU9dHlwZW9mIERlbm88XFxcInVcXFwiLHo9IXkmJiFwZSxWPXomJnR5cGVvZiB3aW5kb3c9PVxcXCJvYmplY3RcXFwiJiZ0eXBlb2YgZG9jdW1lbnQ9PVxcXCJvYmplY3RcXFwiJiZ0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudD09XFxcImZ1bmN0aW9uXFxcIiYmXFxcInNlc3Npb25TdG9yYWdlXFxcImluIHdpbmRvdyYmdHlwZW9mIGltcG9ydFNjcmlwdHMhPVxcXCJmdW5jdGlvblxcXCIscT16JiZ0eXBlb2YgaW1wb3J0U2NyaXB0cz09XFxcImZ1bmN0aW9uXFxcIiYmdHlwZW9mIHNlbGY9PVxcXCJvYmplY3RcXFwiLFRlPXR5cGVvZiBuYXZpZ2F0b3I9PVxcXCJvYmplY3RcXFwiJiZ0eXBlb2YgbmF2aWdhdG9yLnVzZXJBZ2VudD09XFxcInN0cmluZ1xcXCImJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcXFwiQ2hyb21lXFxcIik9PS0xJiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXFxcIlNhZmFyaVxcXCIpPi0xO3ZhciBLLFUsWSxKLE07YXN5bmMgZnVuY3Rpb24gQygpe2lmKCF5fHwoSz0oYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tJZ25vcmUgKi9cXFwibm9kZTp1cmxcXFwiKSkuZGVmYXVsdCxKPWF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrSWdub3JlICovXFxcIm5vZGU6ZnNcXFwiKSxNPWF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrSWdub3JlICovXFxcIm5vZGU6ZnMvcHJvbWlzZXNcXFwiKSxZPShhd2FpdCBpbXBvcnQoLyogd2VicGFja0lnbm9yZSAqL1xcXCJub2RlOnZtXFxcIikpLmRlZmF1bHQsVT1hd2FpdCBpbXBvcnQoLyogd2VicGFja0lnbm9yZSAqL1xcXCJub2RlOnBhdGhcXFwiKSxXPVUuc2VwLHR5cGVvZiBwPFxcXCJ1XFxcIikpcmV0dXJuO2xldCBlPUosdD1hd2FpdCBpbXBvcnQoLyogd2VicGFja0lnbm9yZSAqL1xcXCJub2RlOmNyeXB0b1xcXCIpLGk9YXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tJZ25vcmUgKi9cXFwid3NcXFwiKSxyPWF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrSWdub3JlICovXFxcIm5vZGU6Y2hpbGRfcHJvY2Vzc1xcXCIpLGE9e2ZzOmUsY3J5cHRvOnQsd3M6aSxjaGlsZF9wcm9jZXNzOnJ9Oyh7fSk7fXMoQyxcXFwiaW5pdE5vZGVNb2R1bGVzXFxcIik7ZnVuY3Rpb24gZ2UoZSx0KXtyZXR1cm4gVS5yZXNvbHZlKHR8fFxcXCIuXFxcIixlKX1zKGdlLFxcXCJub2RlX3Jlc29sdmVQYXRoXFxcIik7ZnVuY3Rpb24geWUoZSx0KXtyZXR1cm4gdD09PXZvaWQgMCYmKHQ9bG9jYXRpb24pLG5ldyBVUkwoZSx0KS50b1N0cmluZygpfXMoeWUsXFxcImJyb3dzZXJfcmVzb2x2ZVBhdGhcXFwiKTt2YXIgRDt5P0Q9Z2U6RD15ZTt2YXIgVzt5fHwoVz1cXFwiL1xcXCIpO2Z1bmN0aW9uIGJlKGUsdCl7cmV0dXJuIGUuc3RhcnRzV2l0aChcXFwiZmlsZTovL1xcXCIpJiYoZT1lLnNsaWNlKDcpKSxlLmluY2x1ZGVzKFxcXCI6Ly9cXFwiKT97cmVzcG9uc2U6ZmV0Y2goZSl9OntiaW5hcnk6TS5yZWFkRmlsZShlKS50aGVuKGk9Pm5ldyBVaW50OEFycmF5KGkuYnVmZmVyLGkuYnl0ZU9mZnNldCxpLmJ5dGVMZW5ndGgpKX19cyhiZSxcXFwibm9kZV9nZXRCaW5hcnlSZXNwb25zZVxcXCIpO2Z1bmN0aW9uIHZlKGUsdCl7bGV0IGk9bmV3IFVSTChlLGxvY2F0aW9uKTtyZXR1cm57cmVzcG9uc2U6ZmV0Y2goaSx0P3tpbnRlZ3JpdHk6dH06e30pfX1zKHZlLFxcXCJicm93c2VyX2dldEJpbmFyeVJlc3BvbnNlXFxcIik7dmFyIFA7eT9QPWJlOlA9dmU7YXN5bmMgZnVuY3Rpb24gRyhlLHQpe2xldHtyZXNwb25zZTppLGJpbmFyeTpyfT1QKGUsdCk7aWYocilyZXR1cm4gcjtsZXQgYT1hd2FpdCBpO2lmKCFhLm9rKXRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgJyR7ZX0nOiByZXF1ZXN0IGZhaWxlZC5gKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYXdhaXQgYS5hcnJheUJ1ZmZlcigpKX1zKEcsXFxcImxvYWRCaW5hcnlGaWxlXFxcIik7dmFyIE87aWYoVilPPXMoYXN5bmMgZT0+YXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tJZ25vcmUgKi9lKSxcXFwibG9hZFNjcmlwdFxcXCIpO2Vsc2UgaWYocSlPPXMoYXN5bmMgZT0+e3RyeXtnbG9iYWxUaGlzLmltcG9ydFNjcmlwdHMoZSl9Y2F0Y2godCl7aWYodCBpbnN0YW5jZW9mIFR5cGVFcnJvcilhd2FpdCBpbXBvcnQoLyogd2VicGFja0lnbm9yZSAqL2UpO2Vsc2UgdGhyb3cgdH19LFxcXCJsb2FkU2NyaXB0XFxcIik7ZWxzZSBpZih5KU89aGU7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXFxcIkNhbm5vdCBkZXRlcm1pbmUgcnVudGltZSBlbnZpcm9ubWVudFxcXCIpO2FzeW5jIGZ1bmN0aW9uIGhlKGUpe2Uuc3RhcnRzV2l0aChcXFwiZmlsZTovL1xcXCIpJiYoZT1lLnNsaWNlKDcpKSxlLmluY2x1ZGVzKFxcXCI6Ly9cXFwiKT9ZLnJ1bkluVGhpc0NvbnRleHQoYXdhaXQoYXdhaXQgZmV0Y2goZSkpLnRleHQoKSk6YXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tJZ25vcmUgKi9LLnBhdGhUb0ZpbGVVUkwoZSkuaHJlZil9cyhoZSxcXFwibm9kZUxvYWRTY3JpcHRcXFwiKTthc3luYyBmdW5jdGlvbiBYKGUpe2lmKHkpe2F3YWl0IEMoKTtsZXQgdD1hd2FpdCBNLnJlYWRGaWxlKGUse2VuY29kaW5nOlxcXCJ1dGY4XFxcIn0pO3JldHVybiBKU09OLnBhcnNlKHQpfWVsc2UgcmV0dXJuIGF3YWl0KGF3YWl0IGZldGNoKGUpKS5qc29uKCl9cyhYLFxcXCJsb2FkTG9ja0ZpbGVcXFwiKTthc3luYyBmdW5jdGlvbiBRKCl7aWYoVClyZXR1cm4gX19kaXJuYW1lO2xldCBlO3RyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2gocil7ZT1yfWxldCB0PWoucGFyc2UoZSlbMF0uZmlsZU5hbWU7aWYoeSYmIXQuc3RhcnRzV2l0aChcXFwiZmlsZTovL1xcXCIpJiYodD1gZmlsZTovLyR7dH1gKSxIKXtsZXQgcj1hd2FpdCBpbXBvcnQoLyogd2VicGFja0lnbm9yZSAqL1xcXCJub2RlOnBhdGhcXFwiKTtyZXR1cm4oYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tJZ25vcmUgKi9cXFwibm9kZTp1cmxcXFwiKSkuZmlsZVVSTFRvUGF0aChyLmRpcm5hbWUodCkpfWxldCBpPXQubGFzdEluZGV4T2YoVyk7aWYoaT09PS0xKXRocm93IG5ldyBFcnJvcihcXFwiQ291bGQgbm90IGV4dHJhY3QgaW5kZXhVUkwgcGF0aCBmcm9tIHB5b2RpZGUgbW9kdWxlIGxvY2F0aW9uXFxcIik7cmV0dXJuIHQuc2xpY2UoMCxpKX1zKFEsXFxcImNhbGN1bGF0ZURpcm5hbWVcXFwiKTtmdW5jdGlvbiBaKGUpe2xldCB0PWUuRlMsaT1lLkZTLmZpbGVzeXN0ZW1zLk1FTUZTLHI9ZS5QQVRILGE9e0RJUl9NT0RFOjE2ODk1LEZJTEVfTU9ERTozMzI3OSxtb3VudDpmdW5jdGlvbihuKXtpZighbi5vcHRzLmZpbGVTeXN0ZW1IYW5kbGUpdGhyb3cgbmV3IEVycm9yKFxcXCJvcHRzLmZpbGVTeXN0ZW1IYW5kbGUgaXMgcmVxdWlyZWRcXFwiKTtyZXR1cm4gaS5tb3VudC5hcHBseShudWxsLGFyZ3VtZW50cyl9LHN5bmNmczphc3luYyhuLG8sYyk9Pnt0cnl7bGV0IGw9YS5nZXRMb2NhbFNldChuKSxkPWF3YWl0IGEuZ2V0UmVtb3RlU2V0KG4pLHU9bz9kOmwsbT1vP2w6ZDthd2FpdCBhLnJlY29uY2lsZShuLHUsbSksYyhudWxsKX1jYXRjaChsKXtjKGwpfX0sZ2V0TG9jYWxTZXQ6bj0+e2xldCBvPU9iamVjdC5jcmVhdGUobnVsbCk7ZnVuY3Rpb24gYyh1KXtyZXR1cm4gdSE9PVxcXCIuXFxcIiYmdSE9PVxcXCIuLlxcXCJ9cyhjLFxcXCJpc1JlYWxEaXJcXFwiKTtmdW5jdGlvbiBsKHUpe3JldHVybiBtPT5yLmpvaW4yKHUsbSl9cyhsLFxcXCJ0b0Fic29sdXRlXFxcIik7bGV0IGQ9dC5yZWFkZGlyKG4ubW91bnRwb2ludCkuZmlsdGVyKGMpLm1hcChsKG4ubW91bnRwb2ludCkpO2Zvcig7ZC5sZW5ndGg7KXtsZXQgdT1kLnBvcCgpLG09dC5zdGF0KHUpO3QuaXNEaXIobS5tb2RlKSYmZC5wdXNoLmFwcGx5KGQsdC5yZWFkZGlyKHUpLmZpbHRlcihjKS5tYXAobCh1KSkpLG9bdV09e3RpbWVzdGFtcDptLm10aW1lLG1vZGU6bS5tb2RlfX1yZXR1cm57dHlwZTpcXFwibG9jYWxcXFwiLGVudHJpZXM6b319LGdldFJlbW90ZVNldDphc3luYyBuPT57bGV0IG89T2JqZWN0LmNyZWF0ZShudWxsKSxjPWF3YWl0IEVlKG4ub3B0cy5maWxlU3lzdGVtSGFuZGxlKTtmb3IobGV0W2wsZF1vZiBjKWwhPT1cXFwiLlxcXCImJihvW3Iuam9pbjIobi5tb3VudHBvaW50LGwpXT17dGltZXN0YW1wOmQua2luZD09PVxcXCJmaWxlXFxcIj8oYXdhaXQgZC5nZXRGaWxlKCkpLmxhc3RNb2RpZmllZERhdGU6bmV3IERhdGUsbW9kZTpkLmtpbmQ9PT1cXFwiZmlsZVxcXCI/YS5GSUxFX01PREU6YS5ESVJfTU9ERX0pO3JldHVybnt0eXBlOlxcXCJyZW1vdGVcXFwiLGVudHJpZXM6byxoYW5kbGVzOmN9fSxsb2FkTG9jYWxFbnRyeTpuPT57bGV0IGM9dC5sb29rdXBQYXRoKG4pLm5vZGUsbD10LnN0YXQobik7aWYodC5pc0RpcihsLm1vZGUpKXJldHVybnt0aW1lc3RhbXA6bC5tdGltZSxtb2RlOmwubW9kZX07aWYodC5pc0ZpbGUobC5tb2RlKSlyZXR1cm4gYy5jb250ZW50cz1pLmdldEZpbGVEYXRhQXNUeXBlZEFycmF5KGMpLHt0aW1lc3RhbXA6bC5tdGltZSxtb2RlOmwubW9kZSxjb250ZW50czpjLmNvbnRlbnRzfTt0aHJvdyBuZXcgRXJyb3IoXFxcIm5vZGUgdHlwZSBub3Qgc3VwcG9ydGVkXFxcIil9LHN0b3JlTG9jYWxFbnRyeToobixvKT0+e2lmKHQuaXNEaXIoby5tb2RlKSl0Lm1rZGlyVHJlZShuLG8ubW9kZSk7ZWxzZSBpZih0LmlzRmlsZShvLm1vZGUpKXQud3JpdGVGaWxlKG4sby5jb250ZW50cyx7Y2FuT3duOiEwfSk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXFxcIm5vZGUgdHlwZSBub3Qgc3VwcG9ydGVkXFxcIik7dC5jaG1vZChuLG8ubW9kZSksdC51dGltZShuLG8udGltZXN0YW1wLG8udGltZXN0YW1wKX0scmVtb3ZlTG9jYWxFbnRyeTpuPT57dmFyIG89dC5zdGF0KG4pO3QuaXNEaXIoby5tb2RlKT90LnJtZGlyKG4pOnQuaXNGaWxlKG8ubW9kZSkmJnQudW5saW5rKG4pfSxsb2FkUmVtb3RlRW50cnk6YXN5bmMgbj0+e2lmKG4ua2luZD09PVxcXCJmaWxlXFxcIil7bGV0IG89YXdhaXQgbi5nZXRGaWxlKCk7cmV0dXJue2NvbnRlbnRzOm5ldyBVaW50OEFycmF5KGF3YWl0IG8uYXJyYXlCdWZmZXIoKSksbW9kZTphLkZJTEVfTU9ERSx0aW1lc3RhbXA6by5sYXN0TW9kaWZpZWREYXRlfX1lbHNle2lmKG4ua2luZD09PVxcXCJkaXJlY3RvcnlcXFwiKXJldHVybnttb2RlOmEuRElSX01PREUsdGltZXN0YW1wOm5ldyBEYXRlfTt0aHJvdyBuZXcgRXJyb3IoXFxcInVua25vd24ga2luZDogXFxcIituLmtpbmQpfX0sc3RvcmVSZW1vdGVFbnRyeTphc3luYyhuLG8sYyk9PntsZXQgbD1uLmdldChyLmRpcm5hbWUobykpLGQ9dC5pc0ZpbGUoYy5tb2RlKT9hd2FpdCBsLmdldEZpbGVIYW5kbGUoci5iYXNlbmFtZShvKSx7Y3JlYXRlOiEwfSk6YXdhaXQgbC5nZXREaXJlY3RvcnlIYW5kbGUoci5iYXNlbmFtZShvKSx7Y3JlYXRlOiEwfSk7aWYoZC5raW5kPT09XFxcImZpbGVcXFwiKXtsZXQgdT1hd2FpdCBkLmNyZWF0ZVdyaXRhYmxlKCk7YXdhaXQgdS53cml0ZShjLmNvbnRlbnRzKSxhd2FpdCB1LmNsb3NlKCl9bi5zZXQobyxkKX0scmVtb3ZlUmVtb3RlRW50cnk6YXN5bmMobixvKT0+e2F3YWl0IG4uZ2V0KHIuZGlybmFtZShvKSkucmVtb3ZlRW50cnkoci5iYXNlbmFtZShvKSksbi5kZWxldGUobyl9LHJlY29uY2lsZTphc3luYyhuLG8sYyk9PntsZXQgbD0wLGQ9W107T2JqZWN0LmtleXMoby5lbnRyaWVzKS5mb3JFYWNoKGZ1bmN0aW9uKGYpe2xldCB2PW8uZW50cmllc1tmXSxOPWMuZW50cmllc1tmXTsoIU58fHQuaXNGaWxlKHYubW9kZSkmJnYudGltZXN0YW1wLmdldFRpbWUoKT5OLnRpbWVzdGFtcC5nZXRUaW1lKCkpJiYoZC5wdXNoKGYpLGwrKyl9KSxkLnNvcnQoKTtsZXQgdT1bXTtpZihPYmplY3Qua2V5cyhjLmVudHJpZXMpLmZvckVhY2goZnVuY3Rpb24oZil7by5lbnRyaWVzW2ZdfHwodS5wdXNoKGYpLGwrKyl9KSx1LnNvcnQoKS5yZXZlcnNlKCksIWwpcmV0dXJuO2xldCBtPW8udHlwZT09PVxcXCJyZW1vdGVcXFwiP28uaGFuZGxlczpjLmhhbmRsZXM7Zm9yKGxldCBmIG9mIGQpe2xldCB2PXIubm9ybWFsaXplKGYucmVwbGFjZShuLm1vdW50cG9pbnQsXFxcIi9cXFwiKSkuc3Vic3RyaW5nKDEpO2lmKGMudHlwZT09PVxcXCJsb2NhbFxcXCIpe2xldCBOPW0uZ2V0KHYpLHRlPWF3YWl0IGEubG9hZFJlbW90ZUVudHJ5KE4pO2Euc3RvcmVMb2NhbEVudHJ5KGYsdGUpfWVsc2V7bGV0IE49YS5sb2FkTG9jYWxFbnRyeShmKTthd2FpdCBhLnN0b3JlUmVtb3RlRW50cnkobSx2LE4pfX1mb3IobGV0IGYgb2YgdSlpZihjLnR5cGU9PT1cXFwibG9jYWxcXFwiKWEucmVtb3ZlTG9jYWxFbnRyeShmKTtlbHNle2xldCB2PXIubm9ybWFsaXplKGYucmVwbGFjZShuLm1vdW50cG9pbnQsXFxcIi9cXFwiKSkuc3Vic3RyaW5nKDEpO2F3YWl0IGEucmVtb3ZlUmVtb3RlRW50cnkobSx2KX19fTtlLkZTLmZpbGVzeXN0ZW1zLk5BVElWRUZTX0FTWU5DPWF9cyhaLFxcXCJpbml0aWFsaXplTmF0aXZlRlNcXFwiKTt2YXIgRWU9cyhhc3luYyBlPT57bGV0IHQ9W107YXN5bmMgZnVuY3Rpb24gaShhKXtmb3IgYXdhaXQobGV0IG4gb2YgYS52YWx1ZXMoKSl0LnB1c2gobiksbi5raW5kPT09XFxcImRpcmVjdG9yeVxcXCImJmF3YWl0IGkobil9cyhpLFxcXCJjb2xsZWN0XFxcIiksYXdhaXQgaShlKTtsZXQgcj1uZXcgTWFwO3Iuc2V0KFxcXCIuXFxcIixlKTtmb3IobGV0IGEgb2YgdCl7bGV0IG49KGF3YWl0IGUucmVzb2x2ZShhKSkuam9pbihcXFwiL1xcXCIpO3Iuc2V0KG4sYSl9cmV0dXJuIHJ9LFxcXCJnZXRGc0hhbmRsZXNcXFwiKTtmdW5jdGlvbiBlZShlKXtsZXQgdD17bm9JbWFnZURlY29kaW5nOiEwLG5vQXVkaW9EZWNvZGluZzohMCxub1dhc21EZWNvZGluZzohMSxwcmVSdW46RmUoZSkscXVpdChpLHIpe3Rocm93IHQuZXhpdGVkPXtzdGF0dXM6aSx0b1Rocm93OnJ9LHJ9LHByaW50OmUuc3Rkb3V0LHByaW50RXJyOmUuc3RkZXJyLGFyZ3VtZW50czplLmFyZ3MsQVBJOntjb25maWc6ZX0sbG9jYXRlRmlsZTppPT5lLmluZGV4VVJMK2ksaW5zdGFudGlhdGVXYXNtOlJlKGUuaW5kZXhVUkwpfTtyZXR1cm4gdH1zKGVlLFxcXCJjcmVhdGVTZXR0aW5nc1xcXCIpO2Z1bmN0aW9uIFNlKGUpe3JldHVybiBmdW5jdGlvbih0KXtsZXQgaT1cXFwiL1xcXCI7dHJ5e3QuRlMubWtkaXJUcmVlKGUpfWNhdGNoKHIpe2NvbnNvbGUuZXJyb3IoYEVycm9yIG9jY3VycmVkIHdoaWxlIG1ha2luZyBhIGhvbWUgZGlyZWN0b3J5ICcke2V9JzpgKSxjb25zb2xlLmVycm9yKHIpLGNvbnNvbGUuZXJyb3IoYFVzaW5nICcke2l9JyBmb3IgYSBob21lIGRpcmVjdG9yeSBpbnN0ZWFkYCksZT1pfXQuRlMuY2hkaXIoZSl9fXMoU2UsXFxcImNyZWF0ZUhvbWVEaXJlY3RvcnlcXFwiKTtmdW5jdGlvbiB3ZShlKXtyZXR1cm4gZnVuY3Rpb24odCl7T2JqZWN0LmFzc2lnbih0LkVOVixlKX19cyh3ZSxcXFwic2V0RW52aXJvbm1lbnRcXFwiKTtmdW5jdGlvbiBOZShlKXtyZXR1cm4gdD0+e2ZvcihsZXQgaSBvZiBlKXQuRlMubWtkaXJUcmVlKGkpLHQuRlMubW91bnQodC5GUy5maWxlc3lzdGVtcy5OT0RFRlMse3Jvb3Q6aX0saSl9fXMoTmUsXFxcIm1vdW50TG9jYWxEaXJlY3Rvcmllc1xcXCIpO2Z1bmN0aW9uIF9lKGUpe2xldCB0PUcoZSk7cmV0dXJuIGk9PntsZXQgcj1pLl9weV92ZXJzaW9uX21ham9yKCksYT1pLl9weV92ZXJzaW9uX21pbm9yKCk7aS5GUy5ta2RpclRyZWUoXFxcIi9saWJcXFwiKSxpLkZTLm1rZGlyVHJlZShgL2xpYi9weXRob24ke3J9LiR7YX0vc2l0ZS1wYWNrYWdlc2ApLGkuYWRkUnVuRGVwZW5kZW5jeShcXFwiaW5zdGFsbC1zdGRsaWJcXFwiKSx0LnRoZW4obj0+e2kuRlMud3JpdGVGaWxlKGAvbGliL3B5dGhvbiR7cn0ke2F9LnppcGAsbil9KS5jYXRjaChuPT57Y29uc29sZS5lcnJvcihcXFwiRXJyb3Igb2NjdXJyZWQgd2hpbGUgaW5zdGFsbGluZyB0aGUgc3RhbmRhcmQgbGlicmFyeTpcXFwiKSxjb25zb2xlLmVycm9yKG4pfSkuZmluYWxseSgoKT0+e2kucmVtb3ZlUnVuRGVwZW5kZW5jeShcXFwiaW5zdGFsbC1zdGRsaWJcXFwiKX0pfX1zKF9lLFxcXCJpbnN0YWxsU3RkbGliXFxcIik7ZnVuY3Rpb24gRmUoZSl7bGV0IHQ7cmV0dXJuIGUuc3RkTGliVVJMIT1udWxsP3Q9ZS5zdGRMaWJVUkw6dD1lLmluZGV4VVJMK1xcXCJweXRob25fc3RkbGliLnppcFxcXCIsW19lKHQpLFNlKGUuZW52LkhPTUUpLHdlKGUuZW52KSxOZShlLl9ub2RlX21vdW50cyksWl19cyhGZSxcXFwiZ2V0RmlsZVN5c3RlbUluaXRpYWxpemF0aW9uRnVuY3NcXFwiKTtmdW5jdGlvbiBSZShlKXtpZih0eXBlb2YgV2FzbU9mZnNldENvbnZlcnRlcjxcXFwidVxcXCIpcmV0dXJuO2xldHtiaW5hcnk6dCxyZXNwb25zZTppfT1QKGUrXFxcInB5b2RpZGUuYXNtLndhc21cXFwiKTtyZXR1cm4gZnVuY3Rpb24ocixhKXtyZXR1cm4gYXN5bmMgZnVuY3Rpb24oKXt0cnl7bGV0IG47aT9uPWF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKGkscik6bj1hd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShhd2FpdCB0LHIpO2xldHtpbnN0YW5jZTpvLG1vZHVsZTpjfT1uO2EobyxjKX1jYXRjaChuKXtjb25zb2xlLndhcm4oXFxcIndhc20gaW5zdGFudGlhdGlvbiBmYWlsZWQhXFxcIiksY29uc29sZS53YXJuKG4pfX0oKSx7fX19cyhSZSxcXFwiZ2V0SW5zdGFudGlhdGVXYXNtRnVuY1xcXCIpO3ZhciB4PVxcXCIwLjI3LjJcXFwiO2FzeW5jIGZ1bmN0aW9uIEIoZT17fSl7dmFyIHUsbTthd2FpdCBDKCk7bGV0IHQ9ZS5pbmRleFVSTHx8YXdhaXQgUSgpO3Q9RCh0KSx0LmVuZHNXaXRoKFxcXCIvXFxcIil8fCh0Kz1cXFwiL1xcXCIpLGUuaW5kZXhVUkw9dDtsZXQgaT17ZnVsbFN0ZExpYjohMSxqc2dsb2JhbHM6Z2xvYmFsVGhpcyxzdGRpbjpnbG9iYWxUaGlzLnByb21wdD9nbG9iYWxUaGlzLnByb21wdDp2b2lkIDAsbG9ja0ZpbGVVUkw6dCtcXFwicHlvZGlkZS1sb2NrLmpzb25cXFwiLGFyZ3M6W10sX25vZGVfbW91bnRzOltdLGVudjp7fSxwYWNrYWdlQ2FjaGVEaXI6dCxwYWNrYWdlczpbXSxlbmFibGVSdW5VbnRpbENvbXBsZXRlOiExLGNoZWNrQVBJVmVyc2lvbjohMCxCVUlMRF9JRDpcXFwiZjg4ZGM0YWJiNDBlYzhlNzgwYzk0YTVmNzBiY2VmNDVlYzllYjNjMWFlZTFjOTlkYTUyN2ZlYmZlZjFjNmYzZlxcXCJ9LHI9T2JqZWN0LmFzc2lnbihpLGUpOyh1PXIuZW52KS5IT01FPz8odS5IT01FPVxcXCIvaG9tZS9weW9kaWRlXFxcIiksKG09ci5lbnYpLlBZVEhPTklOU1BFQ1Q/PyhtLlBZVEhPTklOU1BFQ1Q9XFxcIjFcXFwiKTtsZXQgYT1lZShyKSxuPWEuQVBJO2lmKG4ubG9ja0ZpbGVQcm9taXNlPVgoci5sb2NrRmlsZVVSTCksdHlwZW9mIF9jcmVhdGVQeW9kaWRlTW9kdWxlIT1cXFwiZnVuY3Rpb25cXFwiKXtsZXQgZj1gJHtyLmluZGV4VVJMfXB5b2RpZGUuYXNtLmpzYDthd2FpdCBPKGYpfWxldCBvO2lmKGUuX2xvYWRTbmFwc2hvdCl7bGV0IGY9YXdhaXQgZS5fbG9hZFNuYXBzaG90O0FycmF5QnVmZmVyLmlzVmlldyhmKT9vPWY6bz1uZXcgVWludDhBcnJheShmKSxhLm5vSW5pdGlhbFJ1bj0hMCxhLklOSVRJQUxfTUVNT1JZPW8ubGVuZ3RofWxldCBjPWF3YWl0IF9jcmVhdGVQeW9kaWRlTW9kdWxlKGEpO2lmKGEuZXhpdGVkKXRocm93IGEuZXhpdGVkLnRvVGhyb3c7aWYoZS5weXByb3h5VG9TdHJpbmdSZXByJiZuLnNldFB5UHJveHlUb1N0cmluZ01ldGhvZCghMCksbi52ZXJzaW9uIT09eCYmci5jaGVja0FQSVZlcnNpb24pdGhyb3cgbmV3IEVycm9yKGBQeW9kaWRlIHZlcnNpb24gZG9lcyBub3QgbWF0Y2g6ICcke3h9JyA8PT0+ICcke24udmVyc2lvbn0nLiBJZiB5b3UgdXBkYXRlZCB0aGUgUHlvZGlkZSB2ZXJzaW9uLCBtYWtlIHN1cmUgeW91IGFsc28gdXBkYXRlZCB0aGUgJ2luZGV4VVJMJyBwYXJhbWV0ZXIgcGFzc2VkIHRvIGxvYWRQeW9kaWRlLmApO2MubG9jYXRlRmlsZT1mPT57dGhyb3cgbmV3IEVycm9yKFxcXCJEaWRuJ3QgZXhwZWN0IHRvIGxvYWQgYW55IG1vcmUgZmlsZV9wYWNrYWdlciBmaWxlcyFcXFwiKX07bGV0IGw7byYmKGw9bi5yZXN0b3JlU25hcHNob3QobykpO2xldCBkPW4uZmluYWxpemVCb290c3RyYXAobCxlLl9zbmFwc2hvdERlc2VyaWFsaXplcik7cmV0dXJuIG4uc3lzLnBhdGguaW5zZXJ0KDAsbi5jb25maWcuZW52LkhPTUUpLGQudmVyc2lvbi5pbmNsdWRlcyhcXFwiZGV2XFxcIil8fG4uc2V0Q2RuVXJsKGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvcHlvZGlkZS92JHtkLnZlcnNpb259L2Z1bGwvYCksbi5fcHlvZGlkZS5zZXRfZXhjZXB0aG9vaygpLGF3YWl0IG4ucGFja2FnZUluZGV4UmVhZHksbi5pbml0aWFsaXplU3RyZWFtcyhyLnN0ZGluLHIuc3Rkb3V0LHIuc3RkZXJyKSxkfXMoQixcXFwibG9hZFB5b2RpZGVcXFwiKTsoe30pO3JldHVybiBjZShJZSk7fSkoKTtcXG50cnl7T2JqZWN0LmFzc2lnbihleHBvcnRzLGxvYWRQeW9kaWRlKX1jYXRjaChfKXt9XFxuKHt9KTtcXG5tb2R1bGUuZXhwb3J0cyA9IHtsb2FkUHlvZGlkZTogbG9hZFB5b2RpZGUubG9hZFB5b2RpZGUsIHZlcnNpb246IGxvYWRQeW9kaWRlLnZlcnNpb259O1xcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXB5b2RpZGUuanMubWFwXFxuXCIpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/pyodide/pyodide.js\n");

/***/ }),

/***/ "./node_modules/rerobots/lib/index.js":
/*!********************************************!*\
  !*** ./node_modules/rerobots/lib/index.js ***!
  \********************************************/
/***/ (function(module) {

eval("!function(e,t){ true?module.exports=t():0}(this,(()=>(()=>{\"use strict\";var e={746:(e,t)=>{Object.defineProperty(t,\"__esModule\",{value:!0}),t.instanceKeepAlive=function e(t,o){fetch(\"https://api.rerobots.net/instance/\".concat(t,\"/ka\"),{method:\"POST\",headers:{Authorization:\"Bearer \"+o,\"Content-Type\":\"application/json\"}}).then((function(n){n.ok&&setTimeout((function(){e(t,o)}),45e3)})).catch((function(e){console.log(e)}))}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}var n={};return(()=>{var e=n;Object.defineProperty(e,\"__esModule\",{value:!0}),e.instanceKeepAlive=void 0;var t=o(746);Object.defineProperty(e,\"instanceKeepAlive\",{enumerable:!0,get:function(){return t.instanceKeepAlive}})})(),n})()));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcmVyb2JvdHMvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBLGVBQWUsS0FBaUQsb0JBQW9CLENBQStHLENBQUMsaUJBQWlCLGFBQWEsT0FBTyxZQUFZLHNDQUFzQyxTQUFTLHNDQUFzQyw0REFBNEQsdUJBQXVCLDZEQUE2RCxvQkFBb0IsNkJBQTZCLE9BQU8sUUFBUSxzQkFBc0IsZUFBZSxLQUFLLE1BQU0sY0FBYyxXQUFXLCtCQUErQixZQUFZLFlBQVkscUNBQXFDLFNBQVMsWUFBWSxRQUFRLHNDQUFzQyxTQUFTLDZCQUE2QixhQUFhLDZDQUE2Qyw2QkFBNkIsNEJBQTRCLEVBQUUsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvcmVyb2JvdHMvbGliL2luZGV4LmpzPzJjMTAiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5yZXJvYm90cz10KCk6ZS5yZXJvYm90cz10KCl9KHRoaXMsKCgpPT4oKCk9PntcInVzZSBzdHJpY3RcIjt2YXIgZT17NzQ2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5pbnN0YW5jZUtlZXBBbGl2ZT1mdW5jdGlvbiBlKHQsbyl7ZmV0Y2goXCJodHRwczovL2FwaS5yZXJvYm90cy5uZXQvaW5zdGFuY2UvXCIuY29uY2F0KHQsXCIva2FcIikse21ldGhvZDpcIlBPU1RcIixoZWFkZXJzOntBdXRob3JpemF0aW9uOlwiQmVhcmVyIFwiK28sXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn19KS50aGVuKChmdW5jdGlvbihuKXtuLm9rJiZzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UodCxvKX0pLDQ1ZTMpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtjb25zb2xlLmxvZyhlKX0pKX19fSx0PXt9O2Z1bmN0aW9uIG8obil7dmFyIHI9dFtuXTtpZih2b2lkIDAhPT1yKXJldHVybiByLmV4cG9ydHM7dmFyIGk9dFtuXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbbl0oaSxpLmV4cG9ydHMsbyksaS5leHBvcnRzfXZhciBuPXt9O3JldHVybigoKT0+e3ZhciBlPW47T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5pbnN0YW5jZUtlZXBBbGl2ZT12b2lkIDA7dmFyIHQ9byg3NDYpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiaW5zdGFuY2VLZWVwQWxpdmVcIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5pbnN0YW5jZUtlZXBBbGl2ZX19KX0pKCksbn0pKCkpKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/rerobots/lib/index.js\n");

/***/ }),

/***/ "./node_modules/@xterm/xterm/css/xterm.css":
/*!*************************************************!*\
  !*** ./node_modules/@xterm/xterm/css/xterm.css ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _css_loader_dist_cjs_js_xterm_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../css-loader/dist/cjs.js!./xterm.css */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/@xterm/xterm/css/xterm.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_css_loader_dist_cjs_js_xterm_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_css_loader_dist_cjs_js_xterm_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _css_loader_dist_cjs_js_xterm_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _css_loader_dist_cjs_js_xterm_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL2Nzcy94dGVybS5jc3MiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBd0Y7QUFDeEYsTUFBOEU7QUFDOUUsTUFBcUY7QUFDckYsTUFBd0c7QUFDeEcsTUFBaUc7QUFDakcsTUFBaUc7QUFDakcsTUFBNEY7QUFDNUY7QUFDQTs7QUFFQTs7QUFFQSw0QkFBNEIsd0ZBQW1CO0FBQy9DLHdCQUF3QixxR0FBYTs7QUFFckMsdUJBQXVCLDBGQUFhO0FBQ3BDO0FBQ0EsaUJBQWlCLGtGQUFNO0FBQ3ZCLDZCQUE2Qix5RkFBa0I7O0FBRS9DLGFBQWEsNkZBQUcsQ0FBQyx5RUFBTzs7OztBQUlzQztBQUM5RCxPQUFPLGlFQUFlLHlFQUFPLElBQUkseUVBQU8sVUFBVSx5RUFBTyxtQkFBbUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL2Nzcy94dGVybS5jc3M/NWMzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uLy4uL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRGbiBmcm9tIFwiIS4uLy4uLy4uL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uLy4uL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzXCI7XG4gICAgICBpbXBvcnQgc3R5bGVUYWdUcmFuc2Zvcm1GbiBmcm9tIFwiIS4uLy4uLy4uL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi94dGVybS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4veHRlcm0uY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@xterm/xterm/css/xterm.css\n");

/***/ }),

/***/ "./src/main.css":
/*!**********************!*\
  !*** ./src/main.css ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_main_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./main.css */ \"./node_modules/css-loader/dist/cjs.js!./src/main.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_main_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_main_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_main_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_main_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi5jc3MiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBK0Y7QUFDL0YsTUFBcUY7QUFDckYsTUFBNEY7QUFDNUYsTUFBK0c7QUFDL0csTUFBd0c7QUFDeEcsTUFBd0c7QUFDeEcsTUFBa0c7QUFDbEc7QUFDQTs7QUFFQTs7QUFFQSw0QkFBNEIscUdBQW1CO0FBQy9DLHdCQUF3QixrSEFBYTs7QUFFckMsdUJBQXVCLHVHQUFhO0FBQ3BDO0FBQ0EsaUJBQWlCLCtGQUFNO0FBQ3ZCLDZCQUE2QixzR0FBa0I7O0FBRS9DLGFBQWEsMEdBQUcsQ0FBQyxxRkFBTzs7OztBQUk0QztBQUNwRSxPQUFPLGlFQUFlLHFGQUFPLElBQUkscUZBQU8sVUFBVSxxRkFBTyxtQkFBbUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9zcmMvbWFpbi5jc3M/ZGRkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vbWFpbi5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL21haW4uY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main.css\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdCQUF3QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpQkFBaUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0QkFBNEI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw2QkFBNkI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzPzJkYmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzP2IyMTQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBtZW1vID0ge307XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldCkge1xuICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcblxuICAgIC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG4gICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgfVxuICByZXR1cm4gbWVtb1t0YXJnZXRdO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydEJ5U2VsZWN0b3IoaW5zZXJ0LCBzdHlsZSkge1xuICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGluc2VydCk7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgfVxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRCeVNlbGVjdG9yOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/insertBySelector.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanM/ZGU2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/insertStyleElement.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce =  true ? __webpack_require__.nc : 0;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWI7QUFDQTtBQUNBLGNBQWMsS0FBd0MsR0FBRyxzQkFBaUIsR0FBRyxDQUFJO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzLmpzP2RkY2UiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLGlGQUFpRjtBQUNqRjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcz9lNDc5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cbiAgY3NzICs9IG9iai5jc3M7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH1cblxuICAvLyBGb3Igb2xkIElFXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7fSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/styleDomAPI.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qcz8xZGRlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50KSB7XG4gIGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc3R5bGVUYWdUcmFuc2Zvcm07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/styleTagTransform.js\n");

/***/ }),

/***/ "./src/hardshare.ts":
/*!**************************!*\
  !*** ./src/hardshare.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.terminateInstance = exports.attachCameraStream = exports.getInstanceInfo = exports.createMistyProxy = exports.prepareShell = exports.launchInstance = exports.getApiToken = void 0;\nvar rerobots_1 = __webpack_require__(/*! rerobots */ \"./node_modules/rerobots/lib/index.js\");\nfunction checkIfCancelled(cancelFlag, reject) {\n    if (cancelFlag === null || cancelFlag === void 0 ? void 0 : cancelFlag.cancelled) {\n        if (reject) {\n            reject();\n        }\n        else {\n            throw 'cancel';\n        }\n    }\n}\nfunction getApiToken(hardshareO, hardshareId, cancelFlag) {\n    return new Promise(function (resolve, reject) {\n        if (hardshareO === 'test') {\n            resolve(['fake', 'fake64']);\n            return;\n        }\n        var anon_id = localStorage.getItem('rr-api-token-anon-id');\n        var retryCounter = 0;\n        var requestApiToken = function () {\n            var options = {\n                method: 'POST',\n            };\n            if (anon_id) {\n                var anon_nonce = localStorage.getItem('rr-api-token-anon-nonce') || '';\n                var formData = new FormData();\n                formData.append('anon_id', anon_id);\n                formData.append('nonce', anon_nonce);\n                options.body = formData;\n            }\n            checkIfCancelled(cancelFlag, reject);\n            fetch(\"https://rerobots.net/eapi/token/up/sandbox/\".concat(hardshareO, \"/\").concat(hardshareId), options)\n                .then(function (res) {\n                checkIfCancelled(cancelFlag);\n                if (res.ok) {\n                    return res.json();\n                }\n                if (res.status === 403) {\n                    anon_id = null;\n                }\n                throw new Error(res.url);\n            })\n                .then(function (payload) {\n                if (payload.nonce && !anon_id) {\n                    anon_id = payload.u.substring(payload.u.lastIndexOf('_') + 1);\n                    localStorage.setItem('rr-api-token-anon-id', anon_id);\n                    localStorage.setItem('rr-api-token-anon-nonce', payload.nonce);\n                }\n                resolve([payload.tok, payload.tok64]);\n            })\n                .catch(function (err) {\n                if (err === 'cancel') {\n                    reject();\n                    return;\n                }\n                console.log(err);\n                retryCounter++;\n                if (retryCounter > 8) {\n                    reject();\n                    return;\n                }\n                setTimeout(requestApiToken, 1000 * Math.pow(2, retryCounter));\n            });\n        };\n        requestApiToken();\n    });\n}\nexports.getApiToken = getApiToken;\nfunction launchInstance(coderi, cancelFlag) {\n    return new Promise(function (resolve, reject) {\n        if (coderi.hardshareO === 'test') {\n            coderi.instance || (coderi.instance = {});\n            Object.assign(coderi.instance, {\n                id: '1926b858-0d00-4b84-b7ca-5c56be880525', // fake\n                status: 'INIT',\n            });\n            resolve(coderi);\n            return;\n        }\n        var retryCounter = 0;\n        var requestSandboxInfo = function () {\n            checkIfCancelled(cancelFlag, reject);\n            fetch(\"https://rerobots.net/eapi/hardshare/\".concat(coderi.hardshareO, \"/\").concat(coderi.hardshareId), {\n                method: 'GET',\n            })\n                .then(function (res) {\n                checkIfCancelled(cancelFlag);\n                if (res.ok) {\n                    return res.json();\n                }\n                throw new Error(res.url);\n            })\n                .then(function (payload) {\n                var newInstanceParams = {\n                    allow_noop: true,\n                    wds: payload.wds,\n                    expire_d: payload.expire_d.anon,\n                    keepalive: true,\n                };\n                if (coderi.repoUrl) {\n                    newInstanceParams.repo = {\n                        url: coderi.repoUrl,\n                    };\n                    if (coderi.repoScript) {\n                        newInstanceParams.repo.path = coderi.repoScript;\n                    }\n                }\n                coderi.instance || (coderi.instance = {});\n                Object.assign(coderi.instance, {\n                    destpath: payload.destpath,\n                    command: payload.btn_command || 'echo \"no run command set\"',\n                });\n                checkIfCancelled(cancelFlag);\n                return fetch('https://api.rerobots.net/new', {\n                    method: 'POST',\n                    headers: {\n                        Authorization: \"Bearer \".concat(coderi.instance.token),\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify(newInstanceParams),\n                });\n            })\n                .then(function (res) {\n                checkIfCancelled(cancelFlag);\n                if (res.status === 400) {\n                    reject();\n                    return;\n                }\n                if (res.ok) {\n                    return res.json();\n                }\n                throw new Error(res.url);\n            })\n                .then(function (payload) {\n                if (!payload) {\n                    return;\n                }\n                coderi.instance || (coderi.instance = {});\n                (0, rerobots_1.instanceKeepAlive)(payload.id, coderi.instance.token);\n                coderi.instance.id = payload.id;\n                coderi.instance.status = 'INIT';\n                resolve(coderi);\n            })\n                .catch(function (err) {\n                if (err === 'cancel') {\n                    reject();\n                    return;\n                }\n                console.log(err);\n                retryCounter++;\n                if (retryCounter > 8) {\n                    reject();\n                    return;\n                }\n                setTimeout(requestSandboxInfo, 1000 * Math.pow(2, retryCounter));\n            });\n        };\n        requestSandboxInfo();\n    });\n}\nexports.launchInstance = launchInstance;\nfunction prepareShell(coderi, cancelFlag) {\n    return new Promise(function (resolve, reject) {\n        var _a;\n        if (coderi.hardshareO === 'test') {\n            coderi.instance || (coderi.instance = {});\n            (_a = coderi.instance).addons || (_a.addons = {});\n            coderi.instance.addons.cmdsh = true;\n            resolve(coderi);\n            return;\n        }\n        var retryCounter = 0;\n        var timer = setInterval(function () {\n            var _a, _b;\n            checkIfCancelled(cancelFlag, function () {\n                clearInterval(timer);\n                reject();\n            });\n            if (!((_a = coderi.instance) === null || _a === void 0 ? void 0 : _a.id) || !((_b = coderi.instance) === null || _b === void 0 ? void 0 : _b.token)) {\n                clearInterval(timer);\n                var err = new Error('prepareShell called without instance ID/token');\n                console.error(err);\n                reject(err);\n                return;\n            }\n            fetch(\"https://api.rerobots.net/addon/cmdsh/\".concat(coderi.instance.id), {\n                headers: {\n                    Authorization: \"Bearer \".concat(coderi.instance.token),\n                },\n            })\n                .then(function (res) {\n                checkIfCancelled(cancelFlag);\n                if (res.ok) {\n                    return res.json();\n                }\n                else if (res.status === 404) {\n                    return { status: 'notfound' };\n                }\n                throw new Error(res.url);\n            })\n                .then(function (data) {\n                var _a, _b;\n                var _c;\n                if (data.status === 'notfound') {\n                    checkIfCancelled(cancelFlag);\n                    if (!((_a = coderi.instance) === null || _a === void 0 ? void 0 : _a.id) || !((_b = coderi.instance) === null || _b === void 0 ? void 0 : _b.token)) {\n                        clearInterval(timer);\n                        var err = new Error('prepareShell called without instance ID/token');\n                        console.error(err);\n                        reject(err);\n                        return;\n                    }\n                    fetch('https://api.rerobots.net/addon/cmdsh/' +\n                        coderi.instance.id, {\n                        method: 'POST',\n                        headers: {\n                            Authorization: \"Bearer \".concat(coderi.instance.token),\n                        },\n                    });\n                    retryCounter++;\n                    if (retryCounter > 30) {\n                        clearInterval(timer);\n                        console.log('timeout: command shell did not start');\n                        reject();\n                    }\n                }\n                else if (data.status === 'active') {\n                    clearInterval(timer);\n                    coderi.instance || (coderi.instance = {});\n                    (_c = coderi.instance).addons || (_c.addons = {});\n                    coderi.instance.addons.cmdsh = true;\n                    resolve(coderi);\n                }\n                else {\n                    retryCounter++;\n                    if (retryCounter > 30) {\n                        clearInterval(timer);\n                        console.log('timeout: command shell did not become active');\n                        reject();\n                    }\n                }\n            })\n                .catch(function (err) {\n                if (err === 'cancel') {\n                    clearInterval(timer);\n                    reject();\n                    return;\n                }\n                console.log(err);\n            });\n        }, 1000);\n    });\n}\nexports.prepareShell = prepareShell;\nfunction createMistyProxy(coderi, cancelFlag) {\n    return new Promise(function (resolve, reject) {\n        var _a;\n        if (coderi.hardshareO === 'test') {\n            coderi.instance || (coderi.instance = {});\n            (_a = coderi.instance).addons || (_a.addons = {});\n            coderi.instance.addons.mistyproxy = 'http://localhost/mistyproxy';\n            resolve(coderi);\n            return;\n        }\n        var retryCounter = 0;\n        var timer = setInterval(function () {\n            var _a, _b;\n            checkIfCancelled(cancelFlag, function () {\n                clearInterval(timer);\n                reject();\n            });\n            if (!((_a = coderi.instance) === null || _a === void 0 ? void 0 : _a.id) || !((_b = coderi.instance) === null || _b === void 0 ? void 0 : _b.token)) {\n                clearInterval(timer);\n                var err = new Error('prepareShell called without instance ID/token');\n                console.error(err);\n                reject(err);\n                return;\n            }\n            fetch('https://api.rerobots.net/addon/mistyproxy/' +\n                coderi.instance.id, {\n                headers: {\n                    Authorization: \"Bearer \".concat(coderi.instance.token),\n                },\n            })\n                .then(function (res) {\n                checkIfCancelled(cancelFlag);\n                if (res.ok) {\n                    return res.json();\n                }\n                else if (res.status === 404) {\n                    return { status: 'notfound' };\n                }\n                throw new Error(res.url);\n            })\n                .then(function (data) {\n                var _a, _b;\n                var _c;\n                if (data.status === 'notfound') {\n                    checkIfCancelled(cancelFlag);\n                    if (!((_a = coderi.instance) === null || _a === void 0 ? void 0 : _a.id) || !((_b = coderi.instance) === null || _b === void 0 ? void 0 : _b.token)) {\n                        clearInterval(timer);\n                        var err = new Error('prepareShell called without instance ID/token');\n                        console.error(err);\n                        reject(err);\n                        return;\n                    }\n                    fetch('https://api.rerobots.net/addon/mistyproxy/' +\n                        coderi.instance.id, {\n                        method: 'POST',\n                        headers: {\n                            Authorization: \"Bearer \".concat(coderi.instance.token),\n                        },\n                    });\n                    retryCounter++;\n                    if (retryCounter > 30) {\n                        clearInterval(timer);\n                        console.log('timeout: mistyproxy did not start');\n                        reject();\n                    }\n                }\n                else if (data.status === 'active') {\n                    clearInterval(timer);\n                    coderi.instance || (coderi.instance = {});\n                    (_c = coderi.instance).addons || (_c.addons = {});\n                    coderi.instance.addons.mistyproxy = data.url[1];\n                    resolve(coderi);\n                }\n                else {\n                    retryCounter++;\n                    if (retryCounter > 30) {\n                        clearInterval(timer);\n                        console.log('timeout: mistyproxy not active');\n                        reject();\n                    }\n                }\n            })\n                .catch(function (err) {\n                if (err === 'cancel') {\n                    clearInterval(timer);\n                    reject();\n                    return;\n                }\n                console.log(err);\n            });\n        }, 1000);\n    });\n}\nexports.createMistyProxy = createMistyProxy;\nfunction getInstanceInfo(coderi, cancelFlag) {\n    return new Promise(function (resolve, reject) {\n        var _a, _b;\n        if (coderi.hardshareO === 'test') {\n            resolve({\n                id: '1926b858-0d00-4b84-b7ca-5c56be880525', // fake\n                status: 'READY',\n                expiration: Date.now() + 300e3, // 5 minutes in future\n                token: 'fake',\n                token64: 'fakeb64',\n            });\n            return;\n        }\n        if (!((_a = coderi.instance) === null || _a === void 0 ? void 0 : _a.id) || !((_b = coderi.instance) === null || _b === void 0 ? void 0 : _b.token)) {\n            var err = new Error('getInstanceInfo called without instance ID/token');\n            console.error(err);\n            reject(err);\n            return;\n        }\n        var instanceId = coderi.instance.id;\n        var token = coderi.instance.token;\n        var retryCounter = 0;\n        var requestInstanceInfo = function () {\n            fetch(\"https://api.rerobots.net/instance/\".concat(instanceId), {\n                headers: {\n                    Authorization: \"Bearer \".concat(token),\n                },\n            })\n                .then(function (res) {\n                checkIfCancelled(cancelFlag);\n                if (res.ok) {\n                    return res.json();\n                }\n                throw new Error(res.url);\n            })\n                .then(function (payload) {\n                resolve({\n                    id: payload.id,\n                    status: payload.status,\n                    expiration: new Date(\"\".concat(payload.expires, \"Z\")).valueOf(),\n                });\n            })\n                .catch(function (err) {\n                if (err === 'cancel') {\n                    reject();\n                    return;\n                }\n                console.log(err);\n                retryCounter++;\n                if (retryCounter > 8) {\n                    reject();\n                    return;\n                }\n                setTimeout(requestInstanceInfo, 1000 * Math.pow(2, retryCounter));\n            });\n        };\n        requestInstanceInfo();\n    });\n}\nexports.getInstanceInfo = getInstanceInfo;\nfunction attachCameraStream(coderi, root, el) {\n    var _a, _b;\n    if (coderi.hardshareO === 'test') {\n        return Promise.resolve();\n    }\n    if (!((_a = coderi.instance) === null || _a === void 0 ? void 0 : _a.id) || !((_b = coderi.instance) === null || _b === void 0 ? void 0 : _b.token)) {\n        throw new Error('attachCameraStream called without instance ID/token');\n    }\n    var instanceId = coderi.instance.id;\n    var token = coderi.instance.token;\n    var token64 = coderi.instance.token64;\n    return fetch(\"https://api.rerobots.net/addon/cam/\".concat(instanceId), {\n        method: 'GET',\n        headers: {\n            Authorization: \"Bearer \".concat(token),\n            'Content-Type': 'application/json',\n        },\n    })\n        .then(function (res) {\n        if (res.ok) {\n            return res.json();\n        }\n        if (res.status === 404) {\n            return;\n        }\n        throw new Error(res.url);\n    })\n        .then(function (payload) {\n        if (payload.status === 'active') {\n            root.appendChild(el);\n            var camWs = new WebSocket(\"wss://api.rerobots.net/addon/cam/\".concat(instanceId, \"/0/feed/\").concat(token64));\n            camWs.addEventListener('message', function (event) {\n                el.src = event.data;\n            });\n        }\n    })\n        .catch(function (err) {\n        console.log(err);\n    });\n}\nexports.attachCameraStream = attachCameraStream;\nfunction terminateInstance(coderi) {\n    var _a, _b;\n    if (coderi.hardshareO === 'test') {\n        return Promise.resolve();\n    }\n    if (!((_a = coderi.instance) === null || _a === void 0 ? void 0 : _a.id) || !((_b = coderi.instance) === null || _b === void 0 ? void 0 : _b.token)) {\n        throw new Error('terminateInstance called without instance ID/token');\n    }\n    var instanceId = coderi.instance.id;\n    var token = coderi.instance.token;\n    return fetch(\"https://api.rerobots.net/terminate/\".concat(instanceId), {\n        method: 'POST',\n        headers: {\n            Authorization: \"Bearer \".concat(token),\n            'Content-Type': 'application/json',\n        },\n    }).then(function (res) {\n        if (!res.ok) {\n            throw new Error(res.url);\n        }\n    });\n}\nexports.terminateInstance = terminateInstance;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaGFyZHNoYXJlLnRzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHlCQUF5QixHQUFHLDBCQUEwQixHQUFHLHVCQUF1QixHQUFHLHdCQUF3QixHQUFHLG9CQUFvQixHQUFHLHNCQUFzQixHQUFHLG1CQUFtQjtBQUNqTCxpQkFBaUIsbUJBQU8sQ0FBQyxzREFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRCw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RDtBQUM1RCxvRUFBb0U7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BELDREQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQ7QUFDNUQsb0VBQW9FO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHlCQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9zcmMvaGFyZHNoYXJlLnRzP2UwMjkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnRlcm1pbmF0ZUluc3RhbmNlID0gZXhwb3J0cy5hdHRhY2hDYW1lcmFTdHJlYW0gPSBleHBvcnRzLmdldEluc3RhbmNlSW5mbyA9IGV4cG9ydHMuY3JlYXRlTWlzdHlQcm94eSA9IGV4cG9ydHMucHJlcGFyZVNoZWxsID0gZXhwb3J0cy5sYXVuY2hJbnN0YW5jZSA9IGV4cG9ydHMuZ2V0QXBpVG9rZW4gPSB2b2lkIDA7XG52YXIgcmVyb2JvdHNfMSA9IHJlcXVpcmUoXCJyZXJvYm90c1wiKTtcbmZ1bmN0aW9uIGNoZWNrSWZDYW5jZWxsZWQoY2FuY2VsRmxhZywgcmVqZWN0KSB7XG4gICAgaWYgKGNhbmNlbEZsYWcgPT09IG51bGwgfHwgY2FuY2VsRmxhZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FuY2VsRmxhZy5jYW5jZWxsZWQpIHtcbiAgICAgICAgaWYgKHJlamVjdCkge1xuICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyAnY2FuY2VsJztcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEFwaVRva2VuKGhhcmRzaGFyZU8sIGhhcmRzaGFyZUlkLCBjYW5jZWxGbGFnKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKGhhcmRzaGFyZU8gPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgcmVzb2x2ZShbJ2Zha2UnLCAnZmFrZTY0J10pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbm9uX2lkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JyLWFwaS10b2tlbi1hbm9uLWlkJyk7XG4gICAgICAgIHZhciByZXRyeUNvdW50ZXIgPSAwO1xuICAgICAgICB2YXIgcmVxdWVzdEFwaVRva2VuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGFub25faWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYW5vbl9ub25jZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyci1hcGktdG9rZW4tYW5vbi1ub25jZScpIHx8ICcnO1xuICAgICAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYW5vbl9pZCcsIGFub25faWQpO1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbm9uY2UnLCBhbm9uX25vbmNlKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmJvZHkgPSBmb3JtRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrSWZDYW5jZWxsZWQoY2FuY2VsRmxhZywgcmVqZWN0KTtcbiAgICAgICAgICAgIGZldGNoKFwiaHR0cHM6Ly9yZXJvYm90cy5uZXQvZWFwaS90b2tlbi91cC9zYW5kYm94L1wiLmNvbmNhdChoYXJkc2hhcmVPLCBcIi9cIikuY29uY2F0KGhhcmRzaGFyZUlkKSwgb3B0aW9ucylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFub25faWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLnVybCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBheWxvYWQubm9uY2UgJiYgIWFub25faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5vbl9pZCA9IHBheWxvYWQudS5zdWJzdHJpbmcocGF5bG9hZC51Lmxhc3RJbmRleE9mKCdfJykgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JyLWFwaS10b2tlbi1hbm9uLWlkJywgYW5vbl9pZCk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyci1hcGktdG9rZW4tYW5vbi1ub25jZScsIHBheWxvYWQubm9uY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKFtwYXlsb2FkLnRvaywgcGF5bG9hZC50b2s2NF0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIgPT09ICdjYW5jZWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgcmV0cnlDb3VudGVyKys7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnRlciA+IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChyZXF1ZXN0QXBpVG9rZW4sIDEwMDAgKiBNYXRoLnBvdygyLCByZXRyeUNvdW50ZXIpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0QXBpVG9rZW4oKTtcbiAgICB9KTtcbn1cbmV4cG9ydHMuZ2V0QXBpVG9rZW4gPSBnZXRBcGlUb2tlbjtcbmZ1bmN0aW9uIGxhdW5jaEluc3RhbmNlKGNvZGVyaSwgY2FuY2VsRmxhZykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChjb2RlcmkuaGFyZHNoYXJlTyA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgICBjb2RlcmkuaW5zdGFuY2UgfHwgKGNvZGVyaS5pbnN0YW5jZSA9IHt9KTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29kZXJpLmluc3RhbmNlLCB7XG4gICAgICAgICAgICAgICAgaWQ6ICcxOTI2Yjg1OC0wZDAwLTRiODQtYjdjYS01YzU2YmU4ODA1MjUnLCAvLyBmYWtlXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnSU5JVCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc29sdmUoY29kZXJpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmV0cnlDb3VudGVyID0gMDtcbiAgICAgICAgdmFyIHJlcXVlc3RTYW5kYm94SW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNoZWNrSWZDYW5jZWxsZWQoY2FuY2VsRmxhZywgcmVqZWN0KTtcbiAgICAgICAgICAgIGZldGNoKFwiaHR0cHM6Ly9yZXJvYm90cy5uZXQvZWFwaS9oYXJkc2hhcmUvXCIuY29uY2F0KGNvZGVyaS5oYXJkc2hhcmVPLCBcIi9cIikuY29uY2F0KGNvZGVyaS5oYXJkc2hhcmVJZCksIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLnVybCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0luc3RhbmNlUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd19ub29wOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3ZHM6IHBheWxvYWQud2RzLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmVfZDogcGF5bG9hZC5leHBpcmVfZC5hbm9uLFxuICAgICAgICAgICAgICAgICAgICBrZWVwYWxpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoY29kZXJpLnJlcG9VcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5zdGFuY2VQYXJhbXMucmVwbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogY29kZXJpLnJlcG9VcmwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlcmkucmVwb1NjcmlwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5zdGFuY2VQYXJhbXMucmVwby5wYXRoID0gY29kZXJpLnJlcG9TY3JpcHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlIHx8IChjb2RlcmkuaW5zdGFuY2UgPSB7fSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjb2RlcmkuaW5zdGFuY2UsIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzdHBhdGg6IHBheWxvYWQuZGVzdHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IHBheWxvYWQuYnRuX2NvbW1hbmQgfHwgJ2VjaG8gXCJubyBydW4gY29tbWFuZCBzZXRcIicsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goJ2h0dHBzOi8vYXBpLnJlcm9ib3RzLm5ldC9uZXcnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIi5jb25jYXQoY29kZXJpLmluc3RhbmNlLnRva2VuKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld0luc3RhbmNlUGFyYW1zKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIGNoZWNrSWZDYW5jZWxsZWQoY2FuY2VsRmxhZyk7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLnVybCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlIHx8IChjb2RlcmkuaW5zdGFuY2UgPSB7fSk7XG4gICAgICAgICAgICAgICAgKDAsIHJlcm9ib3RzXzEuaW5zdGFuY2VLZWVwQWxpdmUpKHBheWxvYWQuaWQsIGNvZGVyaS5pbnN0YW5jZS50b2tlbik7XG4gICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlLmlkID0gcGF5bG9hZC5pZDtcbiAgICAgICAgICAgICAgICBjb2RlcmkuaW5zdGFuY2Uuc3RhdHVzID0gJ0lOSVQnO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoY29kZXJpKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyID09PSAnY2FuY2VsJykge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIHJldHJ5Q291bnRlcisrO1xuICAgICAgICAgICAgICAgIGlmIChyZXRyeUNvdW50ZXIgPiA4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocmVxdWVzdFNhbmRib3hJbmZvLCAxMDAwICogTWF0aC5wb3coMiwgcmV0cnlDb3VudGVyKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdFNhbmRib3hJbmZvKCk7XG4gICAgfSk7XG59XG5leHBvcnRzLmxhdW5jaEluc3RhbmNlID0gbGF1bmNoSW5zdGFuY2U7XG5mdW5jdGlvbiBwcmVwYXJlU2hlbGwoY29kZXJpLCBjYW5jZWxGbGFnKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoY29kZXJpLmhhcmRzaGFyZU8gPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlIHx8IChjb2RlcmkuaW5zdGFuY2UgPSB7fSk7XG4gICAgICAgICAgICAoX2EgPSBjb2RlcmkuaW5zdGFuY2UpLmFkZG9ucyB8fCAoX2EuYWRkb25zID0ge30pO1xuICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlLmFkZG9ucy5jbWRzaCA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlKGNvZGVyaSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJldHJ5Q291bnRlciA9IDA7XG4gICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICBjaGVja0lmQ2FuY2VsbGVkKGNhbmNlbEZsYWcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCEoKF9hID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWQpIHx8ICEoKF9iID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9rZW4pKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcigncHJlcGFyZVNoZWxsIGNhbGxlZCB3aXRob3V0IGluc3RhbmNlIElEL3Rva2VuJyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZldGNoKFwiaHR0cHM6Ly9hcGkucmVyb2JvdHMubmV0L2FkZG9uL2NtZHNoL1wiLmNvbmNhdChjb2RlcmkuaW5zdGFuY2UuaWQpLCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIi5jb25jYXQoY29kZXJpLmluc3RhbmNlLnRva2VuKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXMuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbm90Zm91bmQnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMudXJsKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIHZhciBfYztcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdub3Rmb3VuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9hID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWQpIHx8ICEoKF9iID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9rZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ3ByZXBhcmVTaGVsbCBjYWxsZWQgd2l0aG91dCBpbnN0YW5jZSBJRC90b2tlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmV0Y2goJ2h0dHBzOi8vYXBpLnJlcm9ib3RzLm5ldC9hZGRvbi9jbWRzaC8nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVyaS5pbnN0YW5jZS5pZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogXCJCZWFyZXIgXCIuY29uY2F0KGNvZGVyaS5pbnN0YW5jZS50b2tlbiksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudGVyKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXRyeUNvdW50ZXIgPiAzMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltZW91dDogY29tbWFuZCBzaGVsbCBkaWQgbm90IHN0YXJ0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIGNvZGVyaS5pbnN0YW5jZSB8fCAoY29kZXJpLmluc3RhbmNlID0ge30pO1xuICAgICAgICAgICAgICAgICAgICAoX2MgPSBjb2RlcmkuaW5zdGFuY2UpLmFkZG9ucyB8fCAoX2MuYWRkb25zID0ge30pO1xuICAgICAgICAgICAgICAgICAgICBjb2RlcmkuaW5zdGFuY2UuYWRkb25zLmNtZHNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjb2RlcmkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudGVyKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXRyeUNvdW50ZXIgPiAzMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltZW91dDogY29tbWFuZCBzaGVsbCBkaWQgbm90IGJlY29tZSBhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIgPT09ICdjYW5jZWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgIH0pO1xufVxuZXhwb3J0cy5wcmVwYXJlU2hlbGwgPSBwcmVwYXJlU2hlbGw7XG5mdW5jdGlvbiBjcmVhdGVNaXN0eVByb3h5KGNvZGVyaSwgY2FuY2VsRmxhZykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGNvZGVyaS5oYXJkc2hhcmVPID09PSAndGVzdCcpIHtcbiAgICAgICAgICAgIGNvZGVyaS5pbnN0YW5jZSB8fCAoY29kZXJpLmluc3RhbmNlID0ge30pO1xuICAgICAgICAgICAgKF9hID0gY29kZXJpLmluc3RhbmNlKS5hZGRvbnMgfHwgKF9hLmFkZG9ucyA9IHt9KTtcbiAgICAgICAgICAgIGNvZGVyaS5pbnN0YW5jZS5hZGRvbnMubWlzdHlwcm94eSA9ICdodHRwOi8vbG9jYWxob3N0L21pc3R5cHJveHknO1xuICAgICAgICAgICAgcmVzb2x2ZShjb2RlcmkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXRyeUNvdW50ZXIgPSAwO1xuICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghKChfYSA9IGNvZGVyaS5pbnN0YW5jZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlkKSB8fCAhKChfYiA9IGNvZGVyaS5pbnN0YW5jZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRva2VuKSkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ3ByZXBhcmVTaGVsbCBjYWxsZWQgd2l0aG91dCBpbnN0YW5jZSBJRC90b2tlbicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9hcGkucmVyb2JvdHMubmV0L2FkZG9uL21pc3R5cHJveHkvJyArXG4gICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlLmlkLCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIi5jb25jYXQoY29kZXJpLmluc3RhbmNlLnRva2VuKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXMuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbm90Zm91bmQnIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMudXJsKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIHZhciBfYztcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdub3Rmb3VuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9hID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWQpIHx8ICEoKF9iID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9rZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ3ByZXBhcmVTaGVsbCBjYWxsZWQgd2l0aG91dCBpbnN0YW5jZSBJRC90b2tlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmV0Y2goJ2h0dHBzOi8vYXBpLnJlcm9ib3RzLm5ldC9hZGRvbi9taXN0eXByb3h5LycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlLmlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIi5jb25jYXQoY29kZXJpLmluc3RhbmNlLnRva2VuKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXRyeUNvdW50ZXIrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnRlciA+IDMwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aW1lb3V0OiBtaXN0eXByb3h5IGRpZCBub3Qgc3RhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuc3RhdHVzID09PSAnYWN0aXZlJykge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlIHx8IChjb2RlcmkuaW5zdGFuY2UgPSB7fSk7XG4gICAgICAgICAgICAgICAgICAgIChfYyA9IGNvZGVyaS5pbnN0YW5jZSkuYWRkb25zIHx8IChfYy5hZGRvbnMgPSB7fSk7XG4gICAgICAgICAgICAgICAgICAgIGNvZGVyaS5pbnN0YW5jZS5hZGRvbnMubWlzdHlwcm94eSA9IGRhdGEudXJsWzFdO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNvZGVyaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXRyeUNvdW50ZXIrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnRlciA+IDMwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aW1lb3V0OiBtaXN0eXByb3h5IG5vdCBhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIgPT09ICdjYW5jZWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgIH0pO1xufVxuZXhwb3J0cy5jcmVhdGVNaXN0eVByb3h5ID0gY3JlYXRlTWlzdHlQcm94eTtcbmZ1bmN0aW9uIGdldEluc3RhbmNlSW5mbyhjb2RlcmksIGNhbmNlbEZsYWcpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBpZiAoY29kZXJpLmhhcmRzaGFyZU8gPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgaWQ6ICcxOTI2Yjg1OC0wZDAwLTRiODQtYjdjYS01YzU2YmU4ODA1MjUnLCAvLyBmYWtlXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnUkVBRFknLFxuICAgICAgICAgICAgICAgIGV4cGlyYXRpb246IERhdGUubm93KCkgKyAzMDBlMywgLy8gNSBtaW51dGVzIGluIGZ1dHVyZVxuICAgICAgICAgICAgICAgIHRva2VuOiAnZmFrZScsXG4gICAgICAgICAgICAgICAgdG9rZW42NDogJ2Zha2ViNjQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoKF9hID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWQpIHx8ICEoKF9iID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudG9rZW4pKSB7XG4gICAgICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdnZXRJbnN0YW5jZUluZm8gY2FsbGVkIHdpdGhvdXQgaW5zdGFuY2UgSUQvdG9rZW4nKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbnN0YW5jZUlkID0gY29kZXJpLmluc3RhbmNlLmlkO1xuICAgICAgICB2YXIgdG9rZW4gPSBjb2RlcmkuaW5zdGFuY2UudG9rZW47XG4gICAgICAgIHZhciByZXRyeUNvdW50ZXIgPSAwO1xuICAgICAgICB2YXIgcmVxdWVzdEluc3RhbmNlSW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZldGNoKFwiaHR0cHM6Ly9hcGkucmVyb2JvdHMubmV0L2luc3RhbmNlL1wiLmNvbmNhdChpbnN0YW5jZUlkKSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogXCJCZWFyZXIgXCIuY29uY2F0KHRva2VuKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tJZkNhbmNlbGxlZChjYW5jZWxGbGFnKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLnVybCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBwYXlsb2FkLmlkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHBheWxvYWQuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uOiBuZXcgRGF0ZShcIlwiLmNvbmNhdChwYXlsb2FkLmV4cGlyZXMsIFwiWlwiKSkudmFsdWVPZigpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIgPT09ICdjYW5jZWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgcmV0cnlDb3VudGVyKys7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnRlciA+IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChyZXF1ZXN0SW5zdGFuY2VJbmZvLCAxMDAwICogTWF0aC5wb3coMiwgcmV0cnlDb3VudGVyKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdEluc3RhbmNlSW5mbygpO1xuICAgIH0pO1xufVxuZXhwb3J0cy5nZXRJbnN0YW5jZUluZm8gPSBnZXRJbnN0YW5jZUluZm87XG5mdW5jdGlvbiBhdHRhY2hDYW1lcmFTdHJlYW0oY29kZXJpLCByb290LCBlbCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgaWYgKGNvZGVyaS5oYXJkc2hhcmVPID09PSAndGVzdCcpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBpZiAoISgoX2EgPSBjb2RlcmkuaW5zdGFuY2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pZCkgfHwgISgoX2IgPSBjb2RlcmkuaW5zdGFuY2UpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50b2tlbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdhdHRhY2hDYW1lcmFTdHJlYW0gY2FsbGVkIHdpdGhvdXQgaW5zdGFuY2UgSUQvdG9rZW4nKTtcbiAgICB9XG4gICAgdmFyIGluc3RhbmNlSWQgPSBjb2RlcmkuaW5zdGFuY2UuaWQ7XG4gICAgdmFyIHRva2VuID0gY29kZXJpLmluc3RhbmNlLnRva2VuO1xuICAgIHZhciB0b2tlbjY0ID0gY29kZXJpLmluc3RhbmNlLnRva2VuNjQ7XG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcGkucmVyb2JvdHMubmV0L2FkZG9uL2NhbS9cIi5jb25jYXQoaW5zdGFuY2VJZCksIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogXCJCZWFyZXIgXCIuY29uY2F0KHRva2VuKSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlcy51cmwpO1xuICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICAgIGlmIChwYXlsb2FkLnN0YXR1cyA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgdmFyIGNhbVdzID0gbmV3IFdlYlNvY2tldChcIndzczovL2FwaS5yZXJvYm90cy5uZXQvYWRkb24vY2FtL1wiLmNvbmNhdChpbnN0YW5jZUlkLCBcIi8wL2ZlZWQvXCIpLmNvbmNhdCh0b2tlbjY0KSk7XG4gICAgICAgICAgICBjYW1Xcy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZWwuc3JjID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cbmV4cG9ydHMuYXR0YWNoQ2FtZXJhU3RyZWFtID0gYXR0YWNoQ2FtZXJhU3RyZWFtO1xuZnVuY3Rpb24gdGVybWluYXRlSW5zdGFuY2UoY29kZXJpKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAoY29kZXJpLmhhcmRzaGFyZU8gPT09ICd0ZXN0Jykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGlmICghKChfYSA9IGNvZGVyaS5pbnN0YW5jZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlkKSB8fCAhKChfYiA9IGNvZGVyaS5pbnN0YW5jZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRva2VuKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Rlcm1pbmF0ZUluc3RhbmNlIGNhbGxlZCB3aXRob3V0IGluc3RhbmNlIElEL3Rva2VuJyk7XG4gICAgfVxuICAgIHZhciBpbnN0YW5jZUlkID0gY29kZXJpLmluc3RhbmNlLmlkO1xuICAgIHZhciB0b2tlbiA9IGNvZGVyaS5pbnN0YW5jZS50b2tlbjtcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL2FwaS5yZXJvYm90cy5uZXQvdGVybWluYXRlL1wiLmNvbmNhdChpbnN0YW5jZUlkKSwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogXCJCZWFyZXIgXCIuY29uY2F0KHRva2VuKSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLnVybCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmV4cG9ydHMudGVybWluYXRlSW5zdGFuY2UgPSB0ZXJtaW5hdGVJbnN0YW5jZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/hardshare.ts\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.parsePrelude = exports.initCodeRuntimeInfo = exports.prepareSnippet = exports.loadAll = void 0;\nvar init_1 = __webpack_require__(/*! ./init */ \"./src/init.ts\");\nObject.defineProperty(exports, \"loadAll\", ({ enumerable: true, get: function () { return init_1.loadAll; } }));\nObject.defineProperty(exports, \"prepareSnippet\", ({ enumerable: true, get: function () { return init_1.prepareSnippet; } }));\nvar util_1 = __webpack_require__(/*! ./util */ \"./src/util.ts\");\nObject.defineProperty(exports, \"initCodeRuntimeInfo\", ({ enumerable: true, get: function () { return util_1.initCodeRuntimeInfo; } }));\nObject.defineProperty(exports, \"parsePrelude\", ({ enumerable: true, get: function () { return util_1.parsePrelude; } }));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXgudHMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsb0JBQW9CLEdBQUcsMkJBQTJCLEdBQUcsc0JBQXNCLEdBQUcsZUFBZTtBQUM3RixhQUFhLG1CQUFPLENBQUMsNkJBQVE7QUFDN0IsMkNBQTBDLEVBQUUscUNBQXFDLDBCQUEwQixFQUFDO0FBQzVHLGtEQUFpRCxFQUFFLHFDQUFxQyxpQ0FBaUMsRUFBQztBQUMxSCxhQUFhLG1CQUFPLENBQUMsNkJBQVE7QUFDN0IsdURBQXNELEVBQUUscUNBQXFDLHNDQUFzQyxFQUFDO0FBQ3BJLGdEQUErQyxFQUFFLHFDQUFxQywrQkFBK0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9zcmMvaW5kZXgudHM/ZTk0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGFyc2VQcmVsdWRlID0gZXhwb3J0cy5pbml0Q29kZVJ1bnRpbWVJbmZvID0gZXhwb3J0cy5wcmVwYXJlU25pcHBldCA9IGV4cG9ydHMubG9hZEFsbCA9IHZvaWQgMDtcbnZhciBpbml0XzEgPSByZXF1aXJlKFwiLi9pbml0XCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwibG9hZEFsbFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5pdF8xLmxvYWRBbGw7IH0gfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJwcmVwYXJlU25pcHBldFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5pdF8xLnByZXBhcmVTbmlwcGV0OyB9IH0pO1xudmFyIHV0aWxfMSA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJpbml0Q29kZVJ1bnRpbWVJbmZvXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB1dGlsXzEuaW5pdENvZGVSdW50aW1lSW5mbzsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInBhcnNlUHJlbHVkZVwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdXRpbF8xLnBhcnNlUHJlbHVkZTsgfSB9KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/indexAutoload.ts":
/*!******************************!*\
  !*** ./src/indexAutoload.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n__exportStar(__webpack_require__(/*! ./ */ \"./src/index.ts\"), exports);\nvar init_1 = __webpack_require__(/*! ./init */ \"./src/init.ts\");\n(0, init_1.loadAll)();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXhBdXRvbG9hZC50cyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvQ0FBb0M7QUFDbkQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxhQUFhLG1CQUFPLENBQUMsMEJBQUk7QUFDekIsYUFBYSxtQkFBTyxDQUFDLDZCQUFRO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZG9jc2xhYi8uL3NyYy9pbmRleEF1dG9sb2FkLnRzPzUyNTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9cIiksIGV4cG9ydHMpO1xudmFyIGluaXRfMSA9IHJlcXVpcmUoXCIuL2luaXRcIik7XG4oMCwgaW5pdF8xLmxvYWRBbGwpKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/indexAutoload.ts\n");

/***/ }),

/***/ "./src/init.ts":
/*!*********************!*\
  !*** ./src/init.ts ***!
  \*********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.loadAll = exports.prepareSnippet = void 0;\nvar ace = __importStar(__webpack_require__(/*! ace-code */ \"./node_modules/ace-code/src/ace.js\"));\nvar aceCppMode = __importStar(__webpack_require__(/*! ace-code/src/mode/c_cpp */ \"./node_modules/ace-code/src/mode/c_cpp.js\"));\nvar acePythonMode = __importStar(__webpack_require__(/*! ace-code/src/mode/python */ \"./node_modules/ace-code/src/mode/python.js\"));\nvar aceShMode = __importStar(__webpack_require__(/*! ace-code/src/mode/sh */ \"./node_modules/ace-code/src/mode/sh.js\"));\n__webpack_require__(/*! ./main.css */ \"./src/main.css\");\nvar sandbox_1 = __webpack_require__(/*! ./sandbox */ \"./src/sandbox.ts\");\nvar util_1 = __webpack_require__(/*! ./util */ \"./src/util.ts\");\nvar highlightMap = {\n    c_cpp: aceCppMode,\n    python: acePythonMode,\n    sh: aceShMode,\n};\nfunction showAllCode(coderi, editor) {\n    if (!coderi.lineRange ||\n        !coderi.exampleCode ||\n        !coderi.startShowIndex ||\n        !coderi.endShowIndex) {\n        throw new Error('cannot show all code');\n    }\n    var originalRegion = coderi.exampleCode.substring(coderi.startShowIndex, coderi.endShowIndex);\n    var possiblyEditedRegion = editor.getValue();\n    if (originalRegion === possiblyEditedRegion) {\n        editor.setValue(coderi.exampleCode, -1);\n    }\n    else {\n        var exampleCode = coderi.exampleCode.substring(0, coderi.startShowIndex) +\n            possiblyEditedRegion +\n            coderi.exampleCode.substring(coderi.endShowIndex);\n        editor.setValue(exampleCode, -1);\n    }\n    editor.setOption('firstLineNumber', 1);\n    if (coderi.maxLine) {\n        editor.setOption('maxLines', coderi.maxLine);\n    }\n}\nfunction hideSurroundingCode(coderi, editor) {\n    if (!coderi.lineRange || !coderi.exampleCode || !coderi.startShowIndex) {\n        throw new Error('cannot hide surrounding code');\n    }\n    var region = editor.getValue()\n        ? editor\n            .getValue()\n            .substring(coderi.startShowIndex, coderi.endShowIndex)\n        : coderi.exampleCode.substring(coderi.startShowIndex, coderi.endShowIndex);\n    editor.setOption('firstLineNumber', coderi.lineRange[0]);\n    editor.setValue(region, -1);\n    editor.setOption('maxLines', coderi.lineRange[1] - coderi.lineRange[0] + 1);\n}\n// If codeRuntimeInfo is provided, then do not read values from given element.\nfunction prepareSnippet(root, codeRuntimeInfo, syntaxHighlight) {\n    var _this = this;\n    var coderi = codeRuntimeInfo || (0, util_1.parseRootData)(root) || (0, util_1.initCodeRuntimeInfo)();\n    if (coderi.hardshareO === '') {\n        var pm = (0, util_1.parsePrelude)(root.innerText);\n        if (!pm.hardshare) {\n            throw new Error('hardshare path not defined');\n        }\n        coderi.hardshareO = pm.hardshare.hardshareO;\n        coderi.hardshareId = pm.hardshare.hardshareId;\n        coderi.command = pm.command;\n        coderi.destpath = pm.destpath;\n        coderi.repoUrl = pm.repoUrl;\n        coderi.repoScript = pm.repoScript;\n        coderi.urlfile = pm.urlfile;\n        coderi.exampleCode = pm.exampleCode;\n        coderi.lineRange = pm.lineRange;\n        coderi.refUrl = pm.refUrl;\n        var exampleBlockElement = root.getElementsByTagName('code')[0];\n        if (exampleBlockElement) {\n            if (!syntaxHighlight &&\n                exampleBlockElement.className.startsWith('language-')) {\n                syntaxHighlight = exampleBlockElement.className.substring(9);\n            }\n            root.removeChild(exampleBlockElement);\n        }\n        var newRoot = document.createElement('div');\n        newRoot.className = root.className;\n        root.replaceWith(newRoot);\n        root = newRoot;\n    }\n    var editorDiv = document.createElement('div');\n    editorDiv.className = 'docslabEditor';\n    root.appendChild(editorDiv);\n    if (coderi.runEnv === 'py' && !syntaxHighlight) {\n        syntaxHighlight = 'python';\n    }\n    var editor = ace.edit(editorDiv);\n    if (syntaxHighlight) {\n        if (syntaxHighlight === 'c' || syntaxHighlight === 'cpp') {\n            syntaxHighlight = 'c_cpp';\n        }\n        else if (syntaxHighlight === 'bash') {\n            syntaxHighlight = 'sh';\n        }\n        if (!Object.keys(highlightMap).includes(syntaxHighlight)) {\n            console.log('Unknown syntax highlighting mode:', syntaxHighlight);\n        }\n        else {\n            editor.session.setMode(new highlightMap[syntaxHighlight].Mode());\n        }\n    }\n    var controlPanel = document.createElement('div');\n    controlPanel.className = 'docslabPanel';\n    var runButton = document.createElement('button');\n    runButton.innerText = 'Run';\n    runButton.classList.add('dl-runButton');\n    controlPanel.appendChild(runButton);\n    var resetShowingAllCode = null;\n    var initialShowCode = function () {\n        var _a;\n        if (coderi.lineRange && coderi.exampleCode) {\n            _a = (0, util_1.getCodeRegion)(coderi.exampleCode, coderi.lineRange, '\\n'), coderi.startShowIndex = _a[0], coderi.endShowIndex = _a[1], coderi.maxLine = _a[2];\n            if (coderi.lineRange[1] === -1) {\n                coderi.lineRange[1] = coderi.maxLine;\n            }\n            hideSurroundingCode(coderi, editor);\n            var showAllButton_1 = document.createElement('button');\n            showAllButton_1.innerText = 'Show all';\n            controlPanel.appendChild(showAllButton_1);\n            var showingAllCode_1 = false;\n            showAllButton_1.addEventListener('click', function () {\n                if (showingAllCode_1) {\n                    showingAllCode_1 = false;\n                    hideSurroundingCode(coderi, editor);\n                    showAllButton_1.innerText = 'Show all';\n                }\n                else {\n                    showingAllCode_1 = true;\n                    showAllCode(coderi, editor);\n                    showAllButton_1.innerText = 'Hide surrounding code';\n                }\n            });\n            resetShowingAllCode = function () {\n                if (showingAllCode_1) {\n                    showingAllCode_1 = false;\n                    showAllButton_1.innerText = 'Show all';\n                }\n            };\n        }\n        else {\n            editor.setValue(coderi.exampleCode || '', -1);\n        }\n    };\n    if (coderi.urlfile) {\n        fetch(coderi.urlfile)\n            .then(function (res) {\n            if (res.ok) {\n                return res.text();\n            }\n            throw new Error(res.url);\n        })\n            .then(function (text) {\n            coderi.exampleCode = text;\n            initialShowCode();\n        })\n            .catch(function (err) {\n            console.log(err);\n        });\n    }\n    else if (coderi.exampleCode) {\n        initialShowCode();\n    }\n    if (coderi.readOnly) {\n        editor.setReadOnly(true);\n    }\n    var resetButton;\n    if (!coderi.readOnly) {\n        resetButton = document.createElement('button');\n        resetButton.innerText = 'Reset code';\n        resetButton.classList.add('dl-resetButton');\n        controlPanel.appendChild(resetButton);\n        resetButton.addEventListener('click', function () {\n            coderi.exampleCode || (coderi.exampleCode = '');\n            editor.setValue(coderi.exampleCode, -1);\n            if (resetShowingAllCode) {\n                resetShowingAllCode();\n                hideSurroundingCode(coderi, editor);\n            }\n        });\n    }\n    var statusBar = document.createElement('span');\n    statusBar.className = 'docslabStatus';\n    controlPanel.appendChild(statusBar);\n    var moreInfoSection = document.createElement('div');\n    moreInfoSection.className = 'docslabMoreInfo';\n    if (coderi.refUrl || coderi.repoUrl) {\n        var refUrl = coderi.refUrl || coderi.repoUrl;\n        var repoUrlLink = document.createElement('a');\n        repoUrlLink.href = refUrl;\n        repoUrlLink.target = '_blank';\n        repoUrlLink.innerText = 'go to repository';\n        repoUrlLink.className = 'docslabRepo';\n        moreInfoSection.appendChild(repoUrlLink);\n    }\n    var poweredBy = document.createElement('span');\n    poweredBy.innerHTML =\n        'powered by <a href=\"https://github.com/rerobots/docslab\" target=\"_blank\">docslab</a>';\n    poweredBy.className = 'docslabPowered';\n    moreInfoSection.appendChild(poweredBy);\n    controlPanel.appendChild(moreInfoSection);\n    root.appendChild(controlPanel);\n    var terminationTimeout = null;\n    var assignTerminationTimeout = function (x) {\n        terminationTimeout = x;\n    };\n    var initRunButton = function () {\n        var runButtonCallback = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (terminationTimeout !== null) {\n                            clearTimeout(terminationTimeout);\n                        }\n                        runButton.removeEventListener('click', runButtonCallback);\n                        return [4 /*yield*/, (0, sandbox_1.runCode)(coderi, controlPanel, editor, runButton, initRunButton, statusBar, assignTerminationTimeout)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        runButton.addEventListener('click', runButtonCallback);\n    };\n    initRunButton();\n    for (var k = 0; k < root.children.length; k++) {\n        if (root.children[k].tagName.toUpperCase() === 'A') {\n            root.removeChild(root.children[k]);\n            break;\n        }\n    }\n}\nexports.prepareSnippet = prepareSnippet;\nfunction loadAll() {\n    var codeBlocks = document.getElementsByClassName('docslab');\n    for (var j = 0; j < codeBlocks.length; j++) {\n        prepareSnippet(codeBlocks[j]);\n    }\n}\nexports.loadAll = loadAll;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5pdC50cyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxvQ0FBb0M7QUFDbkQ7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsMENBQTBDLDRCQUE0QjtBQUN0RSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsaUJBQWlCLG9EQUFvRCxxRUFBcUUsY0FBYztBQUN4Six1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxtQ0FBbUMsU0FBUztBQUM1QyxtQ0FBbUMsV0FBVyxVQUFVO0FBQ3hELDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0EsOEdBQThHLE9BQU87QUFDckgsaUZBQWlGLGlCQUFpQjtBQUNsRyx5REFBeUQsZ0JBQWdCLFFBQVE7QUFDakYsK0NBQStDLGdCQUFnQixnQkFBZ0I7QUFDL0U7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLFVBQVUsWUFBWSxhQUFhLFNBQVMsVUFBVTtBQUN0RCxvQ0FBb0MsU0FBUztBQUM3QztBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGVBQWUsR0FBRyxzQkFBc0I7QUFDeEMsdUJBQXVCLG1CQUFPLENBQUMsb0RBQVU7QUFDekMsOEJBQThCLG1CQUFPLENBQUMsMEVBQXlCO0FBQy9ELGlDQUFpQyxtQkFBTyxDQUFDLDRFQUEwQjtBQUNuRSw2QkFBNkIsbUJBQU8sQ0FBQyxvRUFBc0I7QUFDM0QsbUJBQU8sQ0FBQyxrQ0FBWTtBQUNwQixnQkFBZ0IsbUJBQU8sQ0FBQyxtQ0FBVztBQUNuQyxhQUFhLG1CQUFPLENBQUMsNkJBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBCQUEwQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLG9CQUFvQix1QkFBdUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsZUFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2RvY3NsYWIvLi9zcmMvaW5pdC50cz8zODkyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmxvYWRBbGwgPSBleHBvcnRzLnByZXBhcmVTbmlwcGV0ID0gdm9pZCAwO1xudmFyIGFjZSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiYWNlLWNvZGVcIikpO1xudmFyIGFjZUNwcE1vZGUgPSBfX2ltcG9ydFN0YXIocmVxdWlyZShcImFjZS1jb2RlL3NyYy9tb2RlL2NfY3BwXCIpKTtcbnZhciBhY2VQeXRob25Nb2RlID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJhY2UtY29kZS9zcmMvbW9kZS9weXRob25cIikpO1xudmFyIGFjZVNoTW9kZSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiYWNlLWNvZGUvc3JjL21vZGUvc2hcIikpO1xucmVxdWlyZShcIi4vbWFpbi5jc3NcIik7XG52YXIgc2FuZGJveF8xID0gcmVxdWlyZShcIi4vc2FuZGJveFwiKTtcbnZhciB1dGlsXzEgPSByZXF1aXJlKFwiLi91dGlsXCIpO1xudmFyIGhpZ2hsaWdodE1hcCA9IHtcbiAgICBjX2NwcDogYWNlQ3BwTW9kZSxcbiAgICBweXRob246IGFjZVB5dGhvbk1vZGUsXG4gICAgc2g6IGFjZVNoTW9kZSxcbn07XG5mdW5jdGlvbiBzaG93QWxsQ29kZShjb2RlcmksIGVkaXRvcikge1xuICAgIGlmICghY29kZXJpLmxpbmVSYW5nZSB8fFxuICAgICAgICAhY29kZXJpLmV4YW1wbGVDb2RlIHx8XG4gICAgICAgICFjb2Rlcmkuc3RhcnRTaG93SW5kZXggfHxcbiAgICAgICAgIWNvZGVyaS5lbmRTaG93SW5kZXgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3Qgc2hvdyBhbGwgY29kZScpO1xuICAgIH1cbiAgICB2YXIgb3JpZ2luYWxSZWdpb24gPSBjb2RlcmkuZXhhbXBsZUNvZGUuc3Vic3RyaW5nKGNvZGVyaS5zdGFydFNob3dJbmRleCwgY29kZXJpLmVuZFNob3dJbmRleCk7XG4gICAgdmFyIHBvc3NpYmx5RWRpdGVkUmVnaW9uID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgaWYgKG9yaWdpbmFsUmVnaW9uID09PSBwb3NzaWJseUVkaXRlZFJlZ2lvbikge1xuICAgICAgICBlZGl0b3Iuc2V0VmFsdWUoY29kZXJpLmV4YW1wbGVDb2RlLCAtMSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgZXhhbXBsZUNvZGUgPSBjb2RlcmkuZXhhbXBsZUNvZGUuc3Vic3RyaW5nKDAsIGNvZGVyaS5zdGFydFNob3dJbmRleCkgK1xuICAgICAgICAgICAgcG9zc2libHlFZGl0ZWRSZWdpb24gK1xuICAgICAgICAgICAgY29kZXJpLmV4YW1wbGVDb2RlLnN1YnN0cmluZyhjb2RlcmkuZW5kU2hvd0luZGV4KTtcbiAgICAgICAgZWRpdG9yLnNldFZhbHVlKGV4YW1wbGVDb2RlLCAtMSk7XG4gICAgfVxuICAgIGVkaXRvci5zZXRPcHRpb24oJ2ZpcnN0TGluZU51bWJlcicsIDEpO1xuICAgIGlmIChjb2RlcmkubWF4TGluZSkge1xuICAgICAgICBlZGl0b3Iuc2V0T3B0aW9uKCdtYXhMaW5lcycsIGNvZGVyaS5tYXhMaW5lKTtcbiAgICB9XG59XG5mdW5jdGlvbiBoaWRlU3Vycm91bmRpbmdDb2RlKGNvZGVyaSwgZWRpdG9yKSB7XG4gICAgaWYgKCFjb2RlcmkubGluZVJhbmdlIHx8ICFjb2RlcmkuZXhhbXBsZUNvZGUgfHwgIWNvZGVyaS5zdGFydFNob3dJbmRleCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBoaWRlIHN1cnJvdW5kaW5nIGNvZGUnKTtcbiAgICB9XG4gICAgdmFyIHJlZ2lvbiA9IGVkaXRvci5nZXRWYWx1ZSgpXG4gICAgICAgID8gZWRpdG9yXG4gICAgICAgICAgICAuZ2V0VmFsdWUoKVxuICAgICAgICAgICAgLnN1YnN0cmluZyhjb2Rlcmkuc3RhcnRTaG93SW5kZXgsIGNvZGVyaS5lbmRTaG93SW5kZXgpXG4gICAgICAgIDogY29kZXJpLmV4YW1wbGVDb2RlLnN1YnN0cmluZyhjb2Rlcmkuc3RhcnRTaG93SW5kZXgsIGNvZGVyaS5lbmRTaG93SW5kZXgpO1xuICAgIGVkaXRvci5zZXRPcHRpb24oJ2ZpcnN0TGluZU51bWJlcicsIGNvZGVyaS5saW5lUmFuZ2VbMF0pO1xuICAgIGVkaXRvci5zZXRWYWx1ZShyZWdpb24sIC0xKTtcbiAgICBlZGl0b3Iuc2V0T3B0aW9uKCdtYXhMaW5lcycsIGNvZGVyaS5saW5lUmFuZ2VbMV0gLSBjb2RlcmkubGluZVJhbmdlWzBdICsgMSk7XG59XG4vLyBJZiBjb2RlUnVudGltZUluZm8gaXMgcHJvdmlkZWQsIHRoZW4gZG8gbm90IHJlYWQgdmFsdWVzIGZyb20gZ2l2ZW4gZWxlbWVudC5cbmZ1bmN0aW9uIHByZXBhcmVTbmlwcGV0KHJvb3QsIGNvZGVSdW50aW1lSW5mbywgc3ludGF4SGlnaGxpZ2h0KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB2YXIgY29kZXJpID0gY29kZVJ1bnRpbWVJbmZvIHx8ICgwLCB1dGlsXzEucGFyc2VSb290RGF0YSkocm9vdCkgfHwgKDAsIHV0aWxfMS5pbml0Q29kZVJ1bnRpbWVJbmZvKSgpO1xuICAgIGlmIChjb2RlcmkuaGFyZHNoYXJlTyA9PT0gJycpIHtcbiAgICAgICAgdmFyIHBtID0gKDAsIHV0aWxfMS5wYXJzZVByZWx1ZGUpKHJvb3QuaW5uZXJUZXh0KTtcbiAgICAgICAgaWYgKCFwbS5oYXJkc2hhcmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaGFyZHNoYXJlIHBhdGggbm90IGRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlcmkuaGFyZHNoYXJlTyA9IHBtLmhhcmRzaGFyZS5oYXJkc2hhcmVPO1xuICAgICAgICBjb2RlcmkuaGFyZHNoYXJlSWQgPSBwbS5oYXJkc2hhcmUuaGFyZHNoYXJlSWQ7XG4gICAgICAgIGNvZGVyaS5jb21tYW5kID0gcG0uY29tbWFuZDtcbiAgICAgICAgY29kZXJpLmRlc3RwYXRoID0gcG0uZGVzdHBhdGg7XG4gICAgICAgIGNvZGVyaS5yZXBvVXJsID0gcG0ucmVwb1VybDtcbiAgICAgICAgY29kZXJpLnJlcG9TY3JpcHQgPSBwbS5yZXBvU2NyaXB0O1xuICAgICAgICBjb2RlcmkudXJsZmlsZSA9IHBtLnVybGZpbGU7XG4gICAgICAgIGNvZGVyaS5leGFtcGxlQ29kZSA9IHBtLmV4YW1wbGVDb2RlO1xuICAgICAgICBjb2RlcmkubGluZVJhbmdlID0gcG0ubGluZVJhbmdlO1xuICAgICAgICBjb2RlcmkucmVmVXJsID0gcG0ucmVmVXJsO1xuICAgICAgICB2YXIgZXhhbXBsZUJsb2NrRWxlbWVudCA9IHJvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2NvZGUnKVswXTtcbiAgICAgICAgaWYgKGV4YW1wbGVCbG9ja0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICghc3ludGF4SGlnaGxpZ2h0ICYmXG4gICAgICAgICAgICAgICAgZXhhbXBsZUJsb2NrRWxlbWVudC5jbGFzc05hbWUuc3RhcnRzV2l0aCgnbGFuZ3VhZ2UtJykpIHtcbiAgICAgICAgICAgICAgICBzeW50YXhIaWdobGlnaHQgPSBleGFtcGxlQmxvY2tFbGVtZW50LmNsYXNzTmFtZS5zdWJzdHJpbmcoOSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb290LnJlbW92ZUNoaWxkKGV4YW1wbGVCbG9ja0VsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdSb290ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG5ld1Jvb3QuY2xhc3NOYW1lID0gcm9vdC5jbGFzc05hbWU7XG4gICAgICAgIHJvb3QucmVwbGFjZVdpdGgobmV3Um9vdCk7XG4gICAgICAgIHJvb3QgPSBuZXdSb290O1xuICAgIH1cbiAgICB2YXIgZWRpdG9yRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWRpdG9yRGl2LmNsYXNzTmFtZSA9ICdkb2NzbGFiRWRpdG9yJztcbiAgICByb290LmFwcGVuZENoaWxkKGVkaXRvckRpdik7XG4gICAgaWYgKGNvZGVyaS5ydW5FbnYgPT09ICdweScgJiYgIXN5bnRheEhpZ2hsaWdodCkge1xuICAgICAgICBzeW50YXhIaWdobGlnaHQgPSAncHl0aG9uJztcbiAgICB9XG4gICAgdmFyIGVkaXRvciA9IGFjZS5lZGl0KGVkaXRvckRpdik7XG4gICAgaWYgKHN5bnRheEhpZ2hsaWdodCkge1xuICAgICAgICBpZiAoc3ludGF4SGlnaGxpZ2h0ID09PSAnYycgfHwgc3ludGF4SGlnaGxpZ2h0ID09PSAnY3BwJykge1xuICAgICAgICAgICAgc3ludGF4SGlnaGxpZ2h0ID0gJ2NfY3BwJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzeW50YXhIaWdobGlnaHQgPT09ICdiYXNoJykge1xuICAgICAgICAgICAgc3ludGF4SGlnaGxpZ2h0ID0gJ3NoJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKGhpZ2hsaWdodE1hcCkuaW5jbHVkZXMoc3ludGF4SGlnaGxpZ2h0KSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Vua25vd24gc3ludGF4IGhpZ2hsaWdodGluZyBtb2RlOicsIHN5bnRheEhpZ2hsaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlZGl0b3Iuc2Vzc2lvbi5zZXRNb2RlKG5ldyBoaWdobGlnaHRNYXBbc3ludGF4SGlnaGxpZ2h0XS5Nb2RlKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBjb250cm9sUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250cm9sUGFuZWwuY2xhc3NOYW1lID0gJ2RvY3NsYWJQYW5lbCc7XG4gICAgdmFyIHJ1bkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHJ1bkJ1dHRvbi5pbm5lclRleHQgPSAnUnVuJztcbiAgICBydW5CdXR0b24uY2xhc3NMaXN0LmFkZCgnZGwtcnVuQnV0dG9uJyk7XG4gICAgY29udHJvbFBhbmVsLmFwcGVuZENoaWxkKHJ1bkJ1dHRvbik7XG4gICAgdmFyIHJlc2V0U2hvd2luZ0FsbENvZGUgPSBudWxsO1xuICAgIHZhciBpbml0aWFsU2hvd0NvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGNvZGVyaS5saW5lUmFuZ2UgJiYgY29kZXJpLmV4YW1wbGVDb2RlKSB7XG4gICAgICAgICAgICBfYSA9ICgwLCB1dGlsXzEuZ2V0Q29kZVJlZ2lvbikoY29kZXJpLmV4YW1wbGVDb2RlLCBjb2RlcmkubGluZVJhbmdlLCAnXFxuJyksIGNvZGVyaS5zdGFydFNob3dJbmRleCA9IF9hWzBdLCBjb2RlcmkuZW5kU2hvd0luZGV4ID0gX2FbMV0sIGNvZGVyaS5tYXhMaW5lID0gX2FbMl07XG4gICAgICAgICAgICBpZiAoY29kZXJpLmxpbmVSYW5nZVsxXSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb2RlcmkubGluZVJhbmdlWzFdID0gY29kZXJpLm1heExpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoaWRlU3Vycm91bmRpbmdDb2RlKGNvZGVyaSwgZWRpdG9yKTtcbiAgICAgICAgICAgIHZhciBzaG93QWxsQnV0dG9uXzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIHNob3dBbGxCdXR0b25fMS5pbm5lclRleHQgPSAnU2hvdyBhbGwnO1xuICAgICAgICAgICAgY29udHJvbFBhbmVsLmFwcGVuZENoaWxkKHNob3dBbGxCdXR0b25fMSk7XG4gICAgICAgICAgICB2YXIgc2hvd2luZ0FsbENvZGVfMSA9IGZhbHNlO1xuICAgICAgICAgICAgc2hvd0FsbEJ1dHRvbl8xLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChzaG93aW5nQWxsQ29kZV8xKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dpbmdBbGxDb2RlXzEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaGlkZVN1cnJvdW5kaW5nQ29kZShjb2RlcmksIGVkaXRvcik7XG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGxCdXR0b25fMS5pbm5lclRleHQgPSAnU2hvdyBhbGwnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd2luZ0FsbENvZGVfMSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGxDb2RlKGNvZGVyaSwgZWRpdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0FsbEJ1dHRvbl8xLmlubmVyVGV4dCA9ICdIaWRlIHN1cnJvdW5kaW5nIGNvZGUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzZXRTaG93aW5nQWxsQ29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvd2luZ0FsbENvZGVfMSkge1xuICAgICAgICAgICAgICAgICAgICBzaG93aW5nQWxsQ29kZV8xID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGxCdXR0b25fMS5pbm5lclRleHQgPSAnU2hvdyBhbGwnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUoY29kZXJpLmV4YW1wbGVDb2RlIHx8ICcnLCAtMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmIChjb2RlcmkudXJsZmlsZSkge1xuICAgICAgICBmZXRjaChjb2RlcmkudXJsZmlsZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnRleHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXMudXJsKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgICAgICBjb2RlcmkuZXhhbXBsZUNvZGUgPSB0ZXh0O1xuICAgICAgICAgICAgaW5pdGlhbFNob3dDb2RlKCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVyaS5leGFtcGxlQ29kZSkge1xuICAgICAgICBpbml0aWFsU2hvd0NvZGUoKTtcbiAgICB9XG4gICAgaWYgKGNvZGVyaS5yZWFkT25seSkge1xuICAgICAgICBlZGl0b3Iuc2V0UmVhZE9ubHkodHJ1ZSk7XG4gICAgfVxuICAgIHZhciByZXNldEJ1dHRvbjtcbiAgICBpZiAoIWNvZGVyaS5yZWFkT25seSkge1xuICAgICAgICByZXNldEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICByZXNldEJ1dHRvbi5pbm5lclRleHQgPSAnUmVzZXQgY29kZSc7XG4gICAgICAgIHJlc2V0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RsLXJlc2V0QnV0dG9uJyk7XG4gICAgICAgIGNvbnRyb2xQYW5lbC5hcHBlbmRDaGlsZChyZXNldEJ1dHRvbik7XG4gICAgICAgIHJlc2V0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29kZXJpLmV4YW1wbGVDb2RlIHx8IChjb2RlcmkuZXhhbXBsZUNvZGUgPSAnJyk7XG4gICAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUoY29kZXJpLmV4YW1wbGVDb2RlLCAtMSk7XG4gICAgICAgICAgICBpZiAocmVzZXRTaG93aW5nQWxsQ29kZSkge1xuICAgICAgICAgICAgICAgIHJlc2V0U2hvd2luZ0FsbENvZGUoKTtcbiAgICAgICAgICAgICAgICBoaWRlU3Vycm91bmRpbmdDb2RlKGNvZGVyaSwgZWRpdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBzdGF0dXNCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgc3RhdHVzQmFyLmNsYXNzTmFtZSA9ICdkb2NzbGFiU3RhdHVzJztcbiAgICBjb250cm9sUGFuZWwuYXBwZW5kQ2hpbGQoc3RhdHVzQmFyKTtcbiAgICB2YXIgbW9yZUluZm9TZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbW9yZUluZm9TZWN0aW9uLmNsYXNzTmFtZSA9ICdkb2NzbGFiTW9yZUluZm8nO1xuICAgIGlmIChjb2RlcmkucmVmVXJsIHx8IGNvZGVyaS5yZXBvVXJsKSB7XG4gICAgICAgIHZhciByZWZVcmwgPSBjb2RlcmkucmVmVXJsIHx8IGNvZGVyaS5yZXBvVXJsO1xuICAgICAgICB2YXIgcmVwb1VybExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIHJlcG9VcmxMaW5rLmhyZWYgPSByZWZVcmw7XG4gICAgICAgIHJlcG9VcmxMaW5rLnRhcmdldCA9ICdfYmxhbmsnO1xuICAgICAgICByZXBvVXJsTGluay5pbm5lclRleHQgPSAnZ28gdG8gcmVwb3NpdG9yeSc7XG4gICAgICAgIHJlcG9VcmxMaW5rLmNsYXNzTmFtZSA9ICdkb2NzbGFiUmVwbyc7XG4gICAgICAgIG1vcmVJbmZvU2VjdGlvbi5hcHBlbmRDaGlsZChyZXBvVXJsTGluayk7XG4gICAgfVxuICAgIHZhciBwb3dlcmVkQnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgcG93ZXJlZEJ5LmlubmVySFRNTCA9XG4gICAgICAgICdwb3dlcmVkIGJ5IDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vcmVyb2JvdHMvZG9jc2xhYlwiIHRhcmdldD1cIl9ibGFua1wiPmRvY3NsYWI8L2E+JztcbiAgICBwb3dlcmVkQnkuY2xhc3NOYW1lID0gJ2RvY3NsYWJQb3dlcmVkJztcbiAgICBtb3JlSW5mb1NlY3Rpb24uYXBwZW5kQ2hpbGQocG93ZXJlZEJ5KTtcbiAgICBjb250cm9sUGFuZWwuYXBwZW5kQ2hpbGQobW9yZUluZm9TZWN0aW9uKTtcbiAgICByb290LmFwcGVuZENoaWxkKGNvbnRyb2xQYW5lbCk7XG4gICAgdmFyIHRlcm1pbmF0aW9uVGltZW91dCA9IG51bGw7XG4gICAgdmFyIGFzc2lnblRlcm1pbmF0aW9uVGltZW91dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHRlcm1pbmF0aW9uVGltZW91dCA9IHg7XG4gICAgfTtcbiAgICB2YXIgaW5pdFJ1bkJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJ1bkJ1dHRvbkNhbGxiYWNrID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmF0aW9uVGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0ZXJtaW5hdGlvblRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcnVuQnV0dG9uQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIHNhbmRib3hfMS5ydW5Db2RlKShjb2RlcmksIGNvbnRyb2xQYW5lbCwgZWRpdG9yLCBydW5CdXR0b24sIGluaXRSdW5CdXR0b24sIHN0YXR1c0JhciwgYXNzaWduVGVybWluYXRpb25UaW1lb3V0KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHJ1bkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJ1bkJ1dHRvbkNhbGxiYWNrKTtcbiAgICB9O1xuICAgIGluaXRSdW5CdXR0b24oKTtcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IHJvb3QuY2hpbGRyZW4ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgaWYgKHJvb3QuY2hpbGRyZW5ba10udGFnTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnQScpIHtcbiAgICAgICAgICAgIHJvb3QucmVtb3ZlQ2hpbGQocm9vdC5jaGlsZHJlbltrXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMucHJlcGFyZVNuaXBwZXQgPSBwcmVwYXJlU25pcHBldDtcbmZ1bmN0aW9uIGxvYWRBbGwoKSB7XG4gICAgdmFyIGNvZGVCbG9ja3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkb2NzbGFiJyk7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb2RlQmxvY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHByZXBhcmVTbmlwcGV0KGNvZGVCbG9ja3Nbal0pO1xuICAgIH1cbn1cbmV4cG9ydHMubG9hZEFsbCA9IGxvYWRBbGw7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/init.ts\n");

/***/ }),

/***/ "./src/sandbox.ts":
/*!************************!*\
  !*** ./src/sandbox.ts ***!
  \************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.runCode = void 0;\nvar xterm_1 = __webpack_require__(/*! @xterm/xterm */ \"./node_modules/@xterm/xterm/lib/xterm.js\");\n__webpack_require__(/*! @xterm/xterm/css/xterm.css */ \"./node_modules/@xterm/xterm/css/xterm.css\");\nvar addon_attach_1 = __webpack_require__(/*! @xterm/addon-attach */ \"./node_modules/@xterm/addon-attach/lib/addon-attach.js\");\nvar addon_fit_1 = __webpack_require__(/*! @xterm/addon-fit */ \"./node_modules/@xterm/addon-fit/lib/addon-fit.js\");\nvar pyodide_1 = __webpack_require__(/*! pyodide */ \"./node_modules/pyodide/pyodide.js\");\nvar hardshare_1 = __webpack_require__(/*! ./hardshare */ \"./src/hardshare.ts\");\nfunction runCode(coderi, controlPanel, editor, runButton, initRunButton, statusBar, assignTerminationTimeout) {\n    var _a, _b, _c, _d;\n    return __awaiter(this, void 0, void 0, function () {\n        var keyboardInterruptButton, clearTerminalButton, teardownButton, pyodide, term, fitAddon, termDiv, root, cameraImg, runButtonCallback, cancelFlag, cleanUp, tokens, instanceStatusWatcherFn_1, instanceStatusWatcher_1, command_1, cmdshWs_1, attachAddon, instanceId_1, token_1, command_2, destpath_1, err_1;\n        var _this = this;\n        return __generator(this, function (_e) {\n            switch (_e.label) {\n                case 0:\n                    keyboardInterruptButton = document.createElement('button');\n                    keyboardInterruptButton.innerText = 'Interrupt';\n                    keyboardInterruptButton.classList.add('dl-interruptButton');\n                    controlPanel.insertBefore(keyboardInterruptButton, statusBar);\n                    clearTerminalButton = document.createElement('button');\n                    clearTerminalButton.innerText = 'Clear terminal';\n                    clearTerminalButton.classList.add('dl-clearTerminalButton');\n                    controlPanel.insertBefore(clearTerminalButton, statusBar);\n                    teardownButton = document.createElement('button');\n                    teardownButton.innerText = 'Teardown sandbox';\n                    teardownButton.classList.add('dl-teardownButton');\n                    controlPanel.insertBefore(teardownButton, statusBar);\n                    statusBar.innerText = 'Searching for available hardware...';\n                    pyodide = null;\n                    term = new xterm_1.Terminal();\n                    fitAddon = new addon_fit_1.FitAddon();\n                    term.loadAddon(fitAddon);\n                    termDiv = document.createElement('div');\n                    termDiv.classList.add('dl-terminalContainer');\n                    root = controlPanel.parentElement;\n                    root.appendChild(termDiv);\n                    term.open(termDiv);\n                    fitAddon.fit();\n                    cameraImg = document.createElement('img');\n                    cameraImg.classList.add('dl-cameraImg');\n                    clearTerminalButton.addEventListener('click', function () {\n                        term.reset();\n                    });\n                    runButtonCallback = null;\n                    cancelFlag = {\n                        cancelled: false,\n                    };\n                    cleanUp = function () {\n                        cancelFlag.cancelled = true;\n                        if (runButtonCallback) {\n                            runButton.removeEventListener('click', runButtonCallback);\n                        }\n                        term.dispose();\n                        termDiv.remove();\n                        teardownButton.remove();\n                        keyboardInterruptButton.remove();\n                        clearTerminalButton.remove();\n                        cameraImg.remove();\n                        initRunButton();\n                        statusBar.innerText = '';\n                    };\n                    teardownButton.addEventListener('click', cleanUp);\n                    _e.label = 1;\n                case 1:\n                    _e.trys.push([1, 8, , 9]);\n                    return [4 /*yield*/, (0, hardshare_1.getApiToken)(coderi.hardshareO, coderi.hardshareId, cancelFlag)];\n                case 2:\n                    tokens = _e.sent();\n                    coderi.instance = {\n                        token: tokens[0],\n                        token64: tokens[1],\n                    };\n                    return [4 /*yield*/, (0, hardshare_1.launchInstance)(coderi, cancelFlag)];\n                case 3:\n                    _e.sent();\n                    instanceStatusWatcherFn_1 = function (instanceStatusWatcher) {\n                        if (teardownButton.parentElement === null) {\n                            clearInterval(instanceStatusWatcher);\n                            return;\n                        }\n                        (0, hardshare_1.getInstanceInfo)(coderi)\n                            .then(function (payload) {\n                            var _a;\n                            if (teardownButton.parentElement === null) {\n                                clearInterval(instanceStatusWatcher);\n                                return;\n                            }\n                            if (payload.status === 'READY' &&\n                                ((_a = coderi.instance) === null || _a === void 0 ? void 0 : _a.status) === 'INIT') {\n                                clearInterval(instanceStatusWatcher);\n                                var instanceStatusWatcherSlow_1 = setInterval(function () {\n                                    instanceStatusWatcherFn_1(instanceStatusWatcherSlow_1);\n                                }, 10000);\n                                (0, hardshare_1.attachCameraStream)(coderi, root, cameraImg);\n                            }\n                            coderi.instance || (coderi.instance = {});\n                            coderi.instance.status = payload.status;\n                            if (!coderi.instance.expiration) {\n                                coderi.instance.expiration = payload.expiration;\n                            }\n                            if (payload.status !== 'INIT' &&\n                                payload.status !== 'READY') {\n                                statusBar.innerText = 'Instance terminated.';\n                                if (runButtonCallback) {\n                                    runButton.removeEventListener('click', runButtonCallback);\n                                    runButtonCallback = null;\n                                }\n                                clearInterval(instanceStatusWatcher);\n                            }\n                            else if (coderi.instance.expiration &&\n                                (coderi.instance.expiration - Date.now()) / 1000.0 <= 60) {\n                                statusBar.innerText =\n                                    'Less than 60 seconds of access remaining';\n                            }\n                        })\n                            .catch(function (err) {\n                            console.log(err);\n                            clearInterval(instanceStatusWatcher);\n                        });\n                    };\n                    instanceStatusWatcher_1 = setInterval(function () {\n                        instanceStatusWatcherFn_1(instanceStatusWatcher_1);\n                    }, 1000);\n                    teardownButton.addEventListener('click', function () {\n                        var timeout = setTimeout(function () {\n                            assignTerminationTimeout(null);\n                            (0, hardshare_1.terminateInstance)(coderi);\n                        }, 3000);\n                        assignTerminationTimeout(timeout);\n                    });\n                    statusBar.innerText = 'Hardware reserved; preparing sandbox...';\n                    if (!(coderi.runEnv === 'ssh' || ((_a = coderi.addons) === null || _a === void 0 ? void 0 : _a.includes('cmdsh')))) return [3 /*break*/, 5];\n                    return [4 /*yield*/, (0, hardshare_1.prepareShell)(coderi, cancelFlag)];\n                case 4:\n                    _e.sent();\n                    _e.label = 5;\n                case 5:\n                    if (!((_b = coderi.addons) === null || _b === void 0 ? void 0 : _b.includes('mistyproxy'))) return [3 /*break*/, 7];\n                    return [4 /*yield*/, (0, hardshare_1.createMistyProxy)(coderi, cancelFlag)];\n                case 6:\n                    _e.sent();\n                    _e.label = 7;\n                case 7:\n                    if (!((_c = coderi.instance) === null || _c === void 0 ? void 0 : _c.id) || !((_d = coderi.instance) === null || _d === void 0 ? void 0 : _d.token)) {\n                        throw new Error('cannot create ssh terminal without ID/token');\n                    }\n                    if (coderi.command) {\n                        coderi.instance.command = coderi.command;\n                    }\n                    if (coderi.destpath) {\n                        coderi.instance.destpath = coderi.destpath;\n                    }\n                    if (coderi.runEnv === 'py') {\n                        runButtonCallback = function () { return __awaiter(_this, void 0, void 0, function () {\n                            var stdout, stderr, codeBlob, err_2;\n                            var _a;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        if (!coderi.instance) {\n                                            // Ignore if no instance data\n                                            return [2 /*return*/];\n                                        }\n                                        if (!!pyodide) return [3 /*break*/, 2];\n                                        stdout = function (msg) {\n                                            term.writeln(msg);\n                                        };\n                                        stderr = function (msg) {\n                                            term.writeln(msg);\n                                        };\n                                        return [4 /*yield*/, (0, pyodide_1.loadPyodide)({\n                                                // TODO: indexURL: `${window.location.origin}/pyodide`,\n                                                indexURL: \"https://cdn.jsdelivr.net/pyodide/v\".concat(pyodide_1.version, \"/full/\"),\n                                                stdout: stdout,\n                                                stderr: stderr,\n                                            })];\n                                    case 1:\n                                        pyodide = _b.sent();\n                                        _b.label = 2;\n                                    case 2:\n                                        codeBlob = editor.getValue();\n                                        if ((_a = coderi.instance.addons) === null || _a === void 0 ? void 0 : _a.mistyproxy) {\n                                            codeBlob = codeBlob.replace(/{{ MISTY_URL }}/g, coderi.instance.addons.mistyproxy);\n                                        }\n                                        _b.label = 3;\n                                    case 3:\n                                        _b.trys.push([3, 5, , 6]);\n                                        return [4 /*yield*/, pyodide.loadPackagesFromImports(codeBlob)];\n                                    case 4:\n                                        _b.sent();\n                                        pyodide.runPython(codeBlob);\n                                        return [3 /*break*/, 6];\n                                    case 5:\n                                        err_2 = _b.sent();\n                                        console.error(err_2);\n                                        return [3 /*break*/, 6];\n                                    case 6: return [2 /*return*/];\n                                }\n                            });\n                        }); };\n                        runButtonCallback();\n                        runButton.addEventListener('click', runButtonCallback);\n                        statusBar.innerText = '';\n                    }\n                    else {\n                        // coderi.runEnv === 'ssh'\n                        if (coderi.hardshareO === 'test') {\n                            command_1 = coderi.instance.command;\n                            runButtonCallback = function () {\n                                term.write(\"\".concat(String.fromCharCode(3), \"bash -c '\").concat(command_1, \"'\\r\"));\n                            };\n                        }\n                        else {\n                            cmdshWs_1 = new WebSocket(\"wss://api.rerobots.net/addon/cmdsh/\".concat(coderi.instance.id, \"/new/\").concat(coderi.instance.token64));\n                            keyboardInterruptButton.addEventListener('click', function () {\n                                cmdshWs_1.send(String.fromCharCode(3));\n                            });\n                            attachAddon = new addon_attach_1.AttachAddon(cmdshWs_1, {\n                                bidirectional: !coderi.readOnly,\n                            });\n                            term.loadAddon(attachAddon);\n                            instanceId_1 = coderi.instance.id;\n                            token_1 = coderi.instance.token;\n                            command_2 = coderi.instance.command;\n                            destpath_1 = coderi.instance.destpath;\n                            runButtonCallback = function () {\n                                fetch('https://api.rerobots.net/addon/cmdsh/' +\n                                    instanceId_1 +\n                                    '/file', {\n                                    method: 'POST',\n                                    headers: {\n                                        Authorization: \"Bearer \".concat(token_1),\n                                        'Content-Type': 'application/json',\n                                    },\n                                    body: JSON.stringify({\n                                        path: destpath_1,\n                                        data: editor.getValue(),\n                                    }),\n                                }).then(function (res) {\n                                    if (res.ok) {\n                                        cmdshWs_1.send(String.fromCharCode(3));\n                                        cmdshWs_1.send(\"bash -c '\".concat(command_2, \"'\\r\"));\n                                        return;\n                                    }\n                                    throw new Error(res.url);\n                                });\n                            };\n                            cmdshWs_1.addEventListener('open', function () {\n                                if (runButtonCallback) {\n                                    runButtonCallback();\n                                }\n                            });\n                        }\n                        runButton.addEventListener('click', runButtonCallback);\n                        statusBar.innerText = '';\n                    }\n                    return [3 /*break*/, 9];\n                case 8:\n                    err_1 = _e.sent();\n                    if (err_1) {\n                        console.error(err_1);\n                    }\n                    if (!cancelFlag.cancelled) {\n                        cleanUp();\n                        statusBar.innerText = 'None available; try again soon.';\n                    }\n                    // If cancelFlag.cancelled true, then cleanUp() was already called\n                    return [2 /*return*/];\n                case 9: return [2 /*return*/];\n            }\n        });\n    });\n}\nexports.runCode = runCode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2FuZGJveC50cyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGNBQWMsNkJBQTZCLDBCQUEwQixjQUFjLHFCQUFxQjtBQUN4RyxpQkFBaUIsb0RBQW9ELHFFQUFxRSxjQUFjO0FBQ3hKLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxXQUFXLFVBQVU7QUFDeEQsMENBQTBDLGNBQWM7QUFDeEQ7QUFDQSw4R0FBOEcsT0FBTztBQUNySCxpRkFBaUYsaUJBQWlCO0FBQ2xHLHlEQUF5RCxnQkFBZ0IsUUFBUTtBQUNqRiwrQ0FBK0MsZ0JBQWdCLGdCQUFnQjtBQUMvRTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0EsVUFBVSxZQUFZLGFBQWEsU0FBUyxVQUFVO0FBQ3RELG9DQUFvQyxTQUFTO0FBQzdDO0FBQ0E7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsZUFBZTtBQUNmLGNBQWMsbUJBQU8sQ0FBQyw4REFBYztBQUNwQyxtQkFBTyxDQUFDLDZFQUE0QjtBQUNwQyxxQkFBcUIsbUJBQU8sQ0FBQyxtRkFBcUI7QUFDbEQsa0JBQWtCLG1CQUFPLENBQUMsMEVBQWtCO0FBQzVDLGdCQUFnQixtQkFBTyxDQUFDLGtEQUFTO0FBQ2pDLGtCQUFrQixtQkFBTyxDQUFDLHVDQUFhO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLG9FQUFvRTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHFCQUFxQjtBQUNyQiw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSx1QkFBdUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSxZQUFZO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLGVBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vc3JjL3NhbmRib3gudHM/ZmU0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucnVuQ29kZSA9IHZvaWQgMDtcbnZhciB4dGVybV8xID0gcmVxdWlyZShcIkB4dGVybS94dGVybVwiKTtcbnJlcXVpcmUoXCJAeHRlcm0veHRlcm0vY3NzL3h0ZXJtLmNzc1wiKTtcbnZhciBhZGRvbl9hdHRhY2hfMSA9IHJlcXVpcmUoXCJAeHRlcm0vYWRkb24tYXR0YWNoXCIpO1xudmFyIGFkZG9uX2ZpdF8xID0gcmVxdWlyZShcIkB4dGVybS9hZGRvbi1maXRcIik7XG52YXIgcHlvZGlkZV8xID0gcmVxdWlyZShcInB5b2RpZGVcIik7XG52YXIgaGFyZHNoYXJlXzEgPSByZXF1aXJlKFwiLi9oYXJkc2hhcmVcIik7XG5mdW5jdGlvbiBydW5Db2RlKGNvZGVyaSwgY29udHJvbFBhbmVsLCBlZGl0b3IsIHJ1bkJ1dHRvbiwgaW5pdFJ1bkJ1dHRvbiwgc3RhdHVzQmFyLCBhc3NpZ25UZXJtaW5hdGlvblRpbWVvdXQpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2V5Ym9hcmRJbnRlcnJ1cHRCdXR0b24sIGNsZWFyVGVybWluYWxCdXR0b24sIHRlYXJkb3duQnV0dG9uLCBweW9kaWRlLCB0ZXJtLCBmaXRBZGRvbiwgdGVybURpdiwgcm9vdCwgY2FtZXJhSW1nLCBydW5CdXR0b25DYWxsYmFjaywgY2FuY2VsRmxhZywgY2xlYW5VcCwgdG9rZW5zLCBpbnN0YW5jZVN0YXR1c1dhdGNoZXJGbl8xLCBpbnN0YW5jZVN0YXR1c1dhdGNoZXJfMSwgY29tbWFuZF8xLCBjbWRzaFdzXzEsIGF0dGFjaEFkZG9uLCBpbnN0YW5jZUlkXzEsIHRva2VuXzEsIGNvbW1hbmRfMiwgZGVzdHBhdGhfMSwgZXJyXzE7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2UpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2UubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkSW50ZXJydXB0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkSW50ZXJydXB0QnV0dG9uLmlubmVyVGV4dCA9ICdJbnRlcnJ1cHQnO1xuICAgICAgICAgICAgICAgICAgICBrZXlib2FyZEludGVycnVwdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdkbC1pbnRlcnJ1cHRCdXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFBhbmVsLmluc2VydEJlZm9yZShrZXlib2FyZEludGVycnVwdEJ1dHRvbiwgc3RhdHVzQmFyKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUZXJtaW5hbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRlcm1pbmFsQnV0dG9uLmlubmVyVGV4dCA9ICdDbGVhciB0ZXJtaW5hbCc7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGVybWluYWxCdXR0b24uY2xhc3NMaXN0LmFkZCgnZGwtY2xlYXJUZXJtaW5hbEJ1dHRvbicpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sUGFuZWwuaW5zZXJ0QmVmb3JlKGNsZWFyVGVybWluYWxCdXR0b24sIHN0YXR1c0Jhcik7XG4gICAgICAgICAgICAgICAgICAgIHRlYXJkb3duQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIHRlYXJkb3duQnV0dG9uLmlubmVyVGV4dCA9ICdUZWFyZG93biBzYW5kYm94JztcbiAgICAgICAgICAgICAgICAgICAgdGVhcmRvd25CdXR0b24uY2xhc3NMaXN0LmFkZCgnZGwtdGVhcmRvd25CdXR0b24nKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFBhbmVsLmluc2VydEJlZm9yZSh0ZWFyZG93bkJ1dHRvbiwgc3RhdHVzQmFyKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQmFyLmlubmVyVGV4dCA9ICdTZWFyY2hpbmcgZm9yIGF2YWlsYWJsZSBoYXJkd2FyZS4uLic7XG4gICAgICAgICAgICAgICAgICAgIHB5b2RpZGUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0ZXJtID0gbmV3IHh0ZXJtXzEuVGVybWluYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgZml0QWRkb24gPSBuZXcgYWRkb25fZml0XzEuRml0QWRkb24oKTtcbiAgICAgICAgICAgICAgICAgICAgdGVybS5sb2FkQWRkb24oZml0QWRkb24pO1xuICAgICAgICAgICAgICAgICAgICB0ZXJtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRlcm1EaXYuY2xhc3NMaXN0LmFkZCgnZGwtdGVybWluYWxDb250YWluZXInKTtcbiAgICAgICAgICAgICAgICAgICAgcm9vdCA9IGNvbnRyb2xQYW5lbC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICByb290LmFwcGVuZENoaWxkKHRlcm1EaXYpO1xuICAgICAgICAgICAgICAgICAgICB0ZXJtLm9wZW4odGVybURpdik7XG4gICAgICAgICAgICAgICAgICAgIGZpdEFkZG9uLmZpdCgpO1xuICAgICAgICAgICAgICAgICAgICBjYW1lcmFJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhSW1nLmNsYXNzTGlzdC5hZGQoJ2RsLWNhbWVyYUltZycpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRlcm1pbmFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVybS5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcnVuQnV0dG9uQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWxGbGFnID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsbGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW5VcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEZsYWcuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydW5CdXR0b25DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJ1bkJ1dHRvbkNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRlcm0uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVybURpdi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYXJkb3duQnV0dG9uLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRJbnRlcnJ1cHRCdXR0b24ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRlcm1pbmFsQnV0dG9uLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhSW1nLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFJ1bkJ1dHRvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQmFyLmlubmVyVGV4dCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0ZWFyZG93bkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsZWFuVXApO1xuICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfZS50cnlzLnB1c2goWzEsIDgsICwgOV0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCAoMCwgaGFyZHNoYXJlXzEuZ2V0QXBpVG9rZW4pKGNvZGVyaS5oYXJkc2hhcmVPLCBjb2RlcmkuaGFyZHNoYXJlSWQsIGNhbmNlbEZsYWcpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHRva2VucyA9IF9lLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRva2Vuc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuNjQ6IHRva2Vuc1sxXSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIGhhcmRzaGFyZV8xLmxhdW5jaEluc3RhbmNlKShjb2RlcmksIGNhbmNlbEZsYWcpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIF9lLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0dXNXYXRjaGVyRm5fMSA9IGZ1bmN0aW9uIChpbnN0YW5jZVN0YXR1c1dhdGNoZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZWFyZG93bkJ1dHRvbi5wYXJlbnRFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnN0YW5jZVN0YXR1c1dhdGNoZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBoYXJkc2hhcmVfMS5nZXRJbnN0YW5jZUluZm8pKGNvZGVyaSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVhcmRvd25CdXR0b24ucGFyZW50RWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGluc3RhbmNlU3RhdHVzV2F0Y2hlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQuc3RhdHVzID09PSAnUkVBRFknICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoX2EgPSBjb2RlcmkuaW5zdGFuY2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdGF0dXMpID09PSAnSU5JVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnN0YW5jZVN0YXR1c1dhdGNoZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2VTdGF0dXNXYXRjaGVyU2xvd18xID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VTdGF0dXNXYXRjaGVyRm5fMShpbnN0YW5jZVN0YXR1c1dhdGNoZXJTbG93XzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBoYXJkc2hhcmVfMS5hdHRhY2hDYW1lcmFTdHJlYW0pKGNvZGVyaSwgcm9vdCwgY2FtZXJhSW1nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlIHx8IChjb2RlcmkuaW5zdGFuY2UgPSB7fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlLnN0YXR1cyA9IHBheWxvYWQuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29kZXJpLmluc3RhbmNlLmV4cGlyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlLmV4cGlyYXRpb24gPSBwYXlsb2FkLmV4cGlyYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLnN0YXR1cyAhPT0gJ0lOSVQnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQuc3RhdHVzICE9PSAnUkVBRFknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0Jhci5pbm5lclRleHQgPSAnSW5zdGFuY2UgdGVybWluYXRlZC4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVuQnV0dG9uQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJ1bkJ1dHRvbkNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1dHRvbkNhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGluc3RhbmNlU3RhdHVzV2F0Y2hlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvZGVyaS5pbnN0YW5jZS5leHBpcmF0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjb2RlcmkuaW5zdGFuY2UuZXhwaXJhdGlvbiAtIERhdGUubm93KCkpIC8gMTAwMC4wIDw9IDYwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0Jhci5pbm5lclRleHQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xlc3MgdGhhbiA2MCBzZWNvbmRzIG9mIGFjY2VzcyByZW1haW5pbmcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW5zdGFuY2VTdGF0dXNXYXRjaGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZVN0YXR1c1dhdGNoZXJfMSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlU3RhdHVzV2F0Y2hlckZuXzEoaW5zdGFuY2VTdGF0dXNXYXRjaGVyXzEpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgdGVhcmRvd25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnblRlcm1pbmF0aW9uVGltZW91dChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgaGFyZHNoYXJlXzEudGVybWluYXRlSW5zdGFuY2UpKGNvZGVyaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnblRlcm1pbmF0aW9uVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0Jhci5pbm5lclRleHQgPSAnSGFyZHdhcmUgcmVzZXJ2ZWQ7IHByZXBhcmluZyBzYW5kYm94Li4uJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoY29kZXJpLnJ1bkVudiA9PT0gJ3NzaCcgfHwgKChfYSA9IGNvZGVyaS5hZGRvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcygnY21kc2gnKSkpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgKDAsIGhhcmRzaGFyZV8xLnByZXBhcmVTaGVsbCkoY29kZXJpLCBjYW5jZWxGbGFnKV07XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBfZS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKChfYiA9IGNvZGVyaS5hZGRvbnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pbmNsdWRlcygnbWlzdHlwcm94eScpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBoYXJkc2hhcmVfMS5jcmVhdGVNaXN0eVByb3h5KShjb2RlcmksIGNhbmNlbEZsYWcpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIF9lLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSA3O1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoKF9jID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuaWQpIHx8ICEoKF9kID0gY29kZXJpLmluc3RhbmNlKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QudG9rZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBjcmVhdGUgc3NoIHRlcm1pbmFsIHdpdGhvdXQgSUQvdG9rZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZXJpLmNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVyaS5pbnN0YW5jZS5jb21tYW5kID0gY29kZXJpLmNvbW1hbmQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGVyaS5kZXN0cGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZXJpLmluc3RhbmNlLmRlc3RwYXRoID0gY29kZXJpLmRlc3RwYXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlcmkucnVuRW52ID09PSAncHknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5CdXR0b25DYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Rkb3V0LCBzdGRlcnIsIGNvZGVCbG9iLCBlcnJfMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb2RlcmkuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGlmIG5vIGluc3RhbmNlIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFweW9kaWRlKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRvdXQgPSBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm0ud3JpdGVsbihtc2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkZXJyID0gZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtLndyaXRlbG4obXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sICgwLCBweW9kaWRlXzEubG9hZFB5b2RpZGUpKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IGluZGV4VVJMOiBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9weW9kaWRlYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4VVJMOiBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9weW9kaWRlL3ZcIi5jb25jYXQocHlvZGlkZV8xLnZlcnNpb24sIFwiL2Z1bGwvXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Rkb3V0OiBzdGRvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRlcnI6IHN0ZGVycixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB5b2RpZGUgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVCbG9iID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChfYSA9IGNvZGVyaS5pbnN0YW5jZS5hZGRvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5taXN0eXByb3h5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVCbG9iID0gY29kZUJsb2IucmVwbGFjZSgve3sgTUlTVFlfVVJMIH19L2csIGNvZGVyaS5pbnN0YW5jZS5hZGRvbnMubWlzdHlwcm94eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzMsIDUsICwgNl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHB5b2RpZGUubG9hZFBhY2thZ2VzRnJvbUltcG9ydHMoY29kZUJsb2IpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHlvZGlkZS5ydW5QeXRob24oY29kZUJsb2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyXzIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcnVuQnV0dG9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJ1bkJ1dHRvbkNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0Jhci5pbm5lclRleHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvZGVyaS5ydW5FbnYgPT09ICdzc2gnXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZXJpLmhhcmRzaGFyZU8gPT09ICd0ZXN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmRfMSA9IGNvZGVyaS5pbnN0YW5jZS5jb21tYW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1dHRvbkNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtLndyaXRlKFwiXCIuY29uY2F0KFN0cmluZy5mcm9tQ2hhckNvZGUoMyksIFwiYmFzaCAtYyAnXCIpLmNvbmNhdChjb21tYW5kXzEsIFwiJ1xcclwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNtZHNoV3NfMSA9IG5ldyBXZWJTb2NrZXQoXCJ3c3M6Ly9hcGkucmVyb2JvdHMubmV0L2FkZG9uL2NtZHNoL1wiLmNvbmNhdChjb2RlcmkuaW5zdGFuY2UuaWQsIFwiL25ldy9cIikuY29uY2F0KGNvZGVyaS5pbnN0YW5jZS50b2tlbjY0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRJbnRlcnJ1cHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNtZHNoV3NfMS5zZW5kKFN0cmluZy5mcm9tQ2hhckNvZGUoMykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaEFkZG9uID0gbmV3IGFkZG9uX2F0dGFjaF8xLkF0dGFjaEFkZG9uKGNtZHNoV3NfMSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWRpcmVjdGlvbmFsOiAhY29kZXJpLnJlYWRPbmx5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm0ubG9hZEFkZG9uKGF0dGFjaEFkZG9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkXzEgPSBjb2RlcmkuaW5zdGFuY2UuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5fMSA9IGNvZGVyaS5pbnN0YW5jZS50b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kXzIgPSBjb2RlcmkuaW5zdGFuY2UuY29tbWFuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0cGF0aF8xID0gY29kZXJpLmluc3RhbmNlLmRlc3RwYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkJ1dHRvbkNhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9hcGkucmVyb2JvdHMubmV0L2FkZG9uL2NtZHNoLycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZF8xICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcvZmlsZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IFwiQmVhcmVyIFwiLmNvbmNhdCh0b2tlbl8xKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBkZXN0cGF0aF8xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGVkaXRvci5nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNtZHNoV3NfMS5zZW5kKFN0cmluZy5mcm9tQ2hhckNvZGUoMykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNtZHNoV3NfMS5zZW5kKFwiYmFzaCAtYyAnXCIuY29uY2F0KGNvbW1hbmRfMiwgXCInXFxyXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY21kc2hXc18xLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChydW5CdXR0b25DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVuQnV0dG9uQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcnVuQnV0dG9uQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQmFyLmlubmVyVGV4dCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfZS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJfMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5jZWxGbGFnLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5VcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzQmFyLmlubmVyVGV4dCA9ICdOb25lIGF2YWlsYWJsZTsgdHJ5IGFnYWluIHNvb24uJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBjYW5jZWxGbGFnLmNhbmNlbGxlZCB0cnVlLCB0aGVuIGNsZWFuVXAoKSB3YXMgYWxyZWFkeSBjYWxsZWRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydHMucnVuQ29kZSA9IHJ1bkNvZGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/sandbox.ts\n");

/***/ }),

/***/ "./src/util.ts":
/*!*********************!*\
  !*** ./src/util.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.initCodeRuntimeInfo = exports.parseRootData = exports.parsePrelude = exports.parseHardsharePath = exports.getCodeRegion = void 0;\nfunction getCodeRegion(codeBlob, lineRange, lineEnding) {\n    if (!lineEnding) {\n        var firstLineFeed = codeBlob.indexOf('\\n');\n        if (firstLineFeed === 0) {\n            lineEnding = '\\n';\n        }\n        else if (codeBlob[firstLineFeed - 1] === '\\r') {\n            lineEnding = '\\r\\n';\n        }\n        else {\n            lineEnding = '\\n';\n        }\n    }\n    var startLineIndex;\n    var endLineIndex;\n    if (lineRange[1] === -1) {\n        endLineIndex = codeBlob.length - 1;\n    }\n    var start = 0;\n    var end = codeBlob.indexOf(lineEnding);\n    var currentLine = 0;\n    while (start < codeBlob.length) {\n        currentLine += 1;\n        if (startLineIndex === undefined && currentLine === lineRange[0]) {\n            startLineIndex = start;\n        }\n        if (endLineIndex === undefined && currentLine === lineRange[1]) {\n            endLineIndex = end;\n            break;\n        }\n        start = end + lineEnding.length;\n        if (start >= codeBlob.length) {\n            break;\n        }\n        end = codeBlob.indexOf(lineEnding, start);\n        if (end < 0) {\n            end = codeBlob.length - 1;\n        }\n    }\n    if (startLineIndex === undefined || endLineIndex === undefined) {\n        throw new Error('Line range outside given code');\n    }\n    return [startLineIndex, endLineIndex, currentLine];\n}\nexports.getCodeRegion = getCodeRegion;\nfunction parseHardsharePath(hspath) {\n    var sep = hspath.indexOf('/');\n    if (sep < 1 || sep >= hspath.length - 1) {\n        throw new Error(\"separator '/' not found in '\".concat(hspath, \"'\"));\n    }\n    return {\n        hardshareO: hspath.substring(0, sep),\n        hardshareId: hspath.substring(sep + 1),\n    };\n}\nexports.parseHardsharePath = parseHardsharePath;\nfunction parsePrelude(codeBlob) {\n    var knownKeys = [\n        'command',\n        'destpath',\n        'hardshare',\n        'lineRange',\n        'refUrl',\n        'repoScript',\n        'repoUrl',\n        'urlfile',\n    ];\n    var pm = {\n        runEnv: 'ssh',\n    };\n    var start = 0;\n    var end = codeBlob.indexOf('\\n');\n    while (end > 0) {\n        var line = codeBlob.substring(start, end).trim();\n        var previous = start;\n        start = end + 1;\n        end = codeBlob.indexOf('\\n', start);\n        if (line.startsWith('#')) {\n            line = line.replace(/#+/, '');\n        }\n        if (line.startsWith(';')) {\n            line = line.replace(/;+/, '');\n        }\n        else if (line.startsWith('/*')) {\n            var matchingEnd = line.endsWith('*/');\n            line = line.replace(/\\/\\*+/, '');\n            if (matchingEnd && !line.endsWith('*/')) {\n                // Special case for long comment lines of the form /*******/\n                line = line.substring(1);\n            }\n        }\n        else if (line.startsWith('/')) {\n            line = line.replace(/\\/+/, '');\n        }\n        if (line.endsWith('*/')) {\n            line = line.substring(0, line.length - 2);\n        }\n        line = line.trim();\n        if (line.length === 0) {\n            continue;\n        }\n        var sep = line.indexOf(':');\n        if (sep < 1) {\n            if (!line.startsWith('---')) {\n                start = previous;\n            }\n            break;\n        }\n        var key = line.substring(0, sep).trim();\n        if (!knownKeys.includes(key)) {\n            break;\n        }\n        if (key === 'lineRange') {\n            var parts = line\n                .substring(sep + 1)\n                .trim()\n                .split(',')\n                .map(function (x) { return x.trim(); });\n            if (parts.length !== 2) {\n                throw new Error('unexpected number of parameters in lineRange');\n            }\n            pm.lineRange = [Number(parts[0]), Number(parts[1])];\n            if (pm.lineRange[0] < 1) {\n                throw new Error('start line must be >= 1');\n            }\n            if (pm.lineRange[1] < -1 || pm.lineRange[1] === 0) {\n                throw new Error('end line must be -1 or >= 1');\n            }\n        }\n        else if (key === 'hardshare') {\n            pm.hardshare = parseHardsharePath(line.substring(sep + 1).trim());\n        }\n        else if (key === 'runEnv') {\n            var runEnv = line.substring(sep + 1).trim();\n            if (runEnv === 'py' || runEnv === 'ssh') {\n                pm.runEnv = runEnv;\n            }\n            else {\n                throw new Error(\"unexpected runEnv: \".concat(runEnv));\n            }\n        }\n        else if (key === 'addons') {\n            var addons = line.substring(sep + 1).trim();\n            pm.addons = addons.split(',').map(function (w) { return w.trim(); });\n        }\n        else {\n            pm[key] = line.substring(sep + 1).trim();\n        }\n    }\n    if (end > 0) {\n        pm.exampleCode = codeBlob.substring(start);\n    }\n    // Default add-ons\n    if (pm.runEnv === 'ssh' && (!pm.addons || pm.addons.length === 0)) {\n        pm.addons = ['cmdsh'];\n    }\n    return pm;\n}\nexports.parsePrelude = parsePrelude;\nfunction parseRootData(root, strict) {\n    if (!('hardshareo' in root.dataset)) {\n        if (strict) {\n            throw new Error('hardshareo not defined');\n        }\n        return null;\n    }\n    if (!('hardshareid' in root.dataset)) {\n        if (strict) {\n            throw new Error('hardshareid not defined');\n        }\n        return null;\n    }\n    var coderi = {\n        readOnly: 'readonly' in root.dataset || false,\n        hardshareO: root.dataset.hardshareo,\n        hardshareId: root.dataset.hardshareid,\n        runEnv: 'ssh',\n    };\n    var exampleBlockElement = root.getElementsByTagName('code')[0];\n    if (exampleBlockElement) {\n        coderi.exampleCode = exampleBlockElement.innerText;\n        root.removeChild(exampleBlockElement.parentElement);\n    }\n    if ('runenv' in root.dataset) {\n        if (root.dataset.runenv === 'py' || root.dataset.runenv === 'ssh') {\n            coderi.runEnv = root.dataset.runenv;\n        }\n        else {\n            throw new Error(\"unexpected runenv: \".concat(root.dataset.runenv));\n        }\n    }\n    if ('addons' in root.dataset && root.dataset.addons) {\n        coderi.addons = root.dataset.addons.split(',').map(function (w) { return w.trim(); });\n    }\n    if ('command' in root.dataset) {\n        coderi.command = root.dataset.command;\n    }\n    if ('path' in root.dataset) {\n        coderi.destpath = root.dataset.path;\n    }\n    if ('repo' in root.dataset) {\n        coderi.repoUrl = root.dataset.repo;\n    }\n    if ('refurl' in root.dataset) {\n        coderi.refUrl = root.dataset.refurl;\n    }\n    if ('iscript' in root.dataset) {\n        coderi.repoScript = root.dataset.iscript;\n    }\n    if ('urlfile' in root.dataset) {\n        coderi.urlfile = root.dataset.urlfile;\n    }\n    if ('lrange' in root.dataset && root.dataset.lrange) {\n        var parts = root.dataset.lrange.split(',').map(function (x) { return x.trim(); });\n        if (parts.length !== 2) {\n            throw new Error('unexpected number of parameters in lrange');\n        }\n        coderi.lineRange = [Number(parts[0]), Number(parts[1])];\n    }\n    // Default add-ons\n    if (coderi.runEnv === 'ssh' &&\n        (!coderi.addons || coderi.addons.length === 0)) {\n        coderi.addons = ['cmdsh'];\n    }\n    return coderi;\n}\nexports.parseRootData = parseRootData;\nfunction initCodeRuntimeInfo(readOnly, hspath) {\n    var coderi = {\n        hardshareO: '',\n        hardshareId: '',\n        readOnly: !!readOnly,\n        runEnv: 'ssh',\n    };\n    if (hspath) {\n        var hs = parseHardsharePath(hspath);\n        coderi.hardshareO = hs.hardshareO;\n        coderi.hardshareId = hs.hardshareId;\n    }\n    return coderi;\n}\nexports.initCodeRuntimeInfo = initCodeRuntimeInfo;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC50cyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCwyQkFBMkIsR0FBRyxxQkFBcUIsR0FBRyxvQkFBb0IsR0FBRywwQkFBMEIsR0FBRyxxQkFBcUI7QUFDL0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUIsa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msa0JBQWtCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGtCQUFrQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRSxrQkFBa0I7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxrQkFBa0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kb2NzbGFiLy4vc3JjL3V0aWwudHM/OTg4NyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaW5pdENvZGVSdW50aW1lSW5mbyA9IGV4cG9ydHMucGFyc2VSb290RGF0YSA9IGV4cG9ydHMucGFyc2VQcmVsdWRlID0gZXhwb3J0cy5wYXJzZUhhcmRzaGFyZVBhdGggPSBleHBvcnRzLmdldENvZGVSZWdpb24gPSB2b2lkIDA7XG5mdW5jdGlvbiBnZXRDb2RlUmVnaW9uKGNvZGVCbG9iLCBsaW5lUmFuZ2UsIGxpbmVFbmRpbmcpIHtcbiAgICBpZiAoIWxpbmVFbmRpbmcpIHtcbiAgICAgICAgdmFyIGZpcnN0TGluZUZlZWQgPSBjb2RlQmxvYi5pbmRleE9mKCdcXG4nKTtcbiAgICAgICAgaWYgKGZpcnN0TGluZUZlZWQgPT09IDApIHtcbiAgICAgICAgICAgIGxpbmVFbmRpbmcgPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb2RlQmxvYltmaXJzdExpbmVGZWVkIC0gMV0gPT09ICdcXHInKSB7XG4gICAgICAgICAgICBsaW5lRW5kaW5nID0gJ1xcclxcbic7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsaW5lRW5kaW5nID0gJ1xcbic7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHN0YXJ0TGluZUluZGV4O1xuICAgIHZhciBlbmRMaW5lSW5kZXg7XG4gICAgaWYgKGxpbmVSYW5nZVsxXSA9PT0gLTEpIHtcbiAgICAgICAgZW5kTGluZUluZGV4ID0gY29kZUJsb2IubGVuZ3RoIC0gMTtcbiAgICB9XG4gICAgdmFyIHN0YXJ0ID0gMDtcbiAgICB2YXIgZW5kID0gY29kZUJsb2IuaW5kZXhPZihsaW5lRW5kaW5nKTtcbiAgICB2YXIgY3VycmVudExpbmUgPSAwO1xuICAgIHdoaWxlIChzdGFydCA8IGNvZGVCbG9iLmxlbmd0aCkge1xuICAgICAgICBjdXJyZW50TGluZSArPSAxO1xuICAgICAgICBpZiAoc3RhcnRMaW5lSW5kZXggPT09IHVuZGVmaW5lZCAmJiBjdXJyZW50TGluZSA9PT0gbGluZVJhbmdlWzBdKSB7XG4gICAgICAgICAgICBzdGFydExpbmVJbmRleCA9IHN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRMaW5lSW5kZXggPT09IHVuZGVmaW5lZCAmJiBjdXJyZW50TGluZSA9PT0gbGluZVJhbmdlWzFdKSB7XG4gICAgICAgICAgICBlbmRMaW5lSW5kZXggPSBlbmQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdGFydCA9IGVuZCArIGxpbmVFbmRpbmcubGVuZ3RoO1xuICAgICAgICBpZiAoc3RhcnQgPj0gY29kZUJsb2IubGVuZ3RoKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbmQgPSBjb2RlQmxvYi5pbmRleE9mKGxpbmVFbmRpbmcsIHN0YXJ0KTtcbiAgICAgICAgaWYgKGVuZCA8IDApIHtcbiAgICAgICAgICAgIGVuZCA9IGNvZGVCbG9iLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0YXJ0TGluZUluZGV4ID09PSB1bmRlZmluZWQgfHwgZW5kTGluZUluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaW5lIHJhbmdlIG91dHNpZGUgZ2l2ZW4gY29kZScpO1xuICAgIH1cbiAgICByZXR1cm4gW3N0YXJ0TGluZUluZGV4LCBlbmRMaW5lSW5kZXgsIGN1cnJlbnRMaW5lXTtcbn1cbmV4cG9ydHMuZ2V0Q29kZVJlZ2lvbiA9IGdldENvZGVSZWdpb247XG5mdW5jdGlvbiBwYXJzZUhhcmRzaGFyZVBhdGgoaHNwYXRoKSB7XG4gICAgdmFyIHNlcCA9IGhzcGF0aC5pbmRleE9mKCcvJyk7XG4gICAgaWYgKHNlcCA8IDEgfHwgc2VwID49IGhzcGF0aC5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInNlcGFyYXRvciAnLycgbm90IGZvdW5kIGluICdcIi5jb25jYXQoaHNwYXRoLCBcIidcIikpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBoYXJkc2hhcmVPOiBoc3BhdGguc3Vic3RyaW5nKDAsIHNlcCksXG4gICAgICAgIGhhcmRzaGFyZUlkOiBoc3BhdGguc3Vic3RyaW5nKHNlcCArIDEpLFxuICAgIH07XG59XG5leHBvcnRzLnBhcnNlSGFyZHNoYXJlUGF0aCA9IHBhcnNlSGFyZHNoYXJlUGF0aDtcbmZ1bmN0aW9uIHBhcnNlUHJlbHVkZShjb2RlQmxvYikge1xuICAgIHZhciBrbm93bktleXMgPSBbXG4gICAgICAgICdjb21tYW5kJyxcbiAgICAgICAgJ2Rlc3RwYXRoJyxcbiAgICAgICAgJ2hhcmRzaGFyZScsXG4gICAgICAgICdsaW5lUmFuZ2UnLFxuICAgICAgICAncmVmVXJsJyxcbiAgICAgICAgJ3JlcG9TY3JpcHQnLFxuICAgICAgICAncmVwb1VybCcsXG4gICAgICAgICd1cmxmaWxlJyxcbiAgICBdO1xuICAgIHZhciBwbSA9IHtcbiAgICAgICAgcnVuRW52OiAnc3NoJyxcbiAgICB9O1xuICAgIHZhciBzdGFydCA9IDA7XG4gICAgdmFyIGVuZCA9IGNvZGVCbG9iLmluZGV4T2YoJ1xcbicpO1xuICAgIHdoaWxlIChlbmQgPiAwKSB7XG4gICAgICAgIHZhciBsaW5lID0gY29kZUJsb2Iuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLnRyaW0oKTtcbiAgICAgICAgdmFyIHByZXZpb3VzID0gc3RhcnQ7XG4gICAgICAgIHN0YXJ0ID0gZW5kICsgMTtcbiAgICAgICAgZW5kID0gY29kZUJsb2IuaW5kZXhPZignXFxuJywgc3RhcnQpO1xuICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnJlcGxhY2UoLyMrLywgJycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJzsnKSkge1xuICAgICAgICAgICAgbGluZSA9IGxpbmUucmVwbGFjZSgvOysvLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCcvKicpKSB7XG4gICAgICAgICAgICB2YXIgbWF0Y2hpbmdFbmQgPSBsaW5lLmVuZHNXaXRoKCcqLycpO1xuICAgICAgICAgICAgbGluZSA9IGxpbmUucmVwbGFjZSgvXFwvXFwqKy8sICcnKTtcbiAgICAgICAgICAgIGlmIChtYXRjaGluZ0VuZCAmJiAhbGluZS5lbmRzV2l0aCgnKi8nKSkge1xuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgbG9uZyBjb21tZW50IGxpbmVzIG9mIHRoZSBmb3JtIC8qKioqKioqL1xuICAgICAgICAgICAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgICAgICAgbGluZSA9IGxpbmUucmVwbGFjZSgvXFwvKy8sICcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGluZS5lbmRzV2l0aCgnKi8nKSkge1xuICAgICAgICAgICAgbGluZSA9IGxpbmUuc3Vic3RyaW5nKDAsIGxpbmUubGVuZ3RoIC0gMik7XG4gICAgICAgIH1cbiAgICAgICAgbGluZSA9IGxpbmUudHJpbSgpO1xuICAgICAgICBpZiAobGluZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZXAgPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICAgICAgaWYgKHNlcCA8IDEpIHtcbiAgICAgICAgICAgIGlmICghbGluZS5zdGFydHNXaXRoKCctLS0nKSkge1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gcHJldmlvdXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2YXIga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgc2VwKS50cmltKCk7XG4gICAgICAgIGlmICgha25vd25LZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXkgPT09ICdsaW5lUmFuZ2UnKSB7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBsaW5lXG4gICAgICAgICAgICAgICAgLnN1YnN0cmluZyhzZXAgKyAxKVxuICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAuc3BsaXQoJywnKVxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudHJpbSgpOyB9KTtcbiAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuZXhwZWN0ZWQgbnVtYmVyIG9mIHBhcmFtZXRlcnMgaW4gbGluZVJhbmdlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbS5saW5lUmFuZ2UgPSBbTnVtYmVyKHBhcnRzWzBdKSwgTnVtYmVyKHBhcnRzWzFdKV07XG4gICAgICAgICAgICBpZiAocG0ubGluZVJhbmdlWzBdIDwgMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnQgbGluZSBtdXN0IGJlID49IDEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwbS5saW5lUmFuZ2VbMV0gPCAtMSB8fCBwbS5saW5lUmFuZ2VbMV0gPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZCBsaW5lIG11c3QgYmUgLTEgb3IgPj0gMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ2hhcmRzaGFyZScpIHtcbiAgICAgICAgICAgIHBtLmhhcmRzaGFyZSA9IHBhcnNlSGFyZHNoYXJlUGF0aChsaW5lLnN1YnN0cmluZyhzZXAgKyAxKS50cmltKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ3J1bkVudicpIHtcbiAgICAgICAgICAgIHZhciBydW5FbnYgPSBsaW5lLnN1YnN0cmluZyhzZXAgKyAxKS50cmltKCk7XG4gICAgICAgICAgICBpZiAocnVuRW52ID09PSAncHknIHx8IHJ1bkVudiA9PT0gJ3NzaCcpIHtcbiAgICAgICAgICAgICAgICBwbS5ydW5FbnYgPSBydW5FbnY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmV4cGVjdGVkIHJ1bkVudjogXCIuY29uY2F0KHJ1bkVudikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ2FkZG9ucycpIHtcbiAgICAgICAgICAgIHZhciBhZGRvbnMgPSBsaW5lLnN1YnN0cmluZyhzZXAgKyAxKS50cmltKCk7XG4gICAgICAgICAgICBwbS5hZGRvbnMgPSBhZGRvbnMuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHcpIHsgcmV0dXJuIHcudHJpbSgpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBtW2tleV0gPSBsaW5lLnN1YnN0cmluZyhzZXAgKyAxKS50cmltKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuZCA+IDApIHtcbiAgICAgICAgcG0uZXhhbXBsZUNvZGUgPSBjb2RlQmxvYi5zdWJzdHJpbmcoc3RhcnQpO1xuICAgIH1cbiAgICAvLyBEZWZhdWx0IGFkZC1vbnNcbiAgICBpZiAocG0ucnVuRW52ID09PSAnc3NoJyAmJiAoIXBtLmFkZG9ucyB8fCBwbS5hZGRvbnMubGVuZ3RoID09PSAwKSkge1xuICAgICAgICBwbS5hZGRvbnMgPSBbJ2NtZHNoJ107XG4gICAgfVxuICAgIHJldHVybiBwbTtcbn1cbmV4cG9ydHMucGFyc2VQcmVsdWRlID0gcGFyc2VQcmVsdWRlO1xuZnVuY3Rpb24gcGFyc2VSb290RGF0YShyb290LCBzdHJpY3QpIHtcbiAgICBpZiAoISgnaGFyZHNoYXJlbycgaW4gcm9vdC5kYXRhc2V0KSkge1xuICAgICAgICBpZiAoc3RyaWN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2hhcmRzaGFyZW8gbm90IGRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCEoJ2hhcmRzaGFyZWlkJyBpbiByb290LmRhdGFzZXQpKSB7XG4gICAgICAgIGlmIChzdHJpY3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaGFyZHNoYXJlaWQgbm90IGRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIGNvZGVyaSA9IHtcbiAgICAgICAgcmVhZE9ubHk6ICdyZWFkb25seScgaW4gcm9vdC5kYXRhc2V0IHx8IGZhbHNlLFxuICAgICAgICBoYXJkc2hhcmVPOiByb290LmRhdGFzZXQuaGFyZHNoYXJlbyxcbiAgICAgICAgaGFyZHNoYXJlSWQ6IHJvb3QuZGF0YXNldC5oYXJkc2hhcmVpZCxcbiAgICAgICAgcnVuRW52OiAnc3NoJyxcbiAgICB9O1xuICAgIHZhciBleGFtcGxlQmxvY2tFbGVtZW50ID0gcm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnY29kZScpWzBdO1xuICAgIGlmIChleGFtcGxlQmxvY2tFbGVtZW50KSB7XG4gICAgICAgIGNvZGVyaS5leGFtcGxlQ29kZSA9IGV4YW1wbGVCbG9ja0VsZW1lbnQuaW5uZXJUZXh0O1xuICAgICAgICByb290LnJlbW92ZUNoaWxkKGV4YW1wbGVCbG9ja0VsZW1lbnQucGFyZW50RWxlbWVudCk7XG4gICAgfVxuICAgIGlmICgncnVuZW52JyBpbiByb290LmRhdGFzZXQpIHtcbiAgICAgICAgaWYgKHJvb3QuZGF0YXNldC5ydW5lbnYgPT09ICdweScgfHwgcm9vdC5kYXRhc2V0LnJ1bmVudiA9PT0gJ3NzaCcpIHtcbiAgICAgICAgICAgIGNvZGVyaS5ydW5FbnYgPSByb290LmRhdGFzZXQucnVuZW52O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5leHBlY3RlZCBydW5lbnY6IFwiLmNvbmNhdChyb290LmRhdGFzZXQucnVuZW52KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCdhZGRvbnMnIGluIHJvb3QuZGF0YXNldCAmJiByb290LmRhdGFzZXQuYWRkb25zKSB7XG4gICAgICAgIGNvZGVyaS5hZGRvbnMgPSByb290LmRhdGFzZXQuYWRkb25zLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uICh3KSB7IHJldHVybiB3LnRyaW0oKTsgfSk7XG4gICAgfVxuICAgIGlmICgnY29tbWFuZCcgaW4gcm9vdC5kYXRhc2V0KSB7XG4gICAgICAgIGNvZGVyaS5jb21tYW5kID0gcm9vdC5kYXRhc2V0LmNvbW1hbmQ7XG4gICAgfVxuICAgIGlmICgncGF0aCcgaW4gcm9vdC5kYXRhc2V0KSB7XG4gICAgICAgIGNvZGVyaS5kZXN0cGF0aCA9IHJvb3QuZGF0YXNldC5wYXRoO1xuICAgIH1cbiAgICBpZiAoJ3JlcG8nIGluIHJvb3QuZGF0YXNldCkge1xuICAgICAgICBjb2RlcmkucmVwb1VybCA9IHJvb3QuZGF0YXNldC5yZXBvO1xuICAgIH1cbiAgICBpZiAoJ3JlZnVybCcgaW4gcm9vdC5kYXRhc2V0KSB7XG4gICAgICAgIGNvZGVyaS5yZWZVcmwgPSByb290LmRhdGFzZXQucmVmdXJsO1xuICAgIH1cbiAgICBpZiAoJ2lzY3JpcHQnIGluIHJvb3QuZGF0YXNldCkge1xuICAgICAgICBjb2RlcmkucmVwb1NjcmlwdCA9IHJvb3QuZGF0YXNldC5pc2NyaXB0O1xuICAgIH1cbiAgICBpZiAoJ3VybGZpbGUnIGluIHJvb3QuZGF0YXNldCkge1xuICAgICAgICBjb2RlcmkudXJsZmlsZSA9IHJvb3QuZGF0YXNldC51cmxmaWxlO1xuICAgIH1cbiAgICBpZiAoJ2xyYW5nZScgaW4gcm9vdC5kYXRhc2V0ICYmIHJvb3QuZGF0YXNldC5scmFuZ2UpIHtcbiAgICAgICAgdmFyIHBhcnRzID0gcm9vdC5kYXRhc2V0LmxyYW5nZS5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC50cmltKCk7IH0pO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9PSAyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuZXhwZWN0ZWQgbnVtYmVyIG9mIHBhcmFtZXRlcnMgaW4gbHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXJpLmxpbmVSYW5nZSA9IFtOdW1iZXIocGFydHNbMF0pLCBOdW1iZXIocGFydHNbMV0pXTtcbiAgICB9XG4gICAgLy8gRGVmYXVsdCBhZGQtb25zXG4gICAgaWYgKGNvZGVyaS5ydW5FbnYgPT09ICdzc2gnICYmXG4gICAgICAgICghY29kZXJpLmFkZG9ucyB8fCBjb2RlcmkuYWRkb25zLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgY29kZXJpLmFkZG9ucyA9IFsnY21kc2gnXTtcbiAgICB9XG4gICAgcmV0dXJuIGNvZGVyaTtcbn1cbmV4cG9ydHMucGFyc2VSb290RGF0YSA9IHBhcnNlUm9vdERhdGE7XG5mdW5jdGlvbiBpbml0Q29kZVJ1bnRpbWVJbmZvKHJlYWRPbmx5LCBoc3BhdGgpIHtcbiAgICB2YXIgY29kZXJpID0ge1xuICAgICAgICBoYXJkc2hhcmVPOiAnJyxcbiAgICAgICAgaGFyZHNoYXJlSWQ6ICcnLFxuICAgICAgICByZWFkT25seTogISFyZWFkT25seSxcbiAgICAgICAgcnVuRW52OiAnc3NoJyxcbiAgICB9O1xuICAgIGlmIChoc3BhdGgpIHtcbiAgICAgICAgdmFyIGhzID0gcGFyc2VIYXJkc2hhcmVQYXRoKGhzcGF0aCk7XG4gICAgICAgIGNvZGVyaS5oYXJkc2hhcmVPID0gaHMuaGFyZHNoYXJlTztcbiAgICAgICAgY29kZXJpLmhhcmRzaGFyZUlkID0gaHMuaGFyZHNoYXJlSWQ7XG4gICAgfVxuICAgIHJldHVybiBjb2Rlcmk7XG59XG5leHBvcnRzLmluaXRDb2RlUnVudGltZUluZm8gPSBpbml0Q29kZVJ1bnRpbWVJbmZvO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/util.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/indexAutoload.ts");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});